<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /rsc/js/jquery/jquery.ui.b2evo.js source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='rsc/js/jquery';
filename='jquery.ui.b2evo.js.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/rsc/js/jquery/</a> -> <a href="jquery.ui.b2evo.js.html">jquery.ui.b2evo.js</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="jquery.ui.b2evo.js.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="jquery.ui.b2evo.js.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  <span class="comment">/*! jQuery UI - v1.10.4 - 2014-06-17</span>
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">* http://jqueryui.com</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.autocomplete.js, jquery.ui.datepicker.js, jquery.ui.menu.js, jquery.ui.effect.js, jquery.ui.effect-highlight.js, jquery.ui.effect-transfer.js</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */</span>
<a name="l5"><span class="linenum">   5</span></a>  
<a name="l6"><span class="linenum">   6</span></a>  (function( $, undefined ) {
<a name="l7"><span class="linenum">   7</span></a>  
<a name="l8"><span class="linenum">   8</span></a>  var uuid = 0,
<a name="l9"><span class="linenum">   9</span></a>      runiqueId = /^ui-id-\d+$/;
<a name="l10"><span class="linenum">  10</span></a>  
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// $.ui might exist from components with no dependencies, e.g., $.ui.position</span>
<a name="l12"><span class="linenum">  12</span></a>  $.ui = $.ui || {};
<a name="l13"><span class="linenum">  13</span></a>  
<a name="l14"><span class="linenum">  14</span></a>  $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( $.ui, {
<a name="l15"><span class="linenum">  15</span></a>      version: &quot;1.10.4&quot;,
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>      keyCode: {
<a name="l18"><span class="linenum">  18</span></a>          BACKSPACE: 8,
<a name="l19"><span class="linenum">  19</span></a>          COMMA: 188,
<a name="l20"><span class="linenum">  20</span></a>          DELETE: 46,
<a name="l21"><span class="linenum">  21</span></a>          DOWN: 40,
<a name="l22"><span class="linenum">  22</span></a>          END: 35,
<a name="l23"><span class="linenum">  23</span></a>          ENTER: 13,
<a name="l24"><span class="linenum">  24</span></a>          ESCAPE: 27,
<a name="l25"><span class="linenum">  25</span></a>          HOME: 36,
<a name="l26"><span class="linenum">  26</span></a>          LEFT: 37,
<a name="l27"><span class="linenum">  27</span></a>          NUMPAD_ADD: 107,
<a name="l28"><span class="linenum">  28</span></a>          NUMPAD_DECIMAL: 110,
<a name="l29"><span class="linenum">  29</span></a>          NUMPAD_DIVIDE: 111,
<a name="l30"><span class="linenum">  30</span></a>          NUMPAD_ENTER: 108,
<a name="l31"><span class="linenum">  31</span></a>          NUMPAD_MULTIPLY: 106,
<a name="l32"><span class="linenum">  32</span></a>          NUMPAD_SUBTRACT: 109,
<a name="l33"><span class="linenum">  33</span></a>          PAGE_DOWN: 34,
<a name="l34"><span class="linenum">  34</span></a>          PAGE_UP: 33,
<a name="l35"><span class="linenum">  35</span></a>          PERIOD: 190,
<a name="l36"><span class="linenum">  36</span></a>          RIGHT: 39,
<a name="l37"><span class="linenum">  37</span></a>          SPACE: 32,
<a name="l38"><span class="linenum">  38</span></a>          TAB: 9,
<a name="l39"><span class="linenum">  39</span></a>          UP: 38
<a name="l40"><span class="linenum">  40</span></a>      }
<a name="l41"><span class="linenum">  41</span></a>  });
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">// plugins</span>
<a name="l44"><span class="linenum">  44</span></a>  $.fn.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({
<a name="l45"><span class="linenum">  45</span></a>      focus: (function( orig ) {
<a name="l46"><span class="linenum">  46</span></a>          return function( delay, fn ) {
<a name="l47"><span class="linenum">  47</span></a>              return typeof delay === &quot;number&quot; ?
<a name="l48"><span class="linenum">  48</span></a>                  this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l49"><span class="linenum">  49</span></a>                      var elem = this;
<a name="l50"><span class="linenum">  50</span></a>                      <a class="function" onClick="logFunction('setTimeout')" href="../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l51"><span class="linenum">  51</span></a>                          $( elem ).focus();
<a name="l52"><span class="linenum">  52</span></a>                          if ( fn ) {
<a name="l53"><span class="linenum">  53</span></a>                              fn.call( elem );
<a name="l54"><span class="linenum">  54</span></a>                          }
<a name="l55"><span class="linenum">  55</span></a>                      }, delay );
<a name="l56"><span class="linenum">  56</span></a>                  }) :
<a name="l57"><span class="linenum">  57</span></a>                  orig.apply( this, arguments );
<a name="l58"><span class="linenum">  58</span></a>          };
<a name="l59"><span class="linenum">  59</span></a>      })( $.fn.focus ),
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>      scrollParent: function() {
<a name="l62"><span class="linenum">  62</span></a>          var scrollParent;
<a name="l63"><span class="linenum">  63</span></a>          if (($.ui.ie &amp;&amp; (/(static|relative)/).test(this.css(&quot;position&quot;))) || (/absolute/).test(this.css(&quot;position&quot;))) {
<a name="l64"><span class="linenum">  64</span></a>              scrollParent = this.parents().<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(function() {
<a name="l65"><span class="linenum">  65</span></a>                  return (/(relative|absolute|fixed)/).test($.css(this,&quot;position&quot;)) &amp;&amp; (/(auto|scroll)/).test($.css(this,&quot;overflow&quot;)+$.css(this,&quot;overflow-y&quot;)+$.css(this,&quot;overflow-x&quot;));
<a name="l66"><span class="linenum">  66</span></a>              }).eq(0);
<a name="l67"><span class="linenum">  67</span></a>          } else {
<a name="l68"><span class="linenum">  68</span></a>              scrollParent = this.parents().<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(function() {
<a name="l69"><span class="linenum">  69</span></a>                  return (/(auto|scroll)/).test($.css(this,&quot;overflow&quot;)+$.css(this,&quot;overflow-y&quot;)+$.css(this,&quot;overflow-x&quot;));
<a name="l70"><span class="linenum">  70</span></a>              }).eq(0);
<a name="l71"><span class="linenum">  71</span></a>          }
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>          return (/fixed/).test(this.css(&quot;position&quot;)) || !scrollParent.length ? $(document) : scrollParent;
<a name="l74"><span class="linenum">  74</span></a>      },
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>      zIndex: function( zIndex ) {
<a name="l77"><span class="linenum">  77</span></a>          if ( zIndex !== undefined ) {
<a name="l78"><span class="linenum">  78</span></a>              return this.css( &quot;zIndex&quot;, zIndex );
<a name="l79"><span class="linenum">  79</span></a>          }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>          if ( this.length ) {
<a name="l82"><span class="linenum">  82</span></a>              var elem = $( this[ 0 ] ), position, value;
<a name="l83"><span class="linenum">  83</span></a>              while ( elem.length &amp;&amp; elem[ 0 ] !== document ) {
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">                // Ignore z-index if position is set to a value where z-index is ignored by the browser</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">                // This makes behavior of this function consistent across browsers</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">                // WebKit always returns auto if the element is positioned</span>
<a name="l87"><span class="linenum">  87</span></a>                  position = elem.css( &quot;position&quot; );
<a name="l88"><span class="linenum">  88</span></a>                  if ( position === &quot;absolute&quot; || position === &quot;relative&quot; || position === &quot;fixed&quot; ) {
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">                    // IE returns 0 when zIndex is not specified</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">                    // other browsers return a string</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">                    // we ignore the case of nested elements with an explicit value of 0</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">                    // &lt;div style=&quot;z-index: -10;&quot;&gt;&lt;div style=&quot;z-index: 0;&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span>
<a name="l93"><span class="linenum">  93</span></a>                      value = parseInt( elem.css( &quot;zIndex&quot; ), 10 );
<a name="l94"><span class="linenum">  94</span></a>                      if ( !isNaN( value ) &amp;&amp; value !== 0 ) {
<a name="l95"><span class="linenum">  95</span></a>                          return value;
<a name="l96"><span class="linenum">  96</span></a>                      }
<a name="l97"><span class="linenum">  97</span></a>                  }
<a name="l98"><span class="linenum">  98</span></a>                  elem = elem.parent();
<a name="l99"><span class="linenum">  99</span></a>              }
<a name="l100"><span class="linenum"> 100</span></a>          }
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>          return 0;
<a name="l103"><span class="linenum"> 103</span></a>      },
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>      uniqueId: function() {
<a name="l106"><span class="linenum"> 106</span></a>          return this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l107"><span class="linenum"> 107</span></a>              if ( !this.id ) {
<a name="l108"><span class="linenum"> 108</span></a>                  this.id = &quot;ui-id-&quot; + (++uuid);
<a name="l109"><span class="linenum"> 109</span></a>              }
<a name="l110"><span class="linenum"> 110</span></a>          });
<a name="l111"><span class="linenum"> 111</span></a>      },
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>      removeUniqueId: function() {
<a name="l114"><span class="linenum"> 114</span></a>          return this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l115"><span class="linenum"> 115</span></a>              if ( runiqueId.test( this.id ) ) {
<a name="l116"><span class="linenum"> 116</span></a>                  $( this ).removeAttr( &quot;id&quot; );
<a name="l117"><span class="linenum"> 117</span></a>              }
<a name="l118"><span class="linenum"> 118</span></a>          });
<a name="l119"><span class="linenum"> 119</span></a>      }
<a name="l120"><span class="linenum"> 120</span></a>  });
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">// selectors</span>
<a name="l123"><span class="linenum"> 123</span></a>  function <a class="function" onClick="logFunction('focusable')" href="../../../_functions/focusable.html" onMouseOver="funcPopup(event,'focusable')">focusable</a>( element, isTabIndexNotNaN ) {
<a name="l124"><span class="linenum"> 124</span></a>      var map, mapName, img,
<a name="l125"><span class="linenum"> 125</span></a>          nodeName = element.nodeName.toLowerCase();
<a name="l126"><span class="linenum"> 126</span></a>      if ( &quot;area&quot; === nodeName ) {
<a name="l127"><span class="linenum"> 127</span></a>          map = element.parentNode;
<a name="l128"><span class="linenum"> 128</span></a>          mapName = map.name;
<a name="l129"><span class="linenum"> 129</span></a>          if ( !element.href || !mapName || map.nodeName.toLowerCase() !== &quot;map&quot; ) {
<a name="l130"><span class="linenum"> 130</span></a>              return false;
<a name="l131"><span class="linenum"> 131</span></a>          }
<a name="l132"><span class="linenum"> 132</span></a>          img = $( &quot;img[usemap=#&quot; + mapName + &quot;]&quot; )[0];
<a name="l133"><span class="linenum"> 133</span></a>          return !!img &amp;&amp; <a class="function" onClick="logFunction('visible')" href="../../../_functions/visible.html" onMouseOver="funcPopup(event,'visible')">visible</a>( img );
<a name="l134"><span class="linenum"> 134</span></a>      }
<a name="l135"><span class="linenum"> 135</span></a>      return ( /input|select|textarea|button|object/.test( nodeName ) ?
<a name="l136"><span class="linenum"> 136</span></a>          !element.disabled :
<a name="l137"><span class="linenum"> 137</span></a>          &quot;a&quot; === nodeName ?
<a name="l138"><span class="linenum"> 138</span></a>              element.href || isTabIndexNotNaN :
<a name="l139"><span class="linenum"> 139</span></a>              isTabIndexNotNaN) &amp;&amp;
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">        // the element and all of its ancestors must be visible</span>
<a name="l141"><span class="linenum"> 141</span></a>          <a class="function" onClick="logFunction('visible')" href="../../../_functions/visible.html" onMouseOver="funcPopup(event,'visible')">visible</a>( element );
<a name="l142"><span class="linenum"> 142</span></a>  }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>  function <a class="function" onClick="logFunction('visible')" href="../../../_functions/visible.html" onMouseOver="funcPopup(event,'visible')">visible</a>( element ) {
<a name="l145"><span class="linenum"> 145</span></a>      return $.expr.filters.<a class="function" onClick="logFunction('visible')" href="../../../_functions/visible.html" onMouseOver="funcPopup(event,'visible')">visible</a>( element ) &amp;&amp;
<a name="l146"><span class="linenum"> 146</span></a>          !$( element ).parents().addBack().<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(function() {
<a name="l147"><span class="linenum"> 147</span></a>              return $.css( this, &quot;visibility&quot; ) === &quot;hidden&quot;;
<a name="l148"><span class="linenum"> 148</span></a>          }).length;
<a name="l149"><span class="linenum"> 149</span></a>  }
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( $.expr[ &quot;:&quot; ], {
<a name="l152"><span class="linenum"> 152</span></a>      data: $.expr.createPseudo ?
<a name="l153"><span class="linenum"> 153</span></a>          $.expr.createPseudo(function( dataName ) {
<a name="l154"><span class="linenum"> 154</span></a>              return function( elem ) {
<a name="l155"><span class="linenum"> 155</span></a>                  return !!$.data( elem, dataName );
<a name="l156"><span class="linenum"> 156</span></a>              };
<a name="l157"><span class="linenum"> 157</span></a>          }) :
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">        // support: jQuery &lt;1.8</span>
<a name="l159"><span class="linenum"> 159</span></a>          function( elem, i, match ) {
<a name="l160"><span class="linenum"> 160</span></a>              return !!$.data( elem, match[ 3 ] );
<a name="l161"><span class="linenum"> 161</span></a>          },
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>      focusable: function( element ) {
<a name="l164"><span class="linenum"> 164</span></a>          return <a class="function" onClick="logFunction('focusable')" href="../../../_functions/focusable.html" onMouseOver="funcPopup(event,'focusable')">focusable</a>( element, !isNaN( $.attr( element, &quot;tabindex&quot; ) ) );
<a name="l165"><span class="linenum"> 165</span></a>      },
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>      tabbable: function( element ) {
<a name="l168"><span class="linenum"> 168</span></a>          var tabIndex = $.attr( element, &quot;tabindex&quot; ),
<a name="l169"><span class="linenum"> 169</span></a>              isTabIndexNaN = isNaN( tabIndex );
<a name="l170"><span class="linenum"> 170</span></a>          return ( isTabIndexNaN || tabIndex &gt;= 0 ) &amp;&amp; <a class="function" onClick="logFunction('focusable')" href="../../../_functions/focusable.html" onMouseOver="funcPopup(event,'focusable')">focusable</a>( element, !isTabIndexNaN );
<a name="l171"><span class="linenum"> 171</span></a>      }
<a name="l172"><span class="linenum"> 172</span></a>  });
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">// support: jQuery &lt;1.8</span>
<a name="l175"><span class="linenum"> 175</span></a>  if ( !$( &quot;&lt;a&gt;&quot; ).outerWidth( 1 ).jquery ) {
<a name="l176"><span class="linenum"> 176</span></a>      $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( [ &quot;Width&quot;, &quot;Height&quot; ], function( i, name ) {
<a name="l177"><span class="linenum"> 177</span></a>          var side = name === &quot;Width&quot; ? [ &quot;Left&quot;, &quot;Right&quot; ] : [ &quot;Top&quot;, &quot;Bottom&quot; ],
<a name="l178"><span class="linenum"> 178</span></a>              type = name.toLowerCase(),
<a name="l179"><span class="linenum"> 179</span></a>              orig = {
<a name="l180"><span class="linenum"> 180</span></a>                  innerWidth: $.fn.innerWidth,
<a name="l181"><span class="linenum"> 181</span></a>                  innerHeight: $.fn.innerHeight,
<a name="l182"><span class="linenum"> 182</span></a>                  outerWidth: $.fn.outerWidth,
<a name="l183"><span class="linenum"> 183</span></a>                  outerHeight: $.fn.outerHeight
<a name="l184"><span class="linenum"> 184</span></a>              };
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>  		function <a class="function" onClick="logFunction('reduce')" href="../../../_functions/reduce.html" onMouseOver="funcPopup(event,'reduce')">reduce</a>( elem, size, border, margin ) {
<a name="l187"><span class="linenum"> 187</span></a>              $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( side, function() {
<a name="l188"><span class="linenum"> 188</span></a>                  size -= parseFloat( $.css( elem, &quot;padding&quot; + this ) ) || 0;
<a name="l189"><span class="linenum"> 189</span></a>                  if ( border ) {
<a name="l190"><span class="linenum"> 190</span></a>                      size -= parseFloat( $.css( elem, &quot;border&quot; + this + &quot;Width&quot; ) ) || 0;
<a name="l191"><span class="linenum"> 191</span></a>                  }
<a name="l192"><span class="linenum"> 192</span></a>                  if ( margin ) {
<a name="l193"><span class="linenum"> 193</span></a>                      size -= parseFloat( $.css( elem, &quot;margin&quot; + this ) ) || 0;
<a name="l194"><span class="linenum"> 194</span></a>                  }
<a name="l195"><span class="linenum"> 195</span></a>              });
<a name="l196"><span class="linenum"> 196</span></a>              return size;
<a name="l197"><span class="linenum"> 197</span></a>          }
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>          $.fn[ &quot;inner&quot; + name ] = function( size ) {
<a name="l200"><span class="linenum"> 200</span></a>              if ( size === undefined ) {
<a name="l201"><span class="linenum"> 201</span></a>                  return orig[ &quot;inner&quot; + name ].call( this );
<a name="l202"><span class="linenum"> 202</span></a>              }
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>              return this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l205"><span class="linenum"> 205</span></a>                  $( this ).css( type, <a class="function" onClick="logFunction('reduce')" href="../../../_functions/reduce.html" onMouseOver="funcPopup(event,'reduce')">reduce</a>( this, size ) + &quot;px&quot; );
<a name="l206"><span class="linenum"> 206</span></a>              });
<a name="l207"><span class="linenum"> 207</span></a>          };
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>          $.fn[ &quot;outer&quot; + name] = function( size, margin ) {
<a name="l210"><span class="linenum"> 210</span></a>              if ( typeof size !== &quot;number&quot; ) {
<a name="l211"><span class="linenum"> 211</span></a>                  return orig[ &quot;outer&quot; + name ].call( this, size );
<a name="l212"><span class="linenum"> 212</span></a>              }
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>              return this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l215"><span class="linenum"> 215</span></a>                  $( this).css( type, <a class="function" onClick="logFunction('reduce')" href="../../../_functions/reduce.html" onMouseOver="funcPopup(event,'reduce')">reduce</a>( this, size, true, margin ) + &quot;px&quot; );
<a name="l216"><span class="linenum"> 216</span></a>              });
<a name="l217"><span class="linenum"> 217</span></a>          };
<a name="l218"><span class="linenum"> 218</span></a>      });
<a name="l219"><span class="linenum"> 219</span></a>  }
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">// support: jQuery &lt;1.8</span>
<a name="l222"><span class="linenum"> 222</span></a>  if ( !$.fn.addBack ) {
<a name="l223"><span class="linenum"> 223</span></a>      $.fn.addBack = function( selector ) {
<a name="l224"><span class="linenum"> 224</span></a>          return this.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( selector == null ?
<a name="l225"><span class="linenum"> 225</span></a>              this.prevObject : this.prevObject.<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>( selector )
<a name="l226"><span class="linenum"> 226</span></a>          );
<a name="l227"><span class="linenum"> 227</span></a>      };
<a name="l228"><span class="linenum"> 228</span></a>  }
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)</span>
<a name="l231"><span class="linenum"> 231</span></a>  if ( $( &quot;&lt;a&gt;&quot; ).data( &quot;a-b&quot;, &quot;a&quot; ).removeData( &quot;a-b&quot; ).data( &quot;a-b&quot; ) ) {
<a name="l232"><span class="linenum"> 232</span></a>      $.fn.removeData = (function( removeData ) {
<a name="l233"><span class="linenum"> 233</span></a>          return function( key ) {
<a name="l234"><span class="linenum"> 234</span></a>              if ( arguments.length ) {
<a name="l235"><span class="linenum"> 235</span></a>                  return removeData.call( this, $.camelCase( key ) );
<a name="l236"><span class="linenum"> 236</span></a>              } else {
<a name="l237"><span class="linenum"> 237</span></a>                  return removeData.call( this );
<a name="l238"><span class="linenum"> 238</span></a>              }
<a name="l239"><span class="linenum"> 239</span></a>          };
<a name="l240"><span class="linenum"> 240</span></a>      })( $.fn.removeData );
<a name="l241"><span class="linenum"> 241</span></a>  }
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">// deprecated</span>
<a name="l248"><span class="linenum"> 248</span></a>  $.ui.ie = !!/msie [\w.]+/.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>( navigator.userAgent.toLowerCase() );
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  $.support.selectstart = &quot;onselectstart&quot; in document.<a class="function" onClick="logFunction('createElement')" href="../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>( &quot;div&quot; );
<a name="l251"><span class="linenum"> 251</span></a>  $.fn.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({
<a name="l252"><span class="linenum"> 252</span></a>      disableSelection: function() {
<a name="l253"><span class="linenum"> 253</span></a>          return this.<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>( ( $.support.selectstart ? &quot;selectstart&quot; : &quot;mousedown&quot; ) +
<a name="l254"><span class="linenum"> 254</span></a>              &quot;.ui-disableSelection&quot;, function( event ) {
<a name="l255"><span class="linenum"> 255</span></a>                  event.preventDefault();
<a name="l256"><span class="linenum"> 256</span></a>              });
<a name="l257"><span class="linenum"> 257</span></a>      },
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>      enableSelection: function() {
<a name="l260"><span class="linenum"> 260</span></a>          return this.<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>( &quot;.ui-disableSelection&quot; );
<a name="l261"><span class="linenum"> 261</span></a>      }
<a name="l262"><span class="linenum"> 262</span></a>  });
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>  $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( $.ui, {
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">    // $.ui.plugin is deprecated. Use $.widget() extensions instead.</span>
<a name="l266"><span class="linenum"> 266</span></a>      plugin: {
<a name="l267"><span class="linenum"> 267</span></a>          add: function( module, option, set ) {
<a name="l268"><span class="linenum"> 268</span></a>              var i,
<a name="l269"><span class="linenum"> 269</span></a>                  proto = $.ui[ module ].prototype;
<a name="l270"><span class="linenum"> 270</span></a>              for ( i in set ) {
<a name="l271"><span class="linenum"> 271</span></a>                  proto.plugins[ i ] = proto.plugins[ i ] || [];
<a name="l272"><span class="linenum"> 272</span></a>                  proto.plugins[ i ].push( [ option, set[ i ] ] );
<a name="l273"><span class="linenum"> 273</span></a>              }
<a name="l274"><span class="linenum"> 274</span></a>          },
<a name="l275"><span class="linenum"> 275</span></a>          call: function( instance, name, args ) {
<a name="l276"><span class="linenum"> 276</span></a>              var i,
<a name="l277"><span class="linenum"> 277</span></a>                  set = instance.plugins[ name ];
<a name="l278"><span class="linenum"> 278</span></a>              if ( !set || !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) {
<a name="l279"><span class="linenum"> 279</span></a>                  return;
<a name="l280"><span class="linenum"> 280</span></a>              }
<a name="l281"><span class="linenum"> 281</span></a>  
<a name="l282"><span class="linenum"> 282</span></a>              for ( i = 0; i &lt; set.length; i++ ) {
<a name="l283"><span class="linenum"> 283</span></a>                  if ( instance.options[ set[ i ][ 0 ] ] ) {
<a name="l284"><span class="linenum"> 284</span></a>                      set[ i ][ 1 ].apply( instance.element, args );
<a name="l285"><span class="linenum"> 285</span></a>                  }
<a name="l286"><span class="linenum"> 286</span></a>              }
<a name="l287"><span class="linenum"> 287</span></a>          }
<a name="l288"><span class="linenum"> 288</span></a>      },
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">    // only used by resizable</span>
<a name="l291"><span class="linenum"> 291</span></a>      hasScroll: function( el, a ) {
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">        //If overflow is hidden, the element might have extra content, but the user wants to hide it</span>
<a name="l294"><span class="linenum"> 294</span></a>          if ( $( el ).css( &quot;overflow&quot; ) === &quot;hidden&quot;) {
<a name="l295"><span class="linenum"> 295</span></a>              return false;
<a name="l296"><span class="linenum"> 296</span></a>          }
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>          var scroll = ( a &amp;&amp; a === &quot;left&quot; ) ? &quot;scrollLeft&quot; : &quot;scrollTop&quot;,
<a name="l299"><span class="linenum"> 299</span></a>              has = false;
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>          if ( el[ scroll ] &gt; 0 ) {
<a name="l302"><span class="linenum"> 302</span></a>              return true;
<a name="l303"><span class="linenum"> 303</span></a>          }
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">        // TODO: determine which cases actually cause this to happen</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">        // if the element doesn't have the scroll set, see if it's possible to</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">        // set the scroll</span>
<a name="l308"><span class="linenum"> 308</span></a>          el[ scroll ] = 1;
<a name="l309"><span class="linenum"> 309</span></a>          has = ( el[ scroll ] &gt; 0 );
<a name="l310"><span class="linenum"> 310</span></a>          el[ scroll ] = 0;
<a name="l311"><span class="linenum"> 311</span></a>          return has;
<a name="l312"><span class="linenum"> 312</span></a>      }
<a name="l313"><span class="linenum"> 313</span></a>  });
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>  })( jQuery );
<a name="l316"><span class="linenum"> 316</span></a>  (function( $, undefined ) {
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>  var uuid = 0,
<a name="l319"><span class="linenum"> 319</span></a>      slice = Array.prototype.slice,
<a name="l320"><span class="linenum"> 320</span></a>      _cleanData = $.cleanData;
<a name="l321"><span class="linenum"> 321</span></a>  $.cleanData = function( elems ) {
<a name="l322"><span class="linenum"> 322</span></a>      for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
<a name="l323"><span class="linenum"> 323</span></a>          try {
<a name="l324"><span class="linenum"> 324</span></a>              $( elem ).<a class="function" onClick="logFunction('triggerHandler')" href="../../../_functions/triggerhandler.html" onMouseOver="funcPopup(event,'triggerhandler')">triggerHandler</a>( &quot;remove&quot; );
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">        // http://bugs.jquery.com/ticket/8235</span>
<a name="l326"><span class="linenum"> 326</span></a>          } catch( e ) {}
<a name="l327"><span class="linenum"> 327</span></a>      }
<a name="l328"><span class="linenum"> 328</span></a>      _cleanData( elems );
<a name="l329"><span class="linenum"> 329</span></a>  };
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>  $.widget = function( name, base, prototype ) {
<a name="l332"><span class="linenum"> 332</span></a>      var fullName, existingConstructor, constructor, basePrototype,
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">        // proxiedPrototype allows the provided prototype to remain unmodified</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">        // so that it can be used as a mixin for multiple widgets (#8876)</span>
<a name="l335"><span class="linenum"> 335</span></a>          proxiedPrototype = {},
<a name="l336"><span class="linenum"> 336</span></a>          namespace = name.<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>( &quot;.&quot; )[ 0 ];
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>      name = name.<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>( &quot;.&quot; )[ 1 ];
<a name="l339"><span class="linenum"> 339</span></a>      fullName = namespace + &quot;-&quot; + name;
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>      if ( !prototype ) {
<a name="l342"><span class="linenum"> 342</span></a>          prototype = base;
<a name="l343"><span class="linenum"> 343</span></a>          base = $.Widget;
<a name="l344"><span class="linenum"> 344</span></a>      }
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">    // create selector for plugin</span>
<a name="l347"><span class="linenum"> 347</span></a>      $.expr[ &quot;:&quot; ][ fullName.toLowerCase() ] = function( elem ) {
<a name="l348"><span class="linenum"> 348</span></a>          return !!$.data( elem, fullName );
<a name="l349"><span class="linenum"> 349</span></a>      };
<a name="l350"><span class="linenum"> 350</span></a>  
<a name="l351"><span class="linenum"> 351</span></a>      $[ namespace ] = $[ namespace ] || {};
<a name="l352"><span class="linenum"> 352</span></a>      existingConstructor = $[ namespace ][ name ];
<a name="l353"><span class="linenum"> 353</span></a>      constructor = $[ namespace ][ name ] = function( options, element ) {
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">        // allow instantiation without &quot;new&quot; keyword</span>
<a name="l355"><span class="linenum"> 355</span></a>          if ( !this._createWidget ) {
<a name="l356"><span class="linenum"> 356</span></a>              return new constructor( options, element );
<a name="l357"><span class="linenum"> 357</span></a>          }
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">        // allow instantiation without initializing for simple inheritance</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">        // must use &quot;new&quot; keyword (the code above always passes args)</span>
<a name="l361"><span class="linenum"> 361</span></a>          if ( arguments.length ) {
<a name="l362"><span class="linenum"> 362</span></a>              this._createWidget( options, element );
<a name="l363"><span class="linenum"> 363</span></a>          }
<a name="l364"><span class="linenum"> 364</span></a>      };
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">    // extend with the existing constructor to carry over any static properties</span>
<a name="l366"><span class="linenum"> 366</span></a>      $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( constructor, existingConstructor, {
<a name="l367"><span class="linenum"> 367</span></a>          version: prototype.version,
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">        // copy the object used to create the prototype in case we need to</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">        // redefine the widget later</span>
<a name="l370"><span class="linenum"> 370</span></a>          _proto: $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, prototype ),
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">        // track widgets that inherit from this widget in case this widget is</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">        // redefined after a widget inherits from it</span>
<a name="l373"><span class="linenum"> 373</span></a>          _childConstructors: []
<a name="l374"><span class="linenum"> 374</span></a>      });
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>      basePrototype = new base();
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">    // we need to make the options hash a property directly on the new instance</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">    // otherwise we'll modify the options hash on the prototype that we're</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">    // inheriting from</span>
<a name="l380"><span class="linenum"> 380</span></a>      basePrototype.options = $.widget.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, basePrototype.options );
<a name="l381"><span class="linenum"> 381</span></a>      $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( prototype, function( prop, value ) {
<a name="l382"><span class="linenum"> 382</span></a>          if ( !$.isFunction( value ) ) {
<a name="l383"><span class="linenum"> 383</span></a>              proxiedPrototype[ prop ] = value;
<a name="l384"><span class="linenum"> 384</span></a>              return;
<a name="l385"><span class="linenum"> 385</span></a>          }
<a name="l386"><span class="linenum"> 386</span></a>          proxiedPrototype[ prop ] = (function() {
<a name="l387"><span class="linenum"> 387</span></a>              var _super = function() {
<a name="l388"><span class="linenum"> 388</span></a>                      return base.prototype[ prop ].apply( this, arguments );
<a name="l389"><span class="linenum"> 389</span></a>                  },
<a name="l390"><span class="linenum"> 390</span></a>                  _superApply = function( args ) {
<a name="l391"><span class="linenum"> 391</span></a>                      return base.prototype[ prop ].apply( this, args );
<a name="l392"><span class="linenum"> 392</span></a>                  };
<a name="l393"><span class="linenum"> 393</span></a>              return function() {
<a name="l394"><span class="linenum"> 394</span></a>                  var __super = this._super,
<a name="l395"><span class="linenum"> 395</span></a>                      __superApply = this._superApply,
<a name="l396"><span class="linenum"> 396</span></a>                      returnValue;
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>                  this._super = _super;
<a name="l399"><span class="linenum"> 399</span></a>                  this._superApply = _superApply;
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>                  returnValue = value.apply( this, arguments );
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>                  this._super = __super;
<a name="l404"><span class="linenum"> 404</span></a>                  this._superApply = __superApply;
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>                  return returnValue;
<a name="l407"><span class="linenum"> 407</span></a>              };
<a name="l408"><span class="linenum"> 408</span></a>          })();
<a name="l409"><span class="linenum"> 409</span></a>      });
<a name="l410"><span class="linenum"> 410</span></a>      constructor.prototype = $.widget.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( basePrototype, {
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">        // TODO: remove support for widgetEventPrefix</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">        // always use the name + a colon as the prefix, e.g., draggable:start</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">        // don't prefix for widgets that aren't DOM-based</span>
<a name="l414"><span class="linenum"> 414</span></a>          widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
<a name="l415"><span class="linenum"> 415</span></a>      }, proxiedPrototype, {
<a name="l416"><span class="linenum"> 416</span></a>          constructor: constructor,
<a name="l417"><span class="linenum"> 417</span></a>          namespace: namespace,
<a name="l418"><span class="linenum"> 418</span></a>          widgetName: name,
<a name="l419"><span class="linenum"> 419</span></a>          widgetFullName: fullName
<a name="l420"><span class="linenum"> 420</span></a>      });
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">    // If this widget is being redefined then we need to find all widgets that</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">    // are inheriting from it and redefine all of them so that they inherit from</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">    // the new version of this widget. We're essentially trying to replace one</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">    // level in the prototype chain.</span>
<a name="l426"><span class="linenum"> 426</span></a>      if ( existingConstructor ) {
<a name="l427"><span class="linenum"> 427</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( existingConstructor._childConstructors, function( i, child ) {
<a name="l428"><span class="linenum"> 428</span></a>              var childPrototype = child.prototype;
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">            // redefine the child widget using the same prototype that was</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">            // originally used, but inherit from the new version of the base</span>
<a name="l432"><span class="linenum"> 432</span></a>              $.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>( childPrototype.namespace + &quot;.&quot; + childPrototype.widgetName, constructor, child._proto );
<a name="l433"><span class="linenum"> 433</span></a>          });
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">        // remove the list of existing child constructors from the old constructor</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">        // so the old child constructors can be garbage collected</span>
<a name="l436"><span class="linenum"> 436</span></a>          delete existingConstructor._childConstructors;
<a name="l437"><span class="linenum"> 437</span></a>      } else {
<a name="l438"><span class="linenum"> 438</span></a>          base._childConstructors.push( constructor );
<a name="l439"><span class="linenum"> 439</span></a>      }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>      $.widget.bridge( name, constructor );
<a name="l442"><span class="linenum"> 442</span></a>  };
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>  $.widget.extend = function( target ) {
<a name="l445"><span class="linenum"> 445</span></a>      var input = slice.call( arguments, 1 ),
<a name="l446"><span class="linenum"> 446</span></a>          inputIndex = 0,
<a name="l447"><span class="linenum"> 447</span></a>          inputLength = input.length,
<a name="l448"><span class="linenum"> 448</span></a>          key,
<a name="l449"><span class="linenum"> 449</span></a>          value;
<a name="l450"><span class="linenum"> 450</span></a>      for ( ; inputIndex &lt; inputLength; inputIndex++ ) {
<a name="l451"><span class="linenum"> 451</span></a>          for ( key in input[ inputIndex ] ) {
<a name="l452"><span class="linenum"> 452</span></a>              value = input[ inputIndex ][ key ];
<a name="l453"><span class="linenum"> 453</span></a>              if ( input[ inputIndex ].hasOwnProperty( key ) &amp;&amp; value !== undefined ) {
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">                // Clone objects</span>
<a name="l455"><span class="linenum"> 455</span></a>                  if ( $.isPlainObject( value ) ) {
<a name="l456"><span class="linenum"> 456</span></a>                      target[ key ] = $.isPlainObject( target[ key ] ) ?
<a name="l457"><span class="linenum"> 457</span></a>                          $.widget.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, target[ key ], value ) :
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">                        // Don't extend strings, arrays, etc. with objects</span>
<a name="l459"><span class="linenum"> 459</span></a>                          $.widget.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, value );
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">                // Copy everything else by reference</span>
<a name="l461"><span class="linenum"> 461</span></a>                  } else {
<a name="l462"><span class="linenum"> 462</span></a>                      target[ key ] = value;
<a name="l463"><span class="linenum"> 463</span></a>                  }
<a name="l464"><span class="linenum"> 464</span></a>              }
<a name="l465"><span class="linenum"> 465</span></a>          }
<a name="l466"><span class="linenum"> 466</span></a>      }
<a name="l467"><span class="linenum"> 467</span></a>      return target;
<a name="l468"><span class="linenum"> 468</span></a>  };
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>  $.widget.bridge = function( name, object ) {
<a name="l471"><span class="linenum"> 471</span></a>      var fullName = object.prototype.widgetFullName || name;
<a name="l472"><span class="linenum"> 472</span></a>      $.fn[ name ] = function( options ) {
<a name="l473"><span class="linenum"> 473</span></a>          var isMethodCall = typeof options === &quot;string&quot;,
<a name="l474"><span class="linenum"> 474</span></a>              args = slice.call( arguments, 1 ),
<a name="l475"><span class="linenum"> 475</span></a>              returnValue = this;
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">        // allow multiple hashes to be passed on init</span>
<a name="l478"><span class="linenum"> 478</span></a>          options = !isMethodCall &amp;&amp; args.length ?
<a name="l479"><span class="linenum"> 479</span></a>              $.widget.extend.apply( null, [ options ].concat(args) ) :
<a name="l480"><span class="linenum"> 480</span></a>              options;
<a name="l481"><span class="linenum"> 481</span></a>  
<a name="l482"><span class="linenum"> 482</span></a>          if ( isMethodCall ) {
<a name="l483"><span class="linenum"> 483</span></a>              this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l484"><span class="linenum"> 484</span></a>                  var methodValue,
<a name="l485"><span class="linenum"> 485</span></a>                      instance = $.data( this, fullName );
<a name="l486"><span class="linenum"> 486</span></a>                  if ( !instance ) {
<a name="l487"><span class="linenum"> 487</span></a>                      return $.error( &quot;cannot call methods on &quot; + name + &quot; prior to initialization; &quot; +
<a name="l488"><span class="linenum"> 488</span></a>                          &quot;attempted to call method '&quot; + options + &quot;'&quot; );
<a name="l489"><span class="linenum"> 489</span></a>                  }
<a name="l490"><span class="linenum"> 490</span></a>                  if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === &quot;_&quot; ) {
<a name="l491"><span class="linenum"> 491</span></a>                      return $.error( &quot;no such method '&quot; + options + &quot;' for &quot; + name + &quot; widget instance&quot; );
<a name="l492"><span class="linenum"> 492</span></a>                  }
<a name="l493"><span class="linenum"> 493</span></a>                  methodValue = instance[ options ].apply( instance, args );
<a name="l494"><span class="linenum"> 494</span></a>                  if ( methodValue !== instance &amp;&amp; methodValue !== undefined ) {
<a name="l495"><span class="linenum"> 495</span></a>                      returnValue = methodValue &amp;&amp; methodValue.jquery ?
<a name="l496"><span class="linenum"> 496</span></a>                          returnValue.pushStack( methodValue.<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) :
<a name="l497"><span class="linenum"> 497</span></a>                          methodValue;
<a name="l498"><span class="linenum"> 498</span></a>                      return false;
<a name="l499"><span class="linenum"> 499</span></a>                  }
<a name="l500"><span class="linenum"> 500</span></a>              });
<a name="l501"><span class="linenum"> 501</span></a>          } else {
<a name="l502"><span class="linenum"> 502</span></a>              this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l503"><span class="linenum"> 503</span></a>                  var instance = $.data( this, fullName );
<a name="l504"><span class="linenum"> 504</span></a>                  if ( instance ) {
<a name="l505"><span class="linenum"> 505</span></a>                      instance.option( options || {} ).<a class="function" onClick="logFunction('_init')" href="../../../_functions/_init.html" onMouseOver="funcPopup(event,'_init')">_init</a>();
<a name="l506"><span class="linenum"> 506</span></a>                  } else {
<a name="l507"><span class="linenum"> 507</span></a>                      $.data( this, fullName, new object( options, this ) );
<a name="l508"><span class="linenum"> 508</span></a>                  }
<a name="l509"><span class="linenum"> 509</span></a>              });
<a name="l510"><span class="linenum"> 510</span></a>          }
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>          return returnValue;
<a name="l513"><span class="linenum"> 513</span></a>      };
<a name="l514"><span class="linenum"> 514</span></a>  };
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>  $.Widget = function( <span class="comment">/* options, element */</span> ) {};
<a name="l517"><span class="linenum"> 517</span></a>  $.Widget._childConstructors = [];
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>  $.Widget.prototype = {
<a name="l520"><span class="linenum"> 520</span></a>      widgetName: &quot;widget&quot;,
<a name="l521"><span class="linenum"> 521</span></a>      widgetEventPrefix: &quot;&quot;,
<a name="l522"><span class="linenum"> 522</span></a>      defaultElement: &quot;&lt;div&gt;&quot;,
<a name="l523"><span class="linenum"> 523</span></a>      options: {
<a name="l524"><span class="linenum"> 524</span></a>          disabled: false,
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">        // callbacks</span>
<a name="l527"><span class="linenum"> 527</span></a>          create: null
<a name="l528"><span class="linenum"> 528</span></a>      },
<a name="l529"><span class="linenum"> 529</span></a>      _createWidget: function( options, element ) {
<a name="l530"><span class="linenum"> 530</span></a>          element = $( element || this.defaultElement || this )[ 0 ];
<a name="l531"><span class="linenum"> 531</span></a>          this.element = $( element );
<a name="l532"><span class="linenum"> 532</span></a>          this.uuid = uuid++;
<a name="l533"><span class="linenum"> 533</span></a>          this.eventNamespace = &quot;.&quot; + this.widgetName + this.uuid;
<a name="l534"><span class="linenum"> 534</span></a>          this.options = $.widget.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {},
<a name="l535"><span class="linenum"> 535</span></a>              this.options,
<a name="l536"><span class="linenum"> 536</span></a>              this._getCreateOptions(),
<a name="l537"><span class="linenum"> 537</span></a>              options );
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>          this.bindings = $();
<a name="l540"><span class="linenum"> 540</span></a>          this.hoverable = $();
<a name="l541"><span class="linenum"> 541</span></a>          this.focusable = $();
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>          if ( element !== this ) {
<a name="l544"><span class="linenum"> 544</span></a>              $.data( element, this.widgetFullName, this );
<a name="l545"><span class="linenum"> 545</span></a>              this._on( true, this.element, {
<a name="l546"><span class="linenum"> 546</span></a>                  remove: function( event ) {
<a name="l547"><span class="linenum"> 547</span></a>                      if ( event.target === element ) {
<a name="l548"><span class="linenum"> 548</span></a>                          this.<a class="function" onClick="logFunction('destroy')" href="../../../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>();
<a name="l549"><span class="linenum"> 549</span></a>                      }
<a name="l550"><span class="linenum"> 550</span></a>                  }
<a name="l551"><span class="linenum"> 551</span></a>              });
<a name="l552"><span class="linenum"> 552</span></a>              this.document = $( element.style ?
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">                // element within the document</span>
<a name="l554"><span class="linenum"> 554</span></a>                  element.ownerDocument :
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">                // element is window or document</span>
<a name="l556"><span class="linenum"> 556</span></a>                  element.document || element );
<a name="l557"><span class="linenum"> 557</span></a>              this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
<a name="l558"><span class="linenum"> 558</span></a>          }
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>          this._create();
<a name="l561"><span class="linenum"> 561</span></a>          this._trigger( &quot;create&quot;, null, this._getCreateEventData() );
<a name="l562"><span class="linenum"> 562</span></a>          this.<a class="function" onClick="logFunction('_init')" href="../../../_functions/_init.html" onMouseOver="funcPopup(event,'_init')">_init</a>();
<a name="l563"><span class="linenum"> 563</span></a>      },
<a name="l564"><span class="linenum"> 564</span></a>      _getCreateOptions: $.noop,
<a name="l565"><span class="linenum"> 565</span></a>      _getCreateEventData: $.noop,
<a name="l566"><span class="linenum"> 566</span></a>      _create: $.noop,
<a name="l567"><span class="linenum"> 567</span></a>      _init: $.noop,
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>      destroy: function() {
<a name="l570"><span class="linenum"> 570</span></a>          this._destroy();
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">        // we can probably remove the unbind calls in 2.0</span>
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">        // all event bindings should go through this._on()</span>
<a name="l573"><span class="linenum"> 573</span></a>          this.element
<a name="l574"><span class="linenum"> 574</span></a>              .<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>( this.eventNamespace )
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">            // 1.9 BC for #7810</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">            // TODO remove dual storage</span>
<a name="l577"><span class="linenum"> 577</span></a>              .removeData( this.widgetName )
<a name="l578"><span class="linenum"> 578</span></a>              .removeData( this.widgetFullName )
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">            // support: jquery &lt;1.6.3</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">            // http://bugs.jquery.com/ticket/9413</span>
<a name="l581"><span class="linenum"> 581</span></a>              .removeData( $.camelCase( this.widgetFullName ) );
<a name="l582"><span class="linenum"> 582</span></a>          this.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>()
<a name="l583"><span class="linenum"> 583</span></a>              .<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>( this.eventNamespace )
<a name="l584"><span class="linenum"> 584</span></a>              .removeAttr( &quot;aria-disabled&quot; )
<a name="l585"><span class="linenum"> 585</span></a>              .removeClass(
<a name="l586"><span class="linenum"> 586</span></a>                  this.widgetFullName + &quot;-disabled &quot; +
<a name="l587"><span class="linenum"> 587</span></a>                  &quot;ui-state-disabled&quot; );
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">        // clean up events and states</span>
<a name="l590"><span class="linenum"> 590</span></a>          this.bindings.<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>( this.eventNamespace );
<a name="l591"><span class="linenum"> 591</span></a>          this.hoverable.removeClass( &quot;ui-state-hover&quot; );
<a name="l592"><span class="linenum"> 592</span></a>          this.focusable.removeClass( &quot;ui-state-focus&quot; );
<a name="l593"><span class="linenum"> 593</span></a>      },
<a name="l594"><span class="linenum"> 594</span></a>      _destroy: $.noop,
<a name="l595"><span class="linenum"> 595</span></a>  
<a name="l596"><span class="linenum"> 596</span></a>      widget: function() {
<a name="l597"><span class="linenum"> 597</span></a>          return this.element;
<a name="l598"><span class="linenum"> 598</span></a>      },
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>      option: function( key, value ) {
<a name="l601"><span class="linenum"> 601</span></a>          var options = key,
<a name="l602"><span class="linenum"> 602</span></a>              parts,
<a name="l603"><span class="linenum"> 603</span></a>              curOption,
<a name="l604"><span class="linenum"> 604</span></a>              i;
<a name="l605"><span class="linenum"> 605</span></a>  
<a name="l606"><span class="linenum"> 606</span></a>          if ( arguments.length === 0 ) {
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment">            // don't return a reference to the internal hash</span>
<a name="l608"><span class="linenum"> 608</span></a>              return $.widget.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, this.options );
<a name="l609"><span class="linenum"> 609</span></a>          }
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>          if ( typeof key === &quot;string&quot; ) {
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">            // handle nested keys, e.g., &quot;foo.bar&quot; =&gt; { foo: { bar: ___ } }</span>
<a name="l613"><span class="linenum"> 613</span></a>              options = {};
<a name="l614"><span class="linenum"> 614</span></a>              parts = key.<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>( &quot;.&quot; );
<a name="l615"><span class="linenum"> 615</span></a>              key = parts.shift();
<a name="l616"><span class="linenum"> 616</span></a>              if ( parts.length ) {
<a name="l617"><span class="linenum"> 617</span></a>                  curOption = options[ key ] = $.widget.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, this.options[ key ] );
<a name="l618"><span class="linenum"> 618</span></a>                  for ( i = 0; i &lt; parts.length - 1; i++ ) {
<a name="l619"><span class="linenum"> 619</span></a>                      curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
<a name="l620"><span class="linenum"> 620</span></a>                      curOption = curOption[ parts[ i ] ];
<a name="l621"><span class="linenum"> 621</span></a>                  }
<a name="l622"><span class="linenum"> 622</span></a>                  key = parts.pop();
<a name="l623"><span class="linenum"> 623</span></a>                  if ( arguments.length === 1 ) {
<a name="l624"><span class="linenum"> 624</span></a>                      return curOption[ key ] === undefined ? null : curOption[ key ];
<a name="l625"><span class="linenum"> 625</span></a>                  }
<a name="l626"><span class="linenum"> 626</span></a>                  curOption[ key ] = value;
<a name="l627"><span class="linenum"> 627</span></a>              } else {
<a name="l628"><span class="linenum"> 628</span></a>                  if ( arguments.length === 1 ) {
<a name="l629"><span class="linenum"> 629</span></a>                      return this.options[ key ] === undefined ? null : this.options[ key ];
<a name="l630"><span class="linenum"> 630</span></a>                  }
<a name="l631"><span class="linenum"> 631</span></a>                  options[ key ] = value;
<a name="l632"><span class="linenum"> 632</span></a>              }
<a name="l633"><span class="linenum"> 633</span></a>          }
<a name="l634"><span class="linenum"> 634</span></a>  
<a name="l635"><span class="linenum"> 635</span></a>          this._setOptions( options );
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>          return this;
<a name="l638"><span class="linenum"> 638</span></a>      },
<a name="l639"><span class="linenum"> 639</span></a>      _setOptions: function( options ) {
<a name="l640"><span class="linenum"> 640</span></a>          var key;
<a name="l641"><span class="linenum"> 641</span></a>  
<a name="l642"><span class="linenum"> 642</span></a>          for ( key in options ) {
<a name="l643"><span class="linenum"> 643</span></a>              this._setOption( key, options[ key ] );
<a name="l644"><span class="linenum"> 644</span></a>          }
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>          return this;
<a name="l647"><span class="linenum"> 647</span></a>      },
<a name="l648"><span class="linenum"> 648</span></a>      _setOption: function( key, value ) {
<a name="l649"><span class="linenum"> 649</span></a>          this.options[ key ] = value;
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>          if ( key === &quot;disabled&quot; ) {
<a name="l652"><span class="linenum"> 652</span></a>              this.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>()
<a name="l653"><span class="linenum"> 653</span></a>                  .toggleClass( this.widgetFullName + &quot;-disabled ui-state-disabled&quot;, !!value )
<a name="l654"><span class="linenum"> 654</span></a>                  .attr( &quot;aria-disabled&quot;, value );
<a name="l655"><span class="linenum"> 655</span></a>              this.hoverable.removeClass( &quot;ui-state-hover&quot; );
<a name="l656"><span class="linenum"> 656</span></a>              this.focusable.removeClass( &quot;ui-state-focus&quot; );
<a name="l657"><span class="linenum"> 657</span></a>          }
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>          return this;
<a name="l660"><span class="linenum"> 660</span></a>      },
<a name="l661"><span class="linenum"> 661</span></a>  
<a name="l662"><span class="linenum"> 662</span></a>      enable: function() {
<a name="l663"><span class="linenum"> 663</span></a>          return this._setOption( &quot;disabled&quot;, false );
<a name="l664"><span class="linenum"> 664</span></a>      },
<a name="l665"><span class="linenum"> 665</span></a>      disable: function() {
<a name="l666"><span class="linenum"> 666</span></a>          return this._setOption( &quot;disabled&quot;, true );
<a name="l667"><span class="linenum"> 667</span></a>      },
<a name="l668"><span class="linenum"> 668</span></a>  
<a name="l669"><span class="linenum"> 669</span></a>      _on: function( suppressDisabledCheck, element, handlers ) {
<a name="l670"><span class="linenum"> 670</span></a>          var delegateElement,
<a name="l671"><span class="linenum"> 671</span></a>              instance = this;
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">        // no suppressDisabledCheck flag, shuffle arguments</span>
<a name="l674"><span class="linenum"> 674</span></a>          if ( typeof suppressDisabledCheck !== &quot;boolean&quot; ) {
<a name="l675"><span class="linenum"> 675</span></a>              handlers = element;
<a name="l676"><span class="linenum"> 676</span></a>              element = suppressDisabledCheck;
<a name="l677"><span class="linenum"> 677</span></a>              suppressDisabledCheck = false;
<a name="l678"><span class="linenum"> 678</span></a>          }
<a name="l679"><span class="linenum"> 679</span></a>  
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">        // no element argument, shuffle and use this.element</span>
<a name="l681"><span class="linenum"> 681</span></a>          if ( !handlers ) {
<a name="l682"><span class="linenum"> 682</span></a>              handlers = element;
<a name="l683"><span class="linenum"> 683</span></a>              element = this.element;
<a name="l684"><span class="linenum"> 684</span></a>              delegateElement = this.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>();
<a name="l685"><span class="linenum"> 685</span></a>          } else {
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment">            // accept selectors, DOM elements</span>
<a name="l687"><span class="linenum"> 687</span></a>              element = delegateElement = $( element );
<a name="l688"><span class="linenum"> 688</span></a>              this.bindings = this.bindings.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( element );
<a name="l689"><span class="linenum"> 689</span></a>          }
<a name="l690"><span class="linenum"> 690</span></a>  
<a name="l691"><span class="linenum"> 691</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( handlers, function( event, handler ) {
<a name="l692"><span class="linenum"> 692</span></a>  			function <a class="function" onClick="logFunction('handlerProxy')" href="../../../_functions/handlerproxy.html" onMouseOver="funcPopup(event,'handlerproxy')">handlerProxy</a>() {
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">                // allow widgets to customize the disabled handling</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">                // - disabled as an array instead of boolean</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">                // - disabled class as method for disabling individual parts</span>
<a name="l696"><span class="linenum"> 696</span></a>                  if ( !suppressDisabledCheck &amp;&amp;
<a name="l697"><span class="linenum"> 697</span></a>                          ( instance.options.disabled === true ||
<a name="l698"><span class="linenum"> 698</span></a>                              $( this ).hasClass( &quot;ui-state-disabled&quot; ) ) ) {
<a name="l699"><span class="linenum"> 699</span></a>                      return;
<a name="l700"><span class="linenum"> 700</span></a>                  }
<a name="l701"><span class="linenum"> 701</span></a>                  return ( typeof handler === &quot;string&quot; ? instance[ handler ] : handler )
<a name="l702"><span class="linenum"> 702</span></a>                      .apply( instance, arguments );
<a name="l703"><span class="linenum"> 703</span></a>              }
<a name="l704"><span class="linenum"> 704</span></a>  
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">            // copy the guid so direct unbinding works</span>
<a name="l706"><span class="linenum"> 706</span></a>              if ( typeof handler !== &quot;string&quot; ) {
<a name="l707"><span class="linenum"> 707</span></a>                  handlerProxy.guid = handler.guid =
<a name="l708"><span class="linenum"> 708</span></a>                      handler.guid || handlerProxy.guid || $.guid++;
<a name="l709"><span class="linenum"> 709</span></a>              }
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>              var match = event.match( /^(\w+)\s*(.*)$/ ),
<a name="l712"><span class="linenum"> 712</span></a>                  eventName = match[1] + instance.eventNamespace,
<a name="l713"><span class="linenum"> 713</span></a>                  selector = match[2];
<a name="l714"><span class="linenum"> 714</span></a>              if ( selector ) {
<a name="l715"><span class="linenum"> 715</span></a>                  delegateElement.delegate( selector, eventName, handlerProxy );
<a name="l716"><span class="linenum"> 716</span></a>              } else {
<a name="l717"><span class="linenum"> 717</span></a>                  element.<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>( eventName, handlerProxy );
<a name="l718"><span class="linenum"> 718</span></a>              }
<a name="l719"><span class="linenum"> 719</span></a>          });
<a name="l720"><span class="linenum"> 720</span></a>      },
<a name="l721"><span class="linenum"> 721</span></a>  
<a name="l722"><span class="linenum"> 722</span></a>      _off: function( element, eventName ) {
<a name="l723"><span class="linenum"> 723</span></a>          eventName = (eventName || &quot;&quot;).<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>( &quot; &quot; ).join( this.eventNamespace + &quot; &quot; ) + this.eventNamespace;
<a name="l724"><span class="linenum"> 724</span></a>          element.<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>( eventName ).undelegate( eventName );
<a name="l725"><span class="linenum"> 725</span></a>      },
<a name="l726"><span class="linenum"> 726</span></a>  
<a name="l727"><span class="linenum"> 727</span></a>      _delay: function( handler, delay ) {
<a name="l728"><span class="linenum"> 728</span></a>  		function <a class="function" onClick="logFunction('handlerProxy')" href="../../../_functions/handlerproxy.html" onMouseOver="funcPopup(event,'handlerproxy')">handlerProxy</a>() {
<a name="l729"><span class="linenum"> 729</span></a>              return ( typeof handler === &quot;string&quot; ? instance[ handler ] : handler )
<a name="l730"><span class="linenum"> 730</span></a>                  .apply( instance, arguments );
<a name="l731"><span class="linenum"> 731</span></a>          }
<a name="l732"><span class="linenum"> 732</span></a>          var instance = this;
<a name="l733"><span class="linenum"> 733</span></a>          return <a class="function" onClick="logFunction('setTimeout')" href="../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>( handlerProxy, delay || 0 );
<a name="l734"><span class="linenum"> 734</span></a>      },
<a name="l735"><span class="linenum"> 735</span></a>  
<a name="l736"><span class="linenum"> 736</span></a>      _hoverable: function( element ) {
<a name="l737"><span class="linenum"> 737</span></a>          this.hoverable = this.hoverable.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( element );
<a name="l738"><span class="linenum"> 738</span></a>          this._on( element, {
<a name="l739"><span class="linenum"> 739</span></a>              mouseenter: function( event ) {
<a name="l740"><span class="linenum"> 740</span></a>                  $( event.currentTarget ).addClass( &quot;ui-state-hover&quot; );
<a name="l741"><span class="linenum"> 741</span></a>              },
<a name="l742"><span class="linenum"> 742</span></a>              mouseleave: function( event ) {
<a name="l743"><span class="linenum"> 743</span></a>                  $( event.currentTarget ).removeClass( &quot;ui-state-hover&quot; );
<a name="l744"><span class="linenum"> 744</span></a>              }
<a name="l745"><span class="linenum"> 745</span></a>          });
<a name="l746"><span class="linenum"> 746</span></a>      },
<a name="l747"><span class="linenum"> 747</span></a>  
<a name="l748"><span class="linenum"> 748</span></a>      _focusable: function( element ) {
<a name="l749"><span class="linenum"> 749</span></a>          this.focusable = this.focusable.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( element );
<a name="l750"><span class="linenum"> 750</span></a>          this._on( element, {
<a name="l751"><span class="linenum"> 751</span></a>              focusin: function( event ) {
<a name="l752"><span class="linenum"> 752</span></a>                  $( event.currentTarget ).addClass( &quot;ui-state-focus&quot; );
<a name="l753"><span class="linenum"> 753</span></a>              },
<a name="l754"><span class="linenum"> 754</span></a>              focusout: function( event ) {
<a name="l755"><span class="linenum"> 755</span></a>                  $( event.currentTarget ).removeClass( &quot;ui-state-focus&quot; );
<a name="l756"><span class="linenum"> 756</span></a>              }
<a name="l757"><span class="linenum"> 757</span></a>          });
<a name="l758"><span class="linenum"> 758</span></a>      },
<a name="l759"><span class="linenum"> 759</span></a>  
<a name="l760"><span class="linenum"> 760</span></a>      _trigger: function( type, event, data ) {
<a name="l761"><span class="linenum"> 761</span></a>          var prop, orig,
<a name="l762"><span class="linenum"> 762</span></a>              callback = this.options[ type ];
<a name="l763"><span class="linenum"> 763</span></a>  
<a name="l764"><span class="linenum"> 764</span></a>          data = data || {};
<a name="l765"><span class="linenum"> 765</span></a>          event = $.Event( event );
<a name="l766"><span class="linenum"> 766</span></a>          event.type = ( type === this.widgetEventPrefix ?
<a name="l767"><span class="linenum"> 767</span></a>              type :
<a name="l768"><span class="linenum"> 768</span></a>              this.widgetEventPrefix + type ).toLowerCase();
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">        // the original event may come from any element</span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment">        // so we need to reset the target on the new event</span>
<a name="l771"><span class="linenum"> 771</span></a>          event.target = this.element[ 0 ];
<a name="l772"><span class="linenum"> 772</span></a>  
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">        // copy original event properties over to the new event</span>
<a name="l774"><span class="linenum"> 774</span></a>          orig = event.originalEvent;
<a name="l775"><span class="linenum"> 775</span></a>          if ( orig ) {
<a name="l776"><span class="linenum"> 776</span></a>              for ( prop in orig ) {
<a name="l777"><span class="linenum"> 777</span></a>                  if ( !( prop in event ) ) {
<a name="l778"><span class="linenum"> 778</span></a>                      event[ prop ] = orig[ prop ];
<a name="l779"><span class="linenum"> 779</span></a>                  }
<a name="l780"><span class="linenum"> 780</span></a>              }
<a name="l781"><span class="linenum"> 781</span></a>          }
<a name="l782"><span class="linenum"> 782</span></a>  
<a name="l783"><span class="linenum"> 783</span></a>          this.element.<a class="function" onClick="logFunction('trigger')" href="../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>( event, data );
<a name="l784"><span class="linenum"> 784</span></a>          return !( $.isFunction( callback ) &amp;&amp;
<a name="l785"><span class="linenum"> 785</span></a>              callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
<a name="l786"><span class="linenum"> 786</span></a>              event.isDefaultPrevented() );
<a name="l787"><span class="linenum"> 787</span></a>      }
<a name="l788"><span class="linenum"> 788</span></a>  };
<a name="l789"><span class="linenum"> 789</span></a>  
<a name="l790"><span class="linenum"> 790</span></a>  $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( { show: &quot;fadeIn&quot;, hide: &quot;fadeOut&quot; }, function( method, defaultEffect ) {
<a name="l791"><span class="linenum"> 791</span></a>      $.Widget.prototype[ &quot;_&quot; + method ] = function( element, options, callback ) {
<a name="l792"><span class="linenum"> 792</span></a>          if ( typeof options === &quot;string&quot; ) {
<a name="l793"><span class="linenum"> 793</span></a>              options = { effect: options };
<a name="l794"><span class="linenum"> 794</span></a>          }
<a name="l795"><span class="linenum"> 795</span></a>          var hasOptions,
<a name="l796"><span class="linenum"> 796</span></a>              effectName = !options ?
<a name="l797"><span class="linenum"> 797</span></a>                  method :
<a name="l798"><span class="linenum"> 798</span></a>                  options === true || typeof options === &quot;number&quot; ?
<a name="l799"><span class="linenum"> 799</span></a>                      defaultEffect :
<a name="l800"><span class="linenum"> 800</span></a>                      options.effect || defaultEffect;
<a name="l801"><span class="linenum"> 801</span></a>          options = options || {};
<a name="l802"><span class="linenum"> 802</span></a>          if ( typeof options === &quot;number&quot; ) {
<a name="l803"><span class="linenum"> 803</span></a>              options = { duration: options };
<a name="l804"><span class="linenum"> 804</span></a>          }
<a name="l805"><span class="linenum"> 805</span></a>          hasOptions = !$.<a class="function" onClick="logFunction('isEmptyObject')" href="../../../_functions/isemptyobject.html" onMouseOver="funcPopup(event,'isemptyobject')">isEmptyObject</a>( options );
<a name="l806"><span class="linenum"> 806</span></a>          options.complete = callback;
<a name="l807"><span class="linenum"> 807</span></a>          if ( options.delay ) {
<a name="l808"><span class="linenum"> 808</span></a>              element.delay( options.delay );
<a name="l809"><span class="linenum"> 809</span></a>          }
<a name="l810"><span class="linenum"> 810</span></a>          if ( hasOptions &amp;&amp; $.effects &amp;&amp; $.effects.effect[ effectName ] ) {
<a name="l811"><span class="linenum"> 811</span></a>              element[ method ]( options );
<a name="l812"><span class="linenum"> 812</span></a>          } else if ( effectName !== method &amp;&amp; element[ effectName ] ) {
<a name="l813"><span class="linenum"> 813</span></a>              element[ effectName ]( options.duration, options.easing, callback );
<a name="l814"><span class="linenum"> 814</span></a>          } else {
<a name="l815"><span class="linenum"> 815</span></a>              element.queue(function( next ) {
<a name="l816"><span class="linenum"> 816</span></a>                  $( this )[ method ]();
<a name="l817"><span class="linenum"> 817</span></a>                  if ( callback ) {
<a name="l818"><span class="linenum"> 818</span></a>                      callback.call( element[ 0 ] );
<a name="l819"><span class="linenum"> 819</span></a>                  }
<a name="l820"><span class="linenum"> 820</span></a>                  <a class="phpfunction" onClick="logFunction('next')" href="../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>();
<a name="l821"><span class="linenum"> 821</span></a>              });
<a name="l822"><span class="linenum"> 822</span></a>          }
<a name="l823"><span class="linenum"> 823</span></a>      };
<a name="l824"><span class="linenum"> 824</span></a>  });
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>  })( jQuery );
<a name="l827"><span class="linenum"> 827</span></a>  (function( $, undefined ) {
<a name="l828"><span class="linenum"> 828</span></a>  
<a name="l829"><span class="linenum"> 829</span></a>  var mouseHandled = false;
<a name="l830"><span class="linenum"> 830</span></a>  $( document ).mouseup( function() {
<a name="l831"><span class="linenum"> 831</span></a>      mouseHandled = false;
<a name="l832"><span class="linenum"> 832</span></a>  });
<a name="l833"><span class="linenum"> 833</span></a>  
<a name="l834"><span class="linenum"> 834</span></a>  $.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>(&quot;ui.mouse&quot;, {
<a name="l835"><span class="linenum"> 835</span></a>      version: &quot;1.10.4&quot;,
<a name="l836"><span class="linenum"> 836</span></a>      options: {
<a name="l837"><span class="linenum"> 837</span></a>          cancel: &quot;input,textarea,button,select,option&quot;,
<a name="l838"><span class="linenum"> 838</span></a>          distance: 1,
<a name="l839"><span class="linenum"> 839</span></a>          delay: 0
<a name="l840"><span class="linenum"> 840</span></a>      },
<a name="l841"><span class="linenum"> 841</span></a>      _mouseInit: function() {
<a name="l842"><span class="linenum"> 842</span></a>          var that = this;
<a name="l843"><span class="linenum"> 843</span></a>  
<a name="l844"><span class="linenum"> 844</span></a>          this.element
<a name="l845"><span class="linenum"> 845</span></a>              .<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>(&quot;mousedown.&quot;+this.widgetName, function(event) {
<a name="l846"><span class="linenum"> 846</span></a>                  return that._mouseDown(event);
<a name="l847"><span class="linenum"> 847</span></a>              })
<a name="l848"><span class="linenum"> 848</span></a>              .<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>(&quot;click.&quot;+this.widgetName, function(event) {
<a name="l849"><span class="linenum"> 849</span></a>                  if (true === $.data(event.target, that.widgetName + &quot;.preventClickEvent&quot;)) {
<a name="l850"><span class="linenum"> 850</span></a>                      $.removeData(event.target, that.widgetName + &quot;.preventClickEvent&quot;);
<a name="l851"><span class="linenum"> 851</span></a>                      event.stopImmediatePropagation();
<a name="l852"><span class="linenum"> 852</span></a>                      return false;
<a name="l853"><span class="linenum"> 853</span></a>                  }
<a name="l854"><span class="linenum"> 854</span></a>              });
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>          this.started = false;
<a name="l857"><span class="linenum"> 857</span></a>      },
<a name="l858"><span class="linenum"> 858</span></a>  
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">    // TODO: make sure destroying one instance of mouse doesn't mess with</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">    // other instances of mouse</span>
<a name="l861"><span class="linenum"> 861</span></a>      _mouseDestroy: function() {
<a name="l862"><span class="linenum"> 862</span></a>          this.element.<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;.&quot;+this.widgetName);
<a name="l863"><span class="linenum"> 863</span></a>          if ( this._mouseMoveDelegate ) {
<a name="l864"><span class="linenum"> 864</span></a>              $(document)
<a name="l865"><span class="linenum"> 865</span></a>                  .<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;mousemove.&quot;+this.widgetName, this._mouseMoveDelegate)
<a name="l866"><span class="linenum"> 866</span></a>                  .<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;mouseup.&quot;+this.widgetName, this._mouseUpDelegate);
<a name="l867"><span class="linenum"> 867</span></a>          }
<a name="l868"><span class="linenum"> 868</span></a>      },
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>      _mouseDown: function(event) {
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">        // don't let more than one widget handle mouseStart</span>
<a name="l872"><span class="linenum"> 872</span></a>          if( mouseHandled ) { return; }
<a name="l873"><span class="linenum"> 873</span></a>  
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment">        // we may have missed mouseup (out of window)</span>
<a name="l875"><span class="linenum"> 875</span></a>          (this._mouseStarted &amp;&amp; this._mouseUp(event));
<a name="l876"><span class="linenum"> 876</span></a>  
<a name="l877"><span class="linenum"> 877</span></a>          this._mouseDownEvent = event;
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>          var that = this,
<a name="l880"><span class="linenum"> 880</span></a>              btnIsLeft = (event.which === 1),
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">            // event.target.nodeName works around a bug in IE 8 with</span>
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">            // disabled inputs (#7620)</span>
<a name="l883"><span class="linenum"> 883</span></a>              elIsCancel = (typeof this.options.cancel === &quot;string&quot; &amp;&amp; event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
<a name="l884"><span class="linenum"> 884</span></a>          if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
<a name="l885"><span class="linenum"> 885</span></a>              return true;
<a name="l886"><span class="linenum"> 886</span></a>          }
<a name="l887"><span class="linenum"> 887</span></a>  
<a name="l888"><span class="linenum"> 888</span></a>          this.mouseDelayMet = !this.options.delay;
<a name="l889"><span class="linenum"> 889</span></a>          if (!this.mouseDelayMet) {
<a name="l890"><span class="linenum"> 890</span></a>              this._mouseDelayTimer = <a class="function" onClick="logFunction('setTimeout')" href="../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function() {
<a name="l891"><span class="linenum"> 891</span></a>                  that.mouseDelayMet = true;
<a name="l892"><span class="linenum"> 892</span></a>              }, this.options.delay);
<a name="l893"><span class="linenum"> 893</span></a>          }
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>          if (this._mouseDistanceMet(event) &amp;&amp; this._mouseDelayMet(event)) {
<a name="l896"><span class="linenum"> 896</span></a>              this._mouseStarted = (this._mouseStart(event) !== false);
<a name="l897"><span class="linenum"> 897</span></a>              if (!this._mouseStarted) {
<a name="l898"><span class="linenum"> 898</span></a>                  event.preventDefault();
<a name="l899"><span class="linenum"> 899</span></a>                  return true;
<a name="l900"><span class="linenum"> 900</span></a>              }
<a name="l901"><span class="linenum"> 901</span></a>          }
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">        // Click event may never have fired (Gecko &amp; Opera)</span>
<a name="l904"><span class="linenum"> 904</span></a>          if (true === $.data(event.target, this.widgetName + &quot;.preventClickEvent&quot;)) {
<a name="l905"><span class="linenum"> 905</span></a>              $.removeData(event.target, this.widgetName + &quot;.preventClickEvent&quot;);
<a name="l906"><span class="linenum"> 906</span></a>          }
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">        // these delegates are required to keep context</span>
<a name="l909"><span class="linenum"> 909</span></a>          this._mouseMoveDelegate = function(event) {
<a name="l910"><span class="linenum"> 910</span></a>              return that._mouseMove(event);
<a name="l911"><span class="linenum"> 911</span></a>          };
<a name="l912"><span class="linenum"> 912</span></a>          this._mouseUpDelegate = function(event) {
<a name="l913"><span class="linenum"> 913</span></a>              return that._mouseUp(event);
<a name="l914"><span class="linenum"> 914</span></a>          };
<a name="l915"><span class="linenum"> 915</span></a>          $(document)
<a name="l916"><span class="linenum"> 916</span></a>              .<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>(&quot;mousemove.&quot;+this.widgetName, this._mouseMoveDelegate)
<a name="l917"><span class="linenum"> 917</span></a>              .<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>(&quot;mouseup.&quot;+this.widgetName, this._mouseUpDelegate);
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>          event.preventDefault();
<a name="l920"><span class="linenum"> 920</span></a>  
<a name="l921"><span class="linenum"> 921</span></a>          mouseHandled = true;
<a name="l922"><span class="linenum"> 922</span></a>          return true;
<a name="l923"><span class="linenum"> 923</span></a>      },
<a name="l924"><span class="linenum"> 924</span></a>  
<a name="l925"><span class="linenum"> 925</span></a>      _mouseMove: function(event) {
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment">        // IE mouseup check - mouseup happened when mouse was out of window</span>
<a name="l927"><span class="linenum"> 927</span></a>          if ($.ui.ie &amp;&amp; ( !document.documentMode || document.documentMode &lt; 9 ) &amp;&amp; !event.button) {
<a name="l928"><span class="linenum"> 928</span></a>              return this._mouseUp(event);
<a name="l929"><span class="linenum"> 929</span></a>          }
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>          if (this._mouseStarted) {
<a name="l932"><span class="linenum"> 932</span></a>              this._mouseDrag(event);
<a name="l933"><span class="linenum"> 933</span></a>              return event.preventDefault();
<a name="l934"><span class="linenum"> 934</span></a>          }
<a name="l935"><span class="linenum"> 935</span></a>  
<a name="l936"><span class="linenum"> 936</span></a>          if (this._mouseDistanceMet(event) &amp;&amp; this._mouseDelayMet(event)) {
<a name="l937"><span class="linenum"> 937</span></a>              this._mouseStarted =
<a name="l938"><span class="linenum"> 938</span></a>                  (this._mouseStart(this._mouseDownEvent, event) !== false);
<a name="l939"><span class="linenum"> 939</span></a>              (this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
<a name="l940"><span class="linenum"> 940</span></a>          }
<a name="l941"><span class="linenum"> 941</span></a>  
<a name="l942"><span class="linenum"> 942</span></a>          return !this._mouseStarted;
<a name="l943"><span class="linenum"> 943</span></a>      },
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>      _mouseUp: function(event) {
<a name="l946"><span class="linenum"> 946</span></a>          $(document)
<a name="l947"><span class="linenum"> 947</span></a>              .<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;mousemove.&quot;+this.widgetName, this._mouseMoveDelegate)
<a name="l948"><span class="linenum"> 948</span></a>              .<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;mouseup.&quot;+this.widgetName, this._mouseUpDelegate);
<a name="l949"><span class="linenum"> 949</span></a>  
<a name="l950"><span class="linenum"> 950</span></a>          if (this._mouseStarted) {
<a name="l951"><span class="linenum"> 951</span></a>              this._mouseStarted = false;
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>              if (event.target === this._mouseDownEvent.target) {
<a name="l954"><span class="linenum"> 954</span></a>                  $.data(event.target, this.widgetName + &quot;.preventClickEvent&quot;, true);
<a name="l955"><span class="linenum"> 955</span></a>              }
<a name="l956"><span class="linenum"> 956</span></a>  
<a name="l957"><span class="linenum"> 957</span></a>              this._mouseStop(event);
<a name="l958"><span class="linenum"> 958</span></a>          }
<a name="l959"><span class="linenum"> 959</span></a>  
<a name="l960"><span class="linenum"> 960</span></a>          return false;
<a name="l961"><span class="linenum"> 961</span></a>      },
<a name="l962"><span class="linenum"> 962</span></a>  
<a name="l963"><span class="linenum"> 963</span></a>      _mouseDistanceMet: function(event) {
<a name="l964"><span class="linenum"> 964</span></a>          return (Math.<a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(
<a name="l965"><span class="linenum"> 965</span></a>                  Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(this._mouseDownEvent.pageX - event.pageX),
<a name="l966"><span class="linenum"> 966</span></a>                  Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(this._mouseDownEvent.pageY - event.pageY)
<a name="l967"><span class="linenum"> 967</span></a>              ) &gt;= this.options.distance
<a name="l968"><span class="linenum"> 968</span></a>          );
<a name="l969"><span class="linenum"> 969</span></a>      },
<a name="l970"><span class="linenum"> 970</span></a>  
<a name="l971"><span class="linenum"> 971</span></a>      _mouseDelayMet: function(<span class="comment">/* event */</span>) {
<a name="l972"><span class="linenum"> 972</span></a>          return this.mouseDelayMet;
<a name="l973"><span class="linenum"> 973</span></a>      },
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment">    // These are placeholder methods, to be overriden by extending plugin</span>
<a name="l976"><span class="linenum"> 976</span></a>      _mouseStart: function(<span class="comment">/* event */</span>) {},
<a name="l977"><span class="linenum"> 977</span></a>      _mouseDrag: function(<span class="comment">/* event */</span>) {},
<a name="l978"><span class="linenum"> 978</span></a>      _mouseStop: function(<span class="comment">/* event */</span>) {},
<a name="l979"><span class="linenum"> 979</span></a>      _mouseCapture: function(<span class="comment">/* event */</span>) { return true; }
<a name="l980"><span class="linenum"> 980</span></a>  });
<a name="l981"><span class="linenum"> 981</span></a>  
<a name="l982"><span class="linenum"> 982</span></a>  })(jQuery);
<a name="l983"><span class="linenum"> 983</span></a>  (function( $, undefined ) {
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>  $.ui = $.ui || {};
<a name="l986"><span class="linenum"> 986</span></a>  
<a name="l987"><span class="linenum"> 987</span></a>  var cachedScrollbarWidth,
<a name="l988"><span class="linenum"> 988</span></a>      max = Math.max,
<a name="l989"><span class="linenum"> 989</span></a>      abs = Math.abs,
<a name="l990"><span class="linenum"> 990</span></a>      round = Math.round,
<a name="l991"><span class="linenum"> 991</span></a>      rhorizontal = /left|center|right/,
<a name="l992"><span class="linenum"> 992</span></a>      rvertical = /top|center|bottom/,
<a name="l993"><span class="linenum"> 993</span></a>      roffset = /[\+\-]\d+(\.[\d]+)?%?/,
<a name="l994"><span class="linenum"> 994</span></a>      rposition = /^\w+/,
<a name="l995"><span class="linenum"> 995</span></a>      rpercent = /%$/,
<a name="l996"><span class="linenum"> 996</span></a>      _position = $.fn.position;
<a name="l997"><span class="linenum"> 997</span></a>  
<a name="l998"><span class="linenum"> 998</span></a>  function <a class="function" onClick="logFunction('getOffsets')" href="../../../_functions/getoffsets.html" onMouseOver="funcPopup(event,'getoffsets')">getOffsets</a>( offsets, width, height ) {
<a name="l999"><span class="linenum"> 999</span></a>      return [
<a name="l1000"><span class="linenum">1000</span></a>          parseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),
<a name="l1001"><span class="linenum">1001</span></a>          parseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )
<a name="l1002"><span class="linenum">1002</span></a>      ];
<a name="l1003"><span class="linenum">1003</span></a>  }
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>  function <a class="function" onClick="logFunction('parseCss')" href="../../../_functions/parsecss.html" onMouseOver="funcPopup(event,'parsecss')">parseCss</a>( element, property ) {
<a name="l1006"><span class="linenum">1006</span></a>      return parseInt( $.css( element, property ), 10 ) || 0;
<a name="l1007"><span class="linenum">1007</span></a>  }
<a name="l1008"><span class="linenum">1008</span></a>  
<a name="l1009"><span class="linenum">1009</span></a>  function <a class="function" onClick="logFunction('getDimensions')" href="../../../_functions/getdimensions.html" onMouseOver="funcPopup(event,'getdimensions')">getDimensions</a>( elem ) {
<a name="l1010"><span class="linenum">1010</span></a>      var raw = elem[0];
<a name="l1011"><span class="linenum">1011</span></a>      if ( raw.nodeType === 9 ) {
<a name="l1012"><span class="linenum">1012</span></a>          return {
<a name="l1013"><span class="linenum">1013</span></a>              width: elem.width(),
<a name="l1014"><span class="linenum">1014</span></a>              height: elem.height(),
<a name="l1015"><span class="linenum">1015</span></a>              offset: { top: 0, left: 0 }
<a name="l1016"><span class="linenum">1016</span></a>          };
<a name="l1017"><span class="linenum">1017</span></a>      }
<a name="l1018"><span class="linenum">1018</span></a>      if ( $.isWindow( raw ) ) {
<a name="l1019"><span class="linenum">1019</span></a>          return {
<a name="l1020"><span class="linenum">1020</span></a>              width: elem.width(),
<a name="l1021"><span class="linenum">1021</span></a>              height: elem.height(),
<a name="l1022"><span class="linenum">1022</span></a>              offset: { top: elem.scrollTop(), left: elem.scrollLeft() }
<a name="l1023"><span class="linenum">1023</span></a>          };
<a name="l1024"><span class="linenum">1024</span></a>      }
<a name="l1025"><span class="linenum">1025</span></a>      if ( raw.preventDefault ) {
<a name="l1026"><span class="linenum">1026</span></a>          return {
<a name="l1027"><span class="linenum">1027</span></a>              width: 0,
<a name="l1028"><span class="linenum">1028</span></a>              height: 0,
<a name="l1029"><span class="linenum">1029</span></a>              offset: { top: raw.pageY, left: raw.pageX }
<a name="l1030"><span class="linenum">1030</span></a>          };
<a name="l1031"><span class="linenum">1031</span></a>      }
<a name="l1032"><span class="linenum">1032</span></a>      return {
<a name="l1033"><span class="linenum">1033</span></a>          width: elem.outerWidth(),
<a name="l1034"><span class="linenum">1034</span></a>          height: elem.outerHeight(),
<a name="l1035"><span class="linenum">1035</span></a>          offset: elem.offset()
<a name="l1036"><span class="linenum">1036</span></a>      };
<a name="l1037"><span class="linenum">1037</span></a>  }
<a name="l1038"><span class="linenum">1038</span></a>  
<a name="l1039"><span class="linenum">1039</span></a>  $.position = {
<a name="l1040"><span class="linenum">1040</span></a>      scrollbarWidth: function() {
<a name="l1041"><span class="linenum">1041</span></a>          if ( cachedScrollbarWidth !== undefined ) {
<a name="l1042"><span class="linenum">1042</span></a>              return cachedScrollbarWidth;
<a name="l1043"><span class="linenum">1043</span></a>          }
<a name="l1044"><span class="linenum">1044</span></a>          var w1, w2,
<a name="l1045"><span class="linenum">1045</span></a>              div = $( &quot;&lt;div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'&gt;&lt;div style='height:100px;width:auto;'&gt;&lt;/div&gt;&lt;/div&gt;&quot; ),
<a name="l1046"><span class="linenum">1046</span></a>              innerDiv = div.children()[0];
<a name="l1047"><span class="linenum">1047</span></a>  
<a name="l1048"><span class="linenum">1048</span></a>          $( &quot;body&quot; ).<a class="function" onClick="logFunction('append')" href="../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>( div );
<a name="l1049"><span class="linenum">1049</span></a>          w1 = innerDiv.offsetWidth;
<a name="l1050"><span class="linenum">1050</span></a>          div.css( &quot;overflow&quot;, &quot;scroll&quot; );
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>          w2 = innerDiv.offsetWidth;
<a name="l1053"><span class="linenum">1053</span></a>  
<a name="l1054"><span class="linenum">1054</span></a>          if ( w1 === w2 ) {
<a name="l1055"><span class="linenum">1055</span></a>              w2 = div[0].clientWidth;
<a name="l1056"><span class="linenum">1056</span></a>          }
<a name="l1057"><span class="linenum">1057</span></a>  
<a name="l1058"><span class="linenum">1058</span></a>          div.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l1059"><span class="linenum">1059</span></a>  
<a name="l1060"><span class="linenum">1060</span></a>          return (cachedScrollbarWidth = w1 - w2);
<a name="l1061"><span class="linenum">1061</span></a>      },
<a name="l1062"><span class="linenum">1062</span></a>      getScrollInfo: function( within ) {
<a name="l1063"><span class="linenum">1063</span></a>          var overflowX = within.isWindow || within.isDocument ? &quot;&quot; :
<a name="l1064"><span class="linenum">1064</span></a>                  within.element.css( &quot;overflow-x&quot; ),
<a name="l1065"><span class="linenum">1065</span></a>              overflowY = within.isWindow || within.isDocument ? &quot;&quot; :
<a name="l1066"><span class="linenum">1066</span></a>                  within.element.css( &quot;overflow-y&quot; ),
<a name="l1067"><span class="linenum">1067</span></a>              hasOverflowX = overflowX === &quot;scroll&quot; ||
<a name="l1068"><span class="linenum">1068</span></a>                  ( overflowX === &quot;auto&quot; &amp;&amp; within.width &lt; within.element[0].scrollWidth ),
<a name="l1069"><span class="linenum">1069</span></a>              hasOverflowY = overflowY === &quot;scroll&quot; ||
<a name="l1070"><span class="linenum">1070</span></a>                  ( overflowY === &quot;auto&quot; &amp;&amp; within.height &lt; within.element[0].scrollHeight );
<a name="l1071"><span class="linenum">1071</span></a>          return {
<a name="l1072"><span class="linenum">1072</span></a>              width: hasOverflowY ? $.position.scrollbarWidth() : 0,
<a name="l1073"><span class="linenum">1073</span></a>              height: hasOverflowX ? $.position.scrollbarWidth() : 0
<a name="l1074"><span class="linenum">1074</span></a>          };
<a name="l1075"><span class="linenum">1075</span></a>      },
<a name="l1076"><span class="linenum">1076</span></a>      getWithinInfo: function( element ) {
<a name="l1077"><span class="linenum">1077</span></a>          var withinElement = $( element || window ),
<a name="l1078"><span class="linenum">1078</span></a>              isWindow = $.isWindow( withinElement[0] ),
<a name="l1079"><span class="linenum">1079</span></a>              isDocument = !!withinElement[ 0 ] &amp;&amp; withinElement[ 0 ].nodeType === 9;
<a name="l1080"><span class="linenum">1080</span></a>          return {
<a name="l1081"><span class="linenum">1081</span></a>              element: withinElement,
<a name="l1082"><span class="linenum">1082</span></a>              isWindow: isWindow,
<a name="l1083"><span class="linenum">1083</span></a>              isDocument: isDocument,
<a name="l1084"><span class="linenum">1084</span></a>              offset: withinElement.offset() || { left: 0, top: 0 },
<a name="l1085"><span class="linenum">1085</span></a>              scrollLeft: withinElement.scrollLeft(),
<a name="l1086"><span class="linenum">1086</span></a>              scrollTop: withinElement.scrollTop(),
<a name="l1087"><span class="linenum">1087</span></a>              width: isWindow ? withinElement.width() : withinElement.outerWidth(),
<a name="l1088"><span class="linenum">1088</span></a>              height: isWindow ? withinElement.height() : withinElement.outerHeight()
<a name="l1089"><span class="linenum">1089</span></a>          };
<a name="l1090"><span class="linenum">1090</span></a>      }
<a name="l1091"><span class="linenum">1091</span></a>  };
<a name="l1092"><span class="linenum">1092</span></a>  
<a name="l1093"><span class="linenum">1093</span></a>  $.fn.position = function( options ) {
<a name="l1094"><span class="linenum">1094</span></a>      if ( !options || !options.of ) {
<a name="l1095"><span class="linenum">1095</span></a>          return _position.apply( this, arguments );
<a name="l1096"><span class="linenum">1096</span></a>      }
<a name="l1097"><span class="linenum">1097</span></a>  
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">    // make a copy, we don't want to modify arguments</span>
<a name="l1099"><span class="linenum">1099</span></a>      options = $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, options );
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>      var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,
<a name="l1102"><span class="linenum">1102</span></a>          target = $( options.of ),
<a name="l1103"><span class="linenum">1103</span></a>          within = $.position.getWithinInfo( options.within ),
<a name="l1104"><span class="linenum">1104</span></a>          scrollInfo = $.position.getScrollInfo( within ),
<a name="l1105"><span class="linenum">1105</span></a>          collision = ( options.collision || &quot;flip&quot; ).<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>( &quot; &quot; ),
<a name="l1106"><span class="linenum">1106</span></a>          offsets = {};
<a name="l1107"><span class="linenum">1107</span></a>  
<a name="l1108"><span class="linenum">1108</span></a>      dimensions = <a class="function" onClick="logFunction('getDimensions')" href="../../../_functions/getdimensions.html" onMouseOver="funcPopup(event,'getdimensions')">getDimensions</a>( target );
<a name="l1109"><span class="linenum">1109</span></a>      if ( target[0].preventDefault ) {
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment">        // force left top to allow flipping</span>
<a name="l1111"><span class="linenum">1111</span></a>          options.at = &quot;left top&quot;;
<a name="l1112"><span class="linenum">1112</span></a>      }
<a name="l1113"><span class="linenum">1113</span></a>      targetWidth = dimensions.width;
<a name="l1114"><span class="linenum">1114</span></a>      targetHeight = dimensions.height;
<a name="l1115"><span class="linenum">1115</span></a>      targetOffset = dimensions.offset;
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment">    // clone to reuse original targetOffset later</span>
<a name="l1117"><span class="linenum">1117</span></a>      basePosition = $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, targetOffset );
<a name="l1118"><span class="linenum">1118</span></a>  
<a name="l1119"><span class="linenum">1119</span></a>  <span class="comment">    // force my and at to have valid horizontal and vertical positions</span>
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment">    // if a value is missing or invalid, it will be converted to center</span>
<a name="l1121"><span class="linenum">1121</span></a>      $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( [ &quot;my&quot;, &quot;at&quot; ], function() {
<a name="l1122"><span class="linenum">1122</span></a>          var pos = ( options[ this ] || &quot;&quot; ).<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>( &quot; &quot; ),
<a name="l1123"><span class="linenum">1123</span></a>              horizontalOffset,
<a name="l1124"><span class="linenum">1124</span></a>              verticalOffset;
<a name="l1125"><span class="linenum">1125</span></a>  
<a name="l1126"><span class="linenum">1126</span></a>          if ( pos.length === 1) {
<a name="l1127"><span class="linenum">1127</span></a>              pos = rhorizontal.test( pos[ 0 ] ) ?
<a name="l1128"><span class="linenum">1128</span></a>                  pos.concat( [ &quot;center&quot; ] ) :
<a name="l1129"><span class="linenum">1129</span></a>                  rvertical.test( pos[ 0 ] ) ?
<a name="l1130"><span class="linenum">1130</span></a>                      [ &quot;center&quot; ].concat( pos ) :
<a name="l1131"><span class="linenum">1131</span></a>                      [ &quot;center&quot;, &quot;center&quot; ];
<a name="l1132"><span class="linenum">1132</span></a>          }
<a name="l1133"><span class="linenum">1133</span></a>          pos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : &quot;center&quot;;
<a name="l1134"><span class="linenum">1134</span></a>          pos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : &quot;center&quot;;
<a name="l1135"><span class="linenum">1135</span></a>  
<a name="l1136"><span class="linenum">1136</span></a>  <span class="comment">        // calculate offsets</span>
<a name="l1137"><span class="linenum">1137</span></a>          horizontalOffset = roffset.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>( pos[ 0 ] );
<a name="l1138"><span class="linenum">1138</span></a>          verticalOffset = roffset.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>( pos[ 1 ] );
<a name="l1139"><span class="linenum">1139</span></a>          offsets[ this ] = [
<a name="l1140"><span class="linenum">1140</span></a>              horizontalOffset ? horizontalOffset[ 0 ] : 0,
<a name="l1141"><span class="linenum">1141</span></a>              verticalOffset ? verticalOffset[ 0 ] : 0
<a name="l1142"><span class="linenum">1142</span></a>          ];
<a name="l1143"><span class="linenum">1143</span></a>  
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">        // reduce to just the positions without the offsets</span>
<a name="l1145"><span class="linenum">1145</span></a>          options[ this ] = [
<a name="l1146"><span class="linenum">1146</span></a>              rposition.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>( pos[ 0 ] )[ 0 ],
<a name="l1147"><span class="linenum">1147</span></a>              rposition.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>( pos[ 1 ] )[ 0 ]
<a name="l1148"><span class="linenum">1148</span></a>          ];
<a name="l1149"><span class="linenum">1149</span></a>      });
<a name="l1150"><span class="linenum">1150</span></a>  
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">    // normalize collision option</span>
<a name="l1152"><span class="linenum">1152</span></a>      if ( collision.length === 1 ) {
<a name="l1153"><span class="linenum">1153</span></a>          collision[ 1 ] = collision[ 0 ];
<a name="l1154"><span class="linenum">1154</span></a>      }
<a name="l1155"><span class="linenum">1155</span></a>  
<a name="l1156"><span class="linenum">1156</span></a>      if ( options.at[ 0 ] === &quot;right&quot; ) {
<a name="l1157"><span class="linenum">1157</span></a>          basePosition.left += targetWidth;
<a name="l1158"><span class="linenum">1158</span></a>      } else if ( options.at[ 0 ] === &quot;center&quot; ) {
<a name="l1159"><span class="linenum">1159</span></a>          basePosition.left += targetWidth / 2;
<a name="l1160"><span class="linenum">1160</span></a>      }
<a name="l1161"><span class="linenum">1161</span></a>  
<a name="l1162"><span class="linenum">1162</span></a>      if ( options.at[ 1 ] === &quot;bottom&quot; ) {
<a name="l1163"><span class="linenum">1163</span></a>          basePosition.top += targetHeight;
<a name="l1164"><span class="linenum">1164</span></a>      } else if ( options.at[ 1 ] === &quot;center&quot; ) {
<a name="l1165"><span class="linenum">1165</span></a>          basePosition.top += targetHeight / 2;
<a name="l1166"><span class="linenum">1166</span></a>      }
<a name="l1167"><span class="linenum">1167</span></a>  
<a name="l1168"><span class="linenum">1168</span></a>      atOffset = <a class="function" onClick="logFunction('getOffsets')" href="../../../_functions/getoffsets.html" onMouseOver="funcPopup(event,'getoffsets')">getOffsets</a>( offsets.at, targetWidth, targetHeight );
<a name="l1169"><span class="linenum">1169</span></a>      basePosition.left += atOffset[ 0 ];
<a name="l1170"><span class="linenum">1170</span></a>      basePosition.top += atOffset[ 1 ];
<a name="l1171"><span class="linenum">1171</span></a>  
<a name="l1172"><span class="linenum">1172</span></a>      return this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l1173"><span class="linenum">1173</span></a>          var collisionPosition, using,
<a name="l1174"><span class="linenum">1174</span></a>              elem = $( this ),
<a name="l1175"><span class="linenum">1175</span></a>              elemWidth = elem.outerWidth(),
<a name="l1176"><span class="linenum">1176</span></a>              elemHeight = elem.outerHeight(),
<a name="l1177"><span class="linenum">1177</span></a>              marginLeft = <a class="function" onClick="logFunction('parseCss')" href="../../../_functions/parsecss.html" onMouseOver="funcPopup(event,'parsecss')">parseCss</a>( this, &quot;marginLeft&quot; ),
<a name="l1178"><span class="linenum">1178</span></a>              marginTop = <a class="function" onClick="logFunction('parseCss')" href="../../../_functions/parsecss.html" onMouseOver="funcPopup(event,'parsecss')">parseCss</a>( this, &quot;marginTop&quot; ),
<a name="l1179"><span class="linenum">1179</span></a>              collisionWidth = elemWidth + marginLeft + <a class="function" onClick="logFunction('parseCss')" href="../../../_functions/parsecss.html" onMouseOver="funcPopup(event,'parsecss')">parseCss</a>( this, &quot;marginRight&quot; ) + scrollInfo.width,
<a name="l1180"><span class="linenum">1180</span></a>              collisionHeight = elemHeight + marginTop + <a class="function" onClick="logFunction('parseCss')" href="../../../_functions/parsecss.html" onMouseOver="funcPopup(event,'parsecss')">parseCss</a>( this, &quot;marginBottom&quot; ) + scrollInfo.height,
<a name="l1181"><span class="linenum">1181</span></a>              position = $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, basePosition ),
<a name="l1182"><span class="linenum">1182</span></a>              myOffset = <a class="function" onClick="logFunction('getOffsets')" href="../../../_functions/getoffsets.html" onMouseOver="funcPopup(event,'getoffsets')">getOffsets</a>( offsets.my, elem.outerWidth(), elem.outerHeight() );
<a name="l1183"><span class="linenum">1183</span></a>  
<a name="l1184"><span class="linenum">1184</span></a>          if ( options.my[ 0 ] === &quot;right&quot; ) {
<a name="l1185"><span class="linenum">1185</span></a>              position.left -= elemWidth;
<a name="l1186"><span class="linenum">1186</span></a>          } else if ( options.my[ 0 ] === &quot;center&quot; ) {
<a name="l1187"><span class="linenum">1187</span></a>              position.left -= elemWidth / 2;
<a name="l1188"><span class="linenum">1188</span></a>          }
<a name="l1189"><span class="linenum">1189</span></a>  
<a name="l1190"><span class="linenum">1190</span></a>          if ( options.my[ 1 ] === &quot;bottom&quot; ) {
<a name="l1191"><span class="linenum">1191</span></a>              position.top -= elemHeight;
<a name="l1192"><span class="linenum">1192</span></a>          } else if ( options.my[ 1 ] === &quot;center&quot; ) {
<a name="l1193"><span class="linenum">1193</span></a>              position.top -= elemHeight / 2;
<a name="l1194"><span class="linenum">1194</span></a>          }
<a name="l1195"><span class="linenum">1195</span></a>  
<a name="l1196"><span class="linenum">1196</span></a>          position.left += myOffset[ 0 ];
<a name="l1197"><span class="linenum">1197</span></a>          position.top += myOffset[ 1 ];
<a name="l1198"><span class="linenum">1198</span></a>  
<a name="l1199"><span class="linenum">1199</span></a>  <span class="comment">        // if the browser doesn't support fractions, then round for consistent results</span>
<a name="l1200"><span class="linenum">1200</span></a>          if ( !$.support.offsetFractions ) {
<a name="l1201"><span class="linenum">1201</span></a>              position.left = <a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>( position.left );
<a name="l1202"><span class="linenum">1202</span></a>              position.top = <a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>( position.top );
<a name="l1203"><span class="linenum">1203</span></a>          }
<a name="l1204"><span class="linenum">1204</span></a>  
<a name="l1205"><span class="linenum">1205</span></a>          collisionPosition = {
<a name="l1206"><span class="linenum">1206</span></a>              marginLeft: marginLeft,
<a name="l1207"><span class="linenum">1207</span></a>              marginTop: marginTop
<a name="l1208"><span class="linenum">1208</span></a>          };
<a name="l1209"><span class="linenum">1209</span></a>  
<a name="l1210"><span class="linenum">1210</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( [ &quot;left&quot;, &quot;top&quot; ], function( i, dir ) {
<a name="l1211"><span class="linenum">1211</span></a>              if ( $.ui.position[ collision[ i ] ] ) {
<a name="l1212"><span class="linenum">1212</span></a>                  $.ui.position[ collision[ i ] ][ dir ]( position, {
<a name="l1213"><span class="linenum">1213</span></a>                      targetWidth: targetWidth,
<a name="l1214"><span class="linenum">1214</span></a>                      targetHeight: targetHeight,
<a name="l1215"><span class="linenum">1215</span></a>                      elemWidth: elemWidth,
<a name="l1216"><span class="linenum">1216</span></a>                      elemHeight: elemHeight,
<a name="l1217"><span class="linenum">1217</span></a>                      collisionPosition: collisionPosition,
<a name="l1218"><span class="linenum">1218</span></a>                      collisionWidth: collisionWidth,
<a name="l1219"><span class="linenum">1219</span></a>                      collisionHeight: collisionHeight,
<a name="l1220"><span class="linenum">1220</span></a>                      offset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],
<a name="l1221"><span class="linenum">1221</span></a>                      my: options.my,
<a name="l1222"><span class="linenum">1222</span></a>                      at: options.at,
<a name="l1223"><span class="linenum">1223</span></a>                      within: within,
<a name="l1224"><span class="linenum">1224</span></a>                      elem : elem
<a name="l1225"><span class="linenum">1225</span></a>                  });
<a name="l1226"><span class="linenum">1226</span></a>              }
<a name="l1227"><span class="linenum">1227</span></a>          });
<a name="l1228"><span class="linenum">1228</span></a>  
<a name="l1229"><span class="linenum">1229</span></a>          if ( options.using ) {
<a name="l1230"><span class="linenum">1230</span></a>  <span class="comment">            // adds feedback as second argument to using callback, if present</span>
<a name="l1231"><span class="linenum">1231</span></a>              using = function( props ) {
<a name="l1232"><span class="linenum">1232</span></a>                  var left = targetOffset.left - position.left,
<a name="l1233"><span class="linenum">1233</span></a>                      right = left + targetWidth - elemWidth,
<a name="l1234"><span class="linenum">1234</span></a>                      top = targetOffset.top - position.top,
<a name="l1235"><span class="linenum">1235</span></a>                      bottom = top + targetHeight - elemHeight,
<a name="l1236"><span class="linenum">1236</span></a>                      feedback = {
<a name="l1237"><span class="linenum">1237</span></a>                          target: {
<a name="l1238"><span class="linenum">1238</span></a>                              element: target,
<a name="l1239"><span class="linenum">1239</span></a>                              left: targetOffset.left,
<a name="l1240"><span class="linenum">1240</span></a>                              top: targetOffset.top,
<a name="l1241"><span class="linenum">1241</span></a>                              width: targetWidth,
<a name="l1242"><span class="linenum">1242</span></a>                              height: targetHeight
<a name="l1243"><span class="linenum">1243</span></a>                          },
<a name="l1244"><span class="linenum">1244</span></a>                          element: {
<a name="l1245"><span class="linenum">1245</span></a>                              element: elem,
<a name="l1246"><span class="linenum">1246</span></a>                              left: position.left,
<a name="l1247"><span class="linenum">1247</span></a>                              top: position.top,
<a name="l1248"><span class="linenum">1248</span></a>                              width: elemWidth,
<a name="l1249"><span class="linenum">1249</span></a>                              height: elemHeight
<a name="l1250"><span class="linenum">1250</span></a>                          },
<a name="l1251"><span class="linenum">1251</span></a>                          horizontal: right &lt; 0 ? &quot;left&quot; : left &gt; 0 ? &quot;right&quot; : &quot;center&quot;,
<a name="l1252"><span class="linenum">1252</span></a>                          vertical: bottom &lt; 0 ? &quot;top&quot; : top &gt; 0 ? &quot;bottom&quot; : &quot;middle&quot;
<a name="l1253"><span class="linenum">1253</span></a>                      };
<a name="l1254"><span class="linenum">1254</span></a>                  if ( targetWidth &lt; elemWidth &amp;&amp; <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( left + right ) &lt; targetWidth ) {
<a name="l1255"><span class="linenum">1255</span></a>                      feedback.horizontal = &quot;center&quot;;
<a name="l1256"><span class="linenum">1256</span></a>                  }
<a name="l1257"><span class="linenum">1257</span></a>                  if ( targetHeight &lt; elemHeight &amp;&amp; <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( top + bottom ) &lt; targetHeight ) {
<a name="l1258"><span class="linenum">1258</span></a>                      feedback.vertical = &quot;middle&quot;;
<a name="l1259"><span class="linenum">1259</span></a>                  }
<a name="l1260"><span class="linenum">1260</span></a>                  if ( <a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>( <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( left ), <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( right ) ) &gt; <a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>( <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( top ), <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( bottom ) ) ) {
<a name="l1261"><span class="linenum">1261</span></a>                      feedback.important = &quot;horizontal&quot;;
<a name="l1262"><span class="linenum">1262</span></a>                  } else {
<a name="l1263"><span class="linenum">1263</span></a>                      feedback.important = &quot;vertical&quot;;
<a name="l1264"><span class="linenum">1264</span></a>                  }
<a name="l1265"><span class="linenum">1265</span></a>                  options.using.call( this, props, feedback );
<a name="l1266"><span class="linenum">1266</span></a>              };
<a name="l1267"><span class="linenum">1267</span></a>          }
<a name="l1268"><span class="linenum">1268</span></a>  
<a name="l1269"><span class="linenum">1269</span></a>          elem.offset( $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( position, { using: using } ) );
<a name="l1270"><span class="linenum">1270</span></a>      });
<a name="l1271"><span class="linenum">1271</span></a>  };
<a name="l1272"><span class="linenum">1272</span></a>  
<a name="l1273"><span class="linenum">1273</span></a>  $.ui.position = {
<a name="l1274"><span class="linenum">1274</span></a>      fit: {
<a name="l1275"><span class="linenum">1275</span></a>          left: function( position, data ) {
<a name="l1276"><span class="linenum">1276</span></a>              var within = data.within,
<a name="l1277"><span class="linenum">1277</span></a>                  withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,
<a name="l1278"><span class="linenum">1278</span></a>                  outerWidth = within.width,
<a name="l1279"><span class="linenum">1279</span></a>                  collisionPosLeft = position.left - data.collisionPosition.marginLeft,
<a name="l1280"><span class="linenum">1280</span></a>                  overLeft = withinOffset - collisionPosLeft,
<a name="l1281"><span class="linenum">1281</span></a>                  overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,
<a name="l1282"><span class="linenum">1282</span></a>                  newOverRight;
<a name="l1283"><span class="linenum">1283</span></a>  
<a name="l1284"><span class="linenum">1284</span></a>  <span class="comment">            // element is wider than within</span>
<a name="l1285"><span class="linenum">1285</span></a>              if ( data.collisionWidth &gt; outerWidth ) {
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">                // element is initially over the left side of within</span>
<a name="l1287"><span class="linenum">1287</span></a>                  if ( overLeft &gt; 0 &amp;&amp; overRight &lt;= 0 ) {
<a name="l1288"><span class="linenum">1288</span></a>                      newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
<a name="l1289"><span class="linenum">1289</span></a>                      position.left += overLeft - newOverRight;
<a name="l1290"><span class="linenum">1290</span></a>  <span class="comment">                // element is initially over right side of within</span>
<a name="l1291"><span class="linenum">1291</span></a>                  } else if ( overRight &gt; 0 &amp;&amp; overLeft &lt;= 0 ) {
<a name="l1292"><span class="linenum">1292</span></a>                      position.left = withinOffset;
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment">                // element is initially over both left and right sides of within</span>
<a name="l1294"><span class="linenum">1294</span></a>                  } else {
<a name="l1295"><span class="linenum">1295</span></a>                      if ( overLeft &gt; overRight ) {
<a name="l1296"><span class="linenum">1296</span></a>                          position.left = withinOffset + outerWidth - data.collisionWidth;
<a name="l1297"><span class="linenum">1297</span></a>                      } else {
<a name="l1298"><span class="linenum">1298</span></a>                          position.left = withinOffset;
<a name="l1299"><span class="linenum">1299</span></a>                      }
<a name="l1300"><span class="linenum">1300</span></a>                  }
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">            // too far left -&gt; align with left edge</span>
<a name="l1302"><span class="linenum">1302</span></a>              } else if ( overLeft &gt; 0 ) {
<a name="l1303"><span class="linenum">1303</span></a>                  position.left += overLeft;
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment">            // too far right -&gt; align with right edge</span>
<a name="l1305"><span class="linenum">1305</span></a>              } else if ( overRight &gt; 0 ) {
<a name="l1306"><span class="linenum">1306</span></a>                  position.left -= overRight;
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment">            // adjust based on position and margin</span>
<a name="l1308"><span class="linenum">1308</span></a>              } else {
<a name="l1309"><span class="linenum">1309</span></a>                  position.left = <a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>( position.left - collisionPosLeft, position.left );
<a name="l1310"><span class="linenum">1310</span></a>              }
<a name="l1311"><span class="linenum">1311</span></a>          },
<a name="l1312"><span class="linenum">1312</span></a>          top: function( position, data ) {
<a name="l1313"><span class="linenum">1313</span></a>              var within = data.within,
<a name="l1314"><span class="linenum">1314</span></a>                  withinOffset = within.isWindow ? within.scrollTop : within.offset.top,
<a name="l1315"><span class="linenum">1315</span></a>                  outerHeight = data.within.height,
<a name="l1316"><span class="linenum">1316</span></a>                  collisionPosTop = position.top - data.collisionPosition.marginTop,
<a name="l1317"><span class="linenum">1317</span></a>                  overTop = withinOffset - collisionPosTop,
<a name="l1318"><span class="linenum">1318</span></a>                  overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,
<a name="l1319"><span class="linenum">1319</span></a>                  newOverBottom;
<a name="l1320"><span class="linenum">1320</span></a>  
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment">            // element is taller than within</span>
<a name="l1322"><span class="linenum">1322</span></a>              if ( data.collisionHeight &gt; outerHeight ) {
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">                // element is initially over the top of within</span>
<a name="l1324"><span class="linenum">1324</span></a>                  if ( overTop &gt; 0 &amp;&amp; overBottom &lt;= 0 ) {
<a name="l1325"><span class="linenum">1325</span></a>                      newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
<a name="l1326"><span class="linenum">1326</span></a>                      position.top += overTop - newOverBottom;
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">                // element is initially over bottom of within</span>
<a name="l1328"><span class="linenum">1328</span></a>                  } else if ( overBottom &gt; 0 &amp;&amp; overTop &lt;= 0 ) {
<a name="l1329"><span class="linenum">1329</span></a>                      position.top = withinOffset;
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment">                // element is initially over both top and bottom of within</span>
<a name="l1331"><span class="linenum">1331</span></a>                  } else {
<a name="l1332"><span class="linenum">1332</span></a>                      if ( overTop &gt; overBottom ) {
<a name="l1333"><span class="linenum">1333</span></a>                          position.top = withinOffset + outerHeight - data.collisionHeight;
<a name="l1334"><span class="linenum">1334</span></a>                      } else {
<a name="l1335"><span class="linenum">1335</span></a>                          position.top = withinOffset;
<a name="l1336"><span class="linenum">1336</span></a>                      }
<a name="l1337"><span class="linenum">1337</span></a>                  }
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment">            // too far up -&gt; align with top</span>
<a name="l1339"><span class="linenum">1339</span></a>              } else if ( overTop &gt; 0 ) {
<a name="l1340"><span class="linenum">1340</span></a>                  position.top += overTop;
<a name="l1341"><span class="linenum">1341</span></a>  <span class="comment">            // too far down -&gt; align with bottom edge</span>
<a name="l1342"><span class="linenum">1342</span></a>              } else if ( overBottom &gt; 0 ) {
<a name="l1343"><span class="linenum">1343</span></a>                  position.top -= overBottom;
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment">            // adjust based on position and margin</span>
<a name="l1345"><span class="linenum">1345</span></a>              } else {
<a name="l1346"><span class="linenum">1346</span></a>                  position.top = <a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>( position.top - collisionPosTop, position.top );
<a name="l1347"><span class="linenum">1347</span></a>              }
<a name="l1348"><span class="linenum">1348</span></a>          }
<a name="l1349"><span class="linenum">1349</span></a>      },
<a name="l1350"><span class="linenum">1350</span></a>      flip: {
<a name="l1351"><span class="linenum">1351</span></a>          left: function( position, data ) {
<a name="l1352"><span class="linenum">1352</span></a>              var within = data.within,
<a name="l1353"><span class="linenum">1353</span></a>                  withinOffset = within.offset.left + within.scrollLeft,
<a name="l1354"><span class="linenum">1354</span></a>                  outerWidth = within.width,
<a name="l1355"><span class="linenum">1355</span></a>                  offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,
<a name="l1356"><span class="linenum">1356</span></a>                  collisionPosLeft = position.left - data.collisionPosition.marginLeft,
<a name="l1357"><span class="linenum">1357</span></a>                  overLeft = collisionPosLeft - offsetLeft,
<a name="l1358"><span class="linenum">1358</span></a>                  overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,
<a name="l1359"><span class="linenum">1359</span></a>                  myOffset = data.my[ 0 ] === &quot;left&quot; ?
<a name="l1360"><span class="linenum">1360</span></a>                      -data.elemWidth :
<a name="l1361"><span class="linenum">1361</span></a>                      data.my[ 0 ] === &quot;right&quot; ?
<a name="l1362"><span class="linenum">1362</span></a>                          data.elemWidth :
<a name="l1363"><span class="linenum">1363</span></a>                          0,
<a name="l1364"><span class="linenum">1364</span></a>                  atOffset = data.at[ 0 ] === &quot;left&quot; ?
<a name="l1365"><span class="linenum">1365</span></a>                      data.targetWidth :
<a name="l1366"><span class="linenum">1366</span></a>                      data.at[ 0 ] === &quot;right&quot; ?
<a name="l1367"><span class="linenum">1367</span></a>                          -data.targetWidth :
<a name="l1368"><span class="linenum">1368</span></a>                          0,
<a name="l1369"><span class="linenum">1369</span></a>                  offset = -2 * data.offset[ 0 ],
<a name="l1370"><span class="linenum">1370</span></a>                  newOverRight,
<a name="l1371"><span class="linenum">1371</span></a>                  newOverLeft;
<a name="l1372"><span class="linenum">1372</span></a>  
<a name="l1373"><span class="linenum">1373</span></a>              if ( overLeft &lt; 0 ) {
<a name="l1374"><span class="linenum">1374</span></a>                  newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;
<a name="l1375"><span class="linenum">1375</span></a>                  if ( newOverRight &lt; 0 || newOverRight &lt; <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( overLeft ) ) {
<a name="l1376"><span class="linenum">1376</span></a>                      position.left += myOffset + atOffset + offset;
<a name="l1377"><span class="linenum">1377</span></a>                  }
<a name="l1378"><span class="linenum">1378</span></a>              }
<a name="l1379"><span class="linenum">1379</span></a>              else if ( overRight &gt; 0 ) {
<a name="l1380"><span class="linenum">1380</span></a>                  newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;
<a name="l1381"><span class="linenum">1381</span></a>                  if ( newOverLeft &gt; 0 || <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( newOverLeft ) &lt; overRight ) {
<a name="l1382"><span class="linenum">1382</span></a>                      position.left += myOffset + atOffset + offset;
<a name="l1383"><span class="linenum">1383</span></a>                  }
<a name="l1384"><span class="linenum">1384</span></a>              }
<a name="l1385"><span class="linenum">1385</span></a>          },
<a name="l1386"><span class="linenum">1386</span></a>          top: function( position, data ) {
<a name="l1387"><span class="linenum">1387</span></a>              var within = data.within,
<a name="l1388"><span class="linenum">1388</span></a>                  withinOffset = within.offset.top + within.scrollTop,
<a name="l1389"><span class="linenum">1389</span></a>                  outerHeight = within.height,
<a name="l1390"><span class="linenum">1390</span></a>                  offsetTop = within.isWindow ? within.scrollTop : within.offset.top,
<a name="l1391"><span class="linenum">1391</span></a>                  collisionPosTop = position.top - data.collisionPosition.marginTop,
<a name="l1392"><span class="linenum">1392</span></a>                  overTop = collisionPosTop - offsetTop,
<a name="l1393"><span class="linenum">1393</span></a>                  overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,
<a name="l1394"><span class="linenum">1394</span></a>                  top = data.my[ 1 ] === &quot;top&quot;,
<a name="l1395"><span class="linenum">1395</span></a>                  myOffset = top ?
<a name="l1396"><span class="linenum">1396</span></a>                      -data.elemHeight :
<a name="l1397"><span class="linenum">1397</span></a>                      data.my[ 1 ] === &quot;bottom&quot; ?
<a name="l1398"><span class="linenum">1398</span></a>                          data.elemHeight :
<a name="l1399"><span class="linenum">1399</span></a>                          0,
<a name="l1400"><span class="linenum">1400</span></a>                  atOffset = data.at[ 1 ] === &quot;top&quot; ?
<a name="l1401"><span class="linenum">1401</span></a>                      data.targetHeight :
<a name="l1402"><span class="linenum">1402</span></a>                      data.at[ 1 ] === &quot;bottom&quot; ?
<a name="l1403"><span class="linenum">1403</span></a>                          -data.targetHeight :
<a name="l1404"><span class="linenum">1404</span></a>                          0,
<a name="l1405"><span class="linenum">1405</span></a>                  offset = -2 * data.offset[ 1 ],
<a name="l1406"><span class="linenum">1406</span></a>                  newOverTop,
<a name="l1407"><span class="linenum">1407</span></a>                  newOverBottom;
<a name="l1408"><span class="linenum">1408</span></a>              if ( overTop &lt; 0 ) {
<a name="l1409"><span class="linenum">1409</span></a>                  newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;
<a name="l1410"><span class="linenum">1410</span></a>                  if ( ( position.top + myOffset + atOffset + offset) &gt; overTop &amp;&amp; ( newOverBottom &lt; 0 || newOverBottom &lt; <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( overTop ) ) ) {
<a name="l1411"><span class="linenum">1411</span></a>                      position.top += myOffset + atOffset + offset;
<a name="l1412"><span class="linenum">1412</span></a>                  }
<a name="l1413"><span class="linenum">1413</span></a>              }
<a name="l1414"><span class="linenum">1414</span></a>              else if ( overBottom &gt; 0 ) {
<a name="l1415"><span class="linenum">1415</span></a>                  newOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;
<a name="l1416"><span class="linenum">1416</span></a>                  if ( ( position.top + myOffset + atOffset + offset) &gt; overBottom &amp;&amp; ( newOverTop &gt; 0 || <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( newOverTop ) &lt; overBottom ) ) {
<a name="l1417"><span class="linenum">1417</span></a>                      position.top += myOffset + atOffset + offset;
<a name="l1418"><span class="linenum">1418</span></a>                  }
<a name="l1419"><span class="linenum">1419</span></a>              }
<a name="l1420"><span class="linenum">1420</span></a>          }
<a name="l1421"><span class="linenum">1421</span></a>      },
<a name="l1422"><span class="linenum">1422</span></a>      flipfit: {
<a name="l1423"><span class="linenum">1423</span></a>          left: function() {
<a name="l1424"><span class="linenum">1424</span></a>              $.ui.position.flip.left.apply( this, arguments );
<a name="l1425"><span class="linenum">1425</span></a>              $.ui.position.fit.left.apply( this, arguments );
<a name="l1426"><span class="linenum">1426</span></a>          },
<a name="l1427"><span class="linenum">1427</span></a>          top: function() {
<a name="l1428"><span class="linenum">1428</span></a>              $.ui.position.flip.top.apply( this, arguments );
<a name="l1429"><span class="linenum">1429</span></a>              $.ui.position.fit.top.apply( this, arguments );
<a name="l1430"><span class="linenum">1430</span></a>          }
<a name="l1431"><span class="linenum">1431</span></a>      }
<a name="l1432"><span class="linenum">1432</span></a>  };
<a name="l1433"><span class="linenum">1433</span></a>  
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">// fraction support test</span>
<a name="l1435"><span class="linenum">1435</span></a>  (function () {
<a name="l1436"><span class="linenum">1436</span></a>      var testElement, testElementParent, testElementStyle, offsetLeft, i,
<a name="l1437"><span class="linenum">1437</span></a>          body = document.getElementsByTagName( &quot;body&quot; )[ 0 ],
<a name="l1438"><span class="linenum">1438</span></a>          div = document.<a class="function" onClick="logFunction('createElement')" href="../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>( &quot;div&quot; );
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>  <span class="comment">    //Create a &quot;fake body&quot; for testing based on method used in jQuery.support</span>
<a name="l1441"><span class="linenum">1441</span></a>      testElement = document.<a class="function" onClick="logFunction('createElement')" href="../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>( body ? &quot;div&quot; : &quot;body&quot; );
<a name="l1442"><span class="linenum">1442</span></a>      testElementStyle = {
<a name="l1443"><span class="linenum">1443</span></a>          visibility: &quot;hidden&quot;,
<a name="l1444"><span class="linenum">1444</span></a>          width: 0,
<a name="l1445"><span class="linenum">1445</span></a>          height: 0,
<a name="l1446"><span class="linenum">1446</span></a>          border: 0,
<a name="l1447"><span class="linenum">1447</span></a>          margin: 0,
<a name="l1448"><span class="linenum">1448</span></a>          background: &quot;none&quot;
<a name="l1449"><span class="linenum">1449</span></a>      };
<a name="l1450"><span class="linenum">1450</span></a>      if ( body ) {
<a name="l1451"><span class="linenum">1451</span></a>          $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( testElementStyle, {
<a name="l1452"><span class="linenum">1452</span></a>              position: &quot;absolute&quot;,
<a name="l1453"><span class="linenum">1453</span></a>              left: &quot;-1000px&quot;,
<a name="l1454"><span class="linenum">1454</span></a>              top: &quot;-1000px&quot;
<a name="l1455"><span class="linenum">1455</span></a>          });
<a name="l1456"><span class="linenum">1456</span></a>      }
<a name="l1457"><span class="linenum">1457</span></a>      for ( i in testElementStyle ) {
<a name="l1458"><span class="linenum">1458</span></a>          testElement.style[ i ] = testElementStyle[ i ];
<a name="l1459"><span class="linenum">1459</span></a>      }
<a name="l1460"><span class="linenum">1460</span></a>      testElement.appendChild( div );
<a name="l1461"><span class="linenum">1461</span></a>      testElementParent = body || document.documentElement;
<a name="l1462"><span class="linenum">1462</span></a>      testElementParent.insertBefore( testElement, testElementParent.firstChild );
<a name="l1463"><span class="linenum">1463</span></a>  
<a name="l1464"><span class="linenum">1464</span></a>      div.style.cssText = &quot;position: absolute; left: 10.7432222px;&quot;;
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>      offsetLeft = $( div ).offset().left;
<a name="l1467"><span class="linenum">1467</span></a>      $.support.offsetFractions = offsetLeft &gt; 10 &amp;&amp; offsetLeft &lt; 11;
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>      testElement.innerHTML = &quot;&quot;;
<a name="l1470"><span class="linenum">1470</span></a>      testElementParent.removeChild( testElement );
<a name="l1471"><span class="linenum">1471</span></a>  })();
<a name="l1472"><span class="linenum">1472</span></a>  
<a name="l1473"><span class="linenum">1473</span></a>  }( jQuery ) );
<a name="l1474"><span class="linenum">1474</span></a>  (function( $, undefined ) {
<a name="l1475"><span class="linenum">1475</span></a>  
<a name="l1476"><span class="linenum">1476</span></a>  $.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>(&quot;ui.draggable&quot;, $.ui.mouse, {
<a name="l1477"><span class="linenum">1477</span></a>      version: &quot;1.10.4&quot;,
<a name="l1478"><span class="linenum">1478</span></a>      widgetEventPrefix: &quot;drag&quot;,
<a name="l1479"><span class="linenum">1479</span></a>      options: {
<a name="l1480"><span class="linenum">1480</span></a>          addClasses: true,
<a name="l1481"><span class="linenum">1481</span></a>          appendTo: &quot;parent&quot;,
<a name="l1482"><span class="linenum">1482</span></a>          axis: false,
<a name="l1483"><span class="linenum">1483</span></a>          connectToSortable: false,
<a name="l1484"><span class="linenum">1484</span></a>          containment: false,
<a name="l1485"><span class="linenum">1485</span></a>          cursor: &quot;auto&quot;,
<a name="l1486"><span class="linenum">1486</span></a>          cursorAt: false,
<a name="l1487"><span class="linenum">1487</span></a>          grid: false,
<a name="l1488"><span class="linenum">1488</span></a>          handle: false,
<a name="l1489"><span class="linenum">1489</span></a>          helper: &quot;original&quot;,
<a name="l1490"><span class="linenum">1490</span></a>          iframeFix: false,
<a name="l1491"><span class="linenum">1491</span></a>          opacity: false,
<a name="l1492"><span class="linenum">1492</span></a>          refreshPositions: false,
<a name="l1493"><span class="linenum">1493</span></a>          revert: false,
<a name="l1494"><span class="linenum">1494</span></a>          revertDuration: 500,
<a name="l1495"><span class="linenum">1495</span></a>          scope: &quot;default&quot;,
<a name="l1496"><span class="linenum">1496</span></a>          scroll: true,
<a name="l1497"><span class="linenum">1497</span></a>          scrollSensitivity: 20,
<a name="l1498"><span class="linenum">1498</span></a>          scrollSpeed: 20,
<a name="l1499"><span class="linenum">1499</span></a>          snap: false,
<a name="l1500"><span class="linenum">1500</span></a>          snapMode: &quot;both&quot;,
<a name="l1501"><span class="linenum">1501</span></a>          snapTolerance: 20,
<a name="l1502"><span class="linenum">1502</span></a>          stack: false,
<a name="l1503"><span class="linenum">1503</span></a>          zIndex: false,
<a name="l1504"><span class="linenum">1504</span></a>  
<a name="l1505"><span class="linenum">1505</span></a>  <span class="comment">        // callbacks</span>
<a name="l1506"><span class="linenum">1506</span></a>          drag: null,
<a name="l1507"><span class="linenum">1507</span></a>          start: null,
<a name="l1508"><span class="linenum">1508</span></a>          stop: null
<a name="l1509"><span class="linenum">1509</span></a>      },
<a name="l1510"><span class="linenum">1510</span></a>      _create: function() {
<a name="l1511"><span class="linenum">1511</span></a>  
<a name="l1512"><span class="linenum">1512</span></a>          if (this.options.helper === &quot;original&quot; &amp;&amp; !(/^(?:r|a|f)/).test(this.element.css(&quot;position&quot;))) {
<a name="l1513"><span class="linenum">1513</span></a>              this.element[0].style.position = &quot;relative&quot;;
<a name="l1514"><span class="linenum">1514</span></a>          }
<a name="l1515"><span class="linenum">1515</span></a>          if (this.options.addClasses){
<a name="l1516"><span class="linenum">1516</span></a>              this.element.addClass(&quot;ui-draggable&quot;);
<a name="l1517"><span class="linenum">1517</span></a>          }
<a name="l1518"><span class="linenum">1518</span></a>          if (this.options.disabled){
<a name="l1519"><span class="linenum">1519</span></a>              this.element.addClass(&quot;ui-draggable-disabled&quot;);
<a name="l1520"><span class="linenum">1520</span></a>          }
<a name="l1521"><span class="linenum">1521</span></a>  
<a name="l1522"><span class="linenum">1522</span></a>          this._mouseInit();
<a name="l1523"><span class="linenum">1523</span></a>  
<a name="l1524"><span class="linenum">1524</span></a>      },
<a name="l1525"><span class="linenum">1525</span></a>  
<a name="l1526"><span class="linenum">1526</span></a>      _destroy: function() {
<a name="l1527"><span class="linenum">1527</span></a>          this.element.removeClass( &quot;ui-draggable ui-draggable-dragging ui-draggable-disabled&quot; );
<a name="l1528"><span class="linenum">1528</span></a>          this._mouseDestroy();
<a name="l1529"><span class="linenum">1529</span></a>      },
<a name="l1530"><span class="linenum">1530</span></a>  
<a name="l1531"><span class="linenum">1531</span></a>      _mouseCapture: function(event) {
<a name="l1532"><span class="linenum">1532</span></a>  
<a name="l1533"><span class="linenum">1533</span></a>          var o = this.options;
<a name="l1534"><span class="linenum">1534</span></a>  
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">        // among others, prevent a drag on a resizable-handle</span>
<a name="l1536"><span class="linenum">1536</span></a>          if (this.helper || o.disabled || $(event.target).closest(&quot;.ui-resizable-handle&quot;).length &gt; 0) {
<a name="l1537"><span class="linenum">1537</span></a>              return false;
<a name="l1538"><span class="linenum">1538</span></a>          }
<a name="l1539"><span class="linenum">1539</span></a>  
<a name="l1540"><span class="linenum">1540</span></a>  <span class="comment">        //Quit if we're not on a valid handle</span>
<a name="l1541"><span class="linenum">1541</span></a>          this.handle = this.<a class="function" onClick="logFunction('_getHandle')" href="../../../_functions/_gethandle.html" onMouseOver="funcPopup(event,'_gethandle')">_getHandle</a>(event);
<a name="l1542"><span class="linenum">1542</span></a>          if (!this.handle) {
<a name="l1543"><span class="linenum">1543</span></a>              return false;
<a name="l1544"><span class="linenum">1544</span></a>          }
<a name="l1545"><span class="linenum">1545</span></a>  
<a name="l1546"><span class="linenum">1546</span></a>          $(o.iframeFix === true ? &quot;iframe&quot; : o.iframeFix).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l1547"><span class="linenum">1547</span></a>              $(&quot;&lt;div class='ui-draggable-iframeFix' style='background: #fff;'&gt;&lt;/div&gt;&quot;)
<a name="l1548"><span class="linenum">1548</span></a>              .css({
<a name="l1549"><span class="linenum">1549</span></a>                  width: this.offsetWidth+&quot;px&quot;, height: this.offsetHeight+&quot;px&quot;,
<a name="l1550"><span class="linenum">1550</span></a>                  position: &quot;absolute&quot;, opacity: &quot;0.001&quot;, zIndex: 1000
<a name="l1551"><span class="linenum">1551</span></a>              })
<a name="l1552"><span class="linenum">1552</span></a>              .css($(this).offset())
<a name="l1553"><span class="linenum">1553</span></a>              .appendTo(&quot;body&quot;);
<a name="l1554"><span class="linenum">1554</span></a>          });
<a name="l1555"><span class="linenum">1555</span></a>  
<a name="l1556"><span class="linenum">1556</span></a>          return true;
<a name="l1557"><span class="linenum">1557</span></a>  
<a name="l1558"><span class="linenum">1558</span></a>      },
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>      _mouseStart: function(event) {
<a name="l1561"><span class="linenum">1561</span></a>  
<a name="l1562"><span class="linenum">1562</span></a>          var o = this.options;
<a name="l1563"><span class="linenum">1563</span></a>  
<a name="l1564"><span class="linenum">1564</span></a>  <span class="comment">        //Create and append the visible helper</span>
<a name="l1565"><span class="linenum">1565</span></a>          this.helper = this._createHelper(event);
<a name="l1566"><span class="linenum">1566</span></a>  
<a name="l1567"><span class="linenum">1567</span></a>          this.helper.addClass(&quot;ui-draggable-dragging&quot;);
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">        //Cache the helper size</span>
<a name="l1570"><span class="linenum">1570</span></a>          this._cacheHelperProportions();
<a name="l1571"><span class="linenum">1571</span></a>  
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment">        //If ddmanager is used for droppables, set the global draggable</span>
<a name="l1573"><span class="linenum">1573</span></a>          if($.ui.ddmanager) {
<a name="l1574"><span class="linenum">1574</span></a>              $.ui.ddmanager.current = this;
<a name="l1575"><span class="linenum">1575</span></a>          }
<a name="l1576"><span class="linenum">1576</span></a>  
<a name="l1577"><span class="linenum">1577</span></a>          <span class="comment">/*</span>
<a name="l1578"><span class="linenum">1578</span></a>  <span class="comment">         * - Position generation -</span>
<a name="l1579"><span class="linenum">1579</span></a>  <span class="comment">         * This block generates everything position related - it's the core of draggables.</span>
<a name="l1580"><span class="linenum">1580</span></a>  <span class="comment">         */</span>
<a name="l1581"><span class="linenum">1581</span></a>  
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">        //Cache the margins of the original element</span>
<a name="l1583"><span class="linenum">1583</span></a>          this._cacheMargins();
<a name="l1584"><span class="linenum">1584</span></a>  
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">        //Store the helper's css position</span>
<a name="l1586"><span class="linenum">1586</span></a>          this.cssPosition = this.helper.css( &quot;position&quot; );
<a name="l1587"><span class="linenum">1587</span></a>          this.scrollParent = this.helper.scrollParent();
<a name="l1588"><span class="linenum">1588</span></a>          this.offsetParent = this.helper.offsetParent();
<a name="l1589"><span class="linenum">1589</span></a>          this.offsetParentCssPosition = this.offsetParent.css( &quot;position&quot; );
<a name="l1590"><span class="linenum">1590</span></a>  
<a name="l1591"><span class="linenum">1591</span></a>  <span class="comment">        //The element's absolute position on the page minus margins</span>
<a name="l1592"><span class="linenum">1592</span></a>          this.offset = this.positionAbs = this.element.offset();
<a name="l1593"><span class="linenum">1593</span></a>          this.offset = {
<a name="l1594"><span class="linenum">1594</span></a>              top: this.offset.top - this.margins.top,
<a name="l1595"><span class="linenum">1595</span></a>              left: this.offset.left - this.margins.left
<a name="l1596"><span class="linenum">1596</span></a>          };
<a name="l1597"><span class="linenum">1597</span></a>  
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment">        //Reset scroll cache</span>
<a name="l1599"><span class="linenum">1599</span></a>          this.offset.scroll = false;
<a name="l1600"><span class="linenum">1600</span></a>  
<a name="l1601"><span class="linenum">1601</span></a>          $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(this.offset, {
<a name="l1602"><span class="linenum">1602</span></a>              click: { //Where the click happened, relative to the element
<a name="l1603"><span class="linenum">1603</span></a>                  left: event.pageX - this.offset.left,
<a name="l1604"><span class="linenum">1604</span></a>                  top: event.pageY - this.offset.top
<a name="l1605"><span class="linenum">1605</span></a>              },
<a name="l1606"><span class="linenum">1606</span></a>              parent: this._getParentOffset(),
<a name="l1607"><span class="linenum">1607</span></a>              relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
<a name="l1608"><span class="linenum">1608</span></a>          });
<a name="l1609"><span class="linenum">1609</span></a>  
<a name="l1610"><span class="linenum">1610</span></a>  <span class="comment">        //Generate the original position</span>
<a name="l1611"><span class="linenum">1611</span></a>          this.originalPosition = this.position = this._generatePosition(event);
<a name="l1612"><span class="linenum">1612</span></a>          this.originalPageX = event.pageX;
<a name="l1613"><span class="linenum">1613</span></a>          this.originalPageY = event.pageY;
<a name="l1614"><span class="linenum">1614</span></a>  
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment">        //Adjust the mouse offset relative to the helper if &quot;cursorAt&quot; is supplied</span>
<a name="l1616"><span class="linenum">1616</span></a>          (o.cursorAt &amp;&amp; this._adjustOffsetFromHelper(o.cursorAt));
<a name="l1617"><span class="linenum">1617</span></a>  
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment">        //Set a containment if given in the options</span>
<a name="l1619"><span class="linenum">1619</span></a>          this._setContainment();
<a name="l1620"><span class="linenum">1620</span></a>  
<a name="l1621"><span class="linenum">1621</span></a>  <span class="comment">        //Trigger event + callbacks</span>
<a name="l1622"><span class="linenum">1622</span></a>          if(this._trigger(&quot;start&quot;, event) === false) {
<a name="l1623"><span class="linenum">1623</span></a>              this._clear();
<a name="l1624"><span class="linenum">1624</span></a>              return false;
<a name="l1625"><span class="linenum">1625</span></a>          }
<a name="l1626"><span class="linenum">1626</span></a>  
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment">        //Recache the helper size</span>
<a name="l1628"><span class="linenum">1628</span></a>          this._cacheHelperProportions();
<a name="l1629"><span class="linenum">1629</span></a>  
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment">        //Prepare the droppable offsets</span>
<a name="l1631"><span class="linenum">1631</span></a>          if ($.ui.ddmanager &amp;&amp; !o.dropBehaviour) {
<a name="l1632"><span class="linenum">1632</span></a>              $.ui.ddmanager.prepareOffsets(this, event);
<a name="l1633"><span class="linenum">1633</span></a>          }
<a name="l1634"><span class="linenum">1634</span></a>  
<a name="l1635"><span class="linenum">1635</span></a>  
<a name="l1636"><span class="linenum">1636</span></a>          this._mouseDrag(event, true); <span class="comment">//Execute the drag once - this causes the helper not to be visible before getting its correct position</span>
<a name="l1637"><span class="linenum">1637</span></a>  
<a name="l1638"><span class="linenum">1638</span></a>  <span class="comment">        //If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)</span>
<a name="l1639"><span class="linenum">1639</span></a>          if ( $.ui.ddmanager ) {
<a name="l1640"><span class="linenum">1640</span></a>              $.ui.ddmanager.dragStart(this, event);
<a name="l1641"><span class="linenum">1641</span></a>          }
<a name="l1642"><span class="linenum">1642</span></a>  
<a name="l1643"><span class="linenum">1643</span></a>          return true;
<a name="l1644"><span class="linenum">1644</span></a>      },
<a name="l1645"><span class="linenum">1645</span></a>  
<a name="l1646"><span class="linenum">1646</span></a>      _mouseDrag: function(event, noPropagation) {
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment">        // reset any necessary cached properties (see #5009)</span>
<a name="l1648"><span class="linenum">1648</span></a>          if ( this.offsetParentCssPosition === &quot;fixed&quot; ) {
<a name="l1649"><span class="linenum">1649</span></a>              this.offset.parent = this._getParentOffset();
<a name="l1650"><span class="linenum">1650</span></a>          }
<a name="l1651"><span class="linenum">1651</span></a>  
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment">        //Compute the helpers position</span>
<a name="l1653"><span class="linenum">1653</span></a>          this.position = this._generatePosition(event);
<a name="l1654"><span class="linenum">1654</span></a>          this.positionAbs = this._convertPositionTo(&quot;absolute&quot;);
<a name="l1655"><span class="linenum">1655</span></a>  
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment">        //Call plugins and callbacks and use the resulting position if something is returned</span>
<a name="l1657"><span class="linenum">1657</span></a>          if (!noPropagation) {
<a name="l1658"><span class="linenum">1658</span></a>              var ui = this._uiHash();
<a name="l1659"><span class="linenum">1659</span></a>              if(this._trigger(&quot;drag&quot;, event, ui) === false) {
<a name="l1660"><span class="linenum">1660</span></a>                  this._mouseUp({});
<a name="l1661"><span class="linenum">1661</span></a>                  return false;
<a name="l1662"><span class="linenum">1662</span></a>              }
<a name="l1663"><span class="linenum">1663</span></a>              this.position = ui.position;
<a name="l1664"><span class="linenum">1664</span></a>          }
<a name="l1665"><span class="linenum">1665</span></a>  
<a name="l1666"><span class="linenum">1666</span></a>          if(!this.options.axis || this.options.axis !== &quot;y&quot;) {
<a name="l1667"><span class="linenum">1667</span></a>              this.helper[0].style.left = this.position.left+&quot;px&quot;;
<a name="l1668"><span class="linenum">1668</span></a>          }
<a name="l1669"><span class="linenum">1669</span></a>          if(!this.options.axis || this.options.axis !== &quot;x&quot;) {
<a name="l1670"><span class="linenum">1670</span></a>              this.helper[0].style.top = this.position.top+&quot;px&quot;;
<a name="l1671"><span class="linenum">1671</span></a>          }
<a name="l1672"><span class="linenum">1672</span></a>          if($.ui.ddmanager) {
<a name="l1673"><span class="linenum">1673</span></a>              $.ui.ddmanager.drag(this, event);
<a name="l1674"><span class="linenum">1674</span></a>          }
<a name="l1675"><span class="linenum">1675</span></a>  
<a name="l1676"><span class="linenum">1676</span></a>          return false;
<a name="l1677"><span class="linenum">1677</span></a>      },
<a name="l1678"><span class="linenum">1678</span></a>  
<a name="l1679"><span class="linenum">1679</span></a>      _mouseStop: function(event) {
<a name="l1680"><span class="linenum">1680</span></a>  
<a name="l1681"><span class="linenum">1681</span></a>  <span class="comment">        //If we are using droppables, inform the manager about the drop</span>
<a name="l1682"><span class="linenum">1682</span></a>          var that = this,
<a name="l1683"><span class="linenum">1683</span></a>              dropped = false;
<a name="l1684"><span class="linenum">1684</span></a>          if ($.ui.ddmanager &amp;&amp; !this.options.dropBehaviour) {
<a name="l1685"><span class="linenum">1685</span></a>              dropped = $.ui.ddmanager.drop(this, event);
<a name="l1686"><span class="linenum">1686</span></a>          }
<a name="l1687"><span class="linenum">1687</span></a>  
<a name="l1688"><span class="linenum">1688</span></a>  <span class="comment">        //if a drop comes from outside (a sortable)</span>
<a name="l1689"><span class="linenum">1689</span></a>          if(this.dropped) {
<a name="l1690"><span class="linenum">1690</span></a>              dropped = this.dropped;
<a name="l1691"><span class="linenum">1691</span></a>              this.dropped = false;
<a name="l1692"><span class="linenum">1692</span></a>          }
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>  <span class="comment">        //if the original element is no longer in the DOM don't bother to continue (see #8269)</span>
<a name="l1695"><span class="linenum">1695</span></a>          if ( this.options.helper === &quot;original&quot; &amp;&amp; !$.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( this.element[ 0 ].ownerDocument, this.element[ 0 ] ) ) {
<a name="l1696"><span class="linenum">1696</span></a>              return false;
<a name="l1697"><span class="linenum">1697</span></a>          }
<a name="l1698"><span class="linenum">1698</span></a>  
<a name="l1699"><span class="linenum">1699</span></a>          if((this.options.revert === &quot;invalid&quot; &amp;&amp; !dropped) || (this.options.revert === &quot;valid&quot; &amp;&amp; dropped) || this.options.revert === true || ($.isFunction(this.options.revert) &amp;&amp; this.options.revert.call(this.element, dropped))) {
<a name="l1700"><span class="linenum">1700</span></a>              $(this.helper).<a class="function" onClick="logFunction('animate')" href="../../../_functions/animate.html" onMouseOver="funcPopup(event,'animate')">animate</a>(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
<a name="l1701"><span class="linenum">1701</span></a>                  if(that._trigger(&quot;stop&quot;, event) !== false) {
<a name="l1702"><span class="linenum">1702</span></a>                      that._clear();
<a name="l1703"><span class="linenum">1703</span></a>                  }
<a name="l1704"><span class="linenum">1704</span></a>              });
<a name="l1705"><span class="linenum">1705</span></a>          } else {
<a name="l1706"><span class="linenum">1706</span></a>              if(this._trigger(&quot;stop&quot;, event) !== false) {
<a name="l1707"><span class="linenum">1707</span></a>                  this._clear();
<a name="l1708"><span class="linenum">1708</span></a>              }
<a name="l1709"><span class="linenum">1709</span></a>          }
<a name="l1710"><span class="linenum">1710</span></a>  
<a name="l1711"><span class="linenum">1711</span></a>          return false;
<a name="l1712"><span class="linenum">1712</span></a>      },
<a name="l1713"><span class="linenum">1713</span></a>  
<a name="l1714"><span class="linenum">1714</span></a>      _mouseUp: function(event) {
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment">        //Remove frame helpers</span>
<a name="l1716"><span class="linenum">1716</span></a>          $(&quot;div.ui-draggable-iframeFix&quot;).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l1717"><span class="linenum">1717</span></a>              this.parentNode.removeChild(this);
<a name="l1718"><span class="linenum">1718</span></a>          });
<a name="l1719"><span class="linenum">1719</span></a>  
<a name="l1720"><span class="linenum">1720</span></a>  <span class="comment">        //If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)</span>
<a name="l1721"><span class="linenum">1721</span></a>          if( $.ui.ddmanager ) {
<a name="l1722"><span class="linenum">1722</span></a>              $.ui.ddmanager.dragStop(this, event);
<a name="l1723"><span class="linenum">1723</span></a>          }
<a name="l1724"><span class="linenum">1724</span></a>  
<a name="l1725"><span class="linenum">1725</span></a>          return $.ui.mouse.prototype._mouseUp.call(this, event);
<a name="l1726"><span class="linenum">1726</span></a>      },
<a name="l1727"><span class="linenum">1727</span></a>  
<a name="l1728"><span class="linenum">1728</span></a>      cancel: function() {
<a name="l1729"><span class="linenum">1729</span></a>  
<a name="l1730"><span class="linenum">1730</span></a>          if(this.helper.is(&quot;.ui-draggable-dragging&quot;)) {
<a name="l1731"><span class="linenum">1731</span></a>              this._mouseUp({});
<a name="l1732"><span class="linenum">1732</span></a>          } else {
<a name="l1733"><span class="linenum">1733</span></a>              this._clear();
<a name="l1734"><span class="linenum">1734</span></a>          }
<a name="l1735"><span class="linenum">1735</span></a>  
<a name="l1736"><span class="linenum">1736</span></a>          return this;
<a name="l1737"><span class="linenum">1737</span></a>  
<a name="l1738"><span class="linenum">1738</span></a>      },
<a name="l1739"><span class="linenum">1739</span></a>  
<a name="l1740"><span class="linenum">1740</span></a>      _getHandle: function(event) {
<a name="l1741"><span class="linenum">1741</span></a>          return this.options.handle ?
<a name="l1742"><span class="linenum">1742</span></a>              !!$( event.target ).closest( this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( this.options.handle ) ).length :
<a name="l1743"><span class="linenum">1743</span></a>              true;
<a name="l1744"><span class="linenum">1744</span></a>      },
<a name="l1745"><span class="linenum">1745</span></a>  
<a name="l1746"><span class="linenum">1746</span></a>      _createHelper: function(event) {
<a name="l1747"><span class="linenum">1747</span></a>  
<a name="l1748"><span class="linenum">1748</span></a>          var o = this.options,
<a name="l1749"><span class="linenum">1749</span></a>              helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event])) : (o.helper === &quot;clone&quot; ? this.element.clone().removeAttr(&quot;id&quot;) : this.element);
<a name="l1750"><span class="linenum">1750</span></a>  
<a name="l1751"><span class="linenum">1751</span></a>          if(!helper.parents(&quot;body&quot;).length) {
<a name="l1752"><span class="linenum">1752</span></a>              helper.appendTo((o.appendTo === &quot;parent&quot; ? this.element[0].parentNode : o.appendTo));
<a name="l1753"><span class="linenum">1753</span></a>          }
<a name="l1754"><span class="linenum">1754</span></a>  
<a name="l1755"><span class="linenum">1755</span></a>          if(helper[0] !== this.element[0] &amp;&amp; !(/(fixed|absolute)/).test(helper.css(&quot;position&quot;))) {
<a name="l1756"><span class="linenum">1756</span></a>              helper.css(&quot;position&quot;, &quot;absolute&quot;);
<a name="l1757"><span class="linenum">1757</span></a>          }
<a name="l1758"><span class="linenum">1758</span></a>  
<a name="l1759"><span class="linenum">1759</span></a>          return helper;
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>      },
<a name="l1762"><span class="linenum">1762</span></a>  
<a name="l1763"><span class="linenum">1763</span></a>      _adjustOffsetFromHelper: function(obj) {
<a name="l1764"><span class="linenum">1764</span></a>          if (typeof obj === &quot;string&quot;) {
<a name="l1765"><span class="linenum">1765</span></a>              obj = obj.<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>(&quot; &quot;);
<a name="l1766"><span class="linenum">1766</span></a>          }
<a name="l1767"><span class="linenum">1767</span></a>          if ($.isArray(obj)) {
<a name="l1768"><span class="linenum">1768</span></a>              obj = {left: +obj[0], top: +obj[1] || 0};
<a name="l1769"><span class="linenum">1769</span></a>          }
<a name="l1770"><span class="linenum">1770</span></a>          if (&quot;left&quot; in obj) {
<a name="l1771"><span class="linenum">1771</span></a>              this.offset.click.left = obj.left + this.margins.left;
<a name="l1772"><span class="linenum">1772</span></a>          }
<a name="l1773"><span class="linenum">1773</span></a>          if (&quot;right&quot; in obj) {
<a name="l1774"><span class="linenum">1774</span></a>              this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
<a name="l1775"><span class="linenum">1775</span></a>          }
<a name="l1776"><span class="linenum">1776</span></a>          if (&quot;top&quot; in obj) {
<a name="l1777"><span class="linenum">1777</span></a>              this.offset.click.top = obj.top + this.margins.top;
<a name="l1778"><span class="linenum">1778</span></a>          }
<a name="l1779"><span class="linenum">1779</span></a>          if (&quot;bottom&quot; in obj) {
<a name="l1780"><span class="linenum">1780</span></a>              this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
<a name="l1781"><span class="linenum">1781</span></a>          }
<a name="l1782"><span class="linenum">1782</span></a>      },
<a name="l1783"><span class="linenum">1783</span></a>  
<a name="l1784"><span class="linenum">1784</span></a>      _getParentOffset: function() {
<a name="l1785"><span class="linenum">1785</span></a>  
<a name="l1786"><span class="linenum">1786</span></a>  <span class="comment">        //Get the offsetParent and cache its position</span>
<a name="l1787"><span class="linenum">1787</span></a>          var po = this.offsetParent.offset();
<a name="l1788"><span class="linenum">1788</span></a>  
<a name="l1789"><span class="linenum">1789</span></a>  <span class="comment">        // This is a special case where we need to modify a offset calculated on start, since the following happened:</span>
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment">        // 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent</span>
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment">        // 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that</span>
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment">        //    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag</span>
<a name="l1793"><span class="linenum">1793</span></a>          if(this.cssPosition === &quot;absolute&quot; &amp;&amp; this.scrollParent[0] !== document &amp;&amp; $.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>(this.scrollParent[0], this.offsetParent[0])) {
<a name="l1794"><span class="linenum">1794</span></a>              po.left += this.scrollParent.scrollLeft();
<a name="l1795"><span class="linenum">1795</span></a>              po.top += this.scrollParent.scrollTop();
<a name="l1796"><span class="linenum">1796</span></a>          }
<a name="l1797"><span class="linenum">1797</span></a>  
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment">        //This needs to be actually done for all browsers, since pageX/pageY includes this information</span>
<a name="l1799"><span class="linenum">1799</span></a>  <span class="comment">        //Ugly IE fix</span>
<a name="l1800"><span class="linenum">1800</span></a>          if((this.offsetParent[0] === document.body) ||
<a name="l1801"><span class="linenum">1801</span></a>              (this.offsetParent[0].tagName &amp;&amp; this.offsetParent[0].tagName.toLowerCase() === &quot;html&quot; &amp;&amp; $.ui.ie)) {
<a name="l1802"><span class="linenum">1802</span></a>              po = { top: 0, left: 0 };
<a name="l1803"><span class="linenum">1803</span></a>          }
<a name="l1804"><span class="linenum">1804</span></a>  
<a name="l1805"><span class="linenum">1805</span></a>          return {
<a name="l1806"><span class="linenum">1806</span></a>              top: po.top + (parseInt(this.offsetParent.css(&quot;borderTopWidth&quot;),10) || 0),
<a name="l1807"><span class="linenum">1807</span></a>              left: po.left + (parseInt(this.offsetParent.css(&quot;borderLeftWidth&quot;),10) || 0)
<a name="l1808"><span class="linenum">1808</span></a>          };
<a name="l1809"><span class="linenum">1809</span></a>  
<a name="l1810"><span class="linenum">1810</span></a>      },
<a name="l1811"><span class="linenum">1811</span></a>  
<a name="l1812"><span class="linenum">1812</span></a>      _getRelativeOffset: function() {
<a name="l1813"><span class="linenum">1813</span></a>  
<a name="l1814"><span class="linenum">1814</span></a>          if(this.cssPosition === &quot;relative&quot;) {
<a name="l1815"><span class="linenum">1815</span></a>              var p = this.element.<a class="function" onClick="logFunction('position')" href="../../../_functions/position.html" onMouseOver="funcPopup(event,'position')">position</a>();
<a name="l1816"><span class="linenum">1816</span></a>              return {
<a name="l1817"><span class="linenum">1817</span></a>                  top: p.top - (parseInt(this.helper.css(&quot;top&quot;),10) || 0) + this.scrollParent.scrollTop(),
<a name="l1818"><span class="linenum">1818</span></a>                  left: p.left - (parseInt(this.helper.css(&quot;left&quot;),10) || 0) + this.scrollParent.scrollLeft()
<a name="l1819"><span class="linenum">1819</span></a>              };
<a name="l1820"><span class="linenum">1820</span></a>          } else {
<a name="l1821"><span class="linenum">1821</span></a>              return { top: 0, left: 0 };
<a name="l1822"><span class="linenum">1822</span></a>          }
<a name="l1823"><span class="linenum">1823</span></a>  
<a name="l1824"><span class="linenum">1824</span></a>      },
<a name="l1825"><span class="linenum">1825</span></a>  
<a name="l1826"><span class="linenum">1826</span></a>      _cacheMargins: function() {
<a name="l1827"><span class="linenum">1827</span></a>          this.margins = {
<a name="l1828"><span class="linenum">1828</span></a>              left: (parseInt(this.element.css(&quot;marginLeft&quot;),10) || 0),
<a name="l1829"><span class="linenum">1829</span></a>              top: (parseInt(this.element.css(&quot;marginTop&quot;),10) || 0),
<a name="l1830"><span class="linenum">1830</span></a>              right: (parseInt(this.element.css(&quot;marginRight&quot;),10) || 0),
<a name="l1831"><span class="linenum">1831</span></a>              bottom: (parseInt(this.element.css(&quot;marginBottom&quot;),10) || 0)
<a name="l1832"><span class="linenum">1832</span></a>          };
<a name="l1833"><span class="linenum">1833</span></a>      },
<a name="l1834"><span class="linenum">1834</span></a>  
<a name="l1835"><span class="linenum">1835</span></a>      _cacheHelperProportions: function() {
<a name="l1836"><span class="linenum">1836</span></a>          this.helperProportions = {
<a name="l1837"><span class="linenum">1837</span></a>              width: this.helper.outerWidth(),
<a name="l1838"><span class="linenum">1838</span></a>              height: this.helper.outerHeight()
<a name="l1839"><span class="linenum">1839</span></a>          };
<a name="l1840"><span class="linenum">1840</span></a>      },
<a name="l1841"><span class="linenum">1841</span></a>  
<a name="l1842"><span class="linenum">1842</span></a>      _setContainment: function() {
<a name="l1843"><span class="linenum">1843</span></a>  
<a name="l1844"><span class="linenum">1844</span></a>          var over, c, ce,
<a name="l1845"><span class="linenum">1845</span></a>              o = this.options;
<a name="l1846"><span class="linenum">1846</span></a>  
<a name="l1847"><span class="linenum">1847</span></a>          if ( !o.containment ) {
<a name="l1848"><span class="linenum">1848</span></a>              this.containment = null;
<a name="l1849"><span class="linenum">1849</span></a>              return;
<a name="l1850"><span class="linenum">1850</span></a>          }
<a name="l1851"><span class="linenum">1851</span></a>  
<a name="l1852"><span class="linenum">1852</span></a>          if ( o.containment === &quot;window&quot; ) {
<a name="l1853"><span class="linenum">1853</span></a>              this.containment = [
<a name="l1854"><span class="linenum">1854</span></a>                  $( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,
<a name="l1855"><span class="linenum">1855</span></a>                  $( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,
<a name="l1856"><span class="linenum">1856</span></a>                  $( window ).scrollLeft() + $( window ).width() - this.helperProportions.width - this.margins.left,
<a name="l1857"><span class="linenum">1857</span></a>                  $( window ).scrollTop() + ( $( window ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
<a name="l1858"><span class="linenum">1858</span></a>              ];
<a name="l1859"><span class="linenum">1859</span></a>              return;
<a name="l1860"><span class="linenum">1860</span></a>          }
<a name="l1861"><span class="linenum">1861</span></a>  
<a name="l1862"><span class="linenum">1862</span></a>          if ( o.containment === &quot;document&quot;) {
<a name="l1863"><span class="linenum">1863</span></a>              this.containment = [
<a name="l1864"><span class="linenum">1864</span></a>                  0,
<a name="l1865"><span class="linenum">1865</span></a>                  0,
<a name="l1866"><span class="linenum">1866</span></a>                  $( document ).width() - this.helperProportions.width - this.margins.left,
<a name="l1867"><span class="linenum">1867</span></a>                  ( $( document ).height() || document.body.parentNode.scrollHeight ) - this.helperProportions.height - this.margins.top
<a name="l1868"><span class="linenum">1868</span></a>              ];
<a name="l1869"><span class="linenum">1869</span></a>              return;
<a name="l1870"><span class="linenum">1870</span></a>          }
<a name="l1871"><span class="linenum">1871</span></a>  
<a name="l1872"><span class="linenum">1872</span></a>          if ( o.containment.constructor === Array ) {
<a name="l1873"><span class="linenum">1873</span></a>              this.containment = o.containment;
<a name="l1874"><span class="linenum">1874</span></a>              return;
<a name="l1875"><span class="linenum">1875</span></a>          }
<a name="l1876"><span class="linenum">1876</span></a>  
<a name="l1877"><span class="linenum">1877</span></a>          if ( o.containment === &quot;parent&quot; ) {
<a name="l1878"><span class="linenum">1878</span></a>              o.containment = this.helper[ 0 ].parentNode;
<a name="l1879"><span class="linenum">1879</span></a>          }
<a name="l1880"><span class="linenum">1880</span></a>  
<a name="l1881"><span class="linenum">1881</span></a>          c = $( o.containment );
<a name="l1882"><span class="linenum">1882</span></a>          ce = c[ 0 ];
<a name="l1883"><span class="linenum">1883</span></a>  
<a name="l1884"><span class="linenum">1884</span></a>          if( !ce ) {
<a name="l1885"><span class="linenum">1885</span></a>              return;
<a name="l1886"><span class="linenum">1886</span></a>          }
<a name="l1887"><span class="linenum">1887</span></a>  
<a name="l1888"><span class="linenum">1888</span></a>          over = c.css( &quot;overflow&quot; ) !== &quot;hidden&quot;;
<a name="l1889"><span class="linenum">1889</span></a>  
<a name="l1890"><span class="linenum">1890</span></a>          this.containment = [
<a name="l1891"><span class="linenum">1891</span></a>              ( parseInt( c.css( &quot;borderLeftWidth&quot; ), 10 ) || 0 ) + ( parseInt( c.css( &quot;paddingLeft&quot; ), 10 ) || 0 ),
<a name="l1892"><span class="linenum">1892</span></a>              ( parseInt( c.css( &quot;borderTopWidth&quot; ), 10 ) || 0 ) + ( parseInt( c.css( &quot;paddingTop&quot; ), 10 ) || 0 ) ,
<a name="l1893"><span class="linenum">1893</span></a>              ( over ? Math.<a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) - ( parseInt( c.css( &quot;borderRightWidth&quot; ), 10 ) || 0 ) - ( parseInt( c.css( &quot;paddingRight&quot; ), 10 ) || 0 ) - this.helperProportions.width - this.margins.left - this.margins.right,
<a name="l1894"><span class="linenum">1894</span></a>              ( over ? Math.<a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) - ( parseInt( c.css( &quot;borderBottomWidth&quot; ), 10 ) || 0 ) - ( parseInt( c.css( &quot;paddingBottom&quot; ), 10 ) || 0 ) - this.helperProportions.height - this.margins.top  - this.margins.bottom
<a name="l1895"><span class="linenum">1895</span></a>          ];
<a name="l1896"><span class="linenum">1896</span></a>          this.relative_container = c;
<a name="l1897"><span class="linenum">1897</span></a>      },
<a name="l1898"><span class="linenum">1898</span></a>  
<a name="l1899"><span class="linenum">1899</span></a>      _convertPositionTo: function(d, pos) {
<a name="l1900"><span class="linenum">1900</span></a>  
<a name="l1901"><span class="linenum">1901</span></a>          if(!pos) {
<a name="l1902"><span class="linenum">1902</span></a>              pos = this.position;
<a name="l1903"><span class="linenum">1903</span></a>          }
<a name="l1904"><span class="linenum">1904</span></a>  
<a name="l1905"><span class="linenum">1905</span></a>          var mod = d === &quot;absolute&quot; ? 1 : -1,
<a name="l1906"><span class="linenum">1906</span></a>              scroll = this.cssPosition === &quot;absolute&quot; &amp;&amp; !( this.scrollParent[ 0 ] !== document &amp;&amp; $.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ? this.offsetParent : this.scrollParent;
<a name="l1907"><span class="linenum">1907</span></a>  
<a name="l1908"><span class="linenum">1908</span></a>  <span class="comment">        //Cache the scroll</span>
<a name="l1909"><span class="linenum">1909</span></a>          if (!this.offset.scroll) {
<a name="l1910"><span class="linenum">1910</span></a>              this.offset.scroll = {top : scroll.scrollTop(), left : scroll.scrollLeft()};
<a name="l1911"><span class="linenum">1911</span></a>          }
<a name="l1912"><span class="linenum">1912</span></a>  
<a name="l1913"><span class="linenum">1913</span></a>          return {
<a name="l1914"><span class="linenum">1914</span></a>              top: (
<a name="l1915"><span class="linenum">1915</span></a>                  pos.top    +                                                                // The absolute mouse position
<a name="l1916"><span class="linenum">1916</span></a>                  this.offset.relative.top * mod +                                        // Only for relative positioned nodes: Relative offset from element to offset parent
<a name="l1917"><span class="linenum">1917</span></a>                  this.offset.parent.top * mod -                                        // The offsetParent's offset without borders (offset + border)
<a name="l1918"><span class="linenum">1918</span></a>                  ( ( this.cssPosition === &quot;fixed&quot; ? -this.scrollParent.scrollTop() : this.offset.scroll.top ) * mod )
<a name="l1919"><span class="linenum">1919</span></a>              ),
<a name="l1920"><span class="linenum">1920</span></a>              left: (
<a name="l1921"><span class="linenum">1921</span></a>                  pos.left +                                                                // The absolute mouse position
<a name="l1922"><span class="linenum">1922</span></a>                  this.offset.relative.left * mod +                                        // Only for relative positioned nodes: Relative offset from element to offset parent
<a name="l1923"><span class="linenum">1923</span></a>                  this.offset.parent.left * mod    -                                        // The offsetParent's offset without borders (offset + border)
<a name="l1924"><span class="linenum">1924</span></a>                  ( ( this.cssPosition === &quot;fixed&quot; ? -this.scrollParent.scrollLeft() : this.offset.scroll.left ) * mod )
<a name="l1925"><span class="linenum">1925</span></a>              )
<a name="l1926"><span class="linenum">1926</span></a>          };
<a name="l1927"><span class="linenum">1927</span></a>  
<a name="l1928"><span class="linenum">1928</span></a>      },
<a name="l1929"><span class="linenum">1929</span></a>  
<a name="l1930"><span class="linenum">1930</span></a>      _generatePosition: function(event) {
<a name="l1931"><span class="linenum">1931</span></a>  
<a name="l1932"><span class="linenum">1932</span></a>          var containment, co, top, left,
<a name="l1933"><span class="linenum">1933</span></a>              o = this.options,
<a name="l1934"><span class="linenum">1934</span></a>              scroll = this.cssPosition === &quot;absolute&quot; &amp;&amp; !( this.scrollParent[ 0 ] !== document &amp;&amp; $.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) ? this.offsetParent : this.scrollParent,
<a name="l1935"><span class="linenum">1935</span></a>              pageX = event.pageX,
<a name="l1936"><span class="linenum">1936</span></a>              pageY = event.pageY;
<a name="l1937"><span class="linenum">1937</span></a>  
<a name="l1938"><span class="linenum">1938</span></a>  <span class="comment">        //Cache the scroll</span>
<a name="l1939"><span class="linenum">1939</span></a>          if (!this.offset.scroll) {
<a name="l1940"><span class="linenum">1940</span></a>              this.offset.scroll = {top : scroll.scrollTop(), left : scroll.scrollLeft()};
<a name="l1941"><span class="linenum">1941</span></a>          }
<a name="l1942"><span class="linenum">1942</span></a>  
<a name="l1943"><span class="linenum">1943</span></a>          <span class="comment">/*</span>
<a name="l1944"><span class="linenum">1944</span></a>  <span class="comment">         * - Position constraining -</span>
<a name="l1945"><span class="linenum">1945</span></a>  <span class="comment">         * Constrain the position to a mix of grid, containment.</span>
<a name="l1946"><span class="linenum">1946</span></a>  <span class="comment">         */</span>
<a name="l1947"><span class="linenum">1947</span></a>  
<a name="l1948"><span class="linenum">1948</span></a>  <span class="comment">        // If we are not dragging yet, we won't check for options</span>
<a name="l1949"><span class="linenum">1949</span></a>          if ( this.originalPosition ) {
<a name="l1950"><span class="linenum">1950</span></a>              if ( this.containment ) {
<a name="l1951"><span class="linenum">1951</span></a>                  if ( this.relative_container ){
<a name="l1952"><span class="linenum">1952</span></a>                      co = this.relative_container.offset();
<a name="l1953"><span class="linenum">1953</span></a>                      containment = [
<a name="l1954"><span class="linenum">1954</span></a>                          this.containment[ 0 ] + co.left,
<a name="l1955"><span class="linenum">1955</span></a>                          this.containment[ 1 ] + co.top,
<a name="l1956"><span class="linenum">1956</span></a>                          this.containment[ 2 ] + co.left,
<a name="l1957"><span class="linenum">1957</span></a>                          this.containment[ 3 ] + co.top
<a name="l1958"><span class="linenum">1958</span></a>                      ];
<a name="l1959"><span class="linenum">1959</span></a>                  }
<a name="l1960"><span class="linenum">1960</span></a>                  else {
<a name="l1961"><span class="linenum">1961</span></a>                      containment = this.containment;
<a name="l1962"><span class="linenum">1962</span></a>                  }
<a name="l1963"><span class="linenum">1963</span></a>  
<a name="l1964"><span class="linenum">1964</span></a>                  if(event.pageX - this.offset.click.left &lt; containment[0]) {
<a name="l1965"><span class="linenum">1965</span></a>                      pageX = containment[0] + this.offset.click.left;
<a name="l1966"><span class="linenum">1966</span></a>                  }
<a name="l1967"><span class="linenum">1967</span></a>                  if(event.pageY - this.offset.click.top &lt; containment[1]) {
<a name="l1968"><span class="linenum">1968</span></a>                      pageY = containment[1] + this.offset.click.top;
<a name="l1969"><span class="linenum">1969</span></a>                  }
<a name="l1970"><span class="linenum">1970</span></a>                  if(event.pageX - this.offset.click.left &gt; containment[2]) {
<a name="l1971"><span class="linenum">1971</span></a>                      pageX = containment[2] + this.offset.click.left;
<a name="l1972"><span class="linenum">1972</span></a>                  }
<a name="l1973"><span class="linenum">1973</span></a>                  if(event.pageY - this.offset.click.top &gt; containment[3]) {
<a name="l1974"><span class="linenum">1974</span></a>                      pageY = containment[3] + this.offset.click.top;
<a name="l1975"><span class="linenum">1975</span></a>                  }
<a name="l1976"><span class="linenum">1976</span></a>              }
<a name="l1977"><span class="linenum">1977</span></a>  
<a name="l1978"><span class="linenum">1978</span></a>              if(o.grid) {
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment">                //Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)</span>
<a name="l1980"><span class="linenum">1980</span></a>                  top = o.grid[1] ? this.originalPageY + Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;
<a name="l1981"><span class="linenum">1981</span></a>                  pageY = containment ? ((top - this.offset.click.top &gt;= containment[1] || top - this.offset.click.top &gt; containment[3]) ? top : ((top - this.offset.click.top &gt;= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;
<a name="l1982"><span class="linenum">1982</span></a>  
<a name="l1983"><span class="linenum">1983</span></a>                  left = o.grid[0] ? this.originalPageX + Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;
<a name="l1984"><span class="linenum">1984</span></a>                  pageX = containment ? ((left - this.offset.click.left &gt;= containment[0] || left - this.offset.click.left &gt; containment[2]) ? left : ((left - this.offset.click.left &gt;= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
<a name="l1985"><span class="linenum">1985</span></a>              }
<a name="l1986"><span class="linenum">1986</span></a>  
<a name="l1987"><span class="linenum">1987</span></a>          }
<a name="l1988"><span class="linenum">1988</span></a>  
<a name="l1989"><span class="linenum">1989</span></a>          return {
<a name="l1990"><span class="linenum">1990</span></a>              top: (
<a name="l1991"><span class="linenum">1991</span></a>                  pageY -                                                                    // The absolute mouse position
<a name="l1992"><span class="linenum">1992</span></a>                  this.offset.click.top    -                                                // Click offset (relative to the element)
<a name="l1993"><span class="linenum">1993</span></a>                  this.offset.relative.top -                                                // Only for relative positioned nodes: Relative offset from element to offset parent
<a name="l1994"><span class="linenum">1994</span></a>                  this.offset.parent.top +                                                // The offsetParent's offset without borders (offset + border)
<a name="l1995"><span class="linenum">1995</span></a>                  ( this.cssPosition === &quot;fixed&quot; ? -this.scrollParent.scrollTop() : this.offset.scroll.top )
<a name="l1996"><span class="linenum">1996</span></a>              ),
<a name="l1997"><span class="linenum">1997</span></a>              left: (
<a name="l1998"><span class="linenum">1998</span></a>                  pageX -                                                                    // The absolute mouse position
<a name="l1999"><span class="linenum">1999</span></a>                  this.offset.click.left -                                                // Click offset (relative to the element)
<a name="l2000"><span class="linenum">2000</span></a>                  this.offset.relative.left -                                                // Only for relative positioned nodes: Relative offset from element to offset parent
<a name="l2001"><span class="linenum">2001</span></a>                  this.offset.parent.left +                                                // The offsetParent's offset without borders (offset + border)
<a name="l2002"><span class="linenum">2002</span></a>                  ( this.cssPosition === &quot;fixed&quot; ? -this.scrollParent.scrollLeft() : this.offset.scroll.left )
<a name="l2003"><span class="linenum">2003</span></a>              )
<a name="l2004"><span class="linenum">2004</span></a>          };
<a name="l2005"><span class="linenum">2005</span></a>  
<a name="l2006"><span class="linenum">2006</span></a>      },
<a name="l2007"><span class="linenum">2007</span></a>  
<a name="l2008"><span class="linenum">2008</span></a>      _clear: function() {
<a name="l2009"><span class="linenum">2009</span></a>          this.helper.removeClass(&quot;ui-draggable-dragging&quot;);
<a name="l2010"><span class="linenum">2010</span></a>          if(this.helper[0] !== this.element[0] &amp;&amp; !this.cancelHelperRemoval) {
<a name="l2011"><span class="linenum">2011</span></a>              this.helper.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l2012"><span class="linenum">2012</span></a>          }
<a name="l2013"><span class="linenum">2013</span></a>          this.helper = null;
<a name="l2014"><span class="linenum">2014</span></a>          this.cancelHelperRemoval = false;
<a name="l2015"><span class="linenum">2015</span></a>      },
<a name="l2016"><span class="linenum">2016</span></a>  
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment">    // From now on bulk stuff - mainly helpers</span>
<a name="l2018"><span class="linenum">2018</span></a>  
<a name="l2019"><span class="linenum">2019</span></a>      _trigger: function(type, event, ui) {
<a name="l2020"><span class="linenum">2020</span></a>          ui = ui || this._uiHash();
<a name="l2021"><span class="linenum">2021</span></a>          $.ui.plugin.call(this, type, [event, ui]);
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment">        //The absolute position has to be recalculated after plugins</span>
<a name="l2023"><span class="linenum">2023</span></a>          if(type === &quot;drag&quot;) {
<a name="l2024"><span class="linenum">2024</span></a>              this.positionAbs = this._convertPositionTo(&quot;absolute&quot;);
<a name="l2025"><span class="linenum">2025</span></a>          }
<a name="l2026"><span class="linenum">2026</span></a>          return $.Widget.prototype._trigger.call(this, type, event, ui);
<a name="l2027"><span class="linenum">2027</span></a>      },
<a name="l2028"><span class="linenum">2028</span></a>  
<a name="l2029"><span class="linenum">2029</span></a>      plugins: {},
<a name="l2030"><span class="linenum">2030</span></a>  
<a name="l2031"><span class="linenum">2031</span></a>      _uiHash: function() {
<a name="l2032"><span class="linenum">2032</span></a>          return {
<a name="l2033"><span class="linenum">2033</span></a>              helper: this.helper,
<a name="l2034"><span class="linenum">2034</span></a>              position: this.position,
<a name="l2035"><span class="linenum">2035</span></a>              originalPosition: this.originalPosition,
<a name="l2036"><span class="linenum">2036</span></a>              offset: this.positionAbs
<a name="l2037"><span class="linenum">2037</span></a>          };
<a name="l2038"><span class="linenum">2038</span></a>      }
<a name="l2039"><span class="linenum">2039</span></a>  
<a name="l2040"><span class="linenum">2040</span></a>  });
<a name="l2041"><span class="linenum">2041</span></a>  
<a name="l2042"><span class="linenum">2042</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;draggable&quot;, &quot;connectToSortable&quot;, {
<a name="l2043"><span class="linenum">2043</span></a>      start: function(event, ui) {
<a name="l2044"><span class="linenum">2044</span></a>  
<a name="l2045"><span class="linenum">2045</span></a>          var inst = $(this).data(&quot;ui-draggable&quot;), o = inst.options,
<a name="l2046"><span class="linenum">2046</span></a>              uiSortable = $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({}, ui, { item: inst.element });
<a name="l2047"><span class="linenum">2047</span></a>          inst.sortables = [];
<a name="l2048"><span class="linenum">2048</span></a>          $(o.connectToSortable).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l2049"><span class="linenum">2049</span></a>              var sortable = $.data(this, &quot;ui-sortable&quot;);
<a name="l2050"><span class="linenum">2050</span></a>              if (sortable &amp;&amp; !sortable.options.disabled) {
<a name="l2051"><span class="linenum">2051</span></a>                  inst.sortables.push({
<a name="l2052"><span class="linenum">2052</span></a>                      instance: sortable,
<a name="l2053"><span class="linenum">2053</span></a>                      shouldRevert: sortable.options.revert
<a name="l2054"><span class="linenum">2054</span></a>                  });
<a name="l2055"><span class="linenum">2055</span></a>                  sortable.refreshPositions();    <span class="comment">// Call the sortable's refreshPositions at drag start to refresh the containerCache since the sortable container cache is used in drag and needs to be up to date (this will ensure it's initialised as well as being kept in step with any changes that might have happened on the page).</span>
<a name="l2056"><span class="linenum">2056</span></a>                  sortable._trigger(&quot;activate&quot;, event, uiSortable);
<a name="l2057"><span class="linenum">2057</span></a>              }
<a name="l2058"><span class="linenum">2058</span></a>          });
<a name="l2059"><span class="linenum">2059</span></a>  
<a name="l2060"><span class="linenum">2060</span></a>      },
<a name="l2061"><span class="linenum">2061</span></a>      stop: function(event, ui) {
<a name="l2062"><span class="linenum">2062</span></a>  
<a name="l2063"><span class="linenum">2063</span></a>  <span class="comment">        //If we are still over the sortable, we fake the stop event of the sortable, but also remove helper</span>
<a name="l2064"><span class="linenum">2064</span></a>          var inst = $(this).data(&quot;ui-draggable&quot;),
<a name="l2065"><span class="linenum">2065</span></a>              uiSortable = $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({}, ui, { item: inst.element });
<a name="l2066"><span class="linenum">2066</span></a>  
<a name="l2067"><span class="linenum">2067</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(inst.sortables, function() {
<a name="l2068"><span class="linenum">2068</span></a>              if(this.instance.isOver) {
<a name="l2069"><span class="linenum">2069</span></a>  
<a name="l2070"><span class="linenum">2070</span></a>                  this.instance.isOver = 0;
<a name="l2071"><span class="linenum">2071</span></a>  
<a name="l2072"><span class="linenum">2072</span></a>                  inst.cancelHelperRemoval = true; <span class="comment">//Don't remove the helper in the draggable instance</span>
<a name="l2073"><span class="linenum">2073</span></a>                  this.instance.cancelHelperRemoval = false; <span class="comment">//Remove it in the sortable instance (so sortable plugins like revert still work)</span>
<a name="l2074"><span class="linenum">2074</span></a>  
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment">                //The sortable revert is supported, and we have to set a temporary dropped variable on the draggable to support revert: &quot;valid/invalid&quot;</span>
<a name="l2076"><span class="linenum">2076</span></a>                  if(this.shouldRevert) {
<a name="l2077"><span class="linenum">2077</span></a>                      this.instance.options.revert = this.shouldRevert;
<a name="l2078"><span class="linenum">2078</span></a>                  }
<a name="l2079"><span class="linenum">2079</span></a>  
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment">                //Trigger the stop of the sortable</span>
<a name="l2081"><span class="linenum">2081</span></a>                  this.instance._mouseStop(event);
<a name="l2082"><span class="linenum">2082</span></a>  
<a name="l2083"><span class="linenum">2083</span></a>                  this.instance.options.helper = this.instance.options._helper;
<a name="l2084"><span class="linenum">2084</span></a>  
<a name="l2085"><span class="linenum">2085</span></a>  <span class="comment">                //If the helper has been the original item, restore properties in the sortable</span>
<a name="l2086"><span class="linenum">2086</span></a>                  if(inst.options.helper === &quot;original&quot;) {
<a name="l2087"><span class="linenum">2087</span></a>                      this.instance.currentItem.css({ top: &quot;auto&quot;, left: &quot;auto&quot; });
<a name="l2088"><span class="linenum">2088</span></a>                  }
<a name="l2089"><span class="linenum">2089</span></a>  
<a name="l2090"><span class="linenum">2090</span></a>              } else {
<a name="l2091"><span class="linenum">2091</span></a>                  this.instance.cancelHelperRemoval = false; <span class="comment">//Remove the helper in the sortable instance</span>
<a name="l2092"><span class="linenum">2092</span></a>                  this.instance._trigger(&quot;deactivate&quot;, event, uiSortable);
<a name="l2093"><span class="linenum">2093</span></a>              }
<a name="l2094"><span class="linenum">2094</span></a>  
<a name="l2095"><span class="linenum">2095</span></a>          });
<a name="l2096"><span class="linenum">2096</span></a>  
<a name="l2097"><span class="linenum">2097</span></a>      },
<a name="l2098"><span class="linenum">2098</span></a>      drag: function(event, ui) {
<a name="l2099"><span class="linenum">2099</span></a>  
<a name="l2100"><span class="linenum">2100</span></a>          var inst = $(this).data(&quot;ui-draggable&quot;), that = this;
<a name="l2101"><span class="linenum">2101</span></a>  
<a name="l2102"><span class="linenum">2102</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(inst.sortables, function() {
<a name="l2103"><span class="linenum">2103</span></a>  
<a name="l2104"><span class="linenum">2104</span></a>              var innermostIntersecting = false,
<a name="l2105"><span class="linenum">2105</span></a>                  thisSortable = this;
<a name="l2106"><span class="linenum">2106</span></a>  
<a name="l2107"><span class="linenum">2107</span></a>  <span class="comment">            //Copy over some variables to allow calling the sortable's native _intersectsWith</span>
<a name="l2108"><span class="linenum">2108</span></a>              this.instance.positionAbs = inst.positionAbs;
<a name="l2109"><span class="linenum">2109</span></a>              this.instance.helperProportions = inst.helperProportions;
<a name="l2110"><span class="linenum">2110</span></a>              this.instance.offset.click = inst.offset.click;
<a name="l2111"><span class="linenum">2111</span></a>  
<a name="l2112"><span class="linenum">2112</span></a>              if(this.instance._intersectsWith(this.instance.containerCache)) {
<a name="l2113"><span class="linenum">2113</span></a>                  innermostIntersecting = true;
<a name="l2114"><span class="linenum">2114</span></a>                  $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(inst.sortables, function () {
<a name="l2115"><span class="linenum">2115</span></a>                      this.instance.positionAbs = inst.positionAbs;
<a name="l2116"><span class="linenum">2116</span></a>                      this.instance.helperProportions = inst.helperProportions;
<a name="l2117"><span class="linenum">2117</span></a>                      this.instance.offset.click = inst.offset.click;
<a name="l2118"><span class="linenum">2118</span></a>                      if (this !== thisSortable &amp;&amp;
<a name="l2119"><span class="linenum">2119</span></a>                          this.instance._intersectsWith(this.instance.containerCache) &amp;&amp;
<a name="l2120"><span class="linenum">2120</span></a>                          $.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>(thisSortable.instance.element[0], this.instance.element[0])
<a name="l2121"><span class="linenum">2121</span></a>                      ) {
<a name="l2122"><span class="linenum">2122</span></a>                          innermostIntersecting = false;
<a name="l2123"><span class="linenum">2123</span></a>                      }
<a name="l2124"><span class="linenum">2124</span></a>                      return innermostIntersecting;
<a name="l2125"><span class="linenum">2125</span></a>                  });
<a name="l2126"><span class="linenum">2126</span></a>              }
<a name="l2127"><span class="linenum">2127</span></a>  
<a name="l2128"><span class="linenum">2128</span></a>  
<a name="l2129"><span class="linenum">2129</span></a>              if(innermostIntersecting) {
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment">                //If it intersects, we use a little isOver variable and set it once, so our move-in stuff gets fired only once</span>
<a name="l2131"><span class="linenum">2131</span></a>                  if(!this.instance.isOver) {
<a name="l2132"><span class="linenum">2132</span></a>  
<a name="l2133"><span class="linenum">2133</span></a>                      this.instance.isOver = 1;
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment">                    //Now we fake the start of dragging for the sortable instance,</span>
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment">                    //by cloning the list group item, appending it to the sortable and using it as inst.currentItem</span>
<a name="l2136"><span class="linenum">2136</span></a>  <span class="comment">                    //We can then fire the start event of the sortable with our passed browser event, and our own helper (so it doesn't create a new one)</span>
<a name="l2137"><span class="linenum">2137</span></a>                      this.instance.currentItem = $(that).clone().removeAttr(&quot;id&quot;).appendTo(this.instance.element).data(&quot;ui-sortable-item&quot;, true);
<a name="l2138"><span class="linenum">2138</span></a>                      this.instance.options._helper = this.instance.options.helper; <span class="comment">//Store helper option to later restore it</span>
<a name="l2139"><span class="linenum">2139</span></a>                      this.instance.options.helper = function() { return ui.helper[0]; };
<a name="l2140"><span class="linenum">2140</span></a>  
<a name="l2141"><span class="linenum">2141</span></a>                      event.target = this.instance.currentItem[0];
<a name="l2142"><span class="linenum">2142</span></a>                      this.instance._mouseCapture(event, true);
<a name="l2143"><span class="linenum">2143</span></a>                      this.instance._mouseStart(event, true, true);
<a name="l2144"><span class="linenum">2144</span></a>  
<a name="l2145"><span class="linenum">2145</span></a>  <span class="comment">                    //Because the browser event is way off the new appended portlet, we modify a couple of variables to reflect the changes</span>
<a name="l2146"><span class="linenum">2146</span></a>                      this.instance.offset.click.top = inst.offset.click.top;
<a name="l2147"><span class="linenum">2147</span></a>                      this.instance.offset.click.left = inst.offset.click.left;
<a name="l2148"><span class="linenum">2148</span></a>                      this.instance.offset.parent.left -= inst.offset.parent.left - this.instance.offset.parent.left;
<a name="l2149"><span class="linenum">2149</span></a>                      this.instance.offset.parent.top -= inst.offset.parent.top - this.instance.offset.parent.top;
<a name="l2150"><span class="linenum">2150</span></a>  
<a name="l2151"><span class="linenum">2151</span></a>                      inst._trigger(&quot;toSortable&quot;, event);
<a name="l2152"><span class="linenum">2152</span></a>                      inst.dropped = this.instance.element; <span class="comment">//draggable revert needs that</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment">                    //hack so receive/update callbacks work (mostly)</span>
<a name="l2154"><span class="linenum">2154</span></a>                      inst.currentItem = inst.element;
<a name="l2155"><span class="linenum">2155</span></a>                      this.instance.fromOutside = inst;
<a name="l2156"><span class="linenum">2156</span></a>  
<a name="l2157"><span class="linenum">2157</span></a>                  }
<a name="l2158"><span class="linenum">2158</span></a>  
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment">                //Provided we did all the previous steps, we can fire the drag event of the sortable on every draggable drag, when it intersects with the sortable</span>
<a name="l2160"><span class="linenum">2160</span></a>                  if(this.instance.currentItem) {
<a name="l2161"><span class="linenum">2161</span></a>                      this.instance._mouseDrag(event);
<a name="l2162"><span class="linenum">2162</span></a>                  }
<a name="l2163"><span class="linenum">2163</span></a>  
<a name="l2164"><span class="linenum">2164</span></a>              } else {
<a name="l2165"><span class="linenum">2165</span></a>  
<a name="l2166"><span class="linenum">2166</span></a>  <span class="comment">                //If it doesn't intersect with the sortable, and it intersected before,</span>
<a name="l2167"><span class="linenum">2167</span></a>  <span class="comment">                //we fake the drag stop of the sortable, but make sure it doesn't remove the helper by using cancelHelperRemoval</span>
<a name="l2168"><span class="linenum">2168</span></a>                  if(this.instance.isOver) {
<a name="l2169"><span class="linenum">2169</span></a>  
<a name="l2170"><span class="linenum">2170</span></a>                      this.instance.isOver = 0;
<a name="l2171"><span class="linenum">2171</span></a>                      this.instance.cancelHelperRemoval = true;
<a name="l2172"><span class="linenum">2172</span></a>  
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment">                    //Prevent reverting on this forced stop</span>
<a name="l2174"><span class="linenum">2174</span></a>                      this.instance.options.revert = false;
<a name="l2175"><span class="linenum">2175</span></a>  
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment">                    // The out event needs to be triggered independently</span>
<a name="l2177"><span class="linenum">2177</span></a>                      this.instance._trigger(&quot;out&quot;, event, this.instance._uiHash(this.instance));
<a name="l2178"><span class="linenum">2178</span></a>  
<a name="l2179"><span class="linenum">2179</span></a>                      this.instance._mouseStop(event, true);
<a name="l2180"><span class="linenum">2180</span></a>                      this.instance.options.helper = this.instance.options._helper;
<a name="l2181"><span class="linenum">2181</span></a>  
<a name="l2182"><span class="linenum">2182</span></a>  <span class="comment">                    //Now we remove our currentItem, the list group clone again, and the placeholder, and animate the helper back to it's original size</span>
<a name="l2183"><span class="linenum">2183</span></a>                      this.instance.currentItem.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l2184"><span class="linenum">2184</span></a>                      if(this.instance.placeholder) {
<a name="l2185"><span class="linenum">2185</span></a>                          this.instance.placeholder.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l2186"><span class="linenum">2186</span></a>                      }
<a name="l2187"><span class="linenum">2187</span></a>  
<a name="l2188"><span class="linenum">2188</span></a>                      inst._trigger(&quot;fromSortable&quot;, event);
<a name="l2189"><span class="linenum">2189</span></a>                      inst.dropped = false; <span class="comment">//draggable revert needs that</span>
<a name="l2190"><span class="linenum">2190</span></a>                  }
<a name="l2191"><span class="linenum">2191</span></a>  
<a name="l2192"><span class="linenum">2192</span></a>              }
<a name="l2193"><span class="linenum">2193</span></a>  
<a name="l2194"><span class="linenum">2194</span></a>          });
<a name="l2195"><span class="linenum">2195</span></a>  
<a name="l2196"><span class="linenum">2196</span></a>      }
<a name="l2197"><span class="linenum">2197</span></a>  });
<a name="l2198"><span class="linenum">2198</span></a>  
<a name="l2199"><span class="linenum">2199</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;draggable&quot;, &quot;cursor&quot;, {
<a name="l2200"><span class="linenum">2200</span></a>      start: function() {
<a name="l2201"><span class="linenum">2201</span></a>          var t = $(&quot;body&quot;), o = $(this).data(&quot;ui-draggable&quot;).options;
<a name="l2202"><span class="linenum">2202</span></a>          if (t.css(&quot;cursor&quot;)) {
<a name="l2203"><span class="linenum">2203</span></a>              o._cursor = t.css(&quot;cursor&quot;);
<a name="l2204"><span class="linenum">2204</span></a>          }
<a name="l2205"><span class="linenum">2205</span></a>          t.css(&quot;cursor&quot;, o.cursor);
<a name="l2206"><span class="linenum">2206</span></a>      },
<a name="l2207"><span class="linenum">2207</span></a>      stop: function() {
<a name="l2208"><span class="linenum">2208</span></a>          var o = $(this).data(&quot;ui-draggable&quot;).options;
<a name="l2209"><span class="linenum">2209</span></a>          if (o._cursor) {
<a name="l2210"><span class="linenum">2210</span></a>              $(&quot;body&quot;).css(&quot;cursor&quot;, o._cursor);
<a name="l2211"><span class="linenum">2211</span></a>          }
<a name="l2212"><span class="linenum">2212</span></a>      }
<a name="l2213"><span class="linenum">2213</span></a>  });
<a name="l2214"><span class="linenum">2214</span></a>  
<a name="l2215"><span class="linenum">2215</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;draggable&quot;, &quot;opacity&quot;, {
<a name="l2216"><span class="linenum">2216</span></a>      start: function(event, ui) {
<a name="l2217"><span class="linenum">2217</span></a>          var t = $(ui.helper), o = $(this).data(&quot;ui-draggable&quot;).options;
<a name="l2218"><span class="linenum">2218</span></a>          if(t.css(&quot;opacity&quot;)) {
<a name="l2219"><span class="linenum">2219</span></a>              o._opacity = t.css(&quot;opacity&quot;);
<a name="l2220"><span class="linenum">2220</span></a>          }
<a name="l2221"><span class="linenum">2221</span></a>          t.css(&quot;opacity&quot;, o.opacity);
<a name="l2222"><span class="linenum">2222</span></a>      },
<a name="l2223"><span class="linenum">2223</span></a>      stop: function(event, ui) {
<a name="l2224"><span class="linenum">2224</span></a>          var o = $(this).data(&quot;ui-draggable&quot;).options;
<a name="l2225"><span class="linenum">2225</span></a>          if(o._opacity) {
<a name="l2226"><span class="linenum">2226</span></a>              $(ui.helper).css(&quot;opacity&quot;, o._opacity);
<a name="l2227"><span class="linenum">2227</span></a>          }
<a name="l2228"><span class="linenum">2228</span></a>      }
<a name="l2229"><span class="linenum">2229</span></a>  });
<a name="l2230"><span class="linenum">2230</span></a>  
<a name="l2231"><span class="linenum">2231</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;draggable&quot;, &quot;scroll&quot;, {
<a name="l2232"><span class="linenum">2232</span></a>      start: function() {
<a name="l2233"><span class="linenum">2233</span></a>          var i = $(this).data(&quot;ui-draggable&quot;);
<a name="l2234"><span class="linenum">2234</span></a>          if(i.scrollParent[0] !== document &amp;&amp; i.scrollParent[0].tagName !== &quot;HTML&quot;) {
<a name="l2235"><span class="linenum">2235</span></a>              i.overflowOffset = i.scrollParent.offset();
<a name="l2236"><span class="linenum">2236</span></a>          }
<a name="l2237"><span class="linenum">2237</span></a>      },
<a name="l2238"><span class="linenum">2238</span></a>      drag: function( event ) {
<a name="l2239"><span class="linenum">2239</span></a>  
<a name="l2240"><span class="linenum">2240</span></a>          var i = $(this).data(&quot;ui-draggable&quot;), o = i.options, scrolled = false;
<a name="l2241"><span class="linenum">2241</span></a>  
<a name="l2242"><span class="linenum">2242</span></a>          if(i.scrollParent[0] !== document &amp;&amp; i.scrollParent[0].tagName !== &quot;HTML&quot;) {
<a name="l2243"><span class="linenum">2243</span></a>  
<a name="l2244"><span class="linenum">2244</span></a>              if(!o.axis || o.axis !== &quot;x&quot;) {
<a name="l2245"><span class="linenum">2245</span></a>                  if((i.overflowOffset.top + i.scrollParent[0].offsetHeight) - event.pageY &lt; o.scrollSensitivity) {
<a name="l2246"><span class="linenum">2246</span></a>                      i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop + o.scrollSpeed;
<a name="l2247"><span class="linenum">2247</span></a>                  } else if(event.pageY - i.overflowOffset.top &lt; o.scrollSensitivity) {
<a name="l2248"><span class="linenum">2248</span></a>                      i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop - o.scrollSpeed;
<a name="l2249"><span class="linenum">2249</span></a>                  }
<a name="l2250"><span class="linenum">2250</span></a>              }
<a name="l2251"><span class="linenum">2251</span></a>  
<a name="l2252"><span class="linenum">2252</span></a>              if(!o.axis || o.axis !== &quot;y&quot;) {
<a name="l2253"><span class="linenum">2253</span></a>                  if((i.overflowOffset.left + i.scrollParent[0].offsetWidth) - event.pageX &lt; o.scrollSensitivity) {
<a name="l2254"><span class="linenum">2254</span></a>                      i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft + o.scrollSpeed;
<a name="l2255"><span class="linenum">2255</span></a>                  } else if(event.pageX - i.overflowOffset.left &lt; o.scrollSensitivity) {
<a name="l2256"><span class="linenum">2256</span></a>                      i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft - o.scrollSpeed;
<a name="l2257"><span class="linenum">2257</span></a>                  }
<a name="l2258"><span class="linenum">2258</span></a>              }
<a name="l2259"><span class="linenum">2259</span></a>  
<a name="l2260"><span class="linenum">2260</span></a>          } else {
<a name="l2261"><span class="linenum">2261</span></a>  
<a name="l2262"><span class="linenum">2262</span></a>              if(!o.axis || o.axis !== &quot;x&quot;) {
<a name="l2263"><span class="linenum">2263</span></a>                  if(event.pageY - $(document).scrollTop() &lt; o.scrollSensitivity) {
<a name="l2264"><span class="linenum">2264</span></a>                      scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
<a name="l2265"><span class="linenum">2265</span></a>                  } else if($(window).height() - (event.pageY - $(document).scrollTop()) &lt; o.scrollSensitivity) {
<a name="l2266"><span class="linenum">2266</span></a>                      scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
<a name="l2267"><span class="linenum">2267</span></a>                  }
<a name="l2268"><span class="linenum">2268</span></a>              }
<a name="l2269"><span class="linenum">2269</span></a>  
<a name="l2270"><span class="linenum">2270</span></a>              if(!o.axis || o.axis !== &quot;y&quot;) {
<a name="l2271"><span class="linenum">2271</span></a>                  if(event.pageX - $(document).scrollLeft() &lt; o.scrollSensitivity) {
<a name="l2272"><span class="linenum">2272</span></a>                      scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
<a name="l2273"><span class="linenum">2273</span></a>                  } else if($(window).width() - (event.pageX - $(document).scrollLeft()) &lt; o.scrollSensitivity) {
<a name="l2274"><span class="linenum">2274</span></a>                      scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
<a name="l2275"><span class="linenum">2275</span></a>                  }
<a name="l2276"><span class="linenum">2276</span></a>              }
<a name="l2277"><span class="linenum">2277</span></a>  
<a name="l2278"><span class="linenum">2278</span></a>          }
<a name="l2279"><span class="linenum">2279</span></a>  
<a name="l2280"><span class="linenum">2280</span></a>          if(scrolled !== false &amp;&amp; $.ui.ddmanager &amp;&amp; !o.dropBehaviour) {
<a name="l2281"><span class="linenum">2281</span></a>              $.ui.ddmanager.prepareOffsets(i, event);
<a name="l2282"><span class="linenum">2282</span></a>          }
<a name="l2283"><span class="linenum">2283</span></a>  
<a name="l2284"><span class="linenum">2284</span></a>      }
<a name="l2285"><span class="linenum">2285</span></a>  });
<a name="l2286"><span class="linenum">2286</span></a>  
<a name="l2287"><span class="linenum">2287</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;draggable&quot;, &quot;snap&quot;, {
<a name="l2288"><span class="linenum">2288</span></a>      start: function() {
<a name="l2289"><span class="linenum">2289</span></a>  
<a name="l2290"><span class="linenum">2290</span></a>          var i = $(this).data(&quot;ui-draggable&quot;),
<a name="l2291"><span class="linenum">2291</span></a>              o = i.options;
<a name="l2292"><span class="linenum">2292</span></a>  
<a name="l2293"><span class="linenum">2293</span></a>          i.snapElements = [];
<a name="l2294"><span class="linenum">2294</span></a>  
<a name="l2295"><span class="linenum">2295</span></a>          $(o.snap.constructor !== String ? ( o.snap.items || &quot;:data(ui-draggable)&quot; ) : o.snap).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l2296"><span class="linenum">2296</span></a>              var <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../../_variables/t.html">$t</a> = $(this),
<a name="l2297"><span class="linenum">2297</span></a>                  <a class="var it1201" onMouseOver="hilite(1201)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../../_variables/o.html">$o</a> = <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../../_variables/t.html">$t</a>.offset();
<a name="l2298"><span class="linenum">2298</span></a>              if(this !== i.element[0]) {
<a name="l2299"><span class="linenum">2299</span></a>                  i.snapElements.push({
<a name="l2300"><span class="linenum">2300</span></a>                      item: this,
<a name="l2301"><span class="linenum">2301</span></a>                      width: <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../../_variables/t.html">$t</a>.outerWidth(), height: <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../../_variables/t.html">$t</a>.outerHeight(),
<a name="l2302"><span class="linenum">2302</span></a>                      top: <a class="var it1201" onMouseOver="hilite(1201)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../../_variables/o.html">$o</a>.top, left: <a class="var it1201" onMouseOver="hilite(1201)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../../_variables/o.html">$o</a>.left
<a name="l2303"><span class="linenum">2303</span></a>                  });
<a name="l2304"><span class="linenum">2304</span></a>              }
<a name="l2305"><span class="linenum">2305</span></a>          });
<a name="l2306"><span class="linenum">2306</span></a>  
<a name="l2307"><span class="linenum">2307</span></a>      },
<a name="l2308"><span class="linenum">2308</span></a>      drag: function(event, ui) {
<a name="l2309"><span class="linenum">2309</span></a>  
<a name="l2310"><span class="linenum">2310</span></a>          var ts, bs, ls, rs, l, r, t, b, i, first,
<a name="l2311"><span class="linenum">2311</span></a>              inst = $(this).data(&quot;ui-draggable&quot;),
<a name="l2312"><span class="linenum">2312</span></a>              o = inst.options,
<a name="l2313"><span class="linenum">2313</span></a>              d = o.snapTolerance,
<a name="l2314"><span class="linenum">2314</span></a>              x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
<a name="l2315"><span class="linenum">2315</span></a>              y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;
<a name="l2316"><span class="linenum">2316</span></a>  
<a name="l2317"><span class="linenum">2317</span></a>          for (i = inst.snapElements.length - 1; i &gt;= 0; i--){
<a name="l2318"><span class="linenum">2318</span></a>  
<a name="l2319"><span class="linenum">2319</span></a>              l = inst.snapElements[i].left;
<a name="l2320"><span class="linenum">2320</span></a>              r = l + inst.snapElements[i].width;
<a name="l2321"><span class="linenum">2321</span></a>              t = inst.snapElements[i].top;
<a name="l2322"><span class="linenum">2322</span></a>              b = t + inst.snapElements[i].height;
<a name="l2323"><span class="linenum">2323</span></a>  
<a name="l2324"><span class="linenum">2324</span></a>              if ( x2 &lt; l - d || x1 &gt; r + d || y2 &lt; t - d || y1 &gt; b + d || !$.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( inst.snapElements[ i ].item.ownerDocument, inst.snapElements[ i ].item ) ) {
<a name="l2325"><span class="linenum">2325</span></a>                  if(inst.snapElements[i].snapping) {
<a name="l2326"><span class="linenum">2326</span></a>                      (inst.options.snap.release &amp;&amp; inst.options.snap.release.call(inst.element, event, $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
<a name="l2327"><span class="linenum">2327</span></a>                  }
<a name="l2328"><span class="linenum">2328</span></a>                  inst.snapElements[i].snapping = false;
<a name="l2329"><span class="linenum">2329</span></a>                  continue;
<a name="l2330"><span class="linenum">2330</span></a>              }
<a name="l2331"><span class="linenum">2331</span></a>  
<a name="l2332"><span class="linenum">2332</span></a>              if(o.snapMode !== &quot;inner&quot;) {
<a name="l2333"><span class="linenum">2333</span></a>                  ts = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(t - y2) &lt;= d;
<a name="l2334"><span class="linenum">2334</span></a>                  bs = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(b - y1) &lt;= d;
<a name="l2335"><span class="linenum">2335</span></a>                  ls = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(l - x2) &lt;= d;
<a name="l2336"><span class="linenum">2336</span></a>                  rs = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(r - x1) &lt;= d;
<a name="l2337"><span class="linenum">2337</span></a>                  if(ts) {
<a name="l2338"><span class="linenum">2338</span></a>                      ui.position.top = inst._convertPositionTo(&quot;relative&quot;, { top: t - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
<a name="l2339"><span class="linenum">2339</span></a>                  }
<a name="l2340"><span class="linenum">2340</span></a>                  if(bs) {
<a name="l2341"><span class="linenum">2341</span></a>                      ui.position.top = inst._convertPositionTo(&quot;relative&quot;, { top: b, left: 0 }).top - inst.margins.top;
<a name="l2342"><span class="linenum">2342</span></a>                  }
<a name="l2343"><span class="linenum">2343</span></a>                  if(ls) {
<a name="l2344"><span class="linenum">2344</span></a>                      ui.position.left = inst._convertPositionTo(&quot;relative&quot;, { top: 0, left: l - inst.helperProportions.width }).left - inst.margins.left;
<a name="l2345"><span class="linenum">2345</span></a>                  }
<a name="l2346"><span class="linenum">2346</span></a>                  if(rs) {
<a name="l2347"><span class="linenum">2347</span></a>                      ui.position.left = inst._convertPositionTo(&quot;relative&quot;, { top: 0, left: r }).left - inst.margins.left;
<a name="l2348"><span class="linenum">2348</span></a>                  }
<a name="l2349"><span class="linenum">2349</span></a>              }
<a name="l2350"><span class="linenum">2350</span></a>  
<a name="l2351"><span class="linenum">2351</span></a>              first = (ts || bs || ls || rs);
<a name="l2352"><span class="linenum">2352</span></a>  
<a name="l2353"><span class="linenum">2353</span></a>              if(o.snapMode !== &quot;outer&quot;) {
<a name="l2354"><span class="linenum">2354</span></a>                  ts = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(t - y1) &lt;= d;
<a name="l2355"><span class="linenum">2355</span></a>                  bs = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(b - y2) &lt;= d;
<a name="l2356"><span class="linenum">2356</span></a>                  ls = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(l - x1) &lt;= d;
<a name="l2357"><span class="linenum">2357</span></a>                  rs = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(r - x2) &lt;= d;
<a name="l2358"><span class="linenum">2358</span></a>                  if(ts) {
<a name="l2359"><span class="linenum">2359</span></a>                      ui.position.top = inst._convertPositionTo(&quot;relative&quot;, { top: t, left: 0 }).top - inst.margins.top;
<a name="l2360"><span class="linenum">2360</span></a>                  }
<a name="l2361"><span class="linenum">2361</span></a>                  if(bs) {
<a name="l2362"><span class="linenum">2362</span></a>                      ui.position.top = inst._convertPositionTo(&quot;relative&quot;, { top: b - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
<a name="l2363"><span class="linenum">2363</span></a>                  }
<a name="l2364"><span class="linenum">2364</span></a>                  if(ls) {
<a name="l2365"><span class="linenum">2365</span></a>                      ui.position.left = inst._convertPositionTo(&quot;relative&quot;, { top: 0, left: l }).left - inst.margins.left;
<a name="l2366"><span class="linenum">2366</span></a>                  }
<a name="l2367"><span class="linenum">2367</span></a>                  if(rs) {
<a name="l2368"><span class="linenum">2368</span></a>                      ui.position.left = inst._convertPositionTo(&quot;relative&quot;, { top: 0, left: r - inst.helperProportions.width }).left - inst.margins.left;
<a name="l2369"><span class="linenum">2369</span></a>                  }
<a name="l2370"><span class="linenum">2370</span></a>              }
<a name="l2371"><span class="linenum">2371</span></a>  
<a name="l2372"><span class="linenum">2372</span></a>              if(!inst.snapElements[i].snapping &amp;&amp; (ts || bs || ls || rs || first)) {
<a name="l2373"><span class="linenum">2373</span></a>                  (inst.options.snap.snap &amp;&amp; inst.options.snap.snap.call(inst.element, event, $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
<a name="l2374"><span class="linenum">2374</span></a>              }
<a name="l2375"><span class="linenum">2375</span></a>              inst.snapElements[i].snapping = (ts || bs || ls || rs || first);
<a name="l2376"><span class="linenum">2376</span></a>  
<a name="l2377"><span class="linenum">2377</span></a>          }
<a name="l2378"><span class="linenum">2378</span></a>  
<a name="l2379"><span class="linenum">2379</span></a>      }
<a name="l2380"><span class="linenum">2380</span></a>  });
<a name="l2381"><span class="linenum">2381</span></a>  
<a name="l2382"><span class="linenum">2382</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;draggable&quot;, &quot;stack&quot;, {
<a name="l2383"><span class="linenum">2383</span></a>      start: function() {
<a name="l2384"><span class="linenum">2384</span></a>          var min,
<a name="l2385"><span class="linenum">2385</span></a>              o = this.data(&quot;ui-draggable&quot;).options,
<a name="l2386"><span class="linenum">2386</span></a>              group = $.makeArray($(o.stack)).<a class="phpfunction" onClick="logFunction('sort')" href="../../../_functions/sort.html" onMouseOver="phpfuncPopup(event,'sort')">sort</a>(function(a,b) {
<a name="l2387"><span class="linenum">2387</span></a>                  return (parseInt($(a).css(&quot;zIndex&quot;),10) || 0) - (parseInt($(b).css(&quot;zIndex&quot;),10) || 0);
<a name="l2388"><span class="linenum">2388</span></a>              });
<a name="l2389"><span class="linenum">2389</span></a>  
<a name="l2390"><span class="linenum">2390</span></a>          if (!group.length) { return; }
<a name="l2391"><span class="linenum">2391</span></a>  
<a name="l2392"><span class="linenum">2392</span></a>          min = parseInt($(group[0]).css(&quot;zIndex&quot;), 10) || 0;
<a name="l2393"><span class="linenum">2393</span></a>          $(group).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function(i) {
<a name="l2394"><span class="linenum">2394</span></a>              $(this).css(&quot;zIndex&quot;, min + i);
<a name="l2395"><span class="linenum">2395</span></a>          });
<a name="l2396"><span class="linenum">2396</span></a>          this.css(&quot;zIndex&quot;, (min + group.length));
<a name="l2397"><span class="linenum">2397</span></a>      }
<a name="l2398"><span class="linenum">2398</span></a>  });
<a name="l2399"><span class="linenum">2399</span></a>  
<a name="l2400"><span class="linenum">2400</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;draggable&quot;, &quot;zIndex&quot;, {
<a name="l2401"><span class="linenum">2401</span></a>      start: function(event, ui) {
<a name="l2402"><span class="linenum">2402</span></a>          var t = $(ui.helper), o = $(this).data(&quot;ui-draggable&quot;).options;
<a name="l2403"><span class="linenum">2403</span></a>          if(t.css(&quot;zIndex&quot;)) {
<a name="l2404"><span class="linenum">2404</span></a>              o._zIndex = t.css(&quot;zIndex&quot;);
<a name="l2405"><span class="linenum">2405</span></a>          }
<a name="l2406"><span class="linenum">2406</span></a>          t.css(&quot;zIndex&quot;, o.zIndex);
<a name="l2407"><span class="linenum">2407</span></a>      },
<a name="l2408"><span class="linenum">2408</span></a>      stop: function(event, ui) {
<a name="l2409"><span class="linenum">2409</span></a>          var o = $(this).data(&quot;ui-draggable&quot;).options;
<a name="l2410"><span class="linenum">2410</span></a>          if(o._zIndex) {
<a name="l2411"><span class="linenum">2411</span></a>              $(ui.helper).css(&quot;zIndex&quot;, o._zIndex);
<a name="l2412"><span class="linenum">2412</span></a>          }
<a name="l2413"><span class="linenum">2413</span></a>      }
<a name="l2414"><span class="linenum">2414</span></a>  });
<a name="l2415"><span class="linenum">2415</span></a>  
<a name="l2416"><span class="linenum">2416</span></a>  })(jQuery);
<a name="l2417"><span class="linenum">2417</span></a>  (function( $, undefined ) {
<a name="l2418"><span class="linenum">2418</span></a>  
<a name="l2419"><span class="linenum">2419</span></a>  function <a class="function" onClick="logFunction('isOverAxis')" href="../../../_functions/isoveraxis.html" onMouseOver="funcPopup(event,'isoveraxis')">isOverAxis</a>( x, reference, size ) {
<a name="l2420"><span class="linenum">2420</span></a>      return ( x &gt; reference ) &amp;&amp; ( x &lt; ( reference + size ) );
<a name="l2421"><span class="linenum">2421</span></a>  }
<a name="l2422"><span class="linenum">2422</span></a>  
<a name="l2423"><span class="linenum">2423</span></a>  $.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>(&quot;ui.droppable&quot;, {
<a name="l2424"><span class="linenum">2424</span></a>      version: &quot;1.10.4&quot;,
<a name="l2425"><span class="linenum">2425</span></a>      widgetEventPrefix: &quot;drop&quot;,
<a name="l2426"><span class="linenum">2426</span></a>      options: {
<a name="l2427"><span class="linenum">2427</span></a>          accept: &quot;*&quot;,
<a name="l2428"><span class="linenum">2428</span></a>          activeClass: false,
<a name="l2429"><span class="linenum">2429</span></a>          addClasses: true,
<a name="l2430"><span class="linenum">2430</span></a>          greedy: false,
<a name="l2431"><span class="linenum">2431</span></a>          hoverClass: false,
<a name="l2432"><span class="linenum">2432</span></a>          scope: &quot;default&quot;,
<a name="l2433"><span class="linenum">2433</span></a>          tolerance: &quot;intersect&quot;,
<a name="l2434"><span class="linenum">2434</span></a>  
<a name="l2435"><span class="linenum">2435</span></a>  <span class="comment">        // callbacks</span>
<a name="l2436"><span class="linenum">2436</span></a>          activate: null,
<a name="l2437"><span class="linenum">2437</span></a>          deactivate: null,
<a name="l2438"><span class="linenum">2438</span></a>          drop: null,
<a name="l2439"><span class="linenum">2439</span></a>          out: null,
<a name="l2440"><span class="linenum">2440</span></a>          over: null
<a name="l2441"><span class="linenum">2441</span></a>      },
<a name="l2442"><span class="linenum">2442</span></a>      _create: function() {
<a name="l2443"><span class="linenum">2443</span></a>  
<a name="l2444"><span class="linenum">2444</span></a>          var proportions,
<a name="l2445"><span class="linenum">2445</span></a>              o = this.options,
<a name="l2446"><span class="linenum">2446</span></a>              accept = o.accept;
<a name="l2447"><span class="linenum">2447</span></a>  
<a name="l2448"><span class="linenum">2448</span></a>          this.isover = false;
<a name="l2449"><span class="linenum">2449</span></a>          this.isout = true;
<a name="l2450"><span class="linenum">2450</span></a>  
<a name="l2451"><span class="linenum">2451</span></a>          this.accept = $.isFunction(accept) ? accept : function(d) {
<a name="l2452"><span class="linenum">2452</span></a>              return d.is(accept);
<a name="l2453"><span class="linenum">2453</span></a>          };
<a name="l2454"><span class="linenum">2454</span></a>  
<a name="l2455"><span class="linenum">2455</span></a>          this.proportions = function( <span class="comment">/* valueToWrite */</span> ) {
<a name="l2456"><span class="linenum">2456</span></a>              if ( arguments.length ) {
<a name="l2457"><span class="linenum">2457</span></a>  <span class="comment">                // Store the droppable's proportions</span>
<a name="l2458"><span class="linenum">2458</span></a>                  proportions = arguments[ 0 ];
<a name="l2459"><span class="linenum">2459</span></a>              } else {
<a name="l2460"><span class="linenum">2460</span></a>  <span class="comment">                // Retrieve or derive the droppable's proportions</span>
<a name="l2461"><span class="linenum">2461</span></a>                  return proportions ?
<a name="l2462"><span class="linenum">2462</span></a>                      proportions :
<a name="l2463"><span class="linenum">2463</span></a>                      proportions = {
<a name="l2464"><span class="linenum">2464</span></a>                          width: this.element[ 0 ].offsetWidth,
<a name="l2465"><span class="linenum">2465</span></a>                          height: this.element[ 0 ].offsetHeight
<a name="l2466"><span class="linenum">2466</span></a>                      };
<a name="l2467"><span class="linenum">2467</span></a>              }
<a name="l2468"><span class="linenum">2468</span></a>          };
<a name="l2469"><span class="linenum">2469</span></a>  
<a name="l2470"><span class="linenum">2470</span></a>  <span class="comment">        // Add the reference and positions to the manager</span>
<a name="l2471"><span class="linenum">2471</span></a>          $.ui.ddmanager.droppables[o.scope] = $.ui.ddmanager.droppables[o.scope] || [];
<a name="l2472"><span class="linenum">2472</span></a>          $.ui.ddmanager.droppables[o.scope].push(this);
<a name="l2473"><span class="linenum">2473</span></a>  
<a name="l2474"><span class="linenum">2474</span></a>          (o.addClasses &amp;&amp; this.element.addClass(&quot;ui-droppable&quot;));
<a name="l2475"><span class="linenum">2475</span></a>  
<a name="l2476"><span class="linenum">2476</span></a>      },
<a name="l2477"><span class="linenum">2477</span></a>  
<a name="l2478"><span class="linenum">2478</span></a>      _destroy: function() {
<a name="l2479"><span class="linenum">2479</span></a>          var i = 0,
<a name="l2480"><span class="linenum">2480</span></a>              drop = $.ui.ddmanager.droppables[this.options.scope];
<a name="l2481"><span class="linenum">2481</span></a>  
<a name="l2482"><span class="linenum">2482</span></a>          for ( ; i &lt; drop.length; i++ ) {
<a name="l2483"><span class="linenum">2483</span></a>              if ( drop[i] === this ) {
<a name="l2484"><span class="linenum">2484</span></a>                  drop.splice(i, 1);
<a name="l2485"><span class="linenum">2485</span></a>              }
<a name="l2486"><span class="linenum">2486</span></a>          }
<a name="l2487"><span class="linenum">2487</span></a>  
<a name="l2488"><span class="linenum">2488</span></a>          this.element.removeClass(&quot;ui-droppable ui-droppable-disabled&quot;);
<a name="l2489"><span class="linenum">2489</span></a>      },
<a name="l2490"><span class="linenum">2490</span></a>  
<a name="l2491"><span class="linenum">2491</span></a>      _setOption: function(key, value) {
<a name="l2492"><span class="linenum">2492</span></a>  
<a name="l2493"><span class="linenum">2493</span></a>          if(key === &quot;accept&quot;) {
<a name="l2494"><span class="linenum">2494</span></a>              this.accept = $.isFunction(value) ? value : function(d) {
<a name="l2495"><span class="linenum">2495</span></a>                  return d.is(value);
<a name="l2496"><span class="linenum">2496</span></a>              };
<a name="l2497"><span class="linenum">2497</span></a>          }
<a name="l2498"><span class="linenum">2498</span></a>          $.Widget.prototype._setOption.apply(this, arguments);
<a name="l2499"><span class="linenum">2499</span></a>      },
<a name="l2500"><span class="linenum">2500</span></a>  
<a name="l2501"><span class="linenum">2501</span></a>      _activate: function(event) {
<a name="l2502"><span class="linenum">2502</span></a>          var draggable = $.ui.ddmanager.current;
<a name="l2503"><span class="linenum">2503</span></a>          if(this.options.activeClass) {
<a name="l2504"><span class="linenum">2504</span></a>              this.element.addClass(this.options.activeClass);
<a name="l2505"><span class="linenum">2505</span></a>          }
<a name="l2506"><span class="linenum">2506</span></a>          if(draggable){
<a name="l2507"><span class="linenum">2507</span></a>              this._trigger(&quot;activate&quot;, event, this.ui(draggable));
<a name="l2508"><span class="linenum">2508</span></a>          }
<a name="l2509"><span class="linenum">2509</span></a>      },
<a name="l2510"><span class="linenum">2510</span></a>  
<a name="l2511"><span class="linenum">2511</span></a>      _deactivate: function(event) {
<a name="l2512"><span class="linenum">2512</span></a>          var draggable = $.ui.ddmanager.current;
<a name="l2513"><span class="linenum">2513</span></a>          if(this.options.activeClass) {
<a name="l2514"><span class="linenum">2514</span></a>              this.element.removeClass(this.options.activeClass);
<a name="l2515"><span class="linenum">2515</span></a>          }
<a name="l2516"><span class="linenum">2516</span></a>          if(draggable){
<a name="l2517"><span class="linenum">2517</span></a>              this._trigger(&quot;deactivate&quot;, event, this.ui(draggable));
<a name="l2518"><span class="linenum">2518</span></a>          }
<a name="l2519"><span class="linenum">2519</span></a>      },
<a name="l2520"><span class="linenum">2520</span></a>  
<a name="l2521"><span class="linenum">2521</span></a>      _over: function(event) {
<a name="l2522"><span class="linenum">2522</span></a>  
<a name="l2523"><span class="linenum">2523</span></a>          var draggable = $.ui.ddmanager.current;
<a name="l2524"><span class="linenum">2524</span></a>  
<a name="l2525"><span class="linenum">2525</span></a>  <span class="comment">        // Bail if draggable and droppable are same element</span>
<a name="l2526"><span class="linenum">2526</span></a>          if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
<a name="l2527"><span class="linenum">2527</span></a>              return;
<a name="l2528"><span class="linenum">2528</span></a>          }
<a name="l2529"><span class="linenum">2529</span></a>  
<a name="l2530"><span class="linenum">2530</span></a>          if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
<a name="l2531"><span class="linenum">2531</span></a>              if(this.options.hoverClass) {
<a name="l2532"><span class="linenum">2532</span></a>                  this.element.addClass(this.options.hoverClass);
<a name="l2533"><span class="linenum">2533</span></a>              }
<a name="l2534"><span class="linenum">2534</span></a>              this._trigger(&quot;over&quot;, event, this.ui(draggable));
<a name="l2535"><span class="linenum">2535</span></a>          }
<a name="l2536"><span class="linenum">2536</span></a>  
<a name="l2537"><span class="linenum">2537</span></a>      },
<a name="l2538"><span class="linenum">2538</span></a>  
<a name="l2539"><span class="linenum">2539</span></a>      _out: function(event) {
<a name="l2540"><span class="linenum">2540</span></a>  
<a name="l2541"><span class="linenum">2541</span></a>          var draggable = $.ui.ddmanager.current;
<a name="l2542"><span class="linenum">2542</span></a>  
<a name="l2543"><span class="linenum">2543</span></a>  <span class="comment">        // Bail if draggable and droppable are same element</span>
<a name="l2544"><span class="linenum">2544</span></a>          if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
<a name="l2545"><span class="linenum">2545</span></a>              return;
<a name="l2546"><span class="linenum">2546</span></a>          }
<a name="l2547"><span class="linenum">2547</span></a>  
<a name="l2548"><span class="linenum">2548</span></a>          if (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
<a name="l2549"><span class="linenum">2549</span></a>              if(this.options.hoverClass) {
<a name="l2550"><span class="linenum">2550</span></a>                  this.element.removeClass(this.options.hoverClass);
<a name="l2551"><span class="linenum">2551</span></a>              }
<a name="l2552"><span class="linenum">2552</span></a>              this._trigger(&quot;out&quot;, event, this.ui(draggable));
<a name="l2553"><span class="linenum">2553</span></a>          }
<a name="l2554"><span class="linenum">2554</span></a>  
<a name="l2555"><span class="linenum">2555</span></a>      },
<a name="l2556"><span class="linenum">2556</span></a>  
<a name="l2557"><span class="linenum">2557</span></a>      _drop: function(event,custom) {
<a name="l2558"><span class="linenum">2558</span></a>  
<a name="l2559"><span class="linenum">2559</span></a>          var draggable = custom || $.ui.ddmanager.current,
<a name="l2560"><span class="linenum">2560</span></a>              childrenIntersection = false;
<a name="l2561"><span class="linenum">2561</span></a>  
<a name="l2562"><span class="linenum">2562</span></a>  <span class="comment">        // Bail if draggable and droppable are same element</span>
<a name="l2563"><span class="linenum">2563</span></a>          if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {
<a name="l2564"><span class="linenum">2564</span></a>              return false;
<a name="l2565"><span class="linenum">2565</span></a>          }
<a name="l2566"><span class="linenum">2566</span></a>  
<a name="l2567"><span class="linenum">2567</span></a>          this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;:data(ui-droppable)&quot;).not(&quot;.ui-draggable-dragging&quot;).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l2568"><span class="linenum">2568</span></a>              var inst = $.data(this, &quot;ui-droppable&quot;);
<a name="l2569"><span class="linenum">2569</span></a>              if(
<a name="l2570"><span class="linenum">2570</span></a>                  inst.options.greedy &amp;&amp;
<a name="l2571"><span class="linenum">2571</span></a>                  !inst.options.disabled &amp;&amp;
<a name="l2572"><span class="linenum">2572</span></a>                  inst.options.scope === draggable.options.scope &amp;&amp;
<a name="l2573"><span class="linenum">2573</span></a>                  inst.accept.call(inst.element[0], (draggable.currentItem || draggable.element)) &amp;&amp;
<a name="l2574"><span class="linenum">2574</span></a>                  $.ui.intersect(draggable, $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(inst, { offset: inst.element.offset() }), inst.options.tolerance)
<a name="l2575"><span class="linenum">2575</span></a>              ) { childrenIntersection = true; return false; }
<a name="l2576"><span class="linenum">2576</span></a>          });
<a name="l2577"><span class="linenum">2577</span></a>          if(childrenIntersection) {
<a name="l2578"><span class="linenum">2578</span></a>              return false;
<a name="l2579"><span class="linenum">2579</span></a>          }
<a name="l2580"><span class="linenum">2580</span></a>  
<a name="l2581"><span class="linenum">2581</span></a>          if(this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
<a name="l2582"><span class="linenum">2582</span></a>              if(this.options.activeClass) {
<a name="l2583"><span class="linenum">2583</span></a>                  this.element.removeClass(this.options.activeClass);
<a name="l2584"><span class="linenum">2584</span></a>              }
<a name="l2585"><span class="linenum">2585</span></a>              if(this.options.hoverClass) {
<a name="l2586"><span class="linenum">2586</span></a>                  this.element.removeClass(this.options.hoverClass);
<a name="l2587"><span class="linenum">2587</span></a>              }
<a name="l2588"><span class="linenum">2588</span></a>              this._trigger(&quot;drop&quot;, event, this.ui(draggable));
<a name="l2589"><span class="linenum">2589</span></a>              return this.element;
<a name="l2590"><span class="linenum">2590</span></a>          }
<a name="l2591"><span class="linenum">2591</span></a>  
<a name="l2592"><span class="linenum">2592</span></a>          return false;
<a name="l2593"><span class="linenum">2593</span></a>  
<a name="l2594"><span class="linenum">2594</span></a>      },
<a name="l2595"><span class="linenum">2595</span></a>  
<a name="l2596"><span class="linenum">2596</span></a>      ui: function(c) {
<a name="l2597"><span class="linenum">2597</span></a>          return {
<a name="l2598"><span class="linenum">2598</span></a>              draggable: (c.currentItem || c.element),
<a name="l2599"><span class="linenum">2599</span></a>              helper: c.helper,
<a name="l2600"><span class="linenum">2600</span></a>              position: c.position,
<a name="l2601"><span class="linenum">2601</span></a>              offset: c.positionAbs
<a name="l2602"><span class="linenum">2602</span></a>          };
<a name="l2603"><span class="linenum">2603</span></a>      }
<a name="l2604"><span class="linenum">2604</span></a>  
<a name="l2605"><span class="linenum">2605</span></a>  });
<a name="l2606"><span class="linenum">2606</span></a>  
<a name="l2607"><span class="linenum">2607</span></a>  $.ui.intersect = function(draggable, droppable, toleranceMode) {
<a name="l2608"><span class="linenum">2608</span></a>  
<a name="l2609"><span class="linenum">2609</span></a>      if (!droppable.offset) {
<a name="l2610"><span class="linenum">2610</span></a>          return false;
<a name="l2611"><span class="linenum">2611</span></a>      }
<a name="l2612"><span class="linenum">2612</span></a>  
<a name="l2613"><span class="linenum">2613</span></a>      var draggableLeft, draggableTop,
<a name="l2614"><span class="linenum">2614</span></a>          x1 = (draggable.positionAbs || draggable.position.absolute).left,
<a name="l2615"><span class="linenum">2615</span></a>          y1 = (draggable.positionAbs || draggable.position.absolute).top,
<a name="l2616"><span class="linenum">2616</span></a>          x2 = x1 + draggable.helperProportions.width,
<a name="l2617"><span class="linenum">2617</span></a>          y2 = y1 + draggable.helperProportions.height,
<a name="l2618"><span class="linenum">2618</span></a>          l = droppable.offset.left,
<a name="l2619"><span class="linenum">2619</span></a>          t = droppable.offset.top,
<a name="l2620"><span class="linenum">2620</span></a>          r = l + droppable.proportions().width,
<a name="l2621"><span class="linenum">2621</span></a>          b = t + droppable.proportions().height;
<a name="l2622"><span class="linenum">2622</span></a>  
<a name="l2623"><span class="linenum">2623</span></a>      switch (toleranceMode) {
<a name="l2624"><span class="linenum">2624</span></a>          case &quot;fit&quot;:
<a name="l2625"><span class="linenum">2625</span></a>              return (l &lt;= x1 &amp;&amp; x2 &lt;= r &amp;&amp; t &lt;= y1 &amp;&amp; y2 &lt;= b);
<a name="l2626"><span class="linenum">2626</span></a>          case &quot;intersect&quot;:
<a name="l2627"><span class="linenum">2627</span></a>              return (l &lt; x1 + (draggable.helperProportions.width / 2) &amp;&amp; // Right Half
<a name="l2628"><span class="linenum">2628</span></a>                  x2 - (draggable.helperProportions.width / 2) &lt; r &amp;&amp; // Left Half
<a name="l2629"><span class="linenum">2629</span></a>                  t &lt; y1 + (draggable.helperProportions.height / 2) &amp;&amp; // Bottom Half
<a name="l2630"><span class="linenum">2630</span></a>                  y2 - (draggable.helperProportions.height / 2) &lt; b ); <span class="comment">// Top Half</span>
<a name="l2631"><span class="linenum">2631</span></a>          case &quot;pointer&quot;:
<a name="l2632"><span class="linenum">2632</span></a>              draggableLeft = ((draggable.positionAbs || draggable.position.absolute).left + (draggable.clickOffset || draggable.offset.click).left);
<a name="l2633"><span class="linenum">2633</span></a>              draggableTop = ((draggable.positionAbs || draggable.position.absolute).top + (draggable.clickOffset || draggable.offset.click).top);
<a name="l2634"><span class="linenum">2634</span></a>              return <a class="function" onClick="logFunction('isOverAxis')" href="../../../_functions/isoveraxis.html" onMouseOver="funcPopup(event,'isoveraxis')">isOverAxis</a>( draggableTop, t, droppable.proportions().height ) &amp;&amp; <a class="function" onClick="logFunction('isOverAxis')" href="../../../_functions/isoveraxis.html" onMouseOver="funcPopup(event,'isoveraxis')">isOverAxis</a>( draggableLeft, l, droppable.proportions().width );
<a name="l2635"><span class="linenum">2635</span></a>          case &quot;touch&quot;:
<a name="l2636"><span class="linenum">2636</span></a>              return (
<a name="l2637"><span class="linenum">2637</span></a>                  (y1 &gt;= t &amp;&amp; y1 &lt;= b) ||    // Top edge touching
<a name="l2638"><span class="linenum">2638</span></a>                  (y2 &gt;= t &amp;&amp; y2 &lt;= b) ||    // Bottom edge touching
<a name="l2639"><span class="linenum">2639</span></a>                  (y1 &lt; t &amp;&amp; y2 &gt; b)        // Surrounded vertically
<a name="l2640"><span class="linenum">2640</span></a>              ) &amp;&amp; (
<a name="l2641"><span class="linenum">2641</span></a>                  (x1 &gt;= l &amp;&amp; x1 &lt;= r) ||    // Left edge touching
<a name="l2642"><span class="linenum">2642</span></a>                  (x2 &gt;= l &amp;&amp; x2 &lt;= r) ||    // Right edge touching
<a name="l2643"><span class="linenum">2643</span></a>                  (x1 &lt; l &amp;&amp; x2 &gt; r)        // Surrounded horizontally
<a name="l2644"><span class="linenum">2644</span></a>              );
<a name="l2645"><span class="linenum">2645</span></a>          default:
<a name="l2646"><span class="linenum">2646</span></a>              return false;
<a name="l2647"><span class="linenum">2647</span></a>          }
<a name="l2648"><span class="linenum">2648</span></a>  
<a name="l2649"><span class="linenum">2649</span></a>  };
<a name="l2650"><span class="linenum">2650</span></a>  
<a name="l2651"><span class="linenum">2651</span></a>  <span class="comment">/*</span>
<a name="l2652"><span class="linenum">2652</span></a>  <span class="comment">    This manager tracks offsets of draggables and droppables</span>
<a name="l2653"><span class="linenum">2653</span></a>  <span class="comment">*/</span>
<a name="l2654"><span class="linenum">2654</span></a>  $.ui.ddmanager = {
<a name="l2655"><span class="linenum">2655</span></a>      current: null,
<a name="l2656"><span class="linenum">2656</span></a>      droppables: { &quot;default&quot;: [] },
<a name="l2657"><span class="linenum">2657</span></a>      prepareOffsets: function(t, event) {
<a name="l2658"><span class="linenum">2658</span></a>  
<a name="l2659"><span class="linenum">2659</span></a>          var i, j,
<a name="l2660"><span class="linenum">2660</span></a>              m = $.ui.ddmanager.droppables[t.options.scope] || [],
<a name="l2661"><span class="linenum">2661</span></a>              type = event ? event.type : null, // workaround for #2317
<a name="l2662"><span class="linenum">2662</span></a>              list = (t.currentItem || t.element).<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;:data(ui-droppable)&quot;).addBack();
<a name="l2663"><span class="linenum">2663</span></a>  
<a name="l2664"><span class="linenum">2664</span></a>          droppablesLoop: for (i = 0; i &lt; m.length; i++) {
<a name="l2665"><span class="linenum">2665</span></a>  
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment">            //No disabled and non-accepted</span>
<a name="l2667"><span class="linenum">2667</span></a>              if(m[i].options.disabled || (t &amp;&amp; !m[i].accept.call(m[i].element[0],(t.currentItem || t.element)))) {
<a name="l2668"><span class="linenum">2668</span></a>                  continue;
<a name="l2669"><span class="linenum">2669</span></a>              }
<a name="l2670"><span class="linenum">2670</span></a>  
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment">            // Filter out elements in the current dragged item</span>
<a name="l2672"><span class="linenum">2672</span></a>              for (j=0; j &lt; list.length; j++) {
<a name="l2673"><span class="linenum">2673</span></a>                  if(list[j] === m[i].element[0]) {
<a name="l2674"><span class="linenum">2674</span></a>                      m[i].proportions().height = 0;
<a name="l2675"><span class="linenum">2675</span></a>                      continue droppablesLoop;
<a name="l2676"><span class="linenum">2676</span></a>                  }
<a name="l2677"><span class="linenum">2677</span></a>              }
<a name="l2678"><span class="linenum">2678</span></a>  
<a name="l2679"><span class="linenum">2679</span></a>              m[i].visible = m[i].element.css(&quot;display&quot;) !== &quot;none&quot;;
<a name="l2680"><span class="linenum">2680</span></a>              if(!m[i].visible) {
<a name="l2681"><span class="linenum">2681</span></a>                  continue;
<a name="l2682"><span class="linenum">2682</span></a>              }
<a name="l2683"><span class="linenum">2683</span></a>  
<a name="l2684"><span class="linenum">2684</span></a>  <span class="comment">            //Activate the droppable if used directly from draggables</span>
<a name="l2685"><span class="linenum">2685</span></a>              if(type === &quot;mousedown&quot;) {
<a name="l2686"><span class="linenum">2686</span></a>                  m[i]._activate.call(m[i], event);
<a name="l2687"><span class="linenum">2687</span></a>              }
<a name="l2688"><span class="linenum">2688</span></a>  
<a name="l2689"><span class="linenum">2689</span></a>              m[ i ].offset = m[ i ].element.offset();
<a name="l2690"><span class="linenum">2690</span></a>              m[ i ].proportions({ width: m[ i ].element[ 0 ].offsetWidth, height: m[ i ].element[ 0 ].offsetHeight });
<a name="l2691"><span class="linenum">2691</span></a>  
<a name="l2692"><span class="linenum">2692</span></a>          }
<a name="l2693"><span class="linenum">2693</span></a>  
<a name="l2694"><span class="linenum">2694</span></a>      },
<a name="l2695"><span class="linenum">2695</span></a>      drop: function(draggable, event) {
<a name="l2696"><span class="linenum">2696</span></a>  
<a name="l2697"><span class="linenum">2697</span></a>          var dropped = false;
<a name="l2698"><span class="linenum">2698</span></a>  <span class="comment">        // Create a copy of the droppables in case the list changes during the drop (#9116)</span>
<a name="l2699"><span class="linenum">2699</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(($.ui.ddmanager.droppables[draggable.options.scope] || []).slice(), function() {
<a name="l2700"><span class="linenum">2700</span></a>  
<a name="l2701"><span class="linenum">2701</span></a>              if(!this.options) {
<a name="l2702"><span class="linenum">2702</span></a>                  return;
<a name="l2703"><span class="linenum">2703</span></a>              }
<a name="l2704"><span class="linenum">2704</span></a>              if (!this.options.disabled &amp;&amp; this.visible &amp;&amp; $.ui.intersect(draggable, this, this.options.tolerance)) {
<a name="l2705"><span class="linenum">2705</span></a>                  dropped = this._drop.call(this, event) || dropped;
<a name="l2706"><span class="linenum">2706</span></a>              }
<a name="l2707"><span class="linenum">2707</span></a>  
<a name="l2708"><span class="linenum">2708</span></a>              if (!this.options.disabled &amp;&amp; this.visible &amp;&amp; this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {
<a name="l2709"><span class="linenum">2709</span></a>                  this.isout = true;
<a name="l2710"><span class="linenum">2710</span></a>                  this.isover = false;
<a name="l2711"><span class="linenum">2711</span></a>                  this._deactivate.call(this, event);
<a name="l2712"><span class="linenum">2712</span></a>              }
<a name="l2713"><span class="linenum">2713</span></a>  
<a name="l2714"><span class="linenum">2714</span></a>          });
<a name="l2715"><span class="linenum">2715</span></a>          return dropped;
<a name="l2716"><span class="linenum">2716</span></a>  
<a name="l2717"><span class="linenum">2717</span></a>      },
<a name="l2718"><span class="linenum">2718</span></a>      dragStart: function( draggable, event ) {
<a name="l2719"><span class="linenum">2719</span></a>  <span class="comment">        //Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)</span>
<a name="l2720"><span class="linenum">2720</span></a>          draggable.element.parentsUntil( &quot;body&quot; ).<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>( &quot;scroll.droppable&quot;, function() {
<a name="l2721"><span class="linenum">2721</span></a>              if( !draggable.options.refreshPositions ) {
<a name="l2722"><span class="linenum">2722</span></a>                  $.ui.ddmanager.prepareOffsets( draggable, event );
<a name="l2723"><span class="linenum">2723</span></a>              }
<a name="l2724"><span class="linenum">2724</span></a>          });
<a name="l2725"><span class="linenum">2725</span></a>      },
<a name="l2726"><span class="linenum">2726</span></a>      drag: function(draggable, event) {
<a name="l2727"><span class="linenum">2727</span></a>  
<a name="l2728"><span class="linenum">2728</span></a>  <span class="comment">        //If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.</span>
<a name="l2729"><span class="linenum">2729</span></a>          if(draggable.options.refreshPositions) {
<a name="l2730"><span class="linenum">2730</span></a>              $.ui.ddmanager.prepareOffsets(draggable, event);
<a name="l2731"><span class="linenum">2731</span></a>          }
<a name="l2732"><span class="linenum">2732</span></a>  
<a name="l2733"><span class="linenum">2733</span></a>  <span class="comment">        //Run through all droppables and check their positions based on specific tolerance options</span>
<a name="l2734"><span class="linenum">2734</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {
<a name="l2735"><span class="linenum">2735</span></a>  
<a name="l2736"><span class="linenum">2736</span></a>              if(this.options.disabled || this.greedyChild || !this.visible) {
<a name="l2737"><span class="linenum">2737</span></a>                  return;
<a name="l2738"><span class="linenum">2738</span></a>              }
<a name="l2739"><span class="linenum">2739</span></a>  
<a name="l2740"><span class="linenum">2740</span></a>              var parentInstance, scope, parent,
<a name="l2741"><span class="linenum">2741</span></a>                  intersects = $.ui.intersect(draggable, this, this.options.tolerance),
<a name="l2742"><span class="linenum">2742</span></a>                  c = !intersects &amp;&amp; this.isover ? &quot;isout&quot; : (intersects &amp;&amp; !this.isover ? &quot;isover&quot; : null);
<a name="l2743"><span class="linenum">2743</span></a>              if(!c) {
<a name="l2744"><span class="linenum">2744</span></a>                  return;
<a name="l2745"><span class="linenum">2745</span></a>              }
<a name="l2746"><span class="linenum">2746</span></a>  
<a name="l2747"><span class="linenum">2747</span></a>              if (this.options.greedy) {
<a name="l2748"><span class="linenum">2748</span></a>  <span class="comment">                // find droppable parents with same scope</span>
<a name="l2749"><span class="linenum">2749</span></a>                  scope = this.options.scope;
<a name="l2750"><span class="linenum">2750</span></a>                  parent = this.element.parents(&quot;:data(ui-droppable)&quot;).<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(function () {
<a name="l2751"><span class="linenum">2751</span></a>                      return $.data(this, &quot;ui-droppable&quot;).options.scope === scope;
<a name="l2752"><span class="linenum">2752</span></a>                  });
<a name="l2753"><span class="linenum">2753</span></a>  
<a name="l2754"><span class="linenum">2754</span></a>                  if (parent.length) {
<a name="l2755"><span class="linenum">2755</span></a>                      parentInstance = $.data(parent[0], &quot;ui-droppable&quot;);
<a name="l2756"><span class="linenum">2756</span></a>                      parentInstance.greedyChild = (c === &quot;isover&quot;);
<a name="l2757"><span class="linenum">2757</span></a>                  }
<a name="l2758"><span class="linenum">2758</span></a>              }
<a name="l2759"><span class="linenum">2759</span></a>  
<a name="l2760"><span class="linenum">2760</span></a>  <span class="comment">            // we just moved into a greedy child</span>
<a name="l2761"><span class="linenum">2761</span></a>              if (parentInstance &amp;&amp; c === &quot;isover&quot;) {
<a name="l2762"><span class="linenum">2762</span></a>                  parentInstance.isover = false;
<a name="l2763"><span class="linenum">2763</span></a>                  parentInstance.isout = true;
<a name="l2764"><span class="linenum">2764</span></a>                  parentInstance._out.call(parentInstance, event);
<a name="l2765"><span class="linenum">2765</span></a>              }
<a name="l2766"><span class="linenum">2766</span></a>  
<a name="l2767"><span class="linenum">2767</span></a>              this[c] = true;
<a name="l2768"><span class="linenum">2768</span></a>              this[c === &quot;isout&quot; ? &quot;isover&quot; : &quot;isout&quot;] = false;
<a name="l2769"><span class="linenum">2769</span></a>              this[c === &quot;isover&quot; ? &quot;_over&quot; : &quot;_out&quot;].call(this, event);
<a name="l2770"><span class="linenum">2770</span></a>  
<a name="l2771"><span class="linenum">2771</span></a>  <span class="comment">            // we just moved out of a greedy child</span>
<a name="l2772"><span class="linenum">2772</span></a>              if (parentInstance &amp;&amp; c === &quot;isout&quot;) {
<a name="l2773"><span class="linenum">2773</span></a>                  parentInstance.isout = false;
<a name="l2774"><span class="linenum">2774</span></a>                  parentInstance.isover = true;
<a name="l2775"><span class="linenum">2775</span></a>                  parentInstance._over.call(parentInstance, event);
<a name="l2776"><span class="linenum">2776</span></a>              }
<a name="l2777"><span class="linenum">2777</span></a>          });
<a name="l2778"><span class="linenum">2778</span></a>  
<a name="l2779"><span class="linenum">2779</span></a>      },
<a name="l2780"><span class="linenum">2780</span></a>      dragStop: function( draggable, event ) {
<a name="l2781"><span class="linenum">2781</span></a>          draggable.element.parentsUntil( &quot;body&quot; ).<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>( &quot;scroll.droppable&quot; );
<a name="l2782"><span class="linenum">2782</span></a>  <span class="comment">        //Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)</span>
<a name="l2783"><span class="linenum">2783</span></a>          if( !draggable.options.refreshPositions ) {
<a name="l2784"><span class="linenum">2784</span></a>              $.ui.ddmanager.prepareOffsets( draggable, event );
<a name="l2785"><span class="linenum">2785</span></a>          }
<a name="l2786"><span class="linenum">2786</span></a>      }
<a name="l2787"><span class="linenum">2787</span></a>  };
<a name="l2788"><span class="linenum">2788</span></a>  
<a name="l2789"><span class="linenum">2789</span></a>  })(jQuery);
<a name="l2790"><span class="linenum">2790</span></a>  (function( $, undefined ) {
<a name="l2791"><span class="linenum">2791</span></a>  
<a name="l2792"><span class="linenum">2792</span></a>  function <a class="function" onClick="logFunction('num')" href="../../../_functions/num.html" onMouseOver="funcPopup(event,'num')">num</a>(v) {
<a name="l2793"><span class="linenum">2793</span></a>      return parseInt(v, 10) || 0;
<a name="l2794"><span class="linenum">2794</span></a>  }
<a name="l2795"><span class="linenum">2795</span></a>  
<a name="l2796"><span class="linenum">2796</span></a>  function <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(value) {
<a name="l2797"><span class="linenum">2797</span></a>      return !isNaN(parseInt(value, 10));
<a name="l2798"><span class="linenum">2798</span></a>  }
<a name="l2799"><span class="linenum">2799</span></a>  
<a name="l2800"><span class="linenum">2800</span></a>  $.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>(&quot;ui.resizable&quot;, $.ui.mouse, {
<a name="l2801"><span class="linenum">2801</span></a>      version: &quot;1.10.4&quot;,
<a name="l2802"><span class="linenum">2802</span></a>      widgetEventPrefix: &quot;resize&quot;,
<a name="l2803"><span class="linenum">2803</span></a>      options: {
<a name="l2804"><span class="linenum">2804</span></a>          alsoResize: false,
<a name="l2805"><span class="linenum">2805</span></a>          animate: false,
<a name="l2806"><span class="linenum">2806</span></a>          animateDuration: &quot;slow&quot;,
<a name="l2807"><span class="linenum">2807</span></a>          animateEasing: &quot;swing&quot;,
<a name="l2808"><span class="linenum">2808</span></a>          aspectRatio: false,
<a name="l2809"><span class="linenum">2809</span></a>          autoHide: false,
<a name="l2810"><span class="linenum">2810</span></a>          containment: false,
<a name="l2811"><span class="linenum">2811</span></a>          ghost: false,
<a name="l2812"><span class="linenum">2812</span></a>          grid: false,
<a name="l2813"><span class="linenum">2813</span></a>          handles: &quot;e,s,se&quot;,
<a name="l2814"><span class="linenum">2814</span></a>          helper: false,
<a name="l2815"><span class="linenum">2815</span></a>          maxHeight: null,
<a name="l2816"><span class="linenum">2816</span></a>          maxWidth: null,
<a name="l2817"><span class="linenum">2817</span></a>          minHeight: 10,
<a name="l2818"><span class="linenum">2818</span></a>          minWidth: 10,
<a name="l2819"><span class="linenum">2819</span></a>  <span class="comment">        // See #7960</span>
<a name="l2820"><span class="linenum">2820</span></a>          zIndex: 90,
<a name="l2821"><span class="linenum">2821</span></a>  
<a name="l2822"><span class="linenum">2822</span></a>  <span class="comment">        // callbacks</span>
<a name="l2823"><span class="linenum">2823</span></a>          resize: null,
<a name="l2824"><span class="linenum">2824</span></a>          start: null,
<a name="l2825"><span class="linenum">2825</span></a>          stop: null
<a name="l2826"><span class="linenum">2826</span></a>      },
<a name="l2827"><span class="linenum">2827</span></a>      _create: function() {
<a name="l2828"><span class="linenum">2828</span></a>  
<a name="l2829"><span class="linenum">2829</span></a>          var n, i, handle, axis, hname,
<a name="l2830"><span class="linenum">2830</span></a>              that = this,
<a name="l2831"><span class="linenum">2831</span></a>              o = this.options;
<a name="l2832"><span class="linenum">2832</span></a>          this.element.addClass(&quot;ui-resizable&quot;);
<a name="l2833"><span class="linenum">2833</span></a>  
<a name="l2834"><span class="linenum">2834</span></a>          $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(this, {
<a name="l2835"><span class="linenum">2835</span></a>              _aspectRatio: !!(o.aspectRatio),
<a name="l2836"><span class="linenum">2836</span></a>              aspectRatio: o.aspectRatio,
<a name="l2837"><span class="linenum">2837</span></a>              originalElement: this.element,
<a name="l2838"><span class="linenum">2838</span></a>              _proportionallyResizeElements: [],
<a name="l2839"><span class="linenum">2839</span></a>              _helper: o.helper || o.ghost || o.animate ? o.helper || &quot;ui-resizable-helper&quot; : null
<a name="l2840"><span class="linenum">2840</span></a>          });
<a name="l2841"><span class="linenum">2841</span></a>  
<a name="l2842"><span class="linenum">2842</span></a>  <span class="comment">        //Wrap the element if it cannot hold child nodes</span>
<a name="l2843"><span class="linenum">2843</span></a>          if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)) {
<a name="l2844"><span class="linenum">2844</span></a>  
<a name="l2845"><span class="linenum">2845</span></a>  <span class="comment">            //Create a wrapper element and set the wrapper to the new current internal element</span>
<a name="l2846"><span class="linenum">2846</span></a>              this.element.wrap(
<a name="l2847"><span class="linenum">2847</span></a>                  $(&quot;&lt;div class='ui-wrapper' style='overflow: hidden;'&gt;&lt;/div&gt;&quot;).css({
<a name="l2848"><span class="linenum">2848</span></a>                      position: this.element.css(&quot;position&quot;),
<a name="l2849"><span class="linenum">2849</span></a>                      width: this.element.outerWidth(),
<a name="l2850"><span class="linenum">2850</span></a>                      height: this.element.outerHeight(),
<a name="l2851"><span class="linenum">2851</span></a>                      top: this.element.css(&quot;top&quot;),
<a name="l2852"><span class="linenum">2852</span></a>                      left: this.element.css(&quot;left&quot;)
<a name="l2853"><span class="linenum">2853</span></a>                  })
<a name="l2854"><span class="linenum">2854</span></a>              );
<a name="l2855"><span class="linenum">2855</span></a>  
<a name="l2856"><span class="linenum">2856</span></a>  <span class="comment">            //Overwrite the original this.element</span>
<a name="l2857"><span class="linenum">2857</span></a>              this.element = this.element.parent().data(
<a name="l2858"><span class="linenum">2858</span></a>                  &quot;ui-resizable&quot;, this.element.data(&quot;ui-resizable&quot;)
<a name="l2859"><span class="linenum">2859</span></a>              );
<a name="l2860"><span class="linenum">2860</span></a>  
<a name="l2861"><span class="linenum">2861</span></a>              this.elementIsWrapper = true;
<a name="l2862"><span class="linenum">2862</span></a>  
<a name="l2863"><span class="linenum">2863</span></a>  <span class="comment">            //Move margins to the wrapper</span>
<a name="l2864"><span class="linenum">2864</span></a>              this.element.css({ marginLeft: this.originalElement.css(&quot;marginLeft&quot;), marginTop: this.originalElement.css(&quot;marginTop&quot;), marginRight: this.originalElement.css(&quot;marginRight&quot;), marginBottom: this.originalElement.css(&quot;marginBottom&quot;) });
<a name="l2865"><span class="linenum">2865</span></a>              this.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0});
<a name="l2866"><span class="linenum">2866</span></a>  
<a name="l2867"><span class="linenum">2867</span></a>  <span class="comment">            //Prevent Safari textarea resize</span>
<a name="l2868"><span class="linenum">2868</span></a>              this.originalResizeStyle = this.originalElement.css(&quot;resize&quot;);
<a name="l2869"><span class="linenum">2869</span></a>              this.originalElement.css(&quot;resize&quot;, &quot;none&quot;);
<a name="l2870"><span class="linenum">2870</span></a>  
<a name="l2871"><span class="linenum">2871</span></a>  <span class="comment">            //Push the actual element to our proportionallyResize internal array</span>
<a name="l2872"><span class="linenum">2872</span></a>              this._proportionallyResizeElements.push(this.originalElement.css({ position: &quot;static&quot;, zoom: 1, display: &quot;block&quot; }));
<a name="l2873"><span class="linenum">2873</span></a>  
<a name="l2874"><span class="linenum">2874</span></a>  <span class="comment">            // avoid IE jump (hard set the margin)</span>
<a name="l2875"><span class="linenum">2875</span></a>              this.originalElement.css({ margin: this.originalElement.css(&quot;margin&quot;) });
<a name="l2876"><span class="linenum">2876</span></a>  
<a name="l2877"><span class="linenum">2877</span></a>  <span class="comment">            // fix handlers offset</span>
<a name="l2878"><span class="linenum">2878</span></a>              this._proportionallyResize();
<a name="l2879"><span class="linenum">2879</span></a>  
<a name="l2880"><span class="linenum">2880</span></a>          }
<a name="l2881"><span class="linenum">2881</span></a>  
<a name="l2882"><span class="linenum">2882</span></a>          this.handles = o.handles || (!$(&quot;.ui-resizable-handle&quot;, this.element).length ? &quot;e,s,se&quot; : { n: &quot;.ui-resizable-n&quot;, e: &quot;.ui-resizable-e&quot;, s: &quot;.ui-resizable-s&quot;, w: &quot;.ui-resizable-w&quot;, se: &quot;.ui-resizable-se&quot;, sw: &quot;.ui-resizable-sw&quot;, ne: &quot;.ui-resizable-ne&quot;, nw: &quot;.ui-resizable-nw&quot; });
<a name="l2883"><span class="linenum">2883</span></a>          if(this.handles.constructor === String) {
<a name="l2884"><span class="linenum">2884</span></a>  
<a name="l2885"><span class="linenum">2885</span></a>              if ( this.handles === &quot;all&quot;) {
<a name="l2886"><span class="linenum">2886</span></a>                  this.handles = &quot;n,e,s,w,se,sw,ne,nw&quot;;
<a name="l2887"><span class="linenum">2887</span></a>              }
<a name="l2888"><span class="linenum">2888</span></a>  
<a name="l2889"><span class="linenum">2889</span></a>              n = this.handles.<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>(&quot;,&quot;);
<a name="l2890"><span class="linenum">2890</span></a>              this.handles = {};
<a name="l2891"><span class="linenum">2891</span></a>  
<a name="l2892"><span class="linenum">2892</span></a>              for(i = 0; i &lt; n.length; i++) {
<a name="l2893"><span class="linenum">2893</span></a>  
<a name="l2894"><span class="linenum">2894</span></a>                  handle = $.<a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(n[i]);
<a name="l2895"><span class="linenum">2895</span></a>                  hname = &quot;ui-resizable-&quot;+handle;
<a name="l2896"><span class="linenum">2896</span></a>                  axis = $(&quot;&lt;div class='ui-resizable-handle &quot; + hname + &quot;'&gt;&lt;/div&gt;&quot;);
<a name="l2897"><span class="linenum">2897</span></a>  
<a name="l2898"><span class="linenum">2898</span></a>  <span class="comment">                // Apply zIndex to all handles - see #7960</span>
<a name="l2899"><span class="linenum">2899</span></a>                  axis.css({ zIndex: o.zIndex });
<a name="l2900"><span class="linenum">2900</span></a>  
<a name="l2901"><span class="linenum">2901</span></a>  <span class="comment">                //TODO : What's going on here?</span>
<a name="l2902"><span class="linenum">2902</span></a>                  if (&quot;se&quot; === handle) {
<a name="l2903"><span class="linenum">2903</span></a>                      axis.addClass(&quot;ui-icon ui-icon-gripsmall-diagonal-se&quot;);
<a name="l2904"><span class="linenum">2904</span></a>                  }
<a name="l2905"><span class="linenum">2905</span></a>  
<a name="l2906"><span class="linenum">2906</span></a>  <span class="comment">                //Insert into internal handles object and append to element</span>
<a name="l2907"><span class="linenum">2907</span></a>                  this.handles[handle] = &quot;.ui-resizable-&quot;+handle;
<a name="l2908"><span class="linenum">2908</span></a>                  this.element.<a class="function" onClick="logFunction('append')" href="../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>(axis);
<a name="l2909"><span class="linenum">2909</span></a>              }
<a name="l2910"><span class="linenum">2910</span></a>  
<a name="l2911"><span class="linenum">2911</span></a>          }
<a name="l2912"><span class="linenum">2912</span></a>  
<a name="l2913"><span class="linenum">2913</span></a>          this._renderAxis = function(target) {
<a name="l2914"><span class="linenum">2914</span></a>  
<a name="l2915"><span class="linenum">2915</span></a>              var i, axis, padPos, padWrapper;
<a name="l2916"><span class="linenum">2916</span></a>  
<a name="l2917"><span class="linenum">2917</span></a>              target = target || this.element;
<a name="l2918"><span class="linenum">2918</span></a>  
<a name="l2919"><span class="linenum">2919</span></a>              for(i in this.handles) {
<a name="l2920"><span class="linenum">2920</span></a>  
<a name="l2921"><span class="linenum">2921</span></a>                  if(this.handles[i].constructor === String) {
<a name="l2922"><span class="linenum">2922</span></a>                      this.handles[i] = $(this.handles[i], this.element).<a class="function" onClick="logFunction('show')" href="../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l2923"><span class="linenum">2923</span></a>                  }
<a name="l2924"><span class="linenum">2924</span></a>  
<a name="l2925"><span class="linenum">2925</span></a>  <span class="comment">                //Apply pad to wrapper element, needed to fix axis position (textarea, inputs, scrolls)</span>
<a name="l2926"><span class="linenum">2926</span></a>                  if (this.elementIsWrapper &amp;&amp; this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {
<a name="l2927"><span class="linenum">2927</span></a>  
<a name="l2928"><span class="linenum">2928</span></a>                      axis = $(this.handles[i], this.element);
<a name="l2929"><span class="linenum">2929</span></a>  
<a name="l2930"><span class="linenum">2930</span></a>  <span class="comment">                    //Checking the correct pad and border</span>
<a name="l2931"><span class="linenum">2931</span></a>                      padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();
<a name="l2932"><span class="linenum">2932</span></a>  
<a name="l2933"><span class="linenum">2933</span></a>  <span class="comment">                    //The padding type i have to apply...</span>
<a name="l2934"><span class="linenum">2934</span></a>                      padPos = [ &quot;padding&quot;,
<a name="l2935"><span class="linenum">2935</span></a>                          /ne|nw|n/.test(i) ? &quot;Top&quot; :
<a name="l2936"><span class="linenum">2936</span></a>                          /se|sw|s/.test(i) ? &quot;Bottom&quot; :
<a name="l2937"><span class="linenum">2937</span></a>                          /^e$/.test(i) ? &quot;Right&quot; : &quot;Left&quot; ].join(&quot;&quot;);
<a name="l2938"><span class="linenum">2938</span></a>  
<a name="l2939"><span class="linenum">2939</span></a>                      target.css(padPos, padWrapper);
<a name="l2940"><span class="linenum">2940</span></a>  
<a name="l2941"><span class="linenum">2941</span></a>                      this._proportionallyResize();
<a name="l2942"><span class="linenum">2942</span></a>  
<a name="l2943"><span class="linenum">2943</span></a>                  }
<a name="l2944"><span class="linenum">2944</span></a>  
<a name="l2945"><span class="linenum">2945</span></a>  <span class="comment">                //TODO: What's that good for? There's not anything to be executed left</span>
<a name="l2946"><span class="linenum">2946</span></a>                  if(!$(this.handles[i]).length) {
<a name="l2947"><span class="linenum">2947</span></a>                      continue;
<a name="l2948"><span class="linenum">2948</span></a>                  }
<a name="l2949"><span class="linenum">2949</span></a>              }
<a name="l2950"><span class="linenum">2950</span></a>          };
<a name="l2951"><span class="linenum">2951</span></a>  
<a name="l2952"><span class="linenum">2952</span></a>  <span class="comment">        //TODO: make renderAxis a prototype function</span>
<a name="l2953"><span class="linenum">2953</span></a>          this._renderAxis(this.element);
<a name="l2954"><span class="linenum">2954</span></a>  
<a name="l2955"><span class="linenum">2955</span></a>          this._handles = $(&quot;.ui-resizable-handle&quot;, this.element)
<a name="l2956"><span class="linenum">2956</span></a>              .disableSelection();
<a name="l2957"><span class="linenum">2957</span></a>  
<a name="l2958"><span class="linenum">2958</span></a>  <span class="comment">        //Matching axis name</span>
<a name="l2959"><span class="linenum">2959</span></a>          this._handles.mouseover(function() {
<a name="l2960"><span class="linenum">2960</span></a>              if (!that.resizing) {
<a name="l2961"><span class="linenum">2961</span></a>                  if (this.className) {
<a name="l2962"><span class="linenum">2962</span></a>                      axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
<a name="l2963"><span class="linenum">2963</span></a>                  }
<a name="l2964"><span class="linenum">2964</span></a>  <span class="comment">                //Axis, default = se</span>
<a name="l2965"><span class="linenum">2965</span></a>                  that.axis = axis &amp;&amp; axis[1] ? axis[1] : &quot;se&quot;;
<a name="l2966"><span class="linenum">2966</span></a>              }
<a name="l2967"><span class="linenum">2967</span></a>          });
<a name="l2968"><span class="linenum">2968</span></a>  
<a name="l2969"><span class="linenum">2969</span></a>  <span class="comment">        //If we want to auto hide the elements</span>
<a name="l2970"><span class="linenum">2970</span></a>          if (o.autoHide) {
<a name="l2971"><span class="linenum">2971</span></a>              this._handles.hide();
<a name="l2972"><span class="linenum">2972</span></a>              $(this.element)
<a name="l2973"><span class="linenum">2973</span></a>                  .addClass(&quot;ui-resizable-autohide&quot;)
<a name="l2974"><span class="linenum">2974</span></a>                  .mouseenter(function() {
<a name="l2975"><span class="linenum">2975</span></a>                      if (o.disabled) {
<a name="l2976"><span class="linenum">2976</span></a>                          return;
<a name="l2977"><span class="linenum">2977</span></a>                      }
<a name="l2978"><span class="linenum">2978</span></a>                      $(this).removeClass(&quot;ui-resizable-autohide&quot;);
<a name="l2979"><span class="linenum">2979</span></a>                      that._handles.<a class="function" onClick="logFunction('show')" href="../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l2980"><span class="linenum">2980</span></a>                  })
<a name="l2981"><span class="linenum">2981</span></a>                  .mouseleave(function(){
<a name="l2982"><span class="linenum">2982</span></a>                      if (o.disabled) {
<a name="l2983"><span class="linenum">2983</span></a>                          return;
<a name="l2984"><span class="linenum">2984</span></a>                      }
<a name="l2985"><span class="linenum">2985</span></a>                      if (!that.resizing) {
<a name="l2986"><span class="linenum">2986</span></a>                          $(this).addClass(&quot;ui-resizable-autohide&quot;);
<a name="l2987"><span class="linenum">2987</span></a>                          that._handles.hide();
<a name="l2988"><span class="linenum">2988</span></a>                      }
<a name="l2989"><span class="linenum">2989</span></a>                  });
<a name="l2990"><span class="linenum">2990</span></a>          }
<a name="l2991"><span class="linenum">2991</span></a>  
<a name="l2992"><span class="linenum">2992</span></a>  <span class="comment">        //Initialize the mouse interaction</span>
<a name="l2993"><span class="linenum">2993</span></a>          this._mouseInit();
<a name="l2994"><span class="linenum">2994</span></a>  
<a name="l2995"><span class="linenum">2995</span></a>      },
<a name="l2996"><span class="linenum">2996</span></a>  
<a name="l2997"><span class="linenum">2997</span></a>      _destroy: function() {
<a name="l2998"><span class="linenum">2998</span></a>  
<a name="l2999"><span class="linenum">2999</span></a>          this._mouseDestroy();
<a name="l3000"><span class="linenum">3000</span></a>  
<a name="l3001"><span class="linenum">3001</span></a>          var wrapper,
<a name="l3002"><span class="linenum">3002</span></a>              _destroy = function(exp) {
<a name="l3003"><span class="linenum">3003</span></a>                  $(exp).removeClass(&quot;ui-resizable ui-resizable-disabled ui-resizable-resizing&quot;)
<a name="l3004"><span class="linenum">3004</span></a>                      .removeData(&quot;resizable&quot;).removeData(&quot;ui-resizable&quot;).<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;.resizable&quot;).<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;.ui-resizable-handle&quot;).<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l3005"><span class="linenum">3005</span></a>              };
<a name="l3006"><span class="linenum">3006</span></a>  
<a name="l3007"><span class="linenum">3007</span></a>  <span class="comment">        //TODO: Unwrap at same DOM position</span>
<a name="l3008"><span class="linenum">3008</span></a>          if (this.elementIsWrapper) {
<a name="l3009"><span class="linenum">3009</span></a>              _destroy(this.element);
<a name="l3010"><span class="linenum">3010</span></a>              wrapper = this.element;
<a name="l3011"><span class="linenum">3011</span></a>              this.originalElement.css({
<a name="l3012"><span class="linenum">3012</span></a>                  position: wrapper.css(&quot;position&quot;),
<a name="l3013"><span class="linenum">3013</span></a>                  width: wrapper.outerWidth(),
<a name="l3014"><span class="linenum">3014</span></a>                  height: wrapper.outerHeight(),
<a name="l3015"><span class="linenum">3015</span></a>                  top: wrapper.css(&quot;top&quot;),
<a name="l3016"><span class="linenum">3016</span></a>                  left: wrapper.css(&quot;left&quot;)
<a name="l3017"><span class="linenum">3017</span></a>              }).insertAfter( wrapper );
<a name="l3018"><span class="linenum">3018</span></a>              wrapper.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l3019"><span class="linenum">3019</span></a>          }
<a name="l3020"><span class="linenum">3020</span></a>  
<a name="l3021"><span class="linenum">3021</span></a>          this.originalElement.css(&quot;resize&quot;, this.originalResizeStyle);
<a name="l3022"><span class="linenum">3022</span></a>          _destroy(this.originalElement);
<a name="l3023"><span class="linenum">3023</span></a>  
<a name="l3024"><span class="linenum">3024</span></a>          return this;
<a name="l3025"><span class="linenum">3025</span></a>      },
<a name="l3026"><span class="linenum">3026</span></a>  
<a name="l3027"><span class="linenum">3027</span></a>      _mouseCapture: function(event) {
<a name="l3028"><span class="linenum">3028</span></a>          var i, handle,
<a name="l3029"><span class="linenum">3029</span></a>              capture = false;
<a name="l3030"><span class="linenum">3030</span></a>  
<a name="l3031"><span class="linenum">3031</span></a>          for (i in this.handles) {
<a name="l3032"><span class="linenum">3032</span></a>              handle = $(this.handles[i])[0];
<a name="l3033"><span class="linenum">3033</span></a>              if (handle === event.target || $.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>(handle, event.target)) {
<a name="l3034"><span class="linenum">3034</span></a>                  capture = true;
<a name="l3035"><span class="linenum">3035</span></a>              }
<a name="l3036"><span class="linenum">3036</span></a>          }
<a name="l3037"><span class="linenum">3037</span></a>  
<a name="l3038"><span class="linenum">3038</span></a>          return !this.options.disabled &amp;&amp; capture;
<a name="l3039"><span class="linenum">3039</span></a>      },
<a name="l3040"><span class="linenum">3040</span></a>  
<a name="l3041"><span class="linenum">3041</span></a>      _mouseStart: function(event) {
<a name="l3042"><span class="linenum">3042</span></a>  
<a name="l3043"><span class="linenum">3043</span></a>          var curleft, curtop, cursor,
<a name="l3044"><span class="linenum">3044</span></a>              o = this.options,
<a name="l3045"><span class="linenum">3045</span></a>              iniPos = this.element.<a class="function" onClick="logFunction('position')" href="../../../_functions/position.html" onMouseOver="funcPopup(event,'position')">position</a>(),
<a name="l3046"><span class="linenum">3046</span></a>              el = this.element;
<a name="l3047"><span class="linenum">3047</span></a>  
<a name="l3048"><span class="linenum">3048</span></a>          this.resizing = true;
<a name="l3049"><span class="linenum">3049</span></a>  
<a name="l3050"><span class="linenum">3050</span></a>  <span class="comment">        // bugfix for http://dev.jquery.com/ticket/1749</span>
<a name="l3051"><span class="linenum">3051</span></a>          if ( (/absolute/).test( el.css(&quot;position&quot;) ) ) {
<a name="l3052"><span class="linenum">3052</span></a>              el.css({ position: &quot;absolute&quot;, top: el.css(&quot;top&quot;), left: el.css(&quot;left&quot;) });
<a name="l3053"><span class="linenum">3053</span></a>          } else if (el.is(&quot;.ui-draggable&quot;)) {
<a name="l3054"><span class="linenum">3054</span></a>              el.css({ position: &quot;absolute&quot;, top: iniPos.top, left: iniPos.left });
<a name="l3055"><span class="linenum">3055</span></a>          }
<a name="l3056"><span class="linenum">3056</span></a>  
<a name="l3057"><span class="linenum">3057</span></a>          this._renderProxy();
<a name="l3058"><span class="linenum">3058</span></a>  
<a name="l3059"><span class="linenum">3059</span></a>          curleft = <a class="function" onClick="logFunction('num')" href="../../../_functions/num.html" onMouseOver="funcPopup(event,'num')">num</a>(this.helper.css(&quot;left&quot;));
<a name="l3060"><span class="linenum">3060</span></a>          curtop = <a class="function" onClick="logFunction('num')" href="../../../_functions/num.html" onMouseOver="funcPopup(event,'num')">num</a>(this.helper.css(&quot;top&quot;));
<a name="l3061"><span class="linenum">3061</span></a>  
<a name="l3062"><span class="linenum">3062</span></a>          if (o.containment) {
<a name="l3063"><span class="linenum">3063</span></a>              curleft += $(o.containment).scrollLeft() || 0;
<a name="l3064"><span class="linenum">3064</span></a>              curtop += $(o.containment).scrollTop() || 0;
<a name="l3065"><span class="linenum">3065</span></a>          }
<a name="l3066"><span class="linenum">3066</span></a>  
<a name="l3067"><span class="linenum">3067</span></a>  <span class="comment">        //Store needed variables</span>
<a name="l3068"><span class="linenum">3068</span></a>          this.offset = this.helper.offset();
<a name="l3069"><span class="linenum">3069</span></a>          this.position = { left: curleft, top: curtop };
<a name="l3070"><span class="linenum">3070</span></a>          this.size = this._helper ? { width: this.helper.width(), height: this.helper.height() } : { width: el.width(), height: el.height() };
<a name="l3071"><span class="linenum">3071</span></a>          this.originalSize = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
<a name="l3072"><span class="linenum">3072</span></a>          this.originalPosition = { left: curleft, top: curtop };
<a name="l3073"><span class="linenum">3073</span></a>          this.sizeDiff = { width: el.outerWidth() - el.width(), height: el.outerHeight() - el.height() };
<a name="l3074"><span class="linenum">3074</span></a>          this.originalMousePosition = { left: event.pageX, top: event.pageY };
<a name="l3075"><span class="linenum">3075</span></a>  
<a name="l3076"><span class="linenum">3076</span></a>  <span class="comment">        //Aspect Ratio</span>
<a name="l3077"><span class="linenum">3077</span></a>          this.aspectRatio = (typeof o.aspectRatio === &quot;number&quot;) ? o.aspectRatio : ((this.originalSize.width / this.originalSize.height) || 1);
<a name="l3078"><span class="linenum">3078</span></a>  
<a name="l3079"><span class="linenum">3079</span></a>          cursor = $(&quot;.ui-resizable-&quot; + this.axis).css(&quot;cursor&quot;);
<a name="l3080"><span class="linenum">3080</span></a>          $(&quot;body&quot;).css(&quot;cursor&quot;, cursor === &quot;auto&quot; ? this.axis + &quot;-resize&quot; : cursor);
<a name="l3081"><span class="linenum">3081</span></a>  
<a name="l3082"><span class="linenum">3082</span></a>          el.addClass(&quot;ui-resizable-resizing&quot;);
<a name="l3083"><span class="linenum">3083</span></a>          this._propagate(&quot;start&quot;, event);
<a name="l3084"><span class="linenum">3084</span></a>          return true;
<a name="l3085"><span class="linenum">3085</span></a>      },
<a name="l3086"><span class="linenum">3086</span></a>  
<a name="l3087"><span class="linenum">3087</span></a>      _mouseDrag: function(event) {
<a name="l3088"><span class="linenum">3088</span></a>  
<a name="l3089"><span class="linenum">3089</span></a>  <span class="comment">        //Increase performance, avoid regex</span>
<a name="l3090"><span class="linenum">3090</span></a>          var data,
<a name="l3091"><span class="linenum">3091</span></a>              el = this.helper, props = {},
<a name="l3092"><span class="linenum">3092</span></a>              smp = this.originalMousePosition,
<a name="l3093"><span class="linenum">3093</span></a>              a = this.axis,
<a name="l3094"><span class="linenum">3094</span></a>              prevTop = this.position.top,
<a name="l3095"><span class="linenum">3095</span></a>              prevLeft = this.position.left,
<a name="l3096"><span class="linenum">3096</span></a>              prevWidth = this.size.width,
<a name="l3097"><span class="linenum">3097</span></a>              prevHeight = this.size.height,
<a name="l3098"><span class="linenum">3098</span></a>              dx = (event.pageX-smp.left)||0,
<a name="l3099"><span class="linenum">3099</span></a>              dy = (event.pageY-smp.top)||0,
<a name="l3100"><span class="linenum">3100</span></a>              trigger = this._change[a];
<a name="l3101"><span class="linenum">3101</span></a>  
<a name="l3102"><span class="linenum">3102</span></a>          if (!trigger) {
<a name="l3103"><span class="linenum">3103</span></a>              return false;
<a name="l3104"><span class="linenum">3104</span></a>          }
<a name="l3105"><span class="linenum">3105</span></a>  
<a name="l3106"><span class="linenum">3106</span></a>  <span class="comment">        // Calculate the attrs that will be change</span>
<a name="l3107"><span class="linenum">3107</span></a>          data = trigger.apply(this, [event, dx, dy]);
<a name="l3108"><span class="linenum">3108</span></a>  
<a name="l3109"><span class="linenum">3109</span></a>  <span class="comment">        // Put this in the mouseDrag handler since the user can start pressing shift while resizing</span>
<a name="l3110"><span class="linenum">3110</span></a>          this._updateVirtualBoundaries(event.shiftKey);
<a name="l3111"><span class="linenum">3111</span></a>          if (this._aspectRatio || event.shiftKey) {
<a name="l3112"><span class="linenum">3112</span></a>              data = this._updateRatio(data, event);
<a name="l3113"><span class="linenum">3113</span></a>          }
<a name="l3114"><span class="linenum">3114</span></a>  
<a name="l3115"><span class="linenum">3115</span></a>          data = this._respectSize(data, event);
<a name="l3116"><span class="linenum">3116</span></a>  
<a name="l3117"><span class="linenum">3117</span></a>          this._updateCache(data);
<a name="l3118"><span class="linenum">3118</span></a>  
<a name="l3119"><span class="linenum">3119</span></a>  <span class="comment">        // plugins callbacks need to be called first</span>
<a name="l3120"><span class="linenum">3120</span></a>          this._propagate(&quot;resize&quot;, event);
<a name="l3121"><span class="linenum">3121</span></a>  
<a name="l3122"><span class="linenum">3122</span></a>          if (this.position.top !== prevTop) {
<a name="l3123"><span class="linenum">3123</span></a>              props.top = this.position.top + &quot;px&quot;;
<a name="l3124"><span class="linenum">3124</span></a>          }
<a name="l3125"><span class="linenum">3125</span></a>          if (this.position.left !== prevLeft) {
<a name="l3126"><span class="linenum">3126</span></a>              props.left = this.position.left + &quot;px&quot;;
<a name="l3127"><span class="linenum">3127</span></a>          }
<a name="l3128"><span class="linenum">3128</span></a>          if (this.size.width !== prevWidth) {
<a name="l3129"><span class="linenum">3129</span></a>              props.width = this.size.width + &quot;px&quot;;
<a name="l3130"><span class="linenum">3130</span></a>          }
<a name="l3131"><span class="linenum">3131</span></a>          if (this.size.height !== prevHeight) {
<a name="l3132"><span class="linenum">3132</span></a>              props.height = this.size.height + &quot;px&quot;;
<a name="l3133"><span class="linenum">3133</span></a>          }
<a name="l3134"><span class="linenum">3134</span></a>          el.css(props);
<a name="l3135"><span class="linenum">3135</span></a>  
<a name="l3136"><span class="linenum">3136</span></a>          if (!this._helper &amp;&amp; this._proportionallyResizeElements.length) {
<a name="l3137"><span class="linenum">3137</span></a>              this._proportionallyResize();
<a name="l3138"><span class="linenum">3138</span></a>          }
<a name="l3139"><span class="linenum">3139</span></a>  
<a name="l3140"><span class="linenum">3140</span></a>  <span class="comment">        // Call the user callback if the element was resized</span>
<a name="l3141"><span class="linenum">3141</span></a>          if ( ! $.<a class="function" onClick="logFunction('isEmptyObject')" href="../../../_functions/isemptyobject.html" onMouseOver="funcPopup(event,'isemptyobject')">isEmptyObject</a>(props) ) {
<a name="l3142"><span class="linenum">3142</span></a>              this._trigger(&quot;resize&quot;, event, this.ui());
<a name="l3143"><span class="linenum">3143</span></a>          }
<a name="l3144"><span class="linenum">3144</span></a>  
<a name="l3145"><span class="linenum">3145</span></a>          return false;
<a name="l3146"><span class="linenum">3146</span></a>      },
<a name="l3147"><span class="linenum">3147</span></a>  
<a name="l3148"><span class="linenum">3148</span></a>      _mouseStop: function(event) {
<a name="l3149"><span class="linenum">3149</span></a>  
<a name="l3150"><span class="linenum">3150</span></a>          this.resizing = false;
<a name="l3151"><span class="linenum">3151</span></a>          var pr, ista, soffseth, soffsetw, s, left, top,
<a name="l3152"><span class="linenum">3152</span></a>              o = this.options, that = this;
<a name="l3153"><span class="linenum">3153</span></a>  
<a name="l3154"><span class="linenum">3154</span></a>          if(this._helper) {
<a name="l3155"><span class="linenum">3155</span></a>  
<a name="l3156"><span class="linenum">3156</span></a>              pr = this._proportionallyResizeElements;
<a name="l3157"><span class="linenum">3157</span></a>              ista = pr.length &amp;&amp; (/textarea/i).test(pr[0].nodeName);
<a name="l3158"><span class="linenum">3158</span></a>              soffseth = ista &amp;&amp; $.ui.hasScroll(pr[0], &quot;left&quot;) <span class="comment">/* TODO - jump height */</span> ? 0 : that.sizeDiff.height;
<a name="l3159"><span class="linenum">3159</span></a>              soffsetw = ista ? 0 : that.sizeDiff.width;
<a name="l3160"><span class="linenum">3160</span></a>  
<a name="l3161"><span class="linenum">3161</span></a>              s = { width: (that.helper.width()  - soffsetw), height: (that.helper.height() - soffseth) };
<a name="l3162"><span class="linenum">3162</span></a>              left = (parseInt(that.element.css(&quot;left&quot;), 10) + (that.position.left - that.originalPosition.left)) || null;
<a name="l3163"><span class="linenum">3163</span></a>              top = (parseInt(that.element.css(&quot;top&quot;), 10) + (that.position.top - that.originalPosition.top)) || null;
<a name="l3164"><span class="linenum">3164</span></a>  
<a name="l3165"><span class="linenum">3165</span></a>              if (!o.animate) {
<a name="l3166"><span class="linenum">3166</span></a>                  this.element.css($.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(s, { top: top, left: left }));
<a name="l3167"><span class="linenum">3167</span></a>              }
<a name="l3168"><span class="linenum">3168</span></a>  
<a name="l3169"><span class="linenum">3169</span></a>              that.helper.height(that.size.height);
<a name="l3170"><span class="linenum">3170</span></a>              that.helper.width(that.size.width);
<a name="l3171"><span class="linenum">3171</span></a>  
<a name="l3172"><span class="linenum">3172</span></a>              if (this._helper &amp;&amp; !o.animate) {
<a name="l3173"><span class="linenum">3173</span></a>                  this._proportionallyResize();
<a name="l3174"><span class="linenum">3174</span></a>              }
<a name="l3175"><span class="linenum">3175</span></a>          }
<a name="l3176"><span class="linenum">3176</span></a>  
<a name="l3177"><span class="linenum">3177</span></a>          $(&quot;body&quot;).css(&quot;cursor&quot;, &quot;auto&quot;);
<a name="l3178"><span class="linenum">3178</span></a>  
<a name="l3179"><span class="linenum">3179</span></a>          this.element.removeClass(&quot;ui-resizable-resizing&quot;);
<a name="l3180"><span class="linenum">3180</span></a>  
<a name="l3181"><span class="linenum">3181</span></a>          this._propagate(&quot;stop&quot;, event);
<a name="l3182"><span class="linenum">3182</span></a>  
<a name="l3183"><span class="linenum">3183</span></a>          if (this._helper) {
<a name="l3184"><span class="linenum">3184</span></a>              this.helper.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l3185"><span class="linenum">3185</span></a>          }
<a name="l3186"><span class="linenum">3186</span></a>  
<a name="l3187"><span class="linenum">3187</span></a>          return false;
<a name="l3188"><span class="linenum">3188</span></a>  
<a name="l3189"><span class="linenum">3189</span></a>      },
<a name="l3190"><span class="linenum">3190</span></a>  
<a name="l3191"><span class="linenum">3191</span></a>      _updateVirtualBoundaries: function(forceAspectRatio) {
<a name="l3192"><span class="linenum">3192</span></a>          var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,
<a name="l3193"><span class="linenum">3193</span></a>              o = this.options;
<a name="l3194"><span class="linenum">3194</span></a>  
<a name="l3195"><span class="linenum">3195</span></a>          b = {
<a name="l3196"><span class="linenum">3196</span></a>              minWidth: <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(o.minWidth) ? o.minWidth : 0,
<a name="l3197"><span class="linenum">3197</span></a>              maxWidth: <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(o.maxWidth) ? o.maxWidth : Infinity,
<a name="l3198"><span class="linenum">3198</span></a>              minHeight: <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(o.minHeight) ? o.minHeight : 0,
<a name="l3199"><span class="linenum">3199</span></a>              maxHeight: <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(o.maxHeight) ? o.maxHeight : Infinity
<a name="l3200"><span class="linenum">3200</span></a>          };
<a name="l3201"><span class="linenum">3201</span></a>  
<a name="l3202"><span class="linenum">3202</span></a>          if(this._aspectRatio || forceAspectRatio) {
<a name="l3203"><span class="linenum">3203</span></a>  <span class="comment">            // We want to create an enclosing box whose aspect ration is the requested one</span>
<a name="l3204"><span class="linenum">3204</span></a>  <span class="comment">            // First, compute the &quot;projected&quot; size for each dimension based on the aspect ratio and other dimension</span>
<a name="l3205"><span class="linenum">3205</span></a>              pMinWidth = b.minHeight * this.aspectRatio;
<a name="l3206"><span class="linenum">3206</span></a>              pMinHeight = b.minWidth / this.aspectRatio;
<a name="l3207"><span class="linenum">3207</span></a>              pMaxWidth = b.maxHeight * this.aspectRatio;
<a name="l3208"><span class="linenum">3208</span></a>              pMaxHeight = b.maxWidth / this.aspectRatio;
<a name="l3209"><span class="linenum">3209</span></a>  
<a name="l3210"><span class="linenum">3210</span></a>              if(pMinWidth &gt; b.minWidth) {
<a name="l3211"><span class="linenum">3211</span></a>                  b.minWidth = pMinWidth;
<a name="l3212"><span class="linenum">3212</span></a>              }
<a name="l3213"><span class="linenum">3213</span></a>              if(pMinHeight &gt; b.minHeight) {
<a name="l3214"><span class="linenum">3214</span></a>                  b.minHeight = pMinHeight;
<a name="l3215"><span class="linenum">3215</span></a>              }
<a name="l3216"><span class="linenum">3216</span></a>              if(pMaxWidth &lt; b.maxWidth) {
<a name="l3217"><span class="linenum">3217</span></a>                  b.maxWidth = pMaxWidth;
<a name="l3218"><span class="linenum">3218</span></a>              }
<a name="l3219"><span class="linenum">3219</span></a>              if(pMaxHeight &lt; b.maxHeight) {
<a name="l3220"><span class="linenum">3220</span></a>                  b.maxHeight = pMaxHeight;
<a name="l3221"><span class="linenum">3221</span></a>              }
<a name="l3222"><span class="linenum">3222</span></a>          }
<a name="l3223"><span class="linenum">3223</span></a>          this._vBoundaries = b;
<a name="l3224"><span class="linenum">3224</span></a>      },
<a name="l3225"><span class="linenum">3225</span></a>  
<a name="l3226"><span class="linenum">3226</span></a>      _updateCache: function(data) {
<a name="l3227"><span class="linenum">3227</span></a>          this.offset = this.helper.offset();
<a name="l3228"><span class="linenum">3228</span></a>          if (<a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.left)) {
<a name="l3229"><span class="linenum">3229</span></a>              this.position.left = data.left;
<a name="l3230"><span class="linenum">3230</span></a>          }
<a name="l3231"><span class="linenum">3231</span></a>          if (<a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.top)) {
<a name="l3232"><span class="linenum">3232</span></a>              this.position.top = data.top;
<a name="l3233"><span class="linenum">3233</span></a>          }
<a name="l3234"><span class="linenum">3234</span></a>          if (<a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.height)) {
<a name="l3235"><span class="linenum">3235</span></a>              this.size.height = data.height;
<a name="l3236"><span class="linenum">3236</span></a>          }
<a name="l3237"><span class="linenum">3237</span></a>          if (<a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.width)) {
<a name="l3238"><span class="linenum">3238</span></a>              this.size.width = data.width;
<a name="l3239"><span class="linenum">3239</span></a>          }
<a name="l3240"><span class="linenum">3240</span></a>      },
<a name="l3241"><span class="linenum">3241</span></a>  
<a name="l3242"><span class="linenum">3242</span></a>      _updateRatio: function( data ) {
<a name="l3243"><span class="linenum">3243</span></a>  
<a name="l3244"><span class="linenum">3244</span></a>          var cpos = this.position,
<a name="l3245"><span class="linenum">3245</span></a>              csize = this.size,
<a name="l3246"><span class="linenum">3246</span></a>              a = this.axis;
<a name="l3247"><span class="linenum">3247</span></a>  
<a name="l3248"><span class="linenum">3248</span></a>          if (<a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.height)) {
<a name="l3249"><span class="linenum">3249</span></a>              data.width = (data.height * this.aspectRatio);
<a name="l3250"><span class="linenum">3250</span></a>          } else if (<a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.width)) {
<a name="l3251"><span class="linenum">3251</span></a>              data.height = (data.width / this.aspectRatio);
<a name="l3252"><span class="linenum">3252</span></a>          }
<a name="l3253"><span class="linenum">3253</span></a>  
<a name="l3254"><span class="linenum">3254</span></a>          if (a === &quot;sw&quot;) {
<a name="l3255"><span class="linenum">3255</span></a>              data.left = cpos.left + (csize.width - data.width);
<a name="l3256"><span class="linenum">3256</span></a>              data.top = null;
<a name="l3257"><span class="linenum">3257</span></a>          }
<a name="l3258"><span class="linenum">3258</span></a>          if (a === &quot;nw&quot;) {
<a name="l3259"><span class="linenum">3259</span></a>              data.top = cpos.top + (csize.height - data.height);
<a name="l3260"><span class="linenum">3260</span></a>              data.left = cpos.left + (csize.width - data.width);
<a name="l3261"><span class="linenum">3261</span></a>          }
<a name="l3262"><span class="linenum">3262</span></a>  
<a name="l3263"><span class="linenum">3263</span></a>          return data;
<a name="l3264"><span class="linenum">3264</span></a>      },
<a name="l3265"><span class="linenum">3265</span></a>  
<a name="l3266"><span class="linenum">3266</span></a>      _respectSize: function( data ) {
<a name="l3267"><span class="linenum">3267</span></a>  
<a name="l3268"><span class="linenum">3268</span></a>          var o = this._vBoundaries,
<a name="l3269"><span class="linenum">3269</span></a>              a = this.axis,
<a name="l3270"><span class="linenum">3270</span></a>              ismaxw = <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.width) &amp;&amp; o.maxWidth &amp;&amp; (o.maxWidth &lt; data.width), ismaxh = <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.height) &amp;&amp; o.maxHeight &amp;&amp; (o.maxHeight &lt; data.height),
<a name="l3271"><span class="linenum">3271</span></a>              isminw = <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.width) &amp;&amp; o.minWidth &amp;&amp; (o.minWidth &gt; data.width), isminh = <a class="function" onClick="logFunction('isNumber')" href="../../../_functions/isnumber.html" onMouseOver="funcPopup(event,'isnumber')">isNumber</a>(data.height) &amp;&amp; o.minHeight &amp;&amp; (o.minHeight &gt; data.height),
<a name="l3272"><span class="linenum">3272</span></a>              dw = this.originalPosition.left + this.originalSize.width,
<a name="l3273"><span class="linenum">3273</span></a>              dh = this.position.top + this.size.height,
<a name="l3274"><span class="linenum">3274</span></a>              cw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);
<a name="l3275"><span class="linenum">3275</span></a>          if (isminw) {
<a name="l3276"><span class="linenum">3276</span></a>              data.width = o.minWidth;
<a name="l3277"><span class="linenum">3277</span></a>          }
<a name="l3278"><span class="linenum">3278</span></a>          if (isminh) {
<a name="l3279"><span class="linenum">3279</span></a>              data.height = o.minHeight;
<a name="l3280"><span class="linenum">3280</span></a>          }
<a name="l3281"><span class="linenum">3281</span></a>          if (ismaxw) {
<a name="l3282"><span class="linenum">3282</span></a>              data.width = o.maxWidth;
<a name="l3283"><span class="linenum">3283</span></a>          }
<a name="l3284"><span class="linenum">3284</span></a>          if (ismaxh) {
<a name="l3285"><span class="linenum">3285</span></a>              data.height = o.maxHeight;
<a name="l3286"><span class="linenum">3286</span></a>          }
<a name="l3287"><span class="linenum">3287</span></a>  
<a name="l3288"><span class="linenum">3288</span></a>          if (isminw &amp;&amp; cw) {
<a name="l3289"><span class="linenum">3289</span></a>              data.left = dw - o.minWidth;
<a name="l3290"><span class="linenum">3290</span></a>          }
<a name="l3291"><span class="linenum">3291</span></a>          if (ismaxw &amp;&amp; cw) {
<a name="l3292"><span class="linenum">3292</span></a>              data.left = dw - o.maxWidth;
<a name="l3293"><span class="linenum">3293</span></a>          }
<a name="l3294"><span class="linenum">3294</span></a>          if (isminh &amp;&amp; ch) {
<a name="l3295"><span class="linenum">3295</span></a>              data.top = dh - o.minHeight;
<a name="l3296"><span class="linenum">3296</span></a>          }
<a name="l3297"><span class="linenum">3297</span></a>          if (ismaxh &amp;&amp; ch) {
<a name="l3298"><span class="linenum">3298</span></a>              data.top = dh - o.maxHeight;
<a name="l3299"><span class="linenum">3299</span></a>          }
<a name="l3300"><span class="linenum">3300</span></a>  
<a name="l3301"><span class="linenum">3301</span></a>  <span class="comment">        // fixing jump error on top/left - bug #2330</span>
<a name="l3302"><span class="linenum">3302</span></a>          if (!data.width &amp;&amp; !data.height &amp;&amp; !data.left &amp;&amp; data.top) {
<a name="l3303"><span class="linenum">3303</span></a>              data.top = null;
<a name="l3304"><span class="linenum">3304</span></a>          } else if (!data.width &amp;&amp; !data.height &amp;&amp; !data.top &amp;&amp; data.left) {
<a name="l3305"><span class="linenum">3305</span></a>              data.left = null;
<a name="l3306"><span class="linenum">3306</span></a>          }
<a name="l3307"><span class="linenum">3307</span></a>  
<a name="l3308"><span class="linenum">3308</span></a>          return data;
<a name="l3309"><span class="linenum">3309</span></a>      },
<a name="l3310"><span class="linenum">3310</span></a>  
<a name="l3311"><span class="linenum">3311</span></a>      _proportionallyResize: function() {
<a name="l3312"><span class="linenum">3312</span></a>  
<a name="l3313"><span class="linenum">3313</span></a>          if (!this._proportionallyResizeElements.length) {
<a name="l3314"><span class="linenum">3314</span></a>              return;
<a name="l3315"><span class="linenum">3315</span></a>          }
<a name="l3316"><span class="linenum">3316</span></a>  
<a name="l3317"><span class="linenum">3317</span></a>          var i, j, borders, paddings, prel,
<a name="l3318"><span class="linenum">3318</span></a>              element = this.helper || this.element;
<a name="l3319"><span class="linenum">3319</span></a>  
<a name="l3320"><span class="linenum">3320</span></a>          for ( i=0; i &lt; this._proportionallyResizeElements.length; i++) {
<a name="l3321"><span class="linenum">3321</span></a>  
<a name="l3322"><span class="linenum">3322</span></a>              prel = this._proportionallyResizeElements[i];
<a name="l3323"><span class="linenum">3323</span></a>  
<a name="l3324"><span class="linenum">3324</span></a>              if (!this.borderDif) {
<a name="l3325"><span class="linenum">3325</span></a>                  this.borderDif = [];
<a name="l3326"><span class="linenum">3326</span></a>                  borders = [prel.css(&quot;borderTopWidth&quot;), prel.css(&quot;borderRightWidth&quot;), prel.css(&quot;borderBottomWidth&quot;), prel.css(&quot;borderLeftWidth&quot;)];
<a name="l3327"><span class="linenum">3327</span></a>                  paddings = [prel.css(&quot;paddingTop&quot;), prel.css(&quot;paddingRight&quot;), prel.css(&quot;paddingBottom&quot;), prel.css(&quot;paddingLeft&quot;)];
<a name="l3328"><span class="linenum">3328</span></a>  
<a name="l3329"><span class="linenum">3329</span></a>                  for ( j = 0; j &lt; borders.length; j++ ) {
<a name="l3330"><span class="linenum">3330</span></a>                      this.borderDif[ j ] = ( parseInt( borders[ j ], 10 ) || 0 ) + ( parseInt( paddings[ j ], 10 ) || 0 );
<a name="l3331"><span class="linenum">3331</span></a>                  }
<a name="l3332"><span class="linenum">3332</span></a>              }
<a name="l3333"><span class="linenum">3333</span></a>  
<a name="l3334"><span class="linenum">3334</span></a>              prel.css({
<a name="l3335"><span class="linenum">3335</span></a>                  height: (element.height() - this.borderDif[0] - this.borderDif[2]) || 0,
<a name="l3336"><span class="linenum">3336</span></a>                  width: (element.width() - this.borderDif[1] - this.borderDif[3]) || 0
<a name="l3337"><span class="linenum">3337</span></a>              });
<a name="l3338"><span class="linenum">3338</span></a>  
<a name="l3339"><span class="linenum">3339</span></a>          }
<a name="l3340"><span class="linenum">3340</span></a>  
<a name="l3341"><span class="linenum">3341</span></a>      },
<a name="l3342"><span class="linenum">3342</span></a>  
<a name="l3343"><span class="linenum">3343</span></a>      _renderProxy: function() {
<a name="l3344"><span class="linenum">3344</span></a>  
<a name="l3345"><span class="linenum">3345</span></a>          var el = this.element, o = this.options;
<a name="l3346"><span class="linenum">3346</span></a>          this.elementOffset = el.offset();
<a name="l3347"><span class="linenum">3347</span></a>  
<a name="l3348"><span class="linenum">3348</span></a>          if(this._helper) {
<a name="l3349"><span class="linenum">3349</span></a>  
<a name="l3350"><span class="linenum">3350</span></a>              this.helper = this.helper || $(&quot;&lt;div style='overflow:hidden;'&gt;&lt;/div&gt;&quot;);
<a name="l3351"><span class="linenum">3351</span></a>  
<a name="l3352"><span class="linenum">3352</span></a>              this.helper.addClass(this._helper).css({
<a name="l3353"><span class="linenum">3353</span></a>                  width: this.element.outerWidth() - 1,
<a name="l3354"><span class="linenum">3354</span></a>                  height: this.element.outerHeight() - 1,
<a name="l3355"><span class="linenum">3355</span></a>                  position: &quot;absolute&quot;,
<a name="l3356"><span class="linenum">3356</span></a>                  left: this.elementOffset.left +&quot;px&quot;,
<a name="l3357"><span class="linenum">3357</span></a>                  top: this.elementOffset.top +&quot;px&quot;,
<a name="l3358"><span class="linenum">3358</span></a>                  zIndex: ++o.zIndex //TODO: Don't modify option
<a name="l3359"><span class="linenum">3359</span></a>              });
<a name="l3360"><span class="linenum">3360</span></a>  
<a name="l3361"><span class="linenum">3361</span></a>              this.helper
<a name="l3362"><span class="linenum">3362</span></a>                  .appendTo(&quot;body&quot;)
<a name="l3363"><span class="linenum">3363</span></a>                  .disableSelection();
<a name="l3364"><span class="linenum">3364</span></a>  
<a name="l3365"><span class="linenum">3365</span></a>          } else {
<a name="l3366"><span class="linenum">3366</span></a>              this.helper = this.element;
<a name="l3367"><span class="linenum">3367</span></a>          }
<a name="l3368"><span class="linenum">3368</span></a>  
<a name="l3369"><span class="linenum">3369</span></a>      },
<a name="l3370"><span class="linenum">3370</span></a>  
<a name="l3371"><span class="linenum">3371</span></a>      _change: {
<a name="l3372"><span class="linenum">3372</span></a>          e: function(event, dx) {
<a name="l3373"><span class="linenum">3373</span></a>              return { width: this.originalSize.width + dx };
<a name="l3374"><span class="linenum">3374</span></a>          },
<a name="l3375"><span class="linenum">3375</span></a>          w: function(event, dx) {
<a name="l3376"><span class="linenum">3376</span></a>              var cs = this.originalSize, sp = this.originalPosition;
<a name="l3377"><span class="linenum">3377</span></a>              return { left: sp.left + dx, width: cs.width - dx };
<a name="l3378"><span class="linenum">3378</span></a>          },
<a name="l3379"><span class="linenum">3379</span></a>          n: function(event, dx, dy) {
<a name="l3380"><span class="linenum">3380</span></a>              var cs = this.originalSize, sp = this.originalPosition;
<a name="l3381"><span class="linenum">3381</span></a>              return { top: sp.top + dy, height: cs.height - dy };
<a name="l3382"><span class="linenum">3382</span></a>          },
<a name="l3383"><span class="linenum">3383</span></a>          s: function(event, dx, dy) {
<a name="l3384"><span class="linenum">3384</span></a>              return { height: this.originalSize.height + dy };
<a name="l3385"><span class="linenum">3385</span></a>          },
<a name="l3386"><span class="linenum">3386</span></a>          se: function(event, dx, dy) {
<a name="l3387"><span class="linenum">3387</span></a>              return $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
<a name="l3388"><span class="linenum">3388</span></a>          },
<a name="l3389"><span class="linenum">3389</span></a>          sw: function(event, dx, dy) {
<a name="l3390"><span class="linenum">3390</span></a>              return $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
<a name="l3391"><span class="linenum">3391</span></a>          },
<a name="l3392"><span class="linenum">3392</span></a>          ne: function(event, dx, dy) {
<a name="l3393"><span class="linenum">3393</span></a>              return $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));
<a name="l3394"><span class="linenum">3394</span></a>          },
<a name="l3395"><span class="linenum">3395</span></a>          nw: function(event, dx, dy) {
<a name="l3396"><span class="linenum">3396</span></a>              return $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));
<a name="l3397"><span class="linenum">3397</span></a>          }
<a name="l3398"><span class="linenum">3398</span></a>      },
<a name="l3399"><span class="linenum">3399</span></a>  
<a name="l3400"><span class="linenum">3400</span></a>      _propagate: function(n, event) {
<a name="l3401"><span class="linenum">3401</span></a>          $.ui.plugin.call(this, n, [event, this.ui()]);
<a name="l3402"><span class="linenum">3402</span></a>          (n !== &quot;resize&quot; &amp;&amp; this._trigger(n, event, this.ui()));
<a name="l3403"><span class="linenum">3403</span></a>      },
<a name="l3404"><span class="linenum">3404</span></a>  
<a name="l3405"><span class="linenum">3405</span></a>      plugins: {},
<a name="l3406"><span class="linenum">3406</span></a>  
<a name="l3407"><span class="linenum">3407</span></a>      ui: function() {
<a name="l3408"><span class="linenum">3408</span></a>          return {
<a name="l3409"><span class="linenum">3409</span></a>              originalElement: this.originalElement,
<a name="l3410"><span class="linenum">3410</span></a>              element: this.element,
<a name="l3411"><span class="linenum">3411</span></a>              helper: this.helper,
<a name="l3412"><span class="linenum">3412</span></a>              position: this.position,
<a name="l3413"><span class="linenum">3413</span></a>              size: this.size,
<a name="l3414"><span class="linenum">3414</span></a>              originalSize: this.originalSize,
<a name="l3415"><span class="linenum">3415</span></a>              originalPosition: this.originalPosition
<a name="l3416"><span class="linenum">3416</span></a>          };
<a name="l3417"><span class="linenum">3417</span></a>      }
<a name="l3418"><span class="linenum">3418</span></a>  
<a name="l3419"><span class="linenum">3419</span></a>  });
<a name="l3420"><span class="linenum">3420</span></a>  
<a name="l3421"><span class="linenum">3421</span></a>  <span class="comment">/*</span>
<a name="l3422"><span class="linenum">3422</span></a>  <span class="comment"> * Resizable Extensions</span>
<a name="l3423"><span class="linenum">3423</span></a>  <span class="comment"> */</span>
<a name="l3424"><span class="linenum">3424</span></a>  
<a name="l3425"><span class="linenum">3425</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;resizable&quot;, &quot;animate&quot;, {
<a name="l3426"><span class="linenum">3426</span></a>  
<a name="l3427"><span class="linenum">3427</span></a>      stop: function( event ) {
<a name="l3428"><span class="linenum">3428</span></a>          var that = $(this).data(&quot;ui-resizable&quot;),
<a name="l3429"><span class="linenum">3429</span></a>              o = that.options,
<a name="l3430"><span class="linenum">3430</span></a>              pr = that._proportionallyResizeElements,
<a name="l3431"><span class="linenum">3431</span></a>              ista = pr.length &amp;&amp; (/textarea/i).test(pr[0].nodeName),
<a name="l3432"><span class="linenum">3432</span></a>              soffseth = ista &amp;&amp; $.ui.hasScroll(pr[0], &quot;left&quot;) <span class="comment">/* TODO - jump height */</span> ? 0 : that.sizeDiff.height,
<a name="l3433"><span class="linenum">3433</span></a>              soffsetw = ista ? 0 : that.sizeDiff.width,
<a name="l3434"><span class="linenum">3434</span></a>              style = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },
<a name="l3435"><span class="linenum">3435</span></a>              left = (parseInt(that.element.css(&quot;left&quot;), 10) + (that.position.left - that.originalPosition.left)) || null,
<a name="l3436"><span class="linenum">3436</span></a>              top = (parseInt(that.element.css(&quot;top&quot;), 10) + (that.position.top - that.originalPosition.top)) || null;
<a name="l3437"><span class="linenum">3437</span></a>  
<a name="l3438"><span class="linenum">3438</span></a>          that.element.<a class="function" onClick="logFunction('animate')" href="../../../_functions/animate.html" onMouseOver="funcPopup(event,'animate')">animate</a>(
<a name="l3439"><span class="linenum">3439</span></a>              $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(style, top &amp;&amp; left ? { top: top, left: left } : {}), {
<a name="l3440"><span class="linenum">3440</span></a>                  duration: o.animateDuration,
<a name="l3441"><span class="linenum">3441</span></a>                  easing: o.animateEasing,
<a name="l3442"><span class="linenum">3442</span></a>                  step: function() {
<a name="l3443"><span class="linenum">3443</span></a>  
<a name="l3444"><span class="linenum">3444</span></a>                      var data = {
<a name="l3445"><span class="linenum">3445</span></a>                          width: parseInt(that.element.css(&quot;width&quot;), 10),
<a name="l3446"><span class="linenum">3446</span></a>                          height: parseInt(that.element.css(&quot;height&quot;), 10),
<a name="l3447"><span class="linenum">3447</span></a>                          top: parseInt(that.element.css(&quot;top&quot;), 10),
<a name="l3448"><span class="linenum">3448</span></a>                          left: parseInt(that.element.css(&quot;left&quot;), 10)
<a name="l3449"><span class="linenum">3449</span></a>                      };
<a name="l3450"><span class="linenum">3450</span></a>  
<a name="l3451"><span class="linenum">3451</span></a>                      if (pr &amp;&amp; pr.length) {
<a name="l3452"><span class="linenum">3452</span></a>                          $(pr[0]).css({ width: data.width, height: data.height });
<a name="l3453"><span class="linenum">3453</span></a>                      }
<a name="l3454"><span class="linenum">3454</span></a>  
<a name="l3455"><span class="linenum">3455</span></a>  <span class="comment">                    // propagating resize, and updating values for each animation step</span>
<a name="l3456"><span class="linenum">3456</span></a>                      that._updateCache(data);
<a name="l3457"><span class="linenum">3457</span></a>                      that._propagate(&quot;resize&quot;, event);
<a name="l3458"><span class="linenum">3458</span></a>  
<a name="l3459"><span class="linenum">3459</span></a>                  }
<a name="l3460"><span class="linenum">3460</span></a>              }
<a name="l3461"><span class="linenum">3461</span></a>          );
<a name="l3462"><span class="linenum">3462</span></a>      }
<a name="l3463"><span class="linenum">3463</span></a>  
<a name="l3464"><span class="linenum">3464</span></a>  });
<a name="l3465"><span class="linenum">3465</span></a>  
<a name="l3466"><span class="linenum">3466</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;resizable&quot;, &quot;containment&quot;, {
<a name="l3467"><span class="linenum">3467</span></a>  
<a name="l3468"><span class="linenum">3468</span></a>      start: function() {
<a name="l3469"><span class="linenum">3469</span></a>          var element, p, co, ch, cw, width, height,
<a name="l3470"><span class="linenum">3470</span></a>              that = $(this).data(&quot;ui-resizable&quot;),
<a name="l3471"><span class="linenum">3471</span></a>              o = that.options,
<a name="l3472"><span class="linenum">3472</span></a>              el = that.element,
<a name="l3473"><span class="linenum">3473</span></a>              oc = o.containment,
<a name="l3474"><span class="linenum">3474</span></a>              ce = (oc instanceof $) ? oc.<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(0) : (/parent/.test(oc)) ? el.parent().<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(0) : oc;
<a name="l3475"><span class="linenum">3475</span></a>  
<a name="l3476"><span class="linenum">3476</span></a>          if (!ce) {
<a name="l3477"><span class="linenum">3477</span></a>              return;
<a name="l3478"><span class="linenum">3478</span></a>          }
<a name="l3479"><span class="linenum">3479</span></a>  
<a name="l3480"><span class="linenum">3480</span></a>          that.containerElement = $(ce);
<a name="l3481"><span class="linenum">3481</span></a>  
<a name="l3482"><span class="linenum">3482</span></a>          if (/document/.test(oc) || oc === document) {
<a name="l3483"><span class="linenum">3483</span></a>              that.containerOffset = { left: 0, top: 0 };
<a name="l3484"><span class="linenum">3484</span></a>              that.containerPosition = { left: 0, top: 0 };
<a name="l3485"><span class="linenum">3485</span></a>  
<a name="l3486"><span class="linenum">3486</span></a>              that.parentData = {
<a name="l3487"><span class="linenum">3487</span></a>                  element: $(document), left: 0, top: 0,
<a name="l3488"><span class="linenum">3488</span></a>                  width: $(document).width(), height: $(document).height() || document.body.parentNode.scrollHeight
<a name="l3489"><span class="linenum">3489</span></a>              };
<a name="l3490"><span class="linenum">3490</span></a>          }
<a name="l3491"><span class="linenum">3491</span></a>  
<a name="l3492"><span class="linenum">3492</span></a>  <span class="comment">        // i'm a node, so compute top, left, right, bottom</span>
<a name="l3493"><span class="linenum">3493</span></a>          else {
<a name="l3494"><span class="linenum">3494</span></a>              element = $(ce);
<a name="l3495"><span class="linenum">3495</span></a>              p = [];
<a name="l3496"><span class="linenum">3496</span></a>              $([ &quot;Top&quot;, &quot;Right&quot;, &quot;Left&quot;, &quot;Bottom&quot; ]).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function(i, name) { p[i] = <a class="function" onClick="logFunction('num')" href="../../../_functions/num.html" onMouseOver="funcPopup(event,'num')">num</a>(element.css(&quot;padding&quot; + name)); });
<a name="l3497"><span class="linenum">3497</span></a>  
<a name="l3498"><span class="linenum">3498</span></a>              that.containerOffset = element.offset();
<a name="l3499"><span class="linenum">3499</span></a>              that.containerPosition = element.<a class="function" onClick="logFunction('position')" href="../../../_functions/position.html" onMouseOver="funcPopup(event,'position')">position</a>();
<a name="l3500"><span class="linenum">3500</span></a>              that.containerSize = { height: (element.innerHeight() - p[3]), width: (element.innerWidth() - p[1]) };
<a name="l3501"><span class="linenum">3501</span></a>  
<a name="l3502"><span class="linenum">3502</span></a>              co = that.containerOffset;
<a name="l3503"><span class="linenum">3503</span></a>              ch = that.containerSize.height;
<a name="l3504"><span class="linenum">3504</span></a>              cw = that.containerSize.width;
<a name="l3505"><span class="linenum">3505</span></a>              width = ($.ui.hasScroll(ce, &quot;left&quot;) ? ce.scrollWidth : cw );
<a name="l3506"><span class="linenum">3506</span></a>              height = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);
<a name="l3507"><span class="linenum">3507</span></a>  
<a name="l3508"><span class="linenum">3508</span></a>              that.parentData = {
<a name="l3509"><span class="linenum">3509</span></a>                  element: ce, left: co.left, top: co.top, width: width, height: height
<a name="l3510"><span class="linenum">3510</span></a>              };
<a name="l3511"><span class="linenum">3511</span></a>          }
<a name="l3512"><span class="linenum">3512</span></a>      },
<a name="l3513"><span class="linenum">3513</span></a>  
<a name="l3514"><span class="linenum">3514</span></a>      resize: function( event ) {
<a name="l3515"><span class="linenum">3515</span></a>          var woset, hoset, isParent, isOffsetRelative,
<a name="l3516"><span class="linenum">3516</span></a>              that = $(this).data(&quot;ui-resizable&quot;),
<a name="l3517"><span class="linenum">3517</span></a>              o = that.options,
<a name="l3518"><span class="linenum">3518</span></a>              co = that.containerOffset, cp = that.position,
<a name="l3519"><span class="linenum">3519</span></a>              pRatio = that._aspectRatio || event.shiftKey,
<a name="l3520"><span class="linenum">3520</span></a>              cop = { top:0, left:0 }, ce = that.containerElement;
<a name="l3521"><span class="linenum">3521</span></a>  
<a name="l3522"><span class="linenum">3522</span></a>          if (ce[0] !== document &amp;&amp; (/static/).test(ce.css(&quot;position&quot;))) {
<a name="l3523"><span class="linenum">3523</span></a>              cop = co;
<a name="l3524"><span class="linenum">3524</span></a>          }
<a name="l3525"><span class="linenum">3525</span></a>  
<a name="l3526"><span class="linenum">3526</span></a>          if (cp.left &lt; (that._helper ? co.left : 0)) {
<a name="l3527"><span class="linenum">3527</span></a>              that.size.width = that.size.width + (that._helper ? (that.position.left - co.left) : (that.position.left - cop.left));
<a name="l3528"><span class="linenum">3528</span></a>              if (pRatio) {
<a name="l3529"><span class="linenum">3529</span></a>                  that.size.height = that.size.width / that.aspectRatio;
<a name="l3530"><span class="linenum">3530</span></a>              }
<a name="l3531"><span class="linenum">3531</span></a>              that.position.left = o.helper ? co.left : 0;
<a name="l3532"><span class="linenum">3532</span></a>          }
<a name="l3533"><span class="linenum">3533</span></a>  
<a name="l3534"><span class="linenum">3534</span></a>          if (cp.top &lt; (that._helper ? co.top : 0)) {
<a name="l3535"><span class="linenum">3535</span></a>              that.size.height = that.size.height + (that._helper ? (that.position.top - co.top) : that.position.top);
<a name="l3536"><span class="linenum">3536</span></a>              if (pRatio) {
<a name="l3537"><span class="linenum">3537</span></a>                  that.size.width = that.size.height * that.aspectRatio;
<a name="l3538"><span class="linenum">3538</span></a>              }
<a name="l3539"><span class="linenum">3539</span></a>              that.position.top = that._helper ? co.top : 0;
<a name="l3540"><span class="linenum">3540</span></a>          }
<a name="l3541"><span class="linenum">3541</span></a>  
<a name="l3542"><span class="linenum">3542</span></a>          that.offset.left = that.parentData.left+that.position.left;
<a name="l3543"><span class="linenum">3543</span></a>          that.offset.top = that.parentData.top+that.position.top;
<a name="l3544"><span class="linenum">3544</span></a>  
<a name="l3545"><span class="linenum">3545</span></a>          woset = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( (that._helper ? that.offset.left - cop.left : (that.offset.left - cop.left)) + that.sizeDiff.width );
<a name="l3546"><span class="linenum">3546</span></a>          hoset = Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( (that._helper ? that.offset.top - cop.top : (that.offset.top - co.top)) + that.sizeDiff.height );
<a name="l3547"><span class="linenum">3547</span></a>  
<a name="l3548"><span class="linenum">3548</span></a>          isParent = that.containerElement.<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(0) === that.element.parent().<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(0);
<a name="l3549"><span class="linenum">3549</span></a>          isOffsetRelative = /relative|absolute/.test(that.containerElement.css(&quot;position&quot;));
<a name="l3550"><span class="linenum">3550</span></a>  
<a name="l3551"><span class="linenum">3551</span></a>          if ( isParent &amp;&amp; isOffsetRelative ) {
<a name="l3552"><span class="linenum">3552</span></a>              woset -= Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>( that.parentData.left );
<a name="l3553"><span class="linenum">3553</span></a>          }
<a name="l3554"><span class="linenum">3554</span></a>  
<a name="l3555"><span class="linenum">3555</span></a>          if (woset + that.size.width &gt;= that.parentData.width) {
<a name="l3556"><span class="linenum">3556</span></a>              that.size.width = that.parentData.width - woset;
<a name="l3557"><span class="linenum">3557</span></a>              if (pRatio) {
<a name="l3558"><span class="linenum">3558</span></a>                  that.size.height = that.size.width / that.aspectRatio;
<a name="l3559"><span class="linenum">3559</span></a>              }
<a name="l3560"><span class="linenum">3560</span></a>          }
<a name="l3561"><span class="linenum">3561</span></a>  
<a name="l3562"><span class="linenum">3562</span></a>          if (hoset + that.size.height &gt;= that.parentData.height) {
<a name="l3563"><span class="linenum">3563</span></a>              that.size.height = that.parentData.height - hoset;
<a name="l3564"><span class="linenum">3564</span></a>              if (pRatio) {
<a name="l3565"><span class="linenum">3565</span></a>                  that.size.width = that.size.height * that.aspectRatio;
<a name="l3566"><span class="linenum">3566</span></a>              }
<a name="l3567"><span class="linenum">3567</span></a>          }
<a name="l3568"><span class="linenum">3568</span></a>      },
<a name="l3569"><span class="linenum">3569</span></a>  
<a name="l3570"><span class="linenum">3570</span></a>      stop: function(){
<a name="l3571"><span class="linenum">3571</span></a>          var that = $(this).data(&quot;ui-resizable&quot;),
<a name="l3572"><span class="linenum">3572</span></a>              o = that.options,
<a name="l3573"><span class="linenum">3573</span></a>              co = that.containerOffset,
<a name="l3574"><span class="linenum">3574</span></a>              cop = that.containerPosition,
<a name="l3575"><span class="linenum">3575</span></a>              ce = that.containerElement,
<a name="l3576"><span class="linenum">3576</span></a>              helper = $(that.helper),
<a name="l3577"><span class="linenum">3577</span></a>              ho = helper.offset(),
<a name="l3578"><span class="linenum">3578</span></a>              w = helper.outerWidth() - that.sizeDiff.width,
<a name="l3579"><span class="linenum">3579</span></a>              h = helper.outerHeight() - that.sizeDiff.height;
<a name="l3580"><span class="linenum">3580</span></a>  
<a name="l3581"><span class="linenum">3581</span></a>          if (that._helper &amp;&amp; !o.animate &amp;&amp; (/relative/).test(ce.css(&quot;position&quot;))) {
<a name="l3582"><span class="linenum">3582</span></a>              $(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });
<a name="l3583"><span class="linenum">3583</span></a>          }
<a name="l3584"><span class="linenum">3584</span></a>  
<a name="l3585"><span class="linenum">3585</span></a>          if (that._helper &amp;&amp; !o.animate &amp;&amp; (/static/).test(ce.css(&quot;position&quot;))) {
<a name="l3586"><span class="linenum">3586</span></a>              $(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });
<a name="l3587"><span class="linenum">3587</span></a>          }
<a name="l3588"><span class="linenum">3588</span></a>  
<a name="l3589"><span class="linenum">3589</span></a>      }
<a name="l3590"><span class="linenum">3590</span></a>  });
<a name="l3591"><span class="linenum">3591</span></a>  
<a name="l3592"><span class="linenum">3592</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;resizable&quot;, &quot;alsoResize&quot;, {
<a name="l3593"><span class="linenum">3593</span></a>  
<a name="l3594"><span class="linenum">3594</span></a>      start: function () {
<a name="l3595"><span class="linenum">3595</span></a>          var that = $(this).data(&quot;ui-resizable&quot;),
<a name="l3596"><span class="linenum">3596</span></a>              o = that.options,
<a name="l3597"><span class="linenum">3597</span></a>              _store = function (exp) {
<a name="l3598"><span class="linenum">3598</span></a>                  $(exp).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l3599"><span class="linenum">3599</span></a>                      var el = $(this);
<a name="l3600"><span class="linenum">3600</span></a>                      el.data(&quot;ui-resizable-alsoresize&quot;, {
<a name="l3601"><span class="linenum">3601</span></a>                          width: parseInt(el.width(), 10), height: parseInt(el.height(), 10),
<a name="l3602"><span class="linenum">3602</span></a>                          left: parseInt(el.css(&quot;left&quot;), 10), top: parseInt(el.css(&quot;top&quot;), 10)
<a name="l3603"><span class="linenum">3603</span></a>                      });
<a name="l3604"><span class="linenum">3604</span></a>                  });
<a name="l3605"><span class="linenum">3605</span></a>              };
<a name="l3606"><span class="linenum">3606</span></a>  
<a name="l3607"><span class="linenum">3607</span></a>          if (typeof(o.alsoResize) === &quot;object&quot; &amp;&amp; !o.alsoResize.parentNode) {
<a name="l3608"><span class="linenum">3608</span></a>              if (o.alsoResize.length) { o.alsoResize = o.alsoResize[0]; _store(o.alsoResize); }
<a name="l3609"><span class="linenum">3609</span></a>              else { $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(o.alsoResize, function (exp) { _store(exp); }); }
<a name="l3610"><span class="linenum">3610</span></a>          }else{
<a name="l3611"><span class="linenum">3611</span></a>              _store(o.alsoResize);
<a name="l3612"><span class="linenum">3612</span></a>          }
<a name="l3613"><span class="linenum">3613</span></a>      },
<a name="l3614"><span class="linenum">3614</span></a>  
<a name="l3615"><span class="linenum">3615</span></a>      resize: function (event, ui) {
<a name="l3616"><span class="linenum">3616</span></a>          var that = $(this).data(&quot;ui-resizable&quot;),
<a name="l3617"><span class="linenum">3617</span></a>              o = that.options,
<a name="l3618"><span class="linenum">3618</span></a>              os = that.originalSize,
<a name="l3619"><span class="linenum">3619</span></a>              op = that.originalPosition,
<a name="l3620"><span class="linenum">3620</span></a>              delta = {
<a name="l3621"><span class="linenum">3621</span></a>                  height: (that.size.height - os.height) || 0, width: (that.size.width - os.width) || 0,
<a name="l3622"><span class="linenum">3622</span></a>                  top: (that.position.top - op.top) || 0, left: (that.position.left - op.left) || 0
<a name="l3623"><span class="linenum">3623</span></a>              },
<a name="l3624"><span class="linenum">3624</span></a>  
<a name="l3625"><span class="linenum">3625</span></a>              _alsoResize = function (exp, c) {
<a name="l3626"><span class="linenum">3626</span></a>                  $(exp).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l3627"><span class="linenum">3627</span></a>                      var el = $(this), start = $(this).data(&quot;ui-resizable-alsoresize&quot;), style = {},
<a name="l3628"><span class="linenum">3628</span></a>                          css = c &amp;&amp; c.length ? c : el.parents(ui.originalElement[0]).length ? [&quot;width&quot;, &quot;height&quot;] : [&quot;width&quot;, &quot;height&quot;, &quot;top&quot;, &quot;left&quot;];
<a name="l3629"><span class="linenum">3629</span></a>  
<a name="l3630"><span class="linenum">3630</span></a>                      $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(css, function (i, prop) {
<a name="l3631"><span class="linenum">3631</span></a>                          var sum = (start[prop]||0) + (delta[prop]||0);
<a name="l3632"><span class="linenum">3632</span></a>                          if (sum &amp;&amp; sum &gt;= 0) {
<a name="l3633"><span class="linenum">3633</span></a>                              style[prop] = sum || null;
<a name="l3634"><span class="linenum">3634</span></a>                          }
<a name="l3635"><span class="linenum">3635</span></a>                      });
<a name="l3636"><span class="linenum">3636</span></a>  
<a name="l3637"><span class="linenum">3637</span></a>                      el.css(style);
<a name="l3638"><span class="linenum">3638</span></a>                  });
<a name="l3639"><span class="linenum">3639</span></a>              };
<a name="l3640"><span class="linenum">3640</span></a>  
<a name="l3641"><span class="linenum">3641</span></a>          if (typeof(o.alsoResize) === &quot;object&quot; &amp;&amp; !o.alsoResize.nodeType) {
<a name="l3642"><span class="linenum">3642</span></a>              $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(o.alsoResize, function (exp, c) { _alsoResize(exp, c); });
<a name="l3643"><span class="linenum">3643</span></a>          }else{
<a name="l3644"><span class="linenum">3644</span></a>              _alsoResize(o.alsoResize);
<a name="l3645"><span class="linenum">3645</span></a>          }
<a name="l3646"><span class="linenum">3646</span></a>      },
<a name="l3647"><span class="linenum">3647</span></a>  
<a name="l3648"><span class="linenum">3648</span></a>      stop: function () {
<a name="l3649"><span class="linenum">3649</span></a>          $(this).removeData(&quot;resizable-alsoresize&quot;);
<a name="l3650"><span class="linenum">3650</span></a>      }
<a name="l3651"><span class="linenum">3651</span></a>  });
<a name="l3652"><span class="linenum">3652</span></a>  
<a name="l3653"><span class="linenum">3653</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;resizable&quot;, &quot;ghost&quot;, {
<a name="l3654"><span class="linenum">3654</span></a>  
<a name="l3655"><span class="linenum">3655</span></a>      start: function() {
<a name="l3656"><span class="linenum">3656</span></a>  
<a name="l3657"><span class="linenum">3657</span></a>          var that = $(this).data(&quot;ui-resizable&quot;), o = that.options, cs = that.size;
<a name="l3658"><span class="linenum">3658</span></a>  
<a name="l3659"><span class="linenum">3659</span></a>          that.ghost = that.originalElement.clone();
<a name="l3660"><span class="linenum">3660</span></a>          that.ghost
<a name="l3661"><span class="linenum">3661</span></a>              .css({ opacity: 0.25, display: &quot;block&quot;, position: &quot;relative&quot;, height: cs.height, width: cs.width, margin: 0, left: 0, top: 0 })
<a name="l3662"><span class="linenum">3662</span></a>              .addClass(&quot;ui-resizable-ghost&quot;)
<a name="l3663"><span class="linenum">3663</span></a>              .addClass(typeof o.ghost === &quot;string&quot; ? o.ghost : &quot;&quot;);
<a name="l3664"><span class="linenum">3664</span></a>  
<a name="l3665"><span class="linenum">3665</span></a>          that.ghost.appendTo(that.helper);
<a name="l3666"><span class="linenum">3666</span></a>  
<a name="l3667"><span class="linenum">3667</span></a>      },
<a name="l3668"><span class="linenum">3668</span></a>  
<a name="l3669"><span class="linenum">3669</span></a>      resize: function(){
<a name="l3670"><span class="linenum">3670</span></a>          var that = $(this).data(&quot;ui-resizable&quot;);
<a name="l3671"><span class="linenum">3671</span></a>          if (that.ghost) {
<a name="l3672"><span class="linenum">3672</span></a>              that.ghost.css({ position: &quot;relative&quot;, height: that.size.height, width: that.size.width });
<a name="l3673"><span class="linenum">3673</span></a>          }
<a name="l3674"><span class="linenum">3674</span></a>      },
<a name="l3675"><span class="linenum">3675</span></a>  
<a name="l3676"><span class="linenum">3676</span></a>      stop: function() {
<a name="l3677"><span class="linenum">3677</span></a>          var that = $(this).data(&quot;ui-resizable&quot;);
<a name="l3678"><span class="linenum">3678</span></a>          if (that.ghost &amp;&amp; that.helper) {
<a name="l3679"><span class="linenum">3679</span></a>              that.helper.<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(0).removeChild(that.ghost.<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(0));
<a name="l3680"><span class="linenum">3680</span></a>          }
<a name="l3681"><span class="linenum">3681</span></a>      }
<a name="l3682"><span class="linenum">3682</span></a>  
<a name="l3683"><span class="linenum">3683</span></a>  });
<a name="l3684"><span class="linenum">3684</span></a>  
<a name="l3685"><span class="linenum">3685</span></a>  $.ui.plugin.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(&quot;resizable&quot;, &quot;grid&quot;, {
<a name="l3686"><span class="linenum">3686</span></a>  
<a name="l3687"><span class="linenum">3687</span></a>      resize: function() {
<a name="l3688"><span class="linenum">3688</span></a>          var that = $(this).data(&quot;ui-resizable&quot;),
<a name="l3689"><span class="linenum">3689</span></a>              o = that.options,
<a name="l3690"><span class="linenum">3690</span></a>              cs = that.size,
<a name="l3691"><span class="linenum">3691</span></a>              os = that.originalSize,
<a name="l3692"><span class="linenum">3692</span></a>              op = that.originalPosition,
<a name="l3693"><span class="linenum">3693</span></a>              a = that.axis,
<a name="l3694"><span class="linenum">3694</span></a>              grid = typeof o.grid === &quot;number&quot; ? [o.grid, o.grid] : o.grid,
<a name="l3695"><span class="linenum">3695</span></a>              gridX = (grid[0]||1),
<a name="l3696"><span class="linenum">3696</span></a>              gridY = (grid[1]||1),
<a name="l3697"><span class="linenum">3697</span></a>              ox = Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>((cs.width - os.width) / gridX) * gridX,
<a name="l3698"><span class="linenum">3698</span></a>              oy = Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>((cs.height - os.height) / gridY) * gridY,
<a name="l3699"><span class="linenum">3699</span></a>              newWidth = os.width + ox,
<a name="l3700"><span class="linenum">3700</span></a>              newHeight = os.height + oy,
<a name="l3701"><span class="linenum">3701</span></a>              isMaxWidth = o.maxWidth &amp;&amp; (o.maxWidth &lt; newWidth),
<a name="l3702"><span class="linenum">3702</span></a>              isMaxHeight = o.maxHeight &amp;&amp; (o.maxHeight &lt; newHeight),
<a name="l3703"><span class="linenum">3703</span></a>              isMinWidth = o.minWidth &amp;&amp; (o.minWidth &gt; newWidth),
<a name="l3704"><span class="linenum">3704</span></a>              isMinHeight = o.minHeight &amp;&amp; (o.minHeight &gt; newHeight);
<a name="l3705"><span class="linenum">3705</span></a>  
<a name="l3706"><span class="linenum">3706</span></a>          o.grid = grid;
<a name="l3707"><span class="linenum">3707</span></a>  
<a name="l3708"><span class="linenum">3708</span></a>          if (isMinWidth) {
<a name="l3709"><span class="linenum">3709</span></a>              newWidth = newWidth + gridX;
<a name="l3710"><span class="linenum">3710</span></a>          }
<a name="l3711"><span class="linenum">3711</span></a>          if (isMinHeight) {
<a name="l3712"><span class="linenum">3712</span></a>              newHeight = newHeight + gridY;
<a name="l3713"><span class="linenum">3713</span></a>          }
<a name="l3714"><span class="linenum">3714</span></a>          if (isMaxWidth) {
<a name="l3715"><span class="linenum">3715</span></a>              newWidth = newWidth - gridX;
<a name="l3716"><span class="linenum">3716</span></a>          }
<a name="l3717"><span class="linenum">3717</span></a>          if (isMaxHeight) {
<a name="l3718"><span class="linenum">3718</span></a>              newHeight = newHeight - gridY;
<a name="l3719"><span class="linenum">3719</span></a>          }
<a name="l3720"><span class="linenum">3720</span></a>  
<a name="l3721"><span class="linenum">3721</span></a>          if (/^(se|s|e)$/.test(a)) {
<a name="l3722"><span class="linenum">3722</span></a>              that.size.width = newWidth;
<a name="l3723"><span class="linenum">3723</span></a>              that.size.height = newHeight;
<a name="l3724"><span class="linenum">3724</span></a>          } else if (/^(ne)$/.test(a)) {
<a name="l3725"><span class="linenum">3725</span></a>              that.size.width = newWidth;
<a name="l3726"><span class="linenum">3726</span></a>              that.size.height = newHeight;
<a name="l3727"><span class="linenum">3727</span></a>              that.position.top = op.top - oy;
<a name="l3728"><span class="linenum">3728</span></a>          } else if (/^(sw)$/.test(a)) {
<a name="l3729"><span class="linenum">3729</span></a>              that.size.width = newWidth;
<a name="l3730"><span class="linenum">3730</span></a>              that.size.height = newHeight;
<a name="l3731"><span class="linenum">3731</span></a>              that.position.left = op.left - ox;
<a name="l3732"><span class="linenum">3732</span></a>          } else {
<a name="l3733"><span class="linenum">3733</span></a>              if ( newHeight - gridY &gt; 0 ) {
<a name="l3734"><span class="linenum">3734</span></a>                  that.size.height = newHeight;
<a name="l3735"><span class="linenum">3735</span></a>                  that.position.top = op.top - oy;
<a name="l3736"><span class="linenum">3736</span></a>              } else {
<a name="l3737"><span class="linenum">3737</span></a>                  that.size.height = gridY;
<a name="l3738"><span class="linenum">3738</span></a>                  that.position.top = op.top + os.height - gridY;
<a name="l3739"><span class="linenum">3739</span></a>              }
<a name="l3740"><span class="linenum">3740</span></a>              if ( newWidth - gridX &gt; 0 ) {
<a name="l3741"><span class="linenum">3741</span></a>                  that.size.width = newWidth;
<a name="l3742"><span class="linenum">3742</span></a>                  that.position.left = op.left - ox;
<a name="l3743"><span class="linenum">3743</span></a>              } else {
<a name="l3744"><span class="linenum">3744</span></a>                  that.size.width = gridX;
<a name="l3745"><span class="linenum">3745</span></a>                  that.position.left = op.left + os.width - gridX;
<a name="l3746"><span class="linenum">3746</span></a>              }
<a name="l3747"><span class="linenum">3747</span></a>          }
<a name="l3748"><span class="linenum">3748</span></a>      }
<a name="l3749"><span class="linenum">3749</span></a>  
<a name="l3750"><span class="linenum">3750</span></a>  });
<a name="l3751"><span class="linenum">3751</span></a>  
<a name="l3752"><span class="linenum">3752</span></a>  })(jQuery);
<a name="l3753"><span class="linenum">3753</span></a>  (function( $, undefined ) {
<a name="l3754"><span class="linenum">3754</span></a>  
<a name="l3755"><span class="linenum">3755</span></a>  $.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>( &quot;ui.autocomplete&quot;, {
<a name="l3756"><span class="linenum">3756</span></a>      version: &quot;1.10.4&quot;,
<a name="l3757"><span class="linenum">3757</span></a>      defaultElement: &quot;&lt;input&gt;&quot;,
<a name="l3758"><span class="linenum">3758</span></a>      options: {
<a name="l3759"><span class="linenum">3759</span></a>          appendTo: null,
<a name="l3760"><span class="linenum">3760</span></a>          autoFocus: false,
<a name="l3761"><span class="linenum">3761</span></a>          delay: 300,
<a name="l3762"><span class="linenum">3762</span></a>          minLength: 1,
<a name="l3763"><span class="linenum">3763</span></a>          position: {
<a name="l3764"><span class="linenum">3764</span></a>              my: &quot;left top&quot;,
<a name="l3765"><span class="linenum">3765</span></a>              at: &quot;left bottom&quot;,
<a name="l3766"><span class="linenum">3766</span></a>              collision: &quot;none&quot;
<a name="l3767"><span class="linenum">3767</span></a>          },
<a name="l3768"><span class="linenum">3768</span></a>          source: null,
<a name="l3769"><span class="linenum">3769</span></a>  
<a name="l3770"><span class="linenum">3770</span></a>  <span class="comment">        // callbacks</span>
<a name="l3771"><span class="linenum">3771</span></a>          change: null,
<a name="l3772"><span class="linenum">3772</span></a>          close: null,
<a name="l3773"><span class="linenum">3773</span></a>          focus: null,
<a name="l3774"><span class="linenum">3774</span></a>          open: null,
<a name="l3775"><span class="linenum">3775</span></a>          response: null,
<a name="l3776"><span class="linenum">3776</span></a>          search: null,
<a name="l3777"><span class="linenum">3777</span></a>          select: null
<a name="l3778"><span class="linenum">3778</span></a>      },
<a name="l3779"><span class="linenum">3779</span></a>  
<a name="l3780"><span class="linenum">3780</span></a>      requestIndex: 0,
<a name="l3781"><span class="linenum">3781</span></a>      pending: 0,
<a name="l3782"><span class="linenum">3782</span></a>  
<a name="l3783"><span class="linenum">3783</span></a>      _create: function() {
<a name="l3784"><span class="linenum">3784</span></a>  <span class="comment">        // Some browsers only repeat keydown events, not keypress events,</span>
<a name="l3785"><span class="linenum">3785</span></a>  <span class="comment">        // so we use the suppressKeyPress flag to determine if we've already</span>
<a name="l3786"><span class="linenum">3786</span></a>  <span class="comment">        // handled the keydown event. #7269</span>
<a name="l3787"><span class="linenum">3787</span></a>  <span class="comment">        // Unfortunately the code for &amp; in keypress is the same as the up arrow,</span>
<a name="l3788"><span class="linenum">3788</span></a>  <span class="comment">        // so we use the suppressKeyPressRepeat flag to avoid handling keypress</span>
<a name="l3789"><span class="linenum">3789</span></a>  <span class="comment">        // events when we know the keydown event was used to modify the</span>
<a name="l3790"><span class="linenum">3790</span></a>  <span class="comment">        // search term. #7799</span>
<a name="l3791"><span class="linenum">3791</span></a>          var suppressKeyPress, suppressKeyPressRepeat, suppressInput,
<a name="l3792"><span class="linenum">3792</span></a>              nodeName = this.element[0].nodeName.toLowerCase(),
<a name="l3793"><span class="linenum">3793</span></a>              isTextarea = nodeName === &quot;textarea&quot;,
<a name="l3794"><span class="linenum">3794</span></a>              isInput = nodeName === &quot;input&quot;;
<a name="l3795"><span class="linenum">3795</span></a>  
<a name="l3796"><span class="linenum">3796</span></a>          this.isMultiLine =
<a name="l3797"><span class="linenum">3797</span></a>  <span class="comment">            // Textareas are always multi-line</span>
<a name="l3798"><span class="linenum">3798</span></a>              isTextarea ? true :
<a name="l3799"><span class="linenum">3799</span></a>  <span class="comment">            // Inputs are always single-line, even if inside a contentEditable element</span>
<a name="l3800"><span class="linenum">3800</span></a>  <span class="comment">            // IE also treats inputs as contentEditable</span>
<a name="l3801"><span class="linenum">3801</span></a>              isInput ? false :
<a name="l3802"><span class="linenum">3802</span></a>  <span class="comment">            // All other element types are determined by whether or not they're contentEditable</span>
<a name="l3803"><span class="linenum">3803</span></a>              this.element.prop( &quot;isContentEditable&quot; );
<a name="l3804"><span class="linenum">3804</span></a>  
<a name="l3805"><span class="linenum">3805</span></a>          this.valueMethod = this.element[ isTextarea || isInput ? &quot;val&quot; : &quot;text&quot; ];
<a name="l3806"><span class="linenum">3806</span></a>          this.isNewMenu = true;
<a name="l3807"><span class="linenum">3807</span></a>  
<a name="l3808"><span class="linenum">3808</span></a>          this.element
<a name="l3809"><span class="linenum">3809</span></a>              .addClass( &quot;ui-autocomplete-input&quot; )
<a name="l3810"><span class="linenum">3810</span></a>              .attr( &quot;autocomplete&quot;, &quot;off&quot; );
<a name="l3811"><span class="linenum">3811</span></a>  
<a name="l3812"><span class="linenum">3812</span></a>          this._on( this.element, {
<a name="l3813"><span class="linenum">3813</span></a>              keydown: function( event ) {
<a name="l3814"><span class="linenum">3814</span></a>                  if ( this.element.prop( &quot;readOnly&quot; ) ) {
<a name="l3815"><span class="linenum">3815</span></a>                      suppressKeyPress = true;
<a name="l3816"><span class="linenum">3816</span></a>                      suppressInput = true;
<a name="l3817"><span class="linenum">3817</span></a>                      suppressKeyPressRepeat = true;
<a name="l3818"><span class="linenum">3818</span></a>                      return;
<a name="l3819"><span class="linenum">3819</span></a>                  }
<a name="l3820"><span class="linenum">3820</span></a>  
<a name="l3821"><span class="linenum">3821</span></a>                  suppressKeyPress = false;
<a name="l3822"><span class="linenum">3822</span></a>                  suppressInput = false;
<a name="l3823"><span class="linenum">3823</span></a>                  suppressKeyPressRepeat = false;
<a name="l3824"><span class="linenum">3824</span></a>                  var keyCode = $.ui.keyCode;
<a name="l3825"><span class="linenum">3825</span></a>                  switch( event.keyCode ) {
<a name="l3826"><span class="linenum">3826</span></a>                  case keyCode.PAGE_UP:
<a name="l3827"><span class="linenum">3827</span></a>                      suppressKeyPress = true;
<a name="l3828"><span class="linenum">3828</span></a>                      this._move( &quot;previousPage&quot;, event );
<a name="l3829"><span class="linenum">3829</span></a>                      break;
<a name="l3830"><span class="linenum">3830</span></a>                  case keyCode.PAGE_DOWN:
<a name="l3831"><span class="linenum">3831</span></a>                      suppressKeyPress = true;
<a name="l3832"><span class="linenum">3832</span></a>                      this._move( &quot;nextPage&quot;, event );
<a name="l3833"><span class="linenum">3833</span></a>                      break;
<a name="l3834"><span class="linenum">3834</span></a>                  case keyCode.UP:
<a name="l3835"><span class="linenum">3835</span></a>                      suppressKeyPress = true;
<a name="l3836"><span class="linenum">3836</span></a>                      this._keyEvent( &quot;previous&quot;, event );
<a name="l3837"><span class="linenum">3837</span></a>                      break;
<a name="l3838"><span class="linenum">3838</span></a>                  case keyCode.DOWN:
<a name="l3839"><span class="linenum">3839</span></a>                      suppressKeyPress = true;
<a name="l3840"><span class="linenum">3840</span></a>                      this._keyEvent( &quot;next&quot;, event );
<a name="l3841"><span class="linenum">3841</span></a>                      break;
<a name="l3842"><span class="linenum">3842</span></a>                  case keyCode.ENTER:
<a name="l3843"><span class="linenum">3843</span></a>                  case keyCode.NUMPAD_ENTER:
<a name="l3844"><span class="linenum">3844</span></a>  <span class="comment">                    // when menu is open and has focus</span>
<a name="l3845"><span class="linenum">3845</span></a>                      if ( this.menu.active ) {
<a name="l3846"><span class="linenum">3846</span></a>  <span class="comment">                        // #6055 - Opera still allows the keypress to occur</span>
<a name="l3847"><span class="linenum">3847</span></a>  <span class="comment">                        // which causes forms to submit</span>
<a name="l3848"><span class="linenum">3848</span></a>                          suppressKeyPress = true;
<a name="l3849"><span class="linenum">3849</span></a>                          event.preventDefault();
<a name="l3850"><span class="linenum">3850</span></a>                          this.menu.<a class="function" onClick="logFunction('select')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>( event );
<a name="l3851"><span class="linenum">3851</span></a>                      }
<a name="l3852"><span class="linenum">3852</span></a>                      break;
<a name="l3853"><span class="linenum">3853</span></a>                  case keyCode.TAB:
<a name="l3854"><span class="linenum">3854</span></a>                      if ( this.menu.active ) {
<a name="l3855"><span class="linenum">3855</span></a>                          this.menu.<a class="function" onClick="logFunction('select')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>( event );
<a name="l3856"><span class="linenum">3856</span></a>                      }
<a name="l3857"><span class="linenum">3857</span></a>                      break;
<a name="l3858"><span class="linenum">3858</span></a>                  case keyCode.ESCAPE:
<a name="l3859"><span class="linenum">3859</span></a>                      if ( this.menu.element.is( &quot;:visible&quot; ) ) {
<a name="l3860"><span class="linenum">3860</span></a>                          this._value( this.term );
<a name="l3861"><span class="linenum">3861</span></a>                          this.<a class="function" onClick="logFunction('close')" href="../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>( event );
<a name="l3862"><span class="linenum">3862</span></a>  <span class="comment">                        // Different browsers have different default behavior for escape</span>
<a name="l3863"><span class="linenum">3863</span></a>  <span class="comment">                        // Single press can mean undo or clear</span>
<a name="l3864"><span class="linenum">3864</span></a>  <span class="comment">                        // Double press in IE means clear the whole form</span>
<a name="l3865"><span class="linenum">3865</span></a>                          event.preventDefault();
<a name="l3866"><span class="linenum">3866</span></a>                      }
<a name="l3867"><span class="linenum">3867</span></a>                      break;
<a name="l3868"><span class="linenum">3868</span></a>                  default:
<a name="l3869"><span class="linenum">3869</span></a>                      suppressKeyPressRepeat = true;
<a name="l3870"><span class="linenum">3870</span></a>  <span class="comment">                    // search timeout should be triggered before the input value is changed</span>
<a name="l3871"><span class="linenum">3871</span></a>                      this._searchTimeout( event );
<a name="l3872"><span class="linenum">3872</span></a>                      break;
<a name="l3873"><span class="linenum">3873</span></a>                  }
<a name="l3874"><span class="linenum">3874</span></a>              },
<a name="l3875"><span class="linenum">3875</span></a>              keypress: function( event ) {
<a name="l3876"><span class="linenum">3876</span></a>                  if ( suppressKeyPress ) {
<a name="l3877"><span class="linenum">3877</span></a>                      suppressKeyPress = false;
<a name="l3878"><span class="linenum">3878</span></a>                      if ( !this.isMultiLine || this.menu.element.is( &quot;:visible&quot; ) ) {
<a name="l3879"><span class="linenum">3879</span></a>                          event.preventDefault();
<a name="l3880"><span class="linenum">3880</span></a>                      }
<a name="l3881"><span class="linenum">3881</span></a>                      return;
<a name="l3882"><span class="linenum">3882</span></a>                  }
<a name="l3883"><span class="linenum">3883</span></a>                  if ( suppressKeyPressRepeat ) {
<a name="l3884"><span class="linenum">3884</span></a>                      return;
<a name="l3885"><span class="linenum">3885</span></a>                  }
<a name="l3886"><span class="linenum">3886</span></a>  
<a name="l3887"><span class="linenum">3887</span></a>  <span class="comment">                // replicate some key handlers to allow them to repeat in Firefox and Opera</span>
<a name="l3888"><span class="linenum">3888</span></a>                  var keyCode = $.ui.keyCode;
<a name="l3889"><span class="linenum">3889</span></a>                  switch( event.keyCode ) {
<a name="l3890"><span class="linenum">3890</span></a>                  case keyCode.PAGE_UP:
<a name="l3891"><span class="linenum">3891</span></a>                      this._move( &quot;previousPage&quot;, event );
<a name="l3892"><span class="linenum">3892</span></a>                      break;
<a name="l3893"><span class="linenum">3893</span></a>                  case keyCode.PAGE_DOWN:
<a name="l3894"><span class="linenum">3894</span></a>                      this._move( &quot;nextPage&quot;, event );
<a name="l3895"><span class="linenum">3895</span></a>                      break;
<a name="l3896"><span class="linenum">3896</span></a>                  case keyCode.UP:
<a name="l3897"><span class="linenum">3897</span></a>                      this._keyEvent( &quot;previous&quot;, event );
<a name="l3898"><span class="linenum">3898</span></a>                      break;
<a name="l3899"><span class="linenum">3899</span></a>                  case keyCode.DOWN:
<a name="l3900"><span class="linenum">3900</span></a>                      this._keyEvent( &quot;next&quot;, event );
<a name="l3901"><span class="linenum">3901</span></a>                      break;
<a name="l3902"><span class="linenum">3902</span></a>                  }
<a name="l3903"><span class="linenum">3903</span></a>              },
<a name="l3904"><span class="linenum">3904</span></a>              input: function( event ) {
<a name="l3905"><span class="linenum">3905</span></a>                  if ( suppressInput ) {
<a name="l3906"><span class="linenum">3906</span></a>                      suppressInput = false;
<a name="l3907"><span class="linenum">3907</span></a>                      event.preventDefault();
<a name="l3908"><span class="linenum">3908</span></a>                      return;
<a name="l3909"><span class="linenum">3909</span></a>                  }
<a name="l3910"><span class="linenum">3910</span></a>                  this._searchTimeout( event );
<a name="l3911"><span class="linenum">3911</span></a>              },
<a name="l3912"><span class="linenum">3912</span></a>              focus: function() {
<a name="l3913"><span class="linenum">3913</span></a>                  this.selectedItem = null;
<a name="l3914"><span class="linenum">3914</span></a>                  this.previous = this._value();
<a name="l3915"><span class="linenum">3915</span></a>              },
<a name="l3916"><span class="linenum">3916</span></a>              blur: function( event ) {
<a name="l3917"><span class="linenum">3917</span></a>                  if ( this.cancelBlur ) {
<a name="l3918"><span class="linenum">3918</span></a>                      delete this.cancelBlur;
<a name="l3919"><span class="linenum">3919</span></a>                      return;
<a name="l3920"><span class="linenum">3920</span></a>                  }
<a name="l3921"><span class="linenum">3921</span></a>  
<a name="l3922"><span class="linenum">3922</span></a>                  clearTimeout( this.searching );
<a name="l3923"><span class="linenum">3923</span></a>                  this.<a class="function" onClick="logFunction('close')" href="../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>( event );
<a name="l3924"><span class="linenum">3924</span></a>                  this._change( event );
<a name="l3925"><span class="linenum">3925</span></a>              }
<a name="l3926"><span class="linenum">3926</span></a>          });
<a name="l3927"><span class="linenum">3927</span></a>  
<a name="l3928"><span class="linenum">3928</span></a>          this._initSource();
<a name="l3929"><span class="linenum">3929</span></a>          this.menu = $( &quot;&lt;ul&gt;&quot; )
<a name="l3930"><span class="linenum">3930</span></a>              .addClass( &quot;ui-autocomplete ui-front&quot; )
<a name="l3931"><span class="linenum">3931</span></a>              .appendTo( this._appendTo() )
<a name="l3932"><span class="linenum">3932</span></a>              .menu({
<a name="l3933"><span class="linenum">3933</span></a>  <span class="comment">                // disable ARIA support, the live region takes care of that</span>
<a name="l3934"><span class="linenum">3934</span></a>                  role: null
<a name="l3935"><span class="linenum">3935</span></a>              })
<a name="l3936"><span class="linenum">3936</span></a>              .hide()
<a name="l3937"><span class="linenum">3937</span></a>              .data( &quot;ui-menu&quot; );
<a name="l3938"><span class="linenum">3938</span></a>  
<a name="l3939"><span class="linenum">3939</span></a>          this._on( this.menu.element, {
<a name="l3940"><span class="linenum">3940</span></a>              mousedown: function( event ) {
<a name="l3941"><span class="linenum">3941</span></a>  <span class="comment">                // prevent moving focus out of the text field</span>
<a name="l3942"><span class="linenum">3942</span></a>                  event.preventDefault();
<a name="l3943"><span class="linenum">3943</span></a>  
<a name="l3944"><span class="linenum">3944</span></a>  <span class="comment">                // IE doesn't prevent moving focus even with event.preventDefault()</span>
<a name="l3945"><span class="linenum">3945</span></a>  <span class="comment">                // so we set a flag to know when we should ignore the blur event</span>
<a name="l3946"><span class="linenum">3946</span></a>                  this.cancelBlur = true;
<a name="l3947"><span class="linenum">3947</span></a>                  this._delay(function() {
<a name="l3948"><span class="linenum">3948</span></a>                      delete this.cancelBlur;
<a name="l3949"><span class="linenum">3949</span></a>                  });
<a name="l3950"><span class="linenum">3950</span></a>  
<a name="l3951"><span class="linenum">3951</span></a>  <span class="comment">                // clicking on the scrollbar causes focus to shift to the body</span>
<a name="l3952"><span class="linenum">3952</span></a>  <span class="comment">                // but we can't detect a mouseup or a click immediately afterward</span>
<a name="l3953"><span class="linenum">3953</span></a>  <span class="comment">                // so we have to track the next mousedown and close the menu if</span>
<a name="l3954"><span class="linenum">3954</span></a>  <span class="comment">                // the user clicks somewhere outside of the autocomplete</span>
<a name="l3955"><span class="linenum">3955</span></a>                  var menuElement = this.menu.element[ 0 ];
<a name="l3956"><span class="linenum">3956</span></a>                  if ( !$( event.target ).closest( &quot;.ui-menu-item&quot; ).length ) {
<a name="l3957"><span class="linenum">3957</span></a>                      this._delay(function() {
<a name="l3958"><span class="linenum">3958</span></a>                          var that = this;
<a name="l3959"><span class="linenum">3959</span></a>                          this.document.one( &quot;mousedown&quot;, function( event ) {
<a name="l3960"><span class="linenum">3960</span></a>                              if ( event.target !== that.element[ 0 ] &amp;&amp;
<a name="l3961"><span class="linenum">3961</span></a>                                      event.target !== menuElement &amp;&amp;
<a name="l3962"><span class="linenum">3962</span></a>                                      !$.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( menuElement, event.target ) ) {
<a name="l3963"><span class="linenum">3963</span></a>                                  that.<a class="function" onClick="logFunction('close')" href="../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l3964"><span class="linenum">3964</span></a>                              }
<a name="l3965"><span class="linenum">3965</span></a>                          });
<a name="l3966"><span class="linenum">3966</span></a>                      });
<a name="l3967"><span class="linenum">3967</span></a>                  }
<a name="l3968"><span class="linenum">3968</span></a>              },
<a name="l3969"><span class="linenum">3969</span></a>              menufocus: function( event, ui ) {
<a name="l3970"><span class="linenum">3970</span></a>  <span class="comment">                // support: Firefox</span>
<a name="l3971"><span class="linenum">3971</span></a>  <span class="comment">                // Prevent accidental activation of menu items in Firefox (#7024 #9118)</span>
<a name="l3972"><span class="linenum">3972</span></a>                  if ( this.isNewMenu ) {
<a name="l3973"><span class="linenum">3973</span></a>                      this.isNewMenu = false;
<a name="l3974"><span class="linenum">3974</span></a>                      if ( event.originalEvent &amp;&amp; /^mouse/.test( event.originalEvent.type ) ) {
<a name="l3975"><span class="linenum">3975</span></a>                          this.menu.blur();
<a name="l3976"><span class="linenum">3976</span></a>  
<a name="l3977"><span class="linenum">3977</span></a>                          this.document.one( &quot;mousemove&quot;, function() {
<a name="l3978"><span class="linenum">3978</span></a>                              $( event.target ).<a class="function" onClick="logFunction('trigger')" href="../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>( event.originalEvent );
<a name="l3979"><span class="linenum">3979</span></a>                          });
<a name="l3980"><span class="linenum">3980</span></a>  
<a name="l3981"><span class="linenum">3981</span></a>                          return;
<a name="l3982"><span class="linenum">3982</span></a>                      }
<a name="l3983"><span class="linenum">3983</span></a>                  }
<a name="l3984"><span class="linenum">3984</span></a>  
<a name="l3985"><span class="linenum">3985</span></a>                  var item = ui.item.data( &quot;ui-autocomplete-item&quot; );
<a name="l3986"><span class="linenum">3986</span></a>                  if ( false !== this._trigger( &quot;focus&quot;, event, { item: item } ) ) {
<a name="l3987"><span class="linenum">3987</span></a>  <span class="comment">                    // use value to match what will end up in the input, if it was a key event</span>
<a name="l3988"><span class="linenum">3988</span></a>                      if ( event.originalEvent &amp;&amp; /^key/.test( event.originalEvent.type ) ) {
<a name="l3989"><span class="linenum">3989</span></a>                          this._value( item.value );
<a name="l3990"><span class="linenum">3990</span></a>                      }
<a name="l3991"><span class="linenum">3991</span></a>                  } else {
<a name="l3992"><span class="linenum">3992</span></a>  <span class="comment">                    // Normally the input is populated with the item's value as the</span>
<a name="l3993"><span class="linenum">3993</span></a>  <span class="comment">                    // menu is navigated, causing screen readers to notice a change and</span>
<a name="l3994"><span class="linenum">3994</span></a>  <span class="comment">                    // announce the item. Since the focus event was canceled, this doesn't</span>
<a name="l3995"><span class="linenum">3995</span></a>  <span class="comment">                    // happen, so we update the live region so that screen readers can</span>
<a name="l3996"><span class="linenum">3996</span></a>  <span class="comment">                    // still notice the change and announce it.</span>
<a name="l3997"><span class="linenum">3997</span></a>                      this.liveRegion.<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>( item.value );
<a name="l3998"><span class="linenum">3998</span></a>                  }
<a name="l3999"><span class="linenum">3999</span></a>              },
<a name="l4000"><span class="linenum">4000</span></a>              menuselect: function( event, ui ) {
<a name="l4001"><span class="linenum">4001</span></a>                  var item = ui.item.data( &quot;ui-autocomplete-item&quot; ),
<a name="l4002"><span class="linenum">4002</span></a>                      previous = this.previous;
<a name="l4003"><span class="linenum">4003</span></a>  
<a name="l4004"><span class="linenum">4004</span></a>  <span class="comment">                // only trigger when focus was lost (click on menu)</span>
<a name="l4005"><span class="linenum">4005</span></a>                  if ( this.element[0] !== this.document[0].activeElement ) {
<a name="l4006"><span class="linenum">4006</span></a>                      this.element.focus();
<a name="l4007"><span class="linenum">4007</span></a>                      this.previous = previous;
<a name="l4008"><span class="linenum">4008</span></a>  <span class="comment">                    // #6109 - IE triggers two focus events and the second</span>
<a name="l4009"><span class="linenum">4009</span></a>  <span class="comment">                    // is asynchronous, so we need to reset the previous</span>
<a name="l4010"><span class="linenum">4010</span></a>  <span class="comment">                    // term synchronously and asynchronously :-(</span>
<a name="l4011"><span class="linenum">4011</span></a>                      this._delay(function() {
<a name="l4012"><span class="linenum">4012</span></a>                          this.previous = previous;
<a name="l4013"><span class="linenum">4013</span></a>                          this.selectedItem = item;
<a name="l4014"><span class="linenum">4014</span></a>                      });
<a name="l4015"><span class="linenum">4015</span></a>                  }
<a name="l4016"><span class="linenum">4016</span></a>  
<a name="l4017"><span class="linenum">4017</span></a>                  if ( false !== this._trigger( &quot;select&quot;, event, { item: item } ) ) {
<a name="l4018"><span class="linenum">4018</span></a>                      this._value( item.value );
<a name="l4019"><span class="linenum">4019</span></a>                  }
<a name="l4020"><span class="linenum">4020</span></a>  <span class="comment">                // reset the term after the select event</span>
<a name="l4021"><span class="linenum">4021</span></a>  <span class="comment">                // this allows custom select handling to work properly</span>
<a name="l4022"><span class="linenum">4022</span></a>                  this.term = this._value();
<a name="l4023"><span class="linenum">4023</span></a>  
<a name="l4024"><span class="linenum">4024</span></a>                  this.<a class="function" onClick="logFunction('close')" href="../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>( event );
<a name="l4025"><span class="linenum">4025</span></a>                  this.selectedItem = item;
<a name="l4026"><span class="linenum">4026</span></a>              }
<a name="l4027"><span class="linenum">4027</span></a>          });
<a name="l4028"><span class="linenum">4028</span></a>  
<a name="l4029"><span class="linenum">4029</span></a>          this.liveRegion = $( &quot;&lt;span&gt;&quot;, {
<a name="l4030"><span class="linenum">4030</span></a>                  role: &quot;status&quot;,
<a name="l4031"><span class="linenum">4031</span></a>                  &quot;aria-live&quot;: &quot;polite&quot;
<a name="l4032"><span class="linenum">4032</span></a>              })
<a name="l4033"><span class="linenum">4033</span></a>              .addClass( &quot;ui-helper-hidden-accessible&quot; )
<a name="l4034"><span class="linenum">4034</span></a>              .insertBefore( this.element );
<a name="l4035"><span class="linenum">4035</span></a>  
<a name="l4036"><span class="linenum">4036</span></a>  <span class="comment">        // turning off autocomplete prevents the browser from remembering the</span>
<a name="l4037"><span class="linenum">4037</span></a>  <span class="comment">        // value when navigating through history, so we re-enable autocomplete</span>
<a name="l4038"><span class="linenum">4038</span></a>  <span class="comment">        // if the page is unloaded before the widget is destroyed. #7790</span>
<a name="l4039"><span class="linenum">4039</span></a>          this._on( this.window, {
<a name="l4040"><span class="linenum">4040</span></a>              beforeunload: function() {
<a name="l4041"><span class="linenum">4041</span></a>                  this.element.removeAttr( &quot;autocomplete&quot; );
<a name="l4042"><span class="linenum">4042</span></a>              }
<a name="l4043"><span class="linenum">4043</span></a>          });
<a name="l4044"><span class="linenum">4044</span></a>      },
<a name="l4045"><span class="linenum">4045</span></a>  
<a name="l4046"><span class="linenum">4046</span></a>      _destroy: function() {
<a name="l4047"><span class="linenum">4047</span></a>          clearTimeout( this.searching );
<a name="l4048"><span class="linenum">4048</span></a>          this.element
<a name="l4049"><span class="linenum">4049</span></a>              .removeClass( &quot;ui-autocomplete-input&quot; )
<a name="l4050"><span class="linenum">4050</span></a>              .removeAttr( &quot;autocomplete&quot; );
<a name="l4051"><span class="linenum">4051</span></a>          this.menu.element.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l4052"><span class="linenum">4052</span></a>          this.liveRegion.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l4053"><span class="linenum">4053</span></a>      },
<a name="l4054"><span class="linenum">4054</span></a>  
<a name="l4055"><span class="linenum">4055</span></a>      _setOption: function( key, value ) {
<a name="l4056"><span class="linenum">4056</span></a>          this._super( key, value );
<a name="l4057"><span class="linenum">4057</span></a>          if ( key === &quot;source&quot; ) {
<a name="l4058"><span class="linenum">4058</span></a>              this._initSource();
<a name="l4059"><span class="linenum">4059</span></a>          }
<a name="l4060"><span class="linenum">4060</span></a>          if ( key === &quot;appendTo&quot; ) {
<a name="l4061"><span class="linenum">4061</span></a>              this.menu.element.appendTo( this._appendTo() );
<a name="l4062"><span class="linenum">4062</span></a>          }
<a name="l4063"><span class="linenum">4063</span></a>          if ( key === &quot;disabled&quot; &amp;&amp; value &amp;&amp; this.xhr ) {
<a name="l4064"><span class="linenum">4064</span></a>              this.xhr.abort();
<a name="l4065"><span class="linenum">4065</span></a>          }
<a name="l4066"><span class="linenum">4066</span></a>      },
<a name="l4067"><span class="linenum">4067</span></a>  
<a name="l4068"><span class="linenum">4068</span></a>      _appendTo: function() {
<a name="l4069"><span class="linenum">4069</span></a>          var element = this.options.appendTo;
<a name="l4070"><span class="linenum">4070</span></a>  
<a name="l4071"><span class="linenum">4071</span></a>          if ( element ) {
<a name="l4072"><span class="linenum">4072</span></a>              element = element.jquery || element.nodeType ?
<a name="l4073"><span class="linenum">4073</span></a>                  $( element ) :
<a name="l4074"><span class="linenum">4074</span></a>                  this.document.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( element ).eq( 0 );
<a name="l4075"><span class="linenum">4075</span></a>          }
<a name="l4076"><span class="linenum">4076</span></a>  
<a name="l4077"><span class="linenum">4077</span></a>          if ( !element ) {
<a name="l4078"><span class="linenum">4078</span></a>              element = this.element.closest( &quot;.ui-front&quot; );
<a name="l4079"><span class="linenum">4079</span></a>          }
<a name="l4080"><span class="linenum">4080</span></a>  
<a name="l4081"><span class="linenum">4081</span></a>          if ( !element.length ) {
<a name="l4082"><span class="linenum">4082</span></a>              element = this.document[0].body;
<a name="l4083"><span class="linenum">4083</span></a>          }
<a name="l4084"><span class="linenum">4084</span></a>  
<a name="l4085"><span class="linenum">4085</span></a>          return element;
<a name="l4086"><span class="linenum">4086</span></a>      },
<a name="l4087"><span class="linenum">4087</span></a>  
<a name="l4088"><span class="linenum">4088</span></a>      _initSource: function() {
<a name="l4089"><span class="linenum">4089</span></a>          var array, url,
<a name="l4090"><span class="linenum">4090</span></a>              that = this;
<a name="l4091"><span class="linenum">4091</span></a>          if ( $.isArray(this.options.source) ) {
<a name="l4092"><span class="linenum">4092</span></a>              array = this.options.source;
<a name="l4093"><span class="linenum">4093</span></a>              this.source = function( request, response ) {
<a name="l4094"><span class="linenum">4094</span></a>                  response( $.ui.autocomplete.<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>( array, request.term ) );
<a name="l4095"><span class="linenum">4095</span></a>              };
<a name="l4096"><span class="linenum">4096</span></a>          } else if ( typeof this.options.source === &quot;string&quot; ) {
<a name="l4097"><span class="linenum">4097</span></a>              url = this.options.source;
<a name="l4098"><span class="linenum">4098</span></a>              this.source = function( request, response ) {
<a name="l4099"><span class="linenum">4099</span></a>                  if ( that.xhr ) {
<a name="l4100"><span class="linenum">4100</span></a>                      that.xhr.abort();
<a name="l4101"><span class="linenum">4101</span></a>                  }
<a name="l4102"><span class="linenum">4102</span></a>                  that.xhr = $.ajax({
<a name="l4103"><span class="linenum">4103</span></a>                      url: url,
<a name="l4104"><span class="linenum">4104</span></a>                      data: request,
<a name="l4105"><span class="linenum">4105</span></a>                      dataType: &quot;json&quot;,
<a name="l4106"><span class="linenum">4106</span></a>                      success: function( data ) {
<a name="l4107"><span class="linenum">4107</span></a>                          response( data );
<a name="l4108"><span class="linenum">4108</span></a>                      },
<a name="l4109"><span class="linenum">4109</span></a>                      error: function() {
<a name="l4110"><span class="linenum">4110</span></a>                          response( [] );
<a name="l4111"><span class="linenum">4111</span></a>                      }
<a name="l4112"><span class="linenum">4112</span></a>                  });
<a name="l4113"><span class="linenum">4113</span></a>              };
<a name="l4114"><span class="linenum">4114</span></a>          } else {
<a name="l4115"><span class="linenum">4115</span></a>              this.source = this.options.source;
<a name="l4116"><span class="linenum">4116</span></a>          }
<a name="l4117"><span class="linenum">4117</span></a>      },
<a name="l4118"><span class="linenum">4118</span></a>  
<a name="l4119"><span class="linenum">4119</span></a>      _searchTimeout: function( event ) {
<a name="l4120"><span class="linenum">4120</span></a>          clearTimeout( this.searching );
<a name="l4121"><span class="linenum">4121</span></a>          this.searching = this._delay(function() {
<a name="l4122"><span class="linenum">4122</span></a>  <span class="comment">            // only search if the value has changed</span>
<a name="l4123"><span class="linenum">4123</span></a>              if ( this.term !== this._value() ) {
<a name="l4124"><span class="linenum">4124</span></a>                  this.selectedItem = null;
<a name="l4125"><span class="linenum">4125</span></a>                  this.search( null, event );
<a name="l4126"><span class="linenum">4126</span></a>              }
<a name="l4127"><span class="linenum">4127</span></a>          }, this.options.delay );
<a name="l4128"><span class="linenum">4128</span></a>      },
<a name="l4129"><span class="linenum">4129</span></a>  
<a name="l4130"><span class="linenum">4130</span></a>      search: function( value, event ) {
<a name="l4131"><span class="linenum">4131</span></a>          value = value != null ? value : this._value();
<a name="l4132"><span class="linenum">4132</span></a>  
<a name="l4133"><span class="linenum">4133</span></a>  <span class="comment">        // always save the actual value, not the one passed as an argument</span>
<a name="l4134"><span class="linenum">4134</span></a>          this.term = this._value();
<a name="l4135"><span class="linenum">4135</span></a>  
<a name="l4136"><span class="linenum">4136</span></a>          if ( value.length &lt; this.options.minLength ) {
<a name="l4137"><span class="linenum">4137</span></a>              return this.<a class="function" onClick="logFunction('close')" href="../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>( event );
<a name="l4138"><span class="linenum">4138</span></a>          }
<a name="l4139"><span class="linenum">4139</span></a>  
<a name="l4140"><span class="linenum">4140</span></a>          if ( this._trigger( &quot;search&quot;, event ) === false ) {
<a name="l4141"><span class="linenum">4141</span></a>              return;
<a name="l4142"><span class="linenum">4142</span></a>          }
<a name="l4143"><span class="linenum">4143</span></a>  
<a name="l4144"><span class="linenum">4144</span></a>          return this._search( value );
<a name="l4145"><span class="linenum">4145</span></a>      },
<a name="l4146"><span class="linenum">4146</span></a>  
<a name="l4147"><span class="linenum">4147</span></a>      _search: function( value ) {
<a name="l4148"><span class="linenum">4148</span></a>          this.pending++;
<a name="l4149"><span class="linenum">4149</span></a>          this.element.addClass( &quot;ui-autocomplete-loading&quot; );
<a name="l4150"><span class="linenum">4150</span></a>          this.cancelSearch = false;
<a name="l4151"><span class="linenum">4151</span></a>  
<a name="l4152"><span class="linenum">4152</span></a>          this.source( { term: value }, this._response() );
<a name="l4153"><span class="linenum">4153</span></a>      },
<a name="l4154"><span class="linenum">4154</span></a>  
<a name="l4155"><span class="linenum">4155</span></a>      _response: function() {
<a name="l4156"><span class="linenum">4156</span></a>          var index = ++this.requestIndex;
<a name="l4157"><span class="linenum">4157</span></a>  
<a name="l4158"><span class="linenum">4158</span></a>          return $.proxy(function( content ) {
<a name="l4159"><span class="linenum">4159</span></a>              if ( index === this.requestIndex ) {
<a name="l4160"><span class="linenum">4160</span></a>                  this.__response( content );
<a name="l4161"><span class="linenum">4161</span></a>              }
<a name="l4162"><span class="linenum">4162</span></a>  
<a name="l4163"><span class="linenum">4163</span></a>              this.pending--;
<a name="l4164"><span class="linenum">4164</span></a>              if ( !this.pending ) {
<a name="l4165"><span class="linenum">4165</span></a>                  this.element.removeClass( &quot;ui-autocomplete-loading&quot; );
<a name="l4166"><span class="linenum">4166</span></a>              }
<a name="l4167"><span class="linenum">4167</span></a>          }, this );
<a name="l4168"><span class="linenum">4168</span></a>      },
<a name="l4169"><span class="linenum">4169</span></a>  
<a name="l4170"><span class="linenum">4170</span></a>      __response: function( content ) {
<a name="l4171"><span class="linenum">4171</span></a>          if ( content ) {
<a name="l4172"><span class="linenum">4172</span></a>              content = this._normalize( content );
<a name="l4173"><span class="linenum">4173</span></a>          }
<a name="l4174"><span class="linenum">4174</span></a>          this._trigger( &quot;response&quot;, null, { content: content } );
<a name="l4175"><span class="linenum">4175</span></a>          if ( !this.options.disabled &amp;&amp; content &amp;&amp; content.length &amp;&amp; !this.cancelSearch ) {
<a name="l4176"><span class="linenum">4176</span></a>              this._suggest( content );
<a name="l4177"><span class="linenum">4177</span></a>              this._trigger( &quot;open&quot; );
<a name="l4178"><span class="linenum">4178</span></a>          } else {
<a name="l4179"><span class="linenum">4179</span></a>  <span class="comment">            // use ._close() instead of .close() so we don't cancel future searches</span>
<a name="l4180"><span class="linenum">4180</span></a>              this._close();
<a name="l4181"><span class="linenum">4181</span></a>          }
<a name="l4182"><span class="linenum">4182</span></a>      },
<a name="l4183"><span class="linenum">4183</span></a>  
<a name="l4184"><span class="linenum">4184</span></a>      close: function( event ) {
<a name="l4185"><span class="linenum">4185</span></a>          this.cancelSearch = true;
<a name="l4186"><span class="linenum">4186</span></a>          this._close( event );
<a name="l4187"><span class="linenum">4187</span></a>      },
<a name="l4188"><span class="linenum">4188</span></a>  
<a name="l4189"><span class="linenum">4189</span></a>      _close: function( event ) {
<a name="l4190"><span class="linenum">4190</span></a>          if ( this.menu.element.is( &quot;:visible&quot; ) ) {
<a name="l4191"><span class="linenum">4191</span></a>              this.menu.element.hide();
<a name="l4192"><span class="linenum">4192</span></a>              this.menu.blur();
<a name="l4193"><span class="linenum">4193</span></a>              this.isNewMenu = true;
<a name="l4194"><span class="linenum">4194</span></a>              this._trigger( &quot;close&quot;, event );
<a name="l4195"><span class="linenum">4195</span></a>          }
<a name="l4196"><span class="linenum">4196</span></a>      },
<a name="l4197"><span class="linenum">4197</span></a>  
<a name="l4198"><span class="linenum">4198</span></a>      _change: function( event ) {
<a name="l4199"><span class="linenum">4199</span></a>          if ( this.previous !== this._value() ) {
<a name="l4200"><span class="linenum">4200</span></a>              this._trigger( &quot;change&quot;, event, { item: this.selectedItem } );
<a name="l4201"><span class="linenum">4201</span></a>          }
<a name="l4202"><span class="linenum">4202</span></a>      },
<a name="l4203"><span class="linenum">4203</span></a>  
<a name="l4204"><span class="linenum">4204</span></a>      _normalize: function( items ) {
<a name="l4205"><span class="linenum">4205</span></a>  <span class="comment">        // assume all items have the right format when the first item is complete</span>
<a name="l4206"><span class="linenum">4206</span></a>          if ( items.length &amp;&amp; items[0].label &amp;&amp; items[0].value ) {
<a name="l4207"><span class="linenum">4207</span></a>              return items;
<a name="l4208"><span class="linenum">4208</span></a>          }
<a name="l4209"><span class="linenum">4209</span></a>          return $.map( items, function( item ) {
<a name="l4210"><span class="linenum">4210</span></a>              if ( typeof item === &quot;string&quot; ) {
<a name="l4211"><span class="linenum">4211</span></a>                  return {
<a name="l4212"><span class="linenum">4212</span></a>                      label: item,
<a name="l4213"><span class="linenum">4213</span></a>                      value: item
<a name="l4214"><span class="linenum">4214</span></a>                  };
<a name="l4215"><span class="linenum">4215</span></a>              }
<a name="l4216"><span class="linenum">4216</span></a>              return $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({
<a name="l4217"><span class="linenum">4217</span></a>                  label: item.label || item.value,
<a name="l4218"><span class="linenum">4218</span></a>                  value: item.value || item.label
<a name="l4219"><span class="linenum">4219</span></a>              }, item );
<a name="l4220"><span class="linenum">4220</span></a>          });
<a name="l4221"><span class="linenum">4221</span></a>      },
<a name="l4222"><span class="linenum">4222</span></a>  
<a name="l4223"><span class="linenum">4223</span></a>      _suggest: function( items ) {
<a name="l4224"><span class="linenum">4224</span></a>          var ul = this.menu.element.empty();
<a name="l4225"><span class="linenum">4225</span></a>          this._renderMenu( ul, items );
<a name="l4226"><span class="linenum">4226</span></a>          this.isNewMenu = true;
<a name="l4227"><span class="linenum">4227</span></a>          this.menu.<a class="function" onClick="logFunction('refresh')" href="../../../_functions/refresh.html" onMouseOver="funcPopup(event,'refresh')">refresh</a>();
<a name="l4228"><span class="linenum">4228</span></a>  
<a name="l4229"><span class="linenum">4229</span></a>  <span class="comment">        // size and position menu</span>
<a name="l4230"><span class="linenum">4230</span></a>          ul.<a class="function" onClick="logFunction('show')" href="../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l4231"><span class="linenum">4231</span></a>          this._resizeMenu();
<a name="l4232"><span class="linenum">4232</span></a>          ul.<a class="function" onClick="logFunction('position')" href="../../../_functions/position.html" onMouseOver="funcPopup(event,'position')">position</a>( $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({
<a name="l4233"><span class="linenum">4233</span></a>              of: this.element
<a name="l4234"><span class="linenum">4234</span></a>          }, this.options.position ));
<a name="l4235"><span class="linenum">4235</span></a>  
<a name="l4236"><span class="linenum">4236</span></a>          if ( this.options.autoFocus ) {
<a name="l4237"><span class="linenum">4237</span></a>              this.menu.<a class="phpfunction" onClick="logFunction('next')" href="../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>();
<a name="l4238"><span class="linenum">4238</span></a>          }
<a name="l4239"><span class="linenum">4239</span></a>      },
<a name="l4240"><span class="linenum">4240</span></a>  
<a name="l4241"><span class="linenum">4241</span></a>      _resizeMenu: function() {
<a name="l4242"><span class="linenum">4242</span></a>          var ul = this.menu.element;
<a name="l4243"><span class="linenum">4243</span></a>          ul.outerWidth( Math.<a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(
<a name="l4244"><span class="linenum">4244</span></a>  <span class="comment">            // Firefox wraps long text (possibly a rounding bug)</span>
<a name="l4245"><span class="linenum">4245</span></a>  <span class="comment">            // so we add 1px to avoid the wrapping (#7513)</span>
<a name="l4246"><span class="linenum">4246</span></a>              ul.width( &quot;&quot; ).outerWidth() + 1,
<a name="l4247"><span class="linenum">4247</span></a>              this.element.outerWidth()
<a name="l4248"><span class="linenum">4248</span></a>          ) );
<a name="l4249"><span class="linenum">4249</span></a>      },
<a name="l4250"><span class="linenum">4250</span></a>  
<a name="l4251"><span class="linenum">4251</span></a>      _renderMenu: function( ul, items ) {
<a name="l4252"><span class="linenum">4252</span></a>          var that = this;
<a name="l4253"><span class="linenum">4253</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( items, function( index, item ) {
<a name="l4254"><span class="linenum">4254</span></a>              that._renderItemData( ul, item );
<a name="l4255"><span class="linenum">4255</span></a>          });
<a name="l4256"><span class="linenum">4256</span></a>      },
<a name="l4257"><span class="linenum">4257</span></a>  
<a name="l4258"><span class="linenum">4258</span></a>      _renderItemData: function( ul, item ) {
<a name="l4259"><span class="linenum">4259</span></a>          return this._renderItem( ul, item ).data( &quot;ui-autocomplete-item&quot;, item );
<a name="l4260"><span class="linenum">4260</span></a>      },
<a name="l4261"><span class="linenum">4261</span></a>  
<a name="l4262"><span class="linenum">4262</span></a>      _renderItem: function( ul, item ) {
<a name="l4263"><span class="linenum">4263</span></a>          return $( &quot;&lt;li&gt;&quot; )
<a name="l4264"><span class="linenum">4264</span></a>              .<a class="function" onClick="logFunction('append')" href="../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>( $( &quot;&lt;a&gt;&quot; ).<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>( item.label ) )
<a name="l4265"><span class="linenum">4265</span></a>              .appendTo( ul );
<a name="l4266"><span class="linenum">4266</span></a>      },
<a name="l4267"><span class="linenum">4267</span></a>  
<a name="l4268"><span class="linenum">4268</span></a>      _move: function( direction, event ) {
<a name="l4269"><span class="linenum">4269</span></a>          if ( !this.menu.element.is( &quot;:visible&quot; ) ) {
<a name="l4270"><span class="linenum">4270</span></a>              this.search( null, event );
<a name="l4271"><span class="linenum">4271</span></a>              return;
<a name="l4272"><span class="linenum">4272</span></a>          }
<a name="l4273"><span class="linenum">4273</span></a>          if ( this.menu.isFirstItem() &amp;&amp; /^previous/.test( direction ) ||
<a name="l4274"><span class="linenum">4274</span></a>                  this.menu.isLastItem() &amp;&amp; /^next/.test( direction ) ) {
<a name="l4275"><span class="linenum">4275</span></a>              this._value( this.term );
<a name="l4276"><span class="linenum">4276</span></a>              this.menu.blur();
<a name="l4277"><span class="linenum">4277</span></a>              return;
<a name="l4278"><span class="linenum">4278</span></a>          }
<a name="l4279"><span class="linenum">4279</span></a>          this.menu[ direction ]( event );
<a name="l4280"><span class="linenum">4280</span></a>      },
<a name="l4281"><span class="linenum">4281</span></a>  
<a name="l4282"><span class="linenum">4282</span></a>      widget: function() {
<a name="l4283"><span class="linenum">4283</span></a>          return this.menu.element;
<a name="l4284"><span class="linenum">4284</span></a>      },
<a name="l4285"><span class="linenum">4285</span></a>  
<a name="l4286"><span class="linenum">4286</span></a>      _value: function() {
<a name="l4287"><span class="linenum">4287</span></a>          return this.valueMethod.apply( this.element, arguments );
<a name="l4288"><span class="linenum">4288</span></a>      },
<a name="l4289"><span class="linenum">4289</span></a>  
<a name="l4290"><span class="linenum">4290</span></a>      _keyEvent: function( keyEvent, event ) {
<a name="l4291"><span class="linenum">4291</span></a>          if ( !this.isMultiLine || this.menu.element.is( &quot;:visible&quot; ) ) {
<a name="l4292"><span class="linenum">4292</span></a>              this._move( keyEvent, event );
<a name="l4293"><span class="linenum">4293</span></a>  
<a name="l4294"><span class="linenum">4294</span></a>  <span class="comment">            // prevents moving cursor to beginning/end of the text field in some browsers</span>
<a name="l4295"><span class="linenum">4295</span></a>              event.preventDefault();
<a name="l4296"><span class="linenum">4296</span></a>          }
<a name="l4297"><span class="linenum">4297</span></a>      }
<a name="l4298"><span class="linenum">4298</span></a>  });
<a name="l4299"><span class="linenum">4299</span></a>  
<a name="l4300"><span class="linenum">4300</span></a>  $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( $.ui.autocomplete, {
<a name="l4301"><span class="linenum">4301</span></a>      escapeRegex: function( value ) {
<a name="l4302"><span class="linenum">4302</span></a>          return value.<a class="function" onClick="logFunction('replace')" href="../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, &quot;\\$&amp;&quot;);
<a name="l4303"><span class="linenum">4303</span></a>      },
<a name="l4304"><span class="linenum">4304</span></a>      filter: function(array, term) {
<a name="l4305"><span class="linenum">4305</span></a>          var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), &quot;i&quot; );
<a name="l4306"><span class="linenum">4306</span></a>          return $.grep( array, function(value) {
<a name="l4307"><span class="linenum">4307</span></a>              return matcher.test( value.label || value.value || value );
<a name="l4308"><span class="linenum">4308</span></a>          });
<a name="l4309"><span class="linenum">4309</span></a>      }
<a name="l4310"><span class="linenum">4310</span></a>  });
<a name="l4311"><span class="linenum">4311</span></a>  
<a name="l4312"><span class="linenum">4312</span></a>  
<a name="l4313"><span class="linenum">4313</span></a>  <span class="comment">// live region extension, adding a `messages` option</span>
<a name="l4314"><span class="linenum">4314</span></a>  <span class="comment">// NOTE: This is an experimental API. We are still investigating</span>
<a name="l4315"><span class="linenum">4315</span></a>  <span class="comment">// a full solution for string manipulation and internationalization.</span>
<a name="l4316"><span class="linenum">4316</span></a>  $.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>( &quot;ui.autocomplete&quot;, $.ui.autocomplete, {
<a name="l4317"><span class="linenum">4317</span></a>      options: {
<a name="l4318"><span class="linenum">4318</span></a>          messages: {
<a name="l4319"><span class="linenum">4319</span></a>              noResults: &quot;No search results.&quot;,
<a name="l4320"><span class="linenum">4320</span></a>              results: function( amount ) {
<a name="l4321"><span class="linenum">4321</span></a>                  return amount + ( amount &gt; 1 ? &quot; results are&quot; : &quot; result is&quot; ) +
<a name="l4322"><span class="linenum">4322</span></a>                      &quot; available, use up and down arrow keys to navigate.&quot;;
<a name="l4323"><span class="linenum">4323</span></a>              }
<a name="l4324"><span class="linenum">4324</span></a>          }
<a name="l4325"><span class="linenum">4325</span></a>      },
<a name="l4326"><span class="linenum">4326</span></a>  
<a name="l4327"><span class="linenum">4327</span></a>      __response: function( content ) {
<a name="l4328"><span class="linenum">4328</span></a>          var message;
<a name="l4329"><span class="linenum">4329</span></a>          this._superApply( arguments );
<a name="l4330"><span class="linenum">4330</span></a>          if ( this.options.disabled || this.cancelSearch ) {
<a name="l4331"><span class="linenum">4331</span></a>              return;
<a name="l4332"><span class="linenum">4332</span></a>          }
<a name="l4333"><span class="linenum">4333</span></a>          if ( content &amp;&amp; content.length ) {
<a name="l4334"><span class="linenum">4334</span></a>              message = this.options.messages.<a class="function" onClick="logFunction('results')" href="../../../_functions/results.html" onMouseOver="funcPopup(event,'results')">results</a>( content.length );
<a name="l4335"><span class="linenum">4335</span></a>          } else {
<a name="l4336"><span class="linenum">4336</span></a>              message = this.options.messages.noResults;
<a name="l4337"><span class="linenum">4337</span></a>          }
<a name="l4338"><span class="linenum">4338</span></a>          this.liveRegion.<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>( message );
<a name="l4339"><span class="linenum">4339</span></a>      }
<a name="l4340"><span class="linenum">4340</span></a>  });
<a name="l4341"><span class="linenum">4341</span></a>  
<a name="l4342"><span class="linenum">4342</span></a>  }( jQuery ));
<a name="l4343"><span class="linenum">4343</span></a>  (function( $, undefined ) {
<a name="l4344"><span class="linenum">4344</span></a>  
<a name="l4345"><span class="linenum">4345</span></a>  $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>($.ui, { datepicker: { version: &quot;1.10.4&quot; } });
<a name="l4346"><span class="linenum">4346</span></a>  
<a name="l4347"><span class="linenum">4347</span></a>  var PROP_NAME = &quot;datepicker&quot;,
<a name="l4348"><span class="linenum">4348</span></a>      instActive;
<a name="l4349"><span class="linenum">4349</span></a>  
<a name="l4350"><span class="linenum">4350</span></a>  <span class="comment">/* Date picker manager.</span>
<a name="l4351"><span class="linenum">4351</span></a>  <span class="comment">   Use the singleton instance of this class, $.datepicker, to interact with the date picker.</span>
<a name="l4352"><span class="linenum">4352</span></a>  <span class="comment">   Settings for (groups of) date pickers are maintained in an instance object,</span>
<a name="l4353"><span class="linenum">4353</span></a>  <span class="comment">   allowing multiple different settings on the same page. */</span>
<a name="l4354"><span class="linenum">4354</span></a>  
<a name="l4355"><span class="linenum">4355</span></a>  function <a class="function" onClick="logFunction('Datepicker')" href="../../../_functions/datepicker.html" onMouseOver="funcPopup(event,'datepicker')">Datepicker</a>() {
<a name="l4356"><span class="linenum">4356</span></a>      this._curInst = null; <span class="comment">// The current instance in use</span>
<a name="l4357"><span class="linenum">4357</span></a>      this._keyEvent = false; <span class="comment">// If the last event was a key event</span>
<a name="l4358"><span class="linenum">4358</span></a>      this._disabledInputs = []; <span class="comment">// List of date picker inputs that have been disabled</span>
<a name="l4359"><span class="linenum">4359</span></a>      this._datepickerShowing = false; <span class="comment">// True if the popup picker is showing , false if not</span>
<a name="l4360"><span class="linenum">4360</span></a>      this._inDialog = false; <span class="comment">// True if showing within a &quot;dialog&quot;, false if not</span>
<a name="l4361"><span class="linenum">4361</span></a>      this._mainDivId = &quot;ui-datepicker-div&quot;; <span class="comment">// The ID of the main datepicker division</span>
<a name="l4362"><span class="linenum">4362</span></a>      this._inlineClass = &quot;ui-datepicker-inline&quot;; <span class="comment">// The name of the inline marker class</span>
<a name="l4363"><span class="linenum">4363</span></a>      this._appendClass = &quot;ui-datepicker-append&quot;; <span class="comment">// The name of the append marker class</span>
<a name="l4364"><span class="linenum">4364</span></a>      this._triggerClass = &quot;ui-datepicker-trigger&quot;; <span class="comment">// The name of the trigger marker class</span>
<a name="l4365"><span class="linenum">4365</span></a>      this._dialogClass = &quot;ui-datepicker-dialog&quot;; <span class="comment">// The name of the dialog marker class</span>
<a name="l4366"><span class="linenum">4366</span></a>      this._disableClass = &quot;ui-datepicker-disabled&quot;; <span class="comment">// The name of the disabled covering marker class</span>
<a name="l4367"><span class="linenum">4367</span></a>      this._unselectableClass = &quot;ui-datepicker-unselectable&quot;; <span class="comment">// The name of the unselectable cell marker class</span>
<a name="l4368"><span class="linenum">4368</span></a>      this._currentClass = &quot;ui-datepicker-current-day&quot;; <span class="comment">// The name of the current day marker class</span>
<a name="l4369"><span class="linenum">4369</span></a>      this._dayOverClass = &quot;ui-datepicker-days-cell-over&quot;; <span class="comment">// The name of the day hover marker class</span>
<a name="l4370"><span class="linenum">4370</span></a>      this.regional = []; <span class="comment">// Available regional settings, indexed by language code</span>
<a name="l4371"><span class="linenum">4371</span></a>      this.regional[&quot;&quot;] = { // Default regional settings
<a name="l4372"><span class="linenum">4372</span></a>          closeText: &quot;Done&quot;, // Display text for close link
<a name="l4373"><span class="linenum">4373</span></a>          prevText: &quot;Prev&quot;, // Display text for previous month link
<a name="l4374"><span class="linenum">4374</span></a>          nextText: &quot;Next&quot;, // Display text for next month link
<a name="l4375"><span class="linenum">4375</span></a>          currentText: &quot;Today&quot;, // Display text for current month link
<a name="l4376"><span class="linenum">4376</span></a>          monthNames: [&quot;January&quot;,&quot;February&quot;,&quot;March&quot;,&quot;April&quot;,&quot;May&quot;,&quot;June&quot;,
<a name="l4377"><span class="linenum">4377</span></a>              &quot;July&quot;,&quot;August&quot;,&quot;September&quot;,&quot;October&quot;,&quot;November&quot;,&quot;December&quot;], // Names of months for drop-down and formatting
<a name="l4378"><span class="linenum">4378</span></a>          monthNamesShort: [&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;], // For formatting
<a name="l4379"><span class="linenum">4379</span></a>          dayNames: [&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;], // For formatting
<a name="l4380"><span class="linenum">4380</span></a>          dayNamesShort: [&quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;], // For formatting
<a name="l4381"><span class="linenum">4381</span></a>          dayNamesMin: [&quot;Su&quot;,&quot;Mo&quot;,&quot;Tu&quot;,&quot;We&quot;,&quot;Th&quot;,&quot;Fr&quot;,&quot;Sa&quot;], // Column headings for days starting at Sunday
<a name="l4382"><span class="linenum">4382</span></a>          weekHeader: &quot;Wk&quot;, // Column header for week of the year
<a name="l4383"><span class="linenum">4383</span></a>          dateFormat: &quot;mm/dd/yy&quot;, // See format options on parseDate
<a name="l4384"><span class="linenum">4384</span></a>          firstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...
<a name="l4385"><span class="linenum">4385</span></a>          isRTL: false, // True if right-to-left language, false if left-to-right
<a name="l4386"><span class="linenum">4386</span></a>          showMonthAfterYear: false, // True if the year select precedes month, false for month then year
<a name="l4387"><span class="linenum">4387</span></a>          yearSuffix: &quot;&quot; // Additional text to append to the year in the month headers
<a name="l4388"><span class="linenum">4388</span></a>      };
<a name="l4389"><span class="linenum">4389</span></a>      this._defaults = { // Global defaults for all the date picker instances
<a name="l4390"><span class="linenum">4390</span></a>          showOn: &quot;focus&quot;, // &quot;focus&quot; for popup on focus,
<a name="l4391"><span class="linenum">4391</span></a>  <span class="comment">            // &quot;button&quot; for trigger button, or &quot;both&quot; for either</span>
<a name="l4392"><span class="linenum">4392</span></a>          showAnim: &quot;fadeIn&quot;, // Name of jQuery animation for popup
<a name="l4393"><span class="linenum">4393</span></a>          showOptions: {}, // Options for enhanced animations
<a name="l4394"><span class="linenum">4394</span></a>          defaultDate: null, // Used when field is blank: actual date,
<a name="l4395"><span class="linenum">4395</span></a>  <span class="comment">            // +/-number for offset from today, null for today</span>
<a name="l4396"><span class="linenum">4396</span></a>          appendText: &quot;&quot;, // Display text following the input box, e.g. showing the format
<a name="l4397"><span class="linenum">4397</span></a>          buttonText: &quot;...&quot;, // Text for trigger button
<a name="l4398"><span class="linenum">4398</span></a>          buttonImage: &quot;&quot;, // URL for trigger button image
<a name="l4399"><span class="linenum">4399</span></a>          buttonImageOnly: false, // True if the image appears alone, false if it appears on a button
<a name="l4400"><span class="linenum">4400</span></a>          hideIfNoPrevNext: false, // True to hide next/previous month links
<a name="l4401"><span class="linenum">4401</span></a>  <span class="comment">            // if not applicable, false to just disable them</span>
<a name="l4402"><span class="linenum">4402</span></a>          navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links
<a name="l4403"><span class="linenum">4403</span></a>          gotoCurrent: false, // True if today link goes back to current selection instead
<a name="l4404"><span class="linenum">4404</span></a>          changeMonth: false, // True if month can be selected directly, false if only prev/next
<a name="l4405"><span class="linenum">4405</span></a>          changeYear: false, // True if year can be selected directly, false if only prev/next
<a name="l4406"><span class="linenum">4406</span></a>          yearRange: &quot;c-10:c+10&quot;, // Range of years to display in drop-down,
<a name="l4407"><span class="linenum">4407</span></a>  <span class="comment">            // either relative to today's year (-nn:+nn), relative to currently displayed year</span>
<a name="l4408"><span class="linenum">4408</span></a>  <span class="comment">            // (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)</span>
<a name="l4409"><span class="linenum">4409</span></a>          showOtherMonths: false, // True to show dates in other months, false to leave blank
<a name="l4410"><span class="linenum">4410</span></a>          selectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable
<a name="l4411"><span class="linenum">4411</span></a>          showWeek: false, // True to show week of the year, false to not show it
<a name="l4412"><span class="linenum">4412</span></a>          calculateWeek: this.iso8601Week, // How to calculate the week of the year,
<a name="l4413"><span class="linenum">4413</span></a>  <span class="comment">            // takes a Date and returns the number of the week for it</span>
<a name="l4414"><span class="linenum">4414</span></a>          shortYearCutoff: &quot;+10&quot;, // Short year values &lt; this are in the current century,
<a name="l4415"><span class="linenum">4415</span></a>  <span class="comment">            // &gt; this are in the previous century,</span>
<a name="l4416"><span class="linenum">4416</span></a>  <span class="comment">            // string value starting with &quot;+&quot; for current year + value</span>
<a name="l4417"><span class="linenum">4417</span></a>          minDate: null, // The earliest selectable date, or null for no limit
<a name="l4418"><span class="linenum">4418</span></a>          maxDate: null, // The latest selectable date, or null for no limit
<a name="l4419"><span class="linenum">4419</span></a>          duration: &quot;fast&quot;, // Duration of display/closure
<a name="l4420"><span class="linenum">4420</span></a>          beforeShowDay: null, // Function that takes a date and returns an array with
<a name="l4421"><span class="linenum">4421</span></a>  <span class="comment">            // [0] = true if selectable, false if not, [1] = custom CSS class name(s) or &quot;&quot;,</span>
<a name="l4422"><span class="linenum">4422</span></a>  <span class="comment">            // [2] = cell title (optional), e.g. $.datepicker.noWeekends</span>
<a name="l4423"><span class="linenum">4423</span></a>          beforeShow: null, // Function that takes an input field and
<a name="l4424"><span class="linenum">4424</span></a>  <span class="comment">            // returns a set of custom settings for the date picker</span>
<a name="l4425"><span class="linenum">4425</span></a>          onSelect: null, // Define a callback function when a date is selected
<a name="l4426"><span class="linenum">4426</span></a>          onChangeMonthYear: null, // Define a callback function when the month or year is changed
<a name="l4427"><span class="linenum">4427</span></a>          onClose: null, // Define a callback function when the datepicker is closed
<a name="l4428"><span class="linenum">4428</span></a>          numberOfMonths: 1, // Number of months to show at a time
<a name="l4429"><span class="linenum">4429</span></a>          showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)
<a name="l4430"><span class="linenum">4430</span></a>          stepMonths: 1, // Number of months to step back/forward
<a name="l4431"><span class="linenum">4431</span></a>          stepBigMonths: 12, // Number of months to step back/forward for the big links
<a name="l4432"><span class="linenum">4432</span></a>          altField: &quot;&quot;, // Selector for an alternate field to store selected dates into
<a name="l4433"><span class="linenum">4433</span></a>          altFormat: &quot;&quot;, // The date format to use for the alternate field
<a name="l4434"><span class="linenum">4434</span></a>          constrainInput: true, // The input is constrained by the current date format
<a name="l4435"><span class="linenum">4435</span></a>          showButtonPanel: false, // True to show button panel, false to not show it
<a name="l4436"><span class="linenum">4436</span></a>          autoSize: false, // True to size the input for the date format, false to leave as is
<a name="l4437"><span class="linenum">4437</span></a>          disabled: false // The initial disabled state
<a name="l4438"><span class="linenum">4438</span></a>      };
<a name="l4439"><span class="linenum">4439</span></a>      $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(this._defaults, this.regional[&quot;&quot;]);
<a name="l4440"><span class="linenum">4440</span></a>      this.dpDiv = <a class="function" onClick="logFunction('bindHover')" href="../../../_functions/bindhover.html" onMouseOver="funcPopup(event,'bindhover')">bindHover</a>($(&quot;&lt;div id='&quot; + this._mainDivId + &quot;' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'&gt;&lt;/div&gt;&quot;));
<a name="l4441"><span class="linenum">4441</span></a>  }
<a name="l4442"><span class="linenum">4442</span></a>  
<a name="l4443"><span class="linenum">4443</span></a>  $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(Datepicker.prototype, {
<a name="l4444"><span class="linenum">4444</span></a>  <span class="comment">    /* Class name added to elements to indicate already configured with a date picker. */</span>
<a name="l4445"><span class="linenum">4445</span></a>      markerClassName: &quot;hasDatepicker&quot;,
<a name="l4446"><span class="linenum">4446</span></a>  
<a name="l4447"><span class="linenum">4447</span></a>  <span class="comment">    //Keep track of the maximum number of rows displayed (see #7043)</span>
<a name="l4448"><span class="linenum">4448</span></a>      maxRows: 4,
<a name="l4449"><span class="linenum">4449</span></a>  
<a name="l4450"><span class="linenum">4450</span></a>  <span class="comment">    // TODO rename to &quot;widget&quot; when switching to widget factory</span>
<a name="l4451"><span class="linenum">4451</span></a>      _widgetDatepicker: function() {
<a name="l4452"><span class="linenum">4452</span></a>          return this.dpDiv;
<a name="l4453"><span class="linenum">4453</span></a>      },
<a name="l4454"><span class="linenum">4454</span></a>  
<a name="l4455"><span class="linenum">4455</span></a>      <span class="comment">/* Override the default settings for all instances of the date picker.</span>
<a name="l4456"><span class="linenum">4456</span></a>  <span class="comment">     * @param  settings  object - the new settings to use as defaults (anonymous object)</span>
<a name="l4457"><span class="linenum">4457</span></a>  <span class="comment">     * @return the manager object</span>
<a name="l4458"><span class="linenum">4458</span></a>  <span class="comment">     */</span>
<a name="l4459"><span class="linenum">4459</span></a>      setDefaults: function(settings) {
<a name="l4460"><span class="linenum">4460</span></a>          <a class="function" onClick="logFunction('extendRemove')" href="../../../_functions/extendremove.html" onMouseOver="funcPopup(event,'extendremove')">extendRemove</a>(this._defaults, settings || {});
<a name="l4461"><span class="linenum">4461</span></a>          return this;
<a name="l4462"><span class="linenum">4462</span></a>      },
<a name="l4463"><span class="linenum">4463</span></a>  
<a name="l4464"><span class="linenum">4464</span></a>      <span class="comment">/* Attach the date picker to a jQuery selection.</span>
<a name="l4465"><span class="linenum">4465</span></a>  <span class="comment">     * @param  target    element - the target input field or division or span</span>
<a name="l4466"><span class="linenum">4466</span></a>  <span class="comment">     * @param  settings  object - the new settings to use for this date picker instance (anonymous)</span>
<a name="l4467"><span class="linenum">4467</span></a>  <span class="comment">     */</span>
<a name="l4468"><span class="linenum">4468</span></a>      _attachDatepicker: function(target, settings) {
<a name="l4469"><span class="linenum">4469</span></a>          var nodeName, inline, inst;
<a name="l4470"><span class="linenum">4470</span></a>          nodeName = target.nodeName.toLowerCase();
<a name="l4471"><span class="linenum">4471</span></a>          inline = (nodeName === &quot;div&quot; || nodeName === &quot;span&quot;);
<a name="l4472"><span class="linenum">4472</span></a>          if (!target.id) {
<a name="l4473"><span class="linenum">4473</span></a>              this.uuid += 1;
<a name="l4474"><span class="linenum">4474</span></a>              target.id = &quot;dp&quot; + this.uuid;
<a name="l4475"><span class="linenum">4475</span></a>          }
<a name="l4476"><span class="linenum">4476</span></a>          inst = this._newInst($(target), inline);
<a name="l4477"><span class="linenum">4477</span></a>          inst.settings = $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({}, settings || {});
<a name="l4478"><span class="linenum">4478</span></a>          if (nodeName === &quot;input&quot;) {
<a name="l4479"><span class="linenum">4479</span></a>              this._connectDatepicker(target, inst);
<a name="l4480"><span class="linenum">4480</span></a>          } else if (inline) {
<a name="l4481"><span class="linenum">4481</span></a>              this._inlineDatepicker(target, inst);
<a name="l4482"><span class="linenum">4482</span></a>          }
<a name="l4483"><span class="linenum">4483</span></a>      },
<a name="l4484"><span class="linenum">4484</span></a>  
<a name="l4485"><span class="linenum">4485</span></a>  <span class="comment">    /* Create a new instance object. */</span>
<a name="l4486"><span class="linenum">4486</span></a>      _newInst: function(target, inline) {
<a name="l4487"><span class="linenum">4487</span></a>          var id = target[0].id.<a class="function" onClick="logFunction('replace')" href="../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/([^A-Za-z0-9_\-])/g, &quot;\\\\<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>&quot;); <span class="comment">// escape jQuery meta chars</span>
<a name="l4488"><span class="linenum">4488</span></a>          return {id: id, input: target, // associated target
<a name="l4489"><span class="linenum">4489</span></a>              selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection
<a name="l4490"><span class="linenum">4490</span></a>              drawMonth: 0, drawYear: 0, // month being drawn
<a name="l4491"><span class="linenum">4491</span></a>              inline: inline, // is datepicker inline or not
<a name="l4492"><span class="linenum">4492</span></a>              dpDiv: (!inline ? this.dpDiv : // presentation div
<a name="l4493"><span class="linenum">4493</span></a>              <a class="function" onClick="logFunction('bindHover')" href="../../../_functions/bindhover.html" onMouseOver="funcPopup(event,'bindhover')">bindHover</a>($(&quot;&lt;div class='&quot; + this._inlineClass + &quot; ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'&gt;&lt;/div&gt;&quot;)))};
<a name="l4494"><span class="linenum">4494</span></a>      },
<a name="l4495"><span class="linenum">4495</span></a>  
<a name="l4496"><span class="linenum">4496</span></a>  <span class="comment">    /* Attach the date picker to an input field. */</span>
<a name="l4497"><span class="linenum">4497</span></a>      _connectDatepicker: function(target, inst) {
<a name="l4498"><span class="linenum">4498</span></a>          var input = $(target);
<a name="l4499"><span class="linenum">4499</span></a>          inst.append = $([]);
<a name="l4500"><span class="linenum">4500</span></a>          inst.trigger = $([]);
<a name="l4501"><span class="linenum">4501</span></a>          if (input.hasClass(this.markerClassName)) {
<a name="l4502"><span class="linenum">4502</span></a>              return;
<a name="l4503"><span class="linenum">4503</span></a>          }
<a name="l4504"><span class="linenum">4504</span></a>          this._attachments(input, inst);
<a name="l4505"><span class="linenum">4505</span></a>          input.addClass(this.markerClassName).keydown(this._doKeyDown).
<a name="l4506"><span class="linenum">4506</span></a>              keypress(this._doKeyPress).keyup(this._doKeyUp);
<a name="l4507"><span class="linenum">4507</span></a>          this._autoSize(inst);
<a name="l4508"><span class="linenum">4508</span></a>          $.data(target, PROP_NAME, inst);
<a name="l4509"><span class="linenum">4509</span></a>  <span class="comment">        //If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)</span>
<a name="l4510"><span class="linenum">4510</span></a>          if( inst.settings.disabled ) {
<a name="l4511"><span class="linenum">4511</span></a>              this._disableDatepicker( target );
<a name="l4512"><span class="linenum">4512</span></a>          }
<a name="l4513"><span class="linenum">4513</span></a>      },
<a name="l4514"><span class="linenum">4514</span></a>  
<a name="l4515"><span class="linenum">4515</span></a>  <span class="comment">    /* Make attachments based on settings. */</span>
<a name="l4516"><span class="linenum">4516</span></a>      _attachments: function(input, inst) {
<a name="l4517"><span class="linenum">4517</span></a>          var showOn, buttonText, buttonImage,
<a name="l4518"><span class="linenum">4518</span></a>              appendText = this._get(inst, &quot;appendText&quot;),
<a name="l4519"><span class="linenum">4519</span></a>              isRTL = this._get(inst, &quot;isRTL&quot;);
<a name="l4520"><span class="linenum">4520</span></a>  
<a name="l4521"><span class="linenum">4521</span></a>          if (inst.append) {
<a name="l4522"><span class="linenum">4522</span></a>              inst.append.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l4523"><span class="linenum">4523</span></a>          }
<a name="l4524"><span class="linenum">4524</span></a>          if (appendText) {
<a name="l4525"><span class="linenum">4525</span></a>              inst.append = $(&quot;&lt;span class='&quot; + this._appendClass + &quot;'&gt;&quot; + appendText + &quot;&lt;/span&gt;&quot;);
<a name="l4526"><span class="linenum">4526</span></a>              input[isRTL ? &quot;before&quot; : &quot;after&quot;](inst.append);
<a name="l4527"><span class="linenum">4527</span></a>          }
<a name="l4528"><span class="linenum">4528</span></a>  
<a name="l4529"><span class="linenum">4529</span></a>          input.<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;focus&quot;, this._showDatepicker);
<a name="l4530"><span class="linenum">4530</span></a>  
<a name="l4531"><span class="linenum">4531</span></a>          if (inst.trigger) {
<a name="l4532"><span class="linenum">4532</span></a>              inst.trigger.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l4533"><span class="linenum">4533</span></a>          }
<a name="l4534"><span class="linenum">4534</span></a>  
<a name="l4535"><span class="linenum">4535</span></a>          showOn = this._get(inst, &quot;showOn&quot;);
<a name="l4536"><span class="linenum">4536</span></a>          if (showOn === &quot;focus&quot; || showOn === &quot;both&quot;) { // pop-up date picker when in the marked field
<a name="l4537"><span class="linenum">4537</span></a>              input.focus(this._showDatepicker);
<a name="l4538"><span class="linenum">4538</span></a>          }
<a name="l4539"><span class="linenum">4539</span></a>          if (showOn === &quot;button&quot; || showOn === &quot;both&quot;) { // pop-up date picker when button clicked
<a name="l4540"><span class="linenum">4540</span></a>              buttonText = this._get(inst, &quot;buttonText&quot;);
<a name="l4541"><span class="linenum">4541</span></a>              buttonImage = this._get(inst, &quot;buttonImage&quot;);
<a name="l4542"><span class="linenum">4542</span></a>              inst.trigger = $(this._get(inst, &quot;buttonImageOnly&quot;) ?
<a name="l4543"><span class="linenum">4543</span></a>                  $(&quot;&lt;img/&gt;&quot;).addClass(this._triggerClass).
<a name="l4544"><span class="linenum">4544</span></a>                      attr({ src: buttonImage, alt: buttonText, title: buttonText }) :
<a name="l4545"><span class="linenum">4545</span></a>                  $(&quot;&lt;button type='button'&gt;&lt;/button&gt;&quot;).addClass(this._triggerClass).
<a name="l4546"><span class="linenum">4546</span></a>                      html(!buttonImage ? buttonText : $(&quot;&lt;img/&gt;&quot;).attr(
<a name="l4547"><span class="linenum">4547</span></a>                      { src:buttonImage, alt:buttonText, title:buttonText })));
<a name="l4548"><span class="linenum">4548</span></a>              input[isRTL ? &quot;before&quot; : &quot;after&quot;](inst.trigger);
<a name="l4549"><span class="linenum">4549</span></a>              inst.trigger.click(function() {
<a name="l4550"><span class="linenum">4550</span></a>                  if ($.datepicker._datepickerShowing &amp;&amp; $.datepicker._lastInput === input[0]) {
<a name="l4551"><span class="linenum">4551</span></a>                      $.datepicker._hideDatepicker();
<a name="l4552"><span class="linenum">4552</span></a>                  } else if ($.datepicker._datepickerShowing &amp;&amp; $.datepicker._lastInput !== input[0]) {
<a name="l4553"><span class="linenum">4553</span></a>                      $.datepicker._hideDatepicker();
<a name="l4554"><span class="linenum">4554</span></a>                      $.datepicker._showDatepicker(input[0]);
<a name="l4555"><span class="linenum">4555</span></a>                  } else {
<a name="l4556"><span class="linenum">4556</span></a>                      $.datepicker._showDatepicker(input[0]);
<a name="l4557"><span class="linenum">4557</span></a>                  }
<a name="l4558"><span class="linenum">4558</span></a>                  return false;
<a name="l4559"><span class="linenum">4559</span></a>              });
<a name="l4560"><span class="linenum">4560</span></a>          }
<a name="l4561"><span class="linenum">4561</span></a>      },
<a name="l4562"><span class="linenum">4562</span></a>  
<a name="l4563"><span class="linenum">4563</span></a>  <span class="comment">    /* Apply the maximum length for the date format. */</span>
<a name="l4564"><span class="linenum">4564</span></a>      _autoSize: function(inst) {
<a name="l4565"><span class="linenum">4565</span></a>          if (this._get(inst, &quot;autoSize&quot;) &amp;&amp; !inst.inline) {
<a name="l4566"><span class="linenum">4566</span></a>              var findMax, max, maxI, i,
<a name="l4567"><span class="linenum">4567</span></a>                  date = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(2009, 12 - 1, 20), // Ensure double digits
<a name="l4568"><span class="linenum">4568</span></a>                  dateFormat = this._get(inst, &quot;dateFormat&quot;);
<a name="l4569"><span class="linenum">4569</span></a>  
<a name="l4570"><span class="linenum">4570</span></a>              if (dateFormat.match(/[DM]/)) {
<a name="l4571"><span class="linenum">4571</span></a>                  findMax = function(names) {
<a name="l4572"><span class="linenum">4572</span></a>                      max = 0;
<a name="l4573"><span class="linenum">4573</span></a>                      maxI = 0;
<a name="l4574"><span class="linenum">4574</span></a>                      for (i = 0; i &lt; names.length; i++) {
<a name="l4575"><span class="linenum">4575</span></a>                          if (names[i].length &gt; max) {
<a name="l4576"><span class="linenum">4576</span></a>                              max = names[i].length;
<a name="l4577"><span class="linenum">4577</span></a>                              maxI = i;
<a name="l4578"><span class="linenum">4578</span></a>                          }
<a name="l4579"><span class="linenum">4579</span></a>                      }
<a name="l4580"><span class="linenum">4580</span></a>                      return maxI;
<a name="l4581"><span class="linenum">4581</span></a>                  };
<a name="l4582"><span class="linenum">4582</span></a>                  date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?
<a name="l4583"><span class="linenum">4583</span></a>                      &quot;monthNames&quot; : &quot;monthNamesShort&quot;))));
<a name="l4584"><span class="linenum">4584</span></a>                  date.<a class="function" onClick="logFunction('setDate')" href="../../../_functions/setdate.html" onMouseOver="funcPopup(event,'setdate')">setDate</a>(findMax(this._get(inst, (dateFormat.match(/DD/) ?
<a name="l4585"><span class="linenum">4585</span></a>                      &quot;dayNames&quot; : &quot;dayNamesShort&quot;))) + 20 - date.getDay());
<a name="l4586"><span class="linenum">4586</span></a>              }
<a name="l4587"><span class="linenum">4587</span></a>              inst.input.attr(&quot;size&quot;, this._formatDate(inst, date).length);
<a name="l4588"><span class="linenum">4588</span></a>          }
<a name="l4589"><span class="linenum">4589</span></a>      },
<a name="l4590"><span class="linenum">4590</span></a>  
<a name="l4591"><span class="linenum">4591</span></a>  <span class="comment">    /* Attach an inline date picker to a div. */</span>
<a name="l4592"><span class="linenum">4592</span></a>      _inlineDatepicker: function(target, inst) {
<a name="l4593"><span class="linenum">4593</span></a>          var divSpan = $(target);
<a name="l4594"><span class="linenum">4594</span></a>          if (divSpan.hasClass(this.markerClassName)) {
<a name="l4595"><span class="linenum">4595</span></a>              return;
<a name="l4596"><span class="linenum">4596</span></a>          }
<a name="l4597"><span class="linenum">4597</span></a>          divSpan.addClass(this.markerClassName).<a class="function" onClick="logFunction('append')" href="../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>(inst.dpDiv);
<a name="l4598"><span class="linenum">4598</span></a>          $.data(target, PROP_NAME, inst);
<a name="l4599"><span class="linenum">4599</span></a>          this._setDate(inst, this._getDefaultDate(inst), true);
<a name="l4600"><span class="linenum">4600</span></a>          this._updateDatepicker(inst);
<a name="l4601"><span class="linenum">4601</span></a>          this._updateAlternate(inst);
<a name="l4602"><span class="linenum">4602</span></a>  <span class="comment">        //If disabled option is true, disable the datepicker before showing it (see ticket #5665)</span>
<a name="l4603"><span class="linenum">4603</span></a>          if( inst.settings.disabled ) {
<a name="l4604"><span class="linenum">4604</span></a>              this._disableDatepicker( target );
<a name="l4605"><span class="linenum">4605</span></a>          }
<a name="l4606"><span class="linenum">4606</span></a>  <span class="comment">        // Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements</span>
<a name="l4607"><span class="linenum">4607</span></a>  <span class="comment">        // http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height</span>
<a name="l4608"><span class="linenum">4608</span></a>          inst.dpDiv.css( &quot;display&quot;, &quot;block&quot; );
<a name="l4609"><span class="linenum">4609</span></a>      },
<a name="l4610"><span class="linenum">4610</span></a>  
<a name="l4611"><span class="linenum">4611</span></a>      <span class="comment">/* Pop-up the date picker in a &quot;dialog&quot; box.</span>
<a name="l4612"><span class="linenum">4612</span></a>  <span class="comment">     * @param  input element - ignored</span>
<a name="l4613"><span class="linenum">4613</span></a>  <span class="comment">     * @param  date    string or Date - the initial date to display</span>
<a name="l4614"><span class="linenum">4614</span></a>  <span class="comment">     * @param  onSelect  function - the function to call when a date is selected</span>
<a name="l4615"><span class="linenum">4615</span></a>  <span class="comment">     * @param  settings  object - update the dialog date picker instance's settings (anonymous object)</span>
<a name="l4616"><span class="linenum">4616</span></a>  <span class="comment">     * @param  pos int[2] - coordinates for the dialog's position within the screen or</span>
<a name="l4617"><span class="linenum">4617</span></a>  <span class="comment">     *                    event - with x/y coordinates or</span>
<a name="l4618"><span class="linenum">4618</span></a>  <span class="comment">     *                    leave empty for default (screen centre)</span>
<a name="l4619"><span class="linenum">4619</span></a>  <span class="comment">     * @return the manager object</span>
<a name="l4620"><span class="linenum">4620</span></a>  <span class="comment">     */</span>
<a name="l4621"><span class="linenum">4621</span></a>      _dialogDatepicker: function(input, date, onSelect, settings, pos) {
<a name="l4622"><span class="linenum">4622</span></a>          var id, browserWidth, browserHeight, scrollX, scrollY,
<a name="l4623"><span class="linenum">4623</span></a>              inst = this._dialogInst; <span class="comment">// internal instance</span>
<a name="l4624"><span class="linenum">4624</span></a>  
<a name="l4625"><span class="linenum">4625</span></a>          if (!inst) {
<a name="l4626"><span class="linenum">4626</span></a>              this.uuid += 1;
<a name="l4627"><span class="linenum">4627</span></a>              id = &quot;dp&quot; + this.uuid;
<a name="l4628"><span class="linenum">4628</span></a>              this._dialogInput = $(&quot;&lt;input type='text' id='&quot; + id +
<a name="l4629"><span class="linenum">4629</span></a>                  &quot;' style='position: absolute; top: -100px; width: 0px;'/&gt;&quot;);
<a name="l4630"><span class="linenum">4630</span></a>              this._dialogInput.keydown(this._doKeyDown);
<a name="l4631"><span class="linenum">4631</span></a>              $(&quot;body&quot;).<a class="function" onClick="logFunction('append')" href="../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>(this._dialogInput);
<a name="l4632"><span class="linenum">4632</span></a>              inst = this._dialogInst = this._newInst(this._dialogInput, false);
<a name="l4633"><span class="linenum">4633</span></a>              inst.settings = {};
<a name="l4634"><span class="linenum">4634</span></a>              $.data(this._dialogInput[0], PROP_NAME, inst);
<a name="l4635"><span class="linenum">4635</span></a>          }
<a name="l4636"><span class="linenum">4636</span></a>          <a class="function" onClick="logFunction('extendRemove')" href="../../../_functions/extendremove.html" onMouseOver="funcPopup(event,'extendremove')">extendRemove</a>(inst.settings, settings || {});
<a name="l4637"><span class="linenum">4637</span></a>          date = (date &amp;&amp; date.constructor === Date ? this._formatDate(inst, date) : date);
<a name="l4638"><span class="linenum">4638</span></a>          this._dialogInput.val(date);
<a name="l4639"><span class="linenum">4639</span></a>  
<a name="l4640"><span class="linenum">4640</span></a>          this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);
<a name="l4641"><span class="linenum">4641</span></a>          if (!this._pos) {
<a name="l4642"><span class="linenum">4642</span></a>              browserWidth = document.documentElement.clientWidth;
<a name="l4643"><span class="linenum">4643</span></a>              browserHeight = document.documentElement.clientHeight;
<a name="l4644"><span class="linenum">4644</span></a>              scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
<a name="l4645"><span class="linenum">4645</span></a>              scrollY = document.documentElement.scrollTop || document.body.scrollTop;
<a name="l4646"><span class="linenum">4646</span></a>              this._pos = // should use actual width/height below
<a name="l4647"><span class="linenum">4647</span></a>                  [(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];
<a name="l4648"><span class="linenum">4648</span></a>          }
<a name="l4649"><span class="linenum">4649</span></a>  
<a name="l4650"><span class="linenum">4650</span></a>  <span class="comment">        // move input on screen for focus, but hidden behind dialog</span>
<a name="l4651"><span class="linenum">4651</span></a>          this._dialogInput.css(&quot;left&quot;, (this._pos[0] + 20) + &quot;px&quot;).css(&quot;top&quot;, this._pos[1] + &quot;px&quot;);
<a name="l4652"><span class="linenum">4652</span></a>          inst.settings.onSelect = onSelect;
<a name="l4653"><span class="linenum">4653</span></a>          this._inDialog = true;
<a name="l4654"><span class="linenum">4654</span></a>          this.dpDiv.addClass(this._dialogClass);
<a name="l4655"><span class="linenum">4655</span></a>          this._showDatepicker(this._dialogInput[0]);
<a name="l4656"><span class="linenum">4656</span></a>          if ($.blockUI) {
<a name="l4657"><span class="linenum">4657</span></a>              $.blockUI(this.dpDiv);
<a name="l4658"><span class="linenum">4658</span></a>          }
<a name="l4659"><span class="linenum">4659</span></a>          $.data(this._dialogInput[0], PROP_NAME, inst);
<a name="l4660"><span class="linenum">4660</span></a>          return this;
<a name="l4661"><span class="linenum">4661</span></a>      },
<a name="l4662"><span class="linenum">4662</span></a>  
<a name="l4663"><span class="linenum">4663</span></a>      <span class="comment">/* Detach a datepicker from its control.</span>
<a name="l4664"><span class="linenum">4664</span></a>  <span class="comment">     * @param  target    element - the target input field or division or span</span>
<a name="l4665"><span class="linenum">4665</span></a>  <span class="comment">     */</span>
<a name="l4666"><span class="linenum">4666</span></a>      _destroyDatepicker: function(target) {
<a name="l4667"><span class="linenum">4667</span></a>          var nodeName,
<a name="l4668"><span class="linenum">4668</span></a>              <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> = $(target),
<a name="l4669"><span class="linenum">4669</span></a>              inst = $.data(target, PROP_NAME);
<a name="l4670"><span class="linenum">4670</span></a>  
<a name="l4671"><span class="linenum">4671</span></a>          if (!<a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.hasClass(this.markerClassName)) {
<a name="l4672"><span class="linenum">4672</span></a>              return;
<a name="l4673"><span class="linenum">4673</span></a>          }
<a name="l4674"><span class="linenum">4674</span></a>  
<a name="l4675"><span class="linenum">4675</span></a>          nodeName = target.nodeName.toLowerCase();
<a name="l4676"><span class="linenum">4676</span></a>          $.removeData(target, PROP_NAME);
<a name="l4677"><span class="linenum">4677</span></a>          if (nodeName === &quot;input&quot;) {
<a name="l4678"><span class="linenum">4678</span></a>              inst.append.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l4679"><span class="linenum">4679</span></a>              inst.trigger.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l4680"><span class="linenum">4680</span></a>              <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.removeClass(this.markerClassName).
<a name="l4681"><span class="linenum">4681</span></a>                  <a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;focus&quot;, this._showDatepicker).
<a name="l4682"><span class="linenum">4682</span></a>                  <a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;keydown&quot;, this._doKeyDown).
<a name="l4683"><span class="linenum">4683</span></a>                  <a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;keypress&quot;, this._doKeyPress).
<a name="l4684"><span class="linenum">4684</span></a>                  <a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;keyup&quot;, this._doKeyUp);
<a name="l4685"><span class="linenum">4685</span></a>          } else if (nodeName === &quot;div&quot; || nodeName === &quot;span&quot;) {
<a name="l4686"><span class="linenum">4686</span></a>              <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.removeClass(this.markerClassName).empty();
<a name="l4687"><span class="linenum">4687</span></a>          }
<a name="l4688"><span class="linenum">4688</span></a>      },
<a name="l4689"><span class="linenum">4689</span></a>  
<a name="l4690"><span class="linenum">4690</span></a>      <span class="comment">/* Enable the date picker to a jQuery selection.</span>
<a name="l4691"><span class="linenum">4691</span></a>  <span class="comment">     * @param  target    element - the target input field or division or span</span>
<a name="l4692"><span class="linenum">4692</span></a>  <span class="comment">     */</span>
<a name="l4693"><span class="linenum">4693</span></a>      _enableDatepicker: function(target) {
<a name="l4694"><span class="linenum">4694</span></a>          var nodeName, inline,
<a name="l4695"><span class="linenum">4695</span></a>              <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> = $(target),
<a name="l4696"><span class="linenum">4696</span></a>              inst = $.data(target, PROP_NAME);
<a name="l4697"><span class="linenum">4697</span></a>  
<a name="l4698"><span class="linenum">4698</span></a>          if (!<a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.hasClass(this.markerClassName)) {
<a name="l4699"><span class="linenum">4699</span></a>              return;
<a name="l4700"><span class="linenum">4700</span></a>          }
<a name="l4701"><span class="linenum">4701</span></a>  
<a name="l4702"><span class="linenum">4702</span></a>          nodeName = target.nodeName.toLowerCase();
<a name="l4703"><span class="linenum">4703</span></a>          if (nodeName === &quot;input&quot;) {
<a name="l4704"><span class="linenum">4704</span></a>              target.disabled = false;
<a name="l4705"><span class="linenum">4705</span></a>              inst.trigger.<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(&quot;button&quot;).
<a name="l4706"><span class="linenum">4706</span></a>                  <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() { this.disabled = false; }).<a class="phpfunction" onClick="logFunction('end')" href="../../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>().
<a name="l4707"><span class="linenum">4707</span></a>                  <a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(&quot;img&quot;).css({opacity: &quot;1.0&quot;, cursor: &quot;&quot;});
<a name="l4708"><span class="linenum">4708</span></a>          } else if (nodeName === &quot;div&quot; || nodeName === &quot;span&quot;) {
<a name="l4709"><span class="linenum">4709</span></a>              inline = <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.children(&quot;.&quot; + this._inlineClass);
<a name="l4710"><span class="linenum">4710</span></a>              inline.children().removeClass(&quot;ui-state-disabled&quot;);
<a name="l4711"><span class="linenum">4711</span></a>              inline.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;select.ui-datepicker-month, select.ui-datepicker-year&quot;).
<a name="l4712"><span class="linenum">4712</span></a>                  prop(&quot;disabled&quot;, false);
<a name="l4713"><span class="linenum">4713</span></a>          }
<a name="l4714"><span class="linenum">4714</span></a>          this._disabledInputs = $.map(this._disabledInputs,
<a name="l4715"><span class="linenum">4715</span></a>              function(value) { return (value === target ? null : value); }); <span class="comment">// delete entry</span>
<a name="l4716"><span class="linenum">4716</span></a>      },
<a name="l4717"><span class="linenum">4717</span></a>  
<a name="l4718"><span class="linenum">4718</span></a>      <span class="comment">/* Disable the date picker to a jQuery selection.</span>
<a name="l4719"><span class="linenum">4719</span></a>  <span class="comment">     * @param  target    element - the target input field or division or span</span>
<a name="l4720"><span class="linenum">4720</span></a>  <span class="comment">     */</span>
<a name="l4721"><span class="linenum">4721</span></a>      _disableDatepicker: function(target) {
<a name="l4722"><span class="linenum">4722</span></a>          var nodeName, inline,
<a name="l4723"><span class="linenum">4723</span></a>              <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> = $(target),
<a name="l4724"><span class="linenum">4724</span></a>              inst = $.data(target, PROP_NAME);
<a name="l4725"><span class="linenum">4725</span></a>  
<a name="l4726"><span class="linenum">4726</span></a>          if (!<a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.hasClass(this.markerClassName)) {
<a name="l4727"><span class="linenum">4727</span></a>              return;
<a name="l4728"><span class="linenum">4728</span></a>          }
<a name="l4729"><span class="linenum">4729</span></a>  
<a name="l4730"><span class="linenum">4730</span></a>          nodeName = target.nodeName.toLowerCase();
<a name="l4731"><span class="linenum">4731</span></a>          if (nodeName === &quot;input&quot;) {
<a name="l4732"><span class="linenum">4732</span></a>              target.disabled = true;
<a name="l4733"><span class="linenum">4733</span></a>              inst.trigger.<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(&quot;button&quot;).
<a name="l4734"><span class="linenum">4734</span></a>                  <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() { this.disabled = true; }).<a class="phpfunction" onClick="logFunction('end')" href="../../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>().
<a name="l4735"><span class="linenum">4735</span></a>                  <a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(&quot;img&quot;).css({opacity: &quot;0.5&quot;, cursor: &quot;default&quot;});
<a name="l4736"><span class="linenum">4736</span></a>          } else if (nodeName === &quot;div&quot; || nodeName === &quot;span&quot;) {
<a name="l4737"><span class="linenum">4737</span></a>              inline = <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.children(&quot;.&quot; + this._inlineClass);
<a name="l4738"><span class="linenum">4738</span></a>              inline.children().addClass(&quot;ui-state-disabled&quot;);
<a name="l4739"><span class="linenum">4739</span></a>              inline.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;select.ui-datepicker-month, select.ui-datepicker-year&quot;).
<a name="l4740"><span class="linenum">4740</span></a>                  prop(&quot;disabled&quot;, true);
<a name="l4741"><span class="linenum">4741</span></a>          }
<a name="l4742"><span class="linenum">4742</span></a>          this._disabledInputs = $.map(this._disabledInputs,
<a name="l4743"><span class="linenum">4743</span></a>              function(value) { return (value === target ? null : value); }); <span class="comment">// delete entry</span>
<a name="l4744"><span class="linenum">4744</span></a>          this._disabledInputs[this._disabledInputs.length] = target;
<a name="l4745"><span class="linenum">4745</span></a>      },
<a name="l4746"><span class="linenum">4746</span></a>  
<a name="l4747"><span class="linenum">4747</span></a>      <span class="comment">/* Is the first field in a jQuery collection disabled as a datepicker?</span>
<a name="l4748"><span class="linenum">4748</span></a>  <span class="comment">     * @param  target    element - the target input field or division or span</span>
<a name="l4749"><span class="linenum">4749</span></a>  <span class="comment">     * @return boolean - true if disabled, false if enabled</span>
<a name="l4750"><span class="linenum">4750</span></a>  <span class="comment">     */</span>
<a name="l4751"><span class="linenum">4751</span></a>      _isDisabledDatepicker: function(target) {
<a name="l4752"><span class="linenum">4752</span></a>          if (!target) {
<a name="l4753"><span class="linenum">4753</span></a>              return false;
<a name="l4754"><span class="linenum">4754</span></a>          }
<a name="l4755"><span class="linenum">4755</span></a>          for (var i = 0; i &lt; this._disabledInputs.length; i++) {
<a name="l4756"><span class="linenum">4756</span></a>              if (this._disabledInputs[i] === target) {
<a name="l4757"><span class="linenum">4757</span></a>                  return true;
<a name="l4758"><span class="linenum">4758</span></a>              }
<a name="l4759"><span class="linenum">4759</span></a>          }
<a name="l4760"><span class="linenum">4760</span></a>          return false;
<a name="l4761"><span class="linenum">4761</span></a>      },
<a name="l4762"><span class="linenum">4762</span></a>  
<a name="l4763"><span class="linenum">4763</span></a>      <span class="comment">/* Retrieve the instance data for the target control.</span>
<a name="l4764"><span class="linenum">4764</span></a>  <span class="comment">     * @param  target  element - the target input field or division or span</span>
<a name="l4765"><span class="linenum">4765</span></a>  <span class="comment">     * @return  object - the associated instance data</span>
<a name="l4766"><span class="linenum">4766</span></a>  <span class="comment">     * @throws  error if a jQuery problem getting data</span>
<a name="l4767"><span class="linenum">4767</span></a>  <span class="comment">     */</span>
<a name="l4768"><span class="linenum">4768</span></a>      _getInst: function(target) {
<a name="l4769"><span class="linenum">4769</span></a>          try {
<a name="l4770"><span class="linenum">4770</span></a>              return $.data(target, PROP_NAME);
<a name="l4771"><span class="linenum">4771</span></a>          }
<a name="l4772"><span class="linenum">4772</span></a>          catch (err) {
<a name="l4773"><span class="linenum">4773</span></a>              throw &quot;Missing instance data for this datepicker&quot;;
<a name="l4774"><span class="linenum">4774</span></a>          }
<a name="l4775"><span class="linenum">4775</span></a>      },
<a name="l4776"><span class="linenum">4776</span></a>  
<a name="l4777"><span class="linenum">4777</span></a>      <span class="comment">/* Update or retrieve the settings for a date picker attached to an input field or division.</span>
<a name="l4778"><span class="linenum">4778</span></a>  <span class="comment">     * @param  target  element - the target input field or division or span</span>
<a name="l4779"><span class="linenum">4779</span></a>  <span class="comment">     * @param  name    object - the new settings to update or</span>
<a name="l4780"><span class="linenum">4780</span></a>  <span class="comment">     *                string - the name of the setting to change or retrieve,</span>
<a name="l4781"><span class="linenum">4781</span></a>  <span class="comment">     *                when retrieving also &quot;all&quot; for all instance settings or</span>
<a name="l4782"><span class="linenum">4782</span></a>  <span class="comment">     *                &quot;defaults&quot; for all global defaults</span>
<a name="l4783"><span class="linenum">4783</span></a>  <span class="comment">     * @param  value   any - the new value for the setting</span>
<a name="l4784"><span class="linenum">4784</span></a>  <span class="comment">     *                (omit if above is an object or to retrieve a value)</span>
<a name="l4785"><span class="linenum">4785</span></a>  <span class="comment">     */</span>
<a name="l4786"><span class="linenum">4786</span></a>      _optionDatepicker: function(target, name, value) {
<a name="l4787"><span class="linenum">4787</span></a>          var settings, date, minDate, maxDate,
<a name="l4788"><span class="linenum">4788</span></a>              inst = this._getInst(target);
<a name="l4789"><span class="linenum">4789</span></a>  
<a name="l4790"><span class="linenum">4790</span></a>          if (arguments.length === 2 &amp;&amp; typeof name === &quot;string&quot;) {
<a name="l4791"><span class="linenum">4791</span></a>              return (name === &quot;defaults&quot; ? $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({}, $.datepicker._defaults) :
<a name="l4792"><span class="linenum">4792</span></a>                  (inst ? (name === &quot;all&quot; ? $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({}, inst.settings) :
<a name="l4793"><span class="linenum">4793</span></a>                  this._get(inst, name)) : null));
<a name="l4794"><span class="linenum">4794</span></a>          }
<a name="l4795"><span class="linenum">4795</span></a>  
<a name="l4796"><span class="linenum">4796</span></a>          settings = name || {};
<a name="l4797"><span class="linenum">4797</span></a>          if (typeof name === &quot;string&quot;) {
<a name="l4798"><span class="linenum">4798</span></a>              settings = {};
<a name="l4799"><span class="linenum">4799</span></a>              settings[name] = value;
<a name="l4800"><span class="linenum">4800</span></a>          }
<a name="l4801"><span class="linenum">4801</span></a>  
<a name="l4802"><span class="linenum">4802</span></a>          if (inst) {
<a name="l4803"><span class="linenum">4803</span></a>              if (this._curInst === inst) {
<a name="l4804"><span class="linenum">4804</span></a>                  this._hideDatepicker();
<a name="l4805"><span class="linenum">4805</span></a>              }
<a name="l4806"><span class="linenum">4806</span></a>  
<a name="l4807"><span class="linenum">4807</span></a>              date = this._getDateDatepicker(target, true);
<a name="l4808"><span class="linenum">4808</span></a>              minDate = this._getMinMaxDate(inst, &quot;min&quot;);
<a name="l4809"><span class="linenum">4809</span></a>              maxDate = this._getMinMaxDate(inst, &quot;max&quot;);
<a name="l4810"><span class="linenum">4810</span></a>              <a class="function" onClick="logFunction('extendRemove')" href="../../../_functions/extendremove.html" onMouseOver="funcPopup(event,'extendremove')">extendRemove</a>(inst.settings, settings);
<a name="l4811"><span class="linenum">4811</span></a>  <span class="comment">            // reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided</span>
<a name="l4812"><span class="linenum">4812</span></a>              if (minDate !== null &amp;&amp; settings.dateFormat !== undefined &amp;&amp; settings.minDate === undefined) {
<a name="l4813"><span class="linenum">4813</span></a>                  inst.settings.minDate = this._formatDate(inst, minDate);
<a name="l4814"><span class="linenum">4814</span></a>              }
<a name="l4815"><span class="linenum">4815</span></a>              if (maxDate !== null &amp;&amp; settings.dateFormat !== undefined &amp;&amp; settings.maxDate === undefined) {
<a name="l4816"><span class="linenum">4816</span></a>                  inst.settings.maxDate = this._formatDate(inst, maxDate);
<a name="l4817"><span class="linenum">4817</span></a>              }
<a name="l4818"><span class="linenum">4818</span></a>              if ( &quot;disabled&quot; in settings ) {
<a name="l4819"><span class="linenum">4819</span></a>                  if ( settings.disabled ) {
<a name="l4820"><span class="linenum">4820</span></a>                      this._disableDatepicker(target);
<a name="l4821"><span class="linenum">4821</span></a>                  } else {
<a name="l4822"><span class="linenum">4822</span></a>                      this._enableDatepicker(target);
<a name="l4823"><span class="linenum">4823</span></a>                  }
<a name="l4824"><span class="linenum">4824</span></a>              }
<a name="l4825"><span class="linenum">4825</span></a>              this._attachments($(target), inst);
<a name="l4826"><span class="linenum">4826</span></a>              this._autoSize(inst);
<a name="l4827"><span class="linenum">4827</span></a>              this._setDate(inst, date);
<a name="l4828"><span class="linenum">4828</span></a>              this._updateAlternate(inst);
<a name="l4829"><span class="linenum">4829</span></a>              this._updateDatepicker(inst);
<a name="l4830"><span class="linenum">4830</span></a>          }
<a name="l4831"><span class="linenum">4831</span></a>      },
<a name="l4832"><span class="linenum">4832</span></a>  
<a name="l4833"><span class="linenum">4833</span></a>  <span class="comment">    // change method deprecated</span>
<a name="l4834"><span class="linenum">4834</span></a>      _changeDatepicker: function(target, name, value) {
<a name="l4835"><span class="linenum">4835</span></a>          this._optionDatepicker(target, name, value);
<a name="l4836"><span class="linenum">4836</span></a>      },
<a name="l4837"><span class="linenum">4837</span></a>  
<a name="l4838"><span class="linenum">4838</span></a>      <span class="comment">/* Redraw the date picker attached to an input field or division.</span>
<a name="l4839"><span class="linenum">4839</span></a>  <span class="comment">     * @param  target  element - the target input field or division or span</span>
<a name="l4840"><span class="linenum">4840</span></a>  <span class="comment">     */</span>
<a name="l4841"><span class="linenum">4841</span></a>      _refreshDatepicker: function(target) {
<a name="l4842"><span class="linenum">4842</span></a>          var inst = this._getInst(target);
<a name="l4843"><span class="linenum">4843</span></a>          if (inst) {
<a name="l4844"><span class="linenum">4844</span></a>              this._updateDatepicker(inst);
<a name="l4845"><span class="linenum">4845</span></a>          }
<a name="l4846"><span class="linenum">4846</span></a>      },
<a name="l4847"><span class="linenum">4847</span></a>  
<a name="l4848"><span class="linenum">4848</span></a>      <span class="comment">/* Set the dates for a jQuery selection.</span>
<a name="l4849"><span class="linenum">4849</span></a>  <span class="comment">     * @param  target element - the target input field or division or span</span>
<a name="l4850"><span class="linenum">4850</span></a>  <span class="comment">     * @param  date    Date - the new date</span>
<a name="l4851"><span class="linenum">4851</span></a>  <span class="comment">     */</span>
<a name="l4852"><span class="linenum">4852</span></a>      _setDateDatepicker: function(target, date) {
<a name="l4853"><span class="linenum">4853</span></a>          var inst = this._getInst(target);
<a name="l4854"><span class="linenum">4854</span></a>          if (inst) {
<a name="l4855"><span class="linenum">4855</span></a>              this._setDate(inst, date);
<a name="l4856"><span class="linenum">4856</span></a>              this._updateDatepicker(inst);
<a name="l4857"><span class="linenum">4857</span></a>              this._updateAlternate(inst);
<a name="l4858"><span class="linenum">4858</span></a>          }
<a name="l4859"><span class="linenum">4859</span></a>      },
<a name="l4860"><span class="linenum">4860</span></a>  
<a name="l4861"><span class="linenum">4861</span></a>      <span class="comment">/* Get the date(s) for the first entry in a jQuery selection.</span>
<a name="l4862"><span class="linenum">4862</span></a>  <span class="comment">     * @param  target element - the target input field or division or span</span>
<a name="l4863"><span class="linenum">4863</span></a>  <span class="comment">     * @param  noDefault boolean - true if no default date is to be used</span>
<a name="l4864"><span class="linenum">4864</span></a>  <span class="comment">     * @return Date - the current date</span>
<a name="l4865"><span class="linenum">4865</span></a>  <span class="comment">     */</span>
<a name="l4866"><span class="linenum">4866</span></a>      _getDateDatepicker: function(target, noDefault) {
<a name="l4867"><span class="linenum">4867</span></a>          var inst = this._getInst(target);
<a name="l4868"><span class="linenum">4868</span></a>          if (inst &amp;&amp; !inst.inline) {
<a name="l4869"><span class="linenum">4869</span></a>              this._setDateFromField(inst, noDefault);
<a name="l4870"><span class="linenum">4870</span></a>          }
<a name="l4871"><span class="linenum">4871</span></a>          return (inst ? this._getDate(inst) : null);
<a name="l4872"><span class="linenum">4872</span></a>      },
<a name="l4873"><span class="linenum">4873</span></a>  
<a name="l4874"><span class="linenum">4874</span></a>  <span class="comment">    /* Handle keystrokes. */</span>
<a name="l4875"><span class="linenum">4875</span></a>      _doKeyDown: function(event) {
<a name="l4876"><span class="linenum">4876</span></a>          var onSelect, dateStr, sel,
<a name="l4877"><span class="linenum">4877</span></a>              inst = $.datepicker._getInst(event.target),
<a name="l4878"><span class="linenum">4878</span></a>              handled = true,
<a name="l4879"><span class="linenum">4879</span></a>              isRTL = inst.dpDiv.is(&quot;.ui-datepicker-rtl&quot;);
<a name="l4880"><span class="linenum">4880</span></a>  
<a name="l4881"><span class="linenum">4881</span></a>          inst._keyEvent = true;
<a name="l4882"><span class="linenum">4882</span></a>          if ($.datepicker._datepickerShowing) {
<a name="l4883"><span class="linenum">4883</span></a>              switch (event.keyCode) {
<a name="l4884"><span class="linenum">4884</span></a>                  case 9: $.datepicker._hideDatepicker();
<a name="l4885"><span class="linenum">4885</span></a>                          handled = false;
<a name="l4886"><span class="linenum">4886</span></a>                          break; <span class="comment">// hide on tab out</span>
<a name="l4887"><span class="linenum">4887</span></a>                  case 13: sel = $(&quot;td.&quot; + $.datepicker._dayOverClass + &quot;:not(.&quot; +
<a name="l4888"><span class="linenum">4888</span></a>                                      $.datepicker._currentClass + &quot;)&quot;, inst.dpDiv);
<a name="l4889"><span class="linenum">4889</span></a>                          if (sel[0]) {
<a name="l4890"><span class="linenum">4890</span></a>                              $.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
<a name="l4891"><span class="linenum">4891</span></a>                          }
<a name="l4892"><span class="linenum">4892</span></a>  
<a name="l4893"><span class="linenum">4893</span></a>                          onSelect = $.datepicker._get(inst, &quot;onSelect&quot;);
<a name="l4894"><span class="linenum">4894</span></a>                          if (onSelect) {
<a name="l4895"><span class="linenum">4895</span></a>                              dateStr = $.datepicker._formatDate(inst);
<a name="l4896"><span class="linenum">4896</span></a>  
<a name="l4897"><span class="linenum">4897</span></a>  <span class="comment">                            // trigger custom callback</span>
<a name="l4898"><span class="linenum">4898</span></a>                              onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);
<a name="l4899"><span class="linenum">4899</span></a>                          } else {
<a name="l4900"><span class="linenum">4900</span></a>                              $.datepicker._hideDatepicker();
<a name="l4901"><span class="linenum">4901</span></a>                          }
<a name="l4902"><span class="linenum">4902</span></a>  
<a name="l4903"><span class="linenum">4903</span></a>                          return false; <span class="comment">// don't submit the form</span>
<a name="l4904"><span class="linenum">4904</span></a>                  case 27: $.datepicker._hideDatepicker();
<a name="l4905"><span class="linenum">4905</span></a>                          break; <span class="comment">// hide on escape</span>
<a name="l4906"><span class="linenum">4906</span></a>                  case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
<a name="l4907"><span class="linenum">4907</span></a>                              -$.datepicker._get(inst, &quot;stepBigMonths&quot;) :
<a name="l4908"><span class="linenum">4908</span></a>                              -$.datepicker._get(inst, &quot;stepMonths&quot;)), &quot;M&quot;);
<a name="l4909"><span class="linenum">4909</span></a>                          break; <span class="comment">// previous month/year on page up/+ ctrl</span>
<a name="l4910"><span class="linenum">4910</span></a>                  case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
<a name="l4911"><span class="linenum">4911</span></a>                              +$.datepicker._get(inst, &quot;stepBigMonths&quot;) :
<a name="l4912"><span class="linenum">4912</span></a>                              +$.datepicker._get(inst, &quot;stepMonths&quot;)), &quot;M&quot;);
<a name="l4913"><span class="linenum">4913</span></a>                          break; <span class="comment">// next month/year on page down/+ ctrl</span>
<a name="l4914"><span class="linenum">4914</span></a>                  case 35: if (event.ctrlKey || event.metaKey) {
<a name="l4915"><span class="linenum">4915</span></a>                              $.datepicker._clearDate(event.target);
<a name="l4916"><span class="linenum">4916</span></a>                          }
<a name="l4917"><span class="linenum">4917</span></a>                          handled = event.ctrlKey || event.metaKey;
<a name="l4918"><span class="linenum">4918</span></a>                          break; <span class="comment">// clear on ctrl or command +end</span>
<a name="l4919"><span class="linenum">4919</span></a>                  case 36: if (event.ctrlKey || event.metaKey) {
<a name="l4920"><span class="linenum">4920</span></a>                              $.datepicker._gotoToday(event.target);
<a name="l4921"><span class="linenum">4921</span></a>                          }
<a name="l4922"><span class="linenum">4922</span></a>                          handled = event.ctrlKey || event.metaKey;
<a name="l4923"><span class="linenum">4923</span></a>                          break; <span class="comment">// current on ctrl or command +home</span>
<a name="l4924"><span class="linenum">4924</span></a>                  case 37: if (event.ctrlKey || event.metaKey) {
<a name="l4925"><span class="linenum">4925</span></a>                              $.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), &quot;D&quot;);
<a name="l4926"><span class="linenum">4926</span></a>                          }
<a name="l4927"><span class="linenum">4927</span></a>                          handled = event.ctrlKey || event.metaKey;
<a name="l4928"><span class="linenum">4928</span></a>  <span class="comment">                        // -1 day on ctrl or command +left</span>
<a name="l4929"><span class="linenum">4929</span></a>                          if (event.originalEvent.altKey) {
<a name="l4930"><span class="linenum">4930</span></a>                              $.datepicker._adjustDate(event.target, (event.ctrlKey ?
<a name="l4931"><span class="linenum">4931</span></a>                                  -$.datepicker._get(inst, &quot;stepBigMonths&quot;) :
<a name="l4932"><span class="linenum">4932</span></a>                                  -$.datepicker._get(inst, &quot;stepMonths&quot;)), &quot;M&quot;);
<a name="l4933"><span class="linenum">4933</span></a>                          }
<a name="l4934"><span class="linenum">4934</span></a>  <span class="comment">                        // next month/year on alt +left on Mac</span>
<a name="l4935"><span class="linenum">4935</span></a>                          break;
<a name="l4936"><span class="linenum">4936</span></a>                  case 38: if (event.ctrlKey || event.metaKey) {
<a name="l4937"><span class="linenum">4937</span></a>                              $.datepicker._adjustDate(event.target, -7, &quot;D&quot;);
<a name="l4938"><span class="linenum">4938</span></a>                          }
<a name="l4939"><span class="linenum">4939</span></a>                          handled = event.ctrlKey || event.metaKey;
<a name="l4940"><span class="linenum">4940</span></a>                          break; <span class="comment">// -1 week on ctrl or command +up</span>
<a name="l4941"><span class="linenum">4941</span></a>                  case 39: if (event.ctrlKey || event.metaKey) {
<a name="l4942"><span class="linenum">4942</span></a>                              $.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), &quot;D&quot;);
<a name="l4943"><span class="linenum">4943</span></a>                          }
<a name="l4944"><span class="linenum">4944</span></a>                          handled = event.ctrlKey || event.metaKey;
<a name="l4945"><span class="linenum">4945</span></a>  <span class="comment">                        // +1 day on ctrl or command +right</span>
<a name="l4946"><span class="linenum">4946</span></a>                          if (event.originalEvent.altKey) {
<a name="l4947"><span class="linenum">4947</span></a>                              $.datepicker._adjustDate(event.target, (event.ctrlKey ?
<a name="l4948"><span class="linenum">4948</span></a>                                  +$.datepicker._get(inst, &quot;stepBigMonths&quot;) :
<a name="l4949"><span class="linenum">4949</span></a>                                  +$.datepicker._get(inst, &quot;stepMonths&quot;)), &quot;M&quot;);
<a name="l4950"><span class="linenum">4950</span></a>                          }
<a name="l4951"><span class="linenum">4951</span></a>  <span class="comment">                        // next month/year on alt +right</span>
<a name="l4952"><span class="linenum">4952</span></a>                          break;
<a name="l4953"><span class="linenum">4953</span></a>                  case 40: if (event.ctrlKey || event.metaKey) {
<a name="l4954"><span class="linenum">4954</span></a>                              $.datepicker._adjustDate(event.target, +7, &quot;D&quot;);
<a name="l4955"><span class="linenum">4955</span></a>                          }
<a name="l4956"><span class="linenum">4956</span></a>                          handled = event.ctrlKey || event.metaKey;
<a name="l4957"><span class="linenum">4957</span></a>                          break; <span class="comment">// +1 week on ctrl or command +down</span>
<a name="l4958"><span class="linenum">4958</span></a>                  default: handled = false;
<a name="l4959"><span class="linenum">4959</span></a>              }
<a name="l4960"><span class="linenum">4960</span></a>          } else if (event.keyCode === 36 &amp;&amp; event.ctrlKey) { // display the date picker on ctrl+home
<a name="l4961"><span class="linenum">4961</span></a>              $.datepicker._showDatepicker(this);
<a name="l4962"><span class="linenum">4962</span></a>          } else {
<a name="l4963"><span class="linenum">4963</span></a>              handled = false;
<a name="l4964"><span class="linenum">4964</span></a>          }
<a name="l4965"><span class="linenum">4965</span></a>  
<a name="l4966"><span class="linenum">4966</span></a>          if (handled) {
<a name="l4967"><span class="linenum">4967</span></a>              event.preventDefault();
<a name="l4968"><span class="linenum">4968</span></a>              event.stopPropagation();
<a name="l4969"><span class="linenum">4969</span></a>          }
<a name="l4970"><span class="linenum">4970</span></a>      },
<a name="l4971"><span class="linenum">4971</span></a>  
<a name="l4972"><span class="linenum">4972</span></a>  <span class="comment">    /* Filter entered characters - based on date format. */</span>
<a name="l4973"><span class="linenum">4973</span></a>      _doKeyPress: function(event) {
<a name="l4974"><span class="linenum">4974</span></a>          var chars, chr,
<a name="l4975"><span class="linenum">4975</span></a>              inst = $.datepicker._getInst(event.target);
<a name="l4976"><span class="linenum">4976</span></a>  
<a name="l4977"><span class="linenum">4977</span></a>          if ($.datepicker._get(inst, &quot;constrainInput&quot;)) {
<a name="l4978"><span class="linenum">4978</span></a>              chars = $.datepicker._possibleChars($.datepicker._get(inst, &quot;dateFormat&quot;));
<a name="l4979"><span class="linenum">4979</span></a>              chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);
<a name="l4980"><span class="linenum">4980</span></a>              return event.ctrlKey || event.metaKey || (chr &lt; &quot; &quot; || !chars || chars.indexOf(chr) &gt; -1);
<a name="l4981"><span class="linenum">4981</span></a>          }
<a name="l4982"><span class="linenum">4982</span></a>      },
<a name="l4983"><span class="linenum">4983</span></a>  
<a name="l4984"><span class="linenum">4984</span></a>  <span class="comment">    /* Synchronise manual entry and field/alternate field. */</span>
<a name="l4985"><span class="linenum">4985</span></a>      _doKeyUp: function(event) {
<a name="l4986"><span class="linenum">4986</span></a>          var date,
<a name="l4987"><span class="linenum">4987</span></a>              inst = $.datepicker._getInst(event.target);
<a name="l4988"><span class="linenum">4988</span></a>  
<a name="l4989"><span class="linenum">4989</span></a>          if (inst.input.val() !== inst.lastVal) {
<a name="l4990"><span class="linenum">4990</span></a>              try {
<a name="l4991"><span class="linenum">4991</span></a>                  date = $.datepicker.parseDate($.datepicker._get(inst, &quot;dateFormat&quot;),
<a name="l4992"><span class="linenum">4992</span></a>                      (inst.input ? inst.input.val() : null),
<a name="l4993"><span class="linenum">4993</span></a>                      $.datepicker._getFormatConfig(inst));
<a name="l4994"><span class="linenum">4994</span></a>  
<a name="l4995"><span class="linenum">4995</span></a>                  if (date) { // only if valid
<a name="l4996"><span class="linenum">4996</span></a>                      $.datepicker._setDateFromField(inst);
<a name="l4997"><span class="linenum">4997</span></a>                      $.datepicker._updateAlternate(inst);
<a name="l4998"><span class="linenum">4998</span></a>                      $.datepicker._updateDatepicker(inst);
<a name="l4999"><span class="linenum">4999</span></a>                  }
<a name="l5000"><span class="linenum">5000</span></a>              }
<a name="l5001"><span class="linenum">5001</span></a>              catch (err) {
<a name="l5002"><span class="linenum">5002</span></a>              }
<a name="l5003"><span class="linenum">5003</span></a>          }
<a name="l5004"><span class="linenum">5004</span></a>          return true;
<a name="l5005"><span class="linenum">5005</span></a>      },
<a name="l5006"><span class="linenum">5006</span></a>  
<a name="l5007"><span class="linenum">5007</span></a>      <span class="comment">/* Pop-up the date picker for a given input field.</span>
<a name="l5008"><span class="linenum">5008</span></a>  <span class="comment">     * If false returned from beforeShow event handler do not show.</span>
<a name="l5009"><span class="linenum">5009</span></a>  <span class="comment">     * @param  input  element - the input field attached to the date picker or</span>
<a name="l5010"><span class="linenum">5010</span></a>  <span class="comment">     *                    event - if triggered by focus</span>
<a name="l5011"><span class="linenum">5011</span></a>  <span class="comment">     */</span>
<a name="l5012"><span class="linenum">5012</span></a>      _showDatepicker: function(input) {
<a name="l5013"><span class="linenum">5013</span></a>          input = input.target || input;
<a name="l5014"><span class="linenum">5014</span></a>          if (input.nodeName.toLowerCase() !== &quot;input&quot;) { // find from button/image trigger
<a name="l5015"><span class="linenum">5015</span></a>              input = $(&quot;input&quot;, input.parentNode)[0];
<a name="l5016"><span class="linenum">5016</span></a>          }
<a name="l5017"><span class="linenum">5017</span></a>  
<a name="l5018"><span class="linenum">5018</span></a>          if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here
<a name="l5019"><span class="linenum">5019</span></a>              return;
<a name="l5020"><span class="linenum">5020</span></a>          }
<a name="l5021"><span class="linenum">5021</span></a>  
<a name="l5022"><span class="linenum">5022</span></a>          var inst, beforeShow, beforeShowSettings, isFixed,
<a name="l5023"><span class="linenum">5023</span></a>              offset, showAnim, duration;
<a name="l5024"><span class="linenum">5024</span></a>  
<a name="l5025"><span class="linenum">5025</span></a>          inst = $.datepicker._getInst(input);
<a name="l5026"><span class="linenum">5026</span></a>          if ($.datepicker._curInst &amp;&amp; $.datepicker._curInst !== inst) {
<a name="l5027"><span class="linenum">5027</span></a>              $.datepicker._curInst.dpDiv.<a class="function" onClick="logFunction('stop')" href="../../../_functions/stop.html" onMouseOver="funcPopup(event,'stop')">stop</a>(true, true);
<a name="l5028"><span class="linenum">5028</span></a>              if ( inst &amp;&amp; $.datepicker._datepickerShowing ) {
<a name="l5029"><span class="linenum">5029</span></a>                  $.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );
<a name="l5030"><span class="linenum">5030</span></a>              }
<a name="l5031"><span class="linenum">5031</span></a>          }
<a name="l5032"><span class="linenum">5032</span></a>  
<a name="l5033"><span class="linenum">5033</span></a>          beforeShow = $.datepicker._get(inst, &quot;beforeShow&quot;);
<a name="l5034"><span class="linenum">5034</span></a>          beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
<a name="l5035"><span class="linenum">5035</span></a>          if(beforeShowSettings === false){
<a name="l5036"><span class="linenum">5036</span></a>              return;
<a name="l5037"><span class="linenum">5037</span></a>          }
<a name="l5038"><span class="linenum">5038</span></a>          <a class="function" onClick="logFunction('extendRemove')" href="../../../_functions/extendremove.html" onMouseOver="funcPopup(event,'extendremove')">extendRemove</a>(inst.settings, beforeShowSettings);
<a name="l5039"><span class="linenum">5039</span></a>  
<a name="l5040"><span class="linenum">5040</span></a>          inst.lastVal = null;
<a name="l5041"><span class="linenum">5041</span></a>          $.datepicker._lastInput = input;
<a name="l5042"><span class="linenum">5042</span></a>          $.datepicker._setDateFromField(inst);
<a name="l5043"><span class="linenum">5043</span></a>  
<a name="l5044"><span class="linenum">5044</span></a>          if ($.datepicker._inDialog) { // hide cursor
<a name="l5045"><span class="linenum">5045</span></a>              input.value = &quot;&quot;;
<a name="l5046"><span class="linenum">5046</span></a>          }
<a name="l5047"><span class="linenum">5047</span></a>          if (!$.datepicker._pos) { // position below input
<a name="l5048"><span class="linenum">5048</span></a>              $.datepicker._pos = $.datepicker._findPos(input);
<a name="l5049"><span class="linenum">5049</span></a>              $.datepicker._pos[1] += input.offsetHeight; <span class="comment">// add the height</span>
<a name="l5050"><span class="linenum">5050</span></a>          }
<a name="l5051"><span class="linenum">5051</span></a>  
<a name="l5052"><span class="linenum">5052</span></a>          isFixed = false;
<a name="l5053"><span class="linenum">5053</span></a>          $(input).parents().<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l5054"><span class="linenum">5054</span></a>              isFixed |= $(this).css(&quot;position&quot;) === &quot;fixed&quot;;
<a name="l5055"><span class="linenum">5055</span></a>              return !isFixed;
<a name="l5056"><span class="linenum">5056</span></a>          });
<a name="l5057"><span class="linenum">5057</span></a>  
<a name="l5058"><span class="linenum">5058</span></a>          offset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};
<a name="l5059"><span class="linenum">5059</span></a>          $.datepicker._pos = null;
<a name="l5060"><span class="linenum">5060</span></a>  <span class="comment">        //to avoid flashes on Firefox</span>
<a name="l5061"><span class="linenum">5061</span></a>          inst.dpDiv.empty();
<a name="l5062"><span class="linenum">5062</span></a>  <span class="comment">        // determine sizing offscreen</span>
<a name="l5063"><span class="linenum">5063</span></a>          inst.dpDiv.css({position: &quot;absolute&quot;, display: &quot;block&quot;, top: &quot;-1000px&quot;});
<a name="l5064"><span class="linenum">5064</span></a>          $.datepicker._updateDatepicker(inst);
<a name="l5065"><span class="linenum">5065</span></a>  <span class="comment">        // fix width for dynamic number of date pickers</span>
<a name="l5066"><span class="linenum">5066</span></a>  <span class="comment">        // and adjust position before showing</span>
<a name="l5067"><span class="linenum">5067</span></a>          offset = $.datepicker._checkOffset(inst, offset, isFixed);
<a name="l5068"><span class="linenum">5068</span></a>          inst.dpDiv.css({position: ($.datepicker._inDialog &amp;&amp; $.blockUI ?
<a name="l5069"><span class="linenum">5069</span></a>              &quot;static&quot; : (isFixed ? &quot;fixed&quot; : &quot;absolute&quot;)), display: &quot;none&quot;,
<a name="l5070"><span class="linenum">5070</span></a>              left: offset.left + &quot;px&quot;, top: offset.top + &quot;px&quot;});
<a name="l5071"><span class="linenum">5071</span></a>  
<a name="l5072"><span class="linenum">5072</span></a>          if (!inst.inline) {
<a name="l5073"><span class="linenum">5073</span></a>              showAnim = $.datepicker._get(inst, &quot;showAnim&quot;);
<a name="l5074"><span class="linenum">5074</span></a>              duration = $.datepicker._get(inst, &quot;duration&quot;);
<a name="l5075"><span class="linenum">5075</span></a>              inst.dpDiv.zIndex($(input).zIndex()+1);
<a name="l5076"><span class="linenum">5076</span></a>              $.datepicker._datepickerShowing = true;
<a name="l5077"><span class="linenum">5077</span></a>  
<a name="l5078"><span class="linenum">5078</span></a>              if ( $.effects &amp;&amp; $.effects.effect[ showAnim ] ) {
<a name="l5079"><span class="linenum">5079</span></a>                  inst.dpDiv.<a class="function" onClick="logFunction('show')" href="../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>(showAnim, $.datepicker._get(inst, &quot;showOptions&quot;), duration);
<a name="l5080"><span class="linenum">5080</span></a>              } else {
<a name="l5081"><span class="linenum">5081</span></a>                  inst.dpDiv[showAnim || &quot;show&quot;](showAnim ? duration : null);
<a name="l5082"><span class="linenum">5082</span></a>              }
<a name="l5083"><span class="linenum">5083</span></a>  
<a name="l5084"><span class="linenum">5084</span></a>              if ( $.datepicker._shouldFocusInput( inst ) ) {
<a name="l5085"><span class="linenum">5085</span></a>                  inst.input.focus();
<a name="l5086"><span class="linenum">5086</span></a>              }
<a name="l5087"><span class="linenum">5087</span></a>  
<a name="l5088"><span class="linenum">5088</span></a>              $.datepicker._curInst = inst;
<a name="l5089"><span class="linenum">5089</span></a>          }
<a name="l5090"><span class="linenum">5090</span></a>      },
<a name="l5091"><span class="linenum">5091</span></a>  
<a name="l5092"><span class="linenum">5092</span></a>  <span class="comment">    /* Generate the date picker content. */</span>
<a name="l5093"><span class="linenum">5093</span></a>      _updateDatepicker: function(inst) {
<a name="l5094"><span class="linenum">5094</span></a>          this.maxRows = 4; <span class="comment">//Reset the max number of rows being displayed (see #7043)</span>
<a name="l5095"><span class="linenum">5095</span></a>          instActive = inst; <span class="comment">// for delegate hover events</span>
<a name="l5096"><span class="linenum">5096</span></a>          inst.dpDiv.empty().<a class="function" onClick="logFunction('append')" href="../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>(this._generateHTML(inst));
<a name="l5097"><span class="linenum">5097</span></a>          this._attachHandlers(inst);
<a name="l5098"><span class="linenum">5098</span></a>          inst.dpDiv.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;.&quot; + this._dayOverClass + &quot; a&quot;).mouseover();
<a name="l5099"><span class="linenum">5099</span></a>  
<a name="l5100"><span class="linenum">5100</span></a>          var origyearshtml,
<a name="l5101"><span class="linenum">5101</span></a>              numMonths = this._getNumberOfMonths(inst),
<a name="l5102"><span class="linenum">5102</span></a>              cols = numMonths[1],
<a name="l5103"><span class="linenum">5103</span></a>              width = 17;
<a name="l5104"><span class="linenum">5104</span></a>  
<a name="l5105"><span class="linenum">5105</span></a>          inst.dpDiv.removeClass(&quot;ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4&quot;).width(&quot;&quot;);
<a name="l5106"><span class="linenum">5106</span></a>          if (cols &gt; 1) {
<a name="l5107"><span class="linenum">5107</span></a>              inst.dpDiv.addClass(&quot;ui-datepicker-multi-&quot; + cols).css(&quot;width&quot;, (width * cols) + &quot;em&quot;);
<a name="l5108"><span class="linenum">5108</span></a>          }
<a name="l5109"><span class="linenum">5109</span></a>          inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? &quot;add&quot; : &quot;remove&quot;) +
<a name="l5110"><span class="linenum">5110</span></a>              &quot;Class&quot;](&quot;ui-datepicker-multi&quot;);
<a name="l5111"><span class="linenum">5111</span></a>          inst.dpDiv[(this._get(inst, &quot;isRTL&quot;) ? &quot;add&quot; : &quot;remove&quot;) +
<a name="l5112"><span class="linenum">5112</span></a>              &quot;Class&quot;](&quot;ui-datepicker-rtl&quot;);
<a name="l5113"><span class="linenum">5113</span></a>  
<a name="l5114"><span class="linenum">5114</span></a>          if (inst === $.datepicker._curInst &amp;&amp; $.datepicker._datepickerShowing &amp;&amp; $.datepicker._shouldFocusInput( inst ) ) {
<a name="l5115"><span class="linenum">5115</span></a>              inst.input.focus();
<a name="l5116"><span class="linenum">5116</span></a>          }
<a name="l5117"><span class="linenum">5117</span></a>  
<a name="l5118"><span class="linenum">5118</span></a>  <span class="comment">        // deffered render of the years select (to avoid flashes on Firefox)</span>
<a name="l5119"><span class="linenum">5119</span></a>          if( inst.yearshtml ){
<a name="l5120"><span class="linenum">5120</span></a>              origyearshtml = inst.yearshtml;
<a name="l5121"><span class="linenum">5121</span></a>              <a class="function" onClick="logFunction('setTimeout')" href="../../../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>(function(){
<a name="l5122"><span class="linenum">5122</span></a>  <span class="comment">                //assure that inst.yearshtml didn't change.</span>
<a name="l5123"><span class="linenum">5123</span></a>                  if( origyearshtml === inst.yearshtml &amp;&amp; inst.yearshtml ){
<a name="l5124"><span class="linenum">5124</span></a>                      inst.dpDiv.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;select.ui-datepicker-year:first&quot;).replaceWith(inst.yearshtml);
<a name="l5125"><span class="linenum">5125</span></a>                  }
<a name="l5126"><span class="linenum">5126</span></a>                  origyearshtml = inst.yearshtml = null;
<a name="l5127"><span class="linenum">5127</span></a>              }, 0);
<a name="l5128"><span class="linenum">5128</span></a>          }
<a name="l5129"><span class="linenum">5129</span></a>      },
<a name="l5130"><span class="linenum">5130</span></a>  
<a name="l5131"><span class="linenum">5131</span></a>  <span class="comment">    // #6694 - don't focus the input if it's already focused</span>
<a name="l5132"><span class="linenum">5132</span></a>  <span class="comment">    // this breaks the change event in IE</span>
<a name="l5133"><span class="linenum">5133</span></a>  <span class="comment">    // Support: IE and jQuery &lt;1.9</span>
<a name="l5134"><span class="linenum">5134</span></a>      _shouldFocusInput: function( inst ) {
<a name="l5135"><span class="linenum">5135</span></a>          return inst.input &amp;&amp; inst.input.is( &quot;:visible&quot; ) &amp;&amp; !inst.input.is( &quot;:disabled&quot; ) &amp;&amp; !inst.input.is( &quot;:focus&quot; );
<a name="l5136"><span class="linenum">5136</span></a>      },
<a name="l5137"><span class="linenum">5137</span></a>  
<a name="l5138"><span class="linenum">5138</span></a>  <span class="comment">    /* Check positioning to remain on screen. */</span>
<a name="l5139"><span class="linenum">5139</span></a>      _checkOffset: function(inst, offset, isFixed) {
<a name="l5140"><span class="linenum">5140</span></a>          var dpWidth = inst.dpDiv.outerWidth(),
<a name="l5141"><span class="linenum">5141</span></a>              dpHeight = inst.dpDiv.outerHeight(),
<a name="l5142"><span class="linenum">5142</span></a>              inputWidth = inst.input ? inst.input.outerWidth() : 0,
<a name="l5143"><span class="linenum">5143</span></a>              inputHeight = inst.input ? inst.input.outerHeight() : 0,
<a name="l5144"><span class="linenum">5144</span></a>              viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),
<a name="l5145"><span class="linenum">5145</span></a>              viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());
<a name="l5146"><span class="linenum">5146</span></a>  
<a name="l5147"><span class="linenum">5147</span></a>          offset.left -= (this._get(inst, &quot;isRTL&quot;) ? (dpWidth - inputWidth) : 0);
<a name="l5148"><span class="linenum">5148</span></a>          offset.left -= (isFixed &amp;&amp; offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;
<a name="l5149"><span class="linenum">5149</span></a>          offset.top -= (isFixed &amp;&amp; offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;
<a name="l5150"><span class="linenum">5150</span></a>  
<a name="l5151"><span class="linenum">5151</span></a>  <span class="comment">        // now check if datepicker is showing outside window viewport - move to a better place if so.</span>
<a name="l5152"><span class="linenum">5152</span></a>          offset.left -= Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(offset.left, (offset.left + dpWidth &gt; viewWidth &amp;&amp; viewWidth &gt; dpWidth) ?
<a name="l5153"><span class="linenum">5153</span></a>              Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(offset.left + dpWidth - viewWidth) : 0);
<a name="l5154"><span class="linenum">5154</span></a>          offset.top -= Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(offset.top, (offset.top + dpHeight &gt; viewHeight &amp;&amp; viewHeight &gt; dpHeight) ?
<a name="l5155"><span class="linenum">5155</span></a>              Math.<a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(dpHeight + inputHeight) : 0);
<a name="l5156"><span class="linenum">5156</span></a>  
<a name="l5157"><span class="linenum">5157</span></a>          return offset;
<a name="l5158"><span class="linenum">5158</span></a>      },
<a name="l5159"><span class="linenum">5159</span></a>  
<a name="l5160"><span class="linenum">5160</span></a>  <span class="comment">    /* Find an object's position on the screen. */</span>
<a name="l5161"><span class="linenum">5161</span></a>      _findPos: function(obj) {
<a name="l5162"><span class="linenum">5162</span></a>          var position,
<a name="l5163"><span class="linenum">5163</span></a>              inst = this._getInst(obj),
<a name="l5164"><span class="linenum">5164</span></a>              isRTL = this._get(inst, &quot;isRTL&quot;);
<a name="l5165"><span class="linenum">5165</span></a>  
<a name="l5166"><span class="linenum">5166</span></a>          while (obj &amp;&amp; (obj.type === &quot;hidden&quot; || obj.nodeType !== 1 || $.expr.filters.<a class="function" onClick="logFunction('hidden')" href="../../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>(obj))) {
<a name="l5167"><span class="linenum">5167</span></a>              obj = obj[isRTL ? &quot;previousSibling&quot; : &quot;nextSibling&quot;];
<a name="l5168"><span class="linenum">5168</span></a>          }
<a name="l5169"><span class="linenum">5169</span></a>  
<a name="l5170"><span class="linenum">5170</span></a>          position = $(obj).offset();
<a name="l5171"><span class="linenum">5171</span></a>          return [position.left, position.top];
<a name="l5172"><span class="linenum">5172</span></a>      },
<a name="l5173"><span class="linenum">5173</span></a>  
<a name="l5174"><span class="linenum">5174</span></a>      <span class="comment">/* Hide the date picker from view.</span>
<a name="l5175"><span class="linenum">5175</span></a>  <span class="comment">     * @param  input  element - the input field attached to the date picker</span>
<a name="l5176"><span class="linenum">5176</span></a>  <span class="comment">     */</span>
<a name="l5177"><span class="linenum">5177</span></a>      _hideDatepicker: function(input) {
<a name="l5178"><span class="linenum">5178</span></a>          var showAnim, duration, postProcess, onClose,
<a name="l5179"><span class="linenum">5179</span></a>              inst = this._curInst;
<a name="l5180"><span class="linenum">5180</span></a>  
<a name="l5181"><span class="linenum">5181</span></a>          if (!inst || (input &amp;&amp; inst !== $.data(input, PROP_NAME))) {
<a name="l5182"><span class="linenum">5182</span></a>              return;
<a name="l5183"><span class="linenum">5183</span></a>          }
<a name="l5184"><span class="linenum">5184</span></a>  
<a name="l5185"><span class="linenum">5185</span></a>          if (this._datepickerShowing) {
<a name="l5186"><span class="linenum">5186</span></a>              showAnim = this._get(inst, &quot;showAnim&quot;);
<a name="l5187"><span class="linenum">5187</span></a>              duration = this._get(inst, &quot;duration&quot;);
<a name="l5188"><span class="linenum">5188</span></a>              postProcess = function() {
<a name="l5189"><span class="linenum">5189</span></a>                  $.datepicker._tidyDialog(inst);
<a name="l5190"><span class="linenum">5190</span></a>              };
<a name="l5191"><span class="linenum">5191</span></a>  
<a name="l5192"><span class="linenum">5192</span></a>  <span class="comment">            // DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed</span>
<a name="l5193"><span class="linenum">5193</span></a>              if ( $.effects &amp;&amp; ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {
<a name="l5194"><span class="linenum">5194</span></a>                  inst.dpDiv.hide(showAnim, $.datepicker._get(inst, &quot;showOptions&quot;), duration, postProcess);
<a name="l5195"><span class="linenum">5195</span></a>              } else {
<a name="l5196"><span class="linenum">5196</span></a>                  inst.dpDiv[(showAnim === &quot;slideDown&quot; ? &quot;slideUp&quot; :
<a name="l5197"><span class="linenum">5197</span></a>                      (showAnim === &quot;fadeIn&quot; ? &quot;fadeOut&quot; : &quot;hide&quot;))]((showAnim ? duration : null), postProcess);
<a name="l5198"><span class="linenum">5198</span></a>              }
<a name="l5199"><span class="linenum">5199</span></a>  
<a name="l5200"><span class="linenum">5200</span></a>              if (!showAnim) {
<a name="l5201"><span class="linenum">5201</span></a>                  postProcess();
<a name="l5202"><span class="linenum">5202</span></a>              }
<a name="l5203"><span class="linenum">5203</span></a>              this._datepickerShowing = false;
<a name="l5204"><span class="linenum">5204</span></a>  
<a name="l5205"><span class="linenum">5205</span></a>              onClose = this._get(inst, &quot;onClose&quot;);
<a name="l5206"><span class="linenum">5206</span></a>              if (onClose) {
<a name="l5207"><span class="linenum">5207</span></a>                  onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : &quot;&quot;), inst]);
<a name="l5208"><span class="linenum">5208</span></a>              }
<a name="l5209"><span class="linenum">5209</span></a>  
<a name="l5210"><span class="linenum">5210</span></a>              this._lastInput = null;
<a name="l5211"><span class="linenum">5211</span></a>              if (this._inDialog) {
<a name="l5212"><span class="linenum">5212</span></a>                  this._dialogInput.css({ position: &quot;absolute&quot;, left: &quot;0&quot;, top: &quot;-100px&quot; });
<a name="l5213"><span class="linenum">5213</span></a>                  if ($.blockUI) {
<a name="l5214"><span class="linenum">5214</span></a>                      $.unblockUI();
<a name="l5215"><span class="linenum">5215</span></a>                      $(&quot;body&quot;).<a class="function" onClick="logFunction('append')" href="../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>(this.dpDiv);
<a name="l5216"><span class="linenum">5216</span></a>                  }
<a name="l5217"><span class="linenum">5217</span></a>              }
<a name="l5218"><span class="linenum">5218</span></a>              this._inDialog = false;
<a name="l5219"><span class="linenum">5219</span></a>          }
<a name="l5220"><span class="linenum">5220</span></a>      },
<a name="l5221"><span class="linenum">5221</span></a>  
<a name="l5222"><span class="linenum">5222</span></a>  <span class="comment">    /* Tidy up after a dialog display. */</span>
<a name="l5223"><span class="linenum">5223</span></a>      _tidyDialog: function(inst) {
<a name="l5224"><span class="linenum">5224</span></a>          inst.dpDiv.removeClass(this._dialogClass).<a class="function" onClick="logFunction('unbind')" href="../../../_functions/unbind.html" onMouseOver="funcPopup(event,'unbind')">unbind</a>(&quot;.ui-datepicker-calendar&quot;);
<a name="l5225"><span class="linenum">5225</span></a>      },
<a name="l5226"><span class="linenum">5226</span></a>  
<a name="l5227"><span class="linenum">5227</span></a>  <span class="comment">    /* Close date picker if clicked elsewhere. */</span>
<a name="l5228"><span class="linenum">5228</span></a>      _checkExternalClick: function(event) {
<a name="l5229"><span class="linenum">5229</span></a>          if (!$.datepicker._curInst) {
<a name="l5230"><span class="linenum">5230</span></a>              return;
<a name="l5231"><span class="linenum">5231</span></a>          }
<a name="l5232"><span class="linenum">5232</span></a>  
<a name="l5233"><span class="linenum">5233</span></a>          var <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> = $(event.target),
<a name="l5234"><span class="linenum">5234</span></a>              inst = $.datepicker._getInst(<a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>[0]);
<a name="l5235"><span class="linenum">5235</span></a>  
<a name="l5236"><span class="linenum">5236</span></a>          if ( ( ( <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>[0].id !== $.datepicker._mainDivId &amp;&amp;
<a name="l5237"><span class="linenum">5237</span></a>                  <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.parents(&quot;#&quot; + $.datepicker._mainDivId).length === 0 &amp;&amp;
<a name="l5238"><span class="linenum">5238</span></a>                  !<a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.hasClass($.datepicker.markerClassName) &amp;&amp;
<a name="l5239"><span class="linenum">5239</span></a>                  !<a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.closest(&quot;.&quot; + $.datepicker._triggerClass).length &amp;&amp;
<a name="l5240"><span class="linenum">5240</span></a>                  $.datepicker._datepickerShowing &amp;&amp; !($.datepicker._inDialog &amp;&amp; $.blockUI) ) ) ||
<a name="l5241"><span class="linenum">5241</span></a>              ( <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.hasClass($.datepicker.markerClassName) &amp;&amp; $.datepicker._curInst !== inst ) ) {
<a name="l5242"><span class="linenum">5242</span></a>                  $.datepicker._hideDatepicker();
<a name="l5243"><span class="linenum">5243</span></a>          }
<a name="l5244"><span class="linenum">5244</span></a>      },
<a name="l5245"><span class="linenum">5245</span></a>  
<a name="l5246"><span class="linenum">5246</span></a>  <span class="comment">    /* Adjust one of the date sub-fields. */</span>
<a name="l5247"><span class="linenum">5247</span></a>      _adjustDate: function(id, offset, period) {
<a name="l5248"><span class="linenum">5248</span></a>          var target = $(id),
<a name="l5249"><span class="linenum">5249</span></a>              inst = this._getInst(target[0]);
<a name="l5250"><span class="linenum">5250</span></a>  
<a name="l5251"><span class="linenum">5251</span></a>          if (this._isDisabledDatepicker(target[0])) {
<a name="l5252"><span class="linenum">5252</span></a>              return;
<a name="l5253"><span class="linenum">5253</span></a>          }
<a name="l5254"><span class="linenum">5254</span></a>          this._adjustInstDate(inst, offset +
<a name="l5255"><span class="linenum">5255</span></a>              (period === &quot;M&quot; ? this._get(inst, &quot;showCurrentAtPos&quot;) : 0), // undo positioning
<a name="l5256"><span class="linenum">5256</span></a>              period);
<a name="l5257"><span class="linenum">5257</span></a>          this._updateDatepicker(inst);
<a name="l5258"><span class="linenum">5258</span></a>      },
<a name="l5259"><span class="linenum">5259</span></a>  
<a name="l5260"><span class="linenum">5260</span></a>  <span class="comment">    /* Action for current link. */</span>
<a name="l5261"><span class="linenum">5261</span></a>      _gotoToday: function(id) {
<a name="l5262"><span class="linenum">5262</span></a>          var date,
<a name="l5263"><span class="linenum">5263</span></a>              target = $(id),
<a name="l5264"><span class="linenum">5264</span></a>              inst = this._getInst(target[0]);
<a name="l5265"><span class="linenum">5265</span></a>  
<a name="l5266"><span class="linenum">5266</span></a>          if (this._get(inst, &quot;gotoCurrent&quot;) &amp;&amp; inst.currentDay) {
<a name="l5267"><span class="linenum">5267</span></a>              inst.selectedDay = inst.currentDay;
<a name="l5268"><span class="linenum">5268</span></a>              inst.drawMonth = inst.selectedMonth = inst.currentMonth;
<a name="l5269"><span class="linenum">5269</span></a>              inst.drawYear = inst.selectedYear = inst.currentYear;
<a name="l5270"><span class="linenum">5270</span></a>          } else {
<a name="l5271"><span class="linenum">5271</span></a>              date = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>();
<a name="l5272"><span class="linenum">5272</span></a>              inst.selectedDay = date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>();
<a name="l5273"><span class="linenum">5273</span></a>              inst.drawMonth = inst.selectedMonth = date.getMonth();
<a name="l5274"><span class="linenum">5274</span></a>              inst.drawYear = inst.selectedYear = date.getFullYear();
<a name="l5275"><span class="linenum">5275</span></a>          }
<a name="l5276"><span class="linenum">5276</span></a>          this._notifyChange(inst);
<a name="l5277"><span class="linenum">5277</span></a>          this._adjustDate(target);
<a name="l5278"><span class="linenum">5278</span></a>      },
<a name="l5279"><span class="linenum">5279</span></a>  
<a name="l5280"><span class="linenum">5280</span></a>  <span class="comment">    /* Action for selecting a new month/year. */</span>
<a name="l5281"><span class="linenum">5281</span></a>      _selectMonthYear: function(id, select, period) {
<a name="l5282"><span class="linenum">5282</span></a>          var target = $(id),
<a name="l5283"><span class="linenum">5283</span></a>              inst = this._getInst(target[0]);
<a name="l5284"><span class="linenum">5284</span></a>  
<a name="l5285"><span class="linenum">5285</span></a>          inst[&quot;selected&quot; + (period === &quot;M&quot; ? &quot;Month&quot; : &quot;Year&quot;)] =
<a name="l5286"><span class="linenum">5286</span></a>          inst[&quot;draw&quot; + (period === &quot;M&quot; ? &quot;Month&quot; : &quot;Year&quot;)] =
<a name="l5287"><span class="linenum">5287</span></a>              parseInt(select.options[select.selectedIndex].value,10);
<a name="l5288"><span class="linenum">5288</span></a>  
<a name="l5289"><span class="linenum">5289</span></a>          this._notifyChange(inst);
<a name="l5290"><span class="linenum">5290</span></a>          this._adjustDate(target);
<a name="l5291"><span class="linenum">5291</span></a>      },
<a name="l5292"><span class="linenum">5292</span></a>  
<a name="l5293"><span class="linenum">5293</span></a>  <span class="comment">    /* Action for selecting a day. */</span>
<a name="l5294"><span class="linenum">5294</span></a>      _selectDay: function(id, month, year, td) {
<a name="l5295"><span class="linenum">5295</span></a>          var inst,
<a name="l5296"><span class="linenum">5296</span></a>              target = $(id);
<a name="l5297"><span class="linenum">5297</span></a>  
<a name="l5298"><span class="linenum">5298</span></a>          if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
<a name="l5299"><span class="linenum">5299</span></a>              return;
<a name="l5300"><span class="linenum">5300</span></a>          }
<a name="l5301"><span class="linenum">5301</span></a>  
<a name="l5302"><span class="linenum">5302</span></a>          inst = this._getInst(target[0]);
<a name="l5303"><span class="linenum">5303</span></a>          inst.selectedDay = inst.currentDay = $(&quot;a&quot;, td).html();
<a name="l5304"><span class="linenum">5304</span></a>          inst.selectedMonth = inst.currentMonth = month;
<a name="l5305"><span class="linenum">5305</span></a>          inst.selectedYear = inst.currentYear = year;
<a name="l5306"><span class="linenum">5306</span></a>          this._selectDate(id, this._formatDate(inst,
<a name="l5307"><span class="linenum">5307</span></a>              inst.currentDay, inst.currentMonth, inst.currentYear));
<a name="l5308"><span class="linenum">5308</span></a>      },
<a name="l5309"><span class="linenum">5309</span></a>  
<a name="l5310"><span class="linenum">5310</span></a>  <span class="comment">    /* Erase the input field and hide the date picker. */</span>
<a name="l5311"><span class="linenum">5311</span></a>      _clearDate: function(id) {
<a name="l5312"><span class="linenum">5312</span></a>          var target = $(id);
<a name="l5313"><span class="linenum">5313</span></a>          this._selectDate(target, &quot;&quot;);
<a name="l5314"><span class="linenum">5314</span></a>      },
<a name="l5315"><span class="linenum">5315</span></a>  
<a name="l5316"><span class="linenum">5316</span></a>  <span class="comment">    /* Update the input field with the selected date. */</span>
<a name="l5317"><span class="linenum">5317</span></a>      _selectDate: function(id, dateStr) {
<a name="l5318"><span class="linenum">5318</span></a>          var onSelect,
<a name="l5319"><span class="linenum">5319</span></a>              target = $(id),
<a name="l5320"><span class="linenum">5320</span></a>              inst = this._getInst(target[0]);
<a name="l5321"><span class="linenum">5321</span></a>  
<a name="l5322"><span class="linenum">5322</span></a>          dateStr = (dateStr != null ? dateStr : this._formatDate(inst));
<a name="l5323"><span class="linenum">5323</span></a>          if (inst.input) {
<a name="l5324"><span class="linenum">5324</span></a>              inst.input.val(dateStr);
<a name="l5325"><span class="linenum">5325</span></a>          }
<a name="l5326"><span class="linenum">5326</span></a>          this._updateAlternate(inst);
<a name="l5327"><span class="linenum">5327</span></a>  
<a name="l5328"><span class="linenum">5328</span></a>          onSelect = this._get(inst, &quot;onSelect&quot;);
<a name="l5329"><span class="linenum">5329</span></a>          if (onSelect) {
<a name="l5330"><span class="linenum">5330</span></a>              onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  <span class="comment">// trigger custom callback</span>
<a name="l5331"><span class="linenum">5331</span></a>          } else if (inst.input) {
<a name="l5332"><span class="linenum">5332</span></a>              inst.input.<a class="function" onClick="logFunction('trigger')" href="../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>(&quot;change&quot;); <span class="comment">// fire the change event</span>
<a name="l5333"><span class="linenum">5333</span></a>          }
<a name="l5334"><span class="linenum">5334</span></a>  
<a name="l5335"><span class="linenum">5335</span></a>          if (inst.inline){
<a name="l5336"><span class="linenum">5336</span></a>              this._updateDatepicker(inst);
<a name="l5337"><span class="linenum">5337</span></a>          } else {
<a name="l5338"><span class="linenum">5338</span></a>              this._hideDatepicker();
<a name="l5339"><span class="linenum">5339</span></a>              this._lastInput = inst.input[0];
<a name="l5340"><span class="linenum">5340</span></a>              if (typeof(inst.input[0]) !== &quot;object&quot;) {
<a name="l5341"><span class="linenum">5341</span></a>                  inst.input.focus(); <span class="comment">// restore focus</span>
<a name="l5342"><span class="linenum">5342</span></a>              }
<a name="l5343"><span class="linenum">5343</span></a>              this._lastInput = null;
<a name="l5344"><span class="linenum">5344</span></a>          }
<a name="l5345"><span class="linenum">5345</span></a>      },
<a name="l5346"><span class="linenum">5346</span></a>  
<a name="l5347"><span class="linenum">5347</span></a>  <span class="comment">    /* Update any alternate field to synchronise with the main field. */</span>
<a name="l5348"><span class="linenum">5348</span></a>      _updateAlternate: function(inst) {
<a name="l5349"><span class="linenum">5349</span></a>          var altFormat, date, dateStr,
<a name="l5350"><span class="linenum">5350</span></a>              altField = this._get(inst, &quot;altField&quot;);
<a name="l5351"><span class="linenum">5351</span></a>  
<a name="l5352"><span class="linenum">5352</span></a>          if (altField) { // update alternate field too
<a name="l5353"><span class="linenum">5353</span></a>              altFormat = this._get(inst, &quot;altFormat&quot;) || this._get(inst, &quot;dateFormat&quot;);
<a name="l5354"><span class="linenum">5354</span></a>              date = this._getDate(inst);
<a name="l5355"><span class="linenum">5355</span></a>              dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));
<a name="l5356"><span class="linenum">5356</span></a>              $(altField).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() { $(this).val(dateStr); });
<a name="l5357"><span class="linenum">5357</span></a>          }
<a name="l5358"><span class="linenum">5358</span></a>      },
<a name="l5359"><span class="linenum">5359</span></a>  
<a name="l5360"><span class="linenum">5360</span></a>      <span class="comment">/* Set as beforeShowDay function to prevent selection of weekends.</span>
<a name="l5361"><span class="linenum">5361</span></a>  <span class="comment">     * @param  date  Date - the date to customise</span>
<a name="l5362"><span class="linenum">5362</span></a>  <span class="comment">     * @return [boolean, string] - is this date selectable?, what is its CSS class?</span>
<a name="l5363"><span class="linenum">5363</span></a>  <span class="comment">     */</span>
<a name="l5364"><span class="linenum">5364</span></a>      noWeekends: function(date) {
<a name="l5365"><span class="linenum">5365</span></a>          var day = date.getDay();
<a name="l5366"><span class="linenum">5366</span></a>          return [(day &gt; 0 &amp;&amp; day &lt; 6), &quot;&quot;];
<a name="l5367"><span class="linenum">5367</span></a>      },
<a name="l5368"><span class="linenum">5368</span></a>  
<a name="l5369"><span class="linenum">5369</span></a>      <span class="comment">/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.</span>
<a name="l5370"><span class="linenum">5370</span></a>  <span class="comment">     * @param  date  Date - the date to get the week for</span>
<a name="l5371"><span class="linenum">5371</span></a>  <span class="comment">     * @return  number - the number of the week within the year that contains this date</span>
<a name="l5372"><span class="linenum">5372</span></a>  <span class="comment">     */</span>
<a name="l5373"><span class="linenum">5373</span></a>      iso8601Week: function(date) {
<a name="l5374"><span class="linenum">5374</span></a>          var time,
<a name="l5375"><span class="linenum">5375</span></a>              checkDate = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(date.getTime());
<a name="l5376"><span class="linenum">5376</span></a>  
<a name="l5377"><span class="linenum">5377</span></a>  <span class="comment">        // Find Thursday of this week starting on Monday</span>
<a name="l5378"><span class="linenum">5378</span></a>          checkDate.<a class="function" onClick="logFunction('setDate')" href="../../../_functions/setdate.html" onMouseOver="funcPopup(event,'setdate')">setDate</a>(checkDate.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>() + 4 - (checkDate.getDay() || 7));
<a name="l5379"><span class="linenum">5379</span></a>  
<a name="l5380"><span class="linenum">5380</span></a>          time = checkDate.getTime();
<a name="l5381"><span class="linenum">5381</span></a>          checkDate.setMonth(0); <span class="comment">// Compare with Jan 1</span>
<a name="l5382"><span class="linenum">5382</span></a>          checkDate.<a class="function" onClick="logFunction('setDate')" href="../../../_functions/setdate.html" onMouseOver="funcPopup(event,'setdate')">setDate</a>(1);
<a name="l5383"><span class="linenum">5383</span></a>          return Math.<a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>((time - checkDate) / 86400000) / 7) + 1;
<a name="l5384"><span class="linenum">5384</span></a>      },
<a name="l5385"><span class="linenum">5385</span></a>  
<a name="l5386"><span class="linenum">5386</span></a>      <span class="comment">/* Parse a string value into a date object.</span>
<a name="l5387"><span class="linenum">5387</span></a>  <span class="comment">     * See formatDate below for the possible formats.</span>
<a name="l5388"><span class="linenum">5388</span></a>  <span class="comment">     *</span>
<a name="l5389"><span class="linenum">5389</span></a>  <span class="comment">     * @param  format string - the expected format of the date</span>
<a name="l5390"><span class="linenum">5390</span></a>  <span class="comment">     * @param  value string - the date in the above format</span>
<a name="l5391"><span class="linenum">5391</span></a>  <span class="comment">     * @param  settings Object - attributes include:</span>
<a name="l5392"><span class="linenum">5392</span></a>  <span class="comment">     *                    shortYearCutoff  number - the cutoff year for determining the century (optional)</span>
<a name="l5393"><span class="linenum">5393</span></a>  <span class="comment">     *                    dayNamesShort    string[7] - abbreviated names of the days from Sunday (optional)</span>
<a name="l5394"><span class="linenum">5394</span></a>  <span class="comment">     *                    dayNames        string[7] - names of the days from Sunday (optional)</span>
<a name="l5395"><span class="linenum">5395</span></a>  <span class="comment">     *                    monthNamesShort string[12] - abbreviated names of the months (optional)</span>
<a name="l5396"><span class="linenum">5396</span></a>  <span class="comment">     *                    monthNames        string[12] - names of the months (optional)</span>
<a name="l5397"><span class="linenum">5397</span></a>  <span class="comment">     * @return  Date - the extracted date value or null if value is blank</span>
<a name="l5398"><span class="linenum">5398</span></a>  <span class="comment">     */</span>
<a name="l5399"><span class="linenum">5399</span></a>      parseDate: function (format, value, settings) {
<a name="l5400"><span class="linenum">5400</span></a>          if (format == null || value == null) {
<a name="l5401"><span class="linenum">5401</span></a>              throw &quot;Invalid arguments&quot;;
<a name="l5402"><span class="linenum">5402</span></a>          }
<a name="l5403"><span class="linenum">5403</span></a>  
<a name="l5404"><span class="linenum">5404</span></a>          value = (typeof value === &quot;object&quot; ? value.<a class="function" onClick="logFunction('toString')" href="../../../_functions/tostring.html" onMouseOver="funcPopup(event,'tostring')">toString</a>() : value + &quot;&quot;);
<a name="l5405"><span class="linenum">5405</span></a>          if (value === &quot;&quot;) {
<a name="l5406"><span class="linenum">5406</span></a>              return null;
<a name="l5407"><span class="linenum">5407</span></a>          }
<a name="l5408"><span class="linenum">5408</span></a>  
<a name="l5409"><span class="linenum">5409</span></a>          var iFormat, dim, extra,
<a name="l5410"><span class="linenum">5410</span></a>              iValue = 0,
<a name="l5411"><span class="linenum">5411</span></a>              shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,
<a name="l5412"><span class="linenum">5412</span></a>              shortYearCutoff = (typeof shortYearCutoffTemp !== &quot;string&quot; ? shortYearCutoffTemp :
<a name="l5413"><span class="linenum">5413</span></a>                  new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),
<a name="l5414"><span class="linenum">5414</span></a>              dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
<a name="l5415"><span class="linenum">5415</span></a>              dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
<a name="l5416"><span class="linenum">5416</span></a>              monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
<a name="l5417"><span class="linenum">5417</span></a>              monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
<a name="l5418"><span class="linenum">5418</span></a>              year = -1,
<a name="l5419"><span class="linenum">5419</span></a>              month = -1,
<a name="l5420"><span class="linenum">5420</span></a>              day = -1,
<a name="l5421"><span class="linenum">5421</span></a>              doy = -1,
<a name="l5422"><span class="linenum">5422</span></a>              literal = false,
<a name="l5423"><span class="linenum">5423</span></a>              date,
<a name="l5424"><span class="linenum">5424</span></a>  <span class="comment">            // Check whether a format character is doubled</span>
<a name="l5425"><span class="linenum">5425</span></a>              lookAhead = function(match) {
<a name="l5426"><span class="linenum">5426</span></a>                  var matches = (iFormat + 1 &lt; format.length &amp;&amp; format.charAt(iFormat + 1) === match);
<a name="l5427"><span class="linenum">5427</span></a>                  if (matches) {
<a name="l5428"><span class="linenum">5428</span></a>                      iFormat++;
<a name="l5429"><span class="linenum">5429</span></a>                  }
<a name="l5430"><span class="linenum">5430</span></a>                  return matches;
<a name="l5431"><span class="linenum">5431</span></a>              },
<a name="l5432"><span class="linenum">5432</span></a>  <span class="comment">            // Extract a number from the string value</span>
<a name="l5433"><span class="linenum">5433</span></a>              getNumber = function(match) {
<a name="l5434"><span class="linenum">5434</span></a>                  var isDoubled = lookAhead(match),
<a name="l5435"><span class="linenum">5435</span></a>                      size = (match === &quot;@&quot; ? 14 : (match === &quot;!&quot; ? 20 :
<a name="l5436"><span class="linenum">5436</span></a>                      (match === &quot;y&quot; &amp;&amp; isDoubled ? 4 : (match === &quot;o&quot; ? 3 : 2)))),
<a name="l5437"><span class="linenum">5437</span></a>                      digits = new RegExp(&quot;^\\d{1,&quot; + size + &quot;}&quot;),
<a name="l5438"><span class="linenum">5438</span></a>                      num = value.substring(iValue).match(digits);
<a name="l5439"><span class="linenum">5439</span></a>                  if (!num) {
<a name="l5440"><span class="linenum">5440</span></a>                      throw &quot;Missing number at position &quot; + iValue;
<a name="l5441"><span class="linenum">5441</span></a>                  }
<a name="l5442"><span class="linenum">5442</span></a>                  iValue += num[0].length;
<a name="l5443"><span class="linenum">5443</span></a>                  return parseInt(num[0], 10);
<a name="l5444"><span class="linenum">5444</span></a>              },
<a name="l5445"><span class="linenum">5445</span></a>  <span class="comment">            // Extract a name from the string value and convert to an index</span>
<a name="l5446"><span class="linenum">5446</span></a>              getName = function(match, shortNames, longNames) {
<a name="l5447"><span class="linenum">5447</span></a>                  var index = -1,
<a name="l5448"><span class="linenum">5448</span></a>                      names = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {
<a name="l5449"><span class="linenum">5449</span></a>                          return [ [k, v] ];
<a name="l5450"><span class="linenum">5450</span></a>                      }).<a class="phpfunction" onClick="logFunction('sort')" href="../../../_functions/sort.html" onMouseOver="phpfuncPopup(event,'sort')">sort</a>(function (a, b) {
<a name="l5451"><span class="linenum">5451</span></a>                          return -(a[1].length - b[1].length);
<a name="l5452"><span class="linenum">5452</span></a>                      });
<a name="l5453"><span class="linenum">5453</span></a>  
<a name="l5454"><span class="linenum">5454</span></a>                  $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(names, function (i, pair) {
<a name="l5455"><span class="linenum">5455</span></a>                      var name = pair[1];
<a name="l5456"><span class="linenum">5456</span></a>                      if (value.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(iValue, name.length).toLowerCase() === name.toLowerCase()) {
<a name="l5457"><span class="linenum">5457</span></a>                          index = pair[0];
<a name="l5458"><span class="linenum">5458</span></a>                          iValue += name.length;
<a name="l5459"><span class="linenum">5459</span></a>                          return false;
<a name="l5460"><span class="linenum">5460</span></a>                      }
<a name="l5461"><span class="linenum">5461</span></a>                  });
<a name="l5462"><span class="linenum">5462</span></a>                  if (index !== -1) {
<a name="l5463"><span class="linenum">5463</span></a>                      return index + 1;
<a name="l5464"><span class="linenum">5464</span></a>                  } else {
<a name="l5465"><span class="linenum">5465</span></a>                      throw &quot;Unknown name at position &quot; + iValue;
<a name="l5466"><span class="linenum">5466</span></a>                  }
<a name="l5467"><span class="linenum">5467</span></a>              },
<a name="l5468"><span class="linenum">5468</span></a>  <span class="comment">            // Confirm that a literal character matches the string value</span>
<a name="l5469"><span class="linenum">5469</span></a>              checkLiteral = function() {
<a name="l5470"><span class="linenum">5470</span></a>                  if (value.charAt(iValue) !== format.charAt(iFormat)) {
<a name="l5471"><span class="linenum">5471</span></a>                      throw &quot;Unexpected literal at position &quot; + iValue;
<a name="l5472"><span class="linenum">5472</span></a>                  }
<a name="l5473"><span class="linenum">5473</span></a>                  iValue++;
<a name="l5474"><span class="linenum">5474</span></a>              };
<a name="l5475"><span class="linenum">5475</span></a>  
<a name="l5476"><span class="linenum">5476</span></a>          for (iFormat = 0; iFormat &lt; format.length; iFormat++) {
<a name="l5477"><span class="linenum">5477</span></a>              if (literal) {
<a name="l5478"><span class="linenum">5478</span></a>                  if (format.charAt(iFormat) === &quot;'&quot; &amp;&amp; !lookAhead(&quot;'&quot;)) {
<a name="l5479"><span class="linenum">5479</span></a>                      literal = false;
<a name="l5480"><span class="linenum">5480</span></a>                  } else {
<a name="l5481"><span class="linenum">5481</span></a>                      checkLiteral();
<a name="l5482"><span class="linenum">5482</span></a>                  }
<a name="l5483"><span class="linenum">5483</span></a>              } else {
<a name="l5484"><span class="linenum">5484</span></a>                  switch (format.charAt(iFormat)) {
<a name="l5485"><span class="linenum">5485</span></a>                      case &quot;d&quot;:
<a name="l5486"><span class="linenum">5486</span></a>                          day = getNumber(&quot;d&quot;);
<a name="l5487"><span class="linenum">5487</span></a>                          break;
<a name="l5488"><span class="linenum">5488</span></a>                      case &quot;D&quot;:
<a name="l5489"><span class="linenum">5489</span></a>                          <a class="function" onClick="logFunction('getName')" href="../../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>(&quot;D&quot;, dayNamesShort, dayNames);
<a name="l5490"><span class="linenum">5490</span></a>                          break;
<a name="l5491"><span class="linenum">5491</span></a>                      case &quot;o&quot;:
<a name="l5492"><span class="linenum">5492</span></a>                          doy = getNumber(&quot;o&quot;);
<a name="l5493"><span class="linenum">5493</span></a>                          break;
<a name="l5494"><span class="linenum">5494</span></a>                      case &quot;m&quot;:
<a name="l5495"><span class="linenum">5495</span></a>                          month = getNumber(&quot;m&quot;);
<a name="l5496"><span class="linenum">5496</span></a>                          break;
<a name="l5497"><span class="linenum">5497</span></a>                      case &quot;M&quot;:
<a name="l5498"><span class="linenum">5498</span></a>                          month = <a class="function" onClick="logFunction('getName')" href="../../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>(&quot;M&quot;, monthNamesShort, monthNames);
<a name="l5499"><span class="linenum">5499</span></a>                          break;
<a name="l5500"><span class="linenum">5500</span></a>                      case &quot;y&quot;:
<a name="l5501"><span class="linenum">5501</span></a>                          year = getNumber(&quot;y&quot;);
<a name="l5502"><span class="linenum">5502</span></a>                          break;
<a name="l5503"><span class="linenum">5503</span></a>                      case &quot;@&quot;:
<a name="l5504"><span class="linenum">5504</span></a>                          date = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(getNumber(&quot;@&quot;));
<a name="l5505"><span class="linenum">5505</span></a>                          year = date.getFullYear();
<a name="l5506"><span class="linenum">5506</span></a>                          month = date.getMonth() + 1;
<a name="l5507"><span class="linenum">5507</span></a>                          day = date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>();
<a name="l5508"><span class="linenum">5508</span></a>                          break;
<a name="l5509"><span class="linenum">5509</span></a>                      case &quot;!&quot;:
<a name="l5510"><span class="linenum">5510</span></a>                          date = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>((getNumber(&quot;!&quot;) - this._ticksTo1970) / 10000);
<a name="l5511"><span class="linenum">5511</span></a>                          year = date.getFullYear();
<a name="l5512"><span class="linenum">5512</span></a>                          month = date.getMonth() + 1;
<a name="l5513"><span class="linenum">5513</span></a>                          day = date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>();
<a name="l5514"><span class="linenum">5514</span></a>                          break;
<a name="l5515"><span class="linenum">5515</span></a>                      case &quot;'&quot;:
<a name="l5516"><span class="linenum">5516</span></a>                          if (lookAhead(&quot;'&quot;)){
<a name="l5517"><span class="linenum">5517</span></a>                              checkLiteral();
<a name="l5518"><span class="linenum">5518</span></a>                          } else {
<a name="l5519"><span class="linenum">5519</span></a>                              literal = true;
<a name="l5520"><span class="linenum">5520</span></a>                          }
<a name="l5521"><span class="linenum">5521</span></a>                          break;
<a name="l5522"><span class="linenum">5522</span></a>                      default:
<a name="l5523"><span class="linenum">5523</span></a>                          checkLiteral();
<a name="l5524"><span class="linenum">5524</span></a>                  }
<a name="l5525"><span class="linenum">5525</span></a>              }
<a name="l5526"><span class="linenum">5526</span></a>          }
<a name="l5527"><span class="linenum">5527</span></a>  
<a name="l5528"><span class="linenum">5528</span></a>          if (iValue &lt; value.length){
<a name="l5529"><span class="linenum">5529</span></a>              extra = value.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(iValue);
<a name="l5530"><span class="linenum">5530</span></a>              if (!/^\s+/.test(extra)) {
<a name="l5531"><span class="linenum">5531</span></a>                  throw &quot;Extra/unparsed characters found in date: &quot; + extra;
<a name="l5532"><span class="linenum">5532</span></a>              }
<a name="l5533"><span class="linenum">5533</span></a>          }
<a name="l5534"><span class="linenum">5534</span></a>  
<a name="l5535"><span class="linenum">5535</span></a>          if (year === -1) {
<a name="l5536"><span class="linenum">5536</span></a>              year = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().getFullYear();
<a name="l5537"><span class="linenum">5537</span></a>          } else if (year &lt; 100) {
<a name="l5538"><span class="linenum">5538</span></a>              year += new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().getFullYear() - new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().getFullYear() % 100 +
<a name="l5539"><span class="linenum">5539</span></a>                  (year &lt;= shortYearCutoff ? 0 : -100);
<a name="l5540"><span class="linenum">5540</span></a>          }
<a name="l5541"><span class="linenum">5541</span></a>  
<a name="l5542"><span class="linenum">5542</span></a>          if (doy &gt; -1) {
<a name="l5543"><span class="linenum">5543</span></a>              month = 1;
<a name="l5544"><span class="linenum">5544</span></a>              day = doy;
<a name="l5545"><span class="linenum">5545</span></a>              do {
<a name="l5546"><span class="linenum">5546</span></a>                  dim = this._getDaysInMonth(year, month - 1);
<a name="l5547"><span class="linenum">5547</span></a>                  if (day &lt;= dim) {
<a name="l5548"><span class="linenum">5548</span></a>                      break;
<a name="l5549"><span class="linenum">5549</span></a>                  }
<a name="l5550"><span class="linenum">5550</span></a>                  month++;
<a name="l5551"><span class="linenum">5551</span></a>                  day -= dim;
<a name="l5552"><span class="linenum">5552</span></a>              } while (true);
<a name="l5553"><span class="linenum">5553</span></a>          }
<a name="l5554"><span class="linenum">5554</span></a>  
<a name="l5555"><span class="linenum">5555</span></a>          date = this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(year, month - 1, day));
<a name="l5556"><span class="linenum">5556</span></a>          if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>() !== day) {
<a name="l5557"><span class="linenum">5557</span></a>              throw &quot;Invalid date&quot;; <span class="comment">// E.g. 31/02/00</span>
<a name="l5558"><span class="linenum">5558</span></a>          }
<a name="l5559"><span class="linenum">5559</span></a>          return date;
<a name="l5560"><span class="linenum">5560</span></a>      },
<a name="l5561"><span class="linenum">5561</span></a>  
<a name="l5562"><span class="linenum">5562</span></a>  <span class="comment">    /* Standard date formats. */</span>
<a name="l5563"><span class="linenum">5563</span></a>      ATOM: &quot;yy-mm-dd&quot;, // RFC 3339 (ISO 8601)
<a name="l5564"><span class="linenum">5564</span></a>      COOKIE: &quot;D, dd M yy&quot;,
<a name="l5565"><span class="linenum">5565</span></a>      ISO_8601: &quot;yy-mm-dd&quot;,
<a name="l5566"><span class="linenum">5566</span></a>      RFC_822: &quot;D, d M y&quot;,
<a name="l5567"><span class="linenum">5567</span></a>      RFC_850: &quot;DD, dd-M-y&quot;,
<a name="l5568"><span class="linenum">5568</span></a>      RFC_1036: &quot;D, d M y&quot;,
<a name="l5569"><span class="linenum">5569</span></a>      RFC_1123: &quot;D, d M yy&quot;,
<a name="l5570"><span class="linenum">5570</span></a>      RFC_2822: &quot;D, d M yy&quot;,
<a name="l5571"><span class="linenum">5571</span></a>      RSS: &quot;D, d M y&quot;, // RFC 822
<a name="l5572"><span class="linenum">5572</span></a>      TICKS: &quot;!&quot;,
<a name="l5573"><span class="linenum">5573</span></a>      TIMESTAMP: &quot;@&quot;,
<a name="l5574"><span class="linenum">5574</span></a>      W3C: &quot;yy-mm-dd&quot;, // ISO 8601
<a name="l5575"><span class="linenum">5575</span></a>  
<a name="l5576"><span class="linenum">5576</span></a>      _ticksTo1970: (((1970 - 1) * 365 + Math.<a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(1970 / 4) - Math.<a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(1970 / 100) +
<a name="l5577"><span class="linenum">5577</span></a>          Math.<a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(1970 / 400)) * 24 * 60 * 60 * 10000000),
<a name="l5578"><span class="linenum">5578</span></a>  
<a name="l5579"><span class="linenum">5579</span></a>      <span class="comment">/* Format a date object into a string value.</span>
<a name="l5580"><span class="linenum">5580</span></a>  <span class="comment">     * The format can be combinations of the following:</span>
<a name="l5581"><span class="linenum">5581</span></a>  <span class="comment">     * d  - day of month (no leading zero)</span>
<a name="l5582"><span class="linenum">5582</span></a>  <span class="comment">     * dd - day of month (two digit)</span>
<a name="l5583"><span class="linenum">5583</span></a>  <span class="comment">     * o  - day of year (no leading zeros)</span>
<a name="l5584"><span class="linenum">5584</span></a>  <span class="comment">     * oo - day of year (three digit)</span>
<a name="l5585"><span class="linenum">5585</span></a>  <span class="comment">     * D  - day name short</span>
<a name="l5586"><span class="linenum">5586</span></a>  <span class="comment">     * DD - day name long</span>
<a name="l5587"><span class="linenum">5587</span></a>  <span class="comment">     * m  - month of year (no leading zero)</span>
<a name="l5588"><span class="linenum">5588</span></a>  <span class="comment">     * mm - month of year (two digit)</span>
<a name="l5589"><span class="linenum">5589</span></a>  <span class="comment">     * M  - month name short</span>
<a name="l5590"><span class="linenum">5590</span></a>  <span class="comment">     * MM - month name long</span>
<a name="l5591"><span class="linenum">5591</span></a>  <span class="comment">     * y  - year (two digit)</span>
<a name="l5592"><span class="linenum">5592</span></a>  <span class="comment">     * yy - year (four digit)</span>
<a name="l5593"><span class="linenum">5593</span></a>  <span class="comment">     * @ - Unix timestamp (ms since 01/01/1970)</span>
<a name="l5594"><span class="linenum">5594</span></a>  <span class="comment">     * ! - Windows ticks (100ns since 01/01/0001)</span>
<a name="l5595"><span class="linenum">5595</span></a>  <span class="comment">     * &quot;...&quot; - literal text</span>
<a name="l5596"><span class="linenum">5596</span></a>  <span class="comment">     * '' - single quote</span>
<a name="l5597"><span class="linenum">5597</span></a>  <span class="comment">     *</span>
<a name="l5598"><span class="linenum">5598</span></a>  <span class="comment">     * @param  format string - the desired format of the date</span>
<a name="l5599"><span class="linenum">5599</span></a>  <span class="comment">     * @param  date Date - the date value to format</span>
<a name="l5600"><span class="linenum">5600</span></a>  <span class="comment">     * @param  settings Object - attributes include:</span>
<a name="l5601"><span class="linenum">5601</span></a>  <span class="comment">     *                    dayNamesShort    string[7] - abbreviated names of the days from Sunday (optional)</span>
<a name="l5602"><span class="linenum">5602</span></a>  <span class="comment">     *                    dayNames        string[7] - names of the days from Sunday (optional)</span>
<a name="l5603"><span class="linenum">5603</span></a>  <span class="comment">     *                    monthNamesShort string[12] - abbreviated names of the months (optional)</span>
<a name="l5604"><span class="linenum">5604</span></a>  <span class="comment">     *                    monthNames        string[12] - names of the months (optional)</span>
<a name="l5605"><span class="linenum">5605</span></a>  <span class="comment">     * @return  string - the date in the above format</span>
<a name="l5606"><span class="linenum">5606</span></a>  <span class="comment">     */</span>
<a name="l5607"><span class="linenum">5607</span></a>      formatDate: function (format, date, settings) {
<a name="l5608"><span class="linenum">5608</span></a>          if (!date) {
<a name="l5609"><span class="linenum">5609</span></a>              return &quot;&quot;;
<a name="l5610"><span class="linenum">5610</span></a>          }
<a name="l5611"><span class="linenum">5611</span></a>  
<a name="l5612"><span class="linenum">5612</span></a>          var iFormat,
<a name="l5613"><span class="linenum">5613</span></a>              dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,
<a name="l5614"><span class="linenum">5614</span></a>              dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,
<a name="l5615"><span class="linenum">5615</span></a>              monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,
<a name="l5616"><span class="linenum">5616</span></a>              monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,
<a name="l5617"><span class="linenum">5617</span></a>  <span class="comment">            // Check whether a format character is doubled</span>
<a name="l5618"><span class="linenum">5618</span></a>              lookAhead = function(match) {
<a name="l5619"><span class="linenum">5619</span></a>                  var matches = (iFormat + 1 &lt; format.length &amp;&amp; format.charAt(iFormat + 1) === match);
<a name="l5620"><span class="linenum">5620</span></a>                  if (matches) {
<a name="l5621"><span class="linenum">5621</span></a>                      iFormat++;
<a name="l5622"><span class="linenum">5622</span></a>                  }
<a name="l5623"><span class="linenum">5623</span></a>                  return matches;
<a name="l5624"><span class="linenum">5624</span></a>              },
<a name="l5625"><span class="linenum">5625</span></a>  <span class="comment">            // Format a number, with leading zero if necessary</span>
<a name="l5626"><span class="linenum">5626</span></a>              formatNumber = function(match, value, len) {
<a name="l5627"><span class="linenum">5627</span></a>                  var num = &quot;&quot; + value;
<a name="l5628"><span class="linenum">5628</span></a>                  if (lookAhead(match)) {
<a name="l5629"><span class="linenum">5629</span></a>                      while (num.length &lt; len) {
<a name="l5630"><span class="linenum">5630</span></a>                          num = &quot;0&quot; + num;
<a name="l5631"><span class="linenum">5631</span></a>                      }
<a name="l5632"><span class="linenum">5632</span></a>                  }
<a name="l5633"><span class="linenum">5633</span></a>                  return num;
<a name="l5634"><span class="linenum">5634</span></a>              },
<a name="l5635"><span class="linenum">5635</span></a>  <span class="comment">            // Format a name, short or long as requested</span>
<a name="l5636"><span class="linenum">5636</span></a>              formatName = function(match, value, shortNames, longNames) {
<a name="l5637"><span class="linenum">5637</span></a>                  return (lookAhead(match) ? longNames[value] : shortNames[value]);
<a name="l5638"><span class="linenum">5638</span></a>              },
<a name="l5639"><span class="linenum">5639</span></a>              output = &quot;&quot;,
<a name="l5640"><span class="linenum">5640</span></a>              literal = false;
<a name="l5641"><span class="linenum">5641</span></a>  
<a name="l5642"><span class="linenum">5642</span></a>          if (date) {
<a name="l5643"><span class="linenum">5643</span></a>              for (iFormat = 0; iFormat &lt; format.length; iFormat++) {
<a name="l5644"><span class="linenum">5644</span></a>                  if (literal) {
<a name="l5645"><span class="linenum">5645</span></a>                      if (format.charAt(iFormat) === &quot;'&quot; &amp;&amp; !lookAhead(&quot;'&quot;)) {
<a name="l5646"><span class="linenum">5646</span></a>                          literal = false;
<a name="l5647"><span class="linenum">5647</span></a>                      } else {
<a name="l5648"><span class="linenum">5648</span></a>                          output += format.charAt(iFormat);
<a name="l5649"><span class="linenum">5649</span></a>                      }
<a name="l5650"><span class="linenum">5650</span></a>                  } else {
<a name="l5651"><span class="linenum">5651</span></a>                      switch (format.charAt(iFormat)) {
<a name="l5652"><span class="linenum">5652</span></a>                          case &quot;d&quot;:
<a name="l5653"><span class="linenum">5653</span></a>                              output += formatNumber(&quot;d&quot;, date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>(), 2);
<a name="l5654"><span class="linenum">5654</span></a>                              break;
<a name="l5655"><span class="linenum">5655</span></a>                          case &quot;D&quot;:
<a name="l5656"><span class="linenum">5656</span></a>                              output += formatName(&quot;D&quot;, date.getDay(), dayNamesShort, dayNames);
<a name="l5657"><span class="linenum">5657</span></a>                              break;
<a name="l5658"><span class="linenum">5658</span></a>                          case &quot;o&quot;:
<a name="l5659"><span class="linenum">5659</span></a>                              output += formatNumber(&quot;o&quot;,
<a name="l5660"><span class="linenum">5660</span></a>                                  Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>((new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(date.getFullYear(), date.getMonth(), date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>()).getTime() - new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);
<a name="l5661"><span class="linenum">5661</span></a>                              break;
<a name="l5662"><span class="linenum">5662</span></a>                          case &quot;m&quot;:
<a name="l5663"><span class="linenum">5663</span></a>                              output += formatNumber(&quot;m&quot;, date.getMonth() + 1, 2);
<a name="l5664"><span class="linenum">5664</span></a>                              break;
<a name="l5665"><span class="linenum">5665</span></a>                          case &quot;M&quot;:
<a name="l5666"><span class="linenum">5666</span></a>                              output += formatName(&quot;M&quot;, date.getMonth(), monthNamesShort, monthNames);
<a name="l5667"><span class="linenum">5667</span></a>                              break;
<a name="l5668"><span class="linenum">5668</span></a>                          case &quot;y&quot;:
<a name="l5669"><span class="linenum">5669</span></a>                              output += (lookAhead(&quot;y&quot;) ? date.getFullYear() :
<a name="l5670"><span class="linenum">5670</span></a>                                  (date.getYear() % 100 &lt; 10 ? &quot;0&quot; : &quot;&quot;) + date.getYear() % 100);
<a name="l5671"><span class="linenum">5671</span></a>                              break;
<a name="l5672"><span class="linenum">5672</span></a>                          case &quot;@&quot;:
<a name="l5673"><span class="linenum">5673</span></a>                              output += date.getTime();
<a name="l5674"><span class="linenum">5674</span></a>                              break;
<a name="l5675"><span class="linenum">5675</span></a>                          case &quot;!&quot;:
<a name="l5676"><span class="linenum">5676</span></a>                              output += date.getTime() * 10000 + this._ticksTo1970;
<a name="l5677"><span class="linenum">5677</span></a>                              break;
<a name="l5678"><span class="linenum">5678</span></a>                          case &quot;'&quot;:
<a name="l5679"><span class="linenum">5679</span></a>                              if (lookAhead(&quot;'&quot;)) {
<a name="l5680"><span class="linenum">5680</span></a>                                  output += &quot;'&quot;;
<a name="l5681"><span class="linenum">5681</span></a>                              } else {
<a name="l5682"><span class="linenum">5682</span></a>                                  literal = true;
<a name="l5683"><span class="linenum">5683</span></a>                              }
<a name="l5684"><span class="linenum">5684</span></a>                              break;
<a name="l5685"><span class="linenum">5685</span></a>                          default:
<a name="l5686"><span class="linenum">5686</span></a>                              output += format.charAt(iFormat);
<a name="l5687"><span class="linenum">5687</span></a>                      }
<a name="l5688"><span class="linenum">5688</span></a>                  }
<a name="l5689"><span class="linenum">5689</span></a>              }
<a name="l5690"><span class="linenum">5690</span></a>          }
<a name="l5691"><span class="linenum">5691</span></a>          return output;
<a name="l5692"><span class="linenum">5692</span></a>      },
<a name="l5693"><span class="linenum">5693</span></a>  
<a name="l5694"><span class="linenum">5694</span></a>  <span class="comment">    /* Extract all possible characters from the date format. */</span>
<a name="l5695"><span class="linenum">5695</span></a>      _possibleChars: function (format) {
<a name="l5696"><span class="linenum">5696</span></a>          var iFormat,
<a name="l5697"><span class="linenum">5697</span></a>              chars = &quot;&quot;,
<a name="l5698"><span class="linenum">5698</span></a>              literal = false,
<a name="l5699"><span class="linenum">5699</span></a>  <span class="comment">            // Check whether a format character is doubled</span>
<a name="l5700"><span class="linenum">5700</span></a>              lookAhead = function(match) {
<a name="l5701"><span class="linenum">5701</span></a>                  var matches = (iFormat + 1 &lt; format.length &amp;&amp; format.charAt(iFormat + 1) === match);
<a name="l5702"><span class="linenum">5702</span></a>                  if (matches) {
<a name="l5703"><span class="linenum">5703</span></a>                      iFormat++;
<a name="l5704"><span class="linenum">5704</span></a>                  }
<a name="l5705"><span class="linenum">5705</span></a>                  return matches;
<a name="l5706"><span class="linenum">5706</span></a>              };
<a name="l5707"><span class="linenum">5707</span></a>  
<a name="l5708"><span class="linenum">5708</span></a>          for (iFormat = 0; iFormat &lt; format.length; iFormat++) {
<a name="l5709"><span class="linenum">5709</span></a>              if (literal) {
<a name="l5710"><span class="linenum">5710</span></a>                  if (format.charAt(iFormat) === &quot;'&quot; &amp;&amp; !lookAhead(&quot;'&quot;)) {
<a name="l5711"><span class="linenum">5711</span></a>                      literal = false;
<a name="l5712"><span class="linenum">5712</span></a>                  } else {
<a name="l5713"><span class="linenum">5713</span></a>                      chars += format.charAt(iFormat);
<a name="l5714"><span class="linenum">5714</span></a>                  }
<a name="l5715"><span class="linenum">5715</span></a>              } else {
<a name="l5716"><span class="linenum">5716</span></a>                  switch (format.charAt(iFormat)) {
<a name="l5717"><span class="linenum">5717</span></a>                      case &quot;d&quot;: case &quot;m&quot;: case &quot;y&quot;: case &quot;@&quot;:
<a name="l5718"><span class="linenum">5718</span></a>                          chars += &quot;0123456789&quot;;
<a name="l5719"><span class="linenum">5719</span></a>                          break;
<a name="l5720"><span class="linenum">5720</span></a>                      case &quot;D&quot;: case &quot;M&quot;:
<a name="l5721"><span class="linenum">5721</span></a>                          return null; <span class="comment">// Accept anything</span>
<a name="l5722"><span class="linenum">5722</span></a>                      case &quot;'&quot;:
<a name="l5723"><span class="linenum">5723</span></a>                          if (lookAhead(&quot;'&quot;)) {
<a name="l5724"><span class="linenum">5724</span></a>                              chars += &quot;'&quot;;
<a name="l5725"><span class="linenum">5725</span></a>                          } else {
<a name="l5726"><span class="linenum">5726</span></a>                              literal = true;
<a name="l5727"><span class="linenum">5727</span></a>                          }
<a name="l5728"><span class="linenum">5728</span></a>                          break;
<a name="l5729"><span class="linenum">5729</span></a>                      default:
<a name="l5730"><span class="linenum">5730</span></a>                          chars += format.charAt(iFormat);
<a name="l5731"><span class="linenum">5731</span></a>                  }
<a name="l5732"><span class="linenum">5732</span></a>              }
<a name="l5733"><span class="linenum">5733</span></a>          }
<a name="l5734"><span class="linenum">5734</span></a>          return chars;
<a name="l5735"><span class="linenum">5735</span></a>      },
<a name="l5736"><span class="linenum">5736</span></a>  
<a name="l5737"><span class="linenum">5737</span></a>  <span class="comment">    /* Get a setting value, defaulting if necessary. */</span>
<a name="l5738"><span class="linenum">5738</span></a>      _get: function(inst, name) {
<a name="l5739"><span class="linenum">5739</span></a>          return inst.settings[name] !== undefined ?
<a name="l5740"><span class="linenum">5740</span></a>              inst.settings[name] : this._defaults[name];
<a name="l5741"><span class="linenum">5741</span></a>      },
<a name="l5742"><span class="linenum">5742</span></a>  
<a name="l5743"><span class="linenum">5743</span></a>  <span class="comment">    /* Parse existing date and initialise date picker. */</span>
<a name="l5744"><span class="linenum">5744</span></a>      _setDateFromField: function(inst, noDefault) {
<a name="l5745"><span class="linenum">5745</span></a>          if (inst.input.val() === inst.lastVal) {
<a name="l5746"><span class="linenum">5746</span></a>              return;
<a name="l5747"><span class="linenum">5747</span></a>          }
<a name="l5748"><span class="linenum">5748</span></a>  
<a name="l5749"><span class="linenum">5749</span></a>          var dateFormat = this._get(inst, &quot;dateFormat&quot;),
<a name="l5750"><span class="linenum">5750</span></a>              dates = inst.lastVal = inst.input ? inst.input.val() : null,
<a name="l5751"><span class="linenum">5751</span></a>              defaultDate = this._getDefaultDate(inst),
<a name="l5752"><span class="linenum">5752</span></a>              date = defaultDate,
<a name="l5753"><span class="linenum">5753</span></a>              settings = this._getFormatConfig(inst);
<a name="l5754"><span class="linenum">5754</span></a>  
<a name="l5755"><span class="linenum">5755</span></a>          try {
<a name="l5756"><span class="linenum">5756</span></a>              date = this.parseDate(dateFormat, dates, settings) || defaultDate;
<a name="l5757"><span class="linenum">5757</span></a>          } catch (event) {
<a name="l5758"><span class="linenum">5758</span></a>              dates = (noDefault ? &quot;&quot; : dates);
<a name="l5759"><span class="linenum">5759</span></a>          }
<a name="l5760"><span class="linenum">5760</span></a>          inst.selectedDay = date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>();
<a name="l5761"><span class="linenum">5761</span></a>          inst.drawMonth = inst.selectedMonth = date.getMonth();
<a name="l5762"><span class="linenum">5762</span></a>          inst.drawYear = inst.selectedYear = date.getFullYear();
<a name="l5763"><span class="linenum">5763</span></a>          inst.currentDay = (dates ? date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>() : 0);
<a name="l5764"><span class="linenum">5764</span></a>          inst.currentMonth = (dates ? date.getMonth() : 0);
<a name="l5765"><span class="linenum">5765</span></a>          inst.currentYear = (dates ? date.getFullYear() : 0);
<a name="l5766"><span class="linenum">5766</span></a>          this._adjustInstDate(inst);
<a name="l5767"><span class="linenum">5767</span></a>      },
<a name="l5768"><span class="linenum">5768</span></a>  
<a name="l5769"><span class="linenum">5769</span></a>  <span class="comment">    /* Retrieve the default date shown on opening. */</span>
<a name="l5770"><span class="linenum">5770</span></a>      _getDefaultDate: function(inst) {
<a name="l5771"><span class="linenum">5771</span></a>          return this._restrictMinMax(inst,
<a name="l5772"><span class="linenum">5772</span></a>              this._determineDate(inst, this._get(inst, &quot;defaultDate&quot;), new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>()));
<a name="l5773"><span class="linenum">5773</span></a>      },
<a name="l5774"><span class="linenum">5774</span></a>  
<a name="l5775"><span class="linenum">5775</span></a>  <span class="comment">    /* A date may be specified as an exact value or a relative one. */</span>
<a name="l5776"><span class="linenum">5776</span></a>      _determineDate: function(inst, date, defaultDate) {
<a name="l5777"><span class="linenum">5777</span></a>          var offsetNumeric = function(offset) {
<a name="l5778"><span class="linenum">5778</span></a>                  var date = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>();
<a name="l5779"><span class="linenum">5779</span></a>                  date.<a class="function" onClick="logFunction('setDate')" href="../../../_functions/setdate.html" onMouseOver="funcPopup(event,'setdate')">setDate</a>(date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>() + offset);
<a name="l5780"><span class="linenum">5780</span></a>                  return date;
<a name="l5781"><span class="linenum">5781</span></a>              },
<a name="l5782"><span class="linenum">5782</span></a>              offsetString = function(offset) {
<a name="l5783"><span class="linenum">5783</span></a>                  try {
<a name="l5784"><span class="linenum">5784</span></a>                      return $.datepicker.parseDate($.datepicker._get(inst, &quot;dateFormat&quot;),
<a name="l5785"><span class="linenum">5785</span></a>                          offset, $.datepicker._getFormatConfig(inst));
<a name="l5786"><span class="linenum">5786</span></a>                  }
<a name="l5787"><span class="linenum">5787</span></a>                  catch (e) {
<a name="l5788"><span class="linenum">5788</span></a>  <span class="comment">                    // Ignore</span>
<a name="l5789"><span class="linenum">5789</span></a>                  }
<a name="l5790"><span class="linenum">5790</span></a>  
<a name="l5791"><span class="linenum">5791</span></a>                  var date = (offset.toLowerCase().match(/^c/) ?
<a name="l5792"><span class="linenum">5792</span></a>                      $.datepicker._getDate(inst) : null) || new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(),
<a name="l5793"><span class="linenum">5793</span></a>                      year = date.getFullYear(),
<a name="l5794"><span class="linenum">5794</span></a>                      month = date.getMonth(),
<a name="l5795"><span class="linenum">5795</span></a>                      day = date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>(),
<a name="l5796"><span class="linenum">5796</span></a>                      pattern = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
<a name="l5797"><span class="linenum">5797</span></a>                      matches = pattern.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>(offset);
<a name="l5798"><span class="linenum">5798</span></a>  
<a name="l5799"><span class="linenum">5799</span></a>                  while (matches) {
<a name="l5800"><span class="linenum">5800</span></a>                      switch (matches[2] || &quot;d&quot;) {
<a name="l5801"><span class="linenum">5801</span></a>                          case &quot;d&quot; : case &quot;D&quot; :
<a name="l5802"><span class="linenum">5802</span></a>                              day += parseInt(matches[1],10); break;
<a name="l5803"><span class="linenum">5803</span></a>                          case &quot;w&quot; : case &quot;W&quot; :
<a name="l5804"><span class="linenum">5804</span></a>                              day += parseInt(matches[1],10) * 7; break;
<a name="l5805"><span class="linenum">5805</span></a>                          case &quot;m&quot; : case &quot;M&quot; :
<a name="l5806"><span class="linenum">5806</span></a>                              month += parseInt(matches[1],10);
<a name="l5807"><span class="linenum">5807</span></a>                              day = Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(day, $.datepicker._getDaysInMonth(year, month));
<a name="l5808"><span class="linenum">5808</span></a>                              break;
<a name="l5809"><span class="linenum">5809</span></a>                          case &quot;y&quot;: case &quot;Y&quot; :
<a name="l5810"><span class="linenum">5810</span></a>                              year += parseInt(matches[1],10);
<a name="l5811"><span class="linenum">5811</span></a>                              day = Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(day, $.datepicker._getDaysInMonth(year, month));
<a name="l5812"><span class="linenum">5812</span></a>                              break;
<a name="l5813"><span class="linenum">5813</span></a>                      }
<a name="l5814"><span class="linenum">5814</span></a>                      matches = pattern.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>(offset);
<a name="l5815"><span class="linenum">5815</span></a>                  }
<a name="l5816"><span class="linenum">5816</span></a>                  return new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(year, month, day);
<a name="l5817"><span class="linenum">5817</span></a>              },
<a name="l5818"><span class="linenum">5818</span></a>              newDate = (date == null || date === &quot;&quot; ? defaultDate : (typeof date === &quot;string&quot; ? offsetString(date) :
<a name="l5819"><span class="linenum">5819</span></a>                  (typeof date === &quot;number&quot; ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(date.getTime()))));
<a name="l5820"><span class="linenum">5820</span></a>  
<a name="l5821"><span class="linenum">5821</span></a>          newDate = (newDate &amp;&amp; newDate.<a class="function" onClick="logFunction('toString')" href="../../../_functions/tostring.html" onMouseOver="funcPopup(event,'tostring')">toString</a>() === &quot;Invalid Date&quot; ? defaultDate : newDate);
<a name="l5822"><span class="linenum">5822</span></a>          if (newDate) {
<a name="l5823"><span class="linenum">5823</span></a>              newDate.setHours(0);
<a name="l5824"><span class="linenum">5824</span></a>              newDate.setMinutes(0);
<a name="l5825"><span class="linenum">5825</span></a>              newDate.setSeconds(0);
<a name="l5826"><span class="linenum">5826</span></a>              newDate.setMilliseconds(0);
<a name="l5827"><span class="linenum">5827</span></a>          }
<a name="l5828"><span class="linenum">5828</span></a>          return this._daylightSavingAdjust(newDate);
<a name="l5829"><span class="linenum">5829</span></a>      },
<a name="l5830"><span class="linenum">5830</span></a>  
<a name="l5831"><span class="linenum">5831</span></a>      <span class="comment">/* Handle switch to/from daylight saving.</span>
<a name="l5832"><span class="linenum">5832</span></a>  <span class="comment">     * Hours may be non-zero on daylight saving cut-over:</span>
<a name="l5833"><span class="linenum">5833</span></a>  <span class="comment">     * &gt; 12 when midnight changeover, but then cannot generate</span>
<a name="l5834"><span class="linenum">5834</span></a>  <span class="comment">     * midnight datetime, so jump to 1AM, otherwise reset.</span>
<a name="l5835"><span class="linenum">5835</span></a>  <span class="comment">     * @param  date  (Date) the date to check</span>
<a name="l5836"><span class="linenum">5836</span></a>  <span class="comment">     * @return  (Date) the corrected date</span>
<a name="l5837"><span class="linenum">5837</span></a>  <span class="comment">     */</span>
<a name="l5838"><span class="linenum">5838</span></a>      _daylightSavingAdjust: function(date) {
<a name="l5839"><span class="linenum">5839</span></a>          if (!date) {
<a name="l5840"><span class="linenum">5840</span></a>              return null;
<a name="l5841"><span class="linenum">5841</span></a>          }
<a name="l5842"><span class="linenum">5842</span></a>          date.setHours(date.getHours() &gt; 12 ? date.getHours() + 2 : 0);
<a name="l5843"><span class="linenum">5843</span></a>          return date;
<a name="l5844"><span class="linenum">5844</span></a>      },
<a name="l5845"><span class="linenum">5845</span></a>  
<a name="l5846"><span class="linenum">5846</span></a>  <span class="comment">    /* Set the date(s) directly. */</span>
<a name="l5847"><span class="linenum">5847</span></a>      _setDate: function(inst, date, noChange) {
<a name="l5848"><span class="linenum">5848</span></a>          var clear = !date,
<a name="l5849"><span class="linenum">5849</span></a>              origMonth = inst.selectedMonth,
<a name="l5850"><span class="linenum">5850</span></a>              origYear = inst.selectedYear,
<a name="l5851"><span class="linenum">5851</span></a>              newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>()));
<a name="l5852"><span class="linenum">5852</span></a>  
<a name="l5853"><span class="linenum">5853</span></a>          inst.selectedDay = inst.currentDay = newDate.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>();
<a name="l5854"><span class="linenum">5854</span></a>          inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
<a name="l5855"><span class="linenum">5855</span></a>          inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
<a name="l5856"><span class="linenum">5856</span></a>          if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) &amp;&amp; !noChange) {
<a name="l5857"><span class="linenum">5857</span></a>              this._notifyChange(inst);
<a name="l5858"><span class="linenum">5858</span></a>          }
<a name="l5859"><span class="linenum">5859</span></a>          this._adjustInstDate(inst);
<a name="l5860"><span class="linenum">5860</span></a>          if (inst.input) {
<a name="l5861"><span class="linenum">5861</span></a>              inst.input.val(clear ? &quot;&quot; : this._formatDate(inst));
<a name="l5862"><span class="linenum">5862</span></a>          }
<a name="l5863"><span class="linenum">5863</span></a>      },
<a name="l5864"><span class="linenum">5864</span></a>  
<a name="l5865"><span class="linenum">5865</span></a>  <span class="comment">    /* Retrieve the date(s) directly. */</span>
<a name="l5866"><span class="linenum">5866</span></a>      _getDate: function(inst) {
<a name="l5867"><span class="linenum">5867</span></a>          var startDate = (!inst.currentYear || (inst.input &amp;&amp; inst.input.val() === &quot;&quot;) ? null :
<a name="l5868"><span class="linenum">5868</span></a>              this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(
<a name="l5869"><span class="linenum">5869</span></a>              inst.currentYear, inst.currentMonth, inst.currentDay)));
<a name="l5870"><span class="linenum">5870</span></a>              return startDate;
<a name="l5871"><span class="linenum">5871</span></a>      },
<a name="l5872"><span class="linenum">5872</span></a>  
<a name="l5873"><span class="linenum">5873</span></a>      <span class="comment">/* Attach the onxxx handlers.  These are declared statically so</span>
<a name="l5874"><span class="linenum">5874</span></a>  <span class="comment">     * they work with static code transformers like Caja.</span>
<a name="l5875"><span class="linenum">5875</span></a>  <span class="comment">     */</span>
<a name="l5876"><span class="linenum">5876</span></a>      _attachHandlers: function(inst) {
<a name="l5877"><span class="linenum">5877</span></a>          var stepMonths = this._get(inst, &quot;stepMonths&quot;),
<a name="l5878"><span class="linenum">5878</span></a>              id = &quot;#&quot; + inst.id.<a class="function" onClick="logFunction('replace')" href="../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /\\\\/g, &quot;\\&quot; );
<a name="l5879"><span class="linenum">5879</span></a>          inst.dpDiv.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;[data-handler]&quot;).map(function () {
<a name="l5880"><span class="linenum">5880</span></a>              var handler = {
<a name="l5881"><span class="linenum">5881</span></a>                  prev: function () {
<a name="l5882"><span class="linenum">5882</span></a>                      $.datepicker._adjustDate(id, -stepMonths, &quot;M&quot;);
<a name="l5883"><span class="linenum">5883</span></a>                  },
<a name="l5884"><span class="linenum">5884</span></a>                  next: function () {
<a name="l5885"><span class="linenum">5885</span></a>                      $.datepicker._adjustDate(id, +stepMonths, &quot;M&quot;);
<a name="l5886"><span class="linenum">5886</span></a>                  },
<a name="l5887"><span class="linenum">5887</span></a>                  hide: function () {
<a name="l5888"><span class="linenum">5888</span></a>                      $.datepicker._hideDatepicker();
<a name="l5889"><span class="linenum">5889</span></a>                  },
<a name="l5890"><span class="linenum">5890</span></a>                  today: function () {
<a name="l5891"><span class="linenum">5891</span></a>                      $.datepicker._gotoToday(id);
<a name="l5892"><span class="linenum">5892</span></a>                  },
<a name="l5893"><span class="linenum">5893</span></a>                  selectDay: function () {
<a name="l5894"><span class="linenum">5894</span></a>                      $.datepicker._selectDay(id, +this.getAttribute(&quot;data-month&quot;), +this.getAttribute(&quot;data-year&quot;), this);
<a name="l5895"><span class="linenum">5895</span></a>                      return false;
<a name="l5896"><span class="linenum">5896</span></a>                  },
<a name="l5897"><span class="linenum">5897</span></a>                  selectMonth: function () {
<a name="l5898"><span class="linenum">5898</span></a>                      $.datepicker._selectMonthYear(id, this, &quot;M&quot;);
<a name="l5899"><span class="linenum">5899</span></a>                      return false;
<a name="l5900"><span class="linenum">5900</span></a>                  },
<a name="l5901"><span class="linenum">5901</span></a>                  selectYear: function () {
<a name="l5902"><span class="linenum">5902</span></a>                      $.datepicker._selectMonthYear(id, this, &quot;Y&quot;);
<a name="l5903"><span class="linenum">5903</span></a>                      return false;
<a name="l5904"><span class="linenum">5904</span></a>                  }
<a name="l5905"><span class="linenum">5905</span></a>              };
<a name="l5906"><span class="linenum">5906</span></a>              $(this).<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>(this.getAttribute(&quot;data-event&quot;), handler[this.getAttribute(&quot;data-handler&quot;)]);
<a name="l5907"><span class="linenum">5907</span></a>          });
<a name="l5908"><span class="linenum">5908</span></a>      },
<a name="l5909"><span class="linenum">5909</span></a>  
<a name="l5910"><span class="linenum">5910</span></a>  <span class="comment">    /* Generate the HTML for the current state of the date picker. */</span>
<a name="l5911"><span class="linenum">5911</span></a>      _generateHTML: function(inst) {
<a name="l5912"><span class="linenum">5912</span></a>          var maxDraw, prevText, prev, nextText, next, currentText, gotoDate,
<a name="l5913"><span class="linenum">5913</span></a>              controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,
<a name="l5914"><span class="linenum">5914</span></a>              monthNames, monthNamesShort, beforeShowDay, showOtherMonths,
<a name="l5915"><span class="linenum">5915</span></a>              selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,
<a name="l5916"><span class="linenum">5916</span></a>              cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,
<a name="l5917"><span class="linenum">5917</span></a>              printDate, dRow, tbody, daySettings, otherMonth, unselectable,
<a name="l5918"><span class="linenum">5918</span></a>              tempDate = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(),
<a name="l5919"><span class="linenum">5919</span></a>              today = this._daylightSavingAdjust(
<a name="l5920"><span class="linenum">5920</span></a>                  new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(tempDate.getFullYear(), tempDate.getMonth(), tempDate.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>())), // clear time
<a name="l5921"><span class="linenum">5921</span></a>              isRTL = this._get(inst, &quot;isRTL&quot;),
<a name="l5922"><span class="linenum">5922</span></a>              showButtonPanel = this._get(inst, &quot;showButtonPanel&quot;),
<a name="l5923"><span class="linenum">5923</span></a>              hideIfNoPrevNext = this._get(inst, &quot;hideIfNoPrevNext&quot;),
<a name="l5924"><span class="linenum">5924</span></a>              navigationAsDateFormat = this._get(inst, &quot;navigationAsDateFormat&quot;),
<a name="l5925"><span class="linenum">5925</span></a>              numMonths = this._getNumberOfMonths(inst),
<a name="l5926"><span class="linenum">5926</span></a>              showCurrentAtPos = this._get(inst, &quot;showCurrentAtPos&quot;),
<a name="l5927"><span class="linenum">5927</span></a>              stepMonths = this._get(inst, &quot;stepMonths&quot;),
<a name="l5928"><span class="linenum">5928</span></a>              isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),
<a name="l5929"><span class="linenum">5929</span></a>              currentDate = this._daylightSavingAdjust((!inst.currentDay ? new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(9999, 9, 9) :
<a name="l5930"><span class="linenum">5930</span></a>                  new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(inst.currentYear, inst.currentMonth, inst.currentDay))),
<a name="l5931"><span class="linenum">5931</span></a>              minDate = this._getMinMaxDate(inst, &quot;min&quot;),
<a name="l5932"><span class="linenum">5932</span></a>              maxDate = this._getMinMaxDate(inst, &quot;max&quot;),
<a name="l5933"><span class="linenum">5933</span></a>              drawMonth = inst.drawMonth - showCurrentAtPos,
<a name="l5934"><span class="linenum">5934</span></a>              drawYear = inst.drawYear;
<a name="l5935"><span class="linenum">5935</span></a>  
<a name="l5936"><span class="linenum">5936</span></a>          if (drawMonth &lt; 0) {
<a name="l5937"><span class="linenum">5937</span></a>              drawMonth += 12;
<a name="l5938"><span class="linenum">5938</span></a>              drawYear--;
<a name="l5939"><span class="linenum">5939</span></a>          }
<a name="l5940"><span class="linenum">5940</span></a>          if (maxDate) {
<a name="l5941"><span class="linenum">5941</span></a>              maxDraw = this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(maxDate.getFullYear(),
<a name="l5942"><span class="linenum">5942</span></a>                  maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>()));
<a name="l5943"><span class="linenum">5943</span></a>              maxDraw = (minDate &amp;&amp; maxDraw &lt; minDate ? minDate : maxDraw);
<a name="l5944"><span class="linenum">5944</span></a>              while (this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(drawYear, drawMonth, 1)) &gt; maxDraw) {
<a name="l5945"><span class="linenum">5945</span></a>                  drawMonth--;
<a name="l5946"><span class="linenum">5946</span></a>                  if (drawMonth &lt; 0) {
<a name="l5947"><span class="linenum">5947</span></a>                      drawMonth = 11;
<a name="l5948"><span class="linenum">5948</span></a>                      drawYear--;
<a name="l5949"><span class="linenum">5949</span></a>                  }
<a name="l5950"><span class="linenum">5950</span></a>              }
<a name="l5951"><span class="linenum">5951</span></a>          }
<a name="l5952"><span class="linenum">5952</span></a>          inst.drawMonth = drawMonth;
<a name="l5953"><span class="linenum">5953</span></a>          inst.drawYear = drawYear;
<a name="l5954"><span class="linenum">5954</span></a>  
<a name="l5955"><span class="linenum">5955</span></a>          prevText = this._get(inst, &quot;prevText&quot;);
<a name="l5956"><span class="linenum">5956</span></a>          prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,
<a name="l5957"><span class="linenum">5957</span></a>              this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(drawYear, drawMonth - stepMonths, 1)),
<a name="l5958"><span class="linenum">5958</span></a>              this._getFormatConfig(inst)));
<a name="l5959"><span class="linenum">5959</span></a>  
<a name="l5960"><span class="linenum">5960</span></a>          prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?
<a name="l5961"><span class="linenum">5961</span></a>              &quot;&lt;a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'&quot; +
<a name="l5962"><span class="linenum">5962</span></a>              &quot; title='&quot; + prevText + &quot;'&gt;&lt;span class='ui-icon ui-icon-circle-triangle-&quot; + ( isRTL ? &quot;e&quot; : &quot;w&quot;) + &quot;'&gt;&quot; + prevText + &quot;&lt;/span&gt;&lt;/a&gt;&quot; :
<a name="l5963"><span class="linenum">5963</span></a>              (hideIfNoPrevNext ? &quot;&quot; : &quot;&lt;a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='&quot;+ prevText +&quot;'&gt;&lt;span class='ui-icon ui-icon-circle-triangle-&quot; + ( isRTL ? &quot;e&quot; : &quot;w&quot;) + &quot;'&gt;&quot; + prevText + &quot;&lt;/span&gt;&lt;/a&gt;&quot;));
<a name="l5964"><span class="linenum">5964</span></a>  
<a name="l5965"><span class="linenum">5965</span></a>          nextText = this._get(inst, &quot;nextText&quot;);
<a name="l5966"><span class="linenum">5966</span></a>          nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,
<a name="l5967"><span class="linenum">5967</span></a>              this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(drawYear, drawMonth + stepMonths, 1)),
<a name="l5968"><span class="linenum">5968</span></a>              this._getFormatConfig(inst)));
<a name="l5969"><span class="linenum">5969</span></a>  
<a name="l5970"><span class="linenum">5970</span></a>          next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?
<a name="l5971"><span class="linenum">5971</span></a>              &quot;&lt;a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'&quot; +
<a name="l5972"><span class="linenum">5972</span></a>              &quot; title='&quot; + nextText + &quot;'&gt;&lt;span class='ui-icon ui-icon-circle-triangle-&quot; + ( isRTL ? &quot;w&quot; : &quot;e&quot;) + &quot;'&gt;&quot; + nextText + &quot;&lt;/span&gt;&lt;/a&gt;&quot; :
<a name="l5973"><span class="linenum">5973</span></a>              (hideIfNoPrevNext ? &quot;&quot; : &quot;&lt;a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='&quot;+ nextText + &quot;'&gt;&lt;span class='ui-icon ui-icon-circle-triangle-&quot; + ( isRTL ? &quot;w&quot; : &quot;e&quot;) + &quot;'&gt;&quot; + nextText + &quot;&lt;/span&gt;&lt;/a&gt;&quot;));
<a name="l5974"><span class="linenum">5974</span></a>  
<a name="l5975"><span class="linenum">5975</span></a>          currentText = this._get(inst, &quot;currentText&quot;);
<a name="l5976"><span class="linenum">5976</span></a>          gotoDate = (this._get(inst, &quot;gotoCurrent&quot;) &amp;&amp; inst.currentDay ? currentDate : today);
<a name="l5977"><span class="linenum">5977</span></a>          currentText = (!navigationAsDateFormat ? currentText :
<a name="l5978"><span class="linenum">5978</span></a>              this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));
<a name="l5979"><span class="linenum">5979</span></a>  
<a name="l5980"><span class="linenum">5980</span></a>          controls = (!inst.inline ? &quot;&lt;button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'&gt;&quot; +
<a name="l5981"><span class="linenum">5981</span></a>              this._get(inst, &quot;closeText&quot;) + &quot;&lt;/button&gt;&quot; : &quot;&quot;);
<a name="l5982"><span class="linenum">5982</span></a>  
<a name="l5983"><span class="linenum">5983</span></a>          buttonPanel = (showButtonPanel) ? &quot;&lt;div class='ui-datepicker-buttonpane ui-widget-content'&gt;&quot; + (isRTL ? controls : &quot;&quot;) +
<a name="l5984"><span class="linenum">5984</span></a>              (this._isInRange(inst, gotoDate) ? &quot;&lt;button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'&quot; +
<a name="l5985"><span class="linenum">5985</span></a>              &quot;&gt;&quot; + currentText + &quot;&lt;/button&gt;&quot; : &quot;&quot;) + (isRTL ? &quot;&quot; : controls) + &quot;&lt;/div&gt;&quot; : &quot;&quot;;
<a name="l5986"><span class="linenum">5986</span></a>  
<a name="l5987"><span class="linenum">5987</span></a>          firstDay = parseInt(this._get(inst, &quot;firstDay&quot;),10);
<a name="l5988"><span class="linenum">5988</span></a>          firstDay = (isNaN(firstDay) ? 0 : firstDay);
<a name="l5989"><span class="linenum">5989</span></a>  
<a name="l5990"><span class="linenum">5990</span></a>          showWeek = this._get(inst, &quot;showWeek&quot;);
<a name="l5991"><span class="linenum">5991</span></a>          dayNames = this._get(inst, &quot;dayNames&quot;);
<a name="l5992"><span class="linenum">5992</span></a>          dayNamesMin = this._get(inst, &quot;dayNamesMin&quot;);
<a name="l5993"><span class="linenum">5993</span></a>          monthNames = this._get(inst, &quot;monthNames&quot;);
<a name="l5994"><span class="linenum">5994</span></a>          monthNamesShort = this._get(inst, &quot;monthNamesShort&quot;);
<a name="l5995"><span class="linenum">5995</span></a>          beforeShowDay = this._get(inst, &quot;beforeShowDay&quot;);
<a name="l5996"><span class="linenum">5996</span></a>          showOtherMonths = this._get(inst, &quot;showOtherMonths&quot;);
<a name="l5997"><span class="linenum">5997</span></a>          selectOtherMonths = this._get(inst, &quot;selectOtherMonths&quot;);
<a name="l5998"><span class="linenum">5998</span></a>          defaultDate = this._getDefaultDate(inst);
<a name="l5999"><span class="linenum">5999</span></a>          html = &quot;&quot;;
<a name="l6000"><span class="linenum">6000</span></a>          dow;
<a name="l6001"><span class="linenum">6001</span></a>          for (row = 0; row &lt; numMonths[0]; row++) {
<a name="l6002"><span class="linenum">6002</span></a>              group = &quot;&quot;;
<a name="l6003"><span class="linenum">6003</span></a>              this.maxRows = 4;
<a name="l6004"><span class="linenum">6004</span></a>              for (col = 0; col &lt; numMonths[1]; col++) {
<a name="l6005"><span class="linenum">6005</span></a>                  selectedDate = this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(drawYear, drawMonth, inst.selectedDay));
<a name="l6006"><span class="linenum">6006</span></a>                  cornerClass = &quot; ui-corner-all&quot;;
<a name="l6007"><span class="linenum">6007</span></a>                  calender = &quot;&quot;;
<a name="l6008"><span class="linenum">6008</span></a>                  if (isMultiMonth) {
<a name="l6009"><span class="linenum">6009</span></a>                      calender += &quot;&lt;div class='ui-datepicker-group&quot;;
<a name="l6010"><span class="linenum">6010</span></a>                      if (numMonths[1] &gt; 1) {
<a name="l6011"><span class="linenum">6011</span></a>                          switch (col) {
<a name="l6012"><span class="linenum">6012</span></a>                              case 0: calender += &quot; ui-datepicker-group-first&quot;;
<a name="l6013"><span class="linenum">6013</span></a>                                  cornerClass = &quot; ui-corner-&quot; + (isRTL ? &quot;right&quot; : &quot;left&quot;); break;
<a name="l6014"><span class="linenum">6014</span></a>                              case numMonths[1]-1: calender += &quot; ui-datepicker-group-last&quot;;
<a name="l6015"><span class="linenum">6015</span></a>                                  cornerClass = &quot; ui-corner-&quot; + (isRTL ? &quot;left&quot; : &quot;right&quot;); break;
<a name="l6016"><span class="linenum">6016</span></a>                              default: calender += &quot; ui-datepicker-group-middle&quot;; cornerClass = &quot;&quot;; break;
<a name="l6017"><span class="linenum">6017</span></a>                          }
<a name="l6018"><span class="linenum">6018</span></a>                      }
<a name="l6019"><span class="linenum">6019</span></a>                      calender += &quot;'&gt;&quot;;
<a name="l6020"><span class="linenum">6020</span></a>                  }
<a name="l6021"><span class="linenum">6021</span></a>                  calender += &quot;&lt;div class='ui-datepicker-header ui-widget-header ui-helper-clearfix&quot; + cornerClass + &quot;'&gt;&quot; +
<a name="l6022"><span class="linenum">6022</span></a>                      (/all|left/.test(cornerClass) &amp;&amp; row === 0 ? (isRTL ? next : prev) : &quot;&quot;) +
<a name="l6023"><span class="linenum">6023</span></a>                      (/all|right/.test(cornerClass) &amp;&amp; row === 0 ? (isRTL ? prev : next) : &quot;&quot;) +
<a name="l6024"><span class="linenum">6024</span></a>                      this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
<a name="l6025"><span class="linenum">6025</span></a>                      row &gt; 0 || col &gt; 0, monthNames, monthNamesShort) + // draw month headers
<a name="l6026"><span class="linenum">6026</span></a>                      &quot;&lt;/div&gt;&lt;table class='ui-datepicker-calendar'&gt;&lt;thead&gt;&quot; +
<a name="l6027"><span class="linenum">6027</span></a>                      &quot;&lt;tr&gt;&quot;;
<a name="l6028"><span class="linenum">6028</span></a>                  thead = (showWeek ? &quot;&lt;th class='ui-datepicker-week-col'&gt;&quot; + this._get(inst, &quot;weekHeader&quot;) + &quot;&lt;/th&gt;&quot; : &quot;&quot;);
<a name="l6029"><span class="linenum">6029</span></a>                  for (dow = 0; dow &lt; 7; dow++) { // days of the week
<a name="l6030"><span class="linenum">6030</span></a>                      day = (dow + firstDay) % 7;
<a name="l6031"><span class="linenum">6031</span></a>                      thead += &quot;&lt;th&quot; + ((dow + firstDay + 6) % 7 &gt;= 5 ? &quot; class='ui-datepicker-week-end'&quot; : &quot;&quot;) + &quot;&gt;&quot; +
<a name="l6032"><span class="linenum">6032</span></a>                          &quot;&lt;span title='&quot; + dayNames[day] + &quot;'&gt;&quot; + dayNamesMin[day] + &quot;&lt;/span&gt;&lt;/th&gt;&quot;;
<a name="l6033"><span class="linenum">6033</span></a>                  }
<a name="l6034"><span class="linenum">6034</span></a>                  calender += thead + &quot;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&quot;;
<a name="l6035"><span class="linenum">6035</span></a>                  daysInMonth = this._getDaysInMonth(drawYear, drawMonth);
<a name="l6036"><span class="linenum">6036</span></a>                  if (drawYear === inst.selectedYear &amp;&amp; drawMonth === inst.selectedMonth) {
<a name="l6037"><span class="linenum">6037</span></a>                      inst.selectedDay = Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(inst.selectedDay, daysInMonth);
<a name="l6038"><span class="linenum">6038</span></a>                  }
<a name="l6039"><span class="linenum">6039</span></a>                  leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;
<a name="l6040"><span class="linenum">6040</span></a>                  curRows = Math.<a class="phpfunction" onClick="logFunction('ceil')" href="../../../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>((leadDays + daysInMonth) / 7); <span class="comment">// calculate the number of rows to generate</span>
<a name="l6041"><span class="linenum">6041</span></a>                  numRows = (isMultiMonth ? this.maxRows &gt; curRows ? this.maxRows : curRows : curRows); <span class="comment">//If multiple months, use the higher number of rows (see #7043)</span>
<a name="l6042"><span class="linenum">6042</span></a>                  this.maxRows = numRows;
<a name="l6043"><span class="linenum">6043</span></a>                  printDate = this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(drawYear, drawMonth, 1 - leadDays));
<a name="l6044"><span class="linenum">6044</span></a>                  for (dRow = 0; dRow &lt; numRows; dRow++) { // create date picker rows
<a name="l6045"><span class="linenum">6045</span></a>                      calender += &quot;&lt;tr&gt;&quot;;
<a name="l6046"><span class="linenum">6046</span></a>                      tbody = (!showWeek ? &quot;&quot; : &quot;&lt;td class='ui-datepicker-week-col'&gt;&quot; +
<a name="l6047"><span class="linenum">6047</span></a>                          this._get(inst, &quot;calculateWeek&quot;)(printDate) + &quot;&lt;/td&gt;&quot;);
<a name="l6048"><span class="linenum">6048</span></a>                      for (dow = 0; dow &lt; 7; dow++) { // create date picker days
<a name="l6049"><span class="linenum">6049</span></a>                          daySettings = (beforeShowDay ?
<a name="l6050"><span class="linenum">6050</span></a>                              beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, &quot;&quot;]);
<a name="l6051"><span class="linenum">6051</span></a>                          otherMonth = (printDate.getMonth() !== drawMonth);
<a name="l6052"><span class="linenum">6052</span></a>                          unselectable = (otherMonth &amp;&amp; !selectOtherMonths) || !daySettings[0] ||
<a name="l6053"><span class="linenum">6053</span></a>                              (minDate &amp;&amp; printDate &lt; minDate) || (maxDate &amp;&amp; printDate &gt; maxDate);
<a name="l6054"><span class="linenum">6054</span></a>                          tbody += &quot;&lt;td class='&quot; +
<a name="l6055"><span class="linenum">6055</span></a>                              ((dow + firstDay + 6) % 7 &gt;= 5 ? &quot; ui-datepicker-week-end&quot; : &quot;&quot;) + // highlight weekends
<a name="l6056"><span class="linenum">6056</span></a>                              (otherMonth ? &quot; ui-datepicker-other-month&quot; : &quot;&quot;) + // highlight days from other months
<a name="l6057"><span class="linenum">6057</span></a>                              ((printDate.getTime() === selectedDate.getTime() &amp;&amp; drawMonth === inst.selectedMonth &amp;&amp; inst._keyEvent) || // user pressed key
<a name="l6058"><span class="linenum">6058</span></a>                              (defaultDate.getTime() === printDate.getTime() &amp;&amp; defaultDate.getTime() === selectedDate.getTime()) ?
<a name="l6059"><span class="linenum">6059</span></a>  <span class="comment">                            // or defaultDate is current printedDate and defaultDate is selectedDate</span>
<a name="l6060"><span class="linenum">6060</span></a>                              &quot; &quot; + this._dayOverClass : &quot;&quot;) + // highlight selected day
<a name="l6061"><span class="linenum">6061</span></a>                              (unselectable ? &quot; &quot; + this._unselectableClass + &quot; ui-state-disabled&quot;: &quot;&quot;) +  // highlight unselectable days
<a name="l6062"><span class="linenum">6062</span></a>                              (otherMonth &amp;&amp; !showOtherMonths ? &quot;&quot; : &quot; &quot; + daySettings[1] + // highlight custom dates
<a name="l6063"><span class="linenum">6063</span></a>                              (printDate.getTime() === currentDate.getTime() ? &quot; &quot; + this._currentClass : &quot;&quot;) + // highlight selected day
<a name="l6064"><span class="linenum">6064</span></a>                              (printDate.getTime() === today.getTime() ? &quot; ui-datepicker-today&quot; : &quot;&quot;)) + &quot;'&quot; + // highlight today (if different)
<a name="l6065"><span class="linenum">6065</span></a>                              ((!otherMonth || showOtherMonths) &amp;&amp; daySettings[2] ? &quot; title='&quot; + daySettings[2].<a class="function" onClick="logFunction('replace')" href="../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>(/'/g, &quot;&amp;#39;&quot;) + &quot;'&quot; : &quot;&quot;) + // cell title
<a name="l6066"><span class="linenum">6066</span></a>                              (unselectable ? &quot;&quot; : &quot; data-handler='selectDay' data-event='click' data-month='&quot; + printDate.getMonth() + &quot;' data-year='&quot; + printDate.getFullYear() + &quot;'&quot;) + &quot;&gt;&quot; + // actions
<a name="l6067"><span class="linenum">6067</span></a>                              (otherMonth &amp;&amp; !showOtherMonths ? &quot;&amp;#xa0;&quot; : // display for other months
<a name="l6068"><span class="linenum">6068</span></a>                              (unselectable ? &quot;&lt;span class='ui-state-default'&gt;&quot; + printDate.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>() + &quot;&lt;/span&gt;&quot; : &quot;&lt;a class='ui-state-default&quot; +
<a name="l6069"><span class="linenum">6069</span></a>                              (printDate.getTime() === today.getTime() ? &quot; ui-state-highlight&quot; : &quot;&quot;) +
<a name="l6070"><span class="linenum">6070</span></a>                              (printDate.getTime() === currentDate.getTime() ? &quot; ui-state-active&quot; : &quot;&quot;) + // highlight selected day
<a name="l6071"><span class="linenum">6071</span></a>                              (otherMonth ? &quot; ui-priority-secondary&quot; : &quot;&quot;) + // distinguish dates from other months
<a name="l6072"><span class="linenum">6072</span></a>                              &quot;' href='#'&gt;&quot; + printDate.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>() + &quot;&lt;/a&gt;&quot;)) + &quot;&lt;/td&gt;&quot;; <span class="comment">// display selectable date</span>
<a name="l6073"><span class="linenum">6073</span></a>                          printDate.<a class="function" onClick="logFunction('setDate')" href="../../../_functions/setdate.html" onMouseOver="funcPopup(event,'setdate')">setDate</a>(printDate.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>() + 1);
<a name="l6074"><span class="linenum">6074</span></a>                          printDate = this._daylightSavingAdjust(printDate);
<a name="l6075"><span class="linenum">6075</span></a>                      }
<a name="l6076"><span class="linenum">6076</span></a>                      calender += tbody + &quot;&lt;/tr&gt;&quot;;
<a name="l6077"><span class="linenum">6077</span></a>                  }
<a name="l6078"><span class="linenum">6078</span></a>                  drawMonth++;
<a name="l6079"><span class="linenum">6079</span></a>                  if (drawMonth &gt; 11) {
<a name="l6080"><span class="linenum">6080</span></a>                      drawMonth = 0;
<a name="l6081"><span class="linenum">6081</span></a>                      drawYear++;
<a name="l6082"><span class="linenum">6082</span></a>                  }
<a name="l6083"><span class="linenum">6083</span></a>                  calender += &quot;&lt;/tbody&gt;&lt;/table&gt;&quot; + (isMultiMonth ? &quot;&lt;/div&gt;&quot; +
<a name="l6084"><span class="linenum">6084</span></a>                              ((numMonths[0] &gt; 0 &amp;&amp; col === numMonths[1]-1) ? &quot;&lt;div class='ui-datepicker-row-break'&gt;&lt;/div&gt;&quot; : &quot;&quot;) : &quot;&quot;);
<a name="l6085"><span class="linenum">6085</span></a>                  group += calender;
<a name="l6086"><span class="linenum">6086</span></a>              }
<a name="l6087"><span class="linenum">6087</span></a>              html += group;
<a name="l6088"><span class="linenum">6088</span></a>          }
<a name="l6089"><span class="linenum">6089</span></a>          html += buttonPanel;
<a name="l6090"><span class="linenum">6090</span></a>          inst._keyEvent = false;
<a name="l6091"><span class="linenum">6091</span></a>          return html;
<a name="l6092"><span class="linenum">6092</span></a>      },
<a name="l6093"><span class="linenum">6093</span></a>  
<a name="l6094"><span class="linenum">6094</span></a>  <span class="comment">    /* Generate the month and year header. */</span>
<a name="l6095"><span class="linenum">6095</span></a>      _generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,
<a name="l6096"><span class="linenum">6096</span></a>              secondary, monthNames, monthNamesShort) {
<a name="l6097"><span class="linenum">6097</span></a>  
<a name="l6098"><span class="linenum">6098</span></a>          var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,
<a name="l6099"><span class="linenum">6099</span></a>              changeMonth = this._get(inst, &quot;changeMonth&quot;),
<a name="l6100"><span class="linenum">6100</span></a>              changeYear = this._get(inst, &quot;changeYear&quot;),
<a name="l6101"><span class="linenum">6101</span></a>              showMonthAfterYear = this._get(inst, &quot;showMonthAfterYear&quot;),
<a name="l6102"><span class="linenum">6102</span></a>              html = &quot;&lt;div class='ui-datepicker-title'&gt;&quot;,
<a name="l6103"><span class="linenum">6103</span></a>              monthHtml = &quot;&quot;;
<a name="l6104"><span class="linenum">6104</span></a>  
<a name="l6105"><span class="linenum">6105</span></a>  <span class="comment">        // month selection</span>
<a name="l6106"><span class="linenum">6106</span></a>          if (secondary || !changeMonth) {
<a name="l6107"><span class="linenum">6107</span></a>              monthHtml += &quot;&lt;span class='ui-datepicker-month'&gt;&quot; + monthNames[drawMonth] + &quot;&lt;/span&gt;&quot;;
<a name="l6108"><span class="linenum">6108</span></a>          } else {
<a name="l6109"><span class="linenum">6109</span></a>              inMinYear = (minDate &amp;&amp; minDate.getFullYear() === drawYear);
<a name="l6110"><span class="linenum">6110</span></a>              inMaxYear = (maxDate &amp;&amp; maxDate.getFullYear() === drawYear);
<a name="l6111"><span class="linenum">6111</span></a>              monthHtml += &quot;&lt;select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'&gt;&quot;;
<a name="l6112"><span class="linenum">6112</span></a>              for ( month = 0; month &lt; 12; month++) {
<a name="l6113"><span class="linenum">6113</span></a>                  if ((!inMinYear || month &gt;= minDate.getMonth()) &amp;&amp; (!inMaxYear || month &lt;= maxDate.getMonth())) {
<a name="l6114"><span class="linenum">6114</span></a>                      monthHtml += &quot;&lt;option value='&quot; + month + &quot;'&quot; +
<a name="l6115"><span class="linenum">6115</span></a>                          (month === drawMonth ? &quot; selected='selected'&quot; : &quot;&quot;) +
<a name="l6116"><span class="linenum">6116</span></a>                          &quot;&gt;&quot; + monthNamesShort[month] + &quot;&lt;/option&gt;&quot;;
<a name="l6117"><span class="linenum">6117</span></a>                  }
<a name="l6118"><span class="linenum">6118</span></a>              }
<a name="l6119"><span class="linenum">6119</span></a>              monthHtml += &quot;&lt;/select&gt;&quot;;
<a name="l6120"><span class="linenum">6120</span></a>          }
<a name="l6121"><span class="linenum">6121</span></a>  
<a name="l6122"><span class="linenum">6122</span></a>          if (!showMonthAfterYear) {
<a name="l6123"><span class="linenum">6123</span></a>              html += monthHtml + (secondary || !(changeMonth &amp;&amp; changeYear) ? &quot;&amp;#xa0;&quot; : &quot;&quot;);
<a name="l6124"><span class="linenum">6124</span></a>          }
<a name="l6125"><span class="linenum">6125</span></a>  
<a name="l6126"><span class="linenum">6126</span></a>  <span class="comment">        // year selection</span>
<a name="l6127"><span class="linenum">6127</span></a>          if ( !inst.yearshtml ) {
<a name="l6128"><span class="linenum">6128</span></a>              inst.yearshtml = &quot;&quot;;
<a name="l6129"><span class="linenum">6129</span></a>              if (secondary || !changeYear) {
<a name="l6130"><span class="linenum">6130</span></a>                  html += &quot;&lt;span class='ui-datepicker-year'&gt;&quot; + drawYear + &quot;&lt;/span&gt;&quot;;
<a name="l6131"><span class="linenum">6131</span></a>              } else {
<a name="l6132"><span class="linenum">6132</span></a>  <span class="comment">                // determine range of years to display</span>
<a name="l6133"><span class="linenum">6133</span></a>                  years = this._get(inst, &quot;yearRange&quot;).<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>(&quot;:&quot;);
<a name="l6134"><span class="linenum">6134</span></a>                  thisYear = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().getFullYear();
<a name="l6135"><span class="linenum">6135</span></a>                  determineYear = function(value) {
<a name="l6136"><span class="linenum">6136</span></a>                      var year = (value.match(/c[+\-].*/) ? drawYear + parseInt(value.substring(1), 10) :
<a name="l6137"><span class="linenum">6137</span></a>                          (value.match(/[+\-].*/) ? thisYear + parseInt(value, 10) :
<a name="l6138"><span class="linenum">6138</span></a>                          parseInt(value, 10)));
<a name="l6139"><span class="linenum">6139</span></a>                      return (isNaN(year) ? thisYear : year);
<a name="l6140"><span class="linenum">6140</span></a>                  };
<a name="l6141"><span class="linenum">6141</span></a>                  year = determineYear(years[0]);
<a name="l6142"><span class="linenum">6142</span></a>                  endYear = Math.<a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(year, determineYear(years[1] || &quot;&quot;));
<a name="l6143"><span class="linenum">6143</span></a>                  year = (minDate ? Math.<a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(year, minDate.getFullYear()) : year);
<a name="l6144"><span class="linenum">6144</span></a>                  endYear = (maxDate ? Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(endYear, maxDate.getFullYear()) : endYear);
<a name="l6145"><span class="linenum">6145</span></a>                  inst.yearshtml += &quot;&lt;select class='ui-datepicker-year' data-handler='selectYear' data-event='change'&gt;&quot;;
<a name="l6146"><span class="linenum">6146</span></a>                  for (; year &lt;= endYear; year++) {
<a name="l6147"><span class="linenum">6147</span></a>                      inst.yearshtml += &quot;&lt;option value='&quot; + year + &quot;'&quot; +
<a name="l6148"><span class="linenum">6148</span></a>                          (year === drawYear ? &quot; selected='selected'&quot; : &quot;&quot;) +
<a name="l6149"><span class="linenum">6149</span></a>                          &quot;&gt;&quot; + year + &quot;&lt;/option&gt;&quot;;
<a name="l6150"><span class="linenum">6150</span></a>                  }
<a name="l6151"><span class="linenum">6151</span></a>                  inst.yearshtml += &quot;&lt;/select&gt;&quot;;
<a name="l6152"><span class="linenum">6152</span></a>  
<a name="l6153"><span class="linenum">6153</span></a>                  html += inst.yearshtml;
<a name="l6154"><span class="linenum">6154</span></a>                  inst.yearshtml = null;
<a name="l6155"><span class="linenum">6155</span></a>              }
<a name="l6156"><span class="linenum">6156</span></a>          }
<a name="l6157"><span class="linenum">6157</span></a>  
<a name="l6158"><span class="linenum">6158</span></a>          html += this._get(inst, &quot;yearSuffix&quot;);
<a name="l6159"><span class="linenum">6159</span></a>          if (showMonthAfterYear) {
<a name="l6160"><span class="linenum">6160</span></a>              html += (secondary || !(changeMonth &amp;&amp; changeYear) ? &quot;&amp;#xa0;&quot; : &quot;&quot;) + monthHtml;
<a name="l6161"><span class="linenum">6161</span></a>          }
<a name="l6162"><span class="linenum">6162</span></a>          html += &quot;&lt;/div&gt;&quot;; <span class="comment">// Close datepicker_header</span>
<a name="l6163"><span class="linenum">6163</span></a>          return html;
<a name="l6164"><span class="linenum">6164</span></a>      },
<a name="l6165"><span class="linenum">6165</span></a>  
<a name="l6166"><span class="linenum">6166</span></a>  <span class="comment">    /* Adjust one of the date sub-fields. */</span>
<a name="l6167"><span class="linenum">6167</span></a>      _adjustInstDate: function(inst, offset, period) {
<a name="l6168"><span class="linenum">6168</span></a>          var year = inst.drawYear + (period === &quot;Y&quot; ? offset : 0),
<a name="l6169"><span class="linenum">6169</span></a>              month = inst.drawMonth + (period === &quot;M&quot; ? offset : 0),
<a name="l6170"><span class="linenum">6170</span></a>              day = Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === &quot;D&quot; ? offset : 0),
<a name="l6171"><span class="linenum">6171</span></a>              date = this._restrictMinMax(inst, this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(year, month, day)));
<a name="l6172"><span class="linenum">6172</span></a>  
<a name="l6173"><span class="linenum">6173</span></a>          inst.selectedDay = date.<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>();
<a name="l6174"><span class="linenum">6174</span></a>          inst.drawMonth = inst.selectedMonth = date.getMonth();
<a name="l6175"><span class="linenum">6175</span></a>          inst.drawYear = inst.selectedYear = date.getFullYear();
<a name="l6176"><span class="linenum">6176</span></a>          if (period === &quot;M&quot; || period === &quot;Y&quot;) {
<a name="l6177"><span class="linenum">6177</span></a>              this._notifyChange(inst);
<a name="l6178"><span class="linenum">6178</span></a>          }
<a name="l6179"><span class="linenum">6179</span></a>      },
<a name="l6180"><span class="linenum">6180</span></a>  
<a name="l6181"><span class="linenum">6181</span></a>  <span class="comment">    /* Ensure a date is within any min/max bounds. */</span>
<a name="l6182"><span class="linenum">6182</span></a>      _restrictMinMax: function(inst, date) {
<a name="l6183"><span class="linenum">6183</span></a>          var minDate = this._getMinMaxDate(inst, &quot;min&quot;),
<a name="l6184"><span class="linenum">6184</span></a>              maxDate = this._getMinMaxDate(inst, &quot;max&quot;),
<a name="l6185"><span class="linenum">6185</span></a>              newDate = (minDate &amp;&amp; date &lt; minDate ? minDate : date);
<a name="l6186"><span class="linenum">6186</span></a>          return (maxDate &amp;&amp; newDate &gt; maxDate ? maxDate : newDate);
<a name="l6187"><span class="linenum">6187</span></a>      },
<a name="l6188"><span class="linenum">6188</span></a>  
<a name="l6189"><span class="linenum">6189</span></a>  <span class="comment">    /* Notify change of month/year. */</span>
<a name="l6190"><span class="linenum">6190</span></a>      _notifyChange: function(inst) {
<a name="l6191"><span class="linenum">6191</span></a>          var onChange = this._get(inst, &quot;onChangeMonthYear&quot;);
<a name="l6192"><span class="linenum">6192</span></a>          if (onChange) {
<a name="l6193"><span class="linenum">6193</span></a>              onChange.apply((inst.input ? inst.input[0] : null),
<a name="l6194"><span class="linenum">6194</span></a>                  [inst.selectedYear, inst.selectedMonth + 1, inst]);
<a name="l6195"><span class="linenum">6195</span></a>          }
<a name="l6196"><span class="linenum">6196</span></a>      },
<a name="l6197"><span class="linenum">6197</span></a>  
<a name="l6198"><span class="linenum">6198</span></a>  <span class="comment">    /* Determine the number of months to show. */</span>
<a name="l6199"><span class="linenum">6199</span></a>      _getNumberOfMonths: function(inst) {
<a name="l6200"><span class="linenum">6200</span></a>          var numMonths = this._get(inst, &quot;numberOfMonths&quot;);
<a name="l6201"><span class="linenum">6201</span></a>          return (numMonths == null ? [1, 1] : (typeof numMonths === &quot;number&quot; ? [1, numMonths] : numMonths));
<a name="l6202"><span class="linenum">6202</span></a>      },
<a name="l6203"><span class="linenum">6203</span></a>  
<a name="l6204"><span class="linenum">6204</span></a>  <span class="comment">    /* Determine the current maximum date - ensure no time components are set. */</span>
<a name="l6205"><span class="linenum">6205</span></a>      _getMinMaxDate: function(inst, minMax) {
<a name="l6206"><span class="linenum">6206</span></a>          return this._determineDate(inst, this._get(inst, minMax + &quot;Date&quot;), null);
<a name="l6207"><span class="linenum">6207</span></a>      },
<a name="l6208"><span class="linenum">6208</span></a>  
<a name="l6209"><span class="linenum">6209</span></a>  <span class="comment">    /* Find the number of days in a given month. */</span>
<a name="l6210"><span class="linenum">6210</span></a>      _getDaysInMonth: function(year, month) {
<a name="l6211"><span class="linenum">6211</span></a>          return 32 - this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(year, month, 32)).<a class="phpfunction" onClick="logFunction('getDate')" href="../../../_functions/getdate.html" onMouseOver="phpfuncPopup(event,'getdate')">getDate</a>();
<a name="l6212"><span class="linenum">6212</span></a>      },
<a name="l6213"><span class="linenum">6213</span></a>  
<a name="l6214"><span class="linenum">6214</span></a>  <span class="comment">    /* Find the day of the week of the first of a month. */</span>
<a name="l6215"><span class="linenum">6215</span></a>      _getFirstDayOfMonth: function(year, month) {
<a name="l6216"><span class="linenum">6216</span></a>          return new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(year, month, 1).getDay();
<a name="l6217"><span class="linenum">6217</span></a>      },
<a name="l6218"><span class="linenum">6218</span></a>  
<a name="l6219"><span class="linenum">6219</span></a>  <span class="comment">    /* Determines if we should allow a &quot;next/prev&quot; month display change. */</span>
<a name="l6220"><span class="linenum">6220</span></a>      _canAdjustMonth: function(inst, offset, curYear, curMonth) {
<a name="l6221"><span class="linenum">6221</span></a>          var numMonths = this._getNumberOfMonths(inst),
<a name="l6222"><span class="linenum">6222</span></a>              date = this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(curYear,
<a name="l6223"><span class="linenum">6223</span></a>              curMonth + (offset &lt; 0 ? offset : numMonths[0] * numMonths[1]), 1));
<a name="l6224"><span class="linenum">6224</span></a>  
<a name="l6225"><span class="linenum">6225</span></a>          if (offset &lt; 0) {
<a name="l6226"><span class="linenum">6226</span></a>              date.<a class="function" onClick="logFunction('setDate')" href="../../../_functions/setdate.html" onMouseOver="funcPopup(event,'setdate')">setDate</a>(this._getDaysInMonth(date.getFullYear(), date.getMonth()));
<a name="l6227"><span class="linenum">6227</span></a>          }
<a name="l6228"><span class="linenum">6228</span></a>          return this._isInRange(inst, date);
<a name="l6229"><span class="linenum">6229</span></a>      },
<a name="l6230"><span class="linenum">6230</span></a>  
<a name="l6231"><span class="linenum">6231</span></a>  <span class="comment">    /* Is the given date in the accepted range? */</span>
<a name="l6232"><span class="linenum">6232</span></a>      _isInRange: function(inst, date) {
<a name="l6233"><span class="linenum">6233</span></a>          var yearSplit, currentYear,
<a name="l6234"><span class="linenum">6234</span></a>              minDate = this._getMinMaxDate(inst, &quot;min&quot;),
<a name="l6235"><span class="linenum">6235</span></a>              maxDate = this._getMinMaxDate(inst, &quot;max&quot;),
<a name="l6236"><span class="linenum">6236</span></a>              minYear = null,
<a name="l6237"><span class="linenum">6237</span></a>              maxYear = null,
<a name="l6238"><span class="linenum">6238</span></a>              years = this._get(inst, &quot;yearRange&quot;);
<a name="l6239"><span class="linenum">6239</span></a>              if (years){
<a name="l6240"><span class="linenum">6240</span></a>                  yearSplit = years.<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>(&quot;:&quot;);
<a name="l6241"><span class="linenum">6241</span></a>                  currentYear = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().getFullYear();
<a name="l6242"><span class="linenum">6242</span></a>                  minYear = parseInt(yearSplit[0], 10);
<a name="l6243"><span class="linenum">6243</span></a>                  maxYear = parseInt(yearSplit[1], 10);
<a name="l6244"><span class="linenum">6244</span></a>                  if ( yearSplit[0].match(/[+\-].*/) ) {
<a name="l6245"><span class="linenum">6245</span></a>                      minYear += currentYear;
<a name="l6246"><span class="linenum">6246</span></a>                  }
<a name="l6247"><span class="linenum">6247</span></a>                  if ( yearSplit[1].match(/[+\-].*/) ) {
<a name="l6248"><span class="linenum">6248</span></a>                      maxYear += currentYear;
<a name="l6249"><span class="linenum">6249</span></a>                  }
<a name="l6250"><span class="linenum">6250</span></a>              }
<a name="l6251"><span class="linenum">6251</span></a>  
<a name="l6252"><span class="linenum">6252</span></a>          return ((!minDate || date.getTime() &gt;= minDate.getTime()) &amp;&amp;
<a name="l6253"><span class="linenum">6253</span></a>              (!maxDate || date.getTime() &lt;= maxDate.getTime()) &amp;&amp;
<a name="l6254"><span class="linenum">6254</span></a>              (!minYear || date.getFullYear() &gt;= minYear) &amp;&amp;
<a name="l6255"><span class="linenum">6255</span></a>              (!maxYear || date.getFullYear() &lt;= maxYear));
<a name="l6256"><span class="linenum">6256</span></a>      },
<a name="l6257"><span class="linenum">6257</span></a>  
<a name="l6258"><span class="linenum">6258</span></a>  <span class="comment">    /* Provide the configuration settings for formatting/parsing. */</span>
<a name="l6259"><span class="linenum">6259</span></a>      _getFormatConfig: function(inst) {
<a name="l6260"><span class="linenum">6260</span></a>          var shortYearCutoff = this._get(inst, &quot;shortYearCutoff&quot;);
<a name="l6261"><span class="linenum">6261</span></a>          shortYearCutoff = (typeof shortYearCutoff !== &quot;string&quot; ? shortYearCutoff :
<a name="l6262"><span class="linenum">6262</span></a>              new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
<a name="l6263"><span class="linenum">6263</span></a>          return {shortYearCutoff: shortYearCutoff,
<a name="l6264"><span class="linenum">6264</span></a>              dayNamesShort: this._get(inst, &quot;dayNamesShort&quot;), dayNames: this._get(inst, &quot;dayNames&quot;),
<a name="l6265"><span class="linenum">6265</span></a>              monthNamesShort: this._get(inst, &quot;monthNamesShort&quot;), monthNames: this._get(inst, &quot;monthNames&quot;)};
<a name="l6266"><span class="linenum">6266</span></a>      },
<a name="l6267"><span class="linenum">6267</span></a>  
<a name="l6268"><span class="linenum">6268</span></a>  <span class="comment">    /* Format the given date for display. */</span>
<a name="l6269"><span class="linenum">6269</span></a>      _formatDate: function(inst, day, month, year) {
<a name="l6270"><span class="linenum">6270</span></a>          if (!day) {
<a name="l6271"><span class="linenum">6271</span></a>              inst.currentDay = inst.selectedDay;
<a name="l6272"><span class="linenum">6272</span></a>              inst.currentMonth = inst.selectedMonth;
<a name="l6273"><span class="linenum">6273</span></a>              inst.currentYear = inst.selectedYear;
<a name="l6274"><span class="linenum">6274</span></a>          }
<a name="l6275"><span class="linenum">6275</span></a>          var date = (day ? (typeof day === &quot;object&quot; ? day :
<a name="l6276"><span class="linenum">6276</span></a>              this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(year, month, day))) :
<a name="l6277"><span class="linenum">6277</span></a>              this._daylightSavingAdjust(new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>(inst.currentYear, inst.currentMonth, inst.currentDay)));
<a name="l6278"><span class="linenum">6278</span></a>          return this.formatDate(this._get(inst, &quot;dateFormat&quot;), date, this._getFormatConfig(inst));
<a name="l6279"><span class="linenum">6279</span></a>      }
<a name="l6280"><span class="linenum">6280</span></a>  });
<a name="l6281"><span class="linenum">6281</span></a>  
<a name="l6282"><span class="linenum">6282</span></a>  <span class="comment">/*</span>
<a name="l6283"><span class="linenum">6283</span></a>  <span class="comment"> * Bind hover events for datepicker elements.</span>
<a name="l6284"><span class="linenum">6284</span></a>  <span class="comment"> * Done via delegate so the binding only occurs once in the lifetime of the parent div.</span>
<a name="l6285"><span class="linenum">6285</span></a>  <span class="comment"> * Global instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.</span>
<a name="l6286"><span class="linenum">6286</span></a>  <span class="comment"> */</span>
<a name="l6287"><span class="linenum">6287</span></a>  function <a class="function" onClick="logFunction('bindHover')" href="../../../_functions/bindhover.html" onMouseOver="funcPopup(event,'bindhover')">bindHover</a>(dpDiv) {
<a name="l6288"><span class="linenum">6288</span></a>      var selector = &quot;button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a&quot;;
<a name="l6289"><span class="linenum">6289</span></a>      return dpDiv.delegate(selector, &quot;mouseout&quot;, function() {
<a name="l6290"><span class="linenum">6290</span></a>              $(this).removeClass(&quot;ui-state-hover&quot;);
<a name="l6291"><span class="linenum">6291</span></a>              if (this.className.indexOf(&quot;ui-datepicker-prev&quot;) !== -1) {
<a name="l6292"><span class="linenum">6292</span></a>                  $(this).removeClass(&quot;ui-datepicker-prev-hover&quot;);
<a name="l6293"><span class="linenum">6293</span></a>              }
<a name="l6294"><span class="linenum">6294</span></a>              if (this.className.indexOf(&quot;ui-datepicker-next&quot;) !== -1) {
<a name="l6295"><span class="linenum">6295</span></a>                  $(this).removeClass(&quot;ui-datepicker-next-hover&quot;);
<a name="l6296"><span class="linenum">6296</span></a>              }
<a name="l6297"><span class="linenum">6297</span></a>          })
<a name="l6298"><span class="linenum">6298</span></a>          .delegate(selector, &quot;mouseover&quot;, function(){
<a name="l6299"><span class="linenum">6299</span></a>              if (!$.datepicker._isDisabledDatepicker( instActive.inline ? dpDiv.parent()[0] : instActive.input[0])) {
<a name="l6300"><span class="linenum">6300</span></a>                  $(this).parents(&quot;.ui-datepicker-calendar&quot;).<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(&quot;a&quot;).removeClass(&quot;ui-state-hover&quot;);
<a name="l6301"><span class="linenum">6301</span></a>                  $(this).addClass(&quot;ui-state-hover&quot;);
<a name="l6302"><span class="linenum">6302</span></a>                  if (this.className.indexOf(&quot;ui-datepicker-prev&quot;) !== -1) {
<a name="l6303"><span class="linenum">6303</span></a>                      $(this).addClass(&quot;ui-datepicker-prev-hover&quot;);
<a name="l6304"><span class="linenum">6304</span></a>                  }
<a name="l6305"><span class="linenum">6305</span></a>                  if (this.className.indexOf(&quot;ui-datepicker-next&quot;) !== -1) {
<a name="l6306"><span class="linenum">6306</span></a>                      $(this).addClass(&quot;ui-datepicker-next-hover&quot;);
<a name="l6307"><span class="linenum">6307</span></a>                  }
<a name="l6308"><span class="linenum">6308</span></a>              }
<a name="l6309"><span class="linenum">6309</span></a>          });
<a name="l6310"><span class="linenum">6310</span></a>  }
<a name="l6311"><span class="linenum">6311</span></a>  
<a name="l6312"><span class="linenum">6312</span></a>  <span class="comment">/* jQuery extend now ignores nulls! */</span>
<a name="l6313"><span class="linenum">6313</span></a>  function <a class="function" onClick="logFunction('extendRemove')" href="../../../_functions/extendremove.html" onMouseOver="funcPopup(event,'extendremove')">extendRemove</a>(target, props) {
<a name="l6314"><span class="linenum">6314</span></a>      $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(target, props);
<a name="l6315"><span class="linenum">6315</span></a>      for (var name in props) {
<a name="l6316"><span class="linenum">6316</span></a>          if (props[name] == null) {
<a name="l6317"><span class="linenum">6317</span></a>              target[name] = props[name];
<a name="l6318"><span class="linenum">6318</span></a>          }
<a name="l6319"><span class="linenum">6319</span></a>      }
<a name="l6320"><span class="linenum">6320</span></a>      return target;
<a name="l6321"><span class="linenum">6321</span></a>  }
<a name="l6322"><span class="linenum">6322</span></a>  
<a name="l6323"><span class="linenum">6323</span></a>  <span class="comment">/* Invoke the datepicker functionality.</span>
<a name="l6324"><span class="linenum">6324</span></a>  <span class="comment">   @param  options  string - a command, optionally followed by additional parameters or</span>
<a name="l6325"><span class="linenum">6325</span></a>  <span class="comment">                    Object - settings for attaching new datepicker functionality</span>
<a name="l6326"><span class="linenum">6326</span></a>  <span class="comment">   @return  jQuery object */</span>
<a name="l6327"><span class="linenum">6327</span></a>  $.fn.datepicker = function(options){
<a name="l6328"><span class="linenum">6328</span></a>  
<a name="l6329"><span class="linenum">6329</span></a>  <span class="comment">    /* Verify an empty collection wasn't passed - Fixes #6976 */</span>
<a name="l6330"><span class="linenum">6330</span></a>      if ( !this.length ) {
<a name="l6331"><span class="linenum">6331</span></a>          return this;
<a name="l6332"><span class="linenum">6332</span></a>      }
<a name="l6333"><span class="linenum">6333</span></a>  
<a name="l6334"><span class="linenum">6334</span></a>  <span class="comment">    /* Initialise the date picker. */</span>
<a name="l6335"><span class="linenum">6335</span></a>      if (!$.datepicker.initialized) {
<a name="l6336"><span class="linenum">6336</span></a>          $(document).mousedown($.datepicker._checkExternalClick);
<a name="l6337"><span class="linenum">6337</span></a>          $.datepicker.initialized = true;
<a name="l6338"><span class="linenum">6338</span></a>      }
<a name="l6339"><span class="linenum">6339</span></a>  
<a name="l6340"><span class="linenum">6340</span></a>  <span class="comment">    /* Append datepicker main container to body if not exist. */</span>
<a name="l6341"><span class="linenum">6341</span></a>      if ($(&quot;#&quot;+$.datepicker._mainDivId).length === 0) {
<a name="l6342"><span class="linenum">6342</span></a>          $(&quot;body&quot;).<a class="function" onClick="logFunction('append')" href="../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>($.datepicker.dpDiv);
<a name="l6343"><span class="linenum">6343</span></a>      }
<a name="l6344"><span class="linenum">6344</span></a>  
<a name="l6345"><span class="linenum">6345</span></a>      var otherArgs = Array.prototype.slice.call(arguments, 1);
<a name="l6346"><span class="linenum">6346</span></a>      if (typeof options === &quot;string&quot; &amp;&amp; (options === &quot;isDisabled&quot; || options === &quot;getDate&quot; || options === &quot;widget&quot;)) {
<a name="l6347"><span class="linenum">6347</span></a>          return $.datepicker[&quot;_&quot; + options + &quot;Datepicker&quot;].
<a name="l6348"><span class="linenum">6348</span></a>              apply($.datepicker, [this[0]].concat(otherArgs));
<a name="l6349"><span class="linenum">6349</span></a>      }
<a name="l6350"><span class="linenum">6350</span></a>      if (options === &quot;option&quot; &amp;&amp; arguments.length === 2 &amp;&amp; typeof arguments[1] === &quot;string&quot;) {
<a name="l6351"><span class="linenum">6351</span></a>          return $.datepicker[&quot;_&quot; + options + &quot;Datepicker&quot;].
<a name="l6352"><span class="linenum">6352</span></a>              apply($.datepicker, [this[0]].concat(otherArgs));
<a name="l6353"><span class="linenum">6353</span></a>      }
<a name="l6354"><span class="linenum">6354</span></a>      return this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l6355"><span class="linenum">6355</span></a>          typeof options === &quot;string&quot; ?
<a name="l6356"><span class="linenum">6356</span></a>              $.datepicker[&quot;_&quot; + options + &quot;Datepicker&quot;].
<a name="l6357"><span class="linenum">6357</span></a>                  apply($.datepicker, [this].concat(otherArgs)) :
<a name="l6358"><span class="linenum">6358</span></a>              $.datepicker._attachDatepicker(this, options);
<a name="l6359"><span class="linenum">6359</span></a>      });
<a name="l6360"><span class="linenum">6360</span></a>  };
<a name="l6361"><span class="linenum">6361</span></a>  
<a name="l6362"><span class="linenum">6362</span></a>  $.datepicker = new <a class="function" onClick="logFunction('Datepicker')" href="../../../_functions/datepicker.html" onMouseOver="funcPopup(event,'datepicker')">Datepicker</a>(); <span class="comment">// singleton instance</span>
<a name="l6363"><span class="linenum">6363</span></a>  $.datepicker.initialized = false;
<a name="l6364"><span class="linenum">6364</span></a>  $.datepicker.uuid = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().getTime();
<a name="l6365"><span class="linenum">6365</span></a>  $.datepicker.version = &quot;1.10.4&quot;;
<a name="l6366"><span class="linenum">6366</span></a>  
<a name="l6367"><span class="linenum">6367</span></a>  })(jQuery);
<a name="l6368"><span class="linenum">6368</span></a>  (function( $, undefined ) {
<a name="l6369"><span class="linenum">6369</span></a>  
<a name="l6370"><span class="linenum">6370</span></a>  $.<a class="function" onClick="logFunction('widget')" href="../../../_functions/widget.html" onMouseOver="funcPopup(event,'widget')">widget</a>( &quot;ui.menu&quot;, {
<a name="l6371"><span class="linenum">6371</span></a>      version: &quot;1.10.4&quot;,
<a name="l6372"><span class="linenum">6372</span></a>      defaultElement: &quot;&lt;ul&gt;&quot;,
<a name="l6373"><span class="linenum">6373</span></a>      delay: 300,
<a name="l6374"><span class="linenum">6374</span></a>      options: {
<a name="l6375"><span class="linenum">6375</span></a>          icons: {
<a name="l6376"><span class="linenum">6376</span></a>              submenu: &quot;ui-icon-carat-1-e&quot;
<a name="l6377"><span class="linenum">6377</span></a>          },
<a name="l6378"><span class="linenum">6378</span></a>          menus: &quot;ul&quot;,
<a name="l6379"><span class="linenum">6379</span></a>          position: {
<a name="l6380"><span class="linenum">6380</span></a>              my: &quot;left top&quot;,
<a name="l6381"><span class="linenum">6381</span></a>              at: &quot;right top&quot;
<a name="l6382"><span class="linenum">6382</span></a>          },
<a name="l6383"><span class="linenum">6383</span></a>          role: &quot;menu&quot;,
<a name="l6384"><span class="linenum">6384</span></a>  
<a name="l6385"><span class="linenum">6385</span></a>  <span class="comment">        // callbacks</span>
<a name="l6386"><span class="linenum">6386</span></a>          blur: null,
<a name="l6387"><span class="linenum">6387</span></a>          focus: null,
<a name="l6388"><span class="linenum">6388</span></a>          select: null
<a name="l6389"><span class="linenum">6389</span></a>      },
<a name="l6390"><span class="linenum">6390</span></a>  
<a name="l6391"><span class="linenum">6391</span></a>      _create: function() {
<a name="l6392"><span class="linenum">6392</span></a>          this.activeMenu = this.element;
<a name="l6393"><span class="linenum">6393</span></a>  <span class="comment">        // flag used to prevent firing of the click handler</span>
<a name="l6394"><span class="linenum">6394</span></a>  <span class="comment">        // as the event bubbles up through nested menus</span>
<a name="l6395"><span class="linenum">6395</span></a>          this.mouseHandled = false;
<a name="l6396"><span class="linenum">6396</span></a>          this.element
<a name="l6397"><span class="linenum">6397</span></a>              .uniqueId()
<a name="l6398"><span class="linenum">6398</span></a>              .addClass( &quot;ui-menu ui-widget ui-widget-content ui-corner-all&quot; )
<a name="l6399"><span class="linenum">6399</span></a>              .toggleClass( &quot;ui-menu-icons&quot;, !!this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-icon&quot; ).length )
<a name="l6400"><span class="linenum">6400</span></a>              .attr({
<a name="l6401"><span class="linenum">6401</span></a>                  role: this.options.role,
<a name="l6402"><span class="linenum">6402</span></a>                  tabIndex: 0
<a name="l6403"><span class="linenum">6403</span></a>              })
<a name="l6404"><span class="linenum">6404</span></a>  <span class="comment">            // need to catch all clicks on disabled menu</span>
<a name="l6405"><span class="linenum">6405</span></a>  <span class="comment">            // not possible through _on</span>
<a name="l6406"><span class="linenum">6406</span></a>              .<a class="function" onClick="logFunction('bind')" href="../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>( &quot;click&quot; + this.eventNamespace, $.proxy(function( event ) {
<a name="l6407"><span class="linenum">6407</span></a>                  if ( this.options.disabled ) {
<a name="l6408"><span class="linenum">6408</span></a>                      event.preventDefault();
<a name="l6409"><span class="linenum">6409</span></a>                  }
<a name="l6410"><span class="linenum">6410</span></a>              }, this ));
<a name="l6411"><span class="linenum">6411</span></a>  
<a name="l6412"><span class="linenum">6412</span></a>          if ( this.options.disabled ) {
<a name="l6413"><span class="linenum">6413</span></a>              this.element
<a name="l6414"><span class="linenum">6414</span></a>                  .addClass( &quot;ui-state-disabled&quot; )
<a name="l6415"><span class="linenum">6415</span></a>                  .attr( &quot;aria-disabled&quot;, &quot;true&quot; );
<a name="l6416"><span class="linenum">6416</span></a>          }
<a name="l6417"><span class="linenum">6417</span></a>  
<a name="l6418"><span class="linenum">6418</span></a>          this._on({
<a name="l6419"><span class="linenum">6419</span></a>  <span class="comment">            // Prevent focus from sticking to links inside menu after clicking</span>
<a name="l6420"><span class="linenum">6420</span></a>  <span class="comment">            // them (focus should always stay on UL during navigation).</span>
<a name="l6421"><span class="linenum">6421</span></a>              &quot;mousedown .ui-menu-item &gt; a&quot;: function( event ) {
<a name="l6422"><span class="linenum">6422</span></a>                  event.preventDefault();
<a name="l6423"><span class="linenum">6423</span></a>              },
<a name="l6424"><span class="linenum">6424</span></a>              &quot;click .ui-state-disabled &gt; a&quot;: function( event ) {
<a name="l6425"><span class="linenum">6425</span></a>                  event.preventDefault();
<a name="l6426"><span class="linenum">6426</span></a>              },
<a name="l6427"><span class="linenum">6427</span></a>              &quot;click .ui-menu-item:<a class="function" onClick="logFunction('has')" href="../../../_functions/has.html" onMouseOver="funcPopup(event,'has')">has</a>(a)&quot;: function( event ) {
<a name="l6428"><span class="linenum">6428</span></a>                  var target = $( event.target ).closest( &quot;.ui-menu-item&quot; );
<a name="l6429"><span class="linenum">6429</span></a>                  if ( !this.mouseHandled &amp;&amp; target.not( &quot;.ui-state-disabled&quot; ).length ) {
<a name="l6430"><span class="linenum">6430</span></a>                      this.<a class="function" onClick="logFunction('select')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>( event );
<a name="l6431"><span class="linenum">6431</span></a>  
<a name="l6432"><span class="linenum">6432</span></a>  <span class="comment">                    // Only set the mouseHandled flag if the event will bubble, see #9469.</span>
<a name="l6433"><span class="linenum">6433</span></a>                      if ( !event.isPropagationStopped() ) {
<a name="l6434"><span class="linenum">6434</span></a>                          this.mouseHandled = true;
<a name="l6435"><span class="linenum">6435</span></a>                      }
<a name="l6436"><span class="linenum">6436</span></a>  
<a name="l6437"><span class="linenum">6437</span></a>  <span class="comment">                    // Open submenu on click</span>
<a name="l6438"><span class="linenum">6438</span></a>                      if ( target.<a class="function" onClick="logFunction('has')" href="../../../_functions/has.html" onMouseOver="funcPopup(event,'has')">has</a>( &quot;.ui-menu&quot; ).length ) {
<a name="l6439"><span class="linenum">6439</span></a>                          this.expand( event );
<a name="l6440"><span class="linenum">6440</span></a>                      } else if ( !this.element.is( &quot;:focus&quot; ) &amp;&amp; $( this.document[ 0 ].activeElement ).closest( &quot;.ui-menu&quot; ).length ) {
<a name="l6441"><span class="linenum">6441</span></a>  
<a name="l6442"><span class="linenum">6442</span></a>  <span class="comment">                        // Redirect focus to the menu</span>
<a name="l6443"><span class="linenum">6443</span></a>                          this.element.<a class="function" onClick="logFunction('trigger')" href="../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>( &quot;focus&quot;, [ true ] );
<a name="l6444"><span class="linenum">6444</span></a>  
<a name="l6445"><span class="linenum">6445</span></a>  <span class="comment">                        // If the active item is on the top level, let it stay active.</span>
<a name="l6446"><span class="linenum">6446</span></a>  <span class="comment">                        // Otherwise, blur the active item since it is no longer visible.</span>
<a name="l6447"><span class="linenum">6447</span></a>                          if ( this.active &amp;&amp; this.active.parents( &quot;.ui-menu&quot; ).length === 1 ) {
<a name="l6448"><span class="linenum">6448</span></a>                              clearTimeout( this.timer );
<a name="l6449"><span class="linenum">6449</span></a>                          }
<a name="l6450"><span class="linenum">6450</span></a>                      }
<a name="l6451"><span class="linenum">6451</span></a>                  }
<a name="l6452"><span class="linenum">6452</span></a>              },
<a name="l6453"><span class="linenum">6453</span></a>              &quot;mouseenter .ui-menu-item&quot;: function( event ) {
<a name="l6454"><span class="linenum">6454</span></a>                  var target = $( event.currentTarget );
<a name="l6455"><span class="linenum">6455</span></a>  <span class="comment">                // Remove ui-state-active class from siblings of the newly focused menu item</span>
<a name="l6456"><span class="linenum">6456</span></a>  <span class="comment">                // to avoid a jump caused by adjacent elements both having a class with a border</span>
<a name="l6457"><span class="linenum">6457</span></a>                  target.siblings().children( &quot;.ui-state-active&quot; ).removeClass( &quot;ui-state-active&quot; );
<a name="l6458"><span class="linenum">6458</span></a>                  this.focus( event, target );
<a name="l6459"><span class="linenum">6459</span></a>              },
<a name="l6460"><span class="linenum">6460</span></a>              mouseleave: &quot;collapseAll&quot;,
<a name="l6461"><span class="linenum">6461</span></a>              &quot;mouseleave .ui-menu&quot;: &quot;collapseAll&quot;,
<a name="l6462"><span class="linenum">6462</span></a>              focus: function( event, keepActiveItem ) {
<a name="l6463"><span class="linenum">6463</span></a>  <span class="comment">                // If there's already an active item, keep it active</span>
<a name="l6464"><span class="linenum">6464</span></a>  <span class="comment">                // If not, activate the first item</span>
<a name="l6465"><span class="linenum">6465</span></a>                  var item = this.active || this.element.children( &quot;.ui-menu-item&quot; ).eq( 0 );
<a name="l6466"><span class="linenum">6466</span></a>  
<a name="l6467"><span class="linenum">6467</span></a>                  if ( !keepActiveItem ) {
<a name="l6468"><span class="linenum">6468</span></a>                      this.focus( event, item );
<a name="l6469"><span class="linenum">6469</span></a>                  }
<a name="l6470"><span class="linenum">6470</span></a>              },
<a name="l6471"><span class="linenum">6471</span></a>              blur: function( event ) {
<a name="l6472"><span class="linenum">6472</span></a>                  this._delay(function() {
<a name="l6473"><span class="linenum">6473</span></a>                      if ( !$.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( this.element[0], this.document[0].activeElement ) ) {
<a name="l6474"><span class="linenum">6474</span></a>                          this.collapseAll( event );
<a name="l6475"><span class="linenum">6475</span></a>                      }
<a name="l6476"><span class="linenum">6476</span></a>                  });
<a name="l6477"><span class="linenum">6477</span></a>              },
<a name="l6478"><span class="linenum">6478</span></a>              keydown: &quot;_keydown&quot;
<a name="l6479"><span class="linenum">6479</span></a>          });
<a name="l6480"><span class="linenum">6480</span></a>  
<a name="l6481"><span class="linenum">6481</span></a>          this.<a class="function" onClick="logFunction('refresh')" href="../../../_functions/refresh.html" onMouseOver="funcPopup(event,'refresh')">refresh</a>();
<a name="l6482"><span class="linenum">6482</span></a>  
<a name="l6483"><span class="linenum">6483</span></a>  <span class="comment">        // Clicks outside of a menu collapse any open menus</span>
<a name="l6484"><span class="linenum">6484</span></a>          this._on( this.document, {
<a name="l6485"><span class="linenum">6485</span></a>              click: function( event ) {
<a name="l6486"><span class="linenum">6486</span></a>                  if ( !$( event.target ).closest( &quot;.ui-menu&quot; ).length ) {
<a name="l6487"><span class="linenum">6487</span></a>                      this.collapseAll( event );
<a name="l6488"><span class="linenum">6488</span></a>                  }
<a name="l6489"><span class="linenum">6489</span></a>  
<a name="l6490"><span class="linenum">6490</span></a>  <span class="comment">                // Reset the mouseHandled flag</span>
<a name="l6491"><span class="linenum">6491</span></a>                  this.mouseHandled = false;
<a name="l6492"><span class="linenum">6492</span></a>              }
<a name="l6493"><span class="linenum">6493</span></a>          });
<a name="l6494"><span class="linenum">6494</span></a>      },
<a name="l6495"><span class="linenum">6495</span></a>  
<a name="l6496"><span class="linenum">6496</span></a>      _destroy: function() {
<a name="l6497"><span class="linenum">6497</span></a>  <span class="comment">        // Destroy (sub)menus</span>
<a name="l6498"><span class="linenum">6498</span></a>          this.element
<a name="l6499"><span class="linenum">6499</span></a>              .removeAttr( &quot;aria-activedescendant&quot; )
<a name="l6500"><span class="linenum">6500</span></a>              .<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-menu&quot; ).addBack()
<a name="l6501"><span class="linenum">6501</span></a>                  .removeClass( &quot;ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons&quot; )
<a name="l6502"><span class="linenum">6502</span></a>                  .removeAttr( &quot;role&quot; )
<a name="l6503"><span class="linenum">6503</span></a>                  .removeAttr( &quot;tabIndex&quot; )
<a name="l6504"><span class="linenum">6504</span></a>                  .removeAttr( &quot;aria-labelledby&quot; )
<a name="l6505"><span class="linenum">6505</span></a>                  .removeAttr( &quot;aria-expanded&quot; )
<a name="l6506"><span class="linenum">6506</span></a>                  .removeAttr( &quot;aria-hidden&quot; )
<a name="l6507"><span class="linenum">6507</span></a>                  .removeAttr( &quot;aria-disabled&quot; )
<a name="l6508"><span class="linenum">6508</span></a>                  .removeUniqueId()
<a name="l6509"><span class="linenum">6509</span></a>                  .<a class="function" onClick="logFunction('show')" href="../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l6510"><span class="linenum">6510</span></a>  
<a name="l6511"><span class="linenum">6511</span></a>  <span class="comment">        // Destroy menu items</span>
<a name="l6512"><span class="linenum">6512</span></a>          this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-menu-item&quot; )
<a name="l6513"><span class="linenum">6513</span></a>              .removeClass( &quot;ui-menu-item&quot; )
<a name="l6514"><span class="linenum">6514</span></a>              .removeAttr( &quot;role&quot; )
<a name="l6515"><span class="linenum">6515</span></a>              .removeAttr( &quot;aria-disabled&quot; )
<a name="l6516"><span class="linenum">6516</span></a>              .children( &quot;a&quot; )
<a name="l6517"><span class="linenum">6517</span></a>                  .removeUniqueId()
<a name="l6518"><span class="linenum">6518</span></a>                  .removeClass( &quot;ui-corner-all ui-state-hover&quot; )
<a name="l6519"><span class="linenum">6519</span></a>                  .removeAttr( &quot;tabIndex&quot; )
<a name="l6520"><span class="linenum">6520</span></a>                  .removeAttr( &quot;role&quot; )
<a name="l6521"><span class="linenum">6521</span></a>                  .removeAttr( &quot;aria-haspopup&quot; )
<a name="l6522"><span class="linenum">6522</span></a>                  .children().<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( function() {
<a name="l6523"><span class="linenum">6523</span></a>                      var elem = $( this );
<a name="l6524"><span class="linenum">6524</span></a>                      if ( elem.data( &quot;ui-menu-submenu-carat&quot; ) ) {
<a name="l6525"><span class="linenum">6525</span></a>                          elem.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l6526"><span class="linenum">6526</span></a>                      }
<a name="l6527"><span class="linenum">6527</span></a>                  });
<a name="l6528"><span class="linenum">6528</span></a>  
<a name="l6529"><span class="linenum">6529</span></a>  <span class="comment">        // Destroy menu dividers</span>
<a name="l6530"><span class="linenum">6530</span></a>          this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-menu-divider&quot; ).removeClass( &quot;ui-menu-divider ui-widget-content&quot; );
<a name="l6531"><span class="linenum">6531</span></a>      },
<a name="l6532"><span class="linenum">6532</span></a>  
<a name="l6533"><span class="linenum">6533</span></a>      _keydown: function( event ) {
<a name="l6534"><span class="linenum">6534</span></a>          var match, prev, character, skip, regex,
<a name="l6535"><span class="linenum">6535</span></a>              preventDefault = true;
<a name="l6536"><span class="linenum">6536</span></a>  
<a name="l6537"><span class="linenum">6537</span></a>  		function <a class="function" onClick="logFunction('escape')" href="../../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>( value ) {
<a name="l6538"><span class="linenum">6538</span></a>              return value.<a class="function" onClick="logFunction('replace')" href="../../../_functions/replace.html" onMouseOver="funcPopup(event,'replace')">replace</a>( /[\-\[\]{}()*+?.,\\\^$|#\s]/g, &quot;\\$&amp;&quot; );
<a name="l6539"><span class="linenum">6539</span></a>          }
<a name="l6540"><span class="linenum">6540</span></a>  
<a name="l6541"><span class="linenum">6541</span></a>          switch ( event.keyCode ) {
<a name="l6542"><span class="linenum">6542</span></a>          case $.ui.keyCode.PAGE_UP:
<a name="l6543"><span class="linenum">6543</span></a>              this.previousPage( event );
<a name="l6544"><span class="linenum">6544</span></a>              break;
<a name="l6545"><span class="linenum">6545</span></a>          case $.ui.keyCode.PAGE_DOWN:
<a name="l6546"><span class="linenum">6546</span></a>              this.nextPage( event );
<a name="l6547"><span class="linenum">6547</span></a>              break;
<a name="l6548"><span class="linenum">6548</span></a>          case $.ui.keyCode.HOME:
<a name="l6549"><span class="linenum">6549</span></a>              this._move( &quot;first&quot;, &quot;first&quot;, event );
<a name="l6550"><span class="linenum">6550</span></a>              break;
<a name="l6551"><span class="linenum">6551</span></a>          case $.ui.keyCode.END:
<a name="l6552"><span class="linenum">6552</span></a>              this._move( &quot;last&quot;, &quot;last&quot;, event );
<a name="l6553"><span class="linenum">6553</span></a>              break;
<a name="l6554"><span class="linenum">6554</span></a>          case $.ui.keyCode.UP:
<a name="l6555"><span class="linenum">6555</span></a>              this.previous( event );
<a name="l6556"><span class="linenum">6556</span></a>              break;
<a name="l6557"><span class="linenum">6557</span></a>          case $.ui.keyCode.DOWN:
<a name="l6558"><span class="linenum">6558</span></a>              this.<a class="phpfunction" onClick="logFunction('next')" href="../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>( event );
<a name="l6559"><span class="linenum">6559</span></a>              break;
<a name="l6560"><span class="linenum">6560</span></a>          case $.ui.keyCode.LEFT:
<a name="l6561"><span class="linenum">6561</span></a>              this.collapse( event );
<a name="l6562"><span class="linenum">6562</span></a>              break;
<a name="l6563"><span class="linenum">6563</span></a>          case $.ui.keyCode.RIGHT:
<a name="l6564"><span class="linenum">6564</span></a>              if ( this.active &amp;&amp; !this.active.is( &quot;.ui-state-disabled&quot; ) ) {
<a name="l6565"><span class="linenum">6565</span></a>                  this.expand( event );
<a name="l6566"><span class="linenum">6566</span></a>              }
<a name="l6567"><span class="linenum">6567</span></a>              break;
<a name="l6568"><span class="linenum">6568</span></a>          case $.ui.keyCode.ENTER:
<a name="l6569"><span class="linenum">6569</span></a>          case $.ui.keyCode.SPACE:
<a name="l6570"><span class="linenum">6570</span></a>              this._activate( event );
<a name="l6571"><span class="linenum">6571</span></a>              break;
<a name="l6572"><span class="linenum">6572</span></a>          case $.ui.keyCode.ESCAPE:
<a name="l6573"><span class="linenum">6573</span></a>              this.collapse( event );
<a name="l6574"><span class="linenum">6574</span></a>              break;
<a name="l6575"><span class="linenum">6575</span></a>          default:
<a name="l6576"><span class="linenum">6576</span></a>              preventDefault = false;
<a name="l6577"><span class="linenum">6577</span></a>              prev = this.previousFilter || &quot;&quot;;
<a name="l6578"><span class="linenum">6578</span></a>              character = String.fromCharCode( event.keyCode );
<a name="l6579"><span class="linenum">6579</span></a>              skip = false;
<a name="l6580"><span class="linenum">6580</span></a>  
<a name="l6581"><span class="linenum">6581</span></a>              clearTimeout( this.filterTimer );
<a name="l6582"><span class="linenum">6582</span></a>  
<a name="l6583"><span class="linenum">6583</span></a>              if ( character === prev ) {
<a name="l6584"><span class="linenum">6584</span></a>                  skip = true;
<a name="l6585"><span class="linenum">6585</span></a>              } else {
<a name="l6586"><span class="linenum">6586</span></a>                  character = prev + character;
<a name="l6587"><span class="linenum">6587</span></a>              }
<a name="l6588"><span class="linenum">6588</span></a>  
<a name="l6589"><span class="linenum">6589</span></a>              regex = new RegExp( &quot;^&quot; + <a class="function" onClick="logFunction('escape')" href="../../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>( character ), &quot;i&quot; );
<a name="l6590"><span class="linenum">6590</span></a>              match = this.activeMenu.children( &quot;.ui-menu-item&quot; ).<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(function() {
<a name="l6591"><span class="linenum">6591</span></a>                  return regex.test( $( this ).children( &quot;a&quot; ).<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>() );
<a name="l6592"><span class="linenum">6592</span></a>              });
<a name="l6593"><span class="linenum">6593</span></a>              match = skip &amp;&amp; match.index( this.active.<a class="phpfunction" onClick="logFunction('next')" href="../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>() ) !== -1 ?
<a name="l6594"><span class="linenum">6594</span></a>                  this.active.nextAll( &quot;.ui-menu-item&quot; ) :
<a name="l6595"><span class="linenum">6595</span></a>                  match;
<a name="l6596"><span class="linenum">6596</span></a>  
<a name="l6597"><span class="linenum">6597</span></a>  <span class="comment">            // If no matches on the current filter, reset to the last character pressed</span>
<a name="l6598"><span class="linenum">6598</span></a>  <span class="comment">            // to move down the menu to the first item that starts with that character</span>
<a name="l6599"><span class="linenum">6599</span></a>              if ( !match.length ) {
<a name="l6600"><span class="linenum">6600</span></a>                  character = String.fromCharCode( event.keyCode );
<a name="l6601"><span class="linenum">6601</span></a>                  regex = new RegExp( &quot;^&quot; + <a class="function" onClick="logFunction('escape')" href="../../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>( character ), &quot;i&quot; );
<a name="l6602"><span class="linenum">6602</span></a>                  match = this.activeMenu.children( &quot;.ui-menu-item&quot; ).<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(function() {
<a name="l6603"><span class="linenum">6603</span></a>                      return regex.test( $( this ).children( &quot;a&quot; ).<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>() );
<a name="l6604"><span class="linenum">6604</span></a>                  });
<a name="l6605"><span class="linenum">6605</span></a>              }
<a name="l6606"><span class="linenum">6606</span></a>  
<a name="l6607"><span class="linenum">6607</span></a>              if ( match.length ) {
<a name="l6608"><span class="linenum">6608</span></a>                  this.focus( event, match );
<a name="l6609"><span class="linenum">6609</span></a>                  if ( match.length &gt; 1 ) {
<a name="l6610"><span class="linenum">6610</span></a>                      this.previousFilter = character;
<a name="l6611"><span class="linenum">6611</span></a>                      this.filterTimer = this._delay(function() {
<a name="l6612"><span class="linenum">6612</span></a>                          delete this.previousFilter;
<a name="l6613"><span class="linenum">6613</span></a>                      }, 1000 );
<a name="l6614"><span class="linenum">6614</span></a>                  } else {
<a name="l6615"><span class="linenum">6615</span></a>                      delete this.previousFilter;
<a name="l6616"><span class="linenum">6616</span></a>                  }
<a name="l6617"><span class="linenum">6617</span></a>              } else {
<a name="l6618"><span class="linenum">6618</span></a>                  delete this.previousFilter;
<a name="l6619"><span class="linenum">6619</span></a>              }
<a name="l6620"><span class="linenum">6620</span></a>          }
<a name="l6621"><span class="linenum">6621</span></a>  
<a name="l6622"><span class="linenum">6622</span></a>          if ( preventDefault ) {
<a name="l6623"><span class="linenum">6623</span></a>              event.preventDefault();
<a name="l6624"><span class="linenum">6624</span></a>          }
<a name="l6625"><span class="linenum">6625</span></a>      },
<a name="l6626"><span class="linenum">6626</span></a>  
<a name="l6627"><span class="linenum">6627</span></a>      _activate: function( event ) {
<a name="l6628"><span class="linenum">6628</span></a>          if ( !this.active.is( &quot;.ui-state-disabled&quot; ) ) {
<a name="l6629"><span class="linenum">6629</span></a>              if ( this.active.children( &quot;a[aria-haspopup='true']&quot; ).length ) {
<a name="l6630"><span class="linenum">6630</span></a>                  this.expand( event );
<a name="l6631"><span class="linenum">6631</span></a>              } else {
<a name="l6632"><span class="linenum">6632</span></a>                  this.<a class="function" onClick="logFunction('select')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>( event );
<a name="l6633"><span class="linenum">6633</span></a>              }
<a name="l6634"><span class="linenum">6634</span></a>          }
<a name="l6635"><span class="linenum">6635</span></a>      },
<a name="l6636"><span class="linenum">6636</span></a>  
<a name="l6637"><span class="linenum">6637</span></a>      refresh: function() {
<a name="l6638"><span class="linenum">6638</span></a>          var menus,
<a name="l6639"><span class="linenum">6639</span></a>              icon = this.options.icons.submenu,
<a name="l6640"><span class="linenum">6640</span></a>              submenus = this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( this.options.menus );
<a name="l6641"><span class="linenum">6641</span></a>  
<a name="l6642"><span class="linenum">6642</span></a>          this.element.toggleClass( &quot;ui-menu-icons&quot;, !!this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-icon&quot; ).length );
<a name="l6643"><span class="linenum">6643</span></a>  
<a name="l6644"><span class="linenum">6644</span></a>  <span class="comment">        // Initialize nested menus</span>
<a name="l6645"><span class="linenum">6645</span></a>          submenus.<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>( &quot;:not(.ui-menu)&quot; )
<a name="l6646"><span class="linenum">6646</span></a>              .addClass( &quot;ui-menu ui-widget ui-widget-content ui-corner-all&quot; )
<a name="l6647"><span class="linenum">6647</span></a>              .hide()
<a name="l6648"><span class="linenum">6648</span></a>              .attr({
<a name="l6649"><span class="linenum">6649</span></a>                  role: this.options.role,
<a name="l6650"><span class="linenum">6650</span></a>                  &quot;aria-hidden&quot;: &quot;true&quot;,
<a name="l6651"><span class="linenum">6651</span></a>                  &quot;aria-expanded&quot;: &quot;false&quot;
<a name="l6652"><span class="linenum">6652</span></a>              })
<a name="l6653"><span class="linenum">6653</span></a>              .<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l6654"><span class="linenum">6654</span></a>                  var menu = $( this ),
<a name="l6655"><span class="linenum">6655</span></a>                      item = menu.<a class="phpfunction" onClick="logFunction('prev')" href="../../../_functions/prev.html" onMouseOver="phpfuncPopup(event,'prev')">prev</a>( &quot;a&quot; ),
<a name="l6656"><span class="linenum">6656</span></a>                      submenuCarat = $( &quot;&lt;span&gt;&quot; )
<a name="l6657"><span class="linenum">6657</span></a>                          .addClass( &quot;ui-menu-icon ui-icon &quot; + icon )
<a name="l6658"><span class="linenum">6658</span></a>                          .data( &quot;ui-menu-submenu-carat&quot;, true );
<a name="l6659"><span class="linenum">6659</span></a>  
<a name="l6660"><span class="linenum">6660</span></a>                  item
<a name="l6661"><span class="linenum">6661</span></a>                      .attr( &quot;aria-haspopup&quot;, &quot;true&quot; )
<a name="l6662"><span class="linenum">6662</span></a>                      .prepend( submenuCarat );
<a name="l6663"><span class="linenum">6663</span></a>                  menu.attr( &quot;aria-labelledby&quot;, item.attr( &quot;id&quot; ) );
<a name="l6664"><span class="linenum">6664</span></a>              });
<a name="l6665"><span class="linenum">6665</span></a>  
<a name="l6666"><span class="linenum">6666</span></a>          menus = submenus.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( this.element );
<a name="l6667"><span class="linenum">6667</span></a>  
<a name="l6668"><span class="linenum">6668</span></a>  <span class="comment">        // Don't refresh list items that are already adapted</span>
<a name="l6669"><span class="linenum">6669</span></a>          menus.children( &quot;:not(.ui-menu-item):<a class="function" onClick="logFunction('has')" href="../../../_functions/has.html" onMouseOver="funcPopup(event,'has')">has</a>(a)&quot; )
<a name="l6670"><span class="linenum">6670</span></a>              .addClass( &quot;ui-menu-item&quot; )
<a name="l6671"><span class="linenum">6671</span></a>              .attr( &quot;role&quot;, &quot;presentation&quot; )
<a name="l6672"><span class="linenum">6672</span></a>              .children( &quot;a&quot; )
<a name="l6673"><span class="linenum">6673</span></a>                  .uniqueId()
<a name="l6674"><span class="linenum">6674</span></a>                  .addClass( &quot;ui-corner-all&quot; )
<a name="l6675"><span class="linenum">6675</span></a>                  .attr({
<a name="l6676"><span class="linenum">6676</span></a>                      tabIndex: -1,
<a name="l6677"><span class="linenum">6677</span></a>                      role: this._itemRole()
<a name="l6678"><span class="linenum">6678</span></a>                  });
<a name="l6679"><span class="linenum">6679</span></a>  
<a name="l6680"><span class="linenum">6680</span></a>  <span class="comment">        // Initialize unlinked menu-items containing spaces and/or dashes only as dividers</span>
<a name="l6681"><span class="linenum">6681</span></a>          menus.children( &quot;:not(.ui-menu-item)&quot; ).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l6682"><span class="linenum">6682</span></a>              var item = $( this );
<a name="l6683"><span class="linenum">6683</span></a>  <span class="comment">            // hyphen, em dash, en dash</span>
<a name="l6684"><span class="linenum">6684</span></a>              if ( !/[^\-\u2014\u2013\s]/.test( item.<a class="function" onClick="logFunction('text')" href="../../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>() ) ) {
<a name="l6685"><span class="linenum">6685</span></a>                  item.addClass( &quot;ui-widget-content ui-menu-divider&quot; );
<a name="l6686"><span class="linenum">6686</span></a>              }
<a name="l6687"><span class="linenum">6687</span></a>          });
<a name="l6688"><span class="linenum">6688</span></a>  
<a name="l6689"><span class="linenum">6689</span></a>  <span class="comment">        // Add aria-disabled attribute to any disabled menu item</span>
<a name="l6690"><span class="linenum">6690</span></a>          menus.children( &quot;.ui-state-disabled&quot; ).attr( &quot;aria-disabled&quot;, &quot;true&quot; );
<a name="l6691"><span class="linenum">6691</span></a>  
<a name="l6692"><span class="linenum">6692</span></a>  <span class="comment">        // If the active item has been removed, blur the menu</span>
<a name="l6693"><span class="linenum">6693</span></a>          if ( this.active &amp;&amp; !$.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( this.element[ 0 ], this.active[ 0 ] ) ) {
<a name="l6694"><span class="linenum">6694</span></a>              this.blur();
<a name="l6695"><span class="linenum">6695</span></a>          }
<a name="l6696"><span class="linenum">6696</span></a>      },
<a name="l6697"><span class="linenum">6697</span></a>  
<a name="l6698"><span class="linenum">6698</span></a>      _itemRole: function() {
<a name="l6699"><span class="linenum">6699</span></a>          return {
<a name="l6700"><span class="linenum">6700</span></a>              menu: &quot;menuitem&quot;,
<a name="l6701"><span class="linenum">6701</span></a>              listbox: &quot;option&quot;
<a name="l6702"><span class="linenum">6702</span></a>          }[ this.options.role ];
<a name="l6703"><span class="linenum">6703</span></a>      },
<a name="l6704"><span class="linenum">6704</span></a>  
<a name="l6705"><span class="linenum">6705</span></a>      _setOption: function( key, value ) {
<a name="l6706"><span class="linenum">6706</span></a>          if ( key === &quot;icons&quot; ) {
<a name="l6707"><span class="linenum">6707</span></a>              this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-menu-icon&quot; )
<a name="l6708"><span class="linenum">6708</span></a>                  .removeClass( this.options.icons.submenu )
<a name="l6709"><span class="linenum">6709</span></a>                  .addClass( value.submenu );
<a name="l6710"><span class="linenum">6710</span></a>          }
<a name="l6711"><span class="linenum">6711</span></a>          this._super( key, value );
<a name="l6712"><span class="linenum">6712</span></a>      },
<a name="l6713"><span class="linenum">6713</span></a>  
<a name="l6714"><span class="linenum">6714</span></a>      focus: function( event, item ) {
<a name="l6715"><span class="linenum">6715</span></a>          var nested, focused;
<a name="l6716"><span class="linenum">6716</span></a>          this.blur( event, event &amp;&amp; event.type === &quot;focus&quot; );
<a name="l6717"><span class="linenum">6717</span></a>  
<a name="l6718"><span class="linenum">6718</span></a>          this._scrollIntoView( item );
<a name="l6719"><span class="linenum">6719</span></a>  
<a name="l6720"><span class="linenum">6720</span></a>          this.active = item.<a class="function" onClick="logFunction('first')" href="../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l6721"><span class="linenum">6721</span></a>          focused = this.active.children( &quot;a&quot; ).addClass( &quot;ui-state-focus&quot; );
<a name="l6722"><span class="linenum">6722</span></a>  <span class="comment">        // Only update aria-activedescendant if there's a role</span>
<a name="l6723"><span class="linenum">6723</span></a>  <span class="comment">        // otherwise we assume focus is managed elsewhere</span>
<a name="l6724"><span class="linenum">6724</span></a>          if ( this.options.role ) {
<a name="l6725"><span class="linenum">6725</span></a>              this.element.attr( &quot;aria-activedescendant&quot;, focused.attr( &quot;id&quot; ) );
<a name="l6726"><span class="linenum">6726</span></a>          }
<a name="l6727"><span class="linenum">6727</span></a>  
<a name="l6728"><span class="linenum">6728</span></a>  <span class="comment">        // Highlight active parent menu item, if any</span>
<a name="l6729"><span class="linenum">6729</span></a>          this.active
<a name="l6730"><span class="linenum">6730</span></a>              .parent()
<a name="l6731"><span class="linenum">6731</span></a>              .closest( &quot;.ui-menu-item&quot; )
<a name="l6732"><span class="linenum">6732</span></a>              .children( &quot;a:first&quot; )
<a name="l6733"><span class="linenum">6733</span></a>              .addClass( &quot;ui-state-active&quot; );
<a name="l6734"><span class="linenum">6734</span></a>  
<a name="l6735"><span class="linenum">6735</span></a>          if ( event &amp;&amp; event.type === &quot;keydown&quot; ) {
<a name="l6736"><span class="linenum">6736</span></a>              this._close();
<a name="l6737"><span class="linenum">6737</span></a>          } else {
<a name="l6738"><span class="linenum">6738</span></a>              this.timer = this._delay(function() {
<a name="l6739"><span class="linenum">6739</span></a>                  this._close();
<a name="l6740"><span class="linenum">6740</span></a>              }, this.delay );
<a name="l6741"><span class="linenum">6741</span></a>          }
<a name="l6742"><span class="linenum">6742</span></a>  
<a name="l6743"><span class="linenum">6743</span></a>          nested = item.children( &quot;.ui-menu&quot; );
<a name="l6744"><span class="linenum">6744</span></a>          if ( nested.length &amp;&amp; event &amp;&amp; ( /^mouse/.test( event.type ) ) ) {
<a name="l6745"><span class="linenum">6745</span></a>              this._startOpening(nested);
<a name="l6746"><span class="linenum">6746</span></a>          }
<a name="l6747"><span class="linenum">6747</span></a>          this.activeMenu = item.parent();
<a name="l6748"><span class="linenum">6748</span></a>  
<a name="l6749"><span class="linenum">6749</span></a>          this._trigger( &quot;focus&quot;, event, { item: item } );
<a name="l6750"><span class="linenum">6750</span></a>      },
<a name="l6751"><span class="linenum">6751</span></a>  
<a name="l6752"><span class="linenum">6752</span></a>      _scrollIntoView: function( item ) {
<a name="l6753"><span class="linenum">6753</span></a>          var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
<a name="l6754"><span class="linenum">6754</span></a>          if ( this._hasScroll() ) {
<a name="l6755"><span class="linenum">6755</span></a>              borderTop = parseFloat( $.css( this.activeMenu[0], &quot;borderTopWidth&quot; ) ) || 0;
<a name="l6756"><span class="linenum">6756</span></a>              paddingTop = parseFloat( $.css( this.activeMenu[0], &quot;paddingTop&quot; ) ) || 0;
<a name="l6757"><span class="linenum">6757</span></a>              offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;
<a name="l6758"><span class="linenum">6758</span></a>              scroll = this.activeMenu.scrollTop();
<a name="l6759"><span class="linenum">6759</span></a>              elementHeight = this.activeMenu.height();
<a name="l6760"><span class="linenum">6760</span></a>              itemHeight = item.height();
<a name="l6761"><span class="linenum">6761</span></a>  
<a name="l6762"><span class="linenum">6762</span></a>              if ( offset &lt; 0 ) {
<a name="l6763"><span class="linenum">6763</span></a>                  this.activeMenu.scrollTop( scroll + offset );
<a name="l6764"><span class="linenum">6764</span></a>              } else if ( offset + itemHeight &gt; elementHeight ) {
<a name="l6765"><span class="linenum">6765</span></a>                  this.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );
<a name="l6766"><span class="linenum">6766</span></a>              }
<a name="l6767"><span class="linenum">6767</span></a>          }
<a name="l6768"><span class="linenum">6768</span></a>      },
<a name="l6769"><span class="linenum">6769</span></a>  
<a name="l6770"><span class="linenum">6770</span></a>      blur: function( event, fromFocus ) {
<a name="l6771"><span class="linenum">6771</span></a>          if ( !fromFocus ) {
<a name="l6772"><span class="linenum">6772</span></a>              clearTimeout( this.timer );
<a name="l6773"><span class="linenum">6773</span></a>          }
<a name="l6774"><span class="linenum">6774</span></a>  
<a name="l6775"><span class="linenum">6775</span></a>          if ( !this.active ) {
<a name="l6776"><span class="linenum">6776</span></a>              return;
<a name="l6777"><span class="linenum">6777</span></a>          }
<a name="l6778"><span class="linenum">6778</span></a>  
<a name="l6779"><span class="linenum">6779</span></a>          this.active.children( &quot;a&quot; ).removeClass( &quot;ui-state-focus&quot; );
<a name="l6780"><span class="linenum">6780</span></a>          this.active = null;
<a name="l6781"><span class="linenum">6781</span></a>  
<a name="l6782"><span class="linenum">6782</span></a>          this._trigger( &quot;blur&quot;, event, { item: this.active } );
<a name="l6783"><span class="linenum">6783</span></a>      },
<a name="l6784"><span class="linenum">6784</span></a>  
<a name="l6785"><span class="linenum">6785</span></a>      _startOpening: function( submenu ) {
<a name="l6786"><span class="linenum">6786</span></a>          clearTimeout( this.timer );
<a name="l6787"><span class="linenum">6787</span></a>  
<a name="l6788"><span class="linenum">6788</span></a>  <span class="comment">        // Don't open if already open fixes a Firefox bug that caused a .5 pixel</span>
<a name="l6789"><span class="linenum">6789</span></a>  <span class="comment">        // shift in the submenu position when mousing over the carat icon</span>
<a name="l6790"><span class="linenum">6790</span></a>          if ( submenu.attr( &quot;aria-hidden&quot; ) !== &quot;true&quot; ) {
<a name="l6791"><span class="linenum">6791</span></a>              return;
<a name="l6792"><span class="linenum">6792</span></a>          }
<a name="l6793"><span class="linenum">6793</span></a>  
<a name="l6794"><span class="linenum">6794</span></a>          this.timer = this._delay(function() {
<a name="l6795"><span class="linenum">6795</span></a>              this._close();
<a name="l6796"><span class="linenum">6796</span></a>              this._open( submenu );
<a name="l6797"><span class="linenum">6797</span></a>          }, this.delay );
<a name="l6798"><span class="linenum">6798</span></a>      },
<a name="l6799"><span class="linenum">6799</span></a>  
<a name="l6800"><span class="linenum">6800</span></a>      _open: function( submenu ) {
<a name="l6801"><span class="linenum">6801</span></a>          var position = $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({
<a name="l6802"><span class="linenum">6802</span></a>              of: this.active
<a name="l6803"><span class="linenum">6803</span></a>          }, this.options.position );
<a name="l6804"><span class="linenum">6804</span></a>  
<a name="l6805"><span class="linenum">6805</span></a>          clearTimeout( this.timer );
<a name="l6806"><span class="linenum">6806</span></a>          this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-menu&quot; ).not( submenu.parents( &quot;.ui-menu&quot; ) )
<a name="l6807"><span class="linenum">6807</span></a>              .hide()
<a name="l6808"><span class="linenum">6808</span></a>              .attr( &quot;aria-hidden&quot;, &quot;true&quot; );
<a name="l6809"><span class="linenum">6809</span></a>  
<a name="l6810"><span class="linenum">6810</span></a>          submenu
<a name="l6811"><span class="linenum">6811</span></a>              .<a class="function" onClick="logFunction('show')" href="../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>()
<a name="l6812"><span class="linenum">6812</span></a>              .removeAttr( &quot;aria-hidden&quot; )
<a name="l6813"><span class="linenum">6813</span></a>              .attr( &quot;aria-expanded&quot;, &quot;true&quot; )
<a name="l6814"><span class="linenum">6814</span></a>              .<a class="function" onClick="logFunction('position')" href="../../../_functions/position.html" onMouseOver="funcPopup(event,'position')">position</a>( position );
<a name="l6815"><span class="linenum">6815</span></a>      },
<a name="l6816"><span class="linenum">6816</span></a>  
<a name="l6817"><span class="linenum">6817</span></a>      collapseAll: function( event, all ) {
<a name="l6818"><span class="linenum">6818</span></a>          clearTimeout( this.timer );
<a name="l6819"><span class="linenum">6819</span></a>          this.timer = this._delay(function() {
<a name="l6820"><span class="linenum">6820</span></a>  <span class="comment">            // If we were passed an event, look for the submenu that contains the event</span>
<a name="l6821"><span class="linenum">6821</span></a>              var currentMenu = all ? this.element :
<a name="l6822"><span class="linenum">6822</span></a>                  $( event &amp;&amp; event.target ).closest( this.element.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-menu&quot; ) );
<a name="l6823"><span class="linenum">6823</span></a>  
<a name="l6824"><span class="linenum">6824</span></a>  <span class="comment">            // If we found no valid submenu ancestor, use the main menu to close all sub menus anyway</span>
<a name="l6825"><span class="linenum">6825</span></a>              if ( !currentMenu.length ) {
<a name="l6826"><span class="linenum">6826</span></a>                  currentMenu = this.element;
<a name="l6827"><span class="linenum">6827</span></a>              }
<a name="l6828"><span class="linenum">6828</span></a>  
<a name="l6829"><span class="linenum">6829</span></a>              this._close( currentMenu );
<a name="l6830"><span class="linenum">6830</span></a>  
<a name="l6831"><span class="linenum">6831</span></a>              this.blur( event );
<a name="l6832"><span class="linenum">6832</span></a>              this.activeMenu = currentMenu;
<a name="l6833"><span class="linenum">6833</span></a>          }, this.delay );
<a name="l6834"><span class="linenum">6834</span></a>      },
<a name="l6835"><span class="linenum">6835</span></a>  
<a name="l6836"><span class="linenum">6836</span></a>  <span class="comment">    // With no arguments, closes the currently active menu - if nothing is active</span>
<a name="l6837"><span class="linenum">6837</span></a>  <span class="comment">    // it closes all menus.  If passed an argument, it will search for menus BELOW</span>
<a name="l6838"><span class="linenum">6838</span></a>      _close: function( startMenu ) {
<a name="l6839"><span class="linenum">6839</span></a>          if ( !startMenu ) {
<a name="l6840"><span class="linenum">6840</span></a>              startMenu = this.active ? this.active.parent() : this.element;
<a name="l6841"><span class="linenum">6841</span></a>          }
<a name="l6842"><span class="linenum">6842</span></a>  
<a name="l6843"><span class="linenum">6843</span></a>          startMenu
<a name="l6844"><span class="linenum">6844</span></a>              .<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;.ui-menu&quot; )
<a name="l6845"><span class="linenum">6845</span></a>                  .hide()
<a name="l6846"><span class="linenum">6846</span></a>                  .attr( &quot;aria-hidden&quot;, &quot;true&quot; )
<a name="l6847"><span class="linenum">6847</span></a>                  .attr( &quot;aria-expanded&quot;, &quot;false&quot; )
<a name="l6848"><span class="linenum">6848</span></a>              .<a class="phpfunction" onClick="logFunction('end')" href="../../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>()
<a name="l6849"><span class="linenum">6849</span></a>              .<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;a.ui-state-active&quot; )
<a name="l6850"><span class="linenum">6850</span></a>                  .removeClass( &quot;ui-state-active&quot; );
<a name="l6851"><span class="linenum">6851</span></a>      },
<a name="l6852"><span class="linenum">6852</span></a>  
<a name="l6853"><span class="linenum">6853</span></a>      collapse: function( event ) {
<a name="l6854"><span class="linenum">6854</span></a>          var newItem = this.active &amp;&amp;
<a name="l6855"><span class="linenum">6855</span></a>              this.active.parent().closest( &quot;.ui-menu-item&quot;, this.element );
<a name="l6856"><span class="linenum">6856</span></a>          if ( newItem &amp;&amp; newItem.length ) {
<a name="l6857"><span class="linenum">6857</span></a>              this._close();
<a name="l6858"><span class="linenum">6858</span></a>              this.focus( event, newItem );
<a name="l6859"><span class="linenum">6859</span></a>          }
<a name="l6860"><span class="linenum">6860</span></a>      },
<a name="l6861"><span class="linenum">6861</span></a>  
<a name="l6862"><span class="linenum">6862</span></a>      expand: function( event ) {
<a name="l6863"><span class="linenum">6863</span></a>          var newItem = this.active &amp;&amp;
<a name="l6864"><span class="linenum">6864</span></a>              this.active
<a name="l6865"><span class="linenum">6865</span></a>                  .children( &quot;.ui-menu &quot; )
<a name="l6866"><span class="linenum">6866</span></a>                  .children( &quot;.ui-menu-item&quot; )
<a name="l6867"><span class="linenum">6867</span></a>                  .<a class="function" onClick="logFunction('first')" href="../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l6868"><span class="linenum">6868</span></a>  
<a name="l6869"><span class="linenum">6869</span></a>          if ( newItem &amp;&amp; newItem.length ) {
<a name="l6870"><span class="linenum">6870</span></a>              this._open( newItem.parent() );
<a name="l6871"><span class="linenum">6871</span></a>  
<a name="l6872"><span class="linenum">6872</span></a>  <span class="comment">            // Delay so Firefox will not hide activedescendant change in expanding submenu from AT</span>
<a name="l6873"><span class="linenum">6873</span></a>              this._delay(function() {
<a name="l6874"><span class="linenum">6874</span></a>                  this.focus( event, newItem );
<a name="l6875"><span class="linenum">6875</span></a>              });
<a name="l6876"><span class="linenum">6876</span></a>          }
<a name="l6877"><span class="linenum">6877</span></a>      },
<a name="l6878"><span class="linenum">6878</span></a>  
<a name="l6879"><span class="linenum">6879</span></a>      next: function( event ) {
<a name="l6880"><span class="linenum">6880</span></a>          this._move( &quot;next&quot;, &quot;first&quot;, event );
<a name="l6881"><span class="linenum">6881</span></a>      },
<a name="l6882"><span class="linenum">6882</span></a>  
<a name="l6883"><span class="linenum">6883</span></a>      previous: function( event ) {
<a name="l6884"><span class="linenum">6884</span></a>          this._move( &quot;prev&quot;, &quot;last&quot;, event );
<a name="l6885"><span class="linenum">6885</span></a>      },
<a name="l6886"><span class="linenum">6886</span></a>  
<a name="l6887"><span class="linenum">6887</span></a>      isFirstItem: function() {
<a name="l6888"><span class="linenum">6888</span></a>          return this.active &amp;&amp; !this.active.prevAll( &quot;.ui-menu-item&quot; ).length;
<a name="l6889"><span class="linenum">6889</span></a>      },
<a name="l6890"><span class="linenum">6890</span></a>  
<a name="l6891"><span class="linenum">6891</span></a>      isLastItem: function() {
<a name="l6892"><span class="linenum">6892</span></a>          return this.active &amp;&amp; !this.active.nextAll( &quot;.ui-menu-item&quot; ).length;
<a name="l6893"><span class="linenum">6893</span></a>      },
<a name="l6894"><span class="linenum">6894</span></a>  
<a name="l6895"><span class="linenum">6895</span></a>      _move: function( direction, filter, event ) {
<a name="l6896"><span class="linenum">6896</span></a>          var next;
<a name="l6897"><span class="linenum">6897</span></a>          if ( this.active ) {
<a name="l6898"><span class="linenum">6898</span></a>              if ( direction === &quot;first&quot; || direction === &quot;last&quot; ) {
<a name="l6899"><span class="linenum">6899</span></a>                  next = this.active
<a name="l6900"><span class="linenum">6900</span></a>                      [ direction === &quot;first&quot; ? &quot;prevAll&quot; : &quot;nextAll&quot; ]( &quot;.ui-menu-item&quot; )
<a name="l6901"><span class="linenum">6901</span></a>                      .eq( -1 );
<a name="l6902"><span class="linenum">6902</span></a>              } else {
<a name="l6903"><span class="linenum">6903</span></a>                  next = this.active
<a name="l6904"><span class="linenum">6904</span></a>                      [ direction + &quot;All&quot; ]( &quot;.ui-menu-item&quot; )
<a name="l6905"><span class="linenum">6905</span></a>                      .eq( 0 );
<a name="l6906"><span class="linenum">6906</span></a>              }
<a name="l6907"><span class="linenum">6907</span></a>          }
<a name="l6908"><span class="linenum">6908</span></a>          if ( !next || !next.length || !this.active ) {
<a name="l6909"><span class="linenum">6909</span></a>              next = this.activeMenu.children( &quot;.ui-menu-item&quot; )[ filter ]();
<a name="l6910"><span class="linenum">6910</span></a>          }
<a name="l6911"><span class="linenum">6911</span></a>  
<a name="l6912"><span class="linenum">6912</span></a>          this.focus( event, next );
<a name="l6913"><span class="linenum">6913</span></a>      },
<a name="l6914"><span class="linenum">6914</span></a>  
<a name="l6915"><span class="linenum">6915</span></a>      nextPage: function( event ) {
<a name="l6916"><span class="linenum">6916</span></a>          var item, base, height;
<a name="l6917"><span class="linenum">6917</span></a>  
<a name="l6918"><span class="linenum">6918</span></a>          if ( !this.active ) {
<a name="l6919"><span class="linenum">6919</span></a>              this.<a class="phpfunction" onClick="logFunction('next')" href="../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>( event );
<a name="l6920"><span class="linenum">6920</span></a>              return;
<a name="l6921"><span class="linenum">6921</span></a>          }
<a name="l6922"><span class="linenum">6922</span></a>          if ( this.isLastItem() ) {
<a name="l6923"><span class="linenum">6923</span></a>              return;
<a name="l6924"><span class="linenum">6924</span></a>          }
<a name="l6925"><span class="linenum">6925</span></a>          if ( this._hasScroll() ) {
<a name="l6926"><span class="linenum">6926</span></a>              base = this.active.offset().top;
<a name="l6927"><span class="linenum">6927</span></a>              height = this.element.height();
<a name="l6928"><span class="linenum">6928</span></a>              this.active.nextAll( &quot;.ui-menu-item&quot; ).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l6929"><span class="linenum">6929</span></a>                  item = $( this );
<a name="l6930"><span class="linenum">6930</span></a>                  return item.offset().top - base - height &lt; 0;
<a name="l6931"><span class="linenum">6931</span></a>              });
<a name="l6932"><span class="linenum">6932</span></a>  
<a name="l6933"><span class="linenum">6933</span></a>              this.focus( event, item );
<a name="l6934"><span class="linenum">6934</span></a>          } else {
<a name="l6935"><span class="linenum">6935</span></a>              this.focus( event, this.activeMenu.children( &quot;.ui-menu-item&quot; )
<a name="l6936"><span class="linenum">6936</span></a>                  [ !this.active ? &quot;first&quot; : &quot;last&quot; ]() );
<a name="l6937"><span class="linenum">6937</span></a>          }
<a name="l6938"><span class="linenum">6938</span></a>      },
<a name="l6939"><span class="linenum">6939</span></a>  
<a name="l6940"><span class="linenum">6940</span></a>      previousPage: function( event ) {
<a name="l6941"><span class="linenum">6941</span></a>          var item, base, height;
<a name="l6942"><span class="linenum">6942</span></a>          if ( !this.active ) {
<a name="l6943"><span class="linenum">6943</span></a>              this.<a class="phpfunction" onClick="logFunction('next')" href="../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>( event );
<a name="l6944"><span class="linenum">6944</span></a>              return;
<a name="l6945"><span class="linenum">6945</span></a>          }
<a name="l6946"><span class="linenum">6946</span></a>          if ( this.isFirstItem() ) {
<a name="l6947"><span class="linenum">6947</span></a>              return;
<a name="l6948"><span class="linenum">6948</span></a>          }
<a name="l6949"><span class="linenum">6949</span></a>          if ( this._hasScroll() ) {
<a name="l6950"><span class="linenum">6950</span></a>              base = this.active.offset().top;
<a name="l6951"><span class="linenum">6951</span></a>              height = this.element.height();
<a name="l6952"><span class="linenum">6952</span></a>              this.active.prevAll( &quot;.ui-menu-item&quot; ).<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(function() {
<a name="l6953"><span class="linenum">6953</span></a>                  item = $( this );
<a name="l6954"><span class="linenum">6954</span></a>                  return item.offset().top - base + height &gt; 0;
<a name="l6955"><span class="linenum">6955</span></a>              });
<a name="l6956"><span class="linenum">6956</span></a>  
<a name="l6957"><span class="linenum">6957</span></a>              this.focus( event, item );
<a name="l6958"><span class="linenum">6958</span></a>          } else {
<a name="l6959"><span class="linenum">6959</span></a>              this.focus( event, this.activeMenu.children( &quot;.ui-menu-item&quot; ).<a class="function" onClick="logFunction('first')" href="../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>() );
<a name="l6960"><span class="linenum">6960</span></a>          }
<a name="l6961"><span class="linenum">6961</span></a>      },
<a name="l6962"><span class="linenum">6962</span></a>  
<a name="l6963"><span class="linenum">6963</span></a>      _hasScroll: function() {
<a name="l6964"><span class="linenum">6964</span></a>          return this.element.outerHeight() &lt; this.element.prop( &quot;scrollHeight&quot; );
<a name="l6965"><span class="linenum">6965</span></a>      },
<a name="l6966"><span class="linenum">6966</span></a>  
<a name="l6967"><span class="linenum">6967</span></a>      select: function( event ) {
<a name="l6968"><span class="linenum">6968</span></a>  <span class="comment">        // TODO: It should never be possible to not have an active item at this</span>
<a name="l6969"><span class="linenum">6969</span></a>  <span class="comment">        // point, but the tests don't trigger mouseenter before click.</span>
<a name="l6970"><span class="linenum">6970</span></a>          this.active = this.active || $( event.target ).closest( &quot;.ui-menu-item&quot; );
<a name="l6971"><span class="linenum">6971</span></a>          var ui = { item: this.active };
<a name="l6972"><span class="linenum">6972</span></a>          if ( !this.active.<a class="function" onClick="logFunction('has')" href="../../../_functions/has.html" onMouseOver="funcPopup(event,'has')">has</a>( &quot;.ui-menu&quot; ).length ) {
<a name="l6973"><span class="linenum">6973</span></a>              this.collapseAll( event, true );
<a name="l6974"><span class="linenum">6974</span></a>          }
<a name="l6975"><span class="linenum">6975</span></a>          this._trigger( &quot;select&quot;, event, ui );
<a name="l6976"><span class="linenum">6976</span></a>      }
<a name="l6977"><span class="linenum">6977</span></a>  });
<a name="l6978"><span class="linenum">6978</span></a>  
<a name="l6979"><span class="linenum">6979</span></a>  }( jQuery ));
<a name="l6980"><span class="linenum">6980</span></a>  (function($, undefined) {
<a name="l6981"><span class="linenum">6981</span></a>  
<a name="l6982"><span class="linenum">6982</span></a>  var dataSpace = &quot;ui-effects-&quot;;
<a name="l6983"><span class="linenum">6983</span></a>  
<a name="l6984"><span class="linenum">6984</span></a>  $.effects = {
<a name="l6985"><span class="linenum">6985</span></a>      effect: {}
<a name="l6986"><span class="linenum">6986</span></a>  };
<a name="l6987"><span class="linenum">6987</span></a>  
<a name="l6988"><span class="linenum">6988</span></a>  <span class="comment">/*!</span>
<a name="l6989"><span class="linenum">6989</span></a>  <span class="comment"> * jQuery Color Animations v2.1.2</span>
<a name="l6990"><span class="linenum">6990</span></a>  <span class="comment"> * https://github.com/jquery/jquery-color</span>
<a name="l6991"><span class="linenum">6991</span></a>  <span class="comment"> *</span>
<a name="l6992"><span class="linenum">6992</span></a>  <span class="comment"> * Copyright 2013 jQuery Foundation and other contributors</span>
<a name="l6993"><span class="linenum">6993</span></a>  <span class="comment"> * Released under the MIT license.</span>
<a name="l6994"><span class="linenum">6994</span></a>  <span class="comment"> * http://jquery.org/license</span>
<a name="l6995"><span class="linenum">6995</span></a>  <span class="comment"> *</span>
<a name="l6996"><span class="linenum">6996</span></a>  <span class="comment"> * Date: Wed Jan 16 08:47:09 2013 -0600</span>
<a name="l6997"><span class="linenum">6997</span></a>  <span class="comment"> */</span>
<a name="l6998"><span class="linenum">6998</span></a>  (function( jQuery, undefined ) {
<a name="l6999"><span class="linenum">6999</span></a>  
<a name="l7000"><span class="linenum">7000</span></a>      var stepHooks = &quot;backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor&quot;,
<a name="l7001"><span class="linenum">7001</span></a>  
<a name="l7002"><span class="linenum">7002</span></a>  <span class="comment">    // plusequals test for += 100 -= 100</span>
<a name="l7003"><span class="linenum">7003</span></a>      rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,
<a name="l7004"><span class="linenum">7004</span></a>  <span class="comment">    // a set of RE's that can match strings and generate color tuples.</span>
<a name="l7005"><span class="linenum">7005</span></a>      stringParsers = [{
<a name="l7006"><span class="linenum">7006</span></a>              re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
<a name="l7007"><span class="linenum">7007</span></a>              parse: function( execResult ) {
<a name="l7008"><span class="linenum">7008</span></a>                  return [
<a name="l7009"><span class="linenum">7009</span></a>                      execResult[ 1 ],
<a name="l7010"><span class="linenum">7010</span></a>                      execResult[ 2 ],
<a name="l7011"><span class="linenum">7011</span></a>                      execResult[ 3 ],
<a name="l7012"><span class="linenum">7012</span></a>                      execResult[ 4 ]
<a name="l7013"><span class="linenum">7013</span></a>                  ];
<a name="l7014"><span class="linenum">7014</span></a>              }
<a name="l7015"><span class="linenum">7015</span></a>          }, {
<a name="l7016"><span class="linenum">7016</span></a>              re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
<a name="l7017"><span class="linenum">7017</span></a>              parse: function( execResult ) {
<a name="l7018"><span class="linenum">7018</span></a>                  return [
<a name="l7019"><span class="linenum">7019</span></a>                      execResult[ 1 ] * 2.55,
<a name="l7020"><span class="linenum">7020</span></a>                      execResult[ 2 ] * 2.55,
<a name="l7021"><span class="linenum">7021</span></a>                      execResult[ 3 ] * 2.55,
<a name="l7022"><span class="linenum">7022</span></a>                      execResult[ 4 ]
<a name="l7023"><span class="linenum">7023</span></a>                  ];
<a name="l7024"><span class="linenum">7024</span></a>              }
<a name="l7025"><span class="linenum">7025</span></a>          }, {
<a name="l7026"><span class="linenum">7026</span></a>  <span class="comment">            // this regex ignores A-F because it's compared against an already lowercased string</span>
<a name="l7027"><span class="linenum">7027</span></a>              re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
<a name="l7028"><span class="linenum">7028</span></a>              parse: function( execResult ) {
<a name="l7029"><span class="linenum">7029</span></a>                  return [
<a name="l7030"><span class="linenum">7030</span></a>                      parseInt( execResult[ 1 ], 16 ),
<a name="l7031"><span class="linenum">7031</span></a>                      parseInt( execResult[ 2 ], 16 ),
<a name="l7032"><span class="linenum">7032</span></a>                      parseInt( execResult[ 3 ], 16 )
<a name="l7033"><span class="linenum">7033</span></a>                  ];
<a name="l7034"><span class="linenum">7034</span></a>              }
<a name="l7035"><span class="linenum">7035</span></a>          }, {
<a name="l7036"><span class="linenum">7036</span></a>  <span class="comment">            // this regex ignores A-F because it's compared against an already lowercased string</span>
<a name="l7037"><span class="linenum">7037</span></a>              re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
<a name="l7038"><span class="linenum">7038</span></a>              parse: function( execResult ) {
<a name="l7039"><span class="linenum">7039</span></a>                  return [
<a name="l7040"><span class="linenum">7040</span></a>                      parseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),
<a name="l7041"><span class="linenum">7041</span></a>                      parseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),
<a name="l7042"><span class="linenum">7042</span></a>                      parseInt( execResult[ 3 ] + execResult[ 3 ], 16 )
<a name="l7043"><span class="linenum">7043</span></a>                  ];
<a name="l7044"><span class="linenum">7044</span></a>              }
<a name="l7045"><span class="linenum">7045</span></a>          }, {
<a name="l7046"><span class="linenum">7046</span></a>              re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
<a name="l7047"><span class="linenum">7047</span></a>              space: &quot;hsla&quot;,
<a name="l7048"><span class="linenum">7048</span></a>              parse: function( execResult ) {
<a name="l7049"><span class="linenum">7049</span></a>                  return [
<a name="l7050"><span class="linenum">7050</span></a>                      execResult[ 1 ],
<a name="l7051"><span class="linenum">7051</span></a>                      execResult[ 2 ] / 100,
<a name="l7052"><span class="linenum">7052</span></a>                      execResult[ 3 ] / 100,
<a name="l7053"><span class="linenum">7053</span></a>                      execResult[ 4 ]
<a name="l7054"><span class="linenum">7054</span></a>                  ];
<a name="l7055"><span class="linenum">7055</span></a>              }
<a name="l7056"><span class="linenum">7056</span></a>          }],
<a name="l7057"><span class="linenum">7057</span></a>  
<a name="l7058"><span class="linenum">7058</span></a>  <span class="comment">    // jQuery.Color( )</span>
<a name="l7059"><span class="linenum">7059</span></a>      color = jQuery.Color = function( color, green, blue, alpha ) {
<a name="l7060"><span class="linenum">7060</span></a>          return new jQuery.Color.fn.<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>( color, green, blue, alpha );
<a name="l7061"><span class="linenum">7061</span></a>      },
<a name="l7062"><span class="linenum">7062</span></a>      spaces = {
<a name="l7063"><span class="linenum">7063</span></a>          rgba: {
<a name="l7064"><span class="linenum">7064</span></a>              props: {
<a name="l7065"><span class="linenum">7065</span></a>                  red: {
<a name="l7066"><span class="linenum">7066</span></a>                      idx: 0,
<a name="l7067"><span class="linenum">7067</span></a>                      type: &quot;byte&quot;
<a name="l7068"><span class="linenum">7068</span></a>                  },
<a name="l7069"><span class="linenum">7069</span></a>                  green: {
<a name="l7070"><span class="linenum">7070</span></a>                      idx: 1,
<a name="l7071"><span class="linenum">7071</span></a>                      type: &quot;byte&quot;
<a name="l7072"><span class="linenum">7072</span></a>                  },
<a name="l7073"><span class="linenum">7073</span></a>                  blue: {
<a name="l7074"><span class="linenum">7074</span></a>                      idx: 2,
<a name="l7075"><span class="linenum">7075</span></a>                      type: &quot;byte&quot;
<a name="l7076"><span class="linenum">7076</span></a>                  }
<a name="l7077"><span class="linenum">7077</span></a>              }
<a name="l7078"><span class="linenum">7078</span></a>          },
<a name="l7079"><span class="linenum">7079</span></a>  
<a name="l7080"><span class="linenum">7080</span></a>          hsla: {
<a name="l7081"><span class="linenum">7081</span></a>              props: {
<a name="l7082"><span class="linenum">7082</span></a>                  hue: {
<a name="l7083"><span class="linenum">7083</span></a>                      idx: 0,
<a name="l7084"><span class="linenum">7084</span></a>                      type: &quot;degrees&quot;
<a name="l7085"><span class="linenum">7085</span></a>                  },
<a name="l7086"><span class="linenum">7086</span></a>                  saturation: {
<a name="l7087"><span class="linenum">7087</span></a>                      idx: 1,
<a name="l7088"><span class="linenum">7088</span></a>                      type: &quot;percent&quot;
<a name="l7089"><span class="linenum">7089</span></a>                  },
<a name="l7090"><span class="linenum">7090</span></a>                  lightness: {
<a name="l7091"><span class="linenum">7091</span></a>                      idx: 2,
<a name="l7092"><span class="linenum">7092</span></a>                      type: &quot;percent&quot;
<a name="l7093"><span class="linenum">7093</span></a>                  }
<a name="l7094"><span class="linenum">7094</span></a>              }
<a name="l7095"><span class="linenum">7095</span></a>          }
<a name="l7096"><span class="linenum">7096</span></a>      },
<a name="l7097"><span class="linenum">7097</span></a>      propTypes = {
<a name="l7098"><span class="linenum">7098</span></a>          &quot;byte&quot;: {
<a name="l7099"><span class="linenum">7099</span></a>              floor: true,
<a name="l7100"><span class="linenum">7100</span></a>              max: 255
<a name="l7101"><span class="linenum">7101</span></a>          },
<a name="l7102"><span class="linenum">7102</span></a>          &quot;percent&quot;: {
<a name="l7103"><span class="linenum">7103</span></a>              max: 1
<a name="l7104"><span class="linenum">7104</span></a>          },
<a name="l7105"><span class="linenum">7105</span></a>          &quot;degrees&quot;: {
<a name="l7106"><span class="linenum">7106</span></a>              mod: 360,
<a name="l7107"><span class="linenum">7107</span></a>              floor: true
<a name="l7108"><span class="linenum">7108</span></a>          }
<a name="l7109"><span class="linenum">7109</span></a>      },
<a name="l7110"><span class="linenum">7110</span></a>      support = color.support = {},
<a name="l7111"><span class="linenum">7111</span></a>  
<a name="l7112"><span class="linenum">7112</span></a>  <span class="comment">    // element for support tests</span>
<a name="l7113"><span class="linenum">7113</span></a>      supportElem = jQuery( &quot;&lt;p&gt;&quot; )[ 0 ],
<a name="l7114"><span class="linenum">7114</span></a>  
<a name="l7115"><span class="linenum">7115</span></a>  <span class="comment">    // colors = jQuery.Color.names</span>
<a name="l7116"><span class="linenum">7116</span></a>      colors,
<a name="l7117"><span class="linenum">7117</span></a>  
<a name="l7118"><span class="linenum">7118</span></a>  <span class="comment">    // local aliases of functions called often</span>
<a name="l7119"><span class="linenum">7119</span></a>      each = jQuery.each;
<a name="l7120"><span class="linenum">7120</span></a>  
<a name="l7121"><span class="linenum">7121</span></a>  <span class="comment">// determine rgba support immediately</span>
<a name="l7122"><span class="linenum">7122</span></a>  supportElem.style.cssText = &quot;background-color:rgba(1,1,1,.5)&quot;;
<a name="l7123"><span class="linenum">7123</span></a>  support.rgba = supportElem.style.backgroundColor.indexOf( &quot;rgba&quot; ) &gt; -1;
<a name="l7124"><span class="linenum">7124</span></a>  
<a name="l7125"><span class="linenum">7125</span></a>  <span class="comment">// define cache name and alpha properties</span>
<a name="l7126"><span class="linenum">7126</span></a>  <span class="comment">// for rgba and hsla spaces</span>
<a name="l7127"><span class="linenum">7127</span></a>  <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( spaces, function( spaceName, space ) {
<a name="l7128"><span class="linenum">7128</span></a>      space.cache = &quot;_&quot; + spaceName;
<a name="l7129"><span class="linenum">7129</span></a>      space.props.alpha = {
<a name="l7130"><span class="linenum">7130</span></a>          idx: 3,
<a name="l7131"><span class="linenum">7131</span></a>          type: &quot;percent&quot;,
<a name="l7132"><span class="linenum">7132</span></a>          def: 1
<a name="l7133"><span class="linenum">7133</span></a>      };
<a name="l7134"><span class="linenum">7134</span></a>  });
<a name="l7135"><span class="linenum">7135</span></a>  
<a name="l7136"><span class="linenum">7136</span></a>  function <a class="function" onClick="logFunction('clamp')" href="../../../_functions/clamp.html" onMouseOver="funcPopup(event,'clamp')">clamp</a>( value, prop, allowEmpty ) {
<a name="l7137"><span class="linenum">7137</span></a>      var type = propTypes[ prop.type ] || {};
<a name="l7138"><span class="linenum">7138</span></a>  
<a name="l7139"><span class="linenum">7139</span></a>      if ( value == null ) {
<a name="l7140"><span class="linenum">7140</span></a>          return (allowEmpty || !prop.def) ? null : prop.def;
<a name="l7141"><span class="linenum">7141</span></a>      }
<a name="l7142"><span class="linenum">7142</span></a>  
<a name="l7143"><span class="linenum">7143</span></a>  <span class="comment">    // ~~ is an short way of doing floor for positive numbers</span>
<a name="l7144"><span class="linenum">7144</span></a>      value = type.floor ? ~~value : parseFloat( value );
<a name="l7145"><span class="linenum">7145</span></a>  
<a name="l7146"><span class="linenum">7146</span></a>  <span class="comment">    // IE will pass in empty strings as value for alpha,</span>
<a name="l7147"><span class="linenum">7147</span></a>  <span class="comment">    // which will hit this case</span>
<a name="l7148"><span class="linenum">7148</span></a>      if ( isNaN( value ) ) {
<a name="l7149"><span class="linenum">7149</span></a>          return prop.def;
<a name="l7150"><span class="linenum">7150</span></a>      }
<a name="l7151"><span class="linenum">7151</span></a>  
<a name="l7152"><span class="linenum">7152</span></a>      if ( type.mod ) {
<a name="l7153"><span class="linenum">7153</span></a>  <span class="comment">        // we add mod before modding to make sure that negatives values</span>
<a name="l7154"><span class="linenum">7154</span></a>  <span class="comment">        // get converted properly: -10 -&gt; 350</span>
<a name="l7155"><span class="linenum">7155</span></a>          return (value + type.mod) % type.mod;
<a name="l7156"><span class="linenum">7156</span></a>      }
<a name="l7157"><span class="linenum">7157</span></a>  
<a name="l7158"><span class="linenum">7158</span></a>  <span class="comment">    // for now all property types without mod have min and max</span>
<a name="l7159"><span class="linenum">7159</span></a>      return 0 &gt; value ? 0 : type.max &lt; value ? type.max : value;
<a name="l7160"><span class="linenum">7160</span></a>  }
<a name="l7161"><span class="linenum">7161</span></a>  
<a name="l7162"><span class="linenum">7162</span></a>  function <a class="function" onClick="logFunction('stringParse')" href="../../../_functions/stringparse.html" onMouseOver="funcPopup(event,'stringparse')">stringParse</a>( string ) {
<a name="l7163"><span class="linenum">7163</span></a>      var inst = color(),
<a name="l7164"><span class="linenum">7164</span></a>          rgba = inst._rgba = [];
<a name="l7165"><span class="linenum">7165</span></a>  
<a name="l7166"><span class="linenum">7166</span></a>      string = string.toLowerCase();
<a name="l7167"><span class="linenum">7167</span></a>  
<a name="l7168"><span class="linenum">7168</span></a>      <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( stringParsers, function( i, parser ) {
<a name="l7169"><span class="linenum">7169</span></a>          var parsed,
<a name="l7170"><span class="linenum">7170</span></a>              match = parser.re.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>( string ),
<a name="l7171"><span class="linenum">7171</span></a>              values = match &amp;&amp; parser.<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>( match ),
<a name="l7172"><span class="linenum">7172</span></a>              spaceName = parser.space || &quot;rgba&quot;;
<a name="l7173"><span class="linenum">7173</span></a>  
<a name="l7174"><span class="linenum">7174</span></a>          if ( values ) {
<a name="l7175"><span class="linenum">7175</span></a>              parsed = inst[ spaceName ]( values );
<a name="l7176"><span class="linenum">7176</span></a>  
<a name="l7177"><span class="linenum">7177</span></a>  <span class="comment">            // if this was an rgba parse the assignment might happen twice</span>
<a name="l7178"><span class="linenum">7178</span></a>  <span class="comment">            // oh well....</span>
<a name="l7179"><span class="linenum">7179</span></a>              inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
<a name="l7180"><span class="linenum">7180</span></a>              rgba = inst._rgba = parsed._rgba;
<a name="l7181"><span class="linenum">7181</span></a>  
<a name="l7182"><span class="linenum">7182</span></a>  <span class="comment">            // exit each( stringParsers ) here because we matched</span>
<a name="l7183"><span class="linenum">7183</span></a>              return false;
<a name="l7184"><span class="linenum">7184</span></a>          }
<a name="l7185"><span class="linenum">7185</span></a>      });
<a name="l7186"><span class="linenum">7186</span></a>  
<a name="l7187"><span class="linenum">7187</span></a>  <span class="comment">    // Found a stringParser that handled it</span>
<a name="l7188"><span class="linenum">7188</span></a>      if ( rgba.length ) {
<a name="l7189"><span class="linenum">7189</span></a>  
<a name="l7190"><span class="linenum">7190</span></a>  <span class="comment">        // if this came from a parsed string, force &quot;transparent&quot; when alpha is 0</span>
<a name="l7191"><span class="linenum">7191</span></a>  <span class="comment">        // chrome, (and maybe others) return &quot;transparent&quot; as rgba(0,0,0,0)</span>
<a name="l7192"><span class="linenum">7192</span></a>          if ( rgba.join() === &quot;0,0,0,0&quot; ) {
<a name="l7193"><span class="linenum">7193</span></a>              jQuery.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( rgba, colors.transparent );
<a name="l7194"><span class="linenum">7194</span></a>          }
<a name="l7195"><span class="linenum">7195</span></a>          return inst;
<a name="l7196"><span class="linenum">7196</span></a>      }
<a name="l7197"><span class="linenum">7197</span></a>  
<a name="l7198"><span class="linenum">7198</span></a>  <span class="comment">    // named colors</span>
<a name="l7199"><span class="linenum">7199</span></a>      return colors[ string ];
<a name="l7200"><span class="linenum">7200</span></a>  }
<a name="l7201"><span class="linenum">7201</span></a>  
<a name="l7202"><span class="linenum">7202</span></a>  color.fn = jQuery.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( color.prototype, {
<a name="l7203"><span class="linenum">7203</span></a>      parse: function( red, green, blue, alpha ) {
<a name="l7204"><span class="linenum">7204</span></a>          if ( red === undefined ) {
<a name="l7205"><span class="linenum">7205</span></a>              this._rgba = [ null, null, null, null ];
<a name="l7206"><span class="linenum">7206</span></a>              return this;
<a name="l7207"><span class="linenum">7207</span></a>          }
<a name="l7208"><span class="linenum">7208</span></a>          if ( red.jquery || red.nodeType ) {
<a name="l7209"><span class="linenum">7209</span></a>              red = jQuery( red ).css( green );
<a name="l7210"><span class="linenum">7210</span></a>              green = undefined;
<a name="l7211"><span class="linenum">7211</span></a>          }
<a name="l7212"><span class="linenum">7212</span></a>  
<a name="l7213"><span class="linenum">7213</span></a>          var inst = this,
<a name="l7214"><span class="linenum">7214</span></a>              type = jQuery.<a class="function" onClick="logFunction('type')" href="../../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>( red ),
<a name="l7215"><span class="linenum">7215</span></a>              rgba = this._rgba = [];
<a name="l7216"><span class="linenum">7216</span></a>  
<a name="l7217"><span class="linenum">7217</span></a>  <span class="comment">        // more than 1 argument specified - assume ( red, green, blue, alpha )</span>
<a name="l7218"><span class="linenum">7218</span></a>          if ( green !== undefined ) {
<a name="l7219"><span class="linenum">7219</span></a>              red = [ red, green, blue, alpha ];
<a name="l7220"><span class="linenum">7220</span></a>              type = &quot;array&quot;;
<a name="l7221"><span class="linenum">7221</span></a>          }
<a name="l7222"><span class="linenum">7222</span></a>  
<a name="l7223"><span class="linenum">7223</span></a>          if ( type === &quot;string&quot; ) {
<a name="l7224"><span class="linenum">7224</span></a>              return this.<a class="function" onClick="logFunction('parse')" href="../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>( <a class="function" onClick="logFunction('stringParse')" href="../../../_functions/stringparse.html" onMouseOver="funcPopup(event,'stringparse')">stringParse</a>( red ) || colors._default );
<a name="l7225"><span class="linenum">7225</span></a>          }
<a name="l7226"><span class="linenum">7226</span></a>  
<a name="l7227"><span class="linenum">7227</span></a>          if ( type === &quot;array&quot; ) {
<a name="l7228"><span class="linenum">7228</span></a>              <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( spaces.rgba.props, function( key, prop ) {
<a name="l7229"><span class="linenum">7229</span></a>                  rgba[ prop.idx ] = <a class="function" onClick="logFunction('clamp')" href="../../../_functions/clamp.html" onMouseOver="funcPopup(event,'clamp')">clamp</a>( red[ prop.idx ], prop );
<a name="l7230"><span class="linenum">7230</span></a>              });
<a name="l7231"><span class="linenum">7231</span></a>              return this;
<a name="l7232"><span class="linenum">7232</span></a>          }
<a name="l7233"><span class="linenum">7233</span></a>  
<a name="l7234"><span class="linenum">7234</span></a>          if ( type === &quot;object&quot; ) {
<a name="l7235"><span class="linenum">7235</span></a>              if ( red instanceof color ) {
<a name="l7236"><span class="linenum">7236</span></a>                  <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( spaces, function( spaceName, space ) {
<a name="l7237"><span class="linenum">7237</span></a>                      if ( red[ space.cache ] ) {
<a name="l7238"><span class="linenum">7238</span></a>                          inst[ space.cache ] = red[ space.cache ].slice();
<a name="l7239"><span class="linenum">7239</span></a>                      }
<a name="l7240"><span class="linenum">7240</span></a>                  });
<a name="l7241"><span class="linenum">7241</span></a>              } else {
<a name="l7242"><span class="linenum">7242</span></a>                  <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( spaces, function( spaceName, space ) {
<a name="l7243"><span class="linenum">7243</span></a>                      var cache = space.cache;
<a name="l7244"><span class="linenum">7244</span></a>                      <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( space.props, function( key, prop ) {
<a name="l7245"><span class="linenum">7245</span></a>  
<a name="l7246"><span class="linenum">7246</span></a>  <span class="comment">                        // if the cache doesn't exist, and we know how to convert</span>
<a name="l7247"><span class="linenum">7247</span></a>                          if ( !inst[ cache ] &amp;&amp; space.to ) {
<a name="l7248"><span class="linenum">7248</span></a>  
<a name="l7249"><span class="linenum">7249</span></a>  <span class="comment">                            // if the value was null, we don't need to copy it</span>
<a name="l7250"><span class="linenum">7250</span></a>  <span class="comment">                            // if the key was alpha, we don't need to copy it either</span>
<a name="l7251"><span class="linenum">7251</span></a>                              if ( key === &quot;alpha&quot; || red[ key ] == null ) {
<a name="l7252"><span class="linenum">7252</span></a>                                  return;
<a name="l7253"><span class="linenum">7253</span></a>                              }
<a name="l7254"><span class="linenum">7254</span></a>                              inst[ cache ] = space.to( inst._rgba );
<a name="l7255"><span class="linenum">7255</span></a>                          }
<a name="l7256"><span class="linenum">7256</span></a>  
<a name="l7257"><span class="linenum">7257</span></a>  <span class="comment">                        // this is the only case where we allow nulls for ALL properties.</span>
<a name="l7258"><span class="linenum">7258</span></a>  <span class="comment">                        // call clamp with alwaysAllowEmpty</span>
<a name="l7259"><span class="linenum">7259</span></a>                          inst[ cache ][ prop.idx ] = <a class="function" onClick="logFunction('clamp')" href="../../../_functions/clamp.html" onMouseOver="funcPopup(event,'clamp')">clamp</a>( red[ key ], prop, true );
<a name="l7260"><span class="linenum">7260</span></a>                      });
<a name="l7261"><span class="linenum">7261</span></a>  
<a name="l7262"><span class="linenum">7262</span></a>  <span class="comment">                    // everything defined but alpha?</span>
<a name="l7263"><span class="linenum">7263</span></a>                      if ( inst[ cache ] &amp;&amp; jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) &lt; 0 ) {
<a name="l7264"><span class="linenum">7264</span></a>  <span class="comment">                        // use the default of 1</span>
<a name="l7265"><span class="linenum">7265</span></a>                          inst[ cache ][ 3 ] = 1;
<a name="l7266"><span class="linenum">7266</span></a>                          if ( space.from ) {
<a name="l7267"><span class="linenum">7267</span></a>                              inst._rgba = space.<a class="function" onClick="logFunction('from')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">from</a>( inst[ cache ] );
<a name="l7268"><span class="linenum">7268</span></a>                          }
<a name="l7269"><span class="linenum">7269</span></a>                      }
<a name="l7270"><span class="linenum">7270</span></a>                  });
<a name="l7271"><span class="linenum">7271</span></a>              }
<a name="l7272"><span class="linenum">7272</span></a>              return this;
<a name="l7273"><span class="linenum">7273</span></a>          }
<a name="l7274"><span class="linenum">7274</span></a>      },
<a name="l7275"><span class="linenum">7275</span></a>      is: function( compare ) {
<a name="l7276"><span class="linenum">7276</span></a>          var is = color( compare ),
<a name="l7277"><span class="linenum">7277</span></a>              same = true,
<a name="l7278"><span class="linenum">7278</span></a>              inst = this;
<a name="l7279"><span class="linenum">7279</span></a>  
<a name="l7280"><span class="linenum">7280</span></a>          <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( spaces, function( _, space ) {
<a name="l7281"><span class="linenum">7281</span></a>              var localCache,
<a name="l7282"><span class="linenum">7282</span></a>                  isCache = is[ space.cache ];
<a name="l7283"><span class="linenum">7283</span></a>              if (isCache) {
<a name="l7284"><span class="linenum">7284</span></a>                  localCache = inst[ space.cache ] || space.to &amp;&amp; space.to( inst._rgba ) || [];
<a name="l7285"><span class="linenum">7285</span></a>                  <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( space.props, function( _, prop ) {
<a name="l7286"><span class="linenum">7286</span></a>                      if ( isCache[ prop.idx ] != null ) {
<a name="l7287"><span class="linenum">7287</span></a>                          same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
<a name="l7288"><span class="linenum">7288</span></a>                          return same;
<a name="l7289"><span class="linenum">7289</span></a>                      }
<a name="l7290"><span class="linenum">7290</span></a>                  });
<a name="l7291"><span class="linenum">7291</span></a>              }
<a name="l7292"><span class="linenum">7292</span></a>              return same;
<a name="l7293"><span class="linenum">7293</span></a>          });
<a name="l7294"><span class="linenum">7294</span></a>          return same;
<a name="l7295"><span class="linenum">7295</span></a>      },
<a name="l7296"><span class="linenum">7296</span></a>      _space: function() {
<a name="l7297"><span class="linenum">7297</span></a>          var used = [],
<a name="l7298"><span class="linenum">7298</span></a>              inst = this;
<a name="l7299"><span class="linenum">7299</span></a>          <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( spaces, function( spaceName, space ) {
<a name="l7300"><span class="linenum">7300</span></a>              if ( inst[ space.cache ] ) {
<a name="l7301"><span class="linenum">7301</span></a>                  used.push( spaceName );
<a name="l7302"><span class="linenum">7302</span></a>              }
<a name="l7303"><span class="linenum">7303</span></a>          });
<a name="l7304"><span class="linenum">7304</span></a>          return used.pop();
<a name="l7305"><span class="linenum">7305</span></a>      },
<a name="l7306"><span class="linenum">7306</span></a>      transition: function( other, distance ) {
<a name="l7307"><span class="linenum">7307</span></a>          var end = color( other ),
<a name="l7308"><span class="linenum">7308</span></a>              spaceName = end._space(),
<a name="l7309"><span class="linenum">7309</span></a>              space = spaces[ spaceName ],
<a name="l7310"><span class="linenum">7310</span></a>              startColor = this.alpha() === 0 ? color( &quot;transparent&quot; ) : this,
<a name="l7311"><span class="linenum">7311</span></a>              start = startColor[ space.cache ] || space.to( startColor._rgba ),
<a name="l7312"><span class="linenum">7312</span></a>              result = start.slice();
<a name="l7313"><span class="linenum">7313</span></a>  
<a name="l7314"><span class="linenum">7314</span></a>          end = end[ space.cache ];
<a name="l7315"><span class="linenum">7315</span></a>          <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( space.props, function( key, prop ) {
<a name="l7316"><span class="linenum">7316</span></a>              var index = prop.idx,
<a name="l7317"><span class="linenum">7317</span></a>                  startValue = start[ index ],
<a name="l7318"><span class="linenum">7318</span></a>                  endValue = end[ index ],
<a name="l7319"><span class="linenum">7319</span></a>                  type = propTypes[ prop.type ] || {};
<a name="l7320"><span class="linenum">7320</span></a>  
<a name="l7321"><span class="linenum">7321</span></a>  <span class="comment">            // if null, don't override start value</span>
<a name="l7322"><span class="linenum">7322</span></a>              if ( endValue === null ) {
<a name="l7323"><span class="linenum">7323</span></a>                  return;
<a name="l7324"><span class="linenum">7324</span></a>              }
<a name="l7325"><span class="linenum">7325</span></a>  <span class="comment">            // if null - use end</span>
<a name="l7326"><span class="linenum">7326</span></a>              if ( startValue === null ) {
<a name="l7327"><span class="linenum">7327</span></a>                  result[ index ] = endValue;
<a name="l7328"><span class="linenum">7328</span></a>              } else {
<a name="l7329"><span class="linenum">7329</span></a>                  if ( type.mod ) {
<a name="l7330"><span class="linenum">7330</span></a>                      if ( endValue - startValue &gt; type.mod / 2 ) {
<a name="l7331"><span class="linenum">7331</span></a>                          startValue += type.mod;
<a name="l7332"><span class="linenum">7332</span></a>                      } else if ( startValue - endValue &gt; type.mod / 2 ) {
<a name="l7333"><span class="linenum">7333</span></a>                          startValue -= type.mod;
<a name="l7334"><span class="linenum">7334</span></a>                      }
<a name="l7335"><span class="linenum">7335</span></a>                  }
<a name="l7336"><span class="linenum">7336</span></a>                  result[ index ] = <a class="function" onClick="logFunction('clamp')" href="../../../_functions/clamp.html" onMouseOver="funcPopup(event,'clamp')">clamp</a>( ( endValue - startValue ) * distance + startValue, prop );
<a name="l7337"><span class="linenum">7337</span></a>              }
<a name="l7338"><span class="linenum">7338</span></a>          });
<a name="l7339"><span class="linenum">7339</span></a>          return this[ spaceName ]( result );
<a name="l7340"><span class="linenum">7340</span></a>      },
<a name="l7341"><span class="linenum">7341</span></a>      blend: function( opaque ) {
<a name="l7342"><span class="linenum">7342</span></a>  <span class="comment">        // if we are already opaque - return ourself</span>
<a name="l7343"><span class="linenum">7343</span></a>          if ( this._rgba[ 3 ] === 1 ) {
<a name="l7344"><span class="linenum">7344</span></a>              return this;
<a name="l7345"><span class="linenum">7345</span></a>          }
<a name="l7346"><span class="linenum">7346</span></a>  
<a name="l7347"><span class="linenum">7347</span></a>          var rgb = this._rgba.slice(),
<a name="l7348"><span class="linenum">7348</span></a>              a = rgb.pop(),
<a name="l7349"><span class="linenum">7349</span></a>              blend = color( opaque )._rgba;
<a name="l7350"><span class="linenum">7350</span></a>  
<a name="l7351"><span class="linenum">7351</span></a>          return color( jQuery.map( rgb, function( v, i ) {
<a name="l7352"><span class="linenum">7352</span></a>              return ( 1 - a ) * blend[ i ] + a * v;
<a name="l7353"><span class="linenum">7353</span></a>          }));
<a name="l7354"><span class="linenum">7354</span></a>      },
<a name="l7355"><span class="linenum">7355</span></a>      toRgbaString: function() {
<a name="l7356"><span class="linenum">7356</span></a>          var prefix = &quot;rgba(&quot;,
<a name="l7357"><span class="linenum">7357</span></a>              rgba = jQuery.map( this._rgba, function( v, i ) {
<a name="l7358"><span class="linenum">7358</span></a>                  return v == null ? ( i &gt; 2 ? 1 : 0 ) : v;
<a name="l7359"><span class="linenum">7359</span></a>              });
<a name="l7360"><span class="linenum">7360</span></a>  
<a name="l7361"><span class="linenum">7361</span></a>          if ( rgba[ 3 ] === 1 ) {
<a name="l7362"><span class="linenum">7362</span></a>              rgba.pop();
<a name="l7363"><span class="linenum">7363</span></a>              prefix = &quot;rgb(&quot;;
<a name="l7364"><span class="linenum">7364</span></a>          }
<a name="l7365"><span class="linenum">7365</span></a>  
<a name="l7366"><span class="linenum">7366</span></a>          return prefix + rgba.join() + &quot;)&quot;;
<a name="l7367"><span class="linenum">7367</span></a>      },
<a name="l7368"><span class="linenum">7368</span></a>      toHslaString: function() {
<a name="l7369"><span class="linenum">7369</span></a>          var prefix = &quot;hsla(&quot;,
<a name="l7370"><span class="linenum">7370</span></a>              hsla = jQuery.map( this.hsla(), function( v, i ) {
<a name="l7371"><span class="linenum">7371</span></a>                  if ( v == null ) {
<a name="l7372"><span class="linenum">7372</span></a>                      v = i &gt; 2 ? 1 : 0;
<a name="l7373"><span class="linenum">7373</span></a>                  }
<a name="l7374"><span class="linenum">7374</span></a>  
<a name="l7375"><span class="linenum">7375</span></a>  <span class="comment">                // catch 1 and 2</span>
<a name="l7376"><span class="linenum">7376</span></a>                  if ( i &amp;&amp; i &lt; 3 ) {
<a name="l7377"><span class="linenum">7377</span></a>                      v = Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>( v * 100 ) + &quot;%&quot;;
<a name="l7378"><span class="linenum">7378</span></a>                  }
<a name="l7379"><span class="linenum">7379</span></a>                  return v;
<a name="l7380"><span class="linenum">7380</span></a>              });
<a name="l7381"><span class="linenum">7381</span></a>  
<a name="l7382"><span class="linenum">7382</span></a>          if ( hsla[ 3 ] === 1 ) {
<a name="l7383"><span class="linenum">7383</span></a>              hsla.pop();
<a name="l7384"><span class="linenum">7384</span></a>              prefix = &quot;hsl(&quot;;
<a name="l7385"><span class="linenum">7385</span></a>          }
<a name="l7386"><span class="linenum">7386</span></a>          return prefix + hsla.join() + &quot;)&quot;;
<a name="l7387"><span class="linenum">7387</span></a>      },
<a name="l7388"><span class="linenum">7388</span></a>      toHexString: function( includeAlpha ) {
<a name="l7389"><span class="linenum">7389</span></a>          var rgba = this._rgba.slice(),
<a name="l7390"><span class="linenum">7390</span></a>              alpha = rgba.pop();
<a name="l7391"><span class="linenum">7391</span></a>  
<a name="l7392"><span class="linenum">7392</span></a>          if ( includeAlpha ) {
<a name="l7393"><span class="linenum">7393</span></a>              rgba.push( ~~( alpha * 255 ) );
<a name="l7394"><span class="linenum">7394</span></a>          }
<a name="l7395"><span class="linenum">7395</span></a>  
<a name="l7396"><span class="linenum">7396</span></a>          return &quot;#&quot; + jQuery.map( rgba, function( v ) {
<a name="l7397"><span class="linenum">7397</span></a>  
<a name="l7398"><span class="linenum">7398</span></a>  <span class="comment">            // default to 0 when nulls exist</span>
<a name="l7399"><span class="linenum">7399</span></a>              v = ( v || 0 ).<a class="function" onClick="logFunction('toString')" href="../../../_functions/tostring.html" onMouseOver="funcPopup(event,'tostring')">toString</a>( 16 );
<a name="l7400"><span class="linenum">7400</span></a>              return v.length === 1 ? &quot;0&quot; + v : v;
<a name="l7401"><span class="linenum">7401</span></a>          }).join(&quot;&quot;);
<a name="l7402"><span class="linenum">7402</span></a>      },
<a name="l7403"><span class="linenum">7403</span></a>      toString: function() {
<a name="l7404"><span class="linenum">7404</span></a>          return this._rgba[ 3 ] === 0 ? &quot;transparent&quot; : this.toRgbaString();
<a name="l7405"><span class="linenum">7405</span></a>      }
<a name="l7406"><span class="linenum">7406</span></a>  });
<a name="l7407"><span class="linenum">7407</span></a>  color.fn.parse.prototype = color.fn;
<a name="l7408"><span class="linenum">7408</span></a>  
<a name="l7409"><span class="linenum">7409</span></a>  <span class="comment">// hsla conversions adapted from:</span>
<a name="l7410"><span class="linenum">7410</span></a>  <span class="comment">// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021</span>
<a name="l7411"><span class="linenum">7411</span></a>  
<a name="l7412"><span class="linenum">7412</span></a>  function <a class="function" onClick="logFunction('hue2rgb')" href="../../../_functions/hue2rgb.html" onMouseOver="funcPopup(event,'hue2rgb')">hue2rgb</a>( p, q, h ) {
<a name="l7413"><span class="linenum">7413</span></a>      h = ( h + 1 ) % 1;
<a name="l7414"><span class="linenum">7414</span></a>      if ( h * 6 &lt; 1 ) {
<a name="l7415"><span class="linenum">7415</span></a>          return p + (q - p) * h * 6;
<a name="l7416"><span class="linenum">7416</span></a>      }
<a name="l7417"><span class="linenum">7417</span></a>      if ( h * 2 &lt; 1) {
<a name="l7418"><span class="linenum">7418</span></a>          return q;
<a name="l7419"><span class="linenum">7419</span></a>      }
<a name="l7420"><span class="linenum">7420</span></a>      if ( h * 3 &lt; 2 ) {
<a name="l7421"><span class="linenum">7421</span></a>          return p + (q - p) * ((2/3) - h) * 6;
<a name="l7422"><span class="linenum">7422</span></a>      }
<a name="l7423"><span class="linenum">7423</span></a>      return p;
<a name="l7424"><span class="linenum">7424</span></a>  }
<a name="l7425"><span class="linenum">7425</span></a>  
<a name="l7426"><span class="linenum">7426</span></a>  spaces.hsla.to = function ( rgba ) {
<a name="l7427"><span class="linenum">7427</span></a>      if ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {
<a name="l7428"><span class="linenum">7428</span></a>          return [ null, null, null, rgba[ 3 ] ];
<a name="l7429"><span class="linenum">7429</span></a>      }
<a name="l7430"><span class="linenum">7430</span></a>      var r = rgba[ 0 ] / 255,
<a name="l7431"><span class="linenum">7431</span></a>          g = rgba[ 1 ] / 255,
<a name="l7432"><span class="linenum">7432</span></a>          b = rgba[ 2 ] / 255,
<a name="l7433"><span class="linenum">7433</span></a>          a = rgba[ 3 ],
<a name="l7434"><span class="linenum">7434</span></a>          max = Math.<a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>( r, g, b ),
<a name="l7435"><span class="linenum">7435</span></a>          min = Math.<a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>( r, g, b ),
<a name="l7436"><span class="linenum">7436</span></a>          diff = max - min,
<a name="l7437"><span class="linenum">7437</span></a>          add = max + min,
<a name="l7438"><span class="linenum">7438</span></a>          l = add * 0.5,
<a name="l7439"><span class="linenum">7439</span></a>          h, s;
<a name="l7440"><span class="linenum">7440</span></a>  
<a name="l7441"><span class="linenum">7441</span></a>      if ( min === max ) {
<a name="l7442"><span class="linenum">7442</span></a>          h = 0;
<a name="l7443"><span class="linenum">7443</span></a>      } else if ( r === max ) {
<a name="l7444"><span class="linenum">7444</span></a>          h = ( 60 * ( g - b ) / diff ) + 360;
<a name="l7445"><span class="linenum">7445</span></a>      } else if ( g === max ) {
<a name="l7446"><span class="linenum">7446</span></a>          h = ( 60 * ( b - r ) / diff ) + 120;
<a name="l7447"><span class="linenum">7447</span></a>      } else {
<a name="l7448"><span class="linenum">7448</span></a>          h = ( 60 * ( r - g ) / diff ) + 240;
<a name="l7449"><span class="linenum">7449</span></a>      }
<a name="l7450"><span class="linenum">7450</span></a>  
<a name="l7451"><span class="linenum">7451</span></a>  <span class="comment">    // chroma (diff) == 0 means greyscale which, by definition, saturation = 0%</span>
<a name="l7452"><span class="linenum">7452</span></a>  <span class="comment">    // otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)</span>
<a name="l7453"><span class="linenum">7453</span></a>      if ( diff === 0 ) {
<a name="l7454"><span class="linenum">7454</span></a>          s = 0;
<a name="l7455"><span class="linenum">7455</span></a>      } else if ( l &lt;= 0.5 ) {
<a name="l7456"><span class="linenum">7456</span></a>          s = diff / add;
<a name="l7457"><span class="linenum">7457</span></a>      } else {
<a name="l7458"><span class="linenum">7458</span></a>          s = diff / ( 2 - add );
<a name="l7459"><span class="linenum">7459</span></a>      }
<a name="l7460"><span class="linenum">7460</span></a>      return [ Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(h) % 360, s, l, a == null ? 1 : a ];
<a name="l7461"><span class="linenum">7461</span></a>  };
<a name="l7462"><span class="linenum">7462</span></a>  
<a name="l7463"><span class="linenum">7463</span></a>  spaces.hsla.from = function ( hsla ) {
<a name="l7464"><span class="linenum">7464</span></a>      if ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {
<a name="l7465"><span class="linenum">7465</span></a>          return [ null, null, null, hsla[ 3 ] ];
<a name="l7466"><span class="linenum">7466</span></a>      }
<a name="l7467"><span class="linenum">7467</span></a>      var h = hsla[ 0 ] / 360,
<a name="l7468"><span class="linenum">7468</span></a>          s = hsla[ 1 ],
<a name="l7469"><span class="linenum">7469</span></a>          l = hsla[ 2 ],
<a name="l7470"><span class="linenum">7470</span></a>          a = hsla[ 3 ],
<a name="l7471"><span class="linenum">7471</span></a>          q = l &lt;= 0.5 ? l * ( 1 + s ) : l + s - l * s,
<a name="l7472"><span class="linenum">7472</span></a>          p = 2 * l - q;
<a name="l7473"><span class="linenum">7473</span></a>  
<a name="l7474"><span class="linenum">7474</span></a>      return [
<a name="l7475"><span class="linenum">7475</span></a>          Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>( <a class="function" onClick="logFunction('hue2rgb')" href="../../../_functions/hue2rgb.html" onMouseOver="funcPopup(event,'hue2rgb')">hue2rgb</a>( p, q, h + ( 1 / 3 ) ) * 255 ),
<a name="l7476"><span class="linenum">7476</span></a>          Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>( <a class="function" onClick="logFunction('hue2rgb')" href="../../../_functions/hue2rgb.html" onMouseOver="funcPopup(event,'hue2rgb')">hue2rgb</a>( p, q, h ) * 255 ),
<a name="l7477"><span class="linenum">7477</span></a>          Math.<a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>( <a class="function" onClick="logFunction('hue2rgb')" href="../../../_functions/hue2rgb.html" onMouseOver="funcPopup(event,'hue2rgb')">hue2rgb</a>( p, q, h - ( 1 / 3 ) ) * 255 ),
<a name="l7478"><span class="linenum">7478</span></a>          a
<a name="l7479"><span class="linenum">7479</span></a>      ];
<a name="l7480"><span class="linenum">7480</span></a>  };
<a name="l7481"><span class="linenum">7481</span></a>  
<a name="l7482"><span class="linenum">7482</span></a>  
<a name="l7483"><span class="linenum">7483</span></a>  <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( spaces, function( spaceName, space ) {
<a name="l7484"><span class="linenum">7484</span></a>      var props = space.props,
<a name="l7485"><span class="linenum">7485</span></a>          cache = space.cache,
<a name="l7486"><span class="linenum">7486</span></a>          to = space.to,
<a name="l7487"><span class="linenum">7487</span></a>          from = space.from;
<a name="l7488"><span class="linenum">7488</span></a>  
<a name="l7489"><span class="linenum">7489</span></a>  <span class="comment">    // makes rgba() and hsla()</span>
<a name="l7490"><span class="linenum">7490</span></a>      color.fn[ spaceName ] = function( value ) {
<a name="l7491"><span class="linenum">7491</span></a>  
<a name="l7492"><span class="linenum">7492</span></a>  <span class="comment">        // generate a cache for this space if it doesn't exist</span>
<a name="l7493"><span class="linenum">7493</span></a>          if ( to &amp;&amp; !this[ cache ] ) {
<a name="l7494"><span class="linenum">7494</span></a>              this[ cache ] = to( this._rgba );
<a name="l7495"><span class="linenum">7495</span></a>          }
<a name="l7496"><span class="linenum">7496</span></a>          if ( value === undefined ) {
<a name="l7497"><span class="linenum">7497</span></a>              return this[ cache ].slice();
<a name="l7498"><span class="linenum">7498</span></a>          }
<a name="l7499"><span class="linenum">7499</span></a>  
<a name="l7500"><span class="linenum">7500</span></a>          var ret,
<a name="l7501"><span class="linenum">7501</span></a>              type = jQuery.<a class="function" onClick="logFunction('type')" href="../../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>( value ),
<a name="l7502"><span class="linenum">7502</span></a>              arr = ( type === &quot;array&quot; || type === &quot;object&quot; ) ? value : arguments,
<a name="l7503"><span class="linenum">7503</span></a>              local = this[ cache ].slice();
<a name="l7504"><span class="linenum">7504</span></a>  
<a name="l7505"><span class="linenum">7505</span></a>          <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( props, function( key, prop ) {
<a name="l7506"><span class="linenum">7506</span></a>              var val = arr[ type === &quot;object&quot; ? key : prop.idx ];
<a name="l7507"><span class="linenum">7507</span></a>              if ( val == null ) {
<a name="l7508"><span class="linenum">7508</span></a>                  val = local[ prop.idx ];
<a name="l7509"><span class="linenum">7509</span></a>              }
<a name="l7510"><span class="linenum">7510</span></a>              local[ prop.idx ] = <a class="function" onClick="logFunction('clamp')" href="../../../_functions/clamp.html" onMouseOver="funcPopup(event,'clamp')">clamp</a>( val, prop );
<a name="l7511"><span class="linenum">7511</span></a>          });
<a name="l7512"><span class="linenum">7512</span></a>  
<a name="l7513"><span class="linenum">7513</span></a>          if ( from ) {
<a name="l7514"><span class="linenum">7514</span></a>              ret = color( <a class="function" onClick="logFunction('from')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">from</a>( local ) );
<a name="l7515"><span class="linenum">7515</span></a>              ret[ cache ] = local;
<a name="l7516"><span class="linenum">7516</span></a>              return ret;
<a name="l7517"><span class="linenum">7517</span></a>          } else {
<a name="l7518"><span class="linenum">7518</span></a>              return color( local );
<a name="l7519"><span class="linenum">7519</span></a>          }
<a name="l7520"><span class="linenum">7520</span></a>      };
<a name="l7521"><span class="linenum">7521</span></a>  
<a name="l7522"><span class="linenum">7522</span></a>  <span class="comment">    // makes red() green() blue() alpha() hue() saturation() lightness()</span>
<a name="l7523"><span class="linenum">7523</span></a>      <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( props, function( key, prop ) {
<a name="l7524"><span class="linenum">7524</span></a>  <span class="comment">        // alpha is included in more than one space</span>
<a name="l7525"><span class="linenum">7525</span></a>          if ( color.fn[ key ] ) {
<a name="l7526"><span class="linenum">7526</span></a>              return;
<a name="l7527"><span class="linenum">7527</span></a>          }
<a name="l7528"><span class="linenum">7528</span></a>          color.fn[ key ] = function( value ) {
<a name="l7529"><span class="linenum">7529</span></a>              var vtype = jQuery.<a class="function" onClick="logFunction('type')" href="../../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>( value ),
<a name="l7530"><span class="linenum">7530</span></a>                  fn = ( key === &quot;alpha&quot; ? ( this._hsla ? &quot;hsla&quot; : &quot;rgba&quot; ) : spaceName ),
<a name="l7531"><span class="linenum">7531</span></a>                  local = this[ fn ](),
<a name="l7532"><span class="linenum">7532</span></a>                  cur = local[ prop.idx ],
<a name="l7533"><span class="linenum">7533</span></a>                  match;
<a name="l7534"><span class="linenum">7534</span></a>  
<a name="l7535"><span class="linenum">7535</span></a>              if ( vtype === &quot;undefined&quot; ) {
<a name="l7536"><span class="linenum">7536</span></a>                  return cur;
<a name="l7537"><span class="linenum">7537</span></a>              }
<a name="l7538"><span class="linenum">7538</span></a>  
<a name="l7539"><span class="linenum">7539</span></a>              if ( vtype === &quot;function&quot; ) {
<a name="l7540"><span class="linenum">7540</span></a>                  value = value.call( this, cur );
<a name="l7541"><span class="linenum">7541</span></a>                  vtype = jQuery.<a class="function" onClick="logFunction('type')" href="../../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>( value );
<a name="l7542"><span class="linenum">7542</span></a>              }
<a name="l7543"><span class="linenum">7543</span></a>              if ( value == null &amp;&amp; prop.empty ) {
<a name="l7544"><span class="linenum">7544</span></a>                  return this;
<a name="l7545"><span class="linenum">7545</span></a>              }
<a name="l7546"><span class="linenum">7546</span></a>              if ( vtype === &quot;string&quot; ) {
<a name="l7547"><span class="linenum">7547</span></a>                  match = rplusequals.<a class="phpfunction" onClick="logFunction('exec')" href="../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>( value );
<a name="l7548"><span class="linenum">7548</span></a>                  if ( match ) {
<a name="l7549"><span class="linenum">7549</span></a>                      value = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === &quot;+&quot; ? 1 : -1 );
<a name="l7550"><span class="linenum">7550</span></a>                  }
<a name="l7551"><span class="linenum">7551</span></a>              }
<a name="l7552"><span class="linenum">7552</span></a>              local[ prop.idx ] = value;
<a name="l7553"><span class="linenum">7553</span></a>              return this[ fn ]( local );
<a name="l7554"><span class="linenum">7554</span></a>          };
<a name="l7555"><span class="linenum">7555</span></a>      });
<a name="l7556"><span class="linenum">7556</span></a>  });
<a name="l7557"><span class="linenum">7557</span></a>  
<a name="l7558"><span class="linenum">7558</span></a>  <span class="comment">// add cssHook and .fx.step function for each named hook.</span>
<a name="l7559"><span class="linenum">7559</span></a>  <span class="comment">// accept a space separated string of properties</span>
<a name="l7560"><span class="linenum">7560</span></a>  color.hook = function( hook ) {
<a name="l7561"><span class="linenum">7561</span></a>      var hooks = hook.<a class="phpfunction" onClick="logFunction('split')" href="../../../_functions/split.html" onMouseOver="phpfuncPopup(event,'split')">split</a>( &quot; &quot; );
<a name="l7562"><span class="linenum">7562</span></a>      <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( hooks, function( i, hook ) {
<a name="l7563"><span class="linenum">7563</span></a>          jQuery.cssHooks[ hook ] = {
<a name="l7564"><span class="linenum">7564</span></a>              set: function( elem, value ) {
<a name="l7565"><span class="linenum">7565</span></a>                  var parsed, curElem,
<a name="l7566"><span class="linenum">7566</span></a>                      backgroundColor = &quot;&quot;;
<a name="l7567"><span class="linenum">7567</span></a>  
<a name="l7568"><span class="linenum">7568</span></a>                  if ( value !== &quot;transparent&quot; &amp;&amp; ( jQuery.<a class="function" onClick="logFunction('type')" href="../../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>( value ) !== &quot;string&quot; || ( parsed = <a class="function" onClick="logFunction('stringParse')" href="../../../_functions/stringparse.html" onMouseOver="funcPopup(event,'stringparse')">stringParse</a>( value ) ) ) ) {
<a name="l7569"><span class="linenum">7569</span></a>                      value = color( parsed || value );
<a name="l7570"><span class="linenum">7570</span></a>                      if ( !support.rgba &amp;&amp; value._rgba[ 3 ] !== 1 ) {
<a name="l7571"><span class="linenum">7571</span></a>                          curElem = hook === &quot;backgroundColor&quot; ? elem.parentNode : elem;
<a name="l7572"><span class="linenum">7572</span></a>                          while (
<a name="l7573"><span class="linenum">7573</span></a>                              (backgroundColor === &quot;&quot; || backgroundColor === &quot;transparent&quot;) &amp;&amp;
<a name="l7574"><span class="linenum">7574</span></a>                              curElem &amp;&amp; curElem.style
<a name="l7575"><span class="linenum">7575</span></a>                          ) {
<a name="l7576"><span class="linenum">7576</span></a>                              try {
<a name="l7577"><span class="linenum">7577</span></a>                                  backgroundColor = jQuery.css( curElem, &quot;backgroundColor&quot; );
<a name="l7578"><span class="linenum">7578</span></a>                                  curElem = curElem.parentNode;
<a name="l7579"><span class="linenum">7579</span></a>                              } catch ( e ) {
<a name="l7580"><span class="linenum">7580</span></a>                              }
<a name="l7581"><span class="linenum">7581</span></a>                          }
<a name="l7582"><span class="linenum">7582</span></a>  
<a name="l7583"><span class="linenum">7583</span></a>                          value = value.blend( backgroundColor &amp;&amp; backgroundColor !== &quot;transparent&quot; ?
<a name="l7584"><span class="linenum">7584</span></a>                              backgroundColor :
<a name="l7585"><span class="linenum">7585</span></a>                              &quot;_default&quot; );
<a name="l7586"><span class="linenum">7586</span></a>                      }
<a name="l7587"><span class="linenum">7587</span></a>  
<a name="l7588"><span class="linenum">7588</span></a>                      value = value.toRgbaString();
<a name="l7589"><span class="linenum">7589</span></a>                  }
<a name="l7590"><span class="linenum">7590</span></a>                  try {
<a name="l7591"><span class="linenum">7591</span></a>                      elem.style[ hook ] = value;
<a name="l7592"><span class="linenum">7592</span></a>                  } catch( e ) {
<a name="l7593"><span class="linenum">7593</span></a>  <span class="comment">                    // wrapped to prevent IE from throwing errors on &quot;invalid&quot; values like 'auto' or 'inherit'</span>
<a name="l7594"><span class="linenum">7594</span></a>                  }
<a name="l7595"><span class="linenum">7595</span></a>              }
<a name="l7596"><span class="linenum">7596</span></a>          };
<a name="l7597"><span class="linenum">7597</span></a>          jQuery.fx.step[ hook ] = function( fx ) {
<a name="l7598"><span class="linenum">7598</span></a>              if ( !fx.colorInit ) {
<a name="l7599"><span class="linenum">7599</span></a>                  fx.start = color( fx.elem, hook );
<a name="l7600"><span class="linenum">7600</span></a>                  fx.end = color( fx.end );
<a name="l7601"><span class="linenum">7601</span></a>                  fx.colorInit = true;
<a name="l7602"><span class="linenum">7602</span></a>              }
<a name="l7603"><span class="linenum">7603</span></a>              jQuery.cssHooks[ hook ].<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( fx.elem, fx.start.transition( fx.end, fx.pos ) );
<a name="l7604"><span class="linenum">7604</span></a>          };
<a name="l7605"><span class="linenum">7605</span></a>      });
<a name="l7606"><span class="linenum">7606</span></a>  
<a name="l7607"><span class="linenum">7607</span></a>  };
<a name="l7608"><span class="linenum">7608</span></a>  
<a name="l7609"><span class="linenum">7609</span></a>  color.hook( stepHooks );
<a name="l7610"><span class="linenum">7610</span></a>  
<a name="l7611"><span class="linenum">7611</span></a>  jQuery.cssHooks.borderColor = {
<a name="l7612"><span class="linenum">7612</span></a>      expand: function( value ) {
<a name="l7613"><span class="linenum">7613</span></a>          var expanded = {};
<a name="l7614"><span class="linenum">7614</span></a>  
<a name="l7615"><span class="linenum">7615</span></a>          <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( [ &quot;Top&quot;, &quot;Right&quot;, &quot;Bottom&quot;, &quot;Left&quot; ], function( i, part ) {
<a name="l7616"><span class="linenum">7616</span></a>              expanded[ &quot;border&quot; + part + &quot;Color&quot; ] = value;
<a name="l7617"><span class="linenum">7617</span></a>          });
<a name="l7618"><span class="linenum">7618</span></a>          return expanded;
<a name="l7619"><span class="linenum">7619</span></a>      }
<a name="l7620"><span class="linenum">7620</span></a>  };
<a name="l7621"><span class="linenum">7621</span></a>  
<a name="l7622"><span class="linenum">7622</span></a>  <span class="comment">// Basic color names only.</span>
<a name="l7623"><span class="linenum">7623</span></a>  <span class="comment">// Usage of any of the other color names requires adding yourself or including</span>
<a name="l7624"><span class="linenum">7624</span></a>  <span class="comment">// jquery.color.svg-names.js.</span>
<a name="l7625"><span class="linenum">7625</span></a>  colors = jQuery.Color.names = {
<a name="l7626"><span class="linenum">7626</span></a>  <span class="comment">    // 4.1. Basic color keywords</span>
<a name="l7627"><span class="linenum">7627</span></a>      aqua: &quot;#00ffff&quot;,
<a name="l7628"><span class="linenum">7628</span></a>      black: &quot;#000000&quot;,
<a name="l7629"><span class="linenum">7629</span></a>      blue: &quot;#0000ff&quot;,
<a name="l7630"><span class="linenum">7630</span></a>      fuchsia: &quot;#ff00ff&quot;,
<a name="l7631"><span class="linenum">7631</span></a>      gray: &quot;#808080&quot;,
<a name="l7632"><span class="linenum">7632</span></a>      green: &quot;#008000&quot;,
<a name="l7633"><span class="linenum">7633</span></a>      lime: &quot;#00ff00&quot;,
<a name="l7634"><span class="linenum">7634</span></a>      maroon: &quot;#800000&quot;,
<a name="l7635"><span class="linenum">7635</span></a>      navy: &quot;#000080&quot;,
<a name="l7636"><span class="linenum">7636</span></a>      olive: &quot;#808000&quot;,
<a name="l7637"><span class="linenum">7637</span></a>      purple: &quot;#800080&quot;,
<a name="l7638"><span class="linenum">7638</span></a>      red: &quot;#ff0000&quot;,
<a name="l7639"><span class="linenum">7639</span></a>      silver: &quot;#c0c0c0&quot;,
<a name="l7640"><span class="linenum">7640</span></a>      teal: &quot;#008080&quot;,
<a name="l7641"><span class="linenum">7641</span></a>      white: &quot;#ffffff&quot;,
<a name="l7642"><span class="linenum">7642</span></a>      yellow: &quot;#ffff00&quot;,
<a name="l7643"><span class="linenum">7643</span></a>  
<a name="l7644"><span class="linenum">7644</span></a>  <span class="comment">    // 4.2.3. &quot;transparent&quot; color keyword</span>
<a name="l7645"><span class="linenum">7645</span></a>      transparent: [ null, null, null, 0 ],
<a name="l7646"><span class="linenum">7646</span></a>  
<a name="l7647"><span class="linenum">7647</span></a>      _default: &quot;#ffffff&quot;
<a name="l7648"><span class="linenum">7648</span></a>  };
<a name="l7649"><span class="linenum">7649</span></a>  
<a name="l7650"><span class="linenum">7650</span></a>  })( jQuery );
<a name="l7651"><span class="linenum">7651</span></a>  
<a name="l7652"><span class="linenum">7652</span></a>  
<a name="l7653"><span class="linenum">7653</span></a>  <span class="comment">/******************************************************************************/</span>
<a name="l7654"><span class="linenum">7654</span></a>  <span class="comment">/****************************** CLASS ANIMATIONS ******************************/</span>
<a name="l7655"><span class="linenum">7655</span></a>  <span class="comment">/******************************************************************************/</span>
<a name="l7656"><span class="linenum">7656</span></a>  (function() {
<a name="l7657"><span class="linenum">7657</span></a>  
<a name="l7658"><span class="linenum">7658</span></a>  var classAnimationActions = [ &quot;add&quot;, &quot;remove&quot;, &quot;toggle&quot; ],
<a name="l7659"><span class="linenum">7659</span></a>      shorthandStyles = {
<a name="l7660"><span class="linenum">7660</span></a>          border: 1,
<a name="l7661"><span class="linenum">7661</span></a>          borderBottom: 1,
<a name="l7662"><span class="linenum">7662</span></a>          borderColor: 1,
<a name="l7663"><span class="linenum">7663</span></a>          borderLeft: 1,
<a name="l7664"><span class="linenum">7664</span></a>          borderRight: 1,
<a name="l7665"><span class="linenum">7665</span></a>          borderTop: 1,
<a name="l7666"><span class="linenum">7666</span></a>          borderWidth: 1,
<a name="l7667"><span class="linenum">7667</span></a>          margin: 1,
<a name="l7668"><span class="linenum">7668</span></a>          padding: 1
<a name="l7669"><span class="linenum">7669</span></a>      };
<a name="l7670"><span class="linenum">7670</span></a>  
<a name="l7671"><span class="linenum">7671</span></a>  $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>([ &quot;borderLeftStyle&quot;, &quot;borderRightStyle&quot;, &quot;borderBottomStyle&quot;, &quot;borderTopStyle&quot; ], function( _, prop ) {
<a name="l7672"><span class="linenum">7672</span></a>      $.fx.step[ prop ] = function( fx ) {
<a name="l7673"><span class="linenum">7673</span></a>          if ( fx.end !== &quot;none&quot; &amp;&amp; !fx.setAttr || fx.pos === 1 &amp;&amp; !fx.setAttr ) {
<a name="l7674"><span class="linenum">7674</span></a>              jQuery.style( fx.elem, prop, fx.end );
<a name="l7675"><span class="linenum">7675</span></a>              fx.setAttr = true;
<a name="l7676"><span class="linenum">7676</span></a>          }
<a name="l7677"><span class="linenum">7677</span></a>      };
<a name="l7678"><span class="linenum">7678</span></a>  });
<a name="l7679"><span class="linenum">7679</span></a>  
<a name="l7680"><span class="linenum">7680</span></a>  function <a class="function" onClick="logFunction('getElementStyles')" href="../../../_functions/getelementstyles.html" onMouseOver="funcPopup(event,'getelementstyles')">getElementStyles</a>( elem ) {
<a name="l7681"><span class="linenum">7681</span></a>      var key, len,
<a name="l7682"><span class="linenum">7682</span></a>          style = elem.ownerDocument.defaultView ?
<a name="l7683"><span class="linenum">7683</span></a>              elem.ownerDocument.defaultView.getComputedStyle( elem, null ) :
<a name="l7684"><span class="linenum">7684</span></a>              elem.currentStyle,
<a name="l7685"><span class="linenum">7685</span></a>          styles = {};
<a name="l7686"><span class="linenum">7686</span></a>  
<a name="l7687"><span class="linenum">7687</span></a>      if ( style &amp;&amp; style.length &amp;&amp; style[ 0 ] &amp;&amp; style[ style[ 0 ] ] ) {
<a name="l7688"><span class="linenum">7688</span></a>          len = style.length;
<a name="l7689"><span class="linenum">7689</span></a>          while ( len-- ) {
<a name="l7690"><span class="linenum">7690</span></a>              key = style[ len ];
<a name="l7691"><span class="linenum">7691</span></a>              if ( typeof style[ key ] === &quot;string&quot; ) {
<a name="l7692"><span class="linenum">7692</span></a>                  styles[ $.camelCase( key ) ] = style[ key ];
<a name="l7693"><span class="linenum">7693</span></a>              }
<a name="l7694"><span class="linenum">7694</span></a>          }
<a name="l7695"><span class="linenum">7695</span></a>  <span class="comment">    // support: Opera, IE &lt;9</span>
<a name="l7696"><span class="linenum">7696</span></a>      } else {
<a name="l7697"><span class="linenum">7697</span></a>          for ( key in style ) {
<a name="l7698"><span class="linenum">7698</span></a>              if ( typeof style[ key ] === &quot;string&quot; ) {
<a name="l7699"><span class="linenum">7699</span></a>                  styles[ key ] = style[ key ];
<a name="l7700"><span class="linenum">7700</span></a>              }
<a name="l7701"><span class="linenum">7701</span></a>          }
<a name="l7702"><span class="linenum">7702</span></a>      }
<a name="l7703"><span class="linenum">7703</span></a>  
<a name="l7704"><span class="linenum">7704</span></a>      return styles;
<a name="l7705"><span class="linenum">7705</span></a>  }
<a name="l7706"><span class="linenum">7706</span></a>  
<a name="l7707"><span class="linenum">7707</span></a>  
<a name="l7708"><span class="linenum">7708</span></a>  function <a class="function" onClick="logFunction('styleDifference')" href="../../../_functions/styledifference.html" onMouseOver="funcPopup(event,'styledifference')">styleDifference</a>( oldStyle, newStyle ) {
<a name="l7709"><span class="linenum">7709</span></a>      var diff = {},
<a name="l7710"><span class="linenum">7710</span></a>          name, value;
<a name="l7711"><span class="linenum">7711</span></a>  
<a name="l7712"><span class="linenum">7712</span></a>      for ( name in newStyle ) {
<a name="l7713"><span class="linenum">7713</span></a>          value = newStyle[ name ];
<a name="l7714"><span class="linenum">7714</span></a>          if ( oldStyle[ name ] !== value ) {
<a name="l7715"><span class="linenum">7715</span></a>              if ( !shorthandStyles[ name ] ) {
<a name="l7716"><span class="linenum">7716</span></a>                  if ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {
<a name="l7717"><span class="linenum">7717</span></a>                      diff[ name ] = value;
<a name="l7718"><span class="linenum">7718</span></a>                  }
<a name="l7719"><span class="linenum">7719</span></a>              }
<a name="l7720"><span class="linenum">7720</span></a>          }
<a name="l7721"><span class="linenum">7721</span></a>      }
<a name="l7722"><span class="linenum">7722</span></a>  
<a name="l7723"><span class="linenum">7723</span></a>      return diff;
<a name="l7724"><span class="linenum">7724</span></a>  }
<a name="l7725"><span class="linenum">7725</span></a>  
<a name="l7726"><span class="linenum">7726</span></a>  <span class="comment">// support: jQuery &lt;1.8</span>
<a name="l7727"><span class="linenum">7727</span></a>  if ( !$.fn.addBack ) {
<a name="l7728"><span class="linenum">7728</span></a>      $.fn.addBack = function( selector ) {
<a name="l7729"><span class="linenum">7729</span></a>          return this.<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( selector == null ?
<a name="l7730"><span class="linenum">7730</span></a>              this.prevObject : this.prevObject.<a class="function" onClick="logFunction('filter')" href="../../../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>( selector )
<a name="l7731"><span class="linenum">7731</span></a>          );
<a name="l7732"><span class="linenum">7732</span></a>      };
<a name="l7733"><span class="linenum">7733</span></a>  }
<a name="l7734"><span class="linenum">7734</span></a>  
<a name="l7735"><span class="linenum">7735</span></a>  $.effects.animateClass = function( value, duration, easing, callback ) {
<a name="l7736"><span class="linenum">7736</span></a>      var o = $.speed( duration, easing, callback );
<a name="l7737"><span class="linenum">7737</span></a>  
<a name="l7738"><span class="linenum">7738</span></a>      return this.queue( function() {
<a name="l7739"><span class="linenum">7739</span></a>          var animated = $( this ),
<a name="l7740"><span class="linenum">7740</span></a>              baseClass = animated.attr( &quot;class&quot; ) || &quot;&quot;,
<a name="l7741"><span class="linenum">7741</span></a>              applyClassChange,
<a name="l7742"><span class="linenum">7742</span></a>              allAnimations = o.children ? animated.<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;*&quot; ).addBack() : animated;
<a name="l7743"><span class="linenum">7743</span></a>  
<a name="l7744"><span class="linenum">7744</span></a>  <span class="comment">        // map the animated objects to store the original styles.</span>
<a name="l7745"><span class="linenum">7745</span></a>          allAnimations = allAnimations.map(function() {
<a name="l7746"><span class="linenum">7746</span></a>              var el = $( this );
<a name="l7747"><span class="linenum">7747</span></a>              return {
<a name="l7748"><span class="linenum">7748</span></a>                  el: el,
<a name="l7749"><span class="linenum">7749</span></a>                  start: <a class="function" onClick="logFunction('getElementStyles')" href="../../../_functions/getelementstyles.html" onMouseOver="funcPopup(event,'getelementstyles')">getElementStyles</a>( this )
<a name="l7750"><span class="linenum">7750</span></a>              };
<a name="l7751"><span class="linenum">7751</span></a>          });
<a name="l7752"><span class="linenum">7752</span></a>  
<a name="l7753"><span class="linenum">7753</span></a>  <span class="comment">        // apply class change</span>
<a name="l7754"><span class="linenum">7754</span></a>          applyClassChange = function() {
<a name="l7755"><span class="linenum">7755</span></a>              $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( classAnimationActions, function(i, action) {
<a name="l7756"><span class="linenum">7756</span></a>                  if ( value[ action ] ) {
<a name="l7757"><span class="linenum">7757</span></a>                      animated[ action + &quot;Class&quot; ]( value[ action ] );
<a name="l7758"><span class="linenum">7758</span></a>                  }
<a name="l7759"><span class="linenum">7759</span></a>              });
<a name="l7760"><span class="linenum">7760</span></a>          };
<a name="l7761"><span class="linenum">7761</span></a>          applyClassChange();
<a name="l7762"><span class="linenum">7762</span></a>  
<a name="l7763"><span class="linenum">7763</span></a>  <span class="comment">        // map all animated objects again - calculate new styles and diff</span>
<a name="l7764"><span class="linenum">7764</span></a>          allAnimations = allAnimations.map(function() {
<a name="l7765"><span class="linenum">7765</span></a>              this.end = <a class="function" onClick="logFunction('getElementStyles')" href="../../../_functions/getelementstyles.html" onMouseOver="funcPopup(event,'getelementstyles')">getElementStyles</a>( this.el[ 0 ] );
<a name="l7766"><span class="linenum">7766</span></a>              this.diff = <a class="function" onClick="logFunction('styleDifference')" href="../../../_functions/styledifference.html" onMouseOver="funcPopup(event,'styledifference')">styleDifference</a>( this.start, this.end );
<a name="l7767"><span class="linenum">7767</span></a>              return this;
<a name="l7768"><span class="linenum">7768</span></a>          });
<a name="l7769"><span class="linenum">7769</span></a>  
<a name="l7770"><span class="linenum">7770</span></a>  <span class="comment">        // apply original class</span>
<a name="l7771"><span class="linenum">7771</span></a>          animated.attr( &quot;class&quot;, baseClass );
<a name="l7772"><span class="linenum">7772</span></a>  
<a name="l7773"><span class="linenum">7773</span></a>  <span class="comment">        // map all animated objects again - this time collecting a promise</span>
<a name="l7774"><span class="linenum">7774</span></a>          allAnimations = allAnimations.map(function() {
<a name="l7775"><span class="linenum">7775</span></a>              var styleInfo = this,
<a name="l7776"><span class="linenum">7776</span></a>                  dfd = $.Deferred(),
<a name="l7777"><span class="linenum">7777</span></a>                  opts = $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({}, o, {
<a name="l7778"><span class="linenum">7778</span></a>                      queue: false,
<a name="l7779"><span class="linenum">7779</span></a>                      complete: function() {
<a name="l7780"><span class="linenum">7780</span></a>                          dfd.<a class="function" onClick="logFunction('resolve')" href="../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>( styleInfo );
<a name="l7781"><span class="linenum">7781</span></a>                      }
<a name="l7782"><span class="linenum">7782</span></a>                  });
<a name="l7783"><span class="linenum">7783</span></a>  
<a name="l7784"><span class="linenum">7784</span></a>              this.el.<a class="function" onClick="logFunction('animate')" href="../../../_functions/animate.html" onMouseOver="funcPopup(event,'animate')">animate</a>( this.diff, opts );
<a name="l7785"><span class="linenum">7785</span></a>              return dfd.promise();
<a name="l7786"><span class="linenum">7786</span></a>          });
<a name="l7787"><span class="linenum">7787</span></a>  
<a name="l7788"><span class="linenum">7788</span></a>  <span class="comment">        // once all animations have completed:</span>
<a name="l7789"><span class="linenum">7789</span></a>          $.when.apply( $, allAnimations.<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ).<a class="function" onClick="logFunction('done')" href="../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function() {
<a name="l7790"><span class="linenum">7790</span></a>  
<a name="l7791"><span class="linenum">7791</span></a>  <span class="comment">            // set the final class</span>
<a name="l7792"><span class="linenum">7792</span></a>              applyClassChange();
<a name="l7793"><span class="linenum">7793</span></a>  
<a name="l7794"><span class="linenum">7794</span></a>  <span class="comment">            // for each animated element,</span>
<a name="l7795"><span class="linenum">7795</span></a>  <span class="comment">            // clear all css properties that were animated</span>
<a name="l7796"><span class="linenum">7796</span></a>              $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( arguments, function() {
<a name="l7797"><span class="linenum">7797</span></a>                  var el = this.el;
<a name="l7798"><span class="linenum">7798</span></a>                  $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( this.diff, function(key) {
<a name="l7799"><span class="linenum">7799</span></a>                      el.css( key, &quot;&quot; );
<a name="l7800"><span class="linenum">7800</span></a>                  });
<a name="l7801"><span class="linenum">7801</span></a>              });
<a name="l7802"><span class="linenum">7802</span></a>  
<a name="l7803"><span class="linenum">7803</span></a>  <span class="comment">            // this is guarnteed to be there if you use jQuery.speed()</span>
<a name="l7804"><span class="linenum">7804</span></a>  <span class="comment">            // it also handles dequeuing the next anim...</span>
<a name="l7805"><span class="linenum">7805</span></a>              o.complete.call( animated[ 0 ] );
<a name="l7806"><span class="linenum">7806</span></a>          });
<a name="l7807"><span class="linenum">7807</span></a>      });
<a name="l7808"><span class="linenum">7808</span></a>  };
<a name="l7809"><span class="linenum">7809</span></a>  
<a name="l7810"><span class="linenum">7810</span></a>  $.fn.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({
<a name="l7811"><span class="linenum">7811</span></a>      addClass: (function( orig ) {
<a name="l7812"><span class="linenum">7812</span></a>          return function( classNames, speed, easing, callback ) {
<a name="l7813"><span class="linenum">7813</span></a>              return speed ?
<a name="l7814"><span class="linenum">7814</span></a>                  $.effects.animateClass.call( this,
<a name="l7815"><span class="linenum">7815</span></a>                      { add: classNames }, speed, easing, callback ) :
<a name="l7816"><span class="linenum">7816</span></a>                  orig.apply( this, arguments );
<a name="l7817"><span class="linenum">7817</span></a>          };
<a name="l7818"><span class="linenum">7818</span></a>      })( $.fn.addClass ),
<a name="l7819"><span class="linenum">7819</span></a>  
<a name="l7820"><span class="linenum">7820</span></a>      removeClass: (function( orig ) {
<a name="l7821"><span class="linenum">7821</span></a>          return function( classNames, speed, easing, callback ) {
<a name="l7822"><span class="linenum">7822</span></a>              return arguments.length &gt; 1 ?
<a name="l7823"><span class="linenum">7823</span></a>                  $.effects.animateClass.call( this,
<a name="l7824"><span class="linenum">7824</span></a>                      { remove: classNames }, speed, easing, callback ) :
<a name="l7825"><span class="linenum">7825</span></a>                  orig.apply( this, arguments );
<a name="l7826"><span class="linenum">7826</span></a>          };
<a name="l7827"><span class="linenum">7827</span></a>      })( $.fn.removeClass ),
<a name="l7828"><span class="linenum">7828</span></a>  
<a name="l7829"><span class="linenum">7829</span></a>      toggleClass: (function( orig ) {
<a name="l7830"><span class="linenum">7830</span></a>          return function( classNames, force, speed, easing, callback ) {
<a name="l7831"><span class="linenum">7831</span></a>              if ( typeof force === &quot;boolean&quot; || force === undefined ) {
<a name="l7832"><span class="linenum">7832</span></a>                  if ( !speed ) {
<a name="l7833"><span class="linenum">7833</span></a>  <span class="comment">                    // without speed parameter</span>
<a name="l7834"><span class="linenum">7834</span></a>                      return orig.apply( this, arguments );
<a name="l7835"><span class="linenum">7835</span></a>                  } else {
<a name="l7836"><span class="linenum">7836</span></a>                      return $.effects.animateClass.call( this,
<a name="l7837"><span class="linenum">7837</span></a>                          (force ? { add: classNames } : { remove: classNames }),
<a name="l7838"><span class="linenum">7838</span></a>                          speed, easing, callback );
<a name="l7839"><span class="linenum">7839</span></a>                  }
<a name="l7840"><span class="linenum">7840</span></a>              } else {
<a name="l7841"><span class="linenum">7841</span></a>  <span class="comment">                // without force parameter</span>
<a name="l7842"><span class="linenum">7842</span></a>                  return $.effects.animateClass.call( this,
<a name="l7843"><span class="linenum">7843</span></a>                      { toggle: classNames }, force, speed, easing );
<a name="l7844"><span class="linenum">7844</span></a>              }
<a name="l7845"><span class="linenum">7845</span></a>          };
<a name="l7846"><span class="linenum">7846</span></a>      })( $.fn.toggleClass ),
<a name="l7847"><span class="linenum">7847</span></a>  
<a name="l7848"><span class="linenum">7848</span></a>      switchClass: function( remove, add, speed, easing, callback) {
<a name="l7849"><span class="linenum">7849</span></a>          return $.effects.animateClass.call( this, {
<a name="l7850"><span class="linenum">7850</span></a>              add: add,
<a name="l7851"><span class="linenum">7851</span></a>              remove: remove
<a name="l7852"><span class="linenum">7852</span></a>          }, speed, easing, callback );
<a name="l7853"><span class="linenum">7853</span></a>      }
<a name="l7854"><span class="linenum">7854</span></a>  });
<a name="l7855"><span class="linenum">7855</span></a>  
<a name="l7856"><span class="linenum">7856</span></a>  })();
<a name="l7857"><span class="linenum">7857</span></a>  
<a name="l7858"><span class="linenum">7858</span></a>  <span class="comment">/******************************************************************************/</span>
<a name="l7859"><span class="linenum">7859</span></a>  <span class="comment">/*********************************** EFFECTS **********************************/</span>
<a name="l7860"><span class="linenum">7860</span></a>  <span class="comment">/******************************************************************************/</span>
<a name="l7861"><span class="linenum">7861</span></a>  
<a name="l7862"><span class="linenum">7862</span></a>  (function() {
<a name="l7863"><span class="linenum">7863</span></a>  
<a name="l7864"><span class="linenum">7864</span></a>  $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( $.effects, {
<a name="l7865"><span class="linenum">7865</span></a>      version: &quot;1.10.4&quot;,
<a name="l7866"><span class="linenum">7866</span></a>  
<a name="l7867"><span class="linenum">7867</span></a>  <span class="comment">    // Saves a set of properties in a data storage</span>
<a name="l7868"><span class="linenum">7868</span></a>      save: function( element, set ) {
<a name="l7869"><span class="linenum">7869</span></a>          for( var i=0; i &lt; set.length; i++ ) {
<a name="l7870"><span class="linenum">7870</span></a>              if ( set[ i ] !== null ) {
<a name="l7871"><span class="linenum">7871</span></a>                  element.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );
<a name="l7872"><span class="linenum">7872</span></a>              }
<a name="l7873"><span class="linenum">7873</span></a>          }
<a name="l7874"><span class="linenum">7874</span></a>      },
<a name="l7875"><span class="linenum">7875</span></a>  
<a name="l7876"><span class="linenum">7876</span></a>  <span class="comment">    // Restores a set of previously saved properties from a data storage</span>
<a name="l7877"><span class="linenum">7877</span></a>      restore: function( element, set ) {
<a name="l7878"><span class="linenum">7878</span></a>          var val, i;
<a name="l7879"><span class="linenum">7879</span></a>          for( i=0; i &lt; set.length; i++ ) {
<a name="l7880"><span class="linenum">7880</span></a>              if ( set[ i ] !== null ) {
<a name="l7881"><span class="linenum">7881</span></a>                  val = element.data( dataSpace + set[ i ] );
<a name="l7882"><span class="linenum">7882</span></a>  <span class="comment">                // support: jQuery 1.6.2</span>
<a name="l7883"><span class="linenum">7883</span></a>  <span class="comment">                // http://bugs.jquery.com/ticket/9917</span>
<a name="l7884"><span class="linenum">7884</span></a>  <span class="comment">                // jQuery 1.6.2 incorrectly returns undefined for any falsy value.</span>
<a name="l7885"><span class="linenum">7885</span></a>  <span class="comment">                // We can't differentiate between &quot;&quot; and 0 here, so we just assume</span>
<a name="l7886"><span class="linenum">7886</span></a>  <span class="comment">                // empty string since it's likely to be a more common value...</span>
<a name="l7887"><span class="linenum">7887</span></a>                  if ( val === undefined ) {
<a name="l7888"><span class="linenum">7888</span></a>                      val = &quot;&quot;;
<a name="l7889"><span class="linenum">7889</span></a>                  }
<a name="l7890"><span class="linenum">7890</span></a>                  element.css( set[ i ], val );
<a name="l7891"><span class="linenum">7891</span></a>              }
<a name="l7892"><span class="linenum">7892</span></a>          }
<a name="l7893"><span class="linenum">7893</span></a>      },
<a name="l7894"><span class="linenum">7894</span></a>  
<a name="l7895"><span class="linenum">7895</span></a>      setMode: function( el, mode ) {
<a name="l7896"><span class="linenum">7896</span></a>          if (mode === &quot;toggle&quot;) {
<a name="l7897"><span class="linenum">7897</span></a>              mode = el.is( &quot;:hidden&quot; ) ? &quot;show&quot; : &quot;hide&quot;;
<a name="l7898"><span class="linenum">7898</span></a>          }
<a name="l7899"><span class="linenum">7899</span></a>          return mode;
<a name="l7900"><span class="linenum">7900</span></a>      },
<a name="l7901"><span class="linenum">7901</span></a>  
<a name="l7902"><span class="linenum">7902</span></a>  <span class="comment">    // Translates a [top,left] array into a baseline value</span>
<a name="l7903"><span class="linenum">7903</span></a>  <span class="comment">    // this should be a little more flexible in the future to handle a string &amp; hash</span>
<a name="l7904"><span class="linenum">7904</span></a>      getBaseline: function( origin, original ) {
<a name="l7905"><span class="linenum">7905</span></a>          var y, x;
<a name="l7906"><span class="linenum">7906</span></a>          switch ( origin[ 0 ] ) {
<a name="l7907"><span class="linenum">7907</span></a>              case &quot;top&quot;: y = 0; break;
<a name="l7908"><span class="linenum">7908</span></a>              case &quot;middle&quot;: y = 0.5; break;
<a name="l7909"><span class="linenum">7909</span></a>              case &quot;bottom&quot;: y = 1; break;
<a name="l7910"><span class="linenum">7910</span></a>              default: y = origin[ 0 ] / original.height;
<a name="l7911"><span class="linenum">7911</span></a>          }
<a name="l7912"><span class="linenum">7912</span></a>          switch ( origin[ 1 ] ) {
<a name="l7913"><span class="linenum">7913</span></a>              case &quot;left&quot;: x = 0; break;
<a name="l7914"><span class="linenum">7914</span></a>              case &quot;center&quot;: x = 0.5; break;
<a name="l7915"><span class="linenum">7915</span></a>              case &quot;right&quot;: x = 1; break;
<a name="l7916"><span class="linenum">7916</span></a>              default: x = origin[ 1 ] / original.width;
<a name="l7917"><span class="linenum">7917</span></a>          }
<a name="l7918"><span class="linenum">7918</span></a>          return {
<a name="l7919"><span class="linenum">7919</span></a>              x: x,
<a name="l7920"><span class="linenum">7920</span></a>              y: y
<a name="l7921"><span class="linenum">7921</span></a>          };
<a name="l7922"><span class="linenum">7922</span></a>      },
<a name="l7923"><span class="linenum">7923</span></a>  
<a name="l7924"><span class="linenum">7924</span></a>  <span class="comment">    // Wraps the element around a wrapper that copies position properties</span>
<a name="l7925"><span class="linenum">7925</span></a>      createWrapper: function( element ) {
<a name="l7926"><span class="linenum">7926</span></a>  
<a name="l7927"><span class="linenum">7927</span></a>  <span class="comment">        // if the element is already wrapped, return it</span>
<a name="l7928"><span class="linenum">7928</span></a>          if ( element.parent().is( &quot;.ui-effects-wrapper&quot; )) {
<a name="l7929"><span class="linenum">7929</span></a>              return element.parent();
<a name="l7930"><span class="linenum">7930</span></a>          }
<a name="l7931"><span class="linenum">7931</span></a>  
<a name="l7932"><span class="linenum">7932</span></a>  <span class="comment">        // wrap the element</span>
<a name="l7933"><span class="linenum">7933</span></a>          var props = {
<a name="l7934"><span class="linenum">7934</span></a>                  width: element.outerWidth(true),
<a name="l7935"><span class="linenum">7935</span></a>                  height: element.outerHeight(true),
<a name="l7936"><span class="linenum">7936</span></a>                  &quot;float&quot;: element.css( &quot;float&quot; )
<a name="l7937"><span class="linenum">7937</span></a>              },
<a name="l7938"><span class="linenum">7938</span></a>              wrapper = $( &quot;&lt;div&gt;&lt;/div&gt;&quot; )
<a name="l7939"><span class="linenum">7939</span></a>                  .addClass( &quot;ui-effects-wrapper&quot; )
<a name="l7940"><span class="linenum">7940</span></a>                  .css({
<a name="l7941"><span class="linenum">7941</span></a>                      fontSize: &quot;100%&quot;,
<a name="l7942"><span class="linenum">7942</span></a>                      background: &quot;transparent&quot;,
<a name="l7943"><span class="linenum">7943</span></a>                      border: &quot;none&quot;,
<a name="l7944"><span class="linenum">7944</span></a>                      margin: 0,
<a name="l7945"><span class="linenum">7945</span></a>                      padding: 0
<a name="l7946"><span class="linenum">7946</span></a>                  }),
<a name="l7947"><span class="linenum">7947</span></a>  <span class="comment">            // Store the size in case width/height are defined in % - Fixes #5245</span>
<a name="l7948"><span class="linenum">7948</span></a>              size = {
<a name="l7949"><span class="linenum">7949</span></a>                  width: element.width(),
<a name="l7950"><span class="linenum">7950</span></a>                  height: element.height()
<a name="l7951"><span class="linenum">7951</span></a>              },
<a name="l7952"><span class="linenum">7952</span></a>              active = document.activeElement;
<a name="l7953"><span class="linenum">7953</span></a>  
<a name="l7954"><span class="linenum">7954</span></a>  <span class="comment">        // support: Firefox</span>
<a name="l7955"><span class="linenum">7955</span></a>  <span class="comment">        // Firefox incorrectly exposes anonymous content</span>
<a name="l7956"><span class="linenum">7956</span></a>  <span class="comment">        // https://bugzilla.mozilla.org/show_bug.cgi?id=561664</span>
<a name="l7957"><span class="linenum">7957</span></a>          try {
<a name="l7958"><span class="linenum">7958</span></a>              active.id;
<a name="l7959"><span class="linenum">7959</span></a>          } catch( e ) {
<a name="l7960"><span class="linenum">7960</span></a>              active = document.body;
<a name="l7961"><span class="linenum">7961</span></a>          }
<a name="l7962"><span class="linenum">7962</span></a>  
<a name="l7963"><span class="linenum">7963</span></a>          element.wrap( wrapper );
<a name="l7964"><span class="linenum">7964</span></a>  
<a name="l7965"><span class="linenum">7965</span></a>  <span class="comment">        // Fixes #7595 - Elements lose focus when wrapped.</span>
<a name="l7966"><span class="linenum">7966</span></a>          if ( element[ 0 ] === active || $.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( element[ 0 ], active ) ) {
<a name="l7967"><span class="linenum">7967</span></a>              $( active ).focus();
<a name="l7968"><span class="linenum">7968</span></a>          }
<a name="l7969"><span class="linenum">7969</span></a>  
<a name="l7970"><span class="linenum">7970</span></a>          wrapper = element.parent(); <span class="comment">//Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element</span>
<a name="l7971"><span class="linenum">7971</span></a>  
<a name="l7972"><span class="linenum">7972</span></a>  <span class="comment">        // transfer positioning properties to the wrapper</span>
<a name="l7973"><span class="linenum">7973</span></a>          if ( element.css( &quot;position&quot; ) === &quot;static&quot; ) {
<a name="l7974"><span class="linenum">7974</span></a>              wrapper.css({ position: &quot;relative&quot; });
<a name="l7975"><span class="linenum">7975</span></a>              element.css({ position: &quot;relative&quot; });
<a name="l7976"><span class="linenum">7976</span></a>          } else {
<a name="l7977"><span class="linenum">7977</span></a>              $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( props, {
<a name="l7978"><span class="linenum">7978</span></a>                  position: element.css( &quot;position&quot; ),
<a name="l7979"><span class="linenum">7979</span></a>                  zIndex: element.css( &quot;z-index&quot; )
<a name="l7980"><span class="linenum">7980</span></a>              });
<a name="l7981"><span class="linenum">7981</span></a>              $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>([ &quot;top&quot;, &quot;left&quot;, &quot;bottom&quot;, &quot;right&quot; ], function(i, pos) {
<a name="l7982"><span class="linenum">7982</span></a>                  props[ pos ] = element.css( pos );
<a name="l7983"><span class="linenum">7983</span></a>                  if ( isNaN( parseInt( props[ pos ], 10 ) ) ) {
<a name="l7984"><span class="linenum">7984</span></a>                      props[ pos ] = &quot;auto&quot;;
<a name="l7985"><span class="linenum">7985</span></a>                  }
<a name="l7986"><span class="linenum">7986</span></a>              });
<a name="l7987"><span class="linenum">7987</span></a>              element.css({
<a name="l7988"><span class="linenum">7988</span></a>                  position: &quot;relative&quot;,
<a name="l7989"><span class="linenum">7989</span></a>                  top: 0,
<a name="l7990"><span class="linenum">7990</span></a>                  left: 0,
<a name="l7991"><span class="linenum">7991</span></a>                  right: &quot;auto&quot;,
<a name="l7992"><span class="linenum">7992</span></a>                  bottom: &quot;auto&quot;
<a name="l7993"><span class="linenum">7993</span></a>              });
<a name="l7994"><span class="linenum">7994</span></a>          }
<a name="l7995"><span class="linenum">7995</span></a>          element.css(size);
<a name="l7996"><span class="linenum">7996</span></a>  
<a name="l7997"><span class="linenum">7997</span></a>          return wrapper.css( props ).<a class="function" onClick="logFunction('show')" href="../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l7998"><span class="linenum">7998</span></a>      },
<a name="l7999"><span class="linenum">7999</span></a>  
<a name="l8000"><span class="linenum">8000</span></a>      removeWrapper: function( element ) {
<a name="l8001"><span class="linenum">8001</span></a>          var active = document.activeElement;
<a name="l8002"><span class="linenum">8002</span></a>  
<a name="l8003"><span class="linenum">8003</span></a>          if ( element.parent().is( &quot;.ui-effects-wrapper&quot; ) ) {
<a name="l8004"><span class="linenum">8004</span></a>              element.parent().replaceWith( element );
<a name="l8005"><span class="linenum">8005</span></a>  
<a name="l8006"><span class="linenum">8006</span></a>  <span class="comment">            // Fixes #7595 - Elements lose focus when wrapped.</span>
<a name="l8007"><span class="linenum">8007</span></a>              if ( element[ 0 ] === active || $.<a class="function" onClick="logFunction('contains')" href="../../../_functions/contains.html" onMouseOver="funcPopup(event,'contains')">contains</a>( element[ 0 ], active ) ) {
<a name="l8008"><span class="linenum">8008</span></a>                  $( active ).focus();
<a name="l8009"><span class="linenum">8009</span></a>              }
<a name="l8010"><span class="linenum">8010</span></a>          }
<a name="l8011"><span class="linenum">8011</span></a>  
<a name="l8012"><span class="linenum">8012</span></a>  
<a name="l8013"><span class="linenum">8013</span></a>          return element;
<a name="l8014"><span class="linenum">8014</span></a>      },
<a name="l8015"><span class="linenum">8015</span></a>  
<a name="l8016"><span class="linenum">8016</span></a>      setTransition: function( element, list, factor, value ) {
<a name="l8017"><span class="linenum">8017</span></a>          value = value || {};
<a name="l8018"><span class="linenum">8018</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( list, function( i, x ) {
<a name="l8019"><span class="linenum">8019</span></a>              var unit = element.cssUnit( x );
<a name="l8020"><span class="linenum">8020</span></a>              if ( unit[ 0 ] &gt; 0 ) {
<a name="l8021"><span class="linenum">8021</span></a>                  value[ x ] = unit[ 0 ] * factor + unit[ 1 ];
<a name="l8022"><span class="linenum">8022</span></a>              }
<a name="l8023"><span class="linenum">8023</span></a>          });
<a name="l8024"><span class="linenum">8024</span></a>          return value;
<a name="l8025"><span class="linenum">8025</span></a>      }
<a name="l8026"><span class="linenum">8026</span></a>  });
<a name="l8027"><span class="linenum">8027</span></a>  
<a name="l8028"><span class="linenum">8028</span></a>  <span class="comment">// return an effect options object for the given parameters:</span>
<a name="l8029"><span class="linenum">8029</span></a>  function <a class="function" onClick="logFunction('_normalizeArguments')" href="../../../_functions/_normalizearguments.html" onMouseOver="funcPopup(event,'_normalizearguments')">_normalizeArguments</a>( effect, options, speed, callback ) {
<a name="l8030"><span class="linenum">8030</span></a>  
<a name="l8031"><span class="linenum">8031</span></a>  <span class="comment">    // allow passing all options as the first parameter</span>
<a name="l8032"><span class="linenum">8032</span></a>      if ( $.isPlainObject( effect ) ) {
<a name="l8033"><span class="linenum">8033</span></a>          options = effect;
<a name="l8034"><span class="linenum">8034</span></a>          effect = effect.effect;
<a name="l8035"><span class="linenum">8035</span></a>      }
<a name="l8036"><span class="linenum">8036</span></a>  
<a name="l8037"><span class="linenum">8037</span></a>  <span class="comment">    // convert to an object</span>
<a name="l8038"><span class="linenum">8038</span></a>      effect = { effect: effect };
<a name="l8039"><span class="linenum">8039</span></a>  
<a name="l8040"><span class="linenum">8040</span></a>  <span class="comment">    // catch (effect, null, ...)</span>
<a name="l8041"><span class="linenum">8041</span></a>      if ( options == null ) {
<a name="l8042"><span class="linenum">8042</span></a>          options = {};
<a name="l8043"><span class="linenum">8043</span></a>      }
<a name="l8044"><span class="linenum">8044</span></a>  
<a name="l8045"><span class="linenum">8045</span></a>  <span class="comment">    // catch (effect, callback)</span>
<a name="l8046"><span class="linenum">8046</span></a>      if ( $.isFunction( options ) ) {
<a name="l8047"><span class="linenum">8047</span></a>          callback = options;
<a name="l8048"><span class="linenum">8048</span></a>          speed = null;
<a name="l8049"><span class="linenum">8049</span></a>          options = {};
<a name="l8050"><span class="linenum">8050</span></a>      }
<a name="l8051"><span class="linenum">8051</span></a>  
<a name="l8052"><span class="linenum">8052</span></a>  <span class="comment">    // catch (effect, speed, ?)</span>
<a name="l8053"><span class="linenum">8053</span></a>      if ( typeof options === &quot;number&quot; || $.fx.speeds[ options ] ) {
<a name="l8054"><span class="linenum">8054</span></a>          callback = speed;
<a name="l8055"><span class="linenum">8055</span></a>          speed = options;
<a name="l8056"><span class="linenum">8056</span></a>          options = {};
<a name="l8057"><span class="linenum">8057</span></a>      }
<a name="l8058"><span class="linenum">8058</span></a>  
<a name="l8059"><span class="linenum">8059</span></a>  <span class="comment">    // catch (effect, options, callback)</span>
<a name="l8060"><span class="linenum">8060</span></a>      if ( $.isFunction( speed ) ) {
<a name="l8061"><span class="linenum">8061</span></a>          callback = speed;
<a name="l8062"><span class="linenum">8062</span></a>          speed = null;
<a name="l8063"><span class="linenum">8063</span></a>      }
<a name="l8064"><span class="linenum">8064</span></a>  
<a name="l8065"><span class="linenum">8065</span></a>  <span class="comment">    // add options to effect</span>
<a name="l8066"><span class="linenum">8066</span></a>      if ( options ) {
<a name="l8067"><span class="linenum">8067</span></a>          $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( effect, options );
<a name="l8068"><span class="linenum">8068</span></a>      }
<a name="l8069"><span class="linenum">8069</span></a>  
<a name="l8070"><span class="linenum">8070</span></a>      speed = speed || options.duration;
<a name="l8071"><span class="linenum">8071</span></a>      effect.duration = $.fx.off ? 0 :
<a name="l8072"><span class="linenum">8072</span></a>          typeof speed === &quot;number&quot; ? speed :
<a name="l8073"><span class="linenum">8073</span></a>          speed in $.fx.speeds ? $.fx.speeds[ speed ] :
<a name="l8074"><span class="linenum">8074</span></a>          $.fx.speeds._default;
<a name="l8075"><span class="linenum">8075</span></a>  
<a name="l8076"><span class="linenum">8076</span></a>      effect.complete = callback || options.complete;
<a name="l8077"><span class="linenum">8077</span></a>  
<a name="l8078"><span class="linenum">8078</span></a>      return effect;
<a name="l8079"><span class="linenum">8079</span></a>  }
<a name="l8080"><span class="linenum">8080</span></a>  
<a name="l8081"><span class="linenum">8081</span></a>  function <a class="function" onClick="logFunction('standardAnimationOption')" href="../../../_functions/standardanimationoption.html" onMouseOver="funcPopup(event,'standardanimationoption')">standardAnimationOption</a>( option ) {
<a name="l8082"><span class="linenum">8082</span></a>  <span class="comment">    // Valid standard speeds (nothing, number, named speed)</span>
<a name="l8083"><span class="linenum">8083</span></a>      if ( !option || typeof option === &quot;number&quot; || $.fx.speeds[ option ] ) {
<a name="l8084"><span class="linenum">8084</span></a>          return true;
<a name="l8085"><span class="linenum">8085</span></a>      }
<a name="l8086"><span class="linenum">8086</span></a>  
<a name="l8087"><span class="linenum">8087</span></a>  <span class="comment">    // Invalid strings - treat as &quot;normal&quot; speed</span>
<a name="l8088"><span class="linenum">8088</span></a>      if ( typeof option === &quot;string&quot; &amp;&amp; !$.effects.effect[ option ] ) {
<a name="l8089"><span class="linenum">8089</span></a>          return true;
<a name="l8090"><span class="linenum">8090</span></a>      }
<a name="l8091"><span class="linenum">8091</span></a>  
<a name="l8092"><span class="linenum">8092</span></a>  <span class="comment">    // Complete callback</span>
<a name="l8093"><span class="linenum">8093</span></a>      if ( $.isFunction( option ) ) {
<a name="l8094"><span class="linenum">8094</span></a>          return true;
<a name="l8095"><span class="linenum">8095</span></a>      }
<a name="l8096"><span class="linenum">8096</span></a>  
<a name="l8097"><span class="linenum">8097</span></a>  <span class="comment">    // Options hash (but not naming an effect)</span>
<a name="l8098"><span class="linenum">8098</span></a>      if ( typeof option === &quot;object&quot; &amp;&amp; !option.effect ) {
<a name="l8099"><span class="linenum">8099</span></a>          return true;
<a name="l8100"><span class="linenum">8100</span></a>      }
<a name="l8101"><span class="linenum">8101</span></a>  
<a name="l8102"><span class="linenum">8102</span></a>  <span class="comment">    // Didn't match any standard API</span>
<a name="l8103"><span class="linenum">8103</span></a>      return false;
<a name="l8104"><span class="linenum">8104</span></a>  }
<a name="l8105"><span class="linenum">8105</span></a>  
<a name="l8106"><span class="linenum">8106</span></a>  $.fn.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>({
<a name="l8107"><span class="linenum">8107</span></a>      effect: function( <span class="comment">/* effect, options, speed, callback */</span> ) {
<a name="l8108"><span class="linenum">8108</span></a>          var args = _normalizeArguments.apply( this, arguments ),
<a name="l8109"><span class="linenum">8109</span></a>              mode = args.mode,
<a name="l8110"><span class="linenum">8110</span></a>              queue = args.queue,
<a name="l8111"><span class="linenum">8111</span></a>              effectMethod = $.effects.effect[ args.effect ];
<a name="l8112"><span class="linenum">8112</span></a>  
<a name="l8113"><span class="linenum">8113</span></a>          if ( $.fx.off || !effectMethod ) {
<a name="l8114"><span class="linenum">8114</span></a>  <span class="comment">            // delegate to the original method (e.g., .show()) if possible</span>
<a name="l8115"><span class="linenum">8115</span></a>              if ( mode ) {
<a name="l8116"><span class="linenum">8116</span></a>                  return this[ mode ]( args.duration, args.complete );
<a name="l8117"><span class="linenum">8117</span></a>              } else {
<a name="l8118"><span class="linenum">8118</span></a>                  return this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( function() {
<a name="l8119"><span class="linenum">8119</span></a>                      if ( args.complete ) {
<a name="l8120"><span class="linenum">8120</span></a>                          args.complete.call( this );
<a name="l8121"><span class="linenum">8121</span></a>                      }
<a name="l8122"><span class="linenum">8122</span></a>                  });
<a name="l8123"><span class="linenum">8123</span></a>              }
<a name="l8124"><span class="linenum">8124</span></a>          }
<a name="l8125"><span class="linenum">8125</span></a>  
<a name="l8126"><span class="linenum">8126</span></a>  		function <a class="function" onClick="logFunction('run')" href="../../../_functions/run.html" onMouseOver="funcPopup(event,'run')">run</a>( next ) {
<a name="l8127"><span class="linenum">8127</span></a>              var elem = $( this ),
<a name="l8128"><span class="linenum">8128</span></a>                  complete = args.complete,
<a name="l8129"><span class="linenum">8129</span></a>                  mode = args.mode;
<a name="l8130"><span class="linenum">8130</span></a>  
<a name="l8131"><span class="linenum">8131</span></a>  			function <a class="function" onClick="logFunction('done')" href="../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>() {
<a name="l8132"><span class="linenum">8132</span></a>                  if ( $.isFunction( complete ) ) {
<a name="l8133"><span class="linenum">8133</span></a>                      complete.call( elem[0] );
<a name="l8134"><span class="linenum">8134</span></a>                  }
<a name="l8135"><span class="linenum">8135</span></a>                  if ( $.isFunction( next ) ) {
<a name="l8136"><span class="linenum">8136</span></a>                      <a class="phpfunction" onClick="logFunction('next')" href="../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>();
<a name="l8137"><span class="linenum">8137</span></a>                  }
<a name="l8138"><span class="linenum">8138</span></a>              }
<a name="l8139"><span class="linenum">8139</span></a>  
<a name="l8140"><span class="linenum">8140</span></a>  <span class="comment">            // If the element already has the correct final state, delegate to</span>
<a name="l8141"><span class="linenum">8141</span></a>  <span class="comment">            // the core methods so the internal tracking of &quot;olddisplay&quot; works.</span>
<a name="l8142"><span class="linenum">8142</span></a>              if ( elem.is( &quot;:hidden&quot; ) ? mode === &quot;hide&quot; : mode === &quot;show&quot; ) {
<a name="l8143"><span class="linenum">8143</span></a>                  elem[ mode ]();
<a name="l8144"><span class="linenum">8144</span></a>                  <a class="function" onClick="logFunction('done')" href="../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>();
<a name="l8145"><span class="linenum">8145</span></a>              } else {
<a name="l8146"><span class="linenum">8146</span></a>                  effectMethod.call( elem[0], args, done );
<a name="l8147"><span class="linenum">8147</span></a>              }
<a name="l8148"><span class="linenum">8148</span></a>          }
<a name="l8149"><span class="linenum">8149</span></a>  
<a name="l8150"><span class="linenum">8150</span></a>          return queue === false ? this.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( run ) : this.queue( queue || &quot;fx&quot;, run );
<a name="l8151"><span class="linenum">8151</span></a>      },
<a name="l8152"><span class="linenum">8152</span></a>  
<a name="l8153"><span class="linenum">8153</span></a>      show: (function( orig ) {
<a name="l8154"><span class="linenum">8154</span></a>          return function( option ) {
<a name="l8155"><span class="linenum">8155</span></a>              if ( <a class="function" onClick="logFunction('standardAnimationOption')" href="../../../_functions/standardanimationoption.html" onMouseOver="funcPopup(event,'standardanimationoption')">standardAnimationOption</a>( option ) ) {
<a name="l8156"><span class="linenum">8156</span></a>                  return orig.apply( this, arguments );
<a name="l8157"><span class="linenum">8157</span></a>              } else {
<a name="l8158"><span class="linenum">8158</span></a>                  var args = _normalizeArguments.apply( this, arguments );
<a name="l8159"><span class="linenum">8159</span></a>                  args.mode = &quot;show&quot;;
<a name="l8160"><span class="linenum">8160</span></a>                  return this.effect.call( this, args );
<a name="l8161"><span class="linenum">8161</span></a>              }
<a name="l8162"><span class="linenum">8162</span></a>          };
<a name="l8163"><span class="linenum">8163</span></a>      })( $.fn.show ),
<a name="l8164"><span class="linenum">8164</span></a>  
<a name="l8165"><span class="linenum">8165</span></a>      hide: (function( orig ) {
<a name="l8166"><span class="linenum">8166</span></a>          return function( option ) {
<a name="l8167"><span class="linenum">8167</span></a>              if ( <a class="function" onClick="logFunction('standardAnimationOption')" href="../../../_functions/standardanimationoption.html" onMouseOver="funcPopup(event,'standardanimationoption')">standardAnimationOption</a>( option ) ) {
<a name="l8168"><span class="linenum">8168</span></a>                  return orig.apply( this, arguments );
<a name="l8169"><span class="linenum">8169</span></a>              } else {
<a name="l8170"><span class="linenum">8170</span></a>                  var args = _normalizeArguments.apply( this, arguments );
<a name="l8171"><span class="linenum">8171</span></a>                  args.mode = &quot;hide&quot;;
<a name="l8172"><span class="linenum">8172</span></a>                  return this.effect.call( this, args );
<a name="l8173"><span class="linenum">8173</span></a>              }
<a name="l8174"><span class="linenum">8174</span></a>          };
<a name="l8175"><span class="linenum">8175</span></a>      })( $.fn.hide ),
<a name="l8176"><span class="linenum">8176</span></a>  
<a name="l8177"><span class="linenum">8177</span></a>      toggle: (function( orig ) {
<a name="l8178"><span class="linenum">8178</span></a>          return function( option ) {
<a name="l8179"><span class="linenum">8179</span></a>              if ( <a class="function" onClick="logFunction('standardAnimationOption')" href="../../../_functions/standardanimationoption.html" onMouseOver="funcPopup(event,'standardanimationoption')">standardAnimationOption</a>( option ) || typeof option === &quot;boolean&quot; ) {
<a name="l8180"><span class="linenum">8180</span></a>                  return orig.apply( this, arguments );
<a name="l8181"><span class="linenum">8181</span></a>              } else {
<a name="l8182"><span class="linenum">8182</span></a>                  var args = _normalizeArguments.apply( this, arguments );
<a name="l8183"><span class="linenum">8183</span></a>                  args.mode = &quot;toggle&quot;;
<a name="l8184"><span class="linenum">8184</span></a>                  return this.effect.call( this, args );
<a name="l8185"><span class="linenum">8185</span></a>              }
<a name="l8186"><span class="linenum">8186</span></a>          };
<a name="l8187"><span class="linenum">8187</span></a>      })( $.fn.toggle ),
<a name="l8188"><span class="linenum">8188</span></a>  
<a name="l8189"><span class="linenum">8189</span></a>  <span class="comment">    // helper functions</span>
<a name="l8190"><span class="linenum">8190</span></a>      cssUnit: function(key) {
<a name="l8191"><span class="linenum">8191</span></a>          var style = this.css( key ),
<a name="l8192"><span class="linenum">8192</span></a>              val = [];
<a name="l8193"><span class="linenum">8193</span></a>  
<a name="l8194"><span class="linenum">8194</span></a>          $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( [ &quot;em&quot;, &quot;px&quot;, &quot;%&quot;, &quot;pt&quot; ], function( i, unit ) {
<a name="l8195"><span class="linenum">8195</span></a>              if ( style.indexOf( unit ) &gt; 0 ) {
<a name="l8196"><span class="linenum">8196</span></a>                  val = [ parseFloat( style ), unit ];
<a name="l8197"><span class="linenum">8197</span></a>              }
<a name="l8198"><span class="linenum">8198</span></a>          });
<a name="l8199"><span class="linenum">8199</span></a>          return val;
<a name="l8200"><span class="linenum">8200</span></a>      }
<a name="l8201"><span class="linenum">8201</span></a>  });
<a name="l8202"><span class="linenum">8202</span></a>  
<a name="l8203"><span class="linenum">8203</span></a>  })();
<a name="l8204"><span class="linenum">8204</span></a>  
<a name="l8205"><span class="linenum">8205</span></a>  <span class="comment">/******************************************************************************/</span>
<a name="l8206"><span class="linenum">8206</span></a>  <span class="comment">/*********************************** EASING ***********************************/</span>
<a name="l8207"><span class="linenum">8207</span></a>  <span class="comment">/******************************************************************************/</span>
<a name="l8208"><span class="linenum">8208</span></a>  
<a name="l8209"><span class="linenum">8209</span></a>  (function() {
<a name="l8210"><span class="linenum">8210</span></a>  
<a name="l8211"><span class="linenum">8211</span></a>  <span class="comment">// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)</span>
<a name="l8212"><span class="linenum">8212</span></a>  
<a name="l8213"><span class="linenum">8213</span></a>  var baseEasings = {};
<a name="l8214"><span class="linenum">8214</span></a>  
<a name="l8215"><span class="linenum">8215</span></a>  $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( [ &quot;Quad&quot;, &quot;Cubic&quot;, &quot;Quart&quot;, &quot;Quint&quot;, &quot;Expo&quot; ], function( i, name ) {
<a name="l8216"><span class="linenum">8216</span></a>      baseEasings[ name ] = function( p ) {
<a name="l8217"><span class="linenum">8217</span></a>          return Math.<a class="phpfunction" onClick="logFunction('pow')" href="../../../_functions/pow.html" onMouseOver="phpfuncPopup(event,'pow')">pow</a>( p, i + 2 );
<a name="l8218"><span class="linenum">8218</span></a>      };
<a name="l8219"><span class="linenum">8219</span></a>  });
<a name="l8220"><span class="linenum">8220</span></a>  
<a name="l8221"><span class="linenum">8221</span></a>  $.<a class="function" onClick="logFunction('extend')" href="../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( baseEasings, {
<a name="l8222"><span class="linenum">8222</span></a>      Sine: function ( p ) {
<a name="l8223"><span class="linenum">8223</span></a>          return 1 - Math.<a class="phpfunction" onClick="logFunction('cos')" href="../../../_functions/cos.html" onMouseOver="phpfuncPopup(event,'cos')">cos</a>( p * Math.PI / 2 );
<a name="l8224"><span class="linenum">8224</span></a>      },
<a name="l8225"><span class="linenum">8225</span></a>      Circ: function ( p ) {
<a name="l8226"><span class="linenum">8226</span></a>          return 1 - Math.<a class="phpfunction" onClick="logFunction('sqrt')" href="../../../_functions/sqrt.html" onMouseOver="phpfuncPopup(event,'sqrt')">sqrt</a>( 1 - p * p );
<a name="l8227"><span class="linenum">8227</span></a>      },
<a name="l8228"><span class="linenum">8228</span></a>      Elastic: function( p ) {
<a name="l8229"><span class="linenum">8229</span></a>          return p === 0 || p === 1 ? p :
<a name="l8230"><span class="linenum">8230</span></a>              -Math.<a class="phpfunction" onClick="logFunction('pow')" href="../../../_functions/pow.html" onMouseOver="phpfuncPopup(event,'pow')">pow</a>( 2, 8 * (p - 1) ) * Math.<a class="phpfunction" onClick="logFunction('sin')" href="../../../_functions/sin.html" onMouseOver="phpfuncPopup(event,'sin')">sin</a>( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );
<a name="l8231"><span class="linenum">8231</span></a>      },
<a name="l8232"><span class="linenum">8232</span></a>      Back: function( p ) {
<a name="l8233"><span class="linenum">8233</span></a>          return p * p * ( 3 * p - 2 );
<a name="l8234"><span class="linenum">8234</span></a>      },
<a name="l8235"><span class="linenum">8235</span></a>      Bounce: function ( p ) {
<a name="l8236"><span class="linenum">8236</span></a>          var pow2,
<a name="l8237"><span class="linenum">8237</span></a>              bounce = 4;
<a name="l8238"><span class="linenum">8238</span></a>  
<a name="l8239"><span class="linenum">8239</span></a>          while ( p &lt; ( ( pow2 = Math.<a class="phpfunction" onClick="logFunction('pow')" href="../../../_functions/pow.html" onMouseOver="phpfuncPopup(event,'pow')">pow</a>( 2, --bounce ) ) - 1 ) / 11 ) {}
<a name="l8240"><span class="linenum">8240</span></a>          return 1 / Math.<a class="phpfunction" onClick="logFunction('pow')" href="../../../_functions/pow.html" onMouseOver="phpfuncPopup(event,'pow')">pow</a>( 4, 3 - bounce ) - 7.5625 * Math.<a class="phpfunction" onClick="logFunction('pow')" href="../../../_functions/pow.html" onMouseOver="phpfuncPopup(event,'pow')">pow</a>( ( pow2 * 3 - 2 ) / 22 - p, 2 );
<a name="l8241"><span class="linenum">8241</span></a>      }
<a name="l8242"><span class="linenum">8242</span></a>  });
<a name="l8243"><span class="linenum">8243</span></a>  
<a name="l8244"><span class="linenum">8244</span></a>  $.<a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( baseEasings, function( name, easeIn ) {
<a name="l8245"><span class="linenum">8245</span></a>      $.easing[ &quot;easeIn&quot; + name ] = easeIn;
<a name="l8246"><span class="linenum">8246</span></a>      $.easing[ &quot;easeOut&quot; + name ] = function( p ) {
<a name="l8247"><span class="linenum">8247</span></a>          return 1 - easeIn( 1 - p );
<a name="l8248"><span class="linenum">8248</span></a>      };
<a name="l8249"><span class="linenum">8249</span></a>      $.easing[ &quot;easeInOut&quot; + name ] = function( p ) {
<a name="l8250"><span class="linenum">8250</span></a>          return p &lt; 0.5 ?
<a name="l8251"><span class="linenum">8251</span></a>              easeIn( p * 2 ) / 2 :
<a name="l8252"><span class="linenum">8252</span></a>              1 - easeIn( p * -2 + 2 ) / 2;
<a name="l8253"><span class="linenum">8253</span></a>      };
<a name="l8254"><span class="linenum">8254</span></a>  });
<a name="l8255"><span class="linenum">8255</span></a>  
<a name="l8256"><span class="linenum">8256</span></a>  })();
<a name="l8257"><span class="linenum">8257</span></a>  
<a name="l8258"><span class="linenum">8258</span></a>  })(jQuery);
<a name="l8259"><span class="linenum">8259</span></a>  (function( $, undefined ) {
<a name="l8260"><span class="linenum">8260</span></a>  
<a name="l8261"><span class="linenum">8261</span></a>  $.effects.effect.highlight = function( o, done ) {
<a name="l8262"><span class="linenum">8262</span></a>      var elem = $( this ),
<a name="l8263"><span class="linenum">8263</span></a>          props = [ &quot;backgroundImage&quot;, &quot;backgroundColor&quot;, &quot;opacity&quot; ],
<a name="l8264"><span class="linenum">8264</span></a>          mode = $.effects.setMode( elem, o.mode || &quot;show&quot; ),
<a name="l8265"><span class="linenum">8265</span></a>          animation = {
<a name="l8266"><span class="linenum">8266</span></a>              backgroundColor: elem.css( &quot;backgroundColor&quot; )
<a name="l8267"><span class="linenum">8267</span></a>          };
<a name="l8268"><span class="linenum">8268</span></a>  
<a name="l8269"><span class="linenum">8269</span></a>      if (mode === &quot;hide&quot;) {
<a name="l8270"><span class="linenum">8270</span></a>          animation.opacity = 0;
<a name="l8271"><span class="linenum">8271</span></a>      }
<a name="l8272"><span class="linenum">8272</span></a>  
<a name="l8273"><span class="linenum">8273</span></a>      $.effects.<a class="function" onClick="logFunction('save')" href="../../../_functions/save.html" onMouseOver="funcPopup(event,'save')">save</a>( elem, props );
<a name="l8274"><span class="linenum">8274</span></a>  
<a name="l8275"><span class="linenum">8275</span></a>      elem
<a name="l8276"><span class="linenum">8276</span></a>          .<a class="function" onClick="logFunction('show')" href="../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>()
<a name="l8277"><span class="linenum">8277</span></a>          .css({
<a name="l8278"><span class="linenum">8278</span></a>              backgroundImage: &quot;none&quot;,
<a name="l8279"><span class="linenum">8279</span></a>              backgroundColor: o.color || &quot;#ffff99&quot;
<a name="l8280"><span class="linenum">8280</span></a>          })
<a name="l8281"><span class="linenum">8281</span></a>          .<a class="function" onClick="logFunction('animate')" href="../../../_functions/animate.html" onMouseOver="funcPopup(event,'animate')">animate</a>( animation, {
<a name="l8282"><span class="linenum">8282</span></a>              queue: false,
<a name="l8283"><span class="linenum">8283</span></a>              duration: o.duration,
<a name="l8284"><span class="linenum">8284</span></a>              easing: o.easing,
<a name="l8285"><span class="linenum">8285</span></a>              complete: function() {
<a name="l8286"><span class="linenum">8286</span></a>                  if ( mode === &quot;hide&quot; ) {
<a name="l8287"><span class="linenum">8287</span></a>                      elem.hide();
<a name="l8288"><span class="linenum">8288</span></a>                  }
<a name="l8289"><span class="linenum">8289</span></a>                  $.effects.restore( elem, props );
<a name="l8290"><span class="linenum">8290</span></a>                  <a class="function" onClick="logFunction('done')" href="../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>();
<a name="l8291"><span class="linenum">8291</span></a>              }
<a name="l8292"><span class="linenum">8292</span></a>          });
<a name="l8293"><span class="linenum">8293</span></a>  };
<a name="l8294"><span class="linenum">8294</span></a>  
<a name="l8295"><span class="linenum">8295</span></a>  })(jQuery);
<a name="l8296"><span class="linenum">8296</span></a>  (function( $, undefined ) {
<a name="l8297"><span class="linenum">8297</span></a>  
<a name="l8298"><span class="linenum">8298</span></a>  $.effects.effect.transfer = function( o, done ) {
<a name="l8299"><span class="linenum">8299</span></a>      var elem = $( this ),
<a name="l8300"><span class="linenum">8300</span></a>          target = $( o.to ),
<a name="l8301"><span class="linenum">8301</span></a>          targetFixed = target.css( &quot;position&quot; ) === &quot;fixed&quot;,
<a name="l8302"><span class="linenum">8302</span></a>          body = $(&quot;body&quot;),
<a name="l8303"><span class="linenum">8303</span></a>          fixTop = targetFixed ? body.scrollTop() : 0,
<a name="l8304"><span class="linenum">8304</span></a>          fixLeft = targetFixed ? body.scrollLeft() : 0,
<a name="l8305"><span class="linenum">8305</span></a>          endPosition = target.offset(),
<a name="l8306"><span class="linenum">8306</span></a>          animation = {
<a name="l8307"><span class="linenum">8307</span></a>              top: endPosition.top - fixTop ,
<a name="l8308"><span class="linenum">8308</span></a>              left: endPosition.left - fixLeft ,
<a name="l8309"><span class="linenum">8309</span></a>              height: target.innerHeight(),
<a name="l8310"><span class="linenum">8310</span></a>              width: target.innerWidth()
<a name="l8311"><span class="linenum">8311</span></a>          },
<a name="l8312"><span class="linenum">8312</span></a>          startPosition = elem.offset(),
<a name="l8313"><span class="linenum">8313</span></a>          transfer = $( &quot;&lt;div class='ui-effects-transfer'&gt;&lt;/div&gt;&quot; )
<a name="l8314"><span class="linenum">8314</span></a>              .appendTo( document.body )
<a name="l8315"><span class="linenum">8315</span></a>              .addClass( o.className )
<a name="l8316"><span class="linenum">8316</span></a>              .css({
<a name="l8317"><span class="linenum">8317</span></a>                  top: startPosition.top - fixTop ,
<a name="l8318"><span class="linenum">8318</span></a>                  left: startPosition.left - fixLeft ,
<a name="l8319"><span class="linenum">8319</span></a>                  height: elem.innerHeight(),
<a name="l8320"><span class="linenum">8320</span></a>                  width: elem.innerWidth(),
<a name="l8321"><span class="linenum">8321</span></a>                  position: targetFixed ? &quot;fixed&quot; : &quot;absolute&quot;
<a name="l8322"><span class="linenum">8322</span></a>              })
<a name="l8323"><span class="linenum">8323</span></a>              .<a class="function" onClick="logFunction('animate')" href="../../../_functions/animate.html" onMouseOver="funcPopup(event,'animate')">animate</a>( animation, o.duration, o.easing, function() {
<a name="l8324"><span class="linenum">8324</span></a>                  transfer.<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l8325"><span class="linenum">8325</span></a>                  <a class="function" onClick="logFunction('done')" href="../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>();
<a name="l8326"><span class="linenum">8326</span></a>              });
<a name="l8327"><span class="linenum">8327</span></a>  };
<a name="l8328"><span class="linenum">8328</span></a>  
<a name="l8329"><span class="linenum">8329</span></a>  })(jQuery);
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'type': ['type', 'Template function: display type of item ', [['inc/items/model','_itemlight.class.php',1283]], 116],
'clamp': ['clamp', '', [['rsc/js/jquery','jquery.ui.b2evo.js',7136],['rsc/js/jquery','jquery.ui.all.js',12909]], 8],
'destroy': ['destroy', '', [['rsc/js/jquery','jquery.jcrop.js',1426]], 28],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'extendremove': ['extendremove', '', [['rsc/js/jquery','jquery.ui.b2evo.js',6313],['rsc/js/jquery','jquery.ui.all.js',8786]], 4],
'standardanimationoption': ['standardanimationoption', '', [['rsc/js/jquery','jquery.ui.b2evo.js',8081],['rsc/js/jquery','jquery.ui.all.js',13854]], 6],
'focusable': ['focusable', '', [['rsc/js/jquery','jquery.ui.b2evo.js',123],['rsc/js/jquery','jquery.ui.all.js',123]], 0],
'isemptyobject': ['isemptyobject', '', [['rsc/js/jquery','jquery.tablesorter.js',160]], 26],
'setdate': ['setdate', 'Set the date at which this message was created. ', [['inc/_ext/swift/classes/Swift/Mime','SimpleMessage.php',93],['inc/_ext/swift/classes/Swift/Mime','Message.php',41]], 17],
'_gethandle': ['_gethandle', 'Get a file handle on the cache item. ', [['inc/_ext/swift/classes/Swift/KeyCache','DiskKeyCache.php',284]], 11],
'bindhover': ['bindhover', '', [['rsc/js/jquery','jquery.ui.b2evo.js',6287],['rsc/js/jquery','jquery.ui.all.js',8760]], 4],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'hidden': ['hidden', 'Builds an hidden input tag, overwriting any previous hidden values (except for "foo[]"). ', [['inc/_core/ui/forms','_form.class.php',3046]], 689],
'stop': ['stop', 'Stops this Spool mechanism. ', [['inc/_ext/swift/classes/Swift','Spool.php',24],['inc/_core/model','_timer.class.php',77],['inc/_ext/swift/classes/Swift','Transport.php',32],['inc/_ext/swift/classes/Swift','FileSpool.php',65],['inc/_ext/swift/classes/Swift/Transport','NullTransport.php',47],['inc/_ext/swift/classes/Swift/Transport','AbstractSmtpTransport.php',203],['inc/_ext/swift/classes/Swift','MemorySpool.php',38],['inc/_ext/swift/classes/Swift/Transport','SpoolTransport.php',75],['inc/_ext/swift/classes/Swift/Transport','MailTransport.php',64],['inc/_ext/swift/classes/Swift/Transport','LoadBalancedTransport.php',80]], 138],
'_init': ['_init', '', [['inc/_ext/phpsvnclient/ext/Diff/Diff','ThreeWay.php',267],['inc/_ext/phpsvnclient/ext/Diff','Diff3.php',267]], 12],
'settimeout': ['settimeout', 'Set the connection timeout. ', [['inc/_ext/swift/classes/Swift/Transport','EsmtpTransport.php',110],['inc/_ext/swift/classes/Swift/Plugins','PopBeforeSmtpPlugin.php',99]], 175],
'bind': ['bind', 'Attach $is to this stream. ', [['inc/_ext/swift/classes/Swift/ByteStream','AbstractFilterableInputStream.php',108],['inc/_ext/swift/classes/Swift/Signers','DKIMSigner.php',235],['inc/_ext/swift/classes/Swift/ByteStream','ArrayByteStream.php',123],['inc/_ext/swift/classes/Swift/Plugins','BandwidthMonitorPlugin.php',97],['inc/_ext/swift/classes/Swift','InputByteStream.php',49],['inc/_ext/swift/classes/Swift/Signers','DomainKeySigner.php',191],['inc/_ext/swift/classes/Swift/KeyCache','SimpleKeyCacheInputStream.php',78]], 543],
'show': ['show', '', [['rsc/js/jquery','jquery.ui.all.js',12111],['rsc/js/jquery','jquery.jcrop.js',1008]], 283],
'save': ['save', 'Save the file to the specified path ', [['htsrv','quick_upload.php',26],['htsrv','quick_upload.php',140]], 48],
'replace': ['replace', '', [['plugins/wikitables_plugin','_string_utils.inc.php',303],['plugins/wikitables_plugin','_string_utils.inc.php',333],['plugins/wikitables_plugin','_string_utils.inc.php',357],['plugins/wikitables_plugin','_string_utils.inc.php',453]], 618],
'getdimensions': ['getdimensions', '', [['rsc/js/jquery','jquery.ui.b2evo.js',1009],['rsc/js/jquery','jquery.ui.all.js',1009]], 2],
'results': ['results', 'Constructor ', [['inc/_core/ui/results','_results.class.php',248]], 70],
'trigger': ['trigger', '', [['rsc/js/bootstrap','typeahead.bundle.js',773],['rsc/js/colorbox','jquery.colorbox.js',158]], 373],
'extend': ['extend', '', [['rsc/js/videojs','video.js',9920]], 740],
'getelementstyles': ['getelementstyles', '', [['rsc/js/jquery','jquery.ui.b2evo.js',7680],['rsc/js/jquery','jquery.ui.all.js',13453]], 4],
'find': ['find', '', [['rsc/js/flowplayer','flowplayer.js',1498]], 701],
'run': ['run', '', [['rsc/js/jquery','jquery.ui.b2evo.js',8126],['rsc/js/jquery','jquery.ui.all.js',13899]], 26],
'getname': ['getname', '', [['htsrv','quick_upload.php',117],['htsrv','quick_upload.php',153],['inc/_ext/swift/classes/Swift/Mime/ContentEncoder','RawContentEncoder.php',49],['inc/_ext/swift/classes/Swift/Mime/ContentEncoder','Base64ContentEncoder.php',59],['inc/_ext/swift/classes/Swift/Mime/HeaderEncoder','QpHeaderEncoder.php',40],['inc/_ext/swift/classes/Swift/Mime/ContentEncoder','PlainContentEncoder.php',92],['inc/_ext/swift/classes/Swift/Mime/ContentEncoder','NativeQpContentEncoder.php',69],['inc/_ext/swift/classes/Swift/Mime/ContentEncoder','QpContentEncoderProxy.php',67],['inc/_ext/swift/classes/Swift/Mime','HeaderEncoder.php',20],['inc/_ext/swift/classes/Swift/Mime/HeaderEncoder','Base64HeaderEncoder.php',20],['inc/_ext/swift/classes/Swift/Mime/ContentEncoder','QpContentEncoder.php',115],['inc/_ext/swift/classes/Swift/Mime','ContentEncoder.php',30]], 13],
'parse': ['parse', '', [['inc/_ext/phpsvnclient','xml_parser.php',177],['inc/_ext/mime_parser','mime_parser.php',1598],['plugins/markdown_plugin','_parsedown.inc.php',69]], 61],
'visible': ['visible', '', [['rsc/js/jquery','jquery.ui.b2evo.js',144],['rsc/js/jquery','jquery.ui.all.js',144]], 17],
'from': ['from', '', [['inc/_core/model/db','_sql.class.php',221]], 513],
'hue2rgb': ['hue2rgb', '', [['rsc/js/jquery','jquery.ui.b2evo.js',7412],['rsc/js/jquery','jquery.ui.all.js',13185]], 6],
'_normalizearguments': ['_normalizearguments', '', [['rsc/js/jquery','jquery.ui.b2evo.js',8029],['rsc/js/jquery','jquery.ui.all.js',13802]], 0],
'animate': ['animate', '', [['rsc/js/jquery','jquery.scrollto.js',154]], 119],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'isoveraxis': ['isoveraxis', '', [['rsc/js/jquery','jquery.ui.b2evo.js',2419],['rsc/js/jquery','jquery.ui.all.js',2419],['rsc/js/jquery','jquery.ui.all.js',4017]], 9],
'position': ['position', '', [['rsc/js/jquery','jquery.ui.all.js',12599]], 67],
'remove': ['remove', 'Remove the header with the given $name if it\'s set. ', [['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',123],['inc/links/model','_linkcache.class.php',137],['inc/files/model','_filelist.class.php',1044],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',226]], 433],
'tostring': ['tostring', 'Get this message as a complete string. ', [['inc/_ext/swift/classes/Swift/Mime','SimpleMessage.php',571],['inc/_ext/swift/classes/Swift/Mime','SimpleMimeEntity.php',463],['inc/_ext/swift/classes/Swift/Mime','MimeEntity.php',104],['inc/_ext/swift/classes/Swift/Mime/Headers','AbstractHeader.php',200],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',165],['inc/_ext/swift/classes/Swift/Mime','Header.php',89],['inc/_ext/swift/classes/Swift','SignedMessage.php',69],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',295]], 91],
'widget': ['widget', 'Constructor ', [['inc/_core/ui','_uiwidget.class.php',54]], 98],
'triggerhandler': ['triggerhandler', 'Trigger the relevant event handler The handlers are passed the original event, the element that was swiped, and in the case of the catch all handler, the direction that was swiped, "left", "right", "up", or "down" ', [['rsc/js/jquery','jquery.touchswipe.js',855]], 16],
'append': ['append', '', [['inc/_core/model/db','_sql.class.php',348]], 234],
'createelement': ['createelement', '', [['rsc/js/videojs','video.js',10648]], 208],
'refresh': ['refresh', '', [['rsc/js/jquery','jquery.jcrop.js',957]], 30],
'resolve': ['resolve', '', [['inc/_ext/phpsvnclient','http.php',292]], 16],
'getoffsets': ['getoffsets', '', [['rsc/js/jquery','jquery.ui.b2evo.js',998],['rsc/js/jquery','jquery.ui.all.js',998]], 4],
'parsecss': ['parsecss', '', [['rsc/js/jquery','jquery.ui.b2evo.js',1005],['rsc/js/jquery','jquery.ui.all.js',1005]], 8],
'done': ['done', '', [['rsc/js/jquery','jquery.ui.b2evo.js',8131],['rsc/js/bootstrap','typeahead.bundle.js',287],['rsc/js/jquery','jquery.ui.all.js',13904],['rsc/js','jquery.js',9189],['rsc/js/jquery','jquery.jcrop.js',1063]], 58],
'close': ['close', '', [['inc/_ext/phpsvnclient','http.php',612],['rsc/js/flowplayer','flowplayer.js',2516]], 77],
'styledifference': ['styledifference', '', [['rsc/js/jquery','jquery.ui.b2evo.js',7708],['rsc/js/jquery','jquery.ui.all.js',13481]], 2],
'handlerproxy': ['handlerproxy', '', [['rsc/js/jquery','jquery.ui.b2evo.js',692],['rsc/js/jquery','jquery.ui.b2evo.js',728],['rsc/js/jquery','jquery.ui.all.js',692],['rsc/js/jquery','jquery.ui.all.js',728]], 0],
'contains': ['contains', 'Does the list contain a specific File? ', [['inc/files/model','_filelist.class.php',767]], 107],
'escape': ['escape', '', [['rsc/js/jquery','jquery.ui.b2evo.js',6537],['rsc/js/jquery','jquery.ui.all.js',9814],['inc/_core/model/db','_db.class.php',482]], 103],
'stringparse': ['stringparse', '', [['rsc/js/jquery','jquery.ui.b2evo.js',7162],['rsc/js/jquery','jquery.ui.all.js',12935]], 4],
'text': ['text', 'Builds a text (or password) input field. ', [['inc/_core/ui/forms','_form.class.php',1037]], 228],
'select': ['select', 'Set SELECT clause ', [['inc/_core/model/db','_sql.class.php',196],['inc/_core/ui/forms','_form.class.php',2189],['inc/_core/model/db','_db.class.php',454]], 475],
'isnumber': ['isnumber', '', [['rsc/js/jquery','jquery.ui.b2evo.js',2796],['rsc/js/jquery','jquery.ui.all.js',2796]], 37],
'reduce': ['reduce', '', [['rsc/js/jquery','jquery.ui.b2evo.js',186],['rsc/js/jquery','jquery.ui.all.js',186]], 4],
'datepicker': ['datepicker', '', [['rsc/js/jquery','jquery.ui.b2evo.js',4355],['rsc/js/jquery','jquery.ui.all.js',6828]], 3],
'has': ['has', 'Returns true if at least one header with the given $name exists. ', [['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',69],['inc/_ext/swift/classes/Swift','DependencyContainer.php',71],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',131]], 53],
'filter': ['filter', 'Filters $buffer and returns the changes. ', [['inc/_ext/swift/classes/Swift','StreamFilter.php',28],['inc/_ext/swift/classes/Swift/StreamFilters','StringReplacementFilter.php',56],['inc/_ext/swift/classes/Swift/StreamFilters','ByteArrayReplacementFilter.php',112]], 187],
'first': ['first', 'Returns the first page number to be displayed in the list ', [['inc/_core/ui/results','_results.class.php',1899]], 32],
'unbind': ['unbind', 'Remove an already bound stream. ', [['inc/_ext/swift/classes/Swift/ByteStream','AbstractFilterableInputStream.php',121],['inc/_ext/swift/classes/Swift/Signers','DKIMSigner.php',250],['inc/_ext/swift/classes/Swift/ByteStream','ArrayByteStream.php',136],['inc/_ext/swift/classes/Swift/Plugins','BandwidthMonitorPlugin.php',110],['inc/_ext/swift/classes/Swift','InputByteStream.php',59],['inc/_ext/swift/classes/Swift/Signers','DomainKeySigner.php',207],['inc/_ext/swift/classes/Swift/KeyCache','SimpleKeyCacheInputStream.php',85]], 183],
'num': ['num', '', [['rsc/js/jquery','jquery.ui.b2evo.js',2792],['rsc/js/jquery','jquery.ui.all.js',2792]], 6],
'floor': ['floor', '', [], 116],
'end': ['end', '', [], 64],
'cos': ['cos', '', [], 32],
'abs': ['abs', '', [], 187],
'date': ['date', '', [], 446],
'pow': ['pow', '', [], 79],
'each': ['each', '', [], 826],
'ceil': ['ceil', '', [], 96],
'sqrt': ['sqrt', '', [], 21],
'sort': ['sort', '', [], 51],
'max': ['max', '', [], 216],
'round': ['round', '', [], 213],
'getdate': ['getdate', '', [], 48],
'prev': ['prev', '', [], 64],
'min': ['min', '', [], 131],
'trim': ['trim', '', [], 398],
'next': ['next', '', [], 172],
'split': ['split', '', [], 409],
'substr': ['substr', '', [], 745],
'exec': ['exec', '', [], 149],
'sin': ['sin', '', [], 34]};
CLASS_DATA={
};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
