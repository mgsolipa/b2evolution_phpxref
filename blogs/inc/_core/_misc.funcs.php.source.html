<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /blogs/inc/_core/_misc.funcs.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Jul  5 12:18:44 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='blogs/inc/_core';
filename='_misc.funcs.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/blogs/inc/_core/</a> -> <a href="_misc.funcs.php.html">_misc.funcs.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_misc.funcs.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_misc.funcs.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements general purpose functions.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link http://sourceforge.net/projects/evocms/}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @copyright (c)2003-2014 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2006 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * Parts of this file are copyright (c)2005-2006 by PROGIDISTRI - {@link http://progidistri.com/}.</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> *</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * {@internal License choice</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * - If you have received this file as part of a package, please find the license.txt file in</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> *   the same folder or the closest folder above for complete license terms.</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> * - If you have received this file individually (e-g: from http://evocms.cvs.sourceforge.net/)</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> *   then you must choose one of the following licenses before using the file:</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> *   - GNU General Public License 2 (GPL) - http://www.opensource.org/licenses/gpl-license.php</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> *   - Mozilla Public License 1.1 (MPL) - http://www.opensource.org/licenses/mozilla1.1.php</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * }}</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * {@internal Open Source relicensing agreement:</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * Daniel HAHLER grants Francois PLANQUE the right to license</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * Daniel HAHLER's contributions to this file and the b2evolution project</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * under any OSI approved OSS license (http://www.opensource.org/licenses/).</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> *</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * PROGIDISTRI S.A.S. grants Francois PLANQUE the right to license</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * PROGIDISTRI S.A.S.'s contributions to this file and the b2evolution project</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * under any OSI approved OSS license (http://www.opensource.org/licenses/).</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * }}</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> *</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @package evocore</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> *</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @version $Id: _misc.funcs.php 6806 2014-05-29 12:01:27Z yura $</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> */</span>
<a name="l35"><span class="linenum">  35</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">/**</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * Dependencies</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> */</span>
<a name="l41"><span class="linenum">  41</span></a>  <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('antispam/model/_antispam.funcs.php');
<a name="l42"><span class="linenum">  42</span></a>  <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('tools/model/_email.funcs.php');
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">// @todo sam2kb&gt; Move core functions get_admin_skins, get_filenames, cleardir_r, rmdir_r and some other</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">// to a separate file, and split files_Module from _core_Module</span>
<a name="l46"><span class="linenum">  46</span></a>  <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('files/model/_file.funcs.php');
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">/**</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * Call a method for all modules in a row</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> *</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> * @param string the name of the method which should be called</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * @param array params</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * @return array[module_name][return value], or NULL if the method doesn't have any return value</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> */</span>
<a name="l56"><span class="linenum">  56</span></a>  function <a class="function" onClick="logFunction('modules_call_method')" href="../../../_functions/modules_call_method.html" onMouseOver="funcPopup(event,'modules_call_method')">modules_call_method</a>( <a class="var it6877" onMouseOver="hilite(6877)" onMouseOut="lolite()" onClick="logVariable('method_name')" href="../../../_variables/method_name.html">$method_name</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = NULL )
<a name="l57"><span class="linenum">  57</span></a>  {
<a name="l58"><span class="linenum">  58</span></a>      global <a class="var it5426" onMouseOver="hilite(5426)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a>;
<a name="l59"><span class="linenum">  59</span></a>  
<a name="l60"><span class="linenum">  60</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = NULL;
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>      foreach( <a class="var it5426" onMouseOver="hilite(5426)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a> as <a class="var it5427" onMouseOver="hilite(5427)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a> )
<a name="l63"><span class="linenum">  63</span></a>      {
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it4008" onMouseOver="hilite(4008)" onMouseOut="lolite()" onClick="logVariable('Module')" href="../../../_variables/Module.html">$Module</a> = &amp; <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../_variables/GLOBALS.html">$GLOBALS</a>[<a class="var it5427" onMouseOver="hilite(5427)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a>.'_Module'];
<a name="l65"><span class="linenum">  65</span></a>          if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> == NULL )
<a name="l66"><span class="linenum">  66</span></a>          {
<a name="l67"><span class="linenum">  67</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../_variables/ret.html">$ret</a> = <a class="var it4008" onMouseOver="hilite(4008)" onMouseOut="lolite()" onClick="logVariable('Module')" href="../../../_variables/Module.html">$Module</a>-&gt;{<a class="var it6877" onMouseOver="hilite(6877)" onMouseOut="lolite()" onClick="logVariable('method_name')" href="../../../_variables/method_name.html">$method_name</a>}();
<a name="l68"><span class="linenum">  68</span></a>          }
<a name="l69"><span class="linenum">  69</span></a>          else
<a name="l70"><span class="linenum">  70</span></a>          {
<a name="l71"><span class="linenum">  71</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../_variables/ret.html">$ret</a> = <a class="var it4008" onMouseOver="hilite(4008)" onMouseOut="lolite()" onClick="logVariable('Module')" href="../../../_variables/Module.html">$Module</a>-&gt;{<a class="var it6877" onMouseOver="hilite(6877)" onMouseOut="lolite()" onClick="logVariable('method_name')" href="../../../_variables/method_name.html">$method_name</a>}( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l72"><span class="linenum">  72</span></a>          }
<a name="l73"><span class="linenum">  73</span></a>          if( isset( <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../_variables/ret.html">$ret</a> ) )
<a name="l74"><span class="linenum">  74</span></a>          {
<a name="l75"><span class="linenum">  75</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[<a class="var it5427" onMouseOver="hilite(5427)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a>] = <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../_variables/ret.html">$ret</a>;
<a name="l76"><span class="linenum">  76</span></a>          }
<a name="l77"><span class="linenum">  77</span></a>      }
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>      return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l80"><span class="linenum">  80</span></a>  }
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">/**</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> * @deprecated kept only for plugin backward compatibility (core is being modified to call getters directly)</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> * To be removed, maybe in b2evo v5.</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> *</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> * @return DataObjectCache</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> */</span>
<a name="l89"><span class="linenum">  89</span></a>  function &amp; get_Cache( <a class="var it6878" onMouseOver="hilite(6878)" onMouseOut="lolite()" onClick="logVariable('objectName')" href="../../../_variables/objectName.html">$objectName</a> )
<a name="l90"><span class="linenum">  90</span></a>  {
<a name="l91"><span class="linenum">  91</span></a>      global <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l92"><span class="linenum">  92</span></a>      global $<a class="var it6878" onMouseOver="hilite(6878)" onMouseOut="lolite()" onClick="logVariable('objectName')" href="../../../_variables/objectName.html">$objectName</a>;
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      if( isset( $<a class="var it6878" onMouseOver="hilite(6878)" onMouseOut="lolite()" onClick="logVariable('objectName')" href="../../../_variables/objectName.html">$objectName</a> ) )
<a name="l95"><span class="linenum">  95</span></a>      {    // Cache already exists:
<a name="l96"><span class="linenum">  96</span></a>          return $<a class="var it6878" onMouseOver="hilite(6878)" onMouseOut="lolite()" onClick="logVariable('objectName')" href="../../../_variables/objectName.html">$objectName</a>;
<a name="l97"><span class="linenum">  97</span></a>      }
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      <a class="var it6879" onMouseOver="hilite(6879)" onMouseOut="lolite()" onClick="logVariable('func_name')" href="../../../_variables/func_name.html">$func_name</a> = 'get_'.<a class="var it6878" onMouseOver="hilite(6878)" onMouseOut="lolite()" onClick="logVariable('objectName')" href="../../../_variables/objectName.html">$objectName</a>;
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it6879" onMouseOver="hilite(6879)" onMouseOut="lolite()" onClick="logVariable('func_name')" href="../../../_variables/func_name.html">$func_name</a>) )
<a name="l102"><span class="linenum"> 102</span></a>      {
<a name="l103"><span class="linenum"> 103</span></a>          return <a class="var it6879" onMouseOver="hilite(6879)" onMouseOut="lolite()" onClick="logVariable('func_name')" href="../../../_variables/func_name.html">$func_name</a>();
<a name="l104"><span class="linenum"> 104</span></a>      }
<a name="l105"><span class="linenum"> 105</span></a>      else
<a name="l106"><span class="linenum"> 106</span></a>      {
<a name="l107"><span class="linenum"> 107</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'getCache(): Unknown Cache type get function:'.<a class="var it6879" onMouseOver="hilite(6879)" onMouseOut="lolite()" onClick="logVariable('func_name')" href="../../../_variables/func_name.html">$func_name</a>.'()' );
<a name="l108"><span class="linenum"> 108</span></a>      }
<a name="l109"><span class="linenum"> 109</span></a>  }
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">/**</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment"> * Load functions file</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment"> */</span>
<a name="l115"><span class="linenum"> 115</span></a>  function <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( <a class="var it6880" onMouseOver="hilite(6880)" onMouseOut="lolite()" onClick="logVariable('funcs_path')" href="../../../_variables/funcs_path.html">$funcs_path</a> )
<a name="l116"><span class="linenum"> 116</span></a>  {
<a name="l117"><span class="linenum"> 117</span></a>      global <a class="var it246" onMouseOver="hilite(246)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../../_variables/inc_path.html">$inc_path</a>;
<a name="l118"><span class="linenum"> 118</span></a>      require_once <a class="var it246" onMouseOver="hilite(246)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../../_variables/inc_path.html">$inc_path</a>.<a class="var it6880" onMouseOver="hilite(6880)" onMouseOut="lolite()" onClick="logVariable('funcs_path')" href="../../../_variables/funcs_path.html">$funcs_path</a>;
<a name="l119"><span class="linenum"> 119</span></a>  }
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment"> * Shutdown function: save HIT and update session!</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment"> *</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment"> * This is registered in _main.inc.php with register_shutdown_function()</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment"> * This is called by PHP at the end of the script.</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment"> *</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment"> * NOTE: before PHP 4.1 nothing can be echoed here any more, but the minimum PHP requirement for b2evo is PHP 4.3</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment"> */</span>
<a name="l130"><span class="linenum"> 130</span></a>  function <a class="function" onClick="logFunction('shutdown')" href="../../../_functions/shutdown.html" onMouseOver="funcPopup(event,'shutdown')">shutdown</a>()
<a name="l131"><span class="linenum"> 131</span></a>  {
<a name="l132"><span class="linenum"> 132</span></a>      <span class="comment">/**</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">     * @var Hit</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     */</span>
<a name="l135"><span class="linenum"> 135</span></a>      global <a class="var it55" onMouseOver="hilite(55)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../../_variables/Hit.html">$Hit</a>;
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>      <span class="comment">/**</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * @var Session</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     */</span>
<a name="l140"><span class="linenum"> 140</span></a>      global <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>;
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l143"><span class="linenum"> 143</span></a>      global <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      global <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>;
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">    // Try forking a background process and let the parent return as fast as possbile.</span>
<a name="l148"><span class="linenum"> 148</span></a>      if( <a class="phpfunction" onClick="logFunction('is_callable')" href="../../../_functions/is_callable.html" onMouseOver="phpfuncPopup(event,'is_callable')">is_callable</a>('pcntl_fork') &amp;&amp; <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('posix_kill') &amp;&amp; <a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('STDIN') )
<a name="l149"><span class="linenum"> 149</span></a>      {
<a name="l150"><span class="linenum"> 150</span></a>          if( <a class="var it6881" onMouseOver="hilite(6881)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../../_variables/pid.html">$pid</a> = <a class="phpfunction" onClick="logFunction('pcntl_fork')" href="../../../_functions/pcntl_fork.html" onMouseOver="phpfuncPopup(event,'pcntl_fork')">pcntl_fork</a>() )
<a name="l151"><span class="linenum"> 151</span></a>              return; <span class="comment">// Parent</span>
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>  		function <a class="function" onClick="logFunction('shutdown_kill')" href="../../../_functions/shutdown_kill.html" onMouseOver="funcPopup(event,'shutdown_kill')">shutdown_kill</a>()
<a name="l154"><span class="linenum"> 154</span></a>          {
<a name="l155"><span class="linenum"> 155</span></a>              <a class="phpfunction" onClick="logFunction('posix_kill')" href="../../../_functions/posix_kill.html" onMouseOver="phpfuncPopup(event,'posix_kill')">posix_kill</a>(<a class="phpfunction" onClick="logFunction('posix_getpid')" href="../../../_functions/posix_getpid.html" onMouseOver="phpfuncPopup(event,'posix_getpid')">posix_getpid</a>(), SIGHUP);
<a name="l156"><span class="linenum"> 156</span></a>          }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>          if ( <a class="phpfunction" onClick="logFunction('ob_get_level')" href="../../../_functions/ob_get_level.html" onMouseOver="phpfuncPopup(event,'ob_get_level')">ob_get_level</a>() )
<a name="l159"><span class="linenum"> 159</span></a>          {    // Discard the output buffer and close
<a name="l160"><span class="linenum"> 160</span></a>              <a class="phpfunction" onClick="logFunction('ob_end_clean')" href="../../../_functions/ob_end_clean.html" onMouseOver="phpfuncPopup(event,'ob_end_clean')">ob_end_clean</a>();
<a name="l161"><span class="linenum"> 161</span></a>          }
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>          <a class="phpfunction" onClick="logFunction('fclose')" href="../../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(STDIN);  <span class="comment">// Close all of the standard</span>
<a name="l164"><span class="linenum"> 164</span></a>          <a class="phpfunction" onClick="logFunction('fclose')" href="../../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(STDOUT); <span class="comment">// file descriptors as we</span>
<a name="l165"><span class="linenum"> 165</span></a>          <a class="phpfunction" onClick="logFunction('fclose')" href="../../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(STDERR); <span class="comment">// are running as a daemon.</span>
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>          <a class="phpfunction" onClick="logFunction('register_shutdown_function')" href="../../../_functions/register_shutdown_function.html" onMouseOver="phpfuncPopup(event,'register_shutdown_function')">register_shutdown_function</a>('shutdown_kill');
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>          if( <a class="phpfunction" onClick="logFunction('posix_setsid')" href="../../../_functions/posix_setsid.html" onMouseOver="phpfuncPopup(event,'posix_setsid')">posix_setsid</a>() &lt; 0 )
<a name="l170"><span class="linenum"> 170</span></a>              return;
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>          if( <a class="var it6881" onMouseOver="hilite(6881)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../../_variables/pid.html">$pid</a> = <a class="phpfunction" onClick="logFunction('pcntl_fork')" href="../../../_functions/pcntl_fork.html" onMouseOver="phpfuncPopup(event,'pcntl_fork')">pcntl_fork</a>() )
<a name="l173"><span class="linenum"> 173</span></a>              return;     <span class="comment">// Parent</span>
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">        // Now running as a daemon. This process will even survive</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // an apachectl stop.</span>
<a name="l177"><span class="linenum"> 177</span></a>      }
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>      <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>('shutdown');
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">    // echo '*** SHUTDOWN FUNC KICKING IN ***';</span>
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">    // fp&gt; do we need special processing if we are in CLI mode?  probably earlier actually</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">    // if( ! $is_cli )</span>
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">    // Note: it might be useful at some point to do special processing if the script has been aborted or has timed out</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">    // connection_aborted()</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">    // connection_status()</span>
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">    // Save the current HIT:</span>
<a name="l191"><span class="linenum"> 191</span></a>      <a class="var it55" onMouseOver="hilite(55)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../../_variables/Hit.html">$Hit</a>-&gt;<a class="phpfunction" onClick="logFunction('log')" href="../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>();
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">    // Update the SESSION:</span>
<a name="l194"><span class="linenum"> 194</span></a>      <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('dbsave')" href="../../../_functions/dbsave.html" onMouseOver="funcPopup(event,'dbsave')">dbsave</a>();
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">    // Get updates here instead of slowing down normal display of the dashboard</span>
<a name="l197"><span class="linenum"> 197</span></a>      <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'dashboard/model/_dashboard.funcs.php' );
<a name="l198"><span class="linenum"> 198</span></a>      <a class="function" onClick="logFunction('b2evonet_get_updates')" href="../../../_functions/b2evonet_get_updates.html" onMouseOver="funcPopup(event,'b2evonet_get_updates')">b2evonet_get_updates</a>();
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">    // Auto pruning of old HITS, old SESSIONS and potentially MORE analytics data:</span>
<a name="l201"><span class="linenum"> 201</span></a>      if( <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'auto_prune_stats_mode' ) == 'page' )
<a name="l202"><span class="linenum"> 202</span></a>      { // Autopruning is requested
<a name="l203"><span class="linenum"> 203</span></a>          <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>('sessions/model/_hitlist.class.php', 'Hitlist' );
<a name="l204"><span class="linenum"> 204</span></a>          <a class="class" onClick="logClass('Hitlist')" href="../../../_classes/hitlist.html" onMouseOver="classPopup(event,'hitlist')">Hitlist</a>::<a class="function" onClick="logFunction('dbprune')" href="../../../_functions/dbprune.html" onMouseOver="funcPopup(event,'dbprune')">dbprune</a>(); <span class="comment">// will prune once per day, according to Settings</span>
<a name="l205"><span class="linenum"> 205</span></a>      }
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">    // Calling debug_info() here will produce complete data but it will be after &lt;/html&gt; hence invalid.</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">    // Then again, it's for debug only, so it shouldn't matter that much.</span>
<a name="l209"><span class="linenum"> 209</span></a>      <a class="function" onClick="logFunction('debug_info')" href="../../../_functions/debug_info.html" onMouseOver="funcPopup(event,'debug_info')">debug_info</a>();
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">    // Update the SESSION again, at the very end:</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">    // (e.g. &quot;Debuglogs&quot; may have been removed in debug_info())</span>
<a name="l213"><span class="linenum"> 213</span></a>      <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('dbsave')" href="../../../_functions/dbsave.html" onMouseOver="funcPopup(event,'dbsave')">dbsave</a>();
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>      <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>('shutdown');
<a name="l216"><span class="linenum"> 216</span></a>  }
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">/***** Formatting functions *****/</span>
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">/**</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment"> * Format a string/content for being output</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment"> *</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment"> * @author fplanque</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment"> * @param string raw text</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment"> * @param string format, can be one of the following</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * - raw: do nothing</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> * - htmlbody: display in HTML page body: allow full HTML</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment"> * - entityencoded: Special mode for RSS 0.92: allow full HTML but escape it</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment"> * - htmlhead: strips out HTML (mainly for use in Title)</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment"> * - htmlattr: use as an attribute: escapes quotes, strip tags</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment"> * - formvalue: use as a form value: escapes quotes and &lt; &gt; but leaves code alone</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment"> * - text: use as plain-text, e.g. for ascii-mails</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment"> * - xml: use in an XML file: strip HTML tags</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment"> * - xmlattr: use as an attribute: strips tags and escapes quotes</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment"> * @return string formatted text</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment"> */</span>
<a name="l238"><span class="linenum"> 238</span></a>  function <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l239"><span class="linenum"> 239</span></a>  {
<a name="l240"><span class="linenum"> 240</span></a>      global <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>, <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>      switch( <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> )
<a name="l243"><span class="linenum"> 243</span></a>      {
<a name="l244"><span class="linenum"> 244</span></a>          case 'raw':
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">            // do nothing!</span>
<a name="l246"><span class="linenum"> 246</span></a>              break;
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>          case 'htmlbody':
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">            // display in HTML page body: allow full HTML</span>
<a name="l250"><span class="linenum"> 250</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('convert_chars')" href="../../../_functions/convert_chars.html" onMouseOver="funcPopup(event,'convert_chars')">convert_chars</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, 'html');
<a name="l251"><span class="linenum"> 251</span></a>              break;
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>          case 'urlencoded':
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">            // Encode string to be passed as part of an URL</span>
<a name="l255"><span class="linenum"> 255</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l256"><span class="linenum"> 256</span></a>              break;
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>          case 'entityencoded':
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">            // Special mode for RSS 0.92: apply renders and allow full HTML but escape it</span>
<a name="l260"><span class="linenum"> 260</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('convert_chars')" href="../../../_functions/convert_chars.html" onMouseOver="funcPopup(event,'convert_chars')">convert_chars</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, 'html');
<a name="l261"><span class="linenum"> 261</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, ENT_QUOTES );
<a name="l262"><span class="linenum"> 262</span></a>              break;
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>          case 'htmlfeed':
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">            // For use in RSS &lt;content:encoded&gt;, allow full HTML + absolute URLs</span>
<a name="l266"><span class="linenum"> 266</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('make_rel_links_abs')" href="../../../_functions/make_rel_links_abs.html" onMouseOver="funcPopup(event,'make_rel_links_abs')">make_rel_links_abs</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l267"><span class="linenum"> 267</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('convert_chars')" href="../../../_functions/convert_chars.html" onMouseOver="funcPopup(event,'convert_chars')">convert_chars</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, 'html');
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(']]&gt;', ']]&amp;gt;', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>); <span class="comment">// encode CDATA closing tag</span>
<a name="l269"><span class="linenum"> 269</span></a>              break;
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>          case 'htmlhead':
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">            // Strips out HTML (mainly for use in Title)</span>
<a name="l273"><span class="linenum"> 273</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l274"><span class="linenum"> 274</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('convert_chars')" href="../../../_functions/convert_chars.html" onMouseOver="funcPopup(event,'convert_chars')">convert_chars</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, 'html');
<a name="l275"><span class="linenum"> 275</span></a>              break;
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>          case 'htmlattr':
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">            // use as an attribute: strips tags and escapes quotes</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">            // TODO: dh&gt; why not just htmlspecialchars?fp&gt; because an attribute can never contain a tag? dh&gt; well, &quot;onclick='return 1&lt;2;'&quot; would get stripped, too. I'm just saying: why mess with it, when we can just use htmlspecialchars.. fp&gt;ok</span>
<a name="l280"><span class="linenum"> 280</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l281"><span class="linenum"> 281</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('convert_chars')" href="../../../_functions/convert_chars.html" onMouseOver="funcPopup(event,'convert_chars')">convert_chars</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, 'html');
<a name="l282"><span class="linenum"> 282</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array('&quot;', &quot;'&quot;), array('&amp;quot;', '&amp;#039;'), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l283"><span class="linenum"> 283</span></a>              break;
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>          case 'htmlspecialchars':
<a name="l286"><span class="linenum"> 286</span></a>          case 'formvalue':
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">            // use as a form value: escapes &amp;, quotes and &lt; &gt; but leaves code alone</span>
<a name="l288"><span class="linenum"> 288</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, ENT_QUOTES );  <span class="comment">// Handles &amp;, &quot;, ', &lt; and &gt;</span>
<a name="l289"><span class="linenum"> 289</span></a>              break;
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>          case 'xml':
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">            // use in an XML file: strip HTML tags</span>
<a name="l293"><span class="linenum"> 293</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('convert_chars')" href="../../../_functions/convert_chars.html" onMouseOver="funcPopup(event,'convert_chars')">convert_chars</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, 'xml');
<a name="l295"><span class="linenum"> 295</span></a>              break;
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>          case 'xmlattr':
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">            // use as an attribute: strips tags and escapes quotes</span>
<a name="l299"><span class="linenum"> 299</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l300"><span class="linenum"> 300</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('convert_chars')" href="../../../_functions/convert_chars.html" onMouseOver="funcPopup(event,'convert_chars')">convert_chars</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, 'xml');
<a name="l301"><span class="linenum"> 301</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array('&quot;', &quot;'&quot;), array('&amp;quot;', '&amp;#039;'), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l302"><span class="linenum"> 302</span></a>              break;
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>          case 'text':
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">            // use as plain-text, e.g. for ascii-mails</span>
<a name="l306"><span class="linenum"> 306</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l307"><span class="linenum"> 307</span></a>              <a class="var it6882" onMouseOver="hilite(6882)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../../_variables/trans_tbl.html">$trans_tbl</a> = <a class="phpfunction" onClick="logFunction('get_html_translation_table')" href="../../../_functions/get_html_translation_table.html" onMouseOver="phpfuncPopup(event,'get_html_translation_table')">get_html_translation_table</a>( HTML_ENTITIES );
<a name="l308"><span class="linenum"> 308</span></a>              <a class="var it6882" onMouseOver="hilite(6882)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../../_variables/trans_tbl.html">$trans_tbl</a> = <a class="phpfunction" onClick="logFunction('array_flip')" href="../../../_functions/array_flip.html" onMouseOver="phpfuncPopup(event,'array_flip')">array_flip</a>( <a class="var it6882" onMouseOver="hilite(6882)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../../_variables/trans_tbl.html">$trans_tbl</a> );
<a name="l309"><span class="linenum"> 309</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('strtr')" href="../../../_functions/strtr.html" onMouseOver="phpfuncPopup(event,'strtr')">strtr</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it6882" onMouseOver="hilite(6882)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../../_variables/trans_tbl.html">$trans_tbl</a> );
<a name="l310"><span class="linenum"> 310</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/[ \t]+/', ' ', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l311"><span class="linenum"> 311</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l312"><span class="linenum"> 312</span></a>              break;
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>          default:
<a name="l315"><span class="linenum"> 315</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Output format ['.<a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>.'] not supported.' );
<a name="l316"><span class="linenum"> 316</span></a>      }
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>      return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l319"><span class="linenum"> 319</span></a>  }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>  
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">/*</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment"> * autobrize(-)</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment"> */</span>
<a name="l325"><span class="linenum"> 325</span></a>  function <a class="function" onClick="logFunction('autobrize')" href="../../../_functions/autobrize.html" onMouseOver="funcPopup(event,'autobrize')">autobrize</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>) {
<a name="l326"><span class="linenum"> 326</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('callback_on_non_matching_blocks')" href="../../../_functions/callback_on_non_matching_blocks.html" onMouseOver="funcPopup(event,'callback_on_non_matching_blocks')">callback_on_non_matching_blocks</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, '~&lt;code&gt;.+?&lt;/code&gt;~is', 'autobrize_callback' );
<a name="l327"><span class="linenum"> 327</span></a>      return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l328"><span class="linenum"> 328</span></a>  }
<a name="l329"><span class="linenum"> 329</span></a>  
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">/**</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> * Adds &lt;br&gt;'s to non code blocks</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> *</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> * @param string $content</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> * @return string content with &lt;br&gt;'s added</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> */</span>
<a name="l336"><span class="linenum"> 336</span></a>  function <a class="function" onClick="logFunction('autobrize_callback')" href="../../../_functions/autobrize_callback.html" onMouseOver="funcPopup(event,'autobrize_callback')">autobrize_callback</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> )
<a name="l337"><span class="linenum"> 337</span></a>  {
<a name="l338"><span class="linenum"> 338</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/&lt;br&gt;\n/&quot;, &quot;\n&quot;, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l339"><span class="linenum"> 339</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/&lt;br \/&gt;\n/&quot;, &quot;\n&quot;, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l340"><span class="linenum"> 340</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/(\015\012)|(\015)|(\012)/&quot;, &quot;&lt;br /&gt;\n&quot;, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l341"><span class="linenum"> 341</span></a>      return(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l342"><span class="linenum"> 342</span></a>  }
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">/*</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment"> * unautobrize(-)</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment"> */</span>
<a name="l347"><span class="linenum"> 347</span></a>  function <a class="function" onClick="logFunction('unautobrize')" href="../../../_functions/unautobrize.html" onMouseOver="funcPopup(event,'unautobrize')">unautobrize</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>)
<a name="l348"><span class="linenum"> 348</span></a>  {
<a name="l349"><span class="linenum"> 349</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('callback_on_non_matching_blocks')" href="../../../_functions/callback_on_non_matching_blocks.html" onMouseOver="funcPopup(event,'callback_on_non_matching_blocks')">callback_on_non_matching_blocks</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, '~&lt;code&gt;.+?&lt;/code&gt;~is', 'unautobrize_callback' );
<a name="l350"><span class="linenum"> 350</span></a>      return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l351"><span class="linenum"> 351</span></a>  }
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">/**</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment"> * Removes &lt;br&gt;'s from non code blocks</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment"> *</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment"> * @param string $content</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment"> * @return string content with &lt;br&gt;'s removed</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment"> */</span>
<a name="l359"><span class="linenum"> 359</span></a>  function <a class="function" onClick="logFunction('unautobrize_callback')" href="../../../_functions/unautobrize_callback.html" onMouseOver="funcPopup(event,'unautobrize_callback')">unautobrize_callback</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> )
<a name="l360"><span class="linenum"> 360</span></a>  {
<a name="l361"><span class="linenum"> 361</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/&lt;br&gt;\n/&quot;, &quot;\n&quot;, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);   <span class="comment">//for PHP versions before 4.0.5</span>
<a name="l362"><span class="linenum"> 362</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/&lt;br \/&gt;\n/&quot;, &quot;\n&quot;, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l363"><span class="linenum"> 363</span></a>      return(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l364"><span class="linenum"> 364</span></a>  }
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">/**</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment"> * Add leading zeroes to a number when necessary.</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment"> *</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment"> * @param string The original number.</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment"> * @param integer How many digits shall the number have?</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment"> * @return string The padded number.</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment"> */</span>
<a name="l373"><span class="linenum"> 373</span></a>  function <a class="function" onClick="logFunction('zeroise')" href="../../../_functions/zeroise.html" onMouseOver="funcPopup(event,'zeroise')">zeroise</a>( <a class="var it2902" onMouseOver="hilite(2902)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a>, <a class="var it6883" onMouseOver="hilite(6883)" onMouseOut="lolite()" onClick="logVariable('threshold')" href="../../../_variables/threshold.html">$threshold</a> )
<a name="l374"><span class="linenum"> 374</span></a>  {
<a name="l375"><span class="linenum"> 375</span></a>      return <a class="phpfunction" onClick="logFunction('str_pad')" href="../../../_functions/str_pad.html" onMouseOver="phpfuncPopup(event,'str_pad')">str_pad</a>( <a class="var it2902" onMouseOver="hilite(2902)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a>, <a class="var it6883" onMouseOver="hilite(6883)" onMouseOut="lolite()" onClick="logVariable('threshold')" href="../../../_variables/threshold.html">$threshold</a>, '0', STR_PAD_LEFT );
<a name="l376"><span class="linenum"> 376</span></a>  }
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">/**</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment"> * Get a limited text-only excerpt</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment"> *</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment"> * @param string</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment"> * @param int Maximum length</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment"> * @return string</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment"> */</span>
<a name="l386"><span class="linenum"> 386</span></a>  function <a class="function" onClick="logFunction('excerpt')" href="../../../_functions/excerpt.html" onMouseOver="funcPopup(event,'excerpt')">excerpt</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, <a class="var it3949" onMouseOver="hilite(3949)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a> = 200 )
<a name="l387"><span class="linenum"> 387</span></a>  {
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">    // Add spaces</span>
<a name="l389"><span class="linenum"> 389</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( '&lt;p&gt;', '&lt;br' ), array( ' &lt;p&gt;', ' &lt;br' ), <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> );
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">    // Remove &lt;code&gt;</span>
<a name="l392"><span class="linenum"> 392</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '#&lt;code&gt;(.+)&lt;/code&gt;#i', '', <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> );
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">    // fp&gt; Note: I'm not sure about using 'text' here, but there should definitely be no rendering here.</span>
<a name="l395"><span class="linenum"> 395</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, 'text' );
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">    // Ger rid of all new lines and Display the html tags as source text:</span>
<a name="l398"><span class="linenum"> 398</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( &quot;\r&quot;, &quot;\n&quot;, &quot;\t&quot; ), ' ', <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> ) );
<a name="l399"><span class="linenum"> 399</span></a>  
<a name="l400"><span class="linenum"> 400</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('strmaxlen')" href="../../../_functions/strmaxlen.html" onMouseOver="funcPopup(event,'strmaxlen')">strmaxlen</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, <a class="var it3949" onMouseOver="hilite(3949)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a>, NULL, 'raw', true );
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>      return <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>;
<a name="l403"><span class="linenum"> 403</span></a>  }
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">/**</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment"> * Crop string to maxlen with &amp;hellip; (default tail) at the end if needed.</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment"> *</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment"> * If $format is not &quot;raw&quot;, we make sure to not cut in the middle of an</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment"> * HTML entity, so that strmaxlen('1&amp;amp;2', 3, NULL, 'formvalue') will not</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment"> * become/stay '1&amp;amp;&amp;hellip;'.</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment"> *</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment"> * @param string</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment"> * @param int Maximum length</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment"> * @param string Tail to use, when string gets cropped. Its length gets</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment"> *               substracted from the total length (with HTML entities</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment"> *               being decoded). Default is &quot;&amp;hellip;&quot; (HTML entity)</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment"> * @param string Format, see {@link format_to_output()}</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment"> * @param boolean Crop at whitespace, if possible?</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment"> *        (any word split at the end will get its head removed)</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment"> * @return string</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment"> */</span>
<a name="l423"><span class="linenum"> 423</span></a>  function <a class="function" onClick="logFunction('strmaxlen')" href="../../../_functions/strmaxlen.html" onMouseOver="funcPopup(event,'strmaxlen')">strmaxlen</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, <a class="var it3949" onMouseOver="hilite(3949)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a> = 50, <a class="var it4482" onMouseOver="hilite(4482)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a> = NULL, <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'raw', <a class="var it6884" onMouseOver="hilite(6884)" onMouseOut="lolite()" onClick="logVariable('cut_at_whitespace')" href="../../../_variables/cut_at_whitespace.html">$cut_at_whitespace</a> = false  )
<a name="l424"><span class="linenum"> 424</span></a>  {
<a name="l425"><span class="linenum"> 425</span></a>      global <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4482" onMouseOver="hilite(4482)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a>) )
<a name="l428"><span class="linenum"> 428</span></a>      {
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it4482" onMouseOver="hilite(4482)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a> = '&amp;hellip;';
<a name="l430"><span class="linenum"> 430</span></a>      }
<a name="l431"><span class="linenum"> 431</span></a>  
<a name="l432"><span class="linenum"> 432</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('rtrim')" href="../../../_functions/rtrim.html" onMouseOver="phpfuncPopup(event,'rtrim')">rtrim</a>(<a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>);
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>      if( <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> ) &gt; <a class="var it3949" onMouseOver="hilite(3949)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a> )
<a name="l435"><span class="linenum"> 435</span></a>      {
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">        // Replace all HTML entities by a single char. html_entity_decode for example</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">        // would not handle &amp;hellip;.</span>
<a name="l438"><span class="linenum"> 438</span></a>          <a class="var it6885" onMouseOver="hilite(6885)" onMouseOut="lolite()" onClick="logVariable('tail_for_length')" href="../../../_variables/tail_for_length.html">$tail_for_length</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('~&amp;\w+?;~', '.', <a class="var it4482" onMouseOver="hilite(4482)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a>);
<a name="l439"><span class="linenum"> 439</span></a>          <a class="var it6886" onMouseOver="hilite(6886)" onMouseOut="lolite()" onClick="logVariable('tail_length')" href="../../../_variables/tail_length.html">$tail_length</a> = <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>( <a class="function" onClick="logFunction('evo_html_entity_decode')" href="../../../_functions/evo_html_entity_decode.html" onMouseOver="funcPopup(event,'evo_html_entity_decode')">evo_html_entity_decode</a>(<a class="var it6885" onMouseOver="hilite(6885)" onMouseOut="lolite()" onClick="logVariable('tail_for_length')" href="../../../_variables/tail_for_length.html">$tail_for_length</a>) );
<a name="l440"><span class="linenum"> 440</span></a>          <a class="var it4973" onMouseOver="hilite(4973)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../../_variables/len.html">$len</a> = <a class="var it3949" onMouseOver="hilite(3949)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a>-<a class="var it6886" onMouseOver="hilite(6886)" onMouseOut="lolite()" onClick="logVariable('tail_length')" href="../../../_variables/tail_length.html">$tail_length</a>;
<a name="l441"><span class="linenum"> 441</span></a>          if( <a class="var it4973" onMouseOver="hilite(4973)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../../_variables/len.html">$len</a> &lt; 1 )
<a name="l442"><span class="linenum"> 442</span></a>          { // special case; <a class="var it4482" onMouseOver="hilite(4482)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a> length is &gt;= <a class="var it3949" onMouseOver="hilite(3949)" onMouseOut="lolite()" onClick="logVariable('maxlen')" href="../../../_variables/maxlen.html">$maxlen</a>
<a name="l443"><span class="linenum"> 443</span></a>              <a class="var it4973" onMouseOver="hilite(4973)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../../_variables/len.html">$len</a> = 0;
<a name="l444"><span class="linenum"> 444</span></a>          }
<a name="l445"><span class="linenum"> 445</span></a>          <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a> = <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, 0, <a class="var it4973" onMouseOver="hilite(4973)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../../_variables/len.html">$len</a> );
<a name="l446"><span class="linenum"> 446</span></a>          if( <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> != 'raw' )
<a name="l447"><span class="linenum"> 447</span></a>          { // if the format isn't raw we make sure that we do not cut in the middle of an HTML entity
<a name="l448"><span class="linenum"> 448</span></a>              <a class="var it6888" onMouseOver="hilite(6888)" onMouseOut="lolite()" onClick="logVariable('maxlen_entity')" href="../../../_variables/maxlen_entity.html">$maxlen_entity</a> = 7; <span class="comment"># &quot;&amp;amp;&quot; is 5, min 3!</span>
<a name="l449"><span class="linenum"> 449</span></a>              <a class="var it6889" onMouseOver="hilite(6889)" onMouseOut="lolite()" onClick="logVariable('str_inspect')" href="../../../_variables/str_inspect.html">$str_inspect</a> = <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>(<a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a>, 1-<a class="var it6888" onMouseOver="hilite(6888)" onMouseOut="lolite()" onClick="logVariable('maxlen_entity')" href="../../../_variables/maxlen_entity.html">$maxlen_entity</a>);
<a name="l450"><span class="linenum"> 450</span></a>              <a class="var it6890" onMouseOver="hilite(6890)" onMouseOut="lolite()" onClick="logVariable('pos_amp')" href="../../../_variables/pos_amp.html">$pos_amp</a> = <a class="function" onClick="logFunction('evo_strpos')" href="../../../_functions/evo_strpos.html" onMouseOver="funcPopup(event,'evo_strpos')">evo_strpos</a>(<a class="var it6889" onMouseOver="hilite(6889)" onMouseOut="lolite()" onClick="logVariable('str_inspect')" href="../../../_variables/str_inspect.html">$str_inspect</a>, '&amp;');
<a name="l451"><span class="linenum"> 451</span></a>              if( <a class="var it6890" onMouseOver="hilite(6890)" onMouseOut="lolite()" onClick="logVariable('pos_amp')" href="../../../_variables/pos_amp.html">$pos_amp</a> !== false )
<a name="l452"><span class="linenum"> 452</span></a>              { // there's an ampersand at the end of the cropped string
<a name="l453"><span class="linenum"> 453</span></a>                  <a class="var it6891" onMouseOver="hilite(6891)" onMouseOut="lolite()" onClick="logVariable('look_until')" href="../../../_variables/look_until.html">$look_until</a> = <a class="var it6890" onMouseOver="hilite(6890)" onMouseOut="lolite()" onClick="logVariable('pos_amp')" href="../../../_variables/pos_amp.html">$pos_amp</a>;
<a name="l454"><span class="linenum"> 454</span></a>                  <a class="var it6892" onMouseOver="hilite(6892)" onMouseOut="lolite()" onClick="logVariable('str_cropped_len')" href="../../../_variables/str_cropped_len.html">$str_cropped_len</a> = <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>(<a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a>);
<a name="l455"><span class="linenum"> 455</span></a>                  if( <a class="var it6892" onMouseOver="hilite(6892)" onMouseOut="lolite()" onClick="logVariable('str_cropped_len')" href="../../../_variables/str_cropped_len.html">$str_cropped_len</a> &lt; <a class="var it6888" onMouseOver="hilite(6888)" onMouseOut="lolite()" onClick="logVariable('maxlen_entity')" href="../../../_variables/maxlen_entity.html">$maxlen_entity</a> )
<a name="l456"><span class="linenum"> 456</span></a>                  { // we have to look at least for the length of an entity
<a name="l457"><span class="linenum"> 457</span></a>                      <a class="var it6891" onMouseOver="hilite(6891)" onMouseOut="lolite()" onClick="logVariable('look_until')" href="../../../_variables/look_until.html">$look_until</a> += <a class="var it6888" onMouseOver="hilite(6888)" onMouseOut="lolite()" onClick="logVariable('maxlen_entity')" href="../../../_variables/maxlen_entity.html">$maxlen_entity</a>-<a class="var it6892" onMouseOver="hilite(6892)" onMouseOut="lolite()" onClick="logVariable('str_cropped_len')" href="../../../_variables/str_cropped_len.html">$str_cropped_len</a>;
<a name="l458"><span class="linenum"> 458</span></a>                  }
<a name="l459"><span class="linenum"> 459</span></a>                  if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>(<a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, <a class="var it4973" onMouseOver="hilite(4973)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../../_variables/len.html">$len</a>, <a class="var it6891" onMouseOver="hilite(6891)" onMouseOut="lolite()" onClick="logVariable('look_until')" href="../../../_variables/look_until.html">$look_until</a>), ';') !== false )
<a name="l460"><span class="linenum"> 460</span></a>                  {
<a name="l461"><span class="linenum"> 461</span></a>                      <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a> = <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, 0, <a class="var it4973" onMouseOver="hilite(4973)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../../_variables/len.html">$len</a>-<a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>(<a class="var it6889" onMouseOver="hilite(6889)" onMouseOut="lolite()" onClick="logVariable('str_inspect')" href="../../../_variables/str_inspect.html">$str_inspect</a>)+<a class="var it6890" onMouseOver="hilite(6890)" onMouseOut="lolite()" onClick="logVariable('pos_amp')" href="../../../_variables/pos_amp.html">$pos_amp</a>);
<a name="l462"><span class="linenum"> 462</span></a>                  }
<a name="l463"><span class="linenum"> 463</span></a>              }
<a name="l464"><span class="linenum"> 464</span></a>          }
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>          if( <a class="var it6884" onMouseOver="hilite(6884)" onMouseOut="lolite()" onClick="logVariable('cut_at_whitespace')" href="../../../_variables/cut_at_whitespace.html">$cut_at_whitespace</a> )
<a name="l467"><span class="linenum"> 467</span></a>          {
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">            // Get the first character being cut off. Note: we can't use $str[index] in case of utf8 strings!</span>
<a name="l469"><span class="linenum"> 469</span></a>              <a class="var it6893" onMouseOver="hilite(6893)" onMouseOut="lolite()" onClick="logVariable('first_cut_off_char')" href="../../../_variables/first_cut_off_char.html">$first_cut_off_char</a> = <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>( <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a> ), 1 );
<a name="l470"><span class="linenum"> 470</span></a>              if( ! <a class="phpfunction" onClick="logFunction('ctype_space')" href="../../../_functions/ctype_space.html" onMouseOver="phpfuncPopup(event,'ctype_space')">ctype_space</a>( <a class="var it6893" onMouseOver="hilite(6893)" onMouseOut="lolite()" onClick="logVariable('first_cut_off_char')" href="../../../_variables/first_cut_off_char.html">$first_cut_off_char</a> ) )
<a name="l471"><span class="linenum"> 471</span></a>              { // first character being cut off is not whitespace
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">                // Get the chars as an array in case of utf8 charset from the cropped string to be able to get chars by position ( in case of 'iso-8859-1' charset one char is one byte )</span>
<a name="l473"><span class="linenum"> 473</span></a>                  <a class="var it6894" onMouseOver="hilite(6894)" onMouseOut="lolite()" onClick="logVariable('str_cropped_chars')" href="../../../_variables/str_cropped_chars.html">$str_cropped_chars</a> = ( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> == 'iso-8859-1' ) ? <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a> : <a class="phpfunction" onClick="logFunction('preg_split')" href="../../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>( '//u', <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a>, -1, PREG_SPLIT_NO_EMPTY );
<a name="l474"><span class="linenum"> 474</span></a>                  <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>( <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a> );
<a name="l475"><span class="linenum"> 475</span></a>                  while( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &amp;&amp; ! <a class="phpfunction" onClick="logFunction('ctype_space')" href="../../../_functions/ctype_space.html" onMouseOver="phpfuncPopup(event,'ctype_space')">ctype_space</a>( <a class="var it6894" onMouseOver="hilite(6894)" onMouseOut="lolite()" onClick="logVariable('str_cropped_chars')" href="../../../_variables/str_cropped_chars.html">$str_cropped_chars</a>[--<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] ) )
<a name="l476"><span class="linenum"> 476</span></a>                  {}
<a name="l477"><span class="linenum"> 477</span></a>                  if( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> )
<a name="l478"><span class="linenum"> 478</span></a>                  {
<a name="l479"><span class="linenum"> 479</span></a>                      <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a> = <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a>, 0, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> );
<a name="l480"><span class="linenum"> 480</span></a>                  }
<a name="l481"><span class="linenum"> 481</span></a>              }
<a name="l482"><span class="linenum"> 482</span></a>          }
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>          <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="phpfunction" onClick="logFunction('rtrim')" href="../../../_functions/rtrim.html" onMouseOver="phpfuncPopup(event,'rtrim')">rtrim</a>( <a class="var it6887" onMouseOver="hilite(6887)" onMouseOut="lolite()" onClick="logVariable('str_cropped')" href="../../../_variables/str_cropped.html">$str_cropped</a> ), <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l485"><span class="linenum"> 485</span></a>          <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> .= <a class="var it4482" onMouseOver="hilite(4482)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../../_variables/tail.html">$tail</a>;
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>          return <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>;
<a name="l488"><span class="linenum"> 488</span></a>      }
<a name="l489"><span class="linenum"> 489</span></a>      else
<a name="l490"><span class="linenum"> 490</span></a>      {
<a name="l491"><span class="linenum"> 491</span></a>          return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l492"><span class="linenum"> 492</span></a>      }
<a name="l493"><span class="linenum"> 493</span></a>  }
<a name="l494"><span class="linenum"> 494</span></a>  
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">/**</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment"> * Crop string to maxwords preserving tags.</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment"> *</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment"> * @param string</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment"> * @param int Maximum number words</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment"> * @param mixed array Optional parameters</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment"> * @return string</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment"> */</span>
<a name="l504"><span class="linenum"> 504</span></a>  function <a class="function" onClick="logFunction('strmaxwords')" href="../../../_functions/strmaxwords.html" onMouseOver="funcPopup(event,'strmaxwords')">strmaxwords</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, <a class="var it6895" onMouseOver="hilite(6895)" onMouseOut="lolite()" onClick="logVariable('maxwords')" href="../../../_variables/maxwords.html">$maxwords</a> = 50, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l505"><span class="linenum"> 505</span></a>  {
<a name="l506"><span class="linenum"> 506</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l507"><span class="linenum"> 507</span></a>              'continued_link' =&gt; '',
<a name="l508"><span class="linenum"> 508</span></a>              'continued_text' =&gt; '&amp;hellip;',
<a name="l509"><span class="linenum"> 509</span></a>              'always_continue' =&gt; false,
<a name="l510"><span class="linenum"> 510</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l511"><span class="linenum"> 511</span></a>      <a class="var it2135" onMouseOver="hilite(2135)" onMouseOut="lolite()" onClick="logVariable('open')" href="../../../_variables/open.html">$open</a> = false;
<a name="l512"><span class="linenum"> 512</span></a>      <a class="var it6896" onMouseOver="hilite(6896)" onMouseOut="lolite()" onClick="logVariable('have_seen_non_whitespace')" href="../../../_variables/have_seen_non_whitespace.html">$have_seen_non_whitespace</a> = false;
<a name="l513"><span class="linenum"> 513</span></a>      <a class="var it1056" onMouseOver="hilite(1056)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../../_variables/end.html">$end</a> = <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> );
<a name="l514"><span class="linenum"> 514</span></a>      for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt; <a class="var it1056" onMouseOver="hilite(1056)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../../_variables/end.html">$end</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ )
<a name="l515"><span class="linenum"> 515</span></a>      {
<a name="l516"><span class="linenum"> 516</span></a>          switch( <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('char')" href="../../../_variables/char.html">$char</a> = <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] )
<a name="l517"><span class="linenum"> 517</span></a>          {
<a name="l518"><span class="linenum"> 518</span></a>              case '&lt;' :    // start of a tag
<a name="l519"><span class="linenum"> 519</span></a>                  <a class="var it2135" onMouseOver="hilite(2135)" onMouseOut="lolite()" onClick="logVariable('open')" href="../../../_variables/open.html">$open</a> = true;
<a name="l520"><span class="linenum"> 520</span></a>                  break;
<a name="l521"><span class="linenum"> 521</span></a>              case '&gt;' : // end of a tag
<a name="l522"><span class="linenum"> 522</span></a>                  <a class="var it2135" onMouseOver="hilite(2135)" onMouseOut="lolite()" onClick="logVariable('open')" href="../../../_variables/open.html">$open</a> = false;
<a name="l523"><span class="linenum"> 523</span></a>                  break;
<a name="l524"><span class="linenum"> 524</span></a>  
<a name="l525"><span class="linenum"> 525</span></a>              case <a class="phpfunction" onClick="logFunction('ctype_space')" href="../../../_functions/ctype_space.html" onMouseOver="phpfuncPopup(event,'ctype_space')">ctype_space</a>(<a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('char')" href="../../../_variables/char.html">$char</a>):
<a name="l526"><span class="linenum"> 526</span></a>                  if( ! <a class="var it2135" onMouseOver="hilite(2135)" onMouseOut="lolite()" onClick="logVariable('open')" href="../../../_variables/open.html">$open</a> )
<a name="l527"><span class="linenum"> 527</span></a>                  { // it's a word gap
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">                    // Eat any other whitespace.</span>
<a name="l529"><span class="linenum"> 529</span></a>                      while( isset(<a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1]) &amp;&amp; <a class="phpfunction" onClick="logFunction('ctype_space')" href="../../../_functions/ctype_space.html" onMouseOver="phpfuncPopup(event,'ctype_space')">ctype_space</a>(<a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1]) )
<a name="l530"><span class="linenum"> 530</span></a>                      {
<a name="l531"><span class="linenum"> 531</span></a>                          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++;
<a name="l532"><span class="linenum"> 532</span></a>                      }
<a name="l533"><span class="linenum"> 533</span></a>                      if( isset(<a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1]) &amp;&amp; <a class="var it6896" onMouseOver="hilite(6896)" onMouseOut="lolite()" onClick="logVariable('have_seen_non_whitespace')" href="../../../_variables/have_seen_non_whitespace.html">$have_seen_non_whitespace</a> )
<a name="l534"><span class="linenum"> 534</span></a>                      { // only decrement words, if there's a non-space char left.
<a name="l535"><span class="linenum"> 535</span></a>                          --<a class="var it6895" onMouseOver="hilite(6895)" onMouseOut="lolite()" onClick="logVariable('maxwords')" href="../../../_variables/maxwords.html">$maxwords</a>;
<a name="l536"><span class="linenum"> 536</span></a>                      }
<a name="l537"><span class="linenum"> 537</span></a>                  }
<a name="l538"><span class="linenum"> 538</span></a>                  break;
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>              default:
<a name="l541"><span class="linenum"> 541</span></a>                  <a class="var it6896" onMouseOver="hilite(6896)" onMouseOut="lolite()" onClick="logVariable('have_seen_non_whitespace')" href="../../../_variables/have_seen_non_whitespace.html">$have_seen_non_whitespace</a> = true;
<a name="l542"><span class="linenum"> 542</span></a>                  break;
<a name="l543"><span class="linenum"> 543</span></a>          }
<a name="l544"><span class="linenum"> 544</span></a>          if( <a class="var it6895" onMouseOver="hilite(6895)" onMouseOut="lolite()" onClick="logVariable('maxwords')" href="../../../_variables/maxwords.html">$maxwords</a> &lt; 1 ) break;
<a name="l545"><span class="linenum"> 545</span></a>      }
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">    // restrict content to required number of words and balance the tags out</span>
<a name="l548"><span class="linenum"> 548</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('balance_tags')" href="../../../_functions/balance_tags.html" onMouseOver="funcPopup(event,'balance_tags')">balance_tags</a>( <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, 0, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> ) );
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['always_continue'] || <a class="var it6895" onMouseOver="hilite(6895)" onMouseOut="lolite()" onClick="logVariable('maxwords')" href="../../../_variables/maxwords.html">$maxwords</a> == false )
<a name="l551"><span class="linenum"> 551</span></a>      { // we want a continued text
<a name="l552"><span class="linenum"> 552</span></a>          if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['continued_link'] )
<a name="l553"><span class="linenum"> 553</span></a>          { // we have a url
<a name="l554"><span class="linenum"> 554</span></a>              <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> .= ' &lt;a href=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['continued_link'].'&quot;&gt;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['continued_text'].'&lt;/a&gt;';
<a name="l555"><span class="linenum"> 555</span></a>          }
<a name="l556"><span class="linenum"> 556</span></a>          else
<a name="l557"><span class="linenum"> 557</span></a>          { // we don't have a url
<a name="l558"><span class="linenum"> 558</span></a>              <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> .= ' '.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['continued_text'];
<a name="l559"><span class="linenum"> 559</span></a>          }
<a name="l560"><span class="linenum"> 560</span></a>      }
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">    // remove empty tags</span>
<a name="l562"><span class="linenum"> 562</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~&lt;([\s]+?)[^&gt;]*?&gt;&lt;/\1&gt;~is', '', <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> );
<a name="l563"><span class="linenum"> 563</span></a>  
<a name="l564"><span class="linenum"> 564</span></a>      return <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>;
<a name="l565"><span class="linenum"> 565</span></a>  }
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">/**</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment"> * Convert all non ASCII chars (except if UTF-8, GB2312 or CP1251) to &amp;#nnnn; unicode references.</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment"> * Also convert entities to &amp;#nnnn; unicode references if output is not HTML (eg XML)</span>
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment"> *</span>
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment"> * Preserves &lt; &gt; and quotes.</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment"> *</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment"> * fplanque: simplified</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment"> * sakichan: pregs instead of loop</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment"> */</span>
<a name="l577"><span class="linenum"> 577</span></a>  function <a class="function" onClick="logFunction('convert_chars')" href="../../../_functions/convert_chars.html" onMouseOver="funcPopup(event,'convert_chars')">convert_chars</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it6897" onMouseOver="hilite(6897)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../_variables/flag.html">$flag</a> = 'html' )
<a name="l578"><span class="linenum"> 578</span></a>  {
<a name="l579"><span class="linenum"> 579</span></a>      global <a class="var it2110" onMouseOver="hilite(2110)" onMouseOut="lolite()" onClick="logVariable('b2_htmltrans')" href="../../../_variables/b2_htmltrans.html">$b2_htmltrans</a>, <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>      <span class="comment">/**</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * Translation of invalid Unicode references range to valid range.</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * These are Windows CP1252 specific characters.</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     * They would look weird on non-Windows browsers.</span>
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">     * If you've ever pasted text from MSWord, you'll understand.</span>
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment">     *</span>
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment">     * You should not have to change this.</span>
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">     */</span>
<a name="l589"><span class="linenum"> 589</span></a>      static <a class="var it6898" onMouseOver="hilite(6898)" onMouseOut="lolite()" onClick="logVariable('b2_htmltranswinuni')" href="../../../_variables/b2_htmltranswinuni.html">$b2_htmltranswinuni</a> = array(
<a name="l590"><span class="linenum"> 590</span></a>          '&amp;#128;' =&gt; '&amp;#8364;', // the Euro sign
<a name="l591"><span class="linenum"> 591</span></a>          '&amp;#130;' =&gt; '&amp;#8218;',
<a name="l592"><span class="linenum"> 592</span></a>          '&amp;#131;' =&gt; '&amp;#402;',
<a name="l593"><span class="linenum"> 593</span></a>          '&amp;#132;' =&gt; '&amp;#8222;',
<a name="l594"><span class="linenum"> 594</span></a>          '&amp;#133;' =&gt; '&amp;#8230;',
<a name="l595"><span class="linenum"> 595</span></a>          '&amp;#134;' =&gt; '&amp;#8224;',
<a name="l596"><span class="linenum"> 596</span></a>          '&amp;#135;' =&gt; '&amp;#8225;',
<a name="l597"><span class="linenum"> 597</span></a>          '&amp;#136;' =&gt; '&amp;#710;',
<a name="l598"><span class="linenum"> 598</span></a>          '&amp;#137;' =&gt; '&amp;#8240;',
<a name="l599"><span class="linenum"> 599</span></a>          '&amp;#138;' =&gt; '&amp;#352;',
<a name="l600"><span class="linenum"> 600</span></a>          '&amp;#139;' =&gt; '&amp;#8249;',
<a name="l601"><span class="linenum"> 601</span></a>          '&amp;#140;' =&gt; '&amp;#338;',
<a name="l602"><span class="linenum"> 602</span></a>          '&amp;#142;' =&gt; '&amp;#382;',
<a name="l603"><span class="linenum"> 603</span></a>          '&amp;#145;' =&gt; '&amp;#8216;',
<a name="l604"><span class="linenum"> 604</span></a>          '&amp;#146;' =&gt; '&amp;#8217;',
<a name="l605"><span class="linenum"> 605</span></a>          '&amp;#147;' =&gt; '&amp;#8220;',
<a name="l606"><span class="linenum"> 606</span></a>          '&amp;#148;' =&gt; '&amp;#8221;',
<a name="l607"><span class="linenum"> 607</span></a>          '&amp;#149;' =&gt; '&amp;#8226;',
<a name="l608"><span class="linenum"> 608</span></a>          '&amp;#150;' =&gt; '&amp;#8211;',
<a name="l609"><span class="linenum"> 609</span></a>          '&amp;#151;' =&gt; '&amp;#8212;',
<a name="l610"><span class="linenum"> 610</span></a>          '&amp;#152;' =&gt; '&amp;#732;',
<a name="l611"><span class="linenum"> 611</span></a>          '&amp;#153;' =&gt; '&amp;#8482;',
<a name="l612"><span class="linenum"> 612</span></a>          '&amp;#154;' =&gt; '&amp;#353;',
<a name="l613"><span class="linenum"> 613</span></a>          '&amp;#155;' =&gt; '&amp;#8250;',
<a name="l614"><span class="linenum"> 614</span></a>          '&amp;#156;' =&gt; '&amp;#339;',
<a name="l615"><span class="linenum"> 615</span></a>          '&amp;#158;' =&gt; '&amp;#382;',
<a name="l616"><span class="linenum"> 616</span></a>          '&amp;#159;' =&gt; '&amp;#376;'
<a name="l617"><span class="linenum"> 617</span></a>      );
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment">    // Convert highbyte non ASCII/UTF-8 chars to urefs:</span>
<a name="l620"><span class="linenum"> 620</span></a>      if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>), array( 'utf8', 'utf-8', 'gb2312', 'windows-1251') ) )
<a name="l621"><span class="linenum"> 621</span></a>      { // This is a single byte charset
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">        // fp&gt; why do we actually bother doing this:?</span>
<a name="l623"><span class="linenum"> 623</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace_callback')" href="../../../_functions/preg_replace_callback.html" onMouseOver="phpfuncPopup(event,'preg_replace_callback')">preg_replace_callback</a>(
<a name="l624"><span class="linenum"> 624</span></a>              '/[\x80-\xff]/',
<a name="l625"><span class="linenum"> 625</span></a>              <a class="phpfunction" onClick="logFunction('create_function')" href="../../../_functions/create_function.html" onMouseOver="phpfuncPopup(event,'create_function')">create_function</a>( '<a class="var it442" onMouseOver="hilite(442)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../_variables/j.html">$j</a>', 'return &quot;&amp;#&quot;.<a class="phpfunction" onClick="logFunction('ord')" href="../../../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>(<a class="var it442" onMouseOver="hilite(442)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../_variables/j.html">$j</a>[0]).&quot;;&quot;;' ),
<a name="l626"><span class="linenum"> 626</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l627"><span class="linenum"> 627</span></a>      }
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">    // Convert Windows CP1252 =&gt; Unicode (valid HTML)</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">    // TODO: should this go to input conversions instead (?)</span>
<a name="l631"><span class="linenum"> 631</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('strtr')" href="../../../_functions/strtr.html" onMouseOver="phpfuncPopup(event,'strtr')">strtr</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it6898" onMouseOver="hilite(6898)" onMouseOut="lolite()" onClick="logVariable('b2_htmltranswinuni')" href="../../../_variables/b2_htmltranswinuni.html">$b2_htmltranswinuni</a> );
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>      if( <a class="var it6897" onMouseOver="hilite(6897)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../_variables/flag.html">$flag</a> == 'html' )
<a name="l634"><span class="linenum"> 634</span></a>      { // we can use entities
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">        // Convert &amp; chars that are not used in an entity</span>
<a name="l636"><span class="linenum"> 636</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&amp;(?![#A-Za-z0-9]{2,20};)/', '&amp;amp;', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l637"><span class="linenum"> 637</span></a>      }
<a name="l638"><span class="linenum"> 638</span></a>      else
<a name="l639"><span class="linenum"> 639</span></a>      { // unicode, xml...
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">        // Convert &amp; chars that are not used in an entity</span>
<a name="l641"><span class="linenum"> 641</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&amp;(?![#A-Za-z0-9]{2,20};)/', '&amp;#38;', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment">        // Convert HTML entities to urefs:</span>
<a name="l644"><span class="linenum"> 644</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('strtr')" href="../../../_functions/strtr.html" onMouseOver="phpfuncPopup(event,'strtr')">strtr</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it2110" onMouseOver="hilite(2110)" onMouseOut="lolite()" onClick="logVariable('b2_htmltrans')" href="../../../_variables/b2_htmltrans.html">$b2_htmltrans</a>);
<a name="l645"><span class="linenum"> 645</span></a>      }
<a name="l646"><span class="linenum"> 646</span></a>  
<a name="l647"><span class="linenum"> 647</span></a>      return( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l648"><span class="linenum"> 648</span></a>  }
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">/**</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment"> * Get number of bytes in $string. This works around mbstring.func_overload, if</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment"> * activated for strlen/mb_strlen.</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment"> * @param string</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment"> * @return int</span>
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment"> */</span>
<a name="l657"><span class="linenum"> 657</span></a>  function <a class="function" onClick="logFunction('evo_bytes')" href="../../../_functions/evo_bytes.html" onMouseOver="funcPopup(event,'evo_bytes')">evo_bytes</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> )
<a name="l658"><span class="linenum"> 658</span></a>  {
<a name="l659"><span class="linenum"> 659</span></a>      <a class="var it6899" onMouseOver="hilite(6899)" onMouseOut="lolite()" onClick="logVariable('fo')" href="../../../_variables/fo.html">$fo</a> = <a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('mbstring.func_overload');
<a name="l660"><span class="linenum"> 660</span></a>      if( <a class="var it6899" onMouseOver="hilite(6899)" onMouseOut="lolite()" onClick="logVariable('fo')" href="../../../_variables/fo.html">$fo</a> &amp;&amp; <a class="var it6899" onMouseOver="hilite(6899)" onMouseOut="lolite()" onClick="logVariable('fo')" href="../../../_variables/fo.html">$fo</a> &amp; 2 &amp;&amp; <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strlen') )
<a name="l661"><span class="linenum"> 661</span></a>      { // overloading of strlen is enabled
<a name="l662"><span class="linenum"> 662</span></a>          return <a class="phpfunction" onClick="logFunction('mb_strlen')" href="../../../_functions/mb_strlen.html" onMouseOver="phpfuncPopup(event,'mb_strlen')">mb_strlen</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, 'ASCII' );
<a name="l663"><span class="linenum"> 663</span></a>      }
<a name="l664"><span class="linenum"> 664</span></a>      return strlen(<a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>);
<a name="l665"><span class="linenum"> 665</span></a>  }
<a name="l666"><span class="linenum"> 666</span></a>  
<a name="l667"><span class="linenum"> 667</span></a>  
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">/**</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment"> * mbstring wrapper for strtolower function</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment"> *</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment"> * fp&gt; TODO: instead of those &quot;when used&quot; ifs, it would make more sense to redefine</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment"> * mb_strtolower beforehand if it doesn&quot;t exist (it would then just be a fallback</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment"> * to the strtolower + a Debuglog-&gt;add() )</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment"> *</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment"> * @param string</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment"> * @return string</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment"> */</span>
<a name="l678"><span class="linenum"> 678</span></a>  function <a class="function" onClick="logFunction('evo_strtolower')" href="../../../_functions/evo_strtolower.html" onMouseOver="funcPopup(event,'evo_strtolower')">evo_strtolower</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> )
<a name="l679"><span class="linenum"> 679</span></a>  {
<a name="l680"><span class="linenum"> 680</span></a>      global <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>      if( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != 'iso-8859-1' &amp;&amp; <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != '' &amp;&amp; <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strtolower') )
<a name="l683"><span class="linenum"> 683</span></a>      {
<a name="l684"><span class="linenum"> 684</span></a>          return <a class="phpfunction" onClick="logFunction('mb_strtolower')" href="../../../_functions/mb_strtolower.html" onMouseOver="phpfuncPopup(event,'mb_strtolower')">mb_strtolower</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> );
<a name="l685"><span class="linenum"> 685</span></a>      }
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>      return <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>);
<a name="l688"><span class="linenum"> 688</span></a>  }
<a name="l689"><span class="linenum"> 689</span></a>  
<a name="l690"><span class="linenum"> 690</span></a>  
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment">/**</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment"> * mbstring wrapper for strlen function</span>
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment"> *</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment"> * @param string</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment"> * @return string</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment"> */</span>
<a name="l697"><span class="linenum"> 697</span></a>  function <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> )
<a name="l698"><span class="linenum"> 698</span></a>  {
<a name="l699"><span class="linenum"> 699</span></a>      global <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l700"><span class="linenum"> 700</span></a>  
<a name="l701"><span class="linenum"> 701</span></a>      if( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != 'iso-8859-1' &amp;&amp; <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != '' &amp;&amp; <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strlen') )
<a name="l702"><span class="linenum"> 702</span></a>      {
<a name="l703"><span class="linenum"> 703</span></a>          return <a class="phpfunction" onClick="logFunction('mb_strlen')" href="../../../_functions/mb_strlen.html" onMouseOver="phpfuncPopup(event,'mb_strlen')">mb_strlen</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> );
<a name="l704"><span class="linenum"> 704</span></a>      }
<a name="l705"><span class="linenum"> 705</span></a>  
<a name="l706"><span class="linenum"> 706</span></a>      return strlen(<a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>);
<a name="l707"><span class="linenum"> 707</span></a>  }
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">/**</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment"> * mbstring wrapper for strpos function</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment"> *</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment"> * @param string</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment"> * @param string</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment"> * @return int</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment"> */</span>
<a name="l716"><span class="linenum"> 716</span></a>  function <a class="function" onClick="logFunction('evo_strpos')" href="../../../_functions/evo_strpos.html" onMouseOver="funcPopup(event,'evo_strpos')">evo_strpos</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> , <a class="var it5015" onMouseOver="hilite(5015)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../../_variables/needle.html">$needle</a> , <a class="var it1018" onMouseOver="hilite(1018)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../../_variables/offset.html">$offset</a> = null )
<a name="l717"><span class="linenum"> 717</span></a>  {
<a name="l718"><span class="linenum"> 718</span></a>      global <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l719"><span class="linenum"> 719</span></a>  
<a name="l720"><span class="linenum"> 720</span></a>      if( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != 'iso-8859-1' &amp;&amp; <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != '' &amp;&amp; <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strpos') )
<a name="l721"><span class="linenum"> 721</span></a>      {
<a name="l722"><span class="linenum"> 722</span></a>          return <a class="phpfunction" onClick="logFunction('mb_strpos')" href="../../../_functions/mb_strpos.html" onMouseOver="phpfuncPopup(event,'mb_strpos')">mb_strpos</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it5015" onMouseOver="hilite(5015)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../../_variables/needle.html">$needle</a>, <a class="var it1018" onMouseOver="hilite(1018)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../../_variables/offset.html">$offset</a> ,<a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> );
<a name="l723"><span class="linenum"> 723</span></a>      }
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>      return <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> , <a class="var it5015" onMouseOver="hilite(5015)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../../_variables/needle.html">$needle</a> , <a class="var it1018" onMouseOver="hilite(1018)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../../_variables/offset.html">$offset</a> );
<a name="l726"><span class="linenum"> 726</span></a>  }
<a name="l727"><span class="linenum"> 727</span></a>  
<a name="l728"><span class="linenum"> 728</span></a>  
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">/**</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment"> * mbstring wrapper for substr function</span>
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment"> *</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment"> * @param string</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment"> * @param int start position</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment"> * @param int string length</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment"> * @return string</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment"> */</span>
<a name="l737"><span class="linenum"> 737</span></a>  function <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../../_variables/start.html">$start</a> = 0, <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> = '#' )
<a name="l738"><span class="linenum"> 738</span></a>  {
<a name="l739"><span class="linenum"> 739</span></a>      global <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l740"><span class="linenum"> 740</span></a>  
<a name="l741"><span class="linenum"> 741</span></a>      if( ! <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> )
<a name="l742"><span class="linenum"> 742</span></a>      { // make mb_substr and substr behave consistently (mb_substr returns string for length=0)
<a name="l743"><span class="linenum"> 743</span></a>          return '';
<a name="l744"><span class="linenum"> 744</span></a>      }
<a name="l745"><span class="linenum"> 745</span></a>      if( <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> == '#' )
<a name="l746"><span class="linenum"> 746</span></a>      {
<a name="l747"><span class="linenum"> 747</span></a>          <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> = <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>(<a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>);
<a name="l748"><span class="linenum"> 748</span></a>      }
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>      if( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != 'iso-8859-1' &amp;&amp; <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != '' &amp;&amp; <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_substr') )
<a name="l751"><span class="linenum"> 751</span></a>      {
<a name="l752"><span class="linenum"> 752</span></a>          return <a class="phpfunction" onClick="logFunction('mb_substr')" href="../../../_functions/mb_substr.html" onMouseOver="phpfuncPopup(event,'mb_substr')">mb_substr</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../../_variables/start.html">$start</a>, <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> );
<a name="l753"><span class="linenum"> 753</span></a>      }
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>      return <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../../_variables/start.html">$start</a>, <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> );
<a name="l756"><span class="linenum"> 756</span></a>  }
<a name="l757"><span class="linenum"> 757</span></a>  
<a name="l758"><span class="linenum"> 758</span></a>  
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">/**</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment"> * Wrapper function for htmlspecialchars to use the $evo_charset as default charset</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment"> *</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment"> * @param string the string being converted</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment"> * @param int the quote style constant</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment"> * @param string defines character set used in conversion.</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment"> * @param boolean turn on/off double encode</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment"> * @return string the converted string</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment"> */</span>
<a name="l768"><span class="linenum"> 768</span></a>  function <a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('quote_style')" href="../../../_variables/quote_style.html">$quote_style</a> = ENT_COMPAT, <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> = NULL, <a class="var it6901" onMouseOver="hilite(6901)" onMouseOut="lolite()" onClick="logVariable('double_encode')" href="../../../_variables/double_encode.html">$double_encode</a> = true )
<a name="l769"><span class="linenum"> 769</span></a>  {
<a name="l770"><span class="linenum"> 770</span></a>      global <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l771"><span class="linenum"> 771</span></a>  
<a name="l772"><span class="linenum"> 772</span></a>      if( <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> === NULL )
<a name="l773"><span class="linenum"> 773</span></a>      { // Use <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a> by default
<a name="l774"><span class="linenum"> 774</span></a>          <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> = <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l775"><span class="linenum"> 775</span></a>      }
<a name="l776"><span class="linenum"> 776</span></a>  
<a name="l777"><span class="linenum"> 777</span></a>      return <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('quote_style')" href="../../../_variables/quote_style.html">$quote_style</a>, <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a>, <a class="var it6901" onMouseOver="hilite(6901)" onMouseOut="lolite()" onClick="logVariable('double_encode')" href="../../../_variables/double_encode.html">$double_encode</a> );
<a name="l778"><span class="linenum"> 778</span></a>  }
<a name="l779"><span class="linenum"> 779</span></a>  
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">/**</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment"> * Wrapper function for htmlentites to use the $evo_charset as default charset</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment"> *</span>
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment"> * @param string the string being converted</span>
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment"> * @param int the quote style constant</span>
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment"> * @param string defines character set used in conversion.</span>
<a name="l787"><span class="linenum"> 787</span></a>  <span class="comment"> * @param boolean turn on/off double encode</span>
<a name="l788"><span class="linenum"> 788</span></a>  <span class="comment"> * @return string the converted string</span>
<a name="l789"><span class="linenum"> 789</span></a>  <span class="comment"> */</span>
<a name="l790"><span class="linenum"> 790</span></a>  function <a class="function" onClick="logFunction('evo_htmlentities')" href="../../../_functions/evo_htmlentities.html" onMouseOver="funcPopup(event,'evo_htmlentities')">evo_htmlentities</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('quote_style')" href="../../../_variables/quote_style.html">$quote_style</a> = ENT_COMPAT, <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> = NULL, <a class="var it6901" onMouseOver="hilite(6901)" onMouseOut="lolite()" onClick="logVariable('double_encode')" href="../../../_variables/double_encode.html">$double_encode</a> = true )
<a name="l791"><span class="linenum"> 791</span></a>  {
<a name="l792"><span class="linenum"> 792</span></a>      global <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l793"><span class="linenum"> 793</span></a>  
<a name="l794"><span class="linenum"> 794</span></a>      if( <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> === NULL )
<a name="l795"><span class="linenum"> 795</span></a>      { // Use <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a> by default
<a name="l796"><span class="linenum"> 796</span></a>          <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> = <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l797"><span class="linenum"> 797</span></a>      }
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>      return <a class="phpfunction" onClick="logFunction('htmlentities')" href="../../../_functions/htmlentities.html" onMouseOver="phpfuncPopup(event,'htmlentities')">htmlentities</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('quote_style')" href="../../../_variables/quote_style.html">$quote_style</a>, <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a>, <a class="var it6901" onMouseOver="hilite(6901)" onMouseOut="lolite()" onClick="logVariable('double_encode')" href="../../../_variables/double_encode.html">$double_encode</a> );
<a name="l800"><span class="linenum"> 800</span></a>  }
<a name="l801"><span class="linenum"> 801</span></a>  
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">/**</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment"> * Wrapper function for htmlentites to use the $evo_charset as default charset</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment"> *</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment"> * @param string the string being converted</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment"> * @param int the quote style constant</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment"> * @param string defines character set used in conversion.</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment"> * @return string the converted string</span>
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment"> */</span>
<a name="l811"><span class="linenum"> 811</span></a>  function <a class="function" onClick="logFunction('evo_html_entity_decode')" href="../../../_functions/evo_html_entity_decode.html" onMouseOver="funcPopup(event,'evo_html_entity_decode')">evo_html_entity_decode</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('quote_style')" href="../../../_variables/quote_style.html">$quote_style</a> = ENT_COMPAT, <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> = NULL )
<a name="l812"><span class="linenum"> 812</span></a>  {
<a name="l813"><span class="linenum"> 813</span></a>      global <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>      if( <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> === NULL )
<a name="l816"><span class="linenum"> 816</span></a>      { // Use <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a> by default
<a name="l817"><span class="linenum"> 817</span></a>          <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> = <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l818"><span class="linenum"> 818</span></a>      }
<a name="l819"><span class="linenum"> 819</span></a>  
<a name="l820"><span class="linenum"> 820</span></a>      return <a class="phpfunction" onClick="logFunction('html_entity_decode')" href="../../../_functions/html_entity_decode.html" onMouseOver="phpfuncPopup(event,'html_entity_decode')">html_entity_decode</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('quote_style')" href="../../../_variables/quote_style.html">$quote_style</a>, <a class="var it2030" onMouseOver="hilite(2030)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../../_variables/charset.html">$charset</a> );
<a name="l821"><span class="linenum"> 821</span></a>  }
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>  
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment">/**</span>
<a name="l825"><span class="linenum"> 825</span></a>  <span class="comment"> * Split $text into blocks by using $pattern and call $callback on the non-matching blocks.</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment"> *</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment"> * The non-matching block's text is the first param to $callback and additionally $params gets passed.</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment"> *</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment"> * This gets used to make links clickable or replace smilies.</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment"> *</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment"> * E.g., to replace only in non-HTML tags, call it like:</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment"> * &lt;code&gt;callback_on_non_matching_blocks( $text, '~&lt;[^&gt;]*&gt;~s', 'your_callback' );&lt;/code&gt;</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment"> *</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment"> * {@internal This function gets tested in misc.funcs.simpletest.php.}}</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment"> *</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment"> * @param string Text to handle</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment"> * @param string Regular expression pattern that defines blocks to exclude.</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment"> * @param callback Function name or object/method array to use as callback.</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment"> *               Each non-matching block gets passed as first param, additional params may be</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment"> *               passed with $params.</span>
<a name="l841"><span class="linenum"> 841</span></a>  <span class="comment"> * @param array Of additional (&quot;static&quot;) params to $callback.</span>
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment"> * @return string</span>
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment"> */</span>
<a name="l844"><span class="linenum"> 844</span></a>  function <a class="function" onClick="logFunction('callback_on_non_matching_blocks')" href="../../../_functions/callback_on_non_matching_blocks.html" onMouseOver="funcPopup(event,'callback_on_non_matching_blocks')">callback_on_non_matching_blocks</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it2435" onMouseOver="hilite(2435)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../../../_variables/pattern.html">$pattern</a>, <a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l845"><span class="linenum"> 845</span></a>  {
<a name="l846"><span class="linenum"> 846</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>( <a class="var it2435" onMouseOver="hilite(2435)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../../../_variables/pattern.html">$pattern</a>, <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>, PREG_OFFSET_CAPTURE | PREG_PATTERN_ORDER ) )
<a name="l847"><span class="linenum"> 847</span></a>      {    // <a class="var it2435" onMouseOver="hilite(2435)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../../../_variables/pattern.html">$pattern</a> matches, call the callback method on full text except of matching blocks
<a name="l848"><span class="linenum"> 848</span></a>  
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">        // Create an unique string in order to replace all matching blocks temporarily</span>
<a name="l850"><span class="linenum"> 850</span></a>          <a class="var it6902" onMouseOver="hilite(6902)" onMouseOut="lolite()" onClick="logVariable('unique_replacement')" href="../../../_variables/unique_replacement.html">$unique_replacement</a> = md5( <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>() + <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>() );
<a name="l851"><span class="linenum"> 851</span></a>  
<a name="l852"><span class="linenum"> 852</span></a>          <a class="var it6903" onMouseOver="hilite(6903)" onMouseOut="lolite()" onClick="logVariable('matches_search')" href="../../../_variables/matches_search.html">$matches_search</a> = array();
<a name="l853"><span class="linenum"> 853</span></a>          <a class="var it6904" onMouseOver="hilite(6904)" onMouseOut="lolite()" onClick="logVariable('matches_replace')" href="../../../_variables/matches_replace.html">$matches_replace</a> = array();
<a name="l854"><span class="linenum"> 854</span></a>          foreach( <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[0] as <a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('l')" href="../../../_variables/l.html">$l</a> =&gt; <a class="var it6905" onMouseOver="hilite(6905)" onMouseOut="lolite()" onClick="logVariable('l_matching')" href="../../../_variables/l_matching.html">$l_matching</a> )
<a name="l855"><span class="linenum"> 855</span></a>          {    // Build arrays with a source code of the matching blocks and with temporary replacement
<a name="l856"><span class="linenum"> 856</span></a>              <a class="var it6906" onMouseOver="hilite(6906)" onMouseOut="lolite()" onClick="logVariable('matches_source')" href="../../../_variables/matches_source.html">$matches_source</a>[] = <a class="var it6905" onMouseOver="hilite(6905)" onMouseOut="lolite()" onClick="logVariable('l_matching')" href="../../../_variables/l_matching.html">$l_matching</a>[0];
<a name="l857"><span class="linenum"> 857</span></a>              <a class="var it6907" onMouseOver="hilite(6907)" onMouseOut="lolite()" onClick="logVariable('matches_temp')" href="../../../_variables/matches_temp.html">$matches_temp</a>[] = '?'.<a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('l')" href="../../../_variables/l.html">$l</a>.<a class="var it6902" onMouseOver="hilite(6902)" onMouseOut="lolite()" onClick="logVariable('unique_replacement')" href="../../../_variables/unique_replacement.html">$unique_replacement</a>.<a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('l')" href="../../../_variables/l.html">$l</a>.'?';
<a name="l858"><span class="linenum"> 858</span></a>          }
<a name="l859"><span class="linenum"> 859</span></a>  
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">        // Replace all matching blocks with temporary text like '?X219a33da9c1b8f4e335bffc015df8c96X?'</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">        // where X is index of match block in array $matches[0]</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">        // It is used to avoid any changes in the matching blocks</span>
<a name="l863"><span class="linenum"> 863</span></a>          <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../../../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>( <a class="var it6906" onMouseOver="hilite(6906)" onMouseOut="lolite()" onClick="logVariable('matches_source')" href="../../../_variables/matches_source.html">$matches_source</a>, <a class="var it6907" onMouseOver="hilite(6907)" onMouseOut="lolite()" onClick="logVariable('matches_temp')" href="../../../_variables/matches_temp.html">$matches_temp</a>, <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> );
<a name="l864"><span class="linenum"> 864</span></a>  
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">        // Callback:</span>
<a name="l866"><span class="linenum"> 866</span></a>          <a class="var it6908" onMouseOver="hilite(6908)" onMouseOut="lolite()" onClick="logVariable('callback_params')" href="../../../_variables/callback_params.html">$callback_params</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l867"><span class="linenum"> 867</span></a>          <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>( <a class="var it6908" onMouseOver="hilite(6908)" onMouseOut="lolite()" onClick="logVariable('callback_params')" href="../../../_variables/callback_params.html">$callback_params</a>, <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> );
<a name="l868"><span class="linenum"> 868</span></a>          <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('call_user_func_array')" href="../../../_functions/call_user_func_array.html" onMouseOver="phpfuncPopup(event,'call_user_func_array')">call_user_func_array</a>( <a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>, <a class="var it6908" onMouseOver="hilite(6908)" onMouseOut="lolite()" onClick="logVariable('callback_params')" href="../../../_variables/callback_params.html">$callback_params</a> );
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">        // Revert a source code of the matching blocks in content</span>
<a name="l871"><span class="linenum"> 871</span></a>          <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../../../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>( <a class="var it6907" onMouseOver="hilite(6907)" onMouseOut="lolite()" onClick="logVariable('matches_temp')" href="../../../_variables/matches_temp.html">$matches_temp</a>, <a class="var it6906" onMouseOver="hilite(6906)" onMouseOut="lolite()" onClick="logVariable('matches_source')" href="../../../_variables/matches_source.html">$matches_source</a>, <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> );
<a name="l872"><span class="linenum"> 872</span></a>  
<a name="l873"><span class="linenum"> 873</span></a>          return <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>;
<a name="l874"><span class="linenum"> 874</span></a>      }
<a name="l875"><span class="linenum"> 875</span></a>  
<a name="l876"><span class="linenum"> 876</span></a>      <a class="var it6908" onMouseOver="hilite(6908)" onMouseOut="lolite()" onClick="logVariable('callback_params')" href="../../../_variables/callback_params.html">$callback_params</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l877"><span class="linenum"> 877</span></a>      <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>( <a class="var it6908" onMouseOver="hilite(6908)" onMouseOut="lolite()" onClick="logVariable('callback_params')" href="../../../_variables/callback_params.html">$callback_params</a>, <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> );
<a name="l878"><span class="linenum"> 878</span></a>      return <a class="phpfunction" onClick="logFunction('call_user_func_array')" href="../../../_functions/call_user_func_array.html" onMouseOver="phpfuncPopup(event,'call_user_func_array')">call_user_func_array</a>( <a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>, <a class="var it6908" onMouseOver="hilite(6908)" onMouseOut="lolite()" onClick="logVariable('callback_params')" href="../../../_variables/callback_params.html">$callback_params</a> );
<a name="l879"><span class="linenum"> 879</span></a>  }
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>  
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">/**</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment"> * Replace content outside blocks &lt;code&gt;&lt;/code&gt; &amp; &lt;pre&gt;&lt;/pre&gt;</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment"> *</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment"> * @param array|string Search list</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment"> * @param array|string Replace list</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment"> * @param string Source content</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment"> * @return string Replaced content</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment"> */</span>
<a name="l890"><span class="linenum"> 890</span></a>  function <a class="function" onClick="logFunction('replace_content_outcode')" href="../../../_functions/replace_content_outcode.html" onMouseOver="funcPopup(event,'replace_content_outcode')">replace_content_outcode</a>( <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a>, <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('replace')" href="../../../_variables/replace.html">$replace</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it6909" onMouseOver="hilite(6909)" onMouseOut="lolite()" onClick="logVariable('replace_function_callback')" href="../../../_variables/replace_function_callback.html">$replace_function_callback</a> = 'replace_content' )
<a name="l891"><span class="linenum"> 891</span></a>  {
<a name="l892"><span class="linenum"> 892</span></a>      if( !empty( <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a> ) &amp;&amp; !empty( <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('replace')" href="../../../_variables/replace.html">$replace</a> ) )
<a name="l893"><span class="linenum"> 893</span></a>      {
<a name="l894"><span class="linenum"> 894</span></a>          if( <a class="phpfunction" onClick="logFunction('stristr')" href="../../../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, '&lt;code' ) !== false || <a class="phpfunction" onClick="logFunction('stristr')" href="../../../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, '&lt;pre' ) !== false )
<a name="l895"><span class="linenum"> 895</span></a>          {    // Call <a class="function" onClick="logFunction('replace_content')" href="../../../_functions/replace_content.html" onMouseOver="funcPopup(event,'replace_content')">replace_content</a>() on everything outside code/pre:
<a name="l896"><span class="linenum"> 896</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('callback_on_non_matching_blocks')" href="../../../_functions/callback_on_non_matching_blocks.html" onMouseOver="funcPopup(event,'callback_on_non_matching_blocks')">callback_on_non_matching_blocks</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>,
<a name="l897"><span class="linenum"> 897</span></a>                  '~&lt;(code|pre)[^&gt;]*&gt;.*?&lt;/\1&gt;~is',
<a name="l898"><span class="linenum"> 898</span></a>                  <a class="var it6909" onMouseOver="hilite(6909)" onMouseOut="lolite()" onClick="logVariable('replace_function_callback')" href="../../../_variables/replace_function_callback.html">$replace_function_callback</a>, array( <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a>, <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('replace')" href="../../../_variables/replace.html">$replace</a> ) );
<a name="l899"><span class="linenum"> 899</span></a>          }
<a name="l900"><span class="linenum"> 900</span></a>          else
<a name="l901"><span class="linenum"> 901</span></a>          {    // No code/pre blocks, replace on the whole thing
<a name="l902"><span class="linenum"> 902</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>( <a class="var it6909" onMouseOver="hilite(6909)" onMouseOut="lolite()" onClick="logVariable('replace_function_callback')" href="../../../_variables/replace_function_callback.html">$replace_function_callback</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a>, <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('replace')" href="../../../_variables/replace.html">$replace</a> );
<a name="l903"><span class="linenum"> 903</span></a>          }
<a name="l904"><span class="linenum"> 904</span></a>      }
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>      return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l907"><span class="linenum"> 907</span></a>  }
<a name="l908"><span class="linenum"> 908</span></a>  
<a name="l909"><span class="linenum"> 909</span></a>  
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">/**</span>
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment"> * Replace content, Used for function callback_on_non_matching_blocks(), because there is different order of params</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment"> *</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment"> * @param string Source content</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment"> * @param array|string Search list</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment"> * @param array|string Replace list</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment"> * @param string Type of function: 'preg' -&gt; preg_replace(), 'str' -&gt; str_replace()</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment"> * @return string Replaced content</span>
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment"> */</span>
<a name="l919"><span class="linenum"> 919</span></a>  function <a class="function" onClick="logFunction('replace_content')" href="../../../_functions/replace_content.html" onMouseOver="funcPopup(event,'replace_content')">replace_content</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a>, <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('replace')" href="../../../_variables/replace.html">$replace</a>, <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = 'preg' )
<a name="l920"><span class="linenum"> 920</span></a>  {
<a name="l921"><span class="linenum"> 921</span></a>      if( <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == 'str' )
<a name="l922"><span class="linenum"> 922</span></a>      {
<a name="l923"><span class="linenum"> 923</span></a>          return <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a>, <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('replace')" href="../../../_variables/replace.html">$replace</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l924"><span class="linenum"> 924</span></a>      }
<a name="l925"><span class="linenum"> 925</span></a>      else
<a name="l926"><span class="linenum"> 926</span></a>      {
<a name="l927"><span class="linenum"> 927</span></a>          return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a>, <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('replace')" href="../../../_variables/replace.html">$replace</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l928"><span class="linenum"> 928</span></a>      }
<a name="l929"><span class="linenum"> 929</span></a>  }
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>  
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">/**</span>
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment"> * Replace content by callback, Used for function callback_on_non_matching_blocks(), because there is different order of params</span>
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment"> *</span>
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment"> * @param string Source content</span>
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment"> * @param array|string Search list</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment"> * @param array|string Replace callback</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment"> * @return string Replaced content</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment"> */</span>
<a name="l940"><span class="linenum"> 940</span></a>  function <a class="function" onClick="logFunction('replace_content_callback')" href="../../../_functions/replace_content_callback.html" onMouseOver="funcPopup(event,'replace_content_callback')">replace_content_callback</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a>, <a class="var it6910" onMouseOver="hilite(6910)" onMouseOut="lolite()" onClick="logVariable('replace_callback')" href="../../../_variables/replace_callback.html">$replace_callback</a> )
<a name="l941"><span class="linenum"> 941</span></a>  {
<a name="l942"><span class="linenum"> 942</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace_callback')" href="../../../_functions/preg_replace_callback.html" onMouseOver="phpfuncPopup(event,'preg_replace_callback')">preg_replace_callback</a>( <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../_variables/search.html">$search</a>, <a class="var it6910" onMouseOver="hilite(6910)" onMouseOut="lolite()" onClick="logVariable('replace_callback')" href="../../../_variables/replace_callback.html">$replace_callback</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l943"><span class="linenum"> 943</span></a>  }
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>  
<a name="l946"><span class="linenum"> 946</span></a>  <span class="comment">/**</span>
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment"> * Split a content by separators outside &lt;code&gt; and &lt;pre&gt; blocks</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment"> *</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment"> * @param string|array Separators</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment"> * @param string Content</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment"> * @param boolean TRUE - parenthesized expression of separator will be captured and returned as well</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment"> * @return array The result of explode() function</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment"> */</span>
<a name="l954"><span class="linenum"> 954</span></a>  function <a class="function" onClick="logFunction('split_outcode')" href="../../../_functions/split_outcode.html" onMouseOver="funcPopup(event,'split_outcode')">split_outcode</a>( <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it6912" onMouseOver="hilite(6912)" onMouseOut="lolite()" onClick="logVariable('capture_separator')" href="../../../_variables/capture_separator.html">$capture_separator</a> = false )
<a name="l955"><span class="linenum"> 955</span></a>  {
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">    // Check if the separators exists in content</span>
<a name="l957"><span class="linenum"> 957</span></a>      if( ! <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a> ) )
<a name="l958"><span class="linenum"> 958</span></a>      { // Convert string to array with one element
<a name="l959"><span class="linenum"> 959</span></a>          <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a> = array( <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a> );
<a name="l960"><span class="linenum"> 960</span></a>      }
<a name="l961"><span class="linenum"> 961</span></a>      <a class="var it6913" onMouseOver="hilite(6913)" onMouseOut="lolite()" onClick="logVariable('separators_exists')" href="../../../_variables/separators_exists.html">$separators_exists</a> = false;
<a name="l962"><span class="linenum"> 962</span></a>      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a> ) )
<a name="l963"><span class="linenum"> 963</span></a>      { // Find in array
<a name="l964"><span class="linenum"> 964</span></a>          foreach( <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a> as <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../_variables/separator.html">$separator</a> )
<a name="l965"><span class="linenum"> 965</span></a>          {
<a name="l966"><span class="linenum"> 966</span></a>              if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../_variables/separator.html">$separator</a> ) !== false )
<a name="l967"><span class="linenum"> 967</span></a>              { // Separator is found
<a name="l968"><span class="linenum"> 968</span></a>                  <a class="var it6913" onMouseOver="hilite(6913)" onMouseOut="lolite()" onClick="logVariable('separators_exists')" href="../../../_variables/separators_exists.html">$separators_exists</a> = true;
<a name="l969"><span class="linenum"> 969</span></a>                  break;
<a name="l970"><span class="linenum"> 970</span></a>              }
<a name="l971"><span class="linenum"> 971</span></a>          }
<a name="l972"><span class="linenum"> 972</span></a>      }
<a name="l973"><span class="linenum"> 973</span></a>  
<a name="l974"><span class="linenum"> 974</span></a>      if( <a class="var it6913" onMouseOver="hilite(6913)" onMouseOut="lolite()" onClick="logVariable('separators_exists')" href="../../../_variables/separators_exists.html">$separators_exists</a> )
<a name="l975"><span class="linenum"> 975</span></a>      { // There are separators in content, Split the content:
<a name="l976"><span class="linenum"> 976</span></a>  
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment">        // Initialize temp values for replace the separators</span>
<a name="l978"><span class="linenum"> 978</span></a>          if( <a class="var it6912" onMouseOver="hilite(6912)" onMouseOut="lolite()" onClick="logVariable('capture_separator')" href="../../../_variables/capture_separator.html">$capture_separator</a> )
<a name="l979"><span class="linenum"> 979</span></a>          {
<a name="l980"><span class="linenum"> 980</span></a>              <a class="var it6914" onMouseOver="hilite(6914)" onMouseOut="lolite()" onClick="logVariable('rplc_separators')" href="../../../_variables/rplc_separators.html">$rplc_separators</a> = array();
<a name="l981"><span class="linenum"> 981</span></a>              foreach( <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a> as <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a> =&gt; <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../_variables/separator.html">$separator</a> )
<a name="l982"><span class="linenum"> 982</span></a>              {
<a name="l983"><span class="linenum"> 983</span></a>                  <a class="var it6914" onMouseOver="hilite(6914)" onMouseOut="lolite()" onClick="logVariable('rplc_separators')" href="../../../_variables/rplc_separators.html">$rplc_separators</a>[] = '#separator'.<a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a>.'='.md5( <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>() ).'#';
<a name="l984"><span class="linenum"> 984</span></a>              }
<a name="l985"><span class="linenum"> 985</span></a>          }
<a name="l986"><span class="linenum"> 986</span></a>          else
<a name="l987"><span class="linenum"> 987</span></a>          {
<a name="l988"><span class="linenum"> 988</span></a>              <a class="var it6914" onMouseOver="hilite(6914)" onMouseOut="lolite()" onClick="logVariable('rplc_separators')" href="../../../_variables/rplc_separators.html">$rplc_separators</a> = '#separator='.md5( <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>() ).'#';
<a name="l989"><span class="linenum"> 989</span></a>          }
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">        // Replace the content separators with temp value</span>
<a name="l991"><span class="linenum"> 991</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, '&lt;code' ) !== false || <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, '&lt;pre' ) !== false )
<a name="l992"><span class="linenum"> 992</span></a>          { // Call replace_separators_callback() on everything outside code/pre:
<a name="l993"><span class="linenum"> 993</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('callback_on_non_matching_blocks')" href="../../../_functions/callback_on_non_matching_blocks.html" onMouseOver="funcPopup(event,'callback_on_non_matching_blocks')">callback_on_non_matching_blocks</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>,
<a name="l994"><span class="linenum"> 994</span></a>                  '~&lt;(code|pre)[^&gt;]*&gt;.*?&lt;/\1&gt;~is',
<a name="l995"><span class="linenum"> 995</span></a>                  'replace_content', array( <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a>, <a class="var it6914" onMouseOver="hilite(6914)" onMouseOut="lolite()" onClick="logVariable('rplc_separators')" href="../../../_variables/rplc_separators.html">$rplc_separators</a>, 'str' ) );
<a name="l996"><span class="linenum"> 996</span></a>          }
<a name="l997"><span class="linenum"> 997</span></a>          else
<a name="l998"><span class="linenum"> 998</span></a>          { // No code/pre blocks, replace on the whole thing
<a name="l999"><span class="linenum"> 999</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a>, <a class="var it6914" onMouseOver="hilite(6914)" onMouseOut="lolite()" onClick="logVariable('rplc_separators')" href="../../../_variables/rplc_separators.html">$rplc_separators</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l1000"><span class="linenum">1000</span></a>          }
<a name="l1001"><span class="linenum">1001</span></a>  
<a name="l1002"><span class="linenum">1002</span></a>          if( <a class="var it6912" onMouseOver="hilite(6912)" onMouseOut="lolite()" onClick="logVariable('capture_separator')" href="../../../_variables/capture_separator.html">$capture_separator</a> )
<a name="l1003"><span class="linenum">1003</span></a>          { // Save the separators
<a name="l1004"><span class="linenum">1004</span></a>              <a class="var it6915" onMouseOver="hilite(6915)" onMouseOut="lolite()" onClick="logVariable('split_regexp')" href="../../../_variables/split_regexp.html">$split_regexp</a> = '~('.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '|', <a class="var it6914" onMouseOver="hilite(6914)" onMouseOut="lolite()" onClick="logVariable('rplc_separators')" href="../../../_variables/rplc_separators.html">$rplc_separators</a> ).')~s';
<a name="l1005"><span class="linenum">1005</span></a>              <a class="var it2166" onMouseOver="hilite(2166)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>( <a class="var it6915" onMouseOver="hilite(6915)" onMouseOut="lolite()" onClick="logVariable('split_regexp')" href="../../../_variables/split_regexp.html">$split_regexp</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, -1, PREG_SPLIT_DELIM_CAPTURE );
<a name="l1006"><span class="linenum">1006</span></a>              foreach( <a class="var it2166" onMouseOver="hilite(2166)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a> as <a class="var it635" onMouseOver="hilite(635)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../../_variables/c.html">$c</a> =&gt; <a class="var it6916" onMouseOver="hilite(6916)" onMouseOut="lolite()" onClick="logVariable('content_part')" href="../../../_variables/content_part.html">$content_part</a> )
<a name="l1007"><span class="linenum">1007</span></a>              {
<a name="l1008"><span class="linenum">1008</span></a>                  if( ( <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>( <a class="var it6916" onMouseOver="hilite(6916)" onMouseOut="lolite()" onClick="logVariable('content_part')" href="../../../_variables/content_part.html">$content_part</a>, <a class="var it6914" onMouseOver="hilite(6914)" onMouseOut="lolite()" onClick="logVariable('rplc_separators')" href="../../../_variables/rplc_separators.html">$rplc_separators</a> ) ) !== false )
<a name="l1009"><span class="linenum">1009</span></a>                  { // Replace original separator back
<a name="l1010"><span class="linenum">1010</span></a>                      <a class="var it2166" onMouseOver="hilite(2166)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a>[ <a class="var it635" onMouseOver="hilite(635)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../../_variables/c.html">$c</a> ] = <a class="var it6911" onMouseOver="hilite(6911)" onMouseOut="lolite()" onClick="logVariable('separators')" href="../../../_variables/separators.html">$separators</a>[ <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a> ];
<a name="l1011"><span class="linenum">1011</span></a>                  }
<a name="l1012"><span class="linenum">1012</span></a>              }
<a name="l1013"><span class="linenum">1013</span></a>              return <a class="var it2166" onMouseOver="hilite(2166)" onMouseOut="lolite()" onClick="logVariable('content_parts')" href="../../../_variables/content_parts.html">$content_parts</a>;
<a name="l1014"><span class="linenum">1014</span></a>          }
<a name="l1015"><span class="linenum">1015</span></a>          else
<a name="l1016"><span class="linenum">1016</span></a>          { // Return only splitted <a class="function" onClick="logFunction('content')" href="../../../_functions/content.html" onMouseOver="funcPopup(event,'content')">content</a>(without separators)
<a name="l1017"><span class="linenum">1017</span></a>              return <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( <a class="var it6914" onMouseOver="hilite(6914)" onMouseOut="lolite()" onClick="logVariable('rplc_separators')" href="../../../_variables/rplc_separators.html">$rplc_separators</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l1018"><span class="linenum">1018</span></a>          }
<a name="l1019"><span class="linenum">1019</span></a>      }
<a name="l1020"><span class="linenum">1020</span></a>      else
<a name="l1021"><span class="linenum">1021</span></a>      { // No separators in content, Return whole content as one element of array
<a name="l1022"><span class="linenum">1022</span></a>          return array( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> );
<a name="l1023"><span class="linenum">1023</span></a>      }
<a name="l1024"><span class="linenum">1024</span></a>  }
<a name="l1025"><span class="linenum">1025</span></a>  
<a name="l1026"><span class="linenum">1026</span></a>  
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment">/**</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment"> * Make links clickable in a given text.</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment"> *</span>
<a name="l1030"><span class="linenum">1030</span></a>  <span class="comment"> * It replaces only text which is not between &lt;a&gt; tags already.</span>
<a name="l1031"><span class="linenum">1031</span></a>  <span class="comment"> *</span>
<a name="l1032"><span class="linenum">1032</span></a>  <span class="comment"> * @todo dh&gt; this should not replace links in tags! currently fails for something</span>
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment"> *           like '&lt;img src=&quot; http://example.com/&quot; /&gt;' (not usual though!)</span>
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment"> * fp&gt; I am trying to address this by not replacing anything inside tags</span>
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment"> * fp&gt; This should be replaced by a clean state machine (one single variable for current state)</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment"> *</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment"> * {@internal This function gets tested in misc.funcs.simpletest.php.}}</span>
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment"> *</span>
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment"> * @param string Text</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment"> * @param string Url delimeter</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment"> * @param string Callback function name</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment"> * @param string Additional attributes for tag &lt;a&gt;</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment"> * @return string</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment"> */</span>
<a name="l1045"><span class="linenum">1045</span></a>  function <a class="function" onClick="logFunction('make_clickable')" href="../../../_functions/make_clickable.html" onMouseOver="funcPopup(event,'make_clickable')">make_clickable</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it1390" onMouseOver="hilite(1390)" onMouseOut="lolite()" onClick="logVariable('moredelim')" href="../../../_variables/moredelim.html">$moredelim</a> = '&amp;amp;', <a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a> = 'make_clickable_callback', <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> = '' )
<a name="l1046"><span class="linenum">1046</span></a>  {
<a name="l1047"><span class="linenum">1047</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l1048"><span class="linenum">1048</span></a>      <a class="var it6918" onMouseOver="hilite(6918)" onMouseOut="lolite()" onClick="logVariable('inside_tag')" href="../../../_variables/inside_tag.html">$inside_tag</a> = false;
<a name="l1049"><span class="linenum">1049</span></a>      <a class="var it6919" onMouseOver="hilite(6919)" onMouseOut="lolite()" onClick="logVariable('in_a_tag')" href="../../../_variables/in_a_tag.html">$in_a_tag</a> = false;
<a name="l1050"><span class="linenum">1050</span></a>      <a class="var it6920" onMouseOver="hilite(6920)" onMouseOut="lolite()" onClick="logVariable('in_code_tag')" href="../../../_variables/in_code_tag.html">$in_code_tag</a> = false;
<a name="l1051"><span class="linenum">1051</span></a>      <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> = false;
<a name="l1052"><span class="linenum">1052</span></a>      <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a> = 0;
<a name="l1053"><span class="linenum">1053</span></a>      <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0;
<a name="l1054"><span class="linenum">1054</span></a>      <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('n')" href="../../../_variables/n.html">$n</a> = strlen(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>);
<a name="l1055"><span class="linenum">1055</span></a>  
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">    // Not using callback_on_non_matching_blocks(), because it requires</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">    // wellformed HTML and the implementation below should be</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">    // faster and less memory intensive (tested for some example content)</span>
<a name="l1059"><span class="linenum">1059</span></a>      while( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt; <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('n')" href="../../../_variables/n.html">$n</a> )
<a name="l1060"><span class="linenum">1060</span></a>      {    // Go through each char in string... (we will fast forward from tag to tag)
<a name="l1061"><span class="linenum">1061</span></a>          if( <a class="var it6918" onMouseOver="hilite(6918)" onMouseOut="lolite()" onClick="logVariable('inside_tag')" href="../../../_variables/inside_tag.html">$inside_tag</a> )
<a name="l1062"><span class="linenum">1062</span></a>          {    // State: We're currently inside some tag:
<a name="l1063"><span class="linenum">1063</span></a>              switch( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] )
<a name="l1064"><span class="linenum">1064</span></a>              {
<a name="l1065"><span class="linenum">1065</span></a>                  case '&gt;':
<a name="l1066"><span class="linenum">1066</span></a>                      if( <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> )
<a name="l1067"><span class="linenum">1067</span></a>                      { // This is in a quoted string so it doesn't really matter...
<a name="l1068"><span class="linenum">1068</span></a>                          break;
<a name="l1069"><span class="linenum">1069</span></a>                      }
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">                    // end of tag:</span>
<a name="l1071"><span class="linenum">1071</span></a>                      <a class="var it6918" onMouseOver="hilite(6918)" onMouseOut="lolite()" onClick="logVariable('inside_tag')" href="../../../_variables/inside_tag.html">$inside_tag</a> = false;
<a name="l1072"><span class="linenum">1072</span></a>                      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>-<a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>+1);
<a name="l1073"><span class="linenum">1073</span></a>                      <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1;
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment">                    // $r .= '}';</span>
<a name="l1075"><span class="linenum">1075</span></a>                      break;
<a name="l1076"><span class="linenum">1076</span></a>  
<a name="l1077"><span class="linenum">1077</span></a>                  case '&quot;':
<a name="l1078"><span class="linenum">1078</span></a>                  case '\'':
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment">                    // This is the beginning or the end of a quoted string:</span>
<a name="l1080"><span class="linenum">1080</span></a>                      if( ! <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> )
<a name="l1081"><span class="linenum">1081</span></a>                      {
<a name="l1082"><span class="linenum">1082</span></a>                          <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> = <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>];
<a name="l1083"><span class="linenum">1083</span></a>                      }
<a name="l1084"><span class="linenum">1084</span></a>                      elseif( <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> == <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] )
<a name="l1085"><span class="linenum">1085</span></a>                      {
<a name="l1086"><span class="linenum">1086</span></a>                          <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> = false;
<a name="l1087"><span class="linenum">1087</span></a>                      }
<a name="l1088"><span class="linenum">1088</span></a>                      break;
<a name="l1089"><span class="linenum">1089</span></a>              }
<a name="l1090"><span class="linenum">1090</span></a>          }
<a name="l1091"><span class="linenum">1091</span></a>          elseif( <a class="var it6919" onMouseOver="hilite(6919)" onMouseOut="lolite()" onClick="logVariable('in_a_tag')" href="../../../_variables/in_a_tag.html">$in_a_tag</a> )
<a name="l1092"><span class="linenum">1092</span></a>          {    // In a link but no longer inside &lt;a&gt;...&lt;/a&gt; tag or any other embedded tag like &lt;strong&gt; or whatever
<a name="l1093"><span class="linenum">1093</span></a>              switch( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] )
<a name="l1094"><span class="linenum">1094</span></a>              {
<a name="l1095"><span class="linenum">1095</span></a>                  case '&lt;':
<a name="l1096"><span class="linenum">1096</span></a>                      if( <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1, 3)) == '/a&gt;' )
<a name="l1097"><span class="linenum">1097</span></a>                      {    // Ok, this is the end tag of the link:
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">                        // $r .= substr($text, $from_pos, $i-$from_pos+4);</span>
<a name="l1099"><span class="linenum">1099</span></a>  <span class="comment">                        // $from_pos = $i+4;</span>
<a name="l1100"><span class="linenum">1100</span></a>                          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> += 4;
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment">                        // pre_dump( 'END A TAG: '.substr($text, $from_pos, $i-$from_pos) );</span>
<a name="l1102"><span class="linenum">1102</span></a>                          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>-<a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>);
<a name="l1103"><span class="linenum">1103</span></a>                          <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l1104"><span class="linenum">1104</span></a>                          <a class="var it6919" onMouseOver="hilite(6919)" onMouseOut="lolite()" onClick="logVariable('in_a_tag')" href="../../../_variables/in_a_tag.html">$in_a_tag</a> = false;
<a name="l1105"><span class="linenum">1105</span></a>                          <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> = false;
<a name="l1106"><span class="linenum">1106</span></a>                      }
<a name="l1107"><span class="linenum">1107</span></a>                      break;
<a name="l1108"><span class="linenum">1108</span></a>              }
<a name="l1109"><span class="linenum">1109</span></a>          }
<a name="l1110"><span class="linenum">1110</span></a>          elseif( <a class="var it6920" onMouseOver="hilite(6920)" onMouseOut="lolite()" onClick="logVariable('in_code_tag')" href="../../../_variables/in_code_tag.html">$in_code_tag</a> )
<a name="l1111"><span class="linenum">1111</span></a>          {    // In a code but no longer inside &lt;code&gt;...&lt;/code&gt; tag or any other embedded tag like &lt;strong&gt; or whatever
<a name="l1112"><span class="linenum">1112</span></a>              switch( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] )
<a name="l1113"><span class="linenum">1113</span></a>              {
<a name="l1114"><span class="linenum">1114</span></a>                  case '&lt;':
<a name="l1115"><span class="linenum">1115</span></a>                      if( <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1, 5)) == '/code' )
<a name="l1116"><span class="linenum">1116</span></a>                      {    // Ok, this is the end tag of the code:
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment">                        // $r .= substr($text, $from_pos, $i-$from_pos+4);</span>
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment">                        // $from_pos = $i+4;</span>
<a name="l1119"><span class="linenum">1119</span></a>                          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> += 7;
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment">                        // pre_dump( 'END A TAG: '.substr($text, $from_pos, $i-$from_pos) );</span>
<a name="l1121"><span class="linenum">1121</span></a>                          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>-<a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>);
<a name="l1122"><span class="linenum">1122</span></a>                          <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l1123"><span class="linenum">1123</span></a>                          <a class="var it6920" onMouseOver="hilite(6920)" onMouseOut="lolite()" onClick="logVariable('in_code_tag')" href="../../../_variables/in_code_tag.html">$in_code_tag</a> = false;
<a name="l1124"><span class="linenum">1124</span></a>                          <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> = false;
<a name="l1125"><span class="linenum">1125</span></a>                      }
<a name="l1126"><span class="linenum">1126</span></a>                      break;
<a name="l1127"><span class="linenum">1127</span></a>              }
<a name="l1128"><span class="linenum">1128</span></a>          }
<a name="l1129"><span class="linenum">1129</span></a>          else
<a name="l1130"><span class="linenum">1130</span></a>          { // State: we're not currently in any tag:
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment">            // Find next tag opening:</span>
<a name="l1132"><span class="linenum">1132</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, '&lt;', <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>);
<a name="l1133"><span class="linenum">1133</span></a>              if( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> === false )
<a name="l1134"><span class="linenum">1134</span></a>              { // No more opening tags:
<a name="l1135"><span class="linenum">1135</span></a>                  break;
<a name="l1136"><span class="linenum">1136</span></a>              }
<a name="l1137"><span class="linenum">1137</span></a>  
<a name="l1138"><span class="linenum">1138</span></a>              <a class="var it6918" onMouseOver="hilite(6918)" onMouseOut="lolite()" onClick="logVariable('inside_tag')" href="../../../_variables/inside_tag.html">$inside_tag</a> = true;
<a name="l1139"><span class="linenum">1139</span></a>              <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('in_tag_quote')" href="../../../_variables/in_tag_quote.html">$in_tag_quote</a> = false;
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment">            // s$r .= '{'.$text[$i+1];</span>
<a name="l1141"><span class="linenum">1141</span></a>  
<a name="l1142"><span class="linenum">1142</span></a>              if( (<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1] == 'a' || <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1] == 'A') &amp;&amp; <a class="phpfunction" onClick="logFunction('ctype_space')" href="../../../_functions/ctype_space.html" onMouseOver="phpfuncPopup(event,'ctype_space')">ctype_space</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+2]) )
<a name="l1143"><span class="linenum">1143</span></a>              { // opening &quot;A&quot; tag
<a name="l1144"><span class="linenum">1144</span></a>                  <a class="var it6919" onMouseOver="hilite(6919)" onMouseOut="lolite()" onClick="logVariable('in_a_tag')" href="../../../_variables/in_a_tag.html">$in_a_tag</a> = true;
<a name="l1145"><span class="linenum">1145</span></a>              }
<a name="l1146"><span class="linenum">1146</span></a>  
<a name="l1147"><span class="linenum">1147</span></a>              if( ( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>+1, 4 ) == 'code') )
<a name="l1148"><span class="linenum">1148</span></a>              { // opening &quot;code&quot; tag
<a name="l1149"><span class="linenum">1149</span></a>                  <a class="var it6920" onMouseOver="hilite(6920)" onMouseOut="lolite()" onClick="logVariable('in_code_tag')" href="../../../_variables/in_code_tag.html">$in_code_tag</a> = true;
<a name="l1150"><span class="linenum">1150</span></a>              }
<a name="l1151"><span class="linenum">1151</span></a>  
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment">            // Make the text before the opening &lt; clickable:</span>
<a name="l1153"><span class="linenum">1153</span></a>              if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>) )
<a name="l1154"><span class="linenum">1154</span></a>              {
<a name="l1155"><span class="linenum">1155</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>[0]-&gt;<a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>[1]( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>-<a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>), <a class="var it1390" onMouseOver="hilite(1390)" onMouseOut="lolite()" onClick="logVariable('moredelim')" href="../../../_variables/moredelim.html">$moredelim</a>, <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> );
<a name="l1156"><span class="linenum">1156</span></a>              }
<a name="l1157"><span class="linenum">1157</span></a>              else
<a name="l1158"><span class="linenum">1158</span></a>              {
<a name="l1159"><span class="linenum">1159</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>-<a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>), <a class="var it1390" onMouseOver="hilite(1390)" onMouseOut="lolite()" onClick="logVariable('moredelim')" href="../../../_variables/moredelim.html">$moredelim</a>, <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> );
<a name="l1160"><span class="linenum">1160</span></a>              }
<a name="l1161"><span class="linenum">1161</span></a>              <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l1162"><span class="linenum">1162</span></a>  
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment">            // $i += 2;</span>
<a name="l1164"><span class="linenum">1164</span></a>          }
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++;
<a name="l1167"><span class="linenum">1167</span></a>      }
<a name="l1168"><span class="linenum">1168</span></a>  
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment">    // the remaining part:</span>
<a name="l1170"><span class="linenum">1170</span></a>      if( <a class="var it6919" onMouseOver="hilite(6919)" onMouseOut="lolite()" onClick="logVariable('in_a_tag')" href="../../../_variables/in_a_tag.html">$in_a_tag</a> )
<a name="l1171"><span class="linenum">1171</span></a>      { // may happen for invalid html:
<a name="l1172"><span class="linenum">1172</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>);
<a name="l1173"><span class="linenum">1173</span></a>      }
<a name="l1174"><span class="linenum">1174</span></a>      else
<a name="l1175"><span class="linenum">1175</span></a>      {    // Make remplacements in the remaining part:
<a name="l1176"><span class="linenum">1176</span></a>          if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>) )
<a name="l1177"><span class="linenum">1177</span></a>          {
<a name="l1178"><span class="linenum">1178</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>[0]-&gt;<a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>[1]( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>), <a class="var it1390" onMouseOver="hilite(1390)" onMouseOut="lolite()" onClick="logVariable('moredelim')" href="../../../_variables/moredelim.html">$moredelim</a>, <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> );
<a name="l1179"><span class="linenum">1179</span></a>          }
<a name="l1180"><span class="linenum">1180</span></a>          else
<a name="l1181"><span class="linenum">1181</span></a>          {
<a name="l1182"><span class="linenum">1182</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it2424" onMouseOver="hilite(2424)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../../_variables/callback.html">$callback</a>( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('from_pos')" href="../../../_variables/from_pos.html">$from_pos</a>), <a class="var it1390" onMouseOver="hilite(1390)" onMouseOut="lolite()" onClick="logVariable('moredelim')" href="../../../_variables/moredelim.html">$moredelim</a>, <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> );
<a name="l1183"><span class="linenum">1183</span></a>          }
<a name="l1184"><span class="linenum">1184</span></a>      }
<a name="l1185"><span class="linenum">1185</span></a>  
<a name="l1186"><span class="linenum">1186</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1187"><span class="linenum">1187</span></a>  }
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>  
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment">/**</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment"> * Callback function for {@link make_clickable()}.</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment"> *</span>
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment"> * original function: phpBB, extended here for AIM &amp; ICQ</span>
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment"> * fplanque restricted :// to http:// and mailto://</span>
<a name="l1195"><span class="linenum">1195</span></a>  <span class="comment"> * Fixed to not include trailing dot and comma.</span>
<a name="l1196"><span class="linenum">1196</span></a>  <span class="comment"> *</span>
<a name="l1197"><span class="linenum">1197</span></a>  <span class="comment"> * fp&gt; I'm thinking of moving this into the autolinks plugin (only place where it's used)</span>
<a name="l1198"><span class="linenum">1198</span></a>  <span class="comment"> *     and break it up into something more systematic.</span>
<a name="l1199"><span class="linenum">1199</span></a>  <span class="comment"> *</span>
<a name="l1200"><span class="linenum">1200</span></a>  <span class="comment"> * @param string Text</span>
<a name="l1201"><span class="linenum">1201</span></a>  <span class="comment"> * @param string Url delimeter</span>
<a name="l1202"><span class="linenum">1202</span></a>  <span class="comment"> * @param string Additional attributes for tag &lt;a&gt;</span>
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment"> * @return string The clickable text.</span>
<a name="l1204"><span class="linenum">1204</span></a>  <span class="comment"> */</span>
<a name="l1205"><span class="linenum">1205</span></a>  function <a class="function" onClick="logFunction('make_clickable_callback')" href="../../../_functions/make_clickable_callback.html" onMouseOver="funcPopup(event,'make_clickable_callback')">make_clickable_callback</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it1390" onMouseOver="hilite(1390)" onMouseOut="lolite()" onClick="logVariable('moredelim')" href="../../../_variables/moredelim.html">$moredelim</a> = '&amp;amp;', <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> = '' )
<a name="l1206"><span class="linenum">1206</span></a>  {
<a name="l1207"><span class="linenum">1207</span></a>      if( !empty( <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> ) )
<a name="l1208"><span class="linenum">1208</span></a>      {
<a name="l1209"><span class="linenum">1209</span></a>          <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> = ' '.<a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a> );
<a name="l1210"><span class="linenum">1210</span></a>      }
<a name="l1211"><span class="linenum">1211</span></a>  <span class="comment">    //return $text;</span>
<a name="l1212"><span class="linenum">1212</span></a>      <span class="comment">/*preg_match( '/&lt;code&gt;([.\r\n]+?)&lt;\/code&gt;/i', $text, $matches );</span>
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment">    pre_dump( $text, $matches );*/</span>
<a name="l1214"><span class="linenum">1214</span></a>  
<a name="l1215"><span class="linenum">1215</span></a>      <a class="var it6923" onMouseOver="hilite(6923)" onMouseOut="lolite()" onClick="logVariable('pattern_domain')" href="../../../_variables/pattern_domain.html">$pattern_domain</a> = '([\p{L}0-9\-]+\.[\p{L}0-9\-.\~]+)'; <span class="comment">// a domain name (not very strict)</span>
<a name="l1216"><span class="linenum">1216</span></a>      <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(
<a name="l1217"><span class="linenum">1217</span></a>          <span class="comment">/* Tblue&gt; I removed the double quotes from the first RegExp because</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment">                  it made URLs in tag attributes clickable.</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">                  See http://forums.b2evolution.net/viewtopic.php?p=92073 */</span>
<a name="l1220"><span class="linenum">1220</span></a>          array( '#(^|[\s&gt;\(]|\[url=)(https?|mailto)://([^&lt;&gt;{}\s]+[^.,&lt;&gt;{}\s\]\)])#i',
<a name="l1221"><span class="linenum">1221</span></a>              '#(^|[\s&gt;\(]|\[url=)aim:([^,&lt;\s\]\)]+)#i',
<a name="l1222"><span class="linenum">1222</span></a>              '#(^|[\s&gt;\(]|\[url=)icq:(\d+)#i',
<a name="l1223"><span class="linenum">1223</span></a>              '#(^|[\s&gt;\(]|\[url=)www\.'.<a class="var it6923" onMouseOver="hilite(6923)" onMouseOut="lolite()" onClick="logVariable('pattern_domain')" href="../../../_variables/pattern_domain.html">$pattern_domain</a>.'((?:/[^&lt;\s]*)?[^.,\s\]\)])#i',
<a name="l1224"><span class="linenum">1224</span></a>              '#(^|[\s&gt;\(]|\[url=)([a-z0-9\-_.]+?)@'.<a class="var it6923" onMouseOver="hilite(6923)" onMouseOut="lolite()" onClick="logVariable('pattern_domain')" href="../../../_variables/pattern_domain.html">$pattern_domain</a>.'([^.,&lt;\s\]\)]+)#i', ),
<a name="l1225"><span class="linenum">1225</span></a>          array( '<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>&lt;a href=&quot;<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a>://<a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a>&quot;'.<a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a>.'&gt;<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a>://<a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a>&lt;/a&gt;',
<a name="l1226"><span class="linenum">1226</span></a>              '<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>&lt;a href=&quot;aim:goim?screenname=<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a><a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a>'.<a class="var it1390" onMouseOver="hilite(1390)" onMouseOut="lolite()" onClick="logVariable('moredelim')" href="../../../_variables/moredelim.html">$moredelim</a>.'message='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>(<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Hello')).'&quot;'.<a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a>.'&gt;<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a><a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a>&lt;/a&gt;',
<a name="l1227"><span class="linenum">1227</span></a>              '<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>&lt;a href=&quot;http://wwp.icq.com/scripts/search.dll?to=<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a>&quot;'.<a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a>.'&gt;<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a>&lt;/a&gt;',
<a name="l1228"><span class="linenum">1228</span></a>              '<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>&lt;a href=&quot;http://www.<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a><a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a><a class="var it698" onMouseOver="hilite(698)" onMouseOut="lolite()" onClick="logVariable('4')" href="../../../_variables/4.html">$4</a>&quot;'.<a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a>.'&gt;www.<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a><a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a><a class="var it698" onMouseOver="hilite(698)" onMouseOut="lolite()" onClick="logVariable('4')" href="../../../_variables/4.html">$4</a>&lt;/a&gt;',
<a name="l1229"><span class="linenum">1229</span></a>              '<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>&lt;a href=&quot;mailto:<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a>@<a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a><a class="var it698" onMouseOver="hilite(698)" onMouseOut="lolite()" onClick="logVariable('4')" href="../../../_variables/4.html">$4</a>&quot;'.<a class="var it6917" onMouseOver="hilite(6917)" onMouseOut="lolite()" onClick="logVariable('additional_attrs')" href="../../../_variables/additional_attrs.html">$additional_attrs</a>.'&gt;<a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a>@<a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a><a class="var it698" onMouseOver="hilite(698)" onMouseOut="lolite()" onClick="logVariable('4')" href="../../../_variables/4.html">$4</a>&lt;/a&gt;', ),
<a name="l1230"><span class="linenum">1230</span></a>          <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> );
<a name="l1231"><span class="linenum">1231</span></a>  
<a name="l1232"><span class="linenum">1232</span></a>      return <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>;
<a name="l1233"><span class="linenum">1233</span></a>  }
<a name="l1234"><span class="linenum">1234</span></a>  
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">/***** // Formatting functions *****/</span>
<a name="l1237"><span class="linenum">1237</span></a>  
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment">/**</span>
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment"> * Convert timestamp to MySQL/ISO format.</span>
<a name="l1240"><span class="linenum">1240</span></a>  <span class="comment"> *</span>
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment"> * @param integer UNIX timestamp</span>
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment"> * @return string Date formatted as &quot;Y-m-d H:i:s&quot;</span>
<a name="l1243"><span class="linenum">1243</span></a>  <span class="comment"> */</span>
<a name="l1244"><span class="linenum">1244</span></a>  function <a class="function" onClick="logFunction('date2mysql')" href="../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it6924" onMouseOver="hilite(6924)" onMouseOut="lolite()" onClick="logVariable('ts')" href="../../../_variables/ts.html">$ts</a> )
<a name="l1245"><span class="linenum">1245</span></a>  {
<a name="l1246"><span class="linenum">1246</span></a>      return <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>( 'Y-m-d H:i:s', <a class="var it6924" onMouseOver="hilite(6924)" onMouseOut="lolite()" onClick="logVariable('ts')" href="../../../_variables/ts.html">$ts</a> );
<a name="l1247"><span class="linenum">1247</span></a>  }
<a name="l1248"><span class="linenum">1248</span></a>  
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment">/**</span>
<a name="l1250"><span class="linenum">1250</span></a>  <span class="comment"> * Convert a MYSQL date to a UNIX timestamp.</span>
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment"> *</span>
<a name="l1252"><span class="linenum">1252</span></a>  <span class="comment"> * @param string Date formatted as &quot;Y-m-d H:i:s&quot;</span>
<a name="l1253"><span class="linenum">1253</span></a>  <span class="comment"> * @param boolean true to use GM time</span>
<a name="l1254"><span class="linenum">1254</span></a>  <span class="comment"> * @return integer UNIX timestamp</span>
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment"> */</span>
<a name="l1256"><span class="linenum">1256</span></a>  function <a class="function" onClick="logFunction('mysql2timestamp')" href="../../../_functions/mysql2timestamp.html" onMouseOver="funcPopup(event,'mysql2timestamp')">mysql2timestamp</a>( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>, <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l1257"><span class="linenum">1257</span></a>  {
<a name="l1258"><span class="linenum">1258</span></a>      <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../_variables/func.html">$func</a> = <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> ? 'gmmktime' : 'mktime';
<a name="l1259"><span class="linenum">1259</span></a>      return <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../_variables/func.html">$func</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,11,2),<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,14,2),<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,17,2),<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,5,2),<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,8,2),<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,0,4));
<a name="l1260"><span class="linenum">1260</span></a>  }
<a name="l1261"><span class="linenum">1261</span></a>  
<a name="l1262"><span class="linenum">1262</span></a>  <span class="comment">/**</span>
<a name="l1263"><span class="linenum">1263</span></a>  <span class="comment"> * Convert a MYSQL date -- WITHOUT the time -- to a UNIX timestamp</span>
<a name="l1264"><span class="linenum">1264</span></a>  <span class="comment"> *</span>
<a name="l1265"><span class="linenum">1265</span></a>  <span class="comment"> * @param string Date formatted as &quot;Y-m-d&quot;</span>
<a name="l1266"><span class="linenum">1266</span></a>  <span class="comment"> * @param boolean true to use GM time</span>
<a name="l1267"><span class="linenum">1267</span></a>  <span class="comment"> * @return integer UNIX timestamp</span>
<a name="l1268"><span class="linenum">1268</span></a>  <span class="comment"> */</span>
<a name="l1269"><span class="linenum">1269</span></a>  function <a class="function" onClick="logFunction('mysql2datestamp')" href="../../../_functions/mysql2datestamp.html" onMouseOver="funcPopup(event,'mysql2datestamp')">mysql2datestamp</a>( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>, <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l1270"><span class="linenum">1270</span></a>  {
<a name="l1271"><span class="linenum">1271</span></a>      <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../_variables/func.html">$func</a> = <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> ? 'gmmktime' : 'mktime';
<a name="l1272"><span class="linenum">1272</span></a>      return <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../_variables/func.html">$func</a>( 0, 0, 0, <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,5,2), <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,8,2), <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>,0,4) );
<a name="l1273"><span class="linenum">1273</span></a>  }
<a name="l1274"><span class="linenum">1274</span></a>  
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">/**</span>
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment"> * Format a MYSQL date to current locale date format.</span>
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment"> *</span>
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment"> * @param string MYSQL date YYYY-MM-DD HH:MM:SS</span>
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment"> */</span>
<a name="l1280"><span class="linenum">1280</span></a>  function <a class="function" onClick="logFunction('mysql2localedate')" href="../../../_functions/mysql2localedate.html" onMouseOver="funcPopup(event,'mysql2localedate')">mysql2localedate</a>( <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a> )
<a name="l1281"><span class="linenum">1281</span></a>  {
<a name="l1282"><span class="linenum">1282</span></a>      return <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="function" onClick="logFunction('locale_datefmt')" href="../../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>(), <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a> );
<a name="l1283"><span class="linenum">1283</span></a>  }
<a name="l1284"><span class="linenum">1284</span></a>  
<a name="l1285"><span class="linenum">1285</span></a>  function <a class="function" onClick="logFunction('mysql2localetime')" href="../../../_functions/mysql2localetime.html" onMouseOver="funcPopup(event,'mysql2localetime')">mysql2localetime</a>( <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a> )
<a name="l1286"><span class="linenum">1286</span></a>  {
<a name="l1287"><span class="linenum">1287</span></a>      return <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="function" onClick="logFunction('locale_timefmt')" href="../../../_functions/locale_timefmt.html" onMouseOver="funcPopup(event,'locale_timefmt')">locale_timefmt</a>(), <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a> );
<a name="l1288"><span class="linenum">1288</span></a>  }
<a name="l1289"><span class="linenum">1289</span></a>  
<a name="l1290"><span class="linenum">1290</span></a>  function <a class="function" onClick="logFunction('mysql2localedatetime')" href="../../../_functions/mysql2localedatetime.html" onMouseOver="funcPopup(event,'mysql2localedatetime')">mysql2localedatetime</a>( <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a> )
<a name="l1291"><span class="linenum">1291</span></a>  {
<a name="l1292"><span class="linenum">1292</span></a>      return <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="function" onClick="logFunction('locale_datefmt')" href="../../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>().' '.<a class="function" onClick="logFunction('locale_timefmt')" href="../../../_functions/locale_timefmt.html" onMouseOver="funcPopup(event,'locale_timefmt')">locale_timefmt</a>(), <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a> );
<a name="l1293"><span class="linenum">1293</span></a>  }
<a name="l1294"><span class="linenum">1294</span></a>  
<a name="l1295"><span class="linenum">1295</span></a>  function <a class="function" onClick="logFunction('mysql2localedatetime_spans')" href="../../../_functions/mysql2localedatetime_spans.html" onMouseOver="funcPopup(event,'mysql2localedatetime_spans')">mysql2localedatetime_spans</a>( <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a>, <a class="var it3301" onMouseOver="hilite(3301)" onMouseOut="lolite()" onClick="logVariable('datefmt')" href="../../../_variables/datefmt.html">$datefmt</a> = NULL, <a class="var it6926" onMouseOver="hilite(6926)" onMouseOut="lolite()" onClick="logVariable('timefmt')" href="../../../_variables/timefmt.html">$timefmt</a> = NULL )
<a name="l1296"><span class="linenum">1296</span></a>  {
<a name="l1297"><span class="linenum">1297</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3301" onMouseOver="hilite(3301)" onMouseOut="lolite()" onClick="logVariable('datefmt')" href="../../../_variables/datefmt.html">$datefmt</a> ) )
<a name="l1298"><span class="linenum">1298</span></a>      {
<a name="l1299"><span class="linenum">1299</span></a>          <a class="var it3301" onMouseOver="hilite(3301)" onMouseOut="lolite()" onClick="logVariable('datefmt')" href="../../../_variables/datefmt.html">$datefmt</a> = <a class="function" onClick="logFunction('locale_datefmt')" href="../../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>();
<a name="l1300"><span class="linenum">1300</span></a>      }
<a name="l1301"><span class="linenum">1301</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it6926" onMouseOver="hilite(6926)" onMouseOut="lolite()" onClick="logVariable('timefmt')" href="../../../_variables/timefmt.html">$timefmt</a> ) )
<a name="l1302"><span class="linenum">1302</span></a>      {
<a name="l1303"><span class="linenum">1303</span></a>          <a class="var it6926" onMouseOver="hilite(6926)" onMouseOut="lolite()" onClick="logVariable('timefmt')" href="../../../_variables/timefmt.html">$timefmt</a> = <a class="function" onClick="logFunction('locale_timefmt')" href="../../../_functions/locale_timefmt.html" onMouseOver="funcPopup(event,'locale_timefmt')">locale_timefmt</a>();
<a name="l1304"><span class="linenum">1304</span></a>      }
<a name="l1305"><span class="linenum">1305</span></a>  
<a name="l1306"><span class="linenum">1306</span></a>      return '&lt;span class=&quot;date&quot;&gt;'
<a name="l1307"><span class="linenum">1307</span></a>                      .<a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it3301" onMouseOver="hilite(3301)" onMouseOut="lolite()" onClick="logVariable('datefmt')" href="../../../_variables/datefmt.html">$datefmt</a>, <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a> )
<a name="l1308"><span class="linenum">1308</span></a>                      .'&lt;/span&gt; &lt;span class=&quot;time&quot;&gt;'
<a name="l1309"><span class="linenum">1309</span></a>                      .<a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it6926" onMouseOver="hilite(6926)" onMouseOut="lolite()" onClick="logVariable('timefmt')" href="../../../_variables/timefmt.html">$timefmt</a>, <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a> )
<a name="l1310"><span class="linenum">1310</span></a>                      .'&lt;/span&gt;';
<a name="l1311"><span class="linenum">1311</span></a>  }
<a name="l1312"><span class="linenum">1312</span></a>  
<a name="l1313"><span class="linenum">1313</span></a>  
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment">/**</span>
<a name="l1315"><span class="linenum">1315</span></a>  <span class="comment"> * Format a MYSQL date.</span>
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment"> *</span>
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment"> * @param string enhanced format string</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment"> * @param string MYSQL date YYYY-MM-DD HH:MM:SS</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment"> * @param boolean true to use GM time</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment"> */</span>
<a name="l1321"><span class="linenum">1321</span></a>  function <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('dateformatstring')" href="../../../_variables/dateformatstring.html">$dateformatstring</a>, <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a>, <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l1322"><span class="linenum">1322</span></a>  {
<a name="l1323"><span class="linenum">1323</span></a>      <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a> = <a class="var it6925" onMouseOver="hilite(6925)" onMouseOut="lolite()" onClick="logVariable('mysqlstring')" href="../../../_variables/mysqlstring.html">$mysqlstring</a>;
<a name="l1324"><span class="linenum">1324</span></a>      if( empty(<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a>) || (<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a> == '0000-00-00 00:00:00' ) )
<a name="l1325"><span class="linenum">1325</span></a>          return false;
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">    // Get a timestamp:</span>
<a name="l1328"><span class="linenum">1328</span></a>      <a class="var it6928" onMouseOver="hilite(6928)" onMouseOut="lolite()" onClick="logVariable('unixtimestamp')" href="../../../_variables/unixtimestamp.html">$unixtimestamp</a> = <a class="function" onClick="logFunction('mysql2timestamp')" href="../../../_functions/mysql2timestamp.html" onMouseOver="funcPopup(event,'mysql2timestamp')">mysql2timestamp</a>( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../../_variables/m.html">$m</a> );
<a name="l1329"><span class="linenum">1329</span></a>  
<a name="l1330"><span class="linenum">1330</span></a>      return <a class="function" onClick="logFunction('date_i18n')" href="../../../_functions/date_i18n.html" onMouseOver="funcPopup(event,'date_i18n')">date_i18n</a>( <a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('dateformatstring')" href="../../../_variables/dateformatstring.html">$dateformatstring</a>, <a class="var it6928" onMouseOver="hilite(6928)" onMouseOut="lolite()" onClick="logVariable('unixtimestamp')" href="../../../_variables/unixtimestamp.html">$unixtimestamp</a>, <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l1331"><span class="linenum">1331</span></a>  }
<a name="l1332"><span class="linenum">1332</span></a>  
<a name="l1333"><span class="linenum">1333</span></a>  
<a name="l1334"><span class="linenum">1334</span></a>  <span class="comment">/**</span>
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment"> * Date internationalization: same as date() formatting but with i18n support.</span>
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment"> *</span>
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment"> * @todo dh&gt; support for MySQL date format instead of $unixtimestamp? This would simplify callees, where currently mktime() is used.</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment"> * @param string enhanced format string</span>
<a name="l1339"><span class="linenum">1339</span></a>  <span class="comment"> * @param integer UNIX timestamp</span>
<a name="l1340"><span class="linenum">1340</span></a>  <span class="comment"> * @param boolean true to use GM time</span>
<a name="l1341"><span class="linenum">1341</span></a>  <span class="comment"> */</span>
<a name="l1342"><span class="linenum">1342</span></a>  function <a class="function" onClick="logFunction('date_i18n')" href="../../../_functions/date_i18n.html" onMouseOver="funcPopup(event,'date_i18n')">date_i18n</a>( <a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('dateformatstring')" href="../../../_variables/dateformatstring.html">$dateformatstring</a>, <a class="var it6928" onMouseOver="hilite(6928)" onMouseOut="lolite()" onClick="logVariable('unixtimestamp')" href="../../../_variables/unixtimestamp.html">$unixtimestamp</a>, <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l1343"><span class="linenum">1343</span></a>  {
<a name="l1344"><span class="linenum">1344</span></a>      global <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('month')" href="../../../_variables/month.html">$month</a>, <a class="var it6929" onMouseOver="hilite(6929)" onMouseOut="lolite()" onClick="logVariable('month_abbrev')" href="../../../_variables/month_abbrev.html">$month_abbrev</a>, <a class="var it6930" onMouseOver="hilite(6930)" onMouseOut="lolite()" onClick="logVariable('weekday')" href="../../../_variables/weekday.html">$weekday</a>, <a class="var it6137" onMouseOver="hilite(6137)" onMouseOut="lolite()" onClick="logVariable('weekday_abbrev')" href="../../../_variables/weekday_abbrev.html">$weekday_abbrev</a>, <a class="var it6114" onMouseOver="hilite(6114)" onMouseOut="lolite()" onClick="logVariable('weekday_letter')" href="../../../_variables/weekday_letter.html">$weekday_letter</a>;
<a name="l1345"><span class="linenum">1345</span></a>      global <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../../_variables/time_difference.html">$time_difference</a>;
<a name="l1346"><span class="linenum">1346</span></a>  
<a name="l1347"><span class="linenum">1347</span></a>      if( <a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('dateformatstring')" href="../../../_variables/dateformatstring.html">$dateformatstring</a> == 'isoZ' )
<a name="l1348"><span class="linenum">1348</span></a>      { // full ISO 8601 format
<a name="l1349"><span class="linenum">1349</span></a>          <a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('dateformatstring')" href="../../../_variables/dateformatstring.html">$dateformatstring</a> = 'Y-m-d\TH:i:s\Z';
<a name="l1350"><span class="linenum">1350</span></a>      }
<a name="l1351"><span class="linenum">1351</span></a>  
<a name="l1352"><span class="linenum">1352</span></a>      if( <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> )
<a name="l1353"><span class="linenum">1353</span></a>      { // We want a Greenwich Meridian time:
<a name="l1354"><span class="linenum">1354</span></a>  <span class="comment">        // TODO: dh&gt; what's the point of the substraction? UNIX timestamp should contain no time_difference in the first place?! Otherwise it should be substracted for !$useGM, too.</span>
<a name="l1355"><span class="linenum">1355</span></a>  <span class="comment">        // TODO: dh&gt; Why does $useGM do not get the special symbols handling?</span>
<a name="l1356"><span class="linenum">1356</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('gmdate')" href="../../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>(<a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('dateformatstring')" href="../../../_variables/dateformatstring.html">$dateformatstring</a>, (<a class="var it6928" onMouseOver="hilite(6928)" onMouseOut="lolite()" onClick="logVariable('unixtimestamp')" href="../../../_variables/unixtimestamp.html">$unixtimestamp</a> - <a class="var it349" onMouseOver="hilite(349)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../../_variables/time_difference.html">$time_difference</a>));
<a name="l1357"><span class="linenum">1357</span></a>      }
<a name="l1358"><span class="linenum">1358</span></a>      else
<a name="l1359"><span class="linenum">1359</span></a>      { // We want default timezone time:
<a name="l1360"><span class="linenum">1360</span></a>  
<a name="l1361"><span class="linenum">1361</span></a>          <span class="comment">/*</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">        Special symbols:</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">            'b': wether it's today (1) or not (0)</span>
<a name="l1364"><span class="linenum">1364</span></a>  <span class="comment">            'l': weekday</span>
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment">            'D': weekday abbrev</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment">            'e': weekday letter</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">            'F': month</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment">            'M': month abbrev</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">        */</span>
<a name="l1370"><span class="linenum">1370</span></a>  
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">        #echo $dateformatstring, '&lt;br /&gt;';</span>
<a name="l1372"><span class="linenum">1372</span></a>  
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment">        // protect special symbols, that date() would need proper locale set for</span>
<a name="l1374"><span class="linenum">1374</span></a>          <a class="var it6931" onMouseOver="hilite(6931)" onMouseOut="lolite()" onClick="logVariable('protected_dateformatstring')" href="../../../_variables/protected_dateformatstring.html">$protected_dateformatstring</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/(?&lt;!\\\)([blDeFM])/', '@@@\\\<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>@@@', <a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('dateformatstring')" href="../../../_variables/dateformatstring.html">$dateformatstring</a> );
<a name="l1375"><span class="linenum">1375</span></a>  
<a name="l1376"><span class="linenum">1376</span></a>  <span class="comment">        #echo $protected_dateformatstring, '&lt;br /&gt;';</span>
<a name="l1377"><span class="linenum">1377</span></a>  
<a name="l1378"><span class="linenum">1378</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>( <a class="var it6931" onMouseOver="hilite(6931)" onMouseOut="lolite()" onClick="logVariable('protected_dateformatstring')" href="../../../_variables/protected_dateformatstring.html">$protected_dateformatstring</a>, <a class="var it6928" onMouseOver="hilite(6928)" onMouseOut="lolite()" onClick="logVariable('unixtimestamp')" href="../../../_variables/unixtimestamp.html">$unixtimestamp</a> );
<a name="l1379"><span class="linenum">1379</span></a>  
<a name="l1380"><span class="linenum">1380</span></a>          if( <a class="var it6931" onMouseOver="hilite(6931)" onMouseOut="lolite()" onClick="logVariable('protected_dateformatstring')" href="../../../_variables/protected_dateformatstring.html">$protected_dateformatstring</a> != <a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('dateformatstring')" href="../../../_variables/dateformatstring.html">$dateformatstring</a> )
<a name="l1381"><span class="linenum">1381</span></a>          { // we had special symbols, replace them
<a name="l1382"><span class="linenum">1382</span></a>  
<a name="l1383"><span class="linenum">1383</span></a>              <a class="var it6932" onMouseOver="hilite(6932)" onMouseOut="lolite()" onClick="logVariable('istoday')" href="../../../_variables/istoday.html">$istoday</a> = ( <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Ymd',<a class="var it6928" onMouseOver="hilite(6928)" onMouseOut="lolite()" onClick="logVariable('unixtimestamp')" href="../../../_variables/unixtimestamp.html">$unixtimestamp</a>) == <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Ymd',<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>) ) ? '1' : '0';
<a name="l1384"><span class="linenum">1384</span></a>              <a class="var it6933" onMouseOver="hilite(6933)" onMouseOut="lolite()" onClick="logVariable('datemonth')" href="../../../_variables/datemonth.html">$datemonth</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('m', <a class="var it6928" onMouseOver="hilite(6928)" onMouseOut="lolite()" onClick="logVariable('unixtimestamp')" href="../../../_variables/unixtimestamp.html">$unixtimestamp</a>);
<a name="l1385"><span class="linenum">1385</span></a>              <a class="var it6934" onMouseOver="hilite(6934)" onMouseOut="lolite()" onClick="logVariable('dateweekday')" href="../../../_variables/dateweekday.html">$dateweekday</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('w', <a class="var it6928" onMouseOver="hilite(6928)" onMouseOut="lolite()" onClick="logVariable('unixtimestamp')" href="../../../_variables/unixtimestamp.html">$unixtimestamp</a>);
<a name="l1386"><span class="linenum">1386</span></a>  
<a name="l1387"><span class="linenum">1387</span></a>  <span class="comment">            // replace special symbols</span>
<a name="l1388"><span class="linenum">1388</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array(
<a name="l1389"><span class="linenum">1389</span></a>                          '@@@b@@@',
<a name="l1390"><span class="linenum">1390</span></a>                          '@@@l@@@',
<a name="l1391"><span class="linenum">1391</span></a>                          '@@@D@@@',
<a name="l1392"><span class="linenum">1392</span></a>                          '@@@e@@@',
<a name="l1393"><span class="linenum">1393</span></a>                          '@@@F@@@',
<a name="l1394"><span class="linenum">1394</span></a>                          '@@@M@@@',
<a name="l1395"><span class="linenum">1395</span></a>                          ),
<a name="l1396"><span class="linenum">1396</span></a>                      array( <a class="var it6932" onMouseOver="hilite(6932)" onMouseOut="lolite()" onClick="logVariable('istoday')" href="../../../_variables/istoday.html">$istoday</a>,
<a name="l1397"><span class="linenum">1397</span></a>                          <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>(<a class="var it6930" onMouseOver="hilite(6930)" onMouseOut="lolite()" onClick="logVariable('weekday')" href="../../../_variables/weekday.html">$weekday</a>[<a class="var it6934" onMouseOver="hilite(6934)" onMouseOut="lolite()" onClick="logVariable('dateweekday')" href="../../../_variables/dateweekday.html">$dateweekday</a>])),
<a name="l1398"><span class="linenum">1398</span></a>                          <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>(<a class="var it6137" onMouseOver="hilite(6137)" onMouseOut="lolite()" onClick="logVariable('weekday_abbrev')" href="../../../_variables/weekday_abbrev.html">$weekday_abbrev</a>[<a class="var it6934" onMouseOver="hilite(6934)" onMouseOut="lolite()" onClick="logVariable('dateweekday')" href="../../../_variables/dateweekday.html">$dateweekday</a>])),
<a name="l1399"><span class="linenum">1399</span></a>                          <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>(<a class="var it6114" onMouseOver="hilite(6114)" onMouseOut="lolite()" onClick="logVariable('weekday_letter')" href="../../../_variables/weekday_letter.html">$weekday_letter</a>[<a class="var it6934" onMouseOver="hilite(6934)" onMouseOut="lolite()" onClick="logVariable('dateweekday')" href="../../../_variables/dateweekday.html">$dateweekday</a>])),
<a name="l1400"><span class="linenum">1400</span></a>                          <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>(<a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('month')" href="../../../_variables/month.html">$month</a>[<a class="var it6933" onMouseOver="hilite(6933)" onMouseOut="lolite()" onClick="logVariable('datemonth')" href="../../../_variables/datemonth.html">$datemonth</a>])),
<a name="l1401"><span class="linenum">1401</span></a>                          <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>(<a class="var it6929" onMouseOver="hilite(6929)" onMouseOut="lolite()" onClick="logVariable('month_abbrev')" href="../../../_variables/month_abbrev.html">$month_abbrev</a>[<a class="var it6933" onMouseOver="hilite(6933)" onMouseOut="lolite()" onClick="logVariable('datemonth')" href="../../../_variables/datemonth.html">$datemonth</a>])) ),
<a name="l1402"><span class="linenum">1402</span></a>                      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l1403"><span class="linenum">1403</span></a>          }
<a name="l1404"><span class="linenum">1404</span></a>      }
<a name="l1405"><span class="linenum">1405</span></a>  
<a name="l1406"><span class="linenum">1406</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1407"><span class="linenum">1407</span></a>  }
<a name="l1408"><span class="linenum">1408</span></a>  
<a name="l1409"><span class="linenum">1409</span></a>  
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">/**</span>
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment"> * Add given # of days to a timestamp</span>
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment"> *</span>
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment"> * @param integer timestamp</span>
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment"> * @param integer days</span>
<a name="l1415"><span class="linenum">1415</span></a>  <span class="comment"> * @return integer timestamp</span>
<a name="l1416"><span class="linenum">1416</span></a>  <span class="comment"> */</span>
<a name="l1417"><span class="linenum">1417</span></a>  function <a class="function" onClick="logFunction('date_add_days')" href="../../../_functions/date_add_days.html" onMouseOver="funcPopup(event,'date_add_days')">date_add_days</a>( <a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>, <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> )
<a name="l1418"><span class="linenum">1418</span></a>  {
<a name="l1419"><span class="linenum">1419</span></a>      return <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>( <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('H',<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>), <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('m',<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>), <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('s',<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>),
<a name="l1420"><span class="linenum">1420</span></a>                                  <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('m',<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>), <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('d',<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>)+<a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a>, <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y',<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>)  );
<a name="l1421"><span class="linenum">1421</span></a>  }
<a name="l1422"><span class="linenum">1422</span></a>  
<a name="l1423"><span class="linenum">1423</span></a>  <span class="comment">/**</span>
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment"> * Format dates into a string in a way similar to sprintf()</span>
<a name="l1425"><span class="linenum">1425</span></a>  <span class="comment"> */</span>
<a name="l1426"><span class="linenum">1426</span></a>  function <a class="function" onClick="logFunction('date_sprintf')" href="../../../_functions/date_sprintf.html" onMouseOver="funcPopup(event,'date_sprintf')">date_sprintf</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> )
<a name="l1427"><span class="linenum">1427</span></a>  {
<a name="l1428"><span class="linenum">1428</span></a>      global <a class="var it6935" onMouseOver="hilite(6935)" onMouseOut="lolite()" onClick="logVariable('date_sprintf_timestamp')" href="../../../_variables/date_sprintf_timestamp.html">$date_sprintf_timestamp</a>;
<a name="l1429"><span class="linenum">1429</span></a>      <a class="var it6935" onMouseOver="hilite(6935)" onMouseOut="lolite()" onClick="logVariable('date_sprintf_timestamp')" href="../../../_variables/date_sprintf_timestamp.html">$date_sprintf_timestamp</a> = <a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>;
<a name="l1430"><span class="linenum">1430</span></a>  
<a name="l1431"><span class="linenum">1431</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace_callback')" href="../../../_functions/preg_replace_callback.html" onMouseOver="phpfuncPopup(event,'preg_replace_callback')">preg_replace_callback</a>( '/%\{(.*?)\}/', 'date_sprintf_callback', <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> );
<a name="l1432"><span class="linenum">1432</span></a>  }
<a name="l1433"><span class="linenum">1433</span></a>  
<a name="l1434"><span class="linenum">1434</span></a>  function <a class="function" onClick="logFunction('date_sprintf_callback')" href="../../../_functions/date_sprintf_callback.html" onMouseOver="funcPopup(event,'date_sprintf_callback')">date_sprintf_callback</a>( <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a> )
<a name="l1435"><span class="linenum">1435</span></a>  {
<a name="l1436"><span class="linenum">1436</span></a>      global <a class="var it6935" onMouseOver="hilite(6935)" onMouseOut="lolite()" onClick="logVariable('date_sprintf_timestamp')" href="../../../_variables/date_sprintf_timestamp.html">$date_sprintf_timestamp</a>;
<a name="l1437"><span class="linenum">1437</span></a>  
<a name="l1438"><span class="linenum">1438</span></a>      return <a class="function" onClick="logFunction('date_i18n')" href="../../../_functions/date_i18n.html" onMouseOver="funcPopup(event,'date_i18n')">date_i18n</a>( <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[1], <a class="var it6935" onMouseOver="hilite(6935)" onMouseOut="lolite()" onClick="logVariable('date_sprintf_timestamp')" href="../../../_variables/date_sprintf_timestamp.html">$date_sprintf_timestamp</a> );
<a name="l1439"><span class="linenum">1439</span></a>  }
<a name="l1440"><span class="linenum">1440</span></a>  
<a name="l1441"><span class="linenum">1441</span></a>  
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment">/**</span>
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment"> * Get date name when date was happened</span>
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment"> *</span>
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment"> * @param integer Timestamp</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment"> * @return string Name of date (Today, Yesterday, x days ago, x months ago, x years ago)</span>
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment"> */</span>
<a name="l1448"><span class="linenum">1448</span></a>  function <a class="function" onClick="logFunction('date_ago')" href="../../../_functions/date_ago.html" onMouseOver="funcPopup(event,'date_ago')">date_ago</a>( <a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> )
<a name="l1449"><span class="linenum">1449</span></a>  {
<a name="l1450"><span class="linenum">1450</span></a>      global <a class="var it1826" onMouseOver="hilite(1826)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a>;
<a name="l1451"><span class="linenum">1451</span></a>  
<a name="l1452"><span class="linenum">1452</span></a>      <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>( ( <a class="var it1826" onMouseOver="hilite(1826)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a> - <a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> ) / 86400 );
<a name="l1453"><span class="linenum">1453</span></a>      <a class="var it3844" onMouseOver="hilite(3844)" onMouseOut="lolite()" onClick="logVariable('months')" href="../../../_variables/months.html">$months</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../../../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>( <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> / 31 );
<a name="l1454"><span class="linenum">1454</span></a>  
<a name="l1455"><span class="linenum">1455</span></a>      if( <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> &lt; 1 )
<a name="l1456"><span class="linenum">1456</span></a>      {    // Today
<a name="l1457"><span class="linenum">1457</span></a>          return <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Today');
<a name="l1458"><span class="linenum">1458</span></a>      }
<a name="l1459"><span class="linenum">1459</span></a>      elseif( <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> == 1 )
<a name="l1460"><span class="linenum">1460</span></a>      {    // Yesterday
<a name="l1461"><span class="linenum">1461</span></a>          return <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Yesterday');
<a name="l1462"><span class="linenum">1462</span></a>      }
<a name="l1463"><span class="linenum">1463</span></a>      elseif( <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> &gt; 1 &amp;&amp; <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> &lt;= 31 )
<a name="l1464"><span class="linenum">1464</span></a>      {    // Days
<a name="l1465"><span class="linenum">1465</span></a>          return sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s days ago'), <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> );
<a name="l1466"><span class="linenum">1466</span></a>      }
<a name="l1467"><span class="linenum">1467</span></a>      elseif( <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> &gt; 31 &amp;&amp; <a class="var it3844" onMouseOver="hilite(3844)" onMouseOut="lolite()" onClick="logVariable('months')" href="../../../_variables/months.html">$months</a> &lt;= 12 )
<a name="l1468"><span class="linenum">1468</span></a>      {    // Months
<a name="l1469"><span class="linenum">1469</span></a>          return sprintf( <a class="var it3844" onMouseOver="hilite(3844)" onMouseOut="lolite()" onClick="logVariable('months')" href="../../../_variables/months.html">$months</a> == 1 ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s month ago') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s months ago'), <a class="var it3844" onMouseOver="hilite(3844)" onMouseOut="lolite()" onClick="logVariable('months')" href="../../../_variables/months.html">$months</a> );
<a name="l1470"><span class="linenum">1470</span></a>      }
<a name="l1471"><span class="linenum">1471</span></a>      else
<a name="l1472"><span class="linenum">1472</span></a>      {    // Years
<a name="l1473"><span class="linenum">1473</span></a>          <a class="var it6936" onMouseOver="hilite(6936)" onMouseOut="lolite()" onClick="logVariable('years')" href="../../../_variables/years.html">$years</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>( <a class="var it3844" onMouseOver="hilite(3844)" onMouseOut="lolite()" onClick="logVariable('months')" href="../../../_variables/months.html">$months</a> / 12 );
<a name="l1474"><span class="linenum">1474</span></a>          return sprintf( <a class="var it6936" onMouseOver="hilite(6936)" onMouseOut="lolite()" onClick="logVariable('years')" href="../../../_variables/years.html">$years</a> == 1 ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s year ago') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s years ago'), <a class="var it6936" onMouseOver="hilite(6936)" onMouseOut="lolite()" onClick="logVariable('years')" href="../../../_variables/years.html">$years</a> );
<a name="l1475"><span class="linenum">1475</span></a>      }
<a name="l1476"><span class="linenum">1476</span></a>  }
<a name="l1477"><span class="linenum">1477</span></a>  
<a name="l1478"><span class="linenum">1478</span></a>  
<a name="l1479"><span class="linenum">1479</span></a>  <span class="comment">/**</span>
<a name="l1480"><span class="linenum">1480</span></a>  <span class="comment"> * Convert seconds to readable period</span>
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment"> *</span>
<a name="l1482"><span class="linenum">1482</span></a>  <span class="comment"> * @param integer Seconds</span>
<a name="l1483"><span class="linenum">1483</span></a>  <span class="comment"> * @return string Readable time period</span>
<a name="l1484"><span class="linenum">1484</span></a>  <span class="comment"> */</span>
<a name="l1485"><span class="linenum">1485</span></a>  function <a class="function" onClick="logFunction('seconds_to_period')" href="../../../_functions/seconds_to_period.html" onMouseOver="funcPopup(event,'seconds_to_period')">seconds_to_period</a>( <a class="var it6136" onMouseOver="hilite(6136)" onMouseOut="lolite()" onClick="logVariable('seconds')" href="../../../_variables/seconds.html">$seconds</a> )
<a name="l1486"><span class="linenum">1486</span></a>  {
<a name="l1487"><span class="linenum">1487</span></a>      <a class="var it6937" onMouseOver="hilite(6937)" onMouseOut="lolite()" onClick="logVariable('periods')" href="../../../_variables/periods.html">$periods</a> = array(
<a name="l1488"><span class="linenum">1488</span></a>          array( 31536000, <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 year'),   <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s years') ), // 365 days
<a name="l1489"><span class="linenum">1489</span></a>          array( 2592000,  <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 month'),  <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s months') ), // 30 days
<a name="l1490"><span class="linenum">1490</span></a>          array( 86400,    <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 day'),    <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s days') ),
<a name="l1491"><span class="linenum">1491</span></a>          array( 3600,     <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 hour'),   <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s hours') ),
<a name="l1492"><span class="linenum">1492</span></a>          array( 60,       <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 minute'), <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s minutes') ),
<a name="l1493"><span class="linenum">1493</span></a>          array( 1,        <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 second'), <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s seconds') ),
<a name="l1494"><span class="linenum">1494</span></a>      );
<a name="l1495"><span class="linenum">1495</span></a>  
<a name="l1496"><span class="linenum">1496</span></a>      foreach( <a class="var it6937" onMouseOver="hilite(6937)" onMouseOut="lolite()" onClick="logVariable('periods')" href="../../../_variables/periods.html">$periods</a> as <a class="var it4673" onMouseOver="hilite(4673)" onMouseOut="lolite()" onClick="logVariable('p_info')" href="../../../_variables/p_info.html">$p_info</a> )
<a name="l1497"><span class="linenum">1497</span></a>      {
<a name="l1498"><span class="linenum">1498</span></a>          <a class="var it6938" onMouseOver="hilite(6938)" onMouseOut="lolite()" onClick="logVariable('period_value')" href="../../../_variables/period_value.html">$period_value</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it6136" onMouseOver="hilite(6136)" onMouseOut="lolite()" onClick="logVariable('seconds')" href="../../../_variables/seconds.html">$seconds</a> / <a class="var it4673" onMouseOver="hilite(4673)" onMouseOut="lolite()" onClick="logVariable('p_info')" href="../../../_variables/p_info.html">$p_info</a>[0] * 10 ) /10;
<a name="l1499"><span class="linenum">1499</span></a>          if( <a class="var it6938" onMouseOver="hilite(6938)" onMouseOut="lolite()" onClick="logVariable('period_value')" href="../../../_variables/period_value.html">$period_value</a> &gt;= 1 )
<a name="l1500"><span class="linenum">1500</span></a>          { // Stop on this period
<a name="l1501"><span class="linenum">1501</span></a>              if( <a class="var it6938" onMouseOver="hilite(6938)" onMouseOut="lolite()" onClick="logVariable('period_value')" href="../../../_variables/period_value.html">$period_value</a> == 1 )
<a name="l1502"><span class="linenum">1502</span></a>              { // One unit of period
<a name="l1503"><span class="linenum">1503</span></a>                  <a class="var it6939" onMouseOver="hilite(6939)" onMouseOut="lolite()" onClick="logVariable('period_text')" href="../../../_variables/period_text.html">$period_text</a> = <a class="var it4673" onMouseOver="hilite(4673)" onMouseOut="lolite()" onClick="logVariable('p_info')" href="../../../_variables/p_info.html">$p_info</a>[1];
<a name="l1504"><span class="linenum">1504</span></a>              }
<a name="l1505"><span class="linenum">1505</span></a>              else
<a name="l1506"><span class="linenum">1506</span></a>              { // Two and more units of period
<a name="l1507"><span class="linenum">1507</span></a>                  <a class="var it6939" onMouseOver="hilite(6939)" onMouseOut="lolite()" onClick="logVariable('period_text')" href="../../../_variables/period_text.html">$period_text</a> = sprintf( <a class="var it4673" onMouseOver="hilite(4673)" onMouseOut="lolite()" onClick="logVariable('p_info')" href="../../../_variables/p_info.html">$p_info</a>[2], <a class="var it6938" onMouseOver="hilite(6938)" onMouseOut="lolite()" onClick="logVariable('period_value')" href="../../../_variables/period_value.html">$period_value</a> );
<a name="l1508"><span class="linenum">1508</span></a>              }
<a name="l1509"><span class="linenum">1509</span></a>              break;
<a name="l1510"><span class="linenum">1510</span></a>          }
<a name="l1511"><span class="linenum">1511</span></a>      }
<a name="l1512"><span class="linenum">1512</span></a>  
<a name="l1513"><span class="linenum">1513</span></a>      if( !isset( <a class="var it6939" onMouseOver="hilite(6939)" onMouseOut="lolite()" onClick="logVariable('period_text')" href="../../../_variables/period_text.html">$period_text</a> ) )
<a name="l1514"><span class="linenum">1514</span></a>      { // 0 seconds
<a name="l1515"><span class="linenum">1515</span></a>          <a class="var it6939" onMouseOver="hilite(6939)" onMouseOut="lolite()" onClick="logVariable('period_text')" href="../../../_variables/period_text.html">$period_text</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s seconds'), 0 );
<a name="l1516"><span class="linenum">1516</span></a>      }
<a name="l1517"><span class="linenum">1517</span></a>  
<a name="l1518"><span class="linenum">1518</span></a>      return <a class="var it6939" onMouseOver="hilite(6939)" onMouseOut="lolite()" onClick="logVariable('period_text')" href="../../../_variables/period_text.html">$period_text</a>;
<a name="l1519"><span class="linenum">1519</span></a>  }
<a name="l1520"><span class="linenum">1520</span></a>  
<a name="l1521"><span class="linenum">1521</span></a>  
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">/**</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment"> * Converts an ISO 8601 date to MySQL DateTime format.</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment"> *</span>
<a name="l1525"><span class="linenum">1525</span></a>  <span class="comment"> * @param string date and time in ISO 8601 format {@link http://en.wikipedia.org/wiki/ISO_8601}.</span>
<a name="l1526"><span class="linenum">1526</span></a>  <span class="comment"> * @return string date and time in MySQL DateTime format Y-m-d H:i:s.</span>
<a name="l1527"><span class="linenum">1527</span></a>  <span class="comment"> */</span>
<a name="l1528"><span class="linenum">1528</span></a>  function <a class="function" onClick="logFunction('iso8601_to_datetime')" href="../../../_functions/iso8601_to_datetime.html" onMouseOver="funcPopup(event,'iso8601_to_datetime')">iso8601_to_datetime</a>( <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a> )
<a name="l1529"><span class="linenum">1529</span></a>  {
<a name="l1530"><span class="linenum">1530</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('#([0-9]{4})([0-9]{2})([0-9]{2})<a class="function" onClick="logFunction('T')" href="../../../_functions/t.html" onMouseOver="funcPopup(event,'t')">T</a>([0-9]{2}):([0-9]{2}):([0-9]{2})(Z|[\+|\-][0-9]{2,4}){0,1}<span class="comment">#', '$1-$2-$3 $4:$5:$6', $iso_date);</span>
<a name="l1531"><span class="linenum">1531</span></a>  }
<a name="l1532"><span class="linenum">1532</span></a>  
<a name="l1533"><span class="linenum">1533</span></a>  
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment">/**</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment"> * Converts a MySQL DateTime to ISO 8601 date format.</span>
<a name="l1536"><span class="linenum">1536</span></a>  <span class="comment"> *</span>
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment"> * @param string date and time in MySQL DateTime format Y-m-d H:i:s</span>
<a name="l1538"><span class="linenum">1538</span></a>  <span class="comment"> * @return string date and time in ISO 8601 format {@link http://en.wikipedia.org/wiki/ISO_8601}.</span>
<a name="l1539"><span class="linenum">1539</span></a>  <span class="comment"> */</span>
<a name="l1540"><span class="linenum">1540</span></a>  function <a class="function" onClick="logFunction('datetime_to_iso8601')" href="../../../_functions/datetime_to_iso8601.html" onMouseOver="funcPopup(event,'datetime_to_iso8601')">datetime_to_iso8601</a>( <a class="var it1237" onMouseOver="hilite(1237)" onMouseOut="lolite()" onClick="logVariable('datetime')" href="../../../_variables/datetime.html">$datetime</a>, <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l1541"><span class="linenum">1541</span></a>  {
<a name="l1542"><span class="linenum">1542</span></a>      <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a> = <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>('U', <a class="var it1237" onMouseOver="hilite(1237)" onMouseOut="lolite()" onClick="logVariable('datetime')" href="../../../_variables/datetime.html">$datetime</a>);
<a name="l1543"><span class="linenum">1543</span></a>  
<a name="l1544"><span class="linenum">1544</span></a>      if( <a class="var it3464" onMouseOver="hilite(3464)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> )
<a name="l1545"><span class="linenum">1545</span></a>      {
<a name="l1546"><span class="linenum">1546</span></a>          <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a> = <a class="phpfunction" onClick="logFunction('gmdate')" href="../../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>('Ymd', <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a>).'T'.<a class="phpfunction" onClick="logFunction('gmdate')" href="../../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>('H:i:s', <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a>);
<a name="l1547"><span class="linenum">1547</span></a>      }
<a name="l1548"><span class="linenum">1548</span></a>      else
<a name="l1549"><span class="linenum">1549</span></a>      {
<a name="l1550"><span class="linenum">1550</span></a>          <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Ymd', <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a>).'T'.<a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('H:i:s', <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a>);
<a name="l1551"><span class="linenum">1551</span></a>      }
<a name="l1552"><span class="linenum">1552</span></a>  
<a name="l1553"><span class="linenum">1553</span></a>      return <a class="var it679" onMouseOver="hilite(679)" onMouseOut="lolite()" onClick="logVariable('iso_date')" href="../../../_variables/iso_date.html">$iso_date</a>;
<a name="l1554"><span class="linenum">1554</span></a>  }
<a name="l1555"><span class="linenum">1555</span></a>  
<a name="l1556"><span class="linenum">1556</span></a>  
<a name="l1557"><span class="linenum">1557</span></a>  <span class="comment">/**</span>
<a name="l1558"><span class="linenum">1558</span></a>  <span class="comment"> *</span>
<a name="l1559"><span class="linenum">1559</span></a>  <span class="comment"> * @param integer year</span>
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment"> * @param integer month (0-53)</span>
<a name="l1561"><span class="linenum">1561</span></a>  <span class="comment"> * @param integer 0 for sunday, 1 for monday</span>
<a name="l1562"><span class="linenum">1562</span></a>  <span class="comment"> */</span>
<a name="l1563"><span class="linenum">1563</span></a>  function <a class="function" onClick="logFunction('get_start_date_for_week')" href="../../../_functions/get_start_date_for_week.html" onMouseOver="funcPopup(event,'get_start_date_for_week')">get_start_date_for_week</a>( <a class="var it3068" onMouseOver="hilite(3068)" onMouseOut="lolite()" onClick="logVariable('year')" href="../../../_variables/year.html">$year</a>, <a class="var it4096" onMouseOver="hilite(4096)" onMouseOut="lolite()" onClick="logVariable('week')" href="../../../_variables/week.html">$week</a>, <a class="var it3932" onMouseOver="hilite(3932)" onMouseOut="lolite()" onClick="logVariable('startofweek')" href="../../../_variables/startofweek.html">$startofweek</a> )
<a name="l1564"><span class="linenum">1564</span></a>  {
<a name="l1565"><span class="linenum">1565</span></a>      <a class="var it6942" onMouseOver="hilite(6942)" onMouseOut="lolite()" onClick="logVariable('new_years_date')" href="../../../_variables/new_years_date.html">$new_years_date</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>( 0, 0, 0, 1, 1, <a class="var it3068" onMouseOver="hilite(3068)" onMouseOut="lolite()" onClick="logVariable('year')" href="../../../_variables/year.html">$year</a> );
<a name="l1566"><span class="linenum">1566</span></a>      <a class="var it6930" onMouseOver="hilite(6930)" onMouseOut="lolite()" onClick="logVariable('weekday')" href="../../../_variables/weekday.html">$weekday</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('w', <a class="var it6942" onMouseOver="hilite(6942)" onMouseOut="lolite()" onClick="logVariable('new_years_date')" href="../../../_variables/new_years_date.html">$new_years_date</a>);
<a name="l1567"><span class="linenum">1567</span></a>  <span class="comment">    // echo '&lt;br&gt; 1st day is a: '.$weekday;</span>
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">    // How many days until start of week:</span>
<a name="l1570"><span class="linenum">1570</span></a>      <a class="var it6943" onMouseOver="hilite(6943)" onMouseOut="lolite()" onClick="logVariable('days_to_new_week')" href="../../../_variables/days_to_new_week.html">$days_to_new_week</a> = (7 - <a class="var it6930" onMouseOver="hilite(6930)" onMouseOut="lolite()" onClick="logVariable('weekday')" href="../../../_variables/weekday.html">$weekday</a> + <a class="var it3932" onMouseOver="hilite(3932)" onMouseOut="lolite()" onClick="logVariable('startofweek')" href="../../../_variables/startofweek.html">$startofweek</a>) % 7;
<a name="l1571"><span class="linenum">1571</span></a>  <span class="comment">    // echo '&lt;br&gt; days to new week: '.$days_to_new_week;</span>
<a name="l1572"><span class="linenum">1572</span></a>  
<a name="l1573"><span class="linenum">1573</span></a>  <span class="comment">    // We now add the required number of days to find the 1st sunday/monday in the year:</span>
<a name="l1574"><span class="linenum">1574</span></a>  <span class="comment">    //$first_week_start_date = $new_years_date + $days_to_new_week * 86400;</span>
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment">    //echo '&lt;br&gt; 1st week starts on '.date( 'Y-m-d H:i:s', $first_week_start_date );</span>
<a name="l1576"><span class="linenum">1576</span></a>  
<a name="l1577"><span class="linenum">1577</span></a>  <span class="comment">    // We add the number of requested weeks:</span>
<a name="l1578"><span class="linenum">1578</span></a>  <span class="comment">    // This will fail when passing to Daylight Savings Time: $date = $first_week_start_date + (($week-1) * 604800);</span>
<a name="l1579"><span class="linenum">1579</span></a>      <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>( 0, 0, 0, 1, <a class="var it6943" onMouseOver="hilite(6943)" onMouseOut="lolite()" onClick="logVariable('days_to_new_week')" href="../../../_variables/days_to_new_week.html">$days_to_new_week</a> + 1 + (<a class="var it4096" onMouseOver="hilite(4096)" onMouseOut="lolite()" onClick="logVariable('week')" href="../../../_variables/week.html">$week</a>-1) * 7, <a class="var it3068" onMouseOver="hilite(3068)" onMouseOut="lolite()" onClick="logVariable('year')" href="../../../_variables/year.html">$year</a> );
<a name="l1580"><span class="linenum">1580</span></a>  <span class="comment">    // echo '&lt;br&gt; week '.$week.' starts on '.date( 'Y-m-d H:i:s', $date );</span>
<a name="l1581"><span class="linenum">1581</span></a>  
<a name="l1582"><span class="linenum">1582</span></a>      return <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>;
<a name="l1583"><span class="linenum">1583</span></a>  }
<a name="l1584"><span class="linenum">1584</span></a>  
<a name="l1585"><span class="linenum">1585</span></a>  
<a name="l1586"><span class="linenum">1586</span></a>  
<a name="l1587"><span class="linenum">1587</span></a>  <span class="comment">/**</span>
<a name="l1588"><span class="linenum">1588</span></a>  <span class="comment"> * Get start and end day of a week, based on day f the week and start-of-week</span>
<a name="l1589"><span class="linenum">1589</span></a>  <span class="comment"> *</span>
<a name="l1590"><span class="linenum">1590</span></a>  <span class="comment"> * Used by Calendar</span>
<a name="l1591"><span class="linenum">1591</span></a>  <span class="comment"> *</span>
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment"> * @param date</span>
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment"> * @param integer 0 for Sunday, 1 for Monday</span>
<a name="l1594"><span class="linenum">1594</span></a>  <span class="comment"> */</span>
<a name="l1595"><span class="linenum">1595</span></a>  function <a class="function" onClick="logFunction('get_weekstartend')" href="../../../_functions/get_weekstartend.html" onMouseOver="funcPopup(event,'get_weekstartend')">get_weekstartend</a>( <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>, <a class="var it6944" onMouseOver="hilite(6944)" onMouseOut="lolite()" onClick="logVariable('startOfWeek')" href="../../../_variables/startOfWeek.html">$startOfWeek</a> )
<a name="l1596"><span class="linenum">1596</span></a>  {
<a name="l1597"><span class="linenum">1597</span></a>      while( <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('w', <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>) &lt;&gt; <a class="var it6944" onMouseOver="hilite(6944)" onMouseOut="lolite()" onClick="logVariable('startOfWeek')" href="../../../_variables/startOfWeek.html">$startOfWeek</a> )
<a name="l1598"><span class="linenum">1598</span></a>      {
<a name="l1599"><span class="linenum">1599</span></a>  <span class="comment">        // echo '&lt;br /&gt;'.date('Y-m-d H:i:s w', $date).' - '.$startOfWeek;</span>
<a name="l1600"><span class="linenum">1600</span></a>  <span class="comment">        // mktime is needed so calculations work for DST enabling. Example: March 30th 2008, start of week 0 sunday</span>
<a name="l1601"><span class="linenum">1601</span></a>          <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>( 0, 0, 0, <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('m',<a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>), <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('d',<a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>)-1, <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y',<a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>) );
<a name="l1602"><span class="linenum">1602</span></a>      }
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment">    // echo '&lt;br /&gt;'.date('Y-m-d H:i:s w', $date).' = '.$startOfWeek;</span>
<a name="l1604"><span class="linenum">1604</span></a>      <a class="var it4096" onMouseOver="hilite(4096)" onMouseOut="lolite()" onClick="logVariable('week')" href="../../../_variables/week.html">$week</a>['start'] = <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>;
<a name="l1605"><span class="linenum">1605</span></a>      <a class="var it4096" onMouseOver="hilite(4096)" onMouseOut="lolite()" onClick="logVariable('week')" href="../../../_variables/week.html">$week</a>['end']   = <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> + 604800; <span class="comment">// 7 days</span>
<a name="l1606"><span class="linenum">1606</span></a>  
<a name="l1607"><span class="linenum">1607</span></a>  <span class="comment">    // pre_dump( 'weekstartend: ', date( 'Y-m-d', $week['start'] ), date( 'Y-m-d', $week['end'] ) );</span>
<a name="l1608"><span class="linenum">1608</span></a>  
<a name="l1609"><span class="linenum">1609</span></a>      return( <a class="var it4096" onMouseOver="hilite(4096)" onMouseOut="lolite()" onClick="logVariable('week')" href="../../../_variables/week.html">$week</a> );
<a name="l1610"><span class="linenum">1610</span></a>  }
<a name="l1611"><span class="linenum">1611</span></a>  
<a name="l1612"><span class="linenum">1612</span></a>  
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">/**</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment"> * Get datetime rounded to lower minute. This is meant to remove seconds and</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment"> * leverage MySQL's query cache by having SELECT queries remain identical for 60 seconds instead of just 1.</span>
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment"> *</span>
<a name="l1617"><span class="linenum">1617</span></a>  <span class="comment"> * @param integer UNIX timestamp</span>
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment"> * @param string Format (defaults to &quot;Y-m-d H:i&quot;). Use &quot;U&quot; for UNIX timestamp.</span>
<a name="l1619"><span class="linenum">1619</span></a>  <span class="comment"> */</span>
<a name="l1620"><span class="linenum">1620</span></a>  function <a class="function" onClick="logFunction('remove_seconds')" href="../../../_functions/remove_seconds.html" onMouseOver="funcPopup(event,'remove_seconds')">remove_seconds</a>(<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>, <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'Y-m-d H:i')
<a name="l1621"><span class="linenum">1621</span></a>  {
<a name="l1622"><span class="linenum">1622</span></a>      return <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>(<a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>/60)*60);
<a name="l1623"><span class="linenum">1623</span></a>  }
<a name="l1624"><span class="linenum">1624</span></a>  
<a name="l1625"><span class="linenum">1625</span></a>  
<a name="l1626"><span class="linenum">1626</span></a>  <span class="comment">/**</span>
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment"> * Convert from seconds to months, days, hours, minutes and seconds</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment"> *</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment"> * @param integer duration in seconds</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment"> * @return array of [ years, months, days, hours, minutes, seconds ]</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment"> */</span>
<a name="l1632"><span class="linenum">1632</span></a>  function <a class="function" onClick="logFunction('get_duration_fields')" href="../../../_functions/get_duration_fields.html" onMouseOver="funcPopup(event,'get_duration_fields')">get_duration_fields</a>( <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> )
<a name="l1633"><span class="linenum">1633</span></a>  {
<a name="l1634"><span class="linenum">1634</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l1635"><span class="linenum">1635</span></a>  
<a name="l1636"><span class="linenum">1636</span></a>      <a class="var it6945" onMouseOver="hilite(6945)" onMouseOut="lolite()" onClick="logVariable('year_seconds')" href="../../../_variables/year_seconds.html">$year_seconds</a> = 31536000; <span class="comment">// 1 year</span>
<a name="l1637"><span class="linenum">1637</span></a>      <a class="var it6936" onMouseOver="hilite(6936)" onMouseOut="lolite()" onClick="logVariable('years')" href="../../../_variables/years.html">$years</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>( <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> / <a class="var it6945" onMouseOver="hilite(6945)" onMouseOut="lolite()" onClick="logVariable('year_seconds')" href="../../../_variables/year_seconds.html">$year_seconds</a> );
<a name="l1638"><span class="linenum">1638</span></a>      <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> = <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> - <a class="var it6936" onMouseOver="hilite(6936)" onMouseOut="lolite()" onClick="logVariable('years')" href="../../../_variables/years.html">$years</a> * <a class="var it6945" onMouseOver="hilite(6945)" onMouseOut="lolite()" onClick="logVariable('year_seconds')" href="../../../_variables/year_seconds.html">$year_seconds</a>;
<a name="l1639"><span class="linenum">1639</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[ 'years' ] = <a class="var it6936" onMouseOver="hilite(6936)" onMouseOut="lolite()" onClick="logVariable('years')" href="../../../_variables/years.html">$years</a>;
<a name="l1640"><span class="linenum">1640</span></a>  
<a name="l1641"><span class="linenum">1641</span></a>      <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('month_seconds')" href="../../../_variables/month_seconds.html">$month_seconds</a> = 2592000; <span class="comment">// 1 month</span>
<a name="l1642"><span class="linenum">1642</span></a>      <a class="var it3844" onMouseOver="hilite(3844)" onMouseOut="lolite()" onClick="logVariable('months')" href="../../../_variables/months.html">$months</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>( <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> / <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('month_seconds')" href="../../../_variables/month_seconds.html">$month_seconds</a> );
<a name="l1643"><span class="linenum">1643</span></a>      <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> = <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> - <a class="var it3844" onMouseOver="hilite(3844)" onMouseOut="lolite()" onClick="logVariable('months')" href="../../../_variables/months.html">$months</a> * <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('month_seconds')" href="../../../_variables/month_seconds.html">$month_seconds</a>;
<a name="l1644"><span class="linenum">1644</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[ 'months' ] = <a class="var it3844" onMouseOver="hilite(3844)" onMouseOut="lolite()" onClick="logVariable('months')" href="../../../_variables/months.html">$months</a>;
<a name="l1645"><span class="linenum">1645</span></a>  
<a name="l1646"><span class="linenum">1646</span></a>      <a class="var it6130" onMouseOver="hilite(6130)" onMouseOut="lolite()" onClick="logVariable('day_seconds')" href="../../../_variables/day_seconds.html">$day_seconds</a> = 86400; <span class="comment">// 1 day</span>
<a name="l1647"><span class="linenum">1647</span></a>      <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>( <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> / <a class="var it6130" onMouseOver="hilite(6130)" onMouseOut="lolite()" onClick="logVariable('day_seconds')" href="../../../_variables/day_seconds.html">$day_seconds</a> );
<a name="l1648"><span class="linenum">1648</span></a>      <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> = <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> - <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a> * <a class="var it6130" onMouseOver="hilite(6130)" onMouseOut="lolite()" onClick="logVariable('day_seconds')" href="../../../_variables/day_seconds.html">$day_seconds</a>;
<a name="l1649"><span class="linenum">1649</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[ 'days' ] = <a class="var it1863" onMouseOver="hilite(1863)" onMouseOut="lolite()" onClick="logVariable('days')" href="../../../_variables/days.html">$days</a>;
<a name="l1650"><span class="linenum">1650</span></a>  
<a name="l1651"><span class="linenum">1651</span></a>      <a class="var it6131" onMouseOver="hilite(6131)" onMouseOut="lolite()" onClick="logVariable('hour_seconds')" href="../../../_variables/hour_seconds.html">$hour_seconds</a> = 3600; <span class="comment">// 1 hour</span>
<a name="l1652"><span class="linenum">1652</span></a>      <a class="var it6132" onMouseOver="hilite(6132)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../../_variables/hours.html">$hours</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>( <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> / <a class="var it6131" onMouseOver="hilite(6131)" onMouseOut="lolite()" onClick="logVariable('hour_seconds')" href="../../../_variables/hour_seconds.html">$hour_seconds</a> );
<a name="l1653"><span class="linenum">1653</span></a>      <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> = <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> - <a class="var it6132" onMouseOver="hilite(6132)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../../_variables/hours.html">$hours</a> * <a class="var it6131" onMouseOver="hilite(6131)" onMouseOut="lolite()" onClick="logVariable('hour_seconds')" href="../../../_variables/hour_seconds.html">$hour_seconds</a>;
<a name="l1654"><span class="linenum">1654</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[ 'hours' ] = <a class="var it6132" onMouseOver="hilite(6132)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../../_variables/hours.html">$hours</a>;
<a name="l1655"><span class="linenum">1655</span></a>  
<a name="l1656"><span class="linenum">1656</span></a>      <a class="var it6133" onMouseOver="hilite(6133)" onMouseOut="lolite()" onClick="logVariable('minute_seconds')" href="../../../_variables/minute_seconds.html">$minute_seconds</a> = 60; <span class="comment">// 1 minute</span>
<a name="l1657"><span class="linenum">1657</span></a>      <a class="var it6134" onMouseOver="hilite(6134)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../../_variables/minutes.html">$minutes</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>( <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> / <a class="var it6133" onMouseOver="hilite(6133)" onMouseOut="lolite()" onClick="logVariable('minute_seconds')" href="../../../_variables/minute_seconds.html">$minute_seconds</a> );
<a name="l1658"><span class="linenum">1658</span></a>      <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> = <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> - <a class="var it6134" onMouseOver="hilite(6134)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../../_variables/minutes.html">$minutes</a> * <a class="var it6133" onMouseOver="hilite(6133)" onMouseOut="lolite()" onClick="logVariable('minute_seconds')" href="../../../_variables/minute_seconds.html">$minute_seconds</a>;
<a name="l1659"><span class="linenum">1659</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[ 'minutes' ] = <a class="var it6134" onMouseOver="hilite(6134)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../../_variables/minutes.html">$minutes</a>;
<a name="l1660"><span class="linenum">1660</span></a>  
<a name="l1661"><span class="linenum">1661</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[ 'seconds' ] = <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a>;
<a name="l1662"><span class="linenum">1662</span></a>      return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l1663"><span class="linenum">1663</span></a>  }
<a name="l1664"><span class="linenum">1664</span></a>  
<a name="l1665"><span class="linenum">1665</span></a>  
<a name="l1666"><span class="linenum">1666</span></a>  <span class="comment">/**</span>
<a name="l1667"><span class="linenum">1667</span></a>  <span class="comment"> * Get a title of duration</span>
<a name="l1668"><span class="linenum">1668</span></a>  <span class="comment"> *</span>
<a name="l1669"><span class="linenum">1669</span></a>  <span class="comment"> * @param integer Duration in seconds</span>
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment"> * @param array Titles</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment"> * @return string Duration title</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment"> */</span>
<a name="l1673"><span class="linenum">1673</span></a>  function <a class="function" onClick="logFunction('get_duration_title')" href="../../../_functions/get_duration_title.html" onMouseOver="funcPopup(event,'get_duration_title')">get_duration_title</a>( <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a>, <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a> = array() )
<a name="l1674"><span class="linenum">1674</span></a>  {
<a name="l1675"><span class="linenum">1675</span></a>      <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1676"><span class="linenum">1676</span></a>          'year'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last %d years'),
<a name="l1677"><span class="linenum">1677</span></a>          'month'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last %d months'),
<a name="l1678"><span class="linenum">1678</span></a>          'day'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last %d days'),
<a name="l1679"><span class="linenum">1679</span></a>          'hour'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last %d hours'),
<a name="l1680"><span class="linenum">1680</span></a>          'minute' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last %d minutes'),
<a name="l1681"><span class="linenum">1681</span></a>          'second' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last %d seconds'),
<a name="l1682"><span class="linenum">1682</span></a>          ), <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a> );
<a name="l1683"><span class="linenum">1683</span></a>  
<a name="l1684"><span class="linenum">1684</span></a>      <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a> = <a class="function" onClick="logFunction('get_duration_fields')" href="../../../_functions/get_duration_fields.html" onMouseOver="funcPopup(event,'get_duration_fields')">get_duration_fields</a>( <a class="var it5762" onMouseOver="hilite(5762)" onMouseOut="lolite()" onClick="logVariable('duration')" href="../../../_variables/duration.html">$duration</a> );
<a name="l1685"><span class="linenum">1685</span></a>  
<a name="l1686"><span class="linenum">1686</span></a>      if( ! empty( <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'years' ] ) )
<a name="l1687"><span class="linenum">1687</span></a>      { // Years
<a name="l1688"><span class="linenum">1688</span></a>          return sprintf( <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a>['year'], <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'years' ] );
<a name="l1689"><span class="linenum">1689</span></a>      }
<a name="l1690"><span class="linenum">1690</span></a>      elseif( ! empty( <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'months' ] ) )
<a name="l1691"><span class="linenum">1691</span></a>      { // Months
<a name="l1692"><span class="linenum">1692</span></a>          return sprintf( <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a>['month'], <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'months' ] );
<a name="l1693"><span class="linenum">1693</span></a>      }
<a name="l1694"><span class="linenum">1694</span></a>      elseif( ! empty( <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'days' ] ) )
<a name="l1695"><span class="linenum">1695</span></a>      { // Days
<a name="l1696"><span class="linenum">1696</span></a>          return sprintf( <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a>['day'], <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'days' ] );
<a name="l1697"><span class="linenum">1697</span></a>      }
<a name="l1698"><span class="linenum">1698</span></a>      elseif( ! empty( <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'hours' ] ) )
<a name="l1699"><span class="linenum">1699</span></a>      { // Hours
<a name="l1700"><span class="linenum">1700</span></a>          return sprintf( <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a>['hour'], <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'hours' ] );
<a name="l1701"><span class="linenum">1701</span></a>      }
<a name="l1702"><span class="linenum">1702</span></a>      elseif( ! empty( <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'minutes' ] ) )
<a name="l1703"><span class="linenum">1703</span></a>      { // Minutes
<a name="l1704"><span class="linenum">1704</span></a>          return sprintf( <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a>['minute'], <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'minutes' ] );
<a name="l1705"><span class="linenum">1705</span></a>      }
<a name="l1706"><span class="linenum">1706</span></a>      else
<a name="l1707"><span class="linenum">1707</span></a>      { // Seconds
<a name="l1708"><span class="linenum">1708</span></a>          return sprintf( <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../_variables/titles.html">$titles</a>['second'], <a class="var it6946" onMouseOver="hilite(6946)" onMouseOut="lolite()" onClick="logVariable('delay_fields')" href="../../../_variables/delay_fields.html">$delay_fields</a>[ 'seconds' ] );
<a name="l1709"><span class="linenum">1709</span></a>      }
<a name="l1710"><span class="linenum">1710</span></a>  }
<a name="l1711"><span class="linenum">1711</span></a>  
<a name="l1712"><span class="linenum">1712</span></a>  
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment">/**</span>
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment"> * Validate variable</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment"> *</span>
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment"> * @param string param name</span>
<a name="l1717"><span class="linenum">1717</span></a>  <span class="comment"> * @param string validator function name</span>
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment"> * @param boolean true if variable value can't be empty</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment"> * @param custom error message</span>
<a name="l1720"><span class="linenum">1720</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1721"><span class="linenum">1721</span></a>  <span class="comment"> */</span>
<a name="l1722"><span class="linenum">1722</span></a>  function <a class="function" onClick="logFunction('param_validate')" href="../../../_functions/param_validate.html" onMouseOver="funcPopup(event,'param_validate')">param_validate</a>( <a class="var it6947" onMouseOver="hilite(6947)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../../_variables/variable.html">$variable</a>, <a class="var it6948" onMouseOver="hilite(6948)" onMouseOut="lolite()" onClick="logVariable('validator')" href="../../../_variables/validator.html">$validator</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a> = false, <a class="var it6949" onMouseOver="hilite(6949)" onMouseOut="lolite()" onClick="logVariable('custom_msg')" href="../../../_variables/custom_msg.html">$custom_msg</a> = NULL )
<a name="l1723"><span class="linenum">1723</span></a>  {
<a name="l1724"><span class="linenum">1724</span></a>      <span class="comment">/* Tblue&gt; Note: is_callable() does not check whether a function is</span>
<a name="l1725"><span class="linenum">1725</span></a>  <span class="comment">     *        disabled (http://www.php.net/manual/en/function.is-callable.php#79151).</span>
<a name="l1726"><span class="linenum">1726</span></a>  <span class="comment">     */</span>
<a name="l1727"><span class="linenum">1727</span></a>      if( ! <a class="phpfunction" onClick="logFunction('is_callable')" href="../../../_functions/is_callable.html" onMouseOver="phpfuncPopup(event,'is_callable')">is_callable</a>( <a class="var it6948" onMouseOver="hilite(6948)" onMouseOut="lolite()" onClick="logVariable('validator')" href="../../../_variables/validator.html">$validator</a> ) )
<a name="l1728"><span class="linenum">1728</span></a>      {
<a name="l1729"><span class="linenum">1729</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Validator function '.<a class="var it6948" onMouseOver="hilite(6948)" onMouseOut="lolite()" onClick="logVariable('validator')" href="../../../_variables/validator.html">$validator</a>.'() is not callable!' );
<a name="l1730"><span class="linenum">1730</span></a>      }
<a name="l1731"><span class="linenum">1731</span></a>  
<a name="l1732"><span class="linenum">1732</span></a>      if( ! isset( <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../_variables/GLOBALS.html">$GLOBALS</a>[<a class="var it6947" onMouseOver="hilite(6947)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../../_variables/variable.html">$variable</a>] ) )
<a name="l1733"><span class="linenum">1733</span></a>      {    // Variable not set, we cannot handle this using the validator function...
<a name="l1734"><span class="linenum">1734</span></a>          if( <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a> )
<a name="l1735"><span class="linenum">1735</span></a>          {    // Add error:
<a name="l1736"><span class="linenum">1736</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( <a class="var it6947" onMouseOver="hilite(6947)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../../_variables/variable.html">$variable</a>, <a class="var it6949" onMouseOver="hilite(6949)" onMouseOut="lolite()" onClick="logVariable('custom_msg')" href="../../../_variables/custom_msg.html">$custom_msg</a> );
<a name="l1737"><span class="linenum">1737</span></a>              return false;
<a name="l1738"><span class="linenum">1738</span></a>          }
<a name="l1739"><span class="linenum">1739</span></a>  
<a name="l1740"><span class="linenum">1740</span></a>          return true;
<a name="l1741"><span class="linenum">1741</span></a>      }
<a name="l1742"><span class="linenum">1742</span></a>  
<a name="l1743"><span class="linenum">1743</span></a>      if( <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../_variables/GLOBALS.html">$GLOBALS</a>[<a class="var it6947" onMouseOver="hilite(6947)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../../_variables/variable.html">$variable</a>] === '' &amp;&amp; ! <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../_variables/required.html">$required</a> )
<a name="l1744"><span class="linenum">1744</span></a>      {    // Variable is empty or not set. That's fine since it isn't required:
<a name="l1745"><span class="linenum">1745</span></a>          return true;
<a name="l1746"><span class="linenum">1746</span></a>      }
<a name="l1747"><span class="linenum">1747</span></a>  
<a name="l1748"><span class="linenum">1748</span></a>      <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../_variables/msg.html">$msg</a> = <a class="var it6948" onMouseOver="hilite(6948)" onMouseOut="lolite()" onClick="logVariable('validator')" href="../../../_variables/validator.html">$validator</a>( <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../_variables/GLOBALS.html">$GLOBALS</a>[<a class="var it6947" onMouseOver="hilite(6947)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../../_variables/variable.html">$variable</a>] );
<a name="l1749"><span class="linenum">1749</span></a>  
<a name="l1750"><span class="linenum">1750</span></a>      if( !empty( <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../_variables/msg.html">$msg</a> ) )
<a name="l1751"><span class="linenum">1751</span></a>      {
<a name="l1752"><span class="linenum">1752</span></a>          if( !empty( <a class="var it6949" onMouseOver="hilite(6949)" onMouseOut="lolite()" onClick="logVariable('custom_msg')" href="../../../_variables/custom_msg.html">$custom_msg</a> ) )
<a name="l1753"><span class="linenum">1753</span></a>          {
<a name="l1754"><span class="linenum">1754</span></a>              <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../_variables/msg.html">$msg</a> = <a class="var it6949" onMouseOver="hilite(6949)" onMouseOut="lolite()" onClick="logVariable('custom_msg')" href="../../../_variables/custom_msg.html">$custom_msg</a>;
<a name="l1755"><span class="linenum">1755</span></a>          }
<a name="l1756"><span class="linenum">1756</span></a>  
<a name="l1757"><span class="linenum">1757</span></a>          <a class="function" onClick="logFunction('param_error')" href="../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( <a class="var it6947" onMouseOver="hilite(6947)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../../_variables/variable.html">$variable</a>, <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../_variables/msg.html">$msg</a> );
<a name="l1758"><span class="linenum">1758</span></a>          return false;
<a name="l1759"><span class="linenum">1759</span></a>      }
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>      return true;
<a name="l1762"><span class="linenum">1762</span></a>  }
<a name="l1763"><span class="linenum">1763</span></a>  
<a name="l1764"><span class="linenum">1764</span></a>  
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment">/**</span>
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment"> * Checks if the param is a decimal number</span>
<a name="l1767"><span class="linenum">1767</span></a>  <span class="comment"> *</span>
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment"> * @param string decimal to check</span>
<a name="l1769"><span class="linenum">1769</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1770"><span class="linenum">1770</span></a>  <span class="comment"> */</span>
<a name="l1771"><span class="linenum">1771</span></a>  function <a class="function" onClick="logFunction('is_decimal')" href="../../../_functions/is_decimal.html" onMouseOver="funcPopup(event,'is_decimal')">is_decimal</a>( <a class="var it3679" onMouseOver="hilite(3679)" onMouseOut="lolite()" onClick="logVariable('decimal')" href="../../../_variables/decimal.html">$decimal</a> )
<a name="l1772"><span class="linenum">1772</span></a>  {
<a name="l1773"><span class="linenum">1773</span></a>      return <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#^[0-9]*(\.[0-9]+)?$#', <a class="var it3679" onMouseOver="hilite(3679)" onMouseOut="lolite()" onClick="logVariable('decimal')" href="../../../_variables/decimal.html">$decimal</a> );
<a name="l1774"><span class="linenum">1774</span></a>  }
<a name="l1775"><span class="linenum">1775</span></a>  
<a name="l1776"><span class="linenum">1776</span></a>  
<a name="l1777"><span class="linenum">1777</span></a>  <span class="comment">/**</span>
<a name="l1778"><span class="linenum">1778</span></a>  <span class="comment"> * Checks if the param is an integer (no float, e.g. 3.14).</span>
<a name="l1779"><span class="linenum">1779</span></a>  <span class="comment"> *</span>
<a name="l1780"><span class="linenum">1780</span></a>  <span class="comment"> * @param string number to check</span>
<a name="l1781"><span class="linenum">1781</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1782"><span class="linenum">1782</span></a>  <span class="comment"> */</span>
<a name="l1783"><span class="linenum">1783</span></a>  function <a class="function" onClick="logFunction('is_number')" href="../../../_functions/is_number.html" onMouseOver="funcPopup(event,'is_number')">is_number</a>( <a class="var it2902" onMouseOver="hilite(2902)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> )
<a name="l1784"><span class="linenum">1784</span></a>  {
<a name="l1785"><span class="linenum">1785</span></a>      return <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#^[0-9]+$#', <a class="var it2902" onMouseOver="hilite(2902)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../_variables/number.html">$number</a> );
<a name="l1786"><span class="linenum">1786</span></a>  }
<a name="l1787"><span class="linenum">1787</span></a>  
<a name="l1788"><span class="linenum">1788</span></a>  
<a name="l1789"><span class="linenum">1789</span></a>  <span class="comment">/**</span>
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment"> * Check that email address looks valid.</span>
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment"> *</span>
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment"> * @param string email address to check</span>
<a name="l1793"><span class="linenum">1793</span></a>  <span class="comment"> * @param string Format to use ('simple', 'rfc')</span>
<a name="l1794"><span class="linenum">1794</span></a>  <span class="comment"> *    'simple':</span>
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment"> *      Single email address.</span>
<a name="l1796"><span class="linenum">1796</span></a>  <span class="comment"> *    'rfc':</span>
<a name="l1797"><span class="linenum">1797</span></a>  <span class="comment"> *      Full email address, may include name (RFC2822)</span>
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment"> *      - example@example.org</span>
<a name="l1799"><span class="linenum">1799</span></a>  <span class="comment"> *      - Me &lt;example@example.org&gt;</span>
<a name="l1800"><span class="linenum">1800</span></a>  <span class="comment"> *      - &quot;Me&quot; &lt;example@example.org&gt;</span>
<a name="l1801"><span class="linenum">1801</span></a>  <span class="comment"> * @param boolean Return the match or boolean</span>
<a name="l1802"><span class="linenum">1802</span></a>  <span class="comment"> *</span>
<a name="l1803"><span class="linenum">1803</span></a>  <span class="comment"> * @return bool|array Either true/false or the match (see {@link $return_match})</span>
<a name="l1804"><span class="linenum">1804</span></a>  <span class="comment"> */</span>
<a name="l1805"><span class="linenum">1805</span></a>  function <a class="function" onClick="logFunction('is_email')" href="../../../_functions/is_email.html" onMouseOver="funcPopup(event,'is_email')">is_email</a>( <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a>, <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'simple', <a class="var it6950" onMouseOver="hilite(6950)" onMouseOut="lolite()" onClick="logVariable('return_match')" href="../../../_variables/return_match.html">$return_match</a> = false )
<a name="l1806"><span class="linenum">1806</span></a>  {
<a name="l1807"><span class="linenum">1807</span></a>  <span class="comment">    #$chars = &quot;/^([a-z0-9_]|\\-|\\.)+@(([a-z0-9_]|\\-)+\\.)+[a-z]{2,4}\$/i&quot;;</span>
<a name="l1808"><span class="linenum">1808</span></a>  
<a name="l1809"><span class="linenum">1809</span></a>      switch( <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> )
<a name="l1810"><span class="linenum">1810</span></a>      {
<a name="l1811"><span class="linenum">1811</span></a>          case 'rfc':
<a name="l1812"><span class="linenum">1812</span></a>          case 'rfc2822':
<a name="l1813"><span class="linenum">1813</span></a>              <span class="comment">/**</span>
<a name="l1814"><span class="linenum">1814</span></a>  <span class="comment">             * Regexp pattern converted from: http://www.regexlib.com/REDetails.aspx?regexp_id=711</span>
<a name="l1815"><span class="linenum">1815</span></a>  <span class="comment">             * Extended to allow escaped quotes.</span>
<a name="l1816"><span class="linenum">1816</span></a>  <span class="comment">             */</span>
<a name="l1817"><span class="linenum">1817</span></a>              <a class="var it6952" onMouseOver="hilite(6952)" onMouseOut="lolite()" onClick="logVariable('pattern_email')" href="../../../_variables/pattern_email.html">$pattern_email</a> = '/^
<a name="l1818"><span class="linenum">1818</span></a>                  (
<a name="l1819"><span class="linenum">1819</span></a>                      (?&gt;[a-zA-Z\d!\#$%&amp;\'*+\-\/=?^_`{|}~]+\x20*
<a name="l1820"><span class="linenum">1820</span></a>                          |&quot;( \\\&quot; | (?=[\x01-\x7f])[^&quot;\\\] | \\[\x01-\x7f] )*&quot;\x20*)* # Name
<a name="l1821"><span class="linenum">1821</span></a>                      (&lt;)
<a name="l1822"><span class="linenum">1822</span></a>                  )?
<a name="l1823"><span class="linenum">1823</span></a>                  (
<a name="l1824"><span class="linenum">1824</span></a>                      (?!\.)(?&gt;\.?[a-zA-Z\d!\#$%&amp;\'*+\-\/=?^_`{|}~]+)+
<a name="l1825"><span class="linenum">1825</span></a>                      |&quot;( \\\&quot; | (?=[\x01-\x7f])[^&quot;\\\] | \\[\x01-\x7f] )* &quot; # quoted mailbox name
<a name="l1826"><span class="linenum">1826</span></a>                  )
<a name="l1827"><span class="linenum">1827</span></a>                  @
<a name="l1828"><span class="linenum">1828</span></a>                  (
<a name="l1829"><span class="linenum">1829</span></a>                      ((?!-)[a-zA-Z\d\-]+(?&lt;!-)\.)+[a-zA-Z]{2,}
<a name="l1830"><span class="linenum">1830</span></a>                      |
<a name="l1831"><span class="linenum">1831</span></a>                      \[(
<a name="l1832"><span class="linenum">1832</span></a>                          ( (?(?&lt;!\[)\.)(25[0-5] | 2[0-4]\d | [01]?\d?\d) ){4}
<a name="l1833"><span class="linenum">1833</span></a>                          |
<a name="l1834"><span class="linenum">1834</span></a>                          [a-zA-Z\d\-]*[a-zA-Z\d]:( (?=[\x01-\x7f])[^\\\[\]] | \\[\x01-\x7f] )+
<a name="l1835"><span class="linenum">1835</span></a>                      )\]
<a name="l1836"><span class="linenum">1836</span></a>                  )
<a name="l1837"><span class="linenum">1837</span></a>                  (?(3)&gt;) # match &quot;&gt;&quot; if it was there
<a name="l1838"><span class="linenum">1838</span></a>                  $/x';
<a name="l1839"><span class="linenum">1839</span></a>              break;
<a name="l1840"><span class="linenum">1840</span></a>  
<a name="l1841"><span class="linenum">1841</span></a>          case 'simple':
<a name="l1842"><span class="linenum">1842</span></a>          default:
<a name="l1843"><span class="linenum">1843</span></a>  <span class="comment">            // '/^\S+@[^\.\s]\S*\.[a-z]{2,}$/i'</span>
<a name="l1844"><span class="linenum">1844</span></a>              <a class="var it6952" onMouseOver="hilite(6952)" onMouseOut="lolite()" onClick="logVariable('pattern_email')" href="../../../_variables/pattern_email.html">$pattern_email</a> = '~^(([_a-z0-9-]+)(\.[_a-z0-9-]+)*@([a-z0-9-]+)(\.[a-z0-9-]+)*(\.[a-z]{2,}))$~i';
<a name="l1845"><span class="linenum">1845</span></a>              break;
<a name="l1846"><span class="linenum">1846</span></a>      }
<a name="l1847"><span class="linenum">1847</span></a>  
<a name="l1848"><span class="linenum">1848</span></a>      if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a>, '@' ) !== false &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a>, '.' ) !== false )
<a name="l1849"><span class="linenum">1849</span></a>      {
<a name="l1850"><span class="linenum">1850</span></a>          if( <a class="var it6950" onMouseOver="hilite(6950)" onMouseOut="lolite()" onClick="logVariable('return_match')" href="../../../_variables/return_match.html">$return_match</a> )
<a name="l1851"><span class="linenum">1851</span></a>          {
<a name="l1852"><span class="linenum">1852</span></a>              <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( <a class="var it6952" onMouseOver="hilite(6952)" onMouseOut="lolite()" onClick="logVariable('pattern_email')" href="../../../_variables/pattern_email.html">$pattern_email</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a> );
<a name="l1853"><span class="linenum">1853</span></a>              return <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a>;
<a name="l1854"><span class="linenum">1854</span></a>          }
<a name="l1855"><span class="linenum">1855</span></a>          else
<a name="l1856"><span class="linenum">1856</span></a>          {
<a name="l1857"><span class="linenum">1857</span></a>              return (bool)<a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( <a class="var it6952" onMouseOver="hilite(6952)" onMouseOut="lolite()" onClick="logVariable('pattern_email')" href="../../../_variables/pattern_email.html">$pattern_email</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a> );
<a name="l1858"><span class="linenum">1858</span></a>          }
<a name="l1859"><span class="linenum">1859</span></a>      }
<a name="l1860"><span class="linenum">1860</span></a>      else
<a name="l1861"><span class="linenum">1861</span></a>      {
<a name="l1862"><span class="linenum">1862</span></a>          return <a class="var it6950" onMouseOver="hilite(6950)" onMouseOut="lolite()" onClick="logVariable('return_match')" href="../../../_variables/return_match.html">$return_match</a> ? array() : false;
<a name="l1863"><span class="linenum">1863</span></a>      }
<a name="l1864"><span class="linenum">1864</span></a>  }
<a name="l1865"><span class="linenum">1865</span></a>  
<a name="l1866"><span class="linenum">1866</span></a>  
<a name="l1867"><span class="linenum">1867</span></a>  <span class="comment">/**</span>
<a name="l1868"><span class="linenum">1868</span></a>  <span class="comment"> * Checks if the phone number is valid</span>
<a name="l1869"><span class="linenum">1869</span></a>  <span class="comment"> *</span>
<a name="l1870"><span class="linenum">1870</span></a>  <span class="comment"> * @param string phone number to check</span>
<a name="l1871"><span class="linenum">1871</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1872"><span class="linenum">1872</span></a>  <span class="comment"> */</span>
<a name="l1873"><span class="linenum">1873</span></a>  function <a class="function" onClick="logFunction('is_phone')" href="../../../_functions/is_phone.html" onMouseOver="funcPopup(event,'is_phone')">is_phone</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a> )
<a name="l1874"><span class="linenum">1874</span></a>  {
<a name="l1875"><span class="linenum">1875</span></a>      return <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '|^\+?[\-*#/(). 0-9]+$|', <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a> );
<a name="l1876"><span class="linenum">1876</span></a>  }
<a name="l1877"><span class="linenum">1877</span></a>  
<a name="l1878"><span class="linenum">1878</span></a>  
<a name="l1879"><span class="linenum">1879</span></a>  <span class="comment">/**</span>
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment"> * Checks if the url is valid</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment"> *</span>
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment"> * @param string url to check</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment"> */</span>
<a name="l1885"><span class="linenum">1885</span></a>  function <a class="function" onClick="logFunction('is_url')" href="../../../_functions/is_url.html" onMouseOver="funcPopup(event,'is_url')">is_url</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> )
<a name="l1886"><span class="linenum">1886</span></a>  {
<a name="l1887"><span class="linenum">1887</span></a>      if( <a class="function" onClick="logFunction('validate_url')" href="../../../_functions/validate_url.html" onMouseOver="funcPopup(event,'validate_url')">validate_url</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, 'posting', false ) )
<a name="l1888"><span class="linenum">1888</span></a>      {
<a name="l1889"><span class="linenum">1889</span></a>          return false;
<a name="l1890"><span class="linenum">1890</span></a>      }
<a name="l1891"><span class="linenum">1891</span></a>  
<a name="l1892"><span class="linenum">1892</span></a>      return true;
<a name="l1893"><span class="linenum">1893</span></a>  }
<a name="l1894"><span class="linenum">1894</span></a>  
<a name="l1895"><span class="linenum">1895</span></a>  
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment">/**</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment"> * Checks if the word is valid</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment"> *</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment"> * @param string word to check</span>
<a name="l1900"><span class="linenum">1900</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1901"><span class="linenum">1901</span></a>  <span class="comment"> */</span>
<a name="l1902"><span class="linenum">1902</span></a>  function <a class="function" onClick="logFunction('is_word')" href="../../../_functions/is_word.html" onMouseOver="funcPopup(event,'is_word')">is_word</a>( <a class="var it1384" onMouseOver="hilite(1384)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../../_variables/word.html">$word</a> )
<a name="l1903"><span class="linenum">1903</span></a>  {
<a name="l1904"><span class="linenum">1904</span></a>      return <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#^[A-Za-z]+$#', <a class="var it1384" onMouseOver="hilite(1384)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../../_variables/word.html">$word</a> );
<a name="l1905"><span class="linenum">1905</span></a>  }
<a name="l1906"><span class="linenum">1906</span></a>  
<a name="l1907"><span class="linenum">1907</span></a>  
<a name="l1908"><span class="linenum">1908</span></a>  <span class="comment">/**</span>
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment"> * Check if the login is valid (in terms of allowed chars)</span>
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment"> *</span>
<a name="l1911"><span class="linenum">1911</span></a>  <span class="comment"> * @param string login</span>
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment"> */</span>
<a name="l1914"><span class="linenum">1914</span></a>  function <a class="function" onClick="logFunction('is_valid_login')" href="../../../_functions/is_valid_login.html" onMouseOver="funcPopup(event,'is_valid_login')">is_valid_login</a>( <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a>, <a class="var it6953" onMouseOver="hilite(6953)" onMouseOut="lolite()" onClick="logVariable('force_strict_logins')" href="../../../_variables/force_strict_logins.html">$force_strict_logins</a> = false )
<a name="l1915"><span class="linenum">1915</span></a>  {
<a name="l1916"><span class="linenum">1916</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l1917"><span class="linenum">1917</span></a>  
<a name="l1918"><span class="linenum">1918</span></a>      <a class="var it6954" onMouseOver="hilite(6954)" onMouseOut="lolite()" onClick="logVariable('strict_logins')" href="../../../_variables/strict_logins.html">$strict_logins</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('strict_logins');
<a name="l1919"><span class="linenum">1919</span></a>  
<a name="l1920"><span class="linenum">1920</span></a>  <span class="comment">    // NOTE: in some places usernames are typed in by other users (messaging) or admins.</span>
<a name="l1921"><span class="linenum">1921</span></a>  <span class="comment">    // Having cryptic logins with hard to type letters is a PITA.</span>
<a name="l1922"><span class="linenum">1922</span></a>  
<a name="l1923"><span class="linenum">1923</span></a>  <span class="comment">    // Step 1</span>
<a name="l1924"><span class="linenum">1924</span></a>  <span class="comment">    // Forbid the following characters in logins</span>
<a name="l1925"><span class="linenum">1925</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~[\'&quot;&gt;&lt;@\s]~', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> ) )
<a name="l1926"><span class="linenum">1926</span></a>      {    // WARNING: allowing ' or &quot; or &gt; or &lt; will open security issues!
<a name="l1927"><span class="linenum">1927</span></a>  <span class="comment">        // NOTE: allowing @ will make some &quot;average&quot; users use their email address (not good for their spam health)</span>
<a name="l1928"><span class="linenum">1928</span></a>  <span class="comment">        // NOTE: we do not allow whitespace in logins</span>
<a name="l1929"><span class="linenum">1929</span></a>          return false;
<a name="l1930"><span class="linenum">1930</span></a>      }
<a name="l1931"><span class="linenum">1931</span></a>  
<a name="l1932"><span class="linenum">1932</span></a>  <span class="comment">    // Step 2</span>
<a name="l1933"><span class="linenum">1933</span></a>      if( (<a class="var it6954" onMouseOver="hilite(6954)" onMouseOut="lolite()" onClick="logVariable('strict_logins')" href="../../../_variables/strict_logins.html">$strict_logins</a> || <a class="var it6953" onMouseOver="hilite(6953)" onMouseOut="lolite()" onClick="logVariable('force_strict_logins')" href="../../../_variables/force_strict_logins.html">$force_strict_logins</a>) &amp;&amp; ! <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~^[A-Za-z0-9_.]+$~', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> ) )
<a name="l1934"><span class="linenum">1934</span></a>      {    // WARNING: allowing special chars like latin 1 accented chars ( \xDF-\xF6\xF8-\xFF ) will create issues with
<a name="l1935"><span class="linenum">1935</span></a>  <span class="comment">        // user media directory names (tested on Max OS X) -- Do no allow any of this until we have a clean &amp; safe media dir name generator.</span>
<a name="l1936"><span class="linenum">1936</span></a>  
<a name="l1937"><span class="linenum">1937</span></a>  <span class="comment">        // fp&gt; TODO: check why a dash '-' prevents renaming the fileroot</span>
<a name="l1938"><span class="linenum">1938</span></a>          return false;
<a name="l1939"><span class="linenum">1939</span></a>      }
<a name="l1940"><span class="linenum">1940</span></a>      elseif( ! <a class="var it6954" onMouseOver="hilite(6954)" onMouseOut="lolite()" onClick="logVariable('strict_logins')" href="../../../_variables/strict_logins.html">$strict_logins</a> )
<a name="l1941"><span class="linenum">1941</span></a>      {    // We allow any character that is not explicitly forbidden in Step 1
<a name="l1942"><span class="linenum">1942</span></a>  <span class="comment">        // Enforce additional limitations</span>
<a name="l1943"><span class="linenum">1943</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '|%([a-fA-F0-9][a-fA-F0-9])|', '', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> ); <span class="comment">// Kill octets</span>
<a name="l1944"><span class="linenum">1944</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/&amp;.+?;/', '', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> ); <span class="comment">// Kill entities</span>
<a name="l1945"><span class="linenum">1945</span></a>      }
<a name="l1946"><span class="linenum">1946</span></a>  
<a name="l1947"><span class="linenum">1947</span></a>  <span class="comment">    // Step 3</span>
<a name="l1948"><span class="linenum">1948</span></a>  <span class="comment">    // Special case, the login is valid however we forbid it's usage.</span>
<a name="l1949"><span class="linenum">1949</span></a>  <span class="comment">    // param_check_valid_login() will display a special error message in this case.</span>
<a name="l1950"><span class="linenum">1950</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~^usr_~', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> ) )
<a name="l1951"><span class="linenum">1951</span></a>      {    // Logins cannot start with 'usr_', this prefix is reserved for system use
<a name="l1952"><span class="linenum">1952</span></a>  <span class="comment">        // We create user media directories for users with non-ASCII logins in format /media/users/usr_55/, where 55 is user ID</span>
<a name="l1953"><span class="linenum">1953</span></a>          return 'usr';
<a name="l1954"><span class="linenum">1954</span></a>      }
<a name="l1955"><span class="linenum">1955</span></a>  
<a name="l1956"><span class="linenum">1956</span></a>      return true;
<a name="l1957"><span class="linenum">1957</span></a>  }
<a name="l1958"><span class="linenum">1958</span></a>  
<a name="l1959"><span class="linenum">1959</span></a>  
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment">/**</span>
<a name="l1961"><span class="linenum">1961</span></a>  <span class="comment"> * Checks if the color is valid</span>
<a name="l1962"><span class="linenum">1962</span></a>  <span class="comment"> *</span>
<a name="l1963"><span class="linenum">1963</span></a>  <span class="comment"> * @param string color to check</span>
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment"> */</span>
<a name="l1966"><span class="linenum">1966</span></a>  function <a class="function" onClick="logFunction('is_color')" href="../../../_functions/is_color.html" onMouseOver="funcPopup(event,'is_color')">is_color</a>( <a class="var it1560" onMouseOver="hilite(1560)" onMouseOut="lolite()" onClick="logVariable('color')" href="../../../_variables/color.html">$color</a> )
<a name="l1967"><span class="linenum">1967</span></a>  {
<a name="l1968"><span class="linenum">1968</span></a>      return <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~^(#([a-f0-9]{3}){1,2})?$~i', <a class="var it1560" onMouseOver="hilite(1560)" onMouseOut="lolite()" onClick="logVariable('color')" href="../../../_variables/color.html">$color</a> );
<a name="l1969"><span class="linenum">1969</span></a>  }
<a name="l1970"><span class="linenum">1970</span></a>  
<a name="l1971"><span class="linenum">1971</span></a>  
<a name="l1972"><span class="linenum">1972</span></a>  <span class="comment">/**</span>
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment"> * Check if the login is valid (user exists)</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment"> *</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment"> * @param string login</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment"> * @return boolean true if OK</span>
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment"> */</span>
<a name="l1978"><span class="linenum">1978</span></a>  function <a class="function" onClick="logFunction('user_exists')" href="../../../_functions/user_exists.html" onMouseOver="funcPopup(event,'user_exists')">user_exists</a>( <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> )
<a name="l1979"><span class="linenum">1979</span></a>  {
<a name="l1980"><span class="linenum">1980</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l1981"><span class="linenum">1981</span></a>  
<a name="l1982"><span class="linenum">1982</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l1983"><span class="linenum">1983</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '<a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*)' );
<a name="l1984"><span class="linenum">1984</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_users' );
<a name="l1985"><span class="linenum">1985</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'user_login = &quot;'.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('escape')" href="../../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>(<a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a>).'&quot;' );
<a name="l1986"><span class="linenum">1986</span></a>  
<a name="l1987"><span class="linenum">1987</span></a>      <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l1988"><span class="linenum">1988</span></a>      return <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a> &gt; 0 ? true : false; <span class="comment">// PHP4 compatibility</span>
<a name="l1989"><span class="linenum">1989</span></a>  }
<a name="l1990"><span class="linenum">1990</span></a>  
<a name="l1991"><span class="linenum">1991</span></a>  
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment">/**</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment"> * Are we running on a Windows server?</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment"> */</span>
<a name="l1995"><span class="linenum">1995</span></a>  function <a class="function" onClick="logFunction('is_windows')" href="../../../_functions/is_windows.html" onMouseOver="funcPopup(event,'is_windows')">is_windows</a>()
<a name="l1996"><span class="linenum">1996</span></a>  {
<a name="l1997"><span class="linenum">1997</span></a>      return ( <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(PHP_OS,0,3)) == 'WIN' );
<a name="l1998"><span class="linenum">1998</span></a>  }
<a name="l1999"><span class="linenum">1999</span></a>  
<a name="l2000"><span class="linenum">2000</span></a>  
<a name="l2001"><span class="linenum">2001</span></a>  <span class="comment">/**</span>
<a name="l2002"><span class="linenum">2002</span></a>  <span class="comment"> * Get all &quot;a&quot; tags from the given content</span>
<a name="l2003"><span class="linenum">2003</span></a>  <span class="comment"> *</span>
<a name="l2004"><span class="linenum">2004</span></a>  <span class="comment"> * @param string content</span>
<a name="l2005"><span class="linenum">2005</span></a>  <span class="comment"> * @return array all &lt;a../a&gt; part from the given content</span>
<a name="l2006"><span class="linenum">2006</span></a>  <span class="comment"> */</span>
<a name="l2007"><span class="linenum">2007</span></a>  function <a class="function" onClick="logFunction('get_atags')" href="../../../_functions/get_atags.html" onMouseOver="funcPopup(event,'get_atags')">get_atags</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> )
<a name="l2008"><span class="linenum">2008</span></a>  {
<a name="l2009"><span class="linenum">2009</span></a>      <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> = 'a';
<a name="l2010"><span class="linenum">2010</span></a>      <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../../../_variables/regexp.html">$regexp</a> = '{&lt;'.<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a>.'[^&gt;]*&gt;(.*?)&lt;/'.<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a>.'&gt;}';
<a name="l2011"><span class="linenum">2011</span></a>  
<a name="l2012"><span class="linenum">2012</span></a>      <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>( <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../../../_variables/regexp.html">$regexp</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> );
<a name="l2013"><span class="linenum">2013</span></a>      return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[0];
<a name="l2014"><span class="linenum">2014</span></a>  }
<a name="l2015"><span class="linenum">2015</span></a>  
<a name="l2016"><span class="linenum">2016</span></a>  
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment">/**</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment"> * Get all &quot;img&quot; tags from the given content</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment"> *</span>
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment"> * @param string content</span>
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment"> * @return array all &lt;img../img&gt; part from the given content</span>
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment"> */</span>
<a name="l2023"><span class="linenum">2023</span></a>  function <a class="function" onClick="logFunction('get_imgtags')" href="../../../_functions/get_imgtags.html" onMouseOver="funcPopup(event,'get_imgtags')">get_imgtags</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> )
<a name="l2024"><span class="linenum">2024</span></a>  {
<a name="l2025"><span class="linenum">2025</span></a>      <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a> = 'img';
<a name="l2026"><span class="linenum">2026</span></a>      <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../../../_variables/regexp.html">$regexp</a> = '{&lt;'.<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a>.'[^&gt;]*[ (&lt;/'.<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../../_variables/tag.html">$tag</a>.'&gt;) | (/&gt;) ]}';
<a name="l2027"><span class="linenum">2027</span></a>  
<a name="l2028"><span class="linenum">2028</span></a>      <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>( <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../../../_variables/regexp.html">$regexp</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> );
<a name="l2029"><span class="linenum">2029</span></a>      return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[0];
<a name="l2030"><span class="linenum">2030</span></a>  }
<a name="l2031"><span class="linenum">2031</span></a>  
<a name="l2032"><span class="linenum">2032</span></a>  
<a name="l2033"><span class="linenum">2033</span></a>  <span class="comment">/**</span>
<a name="l2034"><span class="linenum">2034</span></a>  <span class="comment"> * Get all urls from the given content</span>
<a name="l2035"><span class="linenum">2035</span></a>  <span class="comment"> *</span>
<a name="l2036"><span class="linenum">2036</span></a>  <span class="comment"> * @param string content</span>
<a name="l2037"><span class="linenum">2037</span></a>  <span class="comment"> * @return array all url from content</span>
<a name="l2038"><span class="linenum">2038</span></a>  <span class="comment"> */</span>
<a name="l2039"><span class="linenum">2039</span></a>  function <a class="function" onClick="logFunction('get_urls')" href="../../../_functions/get_urls.html" onMouseOver="funcPopup(event,'get_urls')">get_urls</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> )
<a name="l2040"><span class="linenum">2040</span></a>  {
<a name="l2041"><span class="linenum">2041</span></a>      <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../../../_variables/regexp.html">$regexp</a> = '^(?#Protocol)(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?#Username:Password)(?:\w+:\w+@)?(?#Subdomains)(?:(?:[-\w]+\.)+(?#TopLevel Domains)(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum|travel|[a-z]{2,4}))(?#Port)(?::[\d]{1,5})?(?#Directories)(?:(?:(?:\/(?:[-\w~!$+|.,;=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?#Query)(?:(?:\?(?:[-\w~!$+|.,;*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,;*:=]|%[a-f\d]{2})*)(?:&amp;(?:[-\w~!$+|.,;*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,;*:=]|%[a-f\d]{2})*)*)*(?#Anchor)(?:#(?:[-\w~!$+|.,;*:=]|%[a-f\d]{2})*)?^';
<a name="l2042"><span class="linenum">2042</span></a>  
<a name="l2043"><span class="linenum">2043</span></a>      <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>( <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../../../_variables/regexp.html">$regexp</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> );
<a name="l2044"><span class="linenum">2044</span></a>      return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[0];
<a name="l2045"><span class="linenum">2045</span></a>  }
<a name="l2046"><span class="linenum">2046</span></a>  
<a name="l2047"><span class="linenum">2047</span></a>  
<a name="l2048"><span class="linenum">2048</span></a>  function <a class="function" onClick="logFunction('xmlrpc_getposttitle')" href="../../../_functions/xmlrpc_getposttitle.html" onMouseOver="funcPopup(event,'xmlrpc_getposttitle')">xmlrpc_getposttitle</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>)
<a name="l2049"><span class="linenum">2049</span></a>  {
<a name="l2050"><span class="linenum">2050</span></a>      global <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('post_default_title')" href="../../../_variables/post_default_title.html">$post_default_title</a>;
<a name="l2051"><span class="linenum">2051</span></a>      if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/&lt;title&gt;(.+?)&lt;\/title&gt;/is', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it6955" onMouseOver="hilite(6955)" onMouseOut="lolite()" onClick="logVariable('matchtitle')" href="../../../_variables/matchtitle.html">$matchtitle</a>))
<a name="l2052"><span class="linenum">2052</span></a>      {
<a name="l2053"><span class="linenum">2053</span></a>          <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../../_variables/post_title.html">$post_title</a> = <a class="var it6955" onMouseOver="hilite(6955)" onMouseOut="lolite()" onClick="logVariable('matchtitle')" href="../../../_variables/matchtitle.html">$matchtitle</a>[1];
<a name="l2054"><span class="linenum">2054</span></a>      }
<a name="l2055"><span class="linenum">2055</span></a>      else
<a name="l2056"><span class="linenum">2056</span></a>      {
<a name="l2057"><span class="linenum">2057</span></a>          <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../../_variables/post_title.html">$post_title</a> = <a class="var it1592" onMouseOver="hilite(1592)" onMouseOut="lolite()" onClick="logVariable('post_default_title')" href="../../../_variables/post_default_title.html">$post_default_title</a>;
<a name="l2058"><span class="linenum">2058</span></a>      }
<a name="l2059"><span class="linenum">2059</span></a>      return(<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../../_variables/post_title.html">$post_title</a>);
<a name="l2060"><span class="linenum">2060</span></a>  }
<a name="l2061"><span class="linenum">2061</span></a>  
<a name="l2062"><span class="linenum">2062</span></a>  
<a name="l2063"><span class="linenum">2063</span></a>  <span class="comment">/**</span>
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment"> * Also used by post by mail</span>
<a name="l2065"><span class="linenum">2065</span></a>  <span class="comment"> *</span>
<a name="l2066"><span class="linenum">2066</span></a>  <span class="comment"> * @deprecated by xmlrpc_getpostcategories()</span>
<a name="l2067"><span class="linenum">2067</span></a>  <span class="comment"> */</span>
<a name="l2068"><span class="linenum">2068</span></a>  function <a class="function" onClick="logFunction('xmlrpc_getpostcategory')" href="../../../_functions/xmlrpc_getpostcategory.html" onMouseOver="funcPopup(event,'xmlrpc_getpostcategory')">xmlrpc_getpostcategory</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>)
<a name="l2069"><span class="linenum">2069</span></a>  {
<a name="l2070"><span class="linenum">2070</span></a>      if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/&lt;category&gt;([0-9]+?)&lt;\/category&gt;/is', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it6956" onMouseOver="hilite(6956)" onMouseOut="lolite()" onClick="logVariable('matchcat')" href="../../../_variables/matchcat.html">$matchcat</a>))
<a name="l2071"><span class="linenum">2071</span></a>      {
<a name="l2072"><span class="linenum">2072</span></a>          return <a class="var it6956" onMouseOver="hilite(6956)" onMouseOut="lolite()" onClick="logVariable('matchcat')" href="../../../_variables/matchcat.html">$matchcat</a>[1];
<a name="l2073"><span class="linenum">2073</span></a>      }
<a name="l2074"><span class="linenum">2074</span></a>  
<a name="l2075"><span class="linenum">2075</span></a>      return false;
<a name="l2076"><span class="linenum">2076</span></a>  }
<a name="l2077"><span class="linenum">2077</span></a>  
<a name="l2078"><span class="linenum">2078</span></a>  
<a name="l2079"><span class="linenum">2079</span></a>  <span class="comment">/**</span>
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment"> * Extract categories out of &quot;&lt;category&gt;&quot; tag from $content.</span>
<a name="l2081"><span class="linenum">2081</span></a>  <span class="comment"> *</span>
<a name="l2082"><span class="linenum">2082</span></a>  <span class="comment"> * NOTE: w.bloggar sends something like &quot;&lt;category&gt;00000013,00000001,00000004,&lt;/category&gt;&quot; to</span>
<a name="l2083"><span class="linenum">2083</span></a>  <span class="comment"> *       blogger.newPost.</span>
<a name="l2084"><span class="linenum">2084</span></a>  <span class="comment"> *</span>
<a name="l2085"><span class="linenum">2085</span></a>  <span class="comment"> * @return false|array</span>
<a name="l2086"><span class="linenum">2086</span></a>  <span class="comment"> */</span>
<a name="l2087"><span class="linenum">2087</span></a>  function <a class="function" onClick="logFunction('xmlrpc_getpostcategories')" href="../../../_functions/xmlrpc_getpostcategories.html" onMouseOver="funcPopup(event,'xmlrpc_getpostcategories')">xmlrpc_getpostcategories</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>)
<a name="l2088"><span class="linenum">2088</span></a>  {
<a name="l2089"><span class="linenum">2089</span></a>      <a class="var it6957" onMouseOver="hilite(6957)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../../../_variables/cats.html">$cats</a> = array();
<a name="l2090"><span class="linenum">2090</span></a>  
<a name="l2091"><span class="linenum">2091</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('~&lt;category&gt;(\d+\s*(,\s*\d*)*)&lt;/category&gt;~i', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a>) )
<a name="l2092"><span class="linenum">2092</span></a>      {
<a name="l2093"><span class="linenum">2093</span></a>          <a class="var it6957" onMouseOver="hilite(6957)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../../../_variables/cats.html">$cats</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('~\s*,\s*~', <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a>[1], -1, PREG_SPLIT_NO_EMPTY);
<a name="l2094"><span class="linenum">2094</span></a>          foreach( <a class="var it6957" onMouseOver="hilite(6957)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../../../_variables/cats.html">$cats</a> as <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a> =&gt; <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a> )
<a name="l2095"><span class="linenum">2095</span></a>          {
<a name="l2096"><span class="linenum">2096</span></a>              <a class="var it6957" onMouseOver="hilite(6957)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../../../_variables/cats.html">$cats</a>[<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>] = (int)<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>;
<a name="l2097"><span class="linenum">2097</span></a>          }
<a name="l2098"><span class="linenum">2098</span></a>      }
<a name="l2099"><span class="linenum">2099</span></a>  
<a name="l2100"><span class="linenum">2100</span></a>      return <a class="var it6957" onMouseOver="hilite(6957)" onMouseOut="lolite()" onClick="logVariable('cats')" href="../../../_variables/cats.html">$cats</a>;
<a name="l2101"><span class="linenum">2101</span></a>  }
<a name="l2102"><span class="linenum">2102</span></a>  
<a name="l2103"><span class="linenum">2103</span></a>  
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment">/*</span>
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment"> * xmlrpc_removepostdata(-)</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment"> */</span>
<a name="l2107"><span class="linenum">2107</span></a>  function <a class="function" onClick="logFunction('xmlrpc_removepostdata')" href="../../../_functions/xmlrpc_removepostdata.html" onMouseOver="funcPopup(event,'xmlrpc_removepostdata')">xmlrpc_removepostdata</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>)
<a name="l2108"><span class="linenum">2108</span></a>  {
<a name="l2109"><span class="linenum">2109</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&lt;title&gt;(.*?)&lt;\/title&gt;/si', '', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l2110"><span class="linenum">2110</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&lt;category&gt;(.*?)&lt;\/category&gt;/si', '', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l2111"><span class="linenum">2111</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l2112"><span class="linenum">2112</span></a>      return(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>);
<a name="l2113"><span class="linenum">2113</span></a>  }
<a name="l2114"><span class="linenum">2114</span></a>  
<a name="l2115"><span class="linenum">2115</span></a>  
<a name="l2116"><span class="linenum">2116</span></a>  <span class="comment">/**</span>
<a name="l2117"><span class="linenum">2117</span></a>  <span class="comment"> * Echo the XML-RPC call Result and optionally log into file</span>
<a name="l2118"><span class="linenum">2118</span></a>  <span class="comment"> *</span>
<a name="l2119"><span class="linenum">2119</span></a>  <span class="comment"> * @param object XMLRPC response object</span>
<a name="l2120"><span class="linenum">2120</span></a>  <span class="comment"> * @param boolean true to echo</span>
<a name="l2121"><span class="linenum">2121</span></a>  <span class="comment"> * @param mixed File resource or == '' for no file logging.</span>
<a name="l2122"><span class="linenum">2122</span></a>  <span class="comment"> */</span>
<a name="l2123"><span class="linenum">2123</span></a>  function <a class="function" onClick="logFunction('xmlrpc_displayresult')" href="../../../_functions/xmlrpc_displayresult.html" onMouseOver="funcPopup(event,'xmlrpc_displayresult')">xmlrpc_displayresult</a>( <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>, <a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> = true, <a class="var it3607" onMouseOver="hilite(3607)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../_variables/log.html">$log</a> = '' )
<a name="l2124"><span class="linenum">2124</span></a>  {
<a name="l2125"><span class="linenum">2125</span></a>      if( ! <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> )
<a name="l2126"><span class="linenum">2126</span></a>      { // We got no response:
<a name="l2127"><span class="linenum">2127</span></a>          if( <a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> ) echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No response!').&quot;&lt;br /&gt;\n&quot;;
<a name="l2128"><span class="linenum">2128</span></a>          return false;
<a name="l2129"><span class="linenum">2129</span></a>      }
<a name="l2130"><span class="linenum">2130</span></a>  
<a name="l2131"><span class="linenum">2131</span></a>      if( <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>() )
<a name="l2132"><span class="linenum">2132</span></a>      { // We got a remote error:
<a name="l2133"><span class="linenum">2133</span></a>          if( <a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> ) echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Remote error'), ': ', <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('faultString')" href="../../../_functions/faultstring.html" onMouseOver="funcPopup(event,'faultstring')">faultString</a>(), ' (', <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>(), &quot;)&lt;br /&gt;\n&quot;;
<a name="l2134"><span class="linenum">2134</span></a>          <a class="function" onClick="logFunction('debug_fwrite')" href="../../../_functions/debug_fwrite.html" onMouseOver="funcPopup(event,'debug_fwrite')">debug_fwrite</a>(<a class="var it3607" onMouseOver="hilite(3607)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../_variables/log.html">$log</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>().' -- '.<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('faultString')" href="../../../_functions/faultstring.html" onMouseOver="funcPopup(event,'faultstring')">faultString</a>());
<a name="l2135"><span class="linenum">2135</span></a>          return false;
<a name="l2136"><span class="linenum">2136</span></a>      }
<a name="l2137"><span class="linenum">2137</span></a>  
<a name="l2138"><span class="linenum">2138</span></a>  <span class="comment">    // We'll display the response:</span>
<a name="l2139"><span class="linenum">2139</span></a>      <a class="var it2507" onMouseOver="hilite(2507)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../../_variables/val.html">$val</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('value')" href="../../../_functions/value.html" onMouseOver="funcPopup(event,'value')">value</a>();
<a name="l2140"><span class="linenum">2140</span></a>      <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('xmlrpc_decode_recurse')" href="../../../_functions/xmlrpc_decode_recurse.html" onMouseOver="funcPopup(event,'xmlrpc_decode_recurse')">xmlrpc_decode_recurse</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('value')" href="../../../_functions/value.html" onMouseOver="funcPopup(event,'value')">value</a>());
<a name="l2141"><span class="linenum">2141</span></a>  
<a name="l2142"><span class="linenum">2142</span></a>      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) )
<a name="l2143"><span class="linenum">2143</span></a>      {
<a name="l2144"><span class="linenum">2144</span></a>          <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> = '';
<a name="l2145"><span class="linenum">2145</span></a>          foreach(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> as <a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a>)
<a name="l2146"><span class="linenum">2146</span></a>          {
<a name="l2147"><span class="linenum">2147</span></a>              if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a> ) )
<a name="l2148"><span class="linenum">2148</span></a>              {
<a name="l2149"><span class="linenum">2149</span></a>                  <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> .= ' [';
<a name="l2150"><span class="linenum">2150</span></a>                  foreach( <a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a> as <a class="var it6958" onMouseOver="hilite(6958)" onMouseOut="lolite()" onClick="logVariable('lv_key')" href="../../../_variables/lv_key.html">$lv_key</a> =&gt; <a class="var it6959" onMouseOver="hilite(6959)" onMouseOut="lolite()" onClick="logVariable('lv_val')" href="../../../_variables/lv_val.html">$lv_val</a> )
<a name="l2151"><span class="linenum">2151</span></a>                  {
<a name="l2152"><span class="linenum">2152</span></a>                      <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> .= <a class="var it6958" onMouseOver="hilite(6958)" onMouseOut="lolite()" onClick="logVariable('lv_key')" href="../../../_variables/lv_key.html">$lv_key</a>.' =&gt; '.( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it6959" onMouseOver="hilite(6959)" onMouseOut="lolite()" onClick="logVariable('lv_val')" href="../../../_variables/lv_val.html">$lv_val</a> ) ? '{'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '; ', <a class="var it6959" onMouseOver="hilite(6959)" onMouseOut="lolite()" onClick="logVariable('lv_val')" href="../../../_variables/lv_val.html">$lv_val</a> ).'}' : <a class="var it6959" onMouseOver="hilite(6959)" onMouseOut="lolite()" onClick="logVariable('lv_val')" href="../../../_variables/lv_val.html">$lv_val</a> ).'; ';
<a name="l2153"><span class="linenum">2153</span></a>                  }
<a name="l2154"><span class="linenum">2154</span></a>                  <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> .= '] ';
<a name="l2155"><span class="linenum">2155</span></a>              }
<a name="l2156"><span class="linenum">2156</span></a>              else
<a name="l2157"><span class="linenum">2157</span></a>              {
<a name="l2158"><span class="linenum">2158</span></a>                  <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> .= ' ['.<a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a>.'] ';
<a name="l2159"><span class="linenum">2159</span></a>              }
<a name="l2160"><span class="linenum">2160</span></a>          }
<a name="l2161"><span class="linenum">2161</span></a>      }
<a name="l2162"><span class="linenum">2162</span></a>      else
<a name="l2163"><span class="linenum">2163</span></a>      {
<a name="l2164"><span class="linenum">2164</span></a>          <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l2165"><span class="linenum">2165</span></a>      }
<a name="l2166"><span class="linenum">2166</span></a>  
<a name="l2167"><span class="linenum">2167</span></a>      <a class="function" onClick="logFunction('debug_fwrite')" href="../../../_functions/debug_fwrite.html" onMouseOver="funcPopup(event,'debug_fwrite')">debug_fwrite</a>(<a class="var it3607" onMouseOver="hilite(3607)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../_variables/log.html">$log</a>, <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a>);
<a name="l2168"><span class="linenum">2168</span></a>  
<a name="l2169"><span class="linenum">2169</span></a>      if( <a class="var it87" onMouseOver="hilite(87)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> ) echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Response').': '.<a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a>.&quot;&lt;br /&gt;\n&quot;;
<a name="l2170"><span class="linenum">2170</span></a>  
<a name="l2171"><span class="linenum">2171</span></a>      return <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l2172"><span class="linenum">2172</span></a>  }
<a name="l2173"><span class="linenum">2173</span></a>  
<a name="l2174"><span class="linenum">2174</span></a>  
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment">/**</span>
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment"> * Log the XML-RPC call Result into LOG object</span>
<a name="l2177"><span class="linenum">2177</span></a>  <span class="comment"> *</span>
<a name="l2178"><span class="linenum">2178</span></a>  <span class="comment"> * @param object XMLRPC response object</span>
<a name="l2179"><span class="linenum">2179</span></a>  <span class="comment"> * @param Log object to add messages to</span>
<a name="l2180"><span class="linenum">2180</span></a>  <span class="comment"> * @return boolean true = success, false = error</span>
<a name="l2181"><span class="linenum">2181</span></a>  <span class="comment"> */</span>
<a name="l2182"><span class="linenum">2182</span></a>  function <a class="function" onClick="logFunction('xmlrpc_logresult')" href="../../../_functions/xmlrpc_logresult.html" onMouseOver="funcPopup(event,'xmlrpc_logresult')">xmlrpc_logresult</a>( <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>, &amp; <a class="var it6960" onMouseOver="hilite(6960)" onMouseOut="lolite()" onClick="logVariable('message_Log')" href="../../../_variables/message_Log.html">$message_Log</a>, <a class="var it6961" onMouseOver="hilite(6961)" onMouseOut="lolite()" onClick="logVariable('log_payload')" href="../../../_variables/log_payload.html">$log_payload</a> = true )
<a name="l2183"><span class="linenum">2183</span></a>  {
<a name="l2184"><span class="linenum">2184</span></a>      if( ! <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> )
<a name="l2185"><span class="linenum">2185</span></a>      { // We got no response:
<a name="l2186"><span class="linenum">2186</span></a>          <a class="var it6960" onMouseOver="hilite(6960)" onMouseOut="lolite()" onClick="logVariable('message_Log')" href="../../../_variables/message_Log.html">$message_Log</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No response!'), 'error' );
<a name="l2187"><span class="linenum">2187</span></a>          return false;
<a name="l2188"><span class="linenum">2188</span></a>      }
<a name="l2189"><span class="linenum">2189</span></a>  
<a name="l2190"><span class="linenum">2190</span></a>      if( <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>() )
<a name="l2191"><span class="linenum">2191</span></a>      { // We got a remote error:
<a name="l2192"><span class="linenum">2192</span></a>          <a class="var it6960" onMouseOver="hilite(6960)" onMouseOut="lolite()" onClick="logVariable('message_Log')" href="../../../_variables/message_Log.html">$message_Log</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Remote error').': '.<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('faultString')" href="../../../_functions/faultstring.html" onMouseOver="funcPopup(event,'faultstring')">faultString</a>().' ('.<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>().')', 'error' );
<a name="l2193"><span class="linenum">2193</span></a>          return false;
<a name="l2194"><span class="linenum">2194</span></a>      }
<a name="l2195"><span class="linenum">2195</span></a>  
<a name="l2196"><span class="linenum">2196</span></a>      if( <a class="var it6961" onMouseOver="hilite(6961)" onMouseOut="lolite()" onClick="logVariable('log_payload')" href="../../../_variables/log_payload.html">$log_payload</a> )
<a name="l2197"><span class="linenum">2197</span></a>      {
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment">        // We got a response:</span>
<a name="l2199"><span class="linenum">2199</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('xmlrpc_decode_recurse')" href="../../../_functions/xmlrpc_decode_recurse.html" onMouseOver="funcPopup(event,'xmlrpc_decode_recurse')">xmlrpc_decode_recurse</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>-&gt;<a class="function" onClick="logFunction('value')" href="../../../_functions/value.html" onMouseOver="funcPopup(event,'value')">value</a>());
<a name="l2200"><span class="linenum">2200</span></a>  
<a name="l2201"><span class="linenum">2201</span></a>          if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) )
<a name="l2202"><span class="linenum">2202</span></a>          {
<a name="l2203"><span class="linenum">2203</span></a>              <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> = '';
<a name="l2204"><span class="linenum">2204</span></a>              foreach(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> as <a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a>)
<a name="l2205"><span class="linenum">2205</span></a>              {
<a name="l2206"><span class="linenum">2206</span></a>                  <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> .= ' ['.<a class="phpfunction" onClick="logFunction('var_export')" href="../../../_functions/var_export.html" onMouseOver="phpfuncPopup(event,'var_export')">var_export</a>(<a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a>, true).'] ';
<a name="l2207"><span class="linenum">2207</span></a>              }
<a name="l2208"><span class="linenum">2208</span></a>          }
<a name="l2209"><span class="linenum">2209</span></a>          else
<a name="l2210"><span class="linenum">2210</span></a>          {
<a name="l2211"><span class="linenum">2211</span></a>              <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l2212"><span class="linenum">2212</span></a>          }
<a name="l2213"><span class="linenum">2213</span></a>  
<a name="l2214"><span class="linenum">2214</span></a>          <a class="var it6960" onMouseOver="hilite(6960)" onMouseOut="lolite()" onClick="logVariable('message_Log')" href="../../../_variables/message_Log.html">$message_Log</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Response').': '.<a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a>, 'success' );
<a name="l2215"><span class="linenum">2215</span></a>      }
<a name="l2216"><span class="linenum">2216</span></a>  
<a name="l2217"><span class="linenum">2217</span></a>      return true;
<a name="l2218"><span class="linenum">2218</span></a>  }
<a name="l2219"><span class="linenum">2219</span></a>  
<a name="l2220"><span class="linenum">2220</span></a>  
<a name="l2221"><span class="linenum">2221</span></a>  
<a name="l2222"><span class="linenum">2222</span></a>  function <a class="function" onClick="logFunction('debug_fopen')" href="../../../_functions/debug_fopen.html" onMouseOver="funcPopup(event,'debug_fopen')">debug_fopen</a>(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a>) {
<a name="l2223"><span class="linenum">2223</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>;
<a name="l2224"><span class="linenum">2224</span></a>      if (<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> == 1 &amp;&amp; ( !empty(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>) ) )
<a name="l2225"><span class="linenum">2225</span></a>      {
<a name="l2226"><span class="linenum">2226</span></a>          <a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a> = fopen(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a>);
<a name="l2227"><span class="linenum">2227</span></a>          return <a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a>;
<a name="l2228"><span class="linenum">2228</span></a>      } else {
<a name="l2229"><span class="linenum">2229</span></a>          return false;
<a name="l2230"><span class="linenum">2230</span></a>      }
<a name="l2231"><span class="linenum">2231</span></a>  }
<a name="l2232"><span class="linenum">2232</span></a>  
<a name="l2233"><span class="linenum">2233</span></a>  function <a class="function" onClick="logFunction('debug_fwrite')" href="../../../_functions/debug_fwrite.html" onMouseOver="funcPopup(event,'debug_fwrite')">debug_fwrite</a>(<a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a>, <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>)
<a name="l2234"><span class="linenum">2234</span></a>  {
<a name="l2235"><span class="linenum">2235</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>;
<a name="l2236"><span class="linenum">2236</span></a>      if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> &amp;&amp; <a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a> )
<a name="l2237"><span class="linenum">2237</span></a>      {
<a name="l2238"><span class="linenum">2238</span></a>          <a class="phpfunction" onClick="logFunction('fwrite')" href="../../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a>, <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>);
<a name="l2239"><span class="linenum">2239</span></a>      }
<a name="l2240"><span class="linenum">2240</span></a>  }
<a name="l2241"><span class="linenum">2241</span></a>  
<a name="l2242"><span class="linenum">2242</span></a>  function <a class="function" onClick="logFunction('debug_fclose')" href="../../../_functions/debug_fclose.html" onMouseOver="funcPopup(event,'debug_fclose')">debug_fclose</a>(<a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a>)
<a name="l2243"><span class="linenum">2243</span></a>  {
<a name="l2244"><span class="linenum">2244</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>;
<a name="l2245"><span class="linenum">2245</span></a>      if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> &amp;&amp; <a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a> )
<a name="l2246"><span class="linenum">2246</span></a>      {
<a name="l2247"><span class="linenum">2247</span></a>          <a class="phpfunction" onClick="logFunction('fclose')" href="../../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a>);
<a name="l2248"><span class="linenum">2248</span></a>      }
<a name="l2249"><span class="linenum">2249</span></a>  }
<a name="l2250"><span class="linenum">2250</span></a>  
<a name="l2251"><span class="linenum">2251</span></a>  
<a name="l2252"><span class="linenum">2252</span></a>  
<a name="l2253"><span class="linenum">2253</span></a>  <span class="comment">/**</span>
<a name="l2254"><span class="linenum">2254</span></a>  <span class="comment"> * Wrap pre tag around {@link var_dump()} for better debugging.</span>
<a name="l2255"><span class="linenum">2255</span></a>  <span class="comment"> *</span>
<a name="l2256"><span class="linenum">2256</span></a>  <span class="comment"> * @param $var__var__var__var__,... mixed variable(s) to dump</span>
<a name="l2257"><span class="linenum">2257</span></a>  <span class="comment"> * @return true</span>
<a name="l2258"><span class="linenum">2258</span></a>  <span class="comment"> */</span>
<a name="l2259"><span class="linenum">2259</span></a>  function <a class="function" onClick="logFunction('pre_dump')" href="../../../_functions/pre_dump.html" onMouseOver="funcPopup(event,'pre_dump')">pre_dump</a>( <a class="var it6962" onMouseOver="hilite(6962)" onMouseOut="lolite()" onClick="logVariable('var__var__var__var__')" href="../../../_variables/var__var__var__var__.html">$var__var__var__var__</a> )
<a name="l2260"><span class="linenum">2260</span></a>  {
<a name="l2261"><span class="linenum">2261</span></a>      global <a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a>;
<a name="l2262"><span class="linenum">2262</span></a>  
<a name="l2263"><span class="linenum">2263</span></a>  <span class="comment">    #echo 'pre_dump(): '.debug_get_backtrace(); // see where a pre_dump() comes from</span>
<a name="l2264"><span class="linenum">2264</span></a>  
<a name="l2265"><span class="linenum">2265</span></a>      <a class="var it6963" onMouseOver="hilite(6963)" onMouseOut="lolite()" onClick="logVariable('func_num_args')" href="../../../_variables/func_num_args.html">$func_num_args</a> = <a class="phpfunction" onClick="logFunction('func_num_args')" href="../../../_functions/func_num_args.html" onMouseOver="phpfuncPopup(event,'func_num_args')">func_num_args</a>();
<a name="l2266"><span class="linenum">2266</span></a>      <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> = 0;
<a name="l2267"><span class="linenum">2267</span></a>  
<a name="l2268"><span class="linenum">2268</span></a>      if( ! empty(<a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a>) )
<a name="l2269"><span class="linenum">2269</span></a>      { // CLI, no encoding of special chars:
<a name="l2270"><span class="linenum">2270</span></a>          <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> = 0;
<a name="l2271"><span class="linenum">2271</span></a>          foreach( <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>() as <a class="var it6964" onMouseOver="hilite(6964)" onMouseOut="lolite()" onClick="logVariable('lvar')" href="../../../_variables/lvar.html">$lvar</a> )
<a name="l2272"><span class="linenum">2272</span></a>          {
<a name="l2273"><span class="linenum">2273</span></a>              <a class="phpfunction" onClick="logFunction('var_dump')" href="../../../_functions/var_dump.html" onMouseOver="phpfuncPopup(event,'var_dump')">var_dump</a>(<a class="var it6964" onMouseOver="hilite(6964)" onMouseOut="lolite()" onClick="logVariable('lvar')" href="../../../_variables/lvar.html">$lvar</a>);
<a name="l2274"><span class="linenum">2274</span></a>  
<a name="l2275"><span class="linenum">2275</span></a>              <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a>++;
<a name="l2276"><span class="linenum">2276</span></a>              if( <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> &lt; <a class="var it6963" onMouseOver="hilite(6963)" onMouseOut="lolite()" onClick="logVariable('func_num_args')" href="../../../_variables/func_num_args.html">$func_num_args</a> )
<a name="l2277"><span class="linenum">2277</span></a>              { // Put newline between arguments
<a name="l2278"><span class="linenum">2278</span></a>                  echo &quot;\n&quot;;
<a name="l2279"><span class="linenum">2279</span></a>              }
<a name="l2280"><span class="linenum">2280</span></a>          }
<a name="l2281"><span class="linenum">2281</span></a>      }
<a name="l2282"><span class="linenum">2282</span></a>      elseif( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('xdebug_var_dump') )
<a name="l2283"><span class="linenum">2283</span></a>      { // xdebug already does fancy displaying:
<a name="l2284"><span class="linenum">2284</span></a>  
<a name="l2285"><span class="linenum">2285</span></a>  <span class="comment">        // no limits:</span>
<a name="l2286"><span class="linenum">2286</span></a>          <a class="var it6965" onMouseOver="hilite(6965)" onMouseOut="lolite()" onClick="logVariable('old_var_display_max_children')" href="../../../_variables/old_var_display_max_children.html">$old_var_display_max_children</a> = <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>('xdebug.var_display_max_children', -1); <span class="comment">// default: 128</span>
<a name="l2287"><span class="linenum">2287</span></a>          <a class="var it6966" onMouseOver="hilite(6966)" onMouseOut="lolite()" onClick="logVariable('old_var_display_max_data')" href="../../../_variables/old_var_display_max_data.html">$old_var_display_max_data</a> = <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>('xdebug.var_display_max_data', -1); <span class="comment">// max string length; default: 512</span>
<a name="l2288"><span class="linenum">2288</span></a>          <a class="var it6967" onMouseOver="hilite(6967)" onMouseOut="lolite()" onClick="logVariable('old_var_display_max_depth')" href="../../../_variables/old_var_display_max_depth.html">$old_var_display_max_depth</a> = <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>('xdebug.var_display_max_depth', -1); <span class="comment">// default: 3</span>
<a name="l2289"><span class="linenum">2289</span></a>  
<a name="l2290"><span class="linenum">2290</span></a>          echo &quot;\n&lt;div style=\&quot;padding:1ex;border:1px solid #00f;\&quot;&gt;\n&quot;;
<a name="l2291"><span class="linenum">2291</span></a>          foreach( <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>() as <a class="var it6964" onMouseOver="hilite(6964)" onMouseOut="lolite()" onClick="logVariable('lvar')" href="../../../_variables/lvar.html">$lvar</a> )
<a name="l2292"><span class="linenum">2292</span></a>          {
<a name="l2293"><span class="linenum">2293</span></a>              xdebug_var_dump(<a class="var it6964" onMouseOver="hilite(6964)" onMouseOut="lolite()" onClick="logVariable('lvar')" href="../../../_variables/lvar.html">$lvar</a>);
<a name="l2294"><span class="linenum">2294</span></a>  
<a name="l2295"><span class="linenum">2295</span></a>              <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a>++;
<a name="l2296"><span class="linenum">2296</span></a>              if( <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> &lt; <a class="var it6963" onMouseOver="hilite(6963)" onMouseOut="lolite()" onClick="logVariable('func_num_args')" href="../../../_variables/func_num_args.html">$func_num_args</a> )
<a name="l2297"><span class="linenum">2297</span></a>              { // Put HR between arguments
<a name="l2298"><span class="linenum">2298</span></a>                  echo &quot;&lt;hr /&gt;\n&quot;;
<a name="l2299"><span class="linenum">2299</span></a>              }
<a name="l2300"><span class="linenum">2300</span></a>          }
<a name="l2301"><span class="linenum">2301</span></a>          echo '&lt;/div&gt;';
<a name="l2302"><span class="linenum">2302</span></a>  
<a name="l2303"><span class="linenum">2303</span></a>  <span class="comment">        // restore xdebug settings:</span>
<a name="l2304"><span class="linenum">2304</span></a>          <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>('xdebug.var_display_max_children', <a class="var it6965" onMouseOver="hilite(6965)" onMouseOut="lolite()" onClick="logVariable('old_var_display_max_children')" href="../../../_variables/old_var_display_max_children.html">$old_var_display_max_children</a>);
<a name="l2305"><span class="linenum">2305</span></a>          <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>('xdebug.var_display_max_data', <a class="var it6966" onMouseOver="hilite(6966)" onMouseOut="lolite()" onClick="logVariable('old_var_display_max_data')" href="../../../_variables/old_var_display_max_data.html">$old_var_display_max_data</a>);
<a name="l2306"><span class="linenum">2306</span></a>          <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>('xdebug.var_display_max_depth', <a class="var it6967" onMouseOver="hilite(6967)" onMouseOut="lolite()" onClick="logVariable('old_var_display_max_depth')" href="../../../_variables/old_var_display_max_depth.html">$old_var_display_max_depth</a>);
<a name="l2307"><span class="linenum">2307</span></a>      }
<a name="l2308"><span class="linenum">2308</span></a>      else
<a name="l2309"><span class="linenum">2309</span></a>      {
<a name="l2310"><span class="linenum">2310</span></a>          <a class="var it6968" onMouseOver="hilite(6968)" onMouseOut="lolite()" onClick="logVariable('orig_html_errors')" href="../../../_variables/orig_html_errors.html">$orig_html_errors</a> = <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>('html_errors', 0); <span class="comment">// e.g. xdebug would use fancy html, if this is on; we catch (and use) xdebug explicitly above, but just in case</span>
<a name="l2311"><span class="linenum">2311</span></a>  
<a name="l2312"><span class="linenum">2312</span></a>          echo &quot;\n&lt;pre style=\&quot;padding:1ex;border:1px solid #00f;\&quot;&gt;\n&quot;;
<a name="l2313"><span class="linenum">2313</span></a>          foreach( <a class="phpfunction" onClick="logFunction('func_get_args')" href="../../../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>() as <a class="var it6964" onMouseOver="hilite(6964)" onMouseOut="lolite()" onClick="logVariable('lvar')" href="../../../_variables/lvar.html">$lvar</a> )
<a name="l2314"><span class="linenum">2314</span></a>          {
<a name="l2315"><span class="linenum">2315</span></a>              <a class="phpfunction" onClick="logFunction('ob_start')" href="../../../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>();
<a name="l2316"><span class="linenum">2316</span></a>              <a class="phpfunction" onClick="logFunction('var_dump')" href="../../../_functions/var_dump.html" onMouseOver="phpfuncPopup(event,'var_dump')">var_dump</a>(<a class="var it6964" onMouseOver="hilite(6964)" onMouseOut="lolite()" onClick="logVariable('lvar')" href="../../../_variables/lvar.html">$lvar</a>); <span class="comment">// includes &quot;\n&quot;; do not use var_export() because it does not detect recursion by design</span>
<a name="l2317"><span class="linenum">2317</span></a>              <a class="var it1016" onMouseOver="hilite(1016)" onMouseOut="lolite()" onClick="logVariable('buffer')" href="../../../_variables/buffer.html">$buffer</a> = <a class="phpfunction" onClick="logFunction('ob_get_contents')" href="../../../_functions/ob_get_contents.html" onMouseOver="phpfuncPopup(event,'ob_get_contents')">ob_get_contents</a>();
<a name="l2318"><span class="linenum">2318</span></a>              <a class="phpfunction" onClick="logFunction('ob_end_clean')" href="../../../_functions/ob_end_clean.html" onMouseOver="phpfuncPopup(event,'ob_end_clean')">ob_end_clean</a>();
<a name="l2319"><span class="linenum">2319</span></a>              echo <a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it1016" onMouseOver="hilite(1016)" onMouseOut="lolite()" onClick="logVariable('buffer')" href="../../../_variables/buffer.html">$buffer</a>);
<a name="l2320"><span class="linenum">2320</span></a>  
<a name="l2321"><span class="linenum">2321</span></a>              <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a>++;
<a name="l2322"><span class="linenum">2322</span></a>              if( <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> &lt; <a class="var it6963" onMouseOver="hilite(6963)" onMouseOut="lolite()" onClick="logVariable('func_num_args')" href="../../../_variables/func_num_args.html">$func_num_args</a> )
<a name="l2323"><span class="linenum">2323</span></a>              { // Put HR between arguments
<a name="l2324"><span class="linenum">2324</span></a>                  echo &quot;&lt;hr /&gt;\n&quot;;
<a name="l2325"><span class="linenum">2325</span></a>              }
<a name="l2326"><span class="linenum">2326</span></a>          }
<a name="l2327"><span class="linenum">2327</span></a>          echo &quot;&lt;/pre&gt;\n&quot;;
<a name="l2328"><span class="linenum">2328</span></a>          <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>('html_errors', <a class="var it6968" onMouseOver="hilite(6968)" onMouseOut="lolite()" onClick="logVariable('orig_html_errors')" href="../../../_variables/orig_html_errors.html">$orig_html_errors</a>);
<a name="l2329"><span class="linenum">2329</span></a>      }
<a name="l2330"><span class="linenum">2330</span></a>      <a class="function" onClick="logFunction('evo_flush')" href="../../../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l2331"><span class="linenum">2331</span></a>      return true;
<a name="l2332"><span class="linenum">2332</span></a>  }
<a name="l2333"><span class="linenum">2333</span></a>  
<a name="l2334"><span class="linenum">2334</span></a>  
<a name="l2335"><span class="linenum">2335</span></a>  <span class="comment">/**</span>
<a name="l2336"><span class="linenum">2336</span></a>  <span class="comment"> * Get a function trace from {@link debug_backtrace()} as html table.</span>
<a name="l2337"><span class="linenum">2337</span></a>  <span class="comment"> *</span>
<a name="l2338"><span class="linenum">2338</span></a>  <span class="comment"> * Adopted from {@link http://us2.php.net/manual/de/function.debug-backtrace.php#47644}.</span>
<a name="l2339"><span class="linenum">2339</span></a>  <span class="comment"> *</span>
<a name="l2340"><span class="linenum">2340</span></a>  <span class="comment"> * @todo dh&gt; Add support for $is_cli = true (e.g. in case of MySQL error)</span>
<a name="l2341"><span class="linenum">2341</span></a>  <span class="comment"> *</span>
<a name="l2342"><span class="linenum">2342</span></a>  <span class="comment"> * @param integer|NULL Get the last x entries from the stack (after $ignore_from is applied). Anything non-numeric means &quot;all&quot;.</span>
<a name="l2343"><span class="linenum">2343</span></a>  <span class="comment"> * @param array After a key/value pair matches a stack entry, this and the rest is ignored.</span>
<a name="l2344"><span class="linenum">2344</span></a>  <span class="comment"> *              For example, array('class' =&gt; 'DB') would exclude everything after the stack</span>
<a name="l2345"><span class="linenum">2345</span></a>  <span class="comment"> *              &quot;enters&quot; class DB and everything that got called afterwards.</span>
<a name="l2346"><span class="linenum">2346</span></a>  <span class="comment"> *              You can also give an array of arrays which means that every condition in one of the given array must match.</span>
<a name="l2347"><span class="linenum">2347</span></a>  <span class="comment"> * @param integer Number of stack entries to include, after $ignore_from matches.</span>
<a name="l2348"><span class="linenum">2348</span></a>  <span class="comment"> * @return string HTML table</span>
<a name="l2349"><span class="linenum">2349</span></a>  <span class="comment"> */</span>
<a name="l2350"><span class="linenum">2350</span></a>  function <a class="function" onClick="logFunction('debug_get_backtrace')" href="../../../_functions/debug_get_backtrace.html" onMouseOver="funcPopup(event,'debug_get_backtrace')">debug_get_backtrace</a>( <a class="var it6969" onMouseOver="hilite(6969)" onMouseOut="lolite()" onClick="logVariable('limit_to_last')" href="../../../_variables/limit_to_last.html">$limit_to_last</a> = NULL, <a class="var it6970" onMouseOver="hilite(6970)" onMouseOut="lolite()" onClick="logVariable('ignore_from')" href="../../../_variables/ignore_from.html">$ignore_from</a> = array( 'function' =&gt; 'debug_get_backtrace' ), <a class="var it6971" onMouseOver="hilite(6971)" onMouseOut="lolite()" onClick="logVariable('offset_ignore_from')" href="../../../_variables/offset_ignore_from.html">$offset_ignore_from</a> = 0 )
<a name="l2351"><span class="linenum">2351</span></a>  {
<a name="l2352"><span class="linenum">2352</span></a>      if( ! <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'debug_backtrace' ) ) // PHP 4.3.0
<a name="l2353"><span class="linenum">2353</span></a>      {
<a name="l2354"><span class="linenum">2354</span></a>          return 'Function <a class="phpfunction" onClick="logFunction('debug_backtrace')" href="../../../_functions/debug_backtrace.html" onMouseOver="phpfuncPopup(event,'debug_backtrace')">debug_backtrace</a>() is not available!';
<a name="l2355"><span class="linenum">2355</span></a>      }
<a name="l2356"><span class="linenum">2356</span></a>  
<a name="l2357"><span class="linenum">2357</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l2358"><span class="linenum">2358</span></a>  
<a name="l2359"><span class="linenum">2359</span></a>      <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a> = <a class="phpfunction" onClick="logFunction('debug_backtrace')" href="../../../_functions/debug_backtrace.html" onMouseOver="phpfuncPopup(event,'debug_backtrace')">debug_backtrace</a>();
<a name="l2360"><span class="linenum">2360</span></a>      <a class="var it6973" onMouseOver="hilite(6973)" onMouseOut="lolite()" onClick="logVariable('count_ignored')" href="../../../_variables/count_ignored.html">$count_ignored</a> = 0; <span class="comment">// remember how many have been ignored</span>
<a name="l2361"><span class="linenum">2361</span></a>      <a class="var it6974" onMouseOver="hilite(6974)" onMouseOut="lolite()" onClick="logVariable('limited')" href="../../../_variables/limited.html">$limited</a> = false;   <span class="comment">// remember if we have limited to $limit_to_last</span>
<a name="l2362"><span class="linenum">2362</span></a>  
<a name="l2363"><span class="linenum">2363</span></a>      if( <a class="var it6970" onMouseOver="hilite(6970)" onMouseOut="lolite()" onClick="logVariable('ignore_from')" href="../../../_variables/ignore_from.html">$ignore_from</a> )
<a name="l2364"><span class="linenum">2364</span></a>      {    // we want to ignore from a certain point
<a name="l2365"><span class="linenum">2365</span></a>          <a class="var it6975" onMouseOver="hilite(6975)" onMouseOut="lolite()" onClick="logVariable('trace_length')" href="../../../_variables/trace_length.html">$trace_length</a> = 0;
<a name="l2366"><span class="linenum">2366</span></a>          <a class="var it6976" onMouseOver="hilite(6976)" onMouseOut="lolite()" onClick="logVariable('break_because_of_offset')" href="../../../_variables/break_because_of_offset.html">$break_because_of_offset</a> = false;
<a name="l2367"><span class="linenum">2367</span></a>  
<a name="l2368"><span class="linenum">2368</span></a>          for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a>); <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &gt; 0; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>-- )
<a name="l2369"><span class="linenum">2369</span></a>          {    // Search the backtrace from behind (first call).
<a name="l2370"><span class="linenum">2370</span></a>              <a class="var it6977" onMouseOver="hilite(6977)" onMouseOut="lolite()" onClick="logVariable('l_stack')" href="../../../_variables/l_stack.html">$l_stack</a> = &amp; <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>-1];
<a name="l2371"><span class="linenum">2371</span></a>  
<a name="l2372"><span class="linenum">2372</span></a>              if( <a class="var it6976" onMouseOver="hilite(6976)" onMouseOut="lolite()" onClick="logVariable('break_because_of_offset')" href="../../../_variables/break_because_of_offset.html">$break_because_of_offset</a> &amp;&amp; <a class="var it6971" onMouseOver="hilite(6971)" onMouseOut="lolite()" onClick="logVariable('offset_ignore_from')" href="../../../_variables/offset_ignore_from.html">$offset_ignore_from</a> &lt; 1 )
<a name="l2373"><span class="linenum">2373</span></a>              { // we've respected the offset, but need to break now
<a name="l2374"><span class="linenum">2374</span></a>                  break; <span class="comment">// ignore from here</span>
<a name="l2375"><span class="linenum">2375</span></a>              }
<a name="l2376"><span class="linenum">2376</span></a>  
<a name="l2377"><span class="linenum">2377</span></a>              foreach( <a class="var it6970" onMouseOver="hilite(6970)" onMouseOut="lolite()" onClick="logVariable('ignore_from')" href="../../../_variables/ignore_from.html">$ignore_from</a> as <a class="var it6978" onMouseOver="hilite(6978)" onMouseOut="lolite()" onClick="logVariable('l_ignore_key')" href="../../../_variables/l_ignore_key.html">$l_ignore_key</a> =&gt; <a class="var it6979" onMouseOver="hilite(6979)" onMouseOut="lolite()" onClick="logVariable('l_ignore_value')" href="../../../_variables/l_ignore_value.html">$l_ignore_value</a> )
<a name="l2378"><span class="linenum">2378</span></a>              {    // Check if we want to ignore from here
<a name="l2379"><span class="linenum">2379</span></a>                  if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it6979" onMouseOver="hilite(6979)" onMouseOut="lolite()" onClick="logVariable('l_ignore_value')" href="../../../_variables/l_ignore_value.html">$l_ignore_value</a>) )
<a name="l2380"><span class="linenum">2380</span></a>                  {    // It's an array - all must match
<a name="l2381"><span class="linenum">2381</span></a>                      foreach( <a class="var it6979" onMouseOver="hilite(6979)" onMouseOut="lolite()" onClick="logVariable('l_ignore_value')" href="../../../_variables/l_ignore_value.html">$l_ignore_value</a> as <a class="var it6980" onMouseOver="hilite(6980)" onMouseOut="lolite()" onClick="logVariable('l_ignore_mult_key')" href="../../../_variables/l_ignore_mult_key.html">$l_ignore_mult_key</a> =&gt; <a class="var it6981" onMouseOver="hilite(6981)" onMouseOut="lolite()" onClick="logVariable('l_ignore_mult_val')" href="../../../_variables/l_ignore_mult_val.html">$l_ignore_mult_val</a> )
<a name="l2382"><span class="linenum">2382</span></a>                      {
<a name="l2383"><span class="linenum">2383</span></a>                          if( !isset(<a class="var it6977" onMouseOver="hilite(6977)" onMouseOut="lolite()" onClick="logVariable('l_stack')" href="../../../_variables/l_stack.html">$l_stack</a>[<a class="var it6980" onMouseOver="hilite(6980)" onMouseOut="lolite()" onClick="logVariable('l_ignore_mult_key')" href="../../../_variables/l_ignore_mult_key.html">$l_ignore_mult_key</a>]) <span class="comment">/* not set with this stack entry */</span>
<a name="l2384"><span class="linenum">2384</span></a>                              || <a class="phpfunction" onClick="logFunction('strcasecmp')" href="../../../_functions/strcasecmp.html" onMouseOver="phpfuncPopup(event,'strcasecmp')">strcasecmp</a>(<a class="var it6977" onMouseOver="hilite(6977)" onMouseOut="lolite()" onClick="logVariable('l_stack')" href="../../../_variables/l_stack.html">$l_stack</a>[<a class="var it6980" onMouseOver="hilite(6980)" onMouseOut="lolite()" onClick="logVariable('l_ignore_mult_key')" href="../../../_variables/l_ignore_mult_key.html">$l_ignore_mult_key</a>], <a class="var it6981" onMouseOver="hilite(6981)" onMouseOut="lolite()" onClick="logVariable('l_ignore_mult_val')" href="../../../_variables/l_ignore_mult_val.html">$l_ignore_mult_val</a>) <span class="comment">/* not this value (case-insensitive) */</span> )
<a name="l2385"><span class="linenum">2385</span></a>                          {
<a name="l2386"><span class="linenum">2386</span></a>                              continue 2; <span class="comment">// next ignore setting, because not all match.</span>
<a name="l2387"><span class="linenum">2387</span></a>                          }
<a name="l2388"><span class="linenum">2388</span></a>                      }
<a name="l2389"><span class="linenum">2389</span></a>                      if( <a class="var it6971" onMouseOver="hilite(6971)" onMouseOut="lolite()" onClick="logVariable('offset_ignore_from')" href="../../../_variables/offset_ignore_from.html">$offset_ignore_from</a>-- &gt; 0 )
<a name="l2390"><span class="linenum">2390</span></a>                      {
<a name="l2391"><span class="linenum">2391</span></a>                          <a class="var it6976" onMouseOver="hilite(6976)" onMouseOut="lolite()" onClick="logVariable('break_because_of_offset')" href="../../../_variables/break_because_of_offset.html">$break_because_of_offset</a> = true;
<a name="l2392"><span class="linenum">2392</span></a>                          break;
<a name="l2393"><span class="linenum">2393</span></a>                      }
<a name="l2394"><span class="linenum">2394</span></a>                      break 2; <span class="comment">// ignore from here</span>
<a name="l2395"><span class="linenum">2395</span></a>                  }
<a name="l2396"><span class="linenum">2396</span></a>                  elseif( isset(<a class="var it6977" onMouseOver="hilite(6977)" onMouseOut="lolite()" onClick="logVariable('l_stack')" href="../../../_variables/l_stack.html">$l_stack</a>[<a class="var it6978" onMouseOver="hilite(6978)" onMouseOut="lolite()" onClick="logVariable('l_ignore_key')" href="../../../_variables/l_ignore_key.html">$l_ignore_key</a>])
<a name="l2397"><span class="linenum">2397</span></a>                      &amp;&amp; !<a class="phpfunction" onClick="logFunction('strcasecmp')" href="../../../_functions/strcasecmp.html" onMouseOver="phpfuncPopup(event,'strcasecmp')">strcasecmp</a>(<a class="var it6977" onMouseOver="hilite(6977)" onMouseOut="lolite()" onClick="logVariable('l_stack')" href="../../../_variables/l_stack.html">$l_stack</a>[<a class="var it6978" onMouseOver="hilite(6978)" onMouseOut="lolite()" onClick="logVariable('l_ignore_key')" href="../../../_variables/l_ignore_key.html">$l_ignore_key</a>], <a class="var it6979" onMouseOver="hilite(6979)" onMouseOut="lolite()" onClick="logVariable('l_ignore_value')" href="../../../_variables/l_ignore_value.html">$l_ignore_value</a>) <span class="comment">/* is equal case-insensitive */</span> )
<a name="l2398"><span class="linenum">2398</span></a>                  {
<a name="l2399"><span class="linenum">2399</span></a>                      if( <a class="var it6971" onMouseOver="hilite(6971)" onMouseOut="lolite()" onClick="logVariable('offset_ignore_from')" href="../../../_variables/offset_ignore_from.html">$offset_ignore_from</a>-- &gt; 0 )
<a name="l2400"><span class="linenum">2400</span></a>                      {
<a name="l2401"><span class="linenum">2401</span></a>                          <a class="var it6976" onMouseOver="hilite(6976)" onMouseOut="lolite()" onClick="logVariable('break_because_of_offset')" href="../../../_variables/break_because_of_offset.html">$break_because_of_offset</a> = true;
<a name="l2402"><span class="linenum">2402</span></a>                          break;
<a name="l2403"><span class="linenum">2403</span></a>                      }
<a name="l2404"><span class="linenum">2404</span></a>                      break 2; <span class="comment">// ignore from here</span>
<a name="l2405"><span class="linenum">2405</span></a>                  }
<a name="l2406"><span class="linenum">2406</span></a>              }
<a name="l2407"><span class="linenum">2407</span></a>              <a class="var it6975" onMouseOver="hilite(6975)" onMouseOut="lolite()" onClick="logVariable('trace_length')" href="../../../_variables/trace_length.html">$trace_length</a>++;
<a name="l2408"><span class="linenum">2408</span></a>          }
<a name="l2409"><span class="linenum">2409</span></a>  
<a name="l2410"><span class="linenum">2410</span></a>          <a class="var it6973" onMouseOver="hilite(6973)" onMouseOut="lolite()" onClick="logVariable('count_ignored')" href="../../../_variables/count_ignored.html">$count_ignored</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a>) - <a class="var it6975" onMouseOver="hilite(6975)" onMouseOut="lolite()" onClick="logVariable('trace_length')" href="../../../_variables/trace_length.html">$trace_length</a>;
<a name="l2411"><span class="linenum">2411</span></a>  
<a name="l2412"><span class="linenum">2412</span></a>          <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../../../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>( <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a>, 0-<a class="var it6975" onMouseOver="hilite(6975)" onMouseOut="lolite()" onClick="logVariable('trace_length')" href="../../../_variables/trace_length.html">$trace_length</a> ); <span class="comment">// cut off ignored ones</span>
<a name="l2413"><span class="linenum">2413</span></a>      }
<a name="l2414"><span class="linenum">2414</span></a>  
<a name="l2415"><span class="linenum">2415</span></a>      <a class="var it6982" onMouseOver="hilite(6982)" onMouseOut="lolite()" onClick="logVariable('count_backtrace')" href="../../../_variables/count_backtrace.html">$count_backtrace</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a>);
<a name="l2416"><span class="linenum">2416</span></a>      if( <a class="phpfunction" onClick="logFunction('is_numeric')" href="../../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it6969" onMouseOver="hilite(6969)" onMouseOut="lolite()" onClick="logVariable('limit_to_last')" href="../../../_variables/limit_to_last.html">$limit_to_last</a>) &amp;&amp; <a class="var it6969" onMouseOver="hilite(6969)" onMouseOut="lolite()" onClick="logVariable('limit_to_last')" href="../../../_variables/limit_to_last.html">$limit_to_last</a> &lt; <a class="var it6982" onMouseOver="hilite(6982)" onMouseOut="lolite()" onClick="logVariable('count_backtrace')" href="../../../_variables/count_backtrace.html">$count_backtrace</a> )
<a name="l2417"><span class="linenum">2417</span></a>      {    // we want to limit to a maximum number
<a name="l2418"><span class="linenum">2418</span></a>          <a class="var it6974" onMouseOver="hilite(6974)" onMouseOut="lolite()" onClick="logVariable('limited')" href="../../../_variables/limited.html">$limited</a> = true;
<a name="l2419"><span class="linenum">2419</span></a>          <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../../../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>( <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a>, 0, <a class="var it6969" onMouseOver="hilite(6969)" onMouseOut="lolite()" onClick="logVariable('limit_to_last')" href="../../../_variables/limit_to_last.html">$limit_to_last</a> );
<a name="l2420"><span class="linenum">2420</span></a>          <a class="var it6982" onMouseOver="hilite(6982)" onMouseOut="lolite()" onClick="logVariable('count_backtrace')" href="../../../_variables/count_backtrace.html">$count_backtrace</a> = <a class="var it6969" onMouseOver="hilite(6969)" onMouseOut="lolite()" onClick="logVariable('limit_to_last')" href="../../../_variables/limit_to_last.html">$limit_to_last</a>;
<a name="l2421"><span class="linenum">2421</span></a>      }
<a name="l2422"><span class="linenum">2422</span></a>  
<a name="l2423"><span class="linenum">2423</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;div style=&quot;padding:1ex; margin-bottom:1ex; text-align:left; color:#000; background-color:#ddf;&quot;&gt;
<a name="l2424"><span class="linenum">2424</span></a>                      &lt;h3&gt;Backtrace:&lt;/h3&gt;'.&quot;\n&quot;;
<a name="l2425"><span class="linenum">2425</span></a>      if( <a class="var it6982" onMouseOver="hilite(6982)" onMouseOut="lolite()" onClick="logVariable('count_backtrace')" href="../../../_variables/count_backtrace.html">$count_backtrace</a> )
<a name="l2426"><span class="linenum">2426</span></a>      {
<a name="l2427"><span class="linenum">2427</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;ol style=&quot;font-family:monospace;&quot;&gt;';
<a name="l2428"><span class="linenum">2428</span></a>  
<a name="l2429"><span class="linenum">2429</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0;
<a name="l2430"><span class="linenum">2430</span></a>          foreach( <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a> as <a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a> )
<a name="l2431"><span class="linenum">2431</span></a>          {
<a name="l2432"><span class="linenum">2432</span></a>              if( ++<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> == <a class="var it6982" onMouseOver="hilite(6982)" onMouseOut="lolite()" onClick="logVariable('count_backtrace')" href="../../../_variables/count_backtrace.html">$count_backtrace</a> )
<a name="l2433"><span class="linenum">2433</span></a>              {
<a name="l2434"><span class="linenum">2434</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;li style=&quot;padding:0.5ex 0;&quot;&gt;';
<a name="l2435"><span class="linenum">2435</span></a>              }
<a name="l2436"><span class="linenum">2436</span></a>              else
<a name="l2437"><span class="linenum">2437</span></a>              {
<a name="l2438"><span class="linenum">2438</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;li style=&quot;padding:0.5ex 0; border-bottom:1px solid #77d;&quot;&gt;';
<a name="l2439"><span class="linenum">2439</span></a>              }
<a name="l2440"><span class="linenum">2440</span></a>              <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a> = array();
<a name="l2441"><span class="linenum">2441</span></a>              if( isset(<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['args']) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['args'] ) )
<a name="l2442"><span class="linenum">2442</span></a>              {    // Prepare args:
<a name="l2443"><span class="linenum">2443</span></a>                  foreach( <a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['args'] as <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('l_arg')" href="../../../_variables/l_arg.html">$l_arg</a> )
<a name="l2444"><span class="linenum">2444</span></a>                  {
<a name="l2445"><span class="linenum">2445</span></a>                      <a class="var it6985" onMouseOver="hilite(6985)" onMouseOut="lolite()" onClick="logVariable('l_arg_type')" href="../../../_variables/l_arg_type.html">$l_arg_type</a> = <a class="phpfunction" onClick="logFunction('gettype')" href="../../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">gettype</a>(<a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('l_arg')" href="../../../_variables/l_arg.html">$l_arg</a>);
<a name="l2446"><span class="linenum">2446</span></a>                      switch( <a class="var it6985" onMouseOver="hilite(6985)" onMouseOut="lolite()" onClick="logVariable('l_arg_type')" href="../../../_variables/l_arg_type.html">$l_arg_type</a> )
<a name="l2447"><span class="linenum">2447</span></a>                      {
<a name="l2448"><span class="linenum">2448</span></a>                          case 'integer':
<a name="l2449"><span class="linenum">2449</span></a>                          case 'double':
<a name="l2450"><span class="linenum">2450</span></a>                              <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[] = <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('l_arg')" href="../../../_variables/l_arg.html">$l_arg</a>;
<a name="l2451"><span class="linenum">2451</span></a>                              break;
<a name="l2452"><span class="linenum">2452</span></a>                          case 'string':
<a name="l2453"><span class="linenum">2453</span></a>                              <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[] = '&quot;'.<a class="function" onClick="logFunction('strmaxlen')" href="../../../_functions/strmaxlen.html" onMouseOver="funcPopup(event,'strmaxlen')">strmaxlen</a>(<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;\n&quot;, '\n', <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('l_arg')" href="../../../_variables/l_arg.html">$l_arg</a>), 255, NULL, 'htmlspecialchars').'&quot;';
<a name="l2454"><span class="linenum">2454</span></a>                              break;
<a name="l2455"><span class="linenum">2455</span></a>                          case 'array':
<a name="l2456"><span class="linenum">2456</span></a>                              <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[] = 'Array('.<a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('l_arg')" href="../../../_variables/l_arg.html">$l_arg</a>).')';
<a name="l2457"><span class="linenum">2457</span></a>                              break;
<a name="l2458"><span class="linenum">2458</span></a>                          case 'object':
<a name="l2459"><span class="linenum">2459</span></a>                              <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[] = 'Object('.<a class="phpfunction" onClick="logFunction('get_class')" href="../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('l_arg')" href="../../../_variables/l_arg.html">$l_arg</a>).')';
<a name="l2460"><span class="linenum">2460</span></a>                              break;
<a name="l2461"><span class="linenum">2461</span></a>                          case 'resource':
<a name="l2462"><span class="linenum">2462</span></a>                              <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[] = <a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>((string)<a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('l_arg')" href="../../../_variables/l_arg.html">$l_arg</a>);
<a name="l2463"><span class="linenum">2463</span></a>                              break;
<a name="l2464"><span class="linenum">2464</span></a>                          case 'boolean':
<a name="l2465"><span class="linenum">2465</span></a>                              <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[] = <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('l_arg')" href="../../../_variables/l_arg.html">$l_arg</a> ? 'true' : 'false';
<a name="l2466"><span class="linenum">2466</span></a>                              break;
<a name="l2467"><span class="linenum">2467</span></a>                          default:
<a name="l2468"><span class="linenum">2468</span></a>                              <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a>[] = <a class="var it6985" onMouseOver="hilite(6985)" onMouseOut="lolite()" onClick="logVariable('l_arg_type')" href="../../../_variables/l_arg_type.html">$l_arg_type</a>;
<a name="l2469"><span class="linenum">2469</span></a>                      }
<a name="l2470"><span class="linenum">2470</span></a>                  }
<a name="l2471"><span class="linenum">2471</span></a>              }
<a name="l2472"><span class="linenum">2472</span></a>  
<a name="l2473"><span class="linenum">2473</span></a>              <a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('call')" href="../../../_variables/call.html">$call</a> = &quot;&lt;strong&gt;\n&quot;;
<a name="l2474"><span class="linenum">2474</span></a>              if( isset(<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['class']) )
<a name="l2475"><span class="linenum">2475</span></a>              {
<a name="l2476"><span class="linenum">2476</span></a>                  <a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('call')" href="../../../_variables/call.html">$call</a> .= <a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['class']);
<a name="l2477"><span class="linenum">2477</span></a>              }
<a name="l2478"><span class="linenum">2478</span></a>              if( isset(<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['type']) )
<a name="l2479"><span class="linenum">2479</span></a>              {
<a name="l2480"><span class="linenum">2480</span></a>                  <a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('call')" href="../../../_variables/call.html">$call</a> .= <a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['type']);
<a name="l2481"><span class="linenum">2481</span></a>              }
<a name="l2482"><span class="linenum">2482</span></a>              <a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('call')" href="../../../_variables/call.html">$call</a> .= <a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['function']).&quot;( &lt;/strong&gt;\n&quot;;
<a name="l2483"><span class="linenum">2483</span></a>              if( <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a> )
<a name="l2484"><span class="linenum">2484</span></a>              {
<a name="l2485"><span class="linenum">2485</span></a>                  <a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('call')" href="../../../_variables/call.html">$call</a> .= ' '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it3606" onMouseOver="hilite(3606)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../../_variables/args.html">$args</a> ).' ';
<a name="l2486"><span class="linenum">2486</span></a>              }
<a name="l2487"><span class="linenum">2487</span></a>              <a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('call')" href="../../../_variables/call.html">$call</a> .='&lt;strong&gt;)&lt;/strong&gt;';
<a name="l2488"><span class="linenum">2488</span></a>  
<a name="l2489"><span class="linenum">2489</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('call')" href="../../../_variables/call.html">$call</a>.&quot;&lt;br /&gt;\n&quot;;
<a name="l2490"><span class="linenum">2490</span></a>  
<a name="l2491"><span class="linenum">2491</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;strong&gt;';
<a name="l2492"><span class="linenum">2492</span></a>              if( isset(<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['file']) )
<a name="l2493"><span class="linenum">2493</span></a>              {
<a name="l2494"><span class="linenum">2494</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= &quot;File: &lt;/strong&gt; &quot;.<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['file'];
<a name="l2495"><span class="linenum">2495</span></a>              }
<a name="l2496"><span class="linenum">2496</span></a>              else
<a name="l2497"><span class="linenum">2497</span></a>              {
<a name="l2498"><span class="linenum">2498</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '[runtime created function]&lt;/strong&gt;';
<a name="l2499"><span class="linenum">2499</span></a>              }
<a name="l2500"><span class="linenum">2500</span></a>              if( isset(<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['line']) )
<a name="l2501"><span class="linenum">2501</span></a>              {
<a name="l2502"><span class="linenum">2502</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' on line '.<a class="var it6983" onMouseOver="hilite(6983)" onMouseOut="lolite()" onClick="logVariable('l_trace')" href="../../../_variables/l_trace.html">$l_trace</a>['line'];
<a name="l2503"><span class="linenum">2503</span></a>              }
<a name="l2504"><span class="linenum">2504</span></a>  
<a name="l2505"><span class="linenum">2505</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= &quot;&lt;/li&gt;\n&quot;;
<a name="l2506"><span class="linenum">2506</span></a>          }
<a name="l2507"><span class="linenum">2507</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/ol&gt;';
<a name="l2508"><span class="linenum">2508</span></a>      }
<a name="l2509"><span class="linenum">2509</span></a>      else
<a name="l2510"><span class="linenum">2510</span></a>      {
<a name="l2511"><span class="linenum">2511</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;p&gt;No backtrace available.&lt;/p&gt;';
<a name="l2512"><span class="linenum">2512</span></a>      }
<a name="l2513"><span class="linenum">2513</span></a>  
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment">    // Extra notes, might be to much, but explains why we stopped at some point. Feel free to comment it out or remove it.</span>
<a name="l2515"><span class="linenum">2515</span></a>      <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../../_variables/notes.html">$notes</a> = array();
<a name="l2516"><span class="linenum">2516</span></a>      if( <a class="var it6973" onMouseOver="hilite(6973)" onMouseOut="lolite()" onClick="logVariable('count_ignored')" href="../../../_variables/count_ignored.html">$count_ignored</a> )
<a name="l2517"><span class="linenum">2517</span></a>      {
<a name="l2518"><span class="linenum">2518</span></a>          <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../../_variables/notes.html">$notes</a>[] = 'Ignored last: '.<a class="var it6973" onMouseOver="hilite(6973)" onMouseOut="lolite()" onClick="logVariable('count_ignored')" href="../../../_variables/count_ignored.html">$count_ignored</a>;
<a name="l2519"><span class="linenum">2519</span></a>      }
<a name="l2520"><span class="linenum">2520</span></a>      if( <a class="var it6974" onMouseOver="hilite(6974)" onMouseOut="lolite()" onClick="logVariable('limited')" href="../../../_variables/limited.html">$limited</a> )
<a name="l2521"><span class="linenum">2521</span></a>      {
<a name="l2522"><span class="linenum">2522</span></a>          <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../../_variables/notes.html">$notes</a>[] = 'Limited to'.( <a class="var it6973" onMouseOver="hilite(6973)" onMouseOut="lolite()" onClick="logVariable('count_ignored')" href="../../../_variables/count_ignored.html">$count_ignored</a> ? ' remaining' : '' ).': '.<a class="var it6969" onMouseOver="hilite(6969)" onMouseOut="lolite()" onClick="logVariable('limit_to_last')" href="../../../_variables/limit_to_last.html">$limit_to_last</a>;
<a name="l2523"><span class="linenum">2523</span></a>      }
<a name="l2524"><span class="linenum">2524</span></a>      if( <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../../_variables/notes.html">$notes</a> )
<a name="l2525"><span class="linenum">2525</span></a>      {
<a name="l2526"><span class="linenum">2526</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;p class=&quot;small&quot;&gt;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' - ', <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../../_variables/notes.html">$notes</a> ).'&lt;/p&gt;';
<a name="l2527"><span class="linenum">2527</span></a>      }
<a name="l2528"><span class="linenum">2528</span></a>  
<a name="l2529"><span class="linenum">2529</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= &quot;&lt;/div&gt;\n&quot;;
<a name="l2530"><span class="linenum">2530</span></a>  
<a name="l2531"><span class="linenum">2531</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2532"><span class="linenum">2532</span></a>  }
<a name="l2533"><span class="linenum">2533</span></a>  
<a name="l2534"><span class="linenum">2534</span></a>  
<a name="l2535"><span class="linenum">2535</span></a>  <span class="comment">/**</span>
<a name="l2536"><span class="linenum">2536</span></a>  <span class="comment"> * Outputs Unexpected Error message. When in debug mode it also prints a backtrace.</span>
<a name="l2537"><span class="linenum">2537</span></a>  <span class="comment"> *</span>
<a name="l2538"><span class="linenum">2538</span></a>  <span class="comment"> * This should be used instead of die() everywhere.</span>
<a name="l2539"><span class="linenum">2539</span></a>  <span class="comment"> * This should NOT be used instead of exit() anywhere.</span>
<a name="l2540"><span class="linenum">2540</span></a>  <span class="comment"> * Dying means the application has encontered an unexpected situation,</span>
<a name="l2541"><span class="linenum">2541</span></a>  <span class="comment"> * i-e: something that should never occur during normal operation.</span>
<a name="l2542"><span class="linenum">2542</span></a>  <span class="comment"> * Examples: database broken, user changed URL by hand...</span>
<a name="l2543"><span class="linenum">2543</span></a>  <span class="comment"> *</span>
<a name="l2544"><span class="linenum">2544</span></a>  <span class="comment"> * @param string Message to output</span>
<a name="l2545"><span class="linenum">2545</span></a>  <span class="comment"> * @param array Additional params</span>
<a name="l2546"><span class="linenum">2546</span></a>  <span class="comment"> *        - &quot;status&quot; (Default: '500 Internal Server Error')</span>
<a name="l2547"><span class="linenum">2547</span></a>  <span class="comment"> *        - &quot;debug_info&quot; - Use this info instead of $additional_info when debug is ON</span>
<a name="l2548"><span class="linenum">2548</span></a>  <span class="comment"> */</span>
<a name="l2549"><span class="linenum">2549</span></a>  function <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a> = '', <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2550"><span class="linenum">2550</span></a>  {
<a name="l2551"><span class="linenum">2551</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>, <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>;
<a name="l2552"><span class="linenum">2552</span></a>      global <a class="var it6987" onMouseOver="hilite(6987)" onMouseOut="lolite()" onClick="logVariable('log_app_errors')" href="../../../_variables/log_app_errors.html">$log_app_errors</a>, <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../../../_variables/app_name.html">$app_name</a>, <a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a>, <a class="var it2004" onMouseOver="hilite(2004)" onMouseOut="lolite()" onClick="logVariable('display_errors_on_production')" href="../../../_variables/display_errors_on_production.html">$display_errors_on_production</a>;
<a name="l2553"><span class="linenum">2553</span></a>  
<a name="l2554"><span class="linenum">2554</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2555"><span class="linenum">2555</span></a>          'status'     =&gt; '500 Internal Server Error',
<a name="l2556"><span class="linenum">2556</span></a>          'debug_info' =&gt; '',
<a name="l2557"><span class="linenum">2557</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2558"><span class="linenum">2558</span></a>  
<a name="l2559"><span class="linenum">2559</span></a>      if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> &amp;&amp; ! empty( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['debug_info'] ) )
<a name="l2560"><span class="linenum">2560</span></a>      { // Display 'debug_info' when debug is ON
<a name="l2561"><span class="linenum">2561</span></a>          <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['debug_info'];
<a name="l2562"><span class="linenum">2562</span></a>      }
<a name="l2563"><span class="linenum">2563</span></a>  
<a name="l2564"><span class="linenum">2564</span></a>      if( <a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a> )
<a name="l2565"><span class="linenum">2565</span></a>      { // Command line interface, e.g. in cron_exec.php:
<a name="l2566"><span class="linenum">2566</span></a>          echo '== '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('An unexpected error has occurred!').&quot; ==\n&quot;;
<a name="l2567"><span class="linenum">2567</span></a>          echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('If this error persists, please report it to the administrator.').&quot;\n&quot;;
<a name="l2568"><span class="linenum">2568</span></a>          if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> || <a class="var it2004" onMouseOver="hilite(2004)" onMouseOut="lolite()" onClick="logVariable('display_errors_on_production')" href="../../../_variables/display_errors_on_production.html">$display_errors_on_production</a> )
<a name="l2569"><span class="linenum">2569</span></a>          { // Display additional info only in debug mode or when it was explicitly set by display_errors_on_production setting because it can reveal system info to hackers and greatly facilitate exploits
<a name="l2570"><span class="linenum">2570</span></a>              echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Additional information about this error:').&quot;\n&quot;;
<a name="l2571"><span class="linenum">2571</span></a>              echo <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>( <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a> ).&quot;\n\n&quot;;
<a name="l2572"><span class="linenum">2572</span></a>          }
<a name="l2573"><span class="linenum">2573</span></a>      }
<a name="l2574"><span class="linenum">2574</span></a>      else
<a name="l2575"><span class="linenum">2575</span></a>      {
<a name="l2576"><span class="linenum">2576</span></a>  <span class="comment">        // Attempt to output an error header (will not work if the output buffer has already flushed once):</span>
<a name="l2577"><span class="linenum">2577</span></a>  <span class="comment">        // This should help preventing indexing robots from indexing the error :P</span>
<a name="l2578"><span class="linenum">2578</span></a>          if( ! <a class="phpfunction" onClick="logFunction('headers_sent')" href="../../../_functions/headers_sent.html" onMouseOver="phpfuncPopup(event,'headers_sent')">headers_sent</a>() )
<a name="l2579"><span class="linenum">2579</span></a>          {
<a name="l2580"><span class="linenum">2580</span></a>              <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('_core/_template.funcs.php');
<a name="l2581"><span class="linenum">2581</span></a>              <a class="function" onClick="logFunction('headers_content_mightcache')" href="../../../_functions/headers_content_mightcache.html" onMouseOver="funcPopup(event,'headers_content_mightcache')">headers_content_mightcache</a>( 'text/html', 0, '#', false );  <span class="comment">// Do NOT cache error messages! (Users would not see they fixed them)</span>
<a name="l2582"><span class="linenum">2582</span></a>              <a class="var it6988" onMouseOver="hilite(6988)" onMouseOut="lolite()" onClick="logVariable('status_header')" href="../../../_variables/status_header.html">$status_header</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['SERVER_PROTOCOL'].' '.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'];
<a name="l2583"><span class="linenum">2583</span></a>              <a class="phpfunction" onClick="logFunction('header')" href="../../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(<a class="var it6988" onMouseOver="hilite(6988)" onMouseOut="lolite()" onClick="logVariable('status_header')" href="../../../_variables/status_header.html">$status_header</a>);
<a name="l2584"><span class="linenum">2584</span></a>          }
<a name="l2585"><span class="linenum">2585</span></a>  
<a name="l2586"><span class="linenum">2586</span></a>          echo '&lt;div style=&quot;background-color: #fdd; padding: 1ex; margin-bottom: 1ex;&quot;&gt;';
<a name="l2587"><span class="linenum">2587</span></a>          echo '&lt;h3 style=&quot;color:#f00;&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('An unexpected error has occurred!').'&lt;/h3&gt;';
<a name="l2588"><span class="linenum">2588</span></a>          echo '&lt;p&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('If this error persists, please report it to the administrator.').'&lt;/p&gt;';
<a name="l2589"><span class="linenum">2589</span></a>          echo '&lt;p&gt;&lt;a href=&quot;'.<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Go back to home page').'&lt;/a&gt;&lt;/p&gt;';
<a name="l2590"><span class="linenum">2590</span></a>          echo '&lt;/div&gt;';
<a name="l2591"><span class="linenum">2591</span></a>  
<a name="l2592"><span class="linenum">2592</span></a>          if( ! empty( <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a> ) )
<a name="l2593"><span class="linenum">2593</span></a>          {
<a name="l2594"><span class="linenum">2594</span></a>              echo '&lt;div style=&quot;background-color: #ddd; padding: 1ex; margin-bottom: 1ex;&quot;&gt;';
<a name="l2595"><span class="linenum">2595</span></a>              if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> || <a class="var it2004" onMouseOver="hilite(2004)" onMouseOut="lolite()" onClick="logVariable('display_errors_on_production')" href="../../../_variables/display_errors_on_production.html">$display_errors_on_production</a> )
<a name="l2596"><span class="linenum">2596</span></a>              { // Display additional info only in debug mode or when it was explicitly set by display_errors_on_production setting because it can reveal system info to hackers and greatly facilitate exploits
<a name="l2597"><span class="linenum">2597</span></a>                  echo '&lt;h3&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Additional information about this error:').'&lt;/h3&gt;';
<a name="l2598"><span class="linenum">2598</span></a>                  echo <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a>;
<a name="l2599"><span class="linenum">2599</span></a>              }
<a name="l2600"><span class="linenum">2600</span></a>              else
<a name="l2601"><span class="linenum">2601</span></a>              {
<a name="l2602"><span class="linenum">2602</span></a>                  echo '&lt;p&gt;&lt;i&gt;Enable debugging to get additional information about this error.&lt;/i&gt;&lt;/p&gt;' . <a class="function" onClick="logFunction('get_manual_link')" href="../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>('debugging','How to enable debug mode?');
<a name="l2603"><span class="linenum">2603</span></a>              }
<a name="l2604"><span class="linenum">2604</span></a>              echo '&lt;/div&gt;';
<a name="l2605"><span class="linenum">2605</span></a>  
<a name="l2606"><span class="linenum">2606</span></a>  <span class="comment">            // Append the error text to AJAX log if it is AJAX request</span>
<a name="l2607"><span class="linenum">2607</span></a>              global <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../../_variables/Ajaxlog.html">$Ajaxlog</a>;
<a name="l2608"><span class="linenum">2608</span></a>              if( ! empty( <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../../_variables/Ajaxlog.html">$Ajaxlog</a> ) )
<a name="l2609"><span class="linenum">2609</span></a>              {
<a name="l2610"><span class="linenum">2610</span></a>                  <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a>, 'error' );
<a name="l2611"><span class="linenum">2611</span></a>                  <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( NULL, NULL, true, 'all',
<a name="l2612"><span class="linenum">2612</span></a>                                  array(
<a name="l2613"><span class="linenum">2613</span></a>                                          'error' =&gt; array( 'class' =&gt; 'jslog_error', 'divClass' =&gt; false ),
<a name="l2614"><span class="linenum">2614</span></a>                                          'note'  =&gt; array( 'class' =&gt; 'jslog_note',  'divClass' =&gt; false ),
<a name="l2615"><span class="linenum">2615</span></a>                                      ), 'ul', 'jslog' );
<a name="l2616"><span class="linenum">2616</span></a>              }
<a name="l2617"><span class="linenum">2617</span></a>          }
<a name="l2618"><span class="linenum">2618</span></a>      }
<a name="l2619"><span class="linenum">2619</span></a>  
<a name="l2620"><span class="linenum">2620</span></a>      if( <a class="var it6987" onMouseOver="hilite(6987)" onMouseOut="lolite()" onClick="logVariable('log_app_errors')" href="../../../_variables/log_app_errors.html">$log_app_errors</a> &gt; 1 || <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> )
<a name="l2621"><span class="linenum">2621</span></a>      { // Prepare backtrace
<a name="l2622"><span class="linenum">2622</span></a>          <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a> = <a class="function" onClick="logFunction('debug_get_backtrace')" href="../../../_functions/debug_get_backtrace.html" onMouseOver="funcPopup(event,'debug_get_backtrace')">debug_get_backtrace</a>();
<a name="l2623"><span class="linenum">2623</span></a>  
<a name="l2624"><span class="linenum">2624</span></a>          if( <a class="var it6987" onMouseOver="hilite(6987)" onMouseOut="lolite()" onClick="logVariable('log_app_errors')" href="../../../_variables/log_app_errors.html">$log_app_errors</a> &gt; 1 || <a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a> )
<a name="l2625"><span class="linenum">2625</span></a>          {
<a name="l2626"><span class="linenum">2626</span></a>              <a class="var it6989" onMouseOver="hilite(6989)" onMouseOut="lolite()" onClick="logVariable('backtrace_cli')" href="../../../_variables/backtrace_cli.html">$backtrace_cli</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a>));
<a name="l2627"><span class="linenum">2627</span></a>          }
<a name="l2628"><span class="linenum">2628</span></a>      }
<a name="l2629"><span class="linenum">2629</span></a>  
<a name="l2630"><span class="linenum">2630</span></a>      if( <a class="var it6987" onMouseOver="hilite(6987)" onMouseOut="lolite()" onClick="logVariable('log_app_errors')" href="../../../_variables/log_app_errors.html">$log_app_errors</a> )
<a name="l2631"><span class="linenum">2631</span></a>      { // Log error through PHP's logging facilities:
<a name="l2632"><span class="linenum">2632</span></a>          <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('log_message')" href="../../../_variables/log_message.html">$log_message</a> = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../../../_variables/app_name.html">$app_name</a>.' error: ';
<a name="l2633"><span class="linenum">2633</span></a>          if( ! empty(<a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a>) )
<a name="l2634"><span class="linenum">2634</span></a>          {
<a name="l2635"><span class="linenum">2635</span></a>              <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('log_message')" href="../../../_variables/log_message.html">$log_message</a> .= <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a>) );
<a name="l2636"><span class="linenum">2636</span></a>          }
<a name="l2637"><span class="linenum">2637</span></a>          else
<a name="l2638"><span class="linenum">2638</span></a>          {
<a name="l2639"><span class="linenum">2639</span></a>              <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('log_message')" href="../../../_variables/log_message.html">$log_message</a> .= 'No info specified in <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>()';
<a name="l2640"><span class="linenum">2640</span></a>          }
<a name="l2641"><span class="linenum">2641</span></a>  
<a name="l2642"><span class="linenum">2642</span></a>  <span class="comment">        // Get file and line info:</span>
<a name="l2643"><span class="linenum">2643</span></a>          <a class="var it602" onMouseOver="hilite(602)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../_variables/file.html">$file</a> = 'Unknown';
<a name="l2644"><span class="linenum">2644</span></a>          <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../_variables/line.html">$line</a> = 'Unknown';
<a name="l2645"><span class="linenum">2645</span></a>          if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('debug_backtrace') <span class="comment">/* PHP 4.3 */</span> )
<a name="l2646"><span class="linenum">2646</span></a>          { // get the file and line
<a name="l2647"><span class="linenum">2647</span></a>              foreach( <a class="phpfunction" onClick="logFunction('debug_backtrace')" href="../../../_functions/debug_backtrace.html" onMouseOver="phpfuncPopup(event,'debug_backtrace')">debug_backtrace</a>() as <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a> )
<a name="l2648"><span class="linenum">2648</span></a>              {
<a name="l2649"><span class="linenum">2649</span></a>                  if( isset(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>['function']) &amp;&amp; <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>['function'] == 'debug_die' )
<a name="l2650"><span class="linenum">2650</span></a>                  {
<a name="l2651"><span class="linenum">2651</span></a>                      <a class="var it602" onMouseOver="hilite(602)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../_variables/file.html">$file</a> = isset(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>['file']) ? <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>['file'] : 'Unknown';
<a name="l2652"><span class="linenum">2652</span></a>                      <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../_variables/line.html">$line</a> = isset(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>['line']) ? <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>['line'] : 'Unknown';
<a name="l2653"><span class="linenum">2653</span></a>                      break;
<a name="l2654"><span class="linenum">2654</span></a>                  }
<a name="l2655"><span class="linenum">2655</span></a>              }
<a name="l2656"><span class="linenum">2656</span></a>          }
<a name="l2657"><span class="linenum">2657</span></a>          <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('log_message')" href="../../../_variables/log_message.html">$log_message</a> .= ' in '.<a class="var it602" onMouseOver="hilite(602)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../_variables/file.html">$file</a>.' at line '.<a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../_variables/line.html">$line</a>;
<a name="l2658"><span class="linenum">2658</span></a>  
<a name="l2659"><span class="linenum">2659</span></a>          if( <a class="var it6987" onMouseOver="hilite(6987)" onMouseOut="lolite()" onClick="logVariable('log_app_errors')" href="../../../_variables/log_app_errors.html">$log_app_errors</a> &gt; 1 )
<a name="l2660"><span class="linenum">2660</span></a>          { // Append backtrace:
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment">            // indent after newlines:</span>
<a name="l2662"><span class="linenum">2662</span></a>              <a class="var it6989" onMouseOver="hilite(6989)" onMouseOut="lolite()" onClick="logVariable('backtrace_cli')" href="../../../_variables/backtrace_cli.html">$backtrace_cli</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~(\S)(\n)(\S)~', '<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>  <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('2')" href="../../../_variables/2.html">$2</a><a class="var it1399" onMouseOver="hilite(1399)" onMouseOut="lolite()" onClick="logVariable('3')" href="../../../_variables/3.html">$3</a>', <a class="var it6989" onMouseOver="hilite(6989)" onMouseOut="lolite()" onClick="logVariable('backtrace_cli')" href="../../../_variables/backtrace_cli.html">$backtrace_cli</a> );
<a name="l2663"><span class="linenum">2663</span></a>              <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('log_message')" href="../../../_variables/log_message.html">$log_message</a> .= &quot;\nBacktrace:\n&quot;.<a class="var it6989" onMouseOver="hilite(6989)" onMouseOut="lolite()" onClick="logVariable('backtrace_cli')" href="../../../_variables/backtrace_cli.html">$backtrace_cli</a>;
<a name="l2664"><span class="linenum">2664</span></a>          }
<a name="l2665"><span class="linenum">2665</span></a>          <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('log_message')" href="../../../_variables/log_message.html">$log_message</a> .= &quot;\nREQUEST_URI:  &quot;.( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REQUEST_URI']) ? <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REQUEST_URI'] : '-' );
<a name="l2666"><span class="linenum">2666</span></a>          <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('log_message')" href="../../../_variables/log_message.html">$log_message</a> .= &quot;\nHTTP_REFERER: &quot;.( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['HTTP_REFERER']) ? <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['HTTP_REFERER'] : '-' );
<a name="l2667"><span class="linenum">2667</span></a>  
<a name="l2668"><span class="linenum">2668</span></a>          <a class="phpfunction" onClick="logFunction('error_log')" href="../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>( <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;\n&quot;, ' / ', <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('log_message')" href="../../../_variables/log_message.html">$log_message</a>), 0 <span class="comment">/* PHP's system logger */</span> );
<a name="l2669"><span class="linenum">2669</span></a>      }
<a name="l2670"><span class="linenum">2670</span></a>  
<a name="l2671"><span class="linenum">2671</span></a>  
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">    // DEBUG OUTPUT:</span>
<a name="l2673"><span class="linenum">2673</span></a>      if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> )
<a name="l2674"><span class="linenum">2674</span></a>      {
<a name="l2675"><span class="linenum">2675</span></a>          if( <a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a> )
<a name="l2676"><span class="linenum">2676</span></a>              echo <a class="var it6989" onMouseOver="hilite(6989)" onMouseOut="lolite()" onClick="logVariable('backtrace_cli')" href="../../../_variables/backtrace_cli.html">$backtrace_cli</a>;
<a name="l2677"><span class="linenum">2677</span></a>          else
<a name="l2678"><span class="linenum">2678</span></a>              echo <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../../../_variables/backtrace.html">$backtrace</a>;
<a name="l2679"><span class="linenum">2679</span></a>      }
<a name="l2680"><span class="linenum">2680</span></a>  
<a name="l2681"><span class="linenum">2681</span></a>  <span class="comment">    // EXIT:</span>
<a name="l2682"><span class="linenum">2682</span></a>      if( ! <a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a> )
<a name="l2683"><span class="linenum">2683</span></a>      { // Attempt to keep the html valid (but it doesn't really matter anyway)
<a name="l2684"><span class="linenum">2684</span></a>          echo '&lt;/body&gt;&lt;/html&gt;';
<a name="l2685"><span class="linenum">2685</span></a>      }
<a name="l2686"><span class="linenum">2686</span></a>  
<a name="l2687"><span class="linenum">2687</span></a>      die(1);    <span class="comment">// Error code 1. Note: This will still call the shutdown function.</span>
<a name="l2688"><span class="linenum">2688</span></a>  }
<a name="l2689"><span class="linenum">2689</span></a>  
<a name="l2690"><span class="linenum">2690</span></a>  
<a name="l2691"><span class="linenum">2691</span></a>  <span class="comment">/**</span>
<a name="l2692"><span class="linenum">2692</span></a>  <span class="comment"> * Outputs Bad request Error message. When in debug mode it also prints a backtrace.</span>
<a name="l2693"><span class="linenum">2693</span></a>  <span class="comment"> *</span>
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment"> * This should be used when a bad user input is detected.</span>
<a name="l2695"><span class="linenum">2695</span></a>  <span class="comment"> *</span>
<a name="l2696"><span class="linenum">2696</span></a>  <span class="comment"> * @param string Message to output (HTML)</span>
<a name="l2697"><span class="linenum">2697</span></a>  <span class="comment"> */</span>
<a name="l2698"><span class="linenum">2698</span></a>  function <a class="function" onClick="logFunction('bad_request_die')" href="../../../_functions/bad_request_die.html" onMouseOver="funcPopup(event,'bad_request_die')">bad_request_die</a>( <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a> = '' )
<a name="l2699"><span class="linenum">2699</span></a>  {
<a name="l2700"><span class="linenum">2700</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>, <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>;
<a name="l2701"><span class="linenum">2701</span></a>  
<a name="l2702"><span class="linenum">2702</span></a>  <span class="comment">    // Attempt to output an error header (will not work if the output buffer has already flushed once):</span>
<a name="l2703"><span class="linenum">2703</span></a>  <span class="comment">    // This should help preventing indexing robots from indexing the error :P</span>
<a name="l2704"><span class="linenum">2704</span></a>      if( ! <a class="phpfunction" onClick="logFunction('headers_sent')" href="../../../_functions/headers_sent.html" onMouseOver="phpfuncPopup(event,'headers_sent')">headers_sent</a>() )
<a name="l2705"><span class="linenum">2705</span></a>      {
<a name="l2706"><span class="linenum">2706</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('_core/_template.funcs.php');
<a name="l2707"><span class="linenum">2707</span></a>          <a class="function" onClick="logFunction('headers_content_mightcache')" href="../../../_functions/headers_content_mightcache.html" onMouseOver="funcPopup(event,'headers_content_mightcache')">headers_content_mightcache</a>( 'text/html', 0, '#', false );        <span class="comment">// Do NOT cache error messages! (Users would not see they fixed them)</span>
<a name="l2708"><span class="linenum">2708</span></a>          <a class="function" onClick="logFunction('header_http_response')" href="../../../_functions/header_http_response.html" onMouseOver="funcPopup(event,'header_http_response')">header_http_response</a>('400 Bad Request');
<a name="l2709"><span class="linenum">2709</span></a>      }
<a name="l2710"><span class="linenum">2710</span></a>  
<a name="l2711"><span class="linenum">2711</span></a>      echo '&lt;div style=&quot;background-color: #fdd; padding: 1ex; margin-bottom: 1ex;&quot;&gt;';
<a name="l2712"><span class="linenum">2712</span></a>      echo '&lt;h3 style=&quot;color:#f00;&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Bad Request!').'&lt;/h3&gt;';
<a name="l2713"><span class="linenum">2713</span></a>      echo '&lt;p&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The parameters of your request are invalid.').'&lt;/p&gt;';
<a name="l2714"><span class="linenum">2714</span></a>      echo '&lt;p&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('If you have obtained this error by clicking on a link INSIDE of this site, please report the bad link to the administrator.').'&lt;/p&gt;';
<a name="l2715"><span class="linenum">2715</span></a>      echo '&lt;p&gt;&lt;a href=&quot;'.<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Go back to home page').'&lt;/a&gt;&lt;/p&gt;';
<a name="l2716"><span class="linenum">2716</span></a>      echo '&lt;/div&gt;';
<a name="l2717"><span class="linenum">2717</span></a>  
<a name="l2718"><span class="linenum">2718</span></a>      if( !empty( <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a> ) )
<a name="l2719"><span class="linenum">2719</span></a>      {
<a name="l2720"><span class="linenum">2720</span></a>          echo '&lt;div style=&quot;background-color: #ddd; padding: 1ex; margin-bottom: 1ex;&quot;&gt;';
<a name="l2721"><span class="linenum">2721</span></a>          if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> )
<a name="l2722"><span class="linenum">2722</span></a>          {    // Display additional info only in debug mode because it can reveal system info to hackers and greatly facilitate exploits
<a name="l2723"><span class="linenum">2723</span></a>              echo '&lt;h3&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Additional information about this error:').'&lt;/h3&gt;';
<a name="l2724"><span class="linenum">2724</span></a>              echo <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a>;
<a name="l2725"><span class="linenum">2725</span></a>          }
<a name="l2726"><span class="linenum">2726</span></a>          else
<a name="l2727"><span class="linenum">2727</span></a>          {
<a name="l2728"><span class="linenum">2728</span></a>              echo '&lt;p&gt;&lt;i&gt;Enable debugging to get additional information about this error.&lt;/i&gt;&lt;/p&gt;' . <a class="function" onClick="logFunction('get_manual_link')" href="../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>('debugging','How to enable debug mode?');
<a name="l2729"><span class="linenum">2729</span></a>          }
<a name="l2730"><span class="linenum">2730</span></a>          echo '&lt;/div&gt;';
<a name="l2731"><span class="linenum">2731</span></a>  
<a name="l2732"><span class="linenum">2732</span></a>  <span class="comment">        // Append the error text to AJAX log if it is AJAX request</span>
<a name="l2733"><span class="linenum">2733</span></a>          global <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../../_variables/Ajaxlog.html">$Ajaxlog</a>;
<a name="l2734"><span class="linenum">2734</span></a>          if( ! empty( <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../../_variables/Ajaxlog.html">$Ajaxlog</a> ) )
<a name="l2735"><span class="linenum">2735</span></a>          {
<a name="l2736"><span class="linenum">2736</span></a>              <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it6986" onMouseOver="hilite(6986)" onMouseOut="lolite()" onClick="logVariable('additional_info')" href="../../../_variables/additional_info.html">$additional_info</a>, 'error' );
<a name="l2737"><span class="linenum">2737</span></a>              <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( NULL, NULL, true, 'all',
<a name="l2738"><span class="linenum">2738</span></a>                              array(
<a name="l2739"><span class="linenum">2739</span></a>                                      'error' =&gt; array( 'class' =&gt; 'jslog_error', 'divClass' =&gt; false ),
<a name="l2740"><span class="linenum">2740</span></a>                                      'note'  =&gt; array( 'class' =&gt; 'jslog_note',  'divClass' =&gt; false ),
<a name="l2741"><span class="linenum">2741</span></a>                                  ), 'ul', 'jslog' );
<a name="l2742"><span class="linenum">2742</span></a>          }
<a name="l2743"><span class="linenum">2743</span></a>      }
<a name="l2744"><span class="linenum">2744</span></a>  
<a name="l2745"><span class="linenum">2745</span></a>      if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> )
<a name="l2746"><span class="linenum">2746</span></a>      {
<a name="l2747"><span class="linenum">2747</span></a>          echo <a class="function" onClick="logFunction('debug_get_backtrace')" href="../../../_functions/debug_get_backtrace.html" onMouseOver="funcPopup(event,'debug_get_backtrace')">debug_get_backtrace</a>();
<a name="l2748"><span class="linenum">2748</span></a>      }
<a name="l2749"><span class="linenum">2749</span></a>  
<a name="l2750"><span class="linenum">2750</span></a>  <span class="comment">    // Attempt to keep the html valid (but it doesn't really matter anyway)</span>
<a name="l2751"><span class="linenum">2751</span></a>      echo '&lt;/body&gt;&lt;/html&gt;';
<a name="l2752"><span class="linenum">2752</span></a>  
<a name="l2753"><span class="linenum">2753</span></a>      die(2); <span class="comment">// Error code 2. Note: this will still call the shutdown function.</span>
<a name="l2754"><span class="linenum">2754</span></a>  }
<a name="l2755"><span class="linenum">2755</span></a>  
<a name="l2756"><span class="linenum">2756</span></a>  
<a name="l2757"><span class="linenum">2757</span></a>  <span class="comment">/**</span>
<a name="l2758"><span class="linenum">2758</span></a>  <span class="comment"> * Outputs debug info, according to {@link $debug} or $force param. This gets called typically at the end of the page.</span>
<a name="l2759"><span class="linenum">2759</span></a>  <span class="comment"> *</span>
<a name="l2760"><span class="linenum">2760</span></a>  <span class="comment"> * @param boolean true to force output regardless of {@link $debug}</span>
<a name="l2761"><span class="linenum">2761</span></a>  <span class="comment"> * @param boolean true to force clean output (without HTML) regardless of {@link $is_cli}</span>
<a name="l2762"><span class="linenum">2762</span></a>  <span class="comment"> */</span>
<a name="l2763"><span class="linenum">2763</span></a>  function <a class="function" onClick="logFunction('debug_info')" href="../../../_functions/debug_info.html" onMouseOver="funcPopup(event,'debug_info')">debug_info</a>( <a class="var it603" onMouseOver="hilite(603)" onMouseOut="lolite()" onClick="logVariable('force')" href="../../../_variables/force.html">$force</a> = false, <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('force_clean')" href="../../../_variables/force_clean.html">$force_clean</a> = false )
<a name="l2764"><span class="linenum">2764</span></a>  {
<a name="l2765"><span class="linenum">2765</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>, <a class="var it6991" onMouseOver="hilite(6991)" onMouseOut="lolite()" onClick="logVariable('debug_done')" href="../../../_variables/debug_done.html">$debug_done</a>, <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('debug_jslog')" href="../../../_variables/debug_jslog.html">$debug_jslog</a>, <a class="var it6992" onMouseOver="hilite(6992)" onMouseOut="lolite()" onClick="logVariable('debug_jslog_done')" href="../../../_variables/debug_jslog_done.html">$debug_jslog_done</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it6993" onMouseOver="hilite(6993)" onMouseOut="lolite()" onClick="logVariable('obhandler_debug')" href="../../../_variables/obhandler_debug.html">$obhandler_debug</a>, <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>, <a class="var it743" onMouseOver="hilite(743)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>, <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>, <a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a>;
<a name="l2766"><span class="linenum">2766</span></a>      global <a class="var it6994" onMouseOver="hilite(6994)" onMouseOut="lolite()" onClick="logVariable('cache_imgsize')" href="../../../_variables/cache_imgsize.html">$cache_imgsize</a>, <a class="var it5353" onMouseOver="hilite(5353)" onMouseOut="lolite()" onClick="logVariable('cache_File')" href="../../../_variables/cache_File.html">$cache_File</a>;
<a name="l2767"><span class="linenum">2767</span></a>      global <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>;
<a name="l2768"><span class="linenum">2768</span></a>      global <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../_variables/db_config.html">$db_config</a>, <a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('tableprefix')" href="../../../_variables/tableprefix.html">$tableprefix</a>, <a class="var it3261" onMouseOver="hilite(3261)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../../_variables/http_response_code.html">$http_response_code</a>, <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../../_variables/disp_detail.html">$disp_detail</a>, <a class="var it544" onMouseOver="hilite(544)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../../_variables/robots_index.html">$robots_index</a>, <a class="var it3273" onMouseOver="hilite(3273)" onMouseOut="lolite()" onClick="logVariable('robots_follow')" href="../../../_variables/robots_follow.html">$robots_follow</a>, <a class="var it3257" onMouseOver="hilite(3257)" onMouseOut="lolite()" onClick="logVariable('content_type_header')" href="../../../_variables/content_type_header.html">$content_type_header</a>;
<a name="l2769"><span class="linenum">2769</span></a>      <span class="comment">/**</span>
<a name="l2770"><span class="linenum">2770</span></a>  <span class="comment">     * @var Hit</span>
<a name="l2771"><span class="linenum">2771</span></a>  <span class="comment">     */</span>
<a name="l2772"><span class="linenum">2772</span></a>      global <a class="var it55" onMouseOver="hilite(55)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../../_variables/Hit.html">$Hit</a>;
<a name="l2773"><span class="linenum">2773</span></a>  
<a name="l2774"><span class="linenum">2774</span></a>  <span class="comment">    // Detect content-type</span>
<a name="l2775"><span class="linenum">2775</span></a>      <a class="var it1101" onMouseOver="hilite(1101)" onMouseOut="lolite()" onClick="logVariable('content_type')" href="../../../_variables/content_type.html">$content_type</a> = NULL;
<a name="l2776"><span class="linenum">2776</span></a>      foreach(<a class="phpfunction" onClick="logFunction('headers_list')" href="../../../_functions/headers_list.html" onMouseOver="phpfuncPopup(event,'headers_list')">headers_list</a>() as <a class="var it1079" onMouseOver="hilite(1079)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../_variables/header.html">$header</a>)
<a name="l2777"><span class="linenum">2777</span></a>      {
<a name="l2778"><span class="linenum">2778</span></a>          if( <a class="phpfunction" onClick="logFunction('stripos')" href="../../../_functions/stripos.html" onMouseOver="phpfuncPopup(event,'stripos')">stripos</a>(<a class="var it1079" onMouseOver="hilite(1079)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../_variables/header.html">$header</a>, 'content-type:') !== false )
<a name="l2779"><span class="linenum">2779</span></a>          { // content type sent
<a name="l2780"><span class="linenum">2780</span></a>  <span class="comment">            # &quot;Content-Type:text/html;charset=utf-8&quot; =&gt; &quot;text/html&quot;</span>
<a name="l2781"><span class="linenum">2781</span></a>              <a class="var it1101" onMouseOver="hilite(1101)" onMouseOut="lolite()" onClick="logVariable('content_type')" href="../../../_variables/content_type.html">$content_type</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(';', <a class="phpfunction" onClick="logFunction('array_pop')" href="../../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(':', <a class="var it1079" onMouseOver="hilite(1079)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../_variables/header.html">$header</a>, 2)))));
<a name="l2782"><span class="linenum">2782</span></a>              break;
<a name="l2783"><span class="linenum">2783</span></a>          }
<a name="l2784"><span class="linenum">2784</span></a>      }
<a name="l2785"><span class="linenum">2785</span></a>  
<a name="l2786"><span class="linenum">2786</span></a>  <span class="comment">    // ---- Print AJAX Log</span>
<a name="l2787"><span class="linenum">2787</span></a>      if( empty( <a class="var it6992" onMouseOver="hilite(6992)" onMouseOut="lolite()" onClick="logVariable('debug_jslog_done')" href="../../../_variables/debug_jslog_done.html">$debug_jslog_done</a> ) &amp;&amp; ( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> || <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('debug_jslog')" href="../../../_variables/debug_jslog.html">$debug_jslog</a> ) &amp;&amp; <a class="var it1101" onMouseOver="hilite(1101)" onMouseOut="lolite()" onClick="logVariable('content_type')" href="../../../_variables/content_type.html">$content_type</a> == 'text/html' )
<a name="l2788"><span class="linenum">2788</span></a>      {    // Display debug jslog once
<a name="l2789"><span class="linenum">2789</span></a>          global <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>, <a class="var it3283" onMouseOver="hilite(3283)" onMouseOut="lolite()" onClick="logVariable('app_version_long')" href="../../../_variables/app_version_long.html">$app_version_long</a>;
<a name="l2790"><span class="linenum">2790</span></a>  
<a name="l2791"><span class="linenum">2791</span></a>          echo '&lt;script type=&quot;text/javascript&quot; src=&quot;'.<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>.'js/debug_jslog.js?v='.<a class="var it3283" onMouseOver="hilite(3283)" onMouseOut="lolite()" onClick="logVariable('app_version_long')" href="../../../_variables/app_version_long.html">$app_version_long</a>.'&quot;&gt;&lt;/script&gt;';
<a name="l2792"><span class="linenum">2792</span></a>          echo '&lt;script type=&quot;text/javascript&quot; src=&quot;'.<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>.'js/jquery/jquery.cookie.min.js?v='.<a class="var it3283" onMouseOver="hilite(3283)" onMouseOut="lolite()" onClick="logVariable('app_version_long')" href="../../../_variables/app_version_long.html">$app_version_long</a>.'&quot;&gt;&lt;/script&gt;';
<a name="l2793"><span class="linenum">2793</span></a>          <a class="var it6995" onMouseOver="hilite(6995)" onMouseOut="lolite()" onClick="logVariable('jquery_ui_css_url')" href="../../../_variables/jquery_ui_css_url.html">$jquery_ui_css_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>.'css/jquery/smoothness/jquery-ui.css', 'v='.<a class="var it3283" onMouseOver="hilite(3283)" onMouseOut="lolite()" onClick="logVariable('app_version_long')" href="../../../_variables/app_version_long.html">$app_version_long</a> );
<a name="l2794"><span class="linenum">2794</span></a>          echo '&lt;link href=&quot;'.<a class="var it6995" onMouseOver="hilite(6995)" onMouseOut="lolite()" onClick="logVariable('jquery_ui_css_url')" href="../../../_variables/jquery_ui_css_url.html">$jquery_ui_css_url</a>.'&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot; /&gt;';
<a name="l2795"><span class="linenum">2795</span></a>  
<a name="l2796"><span class="linenum">2796</span></a>          <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('jslog_style_cookies')" href="../../../_variables/jslog_style_cookies.html">$jslog_style_cookies</a> = <a class="function" onClick="logFunction('param_cookie')" href="../../../_functions/param_cookie.html" onMouseOver="funcPopup(event,'param_cookie')">param_cookie</a>( 'jslog_style', 'string' );
<a name="l2797"><span class="linenum">2797</span></a>          <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('jslog_styles')" href="../../../_variables/jslog_styles.html">$jslog_styles</a> = array();
<a name="l2798"><span class="linenum">2798</span></a>          if( !empty( <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('jslog_style_cookies')" href="../../../_variables/jslog_style_cookies.html">$jslog_style_cookies</a> ) )
<a name="l2799"><span class="linenum">2799</span></a>          {    // Get styles only from cookies
<a name="l2800"><span class="linenum">2800</span></a>              <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('jslog_style_cookies')" href="../../../_variables/jslog_style_cookies.html">$jslog_style_cookies</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ';', <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('jslog_style_cookies')" href="../../../_variables/jslog_style_cookies.html">$jslog_style_cookies</a> );
<a name="l2801"><span class="linenum">2801</span></a>              foreach( <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('jslog_style_cookies')" href="../../../_variables/jslog_style_cookies.html">$jslog_style_cookies</a> as <a class="var it6998" onMouseOver="hilite(6998)" onMouseOut="lolite()" onClick="logVariable('jsc')" href="../../../_variables/jsc.html">$jsc</a> =&gt; <a class="var it4279" onMouseOver="hilite(4279)" onMouseOut="lolite()" onClick="logVariable('style')" href="../../../_variables/style.html">$style</a> )
<a name="l2802"><span class="linenum">2802</span></a>              {
<a name="l2803"><span class="linenum">2803</span></a>                  if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it4279" onMouseOver="hilite(4279)" onMouseOut="lolite()" onClick="logVariable('style')" href="../../../_variables/style.html">$style</a>, 'height' ) !== false <span class="comment">/*|| ( strpos( $style, 'display' ) !== false &amp;&amp; !$debug_jslog )*/</span> )
<a name="l2804"><span class="linenum">2804</span></a>                  {    // Unset the height param from defined styles ( and the display param if jslog is disabled )
<a name="l2805"><span class="linenum">2805</span></a>                      unset( <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('jslog_style_cookies')" href="../../../_variables/jslog_style_cookies.html">$jslog_style_cookies</a>[<a class="var it6998" onMouseOver="hilite(6998)" onMouseOut="lolite()" onClick="logVariable('jsc')" href="../../../_variables/jsc.html">$jsc</a>] );
<a name="l2806"><span class="linenum">2806</span></a>                  }
<a name="l2807"><span class="linenum">2807</span></a>              }
<a name="l2808"><span class="linenum">2808</span></a>              <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('jslog_styles')" href="../../../_variables/jslog_styles.html">$jslog_styles</a>[] = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ';', <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('jslog_style_cookies')" href="../../../_variables/jslog_style_cookies.html">$jslog_style_cookies</a> );
<a name="l2809"><span class="linenum">2809</span></a>          }
<a name="l2810"><span class="linenum">2810</span></a>          else
<a name="l2811"><span class="linenum">2811</span></a>          {
<a name="l2812"><span class="linenum">2812</span></a>              if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l2813"><span class="linenum">2813</span></a>              {    // Align top when evobar is hidden
<a name="l2814"><span class="linenum">2814</span></a>                  <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('jslog_styles')" href="../../../_variables/jslog_styles.html">$jslog_styles</a>[] = 'top:0';
<a name="l2815"><span class="linenum">2815</span></a>              }
<a name="l2816"><span class="linenum">2816</span></a>              if( <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('debug_jslog')" href="../../../_variables/debug_jslog.html">$debug_jslog</a> )
<a name="l2817"><span class="linenum">2817</span></a>              {    // Display the jslog
<a name="l2818"><span class="linenum">2818</span></a>                  <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('jslog_styles')" href="../../../_variables/jslog_styles.html">$jslog_styles</a>[] = 'display:block';
<a name="l2819"><span class="linenum">2819</span></a>              }
<a name="l2820"><span class="linenum">2820</span></a>          }
<a name="l2821"><span class="linenum">2821</span></a>          <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('jslog_styles')" href="../../../_variables/jslog_styles.html">$jslog_styles</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('jslog_styles')" href="../../../_variables/jslog_styles.html">$jslog_styles</a> ) &gt; 0 ? ' style=&quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ';', <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('jslog_styles')" href="../../../_variables/jslog_styles.html">$jslog_styles</a> ).'&quot;' : '';
<a name="l2822"><span class="linenum">2822</span></a>  
<a name="l2823"><span class="linenum">2823</span></a>          <a class="var it6999" onMouseOver="hilite(6999)" onMouseOut="lolite()" onClick="logVariable('close_url')" href="../../../_variables/close_url.html">$close_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REQUEST_URI'], 'jslog' );
<a name="l2824"><span class="linenum">2824</span></a>          echo '&lt;div id=&quot;debug_ajax_info&quot; class=&quot;debug&quot;'.<a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('jslog_styles')" href="../../../_variables/jslog_styles.html">$jslog_styles</a>.'&gt;';
<a name="l2825"><span class="linenum">2825</span></a>          echo '&lt;div class=&quot;jslog_titlebar&quot;&gt;AJAX Debug log'.<a class="function" onClick="logFunction('get_manual_link')" href="../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>('ajax_debug_log').
<a name="l2826"><span class="linenum">2826</span></a>                  <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Close'), 'close', <a class="var it6999" onMouseOver="hilite(6999)" onMouseOut="lolite()" onClick="logVariable('close_url')" href="../../../_variables/close_url.html">$close_url</a>, NULL, NULL, NULL, array( 'class' =&gt; 'jslog_switcher' ) ).
<a name="l2827"><span class="linenum">2827</span></a>              '&lt;/div&gt;';
<a name="l2828"><span class="linenum">2828</span></a>          echo '&lt;div id=&quot;jslog_container&quot;&gt;&lt;/div&gt;';
<a name="l2829"><span class="linenum">2829</span></a>          echo '&lt;div class=&quot;jslog_statusbar&quot;&gt;'.
<a name="l2830"><span class="linenum">2830</span></a>                  '&lt;a href=&quot;'.<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REQUEST_URI'].'#&quot; class=&quot;jslog_clear&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Clear').'&lt;/a&gt;'.
<a name="l2831"><span class="linenum">2831</span></a>              '&lt;/div&gt;';
<a name="l2832"><span class="linenum">2832</span></a>          echo '&lt;/div&gt;';
<a name="l2833"><span class="linenum">2833</span></a>  
<a name="l2834"><span class="linenum">2834</span></a>  <span class="comment">        // Make sure debug jslog output only happens once:</span>
<a name="l2835"><span class="linenum">2835</span></a>          <a class="var it6992" onMouseOver="hilite(6992)" onMouseOut="lolite()" onClick="logVariable('debug_jslog_done')" href="../../../_variables/debug_jslog_done.html">$debug_jslog_done</a> = true;
<a name="l2836"><span class="linenum">2836</span></a>      }
<a name="l2837"><span class="linenum">2837</span></a>  <span class="comment">    // ----</span>
<a name="l2838"><span class="linenum">2838</span></a>  
<a name="l2839"><span class="linenum">2839</span></a>  <span class="comment">    // clean output:</span>
<a name="l2840"><span class="linenum">2840</span></a>      <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> = <a class="var it3118" onMouseOver="hilite(3118)" onMouseOut="lolite()" onClick="logVariable('is_cli')" href="../../../_variables/is_cli.html">$is_cli</a> || <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('force_clean')" href="../../../_variables/force_clean.html">$force_clean</a>;
<a name="l2841"><span class="linenum">2841</span></a>  
<a name="l2842"><span class="linenum">2842</span></a>      if( ! <a class="var it603" onMouseOver="hilite(603)" onMouseOut="lolite()" onClick="logVariable('force')" href="../../../_variables/force.html">$force</a> )
<a name="l2843"><span class="linenum">2843</span></a>      {
<a name="l2844"><span class="linenum">2844</span></a>          if( ! empty( <a class="var it6991" onMouseOver="hilite(6991)" onMouseOut="lolite()" onClick="logVariable('debug_done')" href="../../../_variables/debug_done.html">$debug_done</a> ) )
<a name="l2845"><span class="linenum">2845</span></a>          { // Already displayed!
<a name="l2846"><span class="linenum">2846</span></a>              return;
<a name="l2847"><span class="linenum">2847</span></a>          }
<a name="l2848"><span class="linenum">2848</span></a>  
<a name="l2849"><span class="linenum">2849</span></a>          if( empty( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> ) || // No debug output desired:
<a name="l2850"><span class="linenum">2850</span></a>              ( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> &lt; 2 &amp;&amp; <a class="var it1101" onMouseOver="hilite(1101)" onMouseOut="lolite()" onClick="logVariable('content_type')" href="../../../_variables/content_type.html">$content_type</a> != 'text/html' ) ) // Do not display, if no content-type header has been sent or it's != &quot;text/html&quot; (debug &gt; 1 skips this)
<a name="l2851"><span class="linenum">2851</span></a>          {
<a name="l2852"><span class="linenum">2852</span></a>              global <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('evo_last_handled_error')" href="../../../_variables/evo_last_handled_error.html">$evo_last_handled_error</a>;
<a name="l2853"><span class="linenum">2853</span></a>              if( ! empty( <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('evo_last_handled_error')" href="../../../_variables/evo_last_handled_error.html">$evo_last_handled_error</a> ) )
<a name="l2854"><span class="linenum">2854</span></a>              { // If script has been stoppped by some error
<a name="l2855"><span class="linenum">2855</span></a>  <span class="comment">                // Display a message when debug is OFF and error has occured</span>
<a name="l2856"><span class="linenum">2856</span></a>                  <a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('debug_off_title')" href="../../../_variables/debug_off_title.html">$debug_off_title</a> = 'An unexpected error has occured!';
<a name="l2857"><span class="linenum">2857</span></a>                  <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('debug_off_msg1')" href="../../../_variables/debug_off_msg1.html">$debug_off_msg1</a> = 'We apologize for the inconvenience.';
<a name="l2858"><span class="linenum">2858</span></a>                  <a class="var it7004" onMouseOver="hilite(7004)" onMouseOut="lolite()" onClick="logVariable('debug_off_msg2')" href="../../../_variables/debug_off_msg2.html">$debug_off_msg2</a> = 'This error has been automatically reported and we will work to resolve it as fast as possible.';
<a name="l2859"><span class="linenum">2859</span></a>                  if( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l2860"><span class="linenum">2860</span></a>                  { // CLI mode
<a name="l2861"><span class="linenum">2861</span></a>                      echo '*** '.<a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('debug_off_title')" href="../../../_variables/debug_off_title.html">$debug_off_title</a>.' ***'.&quot;\n\n&quot;
<a name="l2862"><span class="linenum">2862</span></a>                          .<a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('debug_off_msg1')" href="../../../_variables/debug_off_msg1.html">$debug_off_msg1</a>.&quot;\n&quot;
<a name="l2863"><span class="linenum">2863</span></a>                          .<a class="var it7004" onMouseOver="hilite(7004)" onMouseOut="lolite()" onClick="logVariable('debug_off_msg2')" href="../../../_variables/debug_off_msg2.html">$debug_off_msg2</a>;
<a name="l2864"><span class="linenum">2864</span></a>                  }
<a name="l2865"><span class="linenum">2865</span></a>                  else
<a name="l2866"><span class="linenum">2866</span></a>                  { // View from browser
<a name="l2867"><span class="linenum">2867</span></a>                      echo '&lt;div style=&quot;margin:1em auto;padding:10px;background:#FEFFFF;border:2px solid #F00;border-radius:6px;text-align:center;&quot;&gt;'
<a name="l2868"><span class="linenum">2868</span></a>                              .'&lt;h2 style=&quot;margin:0;color:#F00;&quot;&gt;'.<a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('debug_off_title')" href="../../../_variables/debug_off_title.html">$debug_off_title</a>.'&lt;/h2&gt;'
<a name="l2869"><span class="linenum">2869</span></a>                              .'&lt;p&gt;'.<a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('debug_off_msg1')" href="../../../_variables/debug_off_msg1.html">$debug_off_msg1</a>.'&lt;/p&gt;'
<a name="l2870"><span class="linenum">2870</span></a>                              .'&lt;p style=&quot;margin-bottom:0&quot;&gt;'.<a class="var it7004" onMouseOver="hilite(7004)" onMouseOut="lolite()" onClick="logVariable('debug_off_msg2')" href="../../../_variables/debug_off_msg2.html">$debug_off_msg2</a>.'&lt;/p&gt;'
<a name="l2871"><span class="linenum">2871</span></a>                          .'&lt;/div&gt;';
<a name="l2872"><span class="linenum">2872</span></a>                  }
<a name="l2873"><span class="linenum">2873</span></a>              }
<a name="l2874"><span class="linenum">2874</span></a>              return;
<a name="l2875"><span class="linenum">2875</span></a>          }
<a name="l2876"><span class="linenum">2876</span></a>      }
<a name="l2877"><span class="linenum">2877</span></a>  <span class="comment">    //Make sure debug output only happens once:</span>
<a name="l2878"><span class="linenum">2878</span></a>      <a class="var it6991" onMouseOver="hilite(6991)" onMouseOut="lolite()" onClick="logVariable('debug_done')" href="../../../_variables/debug_done.html">$debug_done</a> = true;
<a name="l2879"><span class="linenum">2879</span></a>  
<a name="l2880"><span class="linenum">2880</span></a>      <a class="var it7005" onMouseOver="hilite(7005)" onMouseOut="lolite()" onClick="logVariable('printf_format')" href="../../../_variables/printf_format.html">$printf_format</a> = '| %-45s | %-5s | %-7s | %-5s |';
<a name="l2881"><span class="linenum">2881</span></a>      <a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('table_headerlen')" href="../../../_variables/table_headerlen.html">$table_headerlen</a> = 73;
<a name="l2882"><span class="linenum">2882</span></a>      <span class="comment">/* This calculates the number of dashes to print e. g. on the top and</span>
<a name="l2883"><span class="linenum">2883</span></a>  <span class="comment">     * bottom of the table and after the header, making the table look</span>
<a name="l2884"><span class="linenum">2884</span></a>  <span class="comment">     * better (looks like the tables of the mysql command line client).</span>
<a name="l2885"><span class="linenum">2885</span></a>  <span class="comment">     * Normally, the value won't change, so it's hardcoded above. If you</span>
<a name="l2886"><span class="linenum">2886</span></a>  <span class="comment">     * change the printf() format above, this might be useful.</span>
<a name="l2887"><span class="linenum">2887</span></a>  <span class="comment">    preg_match_all( '#\d+#', $printf_format, $table_headerlen );</span>
<a name="l2888"><span class="linenum">2888</span></a>  <span class="comment">    $table_headerlen = array_sum( $table_headerlen[0] ) +</span>
<a name="l2889"><span class="linenum">2889</span></a>  <span class="comment">                                    strlen( preg_replace( '#[^ \|]+#', '',</span>
<a name="l2890"><span class="linenum">2890</span></a>  <span class="comment">                                                $printf_format ) ) - 2;</span>
<a name="l2891"><span class="linenum">2891</span></a>  <span class="comment">    */</span>
<a name="l2892"><span class="linenum">2892</span></a>  
<a name="l2893"><span class="linenum">2893</span></a>      <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('ReqHostPathQuery')" href="../../../_variables/ReqHostPathQuery.html">$ReqHostPathQuery</a> = <a class="var it743" onMouseOver="hilite(743)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>.( empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING'] ) ? '' : '?'.<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING'] );
<a name="l2894"><span class="linenum">2894</span></a>  
<a name="l2895"><span class="linenum">2895</span></a>      echo &quot;\n\n\n&quot;;
<a name="l2896"><span class="linenum">2896</span></a>      echo ( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? '*** Debug info ***'.&quot;\n\n&quot; : '&lt;div class=&quot;debug&quot; id=&quot;debug_info&quot;&gt;&lt;h2&gt;Debug info&lt;/h2&gt;' );
<a name="l2897"><span class="linenum">2897</span></a>  
<a name="l2898"><span class="linenum">2898</span></a>      if( !<a class="var it6993" onMouseOver="hilite(6993)" onMouseOut="lolite()" onClick="logVariable('obhandler_debug')" href="../../../_variables/obhandler_debug.html">$obhandler_debug</a> )
<a name="l2899"><span class="linenum">2899</span></a>      { // don't display changing items when we want to test obhandler
<a name="l2900"><span class="linenum">2900</span></a>  
<a name="l2901"><span class="linenum">2901</span></a>  <span class="comment">        // ---------------------------</span>
<a name="l2902"><span class="linenum">2902</span></a>  
<a name="l2903"><span class="linenum">2903</span></a>          echo '&lt;div class=&quot;log_container&quot;&gt;&lt;div&gt;';
<a name="l2904"><span class="linenum">2904</span></a>  
<a name="l2905"><span class="linenum">2905</span></a>          echo 'HTTP Response code: '.<a class="var it3261" onMouseOver="hilite(3261)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../../_variables/http_response_code.html">$http_response_code</a>;
<a name="l2906"><span class="linenum">2906</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;br /&gt;';
<a name="l2907"><span class="linenum">2907</span></a>  
<a name="l2908"><span class="linenum">2908</span></a>          echo '<a class="var it3257" onMouseOver="hilite(3257)" onMouseOut="lolite()" onClick="logVariable('content_type_header')" href="../../../_variables/content_type_header.html">$content_type_header</a>: '.<a class="var it3257" onMouseOver="hilite(3257)" onMouseOut="lolite()" onClick="logVariable('content_type_header')" href="../../../_variables/content_type_header.html">$content_type_header</a>;
<a name="l2909"><span class="linenum">2909</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;br /&gt;';
<a name="l2910"><span class="linenum">2910</span></a>  
<a name="l2911"><span class="linenum">2911</span></a>          echo '<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>: '.<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>.' -- detail: '.<a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../../_variables/disp_detail.html">$disp_detail</a>;
<a name="l2912"><span class="linenum">2912</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;br /&gt;';
<a name="l2913"><span class="linenum">2913</span></a>  
<a name="l2914"><span class="linenum">2914</span></a>          echo '<a class="var it544" onMouseOver="hilite(544)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../../_variables/robots_index.html">$robots_index</a>: '.<a class="var it544" onMouseOver="hilite(544)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../../_variables/robots_index.html">$robots_index</a>;
<a name="l2915"><span class="linenum">2915</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;br /&gt;';
<a name="l2916"><span class="linenum">2916</span></a>  
<a name="l2917"><span class="linenum">2917</span></a>          echo '<a class="var it3273" onMouseOver="hilite(3273)" onMouseOut="lolite()" onClick="logVariable('robots_follow')" href="../../../_variables/robots_follow.html">$robots_follow</a>: '.<a class="var it3273" onMouseOver="hilite(3273)" onMouseOut="lolite()" onClick="logVariable('robots_follow')" href="../../../_variables/robots_follow.html">$robots_follow</a>;
<a name="l2918"><span class="linenum">2918</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;br /&gt;';
<a name="l2919"><span class="linenum">2919</span></a>  
<a name="l2920"><span class="linenum">2920</span></a>          echo '&lt;/div&gt;&lt;/div&gt;';
<a name="l2921"><span class="linenum">2921</span></a>  
<a name="l2922"><span class="linenum">2922</span></a>  <span class="comment">        // ================================== DB Summary ================================</span>
<a name="l2923"><span class="linenum">2923</span></a>          if( isset(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>) )
<a name="l2924"><span class="linenum">2924</span></a>          {
<a name="l2925"><span class="linenum">2925</span></a>              echo '&lt;div class=&quot;log_container&quot;&gt;&lt;div&gt;';
<a name="l2926"><span class="linenum">2926</span></a>              echo <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('num_queries')" class="var it8966" onMouseOver="hilite(8966)" onMouseOut="lolite()" href="../../../_variables/num_queries.html">num_queries</a>.' SQL queries executed in '.<a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_duration')" href="../../../_functions/get_duration.html" onMouseOver="funcPopup(event,'get_duration')">get_duration</a>( 'SQL QUERIES' ).&quot; seconds\n&quot;;
<a name="l2927"><span class="linenum">2927</span></a>              if( ! <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l2928"><span class="linenum">2928</span></a>              {
<a name="l2929"><span class="linenum">2929</span></a>                  echo ' &amp;nbsp; &lt;a href=&quot;'.<a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('ReqHostPathQuery')" href="../../../_variables/ReqHostPathQuery.html">$ReqHostPathQuery</a>.'#evo_debug_queries&quot;&gt;scroll down to details&lt;/a&gt;&lt;p&gt;';
<a name="l2930"><span class="linenum">2930</span></a>              }
<a name="l2931"><span class="linenum">2931</span></a>              echo '&lt;/div&gt;&lt;/div&gt;';
<a name="l2932"><span class="linenum">2932</span></a>          }
<a name="l2933"><span class="linenum">2933</span></a>  
<a name="l2934"><span class="linenum">2934</span></a>  <span class="comment">        // ========================== Timer table ================================</span>
<a name="l2935"><span class="linenum">2935</span></a>          <a class="var it7008" onMouseOver="hilite(7008)" onMouseOut="lolite()" onClick="logVariable('time_page')" href="../../../_variables/time_page.html">$time_page</a> = <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_duration')" href="../../../_functions/get_duration.html" onMouseOver="funcPopup(event,'get_duration')">get_duration</a>( 'total' );
<a name="l2936"><span class="linenum">2936</span></a>          <a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('timer_rows')" href="../../../_variables/timer_rows.html">$timer_rows</a> = array();
<a name="l2937"><span class="linenum">2937</span></a>          foreach( <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_categories')" href="../../../_functions/get_categories.html" onMouseOver="funcPopup(event,'get_categories')">get_categories</a>() as <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> )
<a name="l2938"><span class="linenum">2938</span></a>          {
<a name="l2939"><span class="linenum">2939</span></a>              if( <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> == 'sql_query' )
<a name="l2940"><span class="linenum">2940</span></a>              {
<a name="l2941"><span class="linenum">2941</span></a>                  continue;
<a name="l2942"><span class="linenum">2942</span></a>              }
<a name="l2943"><span class="linenum">2943</span></a>              <a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('timer_rows')" href="../../../_variables/timer_rows.html">$timer_rows</a>[ <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> ] = <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_duration')" href="../../../_functions/get_duration.html" onMouseOver="funcPopup(event,'get_duration')">get_duration</a>( <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> );
<a name="l2944"><span class="linenum">2944</span></a>          }
<a name="l2945"><span class="linenum">2945</span></a>  <span class="comment">        // Don't sort to see orginal order of creation</span>
<a name="l2946"><span class="linenum">2946</span></a>  <span class="comment">        // arsort( $timer_rows );</span>
<a name="l2947"><span class="linenum">2947</span></a>  <span class="comment">        // ksort( $timer_rows );</span>
<a name="l2948"><span class="linenum">2948</span></a>  
<a name="l2949"><span class="linenum">2949</span></a>  <span class="comment">        // Remove &quot;total&quot;, it will get output as the last one:</span>
<a name="l2950"><span class="linenum">2950</span></a>          <a class="var it7010" onMouseOver="hilite(7010)" onMouseOut="lolite()" onClick="logVariable('total_time')" href="../../../_variables/total_time.html">$total_time</a> = <a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('timer_rows')" href="../../../_variables/timer_rows.html">$timer_rows</a>['total'];
<a name="l2951"><span class="linenum">2951</span></a>          unset(<a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('timer_rows')" href="../../../_variables/timer_rows.html">$timer_rows</a>['total']);
<a name="l2952"><span class="linenum">2952</span></a>  
<a name="l2953"><span class="linenum">2953</span></a>          <a class="var it7011" onMouseOver="hilite(7011)" onMouseOut="lolite()" onClick="logVariable('percent_total')" href="../../../_variables/percent_total.html">$percent_total</a> = <a class="var it7008" onMouseOver="hilite(7008)" onMouseOut="lolite()" onClick="logVariable('time_page')" href="../../../_variables/time_page.html">$time_page</a> &gt; 0 ? <a class="phpfunction" onClick="logFunction('number_format')" href="../../../_functions/number_format.html" onMouseOver="phpfuncPopup(event,'number_format')">number_format</a>( 100/<a class="var it7008" onMouseOver="hilite(7008)" onMouseOut="lolite()" onClick="logVariable('time_page')" href="../../../_variables/time_page.html">$time_page</a> * <a class="var it7010" onMouseOver="hilite(7010)" onMouseOut="lolite()" onClick="logVariable('total_time')" href="../../../_variables/total_time.html">$total_time</a>, 2 ) : '0';
<a name="l2954"><span class="linenum">2954</span></a>  
<a name="l2955"><span class="linenum">2955</span></a>          if( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l2956"><span class="linenum">2956</span></a>          {
<a name="l2957"><span class="linenum">2957</span></a>              echo '== Timers =='.&quot;\n\n&quot;;
<a name="l2958"><span class="linenum">2958</span></a>              echo '+'.<a class="phpfunction" onClick="logFunction('str_repeat')" href="../../../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>( '-', <a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('table_headerlen')" href="../../../_variables/table_headerlen.html">$table_headerlen</a> ).'+'.&quot;\n&quot;;
<a name="l2959"><span class="linenum">2959</span></a>              printf( <a class="var it7005" onMouseOver="hilite(7005)" onMouseOut="lolite()" onClick="logVariable('printf_format')" href="../../../_variables/printf_format.html">$printf_format</a>.&quot;\n&quot;, 'Category', 'Time', '%', 'Count' );
<a name="l2960"><span class="linenum">2960</span></a>              echo '+'.<a class="phpfunction" onClick="logFunction('str_repeat')" href="../../../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>( '-', <a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('table_headerlen')" href="../../../_variables/table_headerlen.html">$table_headerlen</a> ).'+'.&quot;\n&quot;;
<a name="l2961"><span class="linenum">2961</span></a>          }
<a name="l2962"><span class="linenum">2962</span></a>          else
<a name="l2963"><span class="linenum">2963</span></a>          {
<a name="l2964"><span class="linenum">2964</span></a>              echo '&lt;table class=&quot;debug_timer&quot;&gt;&lt;thead&gt;'
<a name="l2965"><span class="linenum">2965</span></a>                  .'&lt;tr&gt;&lt;td colspan=&quot;4&quot; class=&quot;center&quot;&gt;Timers&lt;/td&gt;&lt;/tr&gt;' // dh&gt; TODO: should be TH. Workaround so that tablesorter does not pick it up. Feedback from author requested.
<a name="l2966"><span class="linenum">2966</span></a>                  .'&lt;tr&gt;&lt;th&gt;Category&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&lt;th&gt;%&lt;/th&gt;&lt;th&gt;Count&lt;/th&gt;&lt;/tr&gt;'
<a name="l2967"><span class="linenum">2967</span></a>                  .'&lt;/thead&gt;';
<a name="l2968"><span class="linenum">2968</span></a>  
<a name="l2969"><span class="linenum">2969</span></a>  <span class="comment">            // Output &quot;total&quot;:</span>
<a name="l2970"><span class="linenum">2970</span></a>              echo &quot;\n&lt;tfoot&gt;&lt;tr&gt;&quot;
<a name="l2971"><span class="linenum">2971</span></a>                  .'&lt;td&gt;total&lt;/td&gt;'
<a name="l2972"><span class="linenum">2972</span></a>                  .'&lt;td class=&quot;right red&quot;&gt;'.<a class="var it7010" onMouseOver="hilite(7010)" onMouseOut="lolite()" onClick="logVariable('total_time')" href="../../../_variables/total_time.html">$total_time</a>.'&lt;/td&gt;'
<a name="l2973"><span class="linenum">2973</span></a>                  .'&lt;td class=&quot;right&quot;&gt;'.<a class="var it7011" onMouseOver="hilite(7011)" onMouseOut="lolite()" onClick="logVariable('percent_total')" href="../../../_variables/percent_total.html">$percent_total</a>.'%&lt;/td&gt;'
<a name="l2974"><span class="linenum">2974</span></a>                  .'&lt;td class=&quot;right&quot;&gt;'.<a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_count')" href="../../../_functions/get_count.html" onMouseOver="funcPopup(event,'get_count')">get_count</a>('total').'&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;';
<a name="l2975"><span class="linenum">2975</span></a>  
<a name="l2976"><span class="linenum">2976</span></a>              echo '&lt;tbody&gt;';
<a name="l2977"><span class="linenum">2977</span></a>          }
<a name="l2978"><span class="linenum">2978</span></a>  
<a name="l2979"><span class="linenum">2979</span></a>          <a class="var it7012" onMouseOver="hilite(7012)" onMouseOut="lolite()" onClick="logVariable('table_rows_collapse')" href="../../../_variables/table_rows_collapse.html">$table_rows_collapse</a> = array();
<a name="l2980"><span class="linenum">2980</span></a>          foreach( <a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('timer_rows')" href="../../../_variables/timer_rows.html">$timer_rows</a> as <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> =&gt; <a class="var it7013" onMouseOver="hilite(7013)" onMouseOut="lolite()" onClick="logVariable('l_time')" href="../../../_variables/l_time.html">$l_time</a> )
<a name="l2981"><span class="linenum">2981</span></a>          {
<a name="l2982"><span class="linenum">2982</span></a>              <a class="var it7014" onMouseOver="hilite(7014)" onMouseOut="lolite()" onClick="logVariable('percent_l_cat')" href="../../../_variables/percent_l_cat.html">$percent_l_cat</a> = <a class="var it7008" onMouseOver="hilite(7008)" onMouseOut="lolite()" onClick="logVariable('time_page')" href="../../../_variables/time_page.html">$time_page</a> &gt; 0 ? <a class="phpfunction" onClick="logFunction('number_format')" href="../../../_functions/number_format.html" onMouseOver="phpfuncPopup(event,'number_format')">number_format</a>( 100/<a class="var it7008" onMouseOver="hilite(7008)" onMouseOut="lolite()" onClick="logVariable('time_page')" href="../../../_variables/time_page.html">$time_page</a> * <a class="var it7013" onMouseOver="hilite(7013)" onMouseOut="lolite()" onClick="logVariable('l_time')" href="../../../_variables/l_time.html">$l_time</a>, 2 ) : '0';
<a name="l2983"><span class="linenum">2983</span></a>  
<a name="l2984"><span class="linenum">2984</span></a>              if( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l2985"><span class="linenum">2985</span></a>              {
<a name="l2986"><span class="linenum">2986</span></a>                  <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a> = sprintf( <a class="var it7005" onMouseOver="hilite(7005)" onMouseOut="lolite()" onClick="logVariable('printf_format')" href="../../../_variables/printf_format.html">$printf_format</a>, <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a>, <a class="var it7013" onMouseOver="hilite(7013)" onMouseOut="lolite()" onClick="logVariable('l_time')" href="../../../_variables/l_time.html">$l_time</a>, <a class="var it7014" onMouseOver="hilite(7014)" onMouseOut="lolite()" onClick="logVariable('percent_l_cat')" href="../../../_variables/percent_l_cat.html">$percent_l_cat</a>.'%', <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_count')" href="../../../_functions/get_count.html" onMouseOver="funcPopup(event,'get_count')">get_count</a>( <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> ) );
<a name="l2987"><span class="linenum">2987</span></a>              }
<a name="l2988"><span class="linenum">2988</span></a>              else
<a name="l2989"><span class="linenum">2989</span></a>              {
<a name="l2990"><span class="linenum">2990</span></a>                  <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a> = &quot;\n&lt;tr&gt;&quot;
<a name="l2991"><span class="linenum">2991</span></a>                      .'&lt;td&gt;'.<a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a>.'&lt;/td&gt;'
<a name="l2992"><span class="linenum">2992</span></a>                      .'&lt;td class=&quot;right&quot;&gt;'.<a class="var it7013" onMouseOver="hilite(7013)" onMouseOut="lolite()" onClick="logVariable('l_time')" href="../../../_variables/l_time.html">$l_time</a>.'&lt;/td&gt;'
<a name="l2993"><span class="linenum">2993</span></a>                      .'&lt;td class=&quot;right&quot;&gt;'.<a class="var it7014" onMouseOver="hilite(7014)" onMouseOut="lolite()" onClick="logVariable('percent_l_cat')" href="../../../_variables/percent_l_cat.html">$percent_l_cat</a>.'%&lt;/td&gt;'
<a name="l2994"><span class="linenum">2994</span></a>                      .'&lt;td class=&quot;right&quot;&gt;'.<a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_count')" href="../../../_functions/get_count.html" onMouseOver="funcPopup(event,'get_count')">get_count</a>( <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> ).'&lt;/td&gt;&lt;/tr&gt;';
<a name="l2995"><span class="linenum">2995</span></a>              }
<a name="l2996"><span class="linenum">2996</span></a>  
<a name="l2997"><span class="linenum">2997</span></a>  <span class="comment">            // Maybe ignore this row later, but not for clean display.</span>
<a name="l2998"><span class="linenum">2998</span></a>              if( ! <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> &amp;&amp; ( <a class="var it7014" onMouseOver="hilite(7014)" onMouseOut="lolite()" onClick="logVariable('percent_l_cat')" href="../../../_variables/percent_l_cat.html">$percent_l_cat</a> &lt; 1  ) )
<a name="l2999"><span class="linenum">2999</span></a>              {    // Hide everything that tool less tahn 5% of the time
<a name="l3000"><span class="linenum">3000</span></a>                  <a class="var it7012" onMouseOver="hilite(7012)" onMouseOut="lolite()" onClick="logVariable('table_rows_collapse')" href="../../../_variables/table_rows_collapse.html">$table_rows_collapse</a>[] = <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>;
<a name="l3001"><span class="linenum">3001</span></a>              }
<a name="l3002"><span class="linenum">3002</span></a>              else
<a name="l3003"><span class="linenum">3003</span></a>              {
<a name="l3004"><span class="linenum">3004</span></a>                  echo <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>.&quot;\n&quot;;
<a name="l3005"><span class="linenum">3005</span></a>              }
<a name="l3006"><span class="linenum">3006</span></a>          }
<a name="l3007"><span class="linenum">3007</span></a>          <a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('count_collapse')" href="../../../_variables/count_collapse.html">$count_collapse</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it7012" onMouseOver="hilite(7012)" onMouseOut="lolite()" onClick="logVariable('table_rows_collapse')" href="../../../_variables/table_rows_collapse.html">$table_rows_collapse</a>);
<a name="l3008"><span class="linenum">3008</span></a>  <span class="comment">        // Collapse ignored rows, allowing to expand them with Javascript:</span>
<a name="l3009"><span class="linenum">3009</span></a>          if( <a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('count_collapse')" href="../../../_variables/count_collapse.html">$count_collapse</a> &gt; 5 )
<a name="l3010"><span class="linenum">3010</span></a>          {
<a name="l3011"><span class="linenum">3011</span></a>              echo '&lt;tr&gt;&lt;td colspan=&quot;4&quot; class=&quot;center&quot; id=&quot;evo-debuglog-timer-long-header&quot;&gt;';
<a name="l3012"><span class="linenum">3012</span></a>              echo '&lt;a href=&quot;&quot; onclick=&quot;var e = document.getElementById(\'evo-debuglog-timer-long\'); e.style.display = (e.style.display == \'none\' ? \'\' : \'none\'); return false;&quot;&gt;+ '.<a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('count_collapse')" href="../../../_variables/count_collapse.html">$count_collapse</a>.' queries &amp;lt; 1%&lt;/a&gt; &lt;/td&gt;&lt;/tr&gt;';
<a name="l3013"><span class="linenum">3013</span></a>              echo '&lt;/tbody&gt;';
<a name="l3014"><span class="linenum">3014</span></a>              echo '&lt;tbody id=&quot;evo-debuglog-timer-long&quot; style=&quot;display:none;&quot;&gt;';
<a name="l3015"><span class="linenum">3015</span></a>          }
<a name="l3016"><span class="linenum">3016</span></a>          echo <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( &quot;\n&quot;, <a class="var it7012" onMouseOver="hilite(7012)" onMouseOut="lolite()" onClick="logVariable('table_rows_collapse')" href="../../../_variables/table_rows_collapse.html">$table_rows_collapse</a> ).&quot;\n&quot;;
<a name="l3017"><span class="linenum">3017</span></a>  
<a name="l3018"><span class="linenum">3018</span></a>          if ( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l3019"><span class="linenum">3019</span></a>          { // &quot;total&quot; (done in tfoot for html above)
<a name="l3020"><span class="linenum">3020</span></a>              echo sprintf( <a class="var it7005" onMouseOver="hilite(7005)" onMouseOut="lolite()" onClick="logVariable('printf_format')" href="../../../_variables/printf_format.html">$printf_format</a>, 'total', <a class="var it7010" onMouseOver="hilite(7010)" onMouseOut="lolite()" onClick="logVariable('total_time')" href="../../../_variables/total_time.html">$total_time</a>, <a class="var it7011" onMouseOver="hilite(7011)" onMouseOut="lolite()" onClick="logVariable('percent_total')" href="../../../_variables/percent_total.html">$percent_total</a>.'%', <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_count')" href="../../../_functions/get_count.html" onMouseOver="funcPopup(event,'get_count')">get_count</a>('total') );
<a name="l3021"><span class="linenum">3021</span></a>              echo '+'.<a class="phpfunction" onClick="logFunction('str_repeat')" href="../../../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>( '-', <a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('table_headerlen')" href="../../../_variables/table_headerlen.html">$table_headerlen</a> ).'+'.&quot;\n\n&quot;;
<a name="l3022"><span class="linenum">3022</span></a>          }
<a name="l3023"><span class="linenum">3023</span></a>          else
<a name="l3024"><span class="linenum">3024</span></a>          {
<a name="l3025"><span class="linenum">3025</span></a>              echo &quot;\n&lt;/tbody&gt;&lt;/table&gt;&quot;;
<a name="l3026"><span class="linenum">3026</span></a>  
<a name="l3027"><span class="linenum">3027</span></a>  <span class="comment">            // add jquery.tablesorter to the &quot;Debug info&quot; table.</span>
<a name="l3028"><span class="linenum">3028</span></a>              global <a class="var it3313" onMouseOver="hilite(3313)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../../_variables/rsc_uri.html">$rsc_uri</a>;
<a name="l3029"><span class="linenum">3029</span></a>              echo '
<a name="l3030"><span class="linenum">3030</span></a>              &lt;script type=&quot;text/javascript&quot; src=&quot;'.<a class="var it3313" onMouseOver="hilite(3313)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../../_variables/rsc_uri.html">$rsc_uri</a>.'js/jquery/jquery.tablesorter.min.js&quot;&gt;&lt;/script&gt;
<a name="l3031"><span class="linenum">3031</span></a>              &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l3032"><span class="linenum">3032</span></a>              (function($){
<a name="l3033"><span class="linenum">3033</span></a>                  var clicked_once;
<a name="l3034"><span class="linenum">3034</span></a>                  jQuery(&quot;table.debug_timer th&quot;).click( function(event) {
<a name="l3035"><span class="linenum">3035</span></a>                      if( clicked_once ) return; else clicked_once = true;
<a name="l3036"><span class="linenum">3036</span></a>                      jQuery(&quot;#evo-debuglog-timer-long tr&quot;).appendTo(jQuery(&quot;table.debug_timer tbody&quot;)[0]);
<a name="l3037"><span class="linenum">3037</span></a>                      jQuery(&quot;#evo-debuglog-timer-long-header&quot;).<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l3038"><span class="linenum">3038</span></a>  <span class="comment">                    // click for tablesorter:</span>
<a name="l3039"><span class="linenum">3039</span></a>                      jQuery(&quot;table.debug_timer&quot;).tablesorter();
<a name="l3040"><span class="linenum">3040</span></a>                      jQuery(event.currentTarget).click();
<a name="l3041"><span class="linenum">3041</span></a>                  });
<a name="l3042"><span class="linenum">3042</span></a>              })(jQuery);
<a name="l3043"><span class="linenum">3043</span></a>              &lt;/script&gt;';
<a name="l3044"><span class="linenum">3044</span></a>          }
<a name="l3045"><span class="linenum">3045</span></a>  
<a name="l3046"><span class="linenum">3046</span></a>  
<a name="l3047"><span class="linenum">3047</span></a>  <span class="comment">        // ================================ Opcode caching ================================</span>
<a name="l3048"><span class="linenum">3048</span></a>          echo '&lt;div class=&quot;log_container&quot;&gt;&lt;div&gt;';
<a name="l3049"><span class="linenum">3049</span></a>          echo 'Opcode cache: '.<a class="function" onClick="logFunction('get_active_opcode_cache')" href="../../../_functions/get_active_opcode_cache.html" onMouseOver="funcPopup(event,'get_active_opcode_cache')">get_active_opcode_cache</a>();
<a name="l3050"><span class="linenum">3050</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;p&gt;';
<a name="l3051"><span class="linenum">3051</span></a>          echo '&lt;/div&gt;&lt;/div&gt;';
<a name="l3052"><span class="linenum">3052</span></a>  
<a name="l3053"><span class="linenum">3053</span></a>  <span class="comment">        // ================================ Memory Usage ================================</span>
<a name="l3054"><span class="linenum">3054</span></a>          echo '&lt;div class=&quot;log_container&quot;&gt;&lt;div&gt;';
<a name="l3055"><span class="linenum">3055</span></a>  
<a name="l3056"><span class="linenum">3056</span></a>          foreach( array( // note: 8MB is default for memory_limit and is reported as 8388608 bytes
<a name="l3057"><span class="linenum">3057</span></a>              'memory_get_usage' =&gt; array( 'display' =&gt; 'Memory usage', 'high' =&gt; 8000000 ),
<a name="l3058"><span class="linenum">3058</span></a>              'memory_get_peak_usage' <span class="comment">/* PHP 5.2 */</span> =&gt; array( 'display' =&gt; 'Memory peak usage', 'high' =&gt; 8000000 ) ) as <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('l_func')" href="../../../_variables/l_func.html">$l_func</a> =&gt; <a class="var it7017" onMouseOver="hilite(7017)" onMouseOut="lolite()" onClick="logVariable('l_var')" href="../../../_variables/l_var.html">$l_var</a> )
<a name="l3059"><span class="linenum">3059</span></a>          {
<a name="l3060"><span class="linenum">3060</span></a>              if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('l_func')" href="../../../_variables/l_func.html">$l_func</a> ) )
<a name="l3061"><span class="linenum">3061</span></a>              {
<a name="l3062"><span class="linenum">3062</span></a>                  <a class="var it7018" onMouseOver="hilite(7018)" onMouseOut="lolite()" onClick="logVariable('_usage')" href="../../../_variables/_usage.html">$_usage</a> = <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('l_func')" href="../../../_variables/l_func.html">$l_func</a>();
<a name="l3063"><span class="linenum">3063</span></a>  
<a name="l3064"><span class="linenum">3064</span></a>                  if( <a class="var it7018" onMouseOver="hilite(7018)" onMouseOut="lolite()" onClick="logVariable('_usage')" href="../../../_variables/_usage.html">$_usage</a> &gt; <a class="var it7017" onMouseOver="hilite(7017)" onMouseOut="lolite()" onClick="logVariable('l_var')" href="../../../_variables/l_var.html">$l_var</a>['high'] )
<a name="l3065"><span class="linenum">3065</span></a>                  {
<a name="l3066"><span class="linenum">3066</span></a>                      echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? '[!!] ' : '&lt;span style=&quot;color:red; font-weight:bold&quot;&gt;';
<a name="l3067"><span class="linenum">3067</span></a>                  }
<a name="l3068"><span class="linenum">3068</span></a>  
<a name="l3069"><span class="linenum">3069</span></a>                  echo <a class="var it7017" onMouseOver="hilite(7017)" onMouseOut="lolite()" onClick="logVariable('l_var')" href="../../../_variables/l_var.html">$l_var</a>['display'].': '.<a class="function" onClick="logFunction('bytesreadable')" href="../../../_functions/bytesreadable.html" onMouseOver="funcPopup(event,'bytesreadable')">bytesreadable</a>( <a class="var it7018" onMouseOver="hilite(7018)" onMouseOut="lolite()" onClick="logVariable('_usage')" href="../../../_variables/_usage.html">$_usage</a>, ! <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> );
<a name="l3070"><span class="linenum">3070</span></a>  
<a name="l3071"><span class="linenum">3071</span></a>                  if( ! <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> &amp;&amp; <a class="var it7018" onMouseOver="hilite(7018)" onMouseOut="lolite()" onClick="logVariable('_usage')" href="../../../_variables/_usage.html">$_usage</a> &gt; <a class="var it7017" onMouseOver="hilite(7017)" onMouseOut="lolite()" onClick="logVariable('l_var')" href="../../../_variables/l_var.html">$l_var</a>['high'] )
<a name="l3072"><span class="linenum">3072</span></a>                  {
<a name="l3073"><span class="linenum">3073</span></a>                      echo '&lt;/span&gt;';
<a name="l3074"><span class="linenum">3074</span></a>                  }
<a name="l3075"><span class="linenum">3075</span></a>                  echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;br /&gt;';
<a name="l3076"><span class="linenum">3076</span></a>              }
<a name="l3077"><span class="linenum">3077</span></a>          }
<a name="l3078"><span class="linenum">3078</span></a>  
<a name="l3079"><span class="linenum">3079</span></a>          echo 'Len of serialized <a class="var it6994" onMouseOver="hilite(6994)" onMouseOut="lolite()" onClick="logVariable('cache_imgsize')" href="../../../_variables/cache_imgsize.html">$cache_imgsize</a>: '.strlen(<a class="phpfunction" onClick="logFunction('serialize')" href="../../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it6994" onMouseOver="hilite(6994)" onMouseOut="lolite()" onClick="logVariable('cache_imgsize')" href="../../../_variables/cache_imgsize.html">$cache_imgsize</a>));
<a name="l3080"><span class="linenum">3080</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;br /&gt;';
<a name="l3081"><span class="linenum">3081</span></a>          echo 'Len of serialized <a class="var it5353" onMouseOver="hilite(5353)" onMouseOut="lolite()" onClick="logVariable('cache_File')" href="../../../_variables/cache_File.html">$cache_File</a>: '.strlen(<a class="phpfunction" onClick="logFunction('serialize')" href="../../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it5353" onMouseOver="hilite(5353)" onMouseOut="lolite()" onClick="logVariable('cache_File')" href="../../../_variables/cache_File.html">$cache_File</a>));
<a name="l3082"><span class="linenum">3082</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;br /&gt;';
<a name="l3083"><span class="linenum">3083</span></a>  
<a name="l3084"><span class="linenum">3084</span></a>          echo '&lt;/div&gt;&lt;/div&gt;';
<a name="l3085"><span class="linenum">3085</span></a>      }
<a name="l3086"><span class="linenum">3086</span></a>  
<a name="l3087"><span class="linenum">3087</span></a>  
<a name="l3088"><span class="linenum">3088</span></a>  <span class="comment">    // DEBUGLOG(s) FROM PREVIOUS SESSIONS, after REDIRECT(s) (with list of categories at top):</span>
<a name="l3089"><span class="linenum">3089</span></a>      if( isset(<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>) &amp;&amp; (<a class="var it3267" onMouseOver="hilite(3267)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a> = <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('Debuglogs')) &amp;&amp; ! empty(<a class="var it3267" onMouseOver="hilite(3267)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a>) )
<a name="l3090"><span class="linenum">3090</span></a>      {
<a name="l3091"><span class="linenum">3091</span></a>          <a class="var it7019" onMouseOver="hilite(7019)" onMouseOut="lolite()" onClick="logVariable('count_sess_Debuglogs')" href="../../../_variables/count_sess_Debuglogs.html">$count_sess_Debuglogs</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3267" onMouseOver="hilite(3267)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a>);
<a name="l3092"><span class="linenum">3092</span></a>          if( <a class="var it7019" onMouseOver="hilite(7019)" onMouseOut="lolite()" onClick="logVariable('count_sess_Debuglogs')" href="../../../_variables/count_sess_Debuglogs.html">$count_sess_Debuglogs</a> &gt; 1 )
<a name="l3093"><span class="linenum">3093</span></a>          { // Links to those Debuglogs:
<a name="l3094"><span class="linenum">3094</span></a>              if ( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l3095"><span class="linenum">3095</span></a>              {    // kind of useless, but anyway...
<a name="l3096"><span class="linenum">3096</span></a>                  echo &quot;\n&quot;.'There are '.<a class="var it7019" onMouseOver="hilite(7019)" onMouseOut="lolite()" onClick="logVariable('count_sess_Debuglogs')" href="../../../_variables/count_sess_Debuglogs.html">$count_sess_Debuglogs</a>.' Debuglogs from redirected pages.'.&quot;\n&quot;;
<a name="l3097"><span class="linenum">3097</span></a>              }
<a name="l3098"><span class="linenum">3098</span></a>              else
<a name="l3099"><span class="linenum">3099</span></a>              {
<a name="l3100"><span class="linenum">3100</span></a>                  echo '&lt;p&gt;There are '.<a class="var it7019" onMouseOver="hilite(7019)" onMouseOut="lolite()" onClick="logVariable('count_sess_Debuglogs')" href="../../../_variables/count_sess_Debuglogs.html">$count_sess_Debuglogs</a>.' Debuglogs from redirected pages: ';
<a name="l3101"><span class="linenum">3101</span></a>                  for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 1; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt;= <a class="var it7019" onMouseOver="hilite(7019)" onMouseOut="lolite()" onClick="logVariable('count_sess_Debuglogs')" href="../../../_variables/count_sess_Debuglogs.html">$count_sess_Debuglogs</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ )
<a name="l3102"><span class="linenum">3102</span></a>                  {
<a name="l3103"><span class="linenum">3103</span></a>                      echo '&lt;a href=&quot;'.<a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('ReqHostPathQuery')" href="../../../_variables/ReqHostPathQuery.html">$ReqHostPathQuery</a>.'#debug_sess_debuglog_'.<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>.'&quot;&gt;#'.<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>.'&lt;/a&gt; ';
<a name="l3104"><span class="linenum">3104</span></a>                  }
<a name="l3105"><span class="linenum">3105</span></a>                  echo '&lt;/p&gt;';
<a name="l3106"><span class="linenum">3106</span></a>              }
<a name="l3107"><span class="linenum">3107</span></a>          }
<a name="l3108"><span class="linenum">3108</span></a>  
<a name="l3109"><span class="linenum">3109</span></a>          foreach( <a class="var it3267" onMouseOver="hilite(3267)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a> as <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a> =&gt; <a class="var it7020" onMouseOver="hilite(7020)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglog')" href="../../../_variables/sess_Debuglog.html">$sess_Debuglog</a> )
<a name="l3110"><span class="linenum">3110</span></a>          {
<a name="l3111"><span class="linenum">3111</span></a>              <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('log_categories')" href="../../../_variables/log_categories.html">$log_categories</a> = array( 'error', 'note', 'all' ); <span class="comment">// Categories to output (in that order)</span>
<a name="l3112"><span class="linenum">3112</span></a>  
<a name="l3113"><span class="linenum">3113</span></a>              if( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l3114"><span class="linenum">3114</span></a>              {
<a name="l3115"><span class="linenum">3115</span></a>                  <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a> = &quot;\n&quot;.'== Debug messages from redirected page (#'.(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>+1).') =='.&quot;\n&quot;
<a name="l3116"><span class="linenum">3116</span></a>                                       .'See below for the Debuglog from the current request.'.&quot;\n&quot;;
<a name="l3117"><span class="linenum">3117</span></a>                  echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(
<a name="l3118"><span class="linenum">3118</span></a>                      <a class="var it7020" onMouseOver="hilite(7020)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglog')" href="../../../_variables/sess_Debuglog.html">$sess_Debuglog</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( array(
<a name="l3119"><span class="linenum">3119</span></a>                              'container' =&gt; array( 'string' =&gt; <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a>, 'template' =&gt; false ),
<a name="l3120"><span class="linenum">3120</span></a>                              'all' =&gt; array( 'string' =&gt; '= %s ='.&quot;\n\n&quot;, 'template' =&gt; false ) ),
<a name="l3121"><span class="linenum">3121</span></a>                          '', false, <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('log_categories')" href="../../../_variables/log_categories.html">$log_categories</a>, '', 'raw', false ),
<a name="l3122"><span class="linenum">3122</span></a>                      'raw' );
<a name="l3123"><span class="linenum">3123</span></a>              }
<a name="l3124"><span class="linenum">3124</span></a>              else
<a name="l3125"><span class="linenum">3125</span></a>              {
<a name="l3126"><span class="linenum">3126</span></a>                  <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a> = '&lt;h3 id=&quot;debug_sess_debuglog_'.(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>+1).'&quot; style=&quot;color:#f00;&quot;&gt;Debug messages from redirected page (#'.(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>+1).')&lt;/h3&gt;'
<a name="l3127"><span class="linenum">3127</span></a>  <span class="comment">                    // link to real Debuglog:</span>
<a name="l3128"><span class="linenum">3128</span></a>                      .'&lt;p&gt;&lt;a href=&quot;'.<a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('ReqHostPathQuery')" href="../../../_variables/ReqHostPathQuery.html">$ReqHostPathQuery</a>.'#debug_debuglog&quot;&gt;See below for the Debuglog from the current request.&lt;/a&gt;&lt;/p&gt;';
<a name="l3129"><span class="linenum">3129</span></a>                  <a class="var it7023" onMouseOver="hilite(7023)" onMouseOut="lolite()" onClick="logVariable('log_cats')" href="../../../_variables/log_cats.html">$log_cats</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7020" onMouseOver="hilite(7020)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglog')" href="../../../_variables/sess_Debuglog.html">$sess_Debuglog</a>-&gt;<a class="function" onClick="logFunction('get_messages')" href="../../../_functions/get_messages.html" onMouseOver="funcPopup(event,'get_messages')">get_messages</a>( <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('log_categories')" href="../../../_variables/log_categories.html">$log_categories</a> )); <span class="comment">// the real list (with all replaced and only existing ones)</span>
<a name="l3130"><span class="linenum">3130</span></a>                  <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('log_head_links')" href="../../../_variables/log_head_links.html">$log_head_links</a> = array();
<a name="l3131"><span class="linenum">3131</span></a>  
<a name="l3132"><span class="linenum">3132</span></a>                  foreach( <a class="var it7023" onMouseOver="hilite(7023)" onMouseOut="lolite()" onClick="logVariable('log_cats')" href="../../../_variables/log_cats.html">$log_cats</a> as <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> )
<a name="l3133"><span class="linenum">3133</span></a>                  {
<a name="l3134"><span class="linenum">3134</span></a>                      <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('log_head_links')" href="../../../_variables/log_head_links.html">$log_head_links</a>[] .= '&lt;a href=&quot;'.<a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('ReqHostPathQuery')" href="../../../_variables/ReqHostPathQuery.html">$ReqHostPathQuery</a>.'#debug_redir_'.(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>+1).'_info_cat_'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( ' ', '_', <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> ).'&quot;&gt;'.<a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a>.'&lt;/a&gt;';
<a name="l3135"><span class="linenum">3135</span></a>                  }
<a name="l3136"><span class="linenum">3136</span></a>                  <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a> .= <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' | ', <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('log_head_links')" href="../../../_variables/log_head_links.html">$log_head_links</a> );
<a name="l3137"><span class="linenum">3137</span></a>  
<a name="l3138"><span class="linenum">3138</span></a>                  echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(
<a name="l3139"><span class="linenum">3139</span></a>                      <a class="var it7020" onMouseOver="hilite(7020)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglog')" href="../../../_variables/sess_Debuglog.html">$sess_Debuglog</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( array(
<a name="l3140"><span class="linenum">3140</span></a>                              'container' =&gt; array( 'string' =&gt; <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a>, 'template' =&gt; false ),
<a name="l3141"><span class="linenum">3141</span></a>                              'all' =&gt; array( 'string' =&gt; '&lt;h4 id=&quot;debug_redir_'.(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>+1).'_info_cat_%s&quot;&gt;%s:&lt;/h4&gt;', 'template' =&gt; false ) ),
<a name="l3142"><span class="linenum">3142</span></a>                          '', false, <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('log_categories')" href="../../../_variables/log_categories.html">$log_categories</a> ),
<a name="l3143"><span class="linenum">3143</span></a>                      'htmlbody' );
<a name="l3144"><span class="linenum">3144</span></a>              }
<a name="l3145"><span class="linenum">3145</span></a>          }
<a name="l3146"><span class="linenum">3146</span></a>  
<a name="l3147"><span class="linenum">3147</span></a>  <span class="comment">        // Delete logs since they have been displayed...</span>
<a name="l3148"><span class="linenum">3148</span></a>  <span class="comment">        // EXCEPT if we are redirecting, because in this case we won't see these logs in a browser (only in request debug tools)</span>
<a name="l3149"><span class="linenum">3149</span></a>  <span class="comment">        // So in that case we want them to move over to the next page...</span>
<a name="l3150"><span class="linenum">3150</span></a>          if( <a class="var it3261" onMouseOver="hilite(3261)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../../_variables/http_response_code.html">$http_response_code</a> &lt; 300 || <a class="var it3261" onMouseOver="hilite(3261)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../../_variables/http_response_code.html">$http_response_code</a> &gt;= 400 )
<a name="l3151"><span class="linenum">3151</span></a>          {    // This is NOT a 3xx redirect, assume debuglogs have been seen &amp; delete them:
<a name="l3152"><span class="linenum">3152</span></a>              <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>( 'Debuglogs' );
<a name="l3153"><span class="linenum">3153</span></a>          }
<a name="l3154"><span class="linenum">3154</span></a>      }
<a name="l3155"><span class="linenum">3155</span></a>  
<a name="l3156"><span class="linenum">3156</span></a>  
<a name="l3157"><span class="linenum">3157</span></a>  <span class="comment">    // CURRENT DEBUGLOG (with list of categories at top):</span>
<a name="l3158"><span class="linenum">3158</span></a>      <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('log_categories')" href="../../../_variables/log_categories.html">$log_categories</a> = array( 'error', 'note', 'all' ); <span class="comment">// Categories to output (in that order)</span>
<a name="l3159"><span class="linenum">3159</span></a>      <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a> = <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? ( &quot;\n&quot;.'== Debug messages =='.&quot;\n&quot; ) : '&lt;h3 id=&quot;debug_debuglog&quot;&gt;Debug messages&lt;/h3&gt;';
<a name="l3160"><span class="linenum">3160</span></a>      if( ! empty(<a class="var it3267" onMouseOver="hilite(3267)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a>) )
<a name="l3161"><span class="linenum">3161</span></a>      { // link to first sess_Debuglog:
<a name="l3162"><span class="linenum">3162</span></a>          if ( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l3163"><span class="linenum">3163</span></a>          {
<a name="l3164"><span class="linenum">3164</span></a>              <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a> .= 'See above for the Debuglog(s) from before the redirect.'.&quot;\n&quot;;
<a name="l3165"><span class="linenum">3165</span></a>          }
<a name="l3166"><span class="linenum">3166</span></a>          else
<a name="l3167"><span class="linenum">3167</span></a>          {
<a name="l3168"><span class="linenum">3168</span></a>              <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a> .= '&lt;p&gt;&lt;a href=&quot;'.<a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('ReqHostPathQuery')" href="../../../_variables/ReqHostPathQuery.html">$ReqHostPathQuery</a>.'#debug_sess_debuglog_1&quot;&gt;See above for the Debuglog(s) from before the redirect.&lt;/a&gt;&lt;/p&gt;';
<a name="l3169"><span class="linenum">3169</span></a>          }
<a name="l3170"><span class="linenum">3170</span></a>      }
<a name="l3171"><span class="linenum">3171</span></a>  
<a name="l3172"><span class="linenum">3172</span></a>      if ( ! <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l3173"><span class="linenum">3173</span></a>      {
<a name="l3174"><span class="linenum">3174</span></a>          <a class="var it7023" onMouseOver="hilite(7023)" onMouseOut="lolite()" onClick="logVariable('log_cats')" href="../../../_variables/log_cats.html">$log_cats</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('get_messages')" href="../../../_functions/get_messages.html" onMouseOver="funcPopup(event,'get_messages')">get_messages</a>( <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('log_categories')" href="../../../_variables/log_categories.html">$log_categories</a> )); <span class="comment">// the real list (with all replaced and only existing ones)</span>
<a name="l3175"><span class="linenum">3175</span></a>          <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('log_head_links')" href="../../../_variables/log_head_links.html">$log_head_links</a> = array();
<a name="l3176"><span class="linenum">3176</span></a>          foreach( <a class="var it7023" onMouseOver="hilite(7023)" onMouseOut="lolite()" onClick="logVariable('log_cats')" href="../../../_variables/log_cats.html">$log_cats</a> as <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> )
<a name="l3177"><span class="linenum">3177</span></a>          {
<a name="l3178"><span class="linenum">3178</span></a>              <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('log_head_links')" href="../../../_variables/log_head_links.html">$log_head_links</a>[] .= '&lt;a href=&quot;'.<a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('ReqHostPathQuery')" href="../../../_variables/ReqHostPathQuery.html">$ReqHostPathQuery</a>.'#debug_info_cat_'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( ' ', '_', <a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a> ).'&quot;&gt;'.<a class="var it4272" onMouseOver="hilite(4272)" onMouseOut="lolite()" onClick="logVariable('l_cat')" href="../../../_variables/l_cat.html">$l_cat</a>.'&lt;/a&gt;';
<a name="l3179"><span class="linenum">3179</span></a>          }
<a name="l3180"><span class="linenum">3180</span></a>          <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a> .= <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' | ', <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('log_head_links')" href="../../../_variables/log_head_links.html">$log_head_links</a> );
<a name="l3181"><span class="linenum">3181</span></a>  
<a name="l3182"><span class="linenum">3182</span></a>          echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(
<a name="l3183"><span class="linenum">3183</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( array(
<a name="l3184"><span class="linenum">3184</span></a>                      'container' =&gt; array( 'string' =&gt; <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a>, 'template' =&gt; false ),
<a name="l3185"><span class="linenum">3185</span></a>                      'all' =&gt; array( 'string' =&gt; '&lt;h4 id=&quot;debug_info_cat_%s&quot;&gt;%s:&lt;/h4&gt;', 'template' =&gt; false ) ),
<a name="l3186"><span class="linenum">3186</span></a>                  '', false, <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('log_categories')" href="../../../_variables/log_categories.html">$log_categories</a> ),
<a name="l3187"><span class="linenum">3187</span></a>              'htmlbody' );
<a name="l3188"><span class="linenum">3188</span></a>  
<a name="l3189"><span class="linenum">3189</span></a>          echo '&lt;h3 id=&quot;evo_debug_queries&quot;&gt;DB&lt;/h3&gt;';
<a name="l3190"><span class="linenum">3190</span></a>      }
<a name="l3191"><span class="linenum">3191</span></a>      else
<a name="l3192"><span class="linenum">3192</span></a>      {
<a name="l3193"><span class="linenum">3193</span></a>          echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(
<a name="l3194"><span class="linenum">3194</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( array(
<a name="l3195"><span class="linenum">3195</span></a>                      'container' =&gt; array( 'string' =&gt; <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('log_container_head')" href="../../../_variables/log_container_head.html">$log_container_head</a>, 'template' =&gt; false ),
<a name="l3196"><span class="linenum">3196</span></a>                      'all' =&gt; array( 'string' =&gt; '= %s ='.&quot;\n\n&quot;, 'template' =&gt; false ) ),
<a name="l3197"><span class="linenum">3197</span></a>                  '', false, <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('log_categories')" href="../../../_variables/log_categories.html">$log_categories</a>, '', 'raw', false ),
<a name="l3198"><span class="linenum">3198</span></a>              'raw' );
<a name="l3199"><span class="linenum">3199</span></a>  
<a name="l3200"><span class="linenum">3200</span></a>          echo &quot;\n&quot;.'== DB =='.&quot;\n\n&quot;;
<a name="l3201"><span class="linenum">3201</span></a>      }
<a name="l3202"><span class="linenum">3202</span></a>  
<a name="l3203"><span class="linenum">3203</span></a>      if(<a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../_variables/db_config.html">$db_config</a>)
<a name="l3204"><span class="linenum">3204</span></a>      {
<a name="l3205"><span class="linenum">3205</span></a>          if ( ! <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l3206"><span class="linenum">3206</span></a>          {
<a name="l3207"><span class="linenum">3207</span></a>              echo '&lt;pre&gt;';
<a name="l3208"><span class="linenum">3208</span></a>          }
<a name="l3209"><span class="linenum">3209</span></a>  
<a name="l3210"><span class="linenum">3210</span></a>          echo 'Config DB Username: '.<a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../_variables/db_config.html">$db_config</a>['user'].&quot;\n&quot;.
<a name="l3211"><span class="linenum">3211</span></a>              'Config DB Database: '.<a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../_variables/db_config.html">$db_config</a>['name'].&quot;\n&quot;.
<a name="l3212"><span class="linenum">3212</span></a>               'Config DB Host: '.(isset(<a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../_variables/db_config.html">$db_config</a>['host']) ? <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../_variables/db_config.html">$db_config</a>['host'] : 'unset (localhost)').&quot;\n&quot;.
<a name="l3213"><span class="linenum">3213</span></a>               'Config DB tables prefix: '.<a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('tableprefix')" href="../../../_variables/tableprefix.html">$tableprefix</a>.&quot;\n&quot;.
<a name="l3214"><span class="linenum">3214</span></a>               'Config DB connection charset: '.<a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../_variables/db_config.html">$db_config</a>['connection_charset'].&quot;\n&quot;;
<a name="l3215"><span class="linenum">3215</span></a>  
<a name="l3216"><span class="linenum">3216</span></a>          echo <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '&lt;/pre&gt;';
<a name="l3217"><span class="linenum">3217</span></a>      }
<a name="l3218"><span class="linenum">3218</span></a>  
<a name="l3219"><span class="linenum">3219</span></a>      if( !isset(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>) )
<a name="l3220"><span class="linenum">3220</span></a>      {
<a name="l3221"><span class="linenum">3221</span></a>          echo 'No DB object.'.( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> ? &quot;\n&quot; : '' );
<a name="l3222"><span class="linenum">3222</span></a>      }
<a name="l3223"><span class="linenum">3223</span></a>      else
<a name="l3224"><span class="linenum">3224</span></a>      {
<a name="l3225"><span class="linenum">3225</span></a>          echo '&lt;pre&gt;Current DB charset: '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('connection_charset')" class="var it8966" onMouseOver="hilite(8966)" onMouseOut="lolite()" href="../../../_variables/connection_charset.html">connection_charset</a>.&quot;&lt;/pre&gt;\n&quot;;
<a name="l3226"><span class="linenum">3226</span></a>  
<a name="l3227"><span class="linenum">3227</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('dump_queries')" href="../../../_functions/dump_queries.html" onMouseOver="funcPopup(event,'dump_queries')">dump_queries</a>( ! <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> );
<a name="l3228"><span class="linenum">3228</span></a>      }
<a name="l3229"><span class="linenum">3229</span></a>  
<a name="l3230"><span class="linenum">3230</span></a>      if ( ! <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../../_variables/clean.html">$clean</a> )
<a name="l3231"><span class="linenum">3231</span></a>      {
<a name="l3232"><span class="linenum">3232</span></a>          echo '&lt;/div&gt;';
<a name="l3233"><span class="linenum">3233</span></a>      }
<a name="l3234"><span class="linenum">3234</span></a>  }
<a name="l3235"><span class="linenum">3235</span></a>  
<a name="l3236"><span class="linenum">3236</span></a>  
<a name="l3237"><span class="linenum">3237</span></a>  <span class="comment">/**</span>
<a name="l3238"><span class="linenum">3238</span></a>  <span class="comment"> * Check if the current request exceed the post max size limit.</span>
<a name="l3239"><span class="linenum">3239</span></a>  <span class="comment"> * If too much data was sent add an error message and call header redirect.</span>
<a name="l3240"><span class="linenum">3240</span></a>  <span class="comment"> */</span>
<a name="l3241"><span class="linenum">3241</span></a>  function <a class="function" onClick="logFunction('check_post_max_size_exceeded')" href="../../../_functions/check_post_max_size_exceeded.html" onMouseOver="funcPopup(event,'check_post_max_size_exceeded')">check_post_max_size_exceeded</a>()
<a name="l3242"><span class="linenum">3242</span></a>  {
<a name="l3243"><span class="linenum">3243</span></a>      global <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>;
<a name="l3244"><span class="linenum">3244</span></a>  
<a name="l3245"><span class="linenum">3245</span></a>      if( ( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REQUEST_METHOD'] == 'POST' ) &amp;&amp; empty( <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a> ) &amp;&amp; empty( <a class="var it3986" onMouseOver="hilite(3986)" onMouseOut="lolite()" onClick="logVariable('_FILES')" href="../../../_variables/_FILES.html">$_FILES</a> ) &amp;&amp; ( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['CONTENT_LENGTH'] &gt; 0 ) )
<a name="l3246"><span class="linenum">3246</span></a>      {
<a name="l3247"><span class="linenum">3247</span></a>  <span class="comment">        // Check post max size ini setting</span>
<a name="l3248"><span class="linenum">3248</span></a>          <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a> = <a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>( 'post_max_size' );
<a name="l3249"><span class="linenum">3249</span></a>  
<a name="l3250"><span class="linenum">3250</span></a>  <span class="comment">        // Convert post_max_size value to bytes</span>
<a name="l3251"><span class="linenum">3251</span></a>          switch ( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a>, -1 ) )
<a name="l3252"><span class="linenum">3252</span></a>          {
<a name="l3253"><span class="linenum">3253</span></a>              case 'G':
<a name="l3254"><span class="linenum">3254</span></a>                  <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a> = <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a> * 1024;
<a name="l3255"><span class="linenum">3255</span></a>              case 'M':
<a name="l3256"><span class="linenum">3256</span></a>                  <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a> = <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a> * 1024;
<a name="l3257"><span class="linenum">3257</span></a>              case 'K':
<a name="l3258"><span class="linenum">3258</span></a>                  <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a> = <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a> * 1024;
<a name="l3259"><span class="linenum">3259</span></a>          }
<a name="l3260"><span class="linenum">3260</span></a>  
<a name="l3261"><span class="linenum">3261</span></a>  <span class="comment">        // Add error message and redirect back to the referer url</span>
<a name="l3262"><span class="linenum">3262</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You have sent too much data (too many large files?) for the server to <a class="function" onClick="logFunction('process')" href="../../../_functions/process.html" onMouseOver="funcPopup(event,'process')">process</a> (%s sent / %s maximum). Please try again by sending less data/files at a time.'), <a class="function" onClick="logFunction('bytesreadable')" href="../../../_functions/bytesreadable.html" onMouseOver="funcPopup(event,'bytesreadable')">bytesreadable</a>( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['CONTENT_LENGTH'] ), <a class="function" onClick="logFunction('bytesreadable')" href="../../../_functions/bytesreadable.html" onMouseOver="funcPopup(event,'bytesreadable')">bytesreadable</a>( <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('post_max_size')" href="../../../_variables/post_max_size.html">$post_max_size</a> ) ) );
<a name="l3263"><span class="linenum">3263</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['HTTP_REFERER'] );
<a name="l3264"><span class="linenum">3264</span></a>          exit(0); <span class="comment">// Already exited here</span>
<a name="l3265"><span class="linenum">3265</span></a>      }
<a name="l3266"><span class="linenum">3266</span></a>  }
<a name="l3267"><span class="linenum">3267</span></a>  
<a name="l3268"><span class="linenum">3268</span></a>  
<a name="l3269"><span class="linenum">3269</span></a>  <span class="comment">/**</span>
<a name="l3270"><span class="linenum">3270</span></a>  <span class="comment"> * Prevent email header injection.</span>
<a name="l3271"><span class="linenum">3271</span></a>  <span class="comment"> */</span>
<a name="l3272"><span class="linenum">3272</span></a>  function <a class="function" onClick="logFunction('mail_sanitize_header_string')" href="../../../_functions/mail_sanitize_header_string.html" onMouseOver="funcPopup(event,'mail_sanitize_header_string')">mail_sanitize_header_string</a>( <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a>, <a class="var it7027" onMouseOver="hilite(7027)" onMouseOut="lolite()" onClick="logVariable('close_brace')" href="../../../_variables/close_brace.html">$close_brace</a> = false )
<a name="l3273"><span class="linenum">3273</span></a>  {
<a name="l3274"><span class="linenum">3274</span></a>  <span class="comment">    // Prevent injection! (remove everything after (and including) \n or \r)</span>
<a name="l3275"><span class="linenum">3275</span></a>      <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~(\r|\n).*$~s', '', <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a>) );
<a name="l3276"><span class="linenum">3276</span></a>  
<a name="l3277"><span class="linenum">3277</span></a>      if( <a class="var it7027" onMouseOver="hilite(7027)" onMouseOut="lolite()" onClick="logVariable('close_brace')" href="../../../_variables/close_brace.html">$close_brace</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a>, '&lt;' ) !== false &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a>, '&gt;' ) === false )
<a name="l3278"><span class="linenum">3278</span></a>      { // We have probably stripped the '&gt;' at the end!
<a name="l3279"><span class="linenum">3279</span></a>          <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> .= '&gt;';
<a name="l3280"><span class="linenum">3280</span></a>      }
<a name="l3281"><span class="linenum">3281</span></a>  
<a name="l3282"><span class="linenum">3282</span></a>      return <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a>;
<a name="l3283"><span class="linenum">3283</span></a>  }
<a name="l3284"><span class="linenum">3284</span></a>  
<a name="l3285"><span class="linenum">3285</span></a>  <span class="comment">/**</span>
<a name="l3286"><span class="linenum">3286</span></a>  <span class="comment"> * Encode to RFC 1342 &quot;Representation of Non-ASCII Text in Internet Message Headers&quot;</span>
<a name="l3287"><span class="linenum">3287</span></a>  <span class="comment"> *</span>
<a name="l3288"><span class="linenum">3288</span></a>  <span class="comment"> * @param string</span>
<a name="l3289"><span class="linenum">3289</span></a>  <span class="comment"> * @param string 'Q' for Quoted printable, 'B' for base64</span>
<a name="l3290"><span class="linenum">3290</span></a>  <span class="comment"> */</span>
<a name="l3291"><span class="linenum">3291</span></a>  function <a class="function" onClick="logFunction('mail_encode_header_string')" href="../../../_functions/mail_encode_header_string.html" onMouseOver="funcPopup(event,'mail_encode_header_string')">mail_encode_header_string</a>( <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> = 'Q' )
<a name="l3292"><span class="linenum">3292</span></a>  {
<a name="l3293"><span class="linenum">3293</span></a>      global <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l3294"><span class="linenum">3294</span></a>  
<a name="l3295"><span class="linenum">3295</span></a>      <span class="comment">/* mbstring way  (did not work for Alex RU)</span>
<a name="l3296"><span class="linenum">3296</span></a>  <span class="comment">    if( function_exists('mb_encode_mimeheader') )</span>
<a name="l3297"><span class="linenum">3297</span></a>  <span class="comment">    { // encode subject</span>
<a name="l3298"><span class="linenum">3298</span></a>  <span class="comment">        $orig = mb_internal_encoding();</span>
<a name="l3299"><span class="linenum">3299</span></a>  <span class="comment">        mb_internal_encoding('utf-8');</span>
<a name="l3300"><span class="linenum">3300</span></a>  <span class="comment">        $r = mb_encode_mimeheader( $header_str, 'utf-8', $mode );</span>
<a name="l3301"><span class="linenum">3301</span></a>  <span class="comment">        mb_internal_encoding($orig);</span>
<a name="l3302"><span class="linenum">3302</span></a>  <span class="comment">        return $r;</span>
<a name="l3303"><span class="linenum">3303</span></a>  <span class="comment">    }</span>
<a name="l3304"><span class="linenum">3304</span></a>  <span class="comment">    */</span>
<a name="l3305"><span class="linenum">3305</span></a>  
<a name="l3306"><span class="linenum">3306</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~[^a-z0-9!*+\-/ ]~i', <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> ) )
<a name="l3307"><span class="linenum">3307</span></a>      {    // If the string actually needs some encoding
<a name="l3308"><span class="linenum">3308</span></a>          if( <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> == 'Q' )
<a name="l3309"><span class="linenum">3309</span></a>          {    // Quoted printable is best for reading with old/text terminal mail reading/debugging stuff:
<a name="l3310"><span class="linenum">3310</span></a>              <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '#[^a-z0-9!*+\-/ ]#ie', 'sprintf(\'=%02x\', <a class="phpfunction" onClick="logFunction('ord')" href="../../../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>(<a class="phpfunction" onClick="logFunction('stripslashes')" href="../../../_functions/stripslashes.html" onMouseOver="phpfuncPopup(event,'stripslashes')">stripslashes</a>(\'<a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('0')" href="../../../_variables/0.html">$0</a>\')))', <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> );
<a name="l3311"><span class="linenum">3311</span></a>              <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( ' ', '_', <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> );
<a name="l3312"><span class="linenum">3312</span></a>  
<a name="l3313"><span class="linenum">3313</span></a>              <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> = '=?'.<a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>.'?Q?'.<a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a>.'?=';
<a name="l3314"><span class="linenum">3314</span></a>          }
<a name="l3315"><span class="linenum">3315</span></a>          else
<a name="l3316"><span class="linenum">3316</span></a>          { // Base 64 -- Alex RU way:
<a name="l3317"><span class="linenum">3317</span></a>              <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> = '=?'.<a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>.'?B?'.<a class="phpfunction" onClick="logFunction('base64_encode')" href="../../../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>( <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a> ).'?=';
<a name="l3318"><span class="linenum">3318</span></a>          }
<a name="l3319"><span class="linenum">3319</span></a>      }
<a name="l3320"><span class="linenum">3320</span></a>  
<a name="l3321"><span class="linenum">3321</span></a>      return <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('header_str')" href="../../../_variables/header_str.html">$header_str</a>;
<a name="l3322"><span class="linenum">3322</span></a>  }
<a name="l3323"><span class="linenum">3323</span></a>  
<a name="l3324"><span class="linenum">3324</span></a>  
<a name="l3325"><span class="linenum">3325</span></a>  <span class="comment">/**</span>
<a name="l3326"><span class="linenum">3326</span></a>  <span class="comment"> * Get setting's value from General or User's settings</span>
<a name="l3327"><span class="linenum">3327</span></a>  <span class="comment"> *</span>
<a name="l3328"><span class="linenum">3328</span></a>  <span class="comment"> * @param integer User ID</span>
<a name="l3329"><span class="linenum">3329</span></a>  <span class="comment"> * @param string Setting ( email | name )</span>
<a name="l3330"><span class="linenum">3330</span></a>  <span class="comment"> * @return string Setting's value</span>
<a name="l3331"><span class="linenum">3331</span></a>  <span class="comment"> */</span>
<a name="l3332"><span class="linenum">3332</span></a>  function <a class="function" onClick="logFunction('user_get_notification_sender')" href="../../../_functions/user_get_notification_sender.html" onMouseOver="funcPopup(event,'user_get_notification_sender')">user_get_notification_sender</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it3519" onMouseOver="hilite(3519)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a> )
<a name="l3333"><span class="linenum">3333</span></a>  {
<a name="l3334"><span class="linenum">3334</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l3335"><span class="linenum">3335</span></a>  
<a name="l3336"><span class="linenum">3336</span></a>      <a class="var it4388" onMouseOver="hilite(4388)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a> = 'notification_sender_'.<a class="var it3519" onMouseOver="hilite(3519)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>;
<a name="l3337"><span class="linenum">3337</span></a>  
<a name="l3338"><span class="linenum">3338</span></a>      if( empty( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l3339"><span class="linenum">3339</span></a>      {    // Get value from general settings
<a name="l3340"><span class="linenum">3340</span></a>          return <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it4388" onMouseOver="hilite(4388)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a> );
<a name="l3341"><span class="linenum">3341</span></a>      }
<a name="l3342"><span class="linenum">3342</span></a>  
<a name="l3343"><span class="linenum">3343</span></a>      <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l3344"><span class="linenum">3344</span></a>      if( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l3345"><span class="linenum">3345</span></a>      {
<a name="l3346"><span class="linenum">3346</span></a>          if( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'is_validated' ) )
<a name="l3347"><span class="linenum">3347</span></a>          {    // User is Activated or Autoactivated
<a name="l3348"><span class="linenum">3348</span></a>              global <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>;
<a name="l3349"><span class="linenum">3349</span></a>              if( <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it4388" onMouseOver="hilite(4388)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) == '' )
<a name="l3350"><span class="linenum">3350</span></a>              {    // The user's setting is not defined yet
<a name="l3351"><span class="linenum">3351</span></a>  <span class="comment">                // Update the user's setting from general setting</span>
<a name="l3352"><span class="linenum">3352</span></a>                  <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it4388" onMouseOver="hilite(4388)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it4388" onMouseOver="hilite(4388)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a> ), <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> );
<a name="l3353"><span class="linenum">3353</span></a>                  <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l3354"><span class="linenum">3354</span></a>              }
<a name="l3355"><span class="linenum">3355</span></a>              else
<a name="l3356"><span class="linenum">3356</span></a>              {    // User has a defined setting; Use this
<a name="l3357"><span class="linenum">3357</span></a>                  return <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it4388" onMouseOver="hilite(4388)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> );
<a name="l3358"><span class="linenum">3358</span></a>              }
<a name="l3359"><span class="linenum">3359</span></a>          }
<a name="l3360"><span class="linenum">3360</span></a>      }
<a name="l3361"><span class="linenum">3361</span></a>  
<a name="l3362"><span class="linenum">3362</span></a>      return <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it4388" onMouseOver="hilite(4388)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a> );
<a name="l3363"><span class="linenum">3363</span></a>  }
<a name="l3364"><span class="linenum">3364</span></a>  
<a name="l3365"><span class="linenum">3365</span></a>  
<a name="l3366"><span class="linenum">3366</span></a>  <span class="comment">/**</span>
<a name="l3367"><span class="linenum">3367</span></a>  <span class="comment"> * Sends an email, wrapping PHP's mail() function.</span>
<a name="l3368"><span class="linenum">3368</span></a>  <span class="comment"> * ALL emails sent by b2evolution must be sent through this function (for consistency and for logging)</span>
<a name="l3369"><span class="linenum">3369</span></a>  <span class="comment"> *</span>
<a name="l3370"><span class="linenum">3370</span></a>  <span class="comment"> * {@link $current_locale} will be used to set the charset.</span>
<a name="l3371"><span class="linenum">3371</span></a>  <span class="comment"> *</span>
<a name="l3372"><span class="linenum">3372</span></a>  <span class="comment"> * Note: we use a single \n as line ending, though it does not comply to {@link http://www.faqs.org/rfcs/rfc2822 RFC2822}, but seems to be safer,</span>
<a name="l3373"><span class="linenum">3373</span></a>  <span class="comment"> * because some mail transfer agents replace \n by \r\n automatically.</span>
<a name="l3374"><span class="linenum">3374</span></a>  <span class="comment"> *</span>
<a name="l3375"><span class="linenum">3375</span></a>  <span class="comment"> * @todo Unit testing with &quot;nice addresses&quot; This gets broken over and over again.</span>
<a name="l3376"><span class="linenum">3376</span></a>  <span class="comment"> *</span>
<a name="l3377"><span class="linenum">3377</span></a>  <span class="comment"> * @param string Recipient email address.</span>
<a name="l3378"><span class="linenum">3378</span></a>  <span class="comment"> * @param string Recipient name.</span>
<a name="l3379"><span class="linenum">3379</span></a>  <span class="comment"> * @param string Subject of the mail</span>
<a name="l3380"><span class="linenum">3380</span></a>  <span class="comment"> * @param string The message text</span>
<a name="l3381"><span class="linenum">3381</span></a>  <span class="comment"> * @param string From address, being added to headers (we'll prevent injections); see {@link http://securephp.damonkohler.com/index.php/Email_Injection}.</span>
<a name="l3382"><span class="linenum">3382</span></a>  <span class="comment"> *               Defaults to {@link GeneralSettings::get('notification_sender_email') } if NULL.</span>
<a name="l3383"><span class="linenum">3383</span></a>  <span class="comment"> * @param string From name.</span>
<a name="l3384"><span class="linenum">3384</span></a>  <span class="comment"> * @param array Additional headers ( headername =&gt; value ). Take care of injection!</span>
<a name="l3385"><span class="linenum">3385</span></a>  <span class="comment"> * @param integer User ID</span>
<a name="l3386"><span class="linenum">3386</span></a>  <span class="comment"> * @return boolean True if mail could be sent (not necessarily delivered!), false if not - (return value of {@link mail()})</span>
<a name="l3387"><span class="linenum">3387</span></a>  <span class="comment"> */</span>
<a name="l3388"><span class="linenum">3388</span></a>  function <a class="function" onClick="logFunction('send_mail')" href="../../../_functions/send_mail.html" onMouseOver="funcPopup(event,'send_mail')">send_mail</a>( <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a>, <a class="var it7029" onMouseOver="hilite(7029)" onMouseOut="lolite()" onClick="logVariable('to_name')" href="../../../_variables/to_name.html">$to_name</a>, <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>, <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a> = NULL, <a class="var it7030" onMouseOver="hilite(7030)" onMouseOut="lolite()" onClick="logVariable('from_name')" href="../../../_variables/from_name.html">$from_name</a> = NULL, <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a> = array(), <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> = NULL )
<a name="l3389"><span class="linenum">3389</span></a>  {
<a name="l3390"><span class="linenum">3390</span></a>      global <a class="var it1826" onMouseOver="hilite(1826)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a>;
<a name="l3391"><span class="linenum">3391</span></a>  
<a name="l3392"><span class="linenum">3392</span></a>  <span class="comment">    // Stop a request from the blocked IP addresses or Domains</span>
<a name="l3393"><span class="linenum">3393</span></a>      <a class="function" onClick="logFunction('antispam_block_request')" href="../../../_functions/antispam_block_request.html" onMouseOver="funcPopup(event,'antispam_block_request')">antispam_block_request</a>();
<a name="l3394"><span class="linenum">3394</span></a>  
<a name="l3395"><span class="linenum">3395</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>, <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../../../_variables/app_name.html">$app_name</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../../_variables/app_version.html">$app_version</a>, <a class="var it2774" onMouseOver="hilite(2774)" onMouseOut="lolite()" onClick="logVariable('current_locale')" href="../../../_variables/current_locale.html">$current_locale</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>, <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>, <a class="var it1619" onMouseOver="hilite(1619)" onMouseOut="lolite()" onClick="logVariable('locales')" href="../../../_variables/locales.html">$locales</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('demo_mode')" href="../../../_variables/demo_mode.html">$demo_mode</a>, <a class="var it7031" onMouseOver="hilite(7031)" onMouseOut="lolite()" onClick="logVariable('sendmail_additional_params')" href="../../../_variables/sendmail_additional_params.html">$sendmail_additional_params</a>;
<a name="l3396"><span class="linenum">3396</span></a>  
<a name="l3397"><span class="linenum">3397</span></a>      <a class="var it7032" onMouseOver="hilite(7032)" onMouseOut="lolite()" onClick="logVariable('NL')" href="../../../_variables/NL.html">$NL</a> = &quot;\r\n&quot;;
<a name="l3398"><span class="linenum">3398</span></a>      <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( &quot;\r\n&quot;, &quot;\r&quot; ), <a class="var it7032" onMouseOver="hilite(7032)" onMouseOut="lolite()" onClick="logVariable('NL')" href="../../../_variables/NL.html">$NL</a>, <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> );
<a name="l3399"><span class="linenum">3399</span></a>  
<a name="l3400"><span class="linenum">3400</span></a>  <span class="comment">    // Replace secret content in the mail logs message body</span>
<a name="l3401"><span class="linenum">3401</span></a>      <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('message_log')" href="../../../_variables/message_log.html">$message_log</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~\<a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('secret_content_start')" href="../../../_variables/secret_content_start.html">$secret_content_start</a>\$.*\<a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('secret_content_end')" href="../../../_variables/secret_content_end.html">$secret_content_end</a>\$~', '***secret-content-removed***', <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> );
<a name="l3402"><span class="linenum">3402</span></a>  <span class="comment">    // Remove secret content marks from the message</span>
<a name="l3403"><span class="linenum">3403</span></a>      <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( '<a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('secret_content_start')" href="../../../_variables/secret_content_start.html">$secret_content_start</a>$', '<a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('secret_content_end')" href="../../../_variables/secret_content_end.html">$secret_content_end</a>$' ), '', <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> );
<a name="l3404"><span class="linenum">3404</span></a>  
<a name="l3405"><span class="linenum">3405</span></a>  <span class="comment">    // Memorize email address</span>
<a name="l3406"><span class="linenum">3406</span></a>      <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('to_email_address')" href="../../../_variables/to_email_address.html">$to_email_address</a> = <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a>;
<a name="l3407"><span class="linenum">3407</span></a>  
<a name="l3408"><span class="linenum">3408</span></a>      if( <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('demo_mode')" href="../../../_variables/demo_mode.html">$demo_mode</a> )
<a name="l3409"><span class="linenum">3409</span></a>      { // Debug mode restriction: Sending email in debug mode is not allowed
<a name="l3410"><span class="linenum">3410</span></a>          return false;
<a name="l3411"><span class="linenum">3411</span></a>      }
<a name="l3412"><span class="linenum">3412</span></a>  
<a name="l3413"><span class="linenum">3413</span></a>      if( !<a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a> ) )
<a name="l3414"><span class="linenum">3414</span></a>      { // Make sure <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a> is an array
<a name="l3415"><span class="linenum">3415</span></a>          <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a> = array( <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a> );
<a name="l3416"><span class="linenum">3416</span></a>      }
<a name="l3417"><span class="linenum">3417</span></a>  
<a name="l3418"><span class="linenum">3418</span></a>      if( empty( <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a> ) )
<a name="l3419"><span class="linenum">3419</span></a>      {
<a name="l3420"><span class="linenum">3420</span></a>          <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a> = <a class="function" onClick="logFunction('user_get_notification_sender')" href="../../../_functions/user_get_notification_sender.html" onMouseOver="funcPopup(event,'user_get_notification_sender')">user_get_notification_sender</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, 'email' );
<a name="l3421"><span class="linenum">3421</span></a>      }
<a name="l3422"><span class="linenum">3422</span></a>  
<a name="l3423"><span class="linenum">3423</span></a>      if( empty( <a class="var it7030" onMouseOver="hilite(7030)" onMouseOut="lolite()" onClick="logVariable('from_name')" href="../../../_variables/from_name.html">$from_name</a> ) )
<a name="l3424"><span class="linenum">3424</span></a>      {
<a name="l3425"><span class="linenum">3425</span></a>          <a class="var it7030" onMouseOver="hilite(7030)" onMouseOut="lolite()" onClick="logVariable('from_name')" href="../../../_variables/from_name.html">$from_name</a> = <a class="function" onClick="logFunction('user_get_notification_sender')" href="../../../_functions/user_get_notification_sender.html" onMouseOver="funcPopup(event,'user_get_notification_sender')">user_get_notification_sender</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, 'name' );
<a name="l3426"><span class="linenum">3426</span></a>      }
<a name="l3427"><span class="linenum">3427</span></a>  
<a name="l3428"><span class="linenum">3428</span></a>      <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('return_path')" href="../../../_variables/return_path.html">$return_path</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'notification_return_path' );
<a name="l3429"><span class="linenum">3429</span></a>  
<a name="l3430"><span class="linenum">3430</span></a>  <span class="comment">    // Add real name into $from...</span>
<a name="l3431"><span class="linenum">3431</span></a>      if( ! <a class="function" onClick="logFunction('is_windows')" href="../../../_functions/is_windows.html" onMouseOver="funcPopup(event,'is_windows')">is_windows</a>() )
<a name="l3432"><span class="linenum">3432</span></a>      {    // fplanque: Windows XP, Apache 1.3, PHP 4.4, MS SMTP : will not accept &quot;nice&quot; addresses.
<a name="l3433"><span class="linenum">3433</span></a>          if( !empty( <a class="var it7029" onMouseOver="hilite(7029)" onMouseOut="lolite()" onClick="logVariable('to_name')" href="../../../_variables/to_name.html">$to_name</a> ) )
<a name="l3434"><span class="linenum">3434</span></a>          {
<a name="l3435"><span class="linenum">3435</span></a>              <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a> = '&quot;'.<a class="function" onClick="logFunction('mail_encode_header_string')" href="../../../_functions/mail_encode_header_string.html" onMouseOver="funcPopup(event,'mail_encode_header_string')">mail_encode_header_string</a>(<a class="var it7029" onMouseOver="hilite(7029)" onMouseOut="lolite()" onClick="logVariable('to_name')" href="../../../_variables/to_name.html">$to_name</a>).'&quot; &lt;'.<a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a>.'&gt;';
<a name="l3436"><span class="linenum">3436</span></a>          }
<a name="l3437"><span class="linenum">3437</span></a>          if( !empty( <a class="var it7030" onMouseOver="hilite(7030)" onMouseOut="lolite()" onClick="logVariable('from_name')" href="../../../_variables/from_name.html">$from_name</a> ) )
<a name="l3438"><span class="linenum">3438</span></a>          {
<a name="l3439"><span class="linenum">3439</span></a>              <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a> = '&quot;'.<a class="function" onClick="logFunction('mail_encode_header_string')" href="../../../_functions/mail_encode_header_string.html" onMouseOver="funcPopup(event,'mail_encode_header_string')">mail_encode_header_string</a>(<a class="var it7030" onMouseOver="hilite(7030)" onMouseOut="lolite()" onClick="logVariable('from_name')" href="../../../_variables/from_name.html">$from_name</a>).'&quot; &lt;'.<a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a>.'&gt;';
<a name="l3440"><span class="linenum">3440</span></a>          }
<a name="l3441"><span class="linenum">3441</span></a>      }
<a name="l3442"><span class="linenum">3442</span></a>  
<a name="l3443"><span class="linenum">3443</span></a>      <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a> = <a class="function" onClick="logFunction('mail_sanitize_header_string')" href="../../../_functions/mail_sanitize_header_string.html" onMouseOver="funcPopup(event,'mail_sanitize_header_string')">mail_sanitize_header_string</a>( <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a>, true );
<a name="l3444"><span class="linenum">3444</span></a>  <span class="comment">    // From has to go into headers</span>
<a name="l3445"><span class="linenum">3445</span></a>      <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['From'] = <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a>;
<a name="l3446"><span class="linenum">3446</span></a>      if( !empty( <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('return_path')" href="../../../_variables/return_path.html">$return_path</a> ) )
<a name="l3447"><span class="linenum">3447</span></a>      {    // Set a return path
<a name="l3448"><span class="linenum">3448</span></a>          <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['Return-Path'] = <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('return_path')" href="../../../_variables/return_path.html">$return_path</a>;
<a name="l3449"><span class="linenum">3449</span></a>      }
<a name="l3450"><span class="linenum">3450</span></a>  
<a name="l3451"><span class="linenum">3451</span></a>  <span class="comment">    // echo 'sending email to: ['.evo_htmlspecialchars($to).'] from ['.evo_htmlspecialchars($from).']';</span>
<a name="l3452"><span class="linenum">3452</span></a>  
<a name="l3453"><span class="linenum">3453</span></a>      <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('clear_subject')" href="../../../_variables/clear_subject.html">$clear_subject</a> = <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>;
<a name="l3454"><span class="linenum">3454</span></a>      <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('mail_encode_header_string')" href="../../../_functions/mail_encode_header_string.html" onMouseOver="funcPopup(event,'mail_encode_header_string')">mail_encode_header_string</a>(<a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>);
<a name="l3455"><span class="linenum">3455</span></a>  
<a name="l3456"><span class="linenum">3456</span></a>  <span class="comment">    // Convert encoding of message (from internal encoding to the one of the message):</span>
<a name="l3457"><span class="linenum">3457</span></a>  <span class="comment">    // fp&gt; why do we actually convert to $current_charset?</span>
<a name="l3458"><span class="linenum">3458</span></a>  <span class="comment">    // dh&gt; I do not remember. Appears to make sense sending it unconverted in $evo_charset.</span>
<a name="l3459"><span class="linenum">3459</span></a>  <span class="comment">    // asimo&gt; converting the message creates wrong output, no need for conversion, however this needs further investigation</span>
<a name="l3460"><span class="linenum">3460</span></a>  <span class="comment">    // $message = convert_charset( $message, $current_charset, $evo_charset );</span>
<a name="l3461"><span class="linenum">3461</span></a>  
<a name="l3462"><span class="linenum">3462</span></a>      if( !isset( <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['Content-Type'] ) )
<a name="l3463"><span class="linenum">3463</span></a>      {    // Specify charset and content-type of email
<a name="l3464"><span class="linenum">3464</span></a>          <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['Content-Type'] = 'text/plain; charset='.<a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l3465"><span class="linenum">3465</span></a>      }
<a name="l3466"><span class="linenum">3466</span></a>      <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['MIME-Version'] = '1.0';
<a name="l3467"><span class="linenum">3467</span></a>  
<a name="l3468"><span class="linenum">3468</span></a>      <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['Date'] = <a class="phpfunction" onClick="logFunction('gmdate')" href="../../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>( 'r', <a class="var it1826" onMouseOver="hilite(1826)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a> );
<a name="l3469"><span class="linenum">3469</span></a>  
<a name="l3470"><span class="linenum">3470</span></a>  <span class="comment">    // ADDITIONAL HEADERS:</span>
<a name="l3471"><span class="linenum">3471</span></a>      <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['X-Mailer'] = <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../../../_variables/app_name.html">$app_name</a>.' '.<a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../../_variables/app_version.html">$app_version</a>.' - PHP/'.<a class="phpfunction" onClick="logFunction('phpversion')" href="../../../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>();
<a name="l3472"><span class="linenum">3472</span></a>      <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="function" onClick="logFunction('get_ip_list')" href="../../../_functions/get_ip_list.html" onMouseOver="funcPopup(event,'get_ip_list')">get_ip_list</a>() );
<a name="l3473"><span class="linenum">3473</span></a>      if( !empty( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a> ) )
<a name="l3474"><span class="linenum">3474</span></a>      { // Add X-Remote_Addr param only if its value is not empty
<a name="l3475"><span class="linenum">3475</span></a>          <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['X-Remote-Addr'] = <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a>;
<a name="l3476"><span class="linenum">3476</span></a>      }
<a name="l3477"><span class="linenum">3477</span></a>  
<a name="l3478"><span class="linenum">3478</span></a>  <span class="comment">    // COMPACT HEADERS:</span>
<a name="l3479"><span class="linenum">3479</span></a>      <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('headerstring')" href="../../../_variables/headerstring.html">$headerstring</a> = '';
<a name="l3480"><span class="linenum">3480</span></a>      <a class="phpfunction" onClick="logFunction('reset')" href="../../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>( <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a> );
<a name="l3481"><span class="linenum">3481</span></a>      while( <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>( <a class="var it7038" onMouseOver="hilite(7038)" onMouseOut="lolite()" onClick="logVariable('lKey')" href="../../../_variables/lKey.html">$lKey</a>, <a class="var it7039" onMouseOver="hilite(7039)" onMouseOut="lolite()" onClick="logVariable('lValue')" href="../../../_variables/lValue.html">$lValue</a> ) = <a class="phpfunction" onClick="logFunction('each')" href="../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a> ) )
<a name="l3482"><span class="linenum">3482</span></a>      { // Add additional headers
<a name="l3483"><span class="linenum">3483</span></a>          <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('headerstring')" href="../../../_variables/headerstring.html">$headerstring</a> .= <a class="var it7038" onMouseOver="hilite(7038)" onMouseOut="lolite()" onClick="logVariable('lKey')" href="../../../_variables/lKey.html">$lKey</a>.': '.<a class="var it7039" onMouseOver="hilite(7039)" onMouseOut="lolite()" onClick="logVariable('lValue')" href="../../../_variables/lValue.html">$lValue</a>.<a class="var it7032" onMouseOver="hilite(7032)" onMouseOut="lolite()" onClick="logVariable('NL')" href="../../../_variables/NL.html">$NL</a>;
<a name="l3484"><span class="linenum">3484</span></a>      }
<a name="l3485"><span class="linenum">3485</span></a>  
<a name="l3486"><span class="linenum">3486</span></a>  <span class="comment">    // Set an additional parameter for the return path:</span>
<a name="l3487"><span class="linenum">3487</span></a>      if( ! empty( <a class="var it7031" onMouseOver="hilite(7031)" onMouseOut="lolite()" onClick="logVariable('sendmail_additional_params')" href="../../../_variables/sendmail_additional_params.html">$sendmail_additional_params</a> ) )
<a name="l3488"><span class="linenum">3488</span></a>      {
<a name="l3489"><span class="linenum">3489</span></a>          <a class="var it7040" onMouseOver="hilite(7040)" onMouseOut="lolite()" onClick="logVariable('additional_parameters')" href="../../../_variables/additional_parameters.html">$additional_parameters</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(
<a name="l3490"><span class="linenum">3490</span></a>              array( '<a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a>-address$', '<a class="var it402" onMouseOver="hilite(402)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../../_variables/return.html">$return</a>-address$' ),
<a name="l3491"><span class="linenum">3491</span></a>              array( <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a>, ( empty( <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('return_path')" href="../../../_variables/return_path.html">$return_path</a> ) ? <a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a> : <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('return_path')" href="../../../_variables/return_path.html">$return_path</a> ) ),
<a name="l3492"><span class="linenum">3492</span></a>              <a class="var it7031" onMouseOver="hilite(7031)" onMouseOut="lolite()" onClick="logVariable('sendmail_additional_params')" href="../../../_variables/sendmail_additional_params.html">$sendmail_additional_params</a> );
<a name="l3493"><span class="linenum">3493</span></a>      }
<a name="l3494"><span class="linenum">3494</span></a>      else
<a name="l3495"><span class="linenum">3495</span></a>      {
<a name="l3496"><span class="linenum">3496</span></a>          <a class="var it7040" onMouseOver="hilite(7040)" onMouseOut="lolite()" onClick="logVariable('additional_parameters')" href="../../../_variables/additional_parameters.html">$additional_parameters</a> = '';
<a name="l3497"><span class="linenum">3497</span></a>      }
<a name="l3498"><span class="linenum">3498</span></a>  
<a name="l3499"><span class="linenum">3499</span></a>      if( <a class="function" onClick="logFunction('mail_is_blocked')" href="../../../_functions/mail_is_blocked.html" onMouseOver="funcPopup(event,'mail_is_blocked')">mail_is_blocked</a>( <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('to_email_address')" href="../../../_variables/to_email_address.html">$to_email_address</a> ) )
<a name="l3500"><span class="linenum">3500</span></a>      { // Check if the email address is blocked
<a name="l3501"><span class="linenum">3501</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Sending mail to &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>( <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('to_email_address')" href="../../../_variables/to_email_address.html">$to_email_address</a> ).'&amp;raquo; FAILED, because this email marked with spam or permanent errors.', 'error' );
<a name="l3502"><span class="linenum">3502</span></a>  
<a name="l3503"><span class="linenum">3503</span></a>          <a class="function" onClick="logFunction('mail_log')" href="../../../_functions/mail_log.html" onMouseOver="funcPopup(event,'mail_log')">mail_log</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('to_email_address')" href="../../../_variables/to_email_address.html">$to_email_address</a>, <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('clear_subject')" href="../../../_variables/clear_subject.html">$clear_subject</a>, <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('message_log')" href="../../../_variables/message_log.html">$message_log</a>, <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('headerstring')" href="../../../_variables/headerstring.html">$headerstring</a>, 'blocked' );
<a name="l3504"><span class="linenum">3504</span></a>  
<a name="l3505"><span class="linenum">3505</span></a>          return false;
<a name="l3506"><span class="linenum">3506</span></a>      }
<a name="l3507"><span class="linenum">3507</span></a>  
<a name="l3508"><span class="linenum">3508</span></a>  <span class="comment">    // SEND MESSAGE:</span>
<a name="l3509"><span class="linenum">3509</span></a>      if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> &gt; 1 )
<a name="l3510"><span class="linenum">3510</span></a>      {    // We agree to die for debugging...
<a name="l3511"><span class="linenum">3511</span></a>          if( ! <a class="phpfunction" onClick="logFunction('mail')" href="../../../_functions/mail.html" onMouseOver="phpfuncPopup(event,'mail')">mail</a>( <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a>, <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>, <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('headerstring')" href="../../../_variables/headerstring.html">$headerstring</a>, <a class="var it7040" onMouseOver="hilite(7040)" onMouseOut="lolite()" onClick="logVariable('additional_parameters')" href="../../../_variables/additional_parameters.html">$additional_parameters</a> ) )
<a name="l3512"><span class="linenum">3512</span></a>          {
<a name="l3513"><span class="linenum">3513</span></a>              <a class="function" onClick="logFunction('mail_log')" href="../../../_functions/mail_log.html" onMouseOver="funcPopup(event,'mail_log')">mail_log</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('to_email_address')" href="../../../_variables/to_email_address.html">$to_email_address</a>, <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('clear_subject')" href="../../../_variables/clear_subject.html">$clear_subject</a>, <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('message_log')" href="../../../_variables/message_log.html">$message_log</a>, <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('headerstring')" href="../../../_variables/headerstring.html">$headerstring</a>, 'error' );
<a name="l3514"><span class="linenum">3514</span></a>  
<a name="l3515"><span class="linenum">3515</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Sending mail from &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a>).'&amp;raquo; to &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a>).'&amp;raquo;, Subject &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>).'&amp;raquo; FAILED.' );
<a name="l3516"><span class="linenum">3516</span></a>          }
<a name="l3517"><span class="linenum">3517</span></a>      }
<a name="l3518"><span class="linenum">3518</span></a>      else
<a name="l3519"><span class="linenum">3519</span></a>      {    // Soft debugging only....
<a name="l3520"><span class="linenum">3520</span></a>          if( ! @<a class="phpfunction" onClick="logFunction('mail')" href="../../../_functions/mail.html" onMouseOver="phpfuncPopup(event,'mail')">mail</a>( <a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a>, <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>, <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('headerstring')" href="../../../_variables/headerstring.html">$headerstring</a>, <a class="var it7040" onMouseOver="hilite(7040)" onMouseOut="lolite()" onClick="logVariable('additional_parameters')" href="../../../_variables/additional_parameters.html">$additional_parameters</a> ) )
<a name="l3521"><span class="linenum">3521</span></a>          {
<a name="l3522"><span class="linenum">3522</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Sending mail from &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a>).'&amp;raquo; to &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a>).'&amp;raquo;, Subject &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>).'&amp;raquo; FAILED.', 'error' );
<a name="l3523"><span class="linenum">3523</span></a>  
<a name="l3524"><span class="linenum">3524</span></a>              <a class="function" onClick="logFunction('mail_log')" href="../../../_functions/mail_log.html" onMouseOver="funcPopup(event,'mail_log')">mail_log</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('to_email_address')" href="../../../_variables/to_email_address.html">$to_email_address</a>, <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('clear_subject')" href="../../../_variables/clear_subject.html">$clear_subject</a>, <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('message_log')" href="../../../_variables/message_log.html">$message_log</a>, <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('headerstring')" href="../../../_variables/headerstring.html">$headerstring</a>, 'error' );
<a name="l3525"><span class="linenum">3525</span></a>  
<a name="l3526"><span class="linenum">3526</span></a>              return false;
<a name="l3527"><span class="linenum">3527</span></a>          }
<a name="l3528"><span class="linenum">3528</span></a>      }
<a name="l3529"><span class="linenum">3529</span></a>  
<a name="l3530"><span class="linenum">3530</span></a>      <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Sent mail from &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it2492" onMouseOver="hilite(2492)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../../_variables/from.html">$from</a>).'&amp;raquo; to &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it5410" onMouseOver="hilite(5410)" onMouseOut="lolite()" onClick="logVariable('to')" href="../../../_variables/to.html">$to</a>).'&amp;raquo;, Subject &amp;laquo;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>).'&amp;raquo;.' );
<a name="l3531"><span class="linenum">3531</span></a>  
<a name="l3532"><span class="linenum">3532</span></a>      <a class="function" onClick="logFunction('mail_log')" href="../../../_functions/mail_log.html" onMouseOver="funcPopup(event,'mail_log')">mail_log</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('to_email_address')" href="../../../_variables/to_email_address.html">$to_email_address</a>, <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('clear_subject')" href="../../../_variables/clear_subject.html">$clear_subject</a>, <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('message_log')" href="../../../_variables/message_log.html">$message_log</a>, <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('headerstring')" href="../../../_variables/headerstring.html">$headerstring</a>, 'ok' );
<a name="l3533"><span class="linenum">3533</span></a>  
<a name="l3534"><span class="linenum">3534</span></a>      return true;
<a name="l3535"><span class="linenum">3535</span></a>  }
<a name="l3536"><span class="linenum">3536</span></a>  
<a name="l3537"><span class="linenum">3537</span></a>  
<a name="l3538"><span class="linenum">3538</span></a>  <span class="comment">/**</span>
<a name="l3539"><span class="linenum">3539</span></a>  <span class="comment"> * Sends an email to User</span>
<a name="l3540"><span class="linenum">3540</span></a>  <span class="comment"> *</span>
<a name="l3541"><span class="linenum">3541</span></a>  <span class="comment"> * @param integer Recipient ID.</span>
<a name="l3542"><span class="linenum">3542</span></a>  <span class="comment"> * @param string Subject of the mail</span>
<a name="l3543"><span class="linenum">3543</span></a>  <span class="comment"> * @param string Email template name</span>
<a name="l3544"><span class="linenum">3544</span></a>  <span class="comment"> * @param array Email template params</span>
<a name="l3545"><span class="linenum">3545</span></a>  <span class="comment"> * @param boolean Force to send this email even if the user is not activated. By default not activated user won't get emails.</span>
<a name="l3546"><span class="linenum">3546</span></a>  <span class="comment"> *                Pasword reset, and account activation emails must be always forced.</span>
<a name="l3547"><span class="linenum">3547</span></a>  <span class="comment"> * @param array Additional headers ( headername =&gt; value ). Take care of injection!</span>
<a name="l3548"><span class="linenum">3548</span></a>  <span class="comment"> * @param string Use this param if you want use different email address instead of $User-&gt;email</span>
<a name="l3549"><span class="linenum">3549</span></a>  <span class="comment"> * @return boolean True if mail could be sent (not necessarily delivered!), false if not - (return value of {@link mail()})</span>
<a name="l3550"><span class="linenum">3550</span></a>  <span class="comment"> */</span>
<a name="l3551"><span class="linenum">3551</span></a>  function <a class="function" onClick="logFunction('send_mail_to_User')" href="../../../_functions/send_mail_to_user.html" onMouseOver="funcPopup(event,'send_mail_to_user')">send_mail_to_User</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>, <a class="var it5736" onMouseOver="hilite(5736)" onMouseOut="lolite()" onClick="logVariable('template_params')" href="../../../_variables/template_params.html">$template_params</a> = array(), <a class="var it7041" onMouseOver="hilite(7041)" onMouseOut="lolite()" onClick="logVariable('force_on_non_activated')" href="../../../_variables/force_on_non_activated.html">$force_on_non_activated</a> = false, <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a> = array(), <a class="var it7042" onMouseOver="hilite(7042)" onMouseOut="lolite()" onClick="logVariable('force_email_address')" href="../../../_variables/force_email_address.html">$force_email_address</a> = '' )
<a name="l3552"><span class="linenum">3552</span></a>  {
<a name="l3553"><span class="linenum">3553</span></a>      global <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l3554"><span class="linenum">3554</span></a>  
<a name="l3555"><span class="linenum">3555</span></a>      <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l3556"><span class="linenum">3556</span></a>      if( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l3557"><span class="linenum">3557</span></a>      {
<a name="l3558"><span class="linenum">3558</span></a>          if( !<a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_receive_any_message' ) )
<a name="l3559"><span class="linenum">3559</span></a>          { // user status doesn't allow to receive nor emails nor private messages
<a name="l3560"><span class="linenum">3560</span></a>              return false;
<a name="l3561"><span class="linenum">3561</span></a>          }
<a name="l3562"><span class="linenum">3562</span></a>  
<a name="l3563"><span class="linenum">3563</span></a>          if( !( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'is_validated' ) || <a class="var it7041" onMouseOver="hilite(7041)" onMouseOut="lolite()" onClick="logVariable('force_on_non_activated')" href="../../../_variables/force_on_non_activated.html">$force_on_non_activated</a> ) )
<a name="l3564"><span class="linenum">3564</span></a>          { // user is not activated and non activated users should not receive emails, unless force_on_non_activated is turned on
<a name="l3565"><span class="linenum">3565</span></a>              return false;
<a name="l3566"><span class="linenum">3566</span></a>          }
<a name="l3567"><span class="linenum">3567</span></a>  
<a name="l3568"><span class="linenum">3568</span></a>  <span class="comment">        // Check if a new email to User with the corrensponding email type is allowed</span>
<a name="l3569"><span class="linenum">3569</span></a>          switch( <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a> )
<a name="l3570"><span class="linenum">3570</span></a>          {
<a name="l3571"><span class="linenum">3571</span></a>              case 'account_activate':
<a name="l3572"><span class="linenum">3572</span></a>                  if( <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'validation_process' ) == 'easy' &amp;&amp; !<a class="var it5736" onMouseOver="hilite(5736)" onMouseOut="lolite()" onClick="logVariable('template_params')" href="../../../_variables/template_params.html">$template_params</a>['is_reminder'] )
<a name="l3573"><span class="linenum">3573</span></a>                  { // this is not a notification email
<a name="l3574"><span class="linenum">3574</span></a>                      break;
<a name="l3575"><span class="linenum">3575</span></a>                  }
<a name="l3576"><span class="linenum">3576</span></a>              case 'private_message_new':
<a name="l3577"><span class="linenum">3577</span></a>              case 'private_messages_unread_reminder':
<a name="l3578"><span class="linenum">3578</span></a>              case 'post_new':
<a name="l3579"><span class="linenum">3579</span></a>              case 'comment_new':
<a name="l3580"><span class="linenum">3580</span></a>              case 'account_activated':
<a name="l3581"><span class="linenum">3581</span></a>              case 'account_closed':
<a name="l3582"><span class="linenum">3582</span></a>              case 'account_reported':
<a name="l3583"><span class="linenum">3583</span></a>              case 'account_changed':
<a name="l3584"><span class="linenum">3584</span></a>  <span class="comment">                // this is a notificaiton email</span>
<a name="l3585"><span class="linenum">3585</span></a>                  <a class="var it7043" onMouseOver="hilite(7043)" onMouseOut="lolite()" onClick="logVariable('email_limit_setting')" href="../../../_variables/email_limit_setting.html">$email_limit_setting</a> = 'notification_email_limit';
<a name="l3586"><span class="linenum">3586</span></a>                  <a class="var it7044" onMouseOver="hilite(7044)" onMouseOut="lolite()" onClick="logVariable('email_counter_setting')" href="../../../_variables/email_counter_setting.html">$email_counter_setting</a> = 'last_notification_email';
<a name="l3587"><span class="linenum">3587</span></a>                  if( !<a class="function" onClick="logFunction('check_allow_new_email')" href="../../../_functions/check_allow_new_email.html" onMouseOver="funcPopup(event,'check_allow_new_email')">check_allow_new_email</a>( <a class="var it7043" onMouseOver="hilite(7043)" onMouseOut="lolite()" onClick="logVariable('email_limit_setting')" href="../../../_variables/email_limit_setting.html">$email_limit_setting</a>, <a class="var it7044" onMouseOver="hilite(7044)" onMouseOut="lolite()" onClick="logVariable('email_counter_setting')" href="../../../_variables/email_counter_setting.html">$email_counter_setting</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l3588"><span class="linenum">3588</span></a>                  { // more notification email is not allowed today
<a name="l3589"><span class="linenum">3589</span></a>                      return false;
<a name="l3590"><span class="linenum">3590</span></a>                  }
<a name="l3591"><span class="linenum">3591</span></a>                  break;
<a name="l3592"><span class="linenum">3592</span></a>              case 'newsletter':
<a name="l3593"><span class="linenum">3593</span></a>  <span class="comment">                // this is a newsletter email</span>
<a name="l3594"><span class="linenum">3594</span></a>                  <a class="var it7043" onMouseOver="hilite(7043)" onMouseOut="lolite()" onClick="logVariable('email_limit_setting')" href="../../../_variables/email_limit_setting.html">$email_limit_setting</a> = 'newsletter_limit';
<a name="l3595"><span class="linenum">3595</span></a>                  <a class="var it7044" onMouseOver="hilite(7044)" onMouseOut="lolite()" onClick="logVariable('email_counter_setting')" href="../../../_variables/email_counter_setting.html">$email_counter_setting</a> = 'last_newsletter';
<a name="l3596"><span class="linenum">3596</span></a>                  if( !<a class="function" onClick="logFunction('check_allow_new_email')" href="../../../_functions/check_allow_new_email.html" onMouseOver="funcPopup(event,'check_allow_new_email')">check_allow_new_email</a>( <a class="var it7043" onMouseOver="hilite(7043)" onMouseOut="lolite()" onClick="logVariable('email_limit_setting')" href="../../../_variables/email_limit_setting.html">$email_limit_setting</a>, <a class="var it7044" onMouseOver="hilite(7044)" onMouseOut="lolite()" onClick="logVariable('email_counter_setting')" href="../../../_variables/email_counter_setting.html">$email_counter_setting</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l3597"><span class="linenum">3597</span></a>                  { // more newsletter email is not allowed today
<a name="l3598"><span class="linenum">3598</span></a>                      return false;
<a name="l3599"><span class="linenum">3599</span></a>                  }
<a name="l3600"><span class="linenum">3600</span></a>                  break;
<a name="l3601"><span class="linenum">3601</span></a>              case 'newsletter_test':
<a name="l3602"><span class="linenum">3602</span></a>  <span class="comment">                // this is a newsletter email, used to send test email by current admin</span>
<a name="l3603"><span class="linenum">3603</span></a>                  <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a> = 'newsletter';
<a name="l3604"><span class="linenum">3604</span></a>                  break;
<a name="l3605"><span class="linenum">3605</span></a>          }
<a name="l3606"><span class="linenum">3606</span></a>  
<a name="l3607"><span class="linenum">3607</span></a>  <span class="comment">        // Update notification sender's info from General settings</span>
<a name="l3608"><span class="linenum">3608</span></a>          <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('update_sender')" href="../../../_functions/update_sender.html" onMouseOver="funcPopup(event,'update_sender')">update_sender</a>();
<a name="l3609"><span class="linenum">3609</span></a>  
<a name="l3610"><span class="linenum">3610</span></a>          switch( <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'email_format', <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l3611"><span class="linenum">3611</span></a>          {    // Set Content-Type from user's setting &quot;Email format&quot;
<a name="l3612"><span class="linenum">3612</span></a>              case 'auto':
<a name="l3613"><span class="linenum">3613</span></a>                  <a class="var it5736" onMouseOver="hilite(5736)" onMouseOut="lolite()" onClick="logVariable('template_params')" href="../../../_variables/template_params.html">$template_params</a>['boundary'] = 'b2evo-'.md5( <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>() );
<a name="l3614"><span class="linenum">3614</span></a>                  <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['Content-Type'] = 'multipart/mixed; boundary=&quot;'.<a class="var it5736" onMouseOver="hilite(5736)" onMouseOut="lolite()" onClick="logVariable('template_params')" href="../../../_variables/template_params.html">$template_params</a>['boundary'].'&quot;';
<a name="l3615"><span class="linenum">3615</span></a>                  break;
<a name="l3616"><span class="linenum">3616</span></a>              case 'html':
<a name="l3617"><span class="linenum">3617</span></a>                  <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['Content-Type'] = 'text/html; charset='.<a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l3618"><span class="linenum">3618</span></a>                  break;
<a name="l3619"><span class="linenum">3619</span></a>              case 'text':
<a name="l3620"><span class="linenum">3620</span></a>                  <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>['Content-Type'] = 'text/plain; charset='.<a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l3621"><span class="linenum">3621</span></a>                  break;
<a name="l3622"><span class="linenum">3622</span></a>          }
<a name="l3623"><span class="linenum">3623</span></a>  
<a name="l3624"><span class="linenum">3624</span></a>  <span class="comment">        // Get a message text from template file</span>
<a name="l3625"><span class="linenum">3625</span></a>          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('mail_template')" href="../../../_functions/mail_template.html" onMouseOver="funcPopup(event,'mail_template')">mail_template</a>( <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'email_format', <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ), <a class="var it5736" onMouseOver="hilite(5736)" onMouseOut="lolite()" onClick="logVariable('template_params')" href="../../../_variables/template_params.html">$template_params</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> );
<a name="l3626"><span class="linenum">3626</span></a>  
<a name="l3627"><span class="linenum">3627</span></a>  <span class="comment">        // Autoinsert user's data</span>
<a name="l3628"><span class="linenum">3628</span></a>          <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('mail_autoinsert_user_data')" href="../../../_functions/mail_autoinsert_user_data.html" onMouseOver="funcPopup(event,'mail_autoinsert_user_data')">mail_autoinsert_user_data</a>( <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> );
<a name="l3629"><span class="linenum">3629</span></a>          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('mail_autoinsert_user_data')" href="../../../_functions/mail_autoinsert_user_data.html" onMouseOver="funcPopup(event,'mail_autoinsert_user_data')">mail_autoinsert_user_data</a>( <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> );
<a name="l3630"><span class="linenum">3630</span></a>  
<a name="l3631"><span class="linenum">3631</span></a>          <a class="var it7045" onMouseOver="hilite(7045)" onMouseOut="lolite()" onClick="logVariable('to_email')" href="../../../_variables/to_email.html">$to_email</a> = !empty( <a class="var it7042" onMouseOver="hilite(7042)" onMouseOut="lolite()" onClick="logVariable('force_email_address')" href="../../../_variables/force_email_address.html">$force_email_address</a> ) ? <a class="var it7042" onMouseOver="hilite(7042)" onMouseOut="lolite()" onClick="logVariable('force_email_address')" href="../../../_variables/force_email_address.html">$force_email_address</a> : <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('email')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/email.html">email</a>;
<a name="l3632"><span class="linenum">3632</span></a>  
<a name="l3633"><span class="linenum">3633</span></a>          if( <a class="function" onClick="logFunction('send_mail')" href="../../../_functions/send_mail.html" onMouseOver="funcPopup(event,'send_mail')">send_mail</a>( <a class="var it7045" onMouseOver="hilite(7045)" onMouseOut="lolite()" onClick="logVariable('to_email')" href="../../../_variables/to_email.html">$to_email</a>, NULL, <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>, NULL, NULL, <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../_variables/headers.html">$headers</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l3634"><span class="linenum">3634</span></a>          { // email was sent, update last email settings;
<a name="l3635"><span class="linenum">3635</span></a>              if( isset( <a class="var it7043" onMouseOver="hilite(7043)" onMouseOut="lolite()" onClick="logVariable('email_limit_setting')" href="../../../_variables/email_limit_setting.html">$email_limit_setting</a>, <a class="var it7044" onMouseOver="hilite(7044)" onMouseOut="lolite()" onClick="logVariable('email_counter_setting')" href="../../../_variables/email_counter_setting.html">$email_counter_setting</a> ) )
<a name="l3636"><span class="linenum">3636</span></a>              { // User Settings(email counters) need to be updated
<a name="l3637"><span class="linenum">3637</span></a>                  <a class="function" onClick="logFunction('update_user_email_counter')" href="../../../_functions/update_user_email_counter.html" onMouseOver="funcPopup(event,'update_user_email_counter')">update_user_email_counter</a>( <a class="var it7043" onMouseOver="hilite(7043)" onMouseOut="lolite()" onClick="logVariable('email_limit_setting')" href="../../../_variables/email_limit_setting.html">$email_limit_setting</a>, <a class="var it7044" onMouseOver="hilite(7044)" onMouseOut="lolite()" onClick="logVariable('email_counter_setting')" href="../../../_variables/email_counter_setting.html">$email_counter_setting</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> );
<a name="l3638"><span class="linenum">3638</span></a>              }
<a name="l3639"><span class="linenum">3639</span></a>              return true;
<a name="l3640"><span class="linenum">3640</span></a>          }
<a name="l3641"><span class="linenum">3641</span></a>      }
<a name="l3642"><span class="linenum">3642</span></a>  
<a name="l3643"><span class="linenum">3643</span></a>  <span class="comment">    // No user or email could not be sent</span>
<a name="l3644"><span class="linenum">3644</span></a>      return false;
<a name="l3645"><span class="linenum">3645</span></a>  }
<a name="l3646"><span class="linenum">3646</span></a>  
<a name="l3647"><span class="linenum">3647</span></a>  
<a name="l3648"><span class="linenum">3648</span></a>  <span class="comment">/**</span>
<a name="l3649"><span class="linenum">3649</span></a>  <span class="comment"> * Autoinsert user's data into subject or message of the email</span>
<a name="l3650"><span class="linenum">3650</span></a>  <span class="comment"> *</span>
<a name="l3651"><span class="linenum">3651</span></a>  <span class="comment"> * @param string Text</span>
<a name="l3652"><span class="linenum">3652</span></a>  <span class="comment"> * @param object User</span>
<a name="l3653"><span class="linenum">3653</span></a>  <span class="comment"> * @return string Text</span>
<a name="l3654"><span class="linenum">3654</span></a>  <span class="comment">*/</span>
<a name="l3655"><span class="linenum">3655</span></a>  function <a class="function" onClick="logFunction('mail_autoinsert_user_data')" href="../../../_functions/mail_autoinsert_user_data.html" onMouseOver="funcPopup(event,'mail_autoinsert_user_data')">mail_autoinsert_user_data</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = NULL )
<a name="l3656"><span class="linenum">3656</span></a>  {
<a name="l3657"><span class="linenum">3657</span></a>      if( !<a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> )
<a name="l3658"><span class="linenum">3658</span></a>      {    // No user
<a name="l3659"><span class="linenum">3659</span></a>          return <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>;
<a name="l3660"><span class="linenum">3660</span></a>      }
<a name="l3661"><span class="linenum">3661</span></a>  
<a name="l3662"><span class="linenum">3662</span></a>      <a class="var it7046" onMouseOver="hilite(7046)" onMouseOut="lolite()" onClick="logVariable('rpls_from')" href="../../../_variables/rpls_from.html">$rpls_from</a> = array( '<a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a>$' , '<a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a>$', '<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>$', '<a class="var it729" onMouseOver="hilite(729)" onMouseOut="lolite()" onClick="logVariable('unsubscribe_key')" href="../../../_variables/unsubscribe_key.html">$unsubscribe_key</a>$' );
<a name="l3663"><span class="linenum">3663</span></a>      <a class="var it7047" onMouseOver="hilite(7047)" onMouseOut="lolite()" onClick="logVariable('rpls_to')" href="../../../_variables/rpls_to.html">$rpls_to</a> = array( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('login')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('email')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/email.html">email</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, '<a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('secret_content_start')" href="../../../_variables/secret_content_start.html">$secret_content_start</a>$'.md5( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.<a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('unsubscribe_key')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/unsubscribe_key.html">unsubscribe_key</a> ).'<a class="var it1586" onMouseOver="hilite(1586)" onMouseOut="lolite()" onClick="logVariable('secret_content_end')" href="../../../_variables/secret_content_end.html">$secret_content_end</a>$' );
<a name="l3664"><span class="linenum">3664</span></a>  
<a name="l3665"><span class="linenum">3665</span></a>      return <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it7046" onMouseOver="hilite(7046)" onMouseOut="lolite()" onClick="logVariable('rpls_from')" href="../../../_variables/rpls_from.html">$rpls_from</a>, <a class="var it7047" onMouseOver="hilite(7047)" onMouseOut="lolite()" onClick="logVariable('rpls_to')" href="../../../_variables/rpls_to.html">$rpls_to</a>, <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> );
<a name="l3666"><span class="linenum">3666</span></a>  }
<a name="l3667"><span class="linenum">3667</span></a>  
<a name="l3668"><span class="linenum">3668</span></a>  
<a name="l3669"><span class="linenum">3669</span></a>  <span class="comment">/**</span>
<a name="l3670"><span class="linenum">3670</span></a>  <span class="comment"> * Get a mail message text by template name</span>
<a name="l3671"><span class="linenum">3671</span></a>  <span class="comment"> *</span>
<a name="l3672"><span class="linenum">3672</span></a>  <span class="comment"> * @param string Template name</span>
<a name="l3673"><span class="linenum">3673</span></a>  <span class="comment"> * @param string Email format ( auto | html | text )</span>
<a name="l3674"><span class="linenum">3674</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3675"><span class="linenum">3675</span></a>  <span class="comment"> * @param object User</span>
<a name="l3676"><span class="linenum">3676</span></a>  <span class="comment"> * @return string Mail message</span>
<a name="l3677"><span class="linenum">3677</span></a>  <span class="comment"> */</span>
<a name="l3678"><span class="linenum">3678</span></a>  function <a class="function" onClick="logFunction('mail_template')" href="../../../_functions/mail_template.html" onMouseOver="funcPopup(event,'mail_template')">mail_template</a>( <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>, <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'auto', <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(), <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = NULL )
<a name="l3679"><span class="linenum">3679</span></a>  {
<a name="l3680"><span class="linenum">3680</span></a>      global <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>, <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../../_variables/is_admin_page.html">$is_admin_page</a>;
<a name="l3681"><span class="linenum">3681</span></a>  
<a name="l3682"><span class="linenum">3682</span></a>      if( !empty( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['locale'] ) )
<a name="l3683"><span class="linenum">3683</span></a>      { // Switch to locale for current email template
<a name="l3684"><span class="linenum">3684</span></a>          <a class="function" onClick="logFunction('locale_temp_switch')" href="../../../_functions/locale_temp_switch.html" onMouseOver="funcPopup(event,'locale_temp_switch')">locale_temp_switch</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['locale'] );
<a name="l3685"><span class="linenum">3685</span></a>      }
<a name="l3686"><span class="linenum">3686</span></a>  
<a name="l3687"><span class="linenum">3687</span></a>      <a class="var it7048" onMouseOver="hilite(7048)" onMouseOut="lolite()" onClick="logVariable('value_is_admin_page')" href="../../../_variables/value_is_admin_page.html">$value_is_admin_page</a> = <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../../_variables/is_admin_page.html">$is_admin_page</a>;
<a name="l3688"><span class="linenum">3688</span></a>  <span class="comment">    // Set TRUE to use gender settings from back office</span>
<a name="l3689"><span class="linenum">3689</span></a>      <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l3690"><span class="linenum">3690</span></a>  
<a name="l3691"><span class="linenum">3691</span></a>  <span class="comment">    // Set extension of template</span>
<a name="l3692"><span class="linenum">3692</span></a>      <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('template_exts')" href="../../../_variables/template_exts.html">$template_exts</a> = array();
<a name="l3693"><span class="linenum">3693</span></a>      switch( <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> )
<a name="l3694"><span class="linenum">3694</span></a>      {
<a name="l3695"><span class="linenum">3695</span></a>          case 'auto':
<a name="l3696"><span class="linenum">3696</span></a>  <span class="comment">            // $template_exts['non-mime'] = '.txt.php'; // The area that is ignored by MIME-compliant clients</span>
<a name="l3697"><span class="linenum">3697</span></a>              <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('template_exts')" href="../../../_variables/template_exts.html">$template_exts</a>['text'] = '.txt.php';
<a name="l3698"><span class="linenum">3698</span></a>              <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('template_exts')" href="../../../_variables/template_exts.html">$template_exts</a>['html'] = '.html.php';
<a name="l3699"><span class="linenum">3699</span></a>              <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../../_variables/boundary.html">$boundary</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['boundary'];
<a name="l3700"><span class="linenum">3700</span></a>              <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('boundary_alt')" href="../../../_variables/boundary_alt.html">$boundary_alt</a> = 'b2evo-alt-'.md5( <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>() );
<a name="l3701"><span class="linenum">3701</span></a>              <a class="var it7051" onMouseOver="hilite(7051)" onMouseOut="lolite()" onClick="logVariable('template_headers')" href="../../../_variables/template_headers.html">$template_headers</a> = array(
<a name="l3702"><span class="linenum">3702</span></a>                      'text' =&gt; 'Content-Type: text/plain; charset='.<a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>,
<a name="l3703"><span class="linenum">3703</span></a>                      'html' =&gt; 'Content-Type: text/html; charset='.<a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>,
<a name="l3704"><span class="linenum">3704</span></a>                  );
<a name="l3705"><span class="linenum">3705</span></a>              break;
<a name="l3706"><span class="linenum">3706</span></a>  
<a name="l3707"><span class="linenum">3707</span></a>          case 'html':
<a name="l3708"><span class="linenum">3708</span></a>              <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('template_exts')" href="../../../_variables/template_exts.html">$template_exts</a>['html'] = '.html.php';
<a name="l3709"><span class="linenum">3709</span></a>              break;
<a name="l3710"><span class="linenum">3710</span></a>  
<a name="l3711"><span class="linenum">3711</span></a>          case 'text':
<a name="l3712"><span class="linenum">3712</span></a>              <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('template_exts')" href="../../../_variables/template_exts.html">$template_exts</a>['text'] = '.txt.php';
<a name="l3713"><span class="linenum">3713</span></a>              break;
<a name="l3714"><span class="linenum">3714</span></a>      }
<a name="l3715"><span class="linenum">3715</span></a>  
<a name="l3716"><span class="linenum">3716</span></a>      <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> = '';
<a name="l3717"><span class="linenum">3717</span></a>  
<a name="l3718"><span class="linenum">3718</span></a>      if( isset( <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../../_variables/boundary.html">$boundary</a>, <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('boundary_alt')" href="../../../_variables/boundary_alt.html">$boundary_alt</a> ) )
<a name="l3719"><span class="linenum">3719</span></a>      { // Start new boundary content
<a name="l3720"><span class="linenum">3720</span></a>          <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> .= &quot;\n&quot;.'--'.<a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../../_variables/boundary.html">$boundary</a>.&quot;\n&quot;;
<a name="l3721"><span class="linenum">3721</span></a>          <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> .= 'Content-Type: multipart/alternative; boundary=&quot;'.<a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('boundary_alt')" href="../../../_variables/boundary_alt.html">$boundary_alt</a>.'&quot;'.&quot;\n\n&quot;;
<a name="l3722"><span class="linenum">3722</span></a>      }
<a name="l3723"><span class="linenum">3723</span></a>  
<a name="l3724"><span class="linenum">3724</span></a>      foreach( <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('template_exts')" href="../../../_variables/template_exts.html">$template_exts</a> as <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> =&gt; <a class="var it7053" onMouseOver="hilite(7053)" onMouseOut="lolite()" onClick="logVariable('ext')" href="../../../_variables/ext.html">$ext</a> )
<a name="l3725"><span class="linenum">3725</span></a>      {
<a name="l3726"><span class="linenum">3726</span></a>          if( isset( <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../../_variables/boundary.html">$boundary</a>, <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('boundary_alt')" href="../../../_variables/boundary_alt.html">$boundary_alt</a> ) &amp;&amp; <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> != 'non-mime' )
<a name="l3727"><span class="linenum">3727</span></a>          { // Start new boundary alt content
<a name="l3728"><span class="linenum">3728</span></a>              <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> .= &quot;\n&quot;.'--'.<a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('boundary_alt')" href="../../../_variables/boundary_alt.html">$boundary_alt</a>.&quot;\n&quot;;
<a name="l3729"><span class="linenum">3729</span></a>          }
<a name="l3730"><span class="linenum">3730</span></a>  
<a name="l3731"><span class="linenum">3731</span></a>          if( isset( <a class="var it7051" onMouseOver="hilite(7051)" onMouseOut="lolite()" onClick="logVariable('template_headers')" href="../../../_variables/template_headers.html">$template_headers</a>[ <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ] ) )
<a name="l3732"><span class="linenum">3732</span></a>          { // Header data for each content
<a name="l3733"><span class="linenum">3733</span></a>              <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> .= <a class="var it7051" onMouseOver="hilite(7051)" onMouseOut="lolite()" onClick="logVariable('template_headers')" href="../../../_variables/template_headers.html">$template_headers</a>[ <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ].&quot;\n\n&quot;;
<a name="l3734"><span class="linenum">3734</span></a>          }
<a name="l3735"><span class="linenum">3735</span></a>  
<a name="l3736"><span class="linenum">3736</span></a>  <span class="comment">        // Get mail template</span>
<a name="l3737"><span class="linenum">3737</span></a>          <a class="phpfunction" onClick="logFunction('ob_start')" href="../../../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>();
<a name="l3738"><span class="linenum">3738</span></a>          <a class="function" onClick="logFunction('emailskin_include')" href="../../../_functions/emailskin_include.html" onMouseOver="funcPopup(event,'emailskin_include')">emailskin_include</a>( <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>.<a class="var it7053" onMouseOver="hilite(7053)" onMouseOut="lolite()" onClick="logVariable('ext')" href="../../../_variables/ext.html">$ext</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3739"><span class="linenum">3739</span></a>          <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> .= <a class="phpfunction" onClick="logFunction('ob_get_clean')" href="../../../_functions/ob_get_clean.html" onMouseOver="phpfuncPopup(event,'ob_get_clean')">ob_get_clean</a>();
<a name="l3740"><span class="linenum">3740</span></a>  
<a name="l3741"><span class="linenum">3741</span></a>          if( !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> ) )
<a name="l3742"><span class="linenum">3742</span></a>          { // Replace <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a>$ with gender colored link + icon in HTML format,
<a name="l3743"><span class="linenum">3743</span></a>  <span class="comment">          //   and with simple login text in PLAIN TEXT format</span>
<a name="l3744"><span class="linenum">3744</span></a>              <a class="var it1892" onMouseOver="hilite(1892)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a> = <a class="var it531" onMouseOver="hilite(531)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> == 'html' ? <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_colored_login')" href="../../../_functions/get_colored_login.html" onMouseOver="funcPopup(event,'get_colored_login')">get_colored_login</a>( array( 'mask' =&gt; '<a class="var it3105" onMouseOver="hilite(3105)" onMouseOut="lolite()" onClick="logVariable('avatar')" href="../../../_variables/avatar.html">$avatar</a>$ <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a>$' ) ) : <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('login')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a>;
<a name="l3745"><span class="linenum">3745</span></a>              <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a>$', <a class="var it1892" onMouseOver="hilite(1892)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a>, <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> );
<a name="l3746"><span class="linenum">3746</span></a>          }
<a name="l3747"><span class="linenum">3747</span></a>      }
<a name="l3748"><span class="linenum">3748</span></a>  
<a name="l3749"><span class="linenum">3749</span></a>      if( isset( <a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../../_variables/boundary.html">$boundary</a>, <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('boundary_alt')" href="../../../_variables/boundary_alt.html">$boundary_alt</a> ) )
<a name="l3750"><span class="linenum">3750</span></a>      { // End all boundary contents
<a name="l3751"><span class="linenum">3751</span></a>          <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> .= &quot;\n&quot;.'--'.<a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('boundary_alt')" href="../../../_variables/boundary_alt.html">$boundary_alt</a>.'--'.&quot;\n&quot;;
<a name="l3752"><span class="linenum">3752</span></a>          <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a> .= &quot;\n&quot;.'--'.<a class="var it1074" onMouseOver="hilite(1074)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../../_variables/boundary.html">$boundary</a>.'--'.&quot;\n&quot;;
<a name="l3753"><span class="linenum">3753</span></a>      }
<a name="l3754"><span class="linenum">3754</span></a>  
<a name="l3755"><span class="linenum">3755</span></a>  <span class="comment">    // Return back the value</span>
<a name="l3756"><span class="linenum">3756</span></a>      <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../../_variables/is_admin_page.html">$is_admin_page</a> = <a class="var it7048" onMouseOver="hilite(7048)" onMouseOut="lolite()" onClick="logVariable('value_is_admin_page')" href="../../../_variables/value_is_admin_page.html">$value_is_admin_page</a>;
<a name="l3757"><span class="linenum">3757</span></a>  
<a name="l3758"><span class="linenum">3758</span></a>      if( !empty( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['locale'] ) )
<a name="l3759"><span class="linenum">3759</span></a>      { // Restore previous locale
<a name="l3760"><span class="linenum">3760</span></a>          <a class="function" onClick="logFunction('locale_restore_previous')" href="../../../_functions/locale_restore_previous.html" onMouseOver="funcPopup(event,'locale_restore_previous')">locale_restore_previous</a>();
<a name="l3761"><span class="linenum">3761</span></a>      }
<a name="l3762"><span class="linenum">3762</span></a>  
<a name="l3763"><span class="linenum">3763</span></a>      return <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('template_message')" href="../../../_variables/template_message.html">$template_message</a>;
<a name="l3764"><span class="linenum">3764</span></a>  }
<a name="l3765"><span class="linenum">3765</span></a>  
<a name="l3766"><span class="linenum">3766</span></a>  
<a name="l3767"><span class="linenum">3767</span></a>  <span class="comment">/**</span>
<a name="l3768"><span class="linenum">3768</span></a>  <span class="comment"> * Include email template from folder /skins_email/custom/ or /skins_email/</span>
<a name="l3769"><span class="linenum">3769</span></a>  <span class="comment"> *</span>
<a name="l3770"><span class="linenum">3770</span></a>  <span class="comment"> * @param string Template name</span>
<a name="l3771"><span class="linenum">3771</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3772"><span class="linenum">3772</span></a>  <span class="comment"> */</span>
<a name="l3773"><span class="linenum">3773</span></a>  function <a class="function" onClick="logFunction('emailskin_include')" href="../../../_functions/emailskin_include.html" onMouseOver="funcPopup(event,'emailskin_include')">emailskin_include</a>( <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3774"><span class="linenum">3774</span></a>  {
<a name="l3775"><span class="linenum">3775</span></a>      global <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('emailskins_path')" href="../../../_variables/emailskins_path.html">$emailskins_path</a>, <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../../_variables/is_admin_page.html">$is_admin_page</a>, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>;
<a name="l3776"><span class="linenum">3776</span></a>  
<a name="l3777"><span class="linenum">3777</span></a>      <span class="comment">/**</span>
<a name="l3778"><span class="linenum">3778</span></a>  <span class="comment">    * @var Log</span>
<a name="l3779"><span class="linenum">3779</span></a>  <span class="comment">    */</span>
<a name="l3780"><span class="linenum">3780</span></a>      global <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l3781"><span class="linenum">3781</span></a>      global <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>;
<a name="l3782"><span class="linenum">3782</span></a>  
<a name="l3783"><span class="linenum">3783</span></a>      <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../../_variables/timer_name.html">$timer_name</a> = '<a class="function" onClick="logFunction('emailskin_include')" href="../../../_functions/emailskin_include.html" onMouseOver="funcPopup(event,'emailskin_include')">emailskin_include</a>('.<a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>.')';
<a name="l3784"><span class="linenum">3784</span></a>      <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>( <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../../_variables/timer_name.html">$timer_name</a> );
<a name="l3785"><span class="linenum">3785</span></a>  
<a name="l3786"><span class="linenum">3786</span></a>      <a class="var it605" onMouseOver="hilite(605)" onMouseOut="lolite()" onClick="logVariable('is_customized')" href="../../../_variables/is_customized.html">$is_customized</a> = false;
<a name="l3787"><span class="linenum">3787</span></a>  
<a name="l3788"><span class="linenum">3788</span></a>  <span class="comment">    // Try to include custom template firstly</span>
<a name="l3789"><span class="linenum">3789</span></a>      <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('template_path')" href="../../../_variables/template_path.html">$template_path</a> = <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('emailskins_path')" href="../../../_variables/emailskins_path.html">$emailskins_path</a>.'custom/'.<a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>;
<a name="l3790"><span class="linenum">3790</span></a>      if( <a class="phpfunction" onClick="logFunction('file_exists')" href="../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('template_path')" href="../../../_variables/template_path.html">$template_path</a> ) )
<a name="l3791"><span class="linenum">3791</span></a>      { // Include custom template file if it exists
<a name="l3792"><span class="linenum">3792</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'emailskin_include: '.<a class="function" onClick="logFunction('rel_path_to_base')" href="../../../_functions/rel_path_to_base.html" onMouseOver="funcPopup(event,'rel_path_to_base')">rel_path_to_base</a>( <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('template_path')" href="../../../_variables/template_path.html">$template_path</a> ), 'skins' );
<a name="l3793"><span class="linenum">3793</span></a>          require <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('template_path')" href="../../../_variables/template_path.html">$template_path</a>;
<a name="l3794"><span class="linenum">3794</span></a>  <span class="comment">        // This template is customized, Don't include standard template</span>
<a name="l3795"><span class="linenum">3795</span></a>          <a class="var it605" onMouseOver="hilite(605)" onMouseOut="lolite()" onClick="logVariable('is_customized')" href="../../../_variables/is_customized.html">$is_customized</a> = true;
<a name="l3796"><span class="linenum">3796</span></a>      }
<a name="l3797"><span class="linenum">3797</span></a>  
<a name="l3798"><span class="linenum">3798</span></a>      if( !<a class="var it605" onMouseOver="hilite(605)" onMouseOut="lolite()" onClick="logVariable('is_customized')" href="../../../_variables/is_customized.html">$is_customized</a> )
<a name="l3799"><span class="linenum">3799</span></a>      { // Try to include standard template only if custom template doesn't exist
<a name="l3800"><span class="linenum">3800</span></a>          <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('template_path')" href="../../../_variables/template_path.html">$template_path</a> = <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('emailskins_path')" href="../../../_variables/emailskins_path.html">$emailskins_path</a>.<a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>;
<a name="l3801"><span class="linenum">3801</span></a>          if( <a class="phpfunction" onClick="logFunction('file_exists')" href="../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('template_path')" href="../../../_variables/template_path.html">$template_path</a> ) )
<a name="l3802"><span class="linenum">3802</span></a>          { // Include standard template file if it exists
<a name="l3803"><span class="linenum">3803</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'emailskin_include: '.<a class="function" onClick="logFunction('rel_path_to_base')" href="../../../_functions/rel_path_to_base.html" onMouseOver="funcPopup(event,'rel_path_to_base')">rel_path_to_base</a>( <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('template_path')" href="../../../_variables/template_path.html">$template_path</a> ), 'skins' );
<a name="l3804"><span class="linenum">3804</span></a>              require <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('template_path')" href="../../../_variables/template_path.html">$template_path</a>;
<a name="l3805"><span class="linenum">3805</span></a>          }
<a name="l3806"><span class="linenum">3806</span></a>      }
<a name="l3807"><span class="linenum">3807</span></a>  
<a name="l3808"><span class="linenum">3808</span></a>      <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>( <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../../_variables/timer_name.html">$timer_name</a> );
<a name="l3809"><span class="linenum">3809</span></a>  }
<a name="l3810"><span class="linenum">3810</span></a>  
<a name="l3811"><span class="linenum">3811</span></a>  
<a name="l3812"><span class="linenum">3812</span></a>  <span class="comment">/**</span>
<a name="l3813"><span class="linenum">3813</span></a>  <span class="comment"> * If first parameter evaluates to true printf() gets called using the first parameter</span>
<a name="l3814"><span class="linenum">3814</span></a>  <span class="comment"> * as args and the second parameter as print-pattern</span>
<a name="l3815"><span class="linenum">3815</span></a>  <span class="comment"> *</span>
<a name="l3816"><span class="linenum">3816</span></a>  <span class="comment"> * @param mixed variable to test and output if it's true or $disp_none is given</span>
<a name="l3817"><span class="linenum">3817</span></a>  <span class="comment"> * @param string printf-pattern to use (%s gets replaced by $var)</span>
<a name="l3818"><span class="linenum">3818</span></a>  <span class="comment"> * @param string printf-pattern to use, if $var is numeric and &gt; 1 (%s gets replaced by $var)</span>
<a name="l3819"><span class="linenum">3819</span></a>  <span class="comment"> * @param string printf-pattern to use if $var evaluates to false (%s gets replaced by $var)</span>
<a name="l3820"><span class="linenum">3820</span></a>  <span class="comment"> */</span>
<a name="l3821"><span class="linenum">3821</span></a>  function <a class="function" onClick="logFunction('disp_cond')" href="../../../_functions/disp_cond.html" onMouseOver="funcPopup(event,'disp_cond')">disp_cond</a>( <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a>, <a class="var it7056" onMouseOver="hilite(7056)" onMouseOut="lolite()" onClick="logVariable('disp_one')" href="../../../_variables/disp_one.html">$disp_one</a>, <a class="var it7057" onMouseOver="hilite(7057)" onMouseOut="lolite()" onClick="logVariable('disp_more')" href="../../../_variables/disp_more.html">$disp_more</a> = NULL, <a class="var it7058" onMouseOver="hilite(7058)" onMouseOut="lolite()" onClick="logVariable('disp_none')" href="../../../_variables/disp_none.html">$disp_none</a> = NULL )
<a name="l3822"><span class="linenum">3822</span></a>  {
<a name="l3823"><span class="linenum">3823</span></a>      if( <a class="phpfunction" onClick="logFunction('is_numeric')" href="../../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a>) &amp;&amp; <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a> &gt; 1 )
<a name="l3824"><span class="linenum">3824</span></a>      {
<a name="l3825"><span class="linenum">3825</span></a>          printf( ( <a class="var it7057" onMouseOver="hilite(7057)" onMouseOut="lolite()" onClick="logVariable('disp_more')" href="../../../_variables/disp_more.html">$disp_more</a> === NULL ? <a class="var it7056" onMouseOver="hilite(7056)" onMouseOut="lolite()" onClick="logVariable('disp_one')" href="../../../_variables/disp_one.html">$disp_one</a> : <a class="var it7057" onMouseOver="hilite(7057)" onMouseOut="lolite()" onClick="logVariable('disp_more')" href="../../../_variables/disp_more.html">$disp_more</a> ), <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a> );
<a name="l3826"><span class="linenum">3826</span></a>          return true;
<a name="l3827"><span class="linenum">3827</span></a>      }
<a name="l3828"><span class="linenum">3828</span></a>      elseif( <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a> )
<a name="l3829"><span class="linenum">3829</span></a>      {
<a name="l3830"><span class="linenum">3830</span></a>          printf( <a class="var it7056" onMouseOver="hilite(7056)" onMouseOut="lolite()" onClick="logVariable('disp_one')" href="../../../_variables/disp_one.html">$disp_one</a>, <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a> );
<a name="l3831"><span class="linenum">3831</span></a>          return true;
<a name="l3832"><span class="linenum">3832</span></a>      }
<a name="l3833"><span class="linenum">3833</span></a>      else
<a name="l3834"><span class="linenum">3834</span></a>      {
<a name="l3835"><span class="linenum">3835</span></a>          if( <a class="var it7058" onMouseOver="hilite(7058)" onMouseOut="lolite()" onClick="logVariable('disp_none')" href="../../../_variables/disp_none.html">$disp_none</a> !== NULL )
<a name="l3836"><span class="linenum">3836</span></a>          {
<a name="l3837"><span class="linenum">3837</span></a>              printf( <a class="var it7058" onMouseOver="hilite(7058)" onMouseOut="lolite()" onClick="logVariable('disp_none')" href="../../../_variables/disp_none.html">$disp_none</a>, <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a> );
<a name="l3838"><span class="linenum">3838</span></a>              return false;
<a name="l3839"><span class="linenum">3839</span></a>          }
<a name="l3840"><span class="linenum">3840</span></a>      }
<a name="l3841"><span class="linenum">3841</span></a>  }
<a name="l3842"><span class="linenum">3842</span></a>  
<a name="l3843"><span class="linenum">3843</span></a>  
<a name="l3844"><span class="linenum">3844</span></a>  <span class="comment">/**</span>
<a name="l3845"><span class="linenum">3845</span></a>  <span class="comment"> * Create IMG tag for an action icon.</span>
<a name="l3846"><span class="linenum">3846</span></a>  <span class="comment"> *</span>
<a name="l3847"><span class="linenum">3847</span></a>  <span class="comment"> * @param string TITLE text (IMG and A link)</span>
<a name="l3848"><span class="linenum">3848</span></a>  <span class="comment"> * @param string icon code for {@link get_icon()}</span>
<a name="l3849"><span class="linenum">3849</span></a>  <span class="comment"> * @param string URL where the icon gets linked to (empty to not wrap the icon in a link)</span>
<a name="l3850"><span class="linenum">3850</span></a>  <span class="comment"> * @param string word to be displayed after icon (if no icon gets displayed, $title will be used instead!)</span>
<a name="l3851"><span class="linenum">3851</span></a>  <span class="comment"> * @param integer 1-5: weight of the icon. The icon will be displayed only if its weight is &gt;= than the user setting threshold.</span>
<a name="l3852"><span class="linenum">3852</span></a>  <span class="comment"> *                     Use 5, if it's a required icon - all others could get disabled by the user. (Default: 4)</span>
<a name="l3853"><span class="linenum">3853</span></a>  <span class="comment"> * @param integer 1-5: weight of the word. The word will be displayed only if its weight is &gt;= than the user setting threshold.</span>
<a name="l3854"><span class="linenum">3854</span></a>  <span class="comment"> *                     (Default: 1)</span>
<a name="l3855"><span class="linenum">3855</span></a>  <span class="comment"> * @param array Additional attributes to the A tag. The values must be properly encoded for html output (e.g. quotes).</span>
<a name="l3856"><span class="linenum">3856</span></a>  <span class="comment"> *        It may also contain these params:</span>
<a name="l3857"><span class="linenum">3857</span></a>  <span class="comment"> *         - 'use_js_popup': if true, the link gets opened as JS popup. You must also pass an &quot;id&quot; attribute for this!</span>
<a name="l3858"><span class="linenum">3858</span></a>  <span class="comment"> *         - 'use_js_size': use this to override the default popup size (&quot;500, 400&quot;)</span>
<a name="l3859"><span class="linenum">3859</span></a>  <span class="comment"> *         - 'class': defaults to 'action_icon', if not set; use &quot;&quot; to not use it</span>
<a name="l3860"><span class="linenum">3860</span></a>  <span class="comment"> * @param array Attributes for the icon</span>
<a name="l3861"><span class="linenum">3861</span></a>  <span class="comment"> * @return string The generated action icon link.</span>
<a name="l3862"><span class="linenum">3862</span></a>  <span class="comment"> */</span>
<a name="l3863"><span class="linenum">3863</span></a>  function <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>, <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, <a class="var it1384" onMouseOver="hilite(1384)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../../_variables/word.html">$word</a> = NULL, <a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('icon_weight')" href="../../../_variables/icon_weight.html">$icon_weight</a> = NULL, <a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('word_weight')" href="../../../_variables/word_weight.html">$word_weight</a> = NULL, <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a> = array(), <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('icon_attribs')" href="../../../_variables/icon_attribs.html">$icon_attribs</a> = array() )
<a name="l3864"><span class="linenum">3864</span></a>  {
<a name="l3865"><span class="linenum">3865</span></a>      global <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>;
<a name="l3866"><span class="linenum">3866</span></a>  
<a name="l3867"><span class="linenum">3867</span></a>      <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['href'] = <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l3868"><span class="linenum">3868</span></a>      <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['title'] = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l3869"><span class="linenum">3869</span></a>  
<a name="l3870"><span class="linenum">3870</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('icon_weight')" href="../../../_variables/icon_weight.html">$icon_weight</a>) )
<a name="l3871"><span class="linenum">3871</span></a>      {
<a name="l3872"><span class="linenum">3872</span></a>          <a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('icon_weight')" href="../../../_variables/icon_weight.html">$icon_weight</a> = 4;
<a name="l3873"><span class="linenum">3873</span></a>      }
<a name="l3874"><span class="linenum">3874</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('word_weight')" href="../../../_variables/word_weight.html">$word_weight</a>) )
<a name="l3875"><span class="linenum">3875</span></a>      {
<a name="l3876"><span class="linenum">3876</span></a>          <a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('word_weight')" href="../../../_variables/word_weight.html">$word_weight</a> = 1;
<a name="l3877"><span class="linenum">3877</span></a>      }
<a name="l3878"><span class="linenum">3878</span></a>  
<a name="l3879"><span class="linenum">3879</span></a>      if( ! isset(<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['class']) )
<a name="l3880"><span class="linenum">3880</span></a>      {
<a name="l3881"><span class="linenum">3881</span></a>          <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['class'] = 'action_icon';
<a name="l3882"><span class="linenum">3882</span></a>      }
<a name="l3883"><span class="linenum">3883</span></a>  
<a name="l3884"><span class="linenum">3884</span></a>      if( <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, 'rollover' ) )
<a name="l3885"><span class="linenum">3885</span></a>      {
<a name="l3886"><span class="linenum">3886</span></a>          if( empty(<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['class']) )
<a name="l3887"><span class="linenum">3887</span></a>          {
<a name="l3888"><span class="linenum">3888</span></a>              <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['class'] = 'rollover';
<a name="l3889"><span class="linenum">3889</span></a>          }
<a name="l3890"><span class="linenum">3890</span></a>          else
<a name="l3891"><span class="linenum">3891</span></a>          {
<a name="l3892"><span class="linenum">3892</span></a>              <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['class'] .= ' rollover';
<a name="l3893"><span class="linenum">3893</span></a>          }
<a name="l3894"><span class="linenum">3894</span></a>  
<a name="l3895"><span class="linenum">3895</span></a>          if( <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, 'sprite' ) )
<a name="l3896"><span class="linenum">3896</span></a>          { // Set class &quot;rollover_sprite&quot; If image uses sprite
<a name="l3897"><span class="linenum">3897</span></a>              <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['class'] .= '_sprite';
<a name="l3898"><span class="linenum">3898</span></a>          }
<a name="l3899"><span class="linenum">3899</span></a>      }
<a name="l3900"><span class="linenum">3900</span></a>  <span class="comment">    //$link_attribs['class'] .= $icon != '' ? ' '.$icon : ' noicon';</span>
<a name="l3901"><span class="linenum">3901</span></a>  
<a name="l3902"><span class="linenum">3902</span></a>  <span class="comment">    // &quot;use_js_popup&quot;: open link in a JS popup</span>
<a name="l3903"><span class="linenum">3903</span></a>  <span class="comment">    // TODO: this needs to be rewritten with jQuery instead</span>
<a name="l3904"><span class="linenum">3904</span></a>      if( false &amp;&amp; ! empty(<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['use_js_popup']) )
<a name="l3905"><span class="linenum">3905</span></a>      {
<a name="l3906"><span class="linenum">3906</span></a>          <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('popup_js')" href="../../../_variables/popup_js.html">$popup_js</a> = 'var win = new PopupWindow(); win.setUrl( \''.<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['href'].'\' ); win.<a class="function" onClick="logFunction('setSize')" href="../../../_functions/setsize.html" onMouseOver="funcPopup(event,'setsize')">setSize</a>(  ); ';
<a name="l3907"><span class="linenum">3907</span></a>  
<a name="l3908"><span class="linenum">3908</span></a>          if( isset(<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['use_js_size']) )
<a name="l3909"><span class="linenum">3909</span></a>          {
<a name="l3910"><span class="linenum">3910</span></a>              if( ! empty(<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['use_js_size']) )
<a name="l3911"><span class="linenum">3911</span></a>              {
<a name="l3912"><span class="linenum">3912</span></a>                  <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('popup_size')" href="../../../_variables/popup_size.html">$popup_size</a> = <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['use_js_size'];
<a name="l3913"><span class="linenum">3913</span></a>              }
<a name="l3914"><span class="linenum">3914</span></a>          }
<a name="l3915"><span class="linenum">3915</span></a>          else
<a name="l3916"><span class="linenum">3916</span></a>          {
<a name="l3917"><span class="linenum">3917</span></a>              <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('popup_size')" href="../../../_variables/popup_size.html">$popup_size</a> = '500, 400';
<a name="l3918"><span class="linenum">3918</span></a>          }
<a name="l3919"><span class="linenum">3919</span></a>          if( isset(<a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('popup_size')" href="../../../_variables/popup_size.html">$popup_size</a>) )
<a name="l3920"><span class="linenum">3920</span></a>          {
<a name="l3921"><span class="linenum">3921</span></a>              <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('popup_js')" href="../../../_variables/popup_js.html">$popup_js</a> .= 'win.<a class="function" onClick="logFunction('setSize')" href="../../../_functions/setsize.html" onMouseOver="funcPopup(event,'setsize')">setSize</a>( '.<a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('popup_size')" href="../../../_variables/popup_size.html">$popup_size</a>.' ); ';
<a name="l3922"><span class="linenum">3922</span></a>          }
<a name="l3923"><span class="linenum">3923</span></a>          <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('popup_js')" href="../../../_variables/popup_js.html">$popup_js</a> .= 'win.showPopup(\''.<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['id'].'\'); return false;';
<a name="l3924"><span class="linenum">3924</span></a>  
<a name="l3925"><span class="linenum">3925</span></a>          if( empty( <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['onclick'] ) )
<a name="l3926"><span class="linenum">3926</span></a>          {
<a name="l3927"><span class="linenum">3927</span></a>              <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['onclick'] = <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('popup_js')" href="../../../_variables/popup_js.html">$popup_js</a>;
<a name="l3928"><span class="linenum">3928</span></a>          }
<a name="l3929"><span class="linenum">3929</span></a>          else
<a name="l3930"><span class="linenum">3930</span></a>          {
<a name="l3931"><span class="linenum">3931</span></a>              <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['onclick'] .= <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('popup_js')" href="../../../_variables/popup_js.html">$popup_js</a>;
<a name="l3932"><span class="linenum">3932</span></a>          }
<a name="l3933"><span class="linenum">3933</span></a>          unset(<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['use_js_popup']);
<a name="l3934"><span class="linenum">3934</span></a>          unset(<a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['use_js_size']);
<a name="l3935"><span class="linenum">3935</span></a>      }
<a name="l3936"><span class="linenum">3936</span></a>  
<a name="l3937"><span class="linenum">3937</span></a>      <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('display_icon')" href="../../../_variables/display_icon.html">$display_icon</a> = empty( <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a> ) ? false : (<a class="var it1757" onMouseOver="hilite(1757)" onMouseOut="lolite()" onClick="logVariable('icon_weight')" href="../../../_variables/icon_weight.html">$icon_weight</a> &gt;= <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('action_icon_threshold'));
<a name="l3938"><span class="linenum">3938</span></a>      <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('display_word')" href="../../../_variables/display_word.html">$display_word</a> = empty( <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a> ) ? false : (<a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('word_weight')" href="../../../_variables/word_weight.html">$word_weight</a> &gt;= <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('action_word_threshold'));
<a name="l3939"><span class="linenum">3939</span></a>  
<a name="l3940"><span class="linenum">3940</span></a>      <a class="var it7064" onMouseOver="hilite(7064)" onMouseOut="lolite()" onClick="logVariable('a_body')" href="../../../_variables/a_body.html">$a_body</a> = '';
<a name="l3941"><span class="linenum">3941</span></a>  
<a name="l3942"><span class="linenum">3942</span></a>      if( <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('display_icon')" href="../../../_variables/display_icon.html">$display_icon</a> || ! <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('display_word')" href="../../../_variables/display_word.html">$display_word</a> )
<a name="l3943"><span class="linenum">3943</span></a>      {    // We MUST display an action icon in order to make the user happy:
<a name="l3944"><span class="linenum">3944</span></a>  <span class="comment">        // OR we default to icon because the user doesn't want the word either!!</span>
<a name="l3945"><span class="linenum">3945</span></a>  
<a name="l3946"><span class="linenum">3946</span></a>          <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('icon_attribs')" href="../../../_variables/icon_attribs.html">$icon_attribs</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3947"><span class="linenum">3947</span></a>                  'title' =&gt; <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>
<a name="l3948"><span class="linenum">3948</span></a>              ), <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('icon_attribs')" href="../../../_variables/icon_attribs.html">$icon_attribs</a> );
<a name="l3949"><span class="linenum">3949</span></a>  
<a name="l3950"><span class="linenum">3950</span></a>          if( <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('icon_s')" href="../../../_variables/icon_s.html">$icon_s</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, 'imgtag', <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('icon_attribs')" href="../../../_variables/icon_attribs.html">$icon_attribs</a>, true ) )
<a name="l3951"><span class="linenum">3951</span></a>          {
<a name="l3952"><span class="linenum">3952</span></a>              <a class="var it7064" onMouseOver="hilite(7064)" onMouseOut="lolite()" onClick="logVariable('a_body')" href="../../../_variables/a_body.html">$a_body</a> .= <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('icon_s')" href="../../../_variables/icon_s.html">$icon_s</a>;
<a name="l3953"><span class="linenum">3953</span></a>          }
<a name="l3954"><span class="linenum">3954</span></a>          else
<a name="l3955"><span class="linenum">3955</span></a>          { // fallback to word
<a name="l3956"><span class="linenum">3956</span></a>              <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('display_word')" href="../../../_variables/display_word.html">$display_word</a> = true;
<a name="l3957"><span class="linenum">3957</span></a>          }
<a name="l3958"><span class="linenum">3958</span></a>      }
<a name="l3959"><span class="linenum">3959</span></a>  
<a name="l3960"><span class="linenum">3960</span></a>      if( <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('display_word')" href="../../../_variables/display_word.html">$display_word</a> )
<a name="l3961"><span class="linenum">3961</span></a>      {    // We MUST display an action word in order to make the user happy:
<a name="l3962"><span class="linenum">3962</span></a>  
<a name="l3963"><span class="linenum">3963</span></a>          if( <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('display_icon')" href="../../../_variables/display_icon.html">$display_icon</a> )
<a name="l3964"><span class="linenum">3964</span></a>          { // We already have an icon, display a SHORT word:
<a name="l3965"><span class="linenum">3965</span></a>              if( !empty(<a class="var it1384" onMouseOver="hilite(1384)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../../_variables/word.html">$word</a>) )
<a name="l3966"><span class="linenum">3966</span></a>              {    // We have provided a short word:
<a name="l3967"><span class="linenum">3967</span></a>                  <a class="var it7064" onMouseOver="hilite(7064)" onMouseOut="lolite()" onClick="logVariable('a_body')" href="../../../_variables/a_body.html">$a_body</a> .= <a class="var it1384" onMouseOver="hilite(1384)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../../_variables/word.html">$word</a>;
<a name="l3968"><span class="linenum">3968</span></a>              }
<a name="l3969"><span class="linenum">3969</span></a>              else
<a name="l3970"><span class="linenum">3970</span></a>              {    // We fall back to alt:
<a name="l3971"><span class="linenum">3971</span></a>                  <a class="var it7064" onMouseOver="hilite(7064)" onMouseOut="lolite()" onClick="logVariable('a_body')" href="../../../_variables/a_body.html">$a_body</a> .= <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, 'legend' );
<a name="l3972"><span class="linenum">3972</span></a>              }
<a name="l3973"><span class="linenum">3973</span></a>          }
<a name="l3974"><span class="linenum">3974</span></a>          else
<a name="l3975"><span class="linenum">3975</span></a>          {    // No icon display, let's display a LONG word/text:
<a name="l3976"><span class="linenum">3976</span></a>              <a class="var it7064" onMouseOver="hilite(7064)" onMouseOut="lolite()" onClick="logVariable('a_body')" href="../../../_variables/a_body.html">$a_body</a> .= <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>, ' .!' );
<a name="l3977"><span class="linenum">3977</span></a>          }
<a name="l3978"><span class="linenum">3978</span></a>  
<a name="l3979"><span class="linenum">3979</span></a>  <span class="comment">        // Add class &quot;hoverlink&quot; for icon with text</span>
<a name="l3980"><span class="linenum">3980</span></a>          <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>['class'] .= ' hoverlink';
<a name="l3981"><span class="linenum">3981</span></a>      }
<a name="l3982"><span class="linenum">3982</span></a>  
<a name="l3983"><span class="linenum">3983</span></a>  
<a name="l3984"><span class="linenum">3984</span></a>  <span class="comment">    // NOTE: We do not use format_to_output with get_field_attribs_as_string() here, because it interferes with the Results class (eval() fails on entitied quotes..) (blueyed)</span>
<a name="l3985"><span class="linenum">3985</span></a>      return '&lt;a'.<a class="function" onClick="logFunction('get_field_attribs_as_string')" href="../../../_functions/get_field_attribs_as_string.html" onMouseOver="funcPopup(event,'get_field_attribs_as_string')">get_field_attribs_as_string</a>( <a class="var it1759" onMouseOver="hilite(1759)" onMouseOut="lolite()" onClick="logVariable('link_attribs')" href="../../../_variables/link_attribs.html">$link_attribs</a>, false ).'&gt;'.<a class="var it7064" onMouseOver="hilite(7064)" onMouseOut="lolite()" onClick="logVariable('a_body')" href="../../../_variables/a_body.html">$a_body</a>.'&lt;/a&gt;';
<a name="l3986"><span class="linenum">3986</span></a>  }
<a name="l3987"><span class="linenum">3987</span></a>  
<a name="l3988"><span class="linenum">3988</span></a>  
<a name="l3989"><span class="linenum">3989</span></a>  <span class="comment">/**</span>
<a name="l3990"><span class="linenum">3990</span></a>  <span class="comment"> * Get properties of an icon.</span>
<a name="l3991"><span class="linenum">3991</span></a>  <span class="comment"> *</span>
<a name="l3992"><span class="linenum">3992</span></a>  <span class="comment"> * Note: to get a file type icon, use {@link File::get_icon()} instead.</span>
<a name="l3993"><span class="linenum">3993</span></a>  <span class="comment"> *</span>
<a name="l3994"><span class="linenum">3994</span></a>  <span class="comment"> * @uses get_icon_info()</span>
<a name="l3995"><span class="linenum">3995</span></a>  <span class="comment"> * @param string icon for what? (key)</span>
<a name="l3996"><span class="linenum">3996</span></a>  <span class="comment"> * @param string what to return for that icon ('imgtag', 'alt', 'legend', 'file', 'url', 'size' {@link imgsize()})</span>
<a name="l3997"><span class="linenum">3997</span></a>  <span class="comment"> * @param array additional params</span>
<a name="l3998"><span class="linenum">3998</span></a>  <span class="comment"> *   - 'class' =&gt; class name when getting 'imgtag',</span>
<a name="l3999"><span class="linenum">3999</span></a>  <span class="comment"> *   - 'size' =&gt; param for 'size',</span>
<a name="l4000"><span class="linenum">4000</span></a>  <span class="comment"> *   - 'title' =&gt; title attribute for 'imgtag'</span>
<a name="l4001"><span class="linenum">4001</span></a>  <span class="comment"> * @param boolean true to include this icon into the legend at the bottom of the page (works for 'imgtag' only)</span>
<a name="l4002"><span class="linenum">4002</span></a>  <span class="comment"> * @return mixed False on failure, string on success.</span>
<a name="l4003"><span class="linenum">4003</span></a>  <span class="comment"> */</span>
<a name="l4004"><span class="linenum">4004</span></a>  function <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a>, <a class="var it3316" onMouseOver="hilite(3316)" onMouseOut="lolite()" onClick="logVariable('what')" href="../../../_variables/what.html">$what</a> = 'imgtag', <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = NULL, <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('include_in_legend')" href="../../../_variables/include_in_legend.html">$include_in_legend</a> = false )
<a name="l4005"><span class="linenum">4005</span></a>  {
<a name="l4006"><span class="linenum">4006</span></a>      global <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('admin_subdir')" href="../../../_variables/admin_subdir.html">$admin_subdir</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>, <a class="var it2107" onMouseOver="hilite(2107)" onMouseOut="lolite()" onClick="logVariable('use_strict')" href="../../../_variables/use_strict.html">$use_strict</a>;
<a name="l4007"><span class="linenum">4007</span></a>      global <a class="var it1882" onMouseOver="hilite(1882)" onMouseOut="lolite()" onClick="logVariable('conf_path')" href="../../../_variables/conf_path.html">$conf_path</a>;
<a name="l4008"><span class="linenum">4008</span></a>      global <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('rsc_path')" href="../../../_variables/rsc_path.html">$rsc_path</a>, <a class="var it3313" onMouseOver="hilite(3313)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../../_variables/rsc_uri.html">$rsc_uri</a>;
<a name="l4009"><span class="linenum">4009</span></a>  
<a name="l4010"><span class="linenum">4010</span></a>      if( ! <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('get_icon_info') )
<a name="l4011"><span class="linenum">4011</span></a>      {
<a name="l4012"><span class="linenum">4012</span></a>          require_once <a class="var it1882" onMouseOver="hilite(1882)" onMouseOut="lolite()" onClick="logVariable('conf_path')" href="../../../_variables/conf_path.html">$conf_path</a>.'_icons.php';
<a name="l4013"><span class="linenum">4013</span></a>      }
<a name="l4014"><span class="linenum">4014</span></a>  
<a name="l4015"><span class="linenum">4015</span></a>      <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a> = <a class="function" onClick="logFunction('get_icon_info')" href="../../../_functions/get_icon_info.html" onMouseOver="funcPopup(event,'get_icon_info')">get_icon_info</a>(<a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a>);
<a name="l4016"><span class="linenum">4016</span></a>      if( ! <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a> )
<a name="l4017"><span class="linenum">4017</span></a>      {
<a name="l4018"><span class="linenum">4018</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('No image defined for '.<a class="phpfunction" onClick="logFunction('var_export')" href="../../../_functions/var_export.html" onMouseOver="phpfuncPopup(event,'var_export')">var_export</a>( <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a>, true ).'!', 'icons');
<a name="l4019"><span class="linenum">4019</span></a>          return false;
<a name="l4020"><span class="linenum">4020</span></a>      }
<a name="l4021"><span class="linenum">4021</span></a>  
<a name="l4022"><span class="linenum">4022</span></a>      if( !isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['file'] ) &amp;&amp; <a class="var it3316" onMouseOver="hilite(3316)" onMouseOut="lolite()" onClick="logVariable('what')" href="../../../_variables/what.html">$what</a> != 'imgtag' )
<a name="l4023"><span class="linenum">4023</span></a>      {
<a name="l4024"><span class="linenum">4024</span></a>          <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['file'] = 'icons/icons_sprite.png';
<a name="l4025"><span class="linenum">4025</span></a>      }
<a name="l4026"><span class="linenum">4026</span></a>  
<a name="l4027"><span class="linenum">4027</span></a>      switch( <a class="var it3316" onMouseOver="hilite(3316)" onMouseOut="lolite()" onClick="logVariable('what')" href="../../../_variables/what.html">$what</a> )
<a name="l4028"><span class="linenum">4028</span></a>      {
<a name="l4029"><span class="linenum">4029</span></a>          case 'rollover':
<a name="l4030"><span class="linenum">4030</span></a>              if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['rollover'] ) )
<a name="l4031"><span class="linenum">4031</span></a>              { // Image has rollover available
<a name="l4032"><span class="linenum">4032</span></a>                  global <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('use_glyphicons')" href="../../../_variables/use_glyphicons.html">$use_glyphicons</a>;
<a name="l4033"><span class="linenum">4033</span></a>  
<a name="l4034"><span class="linenum">4034</span></a>                  if( ! empty( <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('use_glyphicons')" href="../../../_variables/use_glyphicons.html">$use_glyphicons</a> ) &amp;&amp; ! empty( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['glyph'] ) )
<a name="l4035"><span class="linenum">4035</span></a>                  { // Glyph icons don't have rollover effect
<a name="l4036"><span class="linenum">4036</span></a>                      return false;
<a name="l4037"><span class="linenum">4037</span></a>                  }
<a name="l4038"><span class="linenum">4038</span></a>                  return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['rollover'];
<a name="l4039"><span class="linenum">4039</span></a>              }
<a name="l4040"><span class="linenum">4040</span></a>              return false;
<a name="l4041"><span class="linenum">4041</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4042"><span class="linenum">4042</span></a>  
<a name="l4043"><span class="linenum">4043</span></a>  
<a name="l4044"><span class="linenum">4044</span></a>          case 'file':
<a name="l4045"><span class="linenum">4045</span></a>              return <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('rsc_path')" href="../../../_variables/rsc_path.html">$rsc_path</a>.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['file'];
<a name="l4046"><span class="linenum">4046</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4047"><span class="linenum">4047</span></a>  
<a name="l4048"><span class="linenum">4048</span></a>  
<a name="l4049"><span class="linenum">4049</span></a>          case 'alt':
<a name="l4050"><span class="linenum">4050</span></a>              if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'] ) )
<a name="l4051"><span class="linenum">4051</span></a>              { // alt tag from <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('map_iconfiles')" href="../../../_variables/map_iconfiles.html">$map_iconfiles</a>
<a name="l4052"><span class="linenum">4052</span></a>                  return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'];
<a name="l4053"><span class="linenum">4053</span></a>              }
<a name="l4054"><span class="linenum">4054</span></a>              else
<a name="l4055"><span class="linenum">4055</span></a>              { // fallback to <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a> as alt-tag
<a name="l4056"><span class="linenum">4056</span></a>                  return <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a>;
<a name="l4057"><span class="linenum">4057</span></a>              }
<a name="l4058"><span class="linenum">4058</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4059"><span class="linenum">4059</span></a>  
<a name="l4060"><span class="linenum">4060</span></a>  
<a name="l4061"><span class="linenum">4061</span></a>          case 'legend':
<a name="l4062"><span class="linenum">4062</span></a>              if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['legend'] ) )
<a name="l4063"><span class="linenum">4063</span></a>              { // legend tag from <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('map_iconfiles')" href="../../../_variables/map_iconfiles.html">$map_iconfiles</a>
<a name="l4064"><span class="linenum">4064</span></a>                  return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['legend'];
<a name="l4065"><span class="linenum">4065</span></a>              }
<a name="l4066"><span class="linenum">4066</span></a>              else
<a name="l4067"><span class="linenum">4067</span></a>              if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'] ) )
<a name="l4068"><span class="linenum">4068</span></a>              { // alt tag from <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('map_iconfiles')" href="../../../_variables/map_iconfiles.html">$map_iconfiles</a>
<a name="l4069"><span class="linenum">4069</span></a>                  return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'];
<a name="l4070"><span class="linenum">4070</span></a>              }
<a name="l4071"><span class="linenum">4071</span></a>              else
<a name="l4072"><span class="linenum">4072</span></a>              { // fallback to <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a> as alt-tag
<a name="l4073"><span class="linenum">4073</span></a>                  return <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a>;
<a name="l4074"><span class="linenum">4074</span></a>              }
<a name="l4075"><span class="linenum">4075</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4076"><span class="linenum">4076</span></a>  
<a name="l4077"><span class="linenum">4077</span></a>  
<a name="l4078"><span class="linenum">4078</span></a>          case 'class':
<a name="l4079"><span class="linenum">4079</span></a>              if( isset(<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['class']) )
<a name="l4080"><span class="linenum">4080</span></a>              {
<a name="l4081"><span class="linenum">4081</span></a>                  return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['class'];
<a name="l4082"><span class="linenum">4082</span></a>              }
<a name="l4083"><span class="linenum">4083</span></a>              else
<a name="l4084"><span class="linenum">4084</span></a>              {
<a name="l4085"><span class="linenum">4085</span></a>                  return '';
<a name="l4086"><span class="linenum">4086</span></a>              }
<a name="l4087"><span class="linenum">4087</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4088"><span class="linenum">4088</span></a>  
<a name="l4089"><span class="linenum">4089</span></a>          case 'url':
<a name="l4090"><span class="linenum">4090</span></a>              return <a class="var it3313" onMouseOver="hilite(3313)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../../_variables/rsc_uri.html">$rsc_uri</a>.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['file'];
<a name="l4091"><span class="linenum">4091</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4092"><span class="linenum">4092</span></a>  
<a name="l4093"><span class="linenum">4093</span></a>          case 'size':
<a name="l4094"><span class="linenum">4094</span></a>              if( !isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'] ) )
<a name="l4095"><span class="linenum">4095</span></a>              {
<a name="l4096"><span class="linenum">4096</span></a>                  <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'No iconsize for ['.<a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a>.']', 'icons' );
<a name="l4097"><span class="linenum">4097</span></a>  
<a name="l4098"><span class="linenum">4098</span></a>                  <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'] = <a class="function" onClick="logFunction('imgsize')" href="../../../_functions/imgsize.html" onMouseOver="funcPopup(event,'imgsize')">imgsize</a>( <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('rsc_path')" href="../../../_variables/rsc_path.html">$rsc_path</a>.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['file'] );
<a name="l4099"><span class="linenum">4099</span></a>              }
<a name="l4100"><span class="linenum">4100</span></a>  
<a name="l4101"><span class="linenum">4101</span></a>              switch( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['size'] )
<a name="l4102"><span class="linenum">4102</span></a>              {
<a name="l4103"><span class="linenum">4103</span></a>                  case 'width':
<a name="l4104"><span class="linenum">4104</span></a>                      return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][0];
<a name="l4105"><span class="linenum">4105</span></a>  
<a name="l4106"><span class="linenum">4106</span></a>                  case 'height':
<a name="l4107"><span class="linenum">4107</span></a>                      return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][1];
<a name="l4108"><span class="linenum">4108</span></a>  
<a name="l4109"><span class="linenum">4109</span></a>                  case 'widthxheight':
<a name="l4110"><span class="linenum">4110</span></a>                      return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][0].'x'.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][1];
<a name="l4111"><span class="linenum">4111</span></a>  
<a name="l4112"><span class="linenum">4112</span></a>                  case 'width':
<a name="l4113"><span class="linenum">4113</span></a>                      return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][0];
<a name="l4114"><span class="linenum">4114</span></a>  
<a name="l4115"><span class="linenum">4115</span></a>                  case 'string':
<a name="l4116"><span class="linenum">4116</span></a>                      return 'width=&quot;'.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][0].'&quot; height=&quot;'.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][1].'&quot;';
<a name="l4117"><span class="linenum">4117</span></a>  
<a name="l4118"><span class="linenum">4118</span></a>                  default:
<a name="l4119"><span class="linenum">4119</span></a>                      return <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'];
<a name="l4120"><span class="linenum">4120</span></a>              }
<a name="l4121"><span class="linenum">4121</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4122"><span class="linenum">4122</span></a>  
<a name="l4123"><span class="linenum">4123</span></a>  
<a name="l4124"><span class="linenum">4124</span></a>          case 'xy':
<a name="l4125"><span class="linenum">4125</span></a>              if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['xy'] ) )
<a name="l4126"><span class="linenum">4126</span></a>              { // Return data for style property &quot;background-position&quot;
<a name="l4127"><span class="linenum">4127</span></a>                  return &quot;-&quot;.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['xy'][0].&quot;px -&quot;.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['xy'][1].&quot;px&quot;;
<a name="l4128"><span class="linenum">4128</span></a>              }
<a name="l4129"><span class="linenum">4129</span></a>              return false;
<a name="l4130"><span class="linenum">4130</span></a>  
<a name="l4131"><span class="linenum">4131</span></a>  
<a name="l4132"><span class="linenum">4132</span></a>          case 'sprite':
<a name="l4133"><span class="linenum">4133</span></a>              if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['xy'] ) )
<a name="l4134"><span class="linenum">4134</span></a>              {    // Image uses spite file
<a name="l4135"><span class="linenum">4135</span></a>                  return true;
<a name="l4136"><span class="linenum">4136</span></a>              }
<a name="l4137"><span class="linenum">4137</span></a>              return false;
<a name="l4138"><span class="linenum">4138</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4139"><span class="linenum">4139</span></a>  
<a name="l4140"><span class="linenum">4140</span></a>  
<a name="l4141"><span class="linenum">4141</span></a>          case 'imgtag':
<a name="l4142"><span class="linenum">4142</span></a>              global <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('use_glyphicons')" href="../../../_variables/use_glyphicons.html">$use_glyphicons</a>;
<a name="l4143"><span class="linenum">4143</span></a>  
<a name="l4144"><span class="linenum">4144</span></a>              if( ! empty( <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('use_glyphicons')" href="../../../_variables/use_glyphicons.html">$use_glyphicons</a> ) &amp;&amp; ! empty( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['glyph'] ) )
<a name="l4145"><span class="linenum">4145</span></a>              { // Use glyph icon if it is defined in icons config
<a name="l4146"><span class="linenum">4146</span></a>                  if( isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) )
<a name="l4147"><span class="linenum">4147</span></a>                  { // Get class from params
<a name="l4148"><span class="linenum">4148</span></a>                      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] = 'glyphicon glyphicon-'.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['glyph'].' '.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'];
<a name="l4149"><span class="linenum">4149</span></a>                  }
<a name="l4150"><span class="linenum">4150</span></a>                  else
<a name="l4151"><span class="linenum">4151</span></a>                  { // Set default class
<a name="l4152"><span class="linenum">4152</span></a>                      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] = 'glyphicon glyphicon-'.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['glyph'];
<a name="l4153"><span class="linenum">4153</span></a>                  }
<a name="l4154"><span class="linenum">4154</span></a>  
<a name="l4155"><span class="linenum">4155</span></a>                  if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['color'] ) )
<a name="l4156"><span class="linenum">4156</span></a>                  { // Set a color for icon
<a name="l4157"><span class="linenum">4157</span></a>                      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['style'] = 'color:'.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['color'];
<a name="l4158"><span class="linenum">4158</span></a>                  }
<a name="l4159"><span class="linenum">4159</span></a>  
<a name="l4160"><span class="linenum">4160</span></a>                  if( ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] ) )
<a name="l4161"><span class="linenum">4161</span></a>                  { // Use 'alt' for 'title'
<a name="l4162"><span class="linenum">4162</span></a>                      if( isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] ) )
<a name="l4163"><span class="linenum">4163</span></a>                      {
<a name="l4164"><span class="linenum">4164</span></a>                          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'];
<a name="l4165"><span class="linenum">4165</span></a>                          unset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] );
<a name="l4166"><span class="linenum">4166</span></a>                      }
<a name="l4167"><span class="linenum">4167</span></a>                      else if( ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] ) &amp;&amp; isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'] ) )
<a name="l4168"><span class="linenum">4168</span></a>                      {
<a name="l4169"><span class="linenum">4169</span></a>                          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'];
<a name="l4170"><span class="linenum">4170</span></a>                      }
<a name="l4171"><span class="linenum">4171</span></a>                  }
<a name="l4172"><span class="linenum">4172</span></a>  
<a name="l4173"><span class="linenum">4173</span></a>  <span class="comment">                // Add all the attributes:</span>
<a name="l4174"><span class="linenum">4174</span></a>                  <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="function" onClick="logFunction('get_field_attribs_as_string')" href="../../../_functions/get_field_attribs_as_string.html" onMouseOver="funcPopup(event,'get_field_attribs_as_string')">get_field_attribs_as_string</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, false );
<a name="l4175"><span class="linenum">4175</span></a>  
<a name="l4176"><span class="linenum">4176</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;span'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>.'&gt;&amp;nbsp;&lt;/span&gt;';
<a name="l4177"><span class="linenum">4177</span></a>              }
<a name="l4178"><span class="linenum">4178</span></a>              elseif( ! isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['file'] ) )
<a name="l4179"><span class="linenum">4179</span></a>              { // Use span tag with sprite instead of img
<a name="l4180"><span class="linenum">4180</span></a>                  <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('styles')" href="../../../_variables/styles.html">$styles</a> = array();
<a name="l4181"><span class="linenum">4181</span></a>  
<a name="l4182"><span class="linenum">4182</span></a>                  if( isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['xy'] ) )
<a name="l4183"><span class="linenum">4183</span></a>                  { // Get background position from params
<a name="l4184"><span class="linenum">4184</span></a>                      <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('styles')" href="../../../_variables/styles.html">$styles</a>[] = &quot;background-position: &quot;.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['xy'][0].&quot;px &quot;.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['xy'][1].&quot;px&quot;;
<a name="l4185"><span class="linenum">4185</span></a>                      unset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['xy'] );
<a name="l4186"><span class="linenum">4186</span></a>                  }
<a name="l4187"><span class="linenum">4187</span></a>                  else if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['xy'] ) )
<a name="l4188"><span class="linenum">4188</span></a>                  { // Set background position in the icons_sprite.png
<a name="l4189"><span class="linenum">4189</span></a>                      <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('styles')" href="../../../_variables/styles.html">$styles</a>[] = &quot;background-position: -&quot;.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['xy'][0].&quot;px -&quot;.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['xy'][1].&quot;px&quot;;
<a name="l4190"><span class="linenum">4190</span></a>                  }
<a name="l4191"><span class="linenum">4191</span></a>  
<a name="l4192"><span class="linenum">4192</span></a>                  if( isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['size'] ) )
<a name="l4193"><span class="linenum">4193</span></a>                  { // Get sizes from params
<a name="l4194"><span class="linenum">4194</span></a>                      <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'] = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['size'];
<a name="l4195"><span class="linenum">4195</span></a>                      unset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['size'] );
<a name="l4196"><span class="linenum">4196</span></a>                  }
<a name="l4197"><span class="linenum">4197</span></a>                  if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'] ) )
<a name="l4198"><span class="linenum">4198</span></a>                  { // Set width &amp; height
<a name="l4199"><span class="linenum">4199</span></a>                      if( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][0] != 16 )
<a name="l4200"><span class="linenum">4200</span></a>                      {
<a name="l4201"><span class="linenum">4201</span></a>                          <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('styles')" href="../../../_variables/styles.html">$styles</a>[] = &quot;width: &quot;.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][0].&quot;px&quot;;
<a name="l4202"><span class="linenum">4202</span></a>                      }
<a name="l4203"><span class="linenum">4203</span></a>                      if( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][1] != 16 )
<a name="l4204"><span class="linenum">4204</span></a>                      {
<a name="l4205"><span class="linenum">4205</span></a>                          <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('styles')" href="../../../_variables/styles.html">$styles</a>[] = &quot;height: &quot;.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][1].&quot;px; line-height: &quot;.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][1].&quot;px&quot;;
<a name="l4206"><span class="linenum">4206</span></a>                      }
<a name="l4207"><span class="linenum">4207</span></a>                  }
<a name="l4208"><span class="linenum">4208</span></a>  
<a name="l4209"><span class="linenum">4209</span></a>                  if( isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['style'] ) )
<a name="l4210"><span class="linenum">4210</span></a>                  { // Get styles from params
<a name="l4211"><span class="linenum">4211</span></a>                      <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('styles')" href="../../../_variables/styles.html">$styles</a>[] = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['style'];
<a name="l4212"><span class="linenum">4212</span></a>                  }
<a name="l4213"><span class="linenum">4213</span></a>                  if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('styles')" href="../../../_variables/styles.html">$styles</a> ) &gt; 0 )
<a name="l4214"><span class="linenum">4214</span></a>                  {
<a name="l4215"><span class="linenum">4215</span></a>                      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['style'] = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '; ', <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('styles')" href="../../../_variables/styles.html">$styles</a>);
<a name="l4216"><span class="linenum">4216</span></a>                  }
<a name="l4217"><span class="linenum">4217</span></a>  
<a name="l4218"><span class="linenum">4218</span></a>                  if( ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] ) )
<a name="l4219"><span class="linenum">4219</span></a>                  {    // Use 'alt' for 'title'
<a name="l4220"><span class="linenum">4220</span></a>                      if( isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] ) )
<a name="l4221"><span class="linenum">4221</span></a>                      {
<a name="l4222"><span class="linenum">4222</span></a>                          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'];
<a name="l4223"><span class="linenum">4223</span></a>                          unset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] );
<a name="l4224"><span class="linenum">4224</span></a>                      }
<a name="l4225"><span class="linenum">4225</span></a>                      else if( ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] ) &amp;&amp; isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'] ) )
<a name="l4226"><span class="linenum">4226</span></a>                      {
<a name="l4227"><span class="linenum">4227</span></a>                          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'] = <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'];
<a name="l4228"><span class="linenum">4228</span></a>                      }
<a name="l4229"><span class="linenum">4229</span></a>                  }
<a name="l4230"><span class="linenum">4230</span></a>  
<a name="l4231"><span class="linenum">4231</span></a>                  if( isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) )
<a name="l4232"><span class="linenum">4232</span></a>                  {    // Get class from params
<a name="l4233"><span class="linenum">4233</span></a>                      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] = 'icon '.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'];
<a name="l4234"><span class="linenum">4234</span></a>                  }
<a name="l4235"><span class="linenum">4235</span></a>                  else
<a name="l4236"><span class="linenum">4236</span></a>                  {    // Set default class
<a name="l4237"><span class="linenum">4237</span></a>                      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] = 'icon';
<a name="l4238"><span class="linenum">4238</span></a>                  }
<a name="l4239"><span class="linenum">4239</span></a>  
<a name="l4240"><span class="linenum">4240</span></a>  <span class="comment">                // Add all the attributes:</span>
<a name="l4241"><span class="linenum">4241</span></a>                  <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="function" onClick="logFunction('get_field_attribs_as_string')" href="../../../_functions/get_field_attribs_as_string.html" onMouseOver="funcPopup(event,'get_field_attribs_as_string')">get_field_attribs_as_string</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, false );
<a name="l4242"><span class="linenum">4242</span></a>  
<a name="l4243"><span class="linenum">4243</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;span'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>.'&gt;&amp;nbsp;&lt;/span&gt;';
<a name="l4244"><span class="linenum">4244</span></a>              }
<a name="l4245"><span class="linenum">4245</span></a>              else
<a name="l4246"><span class="linenum">4246</span></a>              { // Use img tag
<a name="l4247"><span class="linenum">4247</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;img src=&quot;'.<a class="var it3313" onMouseOver="hilite(3313)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../../_variables/rsc_uri.html">$rsc_uri</a>.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['file'].'&quot; ';
<a name="l4248"><span class="linenum">4248</span></a>  
<a name="l4249"><span class="linenum">4249</span></a>                  if( !<a class="var it2107" onMouseOver="hilite(2107)" onMouseOut="lolite()" onClick="logVariable('use_strict')" href="../../../_variables/use_strict.html">$use_strict</a> )
<a name="l4250"><span class="linenum">4250</span></a>                  {    // Include non CSS fallbacks - transitional only:
<a name="l4251"><span class="linenum">4251</span></a>                      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= 'border=&quot;0&quot; align=&quot;top&quot; ';
<a name="l4252"><span class="linenum">4252</span></a>                  }
<a name="l4253"><span class="linenum">4253</span></a>  
<a name="l4254"><span class="linenum">4254</span></a>  <span class="comment">                // Include class (will default to &quot;icon&quot;):</span>
<a name="l4255"><span class="linenum">4255</span></a>                  if( ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) )
<a name="l4256"><span class="linenum">4256</span></a>                  {
<a name="l4257"><span class="linenum">4257</span></a>                      if( isset(<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['class']) )
<a name="l4258"><span class="linenum">4258</span></a>                      {    // This icon has a class
<a name="l4259"><span class="linenum">4259</span></a>                          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] = <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['class'];
<a name="l4260"><span class="linenum">4260</span></a>                      }
<a name="l4261"><span class="linenum">4261</span></a>                      else
<a name="l4262"><span class="linenum">4262</span></a>                      {
<a name="l4263"><span class="linenum">4263</span></a>                          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] = '';
<a name="l4264"><span class="linenum">4264</span></a>                      }
<a name="l4265"><span class="linenum">4265</span></a>                  }
<a name="l4266"><span class="linenum">4266</span></a>  
<a name="l4267"><span class="linenum">4267</span></a>  <span class="comment">                // Include size (optional):</span>
<a name="l4268"><span class="linenum">4268</span></a>                  if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'] ) )
<a name="l4269"><span class="linenum">4269</span></a>                  {
<a name="l4270"><span class="linenum">4270</span></a>                      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= 'width=&quot;'.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][0].'&quot; height=&quot;'.<a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'][1].'&quot; ';
<a name="l4271"><span class="linenum">4271</span></a>                  }
<a name="l4272"><span class="linenum">4272</span></a>  
<a name="l4273"><span class="linenum">4273</span></a>  <span class="comment">                // Include alt (XHTML mandatory):</span>
<a name="l4274"><span class="linenum">4274</span></a>                  if( ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] ) )
<a name="l4275"><span class="linenum">4275</span></a>                  {
<a name="l4276"><span class="linenum">4276</span></a>                      if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'] ) )
<a name="l4277"><span class="linenum">4277</span></a>                      { // alt-tag from <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('map_iconfiles')" href="../../../_variables/map_iconfiles.html">$map_iconfiles</a>
<a name="l4278"><span class="linenum">4278</span></a>                          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] = <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['alt'];
<a name="l4279"><span class="linenum">4279</span></a>                      }
<a name="l4280"><span class="linenum">4280</span></a>                      else
<a name="l4281"><span class="linenum">4281</span></a>                      { // <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a> as alt-tag
<a name="l4282"><span class="linenum">4282</span></a>                          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['alt'] = <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a>;
<a name="l4283"><span class="linenum">4283</span></a>                      }
<a name="l4284"><span class="linenum">4284</span></a>                  }
<a name="l4285"><span class="linenum">4285</span></a>  
<a name="l4286"><span class="linenum">4286</span></a>  <span class="comment">                // Add all the attributes:</span>
<a name="l4287"><span class="linenum">4287</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('get_field_attribs_as_string')" href="../../../_functions/get_field_attribs_as_string.html" onMouseOver="funcPopup(event,'get_field_attribs_as_string')">get_field_attribs_as_string</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, false );
<a name="l4288"><span class="linenum">4288</span></a>  
<a name="l4289"><span class="linenum">4289</span></a>  <span class="comment">                // Close tag:</span>
<a name="l4290"><span class="linenum">4290</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '/&gt;';
<a name="l4291"><span class="linenum">4291</span></a>  
<a name="l4292"><span class="linenum">4292</span></a>  
<a name="l4293"><span class="linenum">4293</span></a>                  if( <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('include_in_legend')" href="../../../_variables/include_in_legend.html">$include_in_legend</a> &amp;&amp; ( <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('IconLegend')" href="../../../_variables/IconLegend.html">$IconLegend</a> = &amp; get_IconLegend() ) )
<a name="l4294"><span class="linenum">4294</span></a>                  { // This icon should be included into the legend:
<a name="l4295"><span class="linenum">4295</span></a>                      <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('IconLegend')" href="../../../_variables/IconLegend.html">$IconLegend</a>-&gt;<a class="function" onClick="logFunction('add_icon')" href="../../../_functions/add_icon.html" onMouseOver="funcPopup(event,'add_icon')">add_icon</a>( <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('iconKey')" href="../../../_variables/iconKey.html">$iconKey</a> );
<a name="l4296"><span class="linenum">4296</span></a>                  }
<a name="l4297"><span class="linenum">4297</span></a>              }
<a name="l4298"><span class="linenum">4298</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4299"><span class="linenum">4299</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4300"><span class="linenum">4300</span></a>  
<a name="l4301"><span class="linenum">4301</span></a>          case 'noimg':
<a name="l4302"><span class="linenum">4302</span></a>  <span class="comment">            // Include size (optional):</span>
<a name="l4303"><span class="linenum">4303</span></a>              if( isset( <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'] ) )
<a name="l4304"><span class="linenum">4304</span></a>              {
<a name="l4305"><span class="linenum">4305</span></a>                  <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['size'] = <a class="var it316" onMouseOver="hilite(316)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>['size'];
<a name="l4306"><span class="linenum">4306</span></a>              }
<a name="l4307"><span class="linenum">4307</span></a>              <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['style'] = 'margin: 0 2px';
<a name="l4308"><span class="linenum">4308</span></a>  
<a name="l4309"><span class="linenum">4309</span></a>              return <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'pixel', 'imgtag', <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4310"><span class="linenum">4310</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4311"><span class="linenum">4311</span></a>              <span class="comment">/*</span>
<a name="l4312"><span class="linenum">4312</span></a>  <span class="comment">            $blank_icon = get_icon_info('pixel');</span>
<a name="l4313"><span class="linenum">4313</span></a>  <span class="comment"></span>
<a name="l4314"><span class="linenum">4314</span></a>  <span class="comment">            $r = '&lt;img src=&quot;'.$rsc_uri.$blank_icon['file'].'&quot; ';</span>
<a name="l4315"><span class="linenum">4315</span></a>  <span class="comment"></span>
<a name="l4316"><span class="linenum">4316</span></a>  <span class="comment">            // TODO: dh&gt; add this only for !$use_strict, like above?</span>
<a name="l4317"><span class="linenum">4317</span></a>  <span class="comment">            // Include non CSS fallbacks (needed by bozos... and basic skin):</span>
<a name="l4318"><span class="linenum">4318</span></a>  <span class="comment">            $r .= 'border=&quot;0&quot; align=&quot;top&quot; ';</span>
<a name="l4319"><span class="linenum">4319</span></a>  <span class="comment"></span>
<a name="l4320"><span class="linenum">4320</span></a>  <span class="comment">            // Include class (will default to &quot;noicon&quot;):</span>
<a name="l4321"><span class="linenum">4321</span></a>  <span class="comment">            if( ! isset( $params['class'] ) )</span>
<a name="l4322"><span class="linenum">4322</span></a>  <span class="comment">            {</span>
<a name="l4323"><span class="linenum">4323</span></a>  <span class="comment">                if( isset($icon['class']) )</span>
<a name="l4324"><span class="linenum">4324</span></a>  <span class="comment">                {    // This icon has a class</span>
<a name="l4325"><span class="linenum">4325</span></a>  <span class="comment">                    $params['class'] = $icon['class'];</span>
<a name="l4326"><span class="linenum">4326</span></a>  <span class="comment">                }</span>
<a name="l4327"><span class="linenum">4327</span></a>  <span class="comment">                else</span>
<a name="l4328"><span class="linenum">4328</span></a>  <span class="comment">                {</span>
<a name="l4329"><span class="linenum">4329</span></a>  <span class="comment">                    $params['class'] = 'no_icon';</span>
<a name="l4330"><span class="linenum">4330</span></a>  <span class="comment">                }</span>
<a name="l4331"><span class="linenum">4331</span></a>  <span class="comment">            }</span>
<a name="l4332"><span class="linenum">4332</span></a>  <span class="comment"></span>
<a name="l4333"><span class="linenum">4333</span></a>  <span class="comment">            // Include size (optional):</span>
<a name="l4334"><span class="linenum">4334</span></a>  <span class="comment">            if( isset( $icon['size'] ) )</span>
<a name="l4335"><span class="linenum">4335</span></a>  <span class="comment">            {</span>
<a name="l4336"><span class="linenum">4336</span></a>  <span class="comment">                $r .= 'width=&quot;'.$icon['size'][0].'&quot; height=&quot;'.$icon['size'][1].'&quot; ';</span>
<a name="l4337"><span class="linenum">4337</span></a>  <span class="comment">            }</span>
<a name="l4338"><span class="linenum">4338</span></a>  <span class="comment"></span>
<a name="l4339"><span class="linenum">4339</span></a>  <span class="comment">            // Include alt (XHTML mandatory):</span>
<a name="l4340"><span class="linenum">4340</span></a>  <span class="comment">            if( ! isset( $params['alt'] ) )</span>
<a name="l4341"><span class="linenum">4341</span></a>  <span class="comment">            {</span>
<a name="l4342"><span class="linenum">4342</span></a>  <span class="comment">                $params['alt'] = '';</span>
<a name="l4343"><span class="linenum">4343</span></a>  <span class="comment">            }</span>
<a name="l4344"><span class="linenum">4344</span></a>  <span class="comment"></span>
<a name="l4345"><span class="linenum">4345</span></a>  <span class="comment">            // Add all the attributes:</span>
<a name="l4346"><span class="linenum">4346</span></a>  <span class="comment">            $r .= get_field_attribs_as_string( $params, false );</span>
<a name="l4347"><span class="linenum">4347</span></a>  <span class="comment"></span>
<a name="l4348"><span class="linenum">4348</span></a>  <span class="comment">            // Close tag:</span>
<a name="l4349"><span class="linenum">4349</span></a>  <span class="comment">            $r .= '/&gt;';</span>
<a name="l4350"><span class="linenum">4350</span></a>  <span class="comment"></span>
<a name="l4351"><span class="linenum">4351</span></a>  <span class="comment">            return $r;*/</span>
<a name="l4352"><span class="linenum">4352</span></a>  <span class="comment">            /* BREAK */</span>
<a name="l4353"><span class="linenum">4353</span></a>      }
<a name="l4354"><span class="linenum">4354</span></a>  }
<a name="l4355"><span class="linenum">4355</span></a>  
<a name="l4356"><span class="linenum">4356</span></a>  
<a name="l4357"><span class="linenum">4357</span></a>  <span class="comment">/**</span>
<a name="l4358"><span class="linenum">4358</span></a>  <span class="comment"> * @param string date (YYYY-MM-DD)</span>
<a name="l4359"><span class="linenum">4359</span></a>  <span class="comment"> * @param string time</span>
<a name="l4360"><span class="linenum">4360</span></a>  <span class="comment"> */</span>
<a name="l4361"><span class="linenum">4361</span></a>  function <a class="function" onClick="logFunction('form_date')" href="../../../_functions/form_date.html" onMouseOver="funcPopup(event,'form_date')">form_date</a>( <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>, <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../../_variables/time.html">$time</a> = '' )
<a name="l4362"><span class="linenum">4362</span></a>  {
<a name="l4363"><span class="linenum">4363</span></a>      return <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>.'          ', 0, 10 ).' '.<a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../../_variables/time.html">$time</a>;
<a name="l4364"><span class="linenum">4364</span></a>  }
<a name="l4365"><span class="linenum">4365</span></a>  
<a name="l4366"><span class="linenum">4366</span></a>  
<a name="l4367"><span class="linenum">4367</span></a>  <span class="comment">/**</span>
<a name="l4368"><span class="linenum">4368</span></a>  <span class="comment"> * Get list of client IP addresses from REMOTE_ADDR and HTTP_X_FORWARDED_FOR,</span>
<a name="l4369"><span class="linenum">4369</span></a>  <span class="comment"> * in this order. '' is used when no IP could be found.</span>
<a name="l4370"><span class="linenum">4370</span></a>  <span class="comment"> *</span>
<a name="l4371"><span class="linenum">4371</span></a>  <span class="comment"> * @param boolean True, to get only the first IP (probably REMOTE_ADDR)</span>
<a name="l4372"><span class="linenum">4372</span></a>  <span class="comment"> * @param boolean True, to convert IPv6 to IPv4 format</span>
<a name="l4373"><span class="linenum">4373</span></a>  <span class="comment"> * @return array|string Depends on first param.</span>
<a name="l4374"><span class="linenum">4374</span></a>  <span class="comment"> */</span>
<a name="l4375"><span class="linenum">4375</span></a>  function <a class="function" onClick="logFunction('get_ip_list')" href="../../../_functions/get_ip_list.html" onMouseOver="funcPopup(event,'get_ip_list')">get_ip_list</a>( <a class="var it7073" onMouseOver="hilite(7073)" onMouseOut="lolite()" onClick="logVariable('firstOnly')" href="../../../_variables/firstOnly.html">$firstOnly</a> = false, <a class="var it7074" onMouseOver="hilite(7074)" onMouseOut="lolite()" onClick="logVariable('convert_to_ipv4')" href="../../../_variables/convert_to_ipv4.html">$convert_to_ipv4</a> = false )
<a name="l4376"><span class="linenum">4376</span></a>  {
<a name="l4377"><span class="linenum">4377</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array();
<a name="l4378"><span class="linenum">4378</span></a>  
<a name="l4379"><span class="linenum">4379</span></a>      if( ! empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REMOTE_ADDR'] ) )
<a name="l4380"><span class="linenum">4380</span></a>      {
<a name="l4381"><span class="linenum">4381</span></a>          foreach( <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REMOTE_ADDR'] ) as <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> )
<a name="l4382"><span class="linenum">4382</span></a>          {
<a name="l4383"><span class="linenum">4383</span></a>              <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> );
<a name="l4384"><span class="linenum">4384</span></a>              if( ! empty( <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> ) )
<a name="l4385"><span class="linenum">4385</span></a>              {
<a name="l4386"><span class="linenum">4386</span></a>                  if( <a class="var it7074" onMouseOver="hilite(7074)" onMouseOut="lolite()" onClick="logVariable('convert_to_ipv4')" href="../../../_variables/convert_to_ipv4.html">$convert_to_ipv4</a> )
<a name="l4387"><span class="linenum">4387</span></a>                  { // Convert IP address to IPv4 <a class="function" onClick="logFunction('format')" href="../../../_functions/format.html" onMouseOver="funcPopup(event,'format')">format</a>(if it is in IPv6 format)
<a name="l4388"><span class="linenum">4388</span></a>                      <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> = <a class="function" onClick="logFunction('int2ip')" href="../../../_functions/int2ip.html" onMouseOver="funcPopup(event,'int2ip')">int2ip</a>( <a class="function" onClick="logFunction('ip2int')" href="../../../_functions/ip2int.html" onMouseOver="funcPopup(event,'ip2int')">ip2int</a>( <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> ) );
<a name="l4389"><span class="linenum">4389</span></a>                  }
<a name="l4390"><span class="linenum">4390</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>[] = <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a>;
<a name="l4391"><span class="linenum">4391</span></a>              }
<a name="l4392"><span class="linenum">4392</span></a>          }
<a name="l4393"><span class="linenum">4393</span></a>      }
<a name="l4394"><span class="linenum">4394</span></a>  
<a name="l4395"><span class="linenum">4395</span></a>      if( ! empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['HTTP_X_FORWARDED_FOR'] ) )
<a name="l4396"><span class="linenum">4396</span></a>      { // IP(s) behind Proxy - this can be easily forged!
<a name="l4397"><span class="linenum">4397</span></a>          foreach( <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['HTTP_X_FORWARDED_FOR'] ) as <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> )
<a name="l4398"><span class="linenum">4398</span></a>          {
<a name="l4399"><span class="linenum">4399</span></a>              <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> );
<a name="l4400"><span class="linenum">4400</span></a>              if( ! empty( <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> ) &amp;&amp; <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> != 'unknown' )
<a name="l4401"><span class="linenum">4401</span></a>              {
<a name="l4402"><span class="linenum">4402</span></a>                  if( <a class="var it7074" onMouseOver="hilite(7074)" onMouseOut="lolite()" onClick="logVariable('convert_to_ipv4')" href="../../../_variables/convert_to_ipv4.html">$convert_to_ipv4</a> )
<a name="l4403"><span class="linenum">4403</span></a>                  { // Convert IP address to IPv4 <a class="function" onClick="logFunction('format')" href="../../../_functions/format.html" onMouseOver="funcPopup(event,'format')">format</a>(if it is in IPv6 format)
<a name="l4404"><span class="linenum">4404</span></a>                      <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> = <a class="function" onClick="logFunction('int2ip')" href="../../../_functions/int2ip.html" onMouseOver="funcPopup(event,'int2ip')">int2ip</a>( <a class="function" onClick="logFunction('ip2int')" href="../../../_functions/ip2int.html" onMouseOver="funcPopup(event,'ip2int')">ip2int</a>( <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a> ) );
<a name="l4405"><span class="linenum">4405</span></a>                  }
<a name="l4406"><span class="linenum">4406</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>[] = <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('l_ip')" href="../../../_variables/l_ip.html">$l_ip</a>;
<a name="l4407"><span class="linenum">4407</span></a>              }
<a name="l4408"><span class="linenum">4408</span></a>          }
<a name="l4409"><span class="linenum">4409</span></a>      }
<a name="l4410"><span class="linenum">4410</span></a>  
<a name="l4411"><span class="linenum">4411</span></a>      if( ! isset( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>[0] ) )
<a name="l4412"><span class="linenum">4412</span></a>      { // No IP found.
<a name="l4413"><span class="linenum">4413</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>[] = '';
<a name="l4414"><span class="linenum">4414</span></a>      }
<a name="l4415"><span class="linenum">4415</span></a>  
<a name="l4416"><span class="linenum">4416</span></a>  <span class="comment">    // Remove the duplicates</span>
<a name="l4417"><span class="linenum">4417</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l4418"><span class="linenum">4418</span></a>  
<a name="l4419"><span class="linenum">4419</span></a>      return <a class="var it7073" onMouseOver="hilite(7073)" onMouseOut="lolite()" onClick="logVariable('firstOnly')" href="../../../_variables/firstOnly.html">$firstOnly</a> ? <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>[0] : <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4420"><span class="linenum">4420</span></a>  }
<a name="l4421"><span class="linenum">4421</span></a>  
<a name="l4422"><span class="linenum">4422</span></a>  
<a name="l4423"><span class="linenum">4423</span></a>  <span class="comment">/**</span>
<a name="l4424"><span class="linenum">4424</span></a>  <span class="comment"> * Get list of IP addresses with link to back-office page if User has an access</span>
<a name="l4425"><span class="linenum">4425</span></a>  <span class="comment"> *</span>
<a name="l4426"><span class="linenum">4426</span></a>  <span class="comment"> * @param object|NULL User</span>
<a name="l4427"><span class="linenum">4427</span></a>  <span class="comment"> * @param array|NULL List of IP addresses</span>
<a name="l4428"><span class="linenum">4428</span></a>  <span class="comment"> * @param string Text of link, Use '#' to display IP address</span>
<a name="l4429"><span class="linenum">4429</span></a>  <span class="comment"> * @return array List of IP addresses</span>
<a name="l4430"><span class="linenum">4430</span></a>  <span class="comment"> */</span>
<a name="l4431"><span class="linenum">4431</span></a>  function <a class="function" onClick="logFunction('get_linked_ip_list')" href="../../../_functions/get_linked_ip_list.html" onMouseOver="funcPopup(event,'get_linked_ip_list')">get_linked_ip_list</a>( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a> = NULL, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = NULL, <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a> = '#' )
<a name="l4432"><span class="linenum">4432</span></a>  {
<a name="l4433"><span class="linenum">4433</span></a>      if( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> === NULL )
<a name="l4434"><span class="linenum">4434</span></a>      { // Get current User by default
<a name="l4435"><span class="linenum">4435</span></a>          global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l4436"><span class="linenum">4436</span></a>          <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> = &amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l4437"><span class="linenum">4437</span></a>      }
<a name="l4438"><span class="linenum">4438</span></a>  
<a name="l4439"><span class="linenum">4439</span></a>      if( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a> === NULL )
<a name="l4440"><span class="linenum">4440</span></a>      { // Get IP addresses by function <a class="function" onClick="logFunction('get_ip_list')" href="../../../_functions/get_ip_list.html" onMouseOver="funcPopup(event,'get_ip_list')">get_ip_list</a>()
<a name="l4441"><span class="linenum">4441</span></a>          <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a> = <a class="function" onClick="logFunction('get_ip_list')" href="../../../_functions/get_ip_list.html" onMouseOver="funcPopup(event,'get_ip_list')">get_ip_list</a>( false, true );
<a name="l4442"><span class="linenum">4442</span></a>      }
<a name="l4443"><span class="linenum">4443</span></a>  
<a name="l4444"><span class="linenum">4444</span></a>      if( ! empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a> ) &amp;&amp;
<a name="l4445"><span class="linenum">4445</span></a>          <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) &amp;&amp;
<a name="l4446"><span class="linenum">4446</span></a>          <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'spamblacklist', 'view' ) )
<a name="l4447"><span class="linenum">4447</span></a>      { // User has an access to backoffice, Display a link for each IP address
<a name="l4448"><span class="linenum">4448</span></a>          global <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l4449"><span class="linenum">4449</span></a>          foreach( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a> as <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> =&gt; <a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('ip_address')" href="../../../_variables/ip_address.html">$ip_address</a> )
<a name="l4450"><span class="linenum">4450</span></a>          {
<a name="l4451"><span class="linenum">4451</span></a>              if( <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a> == '#' )
<a name="l4452"><span class="linenum">4452</span></a>              { // Use IP address aslink text
<a name="l4453"><span class="linenum">4453</span></a>                  <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a> = <a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('ip_address')" href="../../../_variables/ip_address.html">$ip_address</a>;
<a name="l4454"><span class="linenum">4454</span></a>              }
<a name="l4455"><span class="linenum">4455</span></a>              <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a>[ <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> ] = '&lt;a href=&quot;'.<a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=antispam&amp;amp;tab3=ipranges&amp;amp;ip_address='.<a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('ip_address')" href="../../../_variables/ip_address.html">$ip_address</a>.'&quot;&gt;'.<a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a>.'&lt;/a&gt;';
<a name="l4456"><span class="linenum">4456</span></a>          }
<a name="l4457"><span class="linenum">4457</span></a>      }
<a name="l4458"><span class="linenum">4458</span></a>  
<a name="l4459"><span class="linenum">4459</span></a>      return <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('ip_list')" href="../../../_variables/ip_list.html">$ip_list</a>;
<a name="l4460"><span class="linenum">4460</span></a>  }
<a name="l4461"><span class="linenum">4461</span></a>  
<a name="l4462"><span class="linenum">4462</span></a>  
<a name="l4463"><span class="linenum">4463</span></a>  <span class="comment">/**</span>
<a name="l4464"><span class="linenum">4464</span></a>  <span class="comment"> * Get the base domain (without protocol and any subdomain) of an URL.</span>
<a name="l4465"><span class="linenum">4465</span></a>  <span class="comment"> *</span>
<a name="l4466"><span class="linenum">4466</span></a>  <span class="comment"> * Gets a max of 3 domain parts (x.y.tld)</span>
<a name="l4467"><span class="linenum">4467</span></a>  <span class="comment"> *</span>
<a name="l4468"><span class="linenum">4468</span></a>  <span class="comment"> * @param string URL</span>
<a name="l4469"><span class="linenum">4469</span></a>  <span class="comment"> * @return string the base domain (may become empty, if found invalid)</span>
<a name="l4470"><span class="linenum">4470</span></a>  <span class="comment"> */</span>
<a name="l4471"><span class="linenum">4471</span></a>  function <a class="function" onClick="logFunction('get_base_domain')" href="../../../_functions/get_base_domain.html" onMouseOver="funcPopup(event,'get_base_domain')">get_base_domain</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> )
<a name="l4472"><span class="linenum">4472</span></a>  {
<a name="l4473"><span class="linenum">4473</span></a>      global <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l4474"><span class="linenum">4474</span></a>  
<a name="l4475"><span class="linenum">4475</span></a>  <span class="comment">    //echo '&lt;p&gt;'.$url;</span>
<a name="l4476"><span class="linenum">4476</span></a>  <span class="comment">    // Chop away the http part and the path:</span>
<a name="l4477"><span class="linenum">4477</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~^([a-z]+://)?([^:/#]+)(.*)$~i', '\\2', <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> );
<a name="l4478"><span class="linenum">4478</span></a>  
<a name="l4479"><span class="linenum">4479</span></a>      if( empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a>) || <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~^(\d+\.)+\d+$~', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a> ) )
<a name="l4480"><span class="linenum">4480</span></a>      {    // Empty or All numeric = IP address, don't try to cut it any further
<a name="l4481"><span class="linenum">4481</span></a>          return <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a>;
<a name="l4482"><span class="linenum">4482</span></a>      }
<a name="l4483"><span class="linenum">4483</span></a>  
<a name="l4484"><span class="linenum">4484</span></a>  <span class="comment">    //echo '&lt;br&gt;'.$domain;</span>
<a name="l4485"><span class="linenum">4485</span></a>  
<a name="l4486"><span class="linenum">4486</span></a>  <span class="comment">    // Get the base domain up to 3 levels (x.y.tld):</span>
<a name="l4487"><span class="linenum">4487</span></a>  <span class="comment">    // NOTE: &quot;_&quot; is not really valid, but for Windows it is..</span>
<a name="l4488"><span class="linenum">4488</span></a>  <span class="comment">    // NOTE: \w includes &quot;_&quot;</span>
<a name="l4489"><span class="linenum">4489</span></a>  
<a name="l4490"><span class="linenum">4490</span></a>  <span class="comment">    // convert URL to IDN:</span>
<a name="l4491"><span class="linenum">4491</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a> = <a class="function" onClick="logFunction('idna_encode')" href="../../../_functions/idna_encode.html" onMouseOver="funcPopup(event,'idna_encode')">idna_encode</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a>);
<a name="l4492"><span class="linenum">4492</span></a>  
<a name="l4493"><span class="linenum">4493</span></a>      <a class="var it3865" onMouseOver="hilite(3865)" onMouseOut="lolite()" onClick="logVariable('domain_pattern')" href="../../../_variables/domain_pattern.html">$domain_pattern</a> = '~ ( \w (\w|-|_)* \. ){0,2}   \w (\w|-|_)* $~ix';
<a name="l4494"><span class="linenum">4494</span></a>      if( ! <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( <a class="var it3865" onMouseOver="hilite(3865)" onMouseOut="lolite()" onClick="logVariable('domain_pattern')" href="../../../_variables/domain_pattern.html">$domain_pattern</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a> ) )
<a name="l4495"><span class="linenum">4495</span></a>      {
<a name="l4496"><span class="linenum">4496</span></a>          return '';
<a name="l4497"><span class="linenum">4497</span></a>      }
<a name="l4498"><span class="linenum">4498</span></a>      <a class="var it166" onMouseOver="hilite(166)" onMouseOut="lolite()" onClick="logVariable('base_domain')" href="../../../_variables/base_domain.html">$base_domain</a> = <a class="function" onClick="logFunction('convert_charset')" href="../../../_functions/convert_charset.html" onMouseOver="funcPopup(event,'convert_charset')">convert_charset</a>(<a class="function" onClick="logFunction('idna_decode')" href="../../../_functions/idna_decode.html" onMouseOver="funcPopup(event,'idna_decode')">idna_decode</a>(<a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a>[0]), <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../_variables/evo_charset.html">$evo_charset</a>, 'UTF-8');
<a name="l4499"><span class="linenum">4499</span></a>  
<a name="l4500"><span class="linenum">4500</span></a>  <span class="comment">    // Remove any www. prefix:</span>
<a name="l4501"><span class="linenum">4501</span></a>      <a class="var it166" onMouseOver="hilite(166)" onMouseOut="lolite()" onClick="logVariable('base_domain')" href="../../../_variables/base_domain.html">$base_domain</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~^www\.~i', '', <a class="var it166" onMouseOver="hilite(166)" onMouseOut="lolite()" onClick="logVariable('base_domain')" href="../../../_variables/base_domain.html">$base_domain</a> );
<a name="l4502"><span class="linenum">4502</span></a>  
<a name="l4503"><span class="linenum">4503</span></a>  <span class="comment">    //echo '&lt;br&gt;'.$base_domain.'&lt;/p&gt;';</span>
<a name="l4504"><span class="linenum">4504</span></a>  
<a name="l4505"><span class="linenum">4505</span></a>      return <a class="var it166" onMouseOver="hilite(166)" onMouseOut="lolite()" onClick="logVariable('base_domain')" href="../../../_variables/base_domain.html">$base_domain</a>;
<a name="l4506"><span class="linenum">4506</span></a>  }
<a name="l4507"><span class="linenum">4507</span></a>  
<a name="l4508"><span class="linenum">4508</span></a>  
<a name="l4509"><span class="linenum">4509</span></a>  <span class="comment">/**</span>
<a name="l4510"><span class="linenum">4510</span></a>  <span class="comment"> * Generate a valid key of size $length.</span>
<a name="l4511"><span class="linenum">4511</span></a>  <span class="comment"> *</span>
<a name="l4512"><span class="linenum">4512</span></a>  <span class="comment"> * @param integer length of key</span>
<a name="l4513"><span class="linenum">4513</span></a>  <span class="comment"> * @param string chars to use in generated key</span>
<a name="l4514"><span class="linenum">4514</span></a>  <span class="comment"> * @return string key</span>
<a name="l4515"><span class="linenum">4515</span></a>  <span class="comment"> */</span>
<a name="l4516"><span class="linenum">4516</span></a>  function <a class="function" onClick="logFunction('generate_random_key')" href="../../../_functions/generate_random_key.html" onMouseOver="funcPopup(event,'generate_random_key')">generate_random_key</a>( <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> = 32, <a class="var it7076" onMouseOver="hilite(7076)" onMouseOut="lolite()" onClick="logVariable('keychars')" href="../../../_variables/keychars.html">$keychars</a> = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789' )
<a name="l4517"><span class="linenum">4517</span></a>  {
<a name="l4518"><span class="linenum">4518</span></a>      <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> = '';
<a name="l4519"><span class="linenum">4519</span></a>      <a class="var it7077" onMouseOver="hilite(7077)" onMouseOut="lolite()" onClick="logVariable('rnd_max')" href="../../../_variables/rnd_max.html">$rnd_max</a> = strlen(<a class="var it7076" onMouseOver="hilite(7076)" onMouseOut="lolite()" onClick="logVariable('keychars')" href="../../../_variables/keychars.html">$keychars</a>) - 1;
<a name="l4520"><span class="linenum">4520</span></a>  
<a name="l4521"><span class="linenum">4521</span></a>      for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt; <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ )
<a name="l4522"><span class="linenum">4522</span></a>      {
<a name="l4523"><span class="linenum">4523</span></a>          <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> .= <a class="var it7076" onMouseOver="hilite(7076)" onMouseOut="lolite()" onClick="logVariable('keychars')" href="../../../_variables/keychars.html">$keychars</a>{<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>(0, <a class="var it7077" onMouseOver="hilite(7077)" onMouseOut="lolite()" onClick="logVariable('rnd_max')" href="../../../_variables/rnd_max.html">$rnd_max</a>)}; <span class="comment">// get a random character out of $keychars</span>
<a name="l4524"><span class="linenum">4524</span></a>      }
<a name="l4525"><span class="linenum">4525</span></a>  
<a name="l4526"><span class="linenum">4526</span></a>      return <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>;
<a name="l4527"><span class="linenum">4527</span></a>  }
<a name="l4528"><span class="linenum">4528</span></a>  
<a name="l4529"><span class="linenum">4529</span></a>  
<a name="l4530"><span class="linenum">4530</span></a>  <span class="comment">/**</span>
<a name="l4531"><span class="linenum">4531</span></a>  <span class="comment"> * Generate a random password with no ambiguous chars</span>
<a name="l4532"><span class="linenum">4532</span></a>  <span class="comment"> *</span>
<a name="l4533"><span class="linenum">4533</span></a>  <span class="comment"> * @param integer length of password</span>
<a name="l4534"><span class="linenum">4534</span></a>  <span class="comment"> * @return string password</span>
<a name="l4535"><span class="linenum">4535</span></a>  <span class="comment"> */</span>
<a name="l4536"><span class="linenum">4536</span></a>  function <a class="function" onClick="logFunction('generate_random_passwd')" href="../../../_functions/generate_random_passwd.html" onMouseOver="funcPopup(event,'generate_random_passwd')">generate_random_passwd</a>( <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> = NULL )
<a name="l4537"><span class="linenum">4537</span></a>  {
<a name="l4538"><span class="linenum">4538</span></a>  <span class="comment">    // fp&gt; NOTE: do not include any characters that would make autogenerated passwords ambiguous</span>
<a name="l4539"><span class="linenum">4539</span></a>  <span class="comment">    // 1 (one) vs l (L) vs I (i)</span>
<a name="l4540"><span class="linenum">4540</span></a>  <span class="comment">    // O (letter) vs 0 (digit)</span>
<a name="l4541"><span class="linenum">4541</span></a>  
<a name="l4542"><span class="linenum">4542</span></a>      if( empty(<a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a>) )
<a name="l4543"><span class="linenum">4543</span></a>      {
<a name="l4544"><span class="linenum">4544</span></a>          <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>( 8, 14 );
<a name="l4545"><span class="linenum">4545</span></a>      }
<a name="l4546"><span class="linenum">4546</span></a>  
<a name="l4547"><span class="linenum">4547</span></a>      return <a class="function" onClick="logFunction('generate_random_key')" href="../../../_functions/generate_random_key.html" onMouseOver="funcPopup(event,'generate_random_key')">generate_random_key</a>( <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a>, 'abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ23456789' );
<a name="l4548"><span class="linenum">4548</span></a>  }
<a name="l4549"><span class="linenum">4549</span></a>  
<a name="l4550"><span class="linenum">4550</span></a>  
<a name="l4551"><span class="linenum">4551</span></a>  function <a class="function" onClick="logFunction('is_create_action')" href="../../../_functions/is_create_action.html" onMouseOver="funcPopup(event,'is_create_action')">is_create_action</a>( <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> )
<a name="l4552"><span class="linenum">4552</span></a>  {
<a name="l4553"><span class="linenum">4553</span></a>      <a class="var it7078" onMouseOver="hilite(7078)" onMouseOut="lolite()" onClick="logVariable('action_parts')" href="../../../_variables/action_parts.html">$action_parts</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( '_', <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> );
<a name="l4554"><span class="linenum">4554</span></a>  
<a name="l4555"><span class="linenum">4555</span></a>      switch( <a class="var it7078" onMouseOver="hilite(7078)" onMouseOut="lolite()" onClick="logVariable('action_parts')" href="../../../_variables/action_parts.html">$action_parts</a>[0] )
<a name="l4556"><span class="linenum">4556</span></a>      {
<a name="l4557"><span class="linenum">4557</span></a>          case 'new':
<a name="l4558"><span class="linenum">4558</span></a>          case 'new_switchtab':
<a name="l4559"><span class="linenum">4559</span></a>          case 'copy':
<a name="l4560"><span class="linenum">4560</span></a>          case 'create':    // we return in this state after a validation error
<a name="l4561"><span class="linenum">4561</span></a>              return true;
<a name="l4562"><span class="linenum">4562</span></a>  
<a name="l4563"><span class="linenum">4563</span></a>          case 'edit':
<a name="l4564"><span class="linenum">4564</span></a>          case 'edit_switchtab':
<a name="l4565"><span class="linenum">4565</span></a>          case 'update':    // we return in this state after a validation error
<a name="l4566"><span class="linenum">4566</span></a>          case 'delete':
<a name="l4567"><span class="linenum">4567</span></a>  <span class="comment">        // The following one's a bit far fetched, but can happen if we have no sheet display:</span>
<a name="l4568"><span class="linenum">4568</span></a>          case 'unlink':
<a name="l4569"><span class="linenum">4569</span></a>          case 'view':
<a name="l4570"><span class="linenum">4570</span></a>              return false;
<a name="l4571"><span class="linenum">4571</span></a>  
<a name="l4572"><span class="linenum">4572</span></a>          default:
<a name="l4573"><span class="linenum">4573</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Unhandled action in form: '.<a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it7078" onMouseOver="hilite(7078)" onMouseOut="lolite()" onClick="logVariable('action_parts')" href="../../../_variables/action_parts.html">$action_parts</a>[0]) );
<a name="l4574"><span class="linenum">4574</span></a>      }
<a name="l4575"><span class="linenum">4575</span></a>  }
<a name="l4576"><span class="linenum">4576</span></a>  
<a name="l4577"><span class="linenum">4577</span></a>  
<a name="l4578"><span class="linenum">4578</span></a>  <span class="comment">/**</span>
<a name="l4579"><span class="linenum">4579</span></a>  <span class="comment"> * Compact a date in a number keeping only integer value of the string</span>
<a name="l4580"><span class="linenum">4580</span></a>  <span class="comment"> *</span>
<a name="l4581"><span class="linenum">4581</span></a>  <span class="comment"> * @param string date</span>
<a name="l4582"><span class="linenum">4582</span></a>  <span class="comment"> */</span>
<a name="l4583"><span class="linenum">4583</span></a>  function <a class="function" onClick="logFunction('compact_date')" href="../../../_functions/compact_date.html" onMouseOver="funcPopup(event,'compact_date')">compact_date</a>( <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> )
<a name="l4584"><span class="linenum">4584</span></a>  {
<a name="l4585"><span class="linenum">4585</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '#[^0-9]#', '', <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> );
<a name="l4586"><span class="linenum">4586</span></a>  }
<a name="l4587"><span class="linenum">4587</span></a>  
<a name="l4588"><span class="linenum">4588</span></a>  
<a name="l4589"><span class="linenum">4589</span></a>  <span class="comment">/**</span>
<a name="l4590"><span class="linenum">4590</span></a>  <span class="comment"> * Decompact a date in a date format ( Y-m-d h:m:s )</span>
<a name="l4591"><span class="linenum">4591</span></a>  <span class="comment"> *</span>
<a name="l4592"><span class="linenum">4592</span></a>  <span class="comment"> * @param string date</span>
<a name="l4593"><span class="linenum">4593</span></a>  <span class="comment"> */</span>
<a name="l4594"><span class="linenum">4594</span></a>  function <a class="function" onClick="logFunction('decompact_date')" href="../../../_functions/decompact_date.html" onMouseOver="funcPopup(event,'decompact_date')">decompact_date</a>( <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> )
<a name="l4595"><span class="linenum">4595</span></a>  {
<a name="l4596"><span class="linenum">4596</span></a>      <a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('date0')" href="../../../_variables/date0.html">$date0</a> = <a class="var it678" onMouseOver="hilite(678)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>;
<a name="l4597"><span class="linenum">4597</span></a>  
<a name="l4598"><span class="linenum">4598</span></a>      return  <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('date0')" href="../../../_variables/date0.html">$date0</a>,0,4).'-'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('date0')" href="../../../_variables/date0.html">$date0</a>,4,2).'-'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('date0')" href="../../../_variables/date0.html">$date0</a>,6,2).' '
<a name="l4599"><span class="linenum">4599</span></a>                                  .<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('date0')" href="../../../_variables/date0.html">$date0</a>,8,2).':'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('date0')" href="../../../_variables/date0.html">$date0</a>,10,2).':'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('date0')" href="../../../_variables/date0.html">$date0</a>,12,2);
<a name="l4600"><span class="linenum">4600</span></a>  }
<a name="l4601"><span class="linenum">4601</span></a>  
<a name="l4602"><span class="linenum">4602</span></a>  <span class="comment">/**</span>
<a name="l4603"><span class="linenum">4603</span></a>  <span class="comment"> * Check the format of the phone number param and</span>
<a name="l4604"><span class="linenum">4604</span></a>  <span class="comment"> * format it in a french number if it is.</span>
<a name="l4605"><span class="linenum">4605</span></a>  <span class="comment"> *</span>
<a name="l4606"><span class="linenum">4606</span></a>  <span class="comment"> * @param string phone number</span>
<a name="l4607"><span class="linenum">4607</span></a>  <span class="comment"> */</span>
<a name="l4608"><span class="linenum">4608</span></a>  function <a class="function" onClick="logFunction('format_phone')" href="../../../_functions/format_phone.html" onMouseOver="funcPopup(event,'format_phone')">format_phone</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, <a class="var it7080" onMouseOver="hilite(7080)" onMouseOut="lolite()" onClick="logVariable('hide_country_dialing_code_if_same_as_locale')" href="../../../_variables/hide_country_dialing_code_if_same_as_locale.html">$hide_country_dialing_code_if_same_as_locale</a> = true )
<a name="l4609"><span class="linenum">4609</span></a>  {
<a name="l4610"><span class="linenum">4610</span></a>      global <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('CountryCache')" href="../../../_variables/CountryCache.html">$CountryCache</a>;
<a name="l4611"><span class="linenum">4611</span></a>  
<a name="l4612"><span class="linenum">4612</span></a>      <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> = NULL;
<a name="l4613"><span class="linenum">4613</span></a>  
<a name="l4614"><span class="linenum">4614</span></a>      if( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, 0, 1 ) == '+' )
<a name="l4615"><span class="linenum">4615</span></a>      {    // We have a dialing code in the phone, so we extract it:
<a name="l4616"><span class="linenum">4616</span></a>          <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> = <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('CountryCache')" href="../../../_variables/CountryCache.html">$CountryCache</a>-&gt;extract_country_dialing_code( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, 1 ) );
<a name="l4617"><span class="linenum">4617</span></a>      }
<a name="l4618"><span class="linenum">4618</span></a>  
<a name="l4619"><span class="linenum">4619</span></a>      if( !<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> ) &amp;&amp; ( <a class="function" onClick="logFunction('locale_dialing_code')" href="../../../_functions/locale_dialing_code.html" onMouseOver="funcPopup(event,'locale_dialing_code')">locale_dialing_code</a>() == <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> )
<a name="l4620"><span class="linenum">4620</span></a>              &amp;&amp; <a class="var it7080" onMouseOver="hilite(7080)" onMouseOut="lolite()" onClick="logVariable('hide_country_dialing_code_if_same_as_locale')" href="../../../_variables/hide_country_dialing_code_if_same_as_locale.html">$hide_country_dialing_code_if_same_as_locale</a> )
<a name="l4621"><span class="linenum">4621</span></a>      {    // The phone dialing code is same as locale and we want to hide it in this case
<a name="l4622"><span class="linenum">4622</span></a>          if( ( strlen( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a> ) - strlen( <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> ) ) == 10 )
<a name="l4623"><span class="linenum">4623</span></a>          {    // We can format it like a french phone number ( 0x.xx.xx.xx.xx )
<a name="l4624"><span class="linenum">4624</span></a>              <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('phone_formated')" href="../../../_variables/phone_formated.html">$phone_formated</a> = <a class="function" onClick="logFunction('format_french_phone')" href="../../../_functions/format_french_phone.html" onMouseOver="funcPopup(event,'format_french_phone')">format_french_phone</a>( '0'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, strlen( <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> )+1 ) );
<a name="l4625"><span class="linenum">4625</span></a>          }
<a name="l4626"><span class="linenum">4626</span></a>          else
<a name="l4627"><span class="linenum">4627</span></a>          { // ( 0xxxxxxxxxxxxxx )
<a name="l4628"><span class="linenum">4628</span></a>              <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('phone_formated')" href="../../../_variables/phone_formated.html">$phone_formated</a> = '0'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, strlen( <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> )+1 );
<a name="l4629"><span class="linenum">4629</span></a>          }
<a name="l4630"><span class="linenum">4630</span></a>  
<a name="l4631"><span class="linenum">4631</span></a>      }
<a name="l4632"><span class="linenum">4632</span></a>      elseif( !<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> ) )
<a name="l4633"><span class="linenum">4633</span></a>      {    // Phone has a dialing code
<a name="l4634"><span class="linenum">4634</span></a>          if( ( strlen( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a> ) - strlen( <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> ) ) == 10 )
<a name="l4635"><span class="linenum">4635</span></a>          { // We can format it like a french phone number with the dialing code ( +dialing x.xx.xx.xx.xx )
<a name="l4636"><span class="linenum">4636</span></a>              <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('phone_formated')" href="../../../_variables/phone_formated.html">$phone_formated</a> = '+'.<a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a>.<a class="function" onClick="logFunction('format_french_phone')" href="../../../_functions/format_french_phone.html" onMouseOver="funcPopup(event,'format_french_phone')">format_french_phone</a>( ' '.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, strlen( <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> )+1 ) );
<a name="l4637"><span class="linenum">4637</span></a>          }
<a name="l4638"><span class="linenum">4638</span></a>          else
<a name="l4639"><span class="linenum">4639</span></a>          { // ( +dialing  xxxxxxxxxxx )
<a name="l4640"><span class="linenum">4640</span></a>              <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('phone_formated')" href="../../../_variables/phone_formated.html">$phone_formated</a> = '+'.<a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a>.' '.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, strlen( <a class="var it2784" onMouseOver="hilite(2784)" onMouseOut="lolite()" onClick="logVariable('dialing_code')" href="../../../_variables/dialing_code.html">$dialing_code</a> )+1 );
<a name="l4641"><span class="linenum">4641</span></a>          }
<a name="l4642"><span class="linenum">4642</span></a>      }
<a name="l4643"><span class="linenum">4643</span></a>      else
<a name="l4644"><span class="linenum">4644</span></a>      {
<a name="l4645"><span class="linenum">4645</span></a>          if( strlen( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a> ) == 10 )
<a name="l4646"><span class="linenum">4646</span></a>          { //  We can format it like a french phone number ( xx.xx.xx.xx.xx )
<a name="l4647"><span class="linenum">4647</span></a>              <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('phone_formated')" href="../../../_variables/phone_formated.html">$phone_formated</a> = <a class="function" onClick="logFunction('format_french_phone')" href="../../../_functions/format_french_phone.html" onMouseOver="funcPopup(event,'format_french_phone')">format_french_phone</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a> );
<a name="l4648"><span class="linenum">4648</span></a>          }
<a name="l4649"><span class="linenum">4649</span></a>          else
<a name="l4650"><span class="linenum">4650</span></a>          {    // We don't format phone: TODO generic format phone ( xxxxxxxxxxxxxxxx )
<a name="l4651"><span class="linenum">4651</span></a>              <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('phone_formated')" href="../../../_variables/phone_formated.html">$phone_formated</a> = <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>;
<a name="l4652"><span class="linenum">4652</span></a>          }
<a name="l4653"><span class="linenum">4653</span></a>      }
<a name="l4654"><span class="linenum">4654</span></a>  
<a name="l4655"><span class="linenum">4655</span></a>      return <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('phone_formated')" href="../../../_variables/phone_formated.html">$phone_formated</a>;
<a name="l4656"><span class="linenum">4656</span></a>  }
<a name="l4657"><span class="linenum">4657</span></a>  
<a name="l4658"><span class="linenum">4658</span></a>  
<a name="l4659"><span class="linenum">4659</span></a>  <span class="comment">/**</span>
<a name="l4660"><span class="linenum">4660</span></a>  <span class="comment"> * Format a string in a french phone number</span>
<a name="l4661"><span class="linenum">4661</span></a>  <span class="comment"> *</span>
<a name="l4662"><span class="linenum">4662</span></a>  <span class="comment"> * @param string phone number</span>
<a name="l4663"><span class="linenum">4663</span></a>  <span class="comment"> */</span>
<a name="l4664"><span class="linenum">4664</span></a>  function <a class="function" onClick="logFunction('format_french_phone')" href="../../../_functions/format_french_phone.html" onMouseOver="funcPopup(event,'format_french_phone')">format_french_phone</a>( <a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a> )
<a name="l4665"><span class="linenum">4665</span></a>  {
<a name="l4666"><span class="linenum">4666</span></a>      return <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, 0 , 2).'.'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, 2, 2).'.'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, 4, 2)
<a name="l4667"><span class="linenum">4667</span></a>                      .'.'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, 6, 2).'.'.<a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3704" onMouseOver="hilite(3704)" onMouseOut="lolite()" onClick="logVariable('phone')" href="../../../_variables/phone.html">$phone</a>, 8, 2);
<a name="l4668"><span class="linenum">4668</span></a>  }
<a name="l4669"><span class="linenum">4669</span></a>  
<a name="l4670"><span class="linenum">4670</span></a>  
<a name="l4671"><span class="linenum">4671</span></a>  <span class="comment">/**</span>
<a name="l4672"><span class="linenum">4672</span></a>  <span class="comment"> * Get the manual url for the given topic</span>
<a name="l4673"><span class="linenum">4673</span></a>  <span class="comment"> *</span>
<a name="l4674"><span class="linenum">4674</span></a>  <span class="comment"> * @param string topic</span>
<a name="l4675"><span class="linenum">4675</span></a>  <span class="comment"> * @return string url to the manual</span>
<a name="l4676"><span class="linenum">4676</span></a>  <span class="comment"> */</span>
<a name="l4677"><span class="linenum">4677</span></a>  function <a class="function" onClick="logFunction('get_manual_url')" href="../../../_functions/get_manual_url.html" onMouseOver="funcPopup(event,'get_manual_url')">get_manual_url</a>( <a class="var it4235" onMouseOver="hilite(4235)" onMouseOut="lolite()" onClick="logVariable('topic')" href="../../../_variables/topic.html">$topic</a> )
<a name="l4678"><span class="linenum">4678</span></a>  {
<a name="l4679"><span class="linenum">4679</span></a>  <span class="comment">    // fp&gt; TODO: this below is a temmporary hack while we work on the new manual:</span>
<a name="l4680"><span class="linenum">4680</span></a>      return 'http://b2evolution.net/man/'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '_', '-', <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="var it4235" onMouseOver="hilite(4235)" onMouseOut="lolite()" onClick="logVariable('topic')" href="../../../_variables/topic.html">$topic</a> ) );
<a name="l4681"><span class="linenum">4681</span></a>  }
<a name="l4682"><span class="linenum">4682</span></a>  
<a name="l4683"><span class="linenum">4683</span></a>  
<a name="l4684"><span class="linenum">4684</span></a>  <span class="comment">/**</span>
<a name="l4685"><span class="linenum">4685</span></a>  <span class="comment"> * Generate a link to a online help resource.</span>
<a name="l4686"><span class="linenum">4686</span></a>  <span class="comment"> * testing the concept of online help (aka webhelp).</span>
<a name="l4687"><span class="linenum">4687</span></a>  <span class="comment"> * this function should be relocated somewhere better if it is taken onboard by the project</span>
<a name="l4688"><span class="linenum">4688</span></a>  <span class="comment"> *</span>
<a name="l4689"><span class="linenum">4689</span></a>  <span class="comment"> * @todo replace [?] with icon,</span>
<a name="l4690"><span class="linenum">4690</span></a>  <span class="comment"> * @todo write url suffix dynamically based on topic and language</span>
<a name="l4691"><span class="linenum">4691</span></a>  <span class="comment"> *</span>
<a name="l4692"><span class="linenum">4692</span></a>  <span class="comment"> * QUESTION: launch new window with javascript maybe?</span>
<a name="l4693"><span class="linenum">4693</span></a>  <span class="comment"> * @param string Topic</span>
<a name="l4694"><span class="linenum">4694</span></a>  <span class="comment"> *        The topic should be in a format like [\w]+(/[\w]+)*, e.g features/online_help.</span>
<a name="l4695"><span class="linenum">4695</span></a>  <span class="comment"> * @param string link text, leave it NULL to get link with manual icon</span>
<a name="l4696"><span class="linenum">4696</span></a>  <span class="comment"> * @param string a word to be displayed after the manual icon (if no icon gets displayed, $title will be used instead!)</span>
<a name="l4697"><span class="linenum">4697</span></a>  <span class="comment"> * @param integer 1-5: weight of the word. The word will be displayed only if its weight is &gt;= than the user setting threshold. (Default: 1)</span>
<a name="l4698"><span class="linenum">4698</span></a>  <span class="comment"> * @return string</span>
<a name="l4699"><span class="linenum">4699</span></a>  <span class="comment"> */</span>
<a name="l4700"><span class="linenum">4700</span></a>  function <a class="function" onClick="logFunction('get_manual_link')" href="../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>( <a class="var it4235" onMouseOver="hilite(4235)" onMouseOut="lolite()" onClick="logVariable('topic')" href="../../../_variables/topic.html">$topic</a>, <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a> = NULL, <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('action_word')" href="../../../_variables/action_word.html">$action_word</a> = NULL, <a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('word_weight')" href="../../../_variables/word_weight.html">$word_weight</a> = 1 )
<a name="l4701"><span class="linenum">4701</span></a>  {
<a name="l4702"><span class="linenum">4702</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it2774" onMouseOver="hilite(2774)" onMouseOut="lolite()" onClick="logVariable('current_locale')" href="../../../_variables/current_locale.html">$current_locale</a>, <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('app_shortname')" href="../../../_variables/app_shortname.html">$app_shortname</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../../_variables/app_version.html">$app_version</a>;
<a name="l4703"><span class="linenum">4703</span></a>  
<a name="l4704"><span class="linenum">4704</span></a>      if( <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('webhelp_enabled') )
<a name="l4705"><span class="linenum">4705</span></a>      {
<a name="l4706"><span class="linenum">4706</span></a>          <a class="var it5446" onMouseOver="hilite(5446)" onMouseOut="lolite()" onClick="logVariable('manual_url')" href="../../../_variables/manual_url.html">$manual_url</a> = <a class="function" onClick="logFunction('get_manual_url')" href="../../../_functions/get_manual_url.html" onMouseOver="funcPopup(event,'get_manual_url')">get_manual_url</a>( <a class="var it4235" onMouseOver="hilite(4235)" onMouseOut="lolite()" onClick="logVariable('topic')" href="../../../_variables/topic.html">$topic</a> );
<a name="l4707"><span class="linenum">4707</span></a>  
<a name="l4708"><span class="linenum">4708</span></a>          if( <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a> == NULL )
<a name="l4709"><span class="linenum">4709</span></a>          {
<a name="l4710"><span class="linenum">4710</span></a>              if( <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('action_word')" href="../../../_variables/action_word.html">$action_word</a> == NULL )
<a name="l4711"><span class="linenum">4711</span></a>              {
<a name="l4712"><span class="linenum">4712</span></a>                  <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('action_word')" href="../../../_variables/action_word.html">$action_word</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Manual');
<a name="l4713"><span class="linenum">4713</span></a>              }
<a name="l4714"><span class="linenum">4714</span></a>              <a class="var it7083" onMouseOver="hilite(7083)" onMouseOut="lolite()" onClick="logVariable('webhelp_link')" href="../../../_variables/webhelp_link.html">$webhelp_link</a> = <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Open relevant page in online manual'), 'manual', <a class="var it5446" onMouseOver="hilite(5446)" onMouseOut="lolite()" onClick="logVariable('manual_url')" href="../../../_variables/manual_url.html">$manual_url</a>, <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('action_word')" href="../../../_variables/action_word.html">$action_word</a>, 5, <a class="var it1758" onMouseOver="hilite(1758)" onMouseOut="lolite()" onClick="logVariable('word_weight')" href="../../../_variables/word_weight.html">$word_weight</a>, array( 'target' =&gt; '_blank', 'style' =&gt; 'vertical-align:top' ) );
<a name="l4715"><span class="linenum">4715</span></a>          }
<a name="l4716"><span class="linenum">4716</span></a>          else
<a name="l4717"><span class="linenum">4717</span></a>          {
<a name="l4718"><span class="linenum">4718</span></a>              <a class="var it7083" onMouseOver="hilite(7083)" onMouseOut="lolite()" onClick="logVariable('webhelp_link')" href="../../../_variables/webhelp_link.html">$webhelp_link</a> = '&lt;a href=&quot;'.<a class="var it5446" onMouseOver="hilite(5446)" onMouseOut="lolite()" onClick="logVariable('manual_url')" href="../../../_variables/manual_url.html">$manual_url</a>.'&quot; target = &quot;_blank&quot;&gt;'.<a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a>.'&lt;/a&gt;';
<a name="l4719"><span class="linenum">4719</span></a>          }
<a name="l4720"><span class="linenum">4720</span></a>  
<a name="l4721"><span class="linenum">4721</span></a>          return ' '.<a class="var it7083" onMouseOver="hilite(7083)" onMouseOut="lolite()" onClick="logVariable('webhelp_link')" href="../../../_variables/webhelp_link.html">$webhelp_link</a>;
<a name="l4722"><span class="linenum">4722</span></a>      }
<a name="l4723"><span class="linenum">4723</span></a>      else
<a name="l4724"><span class="linenum">4724</span></a>      {
<a name="l4725"><span class="linenum">4725</span></a>          return '';
<a name="l4726"><span class="linenum">4726</span></a>      }
<a name="l4727"><span class="linenum">4727</span></a>  }
<a name="l4728"><span class="linenum">4728</span></a>  
<a name="l4729"><span class="linenum">4729</span></a>  
<a name="l4730"><span class="linenum">4730</span></a>  <span class="comment">/**</span>
<a name="l4731"><span class="linenum">4731</span></a>  <span class="comment"> * Build a string out of $field_attribs, with each attribute</span>
<a name="l4732"><span class="linenum">4732</span></a>  <span class="comment"> * prefixed by a space character.</span>
<a name="l4733"><span class="linenum">4733</span></a>  <span class="comment"> *</span>
<a name="l4734"><span class="linenum">4734</span></a>  <span class="comment"> * @param array Array of field attributes.</span>
<a name="l4735"><span class="linenum">4735</span></a>  <span class="comment"> * @param boolean Use format_to_output() for the attributes?</span>
<a name="l4736"><span class="linenum">4736</span></a>  <span class="comment"> * @return string</span>
<a name="l4737"><span class="linenum">4737</span></a>  <span class="comment"> */</span>
<a name="l4738"><span class="linenum">4738</span></a>  function <a class="function" onClick="logFunction('get_field_attribs_as_string')" href="../../../_functions/get_field_attribs_as_string.html" onMouseOver="funcPopup(event,'get_field_attribs_as_string')">get_field_attribs_as_string</a>( <a class="var it7084" onMouseOver="hilite(7084)" onMouseOut="lolite()" onClick="logVariable('field_attribs')" href="../../../_variables/field_attribs.html">$field_attribs</a>, <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('format_to_output')" href="../../../_variables/format_to_output.html">$format_to_output</a> = true )
<a name="l4739"><span class="linenum">4739</span></a>  {
<a name="l4740"><span class="linenum">4740</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l4741"><span class="linenum">4741</span></a>      foreach( <a class="var it7084" onMouseOver="hilite(7084)" onMouseOut="lolite()" onClick="logVariable('field_attribs')" href="../../../_variables/field_attribs.html">$field_attribs</a> as <a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('l_attr')" href="../../../_variables/l_attr.html">$l_attr</a> =&gt; <a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a> )
<a name="l4742"><span class="linenum">4742</span></a>      {
<a name="l4743"><span class="linenum">4743</span></a>          if( <a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a> === NULL )
<a name="l4744"><span class="linenum">4744</span></a>          { // don't generate empty attributes (it may be NULL if we pass 'value' =&gt; NULL as field_param for example, because isset() does not match it!)
<a name="l4745"><span class="linenum">4745</span></a>  <span class="comment">            // sam2kb&gt; what about alt=&quot;&quot; how do we handle this?</span>
<a name="l4746"><span class="linenum">4746</span></a>  <span class="comment">            // I've removed the &quot;=== ''&quot; check now. Should not do any harm. IIRC NULL is what we want to avoid here.</span>
<a name="l4747"><span class="linenum">4747</span></a>              continue;
<a name="l4748"><span class="linenum">4748</span></a>          }
<a name="l4749"><span class="linenum">4749</span></a>  
<a name="l4750"><span class="linenum">4750</span></a>          if( <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('format_to_output')" href="../../../_variables/format_to_output.html">$format_to_output</a> )
<a name="l4751"><span class="linenum">4751</span></a>          {
<a name="l4752"><span class="linenum">4752</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' '.<a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('l_attr')" href="../../../_variables/l_attr.html">$l_attr</a>.'=&quot;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a>).'&quot;';
<a name="l4753"><span class="linenum">4753</span></a>          }
<a name="l4754"><span class="linenum">4754</span></a>          else
<a name="l4755"><span class="linenum">4755</span></a>          {
<a name="l4756"><span class="linenum">4756</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' '.<a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('l_attr')" href="../../../_variables/l_attr.html">$l_attr</a>.'=&quot;'.<a class="var it6156" onMouseOver="hilite(6156)" onMouseOut="lolite()" onClick="logVariable('l_value')" href="../../../_variables/l_value.html">$l_value</a>.'&quot;';
<a name="l4757"><span class="linenum">4757</span></a>          }
<a name="l4758"><span class="linenum">4758</span></a>      }
<a name="l4759"><span class="linenum">4759</span></a>  
<a name="l4760"><span class="linenum">4760</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4761"><span class="linenum">4761</span></a>  }
<a name="l4762"><span class="linenum">4762</span></a>  
<a name="l4763"><span class="linenum">4763</span></a>  
<a name="l4764"><span class="linenum">4764</span></a>  <span class="comment">/**</span>
<a name="l4765"><span class="linenum">4765</span></a>  <span class="comment"> * Is the current page an admin/backoffice page?</span>
<a name="l4766"><span class="linenum">4766</span></a>  <span class="comment"> *</span>
<a name="l4767"><span class="linenum">4767</span></a>  <span class="comment"> * @return boolean</span>
<a name="l4768"><span class="linenum">4768</span></a>  <span class="comment"> */</span>
<a name="l4769"><span class="linenum">4769</span></a>  function <a class="function" onClick="logFunction('is_admin_page')" href="../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>()
<a name="l4770"><span class="linenum">4770</span></a>  {
<a name="l4771"><span class="linenum">4771</span></a>      global <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../../_variables/is_admin_page.html">$is_admin_page</a>;
<a name="l4772"><span class="linenum">4772</span></a>  
<a name="l4773"><span class="linenum">4773</span></a>      return isset(<a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../../_variables/is_admin_page.html">$is_admin_page</a>) &amp;&amp; <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../../_variables/is_admin_page.html">$is_admin_page</a> === true; <span class="comment">// check for type also, because of register_globals!</span>
<a name="l4774"><span class="linenum">4774</span></a>  }
<a name="l4775"><span class="linenum">4775</span></a>  
<a name="l4776"><span class="linenum">4776</span></a>  
<a name="l4777"><span class="linenum">4777</span></a>  <span class="comment">/**</span>
<a name="l4778"><span class="linenum">4778</span></a>  <span class="comment"> * Is the current page a default 'Front' page of a blog?</span>
<a name="l4779"><span class="linenum">4779</span></a>  <span class="comment"> *</span>
<a name="l4780"><span class="linenum">4780</span></a>  <span class="comment"> * @return boolean</span>
<a name="l4781"><span class="linenum">4781</span></a>  <span class="comment"> */</span>
<a name="l4782"><span class="linenum">4782</span></a>  function <a class="function" onClick="logFunction('is_front_page')" href="../../../_functions/is_front_page.html" onMouseOver="funcPopup(event,'is_front_page')">is_front_page</a>()
<a name="l4783"><span class="linenum">4783</span></a>  {
<a name="l4784"><span class="linenum">4784</span></a>      global <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../../_variables/is_front.html">$is_front</a>;
<a name="l4785"><span class="linenum">4785</span></a>  
<a name="l4786"><span class="linenum">4786</span></a>      return isset(<a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../../_variables/is_front.html">$is_front</a>) &amp;&amp; <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../../_variables/is_front.html">$is_front</a> === true;
<a name="l4787"><span class="linenum">4787</span></a>  }
<a name="l4788"><span class="linenum">4788</span></a>  
<a name="l4789"><span class="linenum">4789</span></a>  
<a name="l4790"><span class="linenum">4790</span></a>  <span class="comment">/**</span>
<a name="l4791"><span class="linenum">4791</span></a>  <span class="comment"> * Does the given url require logged in user</span>
<a name="l4792"><span class="linenum">4792</span></a>  <span class="comment"> *</span>
<a name="l4793"><span class="linenum">4793</span></a>  <span class="comment"> * @param string url</span>
<a name="l4794"><span class="linenum">4794</span></a>  <span class="comment"> * @param boolean set true to also check if url is login screen or not</span>
<a name="l4795"><span class="linenum">4795</span></a>  <span class="comment"> * @return boolean</span>
<a name="l4796"><span class="linenum">4796</span></a>  <span class="comment"> */</span>
<a name="l4797"><span class="linenum">4797</span></a>  function <a class="function" onClick="logFunction('require_login')" href="../../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, <a class="var it7086" onMouseOver="hilite(7086)" onMouseOut="lolite()" onClick="logVariable('check_login_screen')" href="../../../_variables/check_login_screen.html">$check_login_screen</a> )
<a name="l4798"><span class="linenum">4798</span></a>  {
<a name="l4799"><span class="linenum">4799</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l4800"><span class="linenum">4800</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#/admin.php([&amp;?].*)?$#', <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> ) )
<a name="l4801"><span class="linenum">4801</span></a>      { // admin always require logged in user
<a name="l4802"><span class="linenum">4802</span></a>          return true;
<a name="l4803"><span class="linenum">4803</span></a>      }
<a name="l4804"><span class="linenum">4804</span></a>  
<a name="l4805"><span class="linenum">4805</span></a>      if( <a class="var it7086" onMouseOver="hilite(7086)" onMouseOut="lolite()" onClick="logVariable('check_login_screen')" href="../../../_variables/check_login_screen.html">$check_login_screen</a> &amp;&amp;  <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#/login.php([&amp;?].*)?$#', <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> ) )
<a name="l4806"><span class="linenum">4806</span></a>      {
<a name="l4807"><span class="linenum">4807</span></a>          return true;
<a name="l4808"><span class="linenum">4808</span></a>      }
<a name="l4809"><span class="linenum">4809</span></a>  
<a name="l4810"><span class="linenum">4810</span></a>      <a class="var it7087" onMouseOver="hilite(7087)" onMouseOut="lolite()" onClick="logVariable('disp_names')" href="../../../_variables/disp_names.html">$disp_names</a> = 'threads|messages|contacts';
<a name="l4811"><span class="linenum">4811</span></a>      if( !<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'allow_anonymous_user_list' ) )
<a name="l4812"><span class="linenum">4812</span></a>      {
<a name="l4813"><span class="linenum">4813</span></a>          <a class="var it7087" onMouseOver="hilite(7087)" onMouseOut="lolite()" onClick="logVariable('disp_names')" href="../../../_variables/disp_names.html">$disp_names</a> .= '|users';
<a name="l4814"><span class="linenum">4814</span></a>      }
<a name="l4815"><span class="linenum">4815</span></a>      if( !<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'allow_anonymous_user_profiles' ) )
<a name="l4816"><span class="linenum">4816</span></a>      {
<a name="l4817"><span class="linenum">4817</span></a>          <a class="var it7087" onMouseOver="hilite(7087)" onMouseOut="lolite()" onClick="logVariable('disp_names')" href="../../../_variables/disp_names.html">$disp_names</a> .= '|user';
<a name="l4818"><span class="linenum">4818</span></a>      }
<a name="l4819"><span class="linenum">4819</span></a>      if( <a class="var it7086" onMouseOver="hilite(7086)" onMouseOut="lolite()" onClick="logVariable('check_login_screen')" href="../../../_variables/check_login_screen.html">$check_login_screen</a> )
<a name="l4820"><span class="linenum">4820</span></a>      {
<a name="l4821"><span class="linenum">4821</span></a>          <a class="var it7087" onMouseOver="hilite(7087)" onMouseOut="lolite()" onClick="logVariable('disp_names')" href="../../../_variables/disp_names.html">$disp_names</a> .= '|login';
<a name="l4822"><span class="linenum">4822</span></a>      }
<a name="l4823"><span class="linenum">4823</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#disp=('.<a class="var it7087" onMouseOver="hilite(7087)" onMouseOut="lolite()" onClick="logVariable('disp_names')" href="../../../_variables/disp_names.html">$disp_names</a>.')#', <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> ) )
<a name="l4824"><span class="linenum">4824</span></a>      { // <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> require logged in user
<a name="l4825"><span class="linenum">4825</span></a>          return true;
<a name="l4826"><span class="linenum">4826</span></a>      }
<a name="l4827"><span class="linenum">4827</span></a>  
<a name="l4828"><span class="linenum">4828</span></a>      return false;
<a name="l4829"><span class="linenum">4829</span></a>  }
<a name="l4830"><span class="linenum">4830</span></a>  
<a name="l4831"><span class="linenum">4831</span></a>  
<a name="l4832"><span class="linenum">4832</span></a>  <span class="comment">/**</span>
<a name="l4833"><span class="linenum">4833</span></a>  <span class="comment"> * Implode array( 'x', 'y', 'z' ) to something like 'x, y and z'. Useful for displaying list to the end user.</span>
<a name="l4834"><span class="linenum">4834</span></a>  <span class="comment"> *</span>
<a name="l4835"><span class="linenum">4835</span></a>  <span class="comment"> * If there's one element in the table, it is returned.</span>
<a name="l4836"><span class="linenum">4836</span></a>  <span class="comment"> * If there are at least two elements, the last one is concatenated using $implode_last, while the ones before are imploded using $implode_by.</span>
<a name="l4837"><span class="linenum">4837</span></a>  <span class="comment"> *</span>
<a name="l4838"><span class="linenum">4838</span></a>  <span class="comment"> * @todo dh&gt; I don't think using entities/HTML as default for $implode_last is sane!</span>
<a name="l4839"><span class="linenum">4839</span></a>  <span class="comment"> *           Use &quot;&amp;&quot; instead and make sure that the output for HTML is HTML compliant..</span>
<a name="l4840"><span class="linenum">4840</span></a>  <span class="comment"> * @todo Support for locales that have a different kind of enumeration?!</span>
<a name="l4841"><span class="linenum">4841</span></a>  <span class="comment"> * @return string</span>
<a name="l4842"><span class="linenum">4842</span></a>  <span class="comment"> */</span>
<a name="l4843"><span class="linenum">4843</span></a>  function <a class="function" onClick="logFunction('implode_with_and')" href="../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>( <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../../_variables/arr.html">$arr</a>, <a class="var it7088" onMouseOver="hilite(7088)" onMouseOut="lolite()" onClick="logVariable('implode_by')" href="../../../_variables/implode_by.html">$implode_by</a> = ', ', <a class="var it7089" onMouseOver="hilite(7089)" onMouseOut="lolite()" onClick="logVariable('implode_last')" href="../../../_variables/implode_last.html">$implode_last</a> = ' &amp;amp; ' )
<a name="l4844"><span class="linenum">4844</span></a>  {
<a name="l4845"><span class="linenum">4845</span></a>      switch( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../../_variables/arr.html">$arr</a>) )
<a name="l4846"><span class="linenum">4846</span></a>      {
<a name="l4847"><span class="linenum">4847</span></a>          case 0:
<a name="l4848"><span class="linenum">4848</span></a>              return '';
<a name="l4849"><span class="linenum">4849</span></a>  
<a name="l4850"><span class="linenum">4850</span></a>          case 1:
<a name="l4851"><span class="linenum">4851</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../../_variables/arr.html">$arr</a>);
<a name="l4852"><span class="linenum">4852</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4853"><span class="linenum">4853</span></a>  
<a name="l4854"><span class="linenum">4854</span></a>          default:
<a name="l4855"><span class="linenum">4855</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( <a class="var it7088" onMouseOver="hilite(7088)" onMouseOut="lolite()" onClick="logVariable('implode_by')" href="../../../_variables/implode_by.html">$implode_by</a>, <a class="phpfunction" onClick="logFunction('array_slice')" href="../../../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>( <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../../_variables/arr.html">$arr</a>, 0, -1 ) )
<a name="l4856"><span class="linenum">4856</span></a>                  .<a class="var it7089" onMouseOver="hilite(7089)" onMouseOut="lolite()" onClick="logVariable('implode_last')" href="../../../_variables/implode_last.html">$implode_last</a>.<a class="phpfunction" onClick="logFunction('array_pop')" href="../../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>( <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../../../_variables/arr.html">$arr</a> );
<a name="l4857"><span class="linenum">4857</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l4858"><span class="linenum">4858</span></a>      }
<a name="l4859"><span class="linenum">4859</span></a>  }
<a name="l4860"><span class="linenum">4860</span></a>  
<a name="l4861"><span class="linenum">4861</span></a>  
<a name="l4862"><span class="linenum">4862</span></a>  <span class="comment">/**</span>
<a name="l4863"><span class="linenum">4863</span></a>  <span class="comment"> * Display an array as a list:</span>
<a name="l4864"><span class="linenum">4864</span></a>  <span class="comment"> *</span>
<a name="l4865"><span class="linenum">4865</span></a>  <span class="comment"> * @param array</span>
<a name="l4866"><span class="linenum">4866</span></a>  <span class="comment"> * @param string</span>
<a name="l4867"><span class="linenum">4867</span></a>  <span class="comment"> * @param string</span>
<a name="l4868"><span class="linenum">4868</span></a>  <span class="comment"> * @param string</span>
<a name="l4869"><span class="linenum">4869</span></a>  <span class="comment"> * @param string</span>
<a name="l4870"><span class="linenum">4870</span></a>  <span class="comment"> * @param string</span>
<a name="l4871"><span class="linenum">4871</span></a>  <span class="comment"> */</span>
<a name="l4872"><span class="linenum">4872</span></a>  function <a class="function" onClick="logFunction('display_list')" href="../../../_functions/display_list.html" onMouseOver="funcPopup(event,'display_list')">display_list</a>( <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../../_variables/items.html">$items</a>, <a class="var it7090" onMouseOver="hilite(7090)" onMouseOut="lolite()" onClick="logVariable('list_start')" href="../../../_variables/list_start.html">$list_start</a> = '&lt;ul&gt;', <a class="var it7091" onMouseOver="hilite(7091)" onMouseOut="lolite()" onClick="logVariable('list_end')" href="../../../_variables/list_end.html">$list_end</a> = '&lt;/ul&gt;', <a class="var it7092" onMouseOver="hilite(7092)" onMouseOut="lolite()" onClick="logVariable('item_separator')" href="../../../_variables/item_separator.html">$item_separator</a> = '',
<a name="l4873"><span class="linenum">4873</span></a>                                                  <a class="var it7093" onMouseOver="hilite(7093)" onMouseOut="lolite()" onClick="logVariable('item_start')" href="../../../_variables/item_start.html">$item_start</a> = '&lt;li&gt;', <a class="var it7094" onMouseOver="hilite(7094)" onMouseOut="lolite()" onClick="logVariable('item_end')" href="../../../_variables/item_end.html">$item_end</a> = '&lt;/li&gt;', <a class="var it7095" onMouseOver="hilite(7095)" onMouseOut="lolite()" onClick="logVariable('force_hash')" href="../../../_variables/force_hash.html">$force_hash</a> = NULL, <a class="var it7096" onMouseOver="hilite(7096)" onMouseOut="lolite()" onClick="logVariable('max_items')" href="../../../_variables/max_items.html">$max_items</a> = NULL, <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a> = array() )
<a name="l4874"><span class="linenum">4874</span></a>  {
<a name="l4875"><span class="linenum">4875</span></a>      if( !<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it7096" onMouseOver="hilite(7096)" onMouseOut="lolite()" onClick="logVariable('max_items')" href="../../../_variables/max_items.html">$max_items</a>) &amp;&amp; <a class="var it7096" onMouseOver="hilite(7096)" onMouseOut="lolite()" onClick="logVariable('max_items')" href="../../../_variables/max_items.html">$max_items</a> &lt; 1 )
<a name="l4876"><span class="linenum">4876</span></a>      {
<a name="l4877"><span class="linenum">4877</span></a>          return;
<a name="l4878"><span class="linenum">4878</span></a>      }
<a name="l4879"><span class="linenum">4879</span></a>  
<a name="l4880"><span class="linenum">4880</span></a>      if( !empty( <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../../_variables/items.html">$items</a> ) )
<a name="l4881"><span class="linenum">4881</span></a>      {
<a name="l4882"><span class="linenum">4882</span></a>          echo <a class="var it7090" onMouseOver="hilite(7090)" onMouseOut="lolite()" onClick="logVariable('list_start')" href="../../../_variables/list_start.html">$list_start</a>;
<a name="l4883"><span class="linenum">4883</span></a>          <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> = 0;
<a name="l4884"><span class="linenum">4884</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('first')" href="../../../_variables/first.html">$first</a> = true;
<a name="l4885"><span class="linenum">4885</span></a>  
<a name="l4886"><span class="linenum">4886</span></a>          foreach( <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../../_variables/items.html">$items</a> as <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../../_variables/item.html">$item</a> )
<a name="l4887"><span class="linenum">4887</span></a>          {    // For each list item:
<a name="l4888"><span class="linenum">4888</span></a>  
<a name="l4889"><span class="linenum">4889</span></a>              <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../_variables/link.html">$link</a> = <a class="function" onClick="logFunction('resolve_link_params')" href="../../../_functions/resolve_link_params.html" onMouseOver="funcPopup(event,'resolve_link_params')">resolve_link_params</a>( <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../../_variables/item.html">$item</a>, <a class="var it7095" onMouseOver="hilite(7095)" onMouseOut="lolite()" onClick="logVariable('force_hash')" href="../../../_variables/force_hash.html">$force_hash</a>, <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a> );
<a name="l4890"><span class="linenum">4890</span></a>              if( empty( <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../_variables/link.html">$link</a> ) )
<a name="l4891"><span class="linenum">4891</span></a>              {
<a name="l4892"><span class="linenum">4892</span></a>                  continue;
<a name="l4893"><span class="linenum">4893</span></a>              }
<a name="l4894"><span class="linenum">4894</span></a>  
<a name="l4895"><span class="linenum">4895</span></a>              <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a>++;
<a name="l4896"><span class="linenum">4896</span></a>              if( <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a>&gt;1 )
<a name="l4897"><span class="linenum">4897</span></a>              {
<a name="l4898"><span class="linenum">4898</span></a>                  echo <a class="var it7092" onMouseOver="hilite(7092)" onMouseOut="lolite()" onClick="logVariable('item_separator')" href="../../../_variables/item_separator.html">$item_separator</a>;
<a name="l4899"><span class="linenum">4899</span></a>              }
<a name="l4900"><span class="linenum">4900</span></a>              echo <a class="var it7093" onMouseOver="hilite(7093)" onMouseOut="lolite()" onClick="logVariable('item_start')" href="../../../_variables/item_start.html">$item_start</a>.<a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../_variables/link.html">$link</a>.<a class="var it7094" onMouseOver="hilite(7094)" onMouseOut="lolite()" onClick="logVariable('item_end')" href="../../../_variables/item_end.html">$item_end</a>;
<a name="l4901"><span class="linenum">4901</span></a>  
<a name="l4902"><span class="linenum">4902</span></a>              if( !<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it7096" onMouseOver="hilite(7096)" onMouseOut="lolite()" onClick="logVariable('max_items')" href="../../../_variables/max_items.html">$max_items</a>) &amp;&amp; <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> &gt;= <a class="var it7096" onMouseOver="hilite(7096)" onMouseOut="lolite()" onClick="logVariable('max_items')" href="../../../_variables/max_items.html">$max_items</a> )
<a name="l4903"><span class="linenum">4903</span></a>              {
<a name="l4904"><span class="linenum">4904</span></a>                  break;
<a name="l4905"><span class="linenum">4905</span></a>              }
<a name="l4906"><span class="linenum">4906</span></a>          }
<a name="l4907"><span class="linenum">4907</span></a>          echo <a class="var it7091" onMouseOver="hilite(7091)" onMouseOut="lolite()" onClick="logVariable('list_end')" href="../../../_variables/list_end.html">$list_end</a>;
<a name="l4908"><span class="linenum">4908</span></a>      }
<a name="l4909"><span class="linenum">4909</span></a>  }
<a name="l4910"><span class="linenum">4910</span></a>  
<a name="l4911"><span class="linenum">4911</span></a>  
<a name="l4912"><span class="linenum">4912</span></a>  <span class="comment">/**</span>
<a name="l4913"><span class="linenum">4913</span></a>  <span class="comment"> * Credits stuff.</span>
<a name="l4914"><span class="linenum">4914</span></a>  <span class="comment"> */</span>
<a name="l4915"><span class="linenum">4915</span></a>  function <a class="function" onClick="logFunction('display_param_link')" href="../../../_functions/display_param_link.html" onMouseOver="funcPopup(event,'display_param_link')">display_param_link</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l4916"><span class="linenum">4916</span></a>  {
<a name="l4917"><span class="linenum">4917</span></a>      echo <a class="function" onClick="logFunction('resolve_link_params')" href="../../../_functions/resolve_link_params.html" onMouseOver="funcPopup(event,'resolve_link_params')">resolve_link_params</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4918"><span class="linenum">4918</span></a>  }
<a name="l4919"><span class="linenum">4919</span></a>  
<a name="l4920"><span class="linenum">4920</span></a>  
<a name="l4921"><span class="linenum">4921</span></a>  <span class="comment">/**</span>
<a name="l4922"><span class="linenum">4922</span></a>  <span class="comment"> * Resolve a link based on params (credits stuff)</span>
<a name="l4923"><span class="linenum">4923</span></a>  <span class="comment"> *</span>
<a name="l4924"><span class="linenum">4924</span></a>  <span class="comment"> * @param array</span>
<a name="l4925"><span class="linenum">4925</span></a>  <span class="comment"> * @param integer</span>
<a name="l4926"><span class="linenum">4926</span></a>  <span class="comment"> * @param array</span>
<a name="l4927"><span class="linenum">4927</span></a>  <span class="comment"> * @return string</span>
<a name="l4928"><span class="linenum">4928</span></a>  <span class="comment"> */</span>
<a name="l4929"><span class="linenum">4929</span></a>  function <a class="function" onClick="logFunction('resolve_link_params')" href="../../../_functions/resolve_link_params.html" onMouseOver="funcPopup(event,'resolve_link_params')">resolve_link_params</a>( <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../../_variables/item.html">$item</a>, <a class="var it7095" onMouseOver="hilite(7095)" onMouseOut="lolite()" onClick="logVariable('force_hash')" href="../../../_variables/force_hash.html">$force_hash</a> = NULL, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4930"><span class="linenum">4930</span></a>  {
<a name="l4931"><span class="linenum">4931</span></a>      global <a class="var it2774" onMouseOver="hilite(2774)" onMouseOut="lolite()" onClick="logVariable('current_locale')" href="../../../_variables/current_locale.html">$current_locale</a>;
<a name="l4932"><span class="linenum">4932</span></a>  
<a name="l4933"><span class="linenum">4933</span></a>  <span class="comment">    // echo 'resolve link ';</span>
<a name="l4934"><span class="linenum">4934</span></a>  
<a name="l4935"><span class="linenum">4935</span></a>      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../../_variables/item.html">$item</a> ) )
<a name="l4936"><span class="linenum">4936</span></a>      {
<a name="l4937"><span class="linenum">4937</span></a>          if( isset( <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../../_variables/item.html">$item</a>[0] ) )
<a name="l4938"><span class="linenum">4938</span></a>          {    // Older format, which displays the same thing for all locales:
<a name="l4939"><span class="linenum">4939</span></a>              return <a class="function" onClick="logFunction('generate_link_from_params')" href="../../../_functions/generate_link_from_params.html" onMouseOver="funcPopup(event,'generate_link_from_params')">generate_link_from_params</a>( <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../../_variables/item.html">$item</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4940"><span class="linenum">4940</span></a>          }
<a name="l4941"><span class="linenum">4941</span></a>          else
<a name="l4942"><span class="linenum">4942</span></a>          {    // First get the right locale:
<a name="l4943"><span class="linenum">4943</span></a>  <span class="comment">            // echo $current_locale;</span>
<a name="l4944"><span class="linenum">4944</span></a>              foreach( <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../../_variables/item.html">$item</a> as <a class="var it7097" onMouseOver="hilite(7097)" onMouseOut="lolite()" onClick="logVariable('l_locale')" href="../../../_variables/l_locale.html">$l_locale</a> =&gt; <a class="var it7098" onMouseOver="hilite(7098)" onMouseOut="lolite()" onClick="logVariable('loc_item')" href="../../../_variables/loc_item.html">$loc_item</a> )
<a name="l4945"><span class="linenum">4945</span></a>              {
<a name="l4946"><span class="linenum">4946</span></a>                  if( <a class="var it7097" onMouseOver="hilite(7097)" onMouseOut="lolite()" onClick="logVariable('l_locale')" href="../../../_variables/l_locale.html">$l_locale</a> == <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it2774" onMouseOver="hilite(2774)" onMouseOut="lolite()" onClick="logVariable('current_locale')" href="../../../_variables/current_locale.html">$current_locale</a>, 0, strlen(<a class="var it7097" onMouseOver="hilite(7097)" onMouseOut="lolite()" onClick="logVariable('l_locale')" href="../../../_variables/l_locale.html">$l_locale</a>) ) )
<a name="l4947"><span class="linenum">4947</span></a>                  {    // We found a matching locale:
<a name="l4948"><span class="linenum">4948</span></a>  <span class="comment">                    //echo &quot;[$l_locale/$current_locale]&quot;;</span>
<a name="l4949"><span class="linenum">4949</span></a>                      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it7098" onMouseOver="hilite(7098)" onMouseOut="lolite()" onClick="logVariable('loc_item')" href="../../../_variables/loc_item.html">$loc_item</a>[0] ) )
<a name="l4950"><span class="linenum">4950</span></a>                      {    // Randomize:
<a name="l4951"><span class="linenum">4951</span></a>                          <a class="var it7098" onMouseOver="hilite(7098)" onMouseOut="lolite()" onClick="logVariable('loc_item')" href="../../../_variables/loc_item.html">$loc_item</a> = <a class="function" onClick="logFunction('hash_link_params')" href="../../../_functions/hash_link_params.html" onMouseOver="funcPopup(event,'hash_link_params')">hash_link_params</a>( <a class="var it7098" onMouseOver="hilite(7098)" onMouseOut="lolite()" onClick="logVariable('loc_item')" href="../../../_variables/loc_item.html">$loc_item</a>, <a class="var it7095" onMouseOver="hilite(7095)" onMouseOut="lolite()" onClick="logVariable('force_hash')" href="../../../_variables/force_hash.html">$force_hash</a> );
<a name="l4952"><span class="linenum">4952</span></a>                      }
<a name="l4953"><span class="linenum">4953</span></a>  
<a name="l4954"><span class="linenum">4954</span></a>                      return <a class="function" onClick="logFunction('generate_link_from_params')" href="../../../_functions/generate_link_from_params.html" onMouseOver="funcPopup(event,'generate_link_from_params')">generate_link_from_params</a>( <a class="var it7098" onMouseOver="hilite(7098)" onMouseOut="lolite()" onClick="logVariable('loc_item')" href="../../../_variables/loc_item.html">$loc_item</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4955"><span class="linenum">4955</span></a>                  }
<a name="l4956"><span class="linenum">4956</span></a>              }
<a name="l4957"><span class="linenum">4957</span></a>  <span class="comment">            // No match found!</span>
<a name="l4958"><span class="linenum">4958</span></a>              return '';
<a name="l4959"><span class="linenum">4959</span></a>          }
<a name="l4960"><span class="linenum">4960</span></a>      }
<a name="l4961"><span class="linenum">4961</span></a>  
<a name="l4962"><span class="linenum">4962</span></a>  <span class="comment">    // Super old format:</span>
<a name="l4963"><span class="linenum">4963</span></a>      return <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../../_variables/item.html">$item</a>;
<a name="l4964"><span class="linenum">4964</span></a>  }
<a name="l4965"><span class="linenum">4965</span></a>  
<a name="l4966"><span class="linenum">4966</span></a>  
<a name="l4967"><span class="linenum">4967</span></a>  <span class="comment">/**</span>
<a name="l4968"><span class="linenum">4968</span></a>  <span class="comment"> * Get a link line, based url hash combined with probability percentage in first column</span>
<a name="l4969"><span class="linenum">4969</span></a>  <span class="comment"> *</span>
<a name="l4970"><span class="linenum">4970</span></a>  <span class="comment"> * @param array of arrays</span>
<a name="l4971"><span class="linenum">4971</span></a>  <span class="comment"> * @param display for a specific hash key</span>
<a name="l4972"><span class="linenum">4972</span></a>  <span class="comment"> */</span>
<a name="l4973"><span class="linenum">4973</span></a>  function <a class="function" onClick="logFunction('hash_link_params')" href="../../../_functions/hash_link_params.html" onMouseOver="funcPopup(event,'hash_link_params')">hash_link_params</a>( <a class="var it1373" onMouseOver="hilite(1373)" onMouseOut="lolite()" onClick="logVariable('link_array')" href="../../../_variables/link_array.html">$link_array</a>, <a class="var it7095" onMouseOver="hilite(7095)" onMouseOut="lolite()" onClick="logVariable('force_hash')" href="../../../_variables/force_hash.html">$force_hash</a> = NULL )
<a name="l4974"><span class="linenum">4974</span></a>  {
<a name="l4975"><span class="linenum">4975</span></a>      global <a class="var it743" onMouseOver="hilite(743)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>, <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a>;
<a name="l4976"><span class="linenum">4976</span></a>  
<a name="l4977"><span class="linenum">4977</span></a>      static <a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a>;
<a name="l4978"><span class="linenum">4978</span></a>  
<a name="l4979"><span class="linenum">4979</span></a>      if( !<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it7095" onMouseOver="hilite(7095)" onMouseOut="lolite()" onClick="logVariable('force_hash')" href="../../../_variables/force_hash.html">$force_hash</a>) )
<a name="l4980"><span class="linenum">4980</span></a>      {
<a name="l4981"><span class="linenum">4981</span></a>          <a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a> = <a class="var it7095" onMouseOver="hilite(7095)" onMouseOut="lolite()" onClick="logVariable('force_hash')" href="../../../_variables/force_hash.html">$force_hash</a>;
<a name="l4982"><span class="linenum">4982</span></a>      }
<a name="l4983"><span class="linenum">4983</span></a>      elseif( !isset(<a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a>) )
<a name="l4984"><span class="linenum">4984</span></a>      {
<a name="l4985"><span class="linenum">4985</span></a>          <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> = <a class="var it743" onMouseOver="hilite(743)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>;
<a name="l4986"><span class="linenum">4986</span></a>  
<a name="l4987"><span class="linenum">4987</span></a>          global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l4988"><span class="linenum">4988</span></a>          if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('single_links'), 'param_' ) === 0 )
<a name="l4989"><span class="linenum">4989</span></a>          {    // We are on a blog that doesn't even have clean URLs for posts
<a name="l4990"><span class="linenum">4990</span></a>              <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> .= <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a>;
<a name="l4991"><span class="linenum">4991</span></a>          }
<a name="l4992"><span class="linenum">4992</span></a>  
<a name="l4993"><span class="linenum">4993</span></a>          <a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a> = 0;
<a name="l4994"><span class="linenum">4994</span></a>          for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>=0; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>&lt;strlen(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>); <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ )
<a name="l4995"><span class="linenum">4995</span></a>          {
<a name="l4996"><span class="linenum">4996</span></a>              <a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a> += <a class="phpfunction" onClick="logFunction('ord')" href="../../../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>]);
<a name="l4997"><span class="linenum">4997</span></a>          }
<a name="l4998"><span class="linenum">4998</span></a>          <a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a> = <a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a> % 100 + 1;
<a name="l4999"><span class="linenum">4999</span></a>  
<a name="l5000"><span class="linenum">5000</span></a>  <span class="comment">        // $hash = rand( 1, 100 );</span>
<a name="l5001"><span class="linenum">5001</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l5002"><span class="linenum">5002</span></a>          if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> )
<a name="l5003"><span class="linenum">5003</span></a>          {
<a name="l5004"><span class="linenum">5004</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Hash key: '.<a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a>, 'request' );
<a name="l5005"><span class="linenum">5005</span></a>          }
<a name="l5006"><span class="linenum">5006</span></a>      }
<a name="l5007"><span class="linenum">5007</span></a>  <span class="comment">    //    echo &quot;[$hash] &quot;;</span>
<a name="l5008"><span class="linenum">5008</span></a>  
<a name="l5009"><span class="linenum">5009</span></a>      foreach( <a class="var it1373" onMouseOver="hilite(1373)" onMouseOut="lolite()" onClick="logVariable('link_array')" href="../../../_variables/link_array.html">$link_array</a> as <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a> )
<a name="l5010"><span class="linenum">5010</span></a>      {
<a name="l5011"><span class="linenum">5011</span></a>  <span class="comment">        // echo '&lt;br&gt;'.$hash.'-'.$link_params[ 0 ];</span>
<a name="l5012"><span class="linenum">5012</span></a>          if( <a class="var it2869" onMouseOver="hilite(2869)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../_variables/hash.html">$hash</a> &lt;= <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a>[ 0 ] )
<a name="l5013"><span class="linenum">5013</span></a>          {    // select this link!
<a name="l5014"><span class="linenum">5014</span></a>  <span class="comment">            // pre_dump( $link_params );</span>
<a name="l5015"><span class="linenum">5015</span></a>              <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a> );
<a name="l5016"><span class="linenum">5016</span></a>              return <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a>;
<a name="l5017"><span class="linenum">5017</span></a>          }
<a name="l5018"><span class="linenum">5018</span></a>      }
<a name="l5019"><span class="linenum">5019</span></a>  <span class="comment">    // somehow no match, return 1st element:</span>
<a name="l5020"><span class="linenum">5020</span></a>      <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a> = <a class="var it1373" onMouseOver="hilite(1373)" onMouseOut="lolite()" onClick="logVariable('link_array')" href="../../../_variables/link_array.html">$link_array</a>[0];
<a name="l5021"><span class="linenum">5021</span></a>      <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a> );
<a name="l5022"><span class="linenum">5022</span></a>      return <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a>;
<a name="l5023"><span class="linenum">5023</span></a>  }
<a name="l5024"><span class="linenum">5024</span></a>  
<a name="l5025"><span class="linenum">5025</span></a>  
<a name="l5026"><span class="linenum">5026</span></a>  <span class="comment">/**</span>
<a name="l5027"><span class="linenum">5027</span></a>  <span class="comment"> * Generate a link from params (credits stuff)</span>
<a name="l5028"><span class="linenum">5028</span></a>  <span class="comment"> *</span>
<a name="l5029"><span class="linenum">5029</span></a>  <span class="comment"> * @param array</span>
<a name="l5030"><span class="linenum">5030</span></a>  <span class="comment"> * @param array</span>
<a name="l5031"><span class="linenum">5031</span></a>  <span class="comment"> */</span>
<a name="l5032"><span class="linenum">5032</span></a>  function <a class="function" onClick="logFunction('generate_link_from_params')" href="../../../_functions/generate_link_from_params.html" onMouseOver="funcPopup(event,'generate_link_from_params')">generate_link_from_params</a>( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l5033"><span class="linenum">5033</span></a>  {
<a name="l5034"><span class="linenum">5034</span></a>      <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a>[0];
<a name="l5035"><span class="linenum">5035</span></a>      if( empty( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> ) )
<a name="l5036"><span class="linenum">5036</span></a>      {
<a name="l5037"><span class="linenum">5037</span></a>          return '';
<a name="l5038"><span class="linenum">5038</span></a>      }
<a name="l5039"><span class="linenum">5039</span></a>  
<a name="l5040"><span class="linenum">5040</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l5041"><span class="linenum">5041</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l5042"><span class="linenum">5042</span></a>              'type'        =&gt; 'link',
<a name="l5043"><span class="linenum">5043</span></a>              'img_url'     =&gt; '',
<a name="l5044"><span class="linenum">5044</span></a>              'img_width'   =&gt; '',
<a name="l5045"><span class="linenum">5045</span></a>              'img_height'  =&gt; '',
<a name="l5046"><span class="linenum">5046</span></a>              'title'       =&gt; '',
<a name="l5047"><span class="linenum">5047</span></a>              'target'      =&gt; '_blank',
<a name="l5048"><span class="linenum">5048</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l5049"><span class="linenum">5049</span></a>  
<a name="l5050"><span class="linenum">5050</span></a>      <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../_variables/link_params.html">$link_params</a>[1];
<a name="l5051"><span class="linenum">5051</span></a>      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>) )
<a name="l5052"><span class="linenum">5052</span></a>      {
<a name="l5053"><span class="linenum">5053</span></a>          <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('hash_link_params')" href="../../../_functions/hash_link_params.html" onMouseOver="funcPopup(event,'hash_link_params')">hash_link_params</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> );
<a name="l5054"><span class="linenum">5054</span></a>          <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>[0];
<a name="l5055"><span class="linenum">5055</span></a>      }
<a name="l5056"><span class="linenum">5056</span></a>      if( empty( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> ) )
<a name="l5057"><span class="linenum">5057</span></a>      {
<a name="l5058"><span class="linenum">5058</span></a>          return '';
<a name="l5059"><span class="linenum">5059</span></a>      }
<a name="l5060"><span class="linenum">5060</span></a>  
<a name="l5061"><span class="linenum">5061</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot;';
<a name="l5062"><span class="linenum">5062</span></a>  
<a name="l5063"><span class="linenum">5063</span></a>      if( !empty(<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['target'] ) )
<a name="l5064"><span class="linenum">5064</span></a>      {
<a name="l5065"><span class="linenum">5065</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' target=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['target'].'&quot;';
<a name="l5066"><span class="linenum">5066</span></a>      }
<a name="l5067"><span class="linenum">5067</span></a>  
<a name="l5068"><span class="linenum">5068</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['type'] == 'img' )
<a name="l5069"><span class="linenum">5069</span></a>      {
<a name="l5070"><span class="linenum">5070</span></a>          return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.' title=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'].'&quot;&gt;&lt;img src=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['img_url'].'&quot; alt=&quot;'
<a name="l5071"><span class="linenum">5071</span></a>                          .<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&quot; title=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'].'&quot; width=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['img_width'].'&quot; height=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['img_height']
<a name="l5072"><span class="linenum">5072</span></a>                          .'&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;';
<a name="l5073"><span class="linenum">5073</span></a>      }
<a name="l5074"><span class="linenum">5074</span></a>  
<a name="l5075"><span class="linenum">5075</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.'&gt;'.<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l5076"><span class="linenum">5076</span></a>  }
<a name="l5077"><span class="linenum">5077</span></a>  
<a name="l5078"><span class="linenum">5078</span></a>  
<a name="l5079"><span class="linenum">5079</span></a>  <span class="comment">/**</span>
<a name="l5080"><span class="linenum">5080</span></a>  <span class="comment"> * Send a result as javascript</span>
<a name="l5081"><span class="linenum">5081</span></a>  <span class="comment"> * automatically includes any Messages ( @see Log::display() )</span>
<a name="l5082"><span class="linenum">5082</span></a>  <span class="comment"> * no return from function as it terminates processing</span>
<a name="l5083"><span class="linenum">5083</span></a>  <span class="comment"> *</span>
<a name="l5084"><span class="linenum">5084</span></a>  <span class="comment"> * @author Yabba</span>
<a name="l5085"><span class="linenum">5085</span></a>  <span class="comment"> *</span>
<a name="l5086"><span class="linenum">5086</span></a>  <span class="comment"> * @todo dh&gt; Move this out into some more specific (not always included) file.</span>
<a name="l5087"><span class="linenum">5087</span></a>  <span class="comment"> *</span>
<a name="l5088"><span class="linenum">5088</span></a>  <span class="comment"> * @param array $methods javascript funtions to call with array of parameters</span>
<a name="l5089"><span class="linenum">5089</span></a>  <span class="comment"> *        format : 'function_name' =&gt; array( param1, parm2, param3 )</span>
<a name="l5090"><span class="linenum">5090</span></a>  <span class="comment"> * @param boolean $send_as_html Wrap the script into an html page with script tag; default is to send as js file</span>
<a name="l5091"><span class="linenum">5091</span></a>  <span class="comment"> * @param string $target prepended to function calls : blank or window.parent</span>
<a name="l5092"><span class="linenum">5092</span></a>  <span class="comment"> */</span>
<a name="l5093"><span class="linenum">5093</span></a>  function <a class="function" onClick="logFunction('send_javascript_message')" href="../../../_functions/send_javascript_message.html" onMouseOver="funcPopup(event,'send_javascript_message')">send_javascript_message</a>( <a class="var it3860" onMouseOver="hilite(3860)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../../../_variables/methods.html">$methods</a> = array(), <a class="var it7099" onMouseOver="hilite(7099)" onMouseOut="lolite()" onClick="logVariable('send_as_html')" href="../../../_variables/send_as_html.html">$send_as_html</a> = false, <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> = '' )
<a name="l5094"><span class="linenum">5094</span></a>  {
<a name="l5095"><span class="linenum">5095</span></a>  <span class="comment">    // lets spit out any messages</span>
<a name="l5096"><span class="linenum">5096</span></a>      global <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>;
<a name="l5097"><span class="linenum">5097</span></a>      <a class="phpfunction" onClick="logFunction('ob_start')" href="../../../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>();
<a name="l5098"><span class="linenum">5098</span></a>      <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l5099"><span class="linenum">5099</span></a>      <a class="var it82" onMouseOver="hilite(82)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="phpfunction" onClick="logFunction('ob_get_clean')" href="../../../_functions/ob_get_clean.html" onMouseOver="phpfuncPopup(event,'ob_get_clean')">ob_get_clean</a>();
<a name="l5100"><span class="linenum">5100</span></a>  
<a name="l5101"><span class="linenum">5101</span></a>  <span class="comment">    // set target</span>
<a name="l5102"><span class="linenum">5102</span></a>      <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> = ( <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> ? <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> : <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'js_target', 'string' ) );
<a name="l5103"><span class="linenum">5103</span></a>      if( <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> )
<a name="l5104"><span class="linenum">5104</span></a>      {    // add trailing [dot]
<a name="l5105"><span class="linenum">5105</span></a>          <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>, '.' ).'.';
<a name="l5106"><span class="linenum">5106</span></a>      }
<a name="l5107"><span class="linenum">5107</span></a>  
<a name="l5108"><span class="linenum">5108</span></a>  <span class="comment">    // target should be empty or window.parent.</span>
<a name="l5109"><span class="linenum">5109</span></a>      if( <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> &amp;&amp; <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a> != 'window.parent.' )
<a name="l5110"><span class="linenum">5110</span></a>      {
<a name="l5111"><span class="linenum">5111</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Unexpected javascript target' );
<a name="l5112"><span class="linenum">5112</span></a>      }
<a name="l5113"><span class="linenum">5113</span></a>  
<a name="l5114"><span class="linenum">5114</span></a>      if( <a class="var it82" onMouseOver="hilite(82)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> )
<a name="l5115"><span class="linenum">5115</span></a>      {    // we have some messages
<a name="l5116"><span class="linenum">5116</span></a>          <a class="var it82" onMouseOver="hilite(82)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.'<a class="function" onClick="logFunction('DisplayServerMessages')" href="../../../_functions/displayservermessages.html" onMouseOver="funcPopup(event,'displayservermessages')">DisplayServerMessages</a>( \''.<a class="function" onClick="logFunction('format_to_js')" href="../../../_functions/format_to_js.html" onMouseOver="funcPopup(event,'format_to_js')">format_to_js</a>( <a class="var it82" onMouseOver="hilite(82)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> ).'\');'.&quot;\n&quot;;
<a name="l5117"><span class="linenum">5117</span></a>      }
<a name="l5118"><span class="linenum">5118</span></a>  
<a name="l5119"><span class="linenum">5119</span></a>      if( !empty( <a class="var it3860" onMouseOver="hilite(3860)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../../../_variables/methods.html">$methods</a> ) )
<a name="l5120"><span class="linenum">5120</span></a>      {    // we have a methods to call
<a name="l5121"><span class="linenum">5121</span></a>          foreach( <a class="var it3860" onMouseOver="hilite(3860)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../../../_variables/methods.html">$methods</a> as <a class="var it279" onMouseOver="hilite(279)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../_variables/method.html">$method</a> =&gt; <a class="var it4481" onMouseOver="hilite(4481)" onMouseOut="lolite()" onClick="logVariable('param_list')" href="../../../_variables/param_list.html">$param_list</a> )
<a name="l5122"><span class="linenum">5122</span></a>          {    // loop through each requested method
<a name="l5123"><span class="linenum">5123</span></a>              <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array();
<a name="l5124"><span class="linenum">5124</span></a>              if( !<a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it4481" onMouseOver="hilite(4481)" onMouseOut="lolite()" onClick="logVariable('param_list')" href="../../../_variables/param_list.html">$param_list</a> ) )
<a name="l5125"><span class="linenum">5125</span></a>              {    // lets make it an array
<a name="l5126"><span class="linenum">5126</span></a>                  <a class="var it4481" onMouseOver="hilite(4481)" onMouseOut="lolite()" onClick="logVariable('param_list')" href="../../../_variables/param_list.html">$param_list</a> = array( <a class="var it4481" onMouseOver="hilite(4481)" onMouseOut="lolite()" onClick="logVariable('param_list')" href="../../../_variables/param_list.html">$param_list</a> );
<a name="l5127"><span class="linenum">5127</span></a>              }
<a name="l5128"><span class="linenum">5128</span></a>              foreach( <a class="var it4481" onMouseOver="hilite(4481)" onMouseOut="lolite()" onClick="logVariable('param_list')" href="../../../_variables/param_list.html">$param_list</a> as <a class="var it1652" onMouseOver="hilite(1652)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../../_variables/param.html">$param</a> )
<a name="l5129"><span class="linenum">5129</span></a>              {    // add each parameter to the output
<a name="l5130"><span class="linenum">5130</span></a>                  if( !<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>( <a class="var it1652" onMouseOver="hilite(1652)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../../_variables/param.html">$param</a> ) )
<a name="l5131"><span class="linenum">5131</span></a>                  {    // this is a string, quote it
<a name="l5132"><span class="linenum">5132</span></a>                      <a class="var it1652" onMouseOver="hilite(1652)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../../_variables/param.html">$param</a> = '\''.<a class="function" onClick="logFunction('format_to_js')" href="../../../_functions/format_to_js.html" onMouseOver="funcPopup(event,'format_to_js')">format_to_js</a>( <a class="var it1652" onMouseOver="hilite(1652)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../../_variables/param.html">$param</a> ).'\'';
<a name="l5133"><span class="linenum">5133</span></a>                  }
<a name="l5134"><span class="linenum">5134</span></a>                  <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[] = <a class="var it1652" onMouseOver="hilite(1652)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../../_variables/param.html">$param</a>;<span class="comment">// add param to the list</span>
<a name="l5135"><span class="linenum">5135</span></a>              }
<a name="l5136"><span class="linenum">5136</span></a>  <span class="comment">            // add method and parameters</span>
<a name="l5137"><span class="linenum">5137</span></a>              <a class="var it82" onMouseOver="hilite(82)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../../_variables/target.html">$target</a>.<a class="var it279" onMouseOver="hilite(279)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../../_variables/method.html">$method</a>.'('.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ).');'.&quot;\n&quot;;
<a name="l5138"><span class="linenum">5138</span></a>          }
<a name="l5139"><span class="linenum">5139</span></a>      }
<a name="l5140"><span class="linenum">5140</span></a>  
<a name="l5141"><span class="linenum">5141</span></a>      if( <a class="var it7099" onMouseOver="hilite(7099)" onMouseOut="lolite()" onClick="logVariable('send_as_html')" href="../../../_variables/send_as_html.html">$send_as_html</a> )
<a name="l5142"><span class="linenum">5142</span></a>      {    // we want to send as a html document
<a name="l5143"><span class="linenum">5143</span></a>          <a class="function" onClick="logFunction('headers_content_mightcache')" href="../../../_functions/headers_content_mightcache.html" onMouseOver="funcPopup(event,'headers_content_mightcache')">headers_content_mightcache</a>( 'text/html', 0 );        <span class="comment">// Do NOT cache interactive communications.</span>
<a name="l5144"><span class="linenum">5144</span></a>          echo '&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;script type=&quot;text/javascript&quot;&gt;'.&quot;\n&quot;;
<a name="l5145"><span class="linenum">5145</span></a>          echo <a class="var it82" onMouseOver="hilite(82)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>;
<a name="l5146"><span class="linenum">5146</span></a>          echo '&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;';
<a name="l5147"><span class="linenum">5147</span></a>      }
<a name="l5148"><span class="linenum">5148</span></a>      else
<a name="l5149"><span class="linenum">5149</span></a>      {    // we want to send as js
<a name="l5150"><span class="linenum">5150</span></a>          <a class="function" onClick="logFunction('headers_content_mightcache')" href="../../../_functions/headers_content_mightcache.html" onMouseOver="funcPopup(event,'headers_content_mightcache')">headers_content_mightcache</a>( 'text/javascript', 0 );        <span class="comment">// Do NOT cache interactive communications.</span>
<a name="l5151"><span class="linenum">5151</span></a>          echo <a class="var it82" onMouseOver="hilite(82)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>;
<a name="l5152"><span class="linenum">5152</span></a>      }
<a name="l5153"><span class="linenum">5153</span></a>  
<a name="l5154"><span class="linenum">5154</span></a>      exit(0);
<a name="l5155"><span class="linenum">5155</span></a>  }
<a name="l5156"><span class="linenum">5156</span></a>  
<a name="l5157"><span class="linenum">5157</span></a>  
<a name="l5158"><span class="linenum">5158</span></a>  <span class="comment">/**</span>
<a name="l5159"><span class="linenum">5159</span></a>  <span class="comment"> * Basic tidy up of strings</span>
<a name="l5160"><span class="linenum">5160</span></a>  <span class="comment"> *</span>
<a name="l5161"><span class="linenum">5161</span></a>  <span class="comment"> * @author Yabba</span>
<a name="l5162"><span class="linenum">5162</span></a>  <span class="comment"> * @author Tblue</span>
<a name="l5163"><span class="linenum">5163</span></a>  <span class="comment"> *</span>
<a name="l5164"><span class="linenum">5164</span></a>  <span class="comment"> * @param string $unformatted raw data</span>
<a name="l5165"><span class="linenum">5165</span></a>  <span class="comment"> * @return string formatted data</span>
<a name="l5166"><span class="linenum">5166</span></a>  <span class="comment"> */</span>
<a name="l5167"><span class="linenum">5167</span></a>  function <a class="function" onClick="logFunction('format_to_js')" href="../../../_functions/format_to_js.html" onMouseOver="funcPopup(event,'format_to_js')">format_to_js</a>( <a class="var it7100" onMouseOver="hilite(7100)" onMouseOut="lolite()" onClick="logVariable('unformatted')" href="../../../_variables/unformatted.html">$unformatted</a> )
<a name="l5168"><span class="linenum">5168</span></a>  {
<a name="l5169"><span class="linenum">5169</span></a>      return <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array(
<a name="l5170"><span class="linenum">5170</span></a>                              '\'',
<a name="l5171"><span class="linenum">5171</span></a>                              '\n',
<a name="l5172"><span class="linenum">5172</span></a>                              '\r',
<a name="l5173"><span class="linenum">5173</span></a>                              '\t',
<a name="l5174"><span class="linenum">5174</span></a>                              &quot;\n&quot;,
<a name="l5175"><span class="linenum">5175</span></a>                              &quot;\r&quot;,
<a name="l5176"><span class="linenum">5176</span></a>                          ),
<a name="l5177"><span class="linenum">5177</span></a>                          array(
<a name="l5178"><span class="linenum">5178</span></a>                              '\\\'',
<a name="l5179"><span class="linenum">5179</span></a>                              '\\\\n',
<a name="l5180"><span class="linenum">5180</span></a>                              '\\\\r',
<a name="l5181"><span class="linenum">5181</span></a>                              '\\\\t',
<a name="l5182"><span class="linenum">5182</span></a>                              '\n',
<a name="l5183"><span class="linenum">5183</span></a>                              '\r',
<a name="l5184"><span class="linenum">5184</span></a>                          ), <a class="var it7100" onMouseOver="hilite(7100)" onMouseOut="lolite()" onClick="logVariable('unformatted')" href="../../../_variables/unformatted.html">$unformatted</a> );
<a name="l5185"><span class="linenum">5185</span></a>  }
<a name="l5186"><span class="linenum">5186</span></a>  
<a name="l5187"><span class="linenum">5187</span></a>  
<a name="l5188"><span class="linenum">5188</span></a>  <span class="comment">/**</span>
<a name="l5189"><span class="linenum">5189</span></a>  <span class="comment"> * Get available cort oprions for items</span>
<a name="l5190"><span class="linenum">5190</span></a>  <span class="comment"> *</span>
<a name="l5191"><span class="linenum">5191</span></a>  <span class="comment"> * @return array key=&gt;name</span>
<a name="l5192"><span class="linenum">5192</span></a>  <span class="comment"> */</span>
<a name="l5193"><span class="linenum">5193</span></a>  function <a class="function" onClick="logFunction('get_available_sort_options')" href="../../../_functions/get_available_sort_options.html" onMouseOver="funcPopup(event,'get_available_sort_options')">get_available_sort_options</a>()
<a name="l5194"><span class="linenum">5194</span></a>  {
<a name="l5195"><span class="linenum">5195</span></a>      return array(
<a name="l5196"><span class="linenum">5196</span></a>          'datestart'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Date issued (Default)'),
<a name="l5197"><span class="linenum">5197</span></a>          'order'           =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Order (as explicitly specified)'),
<a name="l5198"><span class="linenum">5198</span></a>  <span class="comment">        //'datedeadline' =&gt; T_('Deadline'),</span>
<a name="l5199"><span class="linenum">5199</span></a>          'title'           =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Title'),
<a name="l5200"><span class="linenum">5200</span></a>          'datecreated'     =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Date created'),
<a name="l5201"><span class="linenum">5201</span></a>          'datemodified'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Date last modified'),
<a name="l5202"><span class="linenum">5202</span></a>          'last_touched_ts' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Date last touched'),
<a name="l5203"><span class="linenum">5203</span></a>          'urltitle'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('URL &quot;filename&quot;'),
<a name="l5204"><span class="linenum">5204</span></a>          'priority'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Priority'),
<a name="l5205"><span class="linenum">5205</span></a>          'RAND'            =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Random order!'),
<a name="l5206"><span class="linenum">5206</span></a>      );
<a name="l5207"><span class="linenum">5207</span></a>  }
<a name="l5208"><span class="linenum">5208</span></a>  
<a name="l5209"><span class="linenum">5209</span></a>  
<a name="l5210"><span class="linenum">5210</span></a>  <span class="comment">/**</span>
<a name="l5211"><span class="linenum">5211</span></a>  <span class="comment"> * Get available cort oprions for blogs</span>
<a name="l5212"><span class="linenum">5212</span></a>  <span class="comment"> *</span>
<a name="l5213"><span class="linenum">5213</span></a>  <span class="comment"> * @return array key=&gt;name</span>
<a name="l5214"><span class="linenum">5214</span></a>  <span class="comment"> */</span>
<a name="l5215"><span class="linenum">5215</span></a>  function <a class="function" onClick="logFunction('get_coll_sort_options')" href="../../../_functions/get_coll_sort_options.html" onMouseOver="funcPopup(event,'get_coll_sort_options')">get_coll_sort_options</a>()
<a name="l5216"><span class="linenum">5216</span></a>  {
<a name="l5217"><span class="linenum">5217</span></a>      return array(
<a name="l5218"><span class="linenum">5218</span></a>          'order'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Order (Default)'),
<a name="l5219"><span class="linenum">5219</span></a>          'ID'           =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Blog ID'),
<a name="l5220"><span class="linenum">5220</span></a>          'name'         =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Name'),
<a name="l5221"><span class="linenum">5221</span></a>          'shortname'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Short name'),
<a name="l5222"><span class="linenum">5222</span></a>          'tagline'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Tagline'),
<a name="l5223"><span class="linenum">5223</span></a>          'description'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Description'),
<a name="l5224"><span class="linenum">5224</span></a>          'urlname'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('URL &quot;filename&quot;'),
<a name="l5225"><span class="linenum">5225</span></a>          'RAND'         =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Random order!'),
<a name="l5226"><span class="linenum">5226</span></a>      );
<a name="l5227"><span class="linenum">5227</span></a>  }
<a name="l5228"><span class="linenum">5228</span></a>  
<a name="l5229"><span class="linenum">5229</span></a>  
<a name="l5230"><span class="linenum">5230</span></a>  <span class="comment">/**</span>
<a name="l5231"><span class="linenum">5231</span></a>  <span class="comment"> * Converts array to form option list</span>
<a name="l5232"><span class="linenum">5232</span></a>  <span class="comment"> *</span>
<a name="l5233"><span class="linenum">5233</span></a>  <span class="comment"> * @param integer|array selected key</span>
<a name="l5234"><span class="linenum">5234</span></a>  <span class="comment"> * @param boolean provide a choice for &quot;none&quot; with value ''</span>
<a name="l5235"><span class="linenum">5235</span></a>  <span class="comment"> * @return string</span>
<a name="l5236"><span class="linenum">5236</span></a>  <span class="comment"> */</span>
<a name="l5237"><span class="linenum">5237</span></a>  function <a class="function" onClick="logFunction('array_to_option_list')" href="../../../_functions/array_to_option_list.html" onMouseOver="funcPopup(event,'array_to_option_list')">array_to_option_list</a>( <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a>, <a class="var it277" onMouseOver="hilite(277)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../../_variables/default.html">$default</a> = '', <a class="var it278" onMouseOver="hilite(278)" onMouseOut="lolite()" onClick="logVariable('allow_none')" href="../../../_variables/allow_none.html">$allow_none</a> = false )
<a name="l5238"><span class="linenum">5238</span></a>  {
<a name="l5239"><span class="linenum">5239</span></a>      if( !<a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it277" onMouseOver="hilite(277)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../../_variables/default.html">$default</a> ) )
<a name="l5240"><span class="linenum">5240</span></a>      {
<a name="l5241"><span class="linenum">5241</span></a>          <a class="var it277" onMouseOver="hilite(277)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../../_variables/default.html">$default</a> = array( <a class="var it277" onMouseOver="hilite(277)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../../_variables/default.html">$default</a> );
<a name="l5242"><span class="linenum">5242</span></a>      }
<a name="l5243"><span class="linenum">5243</span></a>  
<a name="l5244"><span class="linenum">5244</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l5245"><span class="linenum">5245</span></a>  
<a name="l5246"><span class="linenum">5246</span></a>      if( <a class="var it278" onMouseOver="hilite(278)" onMouseOut="lolite()" onClick="logVariable('allow_none')" href="../../../_variables/allow_none.html">$allow_none</a> )
<a name="l5247"><span class="linenum">5247</span></a>      {
<a name="l5248"><span class="linenum">5248</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;option value=&quot;'.<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('none_option_value')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../_variables/none_option_value.html">none_option_value</a>.'&quot;';
<a name="l5249"><span class="linenum">5249</span></a>          if( empty(<a class="var it277" onMouseOver="hilite(277)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../../_variables/default.html">$default</a>) ) <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' selected=&quot;selected&quot;';
<a name="l5250"><span class="linenum">5250</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('none_option_text')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../_variables/none_option_text.html">none_option_text</a>).'&lt;/option&gt;'.&quot;\n&quot;;
<a name="l5251"><span class="linenum">5251</span></a>      }
<a name="l5252"><span class="linenum">5252</span></a>  
<a name="l5253"><span class="linenum">5253</span></a>      foreach( <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a> as <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>=&gt;<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a> )
<a name="l5254"><span class="linenum">5254</span></a>      {
<a name="l5255"><span class="linenum">5255</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .=  '&lt;option value=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>,'formvalue').'&quot;';
<a name="l5256"><span class="linenum">5256</span></a>          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>, <a class="var it277" onMouseOver="hilite(277)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../../_variables/default.html">$default</a> ) ) <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' selected=&quot;selected&quot;';
<a name="l5257"><span class="linenum">5257</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;';
<a name="l5258"><span class="linenum">5258</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>, 'htmlbody' );
<a name="l5259"><span class="linenum">5259</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .=  '&lt;/option&gt;'.&quot;\n&quot;;
<a name="l5260"><span class="linenum">5260</span></a>      }
<a name="l5261"><span class="linenum">5261</span></a>  
<a name="l5262"><span class="linenum">5262</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l5263"><span class="linenum">5263</span></a>  }
<a name="l5264"><span class="linenum">5264</span></a>  
<a name="l5265"><span class="linenum">5265</span></a>  
<a name="l5266"><span class="linenum">5266</span></a>  <span class="comment">/**</span>
<a name="l5267"><span class="linenum">5267</span></a>  <span class="comment"> * Get a value from a volatile/lossy cache.</span>
<a name="l5268"><span class="linenum">5268</span></a>  <span class="comment"> *</span>
<a name="l5269"><span class="linenum">5269</span></a>  <span class="comment"> * @param string key</span>
<a name="l5270"><span class="linenum">5270</span></a>  <span class="comment"> * @param boolean success (by reference)</span>
<a name="l5271"><span class="linenum">5271</span></a>  <span class="comment"> * @return mixed True in case of success, false in case of failure. NULL, if no backend is available.</span>
<a name="l5272"><span class="linenum">5272</span></a>  <span class="comment"> */</span>
<a name="l5273"><span class="linenum">5273</span></a>  function <a class="function" onClick="logFunction('get_from_mem_cache')" href="../../../_functions/get_from_mem_cache.html" onMouseOver="funcPopup(event,'get_from_mem_cache')">get_from_mem_cache</a>(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>, &amp; <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('success')" href="../../../_variables/success.html">$success</a> )
<a name="l5274"><span class="linenum">5274</span></a>  {
<a name="l5275"><span class="linenum">5275</span></a>      global <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>;
<a name="l5276"><span class="linenum">5276</span></a>  
<a name="l5277"><span class="linenum">5277</span></a>      <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>('get_from_mem_cache', false);
<a name="l5278"><span class="linenum">5278</span></a>  
<a name="l5279"><span class="linenum">5279</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('apc_fetch') )
<a name="l5280"><span class="linenum">5280</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = apc_fetch( <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>, <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('success')" href="../../../_variables/success.html">$success</a> );
<a name="l5281"><span class="linenum">5281</span></a>      elseif( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('xcache_get') &amp;&amp; <a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('xcache.var_size') &gt; 0 )
<a name="l5282"><span class="linenum">5282</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = xcache_get(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>);
<a name="l5283"><span class="linenum">5283</span></a>      elseif( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('eaccelerator_get') )
<a name="l5284"><span class="linenum">5284</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = eaccelerator_get(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>);
<a name="l5285"><span class="linenum">5285</span></a>  
<a name="l5286"><span class="linenum">5286</span></a>      if( ! isset(<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('success')" href="../../../_variables/success.html">$success</a>) )
<a name="l5287"><span class="linenum">5287</span></a>      { // set <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('success')" href="../../../_variables/success.html">$success</a> for implementation that do not set it itself (only APC does so)
<a name="l5288"><span class="linenum">5288</span></a>          <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('success')" href="../../../_variables/success.html">$success</a> = isset(<a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>);
<a name="l5289"><span class="linenum">5289</span></a>      }
<a name="l5290"><span class="linenum">5290</span></a>      if( ! <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('success')" href="../../../_variables/success.html">$success</a> )
<a name="l5291"><span class="linenum">5291</span></a>      {
<a name="l5292"><span class="linenum">5292</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = NULL;
<a name="l5293"><span class="linenum">5293</span></a>  
<a name="l5294"><span class="linenum">5294</span></a>          global <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l5295"><span class="linenum">5295</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('No caching backend available for reading &quot;'.<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>.'&quot;.', 'cache');
<a name="l5296"><span class="linenum">5296</span></a>      }
<a name="l5297"><span class="linenum">5297</span></a>  
<a name="l5298"><span class="linenum">5298</span></a>      <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>('get_from_mem_cache', false);
<a name="l5299"><span class="linenum">5299</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l5300"><span class="linenum">5300</span></a>  }
<a name="l5301"><span class="linenum">5301</span></a>  
<a name="l5302"><span class="linenum">5302</span></a>  
<a name="l5303"><span class="linenum">5303</span></a>  <span class="comment">/**</span>
<a name="l5304"><span class="linenum">5304</span></a>  <span class="comment"> * Set a value to a volatile/lossy cache.</span>
<a name="l5305"><span class="linenum">5305</span></a>  <span class="comment"> *</span>
<a name="l5306"><span class="linenum">5306</span></a>  <span class="comment"> * There's no guarantee that the data is still available, since e.g. old</span>
<a name="l5307"><span class="linenum">5307</span></a>  <span class="comment"> * values might get purged.</span>
<a name="l5308"><span class="linenum">5308</span></a>  <span class="comment"> *</span>
<a name="l5309"><span class="linenum">5309</span></a>  <span class="comment"> * @param string key</span>
<a name="l5310"><span class="linenum">5310</span></a>  <span class="comment"> * @param mixed Data. Objects would have to be serialized.</span>
<a name="l5311"><span class="linenum">5311</span></a>  <span class="comment"> * @param int Time to live (seconds). Default is 0 and means &quot;forever&quot;.</span>
<a name="l5312"><span class="linenum">5312</span></a>  <span class="comment"> * @return mixed</span>
<a name="l5313"><span class="linenum">5313</span></a>  <span class="comment"> */</span>
<a name="l5314"><span class="linenum">5314</span></a>  function <a class="function" onClick="logFunction('set_to_mem_cache')" href="../../../_functions/set_to_mem_cache.html" onMouseOver="funcPopup(event,'set_to_mem_cache')">set_to_mem_cache</a>(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>, <a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('payload')" href="../../../_variables/payload.html">$payload</a>, <a class="var it7101" onMouseOver="hilite(7101)" onMouseOut="lolite()" onClick="logVariable('ttl')" href="../../../_variables/ttl.html">$ttl</a> = 0)
<a name="l5315"><span class="linenum">5315</span></a>  {
<a name="l5316"><span class="linenum">5316</span></a>      global <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>;
<a name="l5317"><span class="linenum">5317</span></a>  
<a name="l5318"><span class="linenum">5318</span></a>      <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>('set_to_mem_cache', false);
<a name="l5319"><span class="linenum">5319</span></a>  
<a name="l5320"><span class="linenum">5320</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('apc_store') )
<a name="l5321"><span class="linenum">5321</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = apc_store( <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>, <a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('payload')" href="../../../_variables/payload.html">$payload</a>, <a class="var it7101" onMouseOver="hilite(7101)" onMouseOut="lolite()" onClick="logVariable('ttl')" href="../../../_variables/ttl.html">$ttl</a> );
<a name="l5322"><span class="linenum">5322</span></a>      elseif( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('xcache_set') &amp;&amp; <a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('xcache.var_size') &gt; 0 )
<a name="l5323"><span class="linenum">5323</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = xcache_set( <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>, <a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('payload')" href="../../../_variables/payload.html">$payload</a>, <a class="var it7101" onMouseOver="hilite(7101)" onMouseOut="lolite()" onClick="logVariable('ttl')" href="../../../_variables/ttl.html">$ttl</a> );
<a name="l5324"><span class="linenum">5324</span></a>      elseif( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('eaccelerator_put') )
<a name="l5325"><span class="linenum">5325</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = eaccelerator_put( <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>, <a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('payload')" href="../../../_variables/payload.html">$payload</a>, <a class="var it7101" onMouseOver="hilite(7101)" onMouseOut="lolite()" onClick="logVariable('ttl')" href="../../../_variables/ttl.html">$ttl</a> );
<a name="l5326"><span class="linenum">5326</span></a>      else {
<a name="l5327"><span class="linenum">5327</span></a>          global <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l5328"><span class="linenum">5328</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('No caching backend available for writing &quot;'.<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>.'&quot;.', 'cache');
<a name="l5329"><span class="linenum">5329</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = NULL;
<a name="l5330"><span class="linenum">5330</span></a>      }
<a name="l5331"><span class="linenum">5331</span></a>  
<a name="l5332"><span class="linenum">5332</span></a>      <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>('set_to_mem_cache', false);
<a name="l5333"><span class="linenum">5333</span></a>  
<a name="l5334"><span class="linenum">5334</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l5335"><span class="linenum">5335</span></a>  }
<a name="l5336"><span class="linenum">5336</span></a>  
<a name="l5337"><span class="linenum">5337</span></a>  
<a name="l5338"><span class="linenum">5338</span></a>  <span class="comment">/**</span>
<a name="l5339"><span class="linenum">5339</span></a>  <span class="comment"> * Remove a given key from the volatile/lossy cache.</span>
<a name="l5340"><span class="linenum">5340</span></a>  <span class="comment"> *</span>
<a name="l5341"><span class="linenum">5341</span></a>  <span class="comment"> * @param string key</span>
<a name="l5342"><span class="linenum">5342</span></a>  <span class="comment"> * @return boolean True on success, false on failure. NULL if no backend available.</span>
<a name="l5343"><span class="linenum">5343</span></a>  <span class="comment"> */</span>
<a name="l5344"><span class="linenum">5344</span></a>  function <a class="function" onClick="logFunction('unset_from_mem_cache')" href="../../../_functions/unset_from_mem_cache.html" onMouseOver="funcPopup(event,'unset_from_mem_cache')">unset_from_mem_cache</a>(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>)
<a name="l5345"><span class="linenum">5345</span></a>  {
<a name="l5346"><span class="linenum">5346</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('apc_delete') )
<a name="l5347"><span class="linenum">5347</span></a>          return apc_delete( <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> );
<a name="l5348"><span class="linenum">5348</span></a>  
<a name="l5349"><span class="linenum">5349</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('xcache_unset') )
<a name="l5350"><span class="linenum">5350</span></a>          return xcache_unset(gen_key_for_cache(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>));
<a name="l5351"><span class="linenum">5351</span></a>  
<a name="l5352"><span class="linenum">5352</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('eaccelerator_rm') )
<a name="l5353"><span class="linenum">5353</span></a>          return eaccelerator_rm(gen_key_for_cache(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>));
<a name="l5354"><span class="linenum">5354</span></a>  }
<a name="l5355"><span class="linenum">5355</span></a>  
<a name="l5356"><span class="linenum">5356</span></a>  
<a name="l5357"><span class="linenum">5357</span></a>  <span class="comment">/**</span>
<a name="l5358"><span class="linenum">5358</span></a>  <span class="comment"> * Generate order by clause</span>
<a name="l5359"><span class="linenum">5359</span></a>  <span class="comment"> *</span>
<a name="l5360"><span class="linenum">5360</span></a>  <span class="comment"> * @param string The order values are separated by space or comma</span>
<a name="l5361"><span class="linenum">5361</span></a>  <span class="comment"> * @param string An order direction: ASC, DESC</span>
<a name="l5362"><span class="linenum">5362</span></a>  <span class="comment"> * @param string DB prefix</span>
<a name="l5363"><span class="linenum">5363</span></a>  <span class="comment"> * @param string ID field name with prefix</span>
<a name="l5364"><span class="linenum">5364</span></a>  <span class="comment"> * @param array Names of DB fields(without prefix) that are available</span>
<a name="l5365"><span class="linenum">5365</span></a>  <span class="comment"> * @return string The order fields are separated by comma</span>
<a name="l5366"><span class="linenum">5366</span></a>  <span class="comment"> */</span>
<a name="l5367"><span class="linenum">5367</span></a>  function <a class="function" onClick="logFunction('gen_order_clause')" href="../../../_functions/gen_order_clause.html" onMouseOver="funcPopup(event,'gen_order_clause')">gen_order_clause</a>( <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('order_by')" href="../../../_variables/order_by.html">$order_by</a>, <a class="var it269" onMouseOver="hilite(269)" onMouseOut="lolite()" onClick="logVariable('order_dir')" href="../../../_variables/order_dir.html">$order_dir</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a>, <a class="var it7102" onMouseOver="hilite(7102)" onMouseOut="lolite()" onClick="logVariable('dbIDname_disambiguation')" href="../../../_variables/dbIDname_disambiguation.html">$dbIDname_disambiguation</a>, <a class="var it487" onMouseOver="hilite(487)" onMouseOut="lolite()" onClick="logVariable('available_fields')" href="../../../_variables/available_fields.html">$available_fields</a> = NULL )
<a name="l5368"><span class="linenum">5368</span></a>  {
<a name="l5369"><span class="linenum">5369</span></a>      <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../../../_variables/orderby.html">$orderby</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( ' ', ',', <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('order_by')" href="../../../_variables/order_by.html">$order_by</a> );
<a name="l5370"><span class="linenum">5370</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('orderby_array')" href="../../../_variables/orderby_array.html">$orderby_array</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../../../_variables/orderby.html">$orderby</a> );
<a name="l5371"><span class="linenum">5371</span></a>  
<a name="l5372"><span class="linenum">5372</span></a>      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it487" onMouseOver="hilite(487)" onMouseOut="lolite()" onClick="logVariable('available_fields')" href="../../../_variables/available_fields.html">$available_fields</a> ) )
<a name="l5373"><span class="linenum">5373</span></a>      { // Exclude the incorrect fields from order clause
<a name="l5374"><span class="linenum">5374</span></a>          foreach( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('orderby_array')" href="../../../_variables/orderby_array.html">$orderby_array</a> as <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> =&gt; <a class="var it7103" onMouseOver="hilite(7103)" onMouseOut="lolite()" onClick="logVariable('orderby_field')" href="../../../_variables/orderby_field.html">$orderby_field</a> )
<a name="l5375"><span class="linenum">5375</span></a>          {
<a name="l5376"><span class="linenum">5376</span></a>              if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it7103" onMouseOver="hilite(7103)" onMouseOut="lolite()" onClick="logVariable('orderby_field')" href="../../../_variables/orderby_field.html">$orderby_field</a>, <a class="var it487" onMouseOver="hilite(487)" onMouseOut="lolite()" onClick="logVariable('available_fields')" href="../../../_variables/available_fields.html">$available_fields</a> ) )
<a name="l5377"><span class="linenum">5377</span></a>              {
<a name="l5378"><span class="linenum">5378</span></a>                  unset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('orderby_array')" href="../../../_variables/orderby_array.html">$orderby_array</a>[ <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> ] );
<a name="l5379"><span class="linenum">5379</span></a>              }
<a name="l5380"><span class="linenum">5380</span></a>          }
<a name="l5381"><span class="linenum">5381</span></a>      }
<a name="l5382"><span class="linenum">5382</span></a>  
<a name="l5383"><span class="linenum">5383</span></a>  <span class="comment">    // Format each order param with default column names:</span>
<a name="l5384"><span class="linenum">5384</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('orderby_array')" href="../../../_variables/orderby_array.html">$orderby_array</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '#^(.+)$#', <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a>.'<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a> '.<a class="var it269" onMouseOver="hilite(269)" onMouseOut="lolite()" onClick="logVariable('order_dir')" href="../../../_variables/order_dir.html">$order_dir</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('orderby_array')" href="../../../_variables/orderby_array.html">$orderby_array</a> );
<a name="l5385"><span class="linenum">5385</span></a>  
<a name="l5386"><span class="linenum">5386</span></a>  <span class="comment">    // Add an ID parameter to make sure there is no ambiguity in ordering on similar items:</span>
<a name="l5387"><span class="linenum">5387</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('orderby_array')" href="../../../_variables/orderby_array.html">$orderby_array</a>[] = <a class="var it7102" onMouseOver="hilite(7102)" onMouseOut="lolite()" onClick="logVariable('dbIDname_disambiguation')" href="../../../_variables/dbIDname_disambiguation.html">$dbIDname_disambiguation</a>.' '.<a class="var it269" onMouseOver="hilite(269)" onMouseOut="lolite()" onClick="logVariable('order_dir')" href="../../../_variables/order_dir.html">$order_dir</a>;
<a name="l5388"><span class="linenum">5388</span></a>  
<a name="l5389"><span class="linenum">5389</span></a>      <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('order_by')" href="../../../_variables/order_by.html">$order_by</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('orderby_array')" href="../../../_variables/orderby_array.html">$orderby_array</a> );
<a name="l5390"><span class="linenum">5390</span></a>  
<a name="l5391"><span class="linenum">5391</span></a>  <span class="comment">    // Special case for RAND:</span>
<a name="l5392"><span class="linenum">5392</span></a>      <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('order_by')" href="../../../_variables/order_by.html">$order_by</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a>.'RAND ', '<a class="phpfunction" onClick="logFunction('RAND')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">RAND</a>() ', <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('order_by')" href="../../../_variables/order_by.html">$order_by</a> );
<a name="l5393"><span class="linenum">5393</span></a>  
<a name="l5394"><span class="linenum">5394</span></a>      return <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('order_by')" href="../../../_variables/order_by.html">$order_by</a>;
<a name="l5395"><span class="linenum">5395</span></a>  }
<a name="l5396"><span class="linenum">5396</span></a>  
<a name="l5397"><span class="linenum">5397</span></a>  
<a name="l5398"><span class="linenum">5398</span></a>  <span class="comment">/**</span>
<a name="l5399"><span class="linenum">5399</span></a>  <span class="comment"> * Get the IconLegend instance.</span>
<a name="l5400"><span class="linenum">5400</span></a>  <span class="comment"> *</span>
<a name="l5401"><span class="linenum">5401</span></a>  <span class="comment"> * @return IconLegend or false, if the user has not set &quot;display_icon_legend&quot;</span>
<a name="l5402"><span class="linenum">5402</span></a>  <span class="comment"> */</span>
<a name="l5403"><span class="linenum">5403</span></a>  function &amp; get_IconLegend()
<a name="l5404"><span class="linenum">5404</span></a>  {
<a name="l5405"><span class="linenum">5405</span></a>      static <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('IconLegend')" href="../../../_variables/IconLegend.html">$IconLegend</a>;
<a name="l5406"><span class="linenum">5406</span></a>  
<a name="l5407"><span class="linenum">5407</span></a>      if( ! isset(<a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('IconLegend')" href="../../../_variables/IconLegend.html">$IconLegend</a>) )
<a name="l5408"><span class="linenum">5408</span></a>      {
<a name="l5409"><span class="linenum">5409</span></a>          global <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>;
<a name="l5410"><span class="linenum">5410</span></a>          if( <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('display_icon_legend') )
<a name="l5411"><span class="linenum">5411</span></a>          {
<a name="l5412"><span class="linenum">5412</span></a>              <span class="comment">/**</span>
<a name="l5413"><span class="linenum">5413</span></a>  <span class="comment">             * Icon Legend</span>
<a name="l5414"><span class="linenum">5414</span></a>  <span class="comment">             */</span>
<a name="l5415"><span class="linenum">5415</span></a>              <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '_core/ui/_iconlegend.class.php', 'IconLegend' );
<a name="l5416"><span class="linenum">5416</span></a>              <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('IconLegend')" href="../../../_variables/IconLegend.html">$IconLegend</a> = <span class="keyword">new </span><a class="class" onClick="logClass('IconLegend')" href="../../../_classes/iconlegend.html" onMouseOver="classPopup(event,'iconlegend')">IconLegend</a>();
<a name="l5417"><span class="linenum">5417</span></a>          }
<a name="l5418"><span class="linenum">5418</span></a>          else
<a name="l5419"><span class="linenum">5419</span></a>          {
<a name="l5420"><span class="linenum">5420</span></a>              <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('IconLegend')" href="../../../_variables/IconLegend.html">$IconLegend</a> = false;
<a name="l5421"><span class="linenum">5421</span></a>          }
<a name="l5422"><span class="linenum">5422</span></a>      }
<a name="l5423"><span class="linenum">5423</span></a>      return <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('IconLegend')" href="../../../_variables/IconLegend.html">$IconLegend</a>;
<a name="l5424"><span class="linenum">5424</span></a>  }
<a name="l5425"><span class="linenum">5425</span></a>  
<a name="l5426"><span class="linenum">5426</span></a>  
<a name="l5427"><span class="linenum">5427</span></a>  <span class="comment">/**</span>
<a name="l5428"><span class="linenum">5428</span></a>  <span class="comment"> * Get name of active opcode cache, or &quot;none&quot;.</span>
<a name="l5429"><span class="linenum">5429</span></a>  <span class="comment"> * {@internal Anyone using something else, please extend.}}</span>
<a name="l5430"><span class="linenum">5430</span></a>  <span class="comment"> * @return string</span>
<a name="l5431"><span class="linenum">5431</span></a>  <span class="comment"> */</span>
<a name="l5432"><span class="linenum">5432</span></a>  function <a class="function" onClick="logFunction('get_active_opcode_cache')" href="../../../_functions/get_active_opcode_cache.html" onMouseOver="funcPopup(event,'get_active_opcode_cache')">get_active_opcode_cache</a>()
<a name="l5433"><span class="linenum">5433</span></a>  {
<a name="l5434"><span class="linenum">5434</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('apc_cache_info') &amp;&amp; <a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('apc.enabled') ) # disabled for CLI (see apc.enable_cli), however: just use this setting and do not call the function.
<a name="l5435"><span class="linenum">5435</span></a>      {
<a name="l5436"><span class="linenum">5436</span></a>  <span class="comment">        // fp&gt;blueyed? why did you remove the following 2 lines? your comment above is not clear.</span>
<a name="l5437"><span class="linenum">5437</span></a>          <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('apc_info')" href="../../../_variables/apc_info.html">$apc_info</a> = apc_cache_info( '', true );
<a name="l5438"><span class="linenum">5438</span></a>          if( isset( <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('apc_info')" href="../../../_variables/apc_info.html">$apc_info</a>['num_entries'] ) &amp;&amp; ( <a class="var it7104" onMouseOver="hilite(7104)" onMouseOut="lolite()" onClick="logVariable('apc_info')" href="../../../_variables/apc_info.html">$apc_info</a>['num_entries'] ) )
<a name="l5439"><span class="linenum">5439</span></a>          {
<a name="l5440"><span class="linenum">5440</span></a>              return 'APC';
<a name="l5441"><span class="linenum">5441</span></a>          }
<a name="l5442"><span class="linenum">5442</span></a>      }
<a name="l5443"><span class="linenum">5443</span></a>  
<a name="l5444"><span class="linenum">5444</span></a>  <span class="comment">    // xcache: xcache.var_size must be &gt; 0. xcache_set is not necessary (might have been disabled).</span>
<a name="l5445"><span class="linenum">5445</span></a>      if( <a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('xcache.size') &gt; 0 )
<a name="l5446"><span class="linenum">5446</span></a>      {
<a name="l5447"><span class="linenum">5447</span></a>          return 'xcache';
<a name="l5448"><span class="linenum">5448</span></a>      }
<a name="l5449"><span class="linenum">5449</span></a>  
<a name="l5450"><span class="linenum">5450</span></a>      if( <a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('eaccelerator.enable') )
<a name="l5451"><span class="linenum">5451</span></a>      {
<a name="l5452"><span class="linenum">5452</span></a>          <a class="var it7105" onMouseOver="hilite(7105)" onMouseOut="lolite()" onClick="logVariable('eac_info')" href="../../../_variables/eac_info.html">$eac_info</a> = eaccelerator_info();
<a name="l5453"><span class="linenum">5453</span></a>          if( <a class="var it7105" onMouseOver="hilite(7105)" onMouseOut="lolite()" onClick="logVariable('eac_info')" href="../../../_variables/eac_info.html">$eac_info</a>['cache'] )
<a name="l5454"><span class="linenum">5454</span></a>          {
<a name="l5455"><span class="linenum">5455</span></a>              return 'eAccelerator';
<a name="l5456"><span class="linenum">5456</span></a>          }
<a name="l5457"><span class="linenum">5457</span></a>      }
<a name="l5458"><span class="linenum">5458</span></a>  
<a name="l5459"><span class="linenum">5459</span></a>      return 'none';
<a name="l5460"><span class="linenum">5460</span></a>  }
<a name="l5461"><span class="linenum">5461</span></a>  
<a name="l5462"><span class="linenum">5462</span></a>  
<a name="l5463"><span class="linenum">5463</span></a>  <span class="comment">/**</span>
<a name="l5464"><span class="linenum">5464</span></a>  <span class="comment"> * Invalidate all page caches.</span>
<a name="l5465"><span class="linenum">5465</span></a>  <span class="comment"> * This function should be processed every time, when some users or global settings was modified,</span>
<a name="l5466"><span class="linenum">5466</span></a>  <span class="comment"> * and this modification has an imortant influence for the front office display.</span>
<a name="l5467"><span class="linenum">5467</span></a>  <span class="comment"> * Modifications that requires to invalidate all page caches:</span>
<a name="l5468"><span class="linenum">5468</span></a>  <span class="comment"> *   - installing/removing/reloading/enabling/disabling plugins</span>
<a name="l5469"><span class="linenum">5469</span></a>  <span class="comment"> *   - editing user settings like allow profile pics, new users can register, user settings&gt;display</span>
<a name="l5470"><span class="linenum">5470</span></a>  <span class="comment"> */</span>
<a name="l5471"><span class="linenum">5471</span></a>  function <a class="function" onClick="logFunction('invalidate_pagecaches')" href="../../../_functions/invalidate_pagecaches.html" onMouseOver="funcPopup(event,'invalidate_pagecaches')">invalidate_pagecaches</a>()
<a name="l5472"><span class="linenum">5472</span></a>  {
<a name="l5473"><span class="linenum">5473</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it1826" onMouseOver="hilite(1826)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a>;
<a name="l5474"><span class="linenum">5474</span></a>  
<a name="l5475"><span class="linenum">5475</span></a>  <span class="comment">    // get current server time</span>
<a name="l5476"><span class="linenum">5476</span></a>      <a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> = ( empty( <a class="var it1826" onMouseOver="hilite(1826)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a> ) ? <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() : <a class="var it1826" onMouseOver="hilite(1826)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a> );
<a name="l5477"><span class="linenum">5477</span></a>  
<a name="l5478"><span class="linenum">5478</span></a>  <span class="comment">    // get all blog ids</span>
<a name="l5479"><span class="linenum">5479</span></a>      if( <a class="var it4361" onMouseOver="hilite(4361)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../_variables/blog_ids.html">$blog_ids</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( 'SELECT blog_ID FROM T_blogs' ) )
<a name="l5480"><span class="linenum">5480</span></a>      {    // build invalidate query
<a name="l5481"><span class="linenum">5481</span></a>          <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = 'REPLACE INTO T_coll_settings ( cset_coll_ID, cset_name, cset_value ) VALUES';
<a name="l5482"><span class="linenum">5482</span></a>          foreach( <a class="var it4361" onMouseOver="hilite(4361)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../_variables/blog_ids.html">$blog_ids</a> as <a class="var it1913" onMouseOver="hilite(1913)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../_variables/blog_id.html">$blog_id</a> )
<a name="l5483"><span class="linenum">5483</span></a>          {
<a name="l5484"><span class="linenum">5484</span></a>              <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> .= ' ('.<a class="var it1913" onMouseOver="hilite(1913)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../_variables/blog_id.html">$blog_id</a>.', &quot;last_invalidation_timestamp&quot;, '.<a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a>.' ),';
<a name="l5485"><span class="linenum">5485</span></a>          }
<a name="l5486"><span class="linenum">5486</span></a>          <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 0, strlen( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a> ) - 1 );
<a name="l5487"><span class="linenum">5487</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../_variables/query.html">$query</a>, 'Invalidate blogs\'s page caches' );
<a name="l5488"><span class="linenum">5488</span></a>      }
<a name="l5489"><span class="linenum">5489</span></a>  
<a name="l5490"><span class="linenum">5490</span></a>  <span class="comment">    // Invalidate general cache content also</span>
<a name="l5491"><span class="linenum">5491</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'last_invalidation_timestamp', <a class="var it2430" onMouseOver="hilite(2430)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> );
<a name="l5492"><span class="linenum">5492</span></a>      <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l5493"><span class="linenum">5493</span></a>  }
<a name="l5494"><span class="linenum">5494</span></a>  
<a name="l5495"><span class="linenum">5495</span></a>  
<a name="l5496"><span class="linenum">5496</span></a>  <span class="comment">/**</span>
<a name="l5497"><span class="linenum">5497</span></a>  <span class="comment">* Get $ReqPath, $ReqURI</span>
<a name="l5498"><span class="linenum">5498</span></a>  <span class="comment">*</span>
<a name="l5499"><span class="linenum">5499</span></a>  <span class="comment">* @return array ($ReqPath,$ReqURI);</span>
<a name="l5500"><span class="linenum">5500</span></a>  <span class="comment">*/</span>
<a name="l5501"><span class="linenum">5501</span></a>  function <a class="function" onClick="logFunction('get_ReqURI')" href="../../../_functions/get_requri.html" onMouseOver="funcPopup(event,'get_requri')">get_ReqURI</a>()
<a name="l5502"><span class="linenum">5502</span></a>  {
<a name="l5503"><span class="linenum">5503</span></a>      global <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l5504"><span class="linenum">5504</span></a>  
<a name="l5505"><span class="linenum">5505</span></a>  <span class="comment">    // Investigation for following code by Isaac - http://isaacschlueter.com/</span>
<a name="l5506"><span class="linenum">5506</span></a>      if( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REQUEST_URI']) &amp;&amp; !empty(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REQUEST_URI']) )
<a name="l5507"><span class="linenum">5507</span></a>      { // Warning: on some IIS installs it it set but empty!
<a name="l5508"><span class="linenum">5508</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: vars: Getting ReqURI from REQUEST_URI', 'request' );
<a name="l5509"><span class="linenum">5509</span></a>          <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['REQUEST_URI'];
<a name="l5510"><span class="linenum">5510</span></a>  
<a name="l5511"><span class="linenum">5511</span></a>  <span class="comment">        // Build requested Path without query string:</span>
<a name="l5512"><span class="linenum">5512</span></a>          <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../../_variables/pos.html">$pos</a> = <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a>, '?' );
<a name="l5513"><span class="linenum">5513</span></a>          if( false !== <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../../_variables/pos.html">$pos</a> )
<a name="l5514"><span class="linenum">5514</span></a>          {
<a name="l5515"><span class="linenum">5515</span></a>              <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a>, 0, <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../../_variables/pos.html">$pos</a>  );
<a name="l5516"><span class="linenum">5516</span></a>          }
<a name="l5517"><span class="linenum">5517</span></a>          else
<a name="l5518"><span class="linenum">5518</span></a>          {
<a name="l5519"><span class="linenum">5519</span></a>              <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a>;
<a name="l5520"><span class="linenum">5520</span></a>          }
<a name="l5521"><span class="linenum">5521</span></a>      }
<a name="l5522"><span class="linenum">5522</span></a>      elseif( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['URL']) )
<a name="l5523"><span class="linenum">5523</span></a>      { // ISAPI
<a name="l5524"><span class="linenum">5524</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: Getting ReqPath from URL', 'request' );
<a name="l5525"><span class="linenum">5525</span></a>          <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['URL'];
<a name="l5526"><span class="linenum">5526</span></a>          <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a> = isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) &amp;&amp; !empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING'] ) ? (<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>.'?'.<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) : <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>;
<a name="l5527"><span class="linenum">5527</span></a>      }
<a name="l5528"><span class="linenum">5528</span></a>      elseif( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO']) )
<a name="l5529"><span class="linenum">5529</span></a>      { // CGI/FastCGI
<a name="l5530"><span class="linenum">5530</span></a>          if( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['SCRIPT_NAME']) )
<a name="l5531"><span class="linenum">5531</span></a>          {
<a name="l5532"><span class="linenum">5532</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: Getting ReqPath from PATH_INFO and SCRIPT_NAME', 'request' );
<a name="l5533"><span class="linenum">5533</span></a>  
<a name="l5534"><span class="linenum">5534</span></a>              if (<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['SCRIPT_NAME'] == <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'] )
<a name="l5535"><span class="linenum">5535</span></a>              {    <span class="comment">/* both the same so just use one of them</span>
<a name="l5536"><span class="linenum">5536</span></a>  <span class="comment">                 * this happens on a windoze 2003 box</span>
<a name="l5537"><span class="linenum">5537</span></a>  <span class="comment">                 * gotta love microdoft</span>
<a name="l5538"><span class="linenum">5538</span></a>  <span class="comment">                 */</span>
<a name="l5539"><span class="linenum">5539</span></a>                  <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: PATH_INFO and SCRIPT_NAME are the same', 'request' );
<a name="l5540"><span class="linenum">5540</span></a>                  <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: Getting ReqPath from PATH_INFO only instead', 'request' );
<a name="l5541"><span class="linenum">5541</span></a>                  <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'];
<a name="l5542"><span class="linenum">5542</span></a>              }
<a name="l5543"><span class="linenum">5543</span></a>              else
<a name="l5544"><span class="linenum">5544</span></a>              {
<a name="l5545"><span class="linenum">5545</span></a>                  <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['SCRIPT_NAME'].<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'];
<a name="l5546"><span class="linenum">5546</span></a>              }
<a name="l5547"><span class="linenum">5547</span></a>          }
<a name="l5548"><span class="linenum">5548</span></a>          else
<a name="l5549"><span class="linenum">5549</span></a>          { // does this happen??
<a name="l5550"><span class="linenum">5550</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: Getting ReqPath from PATH_INFO only!', 'request' );
<a name="l5551"><span class="linenum">5551</span></a>  
<a name="l5552"><span class="linenum">5552</span></a>              <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'];
<a name="l5553"><span class="linenum">5553</span></a>          }
<a name="l5554"><span class="linenum">5554</span></a>          <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a> = isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) &amp;&amp; !empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING'] ) ? (<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>.'?'.<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) : <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>;
<a name="l5555"><span class="linenum">5555</span></a>      }
<a name="l5556"><span class="linenum">5556</span></a>      elseif( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['ORIG_PATH_INFO']) )
<a name="l5557"><span class="linenum">5557</span></a>      { // Tomcat 5.5.x with Herbelin PHP servlet and PHP 5.1
<a name="l5558"><span class="linenum">5558</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: Getting ReqPath from ORIG_PATH_INFO', 'request' );
<a name="l5559"><span class="linenum">5559</span></a>          <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['ORIG_PATH_INFO'];
<a name="l5560"><span class="linenum">5560</span></a>          <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a> = isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) &amp;&amp; !empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING'] ) ? (<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>.'?'.<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) : <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>;
<a name="l5561"><span class="linenum">5561</span></a>      }
<a name="l5562"><span class="linenum">5562</span></a>      elseif( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['SCRIPT_NAME']) )
<a name="l5563"><span class="linenum">5563</span></a>      { // Some Odd Win2k Stuff
<a name="l5564"><span class="linenum">5564</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: Getting ReqPath from SCRIPT_NAME', 'request' );
<a name="l5565"><span class="linenum">5565</span></a>          <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['SCRIPT_NAME'];
<a name="l5566"><span class="linenum">5566</span></a>          <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a> = isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) &amp;&amp; !empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING'] ) ? (<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>.'?'.<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) : <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>;
<a name="l5567"><span class="linenum">5567</span></a>      }
<a name="l5568"><span class="linenum">5568</span></a>      elseif( isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF']) )
<a name="l5569"><span class="linenum">5569</span></a>      { // The Old Stand-By
<a name="l5570"><span class="linenum">5570</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'vars: Getting ReqPath from PHP_SELF', 'request' );
<a name="l5571"><span class="linenum">5571</span></a>          <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['PHP_SELF'];
<a name="l5572"><span class="linenum">5572</span></a>          <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a> = isset(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) &amp;&amp; !empty( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING'] ) ? (<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>.'?'.<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../../_variables/_SERVER.html">$_SERVER</a>['QUERY_STRING']) : <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>;
<a name="l5573"><span class="linenum">5573</span></a>      }
<a name="l5574"><span class="linenum">5574</span></a>      else
<a name="l5575"><span class="linenum">5575</span></a>      {
<a name="l5576"><span class="linenum">5576</span></a>          <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> = false;
<a name="l5577"><span class="linenum">5577</span></a>          <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a> = false;
<a name="l5578"><span class="linenum">5578</span></a>          ?&gt;
<a name="l5579"><span class="linenum">5579</span></a>          &lt;p class=&quot;error&quot;&gt;
<a name="l5580"><span class="linenum">5580</span></a>          Warning: <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a> could not be set. Probably an odd IIS problem.
<a name="l5581"><span class="linenum">5581</span></a>          &lt;/p&gt;
<a name="l5582"><span class="linenum">5582</span></a>          &lt;p&gt;
<a name="l5583"><span class="linenum">5583</span></a>          Go to your &lt;a href=&quot;&lt;?php echo <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>.<a class="var it7106" onMouseOver="hilite(7106)" onMouseOut="lolite()" onClick="logVariable('install_subdir')" href="../../../_variables/install_subdir.html">$install_subdir</a> ?&gt;phpinfo.php&quot;&gt;phpinfo page&lt;/a&gt;,
<a name="l5584"><span class="linenum">5584</span></a>          look for occurences of &lt;code&gt;&lt;?php
<a name="l5585"><span class="linenum">5585</span></a>  <span class="comment">        // take the baseurlroot out..</span>
<a name="l5586"><span class="linenum">5586</span></a>          echo <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('#^'.<a class="phpfunction" onClick="logFunction('preg_quote')" href="../../../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>( <a class="var it2541" onMouseOver="hilite(2541)" onMouseOut="lolite()" onClick="logVariable('baseurlroot')" href="../../../_variables/baseurlroot.html">$baseurlroot</a>, '#' ).'#', '', <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>.<a class="var it7106" onMouseOver="hilite(7106)" onMouseOut="lolite()" onClick="logVariable('install_subdir')" href="../../../_variables/install_subdir.html">$install_subdir</a> )
<a name="l5587"><span class="linenum">5587</span></a>          ?&gt;phpinfo.php&lt;/code&gt; and copy all lines
<a name="l5588"><span class="linenum">5588</span></a>          containing this to the &lt;a href=&quot;http://forums.b2evolution.net&quot;&gt;forum&lt;/a&gt;. Also specify what webserver
<a name="l5589"><span class="linenum">5589</span></a>          you're running on.
<a name="l5590"><span class="linenum">5590</span></a>          &lt;br /&gt;
<a name="l5591"><span class="linenum">5591</span></a>          (If you have deleted your install folder &amp;ndash; what is recommended after successful setup &amp;ndash;
<a name="l5592"><span class="linenum">5592</span></a>          you have to upload it again before doing this).
<a name="l5593"><span class="linenum">5593</span></a>          &lt;/p&gt;
<a name="l5594"><span class="linenum">5594</span></a>          &lt;?php
<a name="l5595"><span class="linenum">5595</span></a>      }
<a name="l5596"><span class="linenum">5596</span></a>  
<a name="l5597"><span class="linenum">5597</span></a>      return array(<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>,<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../../_variables/ReqURI.html">$ReqURI</a>);
<a name="l5598"><span class="linenum">5598</span></a>  }
<a name="l5599"><span class="linenum">5599</span></a>  
<a name="l5600"><span class="linenum">5600</span></a>  
<a name="l5601"><span class="linenum">5601</span></a>  <span class="comment">/**</span>
<a name="l5602"><span class="linenum">5602</span></a>  <span class="comment"> * Get htsrv url on the same domain as the http request came from</span>
<a name="l5603"><span class="linenum">5603</span></a>  <span class="comment"> * _init_hit.inc.php should be called before this call, because ReqHost and ReqPath must be initialized</span>
<a name="l5604"><span class="linenum">5604</span></a>  <span class="comment"> */</span>
<a name="l5605"><span class="linenum">5605</span></a>  function <a class="function" onClick="logFunction('get_samedomain_htsrv_url')" href="../../../_functions/get_samedomain_htsrv_url.html" onMouseOver="funcPopup(event,'get_samedomain_htsrv_url')">get_samedomain_htsrv_url</a>( <a class="var it3864" onMouseOver="hilite(3864)" onMouseOut="lolite()" onClick="logVariable('secure')" href="../../../_variables/secure.html">$secure</a> = false )
<a name="l5606"><span class="linenum">5606</span></a>  {
<a name="l5607"><span class="linenum">5607</span></a>      global <a class="var it743" onMouseOver="hilite(743)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>, <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>, <a class="var it308" onMouseOver="hilite(308)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../../_variables/htsrv_url.html">$htsrv_url</a>, <a class="var it592" onMouseOver="hilite(592)" onMouseOut="lolite()" onClick="logVariable('htsrv_url_sensitive')" href="../../../_variables/htsrv_url_sensitive.html">$htsrv_url_sensitive</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l5608"><span class="linenum">5608</span></a>  
<a name="l5609"><span class="linenum">5609</span></a>      if( <a class="var it3864" onMouseOver="hilite(3864)" onMouseOut="lolite()" onClick="logVariable('secure')" href="../../../_variables/secure.html">$secure</a> )
<a name="l5610"><span class="linenum">5610</span></a>      {
<a name="l5611"><span class="linenum">5611</span></a>          <a class="var it7107" onMouseOver="hilite(7107)" onMouseOut="lolite()" onClick="logVariable('req_htsrv_url')" href="../../../_variables/req_htsrv_url.html">$req_htsrv_url</a> = <a class="var it592" onMouseOver="hilite(592)" onMouseOut="lolite()" onClick="logVariable('htsrv_url_sensitive')" href="../../../_variables/htsrv_url_sensitive.html">$htsrv_url_sensitive</a>;
<a name="l5612"><span class="linenum">5612</span></a>      }
<a name="l5613"><span class="linenum">5613</span></a>      else
<a name="l5614"><span class="linenum">5614</span></a>      {
<a name="l5615"><span class="linenum">5615</span></a>          <a class="var it7107" onMouseOver="hilite(7107)" onMouseOut="lolite()" onClick="logVariable('req_htsrv_url')" href="../../../_variables/req_htsrv_url.html">$req_htsrv_url</a> = <a class="var it308" onMouseOver="hilite(308)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../../_variables/htsrv_url.html">$htsrv_url</a>;
<a name="l5616"><span class="linenum">5616</span></a>      }
<a name="l5617"><span class="linenum">5617</span></a>  
<a name="l5618"><span class="linenum">5618</span></a>      if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it743" onMouseOver="hilite(743)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>, <a class="var it7107" onMouseOver="hilite(7107)" onMouseOut="lolite()" onClick="logVariable('req_htsrv_url')" href="../../../_variables/req_htsrv_url.html">$req_htsrv_url</a> ) !== false )
<a name="l5619"><span class="linenum">5619</span></a>      {
<a name="l5620"><span class="linenum">5620</span></a>          return <a class="var it7107" onMouseOver="hilite(7107)" onMouseOut="lolite()" onClick="logVariable('req_htsrv_url')" href="../../../_variables/req_htsrv_url.html">$req_htsrv_url</a>;
<a name="l5621"><span class="linenum">5621</span></a>      }
<a name="l5622"><span class="linenum">5622</span></a>  
<a name="l5623"><span class="linenum">5623</span></a>      <a class="var it7108" onMouseOver="hilite(7108)" onMouseOut="lolite()" onClick="logVariable('req_url_parts')" href="../../../_variables/req_url_parts.html">$req_url_parts</a> = @<a class="phpfunction" onClick="logFunction('parse_url')" href="../../../_functions/parse_url.html" onMouseOver="phpfuncPopup(event,'parse_url')">parse_url</a>( <a class="var it743" onMouseOver="hilite(743)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a> );
<a name="l5624"><span class="linenum">5624</span></a>      <a class="var it7109" onMouseOver="hilite(7109)" onMouseOut="lolite()" onClick="logVariable('hsrv_url_parts')" href="../../../_variables/hsrv_url_parts.html">$hsrv_url_parts</a> = @<a class="phpfunction" onClick="logFunction('parse_url')" href="../../../_functions/parse_url.html" onMouseOver="phpfuncPopup(event,'parse_url')">parse_url</a>( <a class="var it7107" onMouseOver="hilite(7107)" onMouseOut="lolite()" onClick="logVariable('req_htsrv_url')" href="../../../_variables/req_htsrv_url.html">$req_htsrv_url</a> );
<a name="l5625"><span class="linenum">5625</span></a>      if( ( !isset( <a class="var it7108" onMouseOver="hilite(7108)" onMouseOut="lolite()" onClick="logVariable('req_url_parts')" href="../../../_variables/req_url_parts.html">$req_url_parts</a>['host'] ) ) || ( !isset( <a class="var it7109" onMouseOver="hilite(7109)" onMouseOut="lolite()" onClick="logVariable('hsrv_url_parts')" href="../../../_variables/hsrv_url_parts.html">$hsrv_url_parts</a>['host'] ) ) )
<a name="l5626"><span class="linenum">5626</span></a>      {
<a name="l5627"><span class="linenum">5627</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid hosts!' );
<a name="l5628"><span class="linenum">5628</span></a>      }
<a name="l5629"><span class="linenum">5629</span></a>      <a class="var it7110" onMouseOver="hilite(7110)" onMouseOut="lolite()" onClick="logVariable('req_domain')" href="../../../_variables/req_domain.html">$req_domain</a> = <a class="var it7108" onMouseOver="hilite(7108)" onMouseOut="lolite()" onClick="logVariable('req_url_parts')" href="../../../_variables/req_url_parts.html">$req_url_parts</a>['host'];
<a name="l5630"><span class="linenum">5630</span></a>      <a class="var it7111" onMouseOver="hilite(7111)" onMouseOut="lolite()" onClick="logVariable('htsrv_domain')" href="../../../_variables/htsrv_domain.html">$htsrv_domain</a> = <a class="var it7109" onMouseOver="hilite(7109)" onMouseOut="lolite()" onClick="logVariable('hsrv_url_parts')" href="../../../_variables/hsrv_url_parts.html">$hsrv_url_parts</a>['host'];
<a name="l5631"><span class="linenum">5631</span></a>      <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('samedomain_htsrv_url')" href="../../../_variables/samedomain_htsrv_url.html">$samedomain_htsrv_url</a> = <a class="phpfunction" onClick="logFunction('substr_replace')" href="../../../_functions/substr_replace.html" onMouseOver="phpfuncPopup(event,'substr_replace')">substr_replace</a>( <a class="var it7107" onMouseOver="hilite(7107)" onMouseOut="lolite()" onClick="logVariable('req_htsrv_url')" href="../../../_variables/req_htsrv_url.html">$req_htsrv_url</a>, <a class="var it7110" onMouseOver="hilite(7110)" onMouseOut="lolite()" onClick="logVariable('req_domain')" href="../../../_variables/req_domain.html">$req_domain</a>, <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it7107" onMouseOver="hilite(7107)" onMouseOut="lolite()" onClick="logVariable('req_htsrv_url')" href="../../../_variables/req_htsrv_url.html">$req_htsrv_url</a>, <a class="var it7111" onMouseOver="hilite(7111)" onMouseOut="lolite()" onClick="logVariable('htsrv_domain')" href="../../../_variables/htsrv_domain.html">$htsrv_domain</a> ), strlen( <a class="var it7111" onMouseOver="hilite(7111)" onMouseOut="lolite()" onClick="logVariable('htsrv_domain')" href="../../../_variables/htsrv_domain.html">$htsrv_domain</a> ) );
<a name="l5632"><span class="linenum">5632</span></a>  
<a name="l5633"><span class="linenum">5633</span></a>  <span class="comment">    // fp&gt; The following check would apply well if we always had 301 redirects.</span>
<a name="l5634"><span class="linenum">5634</span></a>  <span class="comment">    // But it's possible to turn them off in SEO settings for some page and not others (we don't know which here)</span>
<a name="l5635"><span class="linenum">5635</span></a>  <span class="comment">  // And some kinds of pages do not have 301 redirections implemented yet, e-g: disp=users</span>
<a name="l5636"><span class="linenum">5636</span></a>    <span class="comment">/*</span>
<a name="l5637"><span class="linenum">5637</span></a>  <span class="comment">    if( ( !is_admin_page() ) &amp;&amp; ( !empty( $Blog ) ) &amp;&amp; ( $samedomain_htsrv_url != $Blog-&gt;get_local_htsrv_url() ) )</span>
<a name="l5638"><span class="linenum">5638</span></a>  <span class="comment">    {</span>
<a name="l5639"><span class="linenum">5639</span></a>  <span class="comment">        debug_die( 'Inconsistent state!' );</span>
<a name="l5640"><span class="linenum">5640</span></a>  <span class="comment">    }</span>
<a name="l5641"><span class="linenum">5641</span></a>  <span class="comment">    */</span>
<a name="l5642"><span class="linenum">5642</span></a>  
<a name="l5643"><span class="linenum">5643</span></a>      return <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('samedomain_htsrv_url')" href="../../../_variables/samedomain_htsrv_url.html">$samedomain_htsrv_url</a>;
<a name="l5644"><span class="linenum">5644</span></a>  }
<a name="l5645"><span class="linenum">5645</span></a>  
<a name="l5646"><span class="linenum">5646</span></a>  
<a name="l5647"><span class="linenum">5647</span></a>  <span class="comment">/**</span>
<a name="l5648"><span class="linenum">5648</span></a>  <span class="comment"> * Get secure htsrv url on the same domain as the http request came from</span>
<a name="l5649"><span class="linenum">5649</span></a>  <span class="comment"> * It is important on login and register calls</span>
<a name="l5650"><span class="linenum">5650</span></a>  <span class="comment"> * _init_hit.inc.php should be called before this call, because ReqHost and ReqPath must be initialized</span>
<a name="l5651"><span class="linenum">5651</span></a>  <span class="comment"> */</span>
<a name="l5652"><span class="linenum">5652</span></a>  function <a class="function" onClick="logFunction('get_secure_htsrv_url')" href="../../../_functions/get_secure_htsrv_url.html" onMouseOver="funcPopup(event,'get_secure_htsrv_url')">get_secure_htsrv_url</a>()
<a name="l5653"><span class="linenum">5653</span></a>  {
<a name="l5654"><span class="linenum">5654</span></a>      return <a class="function" onClick="logFunction('get_samedomain_htsrv_url')" href="../../../_functions/get_samedomain_htsrv_url.html" onMouseOver="funcPopup(event,'get_samedomain_htsrv_url')">get_samedomain_htsrv_url</a>( true );
<a name="l5655"><span class="linenum">5655</span></a>  }
<a name="l5656"><span class="linenum">5656</span></a>  
<a name="l5657"><span class="linenum">5657</span></a>  
<a name="l5658"><span class="linenum">5658</span></a>  <span class="comment">/**</span>
<a name="l5659"><span class="linenum">5659</span></a>  <span class="comment"> * Set max execution time</span>
<a name="l5660"><span class="linenum">5660</span></a>  <span class="comment"> *</span>
<a name="l5661"><span class="linenum">5661</span></a>  <span class="comment"> * @param integer seconds</span>
<a name="l5662"><span class="linenum">5662</span></a>  <span class="comment"> * @return string the old value on success, false on failure.</span>
<a name="l5663"><span class="linenum">5663</span></a>  <span class="comment"> */</span>
<a name="l5664"><span class="linenum">5664</span></a>  function <a class="function" onClick="logFunction('set_max_execution_time')" href="../../../_functions/set_max_execution_time.html" onMouseOver="funcPopup(event,'set_max_execution_time')">set_max_execution_time</a>( <a class="var it6136" onMouseOver="hilite(6136)" onMouseOut="lolite()" onClick="logVariable('seconds')" href="../../../_variables/seconds.html">$seconds</a> )
<a name="l5665"><span class="linenum">5665</span></a>  {
<a name="l5666"><span class="linenum">5666</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'set_time_limit' ) )
<a name="l5667"><span class="linenum">5667</span></a>      {
<a name="l5668"><span class="linenum">5668</span></a>          <a class="phpfunction" onClick="logFunction('set_time_limit')" href="../../../_functions/set_time_limit.html" onMouseOver="phpfuncPopup(event,'set_time_limit')">set_time_limit</a>( <a class="var it6136" onMouseOver="hilite(6136)" onMouseOut="lolite()" onClick="logVariable('seconds')" href="../../../_variables/seconds.html">$seconds</a> );
<a name="l5669"><span class="linenum">5669</span></a>      }
<a name="l5670"><span class="linenum">5670</span></a>      return @<a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>( 'max_execution_time', <a class="var it6136" onMouseOver="hilite(6136)" onMouseOut="lolite()" onClick="logVariable('seconds')" href="../../../_variables/seconds.html">$seconds</a> );
<a name="l5671"><span class="linenum">5671</span></a>  }
<a name="l5672"><span class="linenum">5672</span></a>  
<a name="l5673"><span class="linenum">5673</span></a>  
<a name="l5674"><span class="linenum">5674</span></a>  <span class="comment">/**</span>
<a name="l5675"><span class="linenum">5675</span></a>  <span class="comment"> * Sanitize a comma-separated list of numbers (IDs)</span>
<a name="l5676"><span class="linenum">5676</span></a>  <span class="comment"> *</span>
<a name="l5677"><span class="linenum">5677</span></a>  <span class="comment"> * @param string</span>
<a name="l5678"><span class="linenum">5678</span></a>  <span class="comment"> * @param bool Return array if true, string otherwise</span>
<a name="l5679"><span class="linenum">5679</span></a>  <span class="comment"> * @param bool Quote each element (for use in SQL queries)</span>
<a name="l5680"><span class="linenum">5680</span></a>  <span class="comment"> * @return string</span>
<a name="l5681"><span class="linenum">5681</span></a>  <span class="comment"> */</span>
<a name="l5682"><span class="linenum">5682</span></a>  function <a class="function" onClick="logFunction('sanitize_id_list')" href="../../../_functions/sanitize_id_list.html" onMouseOver="funcPopup(event,'sanitize_id_list')">sanitize_id_list</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>, <a class="var it7112" onMouseOver="hilite(7112)" onMouseOut="lolite()" onClick="logVariable('return_array')" href="../../../_variables/return_array.html">$return_array</a> = false, <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('quote')" href="../../../_variables/quote.html">$quote</a> = false )
<a name="l5683"><span class="linenum">5683</span></a>  {
<a name="l5684"><span class="linenum">5684</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>) )
<a name="l5685"><span class="linenum">5685</span></a>      {    // Allow NULL values
<a name="l5686"><span class="linenum">5686</span></a>          <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a> = '';
<a name="l5687"><span class="linenum">5687</span></a>      }
<a name="l5688"><span class="linenum">5688</span></a>  
<a name="l5689"><span class="linenum">5689</span></a>  <span class="comment">    // Explode and trim</span>
<a name="l5690"><span class="linenum">5690</span></a>      <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>( 'trim', <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../_variables/str.html">$str</a>) );
<a name="l5691"><span class="linenum">5691</span></a>  
<a name="l5692"><span class="linenum">5692</span></a>  <span class="comment">    // Convert to integer and remove all empty values</span>
<a name="l5693"><span class="linenum">5693</span></a>      <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a> = <a class="phpfunction" onClick="logFunction('array_filter')" href="../../../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>( <a class="phpfunction" onClick="logFunction('array_map')" href="../../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>('intval', <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a>) );
<a name="l5694"><span class="linenum">5694</span></a>  
<a name="l5695"><span class="linenum">5695</span></a>      if( !<a class="var it7112" onMouseOver="hilite(7112)" onMouseOut="lolite()" onClick="logVariable('return_array')" href="../../../_variables/return_array.html">$return_array</a> &amp;&amp; <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('quote')" href="../../../_variables/quote.html">$quote</a> )
<a name="l5696"><span class="linenum">5696</span></a>      {    // Quote each element and return a string
<a name="l5697"><span class="linenum">5697</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l5698"><span class="linenum">5698</span></a>          return <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a>);
<a name="l5699"><span class="linenum">5699</span></a>      }
<a name="l5700"><span class="linenum">5700</span></a>      return ( <a class="var it7112" onMouseOver="hilite(7112)" onMouseOut="lolite()" onClick="logVariable('return_array')" href="../../../_variables/return_array.html">$return_array</a> ? <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a> : <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a>) );
<a name="l5701"><span class="linenum">5701</span></a>  }
<a name="l5702"><span class="linenum">5702</span></a>  
<a name="l5703"><span class="linenum">5703</span></a>  
<a name="l5704"><span class="linenum">5704</span></a>  <span class="comment">/**</span>
<a name="l5705"><span class="linenum">5705</span></a>  <span class="comment"> * Create json_encode function if it does not exist ( PHP &lt; 5.2.0 )</span>
<a name="l5706"><span class="linenum">5706</span></a>  <span class="comment"> *</span>
<a name="l5707"><span class="linenum">5707</span></a>  <span class="comment"> * @return string</span>
<a name="l5708"><span class="linenum">5708</span></a>  <span class="comment"> */</span>
<a name="l5709"><span class="linenum">5709</span></a>  if ( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'json_encode' ) )
<a name="l5710"><span class="linenum">5710</span></a>  {
<a name="l5711"><span class="linenum">5711</span></a>  	function <a class="function" onClick="logFunction('json_encode')" href="../../../_functions/json_encode.html" onMouseOver="funcPopup(event,'json_encode')">json_encode</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> = false )
<a name="l5712"><span class="linenum">5712</span></a>      {
<a name="l5713"><span class="linenum">5713</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> ) )
<a name="l5714"><span class="linenum">5714</span></a>          {
<a name="l5715"><span class="linenum">5715</span></a>              return 'null';
<a name="l5716"><span class="linenum">5716</span></a>          }
<a name="l5717"><span class="linenum">5717</span></a>          if( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> === false )
<a name="l5718"><span class="linenum">5718</span></a>          {
<a name="l5719"><span class="linenum">5719</span></a>              return 'false';
<a name="l5720"><span class="linenum">5720</span></a>          }
<a name="l5721"><span class="linenum">5721</span></a>          if( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> === true )
<a name="l5722"><span class="linenum">5722</span></a>          {
<a name="l5723"><span class="linenum">5723</span></a>              return 'true';
<a name="l5724"><span class="linenum">5724</span></a>          }
<a name="l5725"><span class="linenum">5725</span></a>          if( <a class="phpfunction" onClick="logFunction('is_scalar')" href="../../../_functions/is_scalar.html" onMouseOver="phpfuncPopup(event,'is_scalar')">is_scalar</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> ) )
<a name="l5726"><span class="linenum">5726</span></a>          {
<a name="l5727"><span class="linenum">5727</span></a>              if( <a class="phpfunction" onClick="logFunction('is_float')" href="../../../_functions/is_float.html" onMouseOver="phpfuncPopup(event,'is_float')">is_float</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> ) )
<a name="l5728"><span class="linenum">5728</span></a>              { // Always use &quot;.&quot; for floats.
<a name="l5729"><span class="linenum">5729</span></a>                  return <a class="phpfunction" onClick="logFunction('floatval')" href="../../../_functions/floatval.html" onMouseOver="phpfuncPopup(event,'floatval')">floatval</a>( <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( &quot;,&quot;, &quot;.&quot;, <a class="phpfunction" onClick="logFunction('strval')" href="../../../_functions/strval.html" onMouseOver="phpfuncPopup(event,'strval')">strval</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> ) ) );
<a name="l5730"><span class="linenum">5730</span></a>              }
<a name="l5731"><span class="linenum">5731</span></a>  
<a name="l5732"><span class="linenum">5732</span></a>              if( <a class="phpfunction" onClick="logFunction('is_string')" href="../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> ) )
<a name="l5733"><span class="linenum">5733</span></a>              {
<a name="l5734"><span class="linenum">5734</span></a>                  <a class="var it7113" onMouseOver="hilite(7113)" onMouseOut="lolite()" onClick="logVariable('jsonReplaces')" href="../../../_variables/jsonReplaces.html">$jsonReplaces</a> = array( array( &quot;\\&quot;, &quot;/&quot;, &quot;\n&quot;, &quot;\t&quot;, &quot;\r&quot;, &quot;\b&quot;, &quot;\f&quot;, '&quot;' ), array( '\\\\', '\\/', '\\n', '\\t', '\\r', '\\b', '\\f', '\&quot;' ) );
<a name="l5735"><span class="linenum">5735</span></a>                  return '&quot;'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it7113" onMouseOver="hilite(7113)" onMouseOut="lolite()" onClick="logVariable('jsonReplaces')" href="../../../_variables/jsonReplaces.html">$jsonReplaces</a>[0], <a class="var it7113" onMouseOver="hilite(7113)" onMouseOut="lolite()" onClick="logVariable('jsonReplaces')" href="../../../_variables/jsonReplaces.html">$jsonReplaces</a>[1], <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> ).'&quot;';
<a name="l5736"><span class="linenum">5736</span></a>              }
<a name="l5737"><span class="linenum">5737</span></a>  
<a name="l5738"><span class="linenum">5738</span></a>              return <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>;
<a name="l5739"><span class="linenum">5739</span></a>          }
<a name="l5740"><span class="linenum">5740</span></a>          <a class="var it7114" onMouseOver="hilite(7114)" onMouseOut="lolite()" onClick="logVariable('isList')" href="../../../_variables/isList.html">$isList</a> = true;
<a name="l5741"><span class="linenum">5741</span></a>          for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0, <a class="phpfunction" onClick="logFunction('reset')" href="../../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>); <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>); <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++, <a class="phpfunction" onClick="logFunction('next')" href="../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>) )
<a name="l5742"><span class="linenum">5742</span></a>          {
<a name="l5743"><span class="linenum">5743</span></a>              if( <a class="phpfunction" onClick="logFunction('key')" href="../../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>) !== <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> )
<a name="l5744"><span class="linenum">5744</span></a>              {
<a name="l5745"><span class="linenum">5745</span></a>                  <a class="var it7114" onMouseOver="hilite(7114)" onMouseOut="lolite()" onClick="logVariable('isList')" href="../../../_variables/isList.html">$isList</a> = false;
<a name="l5746"><span class="linenum">5746</span></a>                  break;
<a name="l5747"><span class="linenum">5747</span></a>              }
<a name="l5748"><span class="linenum">5748</span></a>          }
<a name="l5749"><span class="linenum">5749</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l5750"><span class="linenum">5750</span></a>          if( <a class="var it7114" onMouseOver="hilite(7114)" onMouseOut="lolite()" onClick="logVariable('isList')" href="../../../_variables/isList.html">$isList</a> )
<a name="l5751"><span class="linenum">5751</span></a>          {
<a name="l5752"><span class="linenum">5752</span></a>              foreach( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> as <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a> )
<a name="l5753"><span class="linenum">5753</span></a>              {
<a name="l5754"><span class="linenum">5754</span></a>                  <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[] = <a class="function" onClick="logFunction('json_encode')" href="../../../_functions/json_encode.html" onMouseOver="funcPopup(event,'json_encode')">json_encode</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>);
<a name="l5755"><span class="linenum">5755</span></a>              }
<a name="l5756"><span class="linenum">5756</span></a>              return '['.join( ',', <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> ).']';
<a name="l5757"><span class="linenum">5757</span></a>          }
<a name="l5758"><span class="linenum">5758</span></a>          else
<a name="l5759"><span class="linenum">5759</span></a>          {
<a name="l5760"><span class="linenum">5760</span></a>              foreach( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> as <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a> =&gt; <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a> )
<a name="l5761"><span class="linenum">5761</span></a>              {
<a name="l5762"><span class="linenum">5762</span></a>                  <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[] = <a class="function" onClick="logFunction('json_encode')" href="../../../_functions/json_encode.html" onMouseOver="funcPopup(event,'json_encode')">json_encode</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../_variables/k.html">$k</a>).':'.<a class="function" onClick="logFunction('json_encode')" href="../../../_functions/json_encode.html" onMouseOver="funcPopup(event,'json_encode')">json_encode</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>);
<a name="l5763"><span class="linenum">5763</span></a>              }
<a name="l5764"><span class="linenum">5764</span></a>              return '{'.join( ',', <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> ).'}';
<a name="l5765"><span class="linenum">5765</span></a>          }
<a name="l5766"><span class="linenum">5766</span></a>      }
<a name="l5767"><span class="linenum">5767</span></a>  }
<a name="l5768"><span class="linenum">5768</span></a>  
<a name="l5769"><span class="linenum">5769</span></a>  
<a name="l5770"><span class="linenum">5770</span></a>  <span class="comment">/**</span>
<a name="l5771"><span class="linenum">5771</span></a>  <span class="comment"> * A wrapper for json_encode function</span>
<a name="l5772"><span class="linenum">5772</span></a>  <span class="comment"> * We need to pass valid UTF-8 string to json_encode, otherwise it may return NULL</span>
<a name="l5773"><span class="linenum">5773</span></a>  <span class="comment"> *</span>
<a name="l5774"><span class="linenum">5774</span></a>  <span class="comment"> * @param mixed</span>
<a name="l5775"><span class="linenum">5775</span></a>  <span class="comment"> * @return string</span>
<a name="l5776"><span class="linenum">5776</span></a>  <span class="comment"> */</span>
<a name="l5777"><span class="linenum">5777</span></a>  function <a class="function" onClick="logFunction('evo_json_encode')" href="../../../_functions/evo_json_encode.html" onMouseOver="funcPopup(event,'evo_json_encode')">evo_json_encode</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> = false )
<a name="l5778"><span class="linenum">5778</span></a>  {
<a name="l5779"><span class="linenum">5779</span></a>      if( <a class="phpfunction" onClick="logFunction('is_string')" href="../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>) )
<a name="l5780"><span class="linenum">5780</span></a>      {    // Convert to UTF-8
<a name="l5781"><span class="linenum">5781</span></a>          <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> = <a class="function" onClick="logFunction('current_charset_to_utf8')" href="../../../_functions/current_charset_to_utf8.html" onMouseOver="funcPopup(event,'current_charset_to_utf8')">current_charset_to_utf8</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>);
<a name="l5782"><span class="linenum">5782</span></a>      }
<a name="l5783"><span class="linenum">5783</span></a>      elseif( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>) )
<a name="l5784"><span class="linenum">5784</span></a>      {    // Recursively convert to UTF-8
<a name="l5785"><span class="linenum">5785</span></a>          <a class="phpfunction" onClick="logFunction('array_walk_recursive')" href="../../../_functions/array_walk_recursive.html" onMouseOver="phpfuncPopup(event,'array_walk_recursive')">array_walk_recursive</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>, 'current_charset_to_utf8' );
<a name="l5786"><span class="linenum">5786</span></a>      }
<a name="l5787"><span class="linenum">5787</span></a>  
<a name="l5788"><span class="linenum">5788</span></a>      return <a class="function" onClick="logFunction('json_encode')" href="../../../_functions/json_encode.html" onMouseOver="funcPopup(event,'json_encode')">json_encode</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>);
<a name="l5789"><span class="linenum">5789</span></a>  }
<a name="l5790"><span class="linenum">5790</span></a>  
<a name="l5791"><span class="linenum">5791</span></a>  
<a name="l5792"><span class="linenum">5792</span></a>  <span class="comment">/**</span>
<a name="l5793"><span class="linenum">5793</span></a>  <span class="comment"> * A helper function to conditionally convert a string from current charset to UTF-8</span>
<a name="l5794"><span class="linenum">5794</span></a>  <span class="comment"> *</span>
<a name="l5795"><span class="linenum">5795</span></a>  <span class="comment"> * @param mixed</span>
<a name="l5796"><span class="linenum">5796</span></a>  <span class="comment"> * @return mixed</span>
<a name="l5797"><span class="linenum">5797</span></a>  <span class="comment"> */</span>
<a name="l5798"><span class="linenum">5798</span></a>  function <a class="function" onClick="logFunction('current_charset_to_utf8')" href="../../../_functions/current_charset_to_utf8.html" onMouseOver="funcPopup(event,'current_charset_to_utf8')">current_charset_to_utf8</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> )
<a name="l5799"><span class="linenum">5799</span></a>  {
<a name="l5800"><span class="linenum">5800</span></a>      global <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l5801"><span class="linenum">5801</span></a>  
<a name="l5802"><span class="linenum">5802</span></a>      if( <a class="phpfunction" onClick="logFunction('is_string')" href="../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>) &amp;&amp; <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != '' &amp;&amp; <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> != 'utf-8' )
<a name="l5803"><span class="linenum">5803</span></a>      {
<a name="l5804"><span class="linenum">5804</span></a>          return <a class="function" onClick="logFunction('convert_charset')" href="../../../_functions/convert_charset.html" onMouseOver="funcPopup(event,'convert_charset')">convert_charset</a>( <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>, 'utf-8', <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> );
<a name="l5805"><span class="linenum">5805</span></a>      }
<a name="l5806"><span class="linenum">5806</span></a>      return <a class="var it821" onMouseOver="hilite(821)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>;
<a name="l5807"><span class="linenum">5807</span></a>  }
<a name="l5808"><span class="linenum">5808</span></a>  
<a name="l5809"><span class="linenum">5809</span></a>  
<a name="l5810"><span class="linenum">5810</span></a>  if( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'property_exists' ) )
<a name="l5811"><span class="linenum">5811</span></a>  {
<a name="l5812"><span class="linenum">5812</span></a>      <span class="comment">/**</span>
<a name="l5813"><span class="linenum">5813</span></a>  <span class="comment">     * Create property_exists function if it does not exist ( PHP &lt; 5.1 )</span>
<a name="l5814"><span class="linenum">5814</span></a>  <span class="comment">     * @param object</span>
<a name="l5815"><span class="linenum">5815</span></a>  <span class="comment">     * @param string</span>
<a name="l5816"><span class="linenum">5816</span></a>  <span class="comment">     *</span>
<a name="l5817"><span class="linenum">5817</span></a>  <span class="comment">     * @return bool</span>
<a name="l5818"><span class="linenum">5818</span></a>  <span class="comment">     */</span>
<a name="l5819"><span class="linenum">5819</span></a>  	function <a class="function" onClick="logFunction('property_exists')" href="../../../_functions/property_exists.html" onMouseOver="funcPopup(event,'property_exists')">property_exists</a>( <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, <a class="var it7115" onMouseOver="hilite(7115)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../../_variables/property.html">$property</a> )
<a name="l5820"><span class="linenum">5820</span></a>      {
<a name="l5821"><span class="linenum">5821</span></a>          if( <a class="phpfunction" onClick="logFunction('is_object')" href="../../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>( <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) )
<a name="l5822"><span class="linenum">5822</span></a>          {
<a name="l5823"><span class="linenum">5823</span></a>              <a class="var it3703" onMouseOver="hilite(3703)" onMouseOut="lolite()" onClick="logVariable('vars')" href="../../../_variables/vars.html">$vars</a> = <a class="phpfunction" onClick="logFunction('get_object_vars')" href="../../../_functions/get_object_vars.html" onMouseOver="phpfuncPopup(event,'get_object_vars')">get_object_vars</a>( <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> );
<a name="l5824"><span class="linenum">5824</span></a>          }
<a name="l5825"><span class="linenum">5825</span></a>          else
<a name="l5826"><span class="linenum">5826</span></a>          {
<a name="l5827"><span class="linenum">5827</span></a>              <a class="var it3703" onMouseOver="hilite(3703)" onMouseOut="lolite()" onClick="logVariable('vars')" href="../../../_variables/vars.html">$vars</a> = <a class="phpfunction" onClick="logFunction('get_class_vars')" href="../../../_functions/get_class_vars.html" onMouseOver="phpfuncPopup(event,'get_class_vars')">get_class_vars</a>( <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> );
<a name="l5828"><span class="linenum">5828</span></a>          }
<a name="l5829"><span class="linenum">5829</span></a>          return <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>( <a class="var it7115" onMouseOver="hilite(7115)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../../_variables/property.html">$property</a>, <a class="var it3703" onMouseOver="hilite(3703)" onMouseOut="lolite()" onClick="logVariable('vars')" href="../../../_variables/vars.html">$vars</a> );
<a name="l5830"><span class="linenum">5830</span></a>      }
<a name="l5831"><span class="linenum">5831</span></a>  }
<a name="l5832"><span class="linenum">5832</span></a>  
<a name="l5833"><span class="linenum">5833</span></a>  
<a name="l5834"><span class="linenum">5834</span></a>  <span class="comment">// fp&gt;vitaliy: move to a file that is not included everywhere!</span>
<a name="l5835"><span class="linenum">5835</span></a>  <span class="comment">/**</span>
<a name="l5836"><span class="linenum">5836</span></a>  <span class="comment"> * Update global $http_response_code and call function header()</span>
<a name="l5837"><span class="linenum">5837</span></a>  <span class="comment"> *</span>
<a name="l5838"><span class="linenum">5838</span></a>  <span class="comment"> * NOTICE: When you start to use new code please add it to the hits filter &quot;HTTP resp&quot;</span>
<a name="l5839"><span class="linenum">5839</span></a>  <span class="comment"> *         in the file &quot;/inc/sessions/views/_stats_view.funcs.php&quot;,</span>
<a name="l5840"><span class="linenum">5840</span></a>  <span class="comment"> *         function filter_hits(), array $resp_codes</span>
<a name="l5841"><span class="linenum">5841</span></a>  <span class="comment"> *</span>
<a name="l5842"><span class="linenum">5842</span></a>  <span class="comment"> * @param string Header</span>
<a name="l5843"><span class="linenum">5843</span></a>  <span class="comment"> * @param integer Header response code</span>
<a name="l5844"><span class="linenum">5844</span></a>  <span class="comment"> */</span>
<a name="l5845"><span class="linenum">5845</span></a>  function <a class="function" onClick="logFunction('header_http_response')" href="../../../_functions/header_http_response.html" onMouseOver="funcPopup(event,'header_http_response')">header_http_response</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../_variables/code.html">$code</a> = NULL )
<a name="l5846"><span class="linenum">5846</span></a>  {
<a name="l5847"><span class="linenum">5847</span></a>      global <a class="var it3261" onMouseOver="hilite(3261)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../../_variables/http_response_code.html">$http_response_code</a>;
<a name="l5848"><span class="linenum">5848</span></a>  
<a name="l5849"><span class="linenum">5849</span></a>      <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> = 'HTTP/1.1 '. <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>;
<a name="l5850"><span class="linenum">5850</span></a>  
<a name="l5851"><span class="linenum">5851</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../_variables/code.html">$code</a> ) )
<a name="l5852"><span class="linenum">5852</span></a>      {
<a name="l5853"><span class="linenum">5853</span></a>          if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/(\d{3})/', <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a>, <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a> ) )
<a name="l5854"><span class="linenum">5854</span></a>          {
<a name="l5855"><span class="linenum">5855</span></a>              <a class="var it3261" onMouseOver="hilite(3261)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../../_variables/http_response_code.html">$http_response_code</a> = (int)<a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[0];
<a name="l5856"><span class="linenum">5856</span></a>          }
<a name="l5857"><span class="linenum">5857</span></a>      }
<a name="l5858"><span class="linenum">5858</span></a>      else
<a name="l5859"><span class="linenum">5859</span></a>      {
<a name="l5860"><span class="linenum">5860</span></a>          <a class="var it3261" onMouseOver="hilite(3261)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../../_variables/http_response_code.html">$http_response_code</a> = <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../_variables/code.html">$code</a>;
<a name="l5861"><span class="linenum">5861</span></a>      }
<a name="l5862"><span class="linenum">5862</span></a>  
<a name="l5863"><span class="linenum">5863</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> );
<a name="l5864"><span class="linenum">5864</span></a>  }
<a name="l5865"><span class="linenum">5865</span></a>  
<a name="l5866"><span class="linenum">5866</span></a>  
<a name="l5867"><span class="linenum">5867</span></a>  <span class="comment">/**</span>
<a name="l5868"><span class="linenum">5868</span></a>  <span class="comment"> * Add a trailing slash, if none present</span>
<a name="l5869"><span class="linenum">5869</span></a>  <span class="comment"> *</span>
<a name="l5870"><span class="linenum">5870</span></a>  <span class="comment"> * @param string the path/url</span>
<a name="l5871"><span class="linenum">5871</span></a>  <span class="comment"> * @return string the path/url with trailing slash</span>
<a name="l5872"><span class="linenum">5872</span></a>  <span class="comment"> */</span>
<a name="l5873"><span class="linenum">5873</span></a>  function <a class="function" onClick="logFunction('trailing_slash')" href="../../../_functions/trailing_slash.html" onMouseOver="funcPopup(event,'trailing_slash')">trailing_slash</a>( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a> )
<a name="l5874"><span class="linenum">5874</span></a>  {
<a name="l5875"><span class="linenum">5875</span></a>      if( empty(<a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>) || <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>, -1 ) == '/' )
<a name="l5876"><span class="linenum">5876</span></a>      {
<a name="l5877"><span class="linenum">5877</span></a>          return <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>;
<a name="l5878"><span class="linenum">5878</span></a>      }
<a name="l5879"><span class="linenum">5879</span></a>      else
<a name="l5880"><span class="linenum">5880</span></a>      {
<a name="l5881"><span class="linenum">5881</span></a>          return <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>.'/';
<a name="l5882"><span class="linenum">5882</span></a>      }
<a name="l5883"><span class="linenum">5883</span></a>  }
<a name="l5884"><span class="linenum">5884</span></a>  
<a name="l5885"><span class="linenum">5885</span></a>  
<a name="l5886"><span class="linenum">5886</span></a>  <span class="comment">/**</span>
<a name="l5887"><span class="linenum">5887</span></a>  <span class="comment"> * Remove trailing slash, if present</span>
<a name="l5888"><span class="linenum">5888</span></a>  <span class="comment"> *</span>
<a name="l5889"><span class="linenum">5889</span></a>  <span class="comment"> * @param string the path/url</span>
<a name="l5890"><span class="linenum">5890</span></a>  <span class="comment"> * @return string the path/url without trailing slash</span>
<a name="l5891"><span class="linenum">5891</span></a>  <span class="comment"> */</span>
<a name="l5892"><span class="linenum">5892</span></a>  function <a class="function" onClick="logFunction('no_trailing_slash')" href="../../../_functions/no_trailing_slash.html" onMouseOver="funcPopup(event,'no_trailing_slash')">no_trailing_slash</a>( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a> )
<a name="l5893"><span class="linenum">5893</span></a>  {
<a name="l5894"><span class="linenum">5894</span></a>      if( <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>, -1 ) == '/' )
<a name="l5895"><span class="linenum">5895</span></a>      {
<a name="l5896"><span class="linenum">5896</span></a>          return <a class="function" onClick="logFunction('evo_substr')" href="../../../_functions/evo_substr.html" onMouseOver="funcPopup(event,'evo_substr')">evo_substr</a>( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>, 0, <a class="function" onClick="logFunction('evo_strlen')" href="../../../_functions/evo_strlen.html" onMouseOver="funcPopup(event,'evo_strlen')">evo_strlen</a>( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a> )-1 );
<a name="l5897"><span class="linenum">5897</span></a>      }
<a name="l5898"><span class="linenum">5898</span></a>      else
<a name="l5899"><span class="linenum">5899</span></a>      {
<a name="l5900"><span class="linenum">5900</span></a>          return <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>;
<a name="l5901"><span class="linenum">5901</span></a>      }
<a name="l5902"><span class="linenum">5902</span></a>  }
<a name="l5903"><span class="linenum">5903</span></a>  
<a name="l5904"><span class="linenum">5904</span></a>  
<a name="l5905"><span class="linenum">5905</span></a>  <span class="comment">/**</span>
<a name="l5906"><span class="linenum">5906</span></a>  <span class="comment"> * Provide sys_get_temp_dir for older versions of PHP (&lt; 5.2.1)</span>
<a name="l5907"><span class="linenum">5907</span></a>  <span class="comment"> *</span>
<a name="l5908"><span class="linenum">5908</span></a>  <span class="comment"> * @return string path to system temporary directory</span>
<a name="l5909"><span class="linenum">5909</span></a>  <span class="comment"> */</span>
<a name="l5910"><span class="linenum">5910</span></a>  if( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'sys_get_temp_dir' ) )
<a name="l5911"><span class="linenum">5911</span></a>  {
<a name="l5912"><span class="linenum">5912</span></a>  	function <a class="function" onClick="logFunction('sys_get_temp_dir')" href="../../../_functions/sys_get_temp_dir.html" onMouseOver="funcPopup(event,'sys_get_temp_dir')">sys_get_temp_dir</a>()
<a name="l5913"><span class="linenum">5913</span></a>      {
<a name="l5914"><span class="linenum">5914</span></a>  <span class="comment">        // Try to get from environment variable</span>
<a name="l5915"><span class="linenum">5915</span></a>          if( !empty(<a class="var it2438" onMouseOver="hilite(2438)" onMouseOut="lolite()" onClick="logVariable('_ENV')" href="../../../_variables/_ENV.html">$_ENV</a>['TMP']) )
<a name="l5916"><span class="linenum">5916</span></a>          {
<a name="l5917"><span class="linenum">5917</span></a>              return <a class="phpfunction" onClick="logFunction('realpath')" href="../../../_functions/realpath.html" onMouseOver="phpfuncPopup(event,'realpath')">realpath</a>( <a class="var it2438" onMouseOver="hilite(2438)" onMouseOut="lolite()" onClick="logVariable('_ENV')" href="../../../_variables/_ENV.html">$_ENV</a>['TMP'] );
<a name="l5918"><span class="linenum">5918</span></a>          }
<a name="l5919"><span class="linenum">5919</span></a>          elseif( !empty(<a class="var it2438" onMouseOver="hilite(2438)" onMouseOut="lolite()" onClick="logVariable('_ENV')" href="../../../_variables/_ENV.html">$_ENV</a>['TMPDIR']) )
<a name="l5920"><span class="linenum">5920</span></a>          {
<a name="l5921"><span class="linenum">5921</span></a>              return <a class="phpfunction" onClick="logFunction('realpath')" href="../../../_functions/realpath.html" onMouseOver="phpfuncPopup(event,'realpath')">realpath</a>( <a class="var it2438" onMouseOver="hilite(2438)" onMouseOut="lolite()" onClick="logVariable('_ENV')" href="../../../_variables/_ENV.html">$_ENV</a>['TMPDIR'] );
<a name="l5922"><span class="linenum">5922</span></a>          }
<a name="l5923"><span class="linenum">5923</span></a>          elseif( !empty(<a class="var it2438" onMouseOver="hilite(2438)" onMouseOut="lolite()" onClick="logVariable('_ENV')" href="../../../_variables/_ENV.html">$_ENV</a>['TEMP']) )
<a name="l5924"><span class="linenum">5924</span></a>          {
<a name="l5925"><span class="linenum">5925</span></a>              return <a class="phpfunction" onClick="logFunction('realpath')" href="../../../_functions/realpath.html" onMouseOver="phpfuncPopup(event,'realpath')">realpath</a>( <a class="var it2438" onMouseOver="hilite(2438)" onMouseOut="lolite()" onClick="logVariable('_ENV')" href="../../../_variables/_ENV.html">$_ENV</a>['TEMP'] );
<a name="l5926"><span class="linenum">5926</span></a>          }
<a name="l5927"><span class="linenum">5927</span></a>          else
<a name="l5928"><span class="linenum">5928</span></a>          {    // Detect by creating a temporary file
<a name="l5929"><span class="linenum">5929</span></a>  
<a name="l5930"><span class="linenum">5930</span></a>  <span class="comment">            // Try to use system's temporary directory as random name shouldn't exist</span>
<a name="l5931"><span class="linenum">5931</span></a>              <a class="var it7116" onMouseOver="hilite(7116)" onMouseOut="lolite()" onClick="logVariable('temp_file')" href="../../../_variables/temp_file.html">$temp_file</a> = <a class="phpfunction" onClick="logFunction('tempnam')" href="../../../_functions/tempnam.html" onMouseOver="phpfuncPopup(event,'tempnam')">tempnam</a>( <a class="phpfunction" onClick="logFunction('sha1')" href="../../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="phpfunction" onClick="logFunction('uniqid')" href="../../../_functions/uniqid.html" onMouseOver="phpfuncPopup(event,'uniqid')">uniqid</a>(<a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>()), true), '' );
<a name="l5932"><span class="linenum">5932</span></a>              if( <a class="var it7116" onMouseOver="hilite(7116)" onMouseOut="lolite()" onClick="logVariable('temp_file')" href="../../../_variables/temp_file.html">$temp_file</a> )
<a name="l5933"><span class="linenum">5933</span></a>              {
<a name="l5934"><span class="linenum">5934</span></a>                  <a class="var it3611" onMouseOver="hilite(3611)" onMouseOut="lolite()" onClick="logVariable('temp_dir')" href="../../../_variables/temp_dir.html">$temp_dir</a> = <a class="phpfunction" onClick="logFunction('realpath')" href="../../../_functions/realpath.html" onMouseOver="phpfuncPopup(event,'realpath')">realpath</a>( <a class="phpfunction" onClick="logFunction('dirname')" href="../../../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(<a class="var it7116" onMouseOver="hilite(7116)" onMouseOut="lolite()" onClick="logVariable('temp_file')" href="../../../_variables/temp_file.html">$temp_file</a>) );
<a name="l5935"><span class="linenum">5935</span></a>                  <a class="phpfunction" onClick="logFunction('unlink')" href="../../../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it7116" onMouseOver="hilite(7116)" onMouseOut="lolite()" onClick="logVariable('temp_file')" href="../../../_variables/temp_file.html">$temp_file</a>);
<a name="l5936"><span class="linenum">5936</span></a>                  return <a class="var it3611" onMouseOver="hilite(3611)" onMouseOut="lolite()" onClick="logVariable('temp_dir')" href="../../../_variables/temp_dir.html">$temp_dir</a>;
<a name="l5937"><span class="linenum">5937</span></a>              }
<a name="l5938"><span class="linenum">5938</span></a>              else
<a name="l5939"><span class="linenum">5939</span></a>              {
<a name="l5940"><span class="linenum">5940</span></a>                  return false;
<a name="l5941"><span class="linenum">5941</span></a>              }
<a name="l5942"><span class="linenum">5942</span></a>          }
<a name="l5943"><span class="linenum">5943</span></a>      }
<a name="l5944"><span class="linenum">5944</span></a>  }
<a name="l5945"><span class="linenum">5945</span></a>  
<a name="l5946"><span class="linenum">5946</span></a>  
<a name="l5947"><span class="linenum">5947</span></a>  <span class="comment">/**</span>
<a name="l5948"><span class="linenum">5948</span></a>  <span class="comment"> * Provide inet_pton for older versions of PHP (&lt; 5.1.0 linux &amp; &lt; 5.3.0 windows)</span>
<a name="l5949"><span class="linenum">5949</span></a>  <span class="comment"> *</span>
<a name="l5950"><span class="linenum">5950</span></a>  <span class="comment"> * Converts a human readable IP address to its packed in_addr representation</span>
<a name="l5951"><span class="linenum">5951</span></a>  <span class="comment"> * @param string A human readable IPv4 or IPv6 address</span>
<a name="l5952"><span class="linenum">5952</span></a>  <span class="comment"> * @return string The in_addr representation of the given address, or FALSE if a syntactically invalid address is given (for example, an IPv4 address without dots or an IPv6 address without colons</span>
<a name="l5953"><span class="linenum">5953</span></a>  <span class="comment"> */</span>
<a name="l5954"><span class="linenum">5954</span></a>  if( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'inet_pton' ) )
<a name="l5955"><span class="linenum">5955</span></a>  {
<a name="l5956"><span class="linenum">5956</span></a>  	function <a class="function" onClick="logFunction('inet_pton')" href="../../../_functions/inet_pton.html" onMouseOver="funcPopup(event,'inet_pton')">inet_pton</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> )
<a name="l5957"><span class="linenum">5957</span></a>      {
<a name="l5958"><span class="linenum">5958</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, '.' ) !== FALSE )
<a name="l5959"><span class="linenum">5959</span></a>          {    // IPv4
<a name="l5960"><span class="linenum">5960</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> = <a class="phpfunction" onClick="logFunction('pack')" href="../../../_functions/pack.html" onMouseOver="phpfuncPopup(event,'pack')">pack</a>( 'N', <a class="phpfunction" onClick="logFunction('ip2long')" href="../../../_functions/ip2long.html" onMouseOver="phpfuncPopup(event,'ip2long')">ip2long</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> ) );
<a name="l5961"><span class="linenum">5961</span></a>          }
<a name="l5962"><span class="linenum">5962</span></a>          elseif( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, ':' ) !== FALSE )
<a name="l5963"><span class="linenum">5963</span></a>          {    // IPv6
<a name="l5964"><span class="linenum">5964</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ':', <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> );
<a name="l5965"><span class="linenum">5965</span></a>              <a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../_variables/res.html">$res</a> = <a class="phpfunction" onClick="logFunction('str_pad')" href="../../../_functions/str_pad.html" onMouseOver="phpfuncPopup(event,'str_pad')">str_pad</a>( '', ( 4 * ( 8 - <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> ) ) ), '0000', STR_PAD_LEFT );
<a name="l5966"><span class="linenum">5966</span></a>              foreach( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> as <a class="var it1173" onMouseOver="hilite(1173)" onMouseOut="lolite()" onClick="logVariable('seg')" href="../../../_variables/seg.html">$seg</a> )
<a name="l5967"><span class="linenum">5967</span></a>              {
<a name="l5968"><span class="linenum">5968</span></a>                  <a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../_variables/res.html">$res</a> .= <a class="phpfunction" onClick="logFunction('str_pad')" href="../../../_functions/str_pad.html" onMouseOver="phpfuncPopup(event,'str_pad')">str_pad</a>( <a class="var it1173" onMouseOver="hilite(1173)" onMouseOut="lolite()" onClick="logVariable('seg')" href="../../../_variables/seg.html">$seg</a>, 4, '0', STR_PAD_LEFT );
<a name="l5969"><span class="linenum">5969</span></a>              }
<a name="l5970"><span class="linenum">5970</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> = <a class="phpfunction" onClick="logFunction('pack')" href="../../../_functions/pack.html" onMouseOver="phpfuncPopup(event,'pack')">pack</a>( 'H'.strlen( <a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../_variables/res.html">$res</a> ), <a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../_variables/res.html">$res</a> );
<a name="l5971"><span class="linenum">5971</span></a>          }
<a name="l5972"><span class="linenum">5972</span></a>          else
<a name="l5973"><span class="linenum">5973</span></a>          {    // Invalid IP address
<a name="l5974"><span class="linenum">5974</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> = FALSE;
<a name="l5975"><span class="linenum">5975</span></a>          }
<a name="l5976"><span class="linenum">5976</span></a>  
<a name="l5977"><span class="linenum">5977</span></a>          return <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>;
<a name="l5978"><span class="linenum">5978</span></a>      }
<a name="l5979"><span class="linenum">5979</span></a>  }
<a name="l5980"><span class="linenum">5980</span></a>  
<a name="l5981"><span class="linenum">5981</span></a>  
<a name="l5982"><span class="linenum">5982</span></a>  <span class="comment">/**</span>
<a name="l5983"><span class="linenum">5983</span></a>  <span class="comment"> * Convert integer to IP address</span>
<a name="l5984"><span class="linenum">5984</span></a>  <span class="comment"> *</span>
<a name="l5985"><span class="linenum">5985</span></a>  <span class="comment"> * @param integer Number</span>
<a name="l5986"><span class="linenum">5986</span></a>  <span class="comment"> * @return string IP address</span>
<a name="l5987"><span class="linenum">5987</span></a>  <span class="comment"> */</span>
<a name="l5988"><span class="linenum">5988</span></a>  function <a class="function" onClick="logFunction('int2ip')" href="../../../_functions/int2ip.html" onMouseOver="funcPopup(event,'int2ip')">int2ip</a>( <a class="var it7117" onMouseOver="hilite(7117)" onMouseOut="lolite()" onClick="logVariable('int')" href="../../../_variables/int.html">$int</a> )
<a name="l5989"><span class="linenum">5989</span></a>  {
<a name="l5990"><span class="linenum">5990</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> = array();
<a name="l5991"><span class="linenum">5991</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[0] = (int) ( <a class="var it7117" onMouseOver="hilite(7117)" onMouseOut="lolite()" onClick="logVariable('int')" href="../../../_variables/int.html">$int</a> / 256 / 256 / 256 );
<a name="l5992"><span class="linenum">5992</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[1] = (int) ( ( <a class="var it7117" onMouseOver="hilite(7117)" onMouseOut="lolite()" onClick="logVariable('int')" href="../../../_variables/int.html">$int</a> - ( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[0] * 256 * 256 * 256 ) ) / 256 / 256 );
<a name="l5993"><span class="linenum">5993</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[2] = (int) ( ( <a class="var it7117" onMouseOver="hilite(7117)" onMouseOut="lolite()" onClick="logVariable('int')" href="../../../_variables/int.html">$int</a> - ( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[0] * 256 * 256 * 256 ) - ( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[1] * 256 * 256 ) ) / 256 );
<a name="l5994"><span class="linenum">5994</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[3] = <a class="var it7117" onMouseOver="hilite(7117)" onMouseOut="lolite()" onClick="logVariable('int')" href="../../../_variables/int.html">$int</a> - ( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[0] * 256 * 256 * 256 ) - ( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[1] * 256 * 256 ) - ( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[2] * 256 );
<a name="l5995"><span class="linenum">5995</span></a>  
<a name="l5996"><span class="linenum">5996</span></a>      return <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[0].'.'.<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[1].'.'.<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[2].'.'.<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>[3];
<a name="l5997"><span class="linenum">5997</span></a>  }
<a name="l5998"><span class="linenum">5998</span></a>  
<a name="l5999"><span class="linenum">5999</span></a>  
<a name="l6000"><span class="linenum">6000</span></a>  <span class="comment">/**</span>
<a name="l6001"><span class="linenum">6001</span></a>  <span class="comment"> * Check if the given string is a valid IPv4 or IPv6 address value</span>
<a name="l6002"><span class="linenum">6002</span></a>  <span class="comment"> *</span>
<a name="l6003"><span class="linenum">6003</span></a>  <span class="comment"> * @param string IP</span>
<a name="l6004"><span class="linenum">6004</span></a>  <span class="comment"> * @return boolean true if valid, false otherwise</span>
<a name="l6005"><span class="linenum">6005</span></a>  <span class="comment"> */</span>
<a name="l6006"><span class="linenum">6006</span></a>  function <a class="function" onClick="logFunction('is_valid_ip_format')" href="../../../_functions/is_valid_ip_format.html" onMouseOver="funcPopup(event,'is_valid_ip_format')">is_valid_ip_format</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> )
<a name="l6007"><span class="linenum">6007</span></a>  {
<a name="l6008"><span class="linenum">6008</span></a>      if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'filter_var' ) )
<a name="l6009"><span class="linenum">6009</span></a>      { // filter_var() function exists we have PHP version &gt;= 5.2.0
<a name="l6010"><span class="linenum">6010</span></a>          return filter_var( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, FILTER_VALIDATE_IP ) !== false;
<a name="l6011"><span class="linenum">6011</span></a>      }
<a name="l6012"><span class="linenum">6012</span></a>  
<a name="l6013"><span class="linenum">6013</span></a>  <span class="comment">    // PHP version is &lt; 5.2.0</span>
<a name="l6014"><span class="linenum">6014</span></a>      if( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> == '::1' )
<a name="l6015"><span class="linenum">6015</span></a>      {    // Reserved IP for localhost
<a name="l6016"><span class="linenum">6016</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> = '127.0.0.1';
<a name="l6017"><span class="linenum">6017</span></a>      }
<a name="l6018"><span class="linenum">6018</span></a>  
<a name="l6019"><span class="linenum">6019</span></a>      if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, '.' ) !== false )
<a name="l6020"><span class="linenum">6020</span></a>      { // we have IPv4
<a name="l6021"><span class="linenum">6021</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, ':' !== false ) )
<a name="l6022"><span class="linenum">6022</span></a>          { // It is combined with IPv6, remove the IPv6 prefix
<a name="l6023"><span class="linenum">6023</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, <a class="phpfunction" onClick="logFunction('strrpos')" href="../../../_functions/strrpos.html" onMouseOver="phpfuncPopup(event,'strrpos')">strrpos</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, ':' ) );
<a name="l6024"><span class="linenum">6024</span></a>          }
<a name="l6025"><span class="linenum">6025</span></a>          if( <a class="phpfunction" onClick="logFunction('substr_count')" href="../../../_functions/substr_count.html" onMouseOver="phpfuncPopup(event,'substr_count')">substr_count</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, '.' ) != 3 )
<a name="l6026"><span class="linenum">6026</span></a>          { // Don't vaildate formats like 'zz.yyyyy' which would be allowed by <a class="phpfunction" onClick="logFunction('ip2long')" href="../../../_functions/ip2long.html" onMouseOver="phpfuncPopup(event,'ip2long')">ip2long</a>() function
<a name="l6027"><span class="linenum">6027</span></a>              return false;
<a name="l6028"><span class="linenum">6028</span></a>          }
<a name="l6029"><span class="linenum">6029</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('ip2long')" href="../../../_functions/ip2long.html" onMouseOver="phpfuncPopup(event,'ip2long')">ip2long</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> );
<a name="l6030"><span class="linenum">6030</span></a>          return ( ( <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> !== false ) &amp;&amp; ( <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> !== -1 ) );
<a name="l6031"><span class="linenum">6031</span></a>      }
<a name="l6032"><span class="linenum">6032</span></a>  
<a name="l6033"><span class="linenum">6033</span></a>  <span class="comment">    // Check if it is a valid IPv6 string</span>
<a name="l6034"><span class="linenum">6034</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( &quot;/^[0-9a-f]{1,4}:([0-9a-f]{0,4}:){1,6}[0-9a-f]{1,4}$/&quot;, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> ) )
<a name="l6035"><span class="linenum">6035</span></a>      { // <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> has the correct format
<a name="l6036"><span class="linenum">6036</span></a>          if( ( <a class="phpfunction" onClick="logFunction('substr_count')" href="../../../_functions/substr_count.html" onMouseOver="phpfuncPopup(event,'substr_count')">substr_count</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, '::' ) &gt; 1 ) || ( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, ':::' ) !== false ) )
<a name="l6037"><span class="linenum">6037</span></a>          { // Not valid IPv6 format because contains a ':::' char sequence or more than one '::'
<a name="l6038"><span class="linenum">6038</span></a>              return false;
<a name="l6039"><span class="linenum">6039</span></a>          }
<a name="l6040"><span class="linenum">6040</span></a>          return true;
<a name="l6041"><span class="linenum">6041</span></a>      }
<a name="l6042"><span class="linenum">6042</span></a>  
<a name="l6043"><span class="linenum">6043</span></a>      return false;
<a name="l6044"><span class="linenum">6044</span></a>  }
<a name="l6045"><span class="linenum">6045</span></a>  
<a name="l6046"><span class="linenum">6046</span></a>  
<a name="l6047"><span class="linenum">6047</span></a>  <span class="comment">/**</span>
<a name="l6048"><span class="linenum">6048</span></a>  <span class="comment"> * Convert IP address to integer (get only 32bits of IPv6 address)</span>
<a name="l6049"><span class="linenum">6049</span></a>  <span class="comment"> *</span>
<a name="l6050"><span class="linenum">6050</span></a>  <span class="comment"> * @param string IP address</span>
<a name="l6051"><span class="linenum">6051</span></a>  <span class="comment"> * @return integer Number</span>
<a name="l6052"><span class="linenum">6052</span></a>  <span class="comment"> */</span>
<a name="l6053"><span class="linenum">6053</span></a>  function <a class="function" onClick="logFunction('ip2int')" href="../../../_functions/ip2int.html" onMouseOver="funcPopup(event,'ip2int')">ip2int</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> )
<a name="l6054"><span class="linenum">6054</span></a>  {
<a name="l6055"><span class="linenum">6055</span></a>      if( ! <a class="function" onClick="logFunction('is_valid_ip_format')" href="../../../_functions/is_valid_ip_format.html" onMouseOver="funcPopup(event,'is_valid_ip_format')">is_valid_ip_format</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> ) )
<a name="l6056"><span class="linenum">6056</span></a>      { // IP format is incorrect
<a name="l6057"><span class="linenum">6057</span></a>          return 0;
<a name="l6058"><span class="linenum">6058</span></a>      }
<a name="l6059"><span class="linenum">6059</span></a>  
<a name="l6060"><span class="linenum">6060</span></a>      if( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> == '::1' )
<a name="l6061"><span class="linenum">6061</span></a>      {    // Reserved IP for localhost
<a name="l6062"><span class="linenum">6062</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> = '127.0.0.1';
<a name="l6063"><span class="linenum">6063</span></a>      }
<a name="l6064"><span class="linenum">6064</span></a>  
<a name="l6065"><span class="linenum">6065</span></a>      <a class="var it1019" onMouseOver="hilite(1019)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../../../_variables/parts.html">$parts</a> = <a class="phpfunction" onClick="logFunction('unpack')" href="../../../_functions/unpack.html" onMouseOver="phpfuncPopup(event,'unpack')">unpack</a>( 'N*', <a class="function" onClick="logFunction('inet_pton')" href="../../../_functions/inet_pton.html" onMouseOver="funcPopup(event,'inet_pton')">inet_pton</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a> ) );
<a name="l6066"><span class="linenum">6066</span></a>  <span class="comment">    // In case of IPv6 return only a parts of it</span>
<a name="l6067"><span class="linenum">6067</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = ( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('ip')" href="../../../_variables/ip.html">$ip</a>, '.' ) !== false ) ? <a class="var it1019" onMouseOver="hilite(1019)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../../../_variables/parts.html">$parts</a>[1] <span class="comment">/* IPv4*/</span> : <a class="var it1019" onMouseOver="hilite(1019)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../../../_variables/parts.html">$parts</a>[4] <span class="comment">/* IPv6*/</span>;
<a name="l6068"><span class="linenum">6068</span></a>  
<a name="l6069"><span class="linenum">6069</span></a>      if( <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> &lt; 0 )
<a name="l6070"><span class="linenum">6070</span></a>      { // convert unsigned int to signed from unpack.
<a name="l6071"><span class="linenum">6071</span></a>  <span class="comment">        // this should be OK as it will be a PHP float not an int</span>
<a name="l6072"><span class="linenum">6072</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> += 4294967296;
<a name="l6073"><span class="linenum">6073</span></a>      }
<a name="l6074"><span class="linenum">6074</span></a>  
<a name="l6075"><span class="linenum">6075</span></a>      return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l6076"><span class="linenum">6076</span></a>  }
<a name="l6077"><span class="linenum">6077</span></a>  
<a name="l6078"><span class="linenum">6078</span></a>  
<a name="l6079"><span class="linenum">6079</span></a>  <span class="comment">/**</span>
<a name="l6080"><span class="linenum">6080</span></a>  <span class="comment"> * Provide array_combine for older versions of PHP (&lt; 5.0.0)</span>
<a name="l6081"><span class="linenum">6081</span></a>  <span class="comment"> *</span>
<a name="l6082"><span class="linenum">6082</span></a>  <span class="comment"> * Creates an array by using one array for keys and another for its values</span>
<a name="l6083"><span class="linenum">6083</span></a>  <span class="comment"> * @param array Keys</span>
<a name="l6084"><span class="linenum">6084</span></a>  <span class="comment"> * @param array Values</span>
<a name="l6085"><span class="linenum">6085</span></a>  <span class="comment"> * @return array Combined array, FALSE if the number of elements for each array isn't equal.</span>
<a name="l6086"><span class="linenum">6086</span></a>  <span class="comment"> */</span>
<a name="l6087"><span class="linenum">6087</span></a>  if( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'array_combine' ) )
<a name="l6088"><span class="linenum">6088</span></a>  {
<a name="l6089"><span class="linenum">6089</span></a>  	function <a class="function" onClick="logFunction('array_combine')" href="../../../_functions/array_combine.html" onMouseOver="funcPopup(event,'array_combine')">array_combine</a>( <a class="var it7118" onMouseOver="hilite(7118)" onMouseOut="lolite()" onClick="logVariable('arr1')" href="../../../_variables/arr1.html">$arr1</a>, <a class="var it7119" onMouseOver="hilite(7119)" onMouseOut="lolite()" onClick="logVariable('arr2')" href="../../../_variables/arr2.html">$arr2</a> )
<a name="l6090"><span class="linenum">6090</span></a>      {
<a name="l6091"><span class="linenum">6091</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7118" onMouseOver="hilite(7118)" onMouseOut="lolite()" onClick="logVariable('arr1')" href="../../../_variables/arr1.html">$arr1</a> ) != <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7119" onMouseOver="hilite(7119)" onMouseOut="lolite()" onClick="logVariable('arr2')" href="../../../_variables/arr2.html">$arr2</a> ) )
<a name="l6092"><span class="linenum">6092</span></a>          {
<a name="l6093"><span class="linenum">6093</span></a>              return false;
<a name="l6094"><span class="linenum">6094</span></a>          }
<a name="l6095"><span class="linenum">6095</span></a>  
<a name="l6096"><span class="linenum">6096</span></a>          <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a> = array();
<a name="l6097"><span class="linenum">6097</span></a>          foreach( <a class="var it7118" onMouseOver="hilite(7118)" onMouseOut="lolite()" onClick="logVariable('arr1')" href="../../../_variables/arr1.html">$arr1</a> as <a class="var it7120" onMouseOver="hilite(7120)" onMouseOut="lolite()" onClick="logVariable('key1')" href="../../../_variables/key1.html">$key1</a> =&gt; <a class="var it7121" onMouseOver="hilite(7121)" onMouseOut="lolite()" onClick="logVariable('value1')" href="../../../_variables/value1.html">$value1</a> )
<a name="l6098"><span class="linenum">6098</span></a>          {
<a name="l6099"><span class="linenum">6099</span></a>              <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a>[<a class="var it7121" onMouseOver="hilite(7121)" onMouseOut="lolite()" onClick="logVariable('value1')" href="../../../_variables/value1.html">$value1</a>] = <a class="var it7119" onMouseOver="hilite(7119)" onMouseOut="lolite()" onClick="logVariable('arr2')" href="../../../_variables/arr2.html">$arr2</a>[<a class="var it7120" onMouseOver="hilite(7120)" onMouseOut="lolite()" onClick="logVariable('key1')" href="../../../_variables/key1.html">$key1</a>];
<a name="l6100"><span class="linenum">6100</span></a>          }
<a name="l6101"><span class="linenum">6101</span></a>          return <a class="var it437" onMouseOver="hilite(437)" onMouseOut="lolite()" onClick="logVariable('out')" href="../../../_variables/out.html">$out</a>;
<a name="l6102"><span class="linenum">6102</span></a>      }
<a name="l6103"><span class="linenum">6103</span></a>  }
<a name="l6104"><span class="linenum">6104</span></a>  
<a name="l6105"><span class="linenum">6105</span></a>  
<a name="l6106"><span class="linenum">6106</span></a>  <span class="comment">/**</span>
<a name="l6107"><span class="linenum">6107</span></a>  <span class="comment"> * Provide array_combine for older versions of PHP (&lt; 5.0.0)</span>
<a name="l6108"><span class="linenum">6108</span></a>  <span class="comment"> *</span>
<a name="l6109"><span class="linenum">6109</span></a>  <span class="comment"> * List of already/potentially sent HTTP responsee headers(),</span>
<a name="l6110"><span class="linenum">6110</span></a>  <span class="comment"> * CANNOT be implemented</span>
<a name="l6111"><span class="linenum">6111</span></a>  <span class="comment"> */</span>
<a name="l6112"><span class="linenum">6112</span></a>  if( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'headers_list' ) )
<a name="l6113"><span class="linenum">6113</span></a>  {
<a name="l6114"><span class="linenum">6114</span></a>  	function <a class="function" onClick="logFunction('headers_list')" href="../../../_functions/headers_list.html" onMouseOver="funcPopup(event,'headers_list')">headers_list</a>()
<a name="l6115"><span class="linenum">6115</span></a>      {
<a name="l6116"><span class="linenum">6116</span></a>          return array();
<a name="l6117"><span class="linenum">6117</span></a>      }
<a name="l6118"><span class="linenum">6118</span></a>  }
<a name="l6119"><span class="linenum">6119</span></a>  
<a name="l6120"><span class="linenum">6120</span></a>  
<a name="l6121"><span class="linenum">6121</span></a>  <span class="comment">/**</span>
<a name="l6122"><span class="linenum">6122</span></a>  <span class="comment"> * Provide array_fill_keys for older versions of PHP (&lt; 5.2.0)</span>
<a name="l6123"><span class="linenum">6123</span></a>  <span class="comment"> *</span>
<a name="l6124"><span class="linenum">6124</span></a>  <span class="comment"> * Fills an array with the value of the value parameter, using the values of the keys array as keys.</span>
<a name="l6125"><span class="linenum">6125</span></a>  <span class="comment"> * @param array Keys</span>
<a name="l6126"><span class="linenum">6126</span></a>  <span class="comment"> * @param mixed Value</span>
<a name="l6127"><span class="linenum">6127</span></a>  <span class="comment"> * @return array Filled array</span>
<a name="l6128"><span class="linenum">6128</span></a>  <span class="comment"> */</span>
<a name="l6129"><span class="linenum">6129</span></a>  if( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'array_fill_keys' ) )
<a name="l6130"><span class="linenum">6130</span></a>  {
<a name="l6131"><span class="linenum">6131</span></a>  	function <a class="function" onClick="logFunction('array_fill_keys')" href="../../../_functions/array_fill_keys.html" onMouseOver="funcPopup(event,'array_fill_keys')">array_fill_keys</a>( <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> )
<a name="l6132"><span class="linenum">6132</span></a>      {
<a name="l6133"><span class="linenum">6133</span></a>          <a class="var it7122" onMouseOver="hilite(7122)" onMouseOut="lolite()" onClick="logVariable('filled_array')" href="../../../_variables/filled_array.html">$filled_array</a> = array();
<a name="l6134"><span class="linenum">6134</span></a>          foreach( <a class="var it3320" onMouseOver="hilite(3320)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../../_variables/array.html">$array</a> as <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> )
<a name="l6135"><span class="linenum">6135</span></a>          {
<a name="l6136"><span class="linenum">6136</span></a>              <a class="var it7122" onMouseOver="hilite(7122)" onMouseOut="lolite()" onClick="logVariable('filled_array')" href="../../../_variables/filled_array.html">$filled_array</a>[<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l6137"><span class="linenum">6137</span></a>          }
<a name="l6138"><span class="linenum">6138</span></a>  
<a name="l6139"><span class="linenum">6139</span></a>          return <a class="var it7122" onMouseOver="hilite(7122)" onMouseOut="lolite()" onClick="logVariable('filled_array')" href="../../../_variables/filled_array.html">$filled_array</a>;
<a name="l6140"><span class="linenum">6140</span></a>      }
<a name="l6141"><span class="linenum">6141</span></a>  }
<a name="l6142"><span class="linenum">6142</span></a>  
<a name="l6143"><span class="linenum">6143</span></a>  
<a name="l6144"><span class="linenum">6144</span></a>  <span class="comment">/**</span>
<a name="l6145"><span class="linenum">6145</span></a>  <span class="comment"> * Provide htmlspecialchars_decode for older versions of PHP (&lt; 5.1.0)</span>
<a name="l6146"><span class="linenum">6146</span></a>  <span class="comment"> *</span>
<a name="l6147"><span class="linenum">6147</span></a>  <span class="comment"> * Convert special HTML entities back to characters</span>
<a name="l6148"><span class="linenum">6148</span></a>  <span class="comment"> * @param string Text to decode</span>
<a name="l6149"><span class="linenum">6149</span></a>  <span class="comment"> * @return string The decoded text</span>
<a name="l6150"><span class="linenum">6150</span></a>  <span class="comment"> */</span>
<a name="l6151"><span class="linenum">6151</span></a>  if( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'htmlspecialchars_decode' ) )
<a name="l6152"><span class="linenum">6152</span></a>  {
<a name="l6153"><span class="linenum">6153</span></a>  	function <a class="function" onClick="logFunction('htmlspecialchars_decode')" href="../../../_functions/htmlspecialchars_decode.html" onMouseOver="funcPopup(event,'htmlspecialchars_decode')">htmlspecialchars_decode</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> )
<a name="l6154"><span class="linenum">6154</span></a>      {
<a name="l6155"><span class="linenum">6155</span></a>          return <a class="phpfunction" onClick="logFunction('strtr')" href="../../../_functions/strtr.html" onMouseOver="phpfuncPopup(event,'strtr')">strtr</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="phpfunction" onClick="logFunction('array_flip')" href="../../../_functions/array_flip.html" onMouseOver="phpfuncPopup(event,'array_flip')">array_flip</a>( <a class="phpfunction" onClick="logFunction('get_html_translation_table')" href="../../../_functions/get_html_translation_table.html" onMouseOver="phpfuncPopup(event,'get_html_translation_table')">get_html_translation_table</a>( HTML_SPECIALCHARS ) ) );
<a name="l6156"><span class="linenum">6156</span></a>      }
<a name="l6157"><span class="linenum">6157</span></a>  }
<a name="l6158"><span class="linenum">6158</span></a>  
<a name="l6159"><span class="linenum">6159</span></a>  
<a name="l6160"><span class="linenum">6160</span></a>  <span class="comment">/**</span>
<a name="l6161"><span class="linenum">6161</span></a>  <span class="comment"> * Provide array_walk_recursive for older versions of PHP (&lt; 5.1.0)</span>
<a name="l6162"><span class="linenum">6162</span></a>  <span class="comment"> *</span>
<a name="l6163"><span class="linenum">6163</span></a>  <span class="comment"> * Apply a user function recursively to every member of an array</span>
<a name="l6164"><span class="linenum">6164</span></a>  <span class="comment"> * @param array The input array</span>
<a name="l6165"><span class="linenum">6165</span></a>  <span class="comment"> * @param string Funcname</span>
<a name="l6166"><span class="linenum">6166</span></a>  <span class="comment"> * @param string If the optional userdata parameter is supplied, it will be passed as the third parameter to the callback funcname.</span>
<a name="l6167"><span class="linenum">6167</span></a>  <span class="comment"> * @return TRUE on success or FALSE on failure</span>
<a name="l6168"><span class="linenum">6168</span></a>  <span class="comment"> */</span>
<a name="l6169"><span class="linenum">6169</span></a>  if( !<a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'array_walk_recursive' ) )
<a name="l6170"><span class="linenum">6170</span></a>  {
<a name="l6171"><span class="linenum">6171</span></a>  	function <a class="function" onClick="logFunction('array_walk_recursive')" href="../../../_functions/array_walk_recursive.html" onMouseOver="funcPopup(event,'array_walk_recursive')">array_walk_recursive</a>( &amp;<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../../_variables/input.html">$input</a>, <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../_variables/funcname.html">$funcname</a>, <a class="var it7123" onMouseOver="hilite(7123)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../../_variables/userdata.html">$userdata</a> = '' )
<a name="l6172"><span class="linenum">6172</span></a>      {
<a name="l6173"><span class="linenum">6173</span></a>          if( !<a class="phpfunction" onClick="logFunction('is_callable')" href="../../../_functions/is_callable.html" onMouseOver="phpfuncPopup(event,'is_callable')">is_callable</a>( <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../_variables/funcname.html">$funcname</a> ) )
<a name="l6174"><span class="linenum">6174</span></a>          {
<a name="l6175"><span class="linenum">6175</span></a>              return false;
<a name="l6176"><span class="linenum">6176</span></a>          }
<a name="l6177"><span class="linenum">6177</span></a>  
<a name="l6178"><span class="linenum">6178</span></a>          if( !<a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../../_variables/input.html">$input</a> ) )
<a name="l6179"><span class="linenum">6179</span></a>          {
<a name="l6180"><span class="linenum">6180</span></a>              return false;
<a name="l6181"><span class="linenum">6181</span></a>          }
<a name="l6182"><span class="linenum">6182</span></a>  
<a name="l6183"><span class="linenum">6183</span></a>          foreach( <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../../_variables/input.html">$input</a> AS <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> =&gt; <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> )
<a name="l6184"><span class="linenum">6184</span></a>          {
<a name="l6185"><span class="linenum">6185</span></a>              if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../../_variables/input.html">$input</a>[<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>] ) )
<a name="l6186"><span class="linenum">6186</span></a>              {
<a name="l6187"><span class="linenum">6187</span></a>                  <a class="phpfunction" onClick="logFunction('array_walk_recursive')" href="../../../_functions/array_walk_recursive.html" onMouseOver="phpfuncPopup(event,'array_walk_recursive')">array_walk_recursive</a>( <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../../_variables/input.html">$input</a>[<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>], <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../_variables/funcname.html">$funcname</a>, <a class="var it7123" onMouseOver="hilite(7123)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../../_variables/userdata.html">$userdata</a> );
<a name="l6188"><span class="linenum">6188</span></a>              }
<a name="l6189"><span class="linenum">6189</span></a>              else
<a name="l6190"><span class="linenum">6190</span></a>              {
<a name="l6191"><span class="linenum">6191</span></a>                  <a class="var it7124" onMouseOver="hilite(7124)" onMouseOut="lolite()" onClick="logVariable('saved_value')" href="../../../_variables/saved_value.html">$saved_value</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l6192"><span class="linenum">6192</span></a>                  if( !empty( <a class="var it7123" onMouseOver="hilite(7123)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../../_variables/userdata.html">$userdata</a> ) )
<a name="l6193"><span class="linenum">6193</span></a>                  {
<a name="l6194"><span class="linenum">6194</span></a>                      <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../_variables/funcname.html">$funcname</a>( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>, <a class="var it7123" onMouseOver="hilite(7123)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../../_variables/userdata.html">$userdata</a> );
<a name="l6195"><span class="linenum">6195</span></a>                  }
<a name="l6196"><span class="linenum">6196</span></a>                  else
<a name="l6197"><span class="linenum">6197</span></a>                  {
<a name="l6198"><span class="linenum">6198</span></a>                      <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../_variables/funcname.html">$funcname</a>( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> );
<a name="l6199"><span class="linenum">6199</span></a>                  }
<a name="l6200"><span class="linenum">6200</span></a>  
<a name="l6201"><span class="linenum">6201</span></a>                  if( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> != <a class="var it7124" onMouseOver="hilite(7124)" onMouseOut="lolite()" onClick="logVariable('saved_value')" href="../../../_variables/saved_value.html">$saved_value</a> )
<a name="l6202"><span class="linenum">6202</span></a>                  {
<a name="l6203"><span class="linenum">6203</span></a>                      <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../../_variables/input.html">$input</a>[<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l6204"><span class="linenum">6204</span></a>                  }
<a name="l6205"><span class="linenum">6205</span></a>              }
<a name="l6206"><span class="linenum">6206</span></a>          }
<a name="l6207"><span class="linenum">6207</span></a>  
<a name="l6208"><span class="linenum">6208</span></a>          return true;
<a name="l6209"><span class="linenum">6209</span></a>      }
<a name="l6210"><span class="linenum">6210</span></a>  }
<a name="l6211"><span class="linenum">6211</span></a>  
<a name="l6212"><span class="linenum">6212</span></a>  
<a name="l6213"><span class="linenum">6213</span></a>  <span class="comment">/**</span>
<a name="l6214"><span class="linenum">6214</span></a>  <span class="comment"> * Save text data to file, create target file if it doesn't exist</span>
<a name="l6215"><span class="linenum">6215</span></a>  <span class="comment"> *</span>
<a name="l6216"><span class="linenum">6216</span></a>  <span class="comment"> * @param string data to be written</span>
<a name="l6217"><span class="linenum">6217</span></a>  <span class="comment"> * @param string filename (full path to a file)</span>
<a name="l6218"><span class="linenum">6218</span></a>  <span class="comment"> * @param string fopen mode</span>
<a name="l6219"><span class="linenum">6219</span></a>  <span class="comment"> */</span>
<a name="l6220"><span class="linenum">6220</span></a>  function <a class="function" onClick="logFunction('save_to_file')" href="../../../_functions/save_to_file.html" onMouseOver="funcPopup(event,'save_to_file')">save_to_file</a>( <a class="var it953" onMouseOver="hilite(953)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> = 'a' )
<a name="l6221"><span class="linenum">6221</span></a>  {
<a name="l6222"><span class="linenum">6222</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l6223"><span class="linenum">6223</span></a>  
<a name="l6224"><span class="linenum">6224</span></a>      if( ! <a class="phpfunction" onClick="logFunction('file_exists')" href="../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>) )
<a name="l6225"><span class="linenum">6225</span></a>      {    // Create target file
<a name="l6226"><span class="linenum">6226</span></a>          @<a class="phpfunction" onClick="logFunction('touch')" href="../../../_functions/touch.html" onMouseOver="phpfuncPopup(event,'touch')">touch</a>( <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a> );
<a name="l6227"><span class="linenum">6227</span></a>  
<a name="l6228"><span class="linenum">6228</span></a>  <span class="comment">        // Doesn't work during installation</span>
<a name="l6229"><span class="linenum">6229</span></a>          if( !empty(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>) )
<a name="l6230"><span class="linenum">6230</span></a>          {
<a name="l6231"><span class="linenum">6231</span></a>              <a class="var it1524" onMouseOver="hilite(1524)" onMouseOut="lolite()" onClick="logVariable('chmod')" href="../../../_variables/chmod.html">$chmod</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('fm_default_chmod_dir');
<a name="l6232"><span class="linenum">6232</span></a>              @<a class="phpfunction" onClick="logFunction('chmod')" href="../../../_functions/chmod.html" onMouseOver="phpfuncPopup(event,'chmod')">chmod</a>( <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>, <a class="phpfunction" onClick="logFunction('octdec')" href="../../../_functions/octdec.html" onMouseOver="phpfuncPopup(event,'octdec')">octdec</a>(<a class="var it1524" onMouseOver="hilite(1524)" onMouseOut="lolite()" onClick="logVariable('chmod')" href="../../../_variables/chmod.html">$chmod</a>) );
<a name="l6233"><span class="linenum">6233</span></a>          }
<a name="l6234"><span class="linenum">6234</span></a>      }
<a name="l6235"><span class="linenum">6235</span></a>  
<a name="l6236"><span class="linenum">6236</span></a>      if( ! <a class="phpfunction" onClick="logFunction('is_writable')" href="../../../_functions/is_writable.html" onMouseOver="phpfuncPopup(event,'is_writable')">is_writable</a>(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>) )
<a name="l6237"><span class="linenum">6237</span></a>      {
<a name="l6238"><span class="linenum">6238</span></a>          return false;
<a name="l6239"><span class="linenum">6239</span></a>      }
<a name="l6240"><span class="linenum">6240</span></a>  
<a name="l6241"><span class="linenum">6241</span></a>      <a class="var it470" onMouseOver="hilite(470)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../../_variables/f.html">$f</a> = @fopen( <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> );
<a name="l6242"><span class="linenum">6242</span></a>      <a class="var it2404" onMouseOver="hilite(2404)" onMouseOut="lolite()" onClick="logVariable('ok')" href="../../../_variables/ok.html">$ok</a> = @<a class="phpfunction" onClick="logFunction('fwrite')" href="../../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>( <a class="var it470" onMouseOver="hilite(470)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../../_variables/f.html">$f</a>, <a class="var it953" onMouseOver="hilite(953)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a> );
<a name="l6243"><span class="linenum">6243</span></a>      @<a class="phpfunction" onClick="logFunction('fclose')" href="../../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>( <a class="var it470" onMouseOver="hilite(470)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../../_variables/f.html">$f</a> );
<a name="l6244"><span class="linenum">6244</span></a>  
<a name="l6245"><span class="linenum">6245</span></a>      if( <a class="var it2404" onMouseOver="hilite(2404)" onMouseOut="lolite()" onClick="logVariable('ok')" href="../../../_variables/ok.html">$ok</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('file_exists')" href="../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>) )
<a name="l6246"><span class="linenum">6246</span></a>      {
<a name="l6247"><span class="linenum">6247</span></a>          return <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../_variables/filename.html">$filename</a>;
<a name="l6248"><span class="linenum">6248</span></a>      }
<a name="l6249"><span class="linenum">6249</span></a>      return false;
<a name="l6250"><span class="linenum">6250</span></a>  }
<a name="l6251"><span class="linenum">6251</span></a>  
<a name="l6252"><span class="linenum">6252</span></a>  
<a name="l6253"><span class="linenum">6253</span></a>  <span class="comment">/**</span>
<a name="l6254"><span class="linenum">6254</span></a>  <span class="comment"> * Check if current request is AJAX</span>
<a name="l6255"><span class="linenum">6255</span></a>  <span class="comment"> * Used in order to get only content of the requested page</span>
<a name="l6256"><span class="linenum">6256</span></a>  <span class="comment"> *</span>
<a name="l6257"><span class="linenum">6257</span></a>  <span class="comment"> * @param string Template name</span>
<a name="l6258"><span class="linenum">6258</span></a>  <span class="comment"> * @return boolean TRUE/FALSE</span>
<a name="l6259"><span class="linenum">6259</span></a>  <span class="comment"> */</span>
<a name="l6260"><span class="linenum">6260</span></a>  function <a class="function" onClick="logFunction('is_ajax_content')" href="../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>( <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a> = '' )
<a name="l6261"><span class="linenum">6261</span></a>  {
<a name="l6262"><span class="linenum">6262</span></a>      global <a class="var it2883" onMouseOver="hilite(2883)" onMouseOut="lolite()" onClick="logVariable('ajax_content_mode')" href="../../../_variables/ajax_content_mode.html">$ajax_content_mode</a>;
<a name="l6263"><span class="linenum">6263</span></a>  
<a name="l6264"><span class="linenum">6264</span></a>  <span class="comment">    // Template names of content: @see skin_include()</span>
<a name="l6265"><span class="linenum">6265</span></a>      <a class="var it7125" onMouseOver="hilite(7125)" onMouseOut="lolite()" onClick="logVariable('content_templates')" href="../../../_variables/content_templates.html">$content_templates</a> = array( '<a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a>$', '_item_block.inc.php', '_item_content.inc.php' );
<a name="l6266"><span class="linenum">6266</span></a>  
<a name="l6267"><span class="linenum">6267</span></a>      return !empty( <a class="var it2883" onMouseOver="hilite(2883)" onMouseOut="lolite()" onClick="logVariable('ajax_content_mode')" href="../../../_variables/ajax_content_mode.html">$ajax_content_mode</a> ) &amp;&amp;
<a name="l6268"><span class="linenum">6268</span></a>          <a class="var it2883" onMouseOver="hilite(2883)" onMouseOut="lolite()" onClick="logVariable('ajax_content_mode')" href="../../../_variables/ajax_content_mode.html">$ajax_content_mode</a> === true &amp;&amp;
<a name="l6269"><span class="linenum">6269</span></a>          !<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it590" onMouseOver="hilite(590)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../../_variables/template_name.html">$template_name</a>, <a class="var it7125" onMouseOver="hilite(7125)" onMouseOut="lolite()" onClick="logVariable('content_templates')" href="../../../_variables/content_templates.html">$content_templates</a> );
<a name="l6270"><span class="linenum">6270</span></a>  }
<a name="l6271"><span class="linenum">6271</span></a>  
<a name="l6272"><span class="linenum">6272</span></a>  
<a name="l6273"><span class="linenum">6273</span></a>  <span class="comment">/**</span>
<a name="l6274"><span class="linenum">6274</span></a>  <span class="comment"> * Get an error message text about file permissions</span>
<a name="l6275"><span class="linenum">6275</span></a>  <span class="comment"> */</span>
<a name="l6276"><span class="linenum">6276</span></a>  function <a class="function" onClick="logFunction('get_file_permissions_message')" href="../../../_functions/get_file_permissions_message.html" onMouseOver="funcPopup(event,'get_file_permissions_message')">get_file_permissions_message</a>()
<a name="l6277"><span class="linenum">6277</span></a>  {
<a name="l6278"><span class="linenum">6278</span></a>      return sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( '(Please check UNIX file permissions on the parent folder. %s)' ), <a class="function" onClick="logFunction('get_manual_link')" href="../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>( 'file-permissions' ) );
<a name="l6279"><span class="linenum">6279</span></a>  }
<a name="l6280"><span class="linenum">6280</span></a>  
<a name="l6281"><span class="linenum">6281</span></a>  
<a name="l6282"><span class="linenum">6282</span></a>  <span class="comment">/**</span>
<a name="l6283"><span class="linenum">6283</span></a>  <span class="comment"> * Flush the output buffer</span>
<a name="l6284"><span class="linenum">6284</span></a>  <span class="comment"> */</span>
<a name="l6285"><span class="linenum">6285</span></a>  function <a class="function" onClick="logFunction('evo_flush')" href="../../../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>()
<a name="l6286"><span class="linenum">6286</span></a>  {
<a name="l6287"><span class="linenum">6287</span></a>      @<a class="phpfunction" onClick="logFunction('ob_end_flush')" href="../../../_functions/ob_end_flush.html" onMouseOver="phpfuncPopup(event,'ob_end_flush')">ob_end_flush</a>(); <span class="comment">// This function helps to turn off output buffering on PHP 5.4.x</span>
<a name="l6288"><span class="linenum">6288</span></a>      <a class="phpfunction" onClick="logFunction('flush')" href="../../../_functions/flush.html" onMouseOver="phpfuncPopup(event,'flush')">flush</a>();
<a name="l6289"><span class="linenum">6289</span></a>  }
<a name="l6290"><span class="linenum">6290</span></a>  
<a name="l6291"><span class="linenum">6291</span></a>  <span class="comment">// ---------- APM : Application Performance Monitoring -----------</span>
<a name="l6292"><span class="linenum">6292</span></a>  
<a name="l6293"><span class="linenum">6293</span></a>  <span class="comment">/**</span>
<a name="l6294"><span class="linenum">6294</span></a>  <span class="comment"> * Name the transaction for the APM.</span>
<a name="l6295"><span class="linenum">6295</span></a>  <span class="comment"> * This avoids that every request be called 'index.php' or 'admin.php' or 'cron_exec.php'</span>
<a name="l6296"><span class="linenum">6296</span></a>  <span class="comment"> *</span>
<a name="l6297"><span class="linenum">6297</span></a>  <span class="comment"> * @param mixed $request_transaction_name</span>
<a name="l6298"><span class="linenum">6298</span></a>  <span class="comment"> */</span>
<a name="l6299"><span class="linenum">6299</span></a>  function <a class="function" onClick="logFunction('apm_name_transaction')" href="../../../_functions/apm_name_transaction.html" onMouseOver="funcPopup(event,'apm_name_transaction')">apm_name_transaction</a>( <a class="var it7126" onMouseOver="hilite(7126)" onMouseOut="lolite()" onClick="logVariable('request_transaction_name')" href="../../../_variables/request_transaction_name.html">$request_transaction_name</a> )
<a name="l6300"><span class="linenum">6300</span></a>  {
<a name="l6301"><span class="linenum">6301</span></a>      if(<a class="phpfunction" onClick="logFunction('extension_loaded')" href="../../../_functions/extension_loaded.html" onMouseOver="phpfuncPopup(event,'extension_loaded')">extension_loaded</a>('newrelic'))
<a name="l6302"><span class="linenum">6302</span></a>      {    // New Relic is installed on the server for monitoring.
<a name="l6303"><span class="linenum">6303</span></a>          newrelic_name_transaction( <a class="var it7126" onMouseOver="hilite(7126)" onMouseOut="lolite()" onClick="logVariable('request_transaction_name')" href="../../../_variables/request_transaction_name.html">$request_transaction_name</a> );
<a name="l6304"><span class="linenum">6304</span></a>      }
<a name="l6305"><span class="linenum">6305</span></a>  }
<a name="l6306"><span class="linenum">6306</span></a>  
<a name="l6307"><span class="linenum">6307</span></a>  <span class="comment">/**</span>
<a name="l6308"><span class="linenum">6308</span></a>  <span class="comment"> * Log a custom metric</span>
<a name="l6309"><span class="linenum">6309</span></a>  <span class="comment"> *</span>
<a name="l6310"><span class="linenum">6310</span></a>  <span class="comment"> * @param mixed $name name of the custom metric</span>
<a name="l6311"><span class="linenum">6311</span></a>  <span class="comment"> * @param mixed $value assumed to be in milliseconds (ms)</span>
<a name="l6312"><span class="linenum">6312</span></a>  <span class="comment"> */</span>
<a name="l6313"><span class="linenum">6313</span></a>  function <a class="function" onClick="logFunction('apm_log_custom_metric')" href="../../../_functions/apm_log_custom_metric.html" onMouseOver="funcPopup(event,'apm_log_custom_metric')">apm_log_custom_metric</a>( <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> )
<a name="l6314"><span class="linenum">6314</span></a>  {
<a name="l6315"><span class="linenum">6315</span></a>      if(<a class="phpfunction" onClick="logFunction('extension_loaded')" href="../../../_functions/extension_loaded.html" onMouseOver="phpfuncPopup(event,'extension_loaded')">extension_loaded</a>('newrelic'))
<a name="l6316"><span class="linenum">6316</span></a>      {    // New Relic is installed on the server for monitoring.
<a name="l6317"><span class="linenum">6317</span></a>          newrelic_custom_metric( 'Custom/'.<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> );
<a name="l6318"><span class="linenum">6318</span></a>      }
<a name="l6319"><span class="linenum">6319</span></a>  }
<a name="l6320"><span class="linenum">6320</span></a>  
<a name="l6321"><span class="linenum">6321</span></a>  
<a name="l6322"><span class="linenum">6322</span></a>  <span class="comment">/**</span>
<a name="l6323"><span class="linenum">6323</span></a>  <span class="comment"> * Send a cookie (@see setcookie() for more details)</span>
<a name="l6324"><span class="linenum">6324</span></a>  <span class="comment"> *</span>
<a name="l6325"><span class="linenum">6325</span></a>  <span class="comment"> * @param string The name of the cookie</span>
<a name="l6326"><span class="linenum">6326</span></a>  <span class="comment"> * @param string The value of the cookie</span>
<a name="l6327"><span class="linenum">6327</span></a>  <span class="comment"> * @param integer The time the cookie expires</span>
<a name="l6328"><span class="linenum">6328</span></a>  <span class="comment"> * @param string The path on the server in which the cookie will be available on</span>
<a name="l6329"><span class="linenum">6329</span></a>  <span class="comment"> * @param string The domain that the cookie is available</span>
<a name="l6330"><span class="linenum">6330</span></a>  <span class="comment"> * @param boolean Indicates that the cookie should only be transmitted over a secure HTTPS connection from the client</span>
<a name="l6331"><span class="linenum">6331</span></a>  <span class="comment"> * @param boolean (Added in PHP 5.2.0) When TRUE the cookie will be made accessible only through the HTTP protocol</span>
<a name="l6332"><span class="linenum">6332</span></a>  <span class="comment"> * @return boolean TRUE if setcookie() successfully runs</span>
<a name="l6333"><span class="linenum">6333</span></a>  <span class="comment"> */</span>
<a name="l6334"><span class="linenum">6334</span></a>  function <a class="function" onClick="logFunction('evo_setcookie')" href="../../../_functions/evo_setcookie.html" onMouseOver="funcPopup(event,'evo_setcookie')">evo_setcookie</a>( <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = '', <a class="var it7127" onMouseOver="hilite(7127)" onMouseOut="lolite()" onClick="logVariable('expire')" href="../../../_variables/expire.html">$expire</a> = 0, <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a> = '', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a> = '', <a class="var it3864" onMouseOver="hilite(3864)" onMouseOut="lolite()" onClick="logVariable('secure')" href="../../../_variables/secure.html">$secure</a> = false, <a class="var it7128" onMouseOver="hilite(7128)" onMouseOut="lolite()" onClick="logVariable('httponly')" href="../../../_variables/httponly.html">$httponly</a> = false )
<a name="l6335"><span class="linenum">6335</span></a>  {
<a name="l6336"><span class="linenum">6336</span></a>      if( <a class="phpfunction" onClick="logFunction('version_compare')" href="../../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>( <a class="phpfunction" onClick="logFunction('phpversion')" href="../../../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>(), '5.2', '&gt;=' ) )
<a name="l6337"><span class="linenum">6337</span></a>      { // Use HTTP-only setting since PHP 5.2.0
<a name="l6338"><span class="linenum">6338</span></a>          return <a class="phpfunction" onClick="logFunction('setcookie')" href="../../../_functions/setcookie.html" onMouseOver="phpfuncPopup(event,'setcookie')">setcookie</a>( <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it7127" onMouseOver="hilite(7127)" onMouseOut="lolite()" onClick="logVariable('expire')" href="../../../_variables/expire.html">$expire</a>, <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a>, <a class="var it3864" onMouseOver="hilite(3864)" onMouseOut="lolite()" onClick="logVariable('secure')" href="../../../_variables/secure.html">$secure</a>, <a class="var it7128" onMouseOver="hilite(7128)" onMouseOut="lolite()" onClick="logVariable('httponly')" href="../../../_variables/httponly.html">$httponly</a> );
<a name="l6339"><span class="linenum">6339</span></a>      }
<a name="l6340"><span class="linenum">6340</span></a>      else
<a name="l6341"><span class="linenum">6341</span></a>      { // PHP &lt; 5.2 doesn't support HTTP-only
<a name="l6342"><span class="linenum">6342</span></a>          return <a class="phpfunction" onClick="logFunction('setcookie')" href="../../../_functions/setcookie.html" onMouseOver="phpfuncPopup(event,'setcookie')">setcookie</a>( <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it7127" onMouseOver="hilite(7127)" onMouseOut="lolite()" onClick="logVariable('expire')" href="../../../_variables/expire.html">$expire</a>, <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../_variables/path.html">$path</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('domain')" href="../../../_variables/domain.html">$domain</a>, <a class="var it3864" onMouseOver="hilite(3864)" onMouseOut="lolite()" onClick="logVariable('secure')" href="../../../_variables/secure.html">$secure</a> );
<a name="l6343"><span class="linenum">6343</span></a>      }
<a name="l6344"><span class="linenum">6344</span></a>  }
<a name="l6345"><span class="linenum">6345</span></a>  
<a name="l6346"><span class="linenum">6346</span></a>  
<a name="l6347"><span class="linenum">6347</span></a>  <span class="comment">/**</span>
<a name="l6348"><span class="linenum">6348</span></a>  <span class="comment"> * Get a button class name depending on template</span>
<a name="l6349"><span class="linenum">6349</span></a>  <span class="comment"> *</span>
<a name="l6350"><span class="linenum">6350</span></a>  <span class="comment"> * @param string Type: 'button', 'button_text', 'button_group'</span>
<a name="l6351"><span class="linenum">6351</span></a>  <span class="comment"> * @param string TRUE - to get class value for jQuery selector</span>
<a name="l6352"><span class="linenum">6352</span></a>  <span class="comment"> * @return string Class name</span>
<a name="l6353"><span class="linenum">6353</span></a>  <span class="comment"> */</span>
<a name="l6354"><span class="linenum">6354</span></a>  function <a class="function" onClick="logFunction('button_class')" href="../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>( <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> = 'button', <a class="var it7129" onMouseOver="hilite(7129)" onMouseOut="lolite()" onClick="logVariable('jQuery_selector')" href="../../../_variables/jQuery_selector.html">$jQuery_selector</a> = false )
<a name="l6355"><span class="linenum">6355</span></a>  {
<a name="l6356"><span class="linenum">6356</span></a>  <span class="comment">    // Default class names</span>
<a name="l6357"><span class="linenum">6357</span></a>      <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../../_variables/classes.html">$classes</a> = array(
<a name="l6358"><span class="linenum">6358</span></a>              'button'       =&gt; 'roundbutton', // Simple button with icon
<a name="l6359"><span class="linenum">6359</span></a>              'button_red'   =&gt; 'roundbutton_red', // Button with red background
<a name="l6360"><span class="linenum">6360</span></a>              'button_green' =&gt; 'roundbutton_green', // Button with green background
<a name="l6361"><span class="linenum">6361</span></a>              'text'         =&gt; 'roundbutton_text', // Button with text
<a name="l6362"><span class="linenum">6362</span></a>              'group'        =&gt; 'roundbutton_group', // Group of the buttons
<a name="l6363"><span class="linenum">6363</span></a>          );
<a name="l6364"><span class="linenum">6364</span></a>  
<a name="l6365"><span class="linenum">6365</span></a>      if( <a class="function" onClick="logFunction('is_admin_page')" href="../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l6366"><span class="linenum">6366</span></a>      { // Some admin skins may have special class names
<a name="l6367"><span class="linenum">6367</span></a>          global <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a>;
<a name="l6368"><span class="linenum">6368</span></a>          if( ! empty( <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a> ) )
<a name="l6369"><span class="linenum">6369</span></a>          {
<a name="l6370"><span class="linenum">6370</span></a>              <a class="var it7130" onMouseOver="hilite(7130)" onMouseOut="lolite()" onClick="logVariable('template_classes')" href="../../../_variables/template_classes.html">$template_classes</a> = <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'button_classes' );
<a name="l6371"><span class="linenum">6371</span></a>          }
<a name="l6372"><span class="linenum">6372</span></a>      }
<a name="l6373"><span class="linenum">6373</span></a>      else
<a name="l6374"><span class="linenum">6374</span></a>      { // Some front end skins may have special class names
<a name="l6375"><span class="linenum">6375</span></a>          global <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../../_variables/Skin.html">$Skin</a>;
<a name="l6376"><span class="linenum">6376</span></a>          if( ! empty( <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../../_variables/Skin.html">$Skin</a> ) )
<a name="l6377"><span class="linenum">6377</span></a>          {
<a name="l6378"><span class="linenum">6378</span></a>              <a class="var it7130" onMouseOver="hilite(7130)" onMouseOut="lolite()" onClick="logVariable('template_classes')" href="../../../_variables/template_classes.html">$template_classes</a> = <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'button_classes' );
<a name="l6379"><span class="linenum">6379</span></a>          }
<a name="l6380"><span class="linenum">6380</span></a>      }
<a name="l6381"><span class="linenum">6381</span></a>      if( !empty( <a class="var it7130" onMouseOver="hilite(7130)" onMouseOut="lolite()" onClick="logVariable('template_classes')" href="../../../_variables/template_classes.html">$template_classes</a> ) )
<a name="l6382"><span class="linenum">6382</span></a>      { // Get class names from admin template
<a name="l6383"><span class="linenum">6383</span></a>          <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../../_variables/classes.html">$classes</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../../_variables/classes.html">$classes</a>, <a class="var it7130" onMouseOver="hilite(7130)" onMouseOut="lolite()" onClick="logVariable('template_classes')" href="../../../_variables/template_classes.html">$template_classes</a> );
<a name="l6384"><span class="linenum">6384</span></a>      }
<a name="l6385"><span class="linenum">6385</span></a>  
<a name="l6386"><span class="linenum">6386</span></a>      <a class="var it7131" onMouseOver="hilite(7131)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../_variables/class_name.html">$class_name</a> = isset( <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../../_variables/classes.html">$classes</a>[ <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> ] ) ? <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../../_variables/classes.html">$classes</a>[ <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> ] : '';
<a name="l6387"><span class="linenum">6387</span></a>  
<a name="l6388"><span class="linenum">6388</span></a>      if( <a class="var it7129" onMouseOver="hilite(7129)" onMouseOut="lolite()" onClick="logVariable('jQuery_selector')" href="../../../_variables/jQuery_selector.html">$jQuery_selector</a> &amp;&amp; ! empty( <a class="var it7131" onMouseOver="hilite(7131)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../_variables/class_name.html">$class_name</a> ) )
<a name="l6389"><span class="linenum">6389</span></a>      { // Convert class name to jQuery selector
<a name="l6390"><span class="linenum">6390</span></a>          <a class="var it7131" onMouseOver="hilite(7131)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../_variables/class_name.html">$class_name</a> = '.'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( ' ', '.', <a class="var it7131" onMouseOver="hilite(7131)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../_variables/class_name.html">$class_name</a> );
<a name="l6391"><span class="linenum">6391</span></a>      }
<a name="l6392"><span class="linenum">6392</span></a>  
<a name="l6393"><span class="linenum">6393</span></a>      return <a class="var it7131" onMouseOver="hilite(7131)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../_variables/class_name.html">$class_name</a>;
<a name="l6394"><span class="linenum">6394</span></a>  }
<a name="l6395"><span class="linenum">6395</span></a>  
<a name="l6396"><span class="linenum">6396</span></a>  
<a name="l6397"><span class="linenum">6397</span></a>  <span class="comment">/**</span>
<a name="l6398"><span class="linenum">6398</span></a>  <span class="comment"> * Initialize JavaScript to build and open window</span>
<a name="l6399"><span class="linenum">6399</span></a>  <span class="comment"> */</span>
<a name="l6400"><span class="linenum">6400</span></a>  function <a class="function" onClick="logFunction('echo_modalwindow_js')" href="../../../_functions/echo_modalwindow_js.html" onMouseOver="funcPopup(event,'echo_modalwindow_js')">echo_modalwindow_js</a>()
<a name="l6401"><span class="linenum">6401</span></a>  {
<a name="l6402"><span class="linenum">6402</span></a>      global <a class="var it7132" onMouseOver="hilite(7132)" onMouseOut="lolite()" onClick="logVariable('modalwindow_js_initialized')" href="../../../_variables/modalwindow_js_initialized.html">$modalwindow_js_initialized</a>;
<a name="l6403"><span class="linenum">6403</span></a>  
<a name="l6404"><span class="linenum">6404</span></a>      if( <a class="var it7132" onMouseOver="hilite(7132)" onMouseOut="lolite()" onClick="logVariable('modalwindow_js_initialized')" href="../../../_variables/modalwindow_js_initialized.html">$modalwindow_js_initialized</a> )
<a name="l6405"><span class="linenum">6405</span></a>      { // Don't initialize these js-functions twice
<a name="l6406"><span class="linenum">6406</span></a>          return;
<a name="l6407"><span class="linenum">6407</span></a>      }
<a name="l6408"><span class="linenum">6408</span></a>  
<a name="l6409"><span class="linenum">6409</span></a>      global <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a>;
<a name="l6410"><span class="linenum">6410</span></a>  
<a name="l6411"><span class="linenum">6411</span></a>      if( isset( <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a> ) &amp;&amp; <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'modal_window_js' ) !== false )
<a name="l6412"><span class="linenum">6412</span></a>      { // Use the functions from admin skin
<a name="l6413"><span class="linenum">6413</span></a>          echo <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'modal_window_js' );
<a name="l6414"><span class="linenum">6414</span></a>          <a class="var it7132" onMouseOver="hilite(7132)" onMouseOut="lolite()" onClick="logVariable('modalwindow_js_initialized')" href="../../../_variables/modalwindow_js_initialized.html">$modalwindow_js_initialized</a> = true;
<a name="l6415"><span class="linenum">6415</span></a>          return;
<a name="l6416"><span class="linenum">6416</span></a>      }
<a name="l6417"><span class="linenum">6417</span></a>  
<a name="l6418"><span class="linenum">6418</span></a>      echo &lt;&lt;&lt; JS_CODE
<a name="l6419"><span class="linenum">6419</span></a>  <span class="comment">/*</span>
<a name="l6420"><span class="linenum">6420</span></a>  <span class="comment"> * Build and open modal window</span>
<a name="l6421"><span class="linenum">6421</span></a>  <span class="comment"> *</span>
<a name="l6422"><span class="linenum">6422</span></a>  <span class="comment"> * @param string HTML content</span>
<a name="l6423"><span class="linenum">6423</span></a>  <span class="comment"> * @param string Width value in css format</span>
<a name="l6424"><span class="linenum">6424</span></a>  <span class="comment"> * @param boolean TRUE - to use transparent template</span>
<a name="l6425"><span class="linenum">6425</span></a>  <span class="comment"> * @param string Title of modal window (Used in bootstrap)</span>
<a name="l6426"><span class="linenum">6426</span></a>  <span class="comment"> * @param string|boolean Button to submit a form (Used in bootstrap), FALSE - to hide bottom panel with buttons</span>
<a name="l6427"><span class="linenum">6427</span></a>  <span class="comment"> */</span>
<a name="l6428"><span class="linenum">6428</span></a>  function <a class="function" onClick="logFunction('openModalWindow')" href="../../../_functions/openmodalwindow.html" onMouseOver="funcPopup(event,'openmodalwindow')">openModalWindow</a>( body_html, width, height, transparent, title, button )
<a name="l6429"><span class="linenum">6429</span></a>  {
<a name="l6430"><span class="linenum">6430</span></a>      var overlay_class = 'overlay_page_active';
<a name="l6431"><span class="linenum">6431</span></a>      if( typeof transparent != 'undefined' &amp;&amp; transparent == true )
<a name="l6432"><span class="linenum">6432</span></a>      {
<a name="l6433"><span class="linenum">6433</span></a>          overlay_class = 'overlay_page_active_transparent';
<a name="l6434"><span class="linenum">6434</span></a>      }
<a name="l6435"><span class="linenum">6435</span></a>  
<a name="l6436"><span class="linenum">6436</span></a>      if( typeof width == 'undefined' )
<a name="l6437"><span class="linenum">6437</span></a>      {
<a name="l6438"><span class="linenum">6438</span></a>          width = '560px';
<a name="l6439"><span class="linenum">6439</span></a>      }
<a name="l6440"><span class="linenum">6440</span></a>      var style_height = '';
<a name="l6441"><span class="linenum">6441</span></a>      if( typeof height != 'undefined' &amp;&amp; ( height &gt; 0 || height != '' ) )
<a name="l6442"><span class="linenum">6442</span></a>      {
<a name="l6443"><span class="linenum">6443</span></a>          style_height = ';height:' + height;
<a name="l6444"><span class="linenum">6444</span></a>      }
<a name="l6445"><span class="linenum">6445</span></a>      if( jQuery( '#overlay_page' ).length &gt; 0 )
<a name="l6446"><span class="linenum">6446</span></a>      { // placeholder already exist
<a name="l6447"><span class="linenum">6447</span></a>          jQuery( '#overlay_page' ).html( body_html );
<a name="l6448"><span class="linenum">6448</span></a>          return;
<a name="l6449"><span class="linenum">6449</span></a>      }
<a name="l6450"><span class="linenum">6450</span></a>  <span class="comment">    // add placeholder for form:</span>
<a name="l6451"><span class="linenum">6451</span></a>      jQuery( 'body' ).append( '&lt;div id=&quot;screen_mask&quot; onclick=&quot;<a class="function" onClick="logFunction('closeModalWindow')" href="../../../_functions/closemodalwindow.html" onMouseOver="funcPopup(event,'closemodalwindow')">closeModalWindow</a>()&quot;&gt;&lt;/div&gt;&lt;div id=&quot;overlay_page&quot; style=&quot;width:' + width + style_height + '&quot;&gt;&lt;/div&gt;' );
<a name="l6452"><span class="linenum">6452</span></a>      var evobar_height = jQuery( '#evo_toolbar' ).height();
<a name="l6453"><span class="linenum">6453</span></a>      jQuery( '#screen_mask' ).css({ top: evobar_height });
<a name="l6454"><span class="linenum">6454</span></a>      jQuery( '#screen_mask' ).fadeTo(1,0.5).<a class="function" onClick="logFunction('fadeIn')" href="../../../_functions/fadein.html" onMouseOver="funcPopup(event,'fadein')">fadeIn</a>(200);
<a name="l6455"><span class="linenum">6455</span></a>      jQuery( '#overlay_page' ).html( body_html ).addClass( overlay_class );
<a name="l6456"><span class="linenum">6456</span></a>      jQuery( document ).<a class="function" onClick="logFunction('on')" href="../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>( 'click', '#close_button', function()
<a name="l6457"><span class="linenum">6457</span></a>          {
<a name="l6458"><span class="linenum">6458</span></a>              <a class="function" onClick="logFunction('closeModalWindow')" href="../../../_functions/closemodalwindow.html" onMouseOver="funcPopup(event,'closemodalwindow')">closeModalWindow</a>();
<a name="l6459"><span class="linenum">6459</span></a>              return false;
<a name="l6460"><span class="linenum">6460</span></a>          } );
<a name="l6461"><span class="linenum">6461</span></a>  }
<a name="l6462"><span class="linenum">6462</span></a>  
<a name="l6463"><span class="linenum">6463</span></a>  <span class="comment">/**</span>
<a name="l6464"><span class="linenum">6464</span></a>  <span class="comment"> * Close modal window</span>
<a name="l6465"><span class="linenum">6465</span></a>  <span class="comment"> */</span>
<a name="l6466"><span class="linenum">6466</span></a>  function <a class="function" onClick="logFunction('closeModalWindow')" href="../../../_functions/closemodalwindow.html" onMouseOver="funcPopup(event,'closemodalwindow')">closeModalWindow</a>( document_obj )
<a name="l6467"><span class="linenum">6467</span></a>  {
<a name="l6468"><span class="linenum">6468</span></a>      if( typeof( document_obj ) == 'undefined' )
<a name="l6469"><span class="linenum">6469</span></a>      {
<a name="l6470"><span class="linenum">6470</span></a>          document_obj = window.document;
<a name="l6471"><span class="linenum">6471</span></a>      }
<a name="l6472"><span class="linenum">6472</span></a>  
<a name="l6473"><span class="linenum">6473</span></a>      jQuery( '#overlay_page', document_obj ).hide();
<a name="l6474"><span class="linenum">6474</span></a>      jQuery( '.action_messages', document_obj).<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l6475"><span class="linenum">6475</span></a>      jQuery( '#server_messages', document_obj ).insertBefore( '.first_payload_block' );
<a name="l6476"><span class="linenum">6476</span></a>      jQuery( '#overlay_page', document_obj ).<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l6477"><span class="linenum">6477</span></a>      jQuery( '#screen_mask', document_obj ).<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l6478"><span class="linenum">6478</span></a>      return false;
<a name="l6479"><span class="linenum">6479</span></a>  }
<a name="l6480"><span class="linenum">6480</span></a>  
<a name="l6481"><span class="linenum">6481</span></a>  <span class="comment">// Close ajax popup if Escape key is pressed:</span>
<a name="l6482"><span class="linenum">6482</span></a>  jQuery(document).keyup(function(e)
<a name="l6483"><span class="linenum">6483</span></a>  {
<a name="l6484"><span class="linenum">6484</span></a>      if( e.keyCode == 27 )
<a name="l6485"><span class="linenum">6485</span></a>      {
<a name="l6486"><span class="linenum">6486</span></a>          <a class="function" onClick="logFunction('closeModalWindow')" href="../../../_functions/closemodalwindow.html" onMouseOver="funcPopup(event,'closemodalwindow')">closeModalWindow</a>();
<a name="l6487"><span class="linenum">6487</span></a>      }
<a name="l6488"><span class="linenum">6488</span></a>  } );
<a name="l6489"><span class="linenum">6489</span></a>  JS_CODE;
<a name="l6490"><span class="linenum">6490</span></a>  
<a name="l6491"><span class="linenum">6491</span></a>      <a class="var it7132" onMouseOver="hilite(7132)" onMouseOut="lolite()" onClick="logVariable('modalwindow_js_initialized')" href="../../../_variables/modalwindow_js_initialized.html">$modalwindow_js_initialized</a> = true;
<a name="l6492"><span class="linenum">6492</span></a>  }
<a name="l6493"><span class="linenum">6493</span></a>  
<a name="l6494"><span class="linenum">6494</span></a>  
<a name="l6495"><span class="linenum">6495</span></a>  <span class="comment">/**</span>
<a name="l6496"><span class="linenum">6496</span></a>  <span class="comment"> * Echo JavaScript to edit values of column in the table list</span>
<a name="l6497"><span class="linenum">6497</span></a>  <span class="comment"> *</span>
<a name="l6498"><span class="linenum">6498</span></a>  <span class="comment"> * @param array Params</span>
<a name="l6499"><span class="linenum">6499</span></a>  <span class="comment"> */</span>
<a name="l6500"><span class="linenum">6500</span></a>  function <a class="function" onClick="logFunction('echo_editable_column_js')" href="../../../_functions/echo_editable_column_js.html" onMouseOver="funcPopup(event,'echo_editable_column_js')">echo_editable_column_js</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l6501"><span class="linenum">6501</span></a>  {
<a name="l6502"><span class="linenum">6502</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l6503"><span class="linenum">6503</span></a>              'column_selector' =&gt; '', // jQuery selector of cell
<a name="l6504"><span class="linenum">6504</span></a>              'ajax_url'        =&gt; '', // AJAX url to update a column value
<a name="l6505"><span class="linenum">6505</span></a>              'options'         =&gt; array(), // Key = Value of option, Value = Title of option
<a name="l6506"><span class="linenum">6506</span></a>              'new_field_name'  =&gt; '', // Name of _POST variable that will be send to ajax request with new value
<a name="l6507"><span class="linenum">6507</span></a>              'ID_value'        =&gt; '', // jQuery to get value of ID
<a name="l6508"><span class="linenum">6508</span></a>              'ID_name'         =&gt; '', // ID of field in DB
<a name="l6509"><span class="linenum">6509</span></a>              'tooltip'         =&gt; <a class="function" onClick="logFunction('TS_')" href="../../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Click to edit'),
<a name="l6510"><span class="linenum">6510</span></a>              'colored_cells'   =&gt; false, // Use TRUE when colors are used for background of cell
<a name="l6511"><span class="linenum">6511</span></a>              'print_init_tags' =&gt; true, // Use FALSE to don't print &lt;script&gt; tags if it is already used inside js
<a name="l6512"><span class="linenum">6512</span></a>              'field_type'      =&gt; 'select', // Type of the editable field: 'select', 'text'
<a name="l6513"><span class="linenum">6513</span></a>              'field_class'     =&gt; '', // Class of the editable field
<a name="l6514"><span class="linenum">6514</span></a>              'null_text'       =&gt; '', // Null text of an input field, Use <a class="function" onClick="logFunction('TS_')" href="../../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>() to translate it
<a name="l6515"><span class="linenum">6515</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l6516"><span class="linenum">6516</span></a>  
<a name="l6517"><span class="linenum">6517</span></a>  <span class="comment">    // Set onblur action to 'submit' when type is 'text' in order to don't miss the selected user login from autocomplete list</span>
<a name="l6518"><span class="linenum">6518</span></a>      <a class="var it7133" onMouseOver="hilite(7133)" onMouseOut="lolite()" onClick="logVariable('onblur_action')" href="../../../_variables/onblur_action.html">$onblur_action</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['field_type'] == 'text' ? 'submit' : 'cancel';
<a name="l6519"><span class="linenum">6519</span></a>  
<a name="l6520"><span class="linenum">6520</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['field_type'] == 'select' )
<a name="l6521"><span class="linenum">6521</span></a>      {
<a name="l6522"><span class="linenum">6522</span></a>          <a class="var it392" onMouseOver="hilite(392)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a> = '';
<a name="l6523"><span class="linenum">6523</span></a>          foreach( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['options'] as <a class="var it7134" onMouseOver="hilite(7134)" onMouseOut="lolite()" onClick="logVariable('option_value')" href="../../../_variables/option_value.html">$option_value</a> =&gt; <a class="var it1774" onMouseOver="hilite(1774)" onMouseOut="lolite()" onClick="logVariable('option_title')" href="../../../_variables/option_title.html">$option_title</a> )
<a name="l6524"><span class="linenum">6524</span></a>          {
<a name="l6525"><span class="linenum">6525</span></a>              <a class="var it392" onMouseOver="hilite(392)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a> .= '\''.<a class="var it7134" onMouseOver="hilite(7134)" onMouseOut="lolite()" onClick="logVariable('option_value')" href="../../../_variables/option_value.html">$option_value</a>.'\':\''.<a class="var it1774" onMouseOver="hilite(1774)" onMouseOut="lolite()" onClick="logVariable('option_title')" href="../../../_variables/option_title.html">$option_title</a>.'\','.&quot;\n&quot;;
<a name="l6526"><span class="linenum">6526</span></a>          }
<a name="l6527"><span class="linenum">6527</span></a>      }
<a name="l6528"><span class="linenum">6528</span></a>  
<a name="l6529"><span class="linenum">6529</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['print_init_tags'] )
<a name="l6530"><span class="linenum">6530</span></a>      {
<a name="l6531"><span class="linenum">6531</span></a>  ?&gt;
<a name="l6532"><span class="linenum">6532</span></a>  &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l6533"><span class="linenum">6533</span></a>  jQuery( document ).<a class="function" onClick="logFunction('ready')" href="../../../_functions/ready.html" onMouseOver="funcPopup(event,'ready')">ready</a>( function()
<a name="l6534"><span class="linenum">6534</span></a>  {
<a name="l6535"><span class="linenum">6535</span></a>  &lt;?php
<a name="l6536"><span class="linenum">6536</span></a>      }
<a name="l6537"><span class="linenum">6537</span></a>  ?&gt;
<a name="l6538"><span class="linenum">6538</span></a>      jQuery( '&lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['column_selector']; ?&gt;' ).editable( '&lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['ajax_url']; ?&gt;',
<a name="l6539"><span class="linenum">6539</span></a>      {
<a name="l6540"><span class="linenum">6540</span></a>          data: function( value, settings )
<a name="l6541"><span class="linenum">6541</span></a>          {
<a name="l6542"><span class="linenum">6542</span></a>              value = <a class="function" onClick="logFunction('ajax_debug_clear')" href="../../../_functions/ajax_debug_clear.html" onMouseOver="funcPopup(event,'ajax_debug_clear')">ajax_debug_clear</a>( value );
<a name="l6543"><span class="linenum">6543</span></a>              &lt;?php if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['field_type'] == 'select' ) { ?&gt;
<a name="l6544"><span class="linenum">6544</span></a>              var result = value.<a class="function" onClick="logFunction('match')" href="../../../_functions/match.html" onMouseOver="funcPopup(event,'match')">match</a>( /rel=&quot;([^&quot;]*)&quot;/ );
<a name="l6545"><span class="linenum">6545</span></a>              return { &lt;?php echo <a class="var it392" onMouseOver="hilite(392)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>; ?&gt;'selected' : result[1] }
<a name="l6546"><span class="linenum">6546</span></a>              &lt;?php } else { ?&gt;
<a name="l6547"><span class="linenum">6547</span></a>              var result = value.<a class="function" onClick="logFunction('match')" href="../../../_functions/match.html" onMouseOver="funcPopup(event,'match')">match</a>( /&gt;\s*([^&lt;]+)\s*&lt;/ );
<a name="l6548"><span class="linenum">6548</span></a>              return result[1] == '&lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['null_text'] ?&gt;' ? '' : result[1];
<a name="l6549"><span class="linenum">6549</span></a>              &lt;?php } ?&gt;
<a name="l6550"><span class="linenum">6550</span></a>          },
<a name="l6551"><span class="linenum">6551</span></a>          type       : '&lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['field_type']; ?&gt;',
<a name="l6552"><span class="linenum">6552</span></a>          class_name : '&lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['field_class']; ?&gt;',
<a name="l6553"><span class="linenum">6553</span></a>          name       : '&lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['new_field_name']; ?&gt;',
<a name="l6554"><span class="linenum">6554</span></a>          tooltip    : '&lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['tooltip']; ?&gt;',
<a name="l6555"><span class="linenum">6555</span></a>          event      : 'click',
<a name="l6556"><span class="linenum">6556</span></a>          onblur     : '&lt;?php echo <a class="var it7133" onMouseOver="hilite(7133)" onMouseOut="lolite()" onClick="logVariable('onblur_action')" href="../../../_variables/onblur_action.html">$onblur_action</a>; ?&gt;',
<a name="l6557"><span class="linenum">6557</span></a>          callback   : function ( settings, original )
<a name="l6558"><span class="linenum">6558</span></a>          {
<a name="l6559"><span class="linenum">6559</span></a>              &lt;?php
<a name="l6560"><span class="linenum">6560</span></a>              if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['colored_cells'] )
<a name="l6561"><span class="linenum">6561</span></a>              { // Use different color for each value
<a name="l6562"><span class="linenum">6562</span></a>              ?&gt;
<a name="l6563"><span class="linenum">6563</span></a>              jQuery( this ).html( <a class="function" onClick="logFunction('ajax_debug_clear')" href="../../../_functions/ajax_debug_clear.html" onMouseOver="funcPopup(event,'ajax_debug_clear')">ajax_debug_clear</a>( settings ) );
<a name="l6564"><span class="linenum">6564</span></a>              var link = jQuery( this ).<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( 'a' );
<a name="l6565"><span class="linenum">6565</span></a>              jQuery( this ).css( 'background-color', link.attr( 'color' ) == 'none' ? 'transparent' : link.attr( 'color' ) );
<a name="l6566"><span class="linenum">6566</span></a>              link.removeAttr( 'color' );
<a name="l6567"><span class="linenum">6567</span></a>              &lt;?php
<a name="l6568"><span class="linenum">6568</span></a>              }
<a name="l6569"><span class="linenum">6569</span></a>              else
<a name="l6570"><span class="linenum">6570</span></a>              { // Use simple fade effect
<a name="l6571"><span class="linenum">6571</span></a>              ?&gt;
<a name="l6572"><span class="linenum">6572</span></a>              <a class="function" onClick="logFunction('evoFadeSuccess')" href="../../../_functions/evofadesuccess.html" onMouseOver="funcPopup(event,'evofadesuccess')">evoFadeSuccess</a>( this );
<a name="l6573"><span class="linenum">6573</span></a>              &lt;?php } ?&gt;
<a name="l6574"><span class="linenum">6574</span></a>          },
<a name="l6575"><span class="linenum">6575</span></a>          onsubmit: function( settings, original ) {},
<a name="l6576"><span class="linenum">6576</span></a>          submitdata : function( value, settings )
<a name="l6577"><span class="linenum">6577</span></a>          {
<a name="l6578"><span class="linenum">6578</span></a>              return { &lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['ID_name']; ?&gt;: &lt;?php echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['ID_value']; ?&gt; }
<a name="l6579"><span class="linenum">6579</span></a>          },
<a name="l6580"><span class="linenum">6580</span></a>          onerror : function( settings, original, xhr )
<a name="l6581"><span class="linenum">6581</span></a>          {
<a name="l6582"><span class="linenum">6582</span></a>              <a class="function" onClick="logFunction('evoFadeFailure')" href="../../../_functions/evofadefailure.html" onMouseOver="funcPopup(event,'evofadefailure')">evoFadeFailure</a>( original );
<a name="l6583"><span class="linenum">6583</span></a>              var input = jQuery( original ).<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( 'input' );
<a name="l6584"><span class="linenum">6584</span></a>              if( input.length &gt; 0 )
<a name="l6585"><span class="linenum">6585</span></a>              {
<a name="l6586"><span class="linenum">6586</span></a>                  jQuery( original ).<a class="function" onClick="logFunction('find')" href="../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( 'span.field_error' ).<a class="function" onClick="logFunction('remove')" href="../../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l6587"><span class="linenum">6587</span></a>                  input.addClass( 'field_error' );
<a name="l6588"><span class="linenum">6588</span></a>                  if( typeof( xhr.responseText ) != 'undefined' )
<a name="l6589"><span class="linenum">6589</span></a>                  {
<a name="l6590"><span class="linenum">6590</span></a>                      input.after( '&lt;span class=&quot;note field_error&quot;&gt;' + xhr.responseText + '&lt;/span&gt;' );
<a name="l6591"><span class="linenum">6591</span></a>                  }
<a name="l6592"><span class="linenum">6592</span></a>              }
<a name="l6593"><span class="linenum">6593</span></a>          }
<a name="l6594"><span class="linenum">6594</span></a>      } );
<a name="l6595"><span class="linenum">6595</span></a>  &lt;?php
<a name="l6596"><span class="linenum">6596</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['print_init_tags'] )
<a name="l6597"><span class="linenum">6597</span></a>      {
<a name="l6598"><span class="linenum">6598</span></a>  ?&gt;
<a name="l6599"><span class="linenum">6599</span></a>  } );
<a name="l6600"><span class="linenum">6600</span></a>  &lt;/script&gt;
<a name="l6601"><span class="linenum">6601</span></a>  &lt;?php
<a name="l6602"><span class="linenum">6602</span></a>      }
<a name="l6603"><span class="linenum">6603</span></a>  }
<a name="l6604"><span class="linenum">6604</span></a>  
<a name="l6605"><span class="linenum">6605</span></a>  
<a name="l6606"><span class="linenum">6606</span></a>  <span class="comment">/**</span>
<a name="l6607"><span class="linenum">6607</span></a>  <span class="comment"> * Handle fatal error in order to display info message when debug is OFF</span>
<a name="l6608"><span class="linenum">6608</span></a>  <span class="comment"> */</span>
<a name="l6609"><span class="linenum">6609</span></a>  function <a class="function" onClick="logFunction('evo_error_handler')" href="../../../_functions/evo_error_handler.html" onMouseOver="funcPopup(event,'evo_error_handler')">evo_error_handler</a>()
<a name="l6610"><span class="linenum">6610</span></a>  {
<a name="l6611"><span class="linenum">6611</span></a>      global <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('evo_last_handled_error')" href="../../../_variables/evo_last_handled_error.html">$evo_last_handled_error</a>;
<a name="l6612"><span class="linenum">6612</span></a>  
<a name="l6613"><span class="linenum">6613</span></a>  <span class="comment">    // Get last error</span>
<a name="l6614"><span class="linenum">6614</span></a>      <a class="var it434" onMouseOver="hilite(434)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../_variables/error.html">$error</a> = error_get_last();
<a name="l6615"><span class="linenum">6615</span></a>  
<a name="l6616"><span class="linenum">6616</span></a>      if( ! empty( <a class="var it434" onMouseOver="hilite(434)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../_variables/error.html">$error</a> ) &amp;&amp; <a class="var it434" onMouseOver="hilite(434)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../_variables/error.html">$error</a>['type'] === E_ERROR )
<a name="l6617"><span class="linenum">6617</span></a>      { // Save only last fatal error
<a name="l6618"><span class="linenum">6618</span></a>          <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('evo_last_handled_error')" href="../../../_variables/evo_last_handled_error.html">$evo_last_handled_error</a> = <a class="var it434" onMouseOver="hilite(434)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../_variables/error.html">$error</a>;
<a name="l6619"><span class="linenum">6619</span></a>      }
<a name="l6620"><span class="linenum">6620</span></a>  }
<a name="l6621"><span class="linenum">6621</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'idna_encode': ['idna_encode', 'IDNA-Encode URL to Punycode. ', [['blogs/inc/_core','_url.funcs.php',802]], 2],
'resume': ['resume', 'Resumes the timer on a category. ', [['blogs/inc/_core/model','_timer.class.php',144]], 43],
'get_active_opcode_cache': ['get_active_opcode_cache', '', [['blogs/inc/_core','_misc.funcs.php',5432]], 3],
'strmaxlen': ['strmaxlen', 'Crop string to maxlen with &hellip; (default tail) at the end if needed. ', [['blogs/inc/_core','_misc.funcs.php',406]], 21],
'send_mail': ['send_mail', 'Sends an email, wrapping PHP\'s mail() function. ALL emails sent by b2evolution must be sent through this function (for consistency and for logging) ', [['blogs/inc/_core','_misc.funcs.php',3366]], 3],
'shutdown_kill': ['shutdown_kill', '', [['blogs/inc/_core','_misc.funcs.php',153]], 0],
'property_exists': ['property_exists', 'Create property_exists function if it does not exist ( PHP < 5.1 ) ', [['blogs/inc/_core','_misc.funcs.php',5812]], 0],
'xmlrpc_getpostcategories': ['xmlrpc_getpostcategories', 'Extract categories out of "<category>" tag from $content. ', [['blogs/inc/_core','_misc.funcs.php',2079]], 3],
'evo_strlen': ['evo_strlen', 'mbstring wrapper for strlen function ', [['blogs/inc/_core','_misc.funcs.php',691]], 33],
'excerpt': ['excerpt', 'Get a limited text-only excerpt ', [['blogs/inc/_core','_misc.funcs.php',379],['blogs/inc/items/model','_item.class.php',1495]], 6],
'bytesreadable': ['bytesreadable', 'Converts bytes to readable bytes/kb/mb/gb, like "12.45mb" ', [['blogs/inc/files/model','_file.funcs.php',51]], 22],
'validate_url': ['validate_url', 'Check the validity of a given URL ', [['blogs/inc/_core','_url.funcs.php',29]], 9],
'locale_restore_previous': ['locale_restore_previous', 'Restore the locale in use before the switch ', [['blogs/inc/locales','_locale.funcs.php',295]], 58],
'is_decimal': ['is_decimal', 'Checks if the param is a decimal number ', [['blogs/inc/_core','_misc.funcs.php',1765]], 2],
'get_duration_fields': ['get_duration_fields', 'Convert from seconds to months, days, hours, minutes and seconds ', [['blogs/inc/_core','_misc.funcs.php',1626]], 2],
'mail_log': ['mail_log', 'Add a mail log ', [['blogs/inc/tools/model','_email.funcs.php',256]], 5],
'ajax_debug_clear': ['ajax_debug_clear', 'Clear ajax request from debug text ', [['blogs/rsc/js','ajax.js',8]], 49],
'is_valid_ip_format': ['is_valid_ip_format', 'Check if the given string is a valid IPv4 or IPv6 address value ', [['blogs/inc/_core','_misc.funcs.php',6000]], 2],
'is_admin_page': ['is_admin_page', 'Is the current page an admin/backoffice page? ', [['blogs/inc/_core','_misc.funcs.php',4764]], 73],
'balance_tags': ['balance_tags', 'Balances Tags of string using a modified stack. ', [['blogs/inc/_core','_param.funcs.php',2371]], 7],
'mysql2localedate': ['mysql2localedate', 'Format a MYSQL date to current locale date format. ', [['blogs/inc/_core','_misc.funcs.php',1275]], 10],
'evofadesuccess': ['evofadesuccess', 'Fades the relevant object to provide feedback, in case of success. ', [['blogs/rsc/js','functions.js',370]], 4],
'pre_dump': ['pre_dump', 'Wrap pre tag around {@link var_dump()} for better debugging. ', [['blogs/inc/_core','_misc.funcs.php',2253]], 45],
'user_exists': ['user_exists', 'Check if the login is valid (user exists) ', [['blogs/inc/_core','_misc.funcs.php',1972]], 2],
'mail_sanitize_header_string': ['mail_sanitize_header_string', 'Prevent email header injection. ', [['blogs/inc/_core','_misc.funcs.php',3269]], 1],
'bad_request_die': ['bad_request_die', 'Outputs Bad request Error message. When in debug mode it also prints a backtrace. ', [['blogs/inc/_core','_misc.funcs.php',2691]], 21],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['blogs/inc/chapters/model','_chapter.class.php',317],['blogs/inc/collections/model','_collsettings.class.php',260],['blogs/inc/users/model','_group.class.php',470],['blogs/inc/widgets/model','_widget.class.php',757],['blogs/inc/collections/model','_blog.class.php',2327],['blogs/inc/settings/model','_abstractsettings.class.php',593],['blogs/inc/users/model','_user.class.php',2934],['blogs/inc/skins/model','_skin.class.php',348],['blogs/inc/comments/model','_comment.class.php',3470],['blogs/inc/users/model','_groupsettings.class.php',159],['blogs/inc/cron/model','_cronjob.class.php',207],['blogs/inc/items/model','_item.class.php',4867],['blogs/inc/slugs/model','_slug.class.php',265],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',129],['blogs/inc/files/model','_file.class.php',1739]], 266],
'get_field_attribs_as_string': ['get_field_attribs_as_string', 'Build a string out of $field_attribs, with each attribute prefixed by a space character. ', [['blogs/inc/_core','_misc.funcs.php',4730]], 25],
'callback_on_non_matching_blocks': ['callback_on_non_matching_blocks', 'Split $text into blocks by using $pattern and call $callback on the non-matching blocks. ', [['blogs/inc/_core','_misc.funcs.php',824]], 20],
'decompact_date': ['decompact_date', 'Decompact a date in a date format ( Y-m-d h:m:s ) ', [['blogs/inc/_core','_misc.funcs.php',4589]], 1],
'sys_get_temp_dir': ['sys_get_temp_dir', 'Provide sys_get_temp_dir for older versions of PHP (< 5.2.1) ', [['blogs/inc/_core','_misc.funcs.php',5905],['blogs/inc/files/model','_file.funcs.php',1055]], 6],
'header_http_response': ['header_http_response', 'Update global $http_response_code and call function header() ', [['blogs/inc/_core','_misc.funcs.php',5835]], 16],
'xmlrpc_decode_recurse': ['xmlrpc_decode_recurse', '', [['blogs/inc/xmlrpc/model','_xmlrpc.funcs.php',86]], 14],
'match': ['match', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15692]], 153],
'headers_list': ['headers_list', 'Provide array_combine for older versions of PHP (< 5.0.0) ', [['blogs/inc/_core','_misc.funcs.php',6106]], 1],
'get_icon_info': ['get_icon_info', 'Get icon according to an item. ', [['blogs/conf','_icons.php',10]], 2],
'mysql2date': ['mysql2date', 'Format a MYSQL date. ', [['blogs/inc/_core','_misc.funcs.php',1314]], 36],
'seconds_to_period': ['seconds_to_period', 'Convert seconds to readable period ', [['blogs/inc/_core','_misc.funcs.php',1479]], 15],
'array_to_option_list': ['array_to_option_list', 'Converts array to form option list ', [['blogs/inc/_core','_misc.funcs.php',5230]], 4],
'get_available_sort_options': ['get_available_sort_options', 'Get available cort oprions for items ', [['blogs/inc/_core','_misc.funcs.php',5188]], 4],
'headers_content_mightcache': ['headers_content_mightcache', 'This is a placeholder for future development. ', [['blogs/inc/_core','_template.funcs.php',63]], 29],
'openmodalwindow': ['openmodalwindow', '', [['blogs/inc/_core','_misc.funcs.php',6428],['blogs/skins_adm/bootstrap','_adminUI.class.php',424]], 2],
'list': ['list', '', [['blogs/rsc/js/bootstrap','typeahead.bundle.js',156]], 95],
'get_manual_link': ['get_manual_link', 'Generate a link to a online help resource. testing the concept of online help (aka webhelp). this function should be relocated somewhere better if it is taken onboard by the project ', [['blogs/inc/_core','_misc.funcs.php',4684]], 175],
'display_list': ['display_list', 'Display an array as a list: ', [['blogs/inc/_core','_misc.funcs.php',4862]], 2],
'unautobrize': ['unautobrize', '', [['blogs/inc/_core','_misc.funcs.php',347]], 0],
'dbprune': ['dbprune', 'Auto pruning of old stats. ', [['blogs/inc/sessions/model','_hitlist.class.php',103],['blogs/inc/comments/model','_commentlist.class.php',776]], 8],
'is_front_page': ['is_front_page', 'Is the current page a default \'Front\' page of a blog? ', [['blogs/inc/_core','_misc.funcs.php',4777]], 4],
'mysql2datestamp': ['mysql2datestamp', 'Convert a MYSQL date -- WITHOUT the time -- to a UNIX timestamp ', [['blogs/inc/_core','_misc.funcs.php',1262]], 1],
'autobrize_callback': ['autobrize_callback', 'Adds <br>\'s to non code blocks ', [['blogs/inc/_core','_misc.funcs.php',330]], 0],
'date2mysql': ['date2mysql', 'Convert timestamp to MySQL/ISO format. ', [['blogs/inc/_core','_misc.funcs.php',1238]], 40],
'convert_chars': ['convert_chars', 'Convert all non ASCII chars (except if UTF-8, GB2312 or CP1251) to &#nnnn; unicode references. Also convert entities to &#nnnn; unicode references if output is not HTML (eg XML) ', [['blogs/inc/_core','_misc.funcs.php',568]], 8],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['blogs/inc/_core','_misc.funcs.php',2535]], 216],
'check_allow_new_email': ['check_allow_new_email', 'Check if user can receive new email today with the given email type or the limit was already exceeded ', [['blogs/inc/users/model','_user.funcs.php',2216]], 4],
'add': ['add', 'Add object to cache, handling our own indices. ', [['blogs/inc/collections/model','_blogcache.class.php',69],['blogs/inc/users/model','_usercache.class.php',231],['blogs/inc/files/model','_filelist.class.php',392],['blogs/inc/_core/model','_log.class.php',124],['blogs/inc/_core/model','_log.class.php',593],['blogs/inc/files/model','_filetypecache.class.php',57],['blogs/inc/_ext/pclzip','pclzip.lib.php',455],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',356],['blogs/inc/users/model','_groupsettings.class.php',103],['blogs/inc/links/model','_linkcache.class.php',101],['blogs/inc/skins/model','_skincache.class.php',62],['blogs/inc/generic/model','_genericcategorycache.class.php',113],['blogs/inc/_core/model','_messages.class.php',121]], 2022],
'value': ['value', 'Returns the value received by the server. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',2013]], 33],
'displayservermessages': ['displayservermessages', 'Displays Messages ( @see Log::display() ) ', [['blogs/rsc/js','communication.js',80]], 1],
'check_status': ['check_status', 'Check if user status permit the give action ', [['blogs/inc/users/model','_user.class.php',2598]], 74],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['blogs/inc/_core','_param.funcs.php',50]], 1906],
'remove': ['remove', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15439],['blogs/inc/files/model','_filelist.class.php',1063],['blogs/inc/links/model','_linkcache.class.php',152]], 350],
'replace_content_callback': ['replace_content_callback', 'Replace content by callback, Used for function callback_on_non_matching_blocks(), because there is different order of params ', [['blogs/inc/_core','_misc.funcs.php',932]], 0],
'get_duration': ['get_duration', 'Get the duration for a given category in seconds,microseconds (configurable number of decimals) ', [['blogs/inc/_core/model','_timer.class.php',170]], 20],
'send_mail_to_user': ['send_mail_to_user', 'Sends an email to User ', [['blogs/inc/_core','_misc.funcs.php',3538]], 13],
'array_walk_recursive': ['array_walk_recursive', 'Provide array_walk_recursive for older versions of PHP (< 5.1.0) ', [['blogs/inc/_core','_misc.funcs.php',6160]], 4],
'array_combine': ['array_combine', 'Provide array_combine for older versions of PHP (< 5.0.0) ', [['blogs/inc/_core','_misc.funcs.php',6079]], 6],
'fadein': ['fadein', '', [['blogs/inc/comments/model','_comment.funcs.php',778],['blogs/inc/comments/model','_comment_js.funcs.php',18],['blogs/inc/dashboard','dashboard.ctrl.php',283]], 44],
'evo_json_encode': ['evo_json_encode', 'A wrapper for json_encode function We need to pass valid UTF-8 string to json_encode, otherwise it may return NULL ', [['blogs/inc/_core','_misc.funcs.php',5770]], 11],
'int2ip': ['int2ip', 'Convert integer to IP address ', [['blogs/inc/_core','_misc.funcs.php',5982]], 24],
'invalidate_pagecaches': ['invalidate_pagecaches', 'Invalidate all page caches. This function should be processed every time, when some users or global settings was modified, and this modification has an imortant influence for the front office display. Modifications that requires to invalidate all page caches: - installing/removing/reloading/enabling/disabling plugins - editing user settings like allow profile pics, new users can register, user settings>display ', [['blogs/inc/_core','_misc.funcs.php',5463]], 10],
'unautobrize_callback': ['unautobrize_callback', 'Removes <br>\'s from non code blocks ', [['blogs/inc/_core','_misc.funcs.php',353]], 0],
'xmlrpc_getpostcategory': ['xmlrpc_getpostcategory', 'Also used by post by mail ', [['blogs/inc/_core','_misc.funcs.php',2063]], 0],
'get_categories': ['get_categories', 'Get a list of used categories. ', [['blogs/inc/_core/model','_timer.class.php',254]], 1],
'evo_substr': ['evo_substr', 'mbstring wrapper for substr function ', [['blogs/inc/_core','_misc.funcs.php',729]], 26],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['blogs/inc/_core/model/db','_db.class.php',961]], 137],
'evo_error_handler': ['evo_error_handler', 'Handle fatal error in order to display info message when debug is OFF ', [['blogs/inc/_core','_misc.funcs.php',6606]], 0],
't_': ['t_', 'TRANSLATE! ', [['blogs/inc/locales','_locale.funcs.php',48],['blogs/inc/locales','_locale.funcs.php',240],['blogs/inc/skins/model','_skin.class.php',672],['blogs/inc/_core/model','_module.class.php',79],['blogs/rsc/js','blog_widgets.js',422],['blogs/inc/plugins','_plugin.class.php',2617]], 10201],
'generate_random_key': ['generate_random_key', 'Generate a valid key of size $length. ', [['blogs/inc/_core','_misc.funcs.php',4509]], 26],
'get_urls': ['get_urls', 'Get all urls from the given content ', [['blogs/inc/_core','_misc.funcs.php',2033]], 1],
'get_imgtags': ['get_imgtags', 'Get all "img" tags from the given content ', [['blogs/inc/_core','_misc.funcs.php',2017]], 1],
'compact_date': ['compact_date', 'Compact a date in a number keeping only integer value of the string ', [['blogs/inc/_core','_misc.funcs.php',4578]], 1],
'debug_fwrite': ['debug_fwrite', '', [['blogs/inc/_core','_misc.funcs.php',2233]], 2],
'is_valid_login': ['is_valid_login', 'Check if the login is valid (in terms of allowed chars) ', [['blogs/inc/_core','_misc.funcs.php',1908]], 2],
'datetime_to_iso8601': ['datetime_to_iso8601', 'Converts a MySQL DateTime to ISO 8601 date format. ', [['blogs/inc/_core','_misc.funcs.php',1534]], 6],
'get_requri': ['get_requri', 'Get $ReqPath, $ReqURI ', [['blogs/inc/_core','_misc.funcs.php',5496]], 2],
'debug_info': ['debug_info', 'Outputs debug info, according to {@link $debug} or $force param. This gets called typically at the end of the page. ', [['blogs/inc/_core','_misc.funcs.php',2757]], 2],
'ip2int': ['ip2int', 'Convert IP address to integer (get only 32bits of IPv6 address) ', [['blogs/inc/_core','_misc.funcs.php',6047]], 47],
'select': ['select', 'Set SELECT clause ', [['blogs/inc/_core/model/db','_sql.class.php',194],['blogs/inc/_core/model/db','_db.class.php',466],['blogs/inc/_core/ui/forms','_form.class.php',1820]], 461],
'escape': ['escape', 'Format a string correctly for safe insert under all PHP conditions ', [['blogs/inc/_core/model/db','_db.class.php',494]], 145],
'convert_charset': ['convert_charset', 'Convert a string from one charset to another. ', [['blogs/inc/locales','_locale.funcs.php',981]], 16],
'locale_datefmt': ['locale_datefmt', 'Returns the current locale\'s default date format ', [['blogs/inc/locales','_locale.funcs.php',399]], 54],
'inet_pton': ['inet_pton', 'Provide inet_pton for older versions of PHP (< 5.1.0 linux & < 5.3.0 windows) ', [['blogs/inc/_core','_misc.funcs.php',5947]], 3],
'mail_is_blocked': ['mail_is_blocked', 'Check if the email address is blocked ', [['blogs/inc/tools/model','_email.funcs.php',359]], 4],
'get_setting': ['get_setting', 'Get a setting. ', [['blogs/inc/collections/model','_blog.class.php',2021],['blogs/inc/skins/model','_skin.class.php',553],['blogs/inc/items/model','_item.class.php',6236]], 640],
'debug_fclose': ['debug_fclose', '', [['blogs/inc/_core','_misc.funcs.php',2242]], 0],
'format_phone': ['format_phone', 'Check the format of the phone number param and format it in a french number if it is. ', [['blogs/inc/_core','_misc.funcs.php',4602]], 0],
'xmlrpc_displayresult': ['xmlrpc_displayresult', 'Echo the XML-RPC call Result and optionally log into file ', [['blogs/inc/_core','_misc.funcs.php',2116]], 1],
'action_icon': ['action_icon', 'Create IMG tag for an action icon. ', [['blogs/inc/_core','_misc.funcs.php',3844],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',811]], 235],
'get_base_domain': ['get_base_domain', 'Get the base domain (without protocol and any subdomain) of an URL. ', [['blogs/inc/_core','_misc.funcs.php',4463]], 1],
'set_to_mem_cache': ['set_to_mem_cache', 'Set a value to a volatile/lossy cache. ', [['blogs/inc/_core','_misc.funcs.php',5303]], 1],
'delete': ['delete', 'Delete a hit. ', [['blogs/inc/sessions/model','_hitlist.class.php',47],['blogs/inc/plugins/model','_pluginsettings.class.php',83],['blogs/inc/settings/model','_abstractsettings.class.php',522],['blogs/inc/plugins/model','_pluginusersettings.class.php',107],['blogs/inc/_ext/pclzip','pclzip.lib.php',1007],['blogs/inc/users/model','_usersettings.class.php',212],['blogs/inc/users/model','_groupsettings.class.php',181],['blogs/inc/sessions/model','_session.class.php',452],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',168]], 90],
'antispam_block_request': ['antispam_block_request', 'Block request by IP address, Domain of current user or block because of a Plugin Bock by Plugin: e.g. GeoIP plugin can block the request if it comes from a blocked country ', [['blogs/inc/antispam/model','_antispam.funcs.php',479]], 22],
'split_outcode': ['split_outcode', 'Split a content by separators outside <code> and <pre> blocks ', [['blogs/inc/_core','_misc.funcs.php',946]], 3],
'sanitize_id_list': ['sanitize_id_list', 'Sanitize a comma-separated list of numbers (IDs) ', [['blogs/inc/_core','_misc.funcs.php',5674]], 4],
'format': ['format', 'Format a diff. ', [['blogs/inc/_core/model','_diff.class.php',813],['blogs/inc/_core/model','_diff.class.php',976]], 29],
'get_weekstartend': ['get_weekstartend', 'Get start and end day of a week, based on day f the week and start-of-week ', [['blogs/inc/_core','_misc.funcs.php',1587]], 2],
'evo_html_entity_decode': ['evo_html_entity_decode', 'Wrapper function for htmlentites to use the $evo_charset as default charset ', [['blogs/inc/_core','_misc.funcs.php',803]], 10],
'format_french_phone': ['format_french_phone', 'Format a string in a french phone number ', [['blogs/inc/_core','_misc.funcs.php',4659]], 3],
'get_icon': ['get_icon', 'Get properties of an icon. ', [['blogs/inc/_core','_misc.funcs.php',3989],['blogs/inc/files/model','_filetype.class.php',174],['blogs/inc/files/model','_file.class.php',955]], 313],
'evo_strpos': ['evo_strpos', 'mbstring wrapper for strpos function ', [['blogs/inc/_core','_misc.funcs.php',709]], 11],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['blogs/inc/_core','_misc.funcs.php',221]], 293],
'get_manual_url': ['get_manual_url', 'Get the manual url for the given topic ', [['blogs/inc/_core','_misc.funcs.php',4671]], 21],
'no_trailing_slash': ['no_trailing_slash', 'Remove trailing slash, if present ', [['blogs/inc/_core','_misc.funcs.php',5886]], 10],
'get_colored_login': ['get_colored_login', 'Get user\'s login with gender color ', [['blogs/inc/users/model','_user.class.php',1271]], 19],
'is_windows': ['is_windows', 'Are we running on a Windows server? ', [['blogs/inc/_core','_misc.funcs.php',1992]], 5],
'xmlrpc_getposttitle': ['xmlrpc_getposttitle', '', [['blogs/inc/_core','_misc.funcs.php',2048]], 2],
'echo_modalwindow_js': ['echo_modalwindow_js', 'Initialize JavaScript to build and open window ', [['blogs/inc/_core','_misc.funcs.php',6397]], 3],
'idna_decode': ['idna_decode', 'Decode IDNA puny-code ("xn--..") to UTF-8 name. ', [['blogs/inc/_core','_url.funcs.php',836]], 2],
'param_validate': ['param_validate', 'Validate variable ', [['blogs/inc/_core','_misc.funcs.php',1713]], 8],
'disp_cond': ['disp_cond', 'If first parameter evaluates to true printf() gets called using the first parameter as args and the second parameter as print-pattern ', [['blogs/inc/_core','_misc.funcs.php',3812]], 2],
'param_error': ['param_error', 'Add an error for a variable, either to the Form\'s field and/or the global {@link $Messages} object. ', [['blogs/inc/_core','_param.funcs.php',1519]], 132],
'faultstring': ['faultstring', 'Returns the error code of the response. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',2003]], 5],
'faultcode': ['faultcode', 'Returns the error code of the response. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',1993]], 15],
'gen_order_clause': ['gen_order_clause', 'Generate order by clause ', [['blogs/inc/_core','_misc.funcs.php',5357]], 7],
'implode_with_and': ['implode_with_and', 'Implode array( \'x\', \'y\', \'z\' ) to something like \'x, y and z\'. Useful for displaying list to the end user. ', [['blogs/inc/_core','_misc.funcs.php',4832]], 9],
'dump_queries': ['dump_queries', 'Displays all queries that have been executed ', [['blogs/inc/_core/model/db','_db.class.php',1293]], 2],
'format_to_js': ['format_to_js', 'Basic tidy up of strings ', [['blogs/inc/_core','_misc.funcs.php',5158]], 9],
'evo_strtolower': ['evo_strtolower', 'mbstring wrapper for strtolower function ', [['blogs/inc/_core','_misc.funcs.php',668]], 56],
'from': ['from', '', [['blogs/inc/_core/model/db','_sql.class.php',219]], 380],
'form_date': ['form_date', '', [['blogs/inc/_core','_misc.funcs.php',4361]], 27],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['blogs/inc/_core/model/db','_db.class.php',1041]], 88],
'rel_path_to_base': ['rel_path_to_base', 'Return the path without the leading {@link $basepath}, or if not below {@link $basepath}, just the basename of it. ', [['blogs/inc/files/model','_file.funcs.php',722]], 26],
'send_javascript_message': ['send_javascript_message', 'Send a result as javascript automatically includes any Messages ( @see Log::display() ) no return from function as it terminates processing ', [['blogs/inc/_core','_misc.funcs.php',5079]], 10],
'get_start_date_for_week': ['get_start_date_for_week', '', [['blogs/inc/_core','_misc.funcs.php',1563]], 3],
'is_color': ['is_color', 'Checks if the color is valid ', [['blogs/inc/_core','_misc.funcs.php',1960]], 1],
'check_post_max_size_exceeded': ['check_post_max_size_exceeded', 'Check if the current request exceed the post max size limit. If too much data was sent add an error message and call header redirect. ', [['blogs/inc/_core','_misc.funcs.php',3237]], 3],
'date_sprintf_callback': ['date_sprintf_callback', '', [['blogs/inc/_core','_misc.funcs.php',1434]], 0],
'date_sprintf': ['date_sprintf', 'Format dates into a string in a way similar to sprintf() ', [['blogs/inc/_core','_misc.funcs.php',1423]], 6],
'get_from_mem_cache': ['get_from_mem_cache', 'Get a value from a volatile/lossy cache. ', [['blogs/inc/_core','_misc.funcs.php',5266]], 1],
'hash_link_params': ['hash_link_params', 'Get a link line, based url hash combined with probability percentage in first column ', [['blogs/inc/_core','_misc.funcs.php',4967]], 2],
'apm_log_custom_metric': ['apm_log_custom_metric', 'Log a custom metric ', [['blogs/inc/_core','_misc.funcs.php',6307]], 1],
'echo_editable_column_js': ['echo_editable_column_js', 'Echo JavaScript to edit values of column in the table list ', [['blogs/inc/_core','_misc.funcs.php',6495]], 8],
'mail_autoinsert_user_data': ['mail_autoinsert_user_data', 'Autoinsert user\'s data into subject or message of the email ', [['blogs/inc/_core','_misc.funcs.php',3648]], 2],
'mysql2localetime': ['mysql2localetime', '', [['blogs/inc/_core','_misc.funcs.php',1285]], 0],
'check_perm': ['check_perm', 'Check permission on a message ', [['blogs/inc/messaging/model','_message.class.php',467],['blogs/inc/users/model','_group.class.php',257],['blogs/inc/users/model','_user.class.php',2022],['blogs/inc/links/model','_linkuser.class.php',51],['blogs/inc/links/model','_linkitem.class.php',54],['blogs/inc/_core/model','_module.class.php',233],['blogs/inc/messaging/model','_thread.class.php',476],['blogs/inc/links/model','_linkcomment.class.php',53],['blogs/inc/sessions/model','_goal.class.php',92]], 967],
'get_coll_sort_options': ['get_coll_sort_options', 'Get available cort oprions for blogs ', [['blogs/inc/_core','_misc.funcs.php',5210]], 4],
'evo_bytes': ['evo_bytes', 'Get number of bytes in $string. This works around mbstring.func_overload, if activated for strlen/mb_strlen. ', [['blogs/inc/_core','_misc.funcs.php',651]], 4],
'modules_call_method': ['modules_call_method', 'Call a method for all modules in a row ', [['blogs/inc/_core','_misc.funcs.php',49]], 26],
'mail_encode_header_string': ['mail_encode_header_string', 'Encode to RFC 1342 "Representation of Non-ASCII Text in Internet Message Headers" ', [['blogs/inc/_core','_misc.funcs.php',3285]], 3],
'zeroise': ['zeroise', 'Add leading zeroes to a number when necessary. ', [['blogs/inc/_core','_misc.funcs.php',366]], 14],
'trailing_slash': ['trailing_slash', 'Add a trailing slash, if none present ', [['blogs/inc/_core','_misc.funcs.php',5867]], 22],
'date_i18n': ['date_i18n', 'Date internationalization: same as date() formatting but with i18n support. ', [['blogs/inc/_core','_misc.funcs.php',1334]], 23],
'dbsave': ['dbsave', 'Updates session data in database. ', [['blogs/inc/sessions/model','_session.class.php',472],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',309]], 49],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['blogs/inc/_core','_url.funcs.php',507]], 241],
'get_samedomain_htsrv_url': ['get_samedomain_htsrv_url', 'Get htsrv url on the same domain as the http request came from _init_hit.inc.php should be called before this call, because ReqHost and ReqPath must be initialized ', [['blogs/inc/_core','_misc.funcs.php',5601]], 34],
'process': ['process', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15198],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15282],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15443]], 9],
'autobrize': ['autobrize', '', [['blogs/inc/_core','_misc.funcs.php',325]], 0],
'set': ['set', 'Set param value ', [['blogs/inc/users/model','_userfield.class.php',243],['blogs/inc/generic/model','_genericordered.class.php',75],['blogs/inc/users/model','_group.class.php',204],['blogs/inc/items/model','_itemlight.class.php',1258],['blogs/inc/plugins/model','_pluginsettings.class.php',70],['blogs/inc/widgets/model','_widget.class.php',321],['blogs/inc/regional/model','_region.class.php',102],['blogs/inc/regional/model','_city.class.php',110],['blogs/inc/collections/model','_blog.class.php',1102],['blogs/inc/settings/model','_abstractsettings.class.php',446],['blogs/inc/plugins/model','_pluginusersettings.class.php',82],['blogs/inc/users/model','_user.class.php',1861],['blogs/inc/generic/model','_genericcategory.class.php',100],['blogs/inc/tools/model','_emailaddress.class.php',85],['blogs/inc/users/model','_usersettings.class.php',187],['blogs/inc/regional/model','_country.class.php',106],['blogs/inc/comments/model','_comment.class.php',315],['blogs/inc/users/model','_groupsettings.class.php',140],['blogs/inc/cron/model','_cronjob.class.php',79],['blogs/inc/items/model','_item.class.php',4497],['blogs/inc/files/model','_filetype.class.php',149],['blogs/inc/users/model','_userfieldgroup.class.php',92],['blogs/inc/sessions/model','_session.class.php',420],['blogs/plugins','_calendar.plugin.php',530],['blogs/inc/slugs/model','_slug.class.php',80],['blogs/inc/regional/model','_currency.class.php',96],['blogs/inc/messaging/model','_thread.class.php',185],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',614],['blogs/inc/regional/model','_subregion.class.php',119],['blogs/inc/antispam/model','_iprange.class.php',81],['blogs/inc/sessions/model','_goal.class.php',199]], 1121],
'make_clickable': ['make_clickable', 'Make links clickable in a given text. ', [['blogs/inc/_core','_misc.funcs.php',1027]], 4],
'mysql2localedatetime': ['mysql2localedatetime', '', [['blogs/inc/_core','_misc.funcs.php',1290]], 13],
'debug_get_backtrace': ['debug_get_backtrace', 'Get a function trace from {@link debug_backtrace()} as html table. ', [['blogs/inc/_core','_misc.funcs.php',2335]], 5],
'evo_htmlspecialchars': ['evo_htmlspecialchars', 'Wrapper function for htmlspecialchars to use the $evo_charset as default charset ', [['blogs/inc/_core','_misc.funcs.php',759]], 138],
'generate_link_from_params': ['generate_link_from_params', 'Generate a link from params (credits stuff) ', [['blogs/inc/_core','_misc.funcs.php',5026]], 2],
'date_add_days': ['date_add_days', 'Add given # of days to a timestamp ', [['blogs/inc/_core','_misc.funcs.php',1410]], 0],
'evo_htmlentities': ['evo_htmlentities', 'Wrapper function for htmlentites to use the $evo_charset as default charset ', [['blogs/inc/_core','_misc.funcs.php',781]], 20],
'evo_setcookie': ['evo_setcookie', 'Send a cookie (@see setcookie() for more details) ', [['blogs/inc/_core','_misc.funcs.php',6322]], 8],
'htmlspecialchars_decode': ['htmlspecialchars_decode', '', [['blogs/rsc/js/multiupload','fileuploader.js',74],['blogs/inc/_core','_misc.funcs.php',6144]], 13],
'b2evonet_get_updates': ['b2evonet_get_updates', 'Get updates from b2evolution.net ', [['blogs/inc/dashboard/model','_dashboard.funcs.php',22]], 4],
'mysql2timestamp': ['mysql2timestamp', 'Convert a MYSQL date to a UNIX timestamp. ', [['blogs/inc/_core','_misc.funcs.php',1249]], 14],
'ready': ['ready', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',967]], 56],
'locale_temp_switch': ['locale_temp_switch', 'Temporarily switch to another locale ', [['blogs/inc/locales','_locale.funcs.php',264],['blogs/inc/items/model','_itemlight.class.php',858]], 58],
'json_encode': ['json_encode', 'Create json_encode function if it does not exist ( PHP < 5.2.0 ) ', [['blogs/inc/_core','_misc.funcs.php',5704]], 4],
'is_ajax_content': ['is_ajax_content', 'Check if current request is AJAX Used in order to get only content of the requested page ', [['blogs/inc/_core','_misc.funcs.php',6253]], 31],
'xmlrpc_removepostdata': ['xmlrpc_removepostdata', '', [['blogs/inc/_core','_misc.funcs.php',2107]], 3],
'setsize': ['setsize', '', [['blogs/rsc/js/colorbox','jquery.colorbox.js',131]], 18],
'where': ['where', '', [['blogs/inc/_core/model/db','_sql.class.php',240]], 238],
'make_rel_links_abs': ['make_rel_links_abs', 'Make links in $s absolute. ', [['blogs/inc/_core','_url.funcs.php',727]], 1],
'header_redirect': ['header_redirect', 'Sends HTTP header to redirect to the previous location (which can be given as function parameter, GET parameter (redirect_to), is taken from {@link Hit::$referer} or {@link $baseurl}). ', [['blogs/inc/_core','_template.funcs.php',110]], 373],
'update_user_email_counter': ['update_user_email_counter', 'Update the counter of email sending of the user ', [['blogs/inc/users/model','_user.funcs.php',2257]], 1],
'set_max_execution_time': ['set_max_execution_time', 'Set max execution time ', [['blogs/inc/_core','_misc.funcs.php',5658]], 20],
'button_class': ['button_class', 'Get a button class name depending on template ', [['blogs/inc/_core','_misc.funcs.php',6347]], 40],
'unset_from_mem_cache': ['unset_from_mem_cache', 'Remove a given key from the volatile/lossy cache. ', [['blogs/inc/_core','_misc.funcs.php',5338]], 0],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['blogs/inc/users/model','_user.funcs.php',60]], 190],
'update_sender': ['update_sender', 'Update notification sender\'s info from General settings ', [['blogs/inc/users/model','_user.class.php',4627]], 2],
'require_login': ['require_login', 'Does the given url require logged in user ', [['blogs/inc/_core','_misc.funcs.php',4790]], 2],
'mysql2localedatetime_spans': ['mysql2localedatetime_spans', '', [['blogs/inc/_core','_misc.funcs.php',1295]], 24],
'save_to_file': ['save_to_file', 'Save text data to file, create target file if it doesn\'t exist ', [['blogs/inc/_core','_misc.funcs.php',6213]], 12],
'is_number': ['is_number', 'Checks if the param is an integer (no float, e.g. 3.14). ', [['blogs/inc/_core','_misc.funcs.php',1777]], 5],
'xmlrpc_logresult': ['xmlrpc_logresult', 'Log the XML-RPC call Result into LOG object ', [['blogs/inc/_core','_misc.funcs.php',2175]], 3],
'is_email': ['is_email', 'Check that email address looks valid. ', [['blogs/inc/_core','_misc.funcs.php',1789]], 12],
'resolve_link_params': ['resolve_link_params', 'Resolve a link based on params (credits stuff) ', [['blogs/inc/_core','_misc.funcs.php',4921]], 3],
'display_param_link': ['display_param_link', 'Credits stuff. ', [['blogs/inc/_core','_misc.funcs.php',4912]], 4],
'get_file_permissions_message': ['get_file_permissions_message', 'Get an error message text about file permissions ', [['blogs/inc/_core','_misc.funcs.php',6273]], 2],
'get': ['get', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',941],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15011],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/media/js','media.js',7],['blogs/inc/links/model','_linkowner.class.php',221],['blogs/inc/_core/model/db','_sql.class.php',64],['blogs/inc/plugins/model','_pluginsettings.class.php',58],['blogs/inc/collections/model','_blog.class.php',1822],['blogs/inc/settings/model','_generalsettings.class.php',383],['blogs/inc/settings/model','_abstractsettings.class.php',271],['blogs/inc/plugins/model','_pluginusersettings.class.php',58],['blogs/inc/users/model','_user.class.php',1126],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_gzip.js',38],['blogs/inc/users/model','_usersettings.class.php',151],['blogs/inc/comments/model','_comment.class.php',301],['blogs/inc/users/model','_groupsettings.class.php',124],['blogs/inc/cron/model','_cronjob.class.php',104],['blogs/inc/items/model','_item.class.php',5742],['blogs/inc/sessions/model','_session.class.php',397],['blogs/inc/links/model','_linkuser.class.php',141],['blogs/inc/links/model','_linkitem.class.php',155],['blogs/inc/slugs/model','_slug.class.php',68],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',574],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['blogs/inc/antispam/model','_iprange.class.php',69],['blogs/inc/links/model','_linkcomment.class.php',132],['blogs/inc/files/model','_file.class.php',532]], 2417],
'current_charset_to_utf8': ['current_charset_to_utf8', 'A helper function to conditionally convert a string from current charset to UTF-8 ', [['blogs/inc/_core','_misc.funcs.php',5792]], 1],
'date_ago': ['date_ago', 'Get date name when date was happened ', [['blogs/inc/_core','_misc.funcs.php',1442]], 1],
'replace_content': ['replace_content', 'Replace content, Used for function callback_on_non_matching_blocks(), because there is different order of params ', [['blogs/inc/_core','_misc.funcs.php',910]], 4],
'imgsize': ['imgsize', 'Get the size of an image file ', [['blogs/inc/files/model','_file.funcs.php',328]], 6],
'closemodalwindow': ['closemodalwindow', 'Close modal window ', [['blogs/inc/_core','_misc.funcs.php',6463]], 3],
'load_funcs': ['load_funcs', '', [['blogs/inc/_core','_misc.funcs.php',115]], 214],
'pause': ['pause', 'Pauses a timer category. It may me resumed later on, see {@link resume()}. ', [['blogs/inc/_core/model','_timer.class.php',114]], 71],
'evo_flush': ['evo_flush', 'Flush the output buffer ', [['blogs/inc/_core','_misc.funcs.php',6282]], 156],
'load_class': ['load_class', 'Load class file ', [['blogs/inc/_core','_class4.funcs.php',28],['blogs/inc/_core','_class5.funcs.php',79]], 408],
'is_phone': ['is_phone', 'Checks if the phone number is valid ', [['blogs/inc/_core','_misc.funcs.php',1867]], 1],
'get_template': ['get_template', 'Those templates are used for example by the messaging screens. ', [['blogs/skins/bootstrap','_skin.class.php',123],['blogs/skins_adm/evo','_adminUI.class.php',144],['blogs/skins_adm','_adminUI_general.class.php',855],['blogs/skins_adm/chicago','_adminUI.class.php',167],['blogs/inc/skins/model','_skin.class.php',721],['blogs/skins_adm/bootstrap','_adminUI.class.php',181],['blogs/skins/pureforums','_skin.class.php',360],['blogs/inc/_core/ui','_menu.class.php',408]], 63],
'get_secure_htsrv_url': ['get_secure_htsrv_url', 'Get secure htsrv url on the same domain as the http request came from It is important on login and register calls _init_hit.inc.php should be called before this call, because ReqHost and ReqPath must be initialized ', [['blogs/inc/_core','_misc.funcs.php',5647]], 29],
'get_messages': ['get_messages', 'Returns array of messages of a single category or group of categories. ', [['blogs/inc/_core/model','_log.class.php',510],['blogs/inc/_core/model','_log.class.php',628]], 6],
'replace_content_outcode': ['replace_content_outcode', 'Replace content outside blocks <code></code> & <pre></pre> ', [['blogs/inc/_core','_misc.funcs.php',882]], 14],
'on': ['on', '', [['blogs/rsc/js/bootstrap','typeahead.bundle.js',739]], 153],
'mail_template': ['mail_template', 'Get a mail message text by template name ', [['blogs/inc/_core','_misc.funcs.php',3669]], 6],
'add_icon': ['add_icon', 'Add an icon with his legend to the icons array ', [['blogs/inc/_core/ui','_iconlegend.class.php',51]], 1],
'remove_seconds': ['remove_seconds', 'Get datetime rounded to lower minute. This is meant to remove seconds and leverage MySQL\'s query cache by having SELECT queries remain identical for 60 seconds instead of just 1. ', [['blogs/inc/_core','_misc.funcs.php',1613]], 6],
'display': ['display', 'Display the widget! ', [['blogs/inc/widgets/widgets','_menu_link.widget.php',207],['blogs/inc/widgets/widgets','_msg_menu_link.widget.php',183],['blogs/inc/widgets/widgets','_coll_title.widget.php',80],['blogs/inc/widgets/widgets','_coll_tagline.widget.php',80],['blogs/inc/widgets/widgets','_user_login.widget.php',196],['blogs/inc/widgets/widgets','_online_users.widget.php',96],['blogs/inc/widgets/widgets','_free_html.widget.php',111],['blogs/inc/_core/model/db','_sql.class.php',81],['blogs/inc/widgets/widgets','_coll_common_links.widget.php',168],['blogs/inc/widgets/widgets','_coll_media_index.widget.php',169],['blogs/inc/widgets/widgets','_coll_item_list.widget.php',238],['blogs/inc/widgets/model','_widget.class.php',453],['blogs/inc/widgets/widgets','_coll_longdesc.widget.php',100],['blogs/inc/_core/model','_log.class.php',292],['blogs/inc/_core/model','_log.class.php',618],['blogs/inc/widgets/widgets','_mobile_skin_switcher.widget.php',106],['blogs/inc/_core/ui/results','_results.class.php',880],['blogs/inc/widgets/widgets','_coll_search_form.widget.php',115],['blogs/inc/widgets/widgets','_coll_xml_feeds.widget.php',121],['blogs/inc/widgets/widgets','_coll_category_list.widget.php',145],['blogs/plugins','_calendar.plugin.php',536],['blogs/inc/widgets/widgets','_user_avatars.widget.php',144],['blogs/inc/widgets/widgets','_coll_logo.widget.php',109],['blogs/inc/widgets/widgets','_colls_list_public.widget.php',122],['blogs/inc/widgets/widgets','_user_tools.widget.php',252],['blogs/inc/widgets/widgets','_coll_tag_cloud.widget.php',157],['blogs/inc/widgets/widgets','_coll_featured_intro.widget.php',147],['blogs/inc/widgets/widgets','_colls_list_owner.widget.php',122],['blogs/inc/widgets/widgets','_coll_comment_list.widget.php',129],['blogs/inc/_core/model','_messages.class.php',190],['blogs/inc/widgets/widgets','_coll_avatar.widget.php',94]], 107],
'is_create_action': ['is_create_action', '', [['blogs/inc/_core','_misc.funcs.php',4551]], 25],
'array_fill_keys': ['array_fill_keys', 'Provide array_fill_keys for older versions of PHP (< 5.2.0) ', [['blogs/inc/_core','_misc.funcs.php',6121]], 1],
'is_url': ['is_url', 'Checks if the url is valid ', [['blogs/inc/_core','_misc.funcs.php',1879]], 1],
'apm_name_transaction': ['apm_name_transaction', 'Name the transaction for the APM. This avoids that every request be called \'index.php\' or \'admin.php\' or \'cron_exec.php\' ', [['blogs/inc/_core','_misc.funcs.php',6293]], 2],
'locale_timefmt': ['locale_timefmt', 'Returns the current locale\'s default time format ', [['blogs/inc/locales','_locale.funcs.php',418]], 15],
'iso8601_to_datetime': ['iso8601_to_datetime', 'Converts an ISO 8601 date to MySQL DateTime format. ', [['blogs/inc/_core','_misc.funcs.php',1522]], 2],
'param_cookie': ['param_cookie', 'Get a param from cookie. ', [['blogs/inc/_core','_param.funcs.php',508]], 21],
'make_clickable_callback': ['make_clickable_callback', 'Callback function for {@link make_clickable()}. ', [['blogs/plugins','_autolinks.plugin.php',402],['blogs/inc/_core','_misc.funcs.php',1190]], 0],
'get_ip_list': ['get_ip_list', 'Get list of client IP addresses from REMOTE_ADDR and HTTP_X_FORWARDED_FOR, in this order. \'\' is used when no IP could be found. ', [['blogs/inc/_core','_misc.funcs.php',4367]], 12],
'get_duration_title': ['get_duration_title', 'Get a title of duration ', [['blogs/inc/_core','_misc.funcs.php',1666]], 2],
'strmaxwords': ['strmaxwords', 'Crop string to maxwords preserving tags. ', [['blogs/inc/_core','_misc.funcs.php',496]], 1],
'generate_random_passwd': ['generate_random_passwd', 'Generate a random password with no ambiguous chars ', [['blogs/inc/_core','_misc.funcs.php',4530]], 1],
'shutdown': ['shutdown', 'Shutdown function: save HIT and update session! ', [['blogs/inc/_core','_misc.funcs.php',122]], 0],
'ts_': ['ts_', 'Translate and escape single quotes. ', [['blogs/inc/locales','_locale.funcs.php',247],['blogs/inc/skins/model','_skin.class.php',703],['blogs/inc/plugins','_plugin.class.php',2665]], 242],
'find': ['find', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',12955],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',16252]], 285],
'content': ['content', 'Template function: display content of comment ', [['blogs/inc/comments/model','_comment.class.php',2533],['blogs/inc/items/model','_item.class.php',1741]], 8],
'locale_dialing_code': ['locale_dialing_code', 'Get the locale country dialing code ', [['blogs/inc/locales','_locale.funcs.php',476]], 1],
't': ['t', '', [['blogs/rsc/js','jquery.js',8659]], 92],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['blogs/inc/items/model','_itemlist.class.php',256],['blogs/inc/items/model','_itemlistlight.class.php',751],['blogs/inc/_core/model/db','_db.class.php',761],['blogs/inc/users/model','_userlist.class.php',474],['blogs/inc/_core/ui/results','_results.class.php',439],['blogs/inc/comments/model','_commentlist.class.php',515]], 972],
'debug_fopen': ['debug_fopen', '', [['blogs/inc/_core','_misc.funcs.php',2222]], 0],
'emailskin_include': ['emailskin_include', 'Include email template from folder /skins_email/custom/ or /skins_email/ ', [['blogs/inc/_core','_misc.funcs.php',3767]], 70],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['blogs/inc/locales','_pofile.class.php',267],['blogs/inc/_core/model/db','_db.class.php',503]], 791],
'is_word': ['is_word', 'Checks if the word is valid ', [['blogs/inc/_core','_misc.funcs.php',1896]], 1],
'get_atags': ['get_atags', 'Get all "a" tags from the given content ', [['blogs/inc/_core','_misc.funcs.php',2001]], 1],
'evofadefailure': ['evofadefailure', 'Fades the relevant object to provide feedback, in case of failure. ', [['blogs/rsc/js','functions.js',380]], 3],
'get_count': ['get_count', 'Get number of timer resumes (includes start). ', [['blogs/inc/_core/model','_timer.class.php',194]], 4],
'user_get_notification_sender': ['user_get_notification_sender', 'Get setting\'s value from General or User\'s settings ', [['blogs/inc/_core','_misc.funcs.php',3325]], 4],
'param_check_not_empty': ['param_check_not_empty', '', [['blogs/inc/_core','_param.funcs.php',575]], 38],
'get_linked_ip_list': ['get_linked_ip_list', 'Get list of IP addresses with link to back-office page if User has an access ', [['blogs/inc/_core','_misc.funcs.php',4423]], 4],
'ob_get_clean': ['ob_get_clean', '', [], 14],
'strtolower': ['strtolower', '', [], 168],
'ob_end_flush': ['ob_end_flush', '', [], 10],
'file_exists': ['file_exists', '', [], 121],
'preg_quote': ['preg_quote', '', [], 24],
'implode': ['implode', '', [], 456],
'array_map': ['array_map', '', [], 26],
'var_export': ['var_export', '', [], 48],
'in_array': ['in_array', '', [], 335],
'htmlentities': ['htmlentities', '', [], 3],
'substr_count': ['substr_count', '', [], 9],
'uniqid': ['uniqid', '', [], 10],
'strip_tags': ['strip_tags', '', [], 61],
'ob_end_clean': ['ob_end_clean', '', [], 12],
'each': ['each', '', [], 579],
'ob_get_level': ['ob_get_level', '', [], 1],
'extension_loaded': ['extension_loaded', '', [], 30],
'next': ['next', '', [], 106],
'stristr': ['stristr', '', [], 18],
'array_slice': ['array_slice', '', [], 41],
'str_ireplace': ['str_ireplace', '', [], 3],
'dirname': ['dirname', '', [], 186],
'ini_set': ['ini_set', '', [], 29],
'func_num_args': ['func_num_args', '', [], 8],
'ob_start': ['ob_start', '', [], 28],
'html_entity_decode': ['html_entity_decode', '', [], 4],
'array_keys': ['array_keys', '', [], 69],
'pcntl_fork': ['pcntl_fork', '', [], 2],
'reset': ['reset', '', [], 55],
'mt_rand': ['mt_rand', '', [], 23],
'pack': ['pack', '', [], 30],
'sha1': ['sha1', '', [], 4],
'fwrite': ['fwrite', '', [], 67],
'preg_split': ['preg_split', '', [], 29],
'mail': ['mail', '', [], 17],
'time': ['time', '', [], 57],
'ctype_space': ['ctype_space', '', [], 7],
'strrpos': ['strrpos', '', [], 28],
'headers_sent': ['headers_sent', '', [], 4],
'func_get_args': ['func_get_args', '', [], 24],
'htmlspecialchars': ['htmlspecialchars', '', [], 3],
'is_callable': ['is_callable', '', [], 6],
'ob_get_contents': ['ob_get_contents', '', [], 7],
'array_filter': ['array_filter', '', [], 3],
'ord': ['ord', '', [], 58],
'mb_substr': ['mb_substr', '', [], 2],
'substr_replace': ['substr_replace', '', [], 8],
'strval': ['strval', '', [], 7],
'call_user_func_array': ['call_user_func_array', '', [], 12],
'strtoupper': ['strtoupper', '', [], 34],
'touch': ['touch', '', [], 6],
'defined': ['defined', '', [], 874],
'chmod': ['chmod', '', [], 35],
'realpath': ['realpath', '', [], 9],
'fclose': ['fclose', '', [], 96],
'posix_getpid': ['posix_getpid', '', [], 1],
'header': ['header', '', [], 85],
'posix_setsid': ['posix_setsid', '', [], 1],
'error_log': ['error_log', '', [], 54],
'floatval': ['floatval', '', [], 2],
'get_class_vars': ['get_class_vars', '', [], 1],
'rand': ['rand', '', [], 22],
'strpos': ['strpos', '', [], 280],
'array_flip': ['array_flip', '', [], 3],
'array_merge': ['array_merge', '', [], 500],
'is_string': ['is_string', '', [], 58],
'ip2long': ['ip2long', '', [], 8],
'count': ['count', '', [], 754],
'preg_replace': ['preg_replace', '', [], 281],
'preg_match': ['preg_match', '', [], 363],
'get_object_vars': ['get_object_vars', '', [], 4],
'is_array': ['is_array', '', [], 243],
'preg_match_all': ['preg_match_all', '', [], 33],
'parse_url': ['parse_url', '', [], 24],
'tempnam': ['tempnam', '', [], 9],
'date': ['date', '', [], 361],
'rawurlencode': ['rawurlencode', '', [], 100],
'strcasecmp': ['strcasecmp', '', [], 25],
'unlink': ['unlink', '', [], 59],
'set_time_limit': ['set_time_limit', '', [], 1],
'mb_strtolower': ['mb_strtolower', '', [], 1],
'get_class': ['get_class', '', [], 22],
'call_user_func': ['call_user_func', '', [], 10],
'array_search': ['array_search', '', [], 30],
'debug_backtrace': ['debug_backtrace', '', [], 3],
'stripslashes': ['stripslashes', '', [], 8],
'mb_strlen': ['mb_strlen', '', [], 4],
'ceil': ['ceil', '', [], 36],
'function_exists': ['function_exists', '', [], 130],
'array_unshift': ['array_unshift', '', [], 77],
'is_scalar': ['is_scalar', '', [], 13],
'array_key_exists': ['array_key_exists', '', [], 36],
'is_numeric': ['is_numeric', '', [], 15],
'gettype': ['gettype', '', [], 82],
'flush': ['flush', '', [], 4],
'stripos': ['stripos', '', [], 1],
'version_compare': ['version_compare', '', [], 83],
'substr': ['substr', '', [], 657],
'rtrim': ['rtrim', '', [], 11],
'explode': ['explode', '', [], 249],
'log': ['log', '', [], 56],
'headers_list': ['headers_list', '', [], 1],
'array_pop': ['array_pop', '', [], 30],
'str_replace': ['str_replace', '', [], 403],
'get_html_translation_table': ['get_html_translation_table', '', [], 3],
'preg_replace_callback': ['preg_replace_callback', '', [], 28],
'register_shutdown_function': ['register_shutdown_function', '', [], 8],
'mktime': ['mktime', '', [], 44],
'create_function': ['create_function', '', [], 12],
'ini_get': ['ini_get', '', [], 38],
'is_writable': ['is_writable', '', [], 10],
'number_format': ['number_format', '', [], 17],
'is_object': ['is_object', '', [], 57],
'base64_encode': ['base64_encode', '', [], 18],
'phpversion': ['phpversion', '', [], 18],
'str_pad': ['str_pad', '', [], 17],
'strtr': ['strtr', '', [], 14],
'key': ['key', '', [], 154],
'unpack': ['unpack', '', [], 14],
'serialize': ['serialize', '', [], 109],
'array_shift': ['array_shift', '', [], 51],
'array_unique': ['array_unique', '', [], 30],
'gmdate': ['gmdate', '', [], 18],
'is_null': ['is_null', '', [], 251],
'octdec': ['octdec', '', [], 11],
'array_walk_recursive': ['array_walk_recursive', '', [], 4],
'str_repeat': ['str_repeat', '', [], 17],
'intval': ['intval', '', [], 127],
'mb_strpos': ['mb_strpos', '', [], 1],
'var_dump': ['var_dump', '', [], 4],
'is_float': ['is_float', '', [], 2],
'setcookie': ['setcookie', '', [], 11],
'trim': ['trim', '', [], 351],
'posix_kill': ['posix_kill', '', [], 1],
'floor': ['floor', '', [], 79]};
CLASS_DATA={
'iconlegend': ['iconlegend', 'Display icon legend. ', [['blogs/inc/_core/ui','_iconlegend.class.php',35]], 0],
'hitlist': ['hitlist', 'A list of hits. Provides functions for maintaining and extraction of Hits. ', [['blogs/inc/sessions/model','_hitlist.class.php',38]], 8],
'sql': ['sql', 'SQL class: help constructing queries ', [['blogs/inc/_core/model/db','_sql.class.php',32]], 273]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['blogs/inc','_main.inc.php',55],['blogs/install','index.php',25],['blogs/install','debug.php',22]], 827]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Jul  5 12:18:44 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
