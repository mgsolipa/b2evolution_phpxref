<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /blogs/inc/messaging/model/_thread.class.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Jul  5 12:18:44 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='blogs/inc/messaging/model';
filename='_thread.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/blogs/inc/messaging/model/</a> -> <a href="_thread.class.php.html">_thread.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_thread.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_thread.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file is part of b2evolution - {@link http://b2evolution.net/}</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> * See also {@link http://sourceforge.net/projects/evocms/}.</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> *</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * @copyright (c)2009-2014 by Francois PLANQUE - {@link http://fplanque.net/}</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * Parts of this file are copyright (c)2009 by The Evo Factory - {@link http://www.evofactory.com/}.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * Released under GNU GPL License - {@link http://b2evolution.net/about/license.html}</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> *</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * {@internal Open Source relicensing agreement:</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * The Evo Factory grants Francois PLANQUE the right to license</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * The Evo Factory's contributions to this file and the b2evolution project</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * under any OSI approved OSS license (http://www.opensource.org/licenses/).</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> * }}</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> *</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> * @package messaging</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> *</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * {@internal Below is a list of authors who have contributed to design/coding of this file: }}</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @author efy-maxim: Evo Factory / Maxim.</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @author fplanque: Francois Planque.</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @version $Id: _thread.class.php 6135 2014-03-08 07:54:05Z manuel $</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '_core/model/dataobjects/_dataobject.class.php', 'DataObject' );
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Thread Class</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Thread')" href="../../../../_classes/thread.html" onMouseOver="classPopup(event,'thread')">Thread</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('DataObject')" href="../../../../_classes/dataobject.html" onMouseOver="classPopup(event,'dataobject')">DataObject</a>
<a name="l34"><span class="linenum">  34</span></a>  {
<a name="l35"><span class="linenum">  35</span></a>      var <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a> = '';
<a name="l36"><span class="linenum">  36</span></a>      var <a class="var it3065" onMouseOver="hilite(3065)" onMouseOut="lolite()" onClick="logVariable('datemodified')" href="../../../../_variables/datemodified.html">$datemodified</a>;
<a name="l37"><span class="linenum">  37</span></a>      var <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> = '';
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>      <span class="comment">/**</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     * Number unread messages</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * @var integer</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     */</span>
<a name="l43"><span class="linenum">  43</span></a>      var <a class="var it7984" onMouseOver="hilite(7984)" onMouseOut="lolite()" onClick="logVariable('num_unread_messages')" href="../../../../_variables/num_unread_messages.html">$num_unread_messages</a>;
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>      <span class="comment">/**</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     * Recipients IDs lazy filled</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     *</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * @var array</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     */</span>
<a name="l50"><span class="linenum">  50</span></a>      var <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a>;
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>      <span class="comment">/**</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * Constructor</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * @param db_row database row</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     */</span>
<a name="l57"><span class="linenum">  57</span></a>  	function <a class="function" onClick="logFunction('Thread')" href="../../../../_functions/thread.html" onMouseOver="funcPopup(event,'thread')">Thread</a>( <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../../_variables/db_row.html">$db_row</a> = NULL )
<a name="l58"><span class="linenum">  58</span></a>      {
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">        // Call parent constructor:</span>
<a name="l60"><span class="linenum">  60</span></a>          parent::<a class="function" onClick="logFunction('DataObject')" href="../../../../_functions/dataobject.html" onMouseOver="funcPopup(event,'dataobject')">DataObject</a>( 'T_messaging__thread', 'thrd_', 'thrd_ID', 'datemodified' );
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_restrictions')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/delete_restrictions.html">delete_restrictions</a> = array();
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a> = array();
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>          if( <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../../_variables/db_row.html">$db_row</a> != NULL )
<a name="l66"><span class="linenum">  66</span></a>          {
<a name="l67"><span class="linenum">  67</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>           = <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('thrd_ID')" class="var it9014" onMouseOver="hilite(9014)" onMouseOut="lolite()" href="../../../../_variables/thrd_ID.html">thrd_ID</a>;
<a name="l68"><span class="linenum">  68</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/title.html">title</a>        = <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('thrd_title')" class="var it9014" onMouseOver="hilite(9014)" onMouseOut="lolite()" href="../../../../_variables/thrd_title.html">thrd_title</a>;
<a name="l69"><span class="linenum">  69</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/datemodified.html">datemodified</a> = <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('thrd_datemodified')" class="var it9014" onMouseOver="hilite(9014)" onMouseOut="lolite()" href="../../../../_variables/thrd_datemodified.html">thrd_datemodified</a>;
<a name="l70"><span class="linenum">  70</span></a>          }
<a name="l71"><span class="linenum">  71</span></a>          else
<a name="l72"><span class="linenum">  72</span></a>          {    // <span class="keyword">New </span><a class="class" onClick="logClass('Thread')" href="../../../../_classes/thread.html" onMouseOver="classPopup(event,'thread')">Thread</a>
<a name="l73"><span class="linenum">  73</span></a>              global <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>;
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">            // check if there is unsaved Thread object stored in Session</span>
<a name="l76"><span class="linenum">  76</span></a>              <a class="var it7986" onMouseOver="hilite(7986)" onMouseOut="lolite()" onClick="logVariable('unsaved_Thread')" href="../../../../_variables/unsaved_Thread.html">$unsaved_Thread</a> = <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'core.unsaved_Thread' );
<a name="l77"><span class="linenum">  77</span></a>              if( !empty( <a class="var it7986" onMouseOver="hilite(7986)" onMouseOut="lolite()" onClick="logVariable('unsaved_Thread')" href="../../../../_variables/unsaved_Thread.html">$unsaved_Thread</a> ) )
<a name="l78"><span class="linenum">  78</span></a>              {    // unsaved thread exists, delete it from Session
<a name="l79"><span class="linenum">  79</span></a>                  <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>( 'core.unsaved_Thread' );
<a name="l80"><span class="linenum">  80</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/title.html">title</a> = <a class="var it7986" onMouseOver="hilite(7986)" onMouseOut="lolite()" onClick="logVariable('unsaved_Thread')" href="../../../../_variables/unsaved_Thread.html">$unsaved_Thread</a>['title'];
<a name="l81"><span class="linenum">  81</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('text')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/text.html">text</a> = <a class="var it7986" onMouseOver="hilite(7986)" onMouseOut="lolite()" onClick="logVariable('unsaved_Thread')" href="../../../../_variables/unsaved_Thread.html">$unsaved_Thread</a>['text'];
<a name="l82"><span class="linenum">  82</span></a>              }
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>              <a class="var it5861" onMouseOver="hilite(5861)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../../_variables/logins.html">$logins</a> = array();
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>              <a class="var it1892" onMouseOver="hilite(1892)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../../_variables/user_login.html">$user_login</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_login', 'string', '' );
<a name="l87"><span class="linenum">  87</span></a>              if( !empty( <a class="var it1892" onMouseOver="hilite(1892)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../../_variables/user_login.html">$user_login</a> ) )
<a name="l88"><span class="linenum">  88</span></a>              {    // Set recipient list from <a class="var it1892" onMouseOver="hilite(1892)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../../_variables/user_login.html">$user_login</a>
<a name="l89"><span class="linenum">  89</span></a>                  <a class="var it5861" onMouseOver="hilite(5861)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../../_variables/logins.html">$logins</a>[] = <a class="var it1892" onMouseOver="hilite(1892)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../../_variables/user_login.html">$user_login</a>;
<a name="l90"><span class="linenum">  90</span></a>              }
<a name="l91"><span class="linenum">  91</span></a>              else
<a name="l92"><span class="linenum">  92</span></a>              {    // Set recipients from Contacts form
<a name="l93"><span class="linenum">  93</span></a>                  global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>                  <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'recipients', 'string', '' );
<a name="l96"><span class="linenum">  96</span></a>                  <a class="var it1493" onMouseOver="hilite(1493)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../../../_variables/group_ID.html">$group_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'group_ID', 'integer', 0 );
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>                  if( !empty( <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> ) )
<a name="l99"><span class="linenum">  99</span></a>                  {    // Selected users
<a name="l100"><span class="linenum"> 100</span></a>                      <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> );
<a name="l101"><span class="linenum"> 101</span></a>                      foreach( <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> as <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> =&gt; <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a> )
<a name="l102"><span class="linenum"> 102</span></a>                      {
<a name="l103"><span class="linenum"> 103</span></a>                          if( (int)<a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a> ) == 0 )
<a name="l104"><span class="linenum"> 104</span></a>                          {    // remove bad data
<a name="l105"><span class="linenum"> 105</span></a>                              unset( <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a>[<a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>] );
<a name="l106"><span class="linenum"> 106</span></a>                          }
<a name="l107"><span class="linenum"> 107</span></a>                      }
<a name="l108"><span class="linenum"> 108</span></a>                      if( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> ) &gt; 0 )
<a name="l109"><span class="linenum"> 109</span></a>                      {
<a name="l110"><span class="linenum"> 110</span></a>                          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l111"><span class="linenum"> 111</span></a>                          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_ID, user_login' );
<a name="l112"><span class="linenum"> 112</span></a>                          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_messaging__contact' );
<a name="l113"><span class="linenum"> 113</span></a>                          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_users ON mct_to_user_ID = user_ID' );
<a name="l114"><span class="linenum"> 114</span></a>                          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'mct_from_user_ID = '.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l115"><span class="linenum"> 115</span></a>                          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'mct_to_user_ID IN ('.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> ).')' );
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">                        // asimo&gt; If A user block B user it means that A user doesn't want to receive private message from B,</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">                        // but A user still should be able to send a message to B.</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">                        //$SQL-&gt;WHERE_and( 'mct_blocked = 0' );</span>
<a name="l119"><span class="linenum"> 119</span></a>                          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('ORDER_BY')" href="../../../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">ORDER_BY</a>( 'user_login' );
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>                          <a class="var it5861" onMouseOver="hilite(5861)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../../_variables/logins.html">$logins</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../../../../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l122"><span class="linenum"> 122</span></a>                      }
<a name="l123"><span class="linenum"> 123</span></a>                  }
<a name="l124"><span class="linenum"> 124</span></a>                  else if( <a class="var it1493" onMouseOver="hilite(1493)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../../../_variables/group_ID.html">$group_ID</a> &gt; 0 )
<a name="l125"><span class="linenum"> 125</span></a>                  {    // All users from one group
<a name="l126"><span class="linenum"> 126</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l127"><span class="linenum"> 127</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_ID, user_login' );
<a name="l128"><span class="linenum"> 128</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_messaging__contact_groupusers' );
<a name="l129"><span class="linenum"> 129</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_users ON cgu_user_ID = user_ID' );
<a name="l130"><span class="linenum"> 130</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_messaging__contact_groups ON cgu_cgr_ID = cgr_ID' );
<a name="l131"><span class="linenum"> 131</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_messaging__contact ON mct_from_user_ID = cgr_user_ID AND mct_to_user_ID = user_ID' );
<a name="l132"><span class="linenum"> 132</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'cgr_user_ID = '.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l133"><span class="linenum"> 133</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cgr_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1493" onMouseOver="hilite(1493)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../../../_variables/group_ID.html">$group_ID</a> ) );
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">                    // asimo&gt; If A user block B user it means that A user doesn't want to receive private message from B,</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">                    // but A user still should be able to send a message to B.</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">                    //$SQL-&gt;WHERE_and( 'mct_blocked = 0' );</span>
<a name="l137"><span class="linenum"> 137</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('ORDER_BY')" href="../../../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">ORDER_BY</a>( 'user_login' );
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>                      <a class="var it5861" onMouseOver="hilite(5861)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../../_variables/logins.html">$logins</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../../../../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l140"><span class="linenum"> 140</span></a>                  }
<a name="l141"><span class="linenum"> 141</span></a>              }
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients.html">recipients</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it5861" onMouseOver="hilite(5861)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../../_variables/logins.html">$logins</a> );
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>              if( !empty( <a class="var it5861" onMouseOver="hilite(5861)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../../_variables/logins.html">$logins</a> ) )
<a name="l146"><span class="linenum"> 146</span></a>              {    // Set this var to initialize the preselected users for fbautocomplete jQuery plugin
<a name="l147"><span class="linenum"> 147</span></a>                  global <a class="var it1661" onMouseOver="hilite(1661)" onMouseOut="lolite()" onClick="logVariable('recipients_selected')" href="../../../../_variables/recipients_selected.html">$recipients_selected</a>;
<a name="l148"><span class="linenum"> 148</span></a>                  foreach( <a class="var it5861" onMouseOver="hilite(5861)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../../_variables/logins.html">$logins</a> as <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a> =&gt; <a class="var it1892" onMouseOver="hilite(1892)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../../_variables/user_login.html">$user_login</a> )
<a name="l149"><span class="linenum"> 149</span></a>                  {
<a name="l150"><span class="linenum"> 150</span></a>                      <a class="var it1661" onMouseOver="hilite(1661)" onMouseOut="lolite()" onClick="logVariable('recipients_selected')" href="../../../../_variables/recipients_selected.html">$recipients_selected</a>[] = array(
<a name="l151"><span class="linenum"> 151</span></a>                          'id'    =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a>,
<a name="l152"><span class="linenum"> 152</span></a>                          'title' =&gt; <a class="var it1892" onMouseOver="hilite(1892)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../../_variables/user_login.html">$user_login</a>
<a name="l153"><span class="linenum"> 153</span></a>                      );
<a name="l154"><span class="linenum"> 154</span></a>                  }
<a name="l155"><span class="linenum"> 155</span></a>              }
<a name="l156"><span class="linenum"> 156</span></a>          }
<a name="l157"><span class="linenum"> 157</span></a>      }
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>      <span class="comment">/**</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">     * Load data from Request form fields.</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">     * @return boolean true if loaded data seems valid.</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     */</span>
<a name="l164"><span class="linenum"> 164</span></a>  	function <a class="function" onClick="logFunction('load_from_Request')" href="../../../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>()
<a name="l165"><span class="linenum"> 165</span></a>      {
<a name="l166"><span class="linenum"> 166</span></a>          global <a class="var it1827" onMouseOver="hilite(1827)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients')" href="../../../../_variables/thrd_recipients.html">$thrd_recipients</a>, <a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients_array')" href="../../../../_variables/thrd_recipients_array.html">$thrd_recipients_array</a>;
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">        // Resipients</span>
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_string_from_param')" href="../../../../_functions/set_string_from_param.html" onMouseOver="funcPopup(event,'set_string_from_param')">set_string_from_param</a>( 'recipients', empty( <a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients_array')" href="../../../../_variables/thrd_recipients_array.html">$thrd_recipients_array</a> ) ? true : false );
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">        // Title</span>
<a name="l172"><span class="linenum"> 172</span></a>          <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'thrd_title', 'string' );
<a name="l173"><span class="linenum"> 173</span></a>          <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'thrd_title', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter a subject') );
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'title', 'thrd_title' );
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // Message</span>
<a name="l177"><span class="linenum"> 177</span></a>          <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'msg_text', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter a message') );
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('param_check__recipients')" href="../../../../_functions/param_check__recipients.html" onMouseOver="funcPopup(event,'param_check__recipients')">param_check__recipients</a>( 'thrd_recipients', <a class="var it1827" onMouseOver="hilite(1827)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients')" href="../../../../_variables/thrd_recipients.html">$thrd_recipients</a>, <a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients_array')" href="../../../../_variables/thrd_recipients_array.html">$thrd_recipients_array</a> );
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>          return ! <a class="function" onClick="logFunction('param_errors_detected')" href="../../../../_functions/param_errors_detected.html" onMouseOver="funcPopup(event,'param_errors_detected')">param_errors_detected</a>();
<a name="l182"><span class="linenum"> 182</span></a>      }
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>      <span class="comment">/**</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     * Set param value</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     *</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     * By default, all values will be considered strings</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     *</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     * @param string parameter name</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     * @param mixed parameter value</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty value</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">     * @return boolean true, if a value has been set; false if it has not changed</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">     */</span>
<a name="l195"><span class="linenum"> 195</span></a>  	function <a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../../_variables/parvalue.html">$parvalue</a>, <a class="var it2387" onMouseOver="hilite(2387)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../../_variables/make_null.html">$make_null</a> = false )
<a name="l196"><span class="linenum"> 196</span></a>      {
<a name="l197"><span class="linenum"> 197</span></a>          switch( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a> )
<a name="l198"><span class="linenum"> 198</span></a>          {
<a name="l199"><span class="linenum"> 199</span></a>              case 'recipients':
<a name="l200"><span class="linenum"> 200</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients.html">recipients</a> = <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../../_variables/parvalue.html">$parvalue</a>;
<a name="l201"><span class="linenum"> 201</span></a>                  break;
<a name="l202"><span class="linenum"> 202</span></a>              case 'title':
<a name="l203"><span class="linenum"> 203</span></a>              default:
<a name="l204"><span class="linenum"> 204</span></a>                  return <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1495" onMouseOver="hilite(1495)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, 'string', <a class="var it1496" onMouseOver="hilite(1496)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../../_variables/parvalue.html">$parvalue</a>, <a class="var it2387" onMouseOver="hilite(2387)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../../_variables/make_null.html">$make_null</a> );
<a name="l205"><span class="linenum"> 205</span></a>          }
<a name="l206"><span class="linenum"> 206</span></a>      }
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>      <span class="comment">/**</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     * Check if recipients available in database</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">     *</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * @param string Input name</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * @param string Recipients logins separated with comma (Used for browsers without JavaScript)</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * @param string Recipients logins in array format (Used with jQuery plugin fbautocomplete)</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     * @return boolean true if all recipients allow the current User to contact them, false otherwise</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     */</span>
<a name="l217"><span class="linenum"> 217</span></a>  	function <a class="function" onClick="logFunction('param_check__recipients')" href="../../../../_functions/param_check__recipients.html" onMouseOver="funcPopup(event,'param_check__recipients')">param_check__recipients</a>( <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a>, <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a>, <a class="var it7987" onMouseOver="hilite(7987)" onMouseOut="lolite()" onClick="logVariable('recipients_array')" href="../../../../_variables/recipients_array.html">$recipients_array</a> )
<a name="l218"><span class="linenum"> 218</span></a>      {
<a name="l219"><span class="linenum"> 219</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>;
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>          if( !empty( <a class="var it7987" onMouseOver="hilite(7987)" onMouseOut="lolite()" onClick="logVariable('recipients_array')" href="../../../../_variables/recipients_array.html">$recipients_array</a> ) )
<a name="l222"><span class="linenum"> 222</span></a>          {    // These data is created by jQuery plugin fbautocomplete
<a name="l223"><span class="linenum"> 223</span></a>              <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a> = <a class="var it7987" onMouseOver="hilite(7987)" onMouseOut="lolite()" onClick="logVariable('recipients_array')" href="../../../../_variables/recipients_array.html">$recipients_array</a>['title'];
<a name="l224"><span class="linenum"> 224</span></a>          }
<a name="l225"><span class="linenum"> 225</span></a>          else
<a name="l226"><span class="linenum"> 226</span></a>          {    // For browsers without JavaScript
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">            // split recipients into array using comma separator</span>
<a name="l228"><span class="linenum"> 228</span></a>              <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a> = array();
<a name="l229"><span class="linenum"> 229</span></a>              <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( ',', ' ', <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> ) );
<a name="l230"><span class="linenum"> 230</span></a>              foreach( <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(' ', <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a>) as <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a> )
<a name="l231"><span class="linenum"> 231</span></a>              {
<a name="l232"><span class="linenum"> 232</span></a>                  <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../../_variables/login.html">$login</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>);
<a name="l233"><span class="linenum"> 233</span></a>                  if( ! empty( <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../../_variables/login.html">$login</a> ) )
<a name="l234"><span class="linenum"> 234</span></a>                  {
<a name="l235"><span class="linenum"> 235</span></a>                      <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a>[] = <a class="function" onClick="logFunction('evo_strtolower')" href="../../../../_functions/evo_strtolower.html" onMouseOver="funcPopup(event,'evo_strtolower')">evo_strtolower</a>( <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../../_variables/login.html">$login</a> );
<a name="l236"><span class="linenum"> 236</span></a>                  }
<a name="l237"><span class="linenum"> 237</span></a>              }
<a name="l238"><span class="linenum"> 238</span></a>          }
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a> );
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> = '';
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">        // check has recipients list login of current user</span>
<a name="l245"><span class="linenum"> 245</span></a>          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('login')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/login.html">login</a>, <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a> ) )
<a name="l246"><span class="linenum"> 246</span></a>          {
<a name="l247"><span class="linenum"> 247</span></a>              <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You cannot send threads to yourself: %s' ), <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('login')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/login.html">login</a> );
<a name="l248"><span class="linenum"> 248</span></a>          }
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">        // load recipient User objects</span>
<a name="l251"><span class="linenum"> 251</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_where')" href="../../../../_functions/load_where.html" onMouseOver="funcPopup(event,'load_where')">load_where</a>( 'user_login IN ( &quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&quot;,&quot;', <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a> ).'&quot; )' );
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">        // check are recipients available in database</span>
<a name="l255"><span class="linenum"> 255</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a> = array();
<a name="l256"><span class="linenum"> 256</span></a>          <a class="var it7988" onMouseOver="hilite(7988)" onMouseOut="lolite()" onClick="logVariable('unavailable_recipients_list')" href="../../../../_variables/unavailable_recipients_list.html">$unavailable_recipients_list</a> = array();
<a name="l257"><span class="linenum"> 257</span></a>          <a class="var it7989" onMouseOver="hilite(7989)" onMouseOut="lolite()" onClick="logVariable('closed_recipients_list')" href="../../../../_variables/closed_recipients_list.html">$closed_recipients_list</a> = array();
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it7990" onMouseOver="hilite(7990)" onMouseOut="lolite()" onClick="logVariable('status_restricted_recipients')" href="../../../../_variables/status_restricted_recipients.html">$status_restricted_recipients</a> = array();
<a name="l259"><span class="linenum"> 259</span></a>          <a class="var it7991" onMouseOver="hilite(7991)" onMouseOut="lolite()" onClick="logVariable('recipients_without_perm')" href="../../../../_variables/recipients_without_perm.html">$recipients_without_perm</a> = array();
<a name="l260"><span class="linenum"> 260</span></a>          <a class="var it7992" onMouseOver="hilite(7992)" onMouseOut="lolite()" onClick="logVariable('recipients_from_different_country')" href="../../../../_variables/recipients_from_different_country.html">$recipients_from_different_country</a> = array();
<a name="l261"><span class="linenum"> 261</span></a>          <a class="var it7993" onMouseOver="hilite(7993)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a> = array();
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">        // check if recipient user enable private messages only if sender user doesn't have 'delete' messaging permission</span>
<a name="l263"><span class="linenum"> 263</span></a>          <a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('check_enable_pm')" href="../../../../_variables/check_enable_pm.html">$check_enable_pm</a> = !<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'delete' );
<a name="l264"><span class="linenum"> 264</span></a>          <a class="var it7995" onMouseOver="hilite(7995)" onMouseOut="lolite()" onClick="logVariable('cross_country_restrict')" href="../../../../_variables/cross_country_restrict.html">$cross_country_restrict</a> = <a class="function" onClick="logFunction('has_cross_country_restriction')" href="../../../../_functions/has_cross_country_restriction.html" onMouseOver="funcPopup(event,'has_cross_country_restriction')">has_cross_country_restriction</a>( 'contact' );
<a name="l265"><span class="linenum"> 265</span></a>          foreach( <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a> as <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a> )
<a name="l266"><span class="linenum"> 266</span></a>          {
<a name="l267"><span class="linenum"> 267</span></a>              <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a> = <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_login( <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>, false );
<a name="l268"><span class="linenum"> 268</span></a>              if( <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a> === false )
<a name="l269"><span class="linenum"> 269</span></a>              { // user doesn't exists
<a name="l270"><span class="linenum"> 270</span></a>                  <a class="var it7988" onMouseOver="hilite(7988)" onMouseOut="lolite()" onClick="logVariable('unavailable_recipients_list')" href="../../../../_variables/unavailable_recipients_list.html">$unavailable_recipients_list</a>[] = <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>;
<a name="l271"><span class="linenum"> 271</span></a>                  continue;
<a name="l272"><span class="linenum"> 272</span></a>              }
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>              if( !<a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_receive_pm' ) )
<a name="l275"><span class="linenum"> 275</span></a>              { // user status restrict to receive private messages
<a name="l276"><span class="linenum"> 276</span></a>                  if( <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'is_closed' ) )
<a name="l277"><span class="linenum"> 277</span></a>                  { // user account was closed
<a name="l278"><span class="linenum"> 278</span></a>                      <a class="var it7989" onMouseOver="hilite(7989)" onMouseOut="lolite()" onClick="logVariable('closed_recipients_list')" href="../../../../_variables/closed_recipients_list.html">$closed_recipients_list</a>[] = <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>;
<a name="l279"><span class="linenum"> 279</span></a>                      continue;
<a name="l280"><span class="linenum"> 280</span></a>                  }
<a name="l281"><span class="linenum"> 281</span></a>  
<a name="l282"><span class="linenum"> 282</span></a>                  <a class="var it7990" onMouseOver="hilite(7990)" onMouseOut="lolite()" onClick="logVariable('status_restricted_recipients')" href="../../../../_variables/status_restricted_recipients.html">$status_restricted_recipients</a>[] = <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>;
<a name="l283"><span class="linenum"> 283</span></a>                  continue;
<a name="l284"><span class="linenum"> 284</span></a>              }
<a name="l285"><span class="linenum"> 285</span></a>  
<a name="l286"><span class="linenum"> 286</span></a>              if( !<a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'reply' ) )
<a name="l287"><span class="linenum"> 287</span></a>              { // user doesn't have permission to read private messages
<a name="l288"><span class="linenum"> 288</span></a>                  <a class="var it7991" onMouseOver="hilite(7991)" onMouseOut="lolite()" onClick="logVariable('recipients_without_perm')" href="../../../../_variables/recipients_without_perm.html">$recipients_without_perm</a>[] = <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>;
<a name="l289"><span class="linenum"> 289</span></a>                  continue;
<a name="l290"><span class="linenum"> 290</span></a>              }
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>              if( <a class="var it7995" onMouseOver="hilite(7995)" onMouseOut="lolite()" onClick="logVariable('cross_country_restrict')" href="../../../../_variables/cross_country_restrict.html">$cross_country_restrict</a> &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ctry_ID.html">ctry_ID</a> != <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it9012" onMouseOver="hilite(9012)" onMouseOut="lolite()" href="../../../../_variables/ctry_ID.html">ctry_ID</a> )
<a name="l293"><span class="linenum"> 293</span></a>              { // user can contact with other users only from the same coutnry, but this recipient country is different
<a name="l294"><span class="linenum"> 294</span></a>                  <a class="var it7992" onMouseOver="hilite(7992)" onMouseOut="lolite()" onClick="logVariable('recipients_from_different_country')" href="../../../../_variables/recipients_from_different_country.html">$recipients_from_different_country</a>[] = <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>;
<a name="l295"><span class="linenum"> 295</span></a>                  continue;
<a name="l296"><span class="linenum"> 296</span></a>              }
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>              if( !<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'enable_PM', <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9012" onMouseOver="hilite(9012)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l299"><span class="linenum"> 299</span></a>              { // recipient doesn't want to receive private messages
<a name="l300"><span class="linenum"> 300</span></a>                  <a class="var it7993" onMouseOver="hilite(7993)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a>[] = <a class="var it1662" onMouseOver="hilite(1662)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>;
<a name="l301"><span class="linenum"> 301</span></a>                  if( <a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('check_enable_pm')" href="../../../../_variables/check_enable_pm.html">$check_enable_pm</a> )
<a name="l302"><span class="linenum"> 302</span></a>                  { // sender is not a user with <a class="function" onClick="logFunction('delete')" href="../../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a> ( &quot;admin&quot; ) messaging permission, so this user can't be in the recipients list
<a name="l303"><span class="linenum"> 303</span></a>                      continue;
<a name="l304"><span class="linenum"> 304</span></a>                  }
<a name="l305"><span class="linenum"> 305</span></a>              }
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">            // recipient is correct, add to recipient list</span>
<a name="l308"><span class="linenum"> 308</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a>[] = <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9012" onMouseOver="hilite(9012)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l309"><span class="linenum"> 309</span></a>          }
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>          if ( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7988" onMouseOver="hilite(7988)" onMouseOut="lolite()" onClick="logVariable('unavailable_recipients_list')" href="../../../../_variables/unavailable_recipients_list.html">$unavailable_recipients_list</a> ) &gt; 0 )
<a name="l312"><span class="linenum"> 312</span></a>          {
<a name="l313"><span class="linenum"> 313</span></a>              if ( ! empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l314"><span class="linenum"> 314</span></a>              {
<a name="l315"><span class="linenum"> 315</span></a>                  <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l316"><span class="linenum"> 316</span></a>              }
<a name="l317"><span class="linenum"> 317</span></a>              <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users were not found: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7988" onMouseOver="hilite(7988)" onMouseOut="lolite()" onClick="logVariable('unavailable_recipients_list')" href="../../../../_variables/unavailable_recipients_list.html">$unavailable_recipients_list</a> ) );
<a name="l318"><span class="linenum"> 318</span></a>          }
<a name="l319"><span class="linenum"> 319</span></a>  
<a name="l320"><span class="linenum"> 320</span></a>          if ( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7989" onMouseOver="hilite(7989)" onMouseOut="lolite()" onClick="logVariable('closed_recipients_list')" href="../../../../_variables/closed_recipients_list.html">$closed_recipients_list</a> ) &gt; 0 )
<a name="l321"><span class="linenum"> 321</span></a>          {
<a name="l322"><span class="linenum"> 322</span></a>              if ( ! empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l323"><span class="linenum"> 323</span></a>              {
<a name="l324"><span class="linenum"> 324</span></a>                  <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l325"><span class="linenum"> 325</span></a>              }
<a name="l326"><span class="linenum"> 326</span></a>              <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users no longer exist: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7989" onMouseOver="hilite(7989)" onMouseOut="lolite()" onClick="logVariable('closed_recipients_list')" href="../../../../_variables/closed_recipients_list.html">$closed_recipients_list</a> ) );
<a name="l327"><span class="linenum"> 327</span></a>          }
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>          if ( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7990" onMouseOver="hilite(7990)" onMouseOut="lolite()" onClick="logVariable('status_restricted_recipients')" href="../../../../_variables/status_restricted_recipients.html">$status_restricted_recipients</a> ) &gt; 0 )
<a name="l330"><span class="linenum"> 330</span></a>          {
<a name="l331"><span class="linenum"> 331</span></a>              if ( ! empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l332"><span class="linenum"> 332</span></a>              {
<a name="l333"><span class="linenum"> 333</span></a>                  <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l334"><span class="linenum"> 334</span></a>              }
<a name="l335"><span class="linenum"> 335</span></a>              <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users status currently does not permit to receive private messages: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7990" onMouseOver="hilite(7990)" onMouseOut="lolite()" onClick="logVariable('status_restricted_recipients')" href="../../../../_variables/status_restricted_recipients.html">$status_restricted_recipients</a> ) );
<a name="l336"><span class="linenum"> 336</span></a>          }
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>          if ( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7991" onMouseOver="hilite(7991)" onMouseOut="lolite()" onClick="logVariable('recipients_without_perm')" href="../../../../_variables/recipients_without_perm.html">$recipients_without_perm</a> ) &gt; 0 )
<a name="l339"><span class="linenum"> 339</span></a>          {
<a name="l340"><span class="linenum"> 340</span></a>              if ( ! empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l341"><span class="linenum"> 341</span></a>              {
<a name="l342"><span class="linenum"> 342</span></a>                  <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l343"><span class="linenum"> 343</span></a>              }
<a name="l344"><span class="linenum"> 344</span></a>              <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users have no permission to read private messages: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7991" onMouseOver="hilite(7991)" onMouseOut="lolite()" onClick="logVariable('recipients_without_perm')" href="../../../../_variables/recipients_without_perm.html">$recipients_without_perm</a> ) );
<a name="l345"><span class="linenum"> 345</span></a>          }
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7992" onMouseOver="hilite(7992)" onMouseOut="lolite()" onClick="logVariable('recipients_from_different_country')" href="../../../../_variables/recipients_from_different_country.html">$recipients_from_different_country</a> ) &gt; 0 )
<a name="l348"><span class="linenum"> 348</span></a>          {
<a name="l349"><span class="linenum"> 349</span></a>              if ( ! empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l350"><span class="linenum"> 350</span></a>              {
<a name="l351"><span class="linenum"> 351</span></a>                  <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l352"><span class="linenum"> 352</span></a>              }
<a name="l353"><span class="linenum"> 353</span></a>              <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'You are not allowed to contact with the following users: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7992" onMouseOver="hilite(7992)" onMouseOut="lolite()" onClick="logVariable('recipients_from_different_country')" href="../../../../_variables/recipients_from_different_country.html">$recipients_from_different_country</a> ) );
<a name="l354"><span class="linenum"> 354</span></a>          }
<a name="l355"><span class="linenum"> 355</span></a>  
<a name="l356"><span class="linenum"> 356</span></a>          <a class="var it7996" onMouseOver="hilite(7996)" onMouseOut="lolite()" onClick="logVariable('restricted_pm_count')" href="../../../../_variables/restricted_pm_count.html">$restricted_pm_count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7993" onMouseOver="hilite(7993)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a> );
<a name="l357"><span class="linenum"> 357</span></a>          if ( <a class="var it7996" onMouseOver="hilite(7996)" onMouseOut="lolite()" onClick="logVariable('restricted_pm_count')" href="../../../../_variables/restricted_pm_count.html">$restricted_pm_count</a> &gt; 0 )
<a name="l358"><span class="linenum"> 358</span></a>          { // there is at least one recipient who doesn't want to receive private messages
<a name="l359"><span class="linenum"> 359</span></a>              if( <a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('check_enable_pm')" href="../../../../_variables/check_enable_pm.html">$check_enable_pm</a> )
<a name="l360"><span class="linenum"> 360</span></a>              { // sender is not a user with <a class="function" onClick="logFunction('delete')" href="../../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a> ( &quot;admin&quot; ) messaging permission, so this user can't be in the recipients list
<a name="l361"><span class="linenum"> 361</span></a>                  if ( ! empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l362"><span class="linenum"> 362</span></a>                  {
<a name="l363"><span class="linenum"> 363</span></a>                      <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l364"><span class="linenum"> 364</span></a>                  }
<a name="l365"><span class="linenum"> 365</span></a>                  <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users don\'t want to receive private messages: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7993" onMouseOver="hilite(7993)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a> ) );
<a name="l366"><span class="linenum"> 366</span></a>              }
<a name="l367"><span class="linenum"> 367</span></a>              else
<a name="l368"><span class="linenum"> 368</span></a>              { // send is an admin
<a name="l369"><span class="linenum"> 369</span></a>                  <a class="var it7802" onMouseOver="hilite(7802)" onMouseOut="lolite()" onClick="logVariable('manual_link')" href="../../../../_variables/manual_link.html">$manual_link</a> = <a class="function" onClick="logFunction('get_manual_link')" href="../../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>( 'messaging', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'See manual' ).'.' );
<a name="l370"><span class="linenum"> 370</span></a>                  if( <a class="var it7996" onMouseOver="hilite(7996)" onMouseOut="lolite()" onClick="logVariable('restricted_pm_count')" href="../../../../_variables/restricted_pm_count.html">$restricted_pm_count</a> &gt; 1 )
<a name="l371"><span class="linenum"> 371</span></a>                  { // more then one recipient don't want to receive private messages
<a name="l372"><span class="linenum"> 372</span></a>                      <a class="var it996" onMouseOver="hilite(996)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../../_variables/note.html">$note</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Users &amp;laquo;%s&amp;raquo; do not allow receiving private messages. Message has been sent anyway because you are an administrator.' ), <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7993" onMouseOver="hilite(7993)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a> ) );
<a name="l373"><span class="linenum"> 373</span></a>                  }
<a name="l374"><span class="linenum"> 374</span></a>                  else
<a name="l375"><span class="linenum"> 375</span></a>                  { // one recipient doesn't want to receive private messages
<a name="l376"><span class="linenum"> 376</span></a>                      <a class="var it996" onMouseOver="hilite(996)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../../_variables/note.html">$note</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'User &amp;laquo;%s&amp;raquo; does not allow receiving private messages. Message has been sent anyway because you are an administrator.' ), <a class="var it7993" onMouseOver="hilite(7993)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a>[0] );
<a name="l377"><span class="linenum"> 377</span></a>                  }
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">                // add note</span>
<a name="l379"><span class="linenum"> 379</span></a>                  <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it996" onMouseOver="hilite(996)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../../_variables/note.html">$note</a>.<a class="var it7802" onMouseOver="hilite(7802)" onMouseOut="lolite()" onClick="logVariable('manual_link')" href="../../../../_variables/manual_link.html">$manual_link</a>, 'note' );
<a name="l380"><span class="linenum"> 380</span></a>              }
<a name="l381"><span class="linenum"> 381</span></a>          }
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">        // Here we select those recipients who has blocked the sender. Note that users with 'delete' messaging permission can't be blocked!</span>
<a name="l384"><span class="linenum"> 384</span></a>          <a class="var it7455" onMouseOver="hilite(7455)" onMouseOut="lolite()" onClick="logVariable('blocked_contacts')" href="../../../../_variables/blocked_contacts.html">$blocked_contacts</a> = <a class="function" onClick="logFunction('check_blocked_contacts')" href="../../../../_functions/check_blocked_contacts.html" onMouseOver="funcPopup(event,'check_blocked_contacts')">check_blocked_contacts</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a> );
<a name="l385"><span class="linenum"> 385</span></a>          if( !empty( <a class="var it7455" onMouseOver="hilite(7455)" onMouseOut="lolite()" onClick="logVariable('blocked_contacts')" href="../../../../_variables/blocked_contacts.html">$blocked_contacts</a> ) )
<a name="l386"><span class="linenum"> 386</span></a>          { // There is at least one blocked recipient
<a name="l387"><span class="linenum"> 387</span></a>              if ( ! empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l388"><span class="linenum"> 388</span></a>              {
<a name="l389"><span class="linenum"> 389</span></a>                  <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l390"><span class="linenum"> 390</span></a>              }
<a name="l391"><span class="linenum"> 391</span></a>              <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The following users don\'t want you to contact them at this time: ' ).' '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7455" onMouseOver="hilite(7455)" onMouseOut="lolite()" onClick="logVariable('blocked_contacts')" href="../../../../_variables/blocked_contacts.html">$blocked_contacts</a> );
<a name="l392"><span class="linenum"> 392</span></a>          }
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>          if( empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l395"><span class="linenum"> 395</span></a>          { // no errors yet
<a name="l396"><span class="linenum"> 396</span></a>              <a class="var it7997" onMouseOver="hilite(7997)" onMouseOut="lolite()" onClick="logVariable('recipients_count')" href="../../../../_variables/recipients_count.html">$recipients_count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../../_variables/recipients_list.html">$recipients_list</a> );
<a name="l397"><span class="linenum"> 397</span></a>              if( ( <a class="var it7997" onMouseOver="hilite(7997)" onMouseOut="lolite()" onClick="logVariable('recipients_count')" href="../../../../_variables/recipients_count.html">$recipients_count</a> &gt; 1 ) &amp;&amp; ( <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'thrdtype', 'string', 'discussion' ) != 'discussion' ) )
<a name="l398"><span class="linenum"> 398</span></a>              { // user want's to send more then one individual messages, check if is allowed
<a name="l399"><span class="linenum"> 399</span></a>                  <a class="function" onClick="logFunction('list')" href="../../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>( <a class="var it2142" onMouseOver="hilite(2142)" onMouseOut="lolite()" onClick="logVariable('max_new_threads')" href="../../../../_variables/max_new_threads.html">$max_new_threads</a>, <a class="var it7504" onMouseOver="hilite(7504)" onMouseOut="lolite()" onClick="logVariable('new_threads_count')" href="../../../../_variables/new_threads_count.html">$new_threads_count</a> ) = <a class="function" onClick="logFunction('get_todays_thread_settings')" href="../../../../_functions/get_todays_thread_settings.html" onMouseOver="funcPopup(event,'get_todays_thread_settings')">get_todays_thread_settings</a>();
<a name="l400"><span class="linenum"> 400</span></a>                  if( ( !empty( <a class="var it2142" onMouseOver="hilite(2142)" onMouseOut="lolite()" onClick="logVariable('max_new_threads')" href="../../../../_variables/max_new_threads.html">$max_new_threads</a> ) ) &amp;&amp; ( ( <a class="var it2142" onMouseOver="hilite(2142)" onMouseOut="lolite()" onClick="logVariable('max_new_threads')" href="../../../../_variables/max_new_threads.html">$max_new_threads</a> - <a class="var it7504" onMouseOver="hilite(7504)" onMouseOut="lolite()" onClick="logVariable('new_threads_count')" href="../../../../_variables/new_threads_count.html">$new_threads_count</a> ) &lt; <a class="var it7997" onMouseOver="hilite(7997)" onMouseOut="lolite()" onClick="logVariable('recipients_count')" href="../../../../_variables/recipients_count.html">$recipients_count</a> ) )
<a name="l401"><span class="linenum"> 401</span></a>                  { // user has a create thread limit, and recipients number exceed that limit
<a name="l402"><span class="linenum"> 402</span></a>                      <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l403"><span class="linenum"> 403</span></a>                      <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> .= sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You are unable to send %d individual messages, because it exceeds your remaining daily limit of %d.' ), <a class="var it7997" onMouseOver="hilite(7997)" onMouseOut="lolite()" onClick="logVariable('recipients_count')" href="../../../../_variables/recipients_count.html">$recipients_count</a>, <a class="var it2142" onMouseOver="hilite(2142)" onMouseOut="lolite()" onClick="logVariable('max_new_threads')" href="../../../../_variables/max_new_threads.html">$max_new_threads</a> - <a class="var it7504" onMouseOver="hilite(7504)" onMouseOut="lolite()" onClick="logVariable('new_threads_count')" href="../../../../_variables/new_threads_count.html">$new_threads_count</a> );
<a name="l404"><span class="linenum"> 404</span></a>                  }
<a name="l405"><span class="linenum"> 405</span></a>              }
<a name="l406"><span class="linenum"> 406</span></a>          }
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>          if( ! empty( <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l409"><span class="linenum"> 409</span></a>          {    // show error
<a name="l410"><span class="linenum"> 410</span></a>              <a class="function" onClick="logFunction('param_error')" href="../../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a>, <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../../_variables/error_msg.html">$error_msg</a> );
<a name="l411"><span class="linenum"> 411</span></a>              return false;
<a name="l412"><span class="linenum"> 412</span></a>          }
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>          return true;
<a name="l415"><span class="linenum"> 415</span></a>      }
<a name="l416"><span class="linenum"> 416</span></a>  
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>      <span class="comment">/**</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     * Delete thread and dependencies from database</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     */</span>
<a name="l421"><span class="linenum"> 421</span></a>  	function <a class="function" onClick="logFunction('dbdelete')" href="../../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>()
<a name="l422"><span class="linenum"> 422</span></a>      {
<a name="l423"><span class="linenum"> 423</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>          if( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> == 0 ) <a class="function" onClick="logFunction('debug_die')" href="../../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Non persistant object cannot be deleted!' );
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">        // Delete Messages</span>
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../_variables/ret.html">$ret</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_messaging__message
<a name="l431"><span class="linenum"> 431</span></a>                                                  WHERE msg_thread_ID='.<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">        // Delete Statuses</span>
<a name="l433"><span class="linenum"> 433</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../_variables/ret.html">$ret</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_messaging__threadstatus
<a name="l434"><span class="linenum"> 434</span></a>                                                  WHERE tsta_thread_ID='.<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">        // Delete Thread</span>
<a name="l436"><span class="linenum"> 436</span></a>          if( ! parent::<a class="function" onClick="logFunction('dbdelete')" href="../../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>() )
<a name="l437"><span class="linenum"> 437</span></a>          {
<a name="l438"><span class="linenum"> 438</span></a>              <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>              return false;
<a name="l441"><span class="linenum"> 441</span></a>          }
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>          return true;
<a name="l446"><span class="linenum"> 446</span></a>      }
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>      <span class="comment">/**</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     * Load recipients of the current thread</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">     *</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     * @return recipients list</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     */</span>
<a name="l454"><span class="linenum"> 454</span></a>  	function <a class="function" onClick="logFunction('load_recipients')" href="../../../../_functions/load_recipients.html" onMouseOver="funcPopup(event,'load_recipients')">load_recipients</a>()
<a name="l455"><span class="linenum"> 455</span></a>      {
<a name="l456"><span class="linenum"> 456</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l457"><span class="linenum"> 457</span></a>  
<a name="l458"><span class="linenum"> 458</span></a>          if( empty( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a> ) &amp;&amp; ( !empty( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) ) )
<a name="l459"><span class="linenum"> 459</span></a>          {
<a name="l460"><span class="linenum"> 460</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l461"><span class="linenum"> 461</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'tsta_user_ID' );
<a name="l462"><span class="linenum"> 462</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_messaging__threadstatus' );
<a name="l463"><span class="linenum"> 463</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'tsta_thread_ID = '.<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a> = array();
<a name="l466"><span class="linenum"> 466</span></a>              foreach( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) as <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../../_variables/row.html">$row</a> )
<a name="l467"><span class="linenum"> 467</span></a>              {
<a name="l468"><span class="linenum"> 468</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a>[] = <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('tsta_user_ID')" class="var it8964" onMouseOver="hilite(8964)" onMouseOut="lolite()" href="../../../../_variables/tsta_user_ID.html">tsta_user_ID</a>;
<a name="l469"><span class="linenum"> 469</span></a>              }
<a name="l470"><span class="linenum"> 470</span></a>          }
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>          return <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a>;
<a name="l473"><span class="linenum"> 473</span></a>      }
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>      <span class="comment">/**</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * Check permission on a persona</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     *</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * @return boolean true if granted</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     */</span>
<a name="l481"><span class="linenum"> 481</span></a>  	function <a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('assert')" href="../../../../_variables/assert.html">$assert</a> = true )
<a name="l482"><span class="linenum"> 482</span></a>      {
<a name="l483"><span class="linenum"> 483</span></a>          global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l484"><span class="linenum"> 484</span></a>  
<a name="l485"><span class="linenum"> 485</span></a>          return <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('assert')" href="../../../../_variables/assert.html">$assert</a> );
<a name="l486"><span class="linenum"> 486</span></a>      }
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>      <span class="comment">/**</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">     * Check if user is recipient of the current thread</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">     *</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">     * @param user ID</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">     * @return boolean true if user is recipient, false otherwise</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment">     */</span>
<a name="l495"><span class="linenum"> 495</span></a>  	function <a class="function" onClick="logFunction('check_thread_recipient')" href="../../../../_functions/check_thread_recipient.html" onMouseOver="funcPopup(event,'check_thread_recipient')">check_thread_recipient</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a> )
<a name="l496"><span class="linenum"> 496</span></a>      {
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_recipients')" href="../../../../_functions/load_recipients.html" onMouseOver="funcPopup(event,'load_recipients')">load_recipients</a>();
<a name="l498"><span class="linenum"> 498</span></a>          return <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a>, <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a> );
<a name="l499"><span class="linenum"> 499</span></a>      }
<a name="l500"><span class="linenum"> 500</span></a>  
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>      <span class="comment">/**</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">     * Check if current User is allowed to reply on this thread.</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">     * Users are allowed to reply only to those threads where they are involved and there is at least one user between the recipients who didn't block the User.</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     * Note: Currently it doesn't matter if the sender is in the recipients user's contact list or not except in that case when the sender is blocked.</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     *</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     * @return boolean true if current User is allowed, false otherwise</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     */</span>
<a name="l509"><span class="linenum"> 509</span></a>  	function <a class="function" onClick="logFunction('check_allow_reply')" href="../../../../_functions/check_allow_reply.html" onMouseOver="funcPopup(event,'check_allow_reply')">check_allow_reply</a>()
<a name="l510"><span class="linenum"> 510</span></a>      {
<a name="l511"><span class="linenum"> 511</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">        // load thread recipients</span>
<a name="l514"><span class="linenum"> 514</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_recipients')" href="../../../../_functions/load_recipients.html" onMouseOver="funcPopup(event,'load_recipients')">load_recipients</a>();
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">        // check if user is involved in recipients list</span>
<a name="l517"><span class="linenum"> 517</span></a>          if( ! <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_thread_recipient')" href="../../../../_functions/check_thread_recipient.html" onMouseOver="funcPopup(event,'check_thread_recipient')">check_thread_recipient</a>( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l518"><span class="linenum"> 518</span></a>          { // Deny to write a new reply for not involved users
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">            // asimo&gt; We may call debug_die() here because this is not a correct state of the application</span>
<a name="l520"><span class="linenum"> 520</span></a>              <a class="function" onClick="logFunction('param_error')" href="../../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( '', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You cannot post a message in a thread you\'re not involved in.') );
<a name="l521"><span class="linenum"> 521</span></a>              return false;
<a name="l522"><span class="linenum"> 522</span></a>          }
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">        // check if all of the recipients are closed</span>
<a name="l525"><span class="linenum"> 525</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l526"><span class="linenum"> 526</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_where')" href="../../../../_functions/load_where.html" onMouseOver="funcPopup(event,'load_where')">load_where</a>( 'user_ID IN ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a> ).' )' );
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it7999" onMouseOver="hilite(7999)" onMouseOut="lolite()" onClick="logVariable('all_closed')" href="../../../../_variables/all_closed.html">$all_closed</a> = true;
<a name="l528"><span class="linenum"> 528</span></a>          foreach( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/recipients_list.html">recipients_list</a> as <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('recipient_ID')" href="../../../../_variables/recipient_ID.html">$recipient_ID</a> )
<a name="l529"><span class="linenum"> 529</span></a>          {
<a name="l530"><span class="linenum"> 530</span></a>              if( <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('recipient_ID')" href="../../../../_variables/recipient_ID.html">$recipient_ID</a> == <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> )
<a name="l531"><span class="linenum"> 531</span></a>              { // skip current User
<a name="l532"><span class="linenum"> 532</span></a>                  continue;
<a name="l533"><span class="linenum"> 533</span></a>              }
<a name="l534"><span class="linenum"> 534</span></a>              <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a> = <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('recipient_ID')" href="../../../../_variables/recipient_ID.html">$recipient_ID</a>, false );
<a name="l535"><span class="linenum"> 535</span></a>              if( <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a> &amp;&amp; <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_receive_pm' ) )
<a name="l536"><span class="linenum"> 536</span></a>              { // this recipient exists and status allows to receive private messages
<a name="l537"><span class="linenum"> 537</span></a>                  <a class="var it7999" onMouseOver="hilite(7999)" onMouseOut="lolite()" onClick="logVariable('all_closed')" href="../../../../_variables/all_closed.html">$all_closed</a> = false;
<a name="l538"><span class="linenum"> 538</span></a>                  break;
<a name="l539"><span class="linenum"> 539</span></a>              }
<a name="l540"><span class="linenum"> 540</span></a>          }
<a name="l541"><span class="linenum"> 541</span></a>          if( <a class="var it7999" onMouseOver="hilite(7999)" onMouseOut="lolite()" onClick="logVariable('all_closed')" href="../../../../_variables/all_closed.html">$all_closed</a> )
<a name="l542"><span class="linenum"> 542</span></a>          { // all recipients are closed or deleted
<a name="l543"><span class="linenum"> 543</span></a>              <a class="function" onClick="logFunction('param_error')" href="../../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( '', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You cannot reply because all the other users involved in this conversation have closed their account.' ) );
<a name="l544"><span class="linenum"> 544</span></a>              return false;
<a name="l545"><span class="linenum"> 545</span></a>          }
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>          if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'delete' ) )
<a name="l548"><span class="linenum"> 548</span></a>          { // users with delete permission are always able to reply to a conversation where they are involved
<a name="l549"><span class="linenum"> 549</span></a>              return true;
<a name="l550"><span class="linenum"> 550</span></a>          }
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( ts.tsta_user_ID )' );
<a name="l555"><span class="linenum"> 555</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_messaging__threadstatus ts
<a name="l556"><span class="linenum"> 556</span></a>                                  LEFT JOIN T_messaging__contact mc ON ts.tsta_user_ID = mc.mct_from_user_ID
<a name="l557"><span class="linenum"> 557</span></a>                                              AND mc.mct_to_user_ID = '.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">        // don't select current User</span>
<a name="l559"><span class="linenum"> 559</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'ts.tsta_user_ID &lt;&gt; '.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">        // restrict to the given thread</span>
<a name="l561"><span class="linenum"> 561</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'ts.tsta_thread_ID ='.<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment">        // sender is not blocked or is not present in all recipient's contact list</span>
<a name="l563"><span class="linenum"> 563</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( mc.mct_blocked IS NULL OR mc.mct_blocked = 0 )' );
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>          if( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), 0, NULL, 'Count all users whou are involved in the given thread but not the current User and didn\'t block the current User' ) &gt; 0 )
<a name="l566"><span class="linenum"> 566</span></a>          { // there is at least one recipient who accept the reply
<a name="l567"><span class="linenum"> 567</span></a>              return true;
<a name="l568"><span class="linenum"> 568</span></a>          }
<a name="l569"><span class="linenum"> 569</span></a>  
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">        // all recipients have blocked the current User</span>
<a name="l571"><span class="linenum"> 571</span></a>          <a class="function" onClick="logFunction('param_error')" href="../../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( '', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The recipient(s) do not want you to contact them at this time.' ) );
<a name="l572"><span class="linenum"> 572</span></a>          return false;
<a name="l573"><span class="linenum"> 573</span></a>      }
<a name="l574"><span class="linenum"> 574</span></a>  }
<a name="l575"><span class="linenum"> 575</span></a>  
<a name="l576"><span class="linenum"> 576</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'evo_strtolower': ['evo_strtolower', 'mbstring wrapper for strtolower function ', [['blogs/inc/_core','_misc.funcs.php',668]], 56],
'from': ['from', '', [['blogs/inc/_core/model/db','_sql.class.php',219]], 380],
'check_thread_recipient': ['check_thread_recipient', 'Check if user is recipient of the current thread ', [['blogs/inc/messaging/model','_thread.class.php',489]], 6],
'param_errors_detected': ['param_errors_detected', 'Check if there have been validation errors ', [['blogs/inc/_core','_param.funcs.php',1475]], 56],
'param_error': ['param_error', 'Add an error for a variable, either to the Form\'s field and/or the global {@link $Messages} object. ', [['blogs/inc/_core','_param.funcs.php',1519]], 132],
'delete': ['delete', 'Delete a hit. ', [['blogs/inc/sessions/model','_hitlist.class.php',47],['blogs/inc/plugins/model','_pluginsettings.class.php',83],['blogs/inc/settings/model','_abstractsettings.class.php',522],['blogs/inc/plugins/model','_pluginusersettings.class.php',107],['blogs/inc/_ext/pclzip','pclzip.lib.php',1007],['blogs/inc/users/model','_usersettings.class.php',212],['blogs/inc/users/model','_groupsettings.class.php',181],['blogs/inc/sessions/model','_session.class.php',452],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',168]], 90],
'get_assoc': ['get_assoc', 'Function to get the second column from the cached result indexed by the first column ', [['blogs/inc/_core/model/db','_db.class.php',1066]], 49],
'check_allow_reply': ['check_allow_reply', 'Check if current User is allowed to reply on this thread. Users are allowed to reply only to those threads where they are involved and there is at least one user between the recipients who didn\'t block the User. Note: Currently it doesn\'t matter if the sender is in the recipients user\'s contact list or not except in that case when the sender is blocked. ', [['blogs/inc/messaging/model','_thread.class.php',502]], 1],
'select': ['select', 'Set SELECT clause ', [['blogs/inc/_core/model/db','_sql.class.php',194],['blogs/inc/_core/model/db','_db.class.php',466],['blogs/inc/_core/ui/forms','_form.class.php',1820]], 461],
'dbdelete': ['dbdelete', 'Delete message and dependencies from database ', [['blogs/inc/messaging/model','_message.class.php',411],['blogs/inc/users/model','_group.class.php',489],['blogs/inc/collections/model','_blog.class.php',2361],['blogs/inc/users/model','_user.class.php',2998],['blogs/inc/comments/model','_comment.class.php',3568],['blogs/inc/items/model','_item.class.php',5055],['blogs/inc/messaging/model','_thread.class.php',418],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',331]], 57],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['blogs/inc/_core/model/db','_db.class.php',1092]], 140],
'check_blocked_contacts': ['check_blocked_contacts', 'Check blocked contacts in recipients list. Note: If current User has only reply permission then users who didn\'t have the current User in their contact list will be considerated as blocked contacts! ', [['blogs/inc/messaging/model','_messaging.funcs.php',59]], 2],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['blogs/inc/_core/model/db','_db.class.php',961]], 137],
't_': ['t_', 'TRANSLATE! ', [['blogs/inc/locales','_locale.funcs.php',48],['blogs/inc/locales','_locale.funcs.php',240],['blogs/inc/skins/model','_skin.class.php',672],['blogs/inc/_core/model','_module.class.php',79],['blogs/rsc/js','blog_widgets.js',422],['blogs/inc/plugins','_plugin.class.php',2617]], 10201],
'get_todays_thread_settings': ['get_todays_thread_settings', 'Get current User max new threads settings for today ', [['blogs/inc/messaging/model','_messaging.funcs.php',1300]], 2],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['blogs/inc/_core','_param.funcs.php',50]], 1906],
'begin': ['begin', 'BEGIN A TRANSCATION ', [['blogs/inc/_core/model/db','_db.class.php',1547]], 101],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['blogs/inc/_core','_misc.funcs.php',2535]], 216],
'add': ['add', 'Add object to cache, handling our own indices. ', [['blogs/inc/collections/model','_blogcache.class.php',69],['blogs/inc/users/model','_usercache.class.php',231],['blogs/inc/files/model','_filelist.class.php',392],['blogs/inc/_core/model','_log.class.php',124],['blogs/inc/_core/model','_log.class.php',593],['blogs/inc/files/model','_filetypecache.class.php',57],['blogs/inc/_ext/pclzip','pclzip.lib.php',455],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',356],['blogs/inc/users/model','_groupsettings.class.php',103],['blogs/inc/links/model','_linkcache.class.php',101],['blogs/inc/skins/model','_skincache.class.php',62],['blogs/inc/generic/model','_genericcategorycache.class.php',113],['blogs/inc/_core/model','_messages.class.php',121]], 2022],
'check_status': ['check_status', 'Check if user status permit the give action ', [['blogs/inc/users/model','_user.class.php',2598]], 74],
'load_from_request': ['load_from_request', 'Init filter params from Request params ', [['blogs/inc/items/model','_itemlistlight.class.php',336],['blogs/inc/chapters/model','_chapter.class.php',98],['blogs/inc/users/model','_userfield.class.php',179],['blogs/inc/generic/model','_genericelement.class.php',82],['blogs/inc/messaging/model','_message.class.php',89],['blogs/inc/sessions/model','_goalcat.class.php',55],['blogs/inc/users/model','_group.class.php',118],['blogs/inc/widgets/model','_widget.class.php',145],['blogs/inc/regional/model','_region.class.php',78],['blogs/inc/regional/model','_city.class.php',80],['blogs/inc/collections/model','_blog.class.php',300],['blogs/inc/users/model','_user.class.php',272],['blogs/inc/users/model','_userlist.class.php',253],['blogs/inc/generic/model','_genericcategory.class.php',80],['blogs/inc/tools/model','_emailaddress.class.php',99],['blogs/inc/skins/model','_skin.class.php',136],['blogs/inc/items/model','_itemtype.class.php',78],['blogs/inc/regional/model','_country.class.php',82],['blogs/inc/email_campaigns/model','_emailcampaign.class.php',186],['blogs/inc/cron/model','_cronjob.class.php',122],['blogs/inc/items/model','_item.class.php',522],['blogs/inc/files/model','_filetype.class.php',84],['blogs/inc/comments/model','_commentlist.class.php',266],['blogs/inc/sessions/model','_domain.class.php',63],['blogs/inc/users/model','_userfieldgroup.class.php',73],['blogs/inc/slugs/model','_slug.class.php',94],['blogs/inc/regional/model','_currency.class.php',74],['blogs/inc/messaging/model','_thread.class.php',160],['blogs/inc/maintenance/model','_backup.class.php',169],['blogs/inc/widgets/widgets','_coll_tag_cloud.widget.php',49],['blogs/inc/regional/model','_subregion.class.php',90],['blogs/inc/antispam/model','_iprange.class.php',95],['blogs/inc/sessions/model','_goal.class.php',110]], 79],
'thread': ['thread', 'Constructor ', [['blogs/inc/messaging/model','_thread.class.php',53]], 9],
'list': ['list', '', [['blogs/rsc/js/bootstrap','typeahead.bundle.js',156]], 95],
'get_manual_link': ['get_manual_link', 'Generate a link to a online help resource. testing the concept of online help (aka webhelp). this function should be relocated somewhere better if it is taken onboard by the project ', [['blogs/inc/_core','_misc.funcs.php',4684]], 175],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['blogs/inc/locales','_pofile.class.php',267],['blogs/inc/_core/model/db','_db.class.php',503]], 791],
'param_check_not_empty': ['param_check_not_empty', '', [['blogs/inc/_core','_param.funcs.php',575]], 38],
'has_cross_country_restriction': ['has_cross_country_restriction', 'Check if browse users from different countries is restricted for the current User ', [['blogs/inc/users/model','_user.funcs.php',2905]], 13],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['blogs/inc/items/model','_itemlist.class.php',256],['blogs/inc/items/model','_itemlistlight.class.php',751],['blogs/inc/_core/model/db','_db.class.php',761],['blogs/inc/users/model','_userlist.class.php',474],['blogs/inc/_core/ui/results','_results.class.php',439],['blogs/inc/comments/model','_commentlist.class.php',515]], 972],
'set_from_request': ['set_from_request', 'Set a parameter from a Request form value. ', [['blogs/inc/_core/model/dataobjects','_dataobject.class.php',722]], 94],
'where_and': ['where_and', 'Extends the WHERE clause with AND ', [['blogs/inc/_core/model/db','_sql.class.php',245]], 280],
'load_recipients': ['load_recipients', 'Load recipients of the current thread ', [['blogs/inc/messaging/model','_thread.class.php',449]], 5],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['blogs/inc/_core','_param.funcs.php',1673],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',630]], 111],
'commit': ['commit', 'Commit current transaction ', [['blogs/inc/_core/model/db','_db.class.php',1591]], 114],
'load_where': ['load_where', 'Load a set of objects into the cache. ', [['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',256]], 15],
'load_class': ['load_class', 'Load class file ', [['blogs/inc/_core','_class4.funcs.php',28],['blogs/inc/_core','_class5.funcs.php',79]], 408],
'get': ['get', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',941],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15011],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/media/js','media.js',7],['blogs/inc/links/model','_linkowner.class.php',221],['blogs/inc/_core/model/db','_sql.class.php',64],['blogs/inc/plugins/model','_pluginsettings.class.php',58],['blogs/inc/collections/model','_blog.class.php',1822],['blogs/inc/settings/model','_generalsettings.class.php',383],['blogs/inc/settings/model','_abstractsettings.class.php',271],['blogs/inc/plugins/model','_pluginusersettings.class.php',58],['blogs/inc/users/model','_user.class.php',1126],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_gzip.js',38],['blogs/inc/users/model','_usersettings.class.php',151],['blogs/inc/comments/model','_comment.class.php',301],['blogs/inc/users/model','_groupsettings.class.php',124],['blogs/inc/cron/model','_cronjob.class.php',104],['blogs/inc/items/model','_item.class.php',5742],['blogs/inc/sessions/model','_session.class.php',397],['blogs/inc/links/model','_linkuser.class.php',141],['blogs/inc/links/model','_linkitem.class.php',155],['blogs/inc/slugs/model','_slug.class.php',68],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',574],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['blogs/inc/antispam/model','_iprange.class.php',69],['blogs/inc/links/model','_linkcomment.class.php',132],['blogs/inc/files/model','_file.class.php',532]], 2417],
'set_string_from_param': ['set_string_from_param', 'Set a string parameter from a Request form value. ', [['blogs/inc/_core/model/dataobjects','_dataobject.class.php',749]], 15],
'rollback': ['rollback', 'Rollback current transaction ', [['blogs/inc/_core/model/db','_db.class.php',1621]], 38],
'from_add': ['from_add', 'Extends the FROM clause. ', [['blogs/inc/_core/model/db','_sql.class.php',224]], 137],
'dataobject': ['dataobject', 'Constructor ', [['blogs/inc/_core/model/dataobjects','_dataobject.class.php',89]], 30],
'where': ['where', '', [['blogs/inc/_core/model/db','_sql.class.php',240]], 238],
'order_by': ['order_by', '', [['blogs/inc/_core/model/db','_sql.class.php',319]], 78],
'set': ['set', 'Set param value ', [['blogs/inc/users/model','_userfield.class.php',243],['blogs/inc/generic/model','_genericordered.class.php',75],['blogs/inc/users/model','_group.class.php',204],['blogs/inc/items/model','_itemlight.class.php',1258],['blogs/inc/plugins/model','_pluginsettings.class.php',70],['blogs/inc/widgets/model','_widget.class.php',321],['blogs/inc/regional/model','_region.class.php',102],['blogs/inc/regional/model','_city.class.php',110],['blogs/inc/collections/model','_blog.class.php',1102],['blogs/inc/settings/model','_abstractsettings.class.php',446],['blogs/inc/plugins/model','_pluginusersettings.class.php',82],['blogs/inc/users/model','_user.class.php',1861],['blogs/inc/generic/model','_genericcategory.class.php',100],['blogs/inc/tools/model','_emailaddress.class.php',85],['blogs/inc/users/model','_usersettings.class.php',187],['blogs/inc/regional/model','_country.class.php',106],['blogs/inc/comments/model','_comment.class.php',315],['blogs/inc/users/model','_groupsettings.class.php',140],['blogs/inc/cron/model','_cronjob.class.php',79],['blogs/inc/items/model','_item.class.php',4497],['blogs/inc/files/model','_filetype.class.php',149],['blogs/inc/users/model','_userfieldgroup.class.php',92],['blogs/inc/sessions/model','_session.class.php',420],['blogs/plugins','_calendar.plugin.php',530],['blogs/inc/slugs/model','_slug.class.php',80],['blogs/inc/regional/model','_currency.class.php',96],['blogs/inc/messaging/model','_thread.class.php',185],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',614],['blogs/inc/regional/model','_subregion.class.php',119],['blogs/inc/antispam/model','_iprange.class.php',81],['blogs/inc/sessions/model','_goal.class.php',199]], 1121],
'check_perm': ['check_perm', 'Check permission on a message ', [['blogs/inc/messaging/model','_message.class.php',467],['blogs/inc/users/model','_group.class.php',257],['blogs/inc/users/model','_user.class.php',2022],['blogs/inc/links/model','_linkuser.class.php',51],['blogs/inc/links/model','_linkitem.class.php',54],['blogs/inc/_core/model','_module.class.php',233],['blogs/inc/messaging/model','_thread.class.php',476],['blogs/inc/links/model','_linkcomment.class.php',53],['blogs/inc/sessions/model','_goal.class.php',92]], 967],
'param_check__recipients': ['param_check__recipients', 'Check if recipients available in database ', [['blogs/inc/messaging/model','_thread.class.php',209]], 1],
'implode': ['implode', '', [], 456],
'in_array': ['in_array', '', [], 335],
'count': ['count', '', [], 754],
'trim': ['trim', '', [], 351],
'array_unique': ['array_unique', '', [], 30],
'defined': ['defined', '', [], 874],
'explode': ['explode', '', [], 249],
'str_replace': ['str_replace', '', [], 403]};
CLASS_DATA={
'dataobject': ['dataobject', 'Data Object Base Class ', [['blogs/inc/_core/model/dataobjects','_dataobject.class.php',42]], 32],
'sql': ['sql', 'SQL class: help constructing queries ', [['blogs/inc/_core/model/db','_sql.class.php',32]], 273],
'thread': ['thread', 'Thread Class ', [['blogs/inc/messaging/model','_thread.class.php',29]], 30]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['blogs/inc','_main.inc.php',55],['blogs/install','index.php',25],['blogs/install','debug.php',22]], 827]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Jul  5 12:18:44 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
