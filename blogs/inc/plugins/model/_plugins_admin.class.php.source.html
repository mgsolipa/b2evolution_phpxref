<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /blogs/inc/plugins/model/_plugins_admin.class.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Jul  5 12:18:44 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='blogs/inc/plugins/model';
filename='_plugins_admin.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/blogs/inc/plugins/model/</a> -> <a href="_plugins_admin.class.php.html">_plugins_admin.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_plugins_admin.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_plugins_admin.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements the {@link Plugins_admin} class, which gets used for administrative</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> * handling of the {@link Plugin Plugins}.</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> *</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * This file is part of the b2evolution/evocms project - {@link http://b2evolution.net/}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * See also {@link http://sourceforge.net/projects/evocms/}.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * @copyright (c)2003-2014 by Francois Planque - {@link http://fplanque.com/}.</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * Parts of this file are copyright (c)2006 by Daniel HAHLER - {@link http://daniel.hahler.de/}.</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> *</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * @license http://b2evolution.net/about/license.html GNU General Public License (GPL)</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> *</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * {@internal Open Source relicensing agreement:</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> * Daniel HAHLER grants Francois PLANQUE the right to license</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> * Daniel HAHLER's contributions to this file and the b2evolution project</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> * under any OSI approved OSS license (http://www.opensource.org/licenses/).</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * }}</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package plugins</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @author blueyed: Daniel HAHLER</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> *</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @version $Id: _plugins_admin.class.php 6796 2014-05-28 16:03:16Z yura $</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'plugins/model/_plugins.class.php', 'Plugins' );
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">/**</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * A Plugins object that loads all Plugins, not just the enabled ones.</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * This is needed for the backoffice plugin management.</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> *</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * This extends the basic Plugins by adding all the functionnality needed for administering plugins</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * in addition to just using the already enabled plugins.</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> *</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @package plugins</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> */</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Plugins_admin')" href="../../../../_classes/plugins_admin.html" onMouseOver="classPopup(event,'plugins_admin')">Plugins_admin</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('Plugins')" href="../../../../_classes/plugins.html" onMouseOver="classPopup(event,'plugins')">Plugins</a>
<a name="l42"><span class="linenum">  42</span></a>  {
<a name="l43"><span class="linenum">  43</span></a>      <span class="comment">/**</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     * Load all plugins (not just enabled ones).</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     */</span>
<a name="l46"><span class="linenum">  46</span></a>      var <a class="var it4725" onMouseOver="hilite(4725)" onMouseOut="lolite()" onClick="logVariable('sql_load_plugins_table')" href="../../../../_variables/sql_load_plugins_table.html">$sql_load_plugins_table</a> = '
<a name="l47"><span class="linenum">  47</span></a>              SELECT plug_ID, plug_priority, plug_classname, plug_code, plug_name, plug_shortdesc, plug_status, plug_version, plug_spam_weight
<a name="l48"><span class="linenum">  48</span></a>                FROM T_plugins
<a name="l49"><span class="linenum">  49</span></a>               ORDER BY plug_priority, plug_classname';
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>      <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * Get the list of all events/hooks supported by the plugin framework.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     *</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * Also puts in additional events provided by plugins.</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * fp&gt; please provide an example/use case</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     *</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * Additional to the returned event methods (which can be disabled), there are internal</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * ones which just get called on the plugin (and get not remembered in T_pluginevents), e.g.:</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     *  - AfterInstall</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     *  - BeforeEnable</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     *  - BeforeDisable</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     *  - BeforeInstall</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     *  - BeforeUninstall</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     *  - BeforeUninstallPayload</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     *  - DisplaySkin (called on a skin from {@link GetProvidedSkins()})</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     *  - ExecCronJob</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     *  - GetDefaultSettings</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     *  - GetDefaultUserSettings</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     *  - GetExtraEvents</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">     *  - GetHtsrvMethods</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     *  - PluginInit</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     *  - PluginSettingsUpdateAction (Called as action before updating the plugin's settings)</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     *  - PluginSettingsEditAction (Called as action before editing the plugin's settings)</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     *  - PluginSettingsEditDisplayAfter (Called after standard plugin settings are displayed for editing)</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">     *  - PluginSettingsValidateSet (Called before setting a plugin's setting in the backoffice)</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">     *  - PluginUserSettingsUpdateAction (Called as action before updating the plugin's user settings)</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     *  - PluginUserSettingsEditDisplayAfter (Called after displaying normal user settings)</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     *  - PluginUserSettingsValidateSet (Called before setting a plugin's user setting in the backoffice)</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     *  - PluginVersionChanged (Called when we detect a version change)</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">     *  - PluginCollSettingsUpdateAction (Called as action before updating the collection/blog's settings)</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     *</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     *  The max length of event names is 40 chars (T_pluginevents.pevt_event).</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     *</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     * @internal When adding a new event, please make sure to add a description as well.</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     *           Please also add a new well-documented method to the &quot;Plugin&quot; class.</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     *</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     * @return array Name of event (key) =&gt; description (value)</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     */</span>
<a name="l90"><span class="linenum">  90</span></a>  	function <a class="function" onClick="logFunction('get_supported_events')" href="../../../../_functions/get_supported_events.html" onMouseOver="funcPopup(event,'get_supported_events')">get_supported_events</a>()
<a name="l91"><span class="linenum">  91</span></a>      {
<a name="l92"><span class="linenum">  92</span></a>          static <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('supported_events')" href="../../../../_variables/supported_events.html">$supported_events</a>;
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>          if( empty( <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('supported_events')" href="../../../../_variables/supported_events.html">$supported_events</a> ) )
<a name="l95"><span class="linenum">  95</span></a>          {
<a name="l96"><span class="linenum">  96</span></a>              <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('supported_events')" href="../../../../_variables/supported_events.html">$supported_events</a> = array(
<a name="l97"><span class="linenum">  97</span></a>                  'AdminAfterPageFooter' =&gt; 'This gets called after the backoffice HTML footer has been displayed.',
<a name="l98"><span class="linenum">  98</span></a>                  'AdminDisplayEditorButton' =&gt; 'Display action buttons on the edit screens in the back-office',
<a name="l99"><span class="linenum">  99</span></a>                  'DisplayEditorButton' =&gt; 'Display action buttons on the edit screen in the front-office',
<a name="l100"><span class="linenum"> 100</span></a>                  'AdminDisplayToolbar' =&gt; 'Display a toolbar on the edit screens',
<a name="l101"><span class="linenum"> 101</span></a>                  'AdminDisplayCommentFormFieldset' =&gt; 'Display form fieldsets on the backoffice comment editing form',
<a name="l102"><span class="linenum"> 102</span></a>                  'AdminDisplayItemFormFieldset' =&gt; 'Display form fieldsets on the backoffice item editing screen(s)',
<a name="l103"><span class="linenum"> 103</span></a>                  'DisplayItemFormFieldset' =&gt; 'Display form fieldsets on the frontoffice item editing screen(s)',
<a name="l104"><span class="linenum"> 104</span></a>                  'AdminEndHtmlHead' =&gt; 'This gets called at the end of the HTML HEAD section in backoffice skins',
<a name="l105"><span class="linenum"> 105</span></a>                  'AdminAfterEvobarInit' =&gt; 'This gets called after the Evobar menu has been initialized.',
<a name="l106"><span class="linenum"> 106</span></a>                  'AdminAfterMenuInit' =&gt; 'This gets called after the backoffice menu has been initialized.',
<a name="l107"><span class="linenum"> 107</span></a>                  'AdminTabAction' =&gt; 'This gets called before AdminTabPayload when the Tools tab for the plugin is selected; no output allowed!',
<a name="l108"><span class="linenum"> 108</span></a>                  'AdminTabPayload' =&gt; 'This gets called when the Tools tab for the plugin is selected and content should be displayed.',
<a name="l109"><span class="linenum"> 109</span></a>                  'AdminToolAction' =&gt; '',
<a name="l110"><span class="linenum"> 110</span></a>                  'AdminToolPayload' =&gt; 'This gets called when the plugin\'s block in the Tools menu should be displayed.',
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>                  'AdminBeforeItemEditCreate' =&gt; 'This gets called before a <span class="keyword">new </span><a class="class" onClick="logClass('item')" href="../../../../_classes/item.html" onMouseOver="classPopup(event,'item')">item</a> gets created from the backoffice.',
<a name="l113"><span class="linenum"> 113</span></a>                  'AdminBeforeItemEditUpdate' =&gt; 'This gets called before an existing item gets updated from the backoffice.',
<a name="l114"><span class="linenum"> 114</span></a>                  'AdminBeforeItemEditDelete' =&gt; 'This gets called before an existing item gets deleted from the backoffice.',
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>                  'AdminBeginPayload' =&gt; 'This gets called before the main payload in the backoffice is displayed.',
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>                  'CacheObjects' =&gt; 'Cache data objects.',
<a name="l119"><span class="linenum"> 119</span></a>                  'CachePageContent' =&gt; 'Cache page content.',
<a name="l120"><span class="linenum"> 120</span></a>                  'CacheIsCollectingContent' =&gt; 'Gets asked for if we are generating cached content.',
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>                  'AfterCommentDelete' =&gt; 'Gets called after a comment has been deleted from the database.',
<a name="l123"><span class="linenum"> 123</span></a>                  'AfterCommentInsert' =&gt; 'Gets called after a comment has been inserted into the database.',
<a name="l124"><span class="linenum"> 124</span></a>                  'AfterCommentUpdate' =&gt; 'Gets called after a comment has been updated in the database.',
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>                  'AfterCollectionDelete' =&gt; 'Gets called after a blog has been deleted from the database.',
<a name="l127"><span class="linenum"> 127</span></a>                  'AfterCollectionInsert' =&gt; 'Gets called after a blog has been inserted into the database.',
<a name="l128"><span class="linenum"> 128</span></a>                  'AfterCollectionUpdate' =&gt; 'Gets called after a blog has been updated in the database.',
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>                  'AfterObjectDelete' =&gt; 'Gets called after a data object has been deleted from the database.',
<a name="l131"><span class="linenum"> 131</span></a>                  'AfterObjectInsert' =&gt; 'Gets called after a data object has been inserted into the database.',
<a name="l132"><span class="linenum"> 132</span></a>                  'AfterObjectUpdate' =&gt; 'Gets called after a data object has been updated in the database.',
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>                  'GetCollectionKinds' =&gt; 'Defines blog kinds, their names and description.',
<a name="l135"><span class="linenum"> 135</span></a>                  'InitCollectionKinds' =&gt; 'Defines blog settings by its kind.',
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>                  'AfterItemDelete' =&gt; 'This gets called after an item has been deleted from the database.',
<a name="l138"><span class="linenum"> 138</span></a>                  'PrependItemInsertTransact' =&gt; 'This gets called before an item is inserted into the database.',
<a name="l139"><span class="linenum"> 139</span></a>                  'AfterItemInsert' =&gt; 'This gets called after an item has been inserted into the database.',
<a name="l140"><span class="linenum"> 140</span></a>                  'PrependItemUpdateTransact' =&gt; 'This gets called before an item gets updated in the database..',
<a name="l141"><span class="linenum"> 141</span></a>                  'AfterItemUpdate' =&gt; 'This gets called after an item has been updated in the database.',
<a name="l142"><span class="linenum"> 142</span></a>                  'AppendItemPreviewTransact' =&gt; 'This gets called when instantiating an item for preview.',
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>                   'FilterItemContents' =&gt; 'Filters the content of a post/item right after input.',
<a name="l145"><span class="linenum"> 145</span></a>                   'UnfilterItemContents' =&gt; 'Unfilters the content of a post/item right before editing.',
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">                 // fp&gt; rename to &quot;PreRender&quot;</span>
<a name="l148"><span class="linenum"> 148</span></a>                  'RenderItemAsHtml' =&gt; 'Renders content when generated as HTML.',
<a name="l149"><span class="linenum"> 149</span></a>                  'RenderItemAsXml' =&gt; 'Renders content when generated as XML.',
<a name="l150"><span class="linenum"> 150</span></a>                  'RenderItemAsText' =&gt; 'Renders content when generated as plain text.',
<a name="l151"><span class="linenum"> 151</span></a>                  'RenderItemAttachment' =&gt; 'Renders item attachment.',
<a name="l152"><span class="linenum"> 152</span></a>                  'RenderCommentAttachment' =&gt; 'Renders comment attachment.',
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">                // fp&gt; rename to &quot;DispRender&quot;</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">                // dh&gt; TODO: those do not get called anymore!</span>
<a name="l157"><span class="linenum"> 157</span></a>                  'DisplayItemAsHtml' =&gt; 'Called on an item when it gets displayed as HTML.',
<a name="l158"><span class="linenum"> 158</span></a>                  'DisplayItemAsXml' =&gt; 'Called on an item when it gets displayed as XML.',
<a name="l159"><span class="linenum"> 159</span></a>                  'DisplayItemAsText' =&gt; 'Called on an item when it gets displayed as text.',
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">                // fp&gt; These is actually RENDERing, right?</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">                // TODO: Rename to &quot;DispRender&quot;</span>
<a name="l163"><span class="linenum"> 163</span></a>                  'FilterCommentAuthor' =&gt; 'Filters the comment author.',
<a name="l164"><span class="linenum"> 164</span></a>                  'FilterCommentAuthorUrl' =&gt; 'Filters the URL of the comment author.',
<a name="l165"><span class="linenum"> 165</span></a>                  'FilterCommentContent' =&gt; 'Filters the content of a comment.',
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>                  'AfterUserDelete' =&gt; 'This gets called after an user has been deleted from the database.',
<a name="l168"><span class="linenum"> 168</span></a>                  'AfterUserInsert' =&gt; 'This gets called after an user has been inserted into the database.',
<a name="l169"><span class="linenum"> 169</span></a>                  'AfterUserUpdate' =&gt; 'This gets called after an user has been updated in the database.',
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">                // fp&gt; This is actually RENDERing, right?</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">                // TODO: Rename to &quot;DispRender&quot;</span>
<a name="l173"><span class="linenum"> 173</span></a>                  'FilterIpAddress' =&gt; 'Called when displaying an IP address.',
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>                  'ItemApplyAsRenderer' =&gt; 'Asks the plugin if it wants to apply as a renderer for an item.',
<a name="l176"><span class="linenum"> 176</span></a>                  'ItemCanComment' =&gt; 'Asks the plugin if an item can receive comments/feedback.',
<a name="l177"><span class="linenum"> 177</span></a>                  'ItemSendPing' =&gt; 'Send a ping to a service about new items.',
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>                  'SkinTag' =&gt; 'This method gets invoked when a plugin is called by its code. Providing this method causes the plugin to be listed as a widget.',
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>                  'AppendHitLog' =&gt; 'Called when a hit gets logged, but before it gets recorded.',
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>                  'BeforeThumbCreate' =&gt; 'This gets called before an image thumbnail gets created.',
<a name="l184"><span class="linenum"> 184</span></a>                  'AfterFileUpload' =&gt; 'Called before an uploaded file gets saved on server.',
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>                  'DisplayCommentToolbar' =&gt; 'Display a toolbar on the public feedback form',
<a name="l187"><span class="linenum"> 187</span></a>                  'DisplayCommentFormButton' =&gt; 'Called in the submit button section of the frontend comment form.',
<a name="l188"><span class="linenum"> 188</span></a>                  'DisplayCommentFormFieldset' =&gt; 'Called at the end of the frontend comment form.',
<a name="l189"><span class="linenum"> 189</span></a>                  'DisplayMessageFormButton' =&gt; 'Called in the submit button section of the frontend message form.',
<a name="l190"><span class="linenum"> 190</span></a>                  'DisplayMessageFormFieldset' =&gt; 'Called at the end of the frontend message form.',
<a name="l191"><span class="linenum"> 191</span></a>                  'DisplayLoginFormFieldset' =&gt; 'Called when displaying the &quot;Login&quot; form.',
<a name="l192"><span class="linenum"> 192</span></a>                  'DisplayRegisterFormBefore' =&gt; 'Called when displaying the &quot;Register&quot; form.',
<a name="l193"><span class="linenum"> 193</span></a>                  'DisplayRegisterFormFieldset' =&gt; 'Called when displaying the &quot;Register&quot; form.',
<a name="l194"><span class="linenum"> 194</span></a>                  'DisplayValidateAccountFormFieldset' =&gt; 'Called when displaying the &quot;Validate account&quot; form.',
<a name="l195"><span class="linenum"> 195</span></a>                  'DisplayProfileFormFieldset' =&gt; 'Called when displaying the &quot;User profile&quot; form.',
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>                  'ProfileFormSent' =&gt; 'Called when a private profile form has been sent and gets received.',
<a name="l198"><span class="linenum"> 198</span></a>                  'CommentFormSent' =&gt; 'Called when a public comment form has been sent and gets received.',
<a name="l199"><span class="linenum"> 199</span></a>                  'BeforeCommentFormInsert' =&gt; 'Called before a comment gets recorded through the public comment form.',
<a name="l200"><span class="linenum"> 200</span></a>                  'AfterCommentFormInsert' =&gt; 'Called after a comment has been added through public form.',
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>                  'BeforeTrackbackInsert' =&gt; 'Gets called before a trackback gets recorded.',
<a name="l203"><span class="linenum"> 203</span></a>                  'AfterTrackbackInsert' =&gt; 'Gets called after a trackback has been recorded.',
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>                  'LoginAttempt' =&gt; 'Called when a user tries to login.',
<a name="l206"><span class="linenum"> 206</span></a>                  'LoginAttemptNeedsRawPassword' =&gt; 'A plugin has to return true here, if it needs a raw (un-hashed) password in LoginAttempt.',
<a name="l207"><span class="linenum"> 207</span></a>                  'AlternateAuthentication' =&gt; 'Called at the end of the login process, if the user did not try to login, the session has no user attached or only the username and no password is given (see <a class="class" onClick="logClass('Plugin')" href="../../../../_classes/plugin.html" onMouseOver="classPopup(event,'plugin')">Plugin</a>::<a class="function" onClick="logFunction('AlternateAuthentication')" href="../../../../_functions/alternateauthentication.html" onMouseOver="funcPopup(event,'alternateauthentication')">AlternateAuthentication</a>() for more info).',
<a name="l208"><span class="linenum"> 208</span></a>                  'MessageFormSent' =&gt; 'Called when the &quot;Message to user&quot; form has been submitted.',
<a name="l209"><span class="linenum"> 209</span></a>                  'MessageFormSentCleanup' =&gt; 'Called after a email message has been sent through public form.',
<a name="l210"><span class="linenum"> 210</span></a>                  'Logout' =&gt; 'Called when a user logs out.',
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>                  'GetSpamKarmaForComment' =&gt; 'Asks plugin for the spam karma of a comment/trackback.',
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">                // Other Plugins can use this:</span>
<a name="l215"><span class="linenum"> 215</span></a>                  'CaptchaValidated' =&gt; 'Validate the test from CaptchaPayload to detect humans.',
<a name="l216"><span class="linenum"> 216</span></a>                  'CaptchaValidatedCleanup' =&gt; 'Cleanup data used for CaptchaValidated.',
<a name="l217"><span class="linenum"> 217</span></a>                  'CaptchaPayload' =&gt; 'Provide a turing test to detect humans.',
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>                  'RegisterFormSent' =&gt; 'Called when the &quot;Register&quot; form has been submitted.',
<a name="l220"><span class="linenum"> 220</span></a>                  'ValidateAccountFormSent' =&gt; 'Called when the &quot;Validate account&quot; form has been submitted.',
<a name="l221"><span class="linenum"> 221</span></a>                  'AppendUserRegistrTransact' =&gt; 'Gets appended to the transaction that creates a <span class="keyword">new </span><a class="class" onClick="logClass('user')" href="../../../../_classes/user.html" onMouseOver="classPopup(event,'user')">user</a> on registration.',
<a name="l222"><span class="linenum"> 222</span></a>                  'AfterUserRegistration' =&gt; 'Gets called after a <span class="keyword">new </span><a class="class" onClick="logClass('user')" href="../../../../_classes/user.html" onMouseOver="classPopup(event,'user')">user</a> has registered.',
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>                  'AfterPluginsInit' =&gt; 'Gets called after <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a> is initialized, this is the earliest event.',
<a name="l225"><span class="linenum"> 225</span></a>                  'AfterMainInit' =&gt; 'Called at the end of _main.inc.php, this is the the latest event called before blog initialization.',
<a name="l226"><span class="linenum"> 226</span></a>                  'SessionLoaded' =&gt; 'Gets called after <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a> is initialized, quite early.',
<a name="l227"><span class="linenum"> 227</span></a>                  'BeforeSessionsDelete' =&gt; 'Gets called when sessions are being pruned to enable plugin house cleaning, plugin might change the sess_lastseen timestamp of any sessions they want to keep',
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>                  'AfterLoginAnonymousUser' =&gt; 'Gets called at the end of the login procedure for anonymous visitors.',
<a name="l230"><span class="linenum"> 230</span></a>                  'AfterLoginRegisteredUser' =&gt; 'Gets called at the end of the login procedure for registered users.',
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>                  'BeforeBlockableAction' =&gt; 'Gets called at the end of antispam block ip/domain call.',
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>                  'BeforeBlogDisplay' =&gt; 'Gets called before a (part of the blog) gets displayed.',
<a name="l235"><span class="linenum"> 235</span></a>                  'InitMainList' =&gt; 'Initializes the MainList object. Use this method to create your own MainList, see <a class="function" onClick="logFunction('init_MainList')" href="../../../../_functions/init_mainlist.html" onMouseOver="funcPopup(event,'init_mainlist')">init_MainList</a>()',
<a name="l236"><span class="linenum"> 236</span></a>                  'SkinBeginHtmlHead' =&gt; 'Gets called at the top of the HTML HEAD section in a skin.',
<a name="l237"><span class="linenum"> 237</span></a>                  'SkinEndHtmlBody' =&gt; 'Gets called at the end of the skin\'s HTML BODY section.',
<a name="l238"><span class="linenum"> 238</span></a>                  'DisplayTrackbackAddr' =&gt; 'Called to display the trackback URL for an item.',
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>                  'GetCronJobs' =&gt; 'Gets a list of implemented cron jobs.',
<a name="l241"><span class="linenum"> 241</span></a>                  'GetProvidedSkins' =&gt; 'Get a list of &quot;skins&quot; handled by the plugin.',
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">                // sam2kb&gt; This hook is not used anywhere</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">                // TODO: remove it</span>
<a name="l245"><span class="linenum"> 245</span></a>                  'PluginUserSettingsEditAction' =&gt; 'Called as action before editing a user\'s settings.',
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">                // allow plugins to handle $disp modes</span>
<a name="l248"><span class="linenum"> 248</span></a>                  'GetHandledDispModes' =&gt; 'Called when building possible <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../../_variables/disp.html">$disp</a> list',
<a name="l249"><span class="linenum"> 249</span></a>                  'HandleDispMode' =&gt; 'Called when displaying <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../../_variables/disp.html">$disp</a>',
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>                  'GetAdditionalColumnsTable' =&gt; 'Called to add columns for Results object',
<a name="l252"><span class="linenum"> 252</span></a>              );
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>              if( ! <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_IS_INSTALLING')" href="../../../../_constants/EVO_IS_INSTALLING.html" onMouseOver="constPopup(event,'EVO_IS_INSTALLING')">EVO_IS_INSTALLING</a>') || ! <a class="constant" onClick="logConstant('EVO_IS_INSTALLING')" href="../../../../_constants/EVO_IS_INSTALLING.html" onMouseOver="constPopup(event,'EVO_IS_INSTALLING')">EVO_IS_INSTALLING</a> )
<a name="l255"><span class="linenum"> 255</span></a>              { // only call this, if we're not in the process of installation, to avoid errors from Plugins in this case!
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">                // Let Plugins add additional events (if they trigger those events themselves):</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">                // fp&gt; please provide an example/use case</span>
<a name="l259"><span class="linenum"> 259</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_plugins_table')" href="../../../../_functions/load_plugins_table.html" onMouseOver="funcPopup(event,'load_plugins_table')">load_plugins_table</a>();
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>                  <a class="var it4726" onMouseOver="hilite(4726)" onMouseOut="lolite()" onClick="logVariable('rev_sorted_IDs')" href="../../../../_variables/rev_sorted_IDs.html">$rev_sorted_IDs</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../../../../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a> ); <span class="comment">// so higher priority overwrites lower (just for desc)</span>
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>                  foreach( <a class="var it4726" onMouseOver="hilite(4726)" onMouseOut="lolite()" onClick="logVariable('rev_sorted_IDs')" href="../../../../_variables/rev_sorted_IDs.html">$rev_sorted_IDs</a> as <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> )
<a name="l264"><span class="linenum"> 264</span></a>                  {
<a name="l265"><span class="linenum"> 265</span></a>                      <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> );
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>                      if( ! <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> )
<a name="l268"><span class="linenum"> 268</span></a>                      {
<a name="l269"><span class="linenum"> 269</span></a>                          continue;
<a name="l270"><span class="linenum"> 270</span></a>                      }
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>                      <a class="var it4728" onMouseOver="hilite(4728)" onMouseOut="lolite()" onClick="logVariable('extra_events')" href="../../../../_variables/extra_events.html">$extra_events</a> = <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a class="function" onClick="logFunction('GetExtraEvents')" href="../../../../_functions/getextraevents.html" onMouseOver="funcPopup(event,'getextraevents')">GetExtraEvents</a>();
<a name="l273"><span class="linenum"> 273</span></a>                      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4728" onMouseOver="hilite(4728)" onMouseOut="lolite()" onClick="logVariable('extra_events')" href="../../../../_variables/extra_events.html">$extra_events</a>) )
<a name="l274"><span class="linenum"> 274</span></a>                      {
<a name="l275"><span class="linenum"> 275</span></a>                          <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('supported_events')" href="../../../../_variables/supported_events.html">$supported_events</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('supported_events')" href="../../../../_variables/supported_events.html">$supported_events</a>, <a class="var it4728" onMouseOver="hilite(4728)" onMouseOut="lolite()" onClick="logVariable('extra_events')" href="../../../../_variables/extra_events.html">$extra_events</a> );
<a name="l276"><span class="linenum"> 276</span></a>                      }
<a name="l277"><span class="linenum"> 277</span></a>                  }
<a name="l278"><span class="linenum"> 278</span></a>              }
<a name="l279"><span class="linenum"> 279</span></a>          }
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>          return <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('supported_events')" href="../../../../_variables/supported_events.html">$supported_events</a>;
<a name="l282"><span class="linenum"> 282</span></a>      }
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>      <span class="comment">/**</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     * Un-register a plugin, only if forced.</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     *</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">     * This does not un-install it from DB, just from the internal indexes.</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">     *</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">     * @param Plugin</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">     * @param boolean Force unregistering</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     * @return boolean True, if unregistered</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">     */</span>
<a name="l294"><span class="linenum"> 294</span></a>  	function <a class="function" onClick="logFunction('unregister')" href="../../../../_functions/unregister.html" onMouseOver="funcPopup(event,'unregister')">unregister</a>( &amp; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, <a class="var it603" onMouseOver="hilite(603)" onMouseOut="lolite()" onClick="logVariable('force')" href="../../../../_variables/force.html">$force</a> = false )
<a name="l295"><span class="linenum"> 295</span></a>      {
<a name="l296"><span class="linenum"> 296</span></a>          if( ! <a class="var it603" onMouseOver="hilite(603)" onMouseOut="lolite()" onClick="logVariable('force')" href="../../../../_variables/force.html">$force</a> )
<a name="l297"><span class="linenum"> 297</span></a>          {
<a name="l298"><span class="linenum"> 298</span></a>              return false;
<a name="l299"><span class="linenum"> 299</span></a>          }
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>          return parent::<a class="function" onClick="logFunction('unregister')" href="../../../../_functions/unregister.html" onMouseOver="funcPopup(event,'unregister')">unregister</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, <a class="var it603" onMouseOver="hilite(603)" onMouseOut="lolite()" onClick="logVariable('force')" href="../../../../_variables/force.html">$force</a>);
<a name="l302"><span class="linenum"> 302</span></a>      }
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>      <span class="comment">/**</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * Count # of registrations of same plugin.</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     *</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     * Plugins with negative ID (auto-generated; not installed (yet)) will not get considered.</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     *</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     * @param string class name</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     * @return int # of regs</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">     */</span>
<a name="l313"><span class="linenum"> 313</span></a>  	function <a class="function" onClick="logFunction('count_regs')" href="../../../../_functions/count_regs.html" onMouseOver="funcPopup(event,'count_regs')">count_regs</a>( <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a> )
<a name="l314"><span class="linenum"> 314</span></a>      {
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a> = 0;
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>          foreach( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a> as <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> )
<a name="l318"><span class="linenum"> 318</span></a>          {
<a name="l319"><span class="linenum"> 319</span></a>              <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> );
<a name="l320"><span class="linenum"> 320</span></a>              if( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> &amp;&amp; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a> == <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a> &amp;&amp; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> &gt; 0 )
<a name="l321"><span class="linenum"> 321</span></a>              {
<a name="l322"><span class="linenum"> 322</span></a>                  <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>++;
<a name="l323"><span class="linenum"> 323</span></a>              }
<a name="l324"><span class="linenum"> 324</span></a>          }
<a name="l325"><span class="linenum"> 325</span></a>          return <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>;
<a name="l326"><span class="linenum"> 326</span></a>      }
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>      <span class="comment">/**</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">     * Discover and register all available plugins in the {@link $plugins_path} folder/subfolders.</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     */</span>
<a name="l332"><span class="linenum"> 332</span></a>  	function <a class="function" onClick="logFunction('discover')" href="../../../../_functions/discover.html" onMouseOver="funcPopup(event,'discover')">discover</a>()
<a name="l333"><span class="linenum"> 333</span></a>      {
<a name="l334"><span class="linenum"> 334</span></a>          global <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>, <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../../_variables/Timer.html">$Timer</a>;
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>          <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>('plugins_discover');
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Discovering plugins...', 'plugins' );
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">        // too inefficient: foreach( get_filenames( $this-&gt;plugins_path, array('inc_dirs' =&gt; false) ) as $path )</span>
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it2829" onMouseOver="hilite(2829)" onMouseOut="lolite()" onClick="logVariable('filename_params')" href="../../../../_variables/filename_params.html">$filename_params</a> = array(
<a name="l343"><span class="linenum"> 343</span></a>                  'inc_files'    =&gt; false,
<a name="l344"><span class="linenum"> 344</span></a>                  'recurse'    =&gt; false,
<a name="l345"><span class="linenum"> 345</span></a>              );
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">        // Get subdirs in $this-&gt;plugins_path</span>
<a name="l347"><span class="linenum"> 347</span></a>          <a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('subdirs')" href="../../../../_variables/subdirs.html">$subdirs</a> = array();
<a name="l348"><span class="linenum"> 348</span></a>          <a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('subdirs')" href="../../../../_variables/subdirs.html">$subdirs</a> = <a class="function" onClick="logFunction('get_filenames')" href="../../../../_functions/get_filenames.html" onMouseOver="funcPopup(event,'get_filenames')">get_filenames</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugins_path')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/plugins_path.html">plugins_path</a>, <a class="var it2829" onMouseOver="hilite(2829)" onMouseOut="lolite()" onClick="logVariable('filename_params')" href="../../../../_variables/filename_params.html">$filename_params</a> );
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>          if( empty(<a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('subdirs')" href="../../../../_variables/subdirs.html">$subdirs</a>) )
<a name="l351"><span class="linenum"> 351</span></a>              return;
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">        // Skip plugins which are in a directory that starts with an underscore (&quot;_&quot;)</span>
<a name="l354"><span class="linenum"> 354</span></a>          foreach( <a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('subdirs')" href="../../../../_variables/subdirs.html">$subdirs</a> as <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../../_variables/k.html">$k</a> =&gt; <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../../_variables/v.html">$v</a> )
<a name="l355"><span class="linenum"> 355</span></a>          {
<a name="l356"><span class="linenum"> 356</span></a>              <a class="var it4730" onMouseOver="hilite(4730)" onMouseOut="lolite()" onClick="logVariable('v_bn')" href="../../../../_variables/v_bn.html">$v_bn</a> = <a class="phpfunction" onClick="logFunction('basename')" href="../../../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../../_variables/v.html">$v</a>);
<a name="l357"><span class="linenum"> 357</span></a>              if( <a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="phpfunction" onClick="logFunction('basename')" href="../../../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it4730" onMouseOver="hilite(4730)" onMouseOut="lolite()" onClick="logVariable('v_bn')" href="../../../../_variables/v_bn.html">$v_bn</a>), 0, 1) == '_' || <a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it4730" onMouseOver="hilite(4730)" onMouseOut="lolite()" onClick="logVariable('v_bn')" href="../../../../_variables/v_bn.html">$v_bn</a>, -7) != '_plugin' )
<a name="l358"><span class="linenum"> 358</span></a>              {
<a name="l359"><span class="linenum"> 359</span></a>                  unset(<a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('subdirs')" href="../../../../_variables/subdirs.html">$subdirs</a>[<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../../_variables/k.html">$k</a>]);
<a name="l360"><span class="linenum"> 360</span></a>              }
<a name="l361"><span class="linenum"> 361</span></a>          }
<a name="l362"><span class="linenum"> 362</span></a>          <a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('subdirs')" href="../../../../_variables/subdirs.html">$subdirs</a>[] = <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugins_path')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/plugins_path.html">plugins_path</a>;
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>          foreach( <a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('subdirs')" href="../../../../_variables/subdirs.html">$subdirs</a> as <a class="var it4078" onMouseOver="hilite(4078)" onMouseOut="lolite()" onClick="logVariable('subdir')" href="../../../../_variables/subdir.html">$subdir</a> )
<a name="l365"><span class="linenum"> 365</span></a>          {
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">            // Some directories may be unreadable ( get_filenames returns false which is not an array )</span>
<a name="l367"><span class="linenum"> 367</span></a>              <a class="var it2829" onMouseOver="hilite(2829)" onMouseOut="lolite()" onClick="logVariable('filename_params')" href="../../../../_variables/filename_params.html">$filename_params</a> = array(
<a name="l368"><span class="linenum"> 368</span></a>                      'inc_dirs'    =&gt; false,
<a name="l369"><span class="linenum"> 369</span></a>                      'recurse'    =&gt; false,
<a name="l370"><span class="linenum"> 370</span></a>                  );
<a name="l371"><span class="linenum"> 371</span></a>              if( !<a class="var it738" onMouseOver="hilite(738)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a> = <a class="function" onClick="logFunction('get_filenames')" href="../../../../_functions/get_filenames.html" onMouseOver="funcPopup(event,'get_filenames')">get_filenames</a>( <a class="var it4078" onMouseOver="hilite(4078)" onMouseOut="lolite()" onClick="logVariable('subdir')" href="../../../../_variables/subdir.html">$subdir</a>, <a class="var it2829" onMouseOver="hilite(2829)" onMouseOut="lolite()" onClick="logVariable('filename_params')" href="../../../../_variables/filename_params.html">$filename_params</a> ) )
<a name="l372"><span class="linenum"> 372</span></a>              {
<a name="l373"><span class="linenum"> 373</span></a>                  continue;
<a name="l374"><span class="linenum"> 374</span></a>              }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>              foreach( <a class="var it738" onMouseOver="hilite(738)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a> as <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a> )
<a name="l377"><span class="linenum"> 377</span></a>              {
<a name="l378"><span class="linenum"> 378</span></a>                  if( ! (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~/_([^/]+)\.plugin\.php$~', <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../../_variables/match.html">$match</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_file')" href="../../../../_functions/is_file.html" onMouseOver="phpfuncPopup(event,'is_file')">is_file</a>( <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a> )) )
<a name="l379"><span class="linenum"> 379</span></a>                  {
<a name="l380"><span class="linenum"> 380</span></a>                      continue;
<a name="l381"><span class="linenum"> 381</span></a>                  }
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>                  <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a> = <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../../_variables/match.html">$match</a>[1].'_plugin';
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>                  if( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_classname(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>) )
<a name="l386"><span class="linenum"> 386</span></a>                  {
<a name="l387"><span class="linenum"> 387</span></a>                      <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Skipping duplicate <a class="function" onClick="logFunction('plugin')" href="../../../../_functions/plugin.html" onMouseOver="funcPopup(event,'plugin')">plugin</a> (classname '.<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>.')!', array('error', 'plugins') );
<a name="l388"><span class="linenum"> 388</span></a>                      continue;
<a name="l389"><span class="linenum"> 389</span></a>                  }
<a name="l390"><span class="linenum"> 390</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('register')" href="../../../../_functions/register.html" onMouseOver="funcPopup(event,'register')">register</a>( <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>, 0, -1, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a> ); <span class="comment">// auto-generate negative ID; will return string on error.</span>
<a name="l391"><span class="linenum"> 391</span></a>              }
<a name="l392"><span class="linenum"> 392</span></a>          }
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>          <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>('plugins_discover');
<a name="l395"><span class="linenum"> 395</span></a>      }
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>      <span class="comment">/**</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">     * Get the list of all possible values for apply_rendering (defines when a rendering Plugin can apply).</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     *</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     * @todo Add descriptions.</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     *</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     * @param boolean Return an associative array with description for the values?</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">     * @return array</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     */</span>
<a name="l406"><span class="linenum"> 406</span></a>  	function <a class="function" onClick="logFunction('get_apply_rendering_values')" href="../../../../_functions/get_apply_rendering_values.html" onMouseOver="funcPopup(event,'get_apply_rendering_values')">get_apply_rendering_values</a>( <a class="var it4731" onMouseOver="hilite(4731)" onMouseOut="lolite()" onClick="logVariable('with_desc')" href="../../../../_variables/with_desc.html">$with_desc</a> = false )
<a name="l407"><span class="linenum"> 407</span></a>      {
<a name="l408"><span class="linenum"> 408</span></a>          static <a class="var it4732" onMouseOver="hilite(4732)" onMouseOut="lolite()" onClick="logVariable('apply_rendering_values')" href="../../../../_variables/apply_rendering_values.html">$apply_rendering_values</a>;
<a name="l409"><span class="linenum"> 409</span></a>  
<a name="l410"><span class="linenum"> 410</span></a>          if( empty( <a class="var it4732" onMouseOver="hilite(4732)" onMouseOut="lolite()" onClick="logVariable('apply_rendering_values')" href="../../../../_variables/apply_rendering_values.html">$apply_rendering_values</a> ) )
<a name="l411"><span class="linenum"> 411</span></a>          {
<a name="l412"><span class="linenum"> 412</span></a>              <a class="var it4732" onMouseOver="hilite(4732)" onMouseOut="lolite()" onClick="logVariable('apply_rendering_values')" href="../../../../_variables/apply_rendering_values.html">$apply_rendering_values</a> = array(
<a name="l413"><span class="linenum"> 413</span></a>                      'stealth' =&gt; 'stealth',
<a name="l414"><span class="linenum"> 414</span></a>                      'always' =&gt; 'always',
<a name="l415"><span class="linenum"> 415</span></a>                      'opt-out' =&gt; 'opt-out',
<a name="l416"><span class="linenum"> 416</span></a>                      'opt-in' =&gt; 'opt-in',
<a name="l417"><span class="linenum"> 417</span></a>                      'lazy' =&gt; 'automatic', // The plugin will automatically deside to use rendering or not
<a name="l418"><span class="linenum"> 418</span></a>                      'never' =&gt; 'never',
<a name="l419"><span class="linenum"> 419</span></a>                  );
<a name="l420"><span class="linenum"> 420</span></a>          }
<a name="l421"><span class="linenum"> 421</span></a>          if( ! <a class="var it4731" onMouseOver="hilite(4731)" onMouseOut="lolite()" onClick="logVariable('with_desc')" href="../../../../_variables/with_desc.html">$with_desc</a> )
<a name="l422"><span class="linenum"> 422</span></a>          {
<a name="l423"><span class="linenum"> 423</span></a>              return <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it4732" onMouseOver="hilite(4732)" onMouseOut="lolite()" onClick="logVariable('apply_rendering_values')" href="../../../../_variables/apply_rendering_values.html">$apply_rendering_values</a> );
<a name="l424"><span class="linenum"> 424</span></a>          }
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>          return <a class="var it4732" onMouseOver="hilite(4732)" onMouseOut="lolite()" onClick="logVariable('apply_rendering_values')" href="../../../../_variables/apply_rendering_values.html">$apply_rendering_values</a>;
<a name="l427"><span class="linenum"> 427</span></a>      }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>      <span class="comment">/**</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     * Discover plugin events from its source file.</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     *</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     * Get a list of methods that are supported as events out of the Plugin's</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     * class definition.</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">     *</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">     * @todo Extend to get list of defined classes and global functions and check this list before sourcing/including a Plugin! (prevent fatal error)</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     *</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     * @return array</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     */</span>
<a name="l440"><span class="linenum"> 440</span></a>  	function <a class="function" onClick="logFunction('get_registered_events')" href="../../../../_functions/get_registered_events.html" onMouseOver="funcPopup(event,'get_registered_events')">get_registered_events</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> )
<a name="l441"><span class="linenum"> 441</span></a>      {
<a name="l442"><span class="linenum"> 442</span></a>          global <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../../_variables/Timer.html">$Timer</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>          <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>( 'plugins_detect_events' );
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it4733" onMouseOver="hilite(4733)" onMouseOut="lolite()" onClick="logVariable('plugin_class_methods')" href="../../../../_variables/plugin_class_methods.html">$plugin_class_methods</a> = array();
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>          if( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('group')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/group.html">group</a> == 'rendering' )
<a name="l449"><span class="linenum"> 449</span></a>          { // All Plugin from 'rendering' groups handle the FilterCommentContent
<a name="l450"><span class="linenum"> 450</span></a>              <a class="var it4733" onMouseOver="hilite(4733)" onMouseOut="lolite()" onClick="logVariable('plugin_class_methods')" href="../../../../_variables/plugin_class_methods.html">$plugin_class_methods</a>[] = 'FilterCommentContent';
<a name="l451"><span class="linenum"> 451</span></a>          }
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>          if( ! <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('token_get_all') )
<a name="l454"><span class="linenum"> 454</span></a>          {
<a name="l455"><span class="linenum"> 455</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( '<a class="function" onClick="logFunction('get_registered_events')" href="../../../../_functions/get_registered_events.html" onMouseOver="funcPopup(event,'get_registered_events')">get_registered_events</a>(): PHP function <a class="phpfunction" onClick="logFunction('token_get_all')" href="../../../../_functions/token_get_all.html" onMouseOver="phpfuncPopup(event,'token_get_all')">token_get_all</a>() is not available', array('plugins', 'error') );
<a name="l456"><span class="linenum"> 456</span></a>              return array();
<a name="l457"><span class="linenum"> 457</span></a>          }
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>          if( ! <a class="phpfunction" onClick="logFunction('is_readable')" href="../../../../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classfile_path')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classfile_path.html">classfile_path</a>) )
<a name="l460"><span class="linenum"> 460</span></a>          {
<a name="l461"><span class="linenum"> 461</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( '<a class="function" onClick="logFunction('get_registered_events')" href="../../../../_functions/get_registered_events.html" onMouseOver="funcPopup(event,'get_registered_events')">get_registered_events</a>(): &quot;'.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classfile_path')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classfile_path.html">classfile_path</a>.'&quot; is not readable.', array('plugins', 'error') );
<a name="l462"><span class="linenum"> 462</span></a>              return array();
<a name="l463"><span class="linenum"> 463</span></a>          }
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>          if( ( <a class="var it4734" onMouseOver="hilite(4734)" onMouseOut="lolite()" onClick="logVariable('classfile_contents')" href="../../../../_variables/classfile_contents.html">$classfile_contents</a> = @<a class="phpfunction" onClick="logFunction('file_get_contents')" href="../../../../_functions/file_get_contents.html" onMouseOver="phpfuncPopup(event,'file_get_contents')">file_get_contents</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classfile_path')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classfile_path.html">classfile_path</a> ) ) === false )
<a name="l466"><span class="linenum"> 466</span></a>          {
<a name="l467"><span class="linenum"> 467</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( '<a class="function" onClick="logFunction('get_registered_events')" href="../../../../_functions/get_registered_events.html" onMouseOver="funcPopup(event,'get_registered_events')">get_registered_events</a>(): &quot;'.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classfile_path')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classfile_path.html">classfile_path</a>.'&quot; could not get read.', array('plugins', 'error') );
<a name="l468"><span class="linenum"> 468</span></a>              return array();
<a name="l469"><span class="linenum"> 469</span></a>          }
<a name="l470"><span class="linenum"> 470</span></a>          <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('supported_events')" href="../../../../_variables/supported_events.html">$supported_events</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_supported_events')" href="../../../../_functions/get_supported_events.html" onMouseOver="funcPopup(event,'get_supported_events')">get_supported_events</a>() );
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">        // TODO: allow optional Plugin callback to get list of methods. Like Plugin::GetRegisteredEvents().</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">        // fp&gt; bloated. what problem does it solve?</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">        // dh&gt; With a captcha_base.class.php the actual plugin (extending the class) would have to define all the event methods and not just the methods to provide the tests.</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">        //     With a GetRegisteredEvents method in captcha_base.class.php this would not be required.</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">        //     The whole point of such a base class would be to simplify writing a captcha plugin and IMHO it's &quot;bloated&quot; to force a whole block of methods into it that do only call the parent method.</span>
<a name="l477"><span class="linenum"> 477</span></a>  
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">        // TODO: dh&gt; only match in the relevant &quot;class block&quot;</span>
<a name="l479"><span class="linenum"> 479</span></a>          <a class="var it4735" onMouseOver="hilite(4735)" onMouseOut="lolite()" onClick="logVariable('had_func_token')" href="../../../../_variables/had_func_token.html">$had_func_token</a> = false;
<a name="l480"><span class="linenum"> 480</span></a>          <a class="var it4736" onMouseOver="hilite(4736)" onMouseOut="lolite()" onClick="logVariable('token_all')" href="../../../../_variables/token_all.html">$token_all</a> = <a class="phpfunction" onClick="logFunction('token_get_all')" href="../../../../_functions/token_get_all.html" onMouseOver="phpfuncPopup(event,'token_get_all')">token_get_all</a>( <a class="var it4734" onMouseOver="hilite(4734)" onMouseOut="lolite()" onClick="logVariable('classfile_contents')" href="../../../../_variables/classfile_contents.html">$classfile_contents</a> );
<a name="l481"><span class="linenum"> 481</span></a>          foreach( <a class="var it4736" onMouseOver="hilite(4736)" onMouseOut="lolite()" onClick="logVariable('token_all')" href="../../../../_variables/token_all.html">$token_all</a> as <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a> )
<a name="l482"><span class="linenum"> 482</span></a>          {
<a name="l483"><span class="linenum"> 483</span></a>              if( ! <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a> ) )
<a name="l484"><span class="linenum"> 484</span></a>              {    // Single characters does not interest us:
<a name="l485"><span class="linenum"> 485</span></a>                  continue;
<a name="l486"><span class="linenum"> 486</span></a>              }
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>              if( <a class="var it4735" onMouseOver="hilite(4735)" onMouseOut="lolite()" onClick="logVariable('had_func_token')" href="../../../../_variables/had_func_token.html">$had_func_token</a> &amp;&amp; <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>[0] == T_STRING )
<a name="l489"><span class="linenum"> 489</span></a>              {    // We got a function name...
<a name="l490"><span class="linenum"> 490</span></a>                  if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>[1], <a class="var it4733" onMouseOver="hilite(4733)" onMouseOut="lolite()" onClick="logVariable('plugin_class_methods')" href="../../../../_variables/plugin_class_methods.html">$plugin_class_methods</a> )
<a name="l491"><span class="linenum"> 491</span></a>                      &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>[1], <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('supported_events')" href="../../../../_variables/supported_events.html">$supported_events</a> ) )
<a name="l492"><span class="linenum"> 492</span></a>                  {    // ...and it is unique and matches one of our supported events:
<a name="l493"><span class="linenum"> 493</span></a>                      <a class="var it4733" onMouseOver="hilite(4733)" onMouseOut="lolite()" onClick="logVariable('plugin_class_methods')" href="../../../../_variables/plugin_class_methods.html">$plugin_class_methods</a>[] = <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>[1];
<a name="l494"><span class="linenum"> 494</span></a>                  }
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">                // Search for the next &quot;function&quot; token:</span>
<a name="l497"><span class="linenum"> 497</span></a>                  <a class="var it4735" onMouseOver="hilite(4735)" onMouseOut="lolite()" onClick="logVariable('had_func_token')" href="../../../../_variables/had_func_token.html">$had_func_token</a> = false;
<a name="l498"><span class="linenum"> 498</span></a>              }
<a name="l499"><span class="linenum"> 499</span></a>              elseif( ! <a class="var it4735" onMouseOver="hilite(4735)" onMouseOut="lolite()" onClick="logVariable('had_func_token')" href="../../../../_variables/had_func_token.html">$had_func_token</a> &amp;&amp; <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>[0] == T_FUNCTION )
<a name="l500"><span class="linenum"> 500</span></a>              {    // Begin searching for the function name which must be a T_STRING:
<a name="l501"><span class="linenum"> 501</span></a>                  <a class="var it4735" onMouseOver="hilite(4735)" onMouseOut="lolite()" onClick="logVariable('had_func_token')" href="../../../../_variables/had_func_token.html">$had_func_token</a> = true;
<a name="l502"><span class="linenum"> 502</span></a>              }
<a name="l503"><span class="linenum"> 503</span></a>          }
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>          if( ! <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it4733" onMouseOver="hilite(4733)" onMouseOut="lolite()" onClick="logVariable('plugin_class_methods')" href="../../../../_variables/plugin_class_methods.html">$plugin_class_methods</a> ) )
<a name="l506"><span class="linenum"> 506</span></a>          {
<a name="l507"><span class="linenum"> 507</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'No functions found in file &quot;'.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classfile_path')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classfile_path.html">classfile_path</a>.'&quot;.', array('plugins', 'error') );
<a name="l508"><span class="linenum"> 508</span></a>              return array();
<a name="l509"><span class="linenum"> 509</span></a>          }
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>          <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>( 'plugins_detect_events' );
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>          return <a class="var it4733" onMouseOver="hilite(4733)" onMouseOut="lolite()" onClick="logVariable('plugin_class_methods')" href="../../../../_variables/plugin_class_methods.html">$plugin_class_methods</a>;
<a name="l514"><span class="linenum"> 514</span></a>      }
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>      <span class="comment">/**</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">     * Install a plugin into DB.</span>
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">     *</span>
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">     * NOTE: this won't install necessary DB changes and not trigger {@link Plugin::AfterInstall}!</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">     *</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">     * @param string Classname of the plugin to install</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">     * @param string Initial DB Status of the plugin (&quot;enabled&quot;, &quot;disabled&quot;, &quot;needs_config&quot;, &quot;broken&quot;)</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">     * @param string Optional classfile path, if not default (used for tests).</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">     * @param boolean Must the plugin exist (classfile_path and classname)?</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">     *                This is used internally to be able to unregister a non-existing plugin.</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">     * @return Plugin The installed Plugin (perhaps with $install_dep_notes set) or a string in case of error.</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">     */</span>
<a name="l529"><span class="linenum"> 529</span></a>      function &amp; <a class="function" onClick="logFunction('install')" href="../../../../_functions/install.html" onMouseOver="funcPopup(event,'install')">install</a>( <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>, <a class="var it2391" onMouseOver="hilite(2391)" onMouseOut="lolite()" onClick="logVariable('plug_status')" href="../../../../_variables/plug_status.html">$plug_status</a> = 'enabled', <a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('classfile_path')" href="../../../../_variables/classfile_path.html">$classfile_path</a> = NULL, <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('must_exists')" href="../../../../_variables/must_exists.html">$must_exists</a> = true )
<a name="l530"><span class="linenum"> 530</span></a>      {
<a name="l531"><span class="linenum"> 531</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment">        // Load Plugins data from T_plugins (only once), ordered by priority.</span>
<a name="l534"><span class="linenum"> 534</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_plugins_table')" href="../../../../_functions/load_plugins_table.html" onMouseOver="funcPopup(event,'load_plugins_table')">load_plugins_table</a>();
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">        // Register the plugin:</span>
<a name="l537"><span class="linenum"> 537</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('register')" href="../../../../_functions/register.html" onMouseOver="funcPopup(event,'register')">register</a>( <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>, 0, -1, <a class="var it736" onMouseOver="hilite(736)" onMouseOut="lolite()" onClick="logVariable('classfile_path')" href="../../../../_variables/classfile_path.html">$classfile_path</a>, <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('must_exists')" href="../../../../_variables/must_exists.html">$must_exists</a> ); <span class="comment">// Auto-generates negative ID; New ID will be set a few lines below</span>
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>          if( <a class="phpfunction" onClick="logFunction('is_string')" href="../../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>) )
<a name="l540"><span class="linenum"> 540</span></a>          { // return error message from <a class="function" onClick="logFunction('register')" href="../../../../_functions/register.html" onMouseOver="funcPopup(event,'register')">register</a>()
<a name="l541"><span class="linenum"> 541</span></a>              return <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>;
<a name="l542"><span class="linenum"> 542</span></a>          }
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>          if( isset(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('number_of_installs')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/number_of_installs.html">number_of_installs</a>)
<a name="l545"><span class="linenum"> 545</span></a>              &amp;&amp; ( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_regs')" href="../../../../_functions/count_regs.html" onMouseOver="funcPopup(event,'count_regs')">count_regs</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a> ) &gt;= <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('number_of_installs')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/number_of_installs.html">number_of_installs</a> ) )
<a name="l546"><span class="linenum"> 546</span></a>          {
<a name="l547"><span class="linenum"> 547</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('unregister')" href="../../../../_functions/unregister.html" onMouseOver="funcPopup(event,'unregister')">unregister</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, true );
<a name="l548"><span class="linenum"> 548</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The plugin cannot be installed again.');
<a name="l549"><span class="linenum"> 549</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l550"><span class="linenum"> 550</span></a>          }
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>          <a class="var it4738" onMouseOver="hilite(4738)" onMouseOut="lolite()" onClick="logVariable('install_return')" href="../../../../_variables/install_return.html">$install_return</a> = <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a class="function" onClick="logFunction('BeforeInstall')" href="../../../../_functions/beforeinstall.html" onMouseOver="funcPopup(event,'beforeinstall')">BeforeInstall</a>();
<a name="l553"><span class="linenum"> 553</span></a>          if( <a class="var it4738" onMouseOver="hilite(4738)" onMouseOut="lolite()" onClick="logVariable('install_return')" href="../../../../_variables/install_return.html">$install_return</a> !== true )
<a name="l554"><span class="linenum"> 554</span></a>          {
<a name="l555"><span class="linenum"> 555</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('unregister')" href="../../../../_functions/unregister.html" onMouseOver="funcPopup(event,'unregister')">unregister</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, true );
<a name="l556"><span class="linenum"> 556</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The installation of the plugin failed.');
<a name="l557"><span class="linenum"> 557</span></a>              if( <a class="phpfunction" onClick="logFunction('is_string')" href="../../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it4738" onMouseOver="hilite(4738)" onMouseOut="lolite()" onClick="logVariable('install_return')" href="../../../../_variables/install_return.html">$install_return</a>) )
<a name="l558"><span class="linenum"> 558</span></a>              {
<a name="l559"><span class="linenum"> 559</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;br /&gt;'.<a class="var it4738" onMouseOver="hilite(4738)" onMouseOut="lolite()" onClick="logVariable('install_return')" href="../../../../_variables/install_return.html">$install_return</a>;
<a name="l560"><span class="linenum"> 560</span></a>              }
<a name="l561"><span class="linenum"> 561</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l562"><span class="linenum"> 562</span></a>          }
<a name="l563"><span class="linenum"> 563</span></a>  
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">        // Dependencies:</span>
<a name="l565"><span class="linenum"> 565</span></a>          <span class="comment">/*</span>
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment">        // We must check dependencies against installed Plugins ($Plugins)</span>
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">        // TODO: not possible anymore.. check it..</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">        global $Plugins;</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">        $dep_msgs = $Plugins-&gt;validate_dependencies( $Plugin, 'enable' );</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">        */</span>
<a name="l571"><span class="linenum"> 571</span></a>          <a class="var it4739" onMouseOver="hilite(4739)" onMouseOut="lolite()" onClick="logVariable('dep_msgs')" href="../../../../_variables/dep_msgs.html">$dep_msgs</a> = <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('validate_dependencies')" href="../../../../_functions/validate_dependencies.html" onMouseOver="funcPopup(event,'validate_dependencies')">validate_dependencies</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, 'enable' );
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>          if( ! empty( <a class="var it4739" onMouseOver="hilite(4739)" onMouseOut="lolite()" onClick="logVariable('dep_msgs')" href="../../../../_variables/dep_msgs.html">$dep_msgs</a>['error'] ) )
<a name="l574"><span class="linenum"> 574</span></a>          { // fatal errors (required dependencies):
<a name="l575"><span class="linenum"> 575</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('unregister')" href="../../../../_functions/unregister.html" onMouseOver="funcPopup(event,'unregister')">unregister</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, true );
<a name="l576"><span class="linenum"> 576</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Some plugin dependencies are not fulfilled:').' &lt;ul&gt;&lt;li&gt;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&lt;/li&gt;&lt;li&gt;', <a class="var it4739" onMouseOver="hilite(4739)" onMouseOut="lolite()" onClick="logVariable('dep_msgs')" href="../../../../_variables/dep_msgs.html">$dep_msgs</a>['error'] ).'&lt;/li&gt;&lt;/ul&gt;';
<a name="l577"><span class="linenum"> 577</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l578"><span class="linenum"> 578</span></a>          }
<a name="l579"><span class="linenum"> 579</span></a>  
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">        // All OK, install:</span>
<a name="l581"><span class="linenum"> 581</span></a>          if( empty(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a>) )
<a name="l582"><span class="linenum"> 582</span></a>          {
<a name="l583"><span class="linenum"> 583</span></a>              <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a> = NULL;
<a name="l584"><span class="linenum"> 584</span></a>          }
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('status')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> = <a class="var it2391" onMouseOver="hilite(2391)" onMouseOut="lolite()" onClick="logVariable('plug_status')" href="../../../../_variables/plug_status.html">$plug_status</a>;
<a name="l587"><span class="linenum"> 587</span></a>  
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">        // Record into DB</span>
<a name="l589"><span class="linenum"> 589</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( '
<a name="l592"><span class="linenum"> 592</span></a>                  INSERT INTO T_plugins( plug_classname, plug_priority, plug_code, plug_version, plug_status )
<a name="l593"><span class="linenum"> 593</span></a>                  VALUES( &quot;'.<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>.'&quot;, '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('priority')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/priority.html">priority</a>.', '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a>).', '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('version')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/version.html">version</a>).', '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('status')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a>).' ) ' );
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">        // Unset auto-generated ID info</span>
<a name="l596"><span class="linenum"> 596</span></a>          unset( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_ID_Plugins')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_ID_Plugins.html">index_ID_Plugins</a>[ <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ] );
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a> );
<a name="l598"><span class="linenum"> 598</span></a>  
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">        // New ID:</span>
<a name="l600"><span class="linenum"> 600</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('insert_id')" class="var it8966" onMouseOver="hilite(8966)" onMouseOut="lolite()" href="../../../../_variables/insert_id.html">insert_id</a>;
<a name="l601"><span class="linenum"> 601</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_ID_Plugins')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_ID_Plugins.html">index_ID_Plugins</a>[ <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ] = &amp; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>;
<a name="l602"><span class="linenum"> 602</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_ID_rows')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_ID_rows.html">index_ID_rows</a>[ <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ] = array(
<a name="l603"><span class="linenum"> 603</span></a>                  'plug_ID' =&gt; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l604"><span class="linenum"> 604</span></a>                  'plug_priority' =&gt; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('priority')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/priority.html">priority</a>,
<a name="l605"><span class="linenum"> 605</span></a>                  'plug_classname' =&gt; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>,
<a name="l606"><span class="linenum"> 606</span></a>                  'plug_code' =&gt; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a>,
<a name="l607"><span class="linenum"> 607</span></a>                  'plug_status' =&gt; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('status')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a>,
<a name="l608"><span class="linenum"> 608</span></a>                  'plug_version' =&gt; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('version')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/version.html">version</a>,
<a name="l609"><span class="linenum"> 609</span></a>              );
<a name="l610"><span class="linenum"> 610</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a>[<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>] = <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_events')" href="../../../../_functions/save_events.html" onMouseOver="funcPopup(event,'save_events')">save_events</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> );
<a name="l613"><span class="linenum"> 613</span></a>  
<a name="l614"><span class="linenum"> 614</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l615"><span class="linenum"> 615</span></a>  
<a name="l616"><span class="linenum"> 616</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Installed plugin: '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('name')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>.' ID: '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, 'plugins' );
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>          if( ! empty(<a class="var it4739" onMouseOver="hilite(4739)" onMouseOut="lolite()" onClick="logVariable('dep_msgs')" href="../../../../_variables/dep_msgs.html">$dep_msgs</a>['note']) )
<a name="l619"><span class="linenum"> 619</span></a>          { // Add dependency notes
<a name="l620"><span class="linenum"> 620</span></a>              <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('install_dep_notes')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/install_dep_notes.html">install_dep_notes</a> = <a class="var it4739" onMouseOver="hilite(4739)" onMouseOut="lolite()" onClick="logVariable('dep_msgs')" href="../../../../_variables/dep_msgs.html">$dep_msgs</a>['note'];
<a name="l621"><span class="linenum"> 621</span></a>          }
<a name="l622"><span class="linenum"> 622</span></a>  
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">        // Do the stuff that we've skipped in register method at the beginning:</span>
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('init_settings')" href="../../../../_functions/init_settings.html" onMouseOver="funcPopup(event,'init_settings')">init_settings</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> );
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../../_variables/tmp_params.html">$tmp_params</a> = array('db_row' =&gt; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_ID_rows')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_ID_rows.html">index_ID_rows</a>[<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>], 'is_installed' =&gt; false);
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>          if( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a class="function" onClick="logFunction('PluginInit')" href="../../../../_functions/plugininit.html" onMouseOver="funcPopup(event,'plugininit')">PluginInit</a>( <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../../_variables/tmp_params.html">$tmp_params</a> ) === false &amp;&amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('unregister')" href="../../../../_functions/unregister.html" onMouseOver="funcPopup(event,'unregister')">unregister</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> ) )
<a name="l630"><span class="linenum"> 630</span></a>          {
<a name="l631"><span class="linenum"> 631</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Unregistered plugin, because PluginInit returned false.', 'plugins' );
<a name="l632"><span class="linenum"> 632</span></a>              <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> = '';
<a name="l633"><span class="linenum"> 633</span></a>          }
<a name="l634"><span class="linenum"> 634</span></a>  
<a name="l635"><span class="linenum"> 635</span></a>          if( ! <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_IS_INSTALLING')" href="../../../../_constants/EVO_IS_INSTALLING.html" onMouseOver="constPopup(event,'EVO_IS_INSTALLING')">EVO_IS_INSTALLING</a>') || ! <a class="constant" onClick="logConstant('EVO_IS_INSTALLING')" href="../../../../_constants/EVO_IS_INSTALLING.html" onMouseOver="constPopup(event,'EVO_IS_INSTALLING')">EVO_IS_INSTALLING</a> )
<a name="l636"><span class="linenum"> 636</span></a>          { // do not sort, if we're installing/upgrading.. instantiating Plugins might cause a fatal error!
<a name="l637"><span class="linenum"> 637</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="phpfunction" onClick="logFunction('sort')" href="../../../../_functions/sort.html" onMouseOver="phpfuncPopup(event,'sort')">sort</a>();
<a name="l638"><span class="linenum"> 638</span></a>          }
<a name="l639"><span class="linenum"> 639</span></a>  
<a name="l640"><span class="linenum"> 640</span></a>          return <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>;
<a name="l641"><span class="linenum"> 641</span></a>      }
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>  
<a name="l644"><span class="linenum"> 644</span></a>      <span class="comment">/**</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">     * Uninstall a plugin.</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">     *</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">     * Removes the Plugin, its Settings and Events from the database.</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     *</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     * @return boolean True on success</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     */</span>
<a name="l651"><span class="linenum"> 651</span></a>  	function <a class="function" onClick="logFunction('uninstall')" href="../../../../_functions/uninstall.html" onMouseOver="funcPopup(event,'uninstall')">uninstall</a>( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> )
<a name="l652"><span class="linenum"> 652</span></a>      {
<a name="l653"><span class="linenum"> 653</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l654"><span class="linenum"> 654</span></a>  
<a name="l655"><span class="linenum"> 655</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Uninstalling <a class="function" onClick="logFunction('plugin')" href="../../../../_functions/plugin.html" onMouseOver="funcPopup(event,'plugin')">plugin</a> (ID '.<a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>.')...', 'plugins' );
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> ); <span class="comment">// get the Plugin before any not loaded data might get deleted below</span>
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l660"><span class="linenum"> 660</span></a>  
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">        // Delete Plugin settings (constraints)</span>
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;DELETE FROM T_pluginsettings
<a name="l663"><span class="linenum"> 663</span></a>                        WHERE pset_plug_ID = <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>&quot; );
<a name="l664"><span class="linenum"> 664</span></a>  
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment">        // Delete Plugin user settings (constraints)</span>
<a name="l666"><span class="linenum"> 666</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;DELETE FROM T_pluginusersettings
<a name="l667"><span class="linenum"> 667</span></a>                        WHERE puset_plug_ID = <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>&quot; );
<a name="l668"><span class="linenum"> 668</span></a>  
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">        // Delete Plugin events (constraints)</span>
<a name="l670"><span class="linenum"> 670</span></a>          <a class="var it4742" onMouseOver="hilite(4742)" onMouseOut="lolite()" onClick="logVariable('plugin_events')" href="../../../../_variables/plugin_events.html">$plugin_events</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( '
<a name="l671"><span class="linenum"> 671</span></a>                      SELECT pevt_event
<a name="l672"><span class="linenum"> 672</span></a>                      FROM T_pluginevents
<a name="l673"><span class="linenum"> 673</span></a>                      WHERE pevt_enabled = 1'
<a name="l674"><span class="linenum"> 674</span></a>          );
<a name="l675"><span class="linenum"> 675</span></a>          <a class="var it4742" onMouseOver="hilite(4742)" onMouseOut="lolite()" onClick="logVariable('plugin_events')" href="../../../../_variables/plugin_events.html">$plugin_events</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '.', <a class="var it4742" onMouseOver="hilite(4742)" onMouseOut="lolite()" onClick="logVariable('plugin_events')" href="../../../../_variables/plugin_events.html">$plugin_events</a> );
<a name="l676"><span class="linenum"> 676</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it4742" onMouseOver="hilite(4742)" onMouseOut="lolite()" onClick="logVariable('plugin_events')" href="../../../../_variables/plugin_events.html">$plugin_events</a>, 'RenderItemAs' ) !== false )
<a name="l677"><span class="linenum"> 677</span></a>          { // Clear pre-rendered content cache, if RenderItemAs* events get removed:
<a name="l678"><span class="linenum"> 678</span></a>              <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_items__prerendering WHERE 1=1' );
<a name="l679"><span class="linenum"> 679</span></a>          }
<a name="l680"><span class="linenum"> 680</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it4742" onMouseOver="hilite(4742)" onMouseOut="lolite()" onClick="logVariable('plugin_events')" href="../../../../_variables/plugin_events.html">$plugin_events</a>, 'FilterCommentContent' ) !== false )
<a name="l681"><span class="linenum"> 681</span></a>          { // Clear pre-rendered comments content cache, if FilterCommentContent plugin get removed
<a name="l682"><span class="linenum"> 682</span></a>              <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_comments__prerendering WHERE 1=1' );
<a name="l683"><span class="linenum"> 683</span></a>          }
<a name="l684"><span class="linenum"> 684</span></a>  
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">        // Remove plugin collection settings</span>
<a name="l686"><span class="linenum"> 686</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;DELETE FROM T_coll_settings
<a name="l687"><span class="linenum"> 687</span></a>                        WHERE cset_name LIKE 'plugin&quot;.<a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>.&quot;_%'&quot; );
<a name="l688"><span class="linenum"> 688</span></a>  
<a name="l689"><span class="linenum"> 689</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;DELETE FROM T_pluginevents
<a name="l690"><span class="linenum"> 690</span></a>                        WHERE pevt_plug_ID = <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>&quot; );
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">        // Delete from DB</span>
<a name="l693"><span class="linenum"> 693</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;DELETE FROM T_plugins
<a name="l694"><span class="linenum"> 694</span></a>                        WHERE plug_ID = <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>&quot; );
<a name="l695"><span class="linenum"> 695</span></a>  
<a name="l696"><span class="linenum"> 696</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>          if( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> )
<a name="l699"><span class="linenum"> 699</span></a>          {
<a name="l700"><span class="linenum"> 700</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('unregister')" href="../../../../_functions/unregister.html" onMouseOver="funcPopup(event,'unregister')">unregister</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, true );
<a name="l701"><span class="linenum"> 701</span></a>          }
<a name="l702"><span class="linenum"> 702</span></a>  
<a name="l703"><span class="linenum"> 703</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Uninstalled <a class="function" onClick="logFunction('plugin')" href="../../../../_functions/plugin.html" onMouseOver="funcPopup(event,'plugin')">plugin</a> (ID '.<a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>.').', 'plugins' );
<a name="l704"><span class="linenum"> 704</span></a>          return true;
<a name="l705"><span class="linenum"> 705</span></a>      }
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>  
<a name="l708"><span class="linenum"> 708</span></a>      <span class="comment">/**</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">     * (Re)load Plugin Events for enabled (normal use) or all (admin use) plugins.</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">     *</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">     * This is the same as {@link Plugins::load_events()} except that it loads all Plugins (not just enabled ones)</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">     */</span>
<a name="l713"><span class="linenum"> 713</span></a>  	function <a class="function" onClick="logFunction('load_events')" href="../../../../_functions/load_events.html" onMouseOver="funcPopup(event,'load_events')">load_events</a>()
<a name="l714"><span class="linenum"> 714</span></a>      {
<a name="l715"><span class="linenum"> 715</span></a>          global <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_event_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_event_IDs.html">index_event_IDs</a> = array();
<a name="l718"><span class="linenum"> 718</span></a>  
<a name="l719"><span class="linenum"> 719</span></a>          <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Loading plugin events.', 'plugins' );
<a name="l720"><span class="linenum"> 720</span></a>          foreach( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( '
<a name="l721"><span class="linenum"> 721</span></a>                  SELECT pevt_plug_ID, pevt_event
<a name="l722"><span class="linenum"> 722</span></a>                      FROM T_pluginevents INNER JOIN T_plugins ON pevt_plug_ID = plug_ID
<a name="l723"><span class="linenum"> 723</span></a>                   WHERE pevt_enabled &gt; 0
<a name="l724"><span class="linenum"> 724</span></a>                   ORDER BY plug_priority, plug_classname', <a class="constant" onClick="logConstant('OBJECT')" href="../../../../_constants/OBJECT.html" onMouseOver="constPopup(event,'OBJECT')">OBJECT</a>, 'Loading plugin events' ) as <a class="var it4744" onMouseOver="hilite(4744)" onMouseOut="lolite()" onClick="logVariable('l_row')" href="../../../../_variables/l_row.html">$l_row</a> )
<a name="l725"><span class="linenum"> 725</span></a>          {
<a name="l726"><span class="linenum"> 726</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_event_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_event_IDs.html">index_event_IDs</a>[<a class="var it4744" onMouseOver="hilite(4744)" onMouseOut="lolite()" onClick="logVariable('l_row')" href="../../../../_variables/l_row.html">$l_row</a>-&gt;<a onClick="logVariable('pevt_event')" class="var it8980" onMouseOver="hilite(8980)" onMouseOut="lolite()" href="../../../../_variables/pevt_event.html">pevt_event</a>][] = <a class="var it4744" onMouseOver="hilite(4744)" onMouseOut="lolite()" onClick="logVariable('l_row')" href="../../../../_variables/l_row.html">$l_row</a>-&gt;<a onClick="logVariable('pevt_plug_ID')" class="var it8980" onMouseOver="hilite(8980)" onMouseOut="lolite()" href="../../../../_variables/pevt_plug_ID.html">pevt_plug_ID</a>;
<a name="l727"><span class="linenum"> 727</span></a>          }
<a name="l728"><span class="linenum"> 728</span></a>      }
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>  
<a name="l731"><span class="linenum"> 731</span></a>      <span class="comment">/**</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">     * Save the events that the plugin provides into DB, while removing obsolete</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment">     * entries (that the plugin does not register anymore).</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">     *</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">     * @param Plugin Plugin to save events for</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">     * @param array List of events to save as enabled for the Plugin.</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">     *              By default all provided events get saved as enabled. Pass array() to discover only new ones.</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">     * @param array List of events to save as disabled for the Plugin.</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">     *              By default, no events get disabled. Disabling an event takes priority over enabling.</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">     * @return boolean True, if events have changed, false if not.</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     */</span>
<a name="l742"><span class="linenum"> 742</span></a>  	function <a class="function" onClick="logFunction('save_events')" href="../../../../_functions/save_events.html" onMouseOver="funcPopup(event,'save_events')">save_events</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, <a class="var it3629" onMouseOver="hilite(3629)" onMouseOut="lolite()" onClick="logVariable('enable_events')" href="../../../../_variables/enable_events.html">$enable_events</a> = NULL, <a class="var it3630" onMouseOver="hilite(3630)" onMouseOut="lolite()" onClick="logVariable('disable_events')" href="../../../../_variables/disable_events.html">$disable_events</a> = NULL )
<a name="l743"><span class="linenum"> 743</span></a>      {
<a name="l744"><span class="linenum"> 744</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l745"><span class="linenum"> 745</span></a>  
<a name="l746"><span class="linenum"> 746</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = false;
<a name="l747"><span class="linenum"> 747</span></a>  
<a name="l748"><span class="linenum"> 748</span></a>          <a class="var it4747" onMouseOver="hilite(4747)" onMouseOut="lolite()" onClick="logVariable('saved_events')" href="../../../../_variables/saved_events.html">$saved_events</a> = array();
<a name="l749"><span class="linenum"> 749</span></a>          foreach( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( '
<a name="l750"><span class="linenum"> 750</span></a>                  SELECT pevt_event, pevt_enabled
<a name="l751"><span class="linenum"> 751</span></a>                    FROM T_pluginevents
<a name="l752"><span class="linenum"> 752</span></a>                   WHERE pevt_plug_ID = '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) as <a class="var it4744" onMouseOver="hilite(4744)" onMouseOut="lolite()" onClick="logVariable('l_row')" href="../../../../_variables/l_row.html">$l_row</a> )
<a name="l753"><span class="linenum"> 753</span></a>          {
<a name="l754"><span class="linenum"> 754</span></a>              <a class="var it4747" onMouseOver="hilite(4747)" onMouseOut="lolite()" onClick="logVariable('saved_events')" href="../../../../_variables/saved_events.html">$saved_events</a>[<a class="var it4744" onMouseOver="hilite(4744)" onMouseOut="lolite()" onClick="logVariable('l_row')" href="../../../../_variables/l_row.html">$l_row</a>-&gt;<a onClick="logVariable('pevt_event')" class="var it8980" onMouseOver="hilite(8980)" onMouseOut="lolite()" href="../../../../_variables/pevt_event.html">pevt_event</a>] = <a class="var it4744" onMouseOver="hilite(4744)" onMouseOut="lolite()" onClick="logVariable('l_row')" href="../../../../_variables/l_row.html">$l_row</a>-&gt;<a onClick="logVariable('pevt_enabled')" class="var it8980" onMouseOver="hilite(8980)" onMouseOut="lolite()" href="../../../../_variables/pevt_enabled.html">pevt_enabled</a>;
<a name="l755"><span class="linenum"> 755</span></a>          }
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">        // Discover events from plugin's source file:</span>
<a name="l758"><span class="linenum"> 758</span></a>          <a class="var it4749" onMouseOver="hilite(4749)" onMouseOut="lolite()" onClick="logVariable('available_events')" href="../../../../_variables/available_events.html">$available_events</a> = <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_registered_events')" href="../../../../_functions/get_registered_events.html" onMouseOver="funcPopup(event,'get_registered_events')">get_registered_events</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> );
<a name="l759"><span class="linenum"> 759</span></a>  
<a name="l760"><span class="linenum"> 760</span></a>          <a class="var it4750" onMouseOver="hilite(4750)" onMouseOut="lolite()" onClick="logVariable('obsolete_events')" href="../../../../_variables/obsolete_events.html">$obsolete_events</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it4747" onMouseOver="hilite(4747)" onMouseOut="lolite()" onClick="logVariable('saved_events')" href="../../../../_variables/saved_events.html">$saved_events</a>), <a class="var it4749" onMouseOver="hilite(4749)" onMouseOut="lolite()" onClick="logVariable('available_events')" href="../../../../_variables/available_events.html">$available_events</a> );
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3629" onMouseOver="hilite(3629)" onMouseOut="lolite()" onClick="logVariable('enable_events')" href="../../../../_variables/enable_events.html">$enable_events</a> ) )
<a name="l763"><span class="linenum"> 763</span></a>          { // Enable all events:
<a name="l764"><span class="linenum"> 764</span></a>              <a class="var it3629" onMouseOver="hilite(3629)" onMouseOut="lolite()" onClick="logVariable('enable_events')" href="../../../../_variables/enable_events.html">$enable_events</a> = <a class="var it4749" onMouseOver="hilite(4749)" onMouseOut="lolite()" onClick="logVariable('available_events')" href="../../../../_variables/available_events.html">$available_events</a>;
<a name="l765"><span class="linenum"> 765</span></a>          }
<a name="l766"><span class="linenum"> 766</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3630" onMouseOver="hilite(3630)" onMouseOut="lolite()" onClick="logVariable('disable_events')" href="../../../../_variables/disable_events.html">$disable_events</a> ) )
<a name="l767"><span class="linenum"> 767</span></a>          {
<a name="l768"><span class="linenum"> 768</span></a>              <a class="var it3630" onMouseOver="hilite(3630)" onMouseOut="lolite()" onClick="logVariable('disable_events')" href="../../../../_variables/disable_events.html">$disable_events</a> = array();
<a name="l769"><span class="linenum"> 769</span></a>          }
<a name="l770"><span class="linenum"> 770</span></a>          if( <a class="var it3630" onMouseOver="hilite(3630)" onMouseOut="lolite()" onClick="logVariable('disable_events')" href="../../../../_variables/disable_events.html">$disable_events</a> )
<a name="l771"><span class="linenum"> 771</span></a>          { // Remove events to be disabled from enabled ones:
<a name="l772"><span class="linenum"> 772</span></a>              <a class="var it3629" onMouseOver="hilite(3629)" onMouseOut="lolite()" onClick="logVariable('enable_events')" href="../../../../_variables/enable_events.html">$enable_events</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it3629" onMouseOver="hilite(3629)" onMouseOut="lolite()" onClick="logVariable('enable_events')" href="../../../../_variables/enable_events.html">$enable_events</a>, <a class="var it3630" onMouseOver="hilite(3630)" onMouseOut="lolite()" onClick="logVariable('disable_events')" href="../../../../_variables/disable_events.html">$disable_events</a> );
<a name="l773"><span class="linenum"> 773</span></a>          }
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">        // New discovered events:</span>
<a name="l776"><span class="linenum"> 776</span></a>          <a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('discovered_events')" href="../../../../_variables/discovered_events.html">$discovered_events</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it4749" onMouseOver="hilite(4749)" onMouseOut="lolite()" onClick="logVariable('available_events')" href="../../../../_variables/available_events.html">$available_events</a>, <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it4747" onMouseOver="hilite(4747)" onMouseOut="lolite()" onClick="logVariable('saved_events')" href="../../../../_variables/saved_events.html">$saved_events</a>), <a class="var it3629" onMouseOver="hilite(3629)" onMouseOut="lolite()" onClick="logVariable('enable_events')" href="../../../../_variables/enable_events.html">$enable_events</a>, <a class="var it3630" onMouseOver="hilite(3630)" onMouseOut="lolite()" onClick="logVariable('disable_events')" href="../../../../_variables/disable_events.html">$disable_events</a> );
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>  
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">        // Delete obsolete events from DB:</span>
<a name="l780"><span class="linenum"> 780</span></a>          if( <a class="var it4750" onMouseOver="hilite(4750)" onMouseOut="lolite()" onClick="logVariable('obsolete_events')" href="../../../../_variables/obsolete_events.html">$obsolete_events</a> &amp;&amp; <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( '
<a name="l781"><span class="linenum"> 781</span></a>                  DELETE FROM T_pluginevents
<a name="l782"><span class="linenum"> 782</span></a>                  WHERE pevt_plug_ID = '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'
<a name="l783"><span class="linenum"> 783</span></a>                  AND pevt_event IN ( &quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&quot;, &quot;', <a class="var it4750" onMouseOver="hilite(4750)" onMouseOut="lolite()" onClick="logVariable('obsolete_events')" href="../../../../_variables/obsolete_events.html">$obsolete_events</a> ).'&quot; )' ) )
<a name="l784"><span class="linenum"> 784</span></a>          {
<a name="l785"><span class="linenum"> 785</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = true;
<a name="l786"><span class="linenum"> 786</span></a>          }
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>          if( <a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('discovered_events')" href="../../../../_variables/discovered_events.html">$discovered_events</a> )
<a name="l789"><span class="linenum"> 789</span></a>          {
<a name="l790"><span class="linenum"> 790</span></a>              <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( '
<a name="l791"><span class="linenum"> 791</span></a>                  INSERT INTO T_pluginevents( pevt_plug_ID, pevt_event, pevt_enabled )
<a name="l792"><span class="linenum"> 792</span></a>                  VALUES ( '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.', &quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&quot;, 1 ), ('.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.', &quot;', <a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('discovered_events')" href="../../../../_variables/discovered_events.html">$discovered_events</a> ).'&quot;, 1 )' );
<a name="l793"><span class="linenum"> 793</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = true;
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Discovered events ['.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('discovered_events')" href="../../../../_variables/discovered_events.html">$discovered_events</a> ).'] for Plugin '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('name')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>, 'plugins' );
<a name="l796"><span class="linenum"> 796</span></a>          }
<a name="l797"><span class="linenum"> 797</span></a>  
<a name="l798"><span class="linenum"> 798</span></a>          <a class="var it4752" onMouseOver="hilite(4752)" onMouseOut="lolite()" onClick="logVariable('new_events_enabled')" href="../../../../_variables/new_events_enabled.html">$new_events_enabled</a> = array();
<a name="l799"><span class="linenum"> 799</span></a>          if( <a class="var it3629" onMouseOver="hilite(3629)" onMouseOut="lolite()" onClick="logVariable('enable_events')" href="../../../../_variables/enable_events.html">$enable_events</a> )
<a name="l800"><span class="linenum"> 800</span></a>          {
<a name="l801"><span class="linenum"> 801</span></a>              foreach( <a class="var it3629" onMouseOver="hilite(3629)" onMouseOut="lolite()" onClick="logVariable('enable_events')" href="../../../../_variables/enable_events.html">$enable_events</a> as <a class="var it3632" onMouseOver="hilite(3632)" onMouseOut="lolite()" onClick="logVariable('l_event')" href="../../../../_variables/l_event.html">$l_event</a> )
<a name="l802"><span class="linenum"> 802</span></a>              {
<a name="l803"><span class="linenum"> 803</span></a>                  if( ! isset( <a class="var it4747" onMouseOver="hilite(4747)" onMouseOut="lolite()" onClick="logVariable('saved_events')" href="../../../../_variables/saved_events.html">$saved_events</a>[<a class="var it3632" onMouseOver="hilite(3632)" onMouseOut="lolite()" onClick="logVariable('l_event')" href="../../../../_variables/l_event.html">$l_event</a>] ) || ! <a class="var it4747" onMouseOver="hilite(4747)" onMouseOut="lolite()" onClick="logVariable('saved_events')" href="../../../../_variables/saved_events.html">$saved_events</a>[<a class="var it3632" onMouseOver="hilite(3632)" onMouseOut="lolite()" onClick="logVariable('l_event')" href="../../../../_variables/l_event.html">$l_event</a>] )
<a name="l804"><span class="linenum"> 804</span></a>                  { // Event not saved yet or not enabled
<a name="l805"><span class="linenum"> 805</span></a>                      <a class="var it4752" onMouseOver="hilite(4752)" onMouseOut="lolite()" onClick="logVariable('new_events_enabled')" href="../../../../_variables/new_events_enabled.html">$new_events_enabled</a>[] = <a class="var it3632" onMouseOver="hilite(3632)" onMouseOut="lolite()" onClick="logVariable('l_event')" href="../../../../_variables/l_event.html">$l_event</a>;
<a name="l806"><span class="linenum"> 806</span></a>                  }
<a name="l807"><span class="linenum"> 807</span></a>              }
<a name="l808"><span class="linenum"> 808</span></a>              if( <a class="var it4752" onMouseOver="hilite(4752)" onMouseOut="lolite()" onClick="logVariable('new_events_enabled')" href="../../../../_variables/new_events_enabled.html">$new_events_enabled</a> )
<a name="l809"><span class="linenum"> 809</span></a>              {
<a name="l810"><span class="linenum"> 810</span></a>                  <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( '
<a name="l811"><span class="linenum"> 811</span></a>                      REPLACE INTO T_pluginevents( pevt_plug_ID, pevt_event, pevt_enabled )
<a name="l812"><span class="linenum"> 812</span></a>                      VALUES ( '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.', &quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&quot;, 1 ), ('.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.', &quot;', <a class="var it4752" onMouseOver="hilite(4752)" onMouseOut="lolite()" onClick="logVariable('new_events_enabled')" href="../../../../_variables/new_events_enabled.html">$new_events_enabled</a> ).'&quot;, 1 )' );
<a name="l813"><span class="linenum"> 813</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = true;
<a name="l814"><span class="linenum"> 814</span></a>              }
<a name="l815"><span class="linenum"> 815</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Enabled events ['.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it4752" onMouseOver="hilite(4752)" onMouseOut="lolite()" onClick="logVariable('new_events_enabled')" href="../../../../_variables/new_events_enabled.html">$new_events_enabled</a> ).'] for Plugin '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('name')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>, 'plugins' );
<a name="l816"><span class="linenum"> 816</span></a>          }
<a name="l817"><span class="linenum"> 817</span></a>  
<a name="l818"><span class="linenum"> 818</span></a>          <a class="var it4753" onMouseOver="hilite(4753)" onMouseOut="lolite()" onClick="logVariable('new_events_disabled')" href="../../../../_variables/new_events_disabled.html">$new_events_disabled</a> = array();
<a name="l819"><span class="linenum"> 819</span></a>          if( <a class="var it3630" onMouseOver="hilite(3630)" onMouseOut="lolite()" onClick="logVariable('disable_events')" href="../../../../_variables/disable_events.html">$disable_events</a> )
<a name="l820"><span class="linenum"> 820</span></a>          {
<a name="l821"><span class="linenum"> 821</span></a>              foreach( <a class="var it3630" onMouseOver="hilite(3630)" onMouseOut="lolite()" onClick="logVariable('disable_events')" href="../../../../_variables/disable_events.html">$disable_events</a> as <a class="var it3632" onMouseOver="hilite(3632)" onMouseOut="lolite()" onClick="logVariable('l_event')" href="../../../../_variables/l_event.html">$l_event</a> )
<a name="l822"><span class="linenum"> 822</span></a>              {
<a name="l823"><span class="linenum"> 823</span></a>                  if( ! isset( <a class="var it4747" onMouseOver="hilite(4747)" onMouseOut="lolite()" onClick="logVariable('saved_events')" href="../../../../_variables/saved_events.html">$saved_events</a>[<a class="var it3632" onMouseOver="hilite(3632)" onMouseOut="lolite()" onClick="logVariable('l_event')" href="../../../../_variables/l_event.html">$l_event</a>] ) || <a class="var it4747" onMouseOver="hilite(4747)" onMouseOut="lolite()" onClick="logVariable('saved_events')" href="../../../../_variables/saved_events.html">$saved_events</a>[<a class="var it3632" onMouseOver="hilite(3632)" onMouseOut="lolite()" onClick="logVariable('l_event')" href="../../../../_variables/l_event.html">$l_event</a>] )
<a name="l824"><span class="linenum"> 824</span></a>                  { // Event not saved yet or enabled
<a name="l825"><span class="linenum"> 825</span></a>                      <a class="var it4753" onMouseOver="hilite(4753)" onMouseOut="lolite()" onClick="logVariable('new_events_disabled')" href="../../../../_variables/new_events_disabled.html">$new_events_disabled</a>[] = <a class="var it3632" onMouseOver="hilite(3632)" onMouseOut="lolite()" onClick="logVariable('l_event')" href="../../../../_variables/l_event.html">$l_event</a>;
<a name="l826"><span class="linenum"> 826</span></a>                  }
<a name="l827"><span class="linenum"> 827</span></a>              }
<a name="l828"><span class="linenum"> 828</span></a>              if( <a class="var it4753" onMouseOver="hilite(4753)" onMouseOut="lolite()" onClick="logVariable('new_events_disabled')" href="../../../../_variables/new_events_disabled.html">$new_events_disabled</a> )
<a name="l829"><span class="linenum"> 829</span></a>              {
<a name="l830"><span class="linenum"> 830</span></a>                  <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( '
<a name="l831"><span class="linenum"> 831</span></a>                      REPLACE INTO T_pluginevents( pevt_plug_ID, pevt_event, pevt_enabled )
<a name="l832"><span class="linenum"> 832</span></a>                      VALUES ( '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.', &quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&quot;, 0 ), ('.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.', &quot;', <a class="var it4753" onMouseOver="hilite(4753)" onMouseOut="lolite()" onClick="logVariable('new_events_disabled')" href="../../../../_variables/new_events_disabled.html">$new_events_disabled</a> ).'&quot;, 0 )' );
<a name="l833"><span class="linenum"> 833</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = true;
<a name="l834"><span class="linenum"> 834</span></a>              }
<a name="l835"><span class="linenum"> 835</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Disabled events ['.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it4753" onMouseOver="hilite(4753)" onMouseOut="lolite()" onClick="logVariable('new_events_disabled')" href="../../../../_variables/new_events_disabled.html">$new_events_disabled</a> ).'] for Plugin '.<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('name')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>, 'plugins' );
<a name="l836"><span class="linenum"> 836</span></a>          }
<a name="l837"><span class="linenum"> 837</span></a>  
<a name="l838"><span class="linenum"> 838</span></a>          if( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> )
<a name="l839"><span class="linenum"> 839</span></a>          { // Something has changed: Reload event index
<a name="l840"><span class="linenum"> 840</span></a>              foreach( <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it4750" onMouseOver="hilite(4750)" onMouseOut="lolite()" onClick="logVariable('obsolete_events')" href="../../../../_variables/obsolete_events.html">$obsolete_events</a>, <a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('discovered_events')" href="../../../../_variables/discovered_events.html">$discovered_events</a>, <a class="var it4752" onMouseOver="hilite(4752)" onMouseOut="lolite()" onClick="logVariable('new_events_enabled')" href="../../../../_variables/new_events_enabled.html">$new_events_enabled</a>, <a class="var it4753" onMouseOver="hilite(4753)" onMouseOut="lolite()" onClick="logVariable('new_events_disabled')" href="../../../../_variables/new_events_disabled.html">$new_events_disabled</a>) as <a class="var it4754" onMouseOver="hilite(4754)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a> )
<a name="l841"><span class="linenum"> 841</span></a>              {
<a name="l842"><span class="linenum"> 842</span></a>                  if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4754" onMouseOver="hilite(4754)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a>, 'RenderItemAs') === 0 )
<a name="l843"><span class="linenum"> 843</span></a>                  { // Clear pre-rendered content cache, if RenderItemAs* events have been added or removed:
<a name="l844"><span class="linenum"> 844</span></a>                      <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_items__prerendering WHERE 1=1' );
<a name="l845"><span class="linenum"> 845</span></a>                      <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l846"><span class="linenum"> 846</span></a>                      <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l847"><span class="linenum"> 847</span></a>                      break;
<a name="l848"><span class="linenum"> 848</span></a>                  }
<a name="l849"><span class="linenum"> 849</span></a>              }
<a name="l850"><span class="linenum"> 850</span></a>  
<a name="l851"><span class="linenum"> 851</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_events')" href="../../../../_functions/load_events.html" onMouseOver="funcPopup(event,'load_events')">load_events</a>();
<a name="l852"><span class="linenum"> 852</span></a>          }
<a name="l853"><span class="linenum"> 853</span></a>  
<a name="l854"><span class="linenum"> 854</span></a>          return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l855"><span class="linenum"> 855</span></a>      }
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>      <span class="comment">/**</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     * Reload all plugins to detect changes</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     *  - Register new events</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     *  - Unregister obsolete events</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">     *  - Detect plugins with no code and try to have at least one plugin with the default code</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">     *</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment">     * @return boolean true if plugins have been changed, false otherwise</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">     */</span>
<a name="l866"><span class="linenum"> 866</span></a>  	function <a class="function" onClick="logFunction('reload_plugins')" href="../../../../_functions/reload_plugins.html" onMouseOver="funcPopup(event,'reload_plugins')">reload_plugins</a>()
<a name="l867"><span class="linenum"> 867</span></a>      {
<a name="l868"><span class="linenum"> 868</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('restart')" href="../../../../_functions/restart.html" onMouseOver="funcPopup(event,'restart')">restart</a>();
<a name="l869"><span class="linenum"> 869</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_events')" href="../../../../_functions/load_events.html" onMouseOver="funcPopup(event,'load_events')">load_events</a>();
<a name="l870"><span class="linenum"> 870</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../../../_variables/changed.html">$changed</a> = false;
<a name="l871"><span class="linenum"> 871</span></a>          while( <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('loop_Plugin')" href="../../../../_variables/loop_Plugin.html">$loop_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_next() )
<a name="l872"><span class="linenum"> 872</span></a>          { // loop through in each plugin
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment">            // NOTE: we don't need to handle plug_version here, because it gets handled in Plugins::register() already.</span>
<a name="l874"><span class="linenum"> 874</span></a>  
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment">            // Discover new events:</span>
<a name="l876"><span class="linenum"> 876</span></a>              if( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_events')" href="../../../../_functions/save_events.html" onMouseOver="funcPopup(event,'save_events')">save_events</a>( <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('loop_Plugin')" href="../../../../_variables/loop_Plugin.html">$loop_Plugin</a>, array() ) )
<a name="l877"><span class="linenum"> 877</span></a>              {
<a name="l878"><span class="linenum"> 878</span></a>                  <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../../../_variables/changed.html">$changed</a> = true;
<a name="l879"><span class="linenum"> 879</span></a>              }
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">            // Detect plugins with no code and try to have at least one plugin with the default code:</span>
<a name="l882"><span class="linenum"> 882</span></a>              if( empty(<a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('loop_Plugin')" href="../../../../_variables/loop_Plugin.html">$loop_Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8981" onMouseOver="hilite(8981)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a>) )
<a name="l883"><span class="linenum"> 883</span></a>              { // Instantiated Plugin has no code
<a name="l884"><span class="linenum"> 884</span></a>                  <a class="var it3624" onMouseOver="hilite(3624)" onMouseOut="lolite()" onClick="logVariable('default_Plugin')" href="../../../../_variables/default_Plugin.html">$default_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('register')" href="../../../../_functions/register.html" onMouseOver="funcPopup(event,'register')">register</a>(<a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('loop_Plugin')" href="../../../../_variables/loop_Plugin.html">$loop_Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8981" onMouseOver="hilite(8981)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>);
<a name="l885"><span class="linenum"> 885</span></a>  
<a name="l886"><span class="linenum"> 886</span></a>                  if( ! empty(<a class="var it3624" onMouseOver="hilite(3624)" onMouseOut="lolite()" onClick="logVariable('default_Plugin')" href="../../../../_variables/default_Plugin.html">$default_Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8982" onMouseOver="hilite(8982)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a>) // Plugin has default code
<a name="l887"><span class="linenum"> 887</span></a>                      &amp;&amp; ! <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_code( <a class="var it3624" onMouseOver="hilite(3624)" onMouseOut="lolite()" onClick="logVariable('default_Plugin')" href="../../../../_variables/default_Plugin.html">$default_Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8982" onMouseOver="hilite(8982)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a> ) ) // Default code is not in use (anymore)
<a name="l888"><span class="linenum"> 888</span></a>                  { // Set the Plugin's code to the default one
<a name="l889"><span class="linenum"> 889</span></a>                      if( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_code')" href="../../../../_functions/set_code.html" onMouseOver="funcPopup(event,'set_code')">set_code</a>( <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('loop_Plugin')" href="../../../../_variables/loop_Plugin.html">$loop_Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8981" onMouseOver="hilite(8981)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it3624" onMouseOver="hilite(3624)" onMouseOut="lolite()" onClick="logVariable('default_Plugin')" href="../../../../_variables/default_Plugin.html">$default_Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8982" onMouseOver="hilite(8982)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a> ) )
<a name="l890"><span class="linenum"> 890</span></a>                      {
<a name="l891"><span class="linenum"> 891</span></a>                          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../../../_variables/changed.html">$changed</a> = true;
<a name="l892"><span class="linenum"> 892</span></a>                      }
<a name="l893"><span class="linenum"> 893</span></a>                  }
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('unregister')" href="../../../../_functions/unregister.html" onMouseOver="funcPopup(event,'unregister')">unregister</a>(<a class="var it3624" onMouseOver="hilite(3624)" onMouseOut="lolite()" onClick="logVariable('default_Plugin')" href="../../../../_variables/default_Plugin.html">$default_Plugin</a>, true);
<a name="l896"><span class="linenum"> 896</span></a>              }
<a name="l897"><span class="linenum"> 897</span></a>          }
<a name="l898"><span class="linenum"> 898</span></a>  
<a name="l899"><span class="linenum"> 899</span></a>          if( <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../../../_variables/changed.html">$changed</a> )
<a name="l900"><span class="linenum"> 900</span></a>          { // invalidate all PageCaches
<a name="l901"><span class="linenum"> 901</span></a>              <a class="function" onClick="logFunction('invalidate_pagecaches')" href="../../../../_functions/invalidate_pagecaches.html" onMouseOver="funcPopup(event,'invalidate_pagecaches')">invalidate_pagecaches</a>();
<a name="l902"><span class="linenum"> 902</span></a>          }
<a name="l903"><span class="linenum"> 903</span></a>  
<a name="l904"><span class="linenum"> 904</span></a>          return <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../../../_variables/changed.html">$changed</a>;
<a name="l905"><span class="linenum"> 905</span></a>      }
<a name="l906"><span class="linenum"> 906</span></a>  
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>      <span class="comment">/**</span>
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment">     * Set the code for a given Plugin ID.</span>
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">     *</span>
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment">     * It makes sure that the index is handled and writes it to DB.</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">     *</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">     * @param string Plugin ID</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">     * @param string Code to set the plugin to</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">     * @return boolean|integer|string</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">     *   true, if already set to same value.</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">     *   string: error message (already in use, wrong format)</span>
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">     *   1 in case of setting it into DB (number of affected rows).</span>
<a name="l919"><span class="linenum"> 919</span></a>  <span class="comment">     *   false, if invalid Plugin.</span>
<a name="l920"><span class="linenum"> 920</span></a>  <span class="comment">     */</span>
<a name="l921"><span class="linenum"> 921</span></a>  	function <a class="function" onClick="logFunction('set_code')" href="../../../../_functions/set_code.html" onMouseOver="funcPopup(event,'set_code')">set_code</a>( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>, <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> )
<a name="l922"><span class="linenum"> 922</span></a>      {
<a name="l923"><span class="linenum"> 923</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l924"><span class="linenum"> 924</span></a>  
<a name="l925"><span class="linenum"> 925</span></a>          if( strlen( <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> ) &gt; 32 )
<a name="l926"><span class="linenum"> 926</span></a>          {
<a name="l927"><span class="linenum"> 927</span></a>              return <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The maximum length of a plugin code is 32 characters.' );
<a name="l928"><span class="linenum"> 928</span></a>          }
<a name="l929"><span class="linenum"> 929</span></a>  
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">        // TODO: more strict check?! Just &quot;[\w_-]+&quot; as regexp pattern?</span>
<a name="l931"><span class="linenum"> 931</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>, '.' ) !== false )
<a name="l932"><span class="linenum"> 932</span></a>          {
<a name="l933"><span class="linenum"> 933</span></a>              return <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin code cannot include a dot!' );
<a name="l934"><span class="linenum"> 934</span></a>          }
<a name="l935"><span class="linenum"> 935</span></a>  
<a name="l936"><span class="linenum"> 936</span></a>          if( ! empty(<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>) &amp;&amp; isset( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_code_ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_code_ID.html">index_code_ID</a>[<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>] ) )
<a name="l937"><span class="linenum"> 937</span></a>          {
<a name="l938"><span class="linenum"> 938</span></a>              if( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_code_ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_code_ID.html">index_code_ID</a>[<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>] == <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> )
<a name="l939"><span class="linenum"> 939</span></a>              { // Already set to same value
<a name="l940"><span class="linenum"> 940</span></a>                  return true;
<a name="l941"><span class="linenum"> 941</span></a>              }
<a name="l942"><span class="linenum"> 942</span></a>              else
<a name="l943"><span class="linenum"> 943</span></a>              {
<a name="l944"><span class="linenum"> 944</span></a>                  return <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin code is already in use by another plugin.' );
<a name="l945"><span class="linenum"> 945</span></a>              }
<a name="l946"><span class="linenum"> 946</span></a>          }
<a name="l947"><span class="linenum"> 947</span></a>  
<a name="l948"><span class="linenum"> 948</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> );
<a name="l949"><span class="linenum"> 949</span></a>          if( ! <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> )
<a name="l950"><span class="linenum"> 950</span></a>          {
<a name="l951"><span class="linenum"> 951</span></a>              return false;
<a name="l952"><span class="linenum"> 952</span></a>          }
<a name="l953"><span class="linenum"> 953</span></a>  
<a name="l954"><span class="linenum"> 954</span></a>          if( empty(<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>) )
<a name="l955"><span class="linenum"> 955</span></a>          {
<a name="l956"><span class="linenum"> 956</span></a>              <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> = NULL;
<a name="l957"><span class="linenum"> 957</span></a>          }
<a name="l958"><span class="linenum"> 958</span></a>          else
<a name="l959"><span class="linenum"> 959</span></a>          { // update indexes
<a name="l960"><span class="linenum"> 960</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_code_ID')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_code_ID.html">index_code_ID</a>[<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>] = &amp; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l961"><span class="linenum"> 961</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('index_code_Plugins')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/index_code_Plugins.html">index_code_Plugins</a>[<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>] = &amp; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>;
<a name="l962"><span class="linenum"> 962</span></a>          }
<a name="l963"><span class="linenum"> 963</span></a>  
<a name="l964"><span class="linenum"> 964</span></a>  <span class="comment">        // Update references to code:</span>
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment">        // TODO: dh&gt; we might want to update item renderer codes and blog ping plugin codes here! (old code=&gt;new code)</span>
<a name="l966"><span class="linenum"> 966</span></a>  
<a name="l967"><span class="linenum"> 967</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('code')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/code.html">code</a> = <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>;
<a name="l968"><span class="linenum"> 968</span></a>  
<a name="l969"><span class="linenum"> 969</span></a>          return <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( '
<a name="l970"><span class="linenum"> 970</span></a>              UPDATE T_plugins
<a name="l971"><span class="linenum"> 971</span></a>                SET plug_code = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>).'
<a name="l972"><span class="linenum"> 972</span></a>              WHERE plug_ID = '.<a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> );
<a name="l973"><span class="linenum"> 973</span></a>      }
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>      <span class="comment">/**</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment">     * Set the status of an event for a given Plugin.</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment">     *</span>
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment">     * @return boolean True, if status has changed; false if not</span>
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment">     */</span>
<a name="l981"><span class="linenum"> 981</span></a>  	function <a class="function" onClick="logFunction('set_event_status')" href="../../../../_functions/set_event_status.html" onMouseOver="funcPopup(event,'set_event_status')">set_event_status</a>( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>, <a class="var it4758" onMouseOver="hilite(4758)" onMouseOut="lolite()" onClick="logVariable('plugin_event')" href="../../../../_variables/plugin_event.html">$plugin_event</a>, <a class="var it2120" onMouseOver="hilite(2120)" onMouseOut="lolite()" onClick="logVariable('enabled')" href="../../../../_variables/enabled.html">$enabled</a> )
<a name="l982"><span class="linenum"> 982</span></a>      {
<a name="l983"><span class="linenum"> 983</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>          <a class="var it2120" onMouseOver="hilite(2120)" onMouseOut="lolite()" onClick="logVariable('enabled')" href="../../../../_variables/enabled.html">$enabled</a> = <a class="var it2120" onMouseOver="hilite(2120)" onMouseOut="lolite()" onClick="logVariable('enabled')" href="../../../../_variables/enabled.html">$enabled</a> ? 1 : 0;
<a name="l986"><span class="linenum"> 986</span></a>  
<a name="l987"><span class="linenum"> 987</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( '
<a name="l988"><span class="linenum"> 988</span></a>              UPDATE T_pluginevents
<a name="l989"><span class="linenum"> 989</span></a>                 SET pevt_enabled = '.<a class="var it2120" onMouseOver="hilite(2120)" onMouseOut="lolite()" onClick="logVariable('enabled')" href="../../../../_variables/enabled.html">$enabled</a>.'
<a name="l990"><span class="linenum"> 990</span></a>               WHERE pevt_plug_ID = '.<a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>.'
<a name="l991"><span class="linenum"> 991</span></a>                 AND pevt_event = &quot;'.<a class="var it4758" onMouseOver="hilite(4758)" onMouseOut="lolite()" onClick="logVariable('plugin_event')" href="../../../../_variables/plugin_event.html">$plugin_event</a>.'&quot;' );
<a name="l992"><span class="linenum"> 992</span></a>  
<a name="l993"><span class="linenum"> 993</span></a>          if( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('rows_affected')" class="var it8966" onMouseOver="hilite(8966)" onMouseOut="lolite()" href="../../../../_variables/rows_affected.html">rows_affected</a> )
<a name="l994"><span class="linenum"> 994</span></a>          {
<a name="l995"><span class="linenum"> 995</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_events')" href="../../../../_functions/load_events.html" onMouseOver="funcPopup(event,'load_events')">load_events</a>();
<a name="l996"><span class="linenum"> 996</span></a>  
<a name="l997"><span class="linenum"> 997</span></a>              if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4758" onMouseOver="hilite(4758)" onMouseOut="lolite()" onClick="logVariable('plugin_event')" href="../../../../_variables/plugin_event.html">$plugin_event</a>, 'RenderItemAs') === 0 )
<a name="l998"><span class="linenum"> 998</span></a>              { // Clear pre-rendered content cache, if RenderItemAs* events have been added or removed:
<a name="l999"><span class="linenum"> 999</span></a>                  <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_items__prerendering WHERE 1=1' );
<a name="l1000"><span class="linenum">1000</span></a>                  <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l1001"><span class="linenum">1001</span></a>                  <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l1002"><span class="linenum">1002</span></a>                  break;
<a name="l1003"><span class="linenum">1003</span></a>              }
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>              return true;
<a name="l1006"><span class="linenum">1006</span></a>          }
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>          return false;
<a name="l1009"><span class="linenum">1009</span></a>      }
<a name="l1010"><span class="linenum">1010</span></a>  
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>      <span class="comment">/**</span>
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment">     * Set the priority for a given Plugin ID.</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">     *</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment">     * It makes sure that the index is handled and writes it to DB.</span>
<a name="l1016"><span class="linenum">1016</span></a>  <span class="comment">     *</span>
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment">     * @return boolean|integer</span>
<a name="l1018"><span class="linenum">1018</span></a>  <span class="comment">     *   true, if already set to same value.</span>
<a name="l1019"><span class="linenum">1019</span></a>  <span class="comment">     *   false if another Plugin uses that priority already.</span>
<a name="l1020"><span class="linenum">1020</span></a>  <span class="comment">     *   1 in case of setting it into DB.</span>
<a name="l1021"><span class="linenum">1021</span></a>  <span class="comment">     */</span>
<a name="l1022"><span class="linenum">1022</span></a>  	function <a class="function" onClick="logFunction('set_priority')" href="../../../../_functions/set_priority.html" onMouseOver="funcPopup(event,'set_priority')">set_priority</a>( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>, <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> )
<a name="l1023"><span class="linenum">1023</span></a>      {
<a name="l1024"><span class="linenum">1024</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l1025"><span class="linenum">1025</span></a>  
<a name="l1026"><span class="linenum">1026</span></a>          if( ! <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~^1?\d?\d$~', <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> ) ) // using <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>() to catch floating numbers
<a name="l1027"><span class="linenum">1027</span></a>          {
<a name="l1028"><span class="linenum">1028</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Plugin priority must be numeric (0-100).' );
<a name="l1029"><span class="linenum">1029</span></a>          }
<a name="l1030"><span class="linenum">1030</span></a>  
<a name="l1031"><span class="linenum">1031</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID(<a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a>);
<a name="l1032"><span class="linenum">1032</span></a>          if( ! <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a> )
<a name="l1033"><span class="linenum">1033</span></a>          {
<a name="l1034"><span class="linenum">1034</span></a>              return false;
<a name="l1035"><span class="linenum">1035</span></a>          }
<a name="l1036"><span class="linenum">1036</span></a>  
<a name="l1037"><span class="linenum">1037</span></a>          if( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('priority')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/priority.html">priority</a> == <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> )
<a name="l1038"><span class="linenum">1038</span></a>          { // Already set to same value
<a name="l1039"><span class="linenum">1039</span></a>              return true;
<a name="l1040"><span class="linenum">1040</span></a>          }
<a name="l1041"><span class="linenum">1041</span></a>  
<a name="l1042"><span class="linenum">1042</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( '
<a name="l1043"><span class="linenum">1043</span></a>              UPDATE T_plugins
<a name="l1044"><span class="linenum">1044</span></a>                SET plug_priority = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a>).'
<a name="l1045"><span class="linenum">1045</span></a>              WHERE plug_ID = '.<a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> );
<a name="l1046"><span class="linenum">1046</span></a>  
<a name="l1047"><span class="linenum">1047</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('priority')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/priority.html">priority</a> = <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a>;
<a name="l1048"><span class="linenum">1048</span></a>  
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment">        // TODO: dh&gt; should only re-sort, if sorted by priority before - if it should get re-sorted at all!</span>
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment">        //$this-&gt;sort();</span>
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>          return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1053"><span class="linenum">1053</span></a>      }
<a name="l1054"><span class="linenum">1054</span></a>  
<a name="l1055"><span class="linenum">1055</span></a>  
<a name="l1056"><span class="linenum">1056</span></a>      <span class="comment">/**</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     * Sort the list of plugins.</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">     *</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">     * WARNING: do NOT sort by anything else than priority unless you're handling a list of NOT-YET-INSTALLED plugins!</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment">     *</span>
<a name="l1061"><span class="linenum">1061</span></a>  <span class="comment">     * @param string Order: 'priority' (default), 'name'</span>
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment">     */</span>
<a name="l1063"><span class="linenum">1063</span></a>  	function <a class="function" onClick="logFunction('sort')" href="../../../../_functions/sort.html" onMouseOver="funcPopup(event,'sort')">sort</a>( <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../../../_variables/order.html">$order</a> = 'priority' )
<a name="l1064"><span class="linenum">1064</span></a>      {
<a name="l1065"><span class="linenum">1065</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_plugins_table')" href="../../../../_functions/load_plugins_table.html" onMouseOver="funcPopup(event,'load_plugins_table')">load_plugins_table</a>();
<a name="l1066"><span class="linenum">1066</span></a>  
<a name="l1067"><span class="linenum">1067</span></a>          foreach( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a> as <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../../_variables/k.html">$k</a> =&gt; <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> )
<a name="l1068"><span class="linenum">1068</span></a>          { // Instantiate every plugin, so invalid ones do not get unregistered during sorting (crashes PHP, because <a class="var it4727" onMouseOver="hilite(4727)" onMouseOut="lolite()" onClick="logVariable('sorted_IDs')" href="../../../../_variables/sorted_IDs.html">$sorted_IDs</a> gets changed etc)
<a name="l1069"><span class="linenum">1069</span></a>              if( ! <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../../../_variables/plugin_ID.html">$plugin_ID</a> ) )
<a name="l1070"><span class="linenum">1070</span></a>              {
<a name="l1071"><span class="linenum">1071</span></a>                  unset(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a>[<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('k')" href="../../../../_variables/k.html">$k</a>]);
<a name="l1072"><span class="linenum">1072</span></a>              }
<a name="l1073"><span class="linenum">1073</span></a>          }
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>          switch( <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../../../_variables/order.html">$order</a> )
<a name="l1076"><span class="linenum">1076</span></a>          {
<a name="l1077"><span class="linenum">1077</span></a>              case 'name':
<a name="l1078"><span class="linenum">1078</span></a>                  <a class="phpfunction" onClick="logFunction('usort')" href="../../../../_functions/usort.html" onMouseOver="phpfuncPopup(event,'usort')">usort</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a>, array( &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>, 'sort_Plugin_name') );
<a name="l1079"><span class="linenum">1079</span></a>                  break;
<a name="l1080"><span class="linenum">1080</span></a>  
<a name="l1081"><span class="linenum">1081</span></a>              case 'group':
<a name="l1082"><span class="linenum">1082</span></a>                  <a class="phpfunction" onClick="logFunction('usort')" href="../../../../_functions/usort.html" onMouseOver="phpfuncPopup(event,'usort')">usort</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a>, array( &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>, 'sort_Plugin_group') );
<a name="l1083"><span class="linenum">1083</span></a>                  break;
<a name="l1084"><span class="linenum">1084</span></a>  
<a name="l1085"><span class="linenum">1085</span></a>              default:
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment">                // Sort array by priority:</span>
<a name="l1087"><span class="linenum">1087</span></a>                  <a class="phpfunction" onClick="logFunction('usort')" href="../../../../_functions/usort.html" onMouseOver="phpfuncPopup(event,'usort')">usort</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a>, array( &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>, 'sort_Plugin_priority') );
<a name="l1088"><span class="linenum">1088</span></a>          }
<a name="l1089"><span class="linenum">1089</span></a>  
<a name="l1090"><span class="linenum">1090</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('current_idx')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/current_idx.html">current_idx</a> = -1;
<a name="l1091"><span class="linenum">1091</span></a>      }
<a name="l1092"><span class="linenum">1092</span></a>  
<a name="l1093"><span class="linenum">1093</span></a>      <span class="comment">/**</span>
<a name="l1094"><span class="linenum">1094</span></a>  <span class="comment">     * Callback function to sort plugins by priority (and classname, if they have same priority).</span>
<a name="l1095"><span class="linenum">1095</span></a>  <span class="comment">     */</span>
<a name="l1096"><span class="linenum">1096</span></a>  	function <a class="function" onClick="logFunction('sort_Plugin_priority')" href="../../../../_functions/sort_plugin_priority.html" onMouseOver="funcPopup(event,'sort_plugin_priority')">sort_Plugin_priority</a>( &amp; <a class="var it4759" onMouseOver="hilite(4759)" onMouseOut="lolite()" onClick="logVariable('a_ID')" href="../../../../_variables/a_ID.html">$a_ID</a>, &amp; <a class="var it4760" onMouseOver="hilite(4760)" onMouseOut="lolite()" onClick="logVariable('b_ID')" href="../../../../_variables/b_ID.html">$b_ID</a> )
<a name="l1097"><span class="linenum">1097</span></a>      {
<a name="l1098"><span class="linenum">1098</span></a>          <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it4759" onMouseOver="hilite(4759)" onMouseOut="lolite()" onClick="logVariable('a_ID')" href="../../../../_variables/a_ID.html">$a_ID</a> );
<a name="l1099"><span class="linenum">1099</span></a>          <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it4760" onMouseOver="hilite(4760)" onMouseOut="lolite()" onClick="logVariable('b_ID')" href="../../../../_variables/b_ID.html">$b_ID</a> );
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a>-&gt;<a onClick="logVariable('priority')" class="var it8983" onMouseOver="hilite(8983)" onMouseOut="lolite()" href="../../../../_variables/priority.html">priority</a> - <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a>-&gt;<a onClick="logVariable('priority')" class="var it8984" onMouseOver="hilite(8984)" onMouseOut="lolite()" href="../../../../_variables/priority.html">priority</a>;
<a name="l1102"><span class="linenum">1102</span></a>  
<a name="l1103"><span class="linenum">1103</span></a>          if( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> == 0 )
<a name="l1104"><span class="linenum">1104</span></a>          {
<a name="l1105"><span class="linenum">1105</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('strcasecmp')" href="../../../../_functions/strcasecmp.html" onMouseOver="phpfuncPopup(event,'strcasecmp')">strcasecmp</a>( <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8983" onMouseOver="hilite(8983)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>, <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8984" onMouseOver="hilite(8984)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a> );
<a name="l1106"><span class="linenum">1106</span></a>          }
<a name="l1107"><span class="linenum">1107</span></a>  
<a name="l1108"><span class="linenum">1108</span></a>          return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1109"><span class="linenum">1109</span></a>      }
<a name="l1110"><span class="linenum">1110</span></a>  
<a name="l1111"><span class="linenum">1111</span></a>      <span class="comment">/**</span>
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment">     * Callback function to sort plugins by name.</span>
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment">     *</span>
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment">     * WARNING: do NOT sort by anything else than priority unless you're handling a list of NOT-YET-INSTALLED plugins</span>
<a name="l1115"><span class="linenum">1115</span></a>  <span class="comment">     */</span>
<a name="l1116"><span class="linenum">1116</span></a>  	function <a class="function" onClick="logFunction('sort_Plugin_name')" href="../../../../_functions/sort_plugin_name.html" onMouseOver="funcPopup(event,'sort_plugin_name')">sort_Plugin_name</a>( &amp; <a class="var it4759" onMouseOver="hilite(4759)" onMouseOut="lolite()" onClick="logVariable('a_ID')" href="../../../../_variables/a_ID.html">$a_ID</a>, &amp; <a class="var it4760" onMouseOver="hilite(4760)" onMouseOut="lolite()" onClick="logVariable('b_ID')" href="../../../../_variables/b_ID.html">$b_ID</a> )
<a name="l1117"><span class="linenum">1117</span></a>      {
<a name="l1118"><span class="linenum">1118</span></a>          <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it4759" onMouseOver="hilite(4759)" onMouseOut="lolite()" onClick="logVariable('a_ID')" href="../../../../_variables/a_ID.html">$a_ID</a> );
<a name="l1119"><span class="linenum">1119</span></a>          <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it4760" onMouseOver="hilite(4760)" onMouseOut="lolite()" onClick="logVariable('b_ID')" href="../../../../_variables/b_ID.html">$b_ID</a> );
<a name="l1120"><span class="linenum">1120</span></a>  
<a name="l1121"><span class="linenum">1121</span></a>          return <a class="phpfunction" onClick="logFunction('strcasecmp')" href="../../../../_functions/strcasecmp.html" onMouseOver="phpfuncPopup(event,'strcasecmp')">strcasecmp</a>( <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a>-&gt;<a onClick="logVariable('name')" class="var it8983" onMouseOver="hilite(8983)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>, <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a>-&gt;<a onClick="logVariable('name')" class="var it8984" onMouseOver="hilite(8984)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a> );
<a name="l1122"><span class="linenum">1122</span></a>      }
<a name="l1123"><span class="linenum">1123</span></a>  
<a name="l1124"><span class="linenum">1124</span></a>  
<a name="l1125"><span class="linenum">1125</span></a>      <span class="comment">/**</span>
<a name="l1126"><span class="linenum">1126</span></a>  <span class="comment">     * Callback function to sort plugins by group, sub-group and name.</span>
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment">     *</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">     * Those, which have a group get sorted above the ones without one.</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment">     *</span>
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment">     * WARNING: do NOT sort by anything else than priority unless you're handling a list of NOT-YET-INSTALLED plugins</span>
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment">     */</span>
<a name="l1132"><span class="linenum">1132</span></a>  	function <a class="function" onClick="logFunction('sort_Plugin_group')" href="../../../../_functions/sort_plugin_group.html" onMouseOver="funcPopup(event,'sort_plugin_group')">sort_Plugin_group</a>( &amp; <a class="var it4759" onMouseOver="hilite(4759)" onMouseOut="lolite()" onClick="logVariable('a_ID')" href="../../../../_variables/a_ID.html">$a_ID</a>, &amp; <a class="var it4760" onMouseOver="hilite(4760)" onMouseOut="lolite()" onClick="logVariable('b_ID')" href="../../../../_variables/b_ID.html">$b_ID</a> )
<a name="l1133"><span class="linenum">1133</span></a>      {
<a name="l1134"><span class="linenum">1134</span></a>          <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it4759" onMouseOver="hilite(4759)" onMouseOut="lolite()" onClick="logVariable('a_ID')" href="../../../../_variables/a_ID.html">$a_ID</a> );
<a name="l1135"><span class="linenum">1135</span></a>          <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID( <a class="var it4760" onMouseOver="hilite(4760)" onMouseOut="lolite()" onClick="logVariable('b_ID')" href="../../../../_variables/b_ID.html">$b_ID</a> );
<a name="l1136"><span class="linenum">1136</span></a>  
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment">        // first check if both have a group (-1: only A has a group; 1: only B has a group; 0: both have a group or no group):</span>
<a name="l1138"><span class="linenum">1138</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = (int)empty(<a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a>-&gt;<a onClick="logVariable('group')" class="var it8983" onMouseOver="hilite(8983)" onMouseOut="lolite()" href="../../../../_variables/group.html">group</a>) - (int)empty(<a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a>-&gt;<a onClick="logVariable('group')" class="var it8984" onMouseOver="hilite(8984)" onMouseOut="lolite()" href="../../../../_variables/group.html">group</a>);
<a name="l1139"><span class="linenum">1139</span></a>          if( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> != 0 )
<a name="l1140"><span class="linenum">1140</span></a>          {
<a name="l1141"><span class="linenum">1141</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1142"><span class="linenum">1142</span></a>          }
<a name="l1143"><span class="linenum">1143</span></a>  
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">        // Compare Group</span>
<a name="l1145"><span class="linenum">1145</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('strcasecmp')" href="../../../../_functions/strcasecmp.html" onMouseOver="phpfuncPopup(event,'strcasecmp')">strcasecmp</a>( <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a>-&gt;<a onClick="logVariable('group')" class="var it8983" onMouseOver="hilite(8983)" onMouseOut="lolite()" href="../../../../_variables/group.html">group</a>, <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a>-&gt;<a onClick="logVariable('group')" class="var it8984" onMouseOver="hilite(8984)" onMouseOut="lolite()" href="../../../../_variables/group.html">group</a> );
<a name="l1146"><span class="linenum">1146</span></a>          if( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> != 0 )
<a name="l1147"><span class="linenum">1147</span></a>          {
<a name="l1148"><span class="linenum">1148</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1149"><span class="linenum">1149</span></a>          }
<a name="l1150"><span class="linenum">1150</span></a>  
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">        // Compare Sub Group</span>
<a name="l1152"><span class="linenum">1152</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('strcasecmp')" href="../../../../_functions/strcasecmp.html" onMouseOver="phpfuncPopup(event,'strcasecmp')">strcasecmp</a>( <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a>-&gt;<a onClick="logVariable('sub_group')" class="var it8983" onMouseOver="hilite(8983)" onMouseOut="lolite()" href="../../../../_variables/sub_group.html">sub_group</a>, <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a>-&gt;<a onClick="logVariable('sub_group')" class="var it8984" onMouseOver="hilite(8984)" onMouseOut="lolite()" href="../../../../_variables/sub_group.html">sub_group</a> );
<a name="l1153"><span class="linenum">1153</span></a>          if( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> != 0 )
<a name="l1154"><span class="linenum">1154</span></a>          {
<a name="l1155"><span class="linenum">1155</span></a>              return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1156"><span class="linenum">1156</span></a>          }
<a name="l1157"><span class="linenum">1157</span></a>  
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment">        // Compare Name</span>
<a name="l1159"><span class="linenum">1159</span></a>          return <a class="phpfunction" onClick="logFunction('strcasecmp')" href="../../../../_functions/strcasecmp.html" onMouseOver="phpfuncPopup(event,'strcasecmp')">strcasecmp</a>( <a class="var it4761" onMouseOver="hilite(4761)" onMouseOut="lolite()" onClick="logVariable('a_Plugin')" href="../../../../_variables/a_Plugin.html">$a_Plugin</a>-&gt;<a onClick="logVariable('name')" class="var it8983" onMouseOver="hilite(8983)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>, <a class="var it4762" onMouseOver="hilite(4762)" onMouseOut="lolite()" onClick="logVariable('b_Plugin')" href="../../../../_variables/b_Plugin.html">$b_Plugin</a>-&gt;<a onClick="logVariable('name')" class="var it8984" onMouseOver="hilite(8984)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a> );
<a name="l1160"><span class="linenum">1160</span></a>      }
<a name="l1161"><span class="linenum">1161</span></a>  
<a name="l1162"><span class="linenum">1162</span></a>  
<a name="l1163"><span class="linenum">1163</span></a>      <span class="comment">/**</span>
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment">     * Validate dependencies of a Plugin.</span>
<a name="l1165"><span class="linenum">1165</span></a>  <span class="comment">     *</span>
<a name="l1166"><span class="linenum">1166</span></a>  <span class="comment">     * @param Plugin</span>
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment">     * @param string Mode of check: either 'enable' or 'disable'</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment">     * @return array The key 'note' holds an array of notes (recommendations), the key 'error' holds a list</span>
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment">     *               of messages for dependency errors.</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment">     */</span>
<a name="l1171"><span class="linenum">1171</span></a>  	function <a class="function" onClick="logFunction('validate_dependencies')" href="../../../../_functions/validate_dependencies.html" onMouseOver="funcPopup(event,'validate_dependencies')">validate_dependencies</a>( &amp; <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../../_variables/mode.html">$mode</a> )
<a name="l1172"><span class="linenum">1172</span></a>      {
<a name="l1173"><span class="linenum">1173</span></a>          global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../../../../_variables/app_name.html">$app_name</a>;
<a name="l1174"><span class="linenum">1174</span></a>          global <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../../../_variables/app_version.html">$app_version</a>;
<a name="l1175"><span class="linenum">1175</span></a>  
<a name="l1176"><span class="linenum">1176</span></a>          <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a> = array();
<a name="l1177"><span class="linenum">1177</span></a>  
<a name="l1178"><span class="linenum">1178</span></a>          if( <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../../_variables/mode.html">$mode</a> == 'disable' )
<a name="l1179"><span class="linenum">1179</span></a>          { // Check the whole list of installed plugins if they depend on our Plugin or it's (set of) events.
<a name="l1180"><span class="linenum">1180</span></a>              <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('required_by_plugin')" href="../../../../_variables/required_by_plugin.html">$required_by_plugin</a> = array(); <span class="comment">// a list of plugin classnames that require our poor Plugin</span>
<a name="l1181"><span class="linenum">1181</span></a>  
<a name="l1182"><span class="linenum">1182</span></a>              foreach( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sorted_IDs')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/sorted_IDs.html">sorted_IDs</a> as <a class="var it4765" onMouseOver="hilite(4765)" onMouseOut="lolite()" onClick="logVariable('validate_against_ID')" href="../../../../_variables/validate_against_ID.html">$validate_against_ID</a> )
<a name="l1183"><span class="linenum">1183</span></a>              {
<a name="l1184"><span class="linenum">1184</span></a>                  if( <a class="var it4765" onMouseOver="hilite(4765)" onMouseOut="lolite()" onClick="logVariable('validate_against_ID')" href="../../../../_variables/validate_against_ID.html">$validate_against_ID</a> == <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> )
<a name="l1185"><span class="linenum">1185</span></a>                  { // the plugin itself
<a name="l1186"><span class="linenum">1186</span></a>                      continue;
<a name="l1187"><span class="linenum">1187</span></a>                  }
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>                  <a class="var it4766" onMouseOver="hilite(4766)" onMouseOut="lolite()" onClick="logVariable('against_Plugin')" href="../../../../_variables/against_Plugin.html">$against_Plugin</a> = &amp; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;get_by_ID(<a class="var it4765" onMouseOver="hilite(4765)" onMouseOut="lolite()" onClick="logVariable('validate_against_ID')" href="../../../../_variables/validate_against_ID.html">$validate_against_ID</a>);
<a name="l1190"><span class="linenum">1190</span></a>  
<a name="l1191"><span class="linenum">1191</span></a>                  if( <a class="var it4766" onMouseOver="hilite(4766)" onMouseOut="lolite()" onClick="logVariable('against_Plugin')" href="../../../../_variables/against_Plugin.html">$against_Plugin</a>-&gt;<a onClick="logVariable('status')" class="var it8985" onMouseOver="hilite(8985)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> != 'enabled' )
<a name="l1192"><span class="linenum">1192</span></a>                  { // The plugin is not enabled (this check is needed when checking deps with the Plugins_admin class)
<a name="l1193"><span class="linenum">1193</span></a>                      continue;
<a name="l1194"><span class="linenum">1194</span></a>                  }
<a name="l1195"><span class="linenum">1195</span></a>  
<a name="l1196"><span class="linenum">1196</span></a>                  <a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a> = <a class="var it4766" onMouseOver="hilite(4766)" onMouseOut="lolite()" onClick="logVariable('against_Plugin')" href="../../../../_variables/against_Plugin.html">$against_Plugin</a>-&gt;<a class="function" onClick="logFunction('GetDependencies')" href="../../../../_functions/getdependencies.html" onMouseOver="funcPopup(event,'getdependencies')">GetDependencies</a>();
<a name="l1197"><span class="linenum">1197</span></a>  
<a name="l1198"><span class="linenum">1198</span></a>                  if( empty(<a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a>['requires']) )
<a name="l1199"><span class="linenum">1199</span></a>                  { // has no dependencies
<a name="l1200"><span class="linenum">1200</span></a>                      continue;
<a name="l1201"><span class="linenum">1201</span></a>                  }
<a name="l1202"><span class="linenum">1202</span></a>  
<a name="l1203"><span class="linenum">1203</span></a>                  if( ! empty(<a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a>['requires']['plugins']) )
<a name="l1204"><span class="linenum">1204</span></a>                  {
<a name="l1205"><span class="linenum">1205</span></a>                      foreach( <a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a>['requires']['plugins'] as <a class="var it4768" onMouseOver="hilite(4768)" onMouseOut="lolite()" onClick="logVariable('l_req_plugin')" href="../../../../_variables/l_req_plugin.html">$l_req_plugin</a> )
<a name="l1206"><span class="linenum">1206</span></a>                      {
<a name="l1207"><span class="linenum">1207</span></a>                          if( ! <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4768" onMouseOver="hilite(4768)" onMouseOut="lolite()" onClick="logVariable('l_req_plugin')" href="../../../../_variables/l_req_plugin.html">$l_req_plugin</a>) )
<a name="l1208"><span class="linenum">1208</span></a>                          {
<a name="l1209"><span class="linenum">1209</span></a>                              <a class="var it4768" onMouseOver="hilite(4768)" onMouseOut="lolite()" onClick="logVariable('l_req_plugin')" href="../../../../_variables/l_req_plugin.html">$l_req_plugin</a> = array( <a class="var it4768" onMouseOver="hilite(4768)" onMouseOut="lolite()" onClick="logVariable('l_req_plugin')" href="../../../../_variables/l_req_plugin.html">$l_req_plugin</a>, 0 );
<a name="l1210"><span class="linenum">1210</span></a>                          }
<a name="l1211"><span class="linenum">1211</span></a>  
<a name="l1212"><span class="linenum">1212</span></a>                          if( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a> == <a class="var it4768" onMouseOver="hilite(4768)" onMouseOut="lolite()" onClick="logVariable('l_req_plugin')" href="../../../../_variables/l_req_plugin.html">$l_req_plugin</a>[0] )
<a name="l1213"><span class="linenum">1213</span></a>                          { // our plugin is required by this one, check if it is the only instance
<a name="l1214"><span class="linenum">1214</span></a>                              if( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_regs')" href="../../../../_functions/count_regs.html" onMouseOver="funcPopup(event,'count_regs')">count_regs</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>) &lt; 2 )
<a name="l1215"><span class="linenum">1215</span></a>                              {
<a name="l1216"><span class="linenum">1216</span></a>                                  <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('required_by_plugin')" href="../../../../_variables/required_by_plugin.html">$required_by_plugin</a>[] = <a class="var it4766" onMouseOver="hilite(4766)" onMouseOut="lolite()" onClick="logVariable('against_Plugin')" href="../../../../_variables/against_Plugin.html">$against_Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8985" onMouseOver="hilite(8985)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>;
<a name="l1217"><span class="linenum">1217</span></a>                              }
<a name="l1218"><span class="linenum">1218</span></a>                          }
<a name="l1219"><span class="linenum">1219</span></a>                      }
<a name="l1220"><span class="linenum">1220</span></a>                  }
<a name="l1221"><span class="linenum">1221</span></a>  
<a name="l1222"><span class="linenum">1222</span></a>                  if( ! empty(<a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a>['requires']['events_by_one']) )
<a name="l1223"><span class="linenum">1223</span></a>                  {
<a name="l1224"><span class="linenum">1224</span></a>                      foreach( <a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a>['requires']['events_by_one'] as <a class="var it4769" onMouseOver="hilite(4769)" onMouseOut="lolite()" onClick="logVariable('req_events')" href="../../../../_variables/req_events.html">$req_events</a> )
<a name="l1225"><span class="linenum">1225</span></a>                      {
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment">                        // Get a list of plugins that provide all the events</span>
<a name="l1227"><span class="linenum">1227</span></a>                          <a class="var it4770" onMouseOver="hilite(4770)" onMouseOut="lolite()" onClick="logVariable('provided_by')" href="../../../../_variables/provided_by.html">$provided_by</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_list_by_all_events')" href="../../../../_functions/get_list_by_all_events.html" onMouseOver="funcPopup(event,'get_list_by_all_events')">get_list_by_all_events</a>( <a class="var it4769" onMouseOver="hilite(4769)" onMouseOut="lolite()" onClick="logVariable('req_events')" href="../../../../_variables/req_events.html">$req_events</a> ) );
<a name="l1228"><span class="linenum">1228</span></a>  
<a name="l1229"><span class="linenum">1229</span></a>                          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it4770" onMouseOver="hilite(4770)" onMouseOut="lolite()" onClick="logVariable('provided_by')" href="../../../../_variables/provided_by.html">$provided_by</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4770" onMouseOver="hilite(4770)" onMouseOut="lolite()" onClick="logVariable('provided_by')" href="../../../../_variables/provided_by.html">$provided_by</a>) &lt; 2 )
<a name="l1230"><span class="linenum">1230</span></a>                          { // we're the only Plugin which provides this set of events
<a name="l1231"><span class="linenum">1231</span></a>                              <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The events %s are required by %s (ID %d).' ), <a class="function" onClick="logFunction('implode_with_and')" href="../../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>(<a class="var it4769" onMouseOver="hilite(4769)" onMouseOut="lolite()" onClick="logVariable('req_events')" href="../../../../_variables/req_events.html">$req_events</a>), <a class="var it4766" onMouseOver="hilite(4766)" onMouseOut="lolite()" onClick="logVariable('against_Plugin')" href="../../../../_variables/against_Plugin.html">$against_Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8985" onMouseOver="hilite(8985)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>, <a class="var it4766" onMouseOver="hilite(4766)" onMouseOut="lolite()" onClick="logVariable('against_Plugin')" href="../../../../_variables/against_Plugin.html">$against_Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8985" onMouseOver="hilite(8985)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l1232"><span class="linenum">1232</span></a>                          }
<a name="l1233"><span class="linenum">1233</span></a>                      }
<a name="l1234"><span class="linenum">1234</span></a>                  }
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>                  if( ! empty(<a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a>['requires']['events']) )
<a name="l1237"><span class="linenum">1237</span></a>                  {
<a name="l1238"><span class="linenum">1238</span></a>                      foreach( <a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a>['requires']['events'] as <a class="var it4771" onMouseOver="hilite(4771)" onMouseOut="lolite()" onClick="logVariable('req_event')" href="../../../../_variables/req_event.html">$req_event</a> )
<a name="l1239"><span class="linenum">1239</span></a>                      {
<a name="l1240"><span class="linenum">1240</span></a>  <span class="comment">                        // Get a list of plugins that provide all the events</span>
<a name="l1241"><span class="linenum">1241</span></a>                          <a class="var it4770" onMouseOver="hilite(4770)" onMouseOut="lolite()" onClick="logVariable('provided_by')" href="../../../../_variables/provided_by.html">$provided_by</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_list_by_event')" href="../../../../_functions/get_list_by_event.html" onMouseOver="funcPopup(event,'get_list_by_event')">get_list_by_event</a>( <a class="var it4771" onMouseOver="hilite(4771)" onMouseOut="lolite()" onClick="logVariable('req_event')" href="../../../../_variables/req_event.html">$req_event</a> ) );
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>                          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8976" onMouseOver="hilite(8976)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it4770" onMouseOver="hilite(4770)" onMouseOut="lolite()" onClick="logVariable('provided_by')" href="../../../../_variables/provided_by.html">$provided_by</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4770" onMouseOver="hilite(4770)" onMouseOut="lolite()" onClick="logVariable('provided_by')" href="../../../../_variables/provided_by.html">$provided_by</a>) &lt; 2 )
<a name="l1244"><span class="linenum">1244</span></a>                          { // we're the only Plugin which provides this event
<a name="l1245"><span class="linenum">1245</span></a>                              <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The event %s is required by %s (ID %d).' ), <a class="var it4771" onMouseOver="hilite(4771)" onMouseOut="lolite()" onClick="logVariable('req_event')" href="../../../../_variables/req_event.html">$req_event</a>, <a class="var it4766" onMouseOver="hilite(4766)" onMouseOut="lolite()" onClick="logVariable('against_Plugin')" href="../../../../_variables/against_Plugin.html">$against_Plugin</a>-&gt;<a onClick="logVariable('classname')" class="var it8985" onMouseOver="hilite(8985)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>, <a class="var it4766" onMouseOver="hilite(4766)" onMouseOut="lolite()" onClick="logVariable('against_Plugin')" href="../../../../_variables/against_Plugin.html">$against_Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8985" onMouseOver="hilite(8985)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l1246"><span class="linenum">1246</span></a>                          }
<a name="l1247"><span class="linenum">1247</span></a>                      }
<a name="l1248"><span class="linenum">1248</span></a>                  }
<a name="l1249"><span class="linenum">1249</span></a>  
<a name="l1250"><span class="linenum">1250</span></a>  <span class="comment">                // TODO: We might also handle the 'recommends' and add it to $msgs['note']</span>
<a name="l1251"><span class="linenum">1251</span></a>              }
<a name="l1252"><span class="linenum">1252</span></a>  
<a name="l1253"><span class="linenum">1253</span></a>              if( ! empty( <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('required_by_plugin')" href="../../../../_variables/required_by_plugin.html">$required_by_plugin</a> ) )
<a name="l1254"><span class="linenum">1254</span></a>              { // Prepend the message to the beginning, because it's the most restrictive (IMHO)
<a name="l1255"><span class="linenum">1255</span></a>                  <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('required_by_plugin')" href="../../../../_variables/required_by_plugin.html">$required_by_plugin</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('required_by_plugin')" href="../../../../_variables/required_by_plugin.html">$required_by_plugin</a>);
<a name="l1256"><span class="linenum">1256</span></a>                  if( ! isset(<a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error']) )
<a name="l1257"><span class="linenum">1257</span></a>                  {
<a name="l1258"><span class="linenum">1258</span></a>                      <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'] = array();
<a name="l1259"><span class="linenum">1259</span></a>                  }
<a name="l1260"><span class="linenum">1260</span></a>                  <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>( <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'], sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The plugin is required by the following plugins: %s.'), <a class="function" onClick="logFunction('implode_with_and')" href="../../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>(<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('required_by_plugin')" href="../../../../_variables/required_by_plugin.html">$required_by_plugin</a>) ) );
<a name="l1261"><span class="linenum">1261</span></a>              }
<a name="l1262"><span class="linenum">1262</span></a>  
<a name="l1263"><span class="linenum">1263</span></a>              return <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>;
<a name="l1264"><span class="linenum">1264</span></a>          }
<a name="l1265"><span class="linenum">1265</span></a>  
<a name="l1266"><span class="linenum">1266</span></a>  
<a name="l1267"><span class="linenum">1267</span></a>  <span class="comment">        // mode 'enable':</span>
<a name="l1268"><span class="linenum">1268</span></a>          <a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a> = <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../../../_variables/Plugin.html">$Plugin</a>-&gt;<a class="function" onClick="logFunction('GetDependencies')" href="../../../../_functions/getdependencies.html" onMouseOver="funcPopup(event,'getdependencies')">GetDependencies</a>();
<a name="l1269"><span class="linenum">1269</span></a>  
<a name="l1270"><span class="linenum">1270</span></a>          if( empty(<a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a>) )
<a name="l1271"><span class="linenum">1271</span></a>          {
<a name="l1272"><span class="linenum">1272</span></a>              return array();
<a name="l1273"><span class="linenum">1273</span></a>          }
<a name="l1274"><span class="linenum">1274</span></a>  
<a name="l1275"><span class="linenum">1275</span></a>          foreach( <a class="var it4767" onMouseOver="hilite(4767)" onMouseOut="lolite()" onClick="logVariable('deps')" href="../../../../_variables/deps.html">$deps</a> as <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../../_variables/class.html">$class</a> =&gt; <a class="var it4772" onMouseOver="hilite(4772)" onMouseOut="lolite()" onClick="logVariable('dep_list')" href="../../../../_variables/dep_list.html">$dep_list</a> ) // class: &quot;requires&quot; or &quot;recommends&quot;
<a name="l1276"><span class="linenum">1276</span></a>          {
<a name="l1277"><span class="linenum">1277</span></a>              if( ! <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4772" onMouseOver="hilite(4772)" onMouseOut="lolite()" onClick="logVariable('dep_list')" href="../../../../_variables/dep_list.html">$dep_list</a>) )
<a name="l1278"><span class="linenum">1278</span></a>              { // Invalid format: &quot;throw&quot; <a class="function" onClick="logFunction('error')" href="../../../../_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a> (needs not translation)
<a name="l1279"><span class="linenum">1279</span></a>                  return array(
<a name="l1280"><span class="linenum">1280</span></a>                          'error' =&gt; array( '<a class="function" onClick="logFunction('GetDependencies')" href="../../../../_functions/getdependencies.html" onMouseOver="funcPopup(event,'getdependencies')">GetDependencies</a>() did not return array of arrays. Please contact the plugin developer.' )
<a name="l1281"><span class="linenum">1281</span></a>                      );
<a name="l1282"><span class="linenum">1282</span></a>              }
<a name="l1283"><span class="linenum">1283</span></a>              foreach( <a class="var it4772" onMouseOver="hilite(4772)" onMouseOut="lolite()" onClick="logVariable('dep_list')" href="../../../../_variables/dep_list.html">$dep_list</a> as <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> =&gt; <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a> )
<a name="l1284"><span class="linenum">1284</span></a>              {
<a name="l1285"><span class="linenum">1285</span></a>                  switch( <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> )
<a name="l1286"><span class="linenum">1286</span></a>                  {
<a name="l1287"><span class="linenum">1287</span></a>                      case 'events_by_one':
<a name="l1288"><span class="linenum">1288</span></a>                          foreach( <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a> as <a class="var it4774" onMouseOver="hilite(4774)" onMouseOut="lolite()" onClick="logVariable('sub_param')" href="../../../../_variables/sub_param.html">$sub_param</a> )
<a name="l1289"><span class="linenum">1289</span></a>                          {
<a name="l1290"><span class="linenum">1290</span></a>                              if( ! <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4774" onMouseOver="hilite(4774)" onMouseOut="lolite()" onClick="logVariable('sub_param')" href="../../../../_variables/sub_param.html">$sub_param</a>) )
<a name="l1291"><span class="linenum">1291</span></a>                              { // Invalid format: &quot;throw&quot; <a class="function" onClick="logFunction('error')" href="../../../../_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a> (needs not translation)
<a name="l1292"><span class="linenum">1292</span></a>                                  return array(
<a name="l1293"><span class="linenum">1293</span></a>                                          'error' =&gt; array( '<a class="function" onClick="logFunction('GetDependencies')" href="../../../../_functions/getdependencies.html" onMouseOver="funcPopup(event,'getdependencies')">GetDependencies</a>() did not return array of arrays for &quot;events_by_one&quot;. Please contact the plugin developer.' )
<a name="l1294"><span class="linenum">1294</span></a>                                      );
<a name="l1295"><span class="linenum">1295</span></a>                              }
<a name="l1296"><span class="linenum">1296</span></a>                              if( ! <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('are_events_available')" href="../../../../_functions/are_events_available.html" onMouseOver="funcPopup(event,'are_events_available')">are_events_available</a>( <a class="var it4774" onMouseOver="hilite(4774)" onMouseOut="lolite()" onClick="logVariable('sub_param')" href="../../../../_variables/sub_param.html">$sub_param</a>, true ) )
<a name="l1297"><span class="linenum">1297</span></a>                              {
<a name="l1298"><span class="linenum">1298</span></a>                                  if( <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../../_variables/class.html">$class</a> == 'recommends' )
<a name="l1299"><span class="linenum">1299</span></a>                                  {
<a name="l1300"><span class="linenum">1300</span></a>                                      <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['note'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin recommends a plugin which provides all of the following events: %s.' ), <a class="function" onClick="logFunction('implode_with_and')" href="../../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>( <a class="var it4774" onMouseOver="hilite(4774)" onMouseOut="lolite()" onClick="logVariable('sub_param')" href="../../../../_variables/sub_param.html">$sub_param</a> ) );
<a name="l1301"><span class="linenum">1301</span></a>                                  }
<a name="l1302"><span class="linenum">1302</span></a>                                  else
<a name="l1303"><span class="linenum">1303</span></a>                                  {
<a name="l1304"><span class="linenum">1304</span></a>                                      <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin requires a plugin which provides all of the following events: %s.' ), <a class="function" onClick="logFunction('implode_with_and')" href="../../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>( <a class="var it4774" onMouseOver="hilite(4774)" onMouseOut="lolite()" onClick="logVariable('sub_param')" href="../../../../_variables/sub_param.html">$sub_param</a> ) );
<a name="l1305"><span class="linenum">1305</span></a>                                  }
<a name="l1306"><span class="linenum">1306</span></a>                              }
<a name="l1307"><span class="linenum">1307</span></a>                          }
<a name="l1308"><span class="linenum">1308</span></a>                          break;
<a name="l1309"><span class="linenum">1309</span></a>  
<a name="l1310"><span class="linenum">1310</span></a>                      case 'events':
<a name="l1311"><span class="linenum">1311</span></a>                          if( ! <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('are_events_available')" href="../../../../_functions/are_events_available.html" onMouseOver="funcPopup(event,'are_events_available')">are_events_available</a>( <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a>, false ) )
<a name="l1312"><span class="linenum">1312</span></a>                          {
<a name="l1313"><span class="linenum">1313</span></a>                              if( <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../../_variables/class.html">$class</a> == 'recommends' )
<a name="l1314"><span class="linenum">1314</span></a>                              {
<a name="l1315"><span class="linenum">1315</span></a>                                  <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['note'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin recommends plugins which provide the events: %s.' ), <a class="function" onClick="logFunction('implode_with_and')" href="../../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>( <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a> ) );
<a name="l1316"><span class="linenum">1316</span></a>                              }
<a name="l1317"><span class="linenum">1317</span></a>                              else
<a name="l1318"><span class="linenum">1318</span></a>                              {
<a name="l1319"><span class="linenum">1319</span></a>                                  <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin requires plugins which provide the events: %s.' ), <a class="function" onClick="logFunction('implode_with_and')" href="../../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>( <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a> ) );
<a name="l1320"><span class="linenum">1320</span></a>                              }
<a name="l1321"><span class="linenum">1321</span></a>                          }
<a name="l1322"><span class="linenum">1322</span></a>                          break;
<a name="l1323"><span class="linenum">1323</span></a>  
<a name="l1324"><span class="linenum">1324</span></a>                      case 'plugins':
<a name="l1325"><span class="linenum">1325</span></a>                          if( ! <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a>) )
<a name="l1326"><span class="linenum">1326</span></a>                          { // Invalid format: &quot;throw&quot; <a class="function" onClick="logFunction('error')" href="../../../../_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a> (needs not translation)
<a name="l1327"><span class="linenum">1327</span></a>                              return array(
<a name="l1328"><span class="linenum">1328</span></a>                                      'error' =&gt; array( '<a class="function" onClick="logFunction('GetDependencies')" href="../../../../_functions/getdependencies.html" onMouseOver="funcPopup(event,'getdependencies')">GetDependencies</a>() did not return array of arrays for &quot;plugins&quot;. Please contact the plugin developer.' )
<a name="l1329"><span class="linenum">1329</span></a>                                  );
<a name="l1330"><span class="linenum">1330</span></a>                          }
<a name="l1331"><span class="linenum">1331</span></a>                          foreach( <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a> as <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a> )
<a name="l1332"><span class="linenum">1332</span></a>                          {
<a name="l1333"><span class="linenum">1333</span></a>                              if( ! <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>) )
<a name="l1334"><span class="linenum">1334</span></a>                              {
<a name="l1335"><span class="linenum">1335</span></a>                                  <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a> = array( <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>, '0' );
<a name="l1336"><span class="linenum">1336</span></a>                              }
<a name="l1337"><span class="linenum">1337</span></a>                              elseif( ! isset(<a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>[1]) )
<a name="l1338"><span class="linenum">1338</span></a>                              {
<a name="l1339"><span class="linenum">1339</span></a>                                  <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>[1] = '0';
<a name="l1340"><span class="linenum">1340</span></a>                              }
<a name="l1341"><span class="linenum">1341</span></a>  
<a name="l1342"><span class="linenum">1342</span></a>                              if( <a class="var it4776" onMouseOver="hilite(4776)" onMouseOut="lolite()" onClick="logVariable('versions')" href="../../../../_variables/versions.html">$versions</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( '
<a name="l1343"><span class="linenum">1343</span></a>                                  SELECT plug_version FROM T_plugins
<a name="l1344"><span class="linenum">1344</span></a>                                   WHERE plug_classname = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>[0]).'
<a name="l1345"><span class="linenum">1345</span></a>                                       AND plug_status = &quot;enabled&quot;' ) )
<a name="l1346"><span class="linenum">1346</span></a>                              {
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment">                                // Clean up version from CVS Revision prefix/suffix:</span>
<a name="l1348"><span class="linenum">1348</span></a>                                  <a class="var it4776" onMouseOver="hilite(4776)" onMouseOut="lolite()" onClick="logVariable('versions')" href="../../../../_variables/versions.html">$versions</a>[] = <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>[1];
<a name="l1349"><span class="linenum">1349</span></a>                                  <a class="var it4777" onMouseOver="hilite(4777)" onMouseOut="lolite()" onClick="logVariable('clean_versions')" href="../../../../_variables/clean_versions.html">$clean_versions</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( array( '~^(CVS\s+)?\$'.'Revision:\s*~i', '~\s*\$$~' ), '', <a class="var it4776" onMouseOver="hilite(4776)" onMouseOut="lolite()" onClick="logVariable('versions')" href="../../../../_variables/versions.html">$versions</a> );
<a name="l1350"><span class="linenum">1350</span></a>                                  <a class="var it4778" onMouseOver="hilite(4778)" onMouseOut="lolite()" onClick="logVariable('clean_req_ver')" href="../../../../_variables/clean_req_ver.html">$clean_req_ver</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../../../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it4777" onMouseOver="hilite(4777)" onMouseOut="lolite()" onClick="logVariable('clean_versions')" href="../../../../_variables/clean_versions.html">$clean_versions</a>);
<a name="l1351"><span class="linenum">1351</span></a>                                  <a class="phpfunction" onClick="logFunction('usort')" href="../../../../_functions/usort.html" onMouseOver="phpfuncPopup(event,'usort')">usort</a>( <a class="var it4777" onMouseOver="hilite(4777)" onMouseOut="lolite()" onClick="logVariable('clean_versions')" href="../../../../_variables/clean_versions.html">$clean_versions</a>, 'version_compare' );
<a name="l1352"><span class="linenum">1352</span></a>                                  <a class="var it4779" onMouseOver="hilite(4779)" onMouseOut="lolite()" onClick="logVariable('clean_oldest_enabled')" href="../../../../_variables/clean_oldest_enabled.html">$clean_oldest_enabled</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it4777" onMouseOver="hilite(4777)" onMouseOut="lolite()" onClick="logVariable('clean_versions')" href="../../../../_variables/clean_versions.html">$clean_versions</a>);
<a name="l1353"><span class="linenum">1353</span></a>  
<a name="l1354"><span class="linenum">1354</span></a>                                  if( <a class="phpfunction" onClick="logFunction('version_compare')" href="../../../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>( <a class="var it4779" onMouseOver="hilite(4779)" onMouseOut="lolite()" onClick="logVariable('clean_oldest_enabled')" href="../../../../_variables/clean_oldest_enabled.html">$clean_oldest_enabled</a>, <a class="var it4778" onMouseOver="hilite(4778)" onMouseOut="lolite()" onClick="logVariable('clean_req_ver')" href="../../../../_variables/clean_req_ver.html">$clean_req_ver</a>, '&lt;' ) )
<a name="l1355"><span class="linenum">1355</span></a>                                  { // at least one instance of the installed plugins is not the current version
<a name="l1356"><span class="linenum">1356</span></a>                                      <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin requires at least version %s of the plugin %s, but you have %s.' ), <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>[1], <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>[0], <a class="var it4779" onMouseOver="hilite(4779)" onMouseOut="lolite()" onClick="logVariable('clean_oldest_enabled')" href="../../../../_variables/clean_oldest_enabled.html">$clean_oldest_enabled</a> );
<a name="l1357"><span class="linenum">1357</span></a>                                  }
<a name="l1358"><span class="linenum">1358</span></a>                              }
<a name="l1359"><span class="linenum">1359</span></a>                              else
<a name="l1360"><span class="linenum">1360</span></a>                              { // no plugin existing
<a name="l1361"><span class="linenum">1361</span></a>                                  if( <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../../_variables/class.html">$class</a> == 'recommends' )
<a name="l1362"><span class="linenum">1362</span></a>                                  {
<a name="l1363"><span class="linenum">1363</span></a>                                      <a class="var it4780" onMouseOver="hilite(4780)" onMouseOut="lolite()" onClick="logVariable('recommends')" href="../../../../_variables/recommends.html">$recommends</a>[] = <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>[0];
<a name="l1364"><span class="linenum">1364</span></a>                                  }
<a name="l1365"><span class="linenum">1365</span></a>                                  else
<a name="l1366"><span class="linenum">1366</span></a>                                  {
<a name="l1367"><span class="linenum">1367</span></a>                                      <a class="var it4781" onMouseOver="hilite(4781)" onMouseOut="lolite()" onClick="logVariable('requires')" href="../../../../_variables/requires.html">$requires</a>[] = <a class="var it4775" onMouseOver="hilite(4775)" onMouseOut="lolite()" onClick="logVariable('plugin_req')" href="../../../../_variables/plugin_req.html">$plugin_req</a>[0];
<a name="l1368"><span class="linenum">1368</span></a>                                  }
<a name="l1369"><span class="linenum">1369</span></a>                              }
<a name="l1370"><span class="linenum">1370</span></a>                          }
<a name="l1371"><span class="linenum">1371</span></a>  
<a name="l1372"><span class="linenum">1372</span></a>                          if( ! empty( <a class="var it4781" onMouseOver="hilite(4781)" onMouseOut="lolite()" onClick="logVariable('requires')" href="../../../../_variables/requires.html">$requires</a> ) )
<a name="l1373"><span class="linenum">1373</span></a>                          {
<a name="l1374"><span class="linenum">1374</span></a>                              <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin requires the plugins: %s.' ), <a class="function" onClick="logFunction('implode_with_and')" href="../../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>( <a class="var it4781" onMouseOver="hilite(4781)" onMouseOut="lolite()" onClick="logVariable('requires')" href="../../../../_variables/requires.html">$requires</a> ) );
<a name="l1375"><span class="linenum">1375</span></a>                          }
<a name="l1376"><span class="linenum">1376</span></a>  
<a name="l1377"><span class="linenum">1377</span></a>                          if( ! empty( <a class="var it4780" onMouseOver="hilite(4780)" onMouseOut="lolite()" onClick="logVariable('recommends')" href="../../../../_variables/recommends.html">$recommends</a> ) )
<a name="l1378"><span class="linenum">1378</span></a>                          {
<a name="l1379"><span class="linenum">1379</span></a>                              <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['note'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The plugin recommends to install the plugins: %s.' ), <a class="function" onClick="logFunction('implode_with_and')" href="../../../../_functions/implode_with_and.html" onMouseOver="funcPopup(event,'implode_with_and')">implode_with_and</a>( <a class="var it4780" onMouseOver="hilite(4780)" onMouseOut="lolite()" onClick="logVariable('recommends')" href="../../../../_variables/recommends.html">$recommends</a> ) );
<a name="l1380"><span class="linenum">1380</span></a>                          }
<a name="l1381"><span class="linenum">1381</span></a>                          break;
<a name="l1382"><span class="linenum">1382</span></a>  
<a name="l1383"><span class="linenum">1383</span></a>  
<a name="l1384"><span class="linenum">1384</span></a>                      case 'app_min':
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment">                        // min b2evo version:</span>
<a name="l1386"><span class="linenum">1386</span></a>                          if( ! <a class="phpfunction" onClick="logFunction('version_compare')" href="../../../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>( <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../../../_variables/app_version.html">$app_version</a>, <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a>, '&gt;=' ) )
<a name="l1387"><span class="linenum">1387</span></a>                          {
<a name="l1388"><span class="linenum">1388</span></a>                              if( <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../../_variables/class.html">$class</a> == 'recommends' )
<a name="l1389"><span class="linenum">1389</span></a>                              {
<a name="l1390"><span class="linenum">1390</span></a>                                  <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['note'][] = sprintf( <span class="comment">/* 1: recommened version; 2: application name (default &quot;b2evolution&quot;); 3: current application version */</span>
<a name="l1391"><span class="linenum">1391</span></a>                                      <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The plugin recommends version %s of %s (%s is installed). Think about upgrading.'), <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a>, <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../../../../_variables/app_name.html">$app_name</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../../../_variables/app_version.html">$app_version</a> );
<a name="l1392"><span class="linenum">1392</span></a>                              }
<a name="l1393"><span class="linenum">1393</span></a>                              else
<a name="l1394"><span class="linenum">1394</span></a>                              {
<a name="l1395"><span class="linenum">1395</span></a>                                  <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'][] = sprintf( <span class="comment">/* 1: required version; 2: application name (default &quot;b2evolution&quot;); 3: current application version */</span>
<a name="l1396"><span class="linenum">1396</span></a>                                      <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The plugin requires version %s of %s, but %s is installed.'), <a class="var it4773" onMouseOver="hilite(4773)" onMouseOut="lolite()" onClick="logVariable('type_params')" href="../../../../_variables/type_params.html">$type_params</a>, <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../../../../_variables/app_name.html">$app_name</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../../../_variables/app_version.html">$app_version</a> );
<a name="l1397"><span class="linenum">1397</span></a>                              }
<a name="l1398"><span class="linenum">1398</span></a>                          }
<a name="l1399"><span class="linenum">1399</span></a>                          break;
<a name="l1400"><span class="linenum">1400</span></a>  
<a name="l1401"><span class="linenum">1401</span></a>  
<a name="l1402"><span class="linenum">1402</span></a>                      case 'api_min':
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment">                        // obsolete since 1.9:</span>
<a name="l1404"><span class="linenum">1404</span></a>                          continue;
<a name="l1405"><span class="linenum">1405</span></a>  
<a name="l1406"><span class="linenum">1406</span></a>  
<a name="l1407"><span class="linenum">1407</span></a>                      default:
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">                        // Unknown depency type, throw an error:</span>
<a name="l1409"><span class="linenum">1409</span></a>                          <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>['error'][] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Unknown dependency <a class="function" onClick="logFunction('type')" href="../../../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a> (%s). This probably means that the plugin is not compatible and you have to upgrade your %s installation.'), <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>, <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../../../../_variables/app_name.html">$app_name</a> );
<a name="l1410"><span class="linenum">1410</span></a>  
<a name="l1411"><span class="linenum">1411</span></a>                  }
<a name="l1412"><span class="linenum">1412</span></a>              }
<a name="l1413"><span class="linenum">1413</span></a>          }
<a name="l1414"><span class="linenum">1414</span></a>  
<a name="l1415"><span class="linenum">1415</span></a>          return <a class="var it2680" onMouseOver="hilite(2680)" onMouseOut="lolite()" onClick="logVariable('msgs')" href="../../../../_variables/msgs.html">$msgs</a>;
<a name="l1416"><span class="linenum">1416</span></a>      }
<a name="l1417"><span class="linenum">1417</span></a>  
<a name="l1418"><span class="linenum">1418</span></a>  
<a name="l1419"><span class="linenum">1419</span></a>      <span class="comment">/**</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment">     * Handle filter/unfilter_contents</span>
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">     *</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment">     * See {@link Plugins_admin::filter_contents()} and {@link Plugins_admin::unfilter_contents()}</span>
<a name="l1423"><span class="linenum">1423</span></a>  <span class="comment">     *</span>
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment">     * @param array renderer codes to use for opt-out, opt-in and lazy</span>
<a name="l1425"><span class="linenum">1425</span></a>  <span class="comment">     * @param array array params key =&gt; value, must contain:</span>
<a name="l1426"><span class="linenum">1426</span></a>  <span class="comment">     *  - 'event' =&gt; 'FilterItemContents' or 'UnfilterItemContents'</span>
<a name="l1427"><span class="linenum">1427</span></a>  <span class="comment">     *  - 'object_type' =&gt; 'Item' or 'Comment'</span>
<a name="l1428"><span class="linenum">1428</span></a>  <span class="comment">     *  - 'object_Blog' =&gt; the Blog where the edited Object belongs to</span>
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">     *  - 'title' =&gt; the object title</span>
<a name="l1430"><span class="linenum">1430</span></a>  <span class="comment">     *  - 'content' =&gt; the object content</span>
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">     *  @return mixed string rendered content on success | false on failure</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment">     */</span>
<a name="l1433"><span class="linenum">1433</span></a>  	function <a class="function" onClick="logFunction('process_event_filtering')" href="../../../../_functions/process_event_filtering.html" onMouseOver="funcPopup(event,'process_event_filtering')">process_event_filtering</a>( <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../../_variables/renderers.html">$renderers</a>, &amp; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> )
<a name="l1434"><span class="linenum">1434</span></a>      {
<a name="l1435"><span class="linenum">1435</span></a>          if( !isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['event'] ) || !<a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['event'], array( 'FilterItemContents', 'UnfilterItemContents' ) ) )
<a name="l1436"><span class="linenum">1436</span></a>          { // invalid event param
<a name="l1437"><span class="linenum">1437</span></a>              return false;
<a name="l1438"><span class="linenum">1438</span></a>          }
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>          if( !isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['object_Blog'] ) )
<a name="l1441"><span class="linenum">1441</span></a>          {
<a name="l1442"><span class="linenum">1442</span></a>              global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l1443"><span class="linenum">1443</span></a>              if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) )
<a name="l1444"><span class="linenum">1444</span></a>              {
<a name="l1445"><span class="linenum">1445</span></a>                  return false;
<a name="l1446"><span class="linenum">1446</span></a>              }
<a name="l1447"><span class="linenum">1447</span></a>              <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['object_Blog'] = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l1448"><span class="linenum">1448</span></a>          }
<a name="l1449"><span class="linenum">1449</span></a>  
<a name="l1450"><span class="linenum">1450</span></a>          if( isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['object_type'] ) &amp;&amp; ( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['object_type'] == 'Comment' ) )
<a name="l1451"><span class="linenum">1451</span></a>          {
<a name="l1452"><span class="linenum">1452</span></a>              <a class="var it4782" onMouseOver="hilite(4782)" onMouseOut="lolite()" onClick="logVariable('rendering_setting_name')" href="../../../../_variables/rendering_setting_name.html">$rendering_setting_name</a> = 'coll_apply_comment_rendering';
<a name="l1453"><span class="linenum">1453</span></a>          }
<a name="l1454"><span class="linenum">1454</span></a>          else
<a name="l1455"><span class="linenum">1455</span></a>          {
<a name="l1456"><span class="linenum">1456</span></a>              <a class="var it4782" onMouseOver="hilite(4782)" onMouseOut="lolite()" onClick="logVariable('rendering_setting_name')" href="../../../../_variables/rendering_setting_name.html">$rendering_setting_name</a> = 'coll_apply_rendering';
<a name="l1457"><span class="linenum">1457</span></a>          }
<a name="l1458"><span class="linenum">1458</span></a>  
<a name="l1459"><span class="linenum">1459</span></a>          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1460"><span class="linenum">1460</span></a>                  'title' =&gt; &amp; <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a>,
<a name="l1461"><span class="linenum">1461</span></a>                  'content' =&gt; &amp; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>,
<a name="l1462"><span class="linenum">1462</span></a>              ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>
<a name="l1463"><span class="linenum">1463</span></a>          );
<a name="l1464"><span class="linenum">1464</span></a>  
<a name="l1465"><span class="linenum">1465</span></a>          <a class="var it4754" onMouseOver="hilite(4754)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['event'];
<a name="l1466"><span class="linenum">1466</span></a>          <a class="var it4783" onMouseOver="hilite(4783)" onMouseOut="lolite()" onClick="logVariable('filter_Plugins')" href="../../../../_variables/filter_Plugins.html">$filter_Plugins</a> = <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_list_by_event')" href="../../../../_functions/get_list_by_event.html" onMouseOver="funcPopup(event,'get_list_by_event')">get_list_by_event</a>( <a class="var it4754" onMouseOver="hilite(4754)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a> );
<a name="l1467"><span class="linenum">1467</span></a>  
<a name="l1468"><span class="linenum">1468</span></a>          foreach( <a class="var it4783" onMouseOver="hilite(4783)" onMouseOut="lolite()" onClick="logVariable('filter_Plugins')" href="../../../../_variables/filter_Plugins.html">$filter_Plugins</a> as <a class="var it4784" onMouseOver="hilite(4784)" onMouseOut="lolite()" onClick="logVariable('loop_filter_Plugin')" href="../../../../_variables/loop_filter_Plugin.html">$loop_filter_Plugin</a> )
<a name="l1469"><span class="linenum">1469</span></a>          { // Go through whole list of renders
<a name="l1470"><span class="linenum">1470</span></a>              <a class="var it4785" onMouseOver="hilite(4785)" onMouseOut="lolite()" onClick="logVariable('rendering_setting_value')" href="../../../../_variables/rendering_setting_value.html">$rendering_setting_value</a> = <a class="var it4784" onMouseOver="hilite(4784)" onMouseOut="lolite()" onClick="logVariable('loop_filter_Plugin')" href="../../../../_variables/loop_filter_Plugin.html">$loop_filter_Plugin</a>-&gt;<a class="function" onClick="logFunction('get_coll_setting')" href="../../../../_functions/get_coll_setting.html" onMouseOver="funcPopup(event,'get_coll_setting')">get_coll_setting</a>( <a class="var it4782" onMouseOver="hilite(4782)" onMouseOut="lolite()" onClick="logVariable('rendering_setting_name')" href="../../../../_variables/rendering_setting_name.html">$rendering_setting_name</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['object_Blog'] );
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>              if( <a class="var it4784" onMouseOver="hilite(4784)" onMouseOut="lolite()" onClick="logVariable('loop_filter_Plugin')" href="../../../../_variables/loop_filter_Plugin.html">$loop_filter_Plugin</a>-&gt;<a class="function" onClick="logFunction('is_renderer_enabled')" href="../../../../_functions/is_renderer_enabled.html" onMouseOver="funcPopup(event,'is_renderer_enabled')">is_renderer_enabled</a>( <a class="var it4785" onMouseOver="hilite(4785)" onMouseOut="lolite()" onClick="logVariable('rendering_setting_value')" href="../../../../_variables/rendering_setting_value.html">$rendering_setting_value</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../../_variables/renderers.html">$renderers</a> ) )
<a name="l1473"><span class="linenum">1473</span></a>              { // Plugin is enabled to call method
<a name="l1474"><span class="linenum">1474</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('call_method')" href="../../../../_functions/call_method.html" onMouseOver="funcPopup(event,'call_method')">call_method</a>( <a class="var it4784" onMouseOver="hilite(4784)" onMouseOut="lolite()" onClick="logVariable('loop_filter_Plugin')" href="../../../../_variables/loop_filter_Plugin.html">$loop_filter_Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it8986" onMouseOver="hilite(8986)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it4754" onMouseOver="hilite(4754)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l1475"><span class="linenum">1475</span></a>              }
<a name="l1476"><span class="linenum">1476</span></a>          }
<a name="l1477"><span class="linenum">1477</span></a>  
<a name="l1478"><span class="linenum">1478</span></a>          return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>;
<a name="l1479"><span class="linenum">1479</span></a>      }
<a name="l1480"><span class="linenum">1480</span></a>  
<a name="l1481"><span class="linenum">1481</span></a>  
<a name="l1482"><span class="linenum">1482</span></a>      <span class="comment">/**</span>
<a name="l1483"><span class="linenum">1483</span></a>  <span class="comment">     * Filter (post) contents by calling the relevant filter plugins.</span>
<a name="l1484"><span class="linenum">1484</span></a>  <span class="comment">     *</span>
<a name="l1485"><span class="linenum">1485</span></a>  <span class="comment">     * Works very much like render() except that it's called at insert/update time and BEFORE validation.</span>
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment">     * Gives an opportunity to do some serious cleanup on what the user has typed.</span>
<a name="l1487"><span class="linenum">1487</span></a>  <span class="comment">     *</span>
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment">     * This uses the lost of renderers, because filtering may need to work in conjunction with rendering,</span>
<a name="l1489"><span class="linenum">1489</span></a>  <span class="comment">     * e-g: code display: you want to filter out tags before validation and later you want to render color/fixed font.</span>
<a name="l1490"><span class="linenum">1490</span></a>  <span class="comment">     * For brute force filtering, use 'always' or 'stealth' modes.</span>
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment">     * @see Plugins::render()</span>
<a name="l1492"><span class="linenum">1492</span></a>  <span class="comment">     *</span>
<a name="l1493"><span class="linenum">1493</span></a>  <span class="comment">     * @param string content to render (by reference)</span>
<a name="l1494"><span class="linenum">1494</span></a>  <span class="comment">     * @param array renderer codes to use for opt-out, opt-in and lazy</span>
<a name="l1495"><span class="linenum">1495</span></a>  <span class="comment">     * @param array params must contain the 'object_type' ( Item or Comment ) and the 'object_Blog'</span>
<a name="l1496"><span class="linenum">1496</span></a>  <span class="comment">     * @return mixed string rendered content on success | false on failure</span>
<a name="l1497"><span class="linenum">1497</span></a>  <span class="comment">     */</span>
<a name="l1498"><span class="linenum">1498</span></a>  	function <a class="function" onClick="logFunction('filter_contents')" href="../../../../_functions/filter_contents.html" onMouseOver="funcPopup(event,'filter_contents')">filter_contents</a>( &amp; <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a>, &amp; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../../_variables/renderers.html">$renderers</a>, &amp; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> )
<a name="l1499"><span class="linenum">1499</span></a>      {
<a name="l1500"><span class="linenum">1500</span></a>          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1501"><span class="linenum">1501</span></a>                  'event' =&gt; 'FilterItemContents',
<a name="l1502"><span class="linenum">1502</span></a>                  'title' =&gt; &amp; <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a>,
<a name="l1503"><span class="linenum">1503</span></a>                  'content' =&gt; &amp; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>,
<a name="l1504"><span class="linenum">1504</span></a>              ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>
<a name="l1505"><span class="linenum">1505</span></a>          );
<a name="l1506"><span class="linenum">1506</span></a>  
<a name="l1507"><span class="linenum">1507</span></a>          return <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_event_filtering')" href="../../../../_functions/process_event_filtering.html" onMouseOver="funcPopup(event,'process_event_filtering')">process_event_filtering</a>( <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../../_variables/renderers.html">$renderers</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l1508"><span class="linenum">1508</span></a>      }
<a name="l1509"><span class="linenum">1509</span></a>  
<a name="l1510"><span class="linenum">1510</span></a>  
<a name="l1511"><span class="linenum">1511</span></a>      <span class="comment">/**</span>
<a name="l1512"><span class="linenum">1512</span></a>  <span class="comment">     * UnFilter (post) contents by calling the relevant filter plugins.</span>
<a name="l1513"><span class="linenum">1513</span></a>  <span class="comment">     *</span>
<a name="l1514"><span class="linenum">1514</span></a>  <span class="comment">     * This is the opposite of filter_content. It is used to restore some specifcs before editing text.</span>
<a name="l1515"><span class="linenum">1515</span></a>  <span class="comment">     * For example, this can be used to replace complex sequences of tags with a custome meta-tag,</span>
<a name="l1516"><span class="linenum">1516</span></a>  <span class="comment">     * e-g: &lt;strong&gt; can become &lt;s&gt; for convenient editing.</span>
<a name="l1517"><span class="linenum">1517</span></a>  <span class="comment">     *</span>
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">     * This uses the list of renderers, because un/filtering may need to work in conjunction with rendering,</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment">     * e-g: code display: you want to filter in/out tags before validation and later you want to render color/fixed font.</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment">     * For brute force unfiltering, use 'always' or 'stealth' modes.</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">     * @see Plugins::render()</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">     * @see Plugins::filter()</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment">     *</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment">     * @todo fp&gt; it would probably make sense to do the unfiltering in reverse order compared to filtering</span>
<a name="l1525"><span class="linenum">1525</span></a>  <span class="comment">     *</span>
<a name="l1526"><span class="linenum">1526</span></a>  <span class="comment">     * @param string title to render (by reference)</span>
<a name="l1527"><span class="linenum">1527</span></a>  <span class="comment">     * @param string content to render (by reference)</span>
<a name="l1528"><span class="linenum">1528</span></a>  <span class="comment">     * @param array renderer codes to use for opt-out, opt-in and lazy</span>
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment">     * @param array params must contain the 'object_type' ( Item or Comment ) and the 'object_Blog'</span>
<a name="l1530"><span class="linenum">1530</span></a>  <span class="comment">     * @return mixed string rendered content on success | false on failure</span>
<a name="l1531"><span class="linenum">1531</span></a>  <span class="comment">     */</span>
<a name="l1532"><span class="linenum">1532</span></a>  	function <a class="function" onClick="logFunction('unfilter_contents')" href="../../../../_functions/unfilter_contents.html" onMouseOver="funcPopup(event,'unfilter_contents')">unfilter_contents</a>( &amp; <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a>, &amp; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../../_variables/renderers.html">$renderers</a>, &amp; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> )
<a name="l1533"><span class="linenum">1533</span></a>      {
<a name="l1534"><span class="linenum">1534</span></a>          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1535"><span class="linenum">1535</span></a>                  'event' =&gt; 'UnfilterItemContents',
<a name="l1536"><span class="linenum">1536</span></a>                  'title' =&gt; &amp; <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a>,
<a name="l1537"><span class="linenum">1537</span></a>                  'content' =&gt; &amp; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>,
<a name="l1538"><span class="linenum">1538</span></a>              ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>
<a name="l1539"><span class="linenum">1539</span></a>          );
<a name="l1540"><span class="linenum">1540</span></a>  
<a name="l1541"><span class="linenum">1541</span></a>  <span class="comment">        // fp&gt; TODO: reverse order</span>
<a name="l1542"><span class="linenum">1542</span></a>          return <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_event_filtering')" href="../../../../_functions/process_event_filtering.html" onMouseOver="funcPopup(event,'process_event_filtering')">process_event_filtering</a>( <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../../_variables/renderers.html">$renderers</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l1543"><span class="linenum">1543</span></a>      }
<a name="l1544"><span class="linenum">1544</span></a>  
<a name="l1545"><span class="linenum">1545</span></a>  }
<a name="l1546"><span class="linenum">1546</span></a>  
<a name="l1547"><span class="linenum">1547</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['blogs/inc/_core/model/db','_db.class.php',1092]], 140],
'is_renderer_enabled': ['is_renderer_enabled', 'Check if this plugin is enabled to render ', [['blogs/inc/plugins','_plugin.class.php',3314]], 4],
't_': ['t_', 'TRANSLATE! ', [['blogs/inc/locales','_locale.funcs.php',48],['blogs/inc/locales','_locale.funcs.php',240],['blogs/inc/skins/model','_skin.class.php',672],['blogs/inc/_core/model','_module.class.php',79],['blogs/rsc/js','blog_widgets.js',422],['blogs/inc/plugins','_plugin.class.php',2617]], 10201],
'invalidate_pagecaches': ['invalidate_pagecaches', 'Invalidate all page caches. This function should be processed every time, when some users or global settings was modified, and this modification has an imortant influence for the front office display. Modifications that requires to invalidate all page caches: - installing/removing/reloading/enabling/disabling plugins - editing user settings like allow profile pics, new users can register, user settings>display ', [['blogs/inc/_core','_misc.funcs.php',5463]], 10],
'reload_plugins': ['reload_plugins', 'Reload all plugins to detect changes - Register new events - Unregister obsolete events - Detect plugins with no code and try to have at least one plugin with the default code ', [['blogs/inc/plugins/model','_plugins_admin.class.php',858]], 2],
'get_list_by_all_events': ['get_list_by_all_events', 'Get a list of plugins that provide all given events. ', [['blogs/inc/plugins/model','_plugins.class.php',1641]], 2],
'call_method': ['call_method', 'Call a method on a Plugin. ', [['blogs/inc/plugins/model','_plugins.class.php',1172]], 24],
'getdependencies': ['getdependencies', 'We require b2evo 3.2.0 or above. ', [['blogs/plugins/twitter_plugin','_twitter.plugin.php',91],['blogs/plugins/tinymce_plugin','_tinymce.plugin.php',223],['blogs/plugins/test_plugin','_test.plugin.php',280],['blogs/inc/plugins','_plugin.class.php',539]], 5],
'init_settings': ['init_settings', 'Init {@link Plugin::$Settings} and {@link Plugin::$UserSettings}, either by unsetting them for PHP5\'s overloading or instantiating them for PHP4. ', [['blogs/inc/plugins/model','_plugins.class.php',650]], 0],
'plugininit': ['plugininit', 'Init ', [['blogs/plugins','_generic_ping.plugin.php',58],['blogs/plugins','_wikilinks.plugin.php',32],['blogs/plugins/html5_videojs_plugin','_html5_videojs.plugin.php',31],['blogs/plugins','_autolinks.plugin.php',68],['blogs/plugins','_google_maps.plugin.php',58],['blogs/plugins','_bookmarklet.plugin.php',37],['blogs/plugins/markdown_plugin','_markdown.plugin.php',32],['blogs/plugins','_auto_p.plugin.php',49],['blogs/plugins/prism_plugin','_prism.plugin.php',28],['blogs/plugins/twitter_plugin','_twitter.plugin.php',62],['blogs/plugins/adsense_plugin','_adsense.plugin.php',32],['blogs/plugins','_gmcode.plugin.php',69],['blogs/plugins','_wacko.plugin.php',69],['blogs/plugins/watermark_plugin','_watermark.plugin.php',33],['blogs/plugins','_texturize.plugin.php',27],['blogs/plugins/tinymce_plugin','_tinymce.plugin.php',51],['blogs/plugins','_smilies.plugin.php',57],['blogs/plugins','_ping_pingomatic.plugin.php',61],['blogs/plugins','_quicktags.plugin.php',29],['blogs/plugins','_facebook.plugin.php',37],['blogs/plugins','_archives.plugin.php',63],['blogs/plugins','_shortcodes.plugin.php',29],['blogs/plugins','_whosonline.plugin.php',57],['blogs/plugins/html5_mediaelementjs_plugin','_html5_mediaelementjs.plugin.php',31],['blogs/plugins/infodots_plugin','_infodots.plugin.php',43],['blogs/plugins','_calendar.plugin.php',63],['blogs/plugins/test_plugin','_test.plugin.php',67],['blogs/plugins','_ping_b2evonet.plugin.php',61],['blogs/plugins/code_highlight_plugin','_code_highlight.plugin.php',121],['blogs/plugins/videoplug_plugin','_videoplug.plugin.php',32],['blogs/plugins/flowplayer_plugin','_flowplayer.plugin.php',32],['blogs/inc/plugins','_plugin.class.php',297],['blogs/plugins/geoip_plugin','_geoip.plugin.php',76],['blogs/plugins','skeleton.plugin.php',57],['blogs/plugins/star_plugin','_star.plugin.php',40],['blogs/plugins/basic_antispam_plugin','_basic_antispam.plugin.php',59],['blogs/plugins','_bbcode.plugin.php',40]], 0],
'load_events': ['load_events', 'No-operation. ', [['blogs/inc/plugins/model','_plugins_admin_no_db.class.php',51],['blogs/inc/plugins/model','_plugins_admin.class.php',708],['blogs/inc/plugins/model','_plugins.class.php',1749]], 5],
'unfilter_contents': ['unfilter_contents', 'UnFilter (post) contents by calling the relevant filter plugins. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1511]], 7],
'install': ['install', 'Install current skin to DB ', [['blogs/inc/skins/model','_skin.class.php',95]], 3],
'count_regs': ['count_regs', 'Count # of registrations of same plugin. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',305],['blogs/inc/plugins/model','_plugins.class.php',2103]], 6],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['blogs/inc/_core/model/db','_db.class.php',1041]], 88],
'sort_plugin_priority': ['sort_plugin_priority', 'Callback function to sort plugins by priority (and classname, if they have same priority). ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1093]], 0],
'save_events': ['save_events', 'Save the events that the plugin provides into DB, while removing obsolete entries (that the plugin does not register anymore). ', [['blogs/inc/plugins/model','_plugins_admin.class.php',731]], 5],
'plugin': ['plugin', 'Constructor. ', [['blogs/inc/plugins','_plugin.class.php',286]], 32],
'implode_with_and': ['implode_with_and', 'Implode array( \'x\', \'y\', \'z\' ) to something like \'x, y and z\'. Useful for displaying list to the end user. ', [['blogs/inc/_core','_misc.funcs.php',4832]], 9],
'resume': ['resume', 'Resumes the timer on a category. ', [['blogs/inc/_core/model','_timer.class.php',144]], 43],
'register': ['register', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15015]], 16],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['blogs/inc/_core','_misc.funcs.php',2535]], 216],
'filter_contents': ['filter_contents', 'Filter (post) contents by calling the relevant filter plugins. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1482]], 3],
'add': ['add', 'Add object to cache, handling our own indices. ', [['blogs/inc/collections/model','_blogcache.class.php',69],['blogs/inc/users/model','_usercache.class.php',231],['blogs/inc/files/model','_filelist.class.php',392],['blogs/inc/_core/model','_log.class.php',124],['blogs/inc/_core/model','_log.class.php',593],['blogs/inc/files/model','_filetypecache.class.php',57],['blogs/inc/_ext/pclzip','pclzip.lib.php',455],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',356],['blogs/inc/users/model','_groupsettings.class.php',103],['blogs/inc/links/model','_linkcache.class.php',101],['blogs/inc/skins/model','_skincache.class.php',62],['blogs/inc/generic/model','_genericcategorycache.class.php',113],['blogs/inc/_core/model','_messages.class.php',121]], 2022],
'begin': ['begin', 'BEGIN A TRANSCATION ', [['blogs/inc/_core/model/db','_db.class.php',1547]], 101],
'sort_plugin_group': ['sort_plugin_group', 'Callback function to sort plugins by group, sub-group and name. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1125]], 0],
'get_filenames': ['get_filenames', 'Get an array of all directories (and optionally files) of a given directory, either flat (one-dimensional array) or multi-dimensional (then dirs are the keys and hold subdirs/files). ', [['blogs/inc/files/model','_file.funcs.php',98]], 16],
'load_class': ['load_class', 'Load class file ', [['blogs/inc/_core','_class4.funcs.php',28],['blogs/inc/_core','_class5.funcs.php',79]], 408],
'pause': ['pause', 'Pauses a timer category. It may me resumed later on, see {@link resume()}. ', [['blogs/inc/_core/model','_timer.class.php',114]], 71],
'are_events_available': ['are_events_available', 'Check if the requested list of events is provided by any or one plugin. ', [['blogs/inc/plugins/model','_plugins.class.php',1724],['blogs/inc/plugins','_plugin.class.php',2832]], 3],
'commit': ['commit', 'Commit current transaction ', [['blogs/inc/_core/model/db','_db.class.php',1591]], 114],
'get_registered_events': ['get_registered_events', 'Discover plugin events from its source file. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',430]], 6],
'type': ['type', 'Template function: display type of item ', [['blogs/inc/items/model','_itemlight.class.php',1208]], 36],
'get_list_by_event': ['get_list_by_event', '', [['blogs/inc/plugins/model','_plugins.class.php',1595]], 10],
'load_plugins_table': ['load_plugins_table', 'No-operation. ', [['blogs/inc/plugins/model','_plugins_admin_no_db.class.php',44],['blogs/inc/plugins/model','_plugins.class.php',1421]], 8],
'unregister': ['unregister', 'Un-register a plugin, only if forced. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',285],['blogs/inc/plugins/model','_plugins.class.php',595]], 6],
'init_mainlist': ['init_mainlist', 'Prepare the MainList object for displaying skins. ', [['blogs/inc/items/model','_item.funcs.php',42]], 6],
'set_code': ['set_code', 'Set the code for a given Plugin ID. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',908]], 3],
'clear': ['clear', 'Clear the cache ', [['blogs/inc/files/model','_filerootcache.class.php',173],['blogs/inc/users/model','_usercache.class.php',368],['blogs/inc/_core/model','_log.class.php',99],['blogs/inc/_core/model','_log.class.php',603],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',454],['blogs/inc/links/model','_linkcache.class.php',530],['blogs/inc/chapters/model','_chaptercache.class.php',65],['blogs/inc/generic/model','_genericcategorycache.class.php',98],['blogs/inc/_core/model','_messages.class.php',109]], 97],
'process_event_filtering': ['process_event_filtering', 'Handle filter/unfilter_contents ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1419]], 2],
'error': ['error', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',8636],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/spellchecker/includes','general.php',77],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/spellchecker/classes/utils','Logger.php',156]], 81],
'set_event_status': ['set_event_status', 'Set the status of an event for a given Plugin. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',976]], 2],
'get_apply_rendering_values': ['get_apply_rendering_values', 'Get the list of all possible values for apply_rendering (defines when a rendering Plugin can apply). ', [['blogs/inc/plugins/model','_plugins_admin.class.php',398]], 1],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['blogs/inc/locales','_pofile.class.php',267],['blogs/inc/_core/model/db','_db.class.php',503]], 791],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['blogs/inc/items/model','_itemlist.class.php',256],['blogs/inc/items/model','_itemlistlight.class.php',751],['blogs/inc/_core/model/db','_db.class.php',761],['blogs/inc/users/model','_userlist.class.php',474],['blogs/inc/_core/ui/results','_results.class.php',439],['blogs/inc/comments/model','_commentlist.class.php',515]], 972],
'alternateauthentication': ['alternateauthentication', 'Automagically login every user as "demouser" who is not logged in and does not try to currently. ', [['blogs/plugins/test_plugin','_test.plugin.php',766],['blogs/inc/plugins','_plugin.class.php',2336]], 1],
'validate_dependencies': ['validate_dependencies', 'Validate dependencies of a Plugin. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1163]], 3],
'get_coll_setting': ['get_coll_setting', '', [['blogs/inc/plugins','_plugin.class.php',3230]], 68],
'uninstall': ['uninstall', '', [['blogs/inc/plugins/model','_plugins_admin.class.php',651]], 1],
'get_supported_events': ['get_supported_events', 'Get the list of all events/hooks supported by the plugin framework. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',52]], 2],
'beforeinstall': ['beforeinstall', 'Event handler: Called before the plugin is installed. ', [['blogs/plugins/test_plugin','_test.plugin.php',693],['blogs/inc/plugins','_plugin.class.php',953]], 0],
'set_priority': ['set_priority', 'Set the priority for a given Plugin ID. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1012]], 2],
'restart': ['restart', 'Reset the iterator ', [['blogs/inc/files/model','_filelist.class.php',709],['blogs/inc/_core/ui/results','_results.class.php',397],['blogs/plugins','_archives.plugin.php',582],['blogs/inc/plugins/model','_plugins.class.php',769]], 27],
'getextraevents': ['getextraevents', 'Declare custom events that this plugin fires. ', [['blogs/plugins/tinymce_plugin','_tinymce.plugin.php',121],['blogs/plugins/test_plugin','_test.plugin.php',226],['blogs/inc/plugins','_plugin.class.php',598]], 1],
'sort_plugin_name': ['sort_plugin_name', 'Callback function to sort plugins by name. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1111]], 0],
'sort': ['sort', 'Sort the entries by sorting the internal {@link $_order_index} array. ', [['blogs/inc/files/model','_filelist.class.php',521],['blogs/inc/plugins/model','_plugins_admin.class.php',1056],['blogs/rsc/js/bootstrap','typeahead.bundle.js',640]], 34],
'discover': ['discover', 'Discover and register all available plugins in the {@link $plugins_path} folder/subfolders. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',329]], 2],
'substr': ['substr', '', [], 657],
'version_compare': ['version_compare', '', [], 83],
'array_pop': ['array_pop', '', [], 30],
'defined': ['defined', '', [], 874],
'array_diff': ['array_diff', '', [], 26],
'is_null': ['is_null', '', [], 251],
'array_reverse': ['array_reverse', '', [], 9],
'array_shift': ['array_shift', '', [], 51],
'array_unique': ['array_unique', '', [], 30],
'usort': ['usort', '', [], 10],
'is_readable': ['is_readable', '', [], 15],
'array_merge': ['array_merge', '', [], 500],
'strpos': ['strpos', '', [], 280],
'sort': ['sort', '', [], 34],
'count': ['count', '', [], 754],
'preg_replace': ['preg_replace', '', [], 281],
'is_string': ['is_string', '', [], 58],
'implode': ['implode', '', [], 456],
'file_get_contents': ['file_get_contents', '', [], 25],
'is_array': ['is_array', '', [], 243],
'basename': ['basename', '', [], 22],
'preg_match': ['preg_match', '', [], 363],
'in_array': ['in_array', '', [], 335],
'strcasecmp': ['strcasecmp', '', [], 25],
'token_get_all': ['token_get_all', '', [], 2],
'is_file': ['is_file', '', [], 24],
'array_search': ['array_search', '', [], 30],
'function_exists': ['function_exists', '', [], 130],
'array_unshift': ['array_unshift', '', [], 77],
'array_keys': ['array_keys', '', [], 69]};
CLASS_DATA={
'plugin': ['plugin', 'Plugin Class ', [['blogs/inc/plugins','_plugin.class.php',39]], 46],
'plugins_admin': ['plugins_admin', 'A Plugins object that loads all Plugins, not just the enabled ones. This is needed for the backoffice plugin management. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',32]], 1],
'plugins': ['plugins', 'Plugins Class ', [['blogs/inc/plugins/model','_plugins.class.php',46]], 13],
'user': ['user', 'User Class ', [['blogs/inc/users/model','_user.class.php',43]], 126],
'item': ['item', 'Item Class ', [['blogs/inc/items/model','_item.class.php',46]], 92]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['blogs/inc','_main.inc.php',55],['blogs/install','index.php',25],['blogs/install','debug.php',22]], 827],
'EVO_IS_INSTALLING': ['EVO_IS_INSTALLING', '', [['blogs/install','index.php',30]], 5],
'OBJECT': ['OBJECT', '', [['blogs/inc/_core/model/db','_db.class.php',69]], 53]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Jul  5 12:18:44 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
