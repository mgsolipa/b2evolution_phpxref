<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /blogs/inc/_ext/xmlrpc/_xmlrpc_wrappers.inc.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Jul  5 12:18:44 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='blogs/inc/_ext/xmlrpc';
filename='_xmlrpc_wrappers.inc.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/blogs/inc/_ext/xmlrpc/</a> -> <a href="_xmlrpc_wrappers.inc.php.html">_xmlrpc_wrappers.inc.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_xmlrpc_wrappers.inc.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_xmlrpc_wrappers.inc.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * PHP-XMLRPC &quot;wrapper&quot; functions</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> * Generate stubs to transparently access xmlrpc methods as php functions and viceversa</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> *</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * @version $Id: _xmlrpc_wrappers.inc.php 1180 2012-04-05 00:48:28Z sam2kb $</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * @author Gaetano Giunta</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @copyright (C) 2006-2009 G. Giunta</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * @license code licensed under the BSD License: http://phpxmlrpc.sourceforge.net/license.txt</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> *</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * @todo separate introspection from code generation for func-2-method wrapping</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * @todo use some better templating system for code generation?</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @todo implement method wrapping with preservation of php objs in calls</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * @todo when wrapping methods without obj rebuilding, use return_type = 'phpvals' (faster)</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> * @todo implement self-parsing of php code for PHP &lt;= 4</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> */</span>
<a name="l17"><span class="linenum">  17</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l18"><span class="linenum">  18</span></a>  
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment">    // requires: xmlrpc.inc</span>
<a name="l20"><span class="linenum">  20</span></a>  
<a name="l21"><span class="linenum">  21</span></a>      <span class="comment">/**</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment">    * Given a string defining a php type or phpxmlrpc type (loosely defined: strings</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment">    * accepted come from javadoc blocks), return corresponding phpxmlrpc type.</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">    * NB: for php 'resource' types returns empty string, since resources cannot be serialized;</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">    * for php class names returns 'struct', since php objects can be serialized as xmlrpc structs</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment">    * for php arrays always return array, even though arrays sometiles serialize as json structs</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">    * @param string $phptype</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">    * @return string</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">    */</span>
<a name="l30"><span class="linenum">  30</span></a>  	function <a class="function" onClick="logFunction('php_2_xmlrpc_type')" href="../../../../_functions/php_2_xmlrpc_type.html" onMouseOver="funcPopup(event,'php_2_xmlrpc_type')">php_2_xmlrpc_type</a>(<a class="var it5542" onMouseOver="hilite(5542)" onMouseOut="lolite()" onClick="logVariable('phptype')" href="../../../../_variables/phptype.html">$phptype</a>)
<a name="l31"><span class="linenum">  31</span></a>      {
<a name="l32"><span class="linenum">  32</span></a>          switch(<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it5542" onMouseOver="hilite(5542)" onMouseOut="lolite()" onClick="logVariable('phptype')" href="../../../../_variables/phptype.html">$phptype</a>))
<a name="l33"><span class="linenum">  33</span></a>          {
<a name="l34"><span class="linenum">  34</span></a>              case 'string':
<a name="l35"><span class="linenum">  35</span></a>                  return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcString'];
<a name="l36"><span class="linenum">  36</span></a>              case 'integer':
<a name="l37"><span class="linenum">  37</span></a>              case <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcInt']: // 'int'
<a name="l38"><span class="linenum">  38</span></a>              case <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcI4']:
<a name="l39"><span class="linenum">  39</span></a>                  return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcInt'];
<a name="l40"><span class="linenum">  40</span></a>              case 'double':
<a name="l41"><span class="linenum">  41</span></a>                  return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcDouble'];
<a name="l42"><span class="linenum">  42</span></a>              case 'boolean':
<a name="l43"><span class="linenum">  43</span></a>                  return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcBoolean'];
<a name="l44"><span class="linenum">  44</span></a>              case 'array':
<a name="l45"><span class="linenum">  45</span></a>                  return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcArray'];
<a name="l46"><span class="linenum">  46</span></a>              case 'object':
<a name="l47"><span class="linenum">  47</span></a>                  return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcStruct'];
<a name="l48"><span class="linenum">  48</span></a>              case <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcBase64']:
<a name="l49"><span class="linenum">  49</span></a>              case <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcStruct']:
<a name="l50"><span class="linenum">  50</span></a>                  return <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it5542" onMouseOver="hilite(5542)" onMouseOut="lolite()" onClick="logVariable('phptype')" href="../../../../_variables/phptype.html">$phptype</a>);
<a name="l51"><span class="linenum">  51</span></a>              case 'resource':
<a name="l52"><span class="linenum">  52</span></a>                  return '';
<a name="l53"><span class="linenum">  53</span></a>              default:
<a name="l54"><span class="linenum">  54</span></a>                  if(<a class="phpfunction" onClick="logFunction('class_exists')" href="../../../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it5542" onMouseOver="hilite(5542)" onMouseOut="lolite()" onClick="logVariable('phptype')" href="../../../../_variables/phptype.html">$phptype</a>))
<a name="l55"><span class="linenum">  55</span></a>                  {
<a name="l56"><span class="linenum">  56</span></a>                      return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcStruct'];
<a name="l57"><span class="linenum">  57</span></a>                  }
<a name="l58"><span class="linenum">  58</span></a>                  else
<a name="l59"><span class="linenum">  59</span></a>                  {
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">                    // unknown: might be any 'extended' xmlrpc type</span>
<a name="l61"><span class="linenum">  61</span></a>                      return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcValue'];
<a name="l62"><span class="linenum">  62</span></a>                  }
<a name="l63"><span class="linenum">  63</span></a>          }
<a name="l64"><span class="linenum">  64</span></a>      }
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>      <span class="comment">/**</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">    * Given a string defining a phpxmlrpc type return corresponding php type.</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">    * @param string $xmlrpctype</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">    * @return string</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">    */</span>
<a name="l71"><span class="linenum">  71</span></a>  	function <a class="function" onClick="logFunction('xmlrpc_2_php_type')" href="../../../../_functions/xmlrpc_2_php_type.html" onMouseOver="funcPopup(event,'xmlrpc_2_php_type')">xmlrpc_2_php_type</a>(<a class="var it5543" onMouseOver="hilite(5543)" onMouseOut="lolite()" onClick="logVariable('xmlrpctype')" href="../../../../_variables/xmlrpctype.html">$xmlrpctype</a>)
<a name="l72"><span class="linenum">  72</span></a>      {
<a name="l73"><span class="linenum">  73</span></a>          switch(<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it5543" onMouseOver="hilite(5543)" onMouseOut="lolite()" onClick="logVariable('xmlrpctype')" href="../../../../_variables/xmlrpctype.html">$xmlrpctype</a>))
<a name="l74"><span class="linenum">  74</span></a>          {
<a name="l75"><span class="linenum">  75</span></a>              case 'base64':
<a name="l76"><span class="linenum">  76</span></a>              case 'datetime.iso8601':
<a name="l77"><span class="linenum">  77</span></a>              case 'string':
<a name="l78"><span class="linenum">  78</span></a>                  return <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcString'];
<a name="l79"><span class="linenum">  79</span></a>              case 'int':
<a name="l80"><span class="linenum">  80</span></a>              case 'i4':
<a name="l81"><span class="linenum">  81</span></a>                  return 'integer';
<a name="l82"><span class="linenum">  82</span></a>              case 'struct':
<a name="l83"><span class="linenum">  83</span></a>              case 'array':
<a name="l84"><span class="linenum">  84</span></a>                  return 'array';
<a name="l85"><span class="linenum">  85</span></a>              case 'double':
<a name="l86"><span class="linenum">  86</span></a>                  return 'float';
<a name="l87"><span class="linenum">  87</span></a>              case 'undefined':
<a name="l88"><span class="linenum">  88</span></a>                  return 'mixed';
<a name="l89"><span class="linenum">  89</span></a>              case 'boolean':
<a name="l90"><span class="linenum">  90</span></a>              case 'null':
<a name="l91"><span class="linenum">  91</span></a>              default:
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">                // unknown: might be any xmlrpc type</span>
<a name="l93"><span class="linenum">  93</span></a>                  return <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it5543" onMouseOver="hilite(5543)" onMouseOut="lolite()" onClick="logVariable('xmlrpctype')" href="../../../../_variables/xmlrpctype.html">$xmlrpctype</a>);
<a name="l94"><span class="linenum">  94</span></a>          }
<a name="l95"><span class="linenum">  95</span></a>      }
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>      <span class="comment">/**</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">    * Given a user-defined PHP function, create a PHP 'wrapper' function that can</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">    * be exposed as xmlrpc method from an xmlrpc_server object and called from remote</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">    * clients (as well as its corresponding signature info).</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">    *</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">    * Since php is a typeless language, to infer types of input and output parameters,</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">    * it relies on parsing the javadoc-style comment block associated with the given</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">    * function. Usage of xmlrpc native types (such as datetime.dateTime.iso8601 and base64)</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">    * in the @param tag is also allowed, if you need the php function to receive/send</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">    * data in that particular format (note that base64 encoding/decoding is transparently</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">    * carried out by the lib, while datetime vals are passed around as strings)</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">    *</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">    * Known limitations:</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">    * - requires PHP 5.0.3 +</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">    * - only works for user-defined functions, not for PHP internal functions</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">    *   (reflection does not support retrieving number/type of params for those)</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">    * - functions returning php objects will generate special xmlrpc responses:</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">    *   when the xmlrpc decoding of those responses is carried out by this same lib, using</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">    *   the appropriate param in php_xmlrpc_decode, the php objects will be rebuilt.</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">    *   In short: php objects can be serialized, too (except for their resource members),</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">    *   using this function.</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">    *   Other libs might choke on the very same xml that will be generated in this case</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">    *   (i.e. it has a nonstandard attribute on struct element tags)</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">    * - usage of javadoc @param tags using param names in a different order from the</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">    *   function prototype is not considered valid (to be fixed?)</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">    *</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">    * Note that since rel. 2.0RC3 the preferred method to have the server call 'standard'</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">    * php functions (ie. functions not expecting a single xmlrpcmsg obj as parameter)</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">    * is by making use of the functions_parameters_type class member.</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">    *</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">    * @param string $funcname the name of the PHP user function to be exposed as xmlrpc method; array($obj, 'methodname') and array('class', 'methodname') are ok too</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">    * @param string $newfuncname (optional) name for function to be created</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">    * @param array $extra_options (optional) array of options for conversion. valid values include:</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">    *        bool  return_source when true, php code w. function definition will be returned, not evaluated</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">    *        bool  encode_php_objs let php objects be sent to server using the 'improved' xmlrpc notation, so server can deserialize them as php objects</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">    *        bool  decode_php_objs --- WARNING !!! possible security hazard. only use it with trusted servers ---</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">    *        bool  suppress_warnings  remove from produced xml any runtime warnings due to the php function being invoked</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">    * @return false on error, or an array containing the name of the new php function,</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">    *         its signature and docs, to be used in the server dispatch map</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">    *</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">    * @todo decide how to deal with params passed by ref: bomb out or allow?</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">    * @todo finish using javadoc info to build method sig if all params are named but out of order</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">    * @todo add a check for params of 'resource' type</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">    * @todo add some trigger_errors / error_log when returning false?</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">    * @todo what to do when the PHP function returns NULL? we are currently returning an empty string value...</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">    * @todo add an option to suppress php warnings in invocation of user function, similar to server debug level 3?</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">    * @todo if $newfuncname is empty, we could use create_user_func instead of eval, as it is possibly faster</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">    * @todo add a verbatim_object_copy parameter to allow avoiding the same obj instance?</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">    */</span>
<a name="l146"><span class="linenum"> 146</span></a>  	function <a class="function" onClick="logFunction('wrap_php_function')" href="../../../../_functions/wrap_php_function.html" onMouseOver="funcPopup(event,'wrap_php_function')">wrap_php_function</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>, <a class="var it5545" onMouseOver="hilite(5545)" onMouseOut="lolite()" onClick="logVariable('newfuncname')" href="../../../../_variables/newfuncname.html">$newfuncname</a>='', <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>=array())
<a name="l147"><span class="linenum"> 147</span></a>      {
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['return_source']) ? !(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['return_source']) : true;
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['prefix']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['prefix'] : 'xmlrpc';
<a name="l150"><span class="linenum"> 150</span></a>          <a class="var it5548" onMouseOver="hilite(5548)" onMouseOut="lolite()" onClick="logVariable('encode_php_objects')" href="../../../../_variables/encode_php_objects.html">$encode_php_objects</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['encode_php_objs']) ? (bool)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['encode_php_objs'] : false;
<a name="l151"><span class="linenum"> 151</span></a>          <a class="var it5549" onMouseOver="hilite(5549)" onMouseOut="lolite()" onClick="logVariable('decode_php_objects')" href="../../../../_variables/decode_php_objects.html">$decode_php_objects</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['decode_php_objs']) ? (bool)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['decode_php_objs'] : false;
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it5550" onMouseOver="hilite(5550)" onMouseOut="lolite()" onClick="logVariable('catch_warnings')" href="../../../../_variables/catch_warnings.html">$catch_warnings</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['suppress_warnings']) &amp;&amp; <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['suppress_warnings'] ? '@' : '';
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>          if(<a class="phpfunction" onClick="logFunction('version_compare')" href="../../../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="phpfunction" onClick="logFunction('phpversion')" href="../../../../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>(), '5.0.3') == -1)
<a name="l155"><span class="linenum"> 155</span></a>          {
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">            // up to php 5.0.3 some useful reflection methods were missing</span>
<a name="l157"><span class="linenum"> 157</span></a>              <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: cannot not wrap php functions unless running php version bigger than 5.0.3');
<a name="l158"><span class="linenum"> 158</span></a>              return false;
<a name="l159"><span class="linenum"> 159</span></a>          }
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it5551" onMouseOver="hilite(5551)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../../../../_variables/exists.html">$exists</a> = false;
<a name="l162"><span class="linenum"> 162</span></a>          if (<a class="phpfunction" onClick="logFunction('is_string')" href="../../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>, '::') !== false)
<a name="l163"><span class="linenum"> 163</span></a>          {
<a name="l164"><span class="linenum"> 164</span></a>              <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('::', <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>);
<a name="l165"><span class="linenum"> 165</span></a>          }
<a name="l166"><span class="linenum"> 166</span></a>          if(<a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>))
<a name="l167"><span class="linenum"> 167</span></a>          {
<a name="l168"><span class="linenum"> 168</span></a>              if(<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>) &lt; 2 || (!<a class="phpfunction" onClick="logFunction('is_string')" href="../../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0]) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_object')" href="../../../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0])))
<a name="l169"><span class="linenum"> 169</span></a>              {
<a name="l170"><span class="linenum"> 170</span></a>                  <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: syntax for function to be wrapped is wrong');
<a name="l171"><span class="linenum"> 171</span></a>                  return false;
<a name="l172"><span class="linenum"> 172</span></a>              }
<a name="l173"><span class="linenum"> 173</span></a>              if(<a class="phpfunction" onClick="logFunction('is_string')" href="../../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0]))
<a name="l174"><span class="linenum"> 174</span></a>              {
<a name="l175"><span class="linenum"> 175</span></a>                  <a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('::', <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>);
<a name="l176"><span class="linenum"> 176</span></a>              }
<a name="l177"><span class="linenum"> 177</span></a>              elseif(<a class="phpfunction" onClick="logFunction('is_object')" href="../../../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0]))
<a name="l178"><span class="linenum"> 178</span></a>              {
<a name="l179"><span class="linenum"> 179</span></a>                  <a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a> = <a class="phpfunction" onClick="logFunction('get_class')" href="../../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0]) . '-&gt;' . <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[1];
<a name="l180"><span class="linenum"> 180</span></a>              }
<a name="l181"><span class="linenum"> 181</span></a>              <a class="var it5551" onMouseOver="hilite(5551)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../../../../_variables/exists.html">$exists</a> = <a class="phpfunction" onClick="logFunction('method_exists')" href="../../../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0], <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[1]);
<a name="l182"><span class="linenum"> 182</span></a>              if (!<a class="var it5551" onMouseOver="hilite(5551)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../../../../_variables/exists.html">$exists</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('version_compare')" href="../../../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="phpfunction" onClick="logFunction('phpversion')" href="../../../../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>(), '5.1') &lt; 0)
<a name="l183"><span class="linenum"> 183</span></a>              {
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">               // workaround for php 5.0: static class methods are not seen by method_exists</span>
<a name="l185"><span class="linenum"> 185</span></a>                 <a class="var it5551" onMouseOver="hilite(5551)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../../../../_variables/exists.html">$exists</a> = <a class="phpfunction" onClick="logFunction('is_callable')" href="../../../../_functions/is_callable.html" onMouseOver="phpfuncPopup(event,'is_callable')">is_callable</a>( <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a> );
<a name="l186"><span class="linenum"> 186</span></a>              }
<a name="l187"><span class="linenum"> 187</span></a>          }
<a name="l188"><span class="linenum"> 188</span></a>          else
<a name="l189"><span class="linenum"> 189</span></a>          {
<a name="l190"><span class="linenum"> 190</span></a>              <a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a> = <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>;
<a name="l191"><span class="linenum"> 191</span></a>              <a class="var it5551" onMouseOver="hilite(5551)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../../../../_variables/exists.html">$exists</a> = <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>);
<a name="l192"><span class="linenum"> 192</span></a>          }
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>          if(!<a class="var it5551" onMouseOver="hilite(5551)" onMouseOut="lolite()" onClick="logVariable('exists')" href="../../../../_variables/exists.html">$exists</a>)
<a name="l195"><span class="linenum"> 195</span></a>          {
<a name="l196"><span class="linenum"> 196</span></a>              <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: function to be wrapped is not defined: '.<a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a>);
<a name="l197"><span class="linenum"> 197</span></a>              return false;
<a name="l198"><span class="linenum"> 198</span></a>          }
<a name="l199"><span class="linenum"> 199</span></a>          else
<a name="l200"><span class="linenum"> 200</span></a>          {
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">            // determine name of new php function</span>
<a name="l202"><span class="linenum"> 202</span></a>              if(<a class="var it5545" onMouseOver="hilite(5545)" onMouseOut="lolite()" onClick="logVariable('newfuncname')" href="../../../../_variables/newfuncname.html">$newfuncname</a> == '')
<a name="l203"><span class="linenum"> 203</span></a>              {
<a name="l204"><span class="linenum"> 204</span></a>                  if(<a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>))
<a name="l205"><span class="linenum"> 205</span></a>                  {
<a name="l206"><span class="linenum"> 206</span></a>                      if(<a class="phpfunction" onClick="logFunction('is_string')" href="../../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0]))
<a name="l207"><span class="linenum"> 207</span></a>                          <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> = &quot;{<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>}_&quot;.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('_', <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>);
<a name="l208"><span class="linenum"> 208</span></a>                      else
<a name="l209"><span class="linenum"> 209</span></a>                          <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> = &quot;{<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>}_&quot;.<a class="phpfunction" onClick="logFunction('get_class')" href="../../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0]) . '_' . <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[1];
<a name="l210"><span class="linenum"> 210</span></a>                  }
<a name="l211"><span class="linenum"> 211</span></a>                  else
<a name="l212"><span class="linenum"> 212</span></a>                  {
<a name="l213"><span class="linenum"> 213</span></a>                      <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> = &quot;{<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>}_<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>&quot;;
<a name="l214"><span class="linenum"> 214</span></a>                  }
<a name="l215"><span class="linenum"> 215</span></a>              }
<a name="l216"><span class="linenum"> 216</span></a>              else
<a name="l217"><span class="linenum"> 217</span></a>              {
<a name="l218"><span class="linenum"> 218</span></a>                  <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> = <a class="var it5545" onMouseOver="hilite(5545)" onMouseOut="lolite()" onClick="logVariable('newfuncname')" href="../../../../_variables/newfuncname.html">$newfuncname</a>;
<a name="l219"><span class="linenum"> 219</span></a>              }
<a name="l220"><span class="linenum"> 220</span></a>              while(<a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a>))
<a name="l221"><span class="linenum"> 221</span></a>              {
<a name="l222"><span class="linenum"> 222</span></a>                  <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> .= 'x';
<a name="l223"><span class="linenum"> 223</span></a>              }
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">            // start to introspect PHP code</span>
<a name="l226"><span class="linenum"> 226</span></a>              if(<a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>))
<a name="l227"><span class="linenum"> 227</span></a>              {
<a name="l228"><span class="linenum"> 228</span></a>                  <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a> = new ReflectionMethod(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[0], <a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>[1]);
<a name="l229"><span class="linenum"> 229</span></a>                  if(<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isPrivate())
<a name="l230"><span class="linenum"> 230</span></a>                  {
<a name="l231"><span class="linenum"> 231</span></a>                      <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: method to be wrapped is private: '.<a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a>);
<a name="l232"><span class="linenum"> 232</span></a>                      return false;
<a name="l233"><span class="linenum"> 233</span></a>                  }
<a name="l234"><span class="linenum"> 234</span></a>                  if(<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isProtected())
<a name="l235"><span class="linenum"> 235</span></a>                  {
<a name="l236"><span class="linenum"> 236</span></a>                      <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: method to be wrapped is protected: '.<a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a>);
<a name="l237"><span class="linenum"> 237</span></a>                      return false;
<a name="l238"><span class="linenum"> 238</span></a>                  }
<a name="l239"><span class="linenum"> 239</span></a>                   if(<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isConstructor())
<a name="l240"><span class="linenum"> 240</span></a>                  {
<a name="l241"><span class="linenum"> 241</span></a>                      <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: method to be wrapped is the constructor: '.<a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a>);
<a name="l242"><span class="linenum"> 242</span></a>                      return false;
<a name="l243"><span class="linenum"> 243</span></a>                  }
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">                // php 503 always says isdestructor = true...</span>
<a name="l245"><span class="linenum"> 245</span></a>                  if( <a class="phpfunction" onClick="logFunction('version_compare')" href="../../../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="phpfunction" onClick="logFunction('phpversion')" href="../../../../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>(), '5.0.3') != 0 &amp;&amp; <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isDestructor())
<a name="l246"><span class="linenum"> 246</span></a>                  {
<a name="l247"><span class="linenum"> 247</span></a>                      <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: method to be wrapped is the destructor: '.<a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a>);
<a name="l248"><span class="linenum"> 248</span></a>                      return false;
<a name="l249"><span class="linenum"> 249</span></a>                  }
<a name="l250"><span class="linenum"> 250</span></a>                  if(<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isAbstract())
<a name="l251"><span class="linenum"> 251</span></a>                  {
<a name="l252"><span class="linenum"> 252</span></a>                      <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: method to be wrapped is abstract: '.<a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a>);
<a name="l253"><span class="linenum"> 253</span></a>                      return false;
<a name="l254"><span class="linenum"> 254</span></a>                  }
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">                /// @todo add more checks for static vs. nonstatic?</span>
<a name="l256"><span class="linenum"> 256</span></a>              }
<a name="l257"><span class="linenum"> 257</span></a>              else
<a name="l258"><span class="linenum"> 258</span></a>              {
<a name="l259"><span class="linenum"> 259</span></a>                  <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a> = new ReflectionFunction(<a class="var it5544" onMouseOver="hilite(5544)" onMouseOut="lolite()" onClick="logVariable('funcname')" href="../../../../_variables/funcname.html">$funcname</a>);
<a name="l260"><span class="linenum"> 260</span></a>              }
<a name="l261"><span class="linenum"> 261</span></a>              if(<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isInternal())
<a name="l262"><span class="linenum"> 262</span></a>              {
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">                // Note: from PHP 5.1.0 onward, we will possibly be able to use invokeargs</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">                // instead of getparameters to fully reflect internal php functions ?</span>
<a name="l265"><span class="linenum"> 265</span></a>                  <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: function to be wrapped is internal: '.<a class="var it5552" onMouseOver="hilite(5552)" onMouseOut="lolite()" onClick="logVariable('plainfuncname')" href="../../../../_variables/plainfuncname.html">$plainfuncname</a>);
<a name="l266"><span class="linenum"> 266</span></a>                  return false;
<a name="l267"><span class="linenum"> 267</span></a>              }
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">            // retrieve parameter names, types and description from javadoc comments</span>
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">            // function description</span>
<a name="l272"><span class="linenum"> 272</span></a>              <a class="var it3748" onMouseOver="hilite(3748)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../../../../_variables/desc.html">$desc</a> = '';
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">            // type of return val: by default 'any'</span>
<a name="l274"><span class="linenum"> 274</span></a>              <a class="var it5554" onMouseOver="hilite(5554)" onMouseOut="lolite()" onClick="logVariable('returns')" href="../../../../_variables/returns.html">$returns</a> = <a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['xmlrpcValue'];
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">            // desc of return val</span>
<a name="l276"><span class="linenum"> 276</span></a>              <a class="var it5555" onMouseOver="hilite(5555)" onMouseOut="lolite()" onClick="logVariable('returnsDocs')" href="../../../../_variables/returnsDocs.html">$returnsDocs</a> = '';
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">            // type + name of function parameters</span>
<a name="l278"><span class="linenum"> 278</span></a>              <a class="var it5556" onMouseOver="hilite(5556)" onMouseOut="lolite()" onClick="logVariable('paramDocs')" href="../../../../_variables/paramDocs.html">$paramDocs</a> = array();
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>              <a class="var it5557" onMouseOver="hilite(5557)" onMouseOut="lolite()" onClick="logVariable('docs')" href="../../../../_variables/docs.html">$docs</a> = <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;getDocComment();
<a name="l281"><span class="linenum"> 281</span></a>              if(<a class="var it5557" onMouseOver="hilite(5557)" onMouseOut="lolite()" onClick="logVariable('docs')" href="../../../../_variables/docs.html">$docs</a> != '')
<a name="l282"><span class="linenum"> 282</span></a>              {
<a name="l283"><span class="linenum"> 283</span></a>                  <a class="var it5557" onMouseOver="hilite(5557)" onMouseOut="lolite()" onClick="logVariable('docs')" href="../../../../_variables/docs.html">$docs</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;\n&quot;, <a class="var it5557" onMouseOver="hilite(5557)" onMouseOut="lolite()" onClick="logVariable('docs')" href="../../../../_variables/docs.html">$docs</a>);
<a name="l284"><span class="linenum"> 284</span></a>                  <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> = 0;
<a name="l285"><span class="linenum"> 285</span></a>                  foreach(<a class="var it5557" onMouseOver="hilite(5557)" onMouseOut="lolite()" onClick="logVariable('docs')" href="../../../../_variables/docs.html">$docs</a> as <a class="var it4458" onMouseOver="hilite(4458)" onMouseOut="lolite()" onClick="logVariable('doc')" href="../../../../_variables/doc.html">$doc</a>)
<a name="l286"><span class="linenum"> 286</span></a>                  {
<a name="l287"><span class="linenum"> 287</span></a>                      <a class="var it4458" onMouseOver="hilite(4458)" onMouseOut="lolite()" onClick="logVariable('doc')" href="../../../../_variables/doc.html">$doc</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4458" onMouseOver="hilite(4458)" onMouseOut="lolite()" onClick="logVariable('doc')" href="../../../../_variables/doc.html">$doc</a>, &quot; \r\t<span class="comment">/*&quot;);</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">                    if(strlen($doc) &amp;&amp; strpos($doc, '@') !== 0 &amp;&amp; !$i)</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">                    {</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">                        if($desc)</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">                        {</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">                            $desc .= &quot;\n&quot;;</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">                        }</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">                        $desc .= $doc;</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">                    }</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">                    elseif(strpos($doc, '@param') === 0)</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">                    {</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">                        // syntax: @param type [$name] desc</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">                        if(preg_match('/@param\s+(\S+)(\s+\$\S+)?\s+(.+)/', $doc, $matches))</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">                        {</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">                            if(strpos($matches[1], '|'))</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">                            {</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">                                //$paramDocs[$i]['type'] = explode('|', $matches[1]);</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">                                $paramDocs[$i]['type'] = 'mixed';</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">                            }</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">                            else</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">                            {</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">                                $paramDocs[$i]['type'] = $matches[1];</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">                            }</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">                            $paramDocs[$i]['name'] = trim($matches[2]);</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">                            $paramDocs[$i]['doc'] = $matches[3];</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">                        }</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">                        $i++;</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">                    }</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">                    elseif(strpos($doc, '@return') === 0)</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">                    {</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">                        // syntax: @return type desc</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">                        //$returns = preg_split('/\s+/', $doc);</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">                        if(preg_match('/@return\s+(\S+)\s+(.+)/', $doc, $matches))</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">                        {</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">                            $returns = php_2_xmlrpc_type($matches[1]);</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">                            if(isset($matches[2]))</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">                            {</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">                                $returnsDocs = $matches[2];</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">                            }</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">                        }</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">                    }</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">                }</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">            }</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"></span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">            // execute introspection of actual function prototype</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">            $params = array();</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">            $i = 0;</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">            foreach($func-&gt;getParameters() as $paramobj)</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">            {</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">                $params[$i] = array();</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">                $params[$i]['name'] = '$'.$paramobj-&gt;getName();</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">                $params[$i]['isoptional'] = $paramobj-&gt;isOptional();</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">                $i++;</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">            }</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment"></span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment"></span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">            // start  building of PHP code to be eval'd</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">            $innercode = '';</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">            $i = 0;</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">            $parsvariations = array();</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">            $pars = array();</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">            $pnum = count($params);</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">            foreach($params as $param)</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">            {</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">                if (isset($paramDocs[$i]['name']) &amp;&amp; $paramDocs[$i]['name'] &amp;&amp; strtolower($paramDocs[$i]['name']) != strtolower($param['name']))</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">                {</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">                    // param name from phpdoc info does not match param definition!</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">                    $paramDocs[$i]['type'] = 'mixed';</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">                }</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment"></span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">                if($param['isoptional'])</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">                {</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">                    // this particular parameter is optional. save as valid previous list of parameters</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">                    $innercode .= &quot;if (\$paramcount &gt; $i) {\n&quot;;</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">                    $parsvariations[] = $pars;</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">                }</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">                $innercode .= &quot;\$p$i = \$msg-&gt;getParam($i);\n&quot;;</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">                if ($decode_php_objects)</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">                {</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">                    $innercode .= &quot;if (\$p{$i}-&gt;kindOf() == 'scalar') \$p$i = \$p{$i}-&gt;scalarval(); else \$p$i = php_{$prefix}_decode(\$p$i, array('decode_php_objs'));\n&quot;;</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">                }</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">                else</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">                {</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">                    $innercode .= &quot;if (\$p{$i}-&gt;kindOf() == 'scalar') \$p$i = \$p{$i}-&gt;scalarval(); else \$p$i = php_{$prefix}_decode(\$p$i);\n&quot;;</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">                }</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment"></span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">                $pars[] = &quot;\$p$i&quot;;</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">                $i++;</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">                if($param['isoptional'])</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">                {</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">                    $innercode .= &quot;}\n&quot;;</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">                }</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">                if($i == $pnum)</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">                {</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">                    // last allowed parameters combination</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">                    $parsvariations[] = $pars;</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">                }</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">            }</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment"></span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">            $sigs = array();</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">            $psigs = array();</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">            if(count($parsvariations) == 0)</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">            {</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">                // only known good synopsis = no parameters</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">                $parsvariations[] = array();</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">                $minpars = 0;</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">            }</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">            else</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">            {</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">                $minpars = count($parsvariations[0]);</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">            }</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment"></span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">            if($minpars)</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">            {</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">                // add to code the check for min params number</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">                // NB: this check needs to be done BEFORE decoding param values</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">                $innercode = &quot;\$paramcount = \$msg-&gt;getNumParams();\n&quot; .</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">                &quot;if (\$paramcount &lt; $minpars) return new {$prefix}resp(0, {$GLOBALS['xmlrpcerr']['incorrect_params']}, '{$GLOBALS['xmlrpcstr']['incorrect_params']}');\n&quot; . $innercode;</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">            }</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">            else</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">            {</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">                $innercode = &quot;\$paramcount = \$msg-&gt;getNumParams();\n&quot; . $innercode;</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">            }</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment"></span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">            $innercode .= &quot;\$np = false;\n&quot;;</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">            // since there are no closures in php, if we are given an object instance,</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">            // we store a pointer to it in a global var...</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">            if ( is_array($funcname) &amp;&amp; is_object($funcname[0]) )</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">            {</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">                $GLOBALS['xmlrpcWPFObjHolder'][$xmlrpcfuncname] =&amp; $funcname[0];</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">                $innercode .= &quot;\$obj =&amp; \$GLOBALS['xmlrpcWPFObjHolder']['$xmlrpcfuncname'];\n&quot;;</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">                $realfuncname = '$obj-&gt;'.$funcname[1];</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">            }</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">            else</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">            {</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">                $realfuncname = $plainfuncname;</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">            }</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">            foreach($parsvariations as $pars)</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">            {</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">                $innercode .= &quot;if (\$paramcount == &quot; . count($pars) . &quot;) \$retval = {$catch_warnings}$realfuncname(&quot; . implode(',', $pars) . &quot;); else\n&quot;;</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment">                // build a 'generic' signature (only use an appropriate return type)</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">                $sig = array($returns);</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">                $psig = array($returnsDocs);</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">                for($i=0; $i &lt; count($pars); $i++)</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">                {</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">                    if (isset($paramDocs[$i]['type']))</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">                    {</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">                        $sig[] = php_2_xmlrpc_type($paramDocs[$i]['type']);</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">                    }</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">                    else</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">                    {</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">                        $sig[] = $GLOBALS['xmlrpcValue'];</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">                    }</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">                    $psig[] = isset($paramDocs[$i]['doc']) ? $paramDocs[$i]['doc'] : '';</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">                }</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">                $sigs[] = $sig;</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">                $psigs[] = $psig;</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">            }</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">            $innercode .= &quot;\$np = true;\n&quot;;</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">            $innercode .= &quot;if (\$np) return new {$prefix}resp(0, {$GLOBALS['xmlrpcerr']['incorrect_params']}, '{$GLOBALS['xmlrpcstr']['incorrect_params']}'); else {\n&quot;;</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">            //$innercode .= &quot;if (\$_xmlrpcs_error_occurred) return new xmlrpcresp(0, $GLOBALS['xmlrpcerr']user, \$_xmlrpcs_error_occurred); else\n&quot;;</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">            $innercode .= &quot;if (is_a(\$retval, '{$prefix}resp')) return \$retval; else\n&quot;;</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">            if($returns == $GLOBALS['xmlrpcDateTime'] || $returns == $GLOBALS['xmlrpcBase64'])</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">            {</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">                $innercode .= &quot;return new {$prefix}resp(new {$prefix}val(\$retval, '$returns'));&quot;;</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">            }</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">            else</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">            {</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">                if ($encode_php_objects)</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">                    $innercode .= &quot;return new {$prefix}resp(php_{$prefix}_encode(\$retval, array('encode_php_objs')));\n&quot;;</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">                else</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">                    $innercode .= &quot;return new {$prefix}resp(php_{$prefix}_encode(\$retval));\n&quot;;</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">            }</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">            // shall we exclude functions returning by ref?</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">            // if($func-&gt;returnsReference())</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">            //     return false;</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">            $code = &quot;function $xmlrpcfuncname(\$msg) {\n&quot; . $innercode . &quot;}\n}&quot;;</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">            //print_r($code);</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">            if ($buildit)</span>
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">            {</span>
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">                $allOK = 0;</span>
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">                eval($code.'$allOK=1;');</span>
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">                // alternative</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">                //$xmlrpcfuncname = create_function('$m', $innercode);</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment"></span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">                if(!$allOK)</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">                {</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">                    error_log('XML-RPC: could not create function '.$xmlrpcfuncname.' to wrap php function '.$plainfuncname);</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">                    return false;</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">                }</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">            }</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment"></span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">            /// @todo examine if $paramDocs matches $parsvariations and build array for</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">            /// usage as method signature, plus put together a nice string for docs</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment"></span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">            $ret = array('function' =&gt; $xmlrpcfuncname, 'signature' =&gt; $sigs, 'docstring' =&gt; $desc, 'signature_docs' =&gt; $psigs, 'source' =&gt; $code);</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">            return $ret;</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">        }</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">    }</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment"></span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">    /**</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">    * Given a user-defined PHP class or php object, map its methods onto a list of</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">    * PHP 'wrapper' functions that can be exposed as xmlrpc methods from an xmlrpc_server</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">    * object and called from remote clients (as well as their corresponding signature info).</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">    *</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">    * @param mixed $classname the name of the class whose methods are to be exposed as xmlrpc methods, or an object instance of that class</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">    * @param array $extra_options see the docs for wrap_php_method for more options</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment">    *        string method_type 'static', 'nonstatic', 'all' and 'auto' (default); the latter will switch between static and non-static depending on wheter $classname is a class name or object instance</span>
<a name="l495"><span class="linenum"> 495</span></a>  <span class="comment">    * @return array or false on failure</span>
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">    *</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">    * @todo get_class_methods will return both static and non-static methods.</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">    *       we have to differentiate the action, depending on wheter we recived a class name or object</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">    */</span>
<a name="l500"><span class="linenum"> 500</span></a>      function <a class="function" onClick="logFunction('wrap_php_class')" href="../../../../_functions/wrap_php_class.html" onMouseOver="funcPopup(event,'wrap_php_class')">wrap_php_class</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>, <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>=array())
<a name="l501"><span class="linenum"> 501</span></a>      {
<a name="l502"><span class="linenum"> 502</span></a>          <a class="var it5569" onMouseOver="hilite(5569)" onMouseOut="lolite()" onClick="logVariable('methodfilter')" href="../../../../_variables/methodfilter.html">$methodfilter</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['method_filter']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['method_filter'] : '';
<a name="l503"><span class="linenum"> 503</span></a>          <a class="var it5570" onMouseOver="hilite(5570)" onMouseOut="lolite()" onClick="logVariable('methodtype')" href="../../../../_variables/methodtype.html">$methodtype</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['method_type']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['method_type'] : 'auto';
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>          if(<a class="phpfunction" onClick="logFunction('version_compare')" href="../../../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="phpfunction" onClick="logFunction('phpversion')" href="../../../../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>(), '5.0.3') == -1)
<a name="l506"><span class="linenum"> 506</span></a>          {
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">            // up to php 5.0.3 some useful reflection methods were missing</span>
<a name="l508"><span class="linenum"> 508</span></a>              <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: cannot not wrap php functions unless running php version bigger than 5.0.3');
<a name="l509"><span class="linenum"> 509</span></a>              return false;
<a name="l510"><span class="linenum"> 510</span></a>          }
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = array();
<a name="l513"><span class="linenum"> 513</span></a>          <a class="var it5571" onMouseOver="hilite(5571)" onMouseOut="lolite()" onClick="logVariable('mlist')" href="../../../../_variables/mlist.html">$mlist</a> = <a class="phpfunction" onClick="logFunction('get_class_methods')" href="../../../../_functions/get_class_methods.html" onMouseOver="phpfuncPopup(event,'get_class_methods')">get_class_methods</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>);
<a name="l514"><span class="linenum"> 514</span></a>          foreach(<a class="var it5571" onMouseOver="hilite(5571)" onMouseOut="lolite()" onClick="logVariable('mlist')" href="../../../../_variables/mlist.html">$mlist</a> as <a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>)
<a name="l515"><span class="linenum"> 515</span></a>          {
<a name="l516"><span class="linenum"> 516</span></a>              if (<a class="var it5569" onMouseOver="hilite(5569)" onMouseOut="lolite()" onClick="logVariable('methodfilter')" href="../../../../_variables/methodfilter.html">$methodfilter</a> == '' || <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(<a class="var it5569" onMouseOver="hilite(5569)" onMouseOut="lolite()" onClick="logVariable('methodfilter')" href="../../../../_variables/methodfilter.html">$methodfilter</a>, <a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>))
<a name="l517"><span class="linenum"> 517</span></a>              {
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">                // echo $mlist.&quot;\n&quot;;</span>
<a name="l519"><span class="linenum"> 519</span></a>                  <a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a> = new ReflectionMethod(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>, <a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>);
<a name="l520"><span class="linenum"> 520</span></a>                  if(!<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isPrivate() &amp;&amp; !<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isProtected() &amp;&amp; !<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isConstructor() &amp;&amp; !<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isDestructor() &amp;&amp; !<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;isAbstract())
<a name="l521"><span class="linenum"> 521</span></a>                  {
<a name="l522"><span class="linenum"> 522</span></a>                      if((<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;<a onClick="logVariable('isStatic')" class="var it9214" onMouseOver="hilite(9214)" onMouseOut="lolite()" href="../../../../_variables/isStatic.html">isStatic</a> &amp;&amp; (<a class="var it5570" onMouseOver="hilite(5570)" onMouseOut="lolite()" onClick="logVariable('methodtype')" href="../../../../_variables/methodtype.html">$methodtype</a> == 'all' || <a class="var it5570" onMouseOver="hilite(5570)" onMouseOut="lolite()" onClick="logVariable('methodtype')" href="../../../../_variables/methodtype.html">$methodtype</a> == 'static' || (<a class="var it5570" onMouseOver="hilite(5570)" onMouseOut="lolite()" onClick="logVariable('methodtype')" href="../../../../_variables/methodtype.html">$methodtype</a> == 'auto' &amp;&amp; <a class="phpfunction" onClick="logFunction('is_string')" href="../../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>)))) ||
<a name="l523"><span class="linenum"> 523</span></a>                          (!<a class="var it1781" onMouseOver="hilite(1781)" onMouseOut="lolite()" onClick="logVariable('func')" href="../../../../_variables/func.html">$func</a>-&gt;<a onClick="logVariable('isStatic')" class="var it9214" onMouseOver="hilite(9214)" onMouseOut="lolite()" href="../../../../_variables/isStatic.html">isStatic</a> &amp;&amp; (<a class="var it5570" onMouseOver="hilite(5570)" onMouseOut="lolite()" onClick="logVariable('methodtype')" href="../../../../_variables/methodtype.html">$methodtype</a> == 'all' || <a class="var it5570" onMouseOver="hilite(5570)" onMouseOut="lolite()" onClick="logVariable('methodtype')" href="../../../../_variables/methodtype.html">$methodtype</a> == 'nonstatic' || (<a class="var it5570" onMouseOver="hilite(5570)" onMouseOut="lolite()" onClick="logVariable('methodtype')" href="../../../../_variables/methodtype.html">$methodtype</a> == 'auto' &amp;&amp; <a class="phpfunction" onClick="logFunction('is_object')" href="../../../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>)))))
<a name="l524"><span class="linenum"> 524</span></a>                      {
<a name="l525"><span class="linenum"> 525</span></a>                          <a class="var it5574" onMouseOver="hilite(5574)" onMouseOut="lolite()" onClick="logVariable('methodwrap')" href="../../../../_variables/methodwrap.html">$methodwrap</a> = <a class="function" onClick="logFunction('wrap_php_function')" href="../../../../_functions/wrap_php_function.html" onMouseOver="funcPopup(event,'wrap_php_function')">wrap_php_function</a>(array(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>, <a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>), '', <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>);
<a name="l526"><span class="linenum"> 526</span></a>                          if ( <a class="var it5574" onMouseOver="hilite(5574)" onMouseOut="lolite()" onClick="logVariable('methodwrap')" href="../../../../_variables/methodwrap.html">$methodwrap</a> )
<a name="l527"><span class="linenum"> 527</span></a>                          {
<a name="l528"><span class="linenum"> 528</span></a>                              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>[<a class="var it5574" onMouseOver="hilite(5574)" onMouseOut="lolite()" onClick="logVariable('methodwrap')" href="../../../../_variables/methodwrap.html">$methodwrap</a>['function']] = <a class="var it5574" onMouseOver="hilite(5574)" onMouseOut="lolite()" onClick="logVariable('methodwrap')" href="../../../../_variables/methodwrap.html">$methodwrap</a>['function'];
<a name="l529"><span class="linenum"> 529</span></a>                          }
<a name="l530"><span class="linenum"> 530</span></a>                      }
<a name="l531"><span class="linenum"> 531</span></a>                  }
<a name="l532"><span class="linenum"> 532</span></a>              }
<a name="l533"><span class="linenum"> 533</span></a>          }
<a name="l534"><span class="linenum"> 534</span></a>          return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>;
<a name="l535"><span class="linenum"> 535</span></a>      }
<a name="l536"><span class="linenum"> 536</span></a>  
<a name="l537"><span class="linenum"> 537</span></a>      <span class="comment">/**</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">    * Given an xmlrpc client and a method name, register a php wrapper function</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">    * that will call it and return results using native php types for both</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">    * params and results. The generated php function will return an xmlrpcresp</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment">    * oject for failed xmlrpc calls</span>
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment">    *</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">    * Known limitations:</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">    * - server must support system.methodsignature for the wanted xmlrpc method</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">    * - for methods that expose many signatures, only one can be picked (we</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">    *   could in priciple check if signatures differ only by number of params</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">    *   and not by type, but it would be more complication than we can spare time)</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">    * - nested xmlrpc params: the caller of the generated php function has to</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">    *   encode on its own the params passed to the php function if these are structs</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">    *   or arrays whose (sub)members include values of type datetime or base64</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">    *</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">    * Notes: the connection properties of the given client will be copied</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">    * and reused for the connection used during the call to the generated</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">    * php function.</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">    * Calling the generated php function 'might' be slow: a new xmlrpc client</span>
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment">    * is created on every invocation and an xmlrpc-connection opened+closed.</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">    * An extra 'debug' param is appended to param list of xmlrpc method, useful</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">    * for debugging purposes.</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">    *</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">    * @param xmlrpc_client $client     an xmlrpc client set up correctly to communicate with target server</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">    * @param string        $methodname the xmlrpc method to be mapped to a php function</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment">    * @param array         $extra_options array of options that specify conversion details. valid ptions include</span>
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">    *        integer       signum      the index of the method signature to use in mapping (if method exposes many sigs)</span>
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">    *        integer       timeout     timeout (in secs) to be used when executing function/calling remote method</span>
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment">    *        string        protocol    'http' (default), 'http11' or 'https'</span>
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment">    *        string        new_function_name the name of php function to create. If unsepcified, lib will pick an appropriate name</span>
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">    *        string        return_source if true return php code w. function definition instead fo function name</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">    *        bool          encode_php_objs let php objects be sent to server using the 'improved' xmlrpc notation, so server can deserialize them as php objects</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">    *        bool          decode_php_objs --- WARNING !!! possible security hazard. only use it with trusted servers ---</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">    *        mixed         return_on_fault a php value to be returned when the xmlrpc call fails/returns a fault response (by default the xmlrpcresp object is returned in this case). If a string is used, '%faultCode%' and '%faultString%' tokens will be substituted with actual error values</span>
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">    *        bool          debug        set it to 1 or 2 to see debug results of querying server for method synopsis</span>
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">    * @return string                   the name of the generated php function (or false) - OR AN ARRAY...</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">    */</span>
<a name="l574"><span class="linenum"> 574</span></a>  	function <a class="function" onClick="logFunction('wrap_xmlrpc_method')" href="../../../../_functions/wrap_xmlrpc_method.html" onMouseOver="funcPopup(event,'wrap_xmlrpc_method')">wrap_xmlrpc_method</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>, <a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>, <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>=0, <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a>=0, <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a>='', <a class="var it5545" onMouseOver="hilite(5545)" onMouseOut="lolite()" onClick="logVariable('newfuncname')" href="../../../../_variables/newfuncname.html">$newfuncname</a>='')
<a name="l575"><span class="linenum"> 575</span></a>      {
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">        // mind numbing: let caller use sane calling convention (as per javadoc, 3 params),</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">        // OR the 2.0 calling convention (no options) - we really love backward compat, don't we?</span>
<a name="l578"><span class="linenum"> 578</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>))
<a name="l579"><span class="linenum"> 579</span></a>          {
<a name="l580"><span class="linenum"> 580</span></a>              <a class="var it5575" onMouseOver="hilite(5575)" onMouseOut="lolite()" onClick="logVariable('signum')" href="../../../../_variables/signum.html">$signum</a> = <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>;
<a name="l581"><span class="linenum"> 581</span></a>              <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a> = array();
<a name="l582"><span class="linenum"> 582</span></a>          }
<a name="l583"><span class="linenum"> 583</span></a>          else
<a name="l584"><span class="linenum"> 584</span></a>          {
<a name="l585"><span class="linenum"> 585</span></a>              <a class="var it5575" onMouseOver="hilite(5575)" onMouseOut="lolite()" onClick="logVariable('signum')" href="../../../../_variables/signum.html">$signum</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['signum']) ? (int)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['signum'] : 0;
<a name="l586"><span class="linenum"> 586</span></a>              <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['timeout']) ? (int)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['timeout'] : 0;
<a name="l587"><span class="linenum"> 587</span></a>              <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['protocol']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['protocol'] : '';
<a name="l588"><span class="linenum"> 588</span></a>              <a class="var it5545" onMouseOver="hilite(5545)" onMouseOut="lolite()" onClick="logVariable('newfuncname')" href="../../../../_variables/newfuncname.html">$newfuncname</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['new_function_name']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['new_function_name'] : '';
<a name="l589"><span class="linenum"> 589</span></a>          }
<a name="l590"><span class="linenum"> 590</span></a>  <span class="comment">        //$encode_php_objects = in_array('encode_php_objects', $extra_options);</span>
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">        //$verbatim_client_copy = in_array('simple_client_copy', $extra_options) ? 1 :</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">        //    in_array('build_class_code', $extra_options) ? 2 : 0;</span>
<a name="l593"><span class="linenum"> 593</span></a>  
<a name="l594"><span class="linenum"> 594</span></a>          <a class="var it5548" onMouseOver="hilite(5548)" onMouseOut="lolite()" onClick="logVariable('encode_php_objects')" href="../../../../_variables/encode_php_objects.html">$encode_php_objects</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['encode_php_objs']) ? (bool)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['encode_php_objs'] : false;
<a name="l595"><span class="linenum"> 595</span></a>          <a class="var it5549" onMouseOver="hilite(5549)" onMouseOut="lolite()" onClick="logVariable('decode_php_objects')" href="../../../../_variables/decode_php_objects.html">$decode_php_objects</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['decode_php_objs']) ? (bool)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['decode_php_objs'] : false;
<a name="l596"><span class="linenum"> 596</span></a>          <a class="var it5576" onMouseOver="hilite(5576)" onMouseOut="lolite()" onClick="logVariable('simple_client_copy')" href="../../../../_variables/simple_client_copy.html">$simple_client_copy</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['simple_client_copy']) ? (int)(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['simple_client_copy']) : 0;
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['return_source']) ? !(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['return_source']) : true;
<a name="l598"><span class="linenum"> 598</span></a>          <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['prefix']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['prefix'] : 'xmlrpc';
<a name="l599"><span class="linenum"> 599</span></a>          if (isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['return_on_fault']))
<a name="l600"><span class="linenum"> 600</span></a>          {
<a name="l601"><span class="linenum"> 601</span></a>              <a class="var it5577" onMouseOver="hilite(5577)" onMouseOut="lolite()" onClick="logVariable('decode_fault')" href="../../../../_variables/decode_fault.html">$decode_fault</a> = true;
<a name="l602"><span class="linenum"> 602</span></a>              <a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a> = <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['return_on_fault'];
<a name="l603"><span class="linenum"> 603</span></a>          }
<a name="l604"><span class="linenum"> 604</span></a>          else
<a name="l605"><span class="linenum"> 605</span></a>          {
<a name="l606"><span class="linenum"> 606</span></a>              <a class="var it5577" onMouseOver="hilite(5577)" onMouseOut="lolite()" onClick="logVariable('decode_fault')" href="../../../../_variables/decode_fault.html">$decode_fault</a> = false;
<a name="l607"><span class="linenum"> 607</span></a>              <a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a> = '';
<a name="l608"><span class="linenum"> 608</span></a>          }
<a name="l609"><span class="linenum"> 609</span></a>          <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../../_variables/debug.html">$debug</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['debug']) ? (<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['debug']) : 0;
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>          <a class="var it5579" onMouseOver="hilite(5579)" onMouseOut="lolite()" onClick="logVariable('msgclass')" href="../../../../_variables/msgclass.html">$msgclass</a> = <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>.'msg';
<a name="l612"><span class="linenum"> 612</span></a>          <a class="var it5580" onMouseOver="hilite(5580)" onMouseOut="lolite()" onClick="logVariable('valclass')" href="../../../../_variables/valclass.html">$valclass</a> = <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>.'val';
<a name="l613"><span class="linenum"> 613</span></a>          <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('decodefunc')" href="../../../../_variables/decodefunc.html">$decodefunc</a> = 'php_'.<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>.'_decode';
<a name="l614"><span class="linenum"> 614</span></a>  
<a name="l615"><span class="linenum"> 615</span></a>          <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a> = new <a class="var it5579" onMouseOver="hilite(5579)" onMouseOut="lolite()" onClick="logVariable('msgclass')" href="../../../../_variables/msgclass.html">$msgclass</a>('system.methodSignature');
<a name="l616"><span class="linenum"> 616</span></a>          <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a>-&gt;<a class="function" onClick="logFunction('addparam')" href="../../../../_functions/addparam.html" onMouseOver="funcPopup(event,'addparam')">addparam</a>(new <a class="var it5580" onMouseOver="hilite(5580)" onMouseOut="lolite()" onClick="logVariable('valclass')" href="../../../../_variables/valclass.html">$valclass</a>(<a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>));
<a name="l617"><span class="linenum"> 617</span></a>          <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a class="function" onClick="logFunction('setDebug')" href="../../../../_functions/setdebug.html" onMouseOver="funcPopup(event,'setdebug')">setDebug</a>(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../../_variables/debug.html">$debug</a>);
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a> =&amp; <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;send(<a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a>, <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a>, <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a>);
<a name="l619"><span class="linenum"> 619</span></a>          if(<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>())
<a name="l620"><span class="linenum"> 620</span></a>          {
<a name="l621"><span class="linenum"> 621</span></a>              <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: could not retrieve method signature from remote server for method '.<a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>);
<a name="l622"><span class="linenum"> 622</span></a>              return false;
<a name="l623"><span class="linenum"> 623</span></a>          }
<a name="l624"><span class="linenum"> 624</span></a>          else
<a name="l625"><span class="linenum"> 625</span></a>          {
<a name="l626"><span class="linenum"> 626</span></a>              <a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a> = <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a>-&gt;<a class="function" onClick="logFunction('value')" href="../../../../_functions/value.html" onMouseOver="funcPopup(event,'value')">value</a>();
<a name="l627"><span class="linenum"> 627</span></a>              if (<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('return_type')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/return_type.html">return_type</a> != 'phpvals')
<a name="l628"><span class="linenum"> 628</span></a>              {
<a name="l629"><span class="linenum"> 629</span></a>                  <a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a> = <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('decodefunc')" href="../../../../_variables/decodefunc.html">$decodefunc</a>(<a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a>);
<a name="l630"><span class="linenum"> 630</span></a>              }
<a name="l631"><span class="linenum"> 631</span></a>              if(!<a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a>) || <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a>) &lt;= <a class="var it5575" onMouseOver="hilite(5575)" onMouseOut="lolite()" onClick="logVariable('signum')" href="../../../../_variables/signum.html">$signum</a>)
<a name="l632"><span class="linenum"> 632</span></a>              {
<a name="l633"><span class="linenum"> 633</span></a>                  <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: could not retrieve method signature nr.'.<a class="var it5575" onMouseOver="hilite(5575)" onMouseOut="lolite()" onClick="logVariable('signum')" href="../../../../_variables/signum.html">$signum</a>.' from remote server for method '.<a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>);
<a name="l634"><span class="linenum"> 634</span></a>                  return false;
<a name="l635"><span class="linenum"> 635</span></a>              }
<a name="l636"><span class="linenum"> 636</span></a>              else
<a name="l637"><span class="linenum"> 637</span></a>              {
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">                // pick a suitable name for the new function, avoiding collisions</span>
<a name="l639"><span class="linenum"> 639</span></a>                  if(<a class="var it5545" onMouseOver="hilite(5545)" onMouseOut="lolite()" onClick="logVariable('newfuncname')" href="../../../../_variables/newfuncname.html">$newfuncname</a> != '')
<a name="l640"><span class="linenum"> 640</span></a>                  {
<a name="l641"><span class="linenum"> 641</span></a>                      <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> = <a class="var it5545" onMouseOver="hilite(5545)" onMouseOut="lolite()" onClick="logVariable('newfuncname')" href="../../../../_variables/newfuncname.html">$newfuncname</a>;
<a name="l642"><span class="linenum"> 642</span></a>                  }
<a name="l643"><span class="linenum"> 643</span></a>                  else
<a name="l644"><span class="linenum"> 644</span></a>                  {
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">                    // take care to insure that methodname is translated to valid</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">                    // php function name</span>
<a name="l647"><span class="linenum"> 647</span></a>                      <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> = <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>.'_'.<a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(array('/\./', '/[^a-zA-Z0-9_\x7f-\xff]/'),
<a name="l648"><span class="linenum"> 648</span></a>                          array('_', ''), <a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>);
<a name="l649"><span class="linenum"> 649</span></a>                  }
<a name="l650"><span class="linenum"> 650</span></a>                  while(<a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a>))
<a name="l651"><span class="linenum"> 651</span></a>                  {
<a name="l652"><span class="linenum"> 652</span></a>                      <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> .= 'x';
<a name="l653"><span class="linenum"> 653</span></a>                  }
<a name="l654"><span class="linenum"> 654</span></a>  
<a name="l655"><span class="linenum"> 655</span></a>                  <a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a> = <a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a>[<a class="var it5575" onMouseOver="hilite(5575)" onMouseOut="lolite()" onClick="logVariable('signum')" href="../../../../_variables/signum.html">$signum</a>];
<a name="l656"><span class="linenum"> 656</span></a>                  <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a> = '';
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">                // if in 'offline' mode, get method description too.</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment">                // in online mode, favour speed of operation</span>
<a name="l659"><span class="linenum"> 659</span></a>                  if(!<a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a>)
<a name="l660"><span class="linenum"> 660</span></a>                  {
<a name="l661"><span class="linenum"> 661</span></a>                      <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a> = new <a class="var it5579" onMouseOver="hilite(5579)" onMouseOut="lolite()" onClick="logVariable('msgclass')" href="../../../../_variables/msgclass.html">$msgclass</a>('system.methodHelp');
<a name="l662"><span class="linenum"> 662</span></a>                      <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a>-&gt;<a class="function" onClick="logFunction('addparam')" href="../../../../_functions/addparam.html" onMouseOver="funcPopup(event,'addparam')">addparam</a>(new <a class="var it5580" onMouseOver="hilite(5580)" onMouseOut="lolite()" onClick="logVariable('valclass')" href="../../../../_variables/valclass.html">$valclass</a>(<a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>));
<a name="l663"><span class="linenum"> 663</span></a>                      <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a> =&amp; <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;send(<a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a>, <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a>, <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a>);
<a name="l664"><span class="linenum"> 664</span></a>                      if (!<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>())
<a name="l665"><span class="linenum"> 665</span></a>                      {
<a name="l666"><span class="linenum"> 666</span></a>                          <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a> = <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a>-&gt;<a class="function" onClick="logFunction('value')" href="../../../../_functions/value.html" onMouseOver="funcPopup(event,'value')">value</a>();
<a name="l667"><span class="linenum"> 667</span></a>                          if (<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('return_type')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/return_type.html">return_type</a> != 'phpvals')
<a name="l668"><span class="linenum"> 668</span></a>                          {
<a name="l669"><span class="linenum"> 669</span></a>                              <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a> = <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a>-&gt;<a class="function" onClick="logFunction('scalarval')" href="../../../../_functions/scalarval.html" onMouseOver="funcPopup(event,'scalarval')">scalarval</a>();
<a name="l670"><span class="linenum"> 670</span></a>                          }
<a name="l671"><span class="linenum"> 671</span></a>                      }
<a name="l672"><span class="linenum"> 672</span></a>                  }
<a name="l673"><span class="linenum"> 673</span></a>  
<a name="l674"><span class="linenum"> 674</span></a>                  <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a> = <a class="function" onClick="logFunction('build_remote_method_wrapper_code')" href="../../../../_functions/build_remote_method_wrapper_code.html" onMouseOver="funcPopup(event,'build_remote_method_wrapper_code')">build_remote_method_wrapper_code</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>, <a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>,
<a name="l675"><span class="linenum"> 675</span></a>                      <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a>, <a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a>, <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a>, <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a>, <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a>, <a class="var it5576" onMouseOver="hilite(5576)" onMouseOut="lolite()" onClick="logVariable('simple_client_copy')" href="../../../../_variables/simple_client_copy.html">$simple_client_copy</a>,
<a name="l676"><span class="linenum"> 676</span></a>                      <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>, <a class="var it5549" onMouseOver="hilite(5549)" onMouseOut="lolite()" onClick="logVariable('decode_php_objects')" href="../../../../_variables/decode_php_objects.html">$decode_php_objects</a>, <a class="var it5548" onMouseOver="hilite(5548)" onMouseOut="lolite()" onClick="logVariable('encode_php_objects')" href="../../../../_variables/encode_php_objects.html">$encode_php_objects</a>, <a class="var it5577" onMouseOver="hilite(5577)" onMouseOut="lolite()" onClick="logVariable('decode_fault')" href="../../../../_variables/decode_fault.html">$decode_fault</a>,
<a name="l677"><span class="linenum"> 677</span></a>                      <a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a>);
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">                //print_r($code);</span>
<a name="l680"><span class="linenum"> 680</span></a>                  if (<a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a>)
<a name="l681"><span class="linenum"> 681</span></a>                  {
<a name="l682"><span class="linenum"> 682</span></a>                      <a class="var it5568" onMouseOver="hilite(5568)" onMouseOut="lolite()" onClick="logVariable('allOK')" href="../../../../_variables/allOK.html">$allOK</a> = 0;
<a name="l683"><span class="linenum"> 683</span></a>                      eval(<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>['source'].'<a class="var it5568" onMouseOver="hilite(5568)" onMouseOut="lolite()" onClick="logVariable('allOK')" href="../../../../_variables/allOK.html">$allOK</a>=1;');
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment">                    // alternative</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">                    //$xmlrpcfuncname = create_function('$m', $innercode);</span>
<a name="l686"><span class="linenum"> 686</span></a>                      if(<a class="var it5568" onMouseOver="hilite(5568)" onMouseOut="lolite()" onClick="logVariable('allOK')" href="../../../../_variables/allOK.html">$allOK</a>)
<a name="l687"><span class="linenum"> 687</span></a>                      {
<a name="l688"><span class="linenum"> 688</span></a>                          return <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a>;
<a name="l689"><span class="linenum"> 689</span></a>                      }
<a name="l690"><span class="linenum"> 690</span></a>                      else
<a name="l691"><span class="linenum"> 691</span></a>                      {
<a name="l692"><span class="linenum"> 692</span></a>                          <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: could not create function '.<a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a>.' to wrap remote method '.<a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>);
<a name="l693"><span class="linenum"> 693</span></a>                          return false;
<a name="l694"><span class="linenum"> 694</span></a>                      }
<a name="l695"><span class="linenum"> 695</span></a>                  }
<a name="l696"><span class="linenum"> 696</span></a>                  else
<a name="l697"><span class="linenum"> 697</span></a>                  {
<a name="l698"><span class="linenum"> 698</span></a>                      <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>['function'] = <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a>;
<a name="l699"><span class="linenum"> 699</span></a>                      return <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>;
<a name="l700"><span class="linenum"> 700</span></a>                  }
<a name="l701"><span class="linenum"> 701</span></a>              }
<a name="l702"><span class="linenum"> 702</span></a>          }
<a name="l703"><span class="linenum"> 703</span></a>      }
<a name="l704"><span class="linenum"> 704</span></a>  
<a name="l705"><span class="linenum"> 705</span></a>      <span class="comment">/**</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">    * Similar to wrap_xmlrpc_method, but will generate a php class that wraps</span>
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">    * all xmlrpc methods exposed by the remote server as own methods.</span>
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">    * For more details see wrap_xmlrpc_method.</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">    * @param xmlrpc_client $client the client obj all set to query the desired server</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">    * @param array $extra_options list of options for wrapped code</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">    * @return mixed false on error, the name of the created class if all ok or an array with code, class name and comments (if the appropriatevoption is set in extra_options)</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">    */</span>
<a name="l713"><span class="linenum"> 713</span></a>  	function <a class="function" onClick="logFunction('wrap_xmlrpc_server')" href="../../../../_functions/wrap_xmlrpc_server.html" onMouseOver="funcPopup(event,'wrap_xmlrpc_server')">wrap_xmlrpc_server</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>, <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>=array())
<a name="l714"><span class="linenum"> 714</span></a>      {
<a name="l715"><span class="linenum"> 715</span></a>          <a class="var it5569" onMouseOver="hilite(5569)" onMouseOut="lolite()" onClick="logVariable('methodfilter')" href="../../../../_variables/methodfilter.html">$methodfilter</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['method_filter']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['method_filter'] : '';
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment">        //$signum = isset($extra_options['signum']) ? (int)$extra_options['signum'] : 0;</span>
<a name="l717"><span class="linenum"> 717</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['timeout']) ? (int)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['timeout'] : 0;
<a name="l718"><span class="linenum"> 718</span></a>          <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['protocol']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['protocol'] : '';
<a name="l719"><span class="linenum"> 719</span></a>          <a class="var it5584" onMouseOver="hilite(5584)" onMouseOut="lolite()" onClick="logVariable('newclassname')" href="../../../../_variables/newclassname.html">$newclassname</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['new_class_name']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['new_class_name'] : '';
<a name="l720"><span class="linenum"> 720</span></a>          <a class="var it5548" onMouseOver="hilite(5548)" onMouseOut="lolite()" onClick="logVariable('encode_php_objects')" href="../../../../_variables/encode_php_objects.html">$encode_php_objects</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['encode_php_objs']) ? (bool)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['encode_php_objs'] : false;
<a name="l721"><span class="linenum"> 721</span></a>          <a class="var it5549" onMouseOver="hilite(5549)" onMouseOut="lolite()" onClick="logVariable('decode_php_objects')" href="../../../../_variables/decode_php_objects.html">$decode_php_objects</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['decode_php_objs']) ? (bool)<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['decode_php_objs'] : false;
<a name="l722"><span class="linenum"> 722</span></a>          <a class="var it5585" onMouseOver="hilite(5585)" onMouseOut="lolite()" onClick="logVariable('verbatim_client_copy')" href="../../../../_variables/verbatim_client_copy.html">$verbatim_client_copy</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['simple_client_copy']) ? !(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['simple_client_copy']) : true;
<a name="l723"><span class="linenum"> 723</span></a>          <a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['return_source']) ? !(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['return_source']) : true;
<a name="l724"><span class="linenum"> 724</span></a>          <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a> = isset(<a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['prefix']) ? <a class="var it5546" onMouseOver="hilite(5546)" onMouseOut="lolite()" onClick="logVariable('extra_options')" href="../../../../_variables/extra_options.html">$extra_options</a>['prefix'] : 'xmlrpc';
<a name="l725"><span class="linenum"> 725</span></a>  
<a name="l726"><span class="linenum"> 726</span></a>          <a class="var it5579" onMouseOver="hilite(5579)" onMouseOut="lolite()" onClick="logVariable('msgclass')" href="../../../../_variables/msgclass.html">$msgclass</a> = <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>.'msg';
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">        //$valclass = $prefix.'val';</span>
<a name="l728"><span class="linenum"> 728</span></a>          <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('decodefunc')" href="../../../../_variables/decodefunc.html">$decodefunc</a> = 'php_'.<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>.'_decode';
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>          <a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a> = new <a class="var it5579" onMouseOver="hilite(5579)" onMouseOut="lolite()" onClick="logVariable('msgclass')" href="../../../../_variables/msgclass.html">$msgclass</a>('system.listMethods');
<a name="l731"><span class="linenum"> 731</span></a>          <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a> =&amp; <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;send(<a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a>, <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a>, <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a>);
<a name="l732"><span class="linenum"> 732</span></a>          if(<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>())
<a name="l733"><span class="linenum"> 733</span></a>          {
<a name="l734"><span class="linenum"> 734</span></a>              <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: could not retrieve method list from remote server');
<a name="l735"><span class="linenum"> 735</span></a>              return false;
<a name="l736"><span class="linenum"> 736</span></a>          }
<a name="l737"><span class="linenum"> 737</span></a>          else
<a name="l738"><span class="linenum"> 738</span></a>          {
<a name="l739"><span class="linenum"> 739</span></a>              <a class="var it5571" onMouseOver="hilite(5571)" onMouseOut="lolite()" onClick="logVariable('mlist')" href="../../../../_variables/mlist.html">$mlist</a> = <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../_variables/response.html">$response</a>-&gt;<a class="function" onClick="logFunction('value')" href="../../../../_functions/value.html" onMouseOver="funcPopup(event,'value')">value</a>();
<a name="l740"><span class="linenum"> 740</span></a>              if (<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('return_type')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/return_type.html">return_type</a> != 'phpvals')
<a name="l741"><span class="linenum"> 741</span></a>              {
<a name="l742"><span class="linenum"> 742</span></a>                  <a class="var it5571" onMouseOver="hilite(5571)" onMouseOut="lolite()" onClick="logVariable('mlist')" href="../../../../_variables/mlist.html">$mlist</a> = <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('decodefunc')" href="../../../../_variables/decodefunc.html">$decodefunc</a>(<a class="var it5571" onMouseOver="hilite(5571)" onMouseOut="lolite()" onClick="logVariable('mlist')" href="../../../../_variables/mlist.html">$mlist</a>);
<a name="l743"><span class="linenum"> 743</span></a>              }
<a name="l744"><span class="linenum"> 744</span></a>              if(!<a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5571" onMouseOver="hilite(5571)" onMouseOut="lolite()" onClick="logVariable('mlist')" href="../../../../_variables/mlist.html">$mlist</a>) || !<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5571" onMouseOver="hilite(5571)" onMouseOut="lolite()" onClick="logVariable('mlist')" href="../../../../_variables/mlist.html">$mlist</a>))
<a name="l745"><span class="linenum"> 745</span></a>              {
<a name="l746"><span class="linenum"> 746</span></a>                  <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: could not retrieve meaningful method list from remote server');
<a name="l747"><span class="linenum"> 747</span></a>                  return false;
<a name="l748"><span class="linenum"> 748</span></a>              }
<a name="l749"><span class="linenum"> 749</span></a>              else
<a name="l750"><span class="linenum"> 750</span></a>              {
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">                // pick a suitable name for the new function, avoiding collisions</span>
<a name="l752"><span class="linenum"> 752</span></a>                  if(<a class="var it5584" onMouseOver="hilite(5584)" onMouseOut="lolite()" onClick="logVariable('newclassname')" href="../../../../_variables/newclassname.html">$newclassname</a> != '')
<a name="l753"><span class="linenum"> 753</span></a>                  {
<a name="l754"><span class="linenum"> 754</span></a>                      <a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a> = <a class="var it5584" onMouseOver="hilite(5584)" onMouseOut="lolite()" onClick="logVariable('newclassname')" href="../../../../_variables/newclassname.html">$newclassname</a>;
<a name="l755"><span class="linenum"> 755</span></a>                  }
<a name="l756"><span class="linenum"> 756</span></a>                  else
<a name="l757"><span class="linenum"> 757</span></a>                  {
<a name="l758"><span class="linenum"> 758</span></a>                      <a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a> = <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>.'_'.<a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(array('/\./', '/[^a-zA-Z0-9_\x7f-\xff]/'),
<a name="l759"><span class="linenum"> 759</span></a>                          array('_', ''), <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('server')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/server.html">server</a>).'_client';
<a name="l760"><span class="linenum"> 760</span></a>                  }
<a name="l761"><span class="linenum"> 761</span></a>                  while(<a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('class_exists')" href="../../../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a>))
<a name="l762"><span class="linenum"> 762</span></a>                  {
<a name="l763"><span class="linenum"> 763</span></a>                      <a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a> .= 'x';
<a name="l764"><span class="linenum"> 764</span></a>                  }
<a name="l765"><span class="linenum"> 765</span></a>  
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">                /// @todo add function setdebug() to new class, to enable/disable debugging</span>
<a name="l767"><span class="linenum"> 767</span></a>                  <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a> = &quot;class <a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a>\n{\nvar \<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>;\n\n&quot;;
<a name="l768"><span class="linenum"> 768</span></a>                  <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a> .= &quot;function <a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a>()\n{\n&quot;;
<a name="l769"><span class="linenum"> 769</span></a>                  <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a> .= <a class="function" onClick="logFunction('build_client_wrapper_code')" href="../../../../_functions/build_client_wrapper_code.html" onMouseOver="funcPopup(event,'build_client_wrapper_code')">build_client_wrapper_code</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>, <a class="var it5585" onMouseOver="hilite(5585)" onMouseOut="lolite()" onClick="logVariable('verbatim_client_copy')" href="../../../../_variables/verbatim_client_copy.html">$verbatim_client_copy</a>, <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>);
<a name="l770"><span class="linenum"> 770</span></a>                  <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a> .= &quot;\<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it8951" onMouseOver="hilite(8951)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a> =&amp; \<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>;\n}\n\n&quot;;
<a name="l771"><span class="linenum"> 771</span></a>                  <a class="var it5587" onMouseOver="hilite(5587)" onMouseOut="lolite()" onClick="logVariable('opts')" href="../../../../_variables/opts.html">$opts</a> = array('simple_client_copy' =&gt; 2, 'return_source' =&gt; true,
<a name="l772"><span class="linenum"> 772</span></a>                      'timeout' =&gt; <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a>, 'protocol' =&gt; <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a>,
<a name="l773"><span class="linenum"> 773</span></a>                      'encode_php_objs' =&gt; <a class="var it5548" onMouseOver="hilite(5548)" onMouseOut="lolite()" onClick="logVariable('encode_php_objects')" href="../../../../_variables/encode_php_objects.html">$encode_php_objects</a>, 'prefix' =&gt; <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>,
<a name="l774"><span class="linenum"> 774</span></a>                      'decode_php_objs' =&gt; <a class="var it5549" onMouseOver="hilite(5549)" onMouseOut="lolite()" onClick="logVariable('decode_php_objects')" href="../../../../_variables/decode_php_objects.html">$decode_php_objects</a>
<a name="l775"><span class="linenum"> 775</span></a>                      );
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">                /// @todo build javadoc for class definition, too</span>
<a name="l777"><span class="linenum"> 777</span></a>                  foreach(<a class="var it5571" onMouseOver="hilite(5571)" onMouseOut="lolite()" onClick="logVariable('mlist')" href="../../../../_variables/mlist.html">$mlist</a> as <a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>)
<a name="l778"><span class="linenum"> 778</span></a>                  {
<a name="l779"><span class="linenum"> 779</span></a>                      if (<a class="var it5569" onMouseOver="hilite(5569)" onMouseOut="lolite()" onClick="logVariable('methodfilter')" href="../../../../_variables/methodfilter.html">$methodfilter</a> == '' || <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(<a class="var it5569" onMouseOver="hilite(5569)" onMouseOut="lolite()" onClick="logVariable('methodfilter')" href="../../../../_variables/methodfilter.html">$methodfilter</a>, <a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>))
<a name="l780"><span class="linenum"> 780</span></a>                      {
<a name="l781"><span class="linenum"> 781</span></a>                          <a class="var it5587" onMouseOver="hilite(5587)" onMouseOut="lolite()" onClick="logVariable('opts')" href="../../../../_variables/opts.html">$opts</a>['new_function_name'] = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(array('/\./', '/[^a-zA-Z0-9_\x7f-\xff]/'),
<a name="l782"><span class="linenum"> 782</span></a>                              array('_', ''), <a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>);
<a name="l783"><span class="linenum"> 783</span></a>                          <a class="var it5574" onMouseOver="hilite(5574)" onMouseOut="lolite()" onClick="logVariable('methodwrap')" href="../../../../_variables/methodwrap.html">$methodwrap</a> = <a class="function" onClick="logFunction('wrap_xmlrpc_method')" href="../../../../_functions/wrap_xmlrpc_method.html" onMouseOver="funcPopup(event,'wrap_xmlrpc_method')">wrap_xmlrpc_method</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>, <a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>, <a class="var it5587" onMouseOver="hilite(5587)" onMouseOut="lolite()" onClick="logVariable('opts')" href="../../../../_variables/opts.html">$opts</a>);
<a name="l784"><span class="linenum"> 784</span></a>                          if (<a class="var it5574" onMouseOver="hilite(5574)" onMouseOut="lolite()" onClick="logVariable('methodwrap')" href="../../../../_variables/methodwrap.html">$methodwrap</a>)
<a name="l785"><span class="linenum"> 785</span></a>                          {
<a name="l786"><span class="linenum"> 786</span></a>                              if (!<a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a>)
<a name="l787"><span class="linenum"> 787</span></a>                              {
<a name="l788"><span class="linenum"> 788</span></a>                                  <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a> .= <a class="var it5574" onMouseOver="hilite(5574)" onMouseOut="lolite()" onClick="logVariable('methodwrap')" href="../../../../_variables/methodwrap.html">$methodwrap</a>['docstring'];
<a name="l789"><span class="linenum"> 789</span></a>                              }
<a name="l790"><span class="linenum"> 790</span></a>                              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a> .= <a class="var it5574" onMouseOver="hilite(5574)" onMouseOut="lolite()" onClick="logVariable('methodwrap')" href="../../../../_variables/methodwrap.html">$methodwrap</a>['source'].&quot;\n&quot;;
<a name="l791"><span class="linenum"> 791</span></a>                          }
<a name="l792"><span class="linenum"> 792</span></a>                          else
<a name="l793"><span class="linenum"> 793</span></a>                          {
<a name="l794"><span class="linenum"> 794</span></a>                              <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: will not create class method to wrap remote method '.<a class="var it5572" onMouseOver="hilite(5572)" onMouseOut="lolite()" onClick="logVariable('mname')" href="../../../../_variables/mname.html">$mname</a>);
<a name="l795"><span class="linenum"> 795</span></a>                          }
<a name="l796"><span class="linenum"> 796</span></a>                      }
<a name="l797"><span class="linenum"> 797</span></a>                  }
<a name="l798"><span class="linenum"> 798</span></a>                  <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a> .= &quot;}\n&quot;;
<a name="l799"><span class="linenum"> 799</span></a>                  if (<a class="var it5547" onMouseOver="hilite(5547)" onMouseOut="lolite()" onClick="logVariable('buildit')" href="../../../../_variables/buildit.html">$buildit</a>)
<a name="l800"><span class="linenum"> 800</span></a>                  {
<a name="l801"><span class="linenum"> 801</span></a>                      <a class="var it5568" onMouseOver="hilite(5568)" onMouseOut="lolite()" onClick="logVariable('allOK')" href="../../../../_variables/allOK.html">$allOK</a> = 0;
<a name="l802"><span class="linenum"> 802</span></a>                      eval(<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a>.'<a class="var it5568" onMouseOver="hilite(5568)" onMouseOut="lolite()" onClick="logVariable('allOK')" href="../../../../_variables/allOK.html">$allOK</a>=1;');
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">                    // alternative</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment">                    //$xmlrpcfuncname = create_function('$m', $innercode);</span>
<a name="l805"><span class="linenum"> 805</span></a>                      if(<a class="var it5568" onMouseOver="hilite(5568)" onMouseOut="lolite()" onClick="logVariable('allOK')" href="../../../../_variables/allOK.html">$allOK</a>)
<a name="l806"><span class="linenum"> 806</span></a>                      {
<a name="l807"><span class="linenum"> 807</span></a>                          return <a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a>;
<a name="l808"><span class="linenum"> 808</span></a>                      }
<a name="l809"><span class="linenum"> 809</span></a>                      else
<a name="l810"><span class="linenum"> 810</span></a>                      {
<a name="l811"><span class="linenum"> 811</span></a>                          <a class="phpfunction" onClick="logFunction('error_log')" href="../../../../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('XML-RPC: could not create class '.<a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a>.' to wrap remote server '.<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('server')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/server.html">server</a>);
<a name="l812"><span class="linenum"> 812</span></a>                          return false;
<a name="l813"><span class="linenum"> 813</span></a>                      }
<a name="l814"><span class="linenum"> 814</span></a>                  }
<a name="l815"><span class="linenum"> 815</span></a>                  else
<a name="l816"><span class="linenum"> 816</span></a>                  {
<a name="l817"><span class="linenum"> 817</span></a>                      return array('class' =&gt; <a class="var it5586" onMouseOver="hilite(5586)" onMouseOut="lolite()" onClick="logVariable('xmlrpcclassname')" href="../../../../_variables/xmlrpcclassname.html">$xmlrpcclassname</a>, 'code' =&gt; <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../../../_variables/source.html">$source</a>, 'docstring' =&gt; '');
<a name="l818"><span class="linenum"> 818</span></a>                  }
<a name="l819"><span class="linenum"> 819</span></a>              }
<a name="l820"><span class="linenum"> 820</span></a>          }
<a name="l821"><span class="linenum"> 821</span></a>      }
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>      <span class="comment">/**</span>
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment">    * Given the necessary info, build php code that creates a new function to</span>
<a name="l825"><span class="linenum"> 825</span></a>  <span class="comment">    * invoke a remote xmlrpc method.</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">    * Take care that no full checking of input parameters is done to ensure that</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">    * valid php code is emitted.</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">    * Note: real spaghetti code follows...</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">    * @access private</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">    */</span>
<a name="l831"><span class="linenum"> 831</span></a>  	function <a class="function" onClick="logFunction('build_remote_method_wrapper_code')" href="../../../../_functions/build_remote_method_wrapper_code.html" onMouseOver="funcPopup(event,'build_remote_method_wrapper_code')">build_remote_method_wrapper_code</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>, <a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>, <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a>,
<a name="l832"><span class="linenum"> 832</span></a>          <a class="var it5582" onMouseOver="hilite(5582)" onMouseOut="lolite()" onClick="logVariable('msig')" href="../../../../_variables/msig.html">$msig</a>, <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a>='', <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a>=0, <a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a>='', <a class="var it5588" onMouseOver="hilite(5588)" onMouseOut="lolite()" onClick="logVariable('client_copy_mode')" href="../../../../_variables/client_copy_mode.html">$client_copy_mode</a>=0, <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>='xmlrpc',
<a name="l833"><span class="linenum"> 833</span></a>          <a class="var it5549" onMouseOver="hilite(5549)" onMouseOut="lolite()" onClick="logVariable('decode_php_objects')" href="../../../../_variables/decode_php_objects.html">$decode_php_objects</a>=false, <a class="var it5548" onMouseOver="hilite(5548)" onMouseOut="lolite()" onClick="logVariable('encode_php_objects')" href="../../../../_variables/encode_php_objects.html">$encode_php_objects</a>=false, <a class="var it5577" onMouseOver="hilite(5577)" onMouseOut="lolite()" onClick="logVariable('decode_fault')" href="../../../../_variables/decode_fault.html">$decode_fault</a>=false,
<a name="l834"><span class="linenum"> 834</span></a>          <a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a>='')
<a name="l835"><span class="linenum"> 835</span></a>      {
<a name="l836"><span class="linenum"> 836</span></a>          <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> = &quot;function <a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('xmlrpcfuncname')" href="../../../../_variables/xmlrpcfuncname.html">$xmlrpcfuncname</a> (&quot;;
<a name="l837"><span class="linenum"> 837</span></a>          if (<a class="var it5588" onMouseOver="hilite(5588)" onMouseOut="lolite()" onClick="logVariable('client_copy_mode')" href="../../../../_variables/client_copy_mode.html">$client_copy_mode</a> &lt; 2)
<a name="l838"><span class="linenum"> 838</span></a>          {
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment">            // client copy mode 0 or 1 == partial / full client copy in emitted code</span>
<a name="l840"><span class="linenum"> 840</span></a>              <a class="var it5559" onMouseOver="hilite(5559)" onMouseOut="lolite()" onClick="logVariable('innercode')" href="../../../../_variables/innercode.html">$innercode</a> = <a class="function" onClick="logFunction('build_client_wrapper_code')" href="../../../../_functions/build_client_wrapper_code.html" onMouseOver="funcPopup(event,'build_client_wrapper_code')">build_client_wrapper_code</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>, <a class="var it5588" onMouseOver="hilite(5588)" onMouseOut="lolite()" onClick="logVariable('client_copy_mode')" href="../../../../_variables/client_copy_mode.html">$client_copy_mode</a>, <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>);
<a name="l841"><span class="linenum"> 841</span></a>              <a class="var it5559" onMouseOver="hilite(5559)" onMouseOut="lolite()" onClick="logVariable('innercode')" href="../../../../_variables/innercode.html">$innercode</a> .= &quot;\<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a class="function" onClick="logFunction('setDebug')" href="../../../../_functions/setdebug.html" onMouseOver="funcPopup(event,'setdebug')">setDebug</a>(\<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../../_variables/debug.html">$debug</a>);\n&quot;;
<a name="l842"><span class="linenum"> 842</span></a>              <a class="var it5589" onMouseOver="hilite(5589)" onMouseOut="lolite()" onClick="logVariable('this_')" href="../../../../_variables/this_.html">$this_</a> = '';
<a name="l843"><span class="linenum"> 843</span></a>          }
<a name="l844"><span class="linenum"> 844</span></a>          else
<a name="l845"><span class="linenum"> 845</span></a>          {
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">            // client copy mode 2 == no client copy in emitted code</span>
<a name="l847"><span class="linenum"> 847</span></a>              <a class="var it5559" onMouseOver="hilite(5559)" onMouseOut="lolite()" onClick="logVariable('innercode')" href="../../../../_variables/innercode.html">$innercode</a> = '';
<a name="l848"><span class="linenum"> 848</span></a>              <a class="var it5589" onMouseOver="hilite(5589)" onMouseOut="lolite()" onClick="logVariable('this_')" href="../../../../_variables/this_.html">$this_</a> = 'this-&gt;';
<a name="l849"><span class="linenum"> 849</span></a>          }
<a name="l850"><span class="linenum"> 850</span></a>          <a class="var it5559" onMouseOver="hilite(5559)" onMouseOut="lolite()" onClick="logVariable('innercode')" href="../../../../_variables/innercode.html">$innercode</a> .= &quot;\<a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a> = new {<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>}<a class="function" onClick="logFunction('msg')" href="../../../../_functions/msg.html" onMouseOver="funcPopup(event,'msg')">msg</a>('<a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('methodname')" href="../../../../_variables/methodname.html">$methodname</a>');\n&quot;;
<a name="l851"><span class="linenum"> 851</span></a>  
<a name="l852"><span class="linenum"> 852</span></a>          if (<a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a> != '')
<a name="l853"><span class="linenum"> 853</span></a>          {
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment">            // take care that PHP comment is not terminated unwillingly by method description</span>
<a name="l855"><span class="linenum"> 855</span></a>              <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a> = &quot;<span class="comment">/**\n* &quot;.str_replace('*/</span>', '* /', <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a>).&quot;\n&quot;;
<a name="l856"><span class="linenum"> 856</span></a>          }
<a name="l857"><span class="linenum"> 857</span></a>          else
<a name="l858"><span class="linenum"> 858</span></a>          {
<a name="l859"><span class="linenum"> 859</span></a>              <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a> = &quot;<span class="comment">/**\nFunction $xmlrpcfuncname\n&quot;;</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">        }</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment"></span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">        // param parsing</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">        $plist = array();</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment">        $pcount = count($msig);</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">        for($i = 1; $i &lt; $pcount; $i++)</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">        {</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">            $plist[] = &quot;\$p$i&quot;;</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">            $ptype = $msig[$i];</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">            if($ptype == 'i4' || $ptype == 'int' || $ptype == 'boolean' || $ptype == 'double' ||</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">                $ptype == 'string' || $ptype == 'dateTime.iso8601' || $ptype == 'base64' || $ptype == 'null')</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">            {</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">                // only build directly xmlrpcvals when type is known and scalar</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment">                $innercode .= &quot;\$p$i = new {$prefix}val(\$p$i, '$ptype');\n&quot;;</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment">            }</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment">            else</span>
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment">            {</span>
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment">                if ($encode_php_objects)</span>
<a name="l878"><span class="linenum"> 878</span></a>  <span class="comment">                {</span>
<a name="l879"><span class="linenum"> 879</span></a>  <span class="comment">                    $innercode .= &quot;\$p$i =&amp; php_{$prefix}_encode(\$p$i, array('encode_php_objs'));\n&quot;;</span>
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">                }</span>
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">                else</span>
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">                {</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">                    $innercode .= &quot;\$p$i =&amp; php_{$prefix}_encode(\$p$i);\n&quot;;</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">                }</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">            }</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">            $innercode .= &quot;\$msg-&gt;addparam(\$p$i);\n&quot;;</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">            $mdesc .= '* @param '.xmlrpc_2_php_type($ptype).&quot; \$p$i\n&quot;;</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">        }</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">        if ($client_copy_mode &lt; 2)</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">        {</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">            $plist[] = '$debug=0';</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">            $mdesc .= &quot;* @param int \$debug when 1 (or 2) will enable debugging of the underlying {$prefix} call (defaults to 0)\n&quot;;</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">        }</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">        $plist = implode(', ', $plist);</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">        $mdesc .= '* @return '.xmlrpc_2_php_type($msig[0]).&quot; (or an {$prefix}resp obj instance if call fails)\n*/</span>\n&quot;;
<a name="l896"><span class="linenum"> 896</span></a>  
<a name="l897"><span class="linenum"> 897</span></a>          <a class="var it5559" onMouseOver="hilite(5559)" onMouseOut="lolite()" onClick="logVariable('innercode')" href="../../../../_variables/innercode.html">$innercode</a> .= &quot;\<a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../../_variables/res.html">$res</a> =&amp; \${<a class="var it5589" onMouseOver="hilite(5589)" onMouseOut="lolite()" onClick="logVariable('this_')" href="../../../../_variables/this_.html">$this_</a>}client-&gt;send(\<a class="var it232" onMouseOver="hilite(232)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../../../../_variables/msg.html">$msg</a>, <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../../../../_variables/timeout.html">$timeout</a>, '<a class="var it3803" onMouseOver="hilite(3803)" onMouseOut="lolite()" onClick="logVariable('protocol')" href="../../../../_variables/protocol.html">$protocol</a>');\n&quot;;
<a name="l898"><span class="linenum"> 898</span></a>          if (<a class="var it5577" onMouseOver="hilite(5577)" onMouseOut="lolite()" onClick="logVariable('decode_fault')" href="../../../../_variables/decode_fault.html">$decode_fault</a>)
<a name="l899"><span class="linenum"> 899</span></a>          {
<a name="l900"><span class="linenum"> 900</span></a>              if (<a class="phpfunction" onClick="logFunction('is_string')" href="../../../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a>) &amp;&amp; ((<a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a>, '%faultCode%') !== false) || (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a>, '%faultString%') !== false)))
<a name="l901"><span class="linenum"> 901</span></a>              {
<a name="l902"><span class="linenum"> 902</span></a>                  <a class="var it5593" onMouseOver="hilite(5593)" onMouseOut="lolite()" onClick="logVariable('respcode')" href="../../../../_variables/respcode.html">$respcode</a> = &quot;<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array('%faultCode%', '%faultString%'), array(\<a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../../_variables/res.html">$res</a>-&gt;<a class="function" onClick="logFunction('faultCode')" href="../../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultCode</a>(), \<a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../../_variables/res.html">$res</a>-&gt;<a class="function" onClick="logFunction('faultString')" href="../../../../_functions/faultstring.html" onMouseOver="funcPopup(event,'faultstring')">faultString</a>()), '&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;'&quot;, &quot;''&quot;, <a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a>).&quot;')&quot;;
<a name="l903"><span class="linenum"> 903</span></a>              }
<a name="l904"><span class="linenum"> 904</span></a>              else
<a name="l905"><span class="linenum"> 905</span></a>              {
<a name="l906"><span class="linenum"> 906</span></a>                  <a class="var it5593" onMouseOver="hilite(5593)" onMouseOut="lolite()" onClick="logVariable('respcode')" href="../../../../_variables/respcode.html">$respcode</a> = <a class="phpfunction" onClick="logFunction('var_export')" href="../../../../_functions/var_export.html" onMouseOver="phpfuncPopup(event,'var_export')">var_export</a>(<a class="var it5578" onMouseOver="hilite(5578)" onMouseOut="lolite()" onClick="logVariable('fault_response')" href="../../../../_variables/fault_response.html">$fault_response</a>, true);
<a name="l907"><span class="linenum"> 907</span></a>              }
<a name="l908"><span class="linenum"> 908</span></a>          }
<a name="l909"><span class="linenum"> 909</span></a>          else
<a name="l910"><span class="linenum"> 910</span></a>          {
<a name="l911"><span class="linenum"> 911</span></a>              <a class="var it5593" onMouseOver="hilite(5593)" onMouseOut="lolite()" onClick="logVariable('respcode')" href="../../../../_variables/respcode.html">$respcode</a> = '<a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../../_variables/res.html">$res</a>';
<a name="l912"><span class="linenum"> 912</span></a>          }
<a name="l913"><span class="linenum"> 913</span></a>          if (<a class="var it5549" onMouseOver="hilite(5549)" onMouseOut="lolite()" onClick="logVariable('decode_php_objects')" href="../../../../_variables/decode_php_objects.html">$decode_php_objects</a>)
<a name="l914"><span class="linenum"> 914</span></a>          {
<a name="l915"><span class="linenum"> 915</span></a>              <a class="var it5559" onMouseOver="hilite(5559)" onMouseOut="lolite()" onClick="logVariable('innercode')" href="../../../../_variables/innercode.html">$innercode</a> .= &quot;if (\<a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../../_variables/res.html">$res</a>-&gt;<a class="function" onClick="logFunction('faultcode')" href="../../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultcode</a>()) return <a class="var it5593" onMouseOver="hilite(5593)" onMouseOut="lolite()" onClick="logVariable('respcode')" href="../../../../_variables/respcode.html">$respcode</a>; else return php_{<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>}<a class="function" onClick="logFunction('_decode')" href="../../../../_functions/_decode.html" onMouseOver="funcPopup(event,'_decode')">_decode</a>(\<a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../../_variables/res.html">$res</a>-&gt;<a class="function" onClick="logFunction('value')" href="../../../../_functions/value.html" onMouseOver="funcPopup(event,'value')">value</a>(), array('decode_php_objs'));&quot;;
<a name="l916"><span class="linenum"> 916</span></a>          }
<a name="l917"><span class="linenum"> 917</span></a>          else
<a name="l918"><span class="linenum"> 918</span></a>          {
<a name="l919"><span class="linenum"> 919</span></a>              <a class="var it5559" onMouseOver="hilite(5559)" onMouseOut="lolite()" onClick="logVariable('innercode')" href="../../../../_variables/innercode.html">$innercode</a> .= &quot;if (\<a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../../_variables/res.html">$res</a>-&gt;<a class="function" onClick="logFunction('faultcode')" href="../../../../_functions/faultcode.html" onMouseOver="funcPopup(event,'faultcode')">faultcode</a>()) return <a class="var it5593" onMouseOver="hilite(5593)" onMouseOut="lolite()" onClick="logVariable('respcode')" href="../../../../_variables/respcode.html">$respcode</a>; else return php_{<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>}<a class="function" onClick="logFunction('_decode')" href="../../../../_functions/_decode.html" onMouseOver="funcPopup(event,'_decode')">_decode</a>(\<a class="var it3219" onMouseOver="hilite(3219)" onMouseOut="lolite()" onClick="logVariable('res')" href="../../../../_variables/res.html">$res</a>-&gt;<a class="function" onClick="logFunction('value')" href="../../../../_functions/value.html" onMouseOver="funcPopup(event,'value')">value</a>());&quot;;
<a name="l920"><span class="linenum"> 920</span></a>          }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>          <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> = <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> . <a class="var it5590" onMouseOver="hilite(5590)" onMouseOut="lolite()" onClick="logVariable('plist')" href="../../../../_variables/plist.html">$plist</a>. &quot;) {\n&quot; . <a class="var it5559" onMouseOver="hilite(5559)" onMouseOut="lolite()" onClick="logVariable('innercode')" href="../../../../_variables/innercode.html">$innercode</a> . &quot;\n}\n&quot;;
<a name="l923"><span class="linenum"> 923</span></a>  
<a name="l924"><span class="linenum"> 924</span></a>          return array('source' =&gt; <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>, 'docstring' =&gt; <a class="var it5583" onMouseOver="hilite(5583)" onMouseOut="lolite()" onClick="logVariable('mdesc')" href="../../../../_variables/mdesc.html">$mdesc</a>);
<a name="l925"><span class="linenum"> 925</span></a>      }
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>      <span class="comment">/**</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">    * Given necessary info, generate php code that will rebuild a client object</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">    * Take care that no full checking of input parameters is done to ensure that</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">    * valid php code is emitted.</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">    * @access private</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">    */</span>
<a name="l933"><span class="linenum"> 933</span></a>  	function <a class="function" onClick="logFunction('build_client_wrapper_code')" href="../../../../_functions/build_client_wrapper_code.html" onMouseOver="funcPopup(event,'build_client_wrapper_code')">build_client_wrapper_code</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>, <a class="var it5585" onMouseOver="hilite(5585)" onMouseOut="lolite()" onClick="logVariable('verbatim_client_copy')" href="../../../../_variables/verbatim_client_copy.html">$verbatim_client_copy</a>, <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>='xmlrpc')
<a name="l934"><span class="linenum"> 934</span></a>      {
<a name="l935"><span class="linenum"> 935</span></a>          <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> = &quot;\<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a> = new {<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>}_client('&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;'&quot;, &quot;\'&quot;, <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('path')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/path.html">path</a>).
<a name="l936"><span class="linenum"> 936</span></a>              &quot;', '&quot; . <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;'&quot;, &quot;\'&quot;, <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('server')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/server.html">server</a>) . &quot;', <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('port')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/port.html">port</a>);\n&quot;;
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">        // copy all client fields to the client that will be generated runtime</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">        // (this provides for future expansion or subclassing of client obj)</span>
<a name="l940"><span class="linenum"> 940</span></a>          if (<a class="var it5585" onMouseOver="hilite(5585)" onMouseOut="lolite()" onClick="logVariable('verbatim_client_copy')" href="../../../../_variables/verbatim_client_copy.html">$verbatim_client_copy</a>)
<a name="l941"><span class="linenum"> 941</span></a>          {
<a name="l942"><span class="linenum"> 942</span></a>              foreach(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a> as <a class="var it5594" onMouseOver="hilite(5594)" onMouseOut="lolite()" onClick="logVariable('fld')" href="../../../../_variables/fld.html">$fld</a> =&gt; <a class="var it2507" onMouseOver="hilite(2507)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../../../_variables/val.html">$val</a>)
<a name="l943"><span class="linenum"> 943</span></a>              {
<a name="l944"><span class="linenum"> 944</span></a>                  if(<a class="var it5594" onMouseOver="hilite(5594)" onMouseOut="lolite()" onClick="logVariable('fld')" href="../../../../_variables/fld.html">$fld</a> != 'debug' &amp;&amp; <a class="var it5594" onMouseOver="hilite(5594)" onMouseOut="lolite()" onClick="logVariable('fld')" href="../../../../_variables/fld.html">$fld</a> != 'return_type')
<a name="l945"><span class="linenum"> 945</span></a>                  {
<a name="l946"><span class="linenum"> 946</span></a>                      <a class="var it2507" onMouseOver="hilite(2507)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../../../_variables/val.html">$val</a> = <a class="phpfunction" onClick="logFunction('var_export')" href="../../../../_functions/var_export.html" onMouseOver="phpfuncPopup(event,'var_export')">var_export</a>(<a class="var it2507" onMouseOver="hilite(2507)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../../../_variables/val.html">$val</a>, true);
<a name="l947"><span class="linenum"> 947</span></a>                      <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> .= &quot;\<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a class="var it5594" onMouseOver="hilite(5594)" onMouseOut="lolite()" onClick="logVariable('fld')" href="../../../../_variables/fld.html">$fld</a> = <a class="var it2507" onMouseOver="hilite(2507)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../../../_variables/val.html">$val</a>;\n&quot;;
<a name="l948"><span class="linenum"> 948</span></a>                  }
<a name="l949"><span class="linenum"> 949</span></a>              }
<a name="l950"><span class="linenum"> 950</span></a>          }
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment">        // only make sure that client always returns the correct data type</span>
<a name="l952"><span class="linenum"> 952</span></a>          <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a> .= &quot;\<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a>-&gt;<a onClick="logVariable('return_type')" class="var it9215" onMouseOver="hilite(9215)" onMouseOut="lolite()" href="../../../../_variables/return_type.html">return_type</a> = '{<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>}vals';\n&quot;;
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">        //$code .= &quot;\$client-&gt;setDebug(\$debug);\n&quot;;</span>
<a name="l954"><span class="linenum"> 954</span></a>          return <a class="var it247" onMouseOver="hilite(247)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../_variables/code.html">$code</a>;
<a name="l955"><span class="linenum"> 955</span></a>      }
<a name="l956"><span class="linenum"> 956</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'build_remote_method_wrapper_code': ['build_remote_method_wrapper_code', 'Given the necessary info, build php code that creates a new function to invoke a remote xmlrpc method. Take care that no full checking of input parameters is done to ensure that valid php code is emitted. Note: real spaghetti code follows... ', [['blogs/inc/_ext/xmlrpc','_xmlrpc_wrappers.inc.php',823]], 1],
'wrap_xmlrpc_server': ['wrap_xmlrpc_server', 'Similar to wrap_xmlrpc_method, but will generate a php class that wraps all xmlrpc methods exposed by the remote server as own methods. For more details see wrap_xmlrpc_method. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc_wrappers.inc.php',705]], 0],
'setdebug': ['setdebug', '', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',959],['blogs/inc/_ext/xmlrpc','_xmlrpcs.inc.php',556]], 2],
'addparam': ['addparam', 'Add a parameter to the list of parameters to be used upon method invocation ', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',2194]], 8],
'xmlrpc_2_php_type': ['xmlrpc_2_php_type', 'Given a string defining a phpxmlrpc type return corresponding php type. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc_wrappers.inc.php',66]], 2],
'value': ['value', 'Returns the value received by the server. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',2013]], 33],
'msg': ['msg', 'A simple wrapper around the {@link $Messages} object with a default catgory of \'note\'. ', [['blogs/inc/plugins','_plugin.class.php',2787]], 21],
'faultcode': ['faultcode', 'Returns the error code of the response. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',1993]], 15],
'faultstring': ['faultstring', 'Returns the error code of the response. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',2003]], 5],
'wrap_php_function': ['wrap_php_function', 'Given a user-defined PHP function, create a PHP \'wrapper\' function that can be exposed as xmlrpc method from an xmlrpc_server object and called from remote clients (as well as its corresponding signature info). ', [['blogs/inc/_ext/xmlrpc','_xmlrpc_wrappers.inc.php',97]], 1],
'php_2_xmlrpc_type': ['php_2_xmlrpc_type', 'Given a string defining a php type or phpxmlrpc type (loosely defined: strings accepted come from javadoc blocks), return corresponding phpxmlrpc type. NB: for php \'resource\' types returns empty string, since resources cannot be serialized; for php class names returns \'struct\', since php objects can be serialized as xmlrpc structs for php arrays always return array, even though arrays sometiles serialize as json structs ', [['blogs/inc/_ext/xmlrpc','_xmlrpc_wrappers.inc.php',21]], 3],
'build_client_wrapper_code': ['build_client_wrapper_code', 'Given necessary info, generate php code that will rebuild a client object Take care that no full checking of input parameters is done to ensure that valid php code is emitted. ', [['blogs/inc/_ext/xmlrpc','_xmlrpc_wrappers.inc.php',927]], 2],
'wrap_xmlrpc_method': ['wrap_xmlrpc_method', 'Given an xmlrpc client and a method name, register a php wrapper function that will call it and return results using native php types for both params and results. The generated php function will return an xmlrpcresp oject for failed xmlrpc calls ', [['blogs/inc/_ext/xmlrpc','_xmlrpc_wrappers.inc.php',537]], 1],
'wrap_php_class': ['wrap_php_class', 'Given a user-defined PHP class or php object, map its methods onto a list of PHP \'wrapper\' functions that can be exposed as xmlrpc methods from an xmlrpc_server object and called from remote clients (as well as their corresponding signature info). ', [['blogs/inc/_ext/xmlrpc','_xmlrpc_wrappers.inc.php',487]], 0],
'scalarval': ['scalarval', 'Returns the value of a scalar xmlrpcval ', [['blogs/inc/_ext/xmlrpc','_xmlrpc.inc.php',3151]], 39],
'_decode': ['_decode', 'The actual decoding algorithm ', [['blogs/inc/_ext/idna','_idna_convert.class.php',348],['blogs/inc/_ext/idna','_idna_convert.class.php4',367]], 18],
'phpversion': ['phpversion', '', [], 18],
'trim': ['trim', '', [], 351],
'class_exists': ['class_exists', '', [], 6],
'str_replace': ['str_replace', '', [], 403],
'version_compare': ['version_compare', '', [], 83],
'explode': ['explode', '', [], 249],
'is_object': ['is_object', '', [], 57],
'function_exists': ['function_exists', '', [], 130],
'preg_match': ['preg_match', '', [], 363],
'is_array': ['is_array', '', [], 243],
'get_class': ['get_class', '', [], 22],
'get_class_methods': ['get_class_methods', '', [], 1],
'error_log': ['error_log', '', [], 54],
'is_string': ['is_string', '', [], 58],
'preg_replace': ['preg_replace', '', [], 281],
'count': ['count', '', [], 754],
'strpos': ['strpos', '', [], 280],
'is_callable': ['is_callable', '', [], 6],
'defined': ['defined', '', [], 874],
'method_exists': ['method_exists', '', [], 12],
'var_export': ['var_export', '', [], 48],
'implode': ['implode', '', [], 456],
'strtolower': ['strtolower', '', [], 168]};
CLASS_DATA={
};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['blogs/inc','_main.inc.php',55],['blogs/install','index.php',25],['blogs/install','debug.php',22]], 827]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Jul  5 12:18:44 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
