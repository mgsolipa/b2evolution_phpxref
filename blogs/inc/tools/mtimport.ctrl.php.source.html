<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /blogs/inc/tools/mtimport.ctrl.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Jul  5 12:18:44 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='blogs/inc/tools';
filename='mtimport.ctrl.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/blogs/inc/tools/</a> -> <a href="mtimport.ctrl.php.html">mtimport.ctrl.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="mtimport.ctrl.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="mtimport.ctrl.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements importing of Movable Type entries into b2evolution.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * {@internal</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * TODO:</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *  - Wrap this by an abstract import class!</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *  - list of all posts, editable (overkill?)</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *  - assign comment_author_user_ID to comments if user exist?! }}</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> *</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> *</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * This script was developed and tested with b2evolution 0.9.0.4 (on Sourceforge CVS)</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * and Movable Type 2.64 and 2.661.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * It should work quite alright with b2evo 0.9 and later though.</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> *</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> * This file is part of the b2evolution/evocms project - {@link http://b2evolution.net/}.</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> * See also {@link http://sourceforge.net/projects/evocms/}.</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> *</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @copyright (c)2003-2014 by Francois Planque - {@link http://fplanque.com/}.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2005 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * Credits go to the WordPress team (@link http://wordpress.org), where I got the basic</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * import-mt.php script with most of the core functions. Thank you!</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> *</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license http://b2evolution.net/about/license.html GNU General Public License (GPL)</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> *</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * {@internal Open Source relicensing agreement:</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * Daniel HAHLER grants Francois PLANQUE the right to license</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * Daniel HAHLER's contributions to this file and the b2evolution project</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * under any OSI approved OSS license (http://www.opensource.org/licenses/).</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * }}</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @package admin</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * {@internal Below is a list of authors who have contributed to design/coding of this file: }}</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @author fplanque: Francois PLANQUE</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @author blueyed: Daniel HAHLER</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> *</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @version $Id: mtimport.ctrl.php 6785 2014-05-28 03:52:45Z yura $</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> */</span>
<a name="l40"><span class="linenum">  40</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  global <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a>;
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * @const IMPORT_SRC_DIR directory where to be imported files get searched for.</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> */</span>
<a name="l47"><span class="linenum">  47</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('IMPORT_SRC_DIR')" href="../../../_constants/IMPORT_SRC_DIR.html" onMouseOver="constPopup(event,'IMPORT_SRC_DIR')">IMPORT_SRC_DIR</a>', <a class="var it1877" onMouseOver="hilite(1877)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../../../_variables/basepath.html">$basepath</a>);
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">/**</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * Enter the relative path of the import.txt file containing the MT entries.</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * If the file is called import.txt and it is in /admin, then this line should be:</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> * &lt;code&gt;</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * define('MTEXPORT', 'import.txt');</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> *</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * You only need this to force a specific file instead of using a dropdown list</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * (UI selection)</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> */</span>
<a name="l59"><span class="linenum">  59</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a>', '');
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">/**</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> * Set to true to get a lot of var_dumps, wrapped in pre tags</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> */</span>
<a name="l64"><span class="linenum">  64</span></a>  <a class="var it1878" onMouseOver="hilite(1878)" onMouseOut="lolite()" onClick="logVariable('output_debug_dump')" href="../../../_variables/output_debug_dump.html">$output_debug_dump</a> = 0;
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">// ----------- don't change below if you don't know what you do ------------------------</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">// TODO: Make this AdminUI compliant, or better: make an MT import plugin..</span>
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>  <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('files/model/_file.funcs.php');
<a name="l71"><span class="linenum">  71</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'items/model/_item.class.php', 'Item' );
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  if( <a class="phpfunction" onClick="logFunction('function_exists')" href="../../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>( 'set_magic_quotes_runtime' ) )
<a name="l74"><span class="linenum">  74</span></a>  {
<a name="l75"><span class="linenum">  75</span></a>      @<a class="phpfunction" onClick="logFunction('set_magic_quotes_runtime')" href="../../../_functions/set_magic_quotes_runtime.html" onMouseOver="phpfuncPopup(event,'set_magic_quotes_runtime')">set_magic_quotes_runtime</a>( 0 );  <span class="comment">// be clear on this</span>
<a name="l76"><span class="linenum">  76</span></a>  }
<a name="l77"><span class="linenum">  77</span></a>  else
<a name="l78"><span class="linenum">  78</span></a>  {
<a name="l79"><span class="linenum">  79</span></a>      <a class="phpfunction" onClick="logFunction('ini_set')" href="../../../_functions/ini_set.html" onMouseOver="phpfuncPopup(event,'ini_set')">ini_set</a>( 'magic_quotes_runtime', 0 );
<a name="l80"><span class="linenum">  80</span></a>  }
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">// TODO: $io_charset !!</span>
<a name="l83"><span class="linenum">  83</span></a>  <a class="var it1879" onMouseOver="hilite(1879)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../_variables/head.html">$head</a> = &lt;&lt;&lt;EOB
<a name="l84"><span class="linenum">  84</span></a>  &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
<a name="l85"><span class="linenum">  85</span></a>  &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;
<a name="l86"><span class="linenum">  86</span></a>  &lt;head&gt;
<a name="l87"><span class="linenum">  87</span></a>      &lt;title&gt;b2evolution &amp;rsaquo; Import from Movable Type&lt;/title&gt;
<a name="l88"><span class="linenum">  88</span></a>      &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
<a name="l89"><span class="linenum">  89</span></a>      &lt;link href=&quot;{<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('adminskins_url')" href="../../../_variables/adminskins_url.html">$adminskins_url</a>}legacy/rsc/css/variation.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; title=&quot;Variation&quot; /&gt;
<a name="l90"><span class="linenum">  90</span></a>      &lt;link href=&quot;{<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('adminskins_url')" href="../../../_variables/adminskins_url.html">$adminskins_url</a>}legacy/rsc/css/desert.css&quot; rel=&quot;alternate stylesheet&quot; type=&quot;text/css&quot; title=&quot;Desert&quot; /&gt;
<a name="l91"><span class="linenum">  91</span></a>      &lt;link href=&quot;{<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('adminskins_url')" href="../../../_variables/adminskins_url.html">$adminskins_url</a>}legacy/rsc/css/legacy.css&quot; rel=&quot;alternate stylesheet&quot; type=&quot;text/css&quot; title=&quot;Legacy&quot; /&gt;
<a name="l92"><span class="linenum">  92</span></a>  EOB;
<a name="l93"><span class="linenum">  93</span></a>  if( <a class="phpfunction" onClick="logFunction('is_file')" href="../../../_functions/is_file.html" onMouseOver="phpfuncPopup(event,'is_file')">is_file</a>( <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../../_variables/adminskins_path.html">$adminskins_path</a>.'legacy/rsc/css/custom.css' ) )
<a name="l94"><span class="linenum">  94</span></a>  {
<a name="l95"><span class="linenum">  95</span></a>      <a class="var it1879" onMouseOver="hilite(1879)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../_variables/head.html">$head</a> .= '&lt;link href=&quot;'.<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('adminskins_url')" href="../../../_variables/adminskins_url.html">$adminskins_url</a>.'legacy/rsc/css/custom.css&quot; rel=&quot;alternate stylesheet&quot; type=&quot;text/css&quot; title=&quot;Custom&quot; /&gt;';
<a name="l96"><span class="linenum">  96</span></a>  }
<a name="l97"><span class="linenum">  97</span></a>  <a class="var it1879" onMouseOver="hilite(1879)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../_variables/head.html">$head</a> .= &lt;&lt;&lt;EOB
<a name="l98"><span class="linenum">  98</span></a>  &lt;script type=&quot;text/javascript&quot; src=&quot;{<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../_variables/rsc_url.html">$rsc_url</a>}js/styleswitcher.js?v=2&quot;&gt;&lt;/script&gt;
<a name="l99"><span class="linenum">  99</span></a>  &lt;/head&gt;
<a name="l100"><span class="linenum"> 100</span></a>  &lt;body&gt;
<a name="l101"><span class="linenum"> 101</span></a>  &lt;div id=&quot;header&quot;&gt;
<a name="l102"><span class="linenum"> 102</span></a>      &lt;div id=&quot;headinfo&quot;&gt;
<a name="l103"><span class="linenum"> 103</span></a>          &lt;span style=&quot;font-size:150%; font-weight:bold&quot;&gt;Movable Type to b2evolution importer&lt;/span&gt;
<a name="l104"><span class="linenum"> 104</span></a>          [&lt;a href=&quot;{<a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a>}?ctrl=tools&quot;&gt;Back to b2evolution&lt;/a&gt;]
<a name="l105"><span class="linenum"> 105</span></a>      &lt;/div&gt;
<a name="l106"><span class="linenum"> 106</span></a>  EOB;
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  <a class="var it1881" onMouseOver="hilite(1881)" onMouseOut="lolite()" onClick="logVariable('conf_file')" href="../../../_variables/conf_file.html">$conf_file</a> = <a class="var it1882" onMouseOver="hilite(1882)" onMouseOut="lolite()" onClick="logVariable('conf_path')" href="../../../_variables/conf_path.html">$conf_path</a>.'_config.php';
<a name="l109"><span class="linenum"> 109</span></a>  if( !<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1881" onMouseOver="hilite(1881)" onMouseOut="lolite()" onClick="logVariable('conf_file')" href="../../../_variables/conf_file.html">$conf_file</a> ) )
<a name="l110"><span class="linenum"> 110</span></a>  {
<a name="l111"><span class="linenum"> 111</span></a>      <a class="function" onClick="logFunction('dieerror')" href="../../../_functions/dieerror.html" onMouseOver="funcPopup(event,'dieerror')">dieerror</a>( &quot;There doesn't seem to be a conf/_config.php file. You must install b2evolution before you can import any entries.&quot;, <a class="var it1879" onMouseOver="hilite(1879)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../_variables/head.html">$head</a> );
<a name="l112"><span class="linenum"> 112</span></a>  }
<a name="l113"><span class="linenum"> 113</span></a>  require( <a class="var it1881" onMouseOver="hilite(1881)" onMouseOut="lolite()" onClick="logVariable('conf_file')" href="../../../_variables/conf_file.html">$conf_file</a> );
<a name="l114"><span class="linenum"> 114</span></a>  if( ! isset(<a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('config_is_done')" href="../../../_variables/config_is_done.html">$config_is_done</a>) || ! <a class="var it1752" onMouseOver="hilite(1752)" onMouseOut="lolite()" onClick="logVariable('config_is_done')" href="../../../_variables/config_is_done.html">$config_is_done</a> )
<a name="l115"><span class="linenum"> 115</span></a>  {
<a name="l116"><span class="linenum"> 116</span></a>      <a class="var it350" onMouseOver="hilite(350)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../../../_variables/error_message.html">$error_message</a> = '';
<a name="l117"><span class="linenum"> 117</span></a>      require( <a class="var it246" onMouseOver="hilite(246)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../../_variables/inc_path.html">$inc_path</a>.'_conf_error_page.php' );
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>      <a class="function" onClick="logFunction('dieerror')" href="../../../_functions/dieerror.html" onMouseOver="funcPopup(event,'dieerror')">dieerror</a>( 'b2evolution configuration is not done yet.', <a class="var it1879" onMouseOver="hilite(1879)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../_variables/head.html">$head</a> );
<a name="l120"><span class="linenum"> 120</span></a>  }
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">// TODO: this should use no output buffering (probably to display page content during import, which may take long)!</span>
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">// Check if user is logged in and is in group #1 (admins)</span>
<a name="l127"><span class="linenum"> 127</span></a>  if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) || <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('grp_ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../_variables/grp_ID.html">grp_ID</a> != 1 )
<a name="l128"><span class="linenum"> 128</span></a>  {    // login failed
<a name="l129"><span class="linenum"> 129</span></a>      <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'You must login with an administrator (group #1) account.' );
<a name="l130"><span class="linenum"> 130</span></a>  }
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  echo <a class="var it1879" onMouseOver="hilite(1879)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../_variables/head.html">$head</a>;
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>  <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'exportedfile', 'string', '' );
<a name="l135"><span class="linenum"> 135</span></a>  <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'import_mode', 'string', 'normal' );
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">/*** mode-tabs ***/</span> ?&gt;
<a name="l138"><span class="linenum"> 138</span></a>  &lt;ul class=&quot;tabs&quot;&gt;&lt;?php
<a name="l139"><span class="linenum"> 139</span></a>      foreach( array( 'easy', 'normal', 'expert' ) as <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../../../_variables/tab.html">$tab</a> )
<a name="l140"><span class="linenum"> 140</span></a>      {
<a name="l141"><span class="linenum"> 141</span></a>          echo ( <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../../../_variables/tab.html">$tab</a> == <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> ) ? '&lt;li class=&quot;current&quot;&gt;' : '&lt;li&gt;';
<a name="l142"><span class="linenum"> 142</span></a>          echo '&lt;a href=&quot;'.<a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=mtimport&amp;amp;import_mode='.<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../../../_variables/tab.html">$tab</a>.( !empty(<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>) ? '&amp;amp;exportedfile='.<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a> : '' ).'&quot;&gt;'.<a class="phpfunction" onClick="logFunction('ucwords')" href="../../../_functions/ucwords.html" onMouseOver="phpfuncPopup(event,'ucwords')">ucwords</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../../../_variables/tab.html">$tab</a>).'&lt;/a&gt;&lt;/li&gt;';
<a name="l143"><span class="linenum"> 143</span></a>      }
<a name="l144"><span class="linenum"> 144</span></a>  ?&gt;&lt;/ul&gt;
<a name="l145"><span class="linenum"> 145</span></a>  &lt;/div&gt;
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>  &lt;div style=&quot;padding-top:1em;clear:both;&quot;&gt;
<a name="l148"><span class="linenum"> 148</span></a>  &lt;?php
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">    // check existence of export-file</span>
<a name="l150"><span class="linenum"> 150</span></a>      if( empty(<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>) )
<a name="l151"><span class="linenum"> 151</span></a>      {
<a name="l152"><span class="linenum"> 152</span></a>          if( '' != <a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a> &amp;&amp; !<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a>) )
<a name="l153"><span class="linenum"> 153</span></a>          {
<a name="l154"><span class="linenum"> 154</span></a>              ?&gt;
<a name="l155"><span class="linenum"> 155</span></a>              &lt;div class=&quot;error&quot;&gt;&lt;p&gt;
<a name="l156"><span class="linenum"> 156</span></a>              The MT export file you defined in <a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a> at top of the script does not seem to exist.
<a name="l157"><span class="linenum"> 157</span></a>              Please check the path you've given for <a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a> or choose a file below.
<a name="l158"><span class="linenum"> 158</span></a>              &lt;/p&gt;&lt;/div&gt;
<a name="l159"><span class="linenum"> 159</span></a>              &lt;?php
<a name="l160"><span class="linenum"> 160</span></a>          }
<a name="l161"><span class="linenum"> 161</span></a>          elseif( '' != <a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a> )
<a name="l162"><span class="linenum"> 162</span></a>          {
<a name="l163"><span class="linenum"> 163</span></a>              <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a> = <a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a>;
<a name="l164"><span class="linenum"> 164</span></a>          }
<a name="l165"><span class="linenum"> 165</span></a>          if( empty(<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>) )
<a name="l166"><span class="linenum"> 166</span></a>          { // no valid <a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a> defined
<a name="l167"><span class="linenum"> 167</span></a>              <a class="function" onClick="logFunction('chooseexportfile')" href="../../../_functions/chooseexportfile.html" onMouseOver="funcPopup(event,'chooseexportfile')">chooseexportfile</a>();
<a name="l168"><span class="linenum"> 168</span></a>              echo '&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;';
<a name="l169"><span class="linenum"> 169</span></a>              exit(0);
<a name="l170"><span class="linenum"> 170</span></a>          }
<a name="l171"><span class="linenum"> 171</span></a>      }
<a name="l172"><span class="linenum"> 172</span></a>      else
<a name="l173"><span class="linenum"> 173</span></a>      {
<a name="l174"><span class="linenum"> 174</span></a>          if( !<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>) )
<a name="l175"><span class="linenum"> 175</span></a>          {
<a name="l176"><span class="linenum"> 176</span></a>              <a class="function" onClick="logFunction('chooseexportfile')" href="../../../_functions/chooseexportfile.html" onMouseOver="funcPopup(event,'chooseexportfile')">chooseexportfile</a>();
<a name="l177"><span class="linenum"> 177</span></a>              <a class="function" onClick="logFunction('dieerror')" href="../../../_functions/dieerror.html" onMouseOver="funcPopup(event,'dieerror')">dieerror</a>(&quot;The MT export file [<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>] you've chosen does not seem to exist. Please check path/permission.&quot;);
<a name="l178"><span class="linenum"> 178</span></a>          }
<a name="l179"><span class="linenum"> 179</span></a>      }
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">    // get the params</span>
<a name="l182"><span class="linenum"> 182</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'simulate', 'integer', 0 );
<a name="l183"><span class="linenum"> 183</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'default_password', 'string', 'changeme' );
<a name="l184"><span class="linenum"> 184</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'default_password2', 'string', 'changeme' );
<a name="l185"><span class="linenum"> 185</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_locale', 'string', <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'default_locale' ) );
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>      if( <a class="var it1885" onMouseOver="hilite(1885)" onMouseOut="lolite()" onClick="logVariable('default_password')" href="../../../_variables/default_password.html">$default_password</a> != <a class="var it1886" onMouseOver="hilite(1886)" onMouseOut="lolite()" onClick="logVariable('default_password2')" href="../../../_variables/default_password2.html">$default_password2</a> )
<a name="l188"><span class="linenum"> 188</span></a>      {
<a name="l189"><span class="linenum"> 189</span></a>          <a class="function" onClick="logFunction('dieerror')" href="../../../_functions/dieerror.html" onMouseOver="funcPopup(event,'dieerror')">dieerror</a>( 'The two passwords for new users are not identical.' );
<a name="l190"><span class="linenum"> 190</span></a>      }
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'default_userlevel', 'integer', 1 );
<a name="l193"><span class="linenum"> 193</span></a>      if( <a class="var it1887" onMouseOver="hilite(1887)" onMouseOut="lolite()" onClick="logVariable('default_userlevel')" href="../../../_variables/default_userlevel.html">$default_userlevel</a> &gt; 10 ) <a class="var it1887" onMouseOver="hilite(1887)" onMouseOut="lolite()" onClick="logVariable('default_userlevel')" href="../../../_variables/default_userlevel.html">$default_userlevel</a> = 10;
<a name="l194"><span class="linenum"> 194</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'default_usergroup', 'integer', <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('newusers_grp_ID') );
<a name="l195"><span class="linenum"> 195</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'default_convert_breaks', 'integer', 1 );
<a name="l196"><span class="linenum"> 196</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'convert_html_tags', 'integer', 0 );
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'action', 'string', '' );
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">    // global arrays</span>
<a name="l202"><span class="linenum"> 202</span></a>      <a class="var it1888" onMouseOver="hilite(1888)" onMouseOut="lolite()" onClick="logVariable('categories_countprim')" href="../../../_variables/categories_countprim.html">$categories_countprim</a> = array();  <span class="comment">// counts posts in primary categories</span>
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">    // load caches</span>
<a name="l205"><span class="linenum"> 205</span></a>      <a class="function" onClick="logFunction('blog_load_cache')" href="../../../_functions/blog_load_cache.html" onMouseOver="funcPopup(event,'blog_load_cache')">blog_load_cache</a>();
<a name="l206"><span class="linenum"> 206</span></a>      <a class="function" onClick="logFunction('cat_load_cache')" href="../../../_functions/cat_load_cache.html" onMouseOver="funcPopup(event,'cat_load_cache')">cat_load_cache</a>( 'none' );
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>      <a class="var it1889" onMouseOver="hilite(1889)" onMouseOut="lolite()" onClick="logVariable('i_user')" href="../../../_variables/i_user.html">$i_user</a> = -1;
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>      if( empty(<a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a>) )
<a name="l211"><span class="linenum"> 211</span></a>      {
<a name="l212"><span class="linenum"> 212</span></a>          <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'import_mode', 'string', 'normal', true );
<a name="l213"><span class="linenum"> 213</span></a>          <a class="function" onClick="logFunction('import_data_extract_authors_cats')" href="../../../_functions/import_data_extract_authors_cats.html" onMouseOver="funcPopup(event,'import_data_extract_authors_cats')">import_data_extract_authors_cats</a>();
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>          ?&gt;
<a name="l216"><span class="linenum"> 216</span></a>          &lt;div class=&quot;panelinfo&quot;&gt;
<a name="l217"><span class="linenum"> 217</span></a>          &lt;p&gt;We are about to import &lt;?php
<a name="l218"><span class="linenum"> 218</span></a>              echo '['.<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>.'].';
<a name="l219"><span class="linenum"> 219</span></a>              if( '' == <a class="constant" onClick="logConstant('MTEXPORT')" href="../../../_constants/MTEXPORT.html" onMouseOver="constPopup(event,'MTEXPORT')">MTEXPORT</a> )
<a name="l220"><span class="linenum"> 220</span></a>              {
<a name="l221"><span class="linenum"> 221</span></a>                  ?&gt; [&lt;a href=&quot;&lt;?php echo <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a> ?&gt;?ctrl=mtimport&amp;amp;import_mode=&lt;?php echo <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> ?&gt;&quot;&gt;choose another export-file&lt;/a&gt;]&lt;?php
<a name="l222"><span class="linenum"> 222</span></a>              } ?&gt;&lt;/p&gt;
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>          &lt;p&gt;This file contains &lt;?php echo <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it653" onMouseOver="hilite(653)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../../_variables/posts.html">$posts</a> ) ?&gt; <a class="function" onClick="logFunction('post')" href="../../../_functions/post.html" onMouseOver="funcPopup(event,'post')">post</a>(s) from &lt;?php echo <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a> ) ?&gt; <a class="function" onClick="logFunction('author')" href="../../../_functions/author.html" onMouseOver="funcPopup(event,'author')">author</a>(s) in &lt;?php echo <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a> ) ?&gt; category(ies).&lt;/p&gt;
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>          &lt;p&gt;We'll import into b2evolution's database &amp;quot;&lt;?php echo <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../_variables/db_config.html">$db_config</a>['name'] ?&gt;&amp;quot;.&lt;/p&gt;
<a name="l227"><span class="linenum"> 227</span></a>          &lt;/div&gt;
<a name="l228"><span class="linenum"> 228</span></a>          &lt;div class=&quot;panelinfo&quot;&gt;
<a name="l229"><span class="linenum"> 229</span></a>              &lt;p&gt;Before importing, you should check the URLs of any &amp;lt;img&amp;gt; tags you may have in &lt;?php echo <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a> ?&gt;. Will these URLs still be valid after the migration? If not, we advise you do a search and replace on &lt;?php echo <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a> ?&gt; before continuing.&lt;/p&gt;
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>              &lt;p&gt;Preferred location for inline images is the blog media folder.&lt;/p&gt;
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>              &lt;p&gt;You can also handle the images later, but it might be easier now :)&lt;/p&gt;
<a name="l234"><span class="linenum"> 234</span></a>          &lt;/div&gt;
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>          &lt;div class=&quot;panelinfo&quot;&gt;
<a name="l237"><span class="linenum"> 237</span></a>              &lt;p&gt;The importer is smart enough not to import duplicates, so you can run this procedure multiple times without worrying if &amp;#8212; for whatever reason &amp;#8212; it doesn't <a class="function" onClick="logFunction('finish')" href="../../../_functions/finish.html" onMouseOver="funcPopup(event,'finish')">finish</a> (script timeout for example).&lt;/p&gt;
<a name="l238"><span class="linenum"> 238</span></a>          &lt;/div&gt;
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>          &lt;div class=&quot;panelblock&quot;&gt;
<a name="l242"><span class="linenum"> 242</span></a>          &lt;form class=&quot;fform&quot; action=&quot;&lt;?php echo <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a> ?&gt;&quot; method=&quot;post&quot;&gt;
<a name="l243"><span class="linenum"> 243</span></a>              &lt;input type=&quot;hidden&quot; name=&quot;ctrl&quot; value=&quot;mtimport&quot; /&gt;
<a name="l244"><span class="linenum"> 244</span></a>              &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;import&quot; /&gt;
<a name="l245"><span class="linenum"> 245</span></a>          &lt;?php
<a name="l246"><span class="linenum"> 246</span></a>          if( !empty(<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>) )
<a name="l247"><span class="linenum"> 247</span></a>          {
<a name="l248"><span class="linenum"> 248</span></a>              ?&gt;&lt;input type=&quot;hidden&quot; name=&quot;exportedfile&quot; value=&quot;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>, 'formvalue' ) ?&gt;&quot; /&gt;
<a name="l249"><span class="linenum"> 249</span></a>              &lt;?php
<a name="l250"><span class="linenum"> 250</span></a>          }
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>          ?&gt;
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>          &lt;?php
<a name="l255"><span class="linenum"> 255</span></a>          switch( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> )
<a name="l256"><span class="linenum"> 256</span></a>          {
<a name="l257"><span class="linenum"> 257</span></a>              case 'easy':
<a name="l258"><span class="linenum"> 258</span></a>                  ?&gt;
<a name="l259"><span class="linenum"> 259</span></a>                  &lt;h2&gt;Easy Import:&lt;/h2&gt;
<a name="l260"><span class="linenum"> 260</span></a>                  &lt;ul&gt;
<a name="l261"><span class="linenum"> 261</span></a>                  &lt;li&gt;MT users with no matching b2evolution user login will be automatically created.&lt;/li&gt;
<a name="l262"><span class="linenum"> 262</span></a>                  &lt;li&gt;MT categories with no matching b2evolution category name will be automatically created (in the default blog selected below.)&lt;/li&gt;
<a name="l263"><span class="linenum"> 263</span></a>                  &lt;?php
<a name="l264"><span class="linenum"> 264</span></a>                  if( isset(<a class="var it1888" onMouseOver="hilite(1888)" onMouseOut="lolite()" onClick="logVariable('categories_countprim')" href="../../../_variables/categories_countprim.html">$categories_countprim</a>['[no category assigned]']) )
<a name="l265"><span class="linenum"> 265</span></a>                  { ?&gt;
<a name="l266"><span class="linenum"> 266</span></a>                  &lt;li&gt;Entries without <a class="function" onClick="logFunction('categories')" href="../../../_functions/categories.html" onMouseOver="funcPopup(event,'categories')">categories</a> (&lt;?php echo <a class="var it1888" onMouseOver="hilite(1888)" onMouseOut="lolite()" onClick="logVariable('categories_countprim')" href="../../../_variables/categories_countprim.html">$categories_countprim</a>['[no category assigned]'] ?&gt;) will be imported to category '[no category assigned]' in the default blog.&lt;/li&gt;
<a name="l267"><span class="linenum"> 267</span></a>                  &lt;?php
<a name="l268"><span class="linenum"> 268</span></a>                  }
<a name="l269"><span class="linenum"> 269</span></a>                  echo '&lt;/ul&gt;';
<a name="l270"><span class="linenum"> 270</span></a>                  break;
<a name="l271"><span class="linenum"> 271</span></a>              case 'normal':
<a name="l272"><span class="linenum"> 272</span></a>                  ?&gt;
<a name="l273"><span class="linenum"> 273</span></a>                  &lt;h2&gt;Normal Import:&lt;/h2&gt;
<a name="l274"><span class="linenum"> 274</span></a>                  &lt;ul&gt;
<a name="l275"><span class="linenum"> 275</span></a>                  &lt;li&gt;MT users can be mapped to existing b2evo users, mapped to new users (provide login) or ignored.&lt;/li&gt;
<a name="l276"><span class="linenum"> 276</span></a>                  &lt;li&gt;Categories can be mapped to existing b2evo categories, mapped to new <a class="function" onClick="logFunction('categories')" href="../../../_functions/categories.html" onMouseOver="funcPopup(event,'categories')">categories</a> (provide location + name) or ignored.&lt;/li&gt;
<a name="l277"><span class="linenum"> 277</span></a>                  &lt;/ul&gt;
<a name="l278"><span class="linenum"> 278</span></a>                  &lt;?php
<a name="l279"><span class="linenum"> 279</span></a>                  break;
<a name="l280"><span class="linenum"> 280</span></a>              case 'expert':
<a name="l281"><span class="linenum"> 281</span></a>                  ?&gt;
<a name="l282"><span class="linenum"> 282</span></a>                  &lt;h2&gt;Expert Import:&lt;/h2&gt;
<a name="l283"><span class="linenum"> 283</span></a>                  &lt;p&gt;This gives you as much power as we can provide. It's like normal mode, but lets you map categories to a whole set of b2evo <a class="function" onClick="logFunction('categories')" href="../../../_functions/categories.html" onMouseOver="funcPopup(event,'categories')">categories</a> (one main category and as many extra categories as you like). You can run the importer multiple times to use different sets of b2evo categories for different sets of MT categories.&lt;/p&gt;
<a name="l284"><span class="linenum"> 284</span></a>                  &lt;?php
<a name="l285"><span class="linenum"> 285</span></a>                  break;
<a name="l286"><span class="linenum"> 286</span></a>  
<a name="l287"><span class="linenum"> 287</span></a>          }
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>          ?&gt;
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>          &lt;?php if( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> != 'expert' ) { ?&gt;
<a name="l292"><span class="linenum"> 292</span></a>          &lt;fieldset&gt;
<a name="l293"><span class="linenum"> 293</span></a>              &lt;legend&gt;Default blog&lt;/legend&gt;
<a name="l294"><span class="linenum"> 294</span></a>              &lt;fieldset&gt;
<a name="l295"><span class="linenum"> 295</span></a>                  &lt;div class=&quot;label&quot;&gt;&lt;?php echo ( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> == 'easy' ) ? 'Create categories in blog' : 'Use as default blog for categories' ?&gt;:&lt;/div&gt;
<a name="l296"><span class="linenum"> 296</span></a>                  &lt;div class=&quot;input&quot;&gt;
<a name="l297"><span class="linenum"> 297</span></a>                      &lt;select name=&quot;default_blog&quot;&gt;
<a name="l298"><span class="linenum"> 298</span></a>                      &lt;?php
<a name="l299"><span class="linenum"> 299</span></a>                      <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l300"><span class="linenum"> 300</span></a>                      echo <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a class="function" onClick="logFunction('get_option_list')" href="../../../_functions/get_option_list.html" onMouseOver="funcPopup(event,'get_option_list')">get_option_list</a>( 2 );  <span class="comment">// use first non-all blog as default</span>
<a name="l301"><span class="linenum"> 301</span></a>                      ?&gt;
<a name="l302"><span class="linenum"> 302</span></a>                      &lt;/select&gt;
<a name="l303"><span class="linenum"> 303</span></a>                  &lt;/div&gt;
<a name="l304"><span class="linenum"> 304</span></a>              &lt;/fieldset&gt;
<a name="l305"><span class="linenum"> 305</span></a>          &lt;/fieldset&gt;
<a name="l306"><span class="linenum"> 306</span></a>          &lt;?php } ?&gt;
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>          &lt;?php if( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> != 'easy' )    { ?&gt;
<a name="l309"><span class="linenum"> 309</span></a>          &lt;fieldset&gt;&lt;legend&gt;Author mapping&lt;/legend&gt;
<a name="l310"><span class="linenum"> 310</span></a>              &lt;?php
<a name="l311"><span class="linenum"> 311</span></a>                  <a class="var it1890" onMouseOver="hilite(1890)" onMouseOut="lolite()" onClick="logVariable('evousers')" href="../../../_variables/evousers.html">$evousers</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>('SELECT * FROM T_users ORDER BY user_ID');
<a name="l312"><span class="linenum"> 312</span></a>                  foreach (<a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a> as <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a>)
<a name="l313"><span class="linenum"> 313</span></a>                  {
<a name="l314"><span class="linenum"> 314</span></a>                      ++<a class="var it1889" onMouseOver="hilite(1889)" onMouseOut="lolite()" onClick="logVariable('i_user')" href="../../../_variables/i_user.html">$i_user</a>;
<a name="l315"><span class="linenum"> 315</span></a>                      ?&gt;
<a name="l316"><span class="linenum"> 316</span></a>                      &lt;fieldset&gt;
<a name="l317"><span class="linenum"> 317</span></a>                      &lt;div class=&quot;label&quot;&gt;&lt;label&gt;&lt;?php echo <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a> ?&gt;&lt;/label&gt;&lt;/div&gt;
<a name="l318"><span class="linenum"> 318</span></a>                      &lt;div class=&quot;input&quot;&gt;
<a name="l319"><span class="linenum"> 319</span></a>                          &lt;select name=&quot;user_select[]&quot;&gt;
<a name="l320"><span class="linenum"> 320</span></a>                              &lt;option value=&quot;#CREATENEW#&quot; selected=&quot;selected&quot;&gt; Create new: &lt;/option&gt;
<a name="l321"><span class="linenum"> 321</span></a>                              &lt;option value=&quot;#IGNORE#&quot;&gt; Ignore! &lt;/option&gt;
<a name="l322"><span class="linenum"> 322</span></a>                              &lt;?php
<a name="l323"><span class="linenum"> 323</span></a>                              foreach( <a class="var it1890" onMouseOver="hilite(1890)" onMouseOut="lolite()" onClick="logVariable('evousers')" href="../../../_variables/evousers.html">$evousers</a> as <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a> )
<a name="l324"><span class="linenum"> 324</span></a>                              {
<a name="l325"><span class="linenum"> 325</span></a>                                  ?&gt;&lt;option value=&quot;&lt;?php echo <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('user_ID')" class="var it9310" onMouseOver="hilite(9310)" onMouseOut="lolite()" href="../../../_variables/user_ID.html">user_ID</a> ?&gt;&quot;&lt;?php if( <a class="function" onClick="logFunction('evo_strtolower')" href="../../../_functions/evo_strtolower.html" onMouseOver="funcPopup(event,'evo_strtolower')">evo_strtolower</a>(<a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a>) == <a class="function" onClick="logFunction('evo_strtolower')" href="../../../_functions/evo_strtolower.html" onMouseOver="funcPopup(event,'evo_strtolower')">evo_strtolower</a>( <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('user_login')" class="var it9310" onMouseOver="hilite(9310)" onMouseOut="lolite()" href="../../../_variables/user_login.html">user_login</a> ) ) echo ' selected=&quot;selected&quot;';
<a name="l326"><span class="linenum"> 326</span></a>                                  echo '&gt;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="function" onClick="logFunction('evo_strtolower')" href="../../../_functions/evo_strtolower.html" onMouseOver="funcPopup(event,'evo_strtolower')">evo_strtolower</a>(<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('user_login')" class="var it9310" onMouseOver="hilite(9310)" onMouseOut="lolite()" href="../../../_variables/user_login.html">user_login</a>), 'formvalue').'&lt;/option&gt;';
<a name="l327"><span class="linenum"> 327</span></a>                              }
<a name="l328"><span class="linenum"> 328</span></a>                          ?&gt;&lt;/select&gt;
<a name="l329"><span class="linenum"> 329</span></a>                          &lt;input type=&quot;text&quot; value=&quot;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a>, 'formvalue') ?&gt;&quot; name=&quot;user_name[]&quot; maxlength=&quot;30&quot; class=&quot;input&quot; /&gt;
<a name="l330"><span class="linenum"> 330</span></a>                          &lt;span class=&quot;notes&quot;&gt;(login for <span class="keyword">new </span><a class="class" onClick="logClass('user')" href="../../../_classes/user.html" onMouseOver="classPopup(event,'user')">user</a>)&lt;/span&gt;
<a name="l331"><span class="linenum"> 331</span></a>                      &lt;/div&gt;
<a name="l332"><span class="linenum"> 332</span></a>                      &lt;/fieldset&gt;
<a name="l333"><span class="linenum"> 333</span></a>                      &lt;?php
<a name="l334"><span class="linenum"> 334</span></a>                  }
<a name="l335"><span class="linenum"> 335</span></a>              ?&gt;
<a name="l336"><span class="linenum"> 336</span></a>          &lt;/fieldset&gt;
<a name="l337"><span class="linenum"> 337</span></a>          &lt;?php } ?&gt;
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>          &lt;fieldset&gt;&lt;legend&gt;<span class="keyword">New </span><a class="class" onClick="logClass('user')" href="../../../_classes/user.html" onMouseOver="classPopup(event,'user')">user</a> defaults&lt;/legend&gt;
<a name="l341"><span class="linenum"> 341</span></a>              &lt;?php
<a name="l342"><span class="linenum"> 342</span></a>              <a class="function" onClick="logFunction('form_text')" href="../../../_functions/form_text.html" onMouseOver="funcPopup(event,'form_text')">form_text</a>( 'default_password', <a class="var it1885" onMouseOver="hilite(1885)" onMouseOut="lolite()" onClick="logVariable('default_password')" href="../../../_variables/default_password.html">$default_password</a>, 20, 'Password for new users', 'this will be the password for users created during migration (default is &quot;changeme&quot;)', 30 , '', 'password' );
<a name="l343"><span class="linenum"> 343</span></a>              <a class="function" onClick="logFunction('form_text')" href="../../../_functions/form_text.html" onMouseOver="funcPopup(event,'form_text')">form_text</a>( 'default_password2', <a class="var it1885" onMouseOver="hilite(1885)" onMouseOut="lolite()" onClick="logVariable('default_password')" href="../../../_variables/default_password.html">$default_password</a>, 20, 'Confirm password', 'please confirm the password', 30 , '', 'password' );
<a name="l344"><span class="linenum"> 344</span></a>              <a class="var it203" onMouseOver="hilite(203)" onMouseOut="lolite()" onClick="logVariable('GroupCache')" href="../../../_variables/GroupCache.html">$GroupCache</a> = &amp; get_GroupCache();
<a name="l345"><span class="linenum"> 345</span></a>              <a class="function" onClick="logFunction('form_select_object')" href="../../../_functions/form_select_object.html" onMouseOver="funcPopup(event,'form_select_object')">form_select_object</a>( 'default_usergroup', <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('newusers_grp_ID'), <a class="var it203" onMouseOver="hilite(203)" onMouseOut="lolite()" onClick="logVariable('GroupCache')" href="../../../_variables/GroupCache.html">$GroupCache</a>, <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User group') );
<a name="l346"><span class="linenum"> 346</span></a>              <a class="var it1893" onMouseOver="hilite(1893)" onMouseOut="lolite()" onClick="logVariable('field_note')" href="../../../_variables/field_note.html">$field_note</a> = '[0 - 10]';
<a name="l347"><span class="linenum"> 347</span></a>              <a class="function" onClick="logFunction('form_text')" href="../../../_functions/form_text.html" onMouseOver="funcPopup(event,'form_text')">form_text</a>( 'default_userlevel', <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('newusers_level'), 2, <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Level'), <a class="var it1893" onMouseOver="hilite(1893)" onMouseOut="lolite()" onClick="logVariable('field_note')" href="../../../_variables/field_note.html">$field_note</a>, 2 );
<a name="l348"><span class="linenum"> 348</span></a>              ?&gt;
<a name="l349"><span class="linenum"> 349</span></a>          &lt;/fieldset&gt;
<a name="l350"><span class="linenum"> 350</span></a>  
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>          &lt;?php if( <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> != 'easy' ){ ?&gt;
<a name="l353"><span class="linenum"> 353</span></a>          &lt;fieldset&gt;&lt;legend&gt;Category mapping&lt;/legend&gt;
<a name="l354"><span class="linenum"> 354</span></a>          &lt;?php
<a name="l355"><span class="linenum"> 355</span></a>          <a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a> = 0;
<a name="l356"><span class="linenum"> 356</span></a>          foreach( <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a> as <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> )
<a name="l357"><span class="linenum"> 357</span></a>          {
<a name="l358"><span class="linenum"> 358</span></a>              ?&gt;
<a name="l359"><span class="linenum"> 359</span></a>              &lt;fieldset&gt;
<a name="l360"><span class="linenum"> 360</span></a>              &lt;div class=&quot;label&quot;&gt;
<a name="l361"><span class="linenum"> 361</span></a>                  &lt;label&gt;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>, 'htmlbody') ?&gt;&lt;/label&gt;
<a name="l362"><span class="linenum"> 362</span></a>                  &lt;br /&gt;&lt;span class=&quot;notes&quot; style=&quot;font-weight:normal&quot;&gt;used &lt;?php echo @(int)<a class="var it1888" onMouseOver="hilite(1888)" onMouseOut="lolite()" onClick="logVariable('categories_countprim')" href="../../../_variables/categories_countprim.html">$categories_countprim</a>[<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>] ?&gt; times as primary category&lt;/span&gt;
<a name="l363"><span class="linenum"> 363</span></a>              &lt;/div&gt;
<a name="l364"><span class="linenum"> 364</span></a>              &lt;div class=&quot;input&quot;&gt;&lt;select name=&quot;catmap_select[]&quot;&gt;
<a name="l365"><span class="linenum"> 365</span></a>                  &lt;?php
<a name="l366"><span class="linenum"> 366</span></a>                  if( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> == 'expert' )
<a name="l367"><span class="linenum"> 367</span></a>                      echo '&lt;option value=&quot;#DEFAULTSET#&quot;&gt;Map to default categories <a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a> (see below)&lt;/option&gt;';
<a name="l368"><span class="linenum"> 368</span></a>                      else echo '&lt;option value=&quot;#DEFAULTBLOG#&quot;&gt;Create in default blog:&lt;/option&gt;'; ?&gt;
<a name="l369"><span class="linenum"> 369</span></a>                  &lt;?php <a class="function" onClick="logFunction('cats_optionslist')" href="../../../_functions/cats_optionslist.html" onMouseOver="funcPopup(event,'cats_optionslist')">cats_optionslist</a>( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> ) ?&gt;
<a name="l370"><span class="linenum"> 370</span></a>                  &lt;option value=&quot;#IGNORE#&quot;&gt;Ignore entries with this primary cat&lt;/option&gt;
<a name="l371"><span class="linenum"> 371</span></a>              &lt;/select&gt;
<a name="l372"><span class="linenum"> 372</span></a>              &lt;input type=&quot;text&quot; name=&quot;catmap_name[]&quot; value=&quot;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>, 'formvalue' ) ?&gt;&quot; size=&quot;30&quot; /&gt;
<a name="l373"><span class="linenum"> 373</span></a>              &lt;/div&gt;
<a name="l374"><span class="linenum"> 374</span></a>              &lt;/fieldset&gt;
<a name="l375"><span class="linenum"> 375</span></a>          &lt;?php
<a name="l376"><span class="linenum"> 376</span></a>              <a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>++;
<a name="l377"><span class="linenum"> 377</span></a>          } ?&gt;
<a name="l378"><span class="linenum"> 378</span></a>          &lt;?php
<a name="l379"><span class="linenum"> 379</span></a>          if( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> == 'expert' )
<a name="l380"><span class="linenum"> 380</span></a>          {
<a name="l381"><span class="linenum"> 381</span></a>              <a class="function" onClick="logFunction('fieldset_cats')" href="../../../_functions/fieldset_cats.html" onMouseOver="funcPopup(event,'fieldset_cats')">fieldset_cats</a>();
<a name="l382"><span class="linenum"> 382</span></a>          }
<a name="l383"><span class="linenum"> 383</span></a>          ?&gt;
<a name="l384"><span class="linenum"> 384</span></a>          &lt;/fieldset&gt;
<a name="l385"><span class="linenum"> 385</span></a>          &lt;?php } ?&gt;
<a name="l386"><span class="linenum"> 386</span></a>  
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>          &lt;fieldset&gt;&lt;legend&gt;Post/Entry defaults&lt;/legend&gt;
<a name="l389"><span class="linenum"> 389</span></a>              &lt;?php
<a name="l390"><span class="linenum"> 390</span></a>              <a class="function" onClick="logFunction('form_checkbox')" href="../../../_functions/form_checkbox.html" onMouseOver="funcPopup(event,'form_checkbox')">form_checkbox</a>( 'default_convert_breaks', <a class="var it1894" onMouseOver="hilite(1894)" onMouseOut="lolite()" onClick="logVariable('default_convert_breaks')" href="../../../_variables/default_convert_breaks.html">$default_convert_breaks</a>, 'Convert-Breaks default', 'will be used for posts with empty CONVERT BREAKS or &quot;__default__&quot;' );
<a name="l391"><span class="linenum"> 391</span></a>              <a class="function" onClick="logFunction('form_select')" href="../../../_functions/form_select.html" onMouseOver="funcPopup(event,'form_select')">form_select</a>( 'post_locale', <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('default_locale'), 'locale_options', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Default locale'), 'Locale for posts.' );
<a name="l392"><span class="linenum"> 392</span></a>              <a class="function" onClick="logFunction('form_checkbox')" href="../../../_functions/form_checkbox.html" onMouseOver="funcPopup(event,'form_checkbox')">form_checkbox</a>( 'convert_html_tags', <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('convert_html_tags')" href="../../../_variables/convert_html_tags.html">$convert_html_tags</a>, 'Convert ugly HTML', 'this will lowercase all html tags and add a XHTML compliant closing tag to &amp;lt;br&amp;gt;, &amp;lt;img&amp;gt;, &amp;lt;hr&amp;gt; (you\'ll get notes)' );
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>              if( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> != 'easy' )
<a name="l395"><span class="linenum"> 395</span></a>              { // we'll use 'default' when importing
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">                // Autoselect a blog from where to get renderer settings</span>
<a name="l397"><span class="linenum"> 397</span></a>                  <a class="var it1896" onMouseOver="hilite(1896)" onMouseOut="lolite()" onClick="logVariable('autoselect_blog')" href="../../../_variables/autoselect_blog.html">$autoselect_blog</a> = <a class="function" onClick="logFunction('autoselect_blog')" href="../../../_functions/autoselect_blog.html" onMouseOver="funcPopup(event,'autoselect_blog')">autoselect_blog</a>( 'blog_post_statuses', 'edit' );
<a name="l398"><span class="linenum"> 398</span></a>                  <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l399"><span class="linenum"> 399</span></a>                  <a class="var it1897" onMouseOver="hilite(1897)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it1896" onMouseOver="hilite(1896)" onMouseOut="lolite()" onClick="logVariable('autoselect_blog')" href="../../../_variables/autoselect_blog.html">$autoselect_blog</a> );
<a name="l400"><span class="linenum"> 400</span></a>                  ?&gt;
<a name="l401"><span class="linenum"> 401</span></a>                  &lt;div class=&quot;label&quot;&gt;Renderers:&lt;/div&gt;
<a name="l402"><span class="linenum"> 402</span></a>                  &lt;div class=&quot;input&quot;&gt;&lt;?php <a class="function" onClick="logFunction('renderer_list')" href="../../../_functions/renderer_list.html" onMouseOver="funcPopup(event,'renderer_list')">renderer_list</a>( <a class="var it1897" onMouseOver="hilite(1897)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a> ) ?&gt;&lt;/div&gt;
<a name="l403"><span class="linenum"> 403</span></a>              &lt;?php } ?&gt;
<a name="l404"><span class="linenum"> 404</span></a>          &lt;/fieldset&gt;
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>          &lt;?php <span class="comment">/*&lt;fieldset style=&quot;padding-left:1ex&quot;&gt;&lt;legend&gt;&amp;lt;img&amp;gt;-URL mapping&lt;/legend&gt;</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">            &lt;a id=&quot;imgurls&quot;&gt;&lt;p class=&quot;notes&quot;&gt;This lets you map found image urls (their basename) to another basename.</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment"></span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">            // TODO: refer to Blog media folder/url and ensure that it's enabled..</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment"></span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">            You probably want to put the images that you had on your MT installation into b2evo's media folder.&lt;br /&gt;</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">            So you would use &lt;strong&gt;&lt;?php echo &quot;TODO&quot; ?&gt;&lt;/strong&gt; for replacement.&lt;br /&gt;</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment"></span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">            You can leave this empty, of course and nothing will be replaced, but then you'll have probably broken images.&lt;/p&gt;&lt;/a&gt;</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">            &lt;?php</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">            preg_match_all( '#&lt;img .*?src=&quot;([^&quot;]*)/.*?&quot;#is', $importdata, $matches );</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment"></span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">            foreach( $matches[1] as $imgurl )</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">            {</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">                if( !isset($imgurlscount[ $imgurl ]) )</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">                    $imgurlscount[ $imgurl ] = 1;</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">                else $imgurlscount[ $imgurl ]++;</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">            }</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment"></span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">            asort( $imgurlscount );</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">            $imgurlscount = array_reverse( $imgurlscount );</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment"></span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">            param( 'singleimgurls', 'integer', 0 );</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">            $i = 0;</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">            foreach( $imgurlscount as $imgurl =&gt; $counter ) if( $counter &gt; 1 || $singleimgurls )</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">            {</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">                ?&gt;&lt;input type=&quot;hidden&quot; name=&quot;url_search[&lt;?php echo $i ?&gt;]&quot; value=&quot;&lt;?php echo format_to_output( $imgurl, 'formvalue' ) ?&gt;&quot; /&gt;</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">                &lt;strong&gt;&lt;?php echo $imgurl ?&gt;&lt;/strong&gt;:&lt;br /&gt;</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">                &lt;div class=&quot;input&quot;&gt;&lt;input style=&quot;clear:left&quot; type=&quot;text&quot; name=&quot;url_replace[]&quot; size=&quot;50&quot; /&gt;&lt;/div&gt;</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">                &lt;span class=&quot;notes&quot; style=&quot;font-weight:normal&quot;&gt; (used &lt;?php echo $counter ?&gt; times)&lt;/span&gt;</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">                &lt;br /&gt;</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">                &lt;?php</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">                $i++;</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">            }</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment"></span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">            echo '&lt;p class=&quot;center&quot;&gt;&lt;a id=&quot;imgurls&quot; href=&quot;&lt;?php echo $dispatcher ?&gt;?ctrl=mtimport&amp;amp;tab=import&amp;amp;singleimgurls='.( $singleimgurls ? '0' : '1' );</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">            if( !empty($exportedfile) ) echo '&amp;amp;exportedfile='.$exportedfile;</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">            echo '&quot;&gt;'.( $singleimgurls ? 'hide img urls only used once' : 'show also img urls only used once').'&lt;/a&gt;&lt;/p&gt;';</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment"></span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">        ?&gt;</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">        &lt;/fieldset&gt;</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">        */</span> ?&gt;
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>          &lt;fieldset&gt;&lt;legend&gt;other settings&lt;/legend&gt;
<a name="l450"><span class="linenum"> 450</span></a>              &lt;?php
<a name="l451"><span class="linenum"> 451</span></a>              <a class="function" onClick="logFunction('form_checkbox')" href="../../../_functions/form_checkbox.html" onMouseOver="funcPopup(event,'form_checkbox')">form_checkbox</a>( 'simulate', <a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a>, 'Simulate: do not import really', 'Use this to test importing, without really changing the target database.' );
<a name="l452"><span class="linenum"> 452</span></a>          ?&gt;
<a name="l453"><span class="linenum"> 453</span></a>          &lt;/fieldset&gt;
<a name="l454"><span class="linenum"> 454</span></a>          &lt;p&gt;Please note:&lt;/p&gt;
<a name="l455"><span class="linenum"> 455</span></a>          &lt;ul&gt;
<a name="l456"><span class="linenum"> 456</span></a>              &lt;li&gt;b2evolution does not support excerpts yet.
<a name="l457"><span class="linenum"> 457</span></a>              So, we will import them in front of the body with &quot;[teaserbreak]&quot; tags,
<a name="l458"><span class="linenum"> 458</span></a>              but only if there is no extended body for the post. In that case we'll use the extended body appended with the [teaserbreak] tag to the body - excerpts are lost then (but you'll get a note about it).
<a name="l459"><span class="linenum"> 459</span></a>              &lt;/li&gt;
<a name="l460"><span class="linenum"> 460</span></a>          &lt;/ul&gt;
<a name="l461"><span class="linenum"> 461</span></a>  
<a name="l462"><span class="linenum"> 462</span></a>          &lt;fieldset class=&quot;submit&quot;&gt;
<a name="l463"><span class="linenum"> 463</span></a>              &lt;div class=&quot;input&quot;&gt;
<a name="l464"><span class="linenum"> 464</span></a>                  &lt;input type=&quot;hidden&quot; name=&quot;import_mode&quot; value=&quot;&lt;?php echo <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> ?&gt;&quot; /&gt;
<a name="l465"><span class="linenum"> 465</span></a>                  &lt;input class=&quot;search&quot; type=&quot;submit&quot; value=&quot; Import! &quot; /&gt;
<a name="l466"><span class="linenum"> 466</span></a>              &lt;/div&gt;
<a name="l467"><span class="linenum"> 467</span></a>          &lt;/fieldset&gt;
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>          &lt;/div&gt;
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>          &lt;/form&gt;
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>          &lt;?php
<a name="l474"><span class="linenum"> 474</span></a>      }
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>      <span class="comment">/*************</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">        IMPORT</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">    *************/</span>
<a name="l480"><span class="linenum"> 480</span></a>      elseif( <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> == 'import' )
<a name="l481"><span class="linenum"> 481</span></a>      {
<a name="l482"><span class="linenum"> 482</span></a>          <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>('import_main');
<a name="l483"><span class="linenum"> 483</span></a>          ?&gt;
<a name="l484"><span class="linenum"> 484</span></a>          &lt;div class=&quot;panelinfo&quot;&gt;
<a name="l485"><span class="linenum"> 485</span></a>          &lt;h4&gt;Importing from [&lt;?php echo <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a> ?&gt;]..&lt;?php if( <a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> ) echo ' (simulating)' ?&gt;&lt;/h4&gt;
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>          &lt;?php
<a name="l488"><span class="linenum"> 488</span></a>          <a class="function" onClick="logFunction('set_max_execution_time')" href="../../../_functions/set_max_execution_time.html" onMouseOver="funcPopup(event,'set_max_execution_time')">set_max_execution_time</a>(900);
<a name="l489"><span class="linenum"> 489</span></a>  
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">        // counters</span>
<a name="l491"><span class="linenum"> 491</span></a>          <a class="var it1904" onMouseOver="hilite(1904)" onMouseOut="lolite()" onClick="logVariable('count_postscreated')" href="../../../_variables/count_postscreated.html">$count_postscreated</a> = 0;
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it1905" onMouseOver="hilite(1905)" onMouseOut="lolite()" onClick="logVariable('count_userscreated')" href="../../../_variables/count_userscreated.html">$count_userscreated</a> = 0;
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it1906" onMouseOver="hilite(1906)" onMouseOut="lolite()" onClick="logVariable('count_commentscreated')" href="../../../_variables/count_commentscreated.html">$count_commentscreated</a> = 0;
<a name="l494"><span class="linenum"> 494</span></a>          <a class="var it1907" onMouseOver="hilite(1907)" onMouseOut="lolite()" onClick="logVariable('count_trackbackscreated')" href="../../../_variables/count_trackbackscreated.html">$count_trackbackscreated</a> = 0;
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">        // get POSTed data</span>
<a name="l497"><span class="linenum"> 497</span></a>          <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'import_mode', 'string', true );
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>          if( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> != 'expert' )
<a name="l500"><span class="linenum"> 500</span></a>          {
<a name="l501"><span class="linenum"> 501</span></a>              <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'default_blog', 'integer', true );
<a name="l502"><span class="linenum"> 502</span></a>          }
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>          <a class="function" onClick="logFunction('import_data_extract_authors_cats')" href="../../../_functions/import_data_extract_authors_cats.html" onMouseOver="funcPopup(event,'import_data_extract_authors_cats')">import_data_extract_authors_cats</a>();
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>          {{{ // map categories
<a name="l507"><span class="linenum"> 507</span></a>          <span class="comment">/**</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">         * associative array that maps MT cats to b2evo.</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">         * key is the MT category name.</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">         * values:</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">         * holds type and value:</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">         *  types:</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">         *   - 'blogid': blog_id, new name</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">         *   - 'catid': cat_id</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">         *   - 'defaultset': -</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">         *   - 'ignore': -</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">         */</span>
<a name="l518"><span class="linenum"> 518</span></a>          <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a> = array();
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>          <a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a> = -1;
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">        // category mapping</span>
<a name="l522"><span class="linenum"> 522</span></a>          if( !isset(<a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['catmap_select']) )
<a name="l523"><span class="linenum"> 523</span></a>          { // no category mapping
<a name="l524"><span class="linenum"> 524</span></a>              foreach( <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a> as <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> )
<a name="l525"><span class="linenum"> 525</span></a>              {
<a name="l526"><span class="linenum"> 526</span></a>                  <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> ] = array('blogid', <a class="var it1909" onMouseOver="hilite(1909)" onMouseOut="lolite()" onClick="logVariable('default_blog')" href="../../../_variables/default_blog.html">$default_blog</a>, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> );
<a name="l527"><span class="linenum"> 527</span></a>              }
<a name="l528"><span class="linenum"> 528</span></a>          }
<a name="l529"><span class="linenum"> 529</span></a>          else foreach( <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['catmap_select'] as <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> )
<a name="l530"><span class="linenum"> 530</span></a>          {
<a name="l531"><span class="linenum"> 531</span></a>              <a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>++;
<a name="l532"><span class="linenum"> 532</span></a>              if( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> == '#IGNORE#' )
<a name="l533"><span class="linenum"> 533</span></a>              {
<a name="l534"><span class="linenum"> 534</span></a>                  <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>[<a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>] ] = array( 'ignore' );
<a name="l535"><span class="linenum"> 535</span></a>              }
<a name="l536"><span class="linenum"> 536</span></a>              elseif( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> == '#DEFAULTSET#' )
<a name="l537"><span class="linenum"> 537</span></a>              {
<a name="l538"><span class="linenum"> 538</span></a>                  if( !isset( <a class="var it1910" onMouseOver="hilite(1910)" onMouseOut="lolite()" onClick="logVariable('default_post_category')" href="../../../_variables/default_post_category.html">$default_post_category</a> ) )
<a name="l539"><span class="linenum"> 539</span></a>                  { // get the default category set
<a name="l540"><span class="linenum"> 540</span></a>                      if( isset(<a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['post_category']) )
<a name="l541"><span class="linenum"> 541</span></a>                      {
<a name="l542"><span class="linenum"> 542</span></a>                          <a class="var it1910" onMouseOver="hilite(1910)" onMouseOut="lolite()" onClick="logVariable('default_post_category')" href="../../../_variables/default_post_category.html">$default_post_category</a> = (int)<a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['post_category'];
<a name="l543"><span class="linenum"> 543</span></a>                      }
<a name="l544"><span class="linenum"> 544</span></a>                      else
<a name="l545"><span class="linenum"> 545</span></a>                      {
<a name="l546"><span class="linenum"> 546</span></a>                          <a class="function" onClick="logFunction('dieerror')" href="../../../_functions/dieerror.html" onMouseOver="funcPopup(event,'dieerror')">dieerror</a>( 'You have chosen to map at least one category to the default category set, but you have not selected a main category for this set!&lt;br /&gt;Please go back and correct that..' );
<a name="l547"><span class="linenum"> 547</span></a>                      }
<a name="l548"><span class="linenum"> 548</span></a>                      <a class="var it1911" onMouseOver="hilite(1911)" onMouseOut="lolite()" onClick="logVariable('default_post_extracats')" href="../../../_variables/default_post_extracats.html">$default_post_extracats</a> = array();
<a name="l549"><span class="linenum"> 549</span></a>                      if( isset( <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['post_extracats'] ) )
<a name="l550"><span class="linenum"> 550</span></a>                      { // get extra cats
<a name="l551"><span class="linenum"> 551</span></a>                          foreach( <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['post_extracats'] as <a class="var it1912" onMouseOver="hilite(1912)" onMouseOut="lolite()" onClick="logVariable('tcat')" href="../../../_variables/tcat.html">$tcat</a> )
<a name="l552"><span class="linenum"> 552</span></a>                          {
<a name="l553"><span class="linenum"> 553</span></a>                              <a class="var it1911" onMouseOver="hilite(1911)" onMouseOut="lolite()" onClick="logVariable('default_post_extracats')" href="../../../_variables/default_post_extracats.html">$default_post_extracats</a>[] = (int)<a class="var it1912" onMouseOver="hilite(1912)" onMouseOut="lolite()" onClick="logVariable('tcat')" href="../../../_variables/tcat.html">$tcat</a>;
<a name="l554"><span class="linenum"> 554</span></a>                          }
<a name="l555"><span class="linenum"> 555</span></a>                      }
<a name="l556"><span class="linenum"> 556</span></a>                  }
<a name="l557"><span class="linenum"> 557</span></a>                  <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>[<a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>] ] = array( 'defaultset' );
<a name="l558"><span class="linenum"> 558</span></a>              }
<a name="l559"><span class="linenum"> 559</span></a>              elseif( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/^\d+$/', <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a> ) )
<a name="l560"><span class="linenum"> 560</span></a>              { // we map to a b2evo cat
<a name="l561"><span class="linenum"> 561</span></a>                  <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>[<a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>] ] = array('catid', (int)<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>);
<a name="l562"><span class="linenum"> 562</span></a>              }
<a name="l563"><span class="linenum"> 563</span></a>              elseif( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> == '#DEFAULTBLOG#'
<a name="l564"><span class="linenum"> 564</span></a>                              || <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/^#NEW#(\d+)$/', <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a> ) )
<a name="l565"><span class="linenum"> 565</span></a>              { // we want a new category
<a name="l566"><span class="linenum"> 566</span></a>                  <a class="var it1913" onMouseOver="hilite(1913)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../_variables/blog_id.html">$blog_id</a> = (<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> == '#DEFAULTBLOG#') ? <a class="var it1909" onMouseOver="hilite(1909)" onMouseOut="lolite()" onClick="logVariable('default_blog')" href="../../../_variables/default_blog.html">$default_blog</a> : <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a>[1];
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">                // remember the name to create it when posts get inserted</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">                // fp&gt;dh: please use param() instead of $_POST[] (everywhere)</span>
<a name="l569"><span class="linenum"> 569</span></a>                  <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>[<a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>] ] = array( 'blogid', <a class="var it1913" onMouseOver="hilite(1913)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../_variables/blog_id.html">$blog_id</a>, <a class="function" onClick="logFunction('remove_magic_quotes')" href="../../../_functions/remove_magic_quotes.html" onMouseOver="funcPopup(event,'remove_magic_quotes')">remove_magic_quotes</a>( <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['catmap_name'][<a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>]) );
<a name="l570"><span class="linenum"> 570</span></a>              }
<a name="l571"><span class="linenum"> 571</span></a>              else
<a name="l572"><span class="linenum"> 572</span></a>              {
<a name="l573"><span class="linenum"> 573</span></a>                  <a class="function" onClick="logFunction('dieerror')" href="../../../_functions/dieerror.html" onMouseOver="funcPopup(event,'dieerror')">dieerror</a>('This should never happen @catmapping. Please report it! (cat='.<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>.' / ');
<a name="l574"><span class="linenum"> 574</span></a>              }
<a name="l575"><span class="linenum"> 575</span></a>  
<a name="l576"><span class="linenum"> 576</span></a>          }
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>          foreach( <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a> as <a class="var it1914" onMouseOver="hilite(1914)" onMouseOut="lolite()" onClick="logVariable('mtcat')" href="../../../_variables/mtcat.html">$mtcat</a> =&gt; <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../_variables/values.html">$values</a> ) if( <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../_variables/values.html">$values</a>[0] == 'blogid' )
<a name="l579"><span class="linenum"> 579</span></a>          {
<a name="l580"><span class="linenum"> 580</span></a>              echo 'Category &lt;span style=&quot;color:#09c&quot;&gt;'.<a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../_variables/values.html">$values</a>[2].'&lt;/span&gt; (for blog #'.<a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../_variables/values.html">$values</a>[1].') ';
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">            // check if it already exists</span>
<a name="l582"><span class="linenum"> 582</span></a>              <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>(&quot;SELECT cat_ID FROM T_categories
<a name="l583"><span class="linenum"> 583</span></a>                                                              WHERE cat_blog_ID = {<a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../_variables/values.html">$values</a>[1]}
<a name="l584"><span class="linenum"> 584</span></a>                                                              AND cat_name = &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../_variables/values.html">$values</a>[2] ));
<a name="l585"><span class="linenum"> 585</span></a>              if( !<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a> )
<a name="l586"><span class="linenum"> 586</span></a>              {
<a name="l587"><span class="linenum"> 587</span></a>                  echo 'will be created with first post.&lt;br /&gt;';
<a name="l588"><span class="linenum"> 588</span></a>              }
<a name="l589"><span class="linenum"> 589</span></a>              else
<a name="l590"><span class="linenum"> 590</span></a>              {
<a name="l591"><span class="linenum"> 591</span></a>                  echo 'already exists.&lt;br /&gt;';
<a name="l592"><span class="linenum"> 592</span></a>                  <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it1914" onMouseOver="hilite(1914)" onMouseOut="lolite()" onClick="logVariable('mtcat')" href="../../../_variables/mtcat.html">$mtcat</a> ] = array('catid', (int)<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>); <span class="comment">// map to existing category</span>
<a name="l593"><span class="linenum"> 593</span></a>              }
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>          }
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>          <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>, 'catsmapped' );
<a name="l598"><span class="linenum"> 598</span></a>          }}}
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">        // get renderers</span>
<a name="l603"><span class="linenum"> 603</span></a>          if( <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> != 'easy' )
<a name="l604"><span class="linenum"> 604</span></a>          {
<a name="l605"><span class="linenum"> 605</span></a>              <a class="var it1915" onMouseOver="hilite(1915)" onMouseOut="lolite()" onClick="logVariable('default_renderers')" href="../../../_variables/default_renderers.html">$default_renderers</a> = array();
<a name="l606"><span class="linenum"> 606</span></a>              if( !isset(<a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['renderers']) )
<a name="l607"><span class="linenum"> 607</span></a>              { // all unchecked
<a name="l608"><span class="linenum"> 608</span></a>                  <a class="var it1915" onMouseOver="hilite(1915)" onMouseOut="lolite()" onClick="logVariable('default_renderers')" href="../../../_variables/default_renderers.html">$default_renderers</a> = array();
<a name="l609"><span class="linenum"> 609</span></a>              }
<a name="l610"><span class="linenum"> 610</span></a>              else <a class="var it1915" onMouseOver="hilite(1915)" onMouseOut="lolite()" onClick="logVariable('default_renderers')" href="../../../_variables/default_renderers.html">$default_renderers</a> = <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['renderers'];
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">            // the special Auto-P renderer</span>
<a name="l613"><span class="linenum"> 613</span></a>              <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'autop', 'string', true );
<a name="l614"><span class="linenum"> 614</span></a>              if( <a class="var it1916" onMouseOver="hilite(1916)" onMouseOut="lolite()" onClick="logVariable('autop')" href="../../../_variables/autop.html">$autop</a> === '1' )
<a name="l615"><span class="linenum"> 615</span></a>              { // use always
<a name="l616"><span class="linenum"> 616</span></a>                  <a class="var it1915" onMouseOver="hilite(1915)" onMouseOut="lolite()" onClick="logVariable('default_renderers')" href="../../../_variables/default_renderers.html">$default_renderers</a>[] = 'b2WPAutP';
<a name="l617"><span class="linenum"> 617</span></a>              }
<a name="l618"><span class="linenum"> 618</span></a>          }
<a name="l619"><span class="linenum"> 619</span></a>          else
<a name="l620"><span class="linenum"> 620</span></a>          {
<a name="l621"><span class="linenum"> 621</span></a>              global <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">            // Autoselect a blog to validate renderer list</span>
<a name="l623"><span class="linenum"> 623</span></a>              <a class="var it1896" onMouseOver="hilite(1896)" onMouseOut="lolite()" onClick="logVariable('autoselect_blog')" href="../../../_variables/autoselect_blog.html">$autoselect_blog</a> = <a class="function" onClick="logFunction('autoselect_blog')" href="../../../_functions/autoselect_blog.html" onMouseOver="funcPopup(event,'autoselect_blog')">autoselect_blog</a>( 'blog_post_statuses', 'edit' );
<a name="l624"><span class="linenum"> 624</span></a>              <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l625"><span class="linenum"> 625</span></a>              <a class="var it1897" onMouseOver="hilite(1897)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it1896" onMouseOver="hilite(1896)" onMouseOut="lolite()" onClick="logVariable('autoselect_blog')" href="../../../_variables/autoselect_blog.html">$autoselect_blog</a> );
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>              <a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('renderer_params')" href="../../../_variables/renderer_params.html">$renderer_params</a> = isset( <a class="var it1897" onMouseOver="hilite(1897)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a> ) ? array( 'Blog' =&gt; &amp; <a class="var it1897" onMouseOver="hilite(1897)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a>, 'setting_name' =&gt; 'coll_apply_rendering' ) : array();
<a name="l628"><span class="linenum"> 628</span></a>              <a class="var it1915" onMouseOver="hilite(1915)" onMouseOut="lolite()" onClick="logVariable('default_renderers')" href="../../../_variables/default_renderers.html">$default_renderers</a> = <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('validate_renderer_list')" href="../../../_functions/validate_renderer_list.html" onMouseOver="funcPopup(event,'validate_renderer_list')">validate_renderer_list</a>( array('default'), <a class="var it1917" onMouseOver="hilite(1917)" onMouseOut="lolite()" onClick="logVariable('renderer_params')" href="../../../_variables/renderer_params.html">$renderer_params</a> );
<a name="l629"><span class="linenum"> 629</span></a>              <a class="var it1916" onMouseOver="hilite(1916)" onMouseOut="lolite()" onClick="logVariable('autop')" href="../../../_variables/autop.html">$autop</a> = 1;
<a name="l630"><span class="linenum"> 630</span></a>          }
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>          <span class="comment">/*</span>
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">        // get image s&amp;r</span>
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">        $urlsearch = array();</span>
<a name="l636"><span class="linenum"> 636</span></a>  <span class="comment">        $urlreplace = array();</span>
<a name="l637"><span class="linenum"> 637</span></a>  <span class="comment">        $i = 0;</span>
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">        foreach( $_POST['url_replace'] as $replace )</span>
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment">        {</span>
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">            if( !empty($replace) )</span>
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">            {</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">                $urlsearch[] = remove_magic_quotes($_POST['url_search'][$i]);</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment">                $urlreplace[] = remove_magic_quotes( $replace );</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">            }</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">            $i++;</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">        }</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">        */</span>
<a name="l648"><span class="linenum"> 648</span></a>  
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">        // get users</span>
<a name="l650"><span class="linenum"> 650</span></a>          <a class="var it1889" onMouseOver="hilite(1889)" onMouseOut="lolite()" onClick="logVariable('i_user')" href="../../../_variables/i_user.html">$i_user</a> = 0;
<a name="l651"><span class="linenum"> 651</span></a>          if( !isset(<a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['user_select']) )
<a name="l652"><span class="linenum"> 652</span></a>          {
<a name="l653"><span class="linenum"> 653</span></a>              foreach( <a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a> as <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a> )
<a name="l654"><span class="linenum"> 654</span></a>              {
<a name="l655"><span class="linenum"> 655</span></a>                  <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a> ] = array('createnew', <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a> );
<a name="l656"><span class="linenum"> 656</span></a>              }
<a name="l657"><span class="linenum"> 657</span></a>  
<a name="l658"><span class="linenum"> 658</span></a>          }
<a name="l659"><span class="linenum"> 659</span></a>          else foreach( <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['user_select'] as <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../../_variables/select.html">$select</a> )
<a name="l660"><span class="linenum"> 660</span></a>          {
<a name="l661"><span class="linenum"> 661</span></a>              <a class="var it1919" onMouseOver="hilite(1919)" onMouseOut="lolite()" onClick="logVariable('mtauthor')" href="../../../_variables/mtauthor.html">$mtauthor</a> = <a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a>[ <a class="var it1889" onMouseOver="hilite(1889)" onMouseOut="lolite()" onClick="logVariable('i_user')" href="../../../_variables/i_user.html">$i_user</a> ];
<a name="l662"><span class="linenum"> 662</span></a>  
<a name="l663"><span class="linenum"> 663</span></a>              if( <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../../_variables/select.html">$select</a> == '#IGNORE#' )
<a name="l664"><span class="linenum"> 664</span></a>              {
<a name="l665"><span class="linenum"> 665</span></a>                  <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it1919" onMouseOver="hilite(1919)" onMouseOut="lolite()" onClick="logVariable('mtauthor')" href="../../../_variables/mtauthor.html">$mtauthor</a> ] = array( 'ignore' );
<a name="l666"><span class="linenum"> 666</span></a>              }
<a name="l667"><span class="linenum"> 667</span></a>              elseif( <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../../_variables/select.html">$select</a> == '#CREATENEW#' )
<a name="l668"><span class="linenum"> 668</span></a>              {
<a name="l669"><span class="linenum"> 669</span></a>                  <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it1919" onMouseOver="hilite(1919)" onMouseOut="lolite()" onClick="logVariable('mtauthor')" href="../../../_variables/mtauthor.html">$mtauthor</a> ] = array( 'createnew', <a class="function" onClick="logFunction('remove_magic_quotes')" href="../../../_functions/remove_magic_quotes.html" onMouseOver="funcPopup(event,'remove_magic_quotes')">remove_magic_quotes</a>( <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a>['user_name'][<a class="var it1889" onMouseOver="hilite(1889)" onMouseOut="lolite()" onClick="logVariable('i_user')" href="../../../_variables/i_user.html">$i_user</a>] ) );
<a name="l670"><span class="linenum"> 670</span></a>              }
<a name="l671"><span class="linenum"> 671</span></a>              elseif( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#\d+#', <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../../_variables/select.html">$select</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a> ) )
<a name="l672"><span class="linenum"> 672</span></a>              {
<a name="l673"><span class="linenum"> 673</span></a>                  <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it1919" onMouseOver="hilite(1919)" onMouseOut="lolite()" onClick="logVariable('mtauthor')" href="../../../_variables/mtauthor.html">$mtauthor</a> ] = array( 'b2evo', <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../../_variables/select.html">$select</a> );
<a name="l674"><span class="linenum"> 674</span></a>              }
<a name="l675"><span class="linenum"> 675</span></a>              else
<a name="l676"><span class="linenum"> 676</span></a>              {
<a name="l677"><span class="linenum"> 677</span></a>                  ?&gt;&lt;p class=&quot;error&quot;&gt;Unknown user mapping. This should never ever happen. Please report it.&lt;/p&gt;&lt;?php
<a name="l678"><span class="linenum"> 678</span></a>              }
<a name="l679"><span class="linenum"> 679</span></a>              <a class="var it1889" onMouseOver="hilite(1889)" onMouseOut="lolite()" onClick="logVariable('i_user')" href="../../../_variables/i_user.html">$i_user</a>++;
<a name="l680"><span class="linenum"> 680</span></a>          }
<a name="l681"><span class="linenum"> 681</span></a>          <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>, 'usersmapped' );
<a name="l682"><span class="linenum"> 682</span></a>  
<a name="l683"><span class="linenum"> 683</span></a>  
<a name="l684"><span class="linenum"> 684</span></a>          if( <a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> )
<a name="l685"><span class="linenum"> 685</span></a>          {
<a name="l686"><span class="linenum"> 686</span></a>              <a class="var it1920" onMouseOver="hilite(1920)" onMouseOut="lolite()" onClick="logVariable('simulate_cat_id')" href="../../../_variables/simulate_cat_id.html">$simulate_cat_id</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( 'SELECT <a class="phpfunction" onClick="logFunction('MAX')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>( cat_ID )+1 FROM T_categories' );
<a name="l687"><span class="linenum"> 687</span></a>          }
<a name="l688"><span class="linenum"> 688</span></a>  
<a name="l689"><span class="linenum"> 689</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = -1;
<a name="l690"><span class="linenum"> 690</span></a>          echo &quot;\n&lt;ol&gt;&quot;;
<a name="l691"><span class="linenum"> 691</span></a>          foreach (<a class="var it653" onMouseOver="hilite(653)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../../_variables/posts.html">$posts</a> as <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>)
<a name="l692"><span class="linenum"> 692</span></a>          {
<a name="l693"><span class="linenum"> 693</span></a>              ++<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l694"><span class="linenum"> 694</span></a>  
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">            // Defaults:</span>
<a name="l696"><span class="linenum"> 696</span></a>              <a class="var it1921" onMouseOver="hilite(1921)" onMouseOut="lolite()" onClick="logVariable('post_catids')" href="../../../_variables/post_catids.html">$post_catids</a> = array();
<a name="l697"><span class="linenum"> 697</span></a>              <a class="var it894" onMouseOver="hilite(894)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> = <a class="var it1915" onMouseOver="hilite(1915)" onMouseOut="lolite()" onClick="logVariable('default_renderers')" href="../../../_variables/default_renderers.html">$default_renderers</a>;
<a name="l698"><span class="linenum"> 698</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../_variables/post_status.html">$post_status</a> = 'published';
<a name="l699"><span class="linenum"> 699</span></a>  
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">            // strip the post's last '--------'</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">            // &quot;MT export files use 8 dashes to delimit entires (not 5, which delimit entry's sections).&quot;</span>
<a name="l702"><span class="linenum"> 702</span></a>              <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;|--------\n+$|s&quot;, '', <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">            // first line is author of post</span>
<a name="l705"><span class="linenum"> 705</span></a>              <a class="var it1922" onMouseOver="hilite(1922)" onMouseOut="lolite()" onClick="logVariable('post_author')" href="../../../_variables/post_author.html">$post_author</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, 0, <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, &quot;\n&quot;, 1 ) ) );
<a name="l706"><span class="linenum"> 706</span></a>              <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/^.*\n/', '', <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> );
<a name="l707"><span class="linenum"> 707</span></a>              <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> = &quot;\n&lt;li&gt;Post from &quot;.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1922" onMouseOver="hilite(1922)" onMouseOut="lolite()" onClick="logVariable('post_author')" href="../../../_variables/post_author.html">$post_author</a>, 'entityencoded' ).' &lt;ul&gt;';
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">            // Take the pings out first</span>
<a name="l710"><span class="linenum"> 710</span></a>              <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;|(-----\n\nPING:.*)|s&quot;, <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, <a class="var it1923" onMouseOver="hilite(1923)" onMouseOut="lolite()" onClick="logVariable('pings')" href="../../../_variables/pings.html">$pings</a>);
<a name="l711"><span class="linenum"> 711</span></a>              <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;|(-----\n\nPING:.*)|s&quot;, '', <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l712"><span class="linenum"> 712</span></a>  
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">            // Then take the comments out</span>
<a name="l714"><span class="linenum"> 714</span></a>              <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;|(-----\nCOMMENT:.*)|s&quot;, <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, <a class="var it796" onMouseOver="hilite(796)" onMouseOut="lolite()" onClick="logVariable('comments')" href="../../../_variables/comments.html">$comments</a>);
<a name="l715"><span class="linenum"> 715</span></a>              <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;|(-----\nCOMMENT:.*)|s&quot;, '', <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">            // We ignore the keywords</span>
<a name="l718"><span class="linenum"> 718</span></a>              <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;|(-----\nKEYWORDS:.*)|s&quot;, '', <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l719"><span class="linenum"> 719</span></a>  
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">            // We want the excerpt - it's put with more and noteaser tag into main body, only if we have no extended body!</span>
<a name="l721"><span class="linenum"> 721</span></a>              <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;|-----\nEXCERPT:(.*)|s&quot;, <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>);
<a name="l722"><span class="linenum"> 722</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>[1]);
<a name="l723"><span class="linenum"> 723</span></a>              <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;|(-----\nEXCERPT:.*)|s&quot;, '', <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">            // We're going to put extended body into main body with a more tag</span>
<a name="l726"><span class="linenum"> 726</span></a>              <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;|-----\nEXTENDED BODY:(.*)|s&quot;, <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, <a class="var it1924" onMouseOver="hilite(1924)" onMouseOut="lolite()" onClick="logVariable('extended')" href="../../../_variables/extended.html">$extended</a>);
<a name="l727"><span class="linenum"> 727</span></a>              <a class="var it1924" onMouseOver="hilite(1924)" onMouseOut="lolite()" onClick="logVariable('extended')" href="../../../_variables/extended.html">$extended</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it1924" onMouseOver="hilite(1924)" onMouseOut="lolite()" onClick="logVariable('extended')" href="../../../_variables/extended.html">$extended</a>[1]);
<a name="l728"><span class="linenum"> 728</span></a>              <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;|(-----\nEXTENDED BODY:.*)|s&quot;, '', <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">            // Now for the main body</span>
<a name="l731"><span class="linenum"> 731</span></a>              <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;|-----\nBODY:(.*)|s&quot;, <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../../_variables/body.html">$body</a>);
<a name="l732"><span class="linenum"> 732</span></a>              <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../../_variables/body.html">$body</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../../_variables/body.html">$body</a>[1]);
<a name="l733"><span class="linenum"> 733</span></a>              if( empty(<a class="var it1924" onMouseOver="hilite(1924)" onMouseOut="lolite()" onClick="logVariable('extended')" href="../../../_variables/extended.html">$extended</a>) )
<a name="l734"><span class="linenum"> 734</span></a>              { // no extended body, so we can use the excerpt
<a name="l735"><span class="linenum"> 735</span></a>                  if( empty(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>) )
<a name="l736"><span class="linenum"> 736</span></a>                      <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> = <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../../_variables/body.html">$body</a>;
<a name="l737"><span class="linenum"> 737</span></a>                  else <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>.&quot;\n[teaserbreak]\n&quot;.<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../../_variables/body.html">$body</a>;
<a name="l738"><span class="linenum"> 738</span></a>              }
<a name="l739"><span class="linenum"> 739</span></a>              else
<a name="l740"><span class="linenum"> 740</span></a>              { // we'll use body and extended body
<a name="l741"><span class="linenum"> 741</span></a>                  if( !empty(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>) )
<a name="l742"><span class="linenum"> 742</span></a>                  {
<a name="l743"><span class="linenum"> 743</span></a>                      <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .=    '&lt;li&gt;&lt;span style=&quot;color:red&quot;&gt;Excerpt discarded because of existing extended body:&lt;/span&gt;
<a name="l744"><span class="linenum"> 744</span></a>                      &lt;blockquote&gt;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>).'&lt;/blockquote&gt;&lt;/li&gt;';
<a name="l745"><span class="linenum"> 745</span></a>                  }
<a name="l746"><span class="linenum"> 746</span></a>                  <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> = <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../../_variables/body.html">$body</a>.&quot;\n[teaserbreak]\n&quot;.<a class="var it1924" onMouseOver="hilite(1924)" onMouseOut="lolite()" onClick="logVariable('extended')" href="../../../_variables/extended.html">$extended</a>;
<a name="l747"><span class="linenum"> 747</span></a>              }
<a name="l748"><span class="linenum"> 748</span></a>  
<a name="l749"><span class="linenum"> 749</span></a>              <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;|(-----\nBODY:.*)|s&quot;, '', <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l750"><span class="linenum"> 750</span></a>  
<a name="l751"><span class="linenum"> 751</span></a>  
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">            // Grab the metadata from what's left</span>
<a name="l753"><span class="linenum"> 753</span></a>              <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('metadata')" href="../../../_variables/metadata.html">$metadata</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;\n&quot;, <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>              <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a> = array();
<a name="l756"><span class="linenum"> 756</span></a>              foreach (<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('metadata')" href="../../../_variables/metadata.html">$metadata</a> as <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../_variables/line.html">$line</a>) if( !empty(<a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../_variables/line.html">$line</a>) )
<a name="l757"><span class="linenum"> 757</span></a>              {
<a name="l758"><span class="linenum"> 758</span></a>                  <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>(<a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../_variables/line.html">$line</a>);
<a name="l759"><span class="linenum"> 759</span></a>  
<a name="l760"><span class="linenum"> 760</span></a>                  if( !<a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;/^(.*?):(.*)/&quot;, <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../_variables/line.html">$line</a>, <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../_variables/token.html">$token</a>) )
<a name="l761"><span class="linenum"> 761</span></a>                  {
<a name="l762"><span class="linenum"> 762</span></a>                      <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= &quot;&lt;li class=\&quot;notes\&quot;&gt;Unknown meta-data: [<a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../_variables/line.html">$line</a>] (ignoring)&lt;/li&gt;&quot;;
<a name="l763"><span class="linenum"> 763</span></a>                      continue;
<a name="l764"><span class="linenum"> 764</span></a>                  }
<a name="l765"><span class="linenum"> 765</span></a>                  <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../_variables/token.html">$token</a>[1] );
<a name="l766"><span class="linenum"> 766</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it1928" onMouseOver="hilite(1928)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../_variables/token.html">$token</a>[2] );
<a name="l767"><span class="linenum"> 767</span></a>  
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">                // Now we decide what it is and what to do with it</span>
<a name="l769"><span class="linenum"> 769</span></a>                  switch(<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>)
<a name="l770"><span class="linenum"> 770</span></a>                  {
<a name="l771"><span class="linenum"> 771</span></a>                      case 'TITLE':
<a name="l772"><span class="linenum"> 772</span></a>                          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;title: '.<a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>).'&lt;/li&gt;';
<a name="l773"><span class="linenum"> 773</span></a>                          <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../../_variables/post_title.html">$post_title</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l774"><span class="linenum"> 774</span></a>                          break;
<a name="l775"><span class="linenum"> 775</span></a>                      case 'STATUS':
<a name="l776"><span class="linenum"> 776</span></a>                          if( <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) == 'publish' )
<a name="l777"><span class="linenum"> 777</span></a>                              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../_variables/post_status.html">$post_status</a> = 'published';
<a name="l778"><span class="linenum"> 778</span></a>                          elseif( <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) == 'draft' )
<a name="l779"><span class="linenum"> 779</span></a>                              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../_variables/post_status.html">$post_status</a> = 'draft';
<a name="l780"><span class="linenum"> 780</span></a>                          else
<a name="l781"><span class="linenum"> 781</span></a>                          {
<a name="l782"><span class="linenum"> 782</span></a>                              <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;Unknown post status ['.<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>.'], using &quot;draft&quot;.&lt;/li&gt;';
<a name="l783"><span class="linenum"> 783</span></a>                              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../_variables/post_status.html">$post_status</a> = 'draft';
<a name="l784"><span class="linenum"> 784</span></a>                          }
<a name="l785"><span class="linenum"> 785</span></a>                          break;
<a name="l786"><span class="linenum"> 786</span></a>                      case 'ALLOW COMMENTS':
<a name="l787"><span class="linenum"> 787</span></a>                          <a class="var it1929" onMouseOver="hilite(1929)" onMouseOut="lolite()" onClick="logVariable('post_allow_comments')" href="../../../_variables/post_allow_comments.html">$post_allow_comments</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l788"><span class="linenum"> 788</span></a>                          switch( <a class="var it1929" onMouseOver="hilite(1929)" onMouseOut="lolite()" onClick="logVariable('post_allow_comments')" href="../../../_variables/post_allow_comments.html">$post_allow_comments</a> ) {
<a name="l789"><span class="linenum"> 789</span></a>                              case 0: <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../../_variables/comment_status.html">$comment_status</a> = 'disabled'; break;
<a name="l790"><span class="linenum"> 790</span></a>                              case 1: <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../../_variables/comment_status.html">$comment_status</a> = 'open'; break;
<a name="l791"><span class="linenum"> 791</span></a>                              case 2: <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../../_variables/comment_status.html">$comment_status</a> = 'closed'; break;
<a name="l792"><span class="linenum"> 792</span></a>                              default:
<a name="l793"><span class="linenum"> 793</span></a>                                  <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;Unknown comment status ['.<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>.'], using &quot;closed&quot;.&lt;/li&gt;';
<a name="l794"><span class="linenum"> 794</span></a>                                  <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../../_variables/comment_status.html">$comment_status</a> = 'closed';
<a name="l795"><span class="linenum"> 795</span></a>                          }
<a name="l796"><span class="linenum"> 796</span></a>                          break;
<a name="l797"><span class="linenum"> 797</span></a>                      case 'CONVERT BREAKS':
<a name="l798"><span class="linenum"> 798</span></a>                          if( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> == '__default__' || empty(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) )
<a name="l799"><span class="linenum"> 799</span></a>                          {
<a name="l800"><span class="linenum"> 800</span></a>                              <a class="var it1930" onMouseOver="hilite(1930)" onMouseOut="lolite()" onClick="logVariable('post_convert_breaks')" href="../../../_variables/post_convert_breaks.html">$post_convert_breaks</a> = <a class="var it1894" onMouseOver="hilite(1894)" onMouseOut="lolite()" onClick="logVariable('default_convert_breaks')" href="../../../_variables/default_convert_breaks.html">$default_convert_breaks</a>;
<a name="l801"><span class="linenum"> 801</span></a>                          }
<a name="l802"><span class="linenum"> 802</span></a>                          elseif( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> == 'textile_2'    &amp;&amp; <a class="phpfunction" onClick="logFunction('array_search')" href="../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>( 'b2DATxtl', <a class="var it894" onMouseOver="hilite(894)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> ) === false )
<a name="l803"><span class="linenum"> 803</span></a>                          { // add the textile 2 renderer to the post's renderers
<a name="l804"><span class="linenum"> 804</span></a>                              <a class="var it894" onMouseOver="hilite(894)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a>[] = 'b2DATxtl';
<a name="l805"><span class="linenum"> 805</span></a>                              <a class="var it1930" onMouseOver="hilite(1930)" onMouseOut="lolite()" onClick="logVariable('post_convert_breaks')" href="../../../_variables/post_convert_breaks.html">$post_convert_breaks</a> = 1;  <span class="comment">// TODO: check if this makes sense!</span>
<a name="l806"><span class="linenum"> 806</span></a>                          }
<a name="l807"><span class="linenum"> 807</span></a>                          elseif( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/\d+/', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) )
<a name="l808"><span class="linenum"> 808</span></a>                          {
<a name="l809"><span class="linenum"> 809</span></a>                              <a class="var it1930" onMouseOver="hilite(1930)" onMouseOut="lolite()" onClick="logVariable('post_convert_breaks')" href="../../../_variables/post_convert_breaks.html">$post_convert_breaks</a> = (int)( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> &gt; 0 );
<a name="l810"><span class="linenum"> 810</span></a>                          }
<a name="l811"><span class="linenum"> 811</span></a>                          else
<a name="l812"><span class="linenum"> 812</span></a>                          {
<a name="l813"><span class="linenum"> 813</span></a>                              <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;Unknown CONVERT BREAKS value, using default ('.<a class="var it1894" onMouseOver="hilite(1894)" onMouseOut="lolite()" onClick="logVariable('default_convert_breaks')" href="../../../_variables/default_convert_breaks.html">$default_convert_breaks</a>.')..&lt;/li&gt;';
<a name="l814"><span class="linenum"> 814</span></a>                              <a class="var it1930" onMouseOver="hilite(1930)" onMouseOut="lolite()" onClick="logVariable('post_convert_breaks')" href="../../../_variables/post_convert_breaks.html">$post_convert_breaks</a> = <a class="var it1894" onMouseOver="hilite(1894)" onMouseOut="lolite()" onClick="logVariable('default_convert_breaks')" href="../../../_variables/default_convert_breaks.html">$default_convert_breaks</a>;
<a name="l815"><span class="linenum"> 815</span></a>                          }
<a name="l816"><span class="linenum"> 816</span></a>  
<a name="l817"><span class="linenum"> 817</span></a>                          if( <a class="var it1916" onMouseOver="hilite(1916)" onMouseOut="lolite()" onClick="logVariable('autop')" href="../../../_variables/autop.html">$autop</a> == 'depends' &amp;&amp; <a class="var it1930" onMouseOver="hilite(1930)" onMouseOut="lolite()" onClick="logVariable('post_convert_breaks')" href="../../../_variables/post_convert_breaks.html">$post_convert_breaks</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('array_search')" href="../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>( 'b2WPAutP', <a class="var it894" onMouseOver="hilite(894)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a> ) === false  )
<a name="l818"><span class="linenum"> 818</span></a>                          { // add the Auto-P renderer
<a name="l819"><span class="linenum"> 819</span></a>                              <a class="var it894" onMouseOver="hilite(894)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a>[] = 'b2WPAutP';
<a name="l820"><span class="linenum"> 820</span></a>                          }
<a name="l821"><span class="linenum"> 821</span></a>  
<a name="l822"><span class="linenum"> 822</span></a>                          break;
<a name="l823"><span class="linenum"> 823</span></a>                      case 'ALLOW PINGS':
<a name="l824"><span class="linenum"> 824</span></a>                          if( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> == 1)
<a name="l825"><span class="linenum"> 825</span></a>                          {
<a name="l826"><span class="linenum"> 826</span></a>                              <a class="var it1931" onMouseOver="hilite(1931)" onMouseOut="lolite()" onClick="logVariable('post_allow_pings')" href="../../../_variables/post_allow_pings.html">$post_allow_pings</a> = 'open';
<a name="l827"><span class="linenum"> 827</span></a>                          }
<a name="l828"><span class="linenum"> 828</span></a>                          else
<a name="l829"><span class="linenum"> 829</span></a>                          {
<a name="l830"><span class="linenum"> 830</span></a>                              <a class="var it1931" onMouseOver="hilite(1931)" onMouseOut="lolite()" onClick="logVariable('post_allow_pings')" href="../../../_variables/post_allow_pings.html">$post_allow_pings</a> = 'closed';
<a name="l831"><span class="linenum"> 831</span></a>                          }
<a name="l832"><span class="linenum"> 832</span></a>                          break;
<a name="l833"><span class="linenum"> 833</span></a>                      case 'PRIMARY CATEGORY':
<a name="l834"><span class="linenum"> 834</span></a>                      case 'CATEGORY':
<a name="l835"><span class="linenum"> 835</span></a>                          if( !empty(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) &amp;&amp; !isset(<a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>[<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>]) )
<a name="l836"><span class="linenum"> 836</span></a>                          {
<a name="l837"><span class="linenum"> 837</span></a>                              if( <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> ][0] == 'defaultset' )
<a name="l838"><span class="linenum"> 838</span></a>                              { // we add default set
<a name="l839"><span class="linenum"> 839</span></a>                                  <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>[<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>] = <a class="var it1911" onMouseOver="hilite(1911)" onMouseOut="lolite()" onClick="logVariable('default_post_extracats')" href="../../../_variables/default_post_extracats.html">$default_post_extracats</a>;
<a name="l840"><span class="linenum"> 840</span></a>                                  <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>( <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>[<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>], 'catid', <a class="var it1910" onMouseOver="hilite(1910)" onMouseOut="lolite()" onClick="logVariable('default_post_category')" href="../../../_variables/default_post_category.html">$default_post_category</a> );
<a name="l841"><span class="linenum"> 841</span></a>                              }
<a name="l842"><span class="linenum"> 842</span></a>                              else <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>[<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>] = <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> ];
<a name="l843"><span class="linenum"> 843</span></a>                          }
<a name="l844"><span class="linenum"> 844</span></a>                          break;
<a name="l845"><span class="linenum"> 845</span></a>                      case 'DATE':
<a name="l846"><span class="linenum"> 846</span></a>                          <a class="var it876" onMouseOver="hilite(876)" onMouseOut="lolite()" onClick="logVariable('post_date')" href="../../../_variables/post_date.html">$post_date</a> = <a class="phpfunction" onClick="logFunction('strtotime')" href="../../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> );
<a name="l847"><span class="linenum"> 847</span></a>                          <a class="var it876" onMouseOver="hilite(876)" onMouseOut="lolite()" onClick="logVariable('post_date')" href="../../../_variables/post_date.html">$post_date</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d H:i:s', <a class="var it876" onMouseOver="hilite(876)" onMouseOut="lolite()" onClick="logVariable('post_date')" href="../../../_variables/post_date.html">$post_date</a>);
<a name="l848"><span class="linenum"> 848</span></a>                          break;
<a name="l849"><span class="linenum"> 849</span></a>                      default:
<a name="l850"><span class="linenum"> 850</span></a>                          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= &quot;\n&lt;li&gt;Unknown key [<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>] in metadata:\nvalue: <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>\n&lt;/li&gt;&quot;;
<a name="l851"><span class="linenum"> 851</span></a>                          break;
<a name="l852"><span class="linenum"> 852</span></a>                  }
<a name="l853"><span class="linenum"> 853</span></a>              } <span class="comment">// End foreach (metadata)</span>
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>              <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('dontimport')" href="../../../_variables/dontimport.html">$dontimport</a> = 0;
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>              if( empty(<a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>) )
<a name="l859"><span class="linenum"> 859</span></a>              { // no category metadata found!
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>                  if( <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ '[no category assigned]' ][0] == 'defaultset' )
<a name="l862"><span class="linenum"> 862</span></a>                  { // we must convert default set
<a name="l863"><span class="linenum"> 863</span></a>                      <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>['[no category assigned]'] = <a class="var it1911" onMouseOver="hilite(1911)" onMouseOut="lolite()" onClick="logVariable('default_post_extracats')" href="../../../_variables/default_post_extracats.html">$default_post_extracats</a>;
<a name="l864"><span class="linenum"> 864</span></a>                      <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>( <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>['[no category assigned]'], 'catid', <a class="var it1910" onMouseOver="hilite(1910)" onMouseOut="lolite()" onClick="logVariable('default_post_category')" href="../../../_variables/default_post_category.html">$default_post_category</a> );
<a name="l865"><span class="linenum"> 865</span></a>                  }
<a name="l866"><span class="linenum"> 866</span></a>                  else <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>[ '[no category assigned]' ] = <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ '[no category assigned]' ];
<a name="l867"><span class="linenum"> 867</span></a>  
<a name="l868"><span class="linenum"> 868</span></a>              }
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">            // Let's check to see if it's in already</span>
<a name="l871"><span class="linenum"> 871</span></a>              if( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../_variables/post_ID.html">$post_ID</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( &quot;SELECT post_ID
<a name="l872"><span class="linenum"> 872</span></a>                                                                              FROM T_items__item
<a name="l873"><span class="linenum"> 873</span></a>                                                                           WHERE post_title = &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../../_variables/post_title.html">$post_title</a>).&quot;
<a name="l874"><span class="linenum"> 874</span></a>                                                                             AND post_datestart = '<a class="var it876" onMouseOver="hilite(876)" onMouseOut="lolite()" onClick="logVariable('post_date')" href="../../../_variables/post_date.html">$post_date</a>'&quot;))
<a name="l875"><span class="linenum"> 875</span></a>              {
<a name="l876"><span class="linenum"> 876</span></a>                  <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li style=&quot;color:blue&quot;&gt;Post already imported.&lt;/li&gt;';
<a name="l877"><span class="linenum"> 877</span></a>              }
<a name="l878"><span class="linenum"> 878</span></a>              else
<a name="l879"><span class="linenum"> 879</span></a>              { // insert post
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">                // check&amp;map author</span>
<a name="l882"><span class="linenum"> 882</span></a>                  switch( <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it1922" onMouseOver="hilite(1922)" onMouseOut="lolite()" onClick="logVariable('post_author')" href="../../../_variables/post_author.html">$post_author</a> ][0] )
<a name="l883"><span class="linenum"> 883</span></a>                  {
<a name="l884"><span class="linenum"> 884</span></a>                      case 'ignore':
<a name="l885"><span class="linenum"> 885</span></a>                          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li style=&quot;color:blue&quot;&gt;User ignored!&lt;/li&gt;';
<a name="l886"><span class="linenum"> 886</span></a>                          echo <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>.'&lt;/ul&gt;';
<a name="l887"><span class="linenum"> 887</span></a>                          continue;  <span class="comment">// next post</span>
<a name="l888"><span class="linenum"> 888</span></a>  
<a name="l889"><span class="linenum"> 889</span></a>                      case 'b2evo':
<a name="l890"><span class="linenum"> 890</span></a>                          <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_login( <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it1922" onMouseOver="hilite(1922)" onMouseOut="lolite()" onClick="logVariable('post_author')" href="../../../_variables/post_author.html">$post_author</a> ][1] );
<a name="l891"><span class="linenum"> 891</span></a>                          break;
<a name="l892"><span class="linenum"> 892</span></a>  
<a name="l893"><span class="linenum"> 893</span></a>                      case 'createnew':
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">                        // check if the user already exists</span>
<a name="l895"><span class="linenum"> 895</span></a>                          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l896"><span class="linenum"> 896</span></a>                          <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_login( <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it1922" onMouseOver="hilite(1922)" onMouseOut="lolite()" onClick="logVariable('post_author')" href="../../../_variables/post_author.html">$post_author</a> ][1] );
<a name="l897"><span class="linenum"> 897</span></a>  
<a name="l898"><span class="linenum"> 898</span></a>                          if( ! <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a> )
<a name="l899"><span class="linenum"> 899</span></a>                          {
<a name="l900"><span class="linenum"> 900</span></a>                              <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a> = <span class="keyword">new </span><a class="class" onClick="logClass('User')" href="../../../_classes/user.html" onMouseOver="classPopup(event,'user')">User</a>();
<a name="l901"><span class="linenum"> 901</span></a>                              <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('login', <a class="function" onClick="logFunction('evo_strtolower')" href="../../../_functions/evo_strtolower.html" onMouseOver="funcPopup(event,'evo_strtolower')">evo_strtolower</a>(<a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it1922" onMouseOver="hilite(1922)" onMouseOut="lolite()" onClick="logVariable('post_author')" href="../../../_variables/post_author.html">$post_author</a> ][1]));
<a name="l902"><span class="linenum"> 902</span></a>                              <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('nickname', <a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it1922" onMouseOver="hilite(1922)" onMouseOut="lolite()" onClick="logVariable('post_author')" href="../../../_variables/post_author.html">$post_author</a> ][1]);
<a name="l903"><span class="linenum"> 903</span></a>                              <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('pass', md5( <a class="var it1885" onMouseOver="hilite(1885)" onMouseOut="lolite()" onClick="logVariable('default_password')" href="../../../_variables/default_password.html">$default_password</a> ));
<a name="l904"><span class="linenum"> 904</span></a>                              <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('level', <a class="var it1887" onMouseOver="hilite(1887)" onMouseOut="lolite()" onClick="logVariable('default_userlevel')" href="../../../_variables/default_userlevel.html">$default_userlevel</a>);
<a name="l905"><span class="linenum"> 905</span></a>                              <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('email', '');
<a name="l906"><span class="linenum"> 906</span></a>                              <a class="var it203" onMouseOver="hilite(203)" onMouseOut="lolite()" onClick="logVariable('GroupCache')" href="../../../_variables/GroupCache.html">$GroupCache</a> = &amp; get_GroupCache();
<a name="l907"><span class="linenum"> 907</span></a>                              <a class="var it1934" onMouseOver="hilite(1934)" onMouseOut="lolite()" onClick="logVariable('item_Author_Group')" href="../../../_variables/item_Author_Group.html">$item_Author_Group</a> = &amp; <a class="var it203" onMouseOver="hilite(203)" onMouseOut="lolite()" onClick="logVariable('GroupCache')" href="../../../_variables/GroupCache.html">$GroupCache</a>-&gt;get_by_ID( <a class="var it1935" onMouseOver="hilite(1935)" onMouseOut="lolite()" onClick="logVariable('default_usergroup')" href="../../../_variables/default_usergroup.html">$default_usergroup</a> );
<a name="l908"><span class="linenum"> 908</span></a>                              <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a class="function" onClick="logFunction('set_Group')" href="../../../_functions/set_group.html" onMouseOver="funcPopup(event,'set_group')">set_Group</a>( <a class="var it1934" onMouseOver="hilite(1934)" onMouseOut="lolite()" onClick="logVariable('item_Author_Group')" href="../../../_variables/item_Author_Group.html">$item_Author_Group</a> );
<a name="l909"><span class="linenum"> 909</span></a>  
<a name="l910"><span class="linenum"> 910</span></a>                              if( !<a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> )
<a name="l911"><span class="linenum"> 911</span></a>                              {
<a name="l912"><span class="linenum"> 912</span></a>                                  <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>();
<a name="l913"><span class="linenum"> 913</span></a>                              }
<a name="l914"><span class="linenum"> 914</span></a>  
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">                            // This is a bad hack, because add() would need an ID (which we don't have when simulating)</span>
<a name="l916"><span class="linenum"> 916</span></a>                              <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;<a onClick="logVariable('cache_login')" class="var it8995" onMouseOver="hilite(8995)" onMouseOut="lolite()" href="../../../_variables/cache_login.html">cache_login</a>[ <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a onClick="logVariable('login')" class="var it9311" onMouseOver="hilite(9311)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a> ] = &amp; <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>;
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>                              <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li style=&quot;color:orange&quot;&gt;user '.<a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a onClick="logVariable('login')" class="var it9311" onMouseOver="hilite(9311)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a>.' created&lt;/li&gt;';
<a name="l919"><span class="linenum"> 919</span></a>                              <a class="var it1905" onMouseOver="hilite(1905)" onMouseOut="lolite()" onClick="logVariable('count_userscreated')" href="../../../_variables/count_userscreated.html">$count_userscreated</a>++;
<a name="l920"><span class="linenum"> 920</span></a>                          }
<a name="l921"><span class="linenum"> 921</span></a>                          break;
<a name="l922"><span class="linenum"> 922</span></a>                      default:
<a name="l923"><span class="linenum"> 923</span></a>                          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li style=&quot;color:red&quot;&gt;unknown type in checkauthor ('.<a class="var it1918" onMouseOver="hilite(1918)" onMouseOut="lolite()" onClick="logVariable('usersmapped')" href="../../../_variables/usersmapped.html">$usersmapped</a>[ <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a> ][0].'). This should never ever happen. Post ignored. Please report it.&lt;/li&gt;';
<a name="l924"><span class="linenum"> 924</span></a>                          echo <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>.'&lt;/ul&gt;';
<a name="l925"><span class="linenum"> 925</span></a>                          continue;  <span class="comment">// next post</span>
<a name="l926"><span class="linenum"> 926</span></a>                  }
<a name="l927"><span class="linenum"> 927</span></a>  
<a name="l928"><span class="linenum"> 928</span></a>  
<a name="l929"><span class="linenum"> 929</span></a>                  <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>, 'cats to check' );
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">                // Check categories</span>
<a name="l932"><span class="linenum"> 932</span></a>                  <a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a> = -1;
<a name="l933"><span class="linenum"> 933</span></a>                  <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('message_ignored')" href="../../../_variables/message_ignored.html">$message_ignored</a> = '';
<a name="l934"><span class="linenum"> 934</span></a>                  foreach( <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a> as <a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../../../_variables/catname.html">$catname</a> =&gt; <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a> )
<a name="l935"><span class="linenum"> 935</span></a>                  {
<a name="l936"><span class="linenum"> 936</span></a>                      <a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>++;
<a name="l937"><span class="linenum"> 937</span></a>                      switch( <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>[0] )
<a name="l938"><span class="linenum"> 938</span></a>                      {
<a name="l939"><span class="linenum"> 939</span></a>                          case 'catid': // existing b2evo catids
<a name="l940"><span class="linenum"> 940</span></a>                              <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>);
<a name="l941"><span class="linenum"> 941</span></a>                              while( <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>) )
<a name="l942"><span class="linenum"> 942</span></a>                                  <a class="var it1921" onMouseOver="hilite(1921)" onMouseOut="lolite()" onClick="logVariable('post_catids')" href="../../../_variables/post_catids.html">$post_catids</a>[] = <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a>; <span class="comment">// get all catids</span>
<a name="l943"><span class="linenum"> 943</span></a>                              continue;
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>                          case 'ignore': // category is ignored
<a name="l946"><span class="linenum"> 946</span></a>                              if( <a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a> == 0 )
<a name="l947"><span class="linenum"> 947</span></a>                              { // main category ignored, don't import post
<a name="l948"><span class="linenum"> 948</span></a>                                  <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('dontimport')" href="../../../_variables/dontimport.html">$dontimport</a> = 1;
<a name="l949"><span class="linenum"> 949</span></a>                                  <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('message_ignored')" href="../../../_variables/message_ignored.html">$message_ignored</a> .= '&lt;li&gt;Main Category &amp;quot;'.<a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../../../_variables/catname.html">$catname</a>.'&amp;quot; ignored! - no import&lt;/li&gt;';
<a name="l950"><span class="linenum"> 950</span></a>                                  break;
<a name="l951"><span class="linenum"> 951</span></a>                              }
<a name="l952"><span class="linenum"> 952</span></a>                              else
<a name="l953"><span class="linenum"> 953</span></a>                              { // ignored category in extracats, remove it there
<a name="l954"><span class="linenum"> 954</span></a>                                  <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('message_ignored')" href="../../../_variables/message_ignored.html">$message_ignored</a> .= '&lt;li&gt;Extra category '.<a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../../../_variables/catname.html">$catname</a>.' ignored.&lt;/li&gt;';
<a name="l955"><span class="linenum"> 955</span></a>                                  unset( <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>[ <a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../../../_variables/catname.html">$catname</a> ] );
<a name="l956"><span class="linenum"> 956</span></a>                              }
<a name="l957"><span class="linenum"> 957</span></a>                              break;
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>                          case 'blogid': // category has to be created
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">                            // create it and remember ID</span>
<a name="l961"><span class="linenum"> 961</span></a>                              if( <a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> )
<a name="l962"><span class="linenum"> 962</span></a>                              {
<a name="l963"><span class="linenum"> 963</span></a>                                  <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a> = ++<a class="var it1920" onMouseOver="hilite(1920)" onMouseOut="lolite()" onClick="logVariable('simulate_cat_id')" href="../../../_variables/simulate_cat_id.html">$simulate_cat_id</a>;
<a name="l964"><span class="linenum"> 964</span></a>                              }
<a name="l965"><span class="linenum"> 965</span></a>                              else
<a name="l966"><span class="linenum"> 966</span></a>                              {
<a name="l967"><span class="linenum"> 967</span></a>                                  <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a> = <a class="function" onClick="logFunction('cat_create')" href="../../../_functions/cat_create.html" onMouseOver="funcPopup(event,'cat_create')">cat_create</a>( <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>[2], 'NULL', <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>[1] );
<a name="l968"><span class="linenum"> 968</span></a>                              }
<a name="l969"><span class="linenum"> 969</span></a>                              <a class="var it1908" onMouseOver="hilite(1908)" onMouseOut="lolite()" onClick="logVariable('catsmapped')" href="../../../_variables/catsmapped.html">$catsmapped</a>[ <a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('catname')" href="../../../_variables/catname.html">$catname</a> ] = array( 'catid', <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a> ); <span class="comment">// use ID from now on.</span>
<a name="l970"><span class="linenum"> 970</span></a>  
<a name="l971"><span class="linenum"> 971</span></a>                              if( !isset(<a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../_variables/cache_categories.html">$cache_categories</a>[ <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a> ] ) )
<a name="l972"><span class="linenum"> 972</span></a>                              { // stupid workaround because of a bug where cache_categories does not get updated and we want to use get_catname later
<a name="l973"><span class="linenum"> 973</span></a>                                  <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../_variables/cache_categories.html">$cache_categories</a>[ <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a> ] = array(
<a name="l974"><span class="linenum"> 974</span></a>                                      'cat_name' =&gt; <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>[2],
<a name="l975"><span class="linenum"> 975</span></a>                                      'cat_blog_ID' =&gt; <a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>[1],
<a name="l976"><span class="linenum"> 976</span></a>                                      'cat_parent_ID' =&gt; NULL,
<a name="l977"><span class="linenum"> 977</span></a>                                      'cat_postcount' =&gt; 0,
<a name="l978"><span class="linenum"> 978</span></a>                                      'cat_children' =&gt; 0
<a name="l979"><span class="linenum"> 979</span></a>                                  );
<a name="l980"><span class="linenum"> 980</span></a>                              }
<a name="l981"><span class="linenum"> 981</span></a>                              <a class="var it1921" onMouseOver="hilite(1921)" onMouseOut="lolite()" onClick="logVariable('post_catids')" href="../../../_variables/post_catids.html">$post_catids</a>[] = <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a>;
<a name="l982"><span class="linenum"> 982</span></a>                              <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li style=&quot;color:orange&quot;&gt;category '.<a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>[2].' [ID '.<a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a>.'] created&lt;/li&gt;';
<a name="l983"><span class="linenum"> 983</span></a>                              break;
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>                          default:
<a name="l986"><span class="linenum"> 986</span></a>                              <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li style=&quot;color:red&quot;&gt;This should never ever happen @check_cats. Please report it! (checkcat[0]: '.<a class="var it1939" onMouseOver="hilite(1939)" onMouseOut="lolite()" onClick="logVariable('checkcat')" href="../../../_variables/checkcat.html">$checkcat</a>[0].')&lt;/li&gt;';
<a name="l987"><span class="linenum"> 987</span></a>  
<a name="l988"><span class="linenum"> 988</span></a>                      }
<a name="l989"><span class="linenum"> 989</span></a>                  }
<a name="l990"><span class="linenum"> 990</span></a>                  if( !empty(<a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('message_ignored')" href="../../../_variables/message_ignored.html">$message_ignored</a>) )
<a name="l991"><span class="linenum"> 991</span></a>                      <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li style=&quot;color:blue&quot;&gt;Categories ignored: &lt;ul&gt;'.<a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('message_ignored')" href="../../../_variables/message_ignored.html">$message_ignored</a>.'&lt;/ul&gt;&lt;/li&gt;';
<a name="l992"><span class="linenum"> 992</span></a>  
<a name="l993"><span class="linenum"> 993</span></a>                  <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('dontimport')" href="../../../_variables/dontimport.html">$dontimport</a>, 'dontimport' );
<a name="l994"><span class="linenum"> 994</span></a>                  if( <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('dontimport')" href="../../../_variables/dontimport.html">$dontimport</a> )
<a name="l995"><span class="linenum"> 995</span></a>                  { // see var name :)
<a name="l996"><span class="linenum"> 996</span></a>                      echo <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>;
<a name="l997"><span class="linenum"> 997</span></a>                      continue;  <span class="comment">// next post</span>
<a name="l998"><span class="linenum"> 998</span></a>                  }
<a name="l999"><span class="linenum"> 999</span></a>  
<a name="l1000"><span class="linenum">1000</span></a>                  if( <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('convert_html_tags')" href="../../../_variables/convert_html_tags.html">$convert_html_tags</a> )
<a name="l1001"><span class="linenum">1001</span></a>                  {
<a name="l1002"><span class="linenum">1002</span></a>                      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('old_content')" href="../../../_variables/old_content.html">$old_content</a> = <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a>;
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment">                    // convert tags to lowercase</span>
<a name="l1004"><span class="linenum">1004</span></a>                      <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> = <a class="phpfunction" onClick="logFunction('stripslashes')" href="../../../_functions/stripslashes.html" onMouseOver="phpfuncPopup(event,'stripslashes')">stripslashes</a>( <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( &quot;~(&lt;/?)(\w+)([^&gt;]*&gt;)~e&quot;, &quot;'\\1'.<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>('\\2').'\\3'&quot;, <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> ) );
<a name="l1005"><span class="linenum">1005</span></a>  
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment">                    // close br, hr and img tags</span>
<a name="l1007"><span class="linenum">1007</span></a>                      <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( array('~&lt;(br)&gt;~', '~&lt;(hr\s?.*?)&gt;~', '~&lt;(img\s.*?)&gt;~'), '&lt;\\1 /&gt;', <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> );
<a name="l1008"><span class="linenum">1008</span></a>  
<a name="l1009"><span class="linenum">1009</span></a>  
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment">                    // add quotes for href tags that don't have them</span>
<a name="l1011"><span class="linenum">1011</span></a>                      <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~href=([^&quot;\'][^\s&gt;&quot;\']+)[&quot;\']?~', 'href=&quot;<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../../_variables/1.html">$1</a>&quot;', <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> );
<a name="l1012"><span class="linenum">1012</span></a>  
<a name="l1013"><span class="linenum">1013</span></a>                      if( <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a> != <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('old_content')" href="../../../_variables/old_content.html">$old_content</a> )
<a name="l1014"><span class="linenum">1014</span></a>                      {
<a name="l1015"><span class="linenum">1015</span></a>                          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;&lt;p style=&quot;color:darkblue;border:1px dashed orange;&quot;&gt;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('old_content')" href="../../../_variables/old_content.html">$old_content</a>).'&lt;/p&gt;
<a name="l1016"><span class="linenum">1016</span></a>                          html-converted to: &lt;p style=&quot;color:darkblue;border:1px dashed orange;&quot;&gt;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a>).'&lt;/p&gt;&lt;/li&gt;';
<a name="l1017"><span class="linenum">1017</span></a>                      }
<a name="l1018"><span class="linenum">1018</span></a>                  }
<a name="l1019"><span class="linenum">1019</span></a>  
<a name="l1020"><span class="linenum">1020</span></a>                  <span class="comment">/*if( count($urlreplace) )</span>
<a name="l1021"><span class="linenum">1021</span></a>  <span class="comment">                {</span>
<a name="l1022"><span class="linenum">1022</span></a>  <span class="comment">                    $old_content = $post_content;</span>
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">                    foreach( $urlreplace as $search =&gt; $replace )</span>
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment">                    {</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">                        $post_content = str_replace( $urlsearch, $urlreplace, $post_content );</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">                    }</span>
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment">                    if( $post_content != $old_content )</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment">                    {</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment">                        echo '&lt;p style=&quot;color:darkblue;border:1px dashed orange;&quot;&gt;'.evo_htmlspecialchars($old_content).'&lt;/p&gt;</span>
<a name="l1030"><span class="linenum">1030</span></a>  <span class="comment">                        converted img-links to: &lt;p style=&quot;color:darkblue;border:1px dashed orange;&quot;&gt;'.evo_htmlspecialchars($post_content).'&lt;/p&gt;';</span>
<a name="l1031"><span class="linenum">1031</span></a>  <span class="comment">                    }</span>
<a name="l1032"><span class="linenum">1032</span></a>  <span class="comment">                }*/</span>
<a name="l1033"><span class="linenum">1033</span></a>  
<a name="l1034"><span class="linenum">1034</span></a>                  <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it1921" onMouseOver="hilite(1921)" onMouseOut="lolite()" onClick="logVariable('post_catids')" href="../../../_variables/post_catids.html">$post_catids</a>, 'post_extracats' );
<a name="l1035"><span class="linenum">1035</span></a>                  <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../_variables/post_category.html">$post_category</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1921" onMouseOver="hilite(1921)" onMouseOut="lolite()" onClick="logVariable('post_catids')" href="../../../_variables/post_catids.html">$post_catids</a>);
<a name="l1036"><span class="linenum">1036</span></a>                  <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../_variables/post_category.html">$post_category</a>, 'post_category' );
<a name="l1037"><span class="linenum">1037</span></a>                  <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../_variables/post_categories.html">$post_categories</a>, 'post_categories' );
<a name="l1038"><span class="linenum">1038</span></a>                  <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it1922" onMouseOver="hilite(1922)" onMouseOut="lolite()" onClick="logVariable('post_author')" href="../../../_variables/post_author.html">$post_author</a>, 'post_author' );
<a name="l1039"><span class="linenum">1039</span></a>                  <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( isset(<a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a onClick="logVariable('ID')" class="var it9311" onMouseOver="hilite(9311)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>) ? <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>-&gt;<a onClick="logVariable('ID')" class="var it9311" onMouseOver="hilite(9311)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> : '<a class="function" onClick="logFunction('NULL')" href="../../../_functions/null.html" onMouseOver="funcPopup(event,'null')">NULL</a> (simulating)', 'item_Author-&gt;ID' );
<a name="l1040"><span class="linenum">1040</span></a>  
<a name="l1041"><span class="linenum">1041</span></a>                  if( !<a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> )
<a name="l1042"><span class="linenum">1042</span></a>                  {
<a name="l1043"><span class="linenum">1043</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Item')" href="../../../_classes/item.html" onMouseOver="classPopup(event,'item')">Item</a>();
<a name="l1044"><span class="linenum">1044</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set_creator_User')" href="../../../_functions/set_creator_user.html" onMouseOver="funcPopup(event,'set_creator_user')">set_creator_User</a>(<a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('item_Author')" href="../../../_variables/item_Author.html">$item_Author</a>);
<a name="l1045"><span class="linenum">1045</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('title', <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../../_variables/post_title.html">$post_title</a>);
<a name="l1046"><span class="linenum">1046</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('content', <a class="var it1925" onMouseOver="hilite(1925)" onMouseOut="lolite()" onClick="logVariable('post_content')" href="../../../_variables/post_content.html">$post_content</a>);
<a name="l1047"><span class="linenum">1047</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('datestart', <a class="var it876" onMouseOver="hilite(876)" onMouseOut="lolite()" onClick="logVariable('post_date')" href="../../../_variables/post_date.html">$post_date</a>);
<a name="l1048"><span class="linenum">1048</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('main_cat_ID', <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../_variables/post_category.html">$post_category</a>);
<a name="l1049"><span class="linenum">1049</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('extra_cat_IDs', <a class="var it1921" onMouseOver="hilite(1921)" onMouseOut="lolite()" onClick="logVariable('post_catids')" href="../../../_variables/post_catids.html">$post_catids</a>);
<a name="l1050"><span class="linenum">1050</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('status', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../_variables/post_status.html">$post_status</a>);
<a name="l1051"><span class="linenum">1051</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('locale', <a class="var it21" onMouseOver="hilite(21)" onMouseOut="lolite()" onClick="logVariable('post_locale')" href="../../../_variables/post_locale.html">$post_locale</a>);
<a name="l1052"><span class="linenum">1052</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('notifications_status', 'finished');
<a name="l1053"><span class="linenum">1053</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('comment_status', <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../../_variables/comment_status.html">$comment_status</a>);
<a name="l1054"><span class="linenum">1054</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>(<a class="var it894" onMouseOver="hilite(894)" onMouseOut="lolite()" onClick="logVariable('post_renderers')" href="../../../_variables/post_renderers.html">$post_renderers</a>);
<a name="l1055"><span class="linenum">1055</span></a>                      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>();
<a name="l1056"><span class="linenum">1056</span></a>                      <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../_variables/post_ID.html">$post_ID</a> = <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l1057"><span class="linenum">1057</span></a>                  }
<a name="l1058"><span class="linenum">1058</span></a>  
<a name="l1059"><span class="linenum">1059</span></a>                  <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;&lt;span style=&quot;color:green&quot;&gt;Imported successfully&lt;/span&gt;&lt;ul&gt;&lt;li&gt;main category: &lt;span style=&quot;color:#09c&quot;&gt;'.<a class="function" onClick="logFunction('get_catname')" href="../../../_functions/get_catname.html" onMouseOver="funcPopup(event,'get_catname')">get_catname</a>( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../_variables/post_category.html">$post_category</a> ).'&lt;/span&gt;&lt;/li&gt;';
<a name="l1060"><span class="linenum">1060</span></a>                  if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1921" onMouseOver="hilite(1921)" onMouseOut="lolite()" onClick="logVariable('post_catids')" href="../../../_variables/post_catids.html">$post_catids</a>) )
<a name="l1061"><span class="linenum">1061</span></a>                      <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;extra categories: &lt;span style=&quot;color:#09c&quot;&gt;'.<a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/(\d+)/e', &quot;<a class="function" onClick="logFunction('get_catname')" href="../../../_functions/get_catname.html" onMouseOver="funcPopup(event,'get_catname')">get_catname</a>('\\1')&quot;, <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it1921" onMouseOver="hilite(1921)" onMouseOut="lolite()" onClick="logVariable('post_catids')" href="../../../_variables/post_catids.html">$post_catids</a> ) ).'&lt;/span&gt;&lt;/li&gt;';
<a name="l1062"><span class="linenum">1062</span></a>                  <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;/ul&gt;&lt;/li&gt;';
<a name="l1063"><span class="linenum">1063</span></a>                  <a class="var it1904" onMouseOver="hilite(1904)" onMouseOut="lolite()" onClick="logVariable('count_postscreated')" href="../../../_variables/count_postscreated.html">$count_postscreated</a>++;
<a name="l1064"><span class="linenum">1064</span></a>  
<a name="l1065"><span class="linenum">1065</span></a>              }
<a name="l1066"><span class="linenum">1066</span></a>              echo <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>.'&lt;/ul&gt;';
<a name="l1067"><span class="linenum">1067</span></a>  
<a name="l1068"><span class="linenum">1068</span></a>  
<a name="l1069"><span class="linenum">1069</span></a>              if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it796" onMouseOver="hilite(796)" onMouseOut="lolite()" onClick="logVariable('comments')" href="../../../_variables/comments.html">$comments</a>) )
<a name="l1070"><span class="linenum">1070</span></a>              { // comments
<a name="l1071"><span class="linenum">1071</span></a>                  <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> = '';
<a name="l1072"><span class="linenum">1072</span></a>  
<a name="l1073"><span class="linenum">1073</span></a>                  <a class="var it796" onMouseOver="hilite(796)" onMouseOut="lolite()" onClick="logVariable('comments')" href="../../../_variables/comments.html">$comments</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;-----\nCOMMENT:&quot;, <a class="var it796" onMouseOver="hilite(796)" onMouseOut="lolite()" onClick="logVariable('comments')" href="../../../_variables/comments.html">$comments</a>[0]);
<a name="l1074"><span class="linenum">1074</span></a>                  foreach (<a class="var it796" onMouseOver="hilite(796)" onMouseOut="lolite()" onClick="logVariable('comments')" href="../../../_variables/comments.html">$comments</a> as <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a>)
<a name="l1075"><span class="linenum">1075</span></a>                  {
<a name="l1076"><span class="linenum">1076</span></a>                      <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a>);
<a name="l1077"><span class="linenum">1077</span></a>                      if( empty(<a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a>) ) continue;
<a name="l1078"><span class="linenum">1078</span></a>  
<a name="l1079"><span class="linenum">1079</span></a>                      <a class="var it301" onMouseOver="hilite(301)" onMouseOut="lolite()" onClick="logVariable('comment_author')" href="../../../_variables/comment_author.html">$comment_author</a> = <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'AUTHOR:', <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a> );
<a name="l1080"><span class="linenum">1080</span></a>                      <a class="var it1944" onMouseOver="hilite(1944)" onMouseOut="lolite()" onClick="logVariable('comment_email')" href="../../../_variables/comment_email.html">$comment_email</a> = <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'EMAIL:', <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a> );
<a name="l1081"><span class="linenum">1081</span></a>                      <a class="var it1945" onMouseOver="hilite(1945)" onMouseOut="lolite()" onClick="logVariable('comment_ip')" href="../../../_variables/comment_ip.html">$comment_ip</a> = <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'IP:', <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a> );
<a name="l1082"><span class="linenum">1082</span></a>                      <a class="var it1946" onMouseOver="hilite(1946)" onMouseOut="lolite()" onClick="logVariable('comment_url')" href="../../../_variables/comment_url.html">$comment_url</a> = <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'URL:', <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a> );
<a name="l1083"><span class="linenum">1083</span></a>                      <a class="var it913" onMouseOver="hilite(913)" onMouseOut="lolite()" onClick="logVariable('comment_date')" href="../../../_variables/comment_date.html">$comment_date</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d H:i:s', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>( <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'DATE:', <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a> )));
<a name="l1084"><span class="linenum">1084</span></a>  
<a name="l1085"><span class="linenum">1085</span></a>                      <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../../_variables/comment_content.html">$comment_content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/\n*-----$/&quot;, '', <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../../_variables/comment.html">$comment</a>);
<a name="l1086"><span class="linenum">1086</span></a>  
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment">                    // Check if it's already in there</span>
<a name="l1088"><span class="linenum">1088</span></a>                      if( !<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>(&quot;SELECT * FROM T_comments WHERE comment_date = '<a class="var it913" onMouseOver="hilite(913)" onMouseOut="lolite()" onClick="logVariable('comment_date')" href="../../../_variables/comment_date.html">$comment_date</a>' AND comment_content = &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../../_variables/comment_content.html">$comment_content</a> )) )
<a name="l1089"><span class="linenum">1089</span></a>                      {
<a name="l1090"><span class="linenum">1090</span></a>                          if( !<a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> )
<a name="l1091"><span class="linenum">1091</span></a>                          {
<a name="l1092"><span class="linenum">1092</span></a>                              <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;INSERT INTO T_comments( comment_item_ID, comment_type, comment_author_user_ID, comment_author,
<a name="l1093"><span class="linenum">1093</span></a>                                                                                                          comment_author_email, comment_author_url, comment_author_IP,
<a name="l1094"><span class="linenum">1094</span></a>                                                                                                          comment_date, comment_content, comment_renderers )
<a name="l1095"><span class="linenum">1095</span></a>                                                  VALUES( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../_variables/post_ID.html">$post_ID</a>, 'comment', NULL, &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it301" onMouseOver="hilite(301)" onMouseOut="lolite()" onClick="logVariable('comment_author')" href="../../../_variables/comment_author.html">$comment_author</a>).&quot;,
<a name="l1096"><span class="linenum">1096</span></a>                                                                  &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it1944" onMouseOver="hilite(1944)" onMouseOut="lolite()" onClick="logVariable('comment_email')" href="../../../_variables/comment_email.html">$comment_email</a>).&quot;,    &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it1946" onMouseOver="hilite(1946)" onMouseOut="lolite()" onClick="logVariable('comment_url')" href="../../../_variables/comment_url.html">$comment_url</a>).&quot;,
<a name="l1097"><span class="linenum">1097</span></a>                                                                  &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it1945" onMouseOver="hilite(1945)" onMouseOut="lolite()" onClick="logVariable('comment_ip')" href="../../../_variables/comment_ip.html">$comment_ip</a>).&quot;, '<a class="var it913" onMouseOver="hilite(913)" onMouseOut="lolite()" onClick="logVariable('comment_date')" href="../../../_variables/comment_date.html">$comment_date</a>', &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../../_variables/comment_content.html">$comment_content</a>).&quot;, 'default' )&quot; );
<a name="l1098"><span class="linenum">1098</span></a>                          }
<a name="l1099"><span class="linenum">1099</span></a>  
<a name="l1100"><span class="linenum">1100</span></a>                          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;Comment from '.<a class="var it301" onMouseOver="hilite(301)" onMouseOut="lolite()" onClick="logVariable('comment_author')" href="../../../_variables/comment_author.html">$comment_author</a>.' added.&lt;/li&gt;';
<a name="l1101"><span class="linenum">1101</span></a>                          <a class="var it1906" onMouseOver="hilite(1906)" onMouseOut="lolite()" onClick="logVariable('count_commentscreated')" href="../../../_variables/count_commentscreated.html">$count_commentscreated</a>++;
<a name="l1102"><span class="linenum">1102</span></a>                      }
<a name="l1103"><span class="linenum">1103</span></a>                  }
<a name="l1104"><span class="linenum">1104</span></a>                  if( !empty(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>) )
<a name="l1105"><span class="linenum">1105</span></a>                  {
<a name="l1106"><span class="linenum">1106</span></a>                      echo '&lt;ul&gt;'.<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>.'&lt;/ul&gt;';
<a name="l1107"><span class="linenum">1107</span></a>                  }
<a name="l1108"><span class="linenum">1108</span></a>  
<a name="l1109"><span class="linenum">1109</span></a>              }
<a name="l1110"><span class="linenum">1110</span></a>  
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment">            // Finally the pings</span>
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment">            // fix the double newline on the first one</span>
<a name="l1113"><span class="linenum">1113</span></a>              if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1923" onMouseOver="hilite(1923)" onMouseOut="lolite()" onClick="logVariable('pings')" href="../../../_variables/pings.html">$pings</a>) )
<a name="l1114"><span class="linenum">1114</span></a>              {
<a name="l1115"><span class="linenum">1115</span></a>                  <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> = '';
<a name="l1116"><span class="linenum">1116</span></a>                  <a class="var it1923" onMouseOver="hilite(1923)" onMouseOut="lolite()" onClick="logVariable('pings')" href="../../../_variables/pings.html">$pings</a>[0] = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;-----\n\n&quot;, &quot;-----\n&quot;, <a class="var it1923" onMouseOver="hilite(1923)" onMouseOut="lolite()" onClick="logVariable('pings')" href="../../../_variables/pings.html">$pings</a>[0]);
<a name="l1117"><span class="linenum">1117</span></a>                  <a class="var it1923" onMouseOver="hilite(1923)" onMouseOut="lolite()" onClick="logVariable('pings')" href="../../../_variables/pings.html">$pings</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;-----\nPING:&quot;, <a class="var it1923" onMouseOver="hilite(1923)" onMouseOut="lolite()" onClick="logVariable('pings')" href="../../../_variables/pings.html">$pings</a>[0]);
<a name="l1118"><span class="linenum">1118</span></a>                  foreach( <a class="var it1923" onMouseOver="hilite(1923)" onMouseOut="lolite()" onClick="logVariable('pings')" href="../../../_variables/pings.html">$pings</a> as <a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a> )
<a name="l1119"><span class="linenum">1119</span></a>                  {
<a name="l1120"><span class="linenum">1120</span></a>                      <a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a>);
<a name="l1121"><span class="linenum">1121</span></a>                      if( empty(<a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a>) ) continue;
<a name="l1122"><span class="linenum">1122</span></a>  
<a name="l1123"><span class="linenum">1123</span></a>                      <a class="var it301" onMouseOver="hilite(301)" onMouseOut="lolite()" onClick="logVariable('comment_author')" href="../../../_variables/comment_author.html">$comment_author</a> = <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'BLOG NAME:', <a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a> );
<a name="l1124"><span class="linenum">1124</span></a>                      <a class="var it1944" onMouseOver="hilite(1944)" onMouseOut="lolite()" onClick="logVariable('comment_email')" href="../../../_variables/comment_email.html">$comment_email</a> = '';
<a name="l1125"><span class="linenum">1125</span></a>                      <a class="var it1945" onMouseOver="hilite(1945)" onMouseOut="lolite()" onClick="logVariable('comment_ip')" href="../../../_variables/comment_ip.html">$comment_ip</a> = <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'IP:', <a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a> );
<a name="l1126"><span class="linenum">1126</span></a>                      <a class="var it1946" onMouseOver="hilite(1946)" onMouseOut="lolite()" onClick="logVariable('comment_url')" href="../../../_variables/comment_url.html">$comment_url</a> = <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'URL:', <a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a> );
<a name="l1127"><span class="linenum">1127</span></a>                      <a class="var it913" onMouseOver="hilite(913)" onMouseOut="lolite()" onClick="logVariable('comment_date')" href="../../../_variables/comment_date.html">$comment_date</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d H:i:s', <a class="phpfunction" onClick="logFunction('strtotime')" href="../../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>( <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'DATE:', <a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a> )));
<a name="l1128"><span class="linenum">1128</span></a>                      <a class="var it1948" onMouseOver="hilite(1948)" onMouseOut="lolite()" onClick="logVariable('ping_title')" href="../../../_variables/ping_title.html">$ping_title</a> = <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( 'TITLE:', <a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a> );
<a name="l1129"><span class="linenum">1129</span></a>  
<a name="l1130"><span class="linenum">1130</span></a>                      <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../../_variables/comment_content.html">$comment_content</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/\n*-----$/&quot;, '', <a class="var it1947" onMouseOver="hilite(1947)" onMouseOut="lolite()" onClick="logVariable('ping')" href="../../../_variables/ping.html">$ping</a>);
<a name="l1131"><span class="linenum">1131</span></a>  
<a name="l1132"><span class="linenum">1132</span></a>                      <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../../_variables/comment_content.html">$comment_content</a> = &quot;&lt;strong&gt;<a class="var it1948" onMouseOver="hilite(1948)" onMouseOut="lolite()" onClick="logVariable('ping_title')" href="../../../_variables/ping_title.html">$ping_title</a>&lt;/strong&gt;&lt;br /&gt;<a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../../_variables/comment_content.html">$comment_content</a>&quot;;
<a name="l1133"><span class="linenum">1133</span></a>  
<a name="l1134"><span class="linenum">1134</span></a>  <span class="comment">                    // Check if it's already there</span>
<a name="l1135"><span class="linenum">1135</span></a>                      if (!<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>(&quot;SELECT * FROM T_comments WHERE comment_date = '<a class="var it913" onMouseOver="hilite(913)" onMouseOut="lolite()" onClick="logVariable('comment_date')" href="../../../_variables/comment_date.html">$comment_date</a>' AND comment_type = 'trackback' AND comment_content = &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../../_variables/comment_content.html">$comment_content</a>)))
<a name="l1136"><span class="linenum">1136</span></a>                      {
<a name="l1137"><span class="linenum">1137</span></a>                          if( !<a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> )
<a name="l1138"><span class="linenum">1138</span></a>                          {
<a name="l1139"><span class="linenum">1139</span></a>                              <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;INSERT INTO T_comments
<a name="l1140"><span class="linenum">1140</span></a>                                  (comment_item_ID, comment_type, comment_author, comment_author_email, comment_author_url,
<a name="l1141"><span class="linenum">1141</span></a>                                  comment_author_IP, comment_date, comment_content, comment_renderers )
<a name="l1142"><span class="linenum">1142</span></a>                                  VALUES
<a name="l1143"><span class="linenum">1143</span></a>                                  (<a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../_variables/post_ID.html">$post_ID</a>, 'trackback', &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it301" onMouseOver="hilite(301)" onMouseOut="lolite()" onClick="logVariable('comment_author')" href="../../../_variables/comment_author.html">$comment_author</a>).&quot;, &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it1944" onMouseOver="hilite(1944)" onMouseOut="lolite()" onClick="logVariable('comment_email')" href="../../../_variables/comment_email.html">$comment_email</a>).&quot;, &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it1946" onMouseOver="hilite(1946)" onMouseOut="lolite()" onClick="logVariable('comment_url')" href="../../../_variables/comment_url.html">$comment_url</a>).&quot;,
<a name="l1144"><span class="linenum">1144</span></a>                                  &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it1945" onMouseOver="hilite(1945)" onMouseOut="lolite()" onClick="logVariable('comment_ip')" href="../../../_variables/comment_ip.html">$comment_ip</a>).&quot;, &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it913" onMouseOver="hilite(913)" onMouseOut="lolite()" onClick="logVariable('comment_date')" href="../../../_variables/comment_date.html">$comment_date</a>).&quot;, &quot;.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../../_variables/comment_content.html">$comment_content</a>).&quot;, 'default' )&quot; );
<a name="l1145"><span class="linenum">1145</span></a>                          }
<a name="l1146"><span class="linenum">1146</span></a>                          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= '&lt;li&gt;Trackback from '.<a class="var it1946" onMouseOver="hilite(1946)" onMouseOut="lolite()" onClick="logVariable('comment_url')" href="../../../_variables/comment_url.html">$comment_url</a>.' added.&lt;/li&gt;';
<a name="l1147"><span class="linenum">1147</span></a>                          <a class="var it1907" onMouseOver="hilite(1907)" onMouseOut="lolite()" onClick="logVariable('count_trackbackscreated')" href="../../../_variables/count_trackbackscreated.html">$count_trackbackscreated</a>++;
<a name="l1148"><span class="linenum">1148</span></a>                      }
<a name="l1149"><span class="linenum">1149</span></a>                  }
<a name="l1150"><span class="linenum">1150</span></a>                  echo <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>;
<a name="l1151"><span class="linenum">1151</span></a>              }
<a name="l1152"><span class="linenum">1152</span></a>  
<a name="l1153"><span class="linenum">1153</span></a>              echo &quot;&lt;/li&gt;\n&quot;;
<a name="l1154"><span class="linenum">1154</span></a>              <a class="function" onClick="logFunction('evo_flush')" href="../../../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l1155"><span class="linenum">1155</span></a>          }
<a name="l1156"><span class="linenum">1156</span></a>          ?&gt;
<a name="l1157"><span class="linenum">1157</span></a>          &lt;/ol&gt;
<a name="l1158"><span class="linenum">1158</span></a>          &lt;h4&gt;All done.&lt;?php if( <a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> ) echo ' (simulated - no real import!)' ?&gt;&lt;/h4&gt;
<a name="l1159"><span class="linenum">1159</span></a>          &lt;ul&gt;
<a name="l1160"><span class="linenum">1160</span></a>              &lt;li&gt;&lt;?php echo <a class="var it1904" onMouseOver="hilite(1904)" onMouseOut="lolite()" onClick="logVariable('count_postscreated')" href="../../../_variables/count_postscreated.html">$count_postscreated</a> ?&gt; <a class="function" onClick="logFunction('post')" href="../../../_functions/post.html" onMouseOver="funcPopup(event,'post')">post</a>(s) imported.&lt;/li&gt;
<a name="l1161"><span class="linenum">1161</span></a>              &lt;li&gt;&lt;?php echo <a class="var it1905" onMouseOver="hilite(1905)" onMouseOut="lolite()" onClick="logVariable('count_userscreated')" href="../../../_variables/count_userscreated.html">$count_userscreated</a> ?&gt; <a class="function" onClick="logFunction('user')" href="../../../_functions/user.html" onMouseOver="funcPopup(event,'user')">user</a>(s) created.&lt;/li&gt;
<a name="l1162"><span class="linenum">1162</span></a>              &lt;li&gt;&lt;?php echo <a class="var it1906" onMouseOver="hilite(1906)" onMouseOut="lolite()" onClick="logVariable('count_commentscreated')" href="../../../_variables/count_commentscreated.html">$count_commentscreated</a> ?&gt; <a class="function" onClick="logFunction('comment')" href="../../../_functions/comment.html" onMouseOver="funcPopup(event,'comment')">comment</a>(s) imported.&lt;/li&gt;
<a name="l1163"><span class="linenum">1163</span></a>              &lt;li&gt;&lt;?php echo <a class="var it1907" onMouseOver="hilite(1907)" onMouseOut="lolite()" onClick="logVariable('count_trackbackscreated')" href="../../../_variables/count_trackbackscreated.html">$count_trackbackscreated</a> ?&gt; <a class="function" onClick="logFunction('trackback')" href="../../../_functions/trackback.html" onMouseOver="funcPopup(event,'trackback')">trackback</a>(s) imported.&lt;/li&gt;
<a name="l1164"><span class="linenum">1164</span></a>              &lt;li&gt;in &lt;?php echo <a class="var it146" onMouseOver="hilite(146)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('get_duration')" href="../../../_functions/get_duration.html" onMouseOver="funcPopup(event,'get_duration')">get_duration</a>('import_main') ?&gt; seconds.&lt;/li&gt;
<a name="l1165"><span class="linenum">1165</span></a>          &lt;/ul&gt;
<a name="l1166"><span class="linenum">1166</span></a>          &lt;?php
<a name="l1167"><span class="linenum">1167</span></a>          if( <a class="var it1903" onMouseOver="hilite(1903)" onMouseOut="lolite()" onClick="logVariable('simulate')" href="../../../_variables/simulate.html">$simulate</a> )
<a name="l1168"><span class="linenum">1168</span></a>          {
<a name="l1169"><span class="linenum">1169</span></a>              echo '
<a name="l1170"><span class="linenum">1170</span></a>              &lt;form action=&quot;'.<a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a>.'&quot; method=&quot;post&quot;&gt;
<a name="l1171"><span class="linenum">1171</span></a>              &lt;input type=&quot;hidden&quot; name=&quot;ctrl&quot; value=&quot;mtimport&quot; /&gt;
<a name="l1172"><span class="linenum">1172</span></a>              &lt;p&gt;
<a name="l1173"><span class="linenum">1173</span></a>              &lt;strong&gt;This was only simulated..&lt;/strong&gt;
<a name="l1174"><span class="linenum">1174</span></a>              ';
<a name="l1175"><span class="linenum">1175</span></a>              foreach( <a class="var it1610" onMouseOver="hilite(1610)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../../_variables/_POST.html">$_POST</a> as <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> =&gt; <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> )
<a name="l1176"><span class="linenum">1176</span></a>              {
<a name="l1177"><span class="linenum">1177</span></a>                  if( <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> != 'simulate' )
<a name="l1178"><span class="linenum">1178</span></a>                  {
<a name="l1179"><span class="linenum">1179</span></a>                      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> ) )
<a name="l1180"><span class="linenum">1180</span></a>                      {
<a name="l1181"><span class="linenum">1181</span></a>                          foreach( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> as <a class="var it1949" onMouseOver="hilite(1949)" onMouseOut="lolite()" onClick="logVariable('key2')" href="../../../_variables/key2.html">$key2</a> =&gt; <a class="var it1950" onMouseOver="hilite(1950)" onMouseOut="lolite()" onClick="logVariable('value2')" href="../../../_variables/value2.html">$value2</a> )
<a name="l1182"><span class="linenum">1182</span></a>                          {
<a name="l1183"><span class="linenum">1183</span></a>                              echo '&lt;input type=&quot;hidden&quot; name=&quot;'.<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>.'['.<a class="var it1949" onMouseOver="hilite(1949)" onMouseOut="lolite()" onClick="logVariable('key2')" href="../../../_variables/key2.html">$key2</a>.']&quot; value=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1950" onMouseOver="hilite(1950)" onMouseOut="lolite()" onClick="logVariable('value2')" href="../../../_variables/value2.html">$value2</a>, 'formvalue' ).'&quot; /&gt;';
<a name="l1184"><span class="linenum">1184</span></a>                          }
<a name="l1185"><span class="linenum">1185</span></a>                      }
<a name="l1186"><span class="linenum">1186</span></a>                      else
<a name="l1187"><span class="linenum">1187</span></a>                      {
<a name="l1188"><span class="linenum">1188</span></a>                          echo '&lt;input type=&quot;hidden&quot; name=&quot;'.<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>.'&quot; value=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, 'formvalue' ).'&quot; /&gt;';
<a name="l1189"><span class="linenum">1189</span></a>                      }
<a name="l1190"><span class="linenum">1190</span></a>                  }
<a name="l1191"><span class="linenum">1191</span></a>              }
<a name="l1192"><span class="linenum">1192</span></a>              echo '&lt;input type=&quot;submit&quot; value=&quot;Do it for real now!&quot; /&gt;&lt;/p&gt;&lt;/form&gt;'.&quot;\n&quot;;
<a name="l1193"><span class="linenum">1193</span></a>          }
<a name="l1194"><span class="linenum">1194</span></a>          ?&gt;
<a name="l1195"><span class="linenum">1195</span></a>          &lt;p&gt;
<a name="l1196"><span class="linenum">1196</span></a>              &lt;a href=&quot;&lt;?php echo <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a> ?&gt;&quot;&gt;Have fun in your blogs&lt;/a&gt; or &lt;a href=&quot;&lt;?php echo <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a> ?&gt;&quot;&gt;go to admin&lt;/a&gt; (it's fun there, too)
<a name="l1197"><span class="linenum">1197</span></a>          &lt;/p&gt;
<a name="l1198"><span class="linenum">1198</span></a>          &lt;?php
<a name="l1199"><span class="linenum">1199</span></a>          if( <a class="var it1905" onMouseOver="hilite(1905)" onMouseOut="lolite()" onClick="logVariable('count_userscreated')" href="../../../_variables/count_userscreated.html">$count_userscreated</a> )
<a name="l1200"><span class="linenum">1200</span></a>          {
<a name="l1201"><span class="linenum">1201</span></a>              echo '&lt;p class=&quot;note&quot;&gt;Please note that the new users being created are not member of any blog yet. You\'ll have to setup this in the &lt;a href=&quot;'.<a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=collections&quot;&gt;blogs admin&lt;/a&gt;.&lt;/p&gt;';
<a name="l1202"><span class="linenum">1202</span></a>          }
<a name="l1203"><span class="linenum">1203</span></a>          ?&gt;
<a name="l1204"><span class="linenum">1204</span></a>          &lt;/div&gt;
<a name="l1205"><span class="linenum">1205</span></a>      &lt;?php
<a name="l1206"><span class="linenum">1206</span></a>      }
<a name="l1207"><span class="linenum">1207</span></a>  
<a name="l1208"><span class="linenum">1208</span></a>  ?&gt;
<a name="l1209"><span class="linenum">1209</span></a>  &lt;div class=&quot;clear&quot;&gt;
<a name="l1210"><span class="linenum">1210</span></a>  &lt;?php if( <a class="var it1878" onMouseOver="hilite(1878)" onMouseOut="lolite()" onClick="logVariable('output_debug_dump')" href="../../../_variables/output_debug_dump.html">$output_debug_dump</a> ) <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('dump_queries')" href="../../../_functions/dump_queries.html" onMouseOver="funcPopup(event,'dump_queries')">dump_queries</a>() ?&gt;
<a name="l1211"><span class="linenum">1211</span></a>  &lt;/div&gt;
<a name="l1212"><span class="linenum">1212</span></a>  &lt;/div&gt;
<a name="l1213"><span class="linenum">1213</span></a>  &lt;/body&gt;
<a name="l1214"><span class="linenum">1214</span></a>  &lt;/html&gt;
<a name="l1215"><span class="linenum">1215</span></a>  &lt;?php
<a name="l1216"><span class="linenum">1216</span></a>  
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment">/* ------ FUNCTIONS ------ */</span>
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">/**</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment"> * @todo fp&gt; this needs to be deprecated</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment"> * @todo fp&gt; get rid of the $cache_blogs crap and use $BlogCache only</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment"> */</span>
<a name="l1223"><span class="linenum">1223</span></a>  function <a class="function" onClick="logFunction('blog_load_cache')" href="../../../_functions/blog_load_cache.html" onMouseOver="funcPopup(event,'blog_load_cache')">blog_load_cache</a>()
<a name="l1224"><span class="linenum">1224</span></a>  {
<a name="l1225"><span class="linenum">1225</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1951" onMouseOver="hilite(1951)" onMouseOut="lolite()" onClick="logVariable('cache_blogs')" href="../../../_variables/cache_blogs.html">$cache_blogs</a>;
<a name="l1226"><span class="linenum">1226</span></a>      if( empty(<a class="var it1951" onMouseOver="hilite(1951)" onMouseOut="lolite()" onClick="logVariable('cache_blogs')" href="../../../_variables/cache_blogs.html">$cache_blogs</a>) )
<a name="l1227"><span class="linenum">1227</span></a>      {
<a name="l1228"><span class="linenum">1228</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l1229"><span class="linenum">1229</span></a>          <a class="var it1951" onMouseOver="hilite(1951)" onMouseOut="lolite()" onClick="logVariable('cache_blogs')" href="../../../_variables/cache_blogs.html">$cache_blogs</a> = array();
<a name="l1230"><span class="linenum">1230</span></a>  
<a name="l1231"><span class="linenum">1231</span></a>          foreach( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( &quot;SELECT * FROM T_blogs ORDER BY blog_ID&quot;, <a class="constant" onClick="logConstant('OBJECT')" href="../../../_constants/OBJECT.html" onMouseOver="constPopup(event,'OBJECT')">OBJECT</a>, '<a class="function" onClick="logFunction('blog_load_cache')" href="../../../_functions/blog_load_cache.html" onMouseOver="funcPopup(event,'blog_load_cache')">blog_load_cache</a>()' ) as <a class="var it1952" onMouseOver="hilite(1952)" onMouseOut="lolite()" onClick="logVariable('this_blog')" href="../../../_variables/this_blog.html">$this_blog</a> )
<a name="l1232"><span class="linenum">1232</span></a>          {
<a name="l1233"><span class="linenum">1233</span></a>              <a class="var it1951" onMouseOver="hilite(1951)" onMouseOut="lolite()" onClick="logVariable('cache_blogs')" href="../../../_variables/cache_blogs.html">$cache_blogs</a>[<a class="var it1952" onMouseOver="hilite(1952)" onMouseOut="lolite()" onClick="logVariable('this_blog')" href="../../../_variables/this_blog.html">$this_blog</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9312" onMouseOver="hilite(9312)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>] = <a class="var it1952" onMouseOver="hilite(1952)" onMouseOut="lolite()" onClick="logVariable('this_blog')" href="../../../_variables/this_blog.html">$this_blog</a>;
<a name="l1234"><span class="linenum">1234</span></a>  
<a name="l1235"><span class="linenum">1235</span></a>  <span class="comment">            // Add it to BlogCache, so it does not need to load it also again:</span>
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">            // NOTE: dh&gt; it may be bad to instantiate all objects, but there's no shadow_cache for rows..</span>
<a name="l1237"><span class="linenum">1237</span></a>              <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;instantiate(<a class="var it1952" onMouseOver="hilite(1952)" onMouseOut="lolite()" onClick="logVariable('this_blog')" href="../../../_variables/this_blog.html">$this_blog</a>);
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment">            //echo 'just cached:'.$cache_blogs[$this_blog-&gt;blog_ID]-&gt;blog_name.'('.$this_blog-&gt;blog_ID.')&lt;br /&gt;';</span>
<a name="l1239"><span class="linenum">1239</span></a>          }
<a name="l1240"><span class="linenum">1240</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a onClick="logVariable('all_loaded')" class="var it9129" onMouseOver="hilite(9129)" onMouseOut="lolite()" href="../../../_variables/all_loaded.html">all_loaded</a> = true;
<a name="l1241"><span class="linenum">1241</span></a>      }
<a name="l1242"><span class="linenum">1242</span></a>  }
<a name="l1243"><span class="linenum">1243</span></a>  
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment">/**</span>
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment"> * Get name for a given cat ID.</span>
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment"> *</span>
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment"> * @return string Cat name in case of success, false on failure.</span>
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment"> */</span>
<a name="l1250"><span class="linenum">1250</span></a>  function <a class="function" onClick="logFunction('get_catname')" href="../../../_functions/get_catname.html" onMouseOver="funcPopup(event,'get_catname')">get_catname</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>)
<a name="l1251"><span class="linenum">1251</span></a>  {
<a name="l1252"><span class="linenum">1252</span></a>      <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l1253"><span class="linenum">1253</span></a>      <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>);
<a name="l1254"><span class="linenum">1254</span></a>      return <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('name')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../_variables/name.html">name</a>;
<a name="l1255"><span class="linenum">1255</span></a>  }
<a name="l1256"><span class="linenum">1256</span></a>  
<a name="l1257"><span class="linenum">1257</span></a>  
<a name="l1258"><span class="linenum">1258</span></a>  function <a class="function" onClick="logFunction('fieldset_cats')" href="../../../_functions/fieldset_cats.html" onMouseOver="funcPopup(event,'fieldset_cats')">fieldset_cats</a>()
<a name="l1259"><span class="linenum">1259</span></a>  {
<a name="l1260"><span class="linenum">1260</span></a>      global <a class="var it1951" onMouseOver="hilite(1951)" onMouseOut="lolite()" onClick="logVariable('cache_blogs')" href="../../../_variables/cache_blogs.html">$cache_blogs</a>, <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../_variables/cache_categories.html">$cache_categories</a>;
<a name="l1261"><span class="linenum">1261</span></a>  
<a name="l1262"><span class="linenum">1262</span></a>      ?&gt;
<a name="l1263"><span class="linenum">1263</span></a>      &lt;fieldset title=&quot;default categories set&quot; style=&quot;background-color:#fafafa; border:1px solid #ccc; padding: 1em; display:inline; float:right; white-space:nowrap;&quot;&gt;
<a name="l1264"><span class="linenum">1264</span></a>          &lt;legend&gt;Default categories <a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a> (only needed if you want to map categories to this)&lt;/legend&gt;
<a name="l1265"><span class="linenum">1265</span></a>          &lt;p class=&quot;extracatnote&quot;&gt;
<a name="l1266"><span class="linenum">1266</span></a>          &lt;?php
<a name="l1267"><span class="linenum">1267</span></a>              if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../_variables/cache_categories.html">$cache_categories</a> ) )
<a name="l1268"><span class="linenum">1268</span></a>              {
<a name="l1269"><span class="linenum">1269</span></a>                  echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select main category in target blog and optionally check additional categories').':';
<a name="l1270"><span class="linenum">1270</span></a>              }
<a name="l1271"><span class="linenum">1271</span></a>              else
<a name="l1272"><span class="linenum">1272</span></a>              {
<a name="l1273"><span class="linenum">1273</span></a>                  echo 'No categories in your blogs..';
<a name="l1274"><span class="linenum">1274</span></a>              }
<a name="l1275"><span class="linenum">1275</span></a>          ?&gt;
<a name="l1276"><span class="linenum">1276</span></a>          &lt;/p&gt;
<a name="l1277"><span class="linenum">1277</span></a>  
<a name="l1278"><span class="linenum">1278</span></a>          &lt;?php
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment">        // ----------------------------  CATEGORIES ------------------------------</span>
<a name="l1280"><span class="linenum">1280</span></a>          <a class="var it1954" onMouseOver="hilite(1954)" onMouseOut="lolite()" onClick="logVariable('default_main_cat')" href="../../../_variables/default_main_cat.html">$default_main_cat</a> = 0;
<a name="l1281"><span class="linenum">1281</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = 1;
<a name="l1282"><span class="linenum">1282</span></a>  
<a name="l1283"><span class="linenum">1283</span></a>  <span class="comment">        // ----------------- START RECURSIVE CAT LIST ----------------</span>
<a name="l1284"><span class="linenum">1284</span></a>          <a class="function" onClick="logFunction('cat_load_cache')" href="../../../_functions/cat_load_cache.html" onMouseOver="funcPopup(event,'cat_load_cache')">cat_load_cache</a>();    <span class="comment">// make sure the caches are loaded</span>
<a name="l1285"><span class="linenum">1285</span></a>  		function <a class="function" onClick="logFunction('import_cat_select_before_first')" href="../../../_functions/import_cat_select_before_first.html" onMouseOver="funcPopup(event,'import_cat_select_before_first')">import_cat_select_before_first</a>( <a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('parent_cat_ID')" href="../../../_variables/parent_cat_ID.html">$parent_cat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../_variables/level.html">$level</a> )
<a name="l1286"><span class="linenum">1286</span></a>          {    // callback to start sublist
<a name="l1287"><span class="linenum">1287</span></a>              echo &quot;\n&lt;ul&gt;\n&quot;;
<a name="l1288"><span class="linenum">1288</span></a>          }
<a name="l1289"><span class="linenum">1289</span></a>  
<a name="l1290"><span class="linenum">1290</span></a>  		function <a class="function" onClick="logFunction('import_cat_select_before_each')" href="../../../_functions/import_cat_select_before_each.html" onMouseOver="funcPopup(event,'import_cat_select_before_each')">import_cat_select_before_each</a>( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../_variables/level.html">$level</a> )
<a name="l1291"><span class="linenum">1291</span></a>          {    // callback to display sublist element
<a name="l1292"><span class="linenum">1292</span></a>              global <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../_variables/current_blog_ID.html">$current_blog_ID</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>, <a class="var it1956" onMouseOver="hilite(1956)" onMouseOut="lolite()" onClick="logVariable('postdata')" href="../../../_variables/postdata.html">$postdata</a>, <a class="var it1954" onMouseOver="hilite(1954)" onMouseOut="lolite()" onClick="logVariable('default_main_cat')" href="../../../_variables/default_main_cat.html">$default_main_cat</a>, <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a>, <a class="var it1957" onMouseOver="hilite(1957)" onMouseOut="lolite()" onClick="logVariable('tabindex')" href="../../../_variables/tabindex.html">$tabindex</a>;
<a name="l1293"><span class="linenum">1293</span></a>              echo '&lt;li&gt;';
<a name="l1294"><span class="linenum">1294</span></a>  
<a name="l1295"><span class="linenum">1295</span></a>              if( <a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>() &gt;= 1 )
<a name="l1296"><span class="linenum">1296</span></a>              { // We allow cross posting, display checkbox:
<a name="l1297"><span class="linenum">1297</span></a>                  echo'&lt;input type=&quot;checkbox&quot; name=&quot;post_extracats[]&quot; class=&quot;checkbox&quot; title=&quot;', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select as an additionnal category') , '&quot; value=&quot;',<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>,'&quot;';
<a name="l1298"><span class="linenum">1298</span></a>                  echo ' /&gt;';
<a name="l1299"><span class="linenum">1299</span></a>              }
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">            // Radio for main cat:</span>
<a name="l1302"><span class="linenum">1302</span></a>              if( <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../_variables/current_blog_ID.html">$current_blog_ID</a> == <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> )
<a name="l1303"><span class="linenum">1303</span></a>              {
<a name="l1304"><span class="linenum">1304</span></a>                  if( (<a class="var it1954" onMouseOver="hilite(1954)" onMouseOut="lolite()" onClick="logVariable('default_main_cat')" href="../../../_variables/default_main_cat.html">$default_main_cat</a> == 0) &amp;&amp; (<a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> == 'post') )
<a name="l1305"><span class="linenum">1305</span></a>                  {    // Assign default cat for new post
<a name="l1306"><span class="linenum">1306</span></a>                      <a class="var it1954" onMouseOver="hilite(1954)" onMouseOut="lolite()" onClick="logVariable('default_main_cat')" href="../../../_variables/default_main_cat.html">$default_main_cat</a> = <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>;
<a name="l1307"><span class="linenum">1307</span></a>                  }
<a name="l1308"><span class="linenum">1308</span></a>                  echo ' &lt;input type=&quot;radio&quot; name=&quot;post_category&quot; class=&quot;checkbox&quot; title=&quot;', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select as MAIN category'), '&quot; value=&quot;',<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>,'&quot;';
<a name="l1309"><span class="linenum">1309</span></a>                  if( (<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a> == <a class="var it1956" onMouseOver="hilite(1956)" onMouseOut="lolite()" onClick="logVariable('postdata')" href="../../../_variables/postdata.html">$postdata</a>[&quot;Category&quot;]) || (<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a> == <a class="var it1954" onMouseOver="hilite(1954)" onMouseOut="lolite()" onClick="logVariable('default_main_cat')" href="../../../_variables/default_main_cat.html">$default_main_cat</a>))
<a name="l1310"><span class="linenum">1310</span></a>                      echo ' checked=&quot;checked&quot;';
<a name="l1311"><span class="linenum">1311</span></a>                  echo ' /&gt;';
<a name="l1312"><span class="linenum">1312</span></a>              }
<a name="l1313"><span class="linenum">1313</span></a>              echo ' '.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="function" onClick="logFunction('get_catname')" href="../../../_functions/get_catname.html" onMouseOver="funcPopup(event,'get_catname')">get_catname</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>));
<a name="l1314"><span class="linenum">1314</span></a>          }
<a name="l1315"><span class="linenum">1315</span></a>  
<a name="l1316"><span class="linenum">1316</span></a>  		function <a class="function" onClick="logFunction('import_cat_select_after_each')" href="../../../_functions/import_cat_select_after_each.html" onMouseOver="funcPopup(event,'import_cat_select_after_each')">import_cat_select_after_each</a>( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../_variables/level.html">$level</a> )
<a name="l1317"><span class="linenum">1317</span></a>          {    // callback after each sublist element
<a name="l1318"><span class="linenum">1318</span></a>              echo &quot;&lt;/li&gt;\n&quot;;
<a name="l1319"><span class="linenum">1319</span></a>          }
<a name="l1320"><span class="linenum">1320</span></a>  
<a name="l1321"><span class="linenum">1321</span></a>  		function <a class="function" onClick="logFunction('import_cat_select_after_last')" href="../../../_functions/import_cat_select_after_last.html" onMouseOver="funcPopup(event,'import_cat_select_after_last')">import_cat_select_after_last</a>( <a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('parent_cat_ID')" href="../../../_variables/parent_cat_ID.html">$parent_cat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../_variables/level.html">$level</a> )
<a name="l1322"><span class="linenum">1322</span></a>          {    // callback to end sublist
<a name="l1323"><span class="linenum">1323</span></a>              echo &quot;&lt;/ul&gt;\n&quot;;
<a name="l1324"><span class="linenum">1324</span></a>          }
<a name="l1325"><span class="linenum">1325</span></a>  
<a name="l1326"><span class="linenum">1326</span></a>  <span class="comment">        // go through all blogs with cats:</span>
<a name="l1327"><span class="linenum">1327</span></a>          foreach( <a class="var it1951" onMouseOver="hilite(1951)" onMouseOut="lolite()" onClick="logVariable('cache_blogs')" href="../../../_variables/cache_blogs.html">$cache_blogs</a> as <a class="var it1958" onMouseOver="hilite(1958)" onMouseOut="lolite()" onClick="logVariable('i_blog')" href="../../../_variables/i_blog.html">$i_blog</a> )
<a name="l1328"><span class="linenum">1328</span></a>          { // run recursively through the cats
<a name="l1329"><span class="linenum">1329</span></a>              <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../_variables/current_blog_ID.html">$current_blog_ID</a> = <a class="var it1958" onMouseOver="hilite(1958)" onMouseOut="lolite()" onClick="logVariable('i_blog')" href="../../../_variables/i_blog.html">$i_blog</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>;
<a name="l1330"><span class="linenum">1330</span></a>              if( ! <a class="function" onClick="logFunction('blog_has_cats')" href="../../../_functions/blog_has_cats.html" onMouseOver="funcPopup(event,'blog_has_cats')">blog_has_cats</a>( <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../_variables/current_blog_ID.html">$current_blog_ID</a> ) ) continue;
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment">            #if( ! $current_User-&gt;check_perm( 'blog_post_statuses', 'any', false, $current_blog_ID ) ) continue;</span>
<a name="l1332"><span class="linenum">1332</span></a>              echo &quot;&lt;h4&gt;&quot;.<a class="var it1958" onMouseOver="hilite(1958)" onMouseOut="lolite()" onClick="logVariable('i_blog')" href="../../../_variables/i_blog.html">$i_blog</a>-&gt;<a onClick="logVariable('blog_name')" class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" href="../../../_variables/blog_name.html">blog_name</a>.&quot;&lt;/h4&gt;\n&quot;;
<a name="l1333"><span class="linenum">1333</span></a>              <a class="function" onClick="logFunction('cat_children')" href="../../../_functions/cat_children.html" onMouseOver="funcPopup(event,'cat_children')">cat_children</a>( <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../_variables/cache_categories.html">$cache_categories</a>, <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../_variables/current_blog_ID.html">$current_blog_ID</a>, NULL, 'import_cat_select_before_first',
<a name="l1334"><span class="linenum">1334</span></a>                                          'import_cat_select_before_each', 'import_cat_select_after_each', 'import_cat_select_after_last', 1 );
<a name="l1335"><span class="linenum">1335</span></a>          }
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment">        // ----------------- END RECURSIVE CAT LIST ----------------</span>
<a name="l1337"><span class="linenum">1337</span></a>          ?&gt;
<a name="l1338"><span class="linenum">1338</span></a>      &lt;/fieldset&gt;
<a name="l1339"><span class="linenum">1339</span></a>  &lt;?php
<a name="l1340"><span class="linenum">1340</span></a>  }
<a name="l1341"><span class="linenum">1341</span></a>  
<a name="l1342"><span class="linenum">1342</span></a>  
<a name="l1343"><span class="linenum">1343</span></a>  <span class="comment">/*</span>
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment">    -- Category options list --</span>
<a name="l1345"><span class="linenum">1345</span></a>  <span class="comment">*/</span>
<a name="l1346"><span class="linenum">1346</span></a>  function <a class="function" onClick="logFunction('cats_optionslist')" href="../../../_functions/cats_optionslist.html" onMouseOver="funcPopup(event,'cats_optionslist')">cats_optionslist</a>( <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('forcat')" href="../../../_variables/forcat.html">$forcat</a> )
<a name="l1347"><span class="linenum">1347</span></a>  {
<a name="l1348"><span class="linenum">1348</span></a>      global <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../_variables/cache_categories.html">$cache_categories</a>, <a class="var it1951" onMouseOver="hilite(1951)" onMouseOut="lolite()" onClick="logVariable('cache_blogs')" href="../../../_variables/cache_blogs.html">$cache_blogs</a>, <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a>;
<a name="l1349"><span class="linenum">1349</span></a>  
<a name="l1350"><span class="linenum">1350</span></a>      if( !isset(<a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a>) )
<a name="l1351"><span class="linenum">1351</span></a>      {
<a name="l1352"><span class="linenum">1352</span></a>          <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a> = '';
<a name="l1353"><span class="linenum">1353</span></a>          foreach( <a class="var it1951" onMouseOver="hilite(1951)" onMouseOut="lolite()" onClick="logVariable('cache_blogs')" href="../../../_variables/cache_blogs.html">$cache_blogs</a> as <a class="var it1958" onMouseOver="hilite(1958)" onMouseOut="lolite()" onClick="logVariable('i_blog')" href="../../../_variables/i_blog.html">$i_blog</a> )
<a name="l1354"><span class="linenum">1354</span></a>          {
<a name="l1355"><span class="linenum">1355</span></a>              <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a> .= '&lt;option value=&quot;#NEW#'.<a class="var it1958" onMouseOver="hilite(1958)" onMouseOut="lolite()" onClick="logVariable('i_blog')" href="../../../_variables/i_blog.html">$i_blog</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>.'&quot;&gt;[-- create in blog '.<a class="var it1958" onMouseOver="hilite(1958)" onMouseOut="lolite()" onClick="logVariable('i_blog')" href="../../../_variables/i_blog.html">$i_blog</a>-&gt;<a onClick="logVariable('blog_shortname')" class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" href="../../../_variables/blog_shortname.html">blog_shortname</a>.' --]:&lt;/option&gt;';
<a name="l1356"><span class="linenum">1356</span></a>              <a class="function" onClick="logFunction('cat_children2')" href="../../../_functions/cat_children2.html" onMouseOver="funcPopup(event,'cat_children2')">cat_children2</a>( <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../_variables/cache_categories.html">$cache_categories</a>, <a class="var it1958" onMouseOver="hilite(1958)" onMouseOut="lolite()" onClick="logVariable('i_blog')" href="../../../_variables/i_blog.html">$i_blog</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>, NULL, 1 );
<a name="l1357"><span class="linenum">1357</span></a>          }
<a name="l1358"><span class="linenum">1358</span></a>      }
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>      <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a> = false;
<a name="l1361"><span class="linenum">1361</span></a>      foreach( <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../_variables/cache_categories.html">$cache_categories</a> as <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> =&gt; <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> )
<a name="l1362"><span class="linenum">1362</span></a>      {
<a name="l1363"><span class="linenum">1363</span></a>          if( <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>['cat_name'] == <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('forcat')" href="../../../_variables/forcat.html">$forcat</a> )
<a name="l1364"><span class="linenum">1364</span></a>          {
<a name="l1365"><span class="linenum">1365</span></a>              <a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a> = <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>;
<a name="l1366"><span class="linenum">1366</span></a>              break;
<a name="l1367"><span class="linenum">1367</span></a>          }
<a name="l1368"><span class="linenum">1368</span></a>      }
<a name="l1369"><span class="linenum">1369</span></a>  
<a name="l1370"><span class="linenum">1370</span></a>      if( is_int(<a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a>) )
<a name="l1371"><span class="linenum">1371</span></a>      {
<a name="l1372"><span class="linenum">1372</span></a>          echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '&lt;option value=&quot;'.<a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a>.'&quot;&gt;', '&lt;option value=&quot;'.<a class="var it1940" onMouseOver="hilite(1940)" onMouseOut="lolite()" onClick="logVariable('cat_id')" href="../../../_variables/cat_id.html">$cat_id</a>.'&quot; selected=&quot;selected&quot;&gt;', <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a> );
<a name="l1373"><span class="linenum">1373</span></a>      }
<a name="l1374"><span class="linenum">1374</span></a>      else
<a name="l1375"><span class="linenum">1375</span></a>      {
<a name="l1376"><span class="linenum">1376</span></a>          echo <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a>;
<a name="l1377"><span class="linenum">1377</span></a>      }
<a name="l1378"><span class="linenum">1378</span></a>  }
<a name="l1379"><span class="linenum">1379</span></a>  
<a name="l1380"><span class="linenum">1380</span></a>  function <a class="function" onClick="logFunction('cat_children2')" href="../../../_functions/cat_children2.html" onMouseOver="funcPopup(event,'cat_children2')">cat_children2</a>(
<a name="l1381"><span class="linenum">1381</span></a>      <a class="var it1152" onMouseOver="hilite(1152)" onMouseOut="lolite()" onClick="logVariable('ccats')" href="../../../_variables/ccats.html">$ccats</a>,     // PHP requires this stupid cloning of the cache_categories array in order to be able to perform foreach on it
<a name="l1382"><span class="linenum">1382</span></a>      <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>,
<a name="l1383"><span class="linenum">1383</span></a>      <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('parent_ID')" href="../../../_variables/parent_ID.html">$parent_ID</a>,
<a name="l1384"><span class="linenum">1384</span></a>      <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../_variables/level.html">$level</a> = 0 )    // Caller nesting level, just to keep track of how far we go :)
<a name="l1385"><span class="linenum">1385</span></a>  {
<a name="l1386"><span class="linenum">1386</span></a>      global <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a>;
<a name="l1387"><span class="linenum">1387</span></a>  
<a name="l1388"><span class="linenum">1388</span></a>  <span class="comment">    // echo 'Number of cats=', count($ccats);</span>
<a name="l1389"><span class="linenum">1389</span></a>      if( ! empty( <a class="var it1152" onMouseOver="hilite(1152)" onMouseOut="lolite()" onClick="logVariable('ccats')" href="../../../_variables/ccats.html">$ccats</a> ) ) // this can happen if there are no cats at all!
<a name="l1390"><span class="linenum">1390</span></a>      {
<a name="l1391"><span class="linenum">1391</span></a>          <a class="var it1159" onMouseOver="hilite(1159)" onMouseOut="lolite()" onClick="logVariable('child_count')" href="../../../_variables/child_count.html">$child_count</a> = 0;
<a name="l1392"><span class="linenum">1392</span></a>          foreach( <a class="var it1152" onMouseOver="hilite(1152)" onMouseOut="lolite()" onClick="logVariable('ccats')" href="../../../_variables/ccats.html">$ccats</a> as <a class="var it1147" onMouseOver="hilite(1147)" onMouseOut="lolite()" onClick="logVariable('icat_ID')" href="../../../_variables/icat_ID.html">$icat_ID</a> =&gt; <a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a> )
<a name="l1393"><span class="linenum">1393</span></a>          {
<a name="l1394"><span class="linenum">1394</span></a>  <span class="comment">            // fp&gt; TODO: check what ($blog_ID == 0) is for .. ?</span>
<a name="l1395"><span class="linenum">1395</span></a>              if( <a class="var it1147" onMouseOver="hilite(1147)" onMouseOut="lolite()" onClick="logVariable('icat_ID')" href="../../../_variables/icat_ID.html">$icat_ID</a>
<a name="l1396"><span class="linenum">1396</span></a>                  &amp;&amp; ( (<a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> == 0) || (<a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>['cat_blog_ID'] == <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>))
<a name="l1397"><span class="linenum">1397</span></a>                  &amp;&amp; (<a class="var it1148" onMouseOver="hilite(1148)" onMouseOut="lolite()" onClick="logVariable('i_cat')" href="../../../_variables/i_cat.html">$i_cat</a>['cat_parent_ID'] == <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('parent_ID')" href="../../../_variables/parent_ID.html">$parent_ID</a>) )
<a name="l1398"><span class="linenum">1398</span></a>              { // this cat is in the blog and is a child of the parent
<a name="l1399"><span class="linenum">1399</span></a>                  <a class="var it1159" onMouseOver="hilite(1159)" onMouseOut="lolite()" onClick="logVariable('child_count')" href="../../../_variables/child_count.html">$child_count</a>++;
<a name="l1400"><span class="linenum">1400</span></a>  
<a name="l1401"><span class="linenum">1401</span></a>                  <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a> .= '&lt;option value=&quot;'.<a class="var it1147" onMouseOver="hilite(1147)" onMouseOut="lolite()" onClick="logVariable('icat_ID')" href="../../../_variables/icat_ID.html">$icat_ID</a>.'&quot;&gt;';
<a name="l1402"><span class="linenum">1402</span></a>  
<a name="l1403"><span class="linenum">1403</span></a>                  for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 0; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt; <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../_variables/level.html">$level</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ )
<a name="l1404"><span class="linenum">1404</span></a>                  {
<a name="l1405"><span class="linenum">1405</span></a>                      <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a> .= '-';
<a name="l1406"><span class="linenum">1406</span></a>                  }
<a name="l1407"><span class="linenum">1407</span></a>  
<a name="l1408"><span class="linenum">1408</span></a>                  <a class="var it1961" onMouseOver="hilite(1961)" onMouseOut="lolite()" onClick="logVariable('cache_optionslist')" href="../../../_variables/cache_optionslist.html">$cache_optionslist</a> .= '&amp;gt; '.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1152" onMouseOver="hilite(1152)" onMouseOut="lolite()" onClick="logVariable('ccats')" href="../../../_variables/ccats.html">$ccats</a>[ <a class="var it1147" onMouseOver="hilite(1147)" onMouseOut="lolite()" onClick="logVariable('icat_ID')" href="../../../_variables/icat_ID.html">$icat_ID</a> ]['cat_name'], 'entityencoded' ).'&lt;/option&gt;';
<a name="l1409"><span class="linenum">1409</span></a>  
<a name="l1410"><span class="linenum">1410</span></a>                  <a class="function" onClick="logFunction('cat_children2')" href="../../../_functions/cat_children2.html" onMouseOver="funcPopup(event,'cat_children2')">cat_children2</a>( <a class="var it1152" onMouseOver="hilite(1152)" onMouseOut="lolite()" onClick="logVariable('ccats')" href="../../../_variables/ccats.html">$ccats</a>, <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, <a class="var it1147" onMouseOver="hilite(1147)" onMouseOut="lolite()" onClick="logVariable('icat_ID')" href="../../../_variables/icat_ID.html">$icat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../_variables/level.html">$level</a>+1 );
<a name="l1411"><span class="linenum">1411</span></a>              }
<a name="l1412"><span class="linenum">1412</span></a>          }
<a name="l1413"><span class="linenum">1413</span></a>      }
<a name="l1414"><span class="linenum">1414</span></a>  }
<a name="l1415"><span class="linenum">1415</span></a>  
<a name="l1416"><span class="linenum">1416</span></a>  
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment">/**</span>
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment"> * extracts unique authors and cats from posts array</span>
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment"> */</span>
<a name="l1420"><span class="linenum">1420</span></a>  function <a class="function" onClick="logFunction('import_data_extract_authors_cats')" href="../../../_functions/import_data_extract_authors_cats.html" onMouseOver="funcPopup(event,'import_data_extract_authors_cats')">import_data_extract_authors_cats</a>()
<a name="l1421"><span class="linenum">1421</span></a>  {
<a name="l1422"><span class="linenum">1422</span></a>      global <a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a>, <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>, <a class="var it653" onMouseOver="hilite(653)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../../_variables/posts.html">$posts</a>;
<a name="l1423"><span class="linenum">1423</span></a>      global <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>;
<a name="l1424"><span class="linenum">1424</span></a>      global <a class="var it1888" onMouseOver="hilite(1888)" onMouseOut="lolite()" onClick="logVariable('categories_countprim')" href="../../../_variables/categories_countprim.html">$categories_countprim</a>;
<a name="l1425"><span class="linenum">1425</span></a>      global <a class="var it1898" onMouseOver="hilite(1898)" onMouseOut="lolite()" onClick="logVariable('importdata')" href="../../../_variables/importdata.html">$importdata</a>;
<a name="l1426"><span class="linenum">1426</span></a>      global <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a>;
<a name="l1427"><span class="linenum">1427</span></a>      global <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a>;
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>      <a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a> = fopen( <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>, 'rb');
<a name="l1430"><span class="linenum">1430</span></a>  <span class="comment">//slamp_080609_begin: to avoid warning when importing file with 0 bytes of data</span>
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">//    $buffer = fread($fp, filesize( $exportedfile ));</span>
<a name="l1432"><span class="linenum">1432</span></a>      <a class="var it1016" onMouseOver="hilite(1016)" onMouseOut="lolite()" onClick="logVariable('buffer')" href="../../../_variables/buffer.html">$buffer</a> = '';
<a name="l1433"><span class="linenum">1433</span></a>      <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a> = <a class="phpfunction" onClick="logFunction('filesize')" href="../../../_functions/filesize.html" onMouseOver="phpfuncPopup(event,'filesize')">filesize</a>(<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>);
<a name="l1434"><span class="linenum">1434</span></a>      if(<a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a>)
<a name="l1435"><span class="linenum">1435</span></a>      {
<a name="l1436"><span class="linenum">1436</span></a>            <a class="var it1016" onMouseOver="hilite(1016)" onMouseOut="lolite()" onClick="logVariable('buffer')" href="../../../_variables/buffer.html">$buffer</a> = <a class="phpfunction" onClick="logFunction('fread')" href="../../../_functions/fread.html" onMouseOver="phpfuncPopup(event,'fread')">fread</a>(<a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a>, <a class="var it1090" onMouseOver="hilite(1090)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../../_variables/length.html">$length</a>);
<a name="l1437"><span class="linenum">1437</span></a>      }
<a name="l1438"><span class="linenum">1438</span></a>  <span class="comment">//slamp_080609_end</span>
<a name="l1439"><span class="linenum">1439</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it1963" onMouseOver="hilite(1963)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../_variables/fp.html">$fp</a>);
<a name="l1440"><span class="linenum">1440</span></a>      if( !<a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/^[-\s]*AUTHOR: /', <a class="var it1016" onMouseOver="hilite(1016)" onMouseOut="lolite()" onClick="logVariable('buffer')" href="../../../_variables/buffer.html">$buffer</a> ) )
<a name="l1441"><span class="linenum">1441</span></a>      {
<a name="l1442"><span class="linenum">1442</span></a>          <a class="function" onClick="logFunction('dieerror')" href="../../../_functions/dieerror.html" onMouseOver="funcPopup(event,'dieerror')">dieerror</a>(&quot;The file [<a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>] does not seem to be a MT exported file.. &quot;.'[&lt;a href=&quot;'.<a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=mtimport&amp;amp;import_mode='.<a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a>.'&quot;&gt;choose another export-file&lt;/a&gt;]');
<a name="l1443"><span class="linenum">1443</span></a>      }
<a name="l1444"><span class="linenum">1444</span></a>  
<a name="l1445"><span class="linenum">1445</span></a>      <a class="var it1898" onMouseOver="hilite(1898)" onMouseOut="lolite()" onClick="logVariable('importdata')" href="../../../_variables/importdata.html">$importdata</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( &quot;/\r?\n|\r/&quot;, &quot;\n&quot;, <a class="var it1016" onMouseOver="hilite(1016)" onMouseOut="lolite()" onClick="logVariable('buffer')" href="../../../_variables/buffer.html">$buffer</a> );
<a name="l1446"><span class="linenum">1446</span></a>      <a class="var it653" onMouseOver="hilite(653)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../../_variables/posts.html">$posts</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>( '/(^|--------\n)(AUTHOR: |$)/', <a class="var it1898" onMouseOver="hilite(1898)" onMouseOut="lolite()" onClick="logVariable('importdata')" href="../../../_variables/importdata.html">$importdata</a> );
<a name="l1447"><span class="linenum">1447</span></a>  
<a name="l1448"><span class="linenum">1448</span></a>      <a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a> = array(); <a class="var it1964" onMouseOver="hilite(1964)" onMouseOut="lolite()" onClick="logVariable('tempauthors')" href="../../../_variables/tempauthors.html">$tempauthors</a> = array();
<a name="l1449"><span class="linenum">1449</span></a>      <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a> = array(); <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a> = array();
<a name="l1450"><span class="linenum">1450</span></a>  
<a name="l1451"><span class="linenum">1451</span></a>      foreach (<a class="var it653" onMouseOver="hilite(653)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../../_variables/posts.html">$posts</a> as <a class="var it1966" onMouseOver="hilite(1966)" onMouseOut="lolite()" onClick="logVariable('nr')" href="../../../_variables/nr.html">$nr</a> =&gt; <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>)
<a name="l1452"><span class="linenum">1452</span></a>      {
<a name="l1453"><span class="linenum">1453</span></a>          if ('' != <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>))
<a name="l1454"><span class="linenum">1454</span></a>          {
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">            // first line is author of post</span>
<a name="l1456"><span class="linenum">1456</span></a>              <a class="var it1964" onMouseOver="hilite(1964)" onMouseOut="lolite()" onClick="logVariable('tempauthors')" href="../../../_variables/tempauthors.html">$tempauthors</a>[] = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('substr')" href="../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, 0, <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, &quot;\n&quot;, 1 ) ) );
<a name="l1457"><span class="linenum">1457</span></a>  
<a name="l1458"><span class="linenum">1458</span></a>              <a class="var it1967" onMouseOver="hilite(1967)" onMouseOut="lolite()" onClick="logVariable('oldcatcount')" href="../../../_variables/oldcatcount.html">$oldcatcount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a> );
<a name="l1459"><span class="linenum">1459</span></a>  
<a name="l1460"><span class="linenum">1460</span></a>              if( <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>( &quot;/^(PRIMARY )?CATEGORY: (.*)/m&quot;, <a class="var it798" onMouseOver="hilite(798)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>, <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a> ) )
<a name="l1461"><span class="linenum">1461</span></a>              {
<a name="l1462"><span class="linenum">1462</span></a>                  for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 1; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[2] ); <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ )
<a name="l1463"><span class="linenum">1463</span></a>                  {
<a name="l1464"><span class="linenum">1464</span></a>                      <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[2][<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>] );
<a name="l1465"><span class="linenum">1465</span></a>                      if( !empty( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a> ) ) <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a>[] = <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>;
<a name="l1466"><span class="linenum">1466</span></a>                  }
<a name="l1467"><span class="linenum">1467</span></a>  
<a name="l1468"><span class="linenum">1468</span></a>  <span class="comment">                // main category last (-&gt; counter)</span>
<a name="l1469"><span class="linenum">1469</span></a>                  if( !empty(<a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[2][0]) ) <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a>[] = <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[2][0];
<a name="l1470"><span class="linenum">1470</span></a>              }
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>              if( <a class="var it1967" onMouseOver="hilite(1967)" onMouseOut="lolite()" onClick="logVariable('oldcatcount')" href="../../../_variables/oldcatcount.html">$oldcatcount</a> == <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a> ) )
<a name="l1473"><span class="linenum">1473</span></a>              {
<a name="l1474"><span class="linenum">1474</span></a>                  <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a>[] = '[no category assigned]';
<a name="l1475"><span class="linenum">1475</span></a>              }
<a name="l1476"><span class="linenum">1476</span></a>  
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment">            // remember how many times used as primary category</span>
<a name="l1478"><span class="linenum">1478</span></a>              @<a class="var it1888" onMouseOver="hilite(1888)" onMouseOut="lolite()" onClick="logVariable('categories_countprim')" href="../../../_variables/categories_countprim.html">$categories_countprim</a>[ <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a>[ <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a> )-1 ] ]++;
<a name="l1479"><span class="linenum">1479</span></a>          }
<a name="l1480"><span class="linenum">1480</span></a>          else
<a name="l1481"><span class="linenum">1481</span></a>          {
<a name="l1482"><span class="linenum">1482</span></a>              unset( <a class="var it653" onMouseOver="hilite(653)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../../_variables/posts.html">$posts</a>[ <a class="var it1966" onMouseOver="hilite(1966)" onMouseOut="lolite()" onClick="logVariable('nr')" href="../../../_variables/nr.html">$nr</a> ] );
<a name="l1483"><span class="linenum">1483</span></a>          }
<a name="l1484"><span class="linenum">1484</span></a>      }
<a name="l1485"><span class="linenum">1485</span></a>  
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment">    // we need to find unique values of author names, while preserving the order, so this function emulates the unique_value(); php function, without the sorting.</span>
<a name="l1487"><span class="linenum">1487</span></a>      <a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a>[0] = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1964" onMouseOver="hilite(1964)" onMouseOut="lolite()" onClick="logVariable('tempauthors')" href="../../../_variables/tempauthors.html">$tempauthors</a>);
<a name="l1488"><span class="linenum">1488</span></a>      <a class="var it1507" onMouseOver="hilite(1507)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../_variables/y.html">$y</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1964" onMouseOver="hilite(1964)" onMouseOut="lolite()" onClick="logVariable('tempauthors')" href="../../../_variables/tempauthors.html">$tempauthors</a>) + 1;
<a name="l1489"><span class="linenum">1489</span></a>      for (<a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../_variables/x.html">$x</a> = 1; <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../_variables/x.html">$x</a> &lt; <a class="var it1507" onMouseOver="hilite(1507)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../_variables/y.html">$y</a>; <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../_variables/x.html">$x</a>++)
<a name="l1490"><span class="linenum">1490</span></a>      {
<a name="l1491"><span class="linenum">1491</span></a>          <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../../_variables/next.html">$next</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1964" onMouseOver="hilite(1964)" onMouseOut="lolite()" onClick="logVariable('tempauthors')" href="../../../_variables/tempauthors.html">$tempauthors</a>);
<a name="l1492"><span class="linenum">1492</span></a>          if( !(<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../../_variables/next.html">$next</a>,<a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a>)) ) <a class="var it513" onMouseOver="hilite(513)" onMouseOut="lolite()" onClick="logVariable('authors')" href="../../../_variables/authors.html">$authors</a>[] = <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../../_variables/next.html">$next</a>;
<a name="l1493"><span class="linenum">1493</span></a>      }
<a name="l1494"><span class="linenum">1494</span></a>      <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>[0] = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>( <a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a> );
<a name="l1495"><span class="linenum">1495</span></a>      <a class="var it1507" onMouseOver="hilite(1507)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../_variables/y.html">$y</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a>) + 1;
<a name="l1496"><span class="linenum">1496</span></a>      for (<a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../_variables/x.html">$x</a> = 1; <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../_variables/x.html">$x</a> &lt; <a class="var it1507" onMouseOver="hilite(1507)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../_variables/y.html">$y</a>; <a class="var it1508" onMouseOver="hilite(1508)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../_variables/x.html">$x</a>++)
<a name="l1497"><span class="linenum">1497</span></a>      {
<a name="l1498"><span class="linenum">1498</span></a>          <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../../_variables/next.html">$next</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1965" onMouseOver="hilite(1965)" onMouseOut="lolite()" onClick="logVariable('tempcategories')" href="../../../_variables/tempcategories.html">$tempcategories</a>);
<a name="l1499"><span class="linenum">1499</span></a>          if( !(<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../../_variables/next.html">$next</a>, <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>)) ) <a class="var it786" onMouseOver="hilite(786)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>[] = <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../../_variables/next.html">$next</a>;
<a name="l1500"><span class="linenum">1500</span></a>      }
<a name="l1501"><span class="linenum">1501</span></a>  }
<a name="l1502"><span class="linenum">1502</span></a>  
<a name="l1503"><span class="linenum">1503</span></a>  
<a name="l1504"><span class="linenum">1504</span></a>  <span class="comment">/**</span>
<a name="l1505"><span class="linenum">1505</span></a>  <span class="comment"> * Outputs a list of available renderers (not necessarily installed).</span>
<a name="l1506"><span class="linenum">1506</span></a>  <span class="comment"> */</span>
<a name="l1507"><span class="linenum">1507</span></a>  function <a class="function" onClick="logFunction('renderer_list')" href="../../../_functions/renderer_list.html" onMouseOver="funcPopup(event,'renderer_list')">renderer_list</a>( &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> )
<a name="l1508"><span class="linenum">1508</span></a>  {
<a name="l1509"><span class="linenum">1509</span></a>      global <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a>;
<a name="l1510"><span class="linenum">1510</span></a>  
<a name="l1511"><span class="linenum">1511</span></a>      <a class="var it1968" onMouseOver="hilite(1968)" onMouseOut="lolite()" onClick="logVariable('admin_Plugins')" href="../../../_variables/admin_Plugins.html">$admin_Plugins</a> = &amp; get_Plugins_admin(); <span class="comment">// use Plugins_admin, because a plugin might be disabled</span>
<a name="l1512"><span class="linenum">1512</span></a>      <a class="var it1968" onMouseOver="hilite(1968)" onMouseOut="lolite()" onClick="logVariable('admin_Plugins')" href="../../../_variables/admin_Plugins.html">$admin_Plugins</a>-&gt;<a class="function" onClick="logFunction('discover')" href="../../../_functions/discover.html" onMouseOver="funcPopup(event,'discover')">discover</a>();
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> = array('default');
<a name="l1515"><span class="linenum">1515</span></a>      <a class="var it1968" onMouseOver="hilite(1968)" onMouseOut="lolite()" onClick="logVariable('admin_Plugins')" href="../../../_variables/admin_Plugins.html">$admin_Plugins</a>-&gt;<a class="function" onClick="logFunction('restart')" href="../../../_functions/restart.html" onMouseOver="funcPopup(event,'restart')">restart</a>();     <span class="comment">// make sure iterator is at start position</span>
<a name="l1516"><span class="linenum">1516</span></a>      while( <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a> = &amp; <a class="var it1968" onMouseOver="hilite(1968)" onMouseOut="lolite()" onClick="logVariable('admin_Plugins')" href="../../../_variables/admin_Plugins.html">$admin_Plugins</a>-&gt;get_next() )
<a name="l1517"><span class="linenum">1517</span></a>      { // Go through whole list of renders
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">        // echo ' ',$loop_RendererPlugin-&gt;code;</span>
<a name="l1519"><span class="linenum">1519</span></a>          if( empty(<a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('code')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a>) )
<a name="l1520"><span class="linenum">1520</span></a>          { // No unique code!
<a name="l1521"><span class="linenum">1521</span></a>              continue;
<a name="l1522"><span class="linenum">1522</span></a>          }
<a name="l1523"><span class="linenum">1523</span></a>  
<a name="l1524"><span class="linenum">1524</span></a>          <a class="var it1970" onMouseOver="hilite(1970)" onMouseOut="lolite()" onClick="logVariable('apply_rendering')" href="../../../_variables/apply_rendering.html">$apply_rendering</a> = <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a class="function" onClick="logFunction('get_coll_setting')" href="../../../_functions/get_coll_setting.html" onMouseOver="funcPopup(event,'get_coll_setting')">get_coll_setting</a>( 'coll_apply_rendering', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> );
<a name="l1525"><span class="linenum">1525</span></a>          if( <a class="var it1970" onMouseOver="hilite(1970)" onMouseOut="lolite()" onClick="logVariable('apply_rendering')" href="../../../_variables/apply_rendering.html">$apply_rendering</a> == 'stealth'
<a name="l1526"><span class="linenum">1526</span></a>              || <a class="var it1970" onMouseOver="hilite(1970)" onMouseOut="lolite()" onClick="logVariable('apply_rendering')" href="../../../_variables/apply_rendering.html">$apply_rendering</a> == 'never' )
<a name="l1527"><span class="linenum">1527</span></a>          {    // This is not an option.
<a name="l1528"><span class="linenum">1528</span></a>              continue;
<a name="l1529"><span class="linenum">1529</span></a>          }
<a name="l1530"><span class="linenum">1530</span></a>          elseif( <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('code')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a> == 'b2WPAutP' )
<a name="l1531"><span class="linenum">1531</span></a>          { // special Auto-P plugin
<a name="l1532"><span class="linenum">1532</span></a>              ?&gt;
<a name="l1533"><span class="linenum">1533</span></a>              &lt;fieldset&gt;
<a name="l1534"><span class="linenum">1534</span></a>                  &lt;label for=&quot;textile&quot; title=&quot;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('short_desc')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/short_desc.html">short_desc</a>, 'formvalue'); ?&gt;&quot;&gt;&lt;strong&gt;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('name')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/name.html">name</a>) ?&gt;:&lt;/strong&gt;&lt;/label&gt;
<a name="l1535"><span class="linenum">1535</span></a>                  &lt;div style=&quot;margin-left:2ex&quot; /&gt;
<a name="l1536"><span class="linenum">1536</span></a>                  &lt;input type=&quot;radio&quot; name=&quot;autop&quot; value=&quot;1&quot; class=&quot;checkbox&quot; checked=&quot;checked&quot; /&gt; yes (always)&lt;br&gt;
<a name="l1537"><span class="linenum">1537</span></a>                  &lt;input type=&quot;radio&quot; name=&quot;autop&quot; value=&quot;0&quot; class=&quot;checkbox&quot; /&gt; no (never)&lt;br&gt;
<a name="l1538"><span class="linenum">1538</span></a>                  &lt;input type=&quot;radio&quot; name=&quot;autop&quot; value=&quot;depends&quot; class=&quot;checkbox&quot; /&gt; depends on CONVERT BREAKS
<a name="l1539"><span class="linenum">1539</span></a>                  &lt;span class=&quot;notes&quot;&gt; ..that means it will apply if convert breaks results to true (set to either 1, textile_2 or __DEFAULT__ (and &amp;quot;Convert-breaks default&amp;quot; checked above)&lt;/span&gt;
<a name="l1540"><span class="linenum">1540</span></a>  
<a name="l1541"><span class="linenum">1541</span></a>                  &lt;/div&gt;
<a name="l1542"><span class="linenum">1542</span></a>              &lt;/fieldset&gt;
<a name="l1543"><span class="linenum">1543</span></a>              &lt;?php
<a name="l1544"><span class="linenum">1544</span></a>              continue;
<a name="l1545"><span class="linenum">1545</span></a>          }
<a name="l1546"><span class="linenum">1546</span></a>          ?&gt;
<a name="l1547"><span class="linenum">1547</span></a>          &lt;div&gt;
<a name="l1548"><span class="linenum">1548</span></a>              &lt;input type=&quot;checkbox&quot; class=&quot;checkbox&quot; name=&quot;renderers[]&quot;
<a name="l1549"><span class="linenum">1549</span></a>                  value=&quot;&lt;?php echo <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('code')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a> ?&gt;&quot; id=&quot;&lt;?php echo <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('code')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a> ?&gt;&quot;
<a name="l1550"><span class="linenum">1550</span></a>                  &lt;?php
<a name="l1551"><span class="linenum">1551</span></a>                  switch( <a class="var it1970" onMouseOver="hilite(1970)" onMouseOut="lolite()" onClick="logVariable('apply_rendering')" href="../../../_variables/apply_rendering.html">$apply_rendering</a> )
<a name="l1552"><span class="linenum">1552</span></a>                  {
<a name="l1553"><span class="linenum">1553</span></a>                      case 'always':
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">                        // echo 'FORCED';</span>
<a name="l1555"><span class="linenum">1555</span></a>                          echo ' checked=&quot;checked&quot;';
<a name="l1556"><span class="linenum">1556</span></a>                          echo ' disabled=&quot;disabled&quot;';
<a name="l1557"><span class="linenum">1557</span></a>                          break;
<a name="l1558"><span class="linenum">1558</span></a>  
<a name="l1559"><span class="linenum">1559</span></a>                      case 'opt-out':
<a name="l1560"><span class="linenum">1560</span></a>                          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('code')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> ) // Option is activated
<a name="l1561"><span class="linenum">1561</span></a>                              || <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'default', <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> ) ) // OR we're asking for default renderer set
<a name="l1562"><span class="linenum">1562</span></a>                          {
<a name="l1563"><span class="linenum">1563</span></a>  <span class="comment">                            // echo 'OPT';</span>
<a name="l1564"><span class="linenum">1564</span></a>                              echo ' checked=&quot;checked&quot;';
<a name="l1565"><span class="linenum">1565</span></a>                          }
<a name="l1566"><span class="linenum">1566</span></a>  <span class="comment">                        // else echo 'NO';</span>
<a name="l1567"><span class="linenum">1567</span></a>                          break;
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>                      case 'opt-in':
<a name="l1570"><span class="linenum">1570</span></a>                          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('code')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> ) ) // Option is activated
<a name="l1571"><span class="linenum">1571</span></a>                          {
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment">                            // echo 'OPT';</span>
<a name="l1573"><span class="linenum">1573</span></a>                              echo ' checked=&quot;checked&quot;';
<a name="l1574"><span class="linenum">1574</span></a>                          }
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment">                        // else echo 'NO';</span>
<a name="l1576"><span class="linenum">1576</span></a>                          break;
<a name="l1577"><span class="linenum">1577</span></a>  
<a name="l1578"><span class="linenum">1578</span></a>                      case 'lazy':
<a name="l1579"><span class="linenum">1579</span></a>  <span class="comment">                        // cannot select</span>
<a name="l1580"><span class="linenum">1580</span></a>                          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('code')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> ) ) // Option is activated
<a name="l1581"><span class="linenum">1581</span></a>                          {
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">                            // echo 'OPT';</span>
<a name="l1583"><span class="linenum">1583</span></a>                              echo ' checked=&quot;checked&quot;';
<a name="l1584"><span class="linenum">1584</span></a>                          }
<a name="l1585"><span class="linenum">1585</span></a>                          echo ' disabled=&quot;disabled&quot;';
<a name="l1586"><span class="linenum">1586</span></a>                          break;
<a name="l1587"><span class="linenum">1587</span></a>                  }
<a name="l1588"><span class="linenum">1588</span></a>              ?&gt;
<a name="l1589"><span class="linenum">1589</span></a>              title=&quot;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('short_desc')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/short_desc.html">short_desc</a>, 'formvalue' ) ?&gt;&quot; /&gt;
<a name="l1590"><span class="linenum">1590</span></a>          &lt;label for=&quot;&lt;?php echo <a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('code')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/code.html">code</a> ?&gt;&quot; title=&quot;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('short_desc')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/short_desc.html">short_desc</a>, 'formvalue'); ?&gt;&quot;&gt;&lt;strong&gt;&lt;?php echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>(<a class="var it1969" onMouseOver="hilite(1969)" onMouseOut="lolite()" onClick="logVariable('loop_RendererPlugin')" href="../../../_variables/loop_RendererPlugin.html">$loop_RendererPlugin</a>-&gt;<a onClick="logVariable('name')" class="var it8979" onMouseOver="hilite(8979)" onMouseOut="lolite()" href="../../../_variables/name.html">name</a>); ?&gt;&lt;/strong&gt;&lt;/label&gt;
<a name="l1591"><span class="linenum">1591</span></a>      &lt;/div&gt;
<a name="l1592"><span class="linenum">1592</span></a>      &lt;?php
<a name="l1593"><span class="linenum">1593</span></a>      }
<a name="l1594"><span class="linenum">1594</span></a>  }
<a name="l1595"><span class="linenum">1595</span></a>  
<a name="l1596"><span class="linenum">1596</span></a>  
<a name="l1597"><span class="linenum">1597</span></a>  <span class="comment">/**</span>
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment"> * Die with a message.</span>
<a name="l1599"><span class="linenum">1599</span></a>  <span class="comment"> *</span>
<a name="l1600"><span class="linenum">1600</span></a>  <span class="comment"> * @param string the message (wrapped in div and p tag of class error)</span>
<a name="l1601"><span class="linenum">1601</span></a>  <span class="comment"> * @param string optional head</span>
<a name="l1602"><span class="linenum">1602</span></a>  <span class="comment"> */</span>
<a name="l1603"><span class="linenum">1603</span></a>  function <a class="function" onClick="logFunction('dieerror')" href="../../../_functions/dieerror.html" onMouseOver="funcPopup(event,'dieerror')">dieerror</a>( <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>, <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '' )
<a name="l1604"><span class="linenum">1604</span></a>  {
<a name="l1605"><span class="linenum">1605</span></a>      if( !empty(<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>) )
<a name="l1606"><span class="linenum">1606</span></a>          echo <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>      die( '&lt;div class=&quot;error&quot;&gt;&lt;p class=&quot;error&quot;&gt;'.<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>.'&lt;/p&gt;&lt;/div&gt;
<a name="l1609"><span class="linenum">1609</span></a>      &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;' );
<a name="l1610"><span class="linenum">1610</span></a>  }
<a name="l1611"><span class="linenum">1611</span></a>  
<a name="l1612"><span class="linenum">1612</span></a>  
<a name="l1613"><span class="linenum">1613</span></a>  function <a class="function" onClick="logFunction('debug_dump')" href="../../../_functions/debug_dump.html" onMouseOver="funcPopup(event,'debug_dump')">debug_dump</a>( <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '' )
<a name="l1614"><span class="linenum">1614</span></a>  {
<a name="l1615"><span class="linenum">1615</span></a>      global <a class="var it1878" onMouseOver="hilite(1878)" onMouseOut="lolite()" onClick="logVariable('output_debug_dump')" href="../../../_variables/output_debug_dump.html">$output_debug_dump</a>;
<a name="l1616"><span class="linenum">1616</span></a>  
<a name="l1617"><span class="linenum">1617</span></a>      if( <a class="var it1878" onMouseOver="hilite(1878)" onMouseOut="lolite()" onClick="logVariable('output_debug_dump')" href="../../../_variables/output_debug_dump.html">$output_debug_dump</a> )
<a name="l1618"><span class="linenum">1618</span></a>      {
<a name="l1619"><span class="linenum">1619</span></a>          <a class="function" onClick="logFunction('pre_dump')" href="../../../_functions/pre_dump.html" onMouseOver="funcPopup(event,'pre_dump')">pre_dump</a>( <a class="var it1971" onMouseOver="hilite(1971)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> );
<a name="l1620"><span class="linenum">1620</span></a>      }
<a name="l1621"><span class="linenum">1621</span></a>  }
<a name="l1622"><span class="linenum">1622</span></a>  
<a name="l1623"><span class="linenum">1623</span></a>  
<a name="l1624"><span class="linenum">1624</span></a>  function <a class="function" onClick="logFunction('chooseexportfile')" href="../../../_functions/chooseexportfile.html" onMouseOver="funcPopup(event,'chooseexportfile')">chooseexportfile</a>()
<a name="l1625"><span class="linenum">1625</span></a>  {
<a name="l1626"><span class="linenum">1626</span></a>      global <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a>, <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a>, <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a>;
<a name="l1627"><span class="linenum">1627</span></a>  
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment">    // Go through directory:</span>
<a name="l1629"><span class="linenum">1629</span></a>      <a class="var it1972" onMouseOver="hilite(1972)" onMouseOut="lolite()" onClick="logVariable('this_dir')" href="../../../_variables/this_dir.html">$this_dir</a> = dir( <a class="constant" onClick="logConstant('IMPORT_SRC_DIR')" href="../../../_constants/IMPORT_SRC_DIR.html" onMouseOver="constPopup(event,'IMPORT_SRC_DIR')">IMPORT_SRC_DIR</a> );
<a name="l1630"><span class="linenum">1630</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l1631"><span class="linenum">1631</span></a>      while( <a class="var it1973" onMouseOver="hilite(1973)" onMouseOut="lolite()" onClick="logVariable('this_file')" href="../../../_variables/this_file.html">$this_file</a> = <a class="var it1972" onMouseOver="hilite(1972)" onMouseOut="lolite()" onClick="logVariable('this_dir')" href="../../../_variables/this_dir.html">$this_dir</a>-&gt;<a class="function" onClick="logFunction('read')" href="../../../_functions/read.html" onMouseOver="funcPopup(event,'read')">read</a>() )
<a name="l1632"><span class="linenum">1632</span></a>      {
<a name="l1633"><span class="linenum">1633</span></a>          if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/^.+\.txt$/i', <a class="var it1973" onMouseOver="hilite(1973)" onMouseOut="lolite()" onClick="logVariable('this_file')" href="../../../_variables/this_file.html">$this_file</a> ) )
<a name="l1634"><span class="linenum">1634</span></a>          {
<a name="l1635"><span class="linenum">1635</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;option value=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1973" onMouseOver="hilite(1973)" onMouseOut="lolite()" onClick="logVariable('this_file')" href="../../../_variables/this_file.html">$this_file</a>, 'formvalue' ).'&quot;';
<a name="l1636"><span class="linenum">1636</span></a>              if( <a class="var it1884" onMouseOver="hilite(1884)" onMouseOut="lolite()" onClick="logVariable('exportedfile')" href="../../../_variables/exportedfile.html">$exportedfile</a> == <a class="var it1973" onMouseOver="hilite(1973)" onMouseOut="lolite()" onClick="logVariable('this_file')" href="../../../_variables/this_file.html">$this_file</a> ) <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' selected=&quot;selected&quot;';
<a name="l1637"><span class="linenum">1637</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1973" onMouseOver="hilite(1973)" onMouseOut="lolite()" onClick="logVariable('this_file')" href="../../../_variables/this_file.html">$this_file</a>, 'entityencoded' ).'&lt;/option&gt;';
<a name="l1638"><span class="linenum">1638</span></a>          }
<a name="l1639"><span class="linenum">1639</span></a>      }
<a name="l1640"><span class="linenum">1640</span></a>  
<a name="l1641"><span class="linenum">1641</span></a>      if( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> )
<a name="l1642"><span class="linenum">1642</span></a>      {
<a name="l1643"><span class="linenum">1643</span></a>          ?&gt;
<a name="l1644"><span class="linenum">1644</span></a>          &lt;form action=&quot;&lt;?php echo <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../_variables/dispatcher.html">$dispatcher</a> ?&gt;&quot; class=&quot;center&quot;&gt;
<a name="l1645"><span class="linenum">1645</span></a>              &lt;p&gt;First, choose a file to import (.TXT files from the b2evolution base directory):&lt;/p&gt;
<a name="l1646"><span class="linenum">1646</span></a>              &lt;select name=&quot;exportedfile&quot; onChange=&quot;<a class="function" onClick="logFunction('submit')" href="../../../_functions/submit.html" onMouseOver="funcPopup(event,'submit')">submit</a>()&quot;&gt;
<a name="l1647"><span class="linenum">1647</span></a>                  &lt;?php echo <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ?&gt;
<a name="l1648"><span class="linenum">1648</span></a>              &lt;/select&gt;
<a name="l1649"><span class="linenum">1649</span></a>              &lt;input type=&quot;hidden&quot; name=&quot;import_mode&quot; value=&quot;&lt;?php echo <a class="var it1883" onMouseOver="hilite(1883)" onMouseOut="lolite()" onClick="logVariable('import_mode')" href="../../../_variables/import_mode.html">$import_mode</a> ?&gt;&quot; /&gt;
<a name="l1650"><span class="linenum">1650</span></a>              &lt;input type=&quot;hidden&quot; name=&quot;ctrl&quot; value=&quot;mtimport&quot; /&gt;
<a name="l1651"><span class="linenum">1651</span></a>              &lt;input type=&quot;submit&quot; value=&quot;Next step...&quot; class=&quot;search&quot; /&gt;
<a name="l1652"><span class="linenum">1652</span></a>          &lt;/form&gt;
<a name="l1653"><span class="linenum">1653</span></a>          &lt;?php
<a name="l1654"><span class="linenum">1654</span></a>      }
<a name="l1655"><span class="linenum">1655</span></a>      else
<a name="l1656"><span class="linenum">1656</span></a>      { // no file found
<a name="l1657"><span class="linenum">1657</span></a>          ?&gt;
<a name="l1658"><span class="linenum">1658</span></a>          &lt;div class=&quot;error&quot;&gt;
<a name="l1659"><span class="linenum">1659</span></a>          &lt;p class=&quot;center&quot;&gt;No .TXT file found. Nothing to import...&lt;/p&gt;
<a name="l1660"><span class="linenum">1660</span></a>          &lt;p class=&quot;center&quot;&gt;Please copy your Movable Type .TXT export file into &lt;?php echo <a class="function" onClick="logFunction('rel_path_to_base')" href="../../../_functions/rel_path_to_base.html" onMouseOver="funcPopup(event,'rel_path_to_base')">rel_path_to_base</a>(<a class="constant" onClick="logConstant('IMPORT_SRC_DIR')" href="../../../_constants/IMPORT_SRC_DIR.html" onMouseOver="constPopup(event,'IMPORT_SRC_DIR')">IMPORT_SRC_DIR</a>); ?&gt;.&lt;/p&gt;
<a name="l1661"><span class="linenum">1661</span></a>          &lt;/div&gt;
<a name="l1662"><span class="linenum">1662</span></a>          &lt;?php
<a name="l1663"><span class="linenum">1663</span></a>      }
<a name="l1664"><span class="linenum">1664</span></a>  }
<a name="l1665"><span class="linenum">1665</span></a>  
<a name="l1666"><span class="linenum">1666</span></a>  
<a name="l1667"><span class="linenum">1667</span></a>  function <a class="function" onClick="logFunction('ripline')" href="../../../_functions/ripline.html" onMouseOver="funcPopup(event,'ripline')">ripline</a>( <a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>, &amp;<a class="var it145" onMouseOver="hilite(145)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../../_variables/haystack.html">$haystack</a> )
<a name="l1668"><span class="linenum">1668</span></a>  {
<a name="l1669"><span class="linenum">1669</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '|^'.<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>.'(.*)|m', <a class="var it145" onMouseOver="hilite(145)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../../_variables/haystack.html">$haystack</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a> ) )
<a name="l1670"><span class="linenum">1670</span></a>      {
<a name="l1671"><span class="linenum">1671</span></a>          <a class="var it145" onMouseOver="hilite(145)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../../_variables/haystack.html">$haystack</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('|^'.<a class="var it1100" onMouseOver="hilite(1100)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>.&quot;.*\n?|m&quot;, '', <a class="var it145" onMouseOver="hilite(145)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../../_variables/haystack.html">$haystack</a> );
<a name="l1672"><span class="linenum">1672</span></a>          return <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../../_variables/match.html">$match</a>[1] );
<a name="l1673"><span class="linenum">1673</span></a>      }
<a name="l1674"><span class="linenum">1674</span></a>      else return false;
<a name="l1675"><span class="linenum">1675</span></a>  }
<a name="l1676"><span class="linenum">1676</span></a>  
<a name="l1677"><span class="linenum">1677</span></a>  
<a name="l1678"><span class="linenum">1678</span></a>  function <a class="function" onClick="logFunction('tidypostdata')" href="../../../_functions/tidypostdata.html" onMouseOver="funcPopup(event,'tidypostdata')">tidypostdata</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> )
<a name="l1679"><span class="linenum">1679</span></a>  {
<a name="l1680"><span class="linenum">1680</span></a>      return <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array('&amp;quot;', '&amp;#039;', '&amp;lt;', '&amp;gt;'), array('&quot;', &quot;'&quot;, '&lt;', '&gt;'), <a class="function" onClick="logFunction('remove_magic_quotes')" href="../../../_functions/remove_magic_quotes.html" onMouseOver="funcPopup(event,'remove_magic_quotes')">remove_magic_quotes</a>( <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../../_variables/string.html">$string</a> ) );
<a name="l1681"><span class="linenum">1681</span></a>  }
<a name="l1682"><span class="linenum">1682</span></a>  
<a name="l1683"><span class="linenum">1683</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_option_list': ['get_option_list', 'Returns form option list with cache contents ', [['blogs/inc/collections/model','_blogcache.class.php',406],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',752]], 10],
'form_text': ['form_text', 'Builds a text (or password) input field. ', [['blogs/inc/_core/ui/forms','_form.funcs.php',39]], 10],
'blog_has_cats': ['blog_has_cats', 'Does a given blog have categories? ', [['blogs/inc/collections/model','_category.funcs.php',422]], 6],
'evo_flush': ['evo_flush', 'Flush the output buffer ', [['blogs/inc/_core','_misc.funcs.php',6282]], 156],
'comment': ['comment', 'Constructor ', [['blogs/inc/comments/model','_comment.class.php',198]], 18],
'load_class': ['load_class', 'Load class file ', [['blogs/inc/_core','_class4.funcs.php',28],['blogs/inc/_core','_class5.funcs.php',79]], 408],
'renderer_list': ['renderer_list', 'Outputs a list of available renderers (not necessarily installed). ', [['blogs/inc/tools','mtimport.ctrl.php',1504]], 1],
'get': ['get', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',941],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15011],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/media/js','media.js',7],['blogs/inc/links/model','_linkowner.class.php',221],['blogs/inc/_core/model/db','_sql.class.php',64],['blogs/inc/plugins/model','_pluginsettings.class.php',58],['blogs/inc/collections/model','_blog.class.php',1822],['blogs/inc/settings/model','_generalsettings.class.php',383],['blogs/inc/settings/model','_abstractsettings.class.php',271],['blogs/inc/plugins/model','_pluginusersettings.class.php',58],['blogs/inc/users/model','_user.class.php',1126],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_gzip.js',38],['blogs/inc/users/model','_usersettings.class.php',151],['blogs/inc/comments/model','_comment.class.php',301],['blogs/inc/users/model','_groupsettings.class.php',124],['blogs/inc/cron/model','_cronjob.class.php',104],['blogs/inc/items/model','_item.class.php',5742],['blogs/inc/sessions/model','_session.class.php',397],['blogs/inc/links/model','_linkuser.class.php',141],['blogs/inc/links/model','_linkitem.class.php',155],['blogs/inc/slugs/model','_slug.class.php',68],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',574],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['blogs/inc/antispam/model','_iprange.class.php',69],['blogs/inc/links/model','_linkcomment.class.php',132],['blogs/inc/files/model','_file.class.php',532]], 2417],
'get_catname': ['get_catname', 'Get name for a given cat ID. ', [['blogs/inc/tools','mtimport.ctrl.php',1245]], 3],
'categories': ['categories', 'Template function: list all the category names ', [['blogs/inc/items/model','_itemlight.class.php',404]], 35],
'set': ['set', 'Set param value ', [['blogs/inc/users/model','_userfield.class.php',243],['blogs/inc/generic/model','_genericordered.class.php',75],['blogs/inc/users/model','_group.class.php',204],['blogs/inc/items/model','_itemlight.class.php',1258],['blogs/inc/plugins/model','_pluginsettings.class.php',70],['blogs/inc/widgets/model','_widget.class.php',321],['blogs/inc/regional/model','_region.class.php',102],['blogs/inc/regional/model','_city.class.php',110],['blogs/inc/collections/model','_blog.class.php',1102],['blogs/inc/settings/model','_abstractsettings.class.php',446],['blogs/inc/plugins/model','_pluginusersettings.class.php',82],['blogs/inc/users/model','_user.class.php',1861],['blogs/inc/generic/model','_genericcategory.class.php',100],['blogs/inc/tools/model','_emailaddress.class.php',85],['blogs/inc/users/model','_usersettings.class.php',187],['blogs/inc/regional/model','_country.class.php',106],['blogs/inc/comments/model','_comment.class.php',315],['blogs/inc/users/model','_groupsettings.class.php',140],['blogs/inc/cron/model','_cronjob.class.php',79],['blogs/inc/items/model','_item.class.php',4497],['blogs/inc/files/model','_filetype.class.php',149],['blogs/inc/users/model','_userfieldgroup.class.php',92],['blogs/inc/sessions/model','_session.class.php',420],['blogs/plugins','_calendar.plugin.php',530],['blogs/inc/slugs/model','_slug.class.php',80],['blogs/inc/regional/model','_currency.class.php',96],['blogs/inc/messaging/model','_thread.class.php',185],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',614],['blogs/inc/regional/model','_subregion.class.php',119],['blogs/inc/antispam/model','_iprange.class.php',81],['blogs/inc/sessions/model','_goal.class.php',199]], 1121],
'dbinsert': ['dbinsert', 'Insert object into DB based on previously recorded changes. ', [['blogs/inc/chapters/model','_chapter.class.php',287],['blogs/inc/generic/model','_genericordered.class.php',101],['blogs/inc/users/model','_group.class.php',451],['blogs/inc/widgets/model','_widget.class.php',725],['blogs/inc/collections/model','_blog.class.php',2171],['blogs/inc/users/model','_user.class.php',2872],['blogs/inc/skins/model','_skin.class.php',370],['blogs/inc/comments/model','_comment.class.php',3511],['blogs/inc/items/model','_item.class.php',4685],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',210],['blogs/inc/files/model','_file.class.php',1698]], 93],
'ripline': ['ripline', '', [['blogs/inc/tools','mtimport.ctrl.php',1667]], 10],
'restart': ['restart', 'Reset the iterator ', [['blogs/inc/files/model','_filelist.class.php',709],['blogs/inc/_core/ui/results','_results.class.php',397],['blogs/plugins','_archives.plugin.php',582],['blogs/inc/plugins/model','_plugins.class.php',769]], 27],
'get_coll_setting': ['get_coll_setting', '', [['blogs/inc/plugins','_plugin.class.php',3230]], 68],
'import_cat_select_after_each': ['import_cat_select_after_each', '', [['blogs/inc/tools','mtimport.ctrl.php',1316]], 0],
'set_group': ['set_group', 'Set new Group. ', [['blogs/inc/users/model','_user.class.php',1958]], 9],
'cat_load_cache': ['cat_load_cache', 'Load cache for category definitions. ', [['blogs/inc/collections/model','_category.funcs.php',160]], 6],
'get_allow_cross_posting': ['get_allow_cross_posting', 'Get global cross posting settings -- (cross posting = 1 post in multiple blogs) ', [['blogs/inc/collections/model','_category.funcs.php',536]], 14],
'import_cat_select_before_each': ['import_cat_select_before_each', '', [['blogs/inc/tools','mtimport.ctrl.php',1290]], 0],
'dump_queries': ['dump_queries', 'Displays all queries that have been executed ', [['blogs/inc/_core/model/db','_db.class.php',1293]], 2],
'author': ['author', 'Create author cell for message list table ', [['blogs/inc/messaging/views','_message_list.view.php',189],['blogs/inc/comments/model','_comment.class.php',815],['blogs/inc/items/model','_item.class.php',457]], 51],
'cats_optionslist': ['cats_optionslist', '', [['blogs/inc/tools','mtimport.ctrl.php',1346]], 1],
'import_cat_select_before_first': ['import_cat_select_before_first', '', [['blogs/inc/tools','mtimport.ctrl.php',1285]], 0],
'form_select': ['form_select', 'Display a select field and populate it with a callback function. ', [['blogs/inc/_core/ui/forms','_form.funcs.php',96]], 1],
't_': ['t_', 'TRANSLATE! ', [['blogs/inc/locales','_locale.funcs.php',48],['blogs/inc/locales','_locale.funcs.php',240],['blogs/inc/skins/model','_skin.class.php',672],['blogs/inc/_core/model','_module.class.php',79],['blogs/rsc/js','blog_widgets.js',422],['blogs/inc/plugins','_plugin.class.php',2617]], 10201],
'get_duration': ['get_duration', 'Get the duration for a given category in seconds,microseconds (configurable number of decimals) ', [['blogs/inc/_core/model','_timer.class.php',170]], 20],
'chooseexportfile': ['chooseexportfile', '', [['blogs/inc/tools','mtimport.ctrl.php',1624]], 2],
'post': ['post', 'POST wrapper for oAuthRequest. ', [['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',157]], 40],
'autoselect_blog': ['autoselect_blog', 'Check permissions on a given blog (by ID) and autoselect an appropriate blog if necessary. ', [['blogs/inc/collections/model','_blog.funcs.php',235]], 10],
'read': ['read', 'Read a .po file ', [['blogs/inc/locales','_pofile.class.php',103],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/spellchecker/classes/utils','JSON.php',331]], 10],
'set_renderers': ['set_renderers', 'Set the renderers of the Comment. ', [['blogs/inc/comments/model','_comment.class.php',2822],['blogs/inc/items/model','_item.class.php',4562]], 8],
'debug_dump': ['debug_dump', '', [['blogs/inc/tools','mtimport.ctrl.php',1613]], 10],
'get_row': ['get_row', 'Get one row from the DB. ', [['blogs/inc/_core/model/db','_db.class.php',996]], 57],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['blogs/inc/locales','_pofile.class.php',267],['blogs/inc/_core/model/db','_db.class.php',503]], 791],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['blogs/inc/items/model','_itemlist.class.php',256],['blogs/inc/items/model','_itemlistlight.class.php',751],['blogs/inc/_core/model/db','_db.class.php',761],['blogs/inc/users/model','_userlist.class.php',474],['blogs/inc/_core/ui/results','_results.class.php',439],['blogs/inc/comments/model','_commentlist.class.php',515]], 972],
'validate_renderer_list': ['validate_renderer_list', '', [['blogs/inc/plugins/model','_plugins.class.php',1845]], 8],
'user': ['user', 'Constructor ', [['blogs/inc/users/model','_user.class.php',154]], 20],
'blog_load_cache': ['blog_load_cache', '', [['blogs/inc/tools','mtimport.ctrl.php',1223]], 2],
'fieldset_cats': ['fieldset_cats', '', [['blogs/inc/tools','mtimport.ctrl.php',1258]], 1],
'load_funcs': ['load_funcs', '', [['blogs/inc/_core','_misc.funcs.php',115]], 214],
'null': ['null', '', [['blogs/inc/_core/model/db','_db.class.php',534]], 3],
'submit': ['submit', 'Builds a submit input tag ', [['blogs/inc/_core/ui/forms','_form.class.php',2832]], 46],
'dieerror': ['dieerror', 'Die with a message. ', [['blogs/inc/tools','mtimport.ctrl.php',1597]], 7],
'set_max_execution_time': ['set_max_execution_time', 'Set max execution time ', [['blogs/inc/_core','_misc.funcs.php',5658]], 20],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['blogs/inc/users/model','_user.funcs.php',60]], 190],
'set_creator_user': ['set_creator_user', 'Set the Author of the Item. ', [['blogs/inc/items/model','_item.class.php',4574]], 6],
'evo_htmlspecialchars': ['evo_htmlspecialchars', 'Wrapper function for htmlspecialchars to use the $evo_charset as default charset ', [['blogs/inc/_core','_misc.funcs.php',759]], 138],
'discover': ['discover', 'Discover and register all available plugins in the {@link $plugins_path} folder/subfolders. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',329]], 2],
'finish': ['finish', '', [['blogs/inc/_ext/phpsvnclient/ext/Diff','Diff3.php',256],['blogs/inc/_ext/phpsvnclient/ext/Diff/Diff','ThreeWay.php',256]], 5],
'remove_magic_quotes': ['remove_magic_quotes', '', [['blogs/inc/_core','_param.funcs.php',1945],['blogs/inc/_core','_param.funcs.php',1964],['blogs/inc/_core','_param.funcs.php',1996]], 15],
'rel_path_to_base': ['rel_path_to_base', 'Return the path without the leading {@link $basepath}, or if not below {@link $basepath}, just the basename of it. ', [['blogs/inc/files/model','_file.funcs.php',722]], 26],
'import_data_extract_authors_cats': ['import_data_extract_authors_cats', 'extracts unique authors and cats from posts array ', [['blogs/inc/tools','mtimport.ctrl.php',1417]], 2],
'evo_strtolower': ['evo_strtolower', 'mbstring wrapper for strtolower function ', [['blogs/inc/_core','_misc.funcs.php',668]], 56],
'form_checkbox': ['form_checkbox', 'form_checkbox(-) ', [['blogs/inc/_core/ui/forms','_form.funcs.php',172]], 3],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['blogs/inc/_core','_misc.funcs.php',221]], 293],
'cat_children2': ['cat_children2', '', [['blogs/inc/tools','mtimport.ctrl.php',1380]], 2],
'form_select_object': ['form_select_object', 'Display a select field and populate it with a cache object. ', [['blogs/inc/_core/ui/forms','_form.funcs.php',135]], 1],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['blogs/inc/_core/model/db','_db.class.php',1092]], 140],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['blogs/inc/_core/model/db','_db.class.php',961]], 137],
'tidypostdata': ['tidypostdata', '', [['blogs/inc/tools','mtimport.ctrl.php',1678]], 0],
'trackback': ['trackback', 'Send Trackback to single URL ', [['blogs/inc/comments','_trackback.funcs.php',58]], 18],
'cat_children': ['cat_children', 'Taking a recursive walk in the category park... ', [['blogs/inc/collections/model','_category.funcs.php',329]], 5],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['blogs/inc/_core','_param.funcs.php',50]], 1906],
'import_cat_select_after_last': ['import_cat_select_after_last', '', [['blogs/inc/tools','mtimport.ctrl.php',1321]], 0],
'cat_create': ['cat_create', 'Create a new category ', [['blogs/inc/collections/model','_category.funcs.php',48]], 35],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['blogs/inc/_core','_misc.funcs.php',2535]], 216],
'pre_dump': ['pre_dump', 'Wrap pre tag around {@link var_dump()} for better debugging. ', [['blogs/inc/_core','_misc.funcs.php',2253]], 45],
'resume': ['resume', 'Resumes the timer on a category. ', [['blogs/inc/_core/model','_timer.class.php',144]], 43],
'ini_set': ['ini_set', '', [], 29],
'in_array': ['in_array', '', [], 335],
'strip_tags': ['strip_tags', '', [], 61],
'file_exists': ['file_exists', '', [], 121],
'implode': ['implode', '', [], 456],
'strtolower': ['strtolower', '', [], 168],
'preg_split': ['preg_split', '', [], 29],
'define': ['define', '', [], 203],
'defined': ['defined', '', [], 874],
'fread': ['fread', '', [], 71],
'preg_replace': ['preg_replace', '', [], 281],
'count': ['count', '', [], 754],
'strpos': ['strpos', '', [], 280],
'ucwords': ['ucwords', '', [], 4],
'fclose': ['fclose', '', [], 96],
'max': ['max', '', [], 97],
'array_search': ['array_search', '', [], 30],
'is_file': ['is_file', '', [], 24],
'date': ['date', '', [], 361],
'preg_match': ['preg_match', '', [], 363],
'set_magic_quotes_runtime': ['set_magic_quotes_runtime', '', [], 3],
'preg_match_all': ['preg_match_all', '', [], 33],
'is_array': ['is_array', '', [], 243],
'filesize': ['filesize', '', [], 21],
'function_exists': ['function_exists', '', [], 130],
'array_unshift': ['array_unshift', '', [], 77],
'stripslashes': ['stripslashes', '', [], 8],
'strtotime': ['strtotime', '', [], 31],
'str_replace': ['str_replace', '', [], 403],
'substr': ['substr', '', [], 657],
'explode': ['explode', '', [], 249],
'trim': ['trim', '', [], 351],
'array_shift': ['array_shift', '', [], 51]};
CLASS_DATA={
'user': ['user', 'User Class ', [['blogs/inc/users/model','_user.class.php',43]], 126],
'item': ['item', 'Item Class ', [['blogs/inc/items/model','_item.class.php',46]], 92]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['blogs/inc','_main.inc.php',55],['blogs/install','index.php',25],['blogs/install','debug.php',22]], 827],
'MTEXPORT': ['MTEXPORT', '', [['blogs/inc/tools','mtimport.ctrl.php',59]], 9],
'OBJECT': ['OBJECT', '', [['blogs/inc/_core/model/db','_db.class.php',69]], 53],
'IMPORT_SRC_DIR': ['IMPORT_SRC_DIR', '', [['blogs/inc/tools','mtimport.ctrl.php',47]], 3]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Jul  5 12:18:44 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
