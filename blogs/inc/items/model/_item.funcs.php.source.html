<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /blogs/inc/items/model/_item.funcs.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Jul  5 12:18:44 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='blogs/inc/items/model';
filename='_item.funcs.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/blogs/inc/items/model/</a> -> <a href="_item.funcs.php.html">_item.funcs.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_item.funcs.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_item.funcs.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements Post handling functions.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link http://sourceforge.net/projects/evocms/}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @copyright (c)2003-2014 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2006 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> *</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * {@internal License choice</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * - If you have received this file as part of a package, please find the license.txt file in</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> *   the same folder or the closest folder above for complete license terms.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * - If you have received this file individually (e-g: from http://evocms.cvs.sourceforge.net/)</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> *   then you must choose one of the following licenses before using the file:</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> *   - GNU General Public License 2 (GPL) - http://www.opensource.org/licenses/gpl-license.php</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> *   - Mozilla Public License 1.1 (MPL) - http://www.opensource.org/licenses/mozilla1.1.php</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * }}</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * {@internal Open Source relicensing agreement:</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * Daniel HAHLER grants Francois PLANQUE the right to license</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * Daniel HAHLER's contributions to this file and the b2evolution project</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * under any OSI approved OSS license (http://www.opensource.org/licenses/).</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * }}</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> *</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @package evocore</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * {@internal Below is a list of authors who have contributed to design/coding of this file: }}</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @author cafelog (team)</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @author blueyed: Daniel HAHLER.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @author fplanque: Francois PLANQUE.</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @author tswicegood: Travis SWICEGOOD.</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @author vegarg: Vegar BERG GULDAL.</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> *</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @version $Id: _item.funcs.php 6813 2014-05-30 03:35:02Z yura $</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> */</span>
<a name="l37"><span class="linenum">  37</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'items/model/_itemlight.class.php', 'ItemLight' );
<a name="l40"><span class="linenum">  40</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'items/model/_itemlist.class.php', 'ItemList2' );
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">/**</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * Prepare the MainList object for displaying skins.</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> *</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * @param integer max # of posts on the page</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> */</span>
<a name="l47"><span class="linenum">  47</span></a>  function <a class="function" onClick="logFunction('init_MainList')" href="../../../../_functions/init_mainlist.html" onMouseOver="funcPopup(event,'init_mainlist')">init_MainList</a>( <a class="var it6735" onMouseOver="hilite(6735)" onMouseOut="lolite()" onClick="logVariable('items_nb_limit')" href="../../../../_variables/items_nb_limit.html">$items_nb_limit</a> )
<a name="l48"><span class="linenum">  48</span></a>  {
<a name="l49"><span class="linenum">  49</span></a>      global <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a>;
<a name="l50"><span class="linenum">  50</span></a>      global <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../../_variables/preview.html">$preview</a>;
<a name="l51"><span class="linenum">  51</span></a>      global <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../../_variables/disp.html">$disp</a>;
<a name="l52"><span class="linenum">  52</span></a>      global <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('postIDlist')" href="../../../../_variables/postIDlist.html">$postIDlist</a>, <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('postIDarray')" href="../../../../_variables/postIDarray.html">$postIDarray</a>;
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">    // Allow plugins to prepare their own MainList object</span>
<a name="l55"><span class="linenum">  55</span></a>      if( ! <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event_first_true')" href="../../../../_functions/trigger_event_first_true.html" onMouseOver="funcPopup(event,'trigger_event_first_true')">trigger_event_first_true</a>('InitMainList', array( 'MainList' =&gt; &amp;<a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>, 'limit' =&gt; <a class="var it6735" onMouseOver="hilite(6735)" onMouseOut="lolite()" onClick="logVariable('items_nb_limit')" href="../../../../_variables/items_nb_limit.html">$items_nb_limit</a> ) ) )
<a name="l56"><span class="linenum">  56</span></a>      {
<a name="l57"><span class="linenum">  57</span></a>          <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a> = <span class="keyword">new </span><a class="class" onClick="logClass('ItemList2')" href="../../../../_classes/itemlist2.html" onMouseOver="classPopup(event,'itemlist2')">ItemList2</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_timestamp_min')" href="../../../../_functions/get_timestamp_min.html" onMouseOver="funcPopup(event,'get_timestamp_min')">get_timestamp_min</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_timestamp_max')" href="../../../../_functions/get_timestamp_max.html" onMouseOver="funcPopup(event,'get_timestamp_max')">get_timestamp_max</a>(), <a class="var it6735" onMouseOver="hilite(6735)" onMouseOut="lolite()" onClick="logVariable('items_nb_limit')" href="../../../../_variables/items_nb_limit.html">$items_nb_limit</a> );    <span class="comment">// COPY (FUNC)</span>
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>          if( ! <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../../_variables/preview.html">$preview</a> )
<a name="l60"><span class="linenum">  60</span></a>          {
<a name="l61"><span class="linenum">  61</span></a>              if( <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../../_variables/disp.html">$disp</a> == 'page' )
<a name="l62"><span class="linenum">  62</span></a>              { // Get pages:
<a name="l63"><span class="linenum">  63</span></a>                  <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('set_default_filters')" href="../../../../_functions/set_default_filters.html" onMouseOver="funcPopup(event,'set_default_filters')">set_default_filters</a>( array(
<a name="l64"><span class="linenum">  64</span></a>                          'types' =&gt; '1000',        // pages
<a name="l65"><span class="linenum">  65</span></a>                      ) );
<a name="l66"><span class="linenum">  66</span></a>              }
<a name="l67"><span class="linenum">  67</span></a>              elseif( <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../../_variables/disp.html">$disp</a> == 'search' )
<a name="l68"><span class="linenum">  68</span></a>              { // Exclude search from 'sidebar' type posts and from reserved type with ID 5000
<a name="l69"><span class="linenum">  69</span></a>                  global <a class="var it4528" onMouseOver="hilite(4528)" onMouseOut="lolite()" onClick="logVariable('posttypes_perms')" href="../../../../_variables/posttypes_perms.html">$posttypes_perms</a>;
<a name="l70"><span class="linenum">  70</span></a>                  <a class="var it6736" onMouseOver="hilite(6736)" onMouseOut="lolite()" onClick="logVariable('filter_post_types')" href="../../../../_variables/filter_post_types.html">$filter_post_types</a> = isset( <a class="var it4528" onMouseOver="hilite(4528)" onMouseOut="lolite()" onClick="logVariable('posttypes_perms')" href="../../../../_variables/posttypes_perms.html">$posttypes_perms</a>['sidebar'] ) ? <a class="var it4528" onMouseOver="hilite(4528)" onMouseOut="lolite()" onClick="logVariable('posttypes_perms')" href="../../../../_variables/posttypes_perms.html">$posttypes_perms</a>['sidebar'] : array();
<a name="l71"><span class="linenum">  71</span></a>                  <a class="var it6736" onMouseOver="hilite(6736)" onMouseOut="lolite()" onClick="logVariable('filter_post_types')" href="../../../../_variables/filter_post_types.html">$filter_post_types</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it6736" onMouseOver="hilite(6736)" onMouseOut="lolite()" onClick="logVariable('filter_post_types')" href="../../../../_variables/filter_post_types.html">$filter_post_types</a>, array( 5000 ) );
<a name="l72"><span class="linenum">  72</span></a>                  <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('set_default_filters')" href="../../../../_functions/set_default_filters.html" onMouseOver="funcPopup(event,'set_default_filters')">set_default_filters</a>( array(
<a name="l73"><span class="linenum">  73</span></a>                          'types' =&gt; '-'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it6736" onMouseOver="hilite(6736)" onMouseOut="lolite()" onClick="logVariable('filter_post_types')" href="../../../../_variables/filter_post_types.html">$filter_post_types</a> ),
<a name="l74"><span class="linenum">  74</span></a>                      ) );
<a name="l75"><span class="linenum">  75</span></a>              }
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">            // else: we are in posts mode</span>
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">            // pre_dump( $MainList-&gt;default_filters );</span>
<a name="l80"><span class="linenum">  80</span></a>              <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('load_from_Request')" href="../../../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>( false );
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">            // pre_dump( $MainList-&gt;filters );</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">            // echo '&lt;br/&gt;'.( $MainList-&gt;is_filtered() ? 'filtered' : 'NOT filtered' );</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">            // $MainList-&gt;dump_active_filters();</span>
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">            // Run the query:</span>
<a name="l86"><span class="linenum">  86</span></a>              <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>();
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">            // Old style globals for category.funcs:</span>
<a name="l89"><span class="linenum">  89</span></a>              <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('postIDlist')" href="../../../../_variables/postIDlist.html">$postIDlist</a> = <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_page_ID_list')" href="../../../../_functions/get_page_id_list.html" onMouseOver="funcPopup(event,'get_page_id_list')">get_page_ID_list</a>();
<a name="l90"><span class="linenum">  90</span></a>              <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('postIDarray')" href="../../../../_variables/postIDarray.html">$postIDarray</a> = <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_page_ID_array')" href="../../../../_functions/get_page_id_array.html" onMouseOver="funcPopup(event,'get_page_id_array')">get_page_ID_array</a>();
<a name="l91"><span class="linenum">  91</span></a>          }
<a name="l92"><span class="linenum">  92</span></a>          else
<a name="l93"><span class="linenum">  93</span></a>          {    // We want to preview a single post, we are going to fake a lot of things...
<a name="l94"><span class="linenum">  94</span></a>              <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('preview_from_request')" href="../../../../_functions/preview_from_request.html" onMouseOver="funcPopup(event,'preview_from_request')">preview_from_request</a>();
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">            // Legacy for the category display</span>
<a name="l97"><span class="linenum">  97</span></a>              <a class="var it1161" onMouseOver="hilite(1161)" onMouseOut="lolite()" onClick="logVariable('cat_array')" href="../../../../_variables/cat_array.html">$cat_array</a> = array();
<a name="l98"><span class="linenum">  98</span></a>          }
<a name="l99"><span class="linenum">  99</span></a>      }
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'more', 'integer', 0, true );
<a name="l102"><span class="linenum"> 102</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'page', 'integer', 1, true ); <span class="comment">// Post page to show</span>
<a name="l103"><span class="linenum"> 103</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'c',    'integer', 0, true ); <span class="comment">// Display comments?</span>
<a name="l104"><span class="linenum"> 104</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'tb',   'integer', 0, true ); <span class="comment">// Display trackbacks?</span>
<a name="l105"><span class="linenum"> 105</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'pb',   'integer', 0, true ); <span class="comment">// Display pingbacks?</span>
<a name="l106"><span class="linenum"> 106</span></a>  }
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">/**</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment"> * Prepare the 'In-skin editing'.</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment"> *</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment"> */</span>
<a name="l113"><span class="linenum"> 113</span></a>  function <a class="function" onClick="logFunction('init_inskin_editing')" href="../../../../_functions/init_inskin_editing.html" onMouseOver="funcPopup(event,'init_inskin_editing')">init_inskin_editing</a>()
<a name="l114"><span class="linenum"> 114</span></a>  {
<a name="l115"><span class="linenum"> 115</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>, <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, <a class="var it975" onMouseOver="hilite(975)" onMouseOut="lolite()" onClick="logVariable('form_action')" href="../../../../_variables/form_action.html">$form_action</a>;
<a name="l116"><span class="linenum"> 116</span></a>      global <a class="var it980" onMouseOver="hilite(980)" onMouseOut="lolite()" onClick="logVariable('item_tags')" href="../../../../_variables/item_tags.html">$item_tags</a>, <a class="var it981" onMouseOver="hilite(981)" onMouseOut="lolite()" onClick="logVariable('item_title')" href="../../../../_variables/item_title.html">$item_title</a>, <a class="var it982" onMouseOver="hilite(982)" onMouseOut="lolite()" onClick="logVariable('item_content')" href="../../../../_variables/item_content.html">$item_content</a>;
<a name="l117"><span class="linenum"> 117</span></a>      global <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>, <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it983" onMouseOver="hilite(983)" onMouseOut="lolite()" onClick="logVariable('advanced_edit_link')" href="../../../../_variables/advanced_edit_link.html">$advanced_edit_link</a>;
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>      if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'in_skin_editing' ) )
<a name="l120"><span class="linenum"> 120</span></a>      {    // Redirect to the Back-office editing (setting is OFF)
<a name="l121"><span class="linenum"> 121</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;action=new&amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      <a class="var it6485" onMouseOver="hilite(6485)" onMouseOut="lolite()" onClick="logVariable('tab_switch_params')" href="../../../../_variables/tab_switch_params.html">$tab_switch_params</a> = 'blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">    // Post ID, go from $_GET when we edit post from Front-office</span>
<a name="l127"><span class="linenum"> 127</span></a>      <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'p', 'integer', 0 );
<a name="l128"><span class="linenum"> 128</span></a>  
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">    // Post ID, go from $_GET when we copy post from Front-office</span>
<a name="l130"><span class="linenum"> 130</span></a>      <a class="var it6194" onMouseOver="hilite(6194)" onMouseOut="lolite()" onClick="logVariable('copy_post_ID')" href="../../../../_variables/copy_post_ID.html">$copy_post_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'cp', 'integer', 0 );
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>      if( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> &gt; 0 )
<a name="l133"><span class="linenum"> 133</span></a>      {    // Edit post
<a name="l134"><span class="linenum"> 134</span></a>          global <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>;
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a> = 'edit';
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache ();
<a name="l138"><span class="linenum"> 138</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a> = <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;<a onClick="logVariable('get_by_ID')" class="var it9027" onMouseOver="hilite(9027)" onMouseOut="lolite()" href="../../../../_variables/get_by_ID.html">get_by_ID</a> ( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> );
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>          <a class="function" onClick="logFunction('check_categories_nosave')" href="../../../../_functions/check_categories_nosave.html" onMouseOver="funcPopup(event,'check_categories_nosave')">check_categories_nosave</a> ( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> );
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> = <a class="function" onClick="logFunction('postcats_get_byID')" href="../../../../_functions/postcats_get_byid.html" onMouseOver="funcPopup(event,'postcats_get_byid')">postcats_get_byID</a>( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> );
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>, 'ctrl=items&amp;filter=restore&amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;highlight='.<a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, '&amp;' );
<a name="l144"><span class="linenum"> 144</span></a>          <a class="var it6485" onMouseOver="hilite(6485)" onMouseOut="lolite()" onClick="logVariable('tab_switch_params')" href="../../../../_variables/tab_switch_params.html">$tab_switch_params</a> .= '&amp;amp;p='.<a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l145"><span class="linenum"> 145</span></a>      }
<a name="l146"><span class="linenum"> 146</span></a>      elseif( <a class="var it6194" onMouseOver="hilite(6194)" onMouseOut="lolite()" onClick="logVariable('copy_post_ID')" href="../../../../_variables/copy_post_ID.html">$copy_post_ID</a> &gt; 0 )
<a name="l147"><span class="linenum"> 147</span></a>      {    // Copy post
<a name="l148"><span class="linenum"> 148</span></a>          global <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a>;
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a> = 'new';
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>          <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache ();
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a> = <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;<a onClick="logVariable('get_by_ID')" class="var it9027" onMouseOver="hilite(9027)" onMouseOut="lolite()" href="../../../../_variables/get_by_ID.html">get_by_ID</a> ( <a class="var it6194" onMouseOver="hilite(6194)" onMouseOut="lolite()" onClick="logVariable('copy_post_ID')" href="../../../../_variables/copy_post_ID.html">$copy_post_ID</a> );
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it6737" onMouseOver="hilite(6737)" onMouseOut="lolite()" onClick="logVariable('edited_Item_Blog')" href="../../../../_variables/edited_Item_Blog.html">$edited_Item_Blog</a> = <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;get_Blog();
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it1723" onMouseOver="hilite(1723)" onMouseOut="lolite()" onClick="logVariable('item_status')" href="../../../../_variables/item_status.html">$item_status</a> = <a class="var it6737" onMouseOver="hilite(6737)" onMouseOut="lolite()" onClick="logVariable('edited_Item_Blog')" href="../../../../_variables/edited_Item_Blog.html">$edited_Item_Blog</a>-&gt;<a class="function" onClick="logFunction('get_allowed_item_status')" href="../../../../_functions/get_allowed_item_status.html" onMouseOver="funcPopup(event,'get_allowed_item_status')">get_allowed_item_status</a>();
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', <a class="var it1723" onMouseOver="hilite(1723)" onMouseOut="lolite()" onClick="logVariable('item_status')" href="../../../../_variables/item_status.html">$item_status</a> );
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'dateset', 0 );    <span class="comment">// Date not explicitly set yet</span>
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'issue_date', <a class="phpfunction" onClick="logFunction('date')" href="../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>( 'Y-m-d H:i:s', <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a> ) );
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>          <a class="function" onClick="logFunction('modules_call_method')" href="../../../../_functions/modules_call_method.html" onMouseOver="funcPopup(event,'modules_call_method')">modules_call_method</a>( 'constructor_item', array( 'Item' =&gt; &amp; <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a> ) );
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>          <a class="function" onClick="logFunction('check_categories_nosave')" href="../../../../_functions/check_categories_nosave.html" onMouseOver="funcPopup(event,'check_categories_nosave')">check_categories_nosave</a> ( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> );
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>, 'ctrl=items&amp;filter=restore&amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, '&amp;' );
<a name="l166"><span class="linenum"> 166</span></a>      }
<a name="l167"><span class="linenum"> 167</span></a>      elseif( empty( <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a> ) )
<a name="l168"><span class="linenum"> 168</span></a>      {    // Create new <a class="function" onClick="logFunction('post')" href="../../../../_functions/post.html" onMouseOver="funcPopup(event,'post')">post</a> (from Front-office)
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a> = 'new';
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>          <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'items/model/_item.class.php', 'Item' );
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Item')" href="../../../../_classes/item.html" onMouseOver="classPopup(event,'item')">Item</a>();
<a name="l173"><span class="linenum"> 173</span></a>          <a class="var it3980" onMouseOver="hilite(3980)" onMouseOut="lolite()" onClick="logVariable('def_status')" href="../../../../_variables/def_status.html">$def_status</a> = <a class="function" onClick="logFunction('get_highest_publish_status')" href="../../../../_functions/get_highest_publish_status.html" onMouseOver="funcPopup(event,'get_highest_publish_status')">get_highest_publish_status</a>( 'post', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, false );
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', <a class="var it3980" onMouseOver="hilite(3980)" onMouseOut="lolite()" onClick="logVariable('def_status')" href="../../../../_variables/def_status.html">$def_status</a> );
<a name="l175"><span class="linenum"> 175</span></a>          <a class="function" onClick="logFunction('check_categories_nosave')" href="../../../../_functions/check_categories_nosave.html" onMouseOver="funcPopup(event,'check_categories_nosave')">check_categories_nosave</a> ( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> );
<a name="l176"><span class="linenum"> 176</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('main_cat_ID', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_default_cat_ID')" href="../../../../_functions/get_default_cat_id.html" onMouseOver="funcPopup(event,'get_default_cat_id')">get_default_cat_ID</a>());
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">        // Set default locations from current user</span>
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set_creator_location')" href="../../../../_functions/set_creator_location.html" onMouseOver="funcPopup(event,'set_creator_location')">set_creator_location</a>( 'country' );
<a name="l180"><span class="linenum"> 180</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set_creator_location')" href="../../../../_functions/set_creator_location.html" onMouseOver="funcPopup(event,'set_creator_location')">set_creator_location</a>( 'region' );
<a name="l181"><span class="linenum"> 181</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set_creator_location')" href="../../../../_functions/set_creator_location.html" onMouseOver="funcPopup(event,'set_creator_location')">set_creator_location</a>( 'subregion' );
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('set_creator_location')" href="../../../../_functions/set_creator_location.html" onMouseOver="funcPopup(event,'set_creator_location')">set_creator_location</a>( 'city' );
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">        // Set object params:</span>
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('load_from_Request')" href="../../../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>( <span class="comment">/* editing? */</span> false, <span class="comment">/* creating? */</span> true );
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>, 'ctrl=items&amp;filter=restore&amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, '&amp;' );
<a name="l188"><span class="linenum"> 188</span></a>      }
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">    // Used in the edit form:</span>
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">    // We never allow HTML in titles, so we always encode and decode special chars.</span>
<a name="l193"><span class="linenum"> 193</span></a>      <a class="var it981" onMouseOver="hilite(981)" onMouseOut="lolite()" onClick="logVariable('item_title')" href="../../../../_variables/item_title.html">$item_title</a> = <a class="function" onClick="logFunction('htmlspecialchars_decode')" href="../../../../_functions/htmlspecialchars_decode.html" onMouseOver="funcPopup(event,'htmlspecialchars_decode')">htmlspecialchars_decode</a>( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('title')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/title.html">title</a> );
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>      <a class="var it982" onMouseOver="hilite(982)" onMouseOut="lolite()" onClick="logVariable('item_content')" href="../../../../_variables/item_content.html">$item_content</a> = <a class="function" onClick="logFunction('prepare_item_content')" href="../../../../_functions/prepare_item_content.html" onMouseOver="funcPopup(event,'prepare_item_content')">prepare_item_content</a>( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('content')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/content.html">content</a> );
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>      if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_html_post' ) )
<a name="l198"><span class="linenum"> 198</span></a>      { // HTML is disallowed for this post, content is encoded in DB and we need to decode it for editing:
<a name="l199"><span class="linenum"> 199</span></a>          <a class="var it982" onMouseOver="hilite(982)" onMouseOut="lolite()" onClick="logVariable('item_content')" href="../../../../_variables/item_content.html">$item_content</a> = <a class="function" onClick="logFunction('htmlspecialchars_decode')" href="../../../../_functions/htmlspecialchars_decode.html" onMouseOver="funcPopup(event,'htmlspecialchars_decode')">htmlspecialchars_decode</a>( <a class="var it982" onMouseOver="hilite(982)" onMouseOut="lolite()" onClick="logVariable('item_content')" href="../../../../_variables/item_content.html">$item_content</a> );
<a name="l200"><span class="linenum"> 200</span></a>      }
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">    // Format content for editing, if we were not already in editing...</span>
<a name="l203"><span class="linenum"> 203</span></a>      <a class="var it39" onMouseOver="hilite(39)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../../../../_variables/Plugins_admin.html">$Plugins_admin</a> = &amp; get_Plugins_admin();
<a name="l204"><span class="linenum"> 204</span></a>      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l205"><span class="linenum"> 205</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array( 'object_type' =&gt; 'Item', 'object_Blog' =&gt; &amp; <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a> );
<a name="l206"><span class="linenum"> 206</span></a>      <a class="var it39" onMouseOver="hilite(39)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../../../../_variables/Plugins_admin.html">$Plugins_admin</a>-&gt;<a class="function" onClick="logFunction('unfilter_contents')" href="../../../../_functions/unfilter_contents.html" onMouseOver="funcPopup(event,'unfilter_contents')">unfilter_contents</a>( <a class="var it981" onMouseOver="hilite(981)" onMouseOut="lolite()" onClick="logVariable('item_title')" href="../../../../_variables/item_title.html">$item_title</a> <span class="comment">/* by ref */</span>, <a class="var it982" onMouseOver="hilite(982)" onMouseOut="lolite()" onClick="logVariable('item_content')" href="../../../../_variables/item_content.html">$item_content</a> <span class="comment">/* by ref */</span>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>(), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>      <a class="var it980" onMouseOver="hilite(980)" onMouseOut="lolite()" onClick="logVariable('item_tags')" href="../../../../_variables/item_tags.html">$item_tags</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get_tags')" href="../../../../_functions/get_tags.html" onMouseOver="funcPopup(event,'get_tags')">get_tags</a>() );
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">    // Get an url for a link 'Go to advanced edit screen'</span>
<a name="l211"><span class="linenum"> 211</span></a>      <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('mode_editing')" href="../../../../_variables/mode_editing.html">$mode_editing</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'mode_editing', 'string', 'expert' );
<a name="l212"><span class="linenum"> 212</span></a>      <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../../../_variables/entries.html">$entries</a> = <a class="function" onClick="logFunction('get_item_edit_modes')" href="../../../../_functions/get_item_edit_modes.html" onMouseOver="funcPopup(event,'get_item_edit_modes')">get_item_edit_modes</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>, <a class="var it6485" onMouseOver="hilite(6485)" onMouseOut="lolite()" onClick="logVariable('tab_switch_params')" href="../../../../_variables/tab_switch_params.html">$tab_switch_params</a> );
<a name="l213"><span class="linenum"> 213</span></a>      <a class="var it983" onMouseOver="hilite(983)" onMouseOut="lolite()" onClick="logVariable('advanced_edit_link')" href="../../../../_variables/advanced_edit_link.html">$advanced_edit_link</a> = <a class="var it2287" onMouseOver="hilite(2287)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../../../_variables/entries.html">$entries</a>[<a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('mode_editing')" href="../../../../_variables/mode_editing.html">$mode_editing</a>];
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>      <a class="var it975" onMouseOver="hilite(975)" onMouseOut="lolite()" onClick="logVariable('form_action')" href="../../../../_variables/form_action.html">$form_action</a> = <a class="function" onClick="logFunction('get_samedomain_htsrv_url')" href="../../../../_functions/get_samedomain_htsrv_url.html" onMouseOver="funcPopup(event,'get_samedomain_htsrv_url')">get_samedomain_htsrv_url</a>().'item_edit.php';
<a name="l216"><span class="linenum"> 216</span></a>  }
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">/**</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment"> * Return an Item if an Intro or a Featured item is available for display in current disp.</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment"> *</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment"> * @return Item</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment"> */</span>
<a name="l223"><span class="linenum"> 223</span></a>  function &amp; get_featured_Item( <a class="var it6739" onMouseOver="hilite(6739)" onMouseOut="lolite()" onClick="logVariable('restrict_disp')" href="../../../../_variables/restrict_disp.html">$restrict_disp</a> = 'posts' )
<a name="l224"><span class="linenum"> 224</span></a>  {
<a name="l225"><span class="linenum"> 225</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l226"><span class="linenum"> 226</span></a>      global <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../../_variables/disp.html">$disp</a>, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../../../_variables/disp_detail.html">$disp_detail</a>, <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>, <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>;
<a name="l227"><span class="linenum"> 227</span></a>      global <a class="var it3309" onMouseOver="hilite(3309)" onMouseOut="lolite()" onClick="logVariable('featured_displayed_item_IDs')" href="../../../../_variables/featured_displayed_item_IDs.html">$featured_displayed_item_IDs</a>;
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>      if( <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../../_variables/disp.html">$disp</a> != <a class="var it6739" onMouseOver="hilite(6739)" onMouseOut="lolite()" onClick="logVariable('restrict_disp')" href="../../../../_variables/restrict_disp.html">$restrict_disp</a> || !isset(<a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>) )
<a name="l230"><span class="linenum"> 230</span></a>      {    // If we're not currently displaying posts, no need to try &amp; display a featured/intro post on top!
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> = NULL;
<a name="l232"><span class="linenum"> 232</span></a>          return <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>;
<a name="l233"><span class="linenum"> 233</span></a>      }
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>      if( !isset( <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a> ) )
<a name="l236"><span class="linenum"> 236</span></a>      {    // Don't repeat if we've done this already -- Initialize the featured list only first time this function is called in a skin:
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">        // Get ready to obtain 1 post only:</span>
<a name="l239"><span class="linenum"> 239</span></a>          <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a> = <span class="keyword">new </span><a class="class" onClick="logClass('ItemList2')" href="../../../../_classes/itemlist2.html" onMouseOver="classPopup(event,'itemlist2')">ItemList2</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_timestamp_min')" href="../../../../_functions/get_timestamp_min.html" onMouseOver="funcPopup(event,'get_timestamp_min')">get_timestamp_min</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_timestamp_max')" href="../../../../_functions/get_timestamp_max.html" onMouseOver="funcPopup(event,'get_timestamp_max')">get_timestamp_max</a>(), 1 );
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">        // Set default filters for the current page:</span>
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>-&gt;<a class="function" onClick="logFunction('set_default_filters')" href="../../../../_functions/set_default_filters.html" onMouseOver="funcPopup(event,'set_default_filters')">set_default_filters</a>( <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('filters')" class="var it9019" onMouseOver="hilite(9019)" onMouseOut="lolite()" href="../../../../_variables/filters.html">filters</a> );
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>          if( ! <a class="var it138" onMouseOver="hilite(138)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('is_filtered')" href="../../../../_functions/is_filtered.html" onMouseOver="funcPopup(event,'is_filtered')">is_filtered</a>() )
<a name="l245"><span class="linenum"> 245</span></a>          {    // This is not a filtered page, so we are on the home page.
<a name="l246"><span class="linenum"> 246</span></a>              if( <a class="var it6739" onMouseOver="hilite(6739)" onMouseOut="lolite()" onClick="logVariable('restrict_disp')" href="../../../../_variables/restrict_disp.html">$restrict_disp</a> == 'front' )
<a name="l247"><span class="linenum"> 247</span></a>              { // Special Front page:
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">                // Use Intro-Front posts</span>
<a name="l249"><span class="linenum"> 249</span></a>                  <a class="var it6741" onMouseOver="hilite(6741)" onMouseOut="lolite()" onClick="logVariable('restrict_to_types')" href="../../../../_variables/restrict_to_types.html">$restrict_to_types</a> = '1400';
<a name="l250"><span class="linenum"> 250</span></a>              }
<a name="l251"><span class="linenum"> 251</span></a>              else
<a name="l252"><span class="linenum"> 252</span></a>              { // Default front page displaying posts:
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">                // The competing intro-* types are: 'main' and 'all':</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">                // fplanque&gt; IMPORTANT&gt; nobody changes this without consulting the manual and talking to me first!</span>
<a name="l255"><span class="linenum"> 255</span></a>                  <a class="var it6741" onMouseOver="hilite(6741)" onMouseOut="lolite()" onClick="logVariable('restrict_to_types')" href="../../../../_variables/restrict_to_types.html">$restrict_to_types</a> = '1500,1600';
<a name="l256"><span class="linenum"> 256</span></a>              }
<a name="l257"><span class="linenum"> 257</span></a>          }
<a name="l258"><span class="linenum"> 258</span></a>          else
<a name="l259"><span class="linenum"> 259</span></a>          {    // We are on a filtered... it means a category page or sth like this...
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">            // echo $disp_detail;</span>
<a name="l261"><span class="linenum"> 261</span></a>              switch( <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../../../_variables/disp_detail.html">$disp_detail</a> )
<a name="l262"><span class="linenum"> 262</span></a>              {
<a name="l263"><span class="linenum"> 263</span></a>                  case 'posts-cat':
<a name="l264"><span class="linenum"> 264</span></a>                  case 'posts-subcat':
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">                    // The competing intro-* types are: 'cat' and 'all':</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">                    // fplanque&gt; IMPORTANT&gt; nobody changes this without consulting the manual and talking to me first!</span>
<a name="l267"><span class="linenum"> 267</span></a>                      <a class="var it6741" onMouseOver="hilite(6741)" onMouseOut="lolite()" onClick="logVariable('restrict_to_types')" href="../../../../_variables/restrict_to_types.html">$restrict_to_types</a> = '1520,1600';
<a name="l268"><span class="linenum"> 268</span></a>                      break;
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>                  case 'posts-tag':
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">                    // The competing intro-* types are: 'tag' and 'all':</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">                    // fplanque&gt; IMPORTANT&gt; nobody changes this without consulting the manual and talking to me first!</span>
<a name="l273"><span class="linenum"> 273</span></a>                      <a class="var it6741" onMouseOver="hilite(6741)" onMouseOut="lolite()" onClick="logVariable('restrict_to_types')" href="../../../../_variables/restrict_to_types.html">$restrict_to_types</a> = '1530,1600';
<a name="l274"><span class="linenum"> 274</span></a>                      break;
<a name="l275"><span class="linenum"> 275</span></a>  
<a name="l276"><span class="linenum"> 276</span></a>                  default:
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">                    // The competing intro-* types are: 'sub' and 'all':</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">                    // fplanque&gt; IMPORTANT&gt; nobody changes this without consulting the manual and talking to me first!</span>
<a name="l279"><span class="linenum"> 279</span></a>                      <a class="var it6741" onMouseOver="hilite(6741)" onMouseOut="lolite()" onClick="logVariable('restrict_to_types')" href="../../../../_variables/restrict_to_types.html">$restrict_to_types</a> = '1570,1600';
<a name="l280"><span class="linenum"> 280</span></a>              }
<a name="l281"><span class="linenum"> 281</span></a>          }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>          <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>-&gt;<a class="function" onClick="logFunction('set_filters')" href="../../../../_functions/set_filters.html" onMouseOver="funcPopup(event,'set_filters')">set_filters</a>( array(
<a name="l284"><span class="linenum"> 284</span></a>                  'types' =&gt; <a class="var it6741" onMouseOver="hilite(6741)" onMouseOut="lolite()" onClick="logVariable('restrict_to_types')" href="../../../../_variables/restrict_to_types.html">$restrict_to_types</a>,
<a name="l285"><span class="linenum"> 285</span></a>              ), false <span class="comment">/* Do NOT memorize!! */</span> );
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">        // pre_dump( $FeaturedList-&gt;filters );</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">        // Run the query:</span>
<a name="l288"><span class="linenum"> 288</span></a>          <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>();
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>          if( <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>-&gt;<a onClick="logVariable('result_num_rows')" class="var it9185" onMouseOver="hilite(9185)" onMouseOut="lolite()" href="../../../../_variables/result_num_rows.html">result_num_rows</a> == 0 &amp;&amp; <a class="var it6739" onMouseOver="hilite(6739)" onMouseOut="lolite()" onClick="logVariable('restrict_disp')" href="../../../../_variables/restrict_disp.html">$restrict_disp</a> != 'front' )
<a name="l291"><span class="linenum"> 291</span></a>          { // No Intro page was found, try to find a featured post instead:
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>              <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>-&gt;<a class="phpfunction" onClick="logFunction('reset')" href="../../../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>();
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>              <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>-&gt;<a class="function" onClick="logFunction('set_filters')" href="../../../../_functions/set_filters.html" onMouseOver="funcPopup(event,'set_filters')">set_filters</a>( array(
<a name="l296"><span class="linenum"> 296</span></a>                      'featured' =&gt; 1,  // Featured posts only (TODO!)
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">                    // Types will already be reset to defaults here</span>
<a name="l298"><span class="linenum"> 298</span></a>                  ), false <span class="comment">/* Do NOT memorize!! */</span> );
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">            // Run the query:</span>
<a name="l301"><span class="linenum"> 301</span></a>              <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>();
<a name="l302"><span class="linenum"> 302</span></a>          }
<a name="l303"><span class="linenum"> 303</span></a>      }
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">    // Get next featured item</span>
<a name="l306"><span class="linenum"> 306</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> = <a class="var it6740" onMouseOver="hilite(6740)" onMouseOut="lolite()" onClick="logVariable('FeaturedList')" href="../../../../_variables/FeaturedList.html">$FeaturedList</a>-&gt;<a class="function" onClick="logFunction('get_item')" href="../../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_item</a>();
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> )
<a name="l309"><span class="linenum"> 309</span></a>      {    // Memorize that ID so that it can later be filtered out normal display:
<a name="l310"><span class="linenum"> 310</span></a>          <a class="var it3309" onMouseOver="hilite(3309)" onMouseOut="lolite()" onClick="logVariable('featured_displayed_item_IDs')" href="../../../../_variables/featured_displayed_item_IDs.html">$featured_displayed_item_IDs</a>[] = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l311"><span class="linenum"> 311</span></a>      }
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>      return <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>;
<a name="l314"><span class="linenum"> 314</span></a>  }
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">/**</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment"> * Get item type ID by type code</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment"> *</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment"> * @param string Type code</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment"> * @return integer Item type ID</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> */</span>
<a name="l323"><span class="linenum"> 323</span></a>  function <a class="function" onClick="logFunction('get_item_type_ID')" href="../../../../_functions/get_item_type_id.html" onMouseOver="funcPopup(event,'get_item_type_id')">get_item_type_ID</a>( <a class="var it6742" onMouseOver="hilite(6742)" onMouseOut="lolite()" onClick="logVariable('type_code')" href="../../../../_variables/type_code.html">$type_code</a> )
<a name="l324"><span class="linenum"> 324</span></a>  {
<a name="l325"><span class="linenum"> 325</span></a>      <a class="var it6743" onMouseOver="hilite(6743)" onMouseOut="lolite()" onClick="logVariable('item_types')" href="../../../../_variables/item_types.html">$item_types</a> = array(
<a name="l326"><span class="linenum"> 326</span></a>              1    =&gt; 'post',
<a name="l327"><span class="linenum"> 327</span></a>              1000 =&gt; 'page',
<a name="l328"><span class="linenum"> 328</span></a>              1400 =&gt; 'intro-front',
<a name="l329"><span class="linenum"> 329</span></a>              1500 =&gt; 'intro-main',
<a name="l330"><span class="linenum"> 330</span></a>              1520 =&gt; 'intro-cat',
<a name="l331"><span class="linenum"> 331</span></a>              1530 =&gt; 'intro-tag',
<a name="l332"><span class="linenum"> 332</span></a>              1570 =&gt; 'intro-sub',
<a name="l333"><span class="linenum"> 333</span></a>              1600 =&gt; 'intro-all',
<a name="l334"><span class="linenum"> 334</span></a>              2000 =&gt; 'podcast',
<a name="l335"><span class="linenum"> 335</span></a>              3000 =&gt; 'sidebar-link',
<a name="l336"><span class="linenum"> 336</span></a>              4000 =&gt; 'advertisement',
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">            //5000 =&gt; 'reserved',</span>
<a name="l338"><span class="linenum"> 338</span></a>          );
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>      <a class="var it6744" onMouseOver="hilite(6744)" onMouseOut="lolite()" onClick="logVariable('item_type_ID')" href="../../../../_variables/item_type_ID.html">$item_type_ID</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>( <a class="var it6742" onMouseOver="hilite(6742)" onMouseOut="lolite()" onClick="logVariable('type_code')" href="../../../../_variables/type_code.html">$type_code</a>, <a class="var it6743" onMouseOver="hilite(6743)" onMouseOut="lolite()" onClick="logVariable('item_types')" href="../../../../_variables/item_types.html">$item_types</a> );
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>      if( <a class="var it6744" onMouseOver="hilite(6744)" onMouseOut="lolite()" onClick="logVariable('item_type_ID')" href="../../../../_variables/item_type_ID.html">$item_type_ID</a> === false )
<a name="l343"><span class="linenum"> 343</span></a>      { // No found type, Use standard type ID = 1
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it6744" onMouseOver="hilite(6744)" onMouseOut="lolite()" onClick="logVariable('item_type_ID')" href="../../../../_variables/item_type_ID.html">$item_type_ID</a> = 1;
<a name="l345"><span class="linenum"> 345</span></a>      }
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>      return <a class="var it6744" onMouseOver="hilite(6744)" onMouseOut="lolite()" onClick="logVariable('item_type_ID')" href="../../../../_variables/item_type_ID.html">$item_type_ID</a>;
<a name="l348"><span class="linenum"> 348</span></a>  }
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>  
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">/**</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment"> * Validate URL title (slug) / Also used for category slugs</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment"> *</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment"> * Using title as a source if url title is empty.</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment"> * We allow up to 200 chars (which is ridiculously long) for WP import compatibility.</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment"> * New slugs will be cropped to 5 words so the URLs are not too long.</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment"> *</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment"> * @param string url title to validate</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment"> * @param string real title to use as a source if $urltitle is empty (encoded in $evo_charset)</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment"> * @param integer ID of post</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment"> * @param boolean Query the DB, but don't modify the URL title if the title already exists (Useful if you only want to alert the pro user without making changes for him)</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment"> * @param string The prefix of the database column names (e. g. &quot;post_&quot; for post_urltitle)</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment"> * @param string The name of the post ID column</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment"> * @param string The name of the DB table to use</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment"> * @param NULL|string The post locale or NULL if there is no specific locale.</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment"> * @return string validated url title</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment"> */</span>
<a name="l368"><span class="linenum"> 368</span></a>  function <a class="function" onClick="logFunction('urltitle_validate')" href="../../../../_functions/urltitle_validate.html" onMouseOver="funcPopup(event,'urltitle_validate')">urltitle_validate</a>( <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a>, <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a>, <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> = 0, <a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('query_only')" href="../../../../_variables/query_only.html">$query_only</a> = false,
<a name="l369"><span class="linenum"> 369</span></a>                                      <a class="var it6746" onMouseOver="hilite(6746)" onMouseOut="lolite()" onClick="logVariable('dbSlugFieldName')" href="../../../../_variables/dbSlugFieldName.html">$dbSlugFieldName</a> = 'post_urltitle', <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../../_variables/dbIDname.html">$dbIDname</a> = 'post_ID',
<a name="l370"><span class="linenum"> 370</span></a>                                      <a class="var it3368" onMouseOver="hilite(3368)" onMouseOut="lolite()" onClick="logVariable('dbtable')" href="../../../../_variables/dbtable.html">$dbtable</a> = 'T_items__item', <a class="var it21" onMouseOver="hilite(21)" onMouseOut="lolite()" onClick="logVariable('post_locale')" href="../../../../_variables/post_locale.html">$post_locale</a> = NULL )
<a name="l371"><span class="linenum"> 371</span></a>  {
<a name="l372"><span class="linenum"> 372</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>;
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>      <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> );
<a name="l375"><span class="linenum"> 375</span></a>      <a class="var it6747" onMouseOver="hilite(6747)" onMouseOut="lolite()" onClick="logVariable('orig_title')" href="../../../../_variables/orig_title.html">$orig_title</a> = <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a>;
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>      if( empty( <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> ) )
<a name="l378"><span class="linenum"> 378</span></a>      {
<a name="l379"><span class="linenum"> 379</span></a>          if( ! empty(<a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a>) )
<a name="l380"><span class="linenum"> 380</span></a>              <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../../_variables/title.html">$title</a>;
<a name="l381"><span class="linenum"> 381</span></a>          else
<a name="l382"><span class="linenum"> 382</span></a>              <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = 'title';
<a name="l383"><span class="linenum"> 383</span></a>      }
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">    // echo 'starting with: '.$urltitle.'&lt;br /&gt;';</span>
<a name="l386"><span class="linenum"> 386</span></a>  
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">    // Replace special chars/umlauts, if we can convert charsets:</span>
<a name="l388"><span class="linenum"> 388</span></a>      <a class="function" onClick="logFunction('load_funcs')" href="../../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('locales/_charset.funcs.php');
<a name="l389"><span class="linenum"> 389</span></a>      <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = <a class="function" onClick="logFunction('replace_special_chars')" href="../../../../_functions/replace_special_chars.html" onMouseOver="funcPopup(event,'replace_special_chars')">replace_special_chars</a>(<a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a>, <a class="var it21" onMouseOver="hilite(21)" onMouseOut="lolite()" onClick="logVariable('post_locale')" href="../../../../_variables/post_locale.html">$post_locale</a>);
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">    // Make everything lowercase and use trim again after replace_special_chars</span>
<a name="l392"><span class="linenum"> 392</span></a>      <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a> ( <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> ) );
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>      if( empty( <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> ) )
<a name="l395"><span class="linenum"> 395</span></a>      {
<a name="l396"><span class="linenum"> 396</span></a>          <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = 'title';
<a name="l397"><span class="linenum"> 397</span></a>      }
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">    // Leave only first 5 words in order to get a shorter URL</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">    // (which is generally accepted as a better practice)</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">    // User can manually enter a very long URL if he wants</span>
<a name="l402"><span class="linenum"> 402</span></a>      <a class="var it6748" onMouseOver="hilite(6748)" onMouseOut="lolite()" onClick="logVariable('slug_changed')" href="../../../../_variables/slug_changed.html">$slug_changed</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'slug_changed' );
<a name="l403"><span class="linenum"> 403</span></a>      if( <a class="var it6748" onMouseOver="hilite(6748)" onMouseOut="lolite()" onClick="logVariable('slug_changed')" href="../../../../_variables/slug_changed.html">$slug_changed</a> == 0 )
<a name="l404"><span class="linenum"> 404</span></a>      { // this should only happen when the slug is auto generated
<a name="l405"><span class="linenum"> 405</span></a>          global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l406"><span class="linenum"> 406</span></a>          if( isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) )
<a name="l407"><span class="linenum"> 407</span></a>          { // Get max length of slug from current blog setting
<a name="l408"><span class="linenum"> 408</span></a>              <a class="var it6749" onMouseOver="hilite(6749)" onMouseOut="lolite()" onClick="logVariable('count_of_words')" href="../../../../_variables/count_of_words.html">$count_of_words</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('slug_limit');
<a name="l409"><span class="linenum"> 409</span></a>          }
<a name="l410"><span class="linenum"> 410</span></a>          if( empty( <a class="var it6749" onMouseOver="hilite(6749)" onMouseOut="lolite()" onClick="logVariable('count_of_words')" href="../../../../_variables/count_of_words.html">$count_of_words</a> ) )
<a name="l411"><span class="linenum"> 411</span></a>          { // Use 5 words to limit slug by default
<a name="l412"><span class="linenum"> 412</span></a>              <a class="var it6749" onMouseOver="hilite(6749)" onMouseOut="lolite()" onClick="logVariable('count_of_words')" href="../../../../_variables/count_of_words.html">$count_of_words</a> = 5;
<a name="l413"><span class="linenum"> 413</span></a>          }
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>          <a class="var it6750" onMouseOver="hilite(6750)" onMouseOut="lolite()" onClick="logVariable('title_words')" href="../../../../_variables/title_words.html">$title_words</a> = array();
<a name="l416"><span class="linenum"> 416</span></a>          <a class="var it6750" onMouseOver="hilite(6750)" onMouseOut="lolite()" onClick="logVariable('title_words')" href="../../../../_variables/title_words.html">$title_words</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( '-', <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> );
<a name="l417"><span class="linenum"> 417</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it6750" onMouseOver="hilite(6750)" onMouseOut="lolite()" onClick="logVariable('title_words')" href="../../../../_variables/title_words.html">$title_words</a>) &gt; <a class="var it6749" onMouseOver="hilite(6749)" onMouseOut="lolite()" onClick="logVariable('count_of_words')" href="../../../../_variables/count_of_words.html">$count_of_words</a> )
<a name="l418"><span class="linenum"> 418</span></a>          {
<a name="l419"><span class="linenum"> 419</span></a>              <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = '';
<a name="l420"><span class="linenum"> 420</span></a>              for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> = 0; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> &lt; <a class="var it6749" onMouseOver="hilite(6749)" onMouseOut="lolite()" onClick="logVariable('count_of_words')" href="../../../../_variables/count_of_words.html">$count_of_words</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>++ )
<a name="l421"><span class="linenum"> 421</span></a>              {
<a name="l422"><span class="linenum"> 422</span></a>                  <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> .= <a class="var it6750" onMouseOver="hilite(6750)" onMouseOut="lolite()" onClick="logVariable('title_words')" href="../../../../_variables/title_words.html">$title_words</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>].'-';
<a name="l423"><span class="linenum"> 423</span></a>              }
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">            //delete last '-'</span>
<a name="l425"><span class="linenum"> 425</span></a>              <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a>, 0, strlen(<a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a>) - 1 );
<a name="l426"><span class="linenum"> 426</span></a>          }
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">        // echo 'leaving 5 words: '.$urltitle.'&lt;br /&gt;';</span>
<a name="l429"><span class="linenum"> 429</span></a>      }
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">    // Normalize to 200 chars + a number</span>
<a name="l432"><span class="linenum"> 432</span></a>      <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/^(.*?)((-|_)+([0-9]+))?$/', <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a>, <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../../_variables/matches.html">$matches</a> );
<a name="l433"><span class="linenum"> 433</span></a>      <a class="var it6751" onMouseOver="hilite(6751)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../../../_variables/urlbase.html">$urlbase</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../../_variables/matches.html">$matches</a>[1], 0, 200 );
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">    // strip a possible dash at the end of the URL title:</span>
<a name="l435"><span class="linenum"> 435</span></a>      <a class="var it6751" onMouseOver="hilite(6751)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../../../_variables/urlbase.html">$urlbase</a> = <a class="phpfunction" onClick="logFunction('rtrim')" href="../../../../_functions/rtrim.html" onMouseOver="phpfuncPopup(event,'rtrim')">rtrim</a>( <a class="var it6751" onMouseOver="hilite(6751)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../../../_variables/urlbase.html">$urlbase</a>, '-' );
<a name="l436"><span class="linenum"> 436</span></a>      <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = <a class="var it6751" onMouseOver="hilite(6751)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../../../_variables/urlbase.html">$urlbase</a>;
<a name="l437"><span class="linenum"> 437</span></a>      if( ! empty( <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../../_variables/matches.html">$matches</a>[4] ) )
<a name="l438"><span class="linenum"> 438</span></a>      {
<a name="l439"><span class="linenum"> 439</span></a>          <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> .= '-'.<a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../../_variables/matches.html">$matches</a>[4];
<a name="l440"><span class="linenum"> 440</span></a>      }
<a name="l441"><span class="linenum"> 441</span></a>  
<a name="l442"><span class="linenum"> 442</span></a>      if( !<a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('query_only')" href="../../../../_variables/query_only.html">$query_only</a> )
<a name="l443"><span class="linenum"> 443</span></a>      {
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">        // TODO: dh&gt; this might get used to utilize the SlugCache instead of the processing below.</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">        #if( $post_ID &amp;&amp; $dbtable == 'T_slug' )</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">        #{</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">        #    $existing_Slug = get_SlugCache()-&gt;get_by_name($urltitle, false, false);</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">        #    if( $existing_Slug )</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">        #    {</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">        #        $slug_field_name = preg_replace('~^slug_~', '', $dbIDname);</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">        #        if( $existing_Slug-&gt;get($slug_field_name) == $urltitle )</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">        #        {</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">        #            // OK</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">        #        }</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">        #    }</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">        #}</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">        // CHECK FOR UNIQUENESS:</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">        // Find all occurrences of urltitle-number in the DB:</span>
<a name="l459"><span class="linenum"> 459</span></a>          <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> = 'SELECT '.<a class="var it6746" onMouseOver="hilite(6746)" onMouseOut="lolite()" onClick="logVariable('dbSlugFieldName')" href="../../../../_variables/dbSlugFieldName.html">$dbSlugFieldName</a>.', '.<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../../_variables/dbIDname.html">$dbIDname</a>.'
<a name="l460"><span class="linenum"> 460</span></a>                            FROM '.<a class="var it3368" onMouseOver="hilite(3368)" onMouseOut="lolite()" onClick="logVariable('dbtable')" href="../../../../_variables/dbtable.html">$dbtable</a>.'
<a name="l461"><span class="linenum"> 461</span></a>                           WHERE '.<a class="var it6746" onMouseOver="hilite(6746)" onMouseOut="lolite()" onClick="logVariable('dbSlugFieldName')" href="../../../../_variables/dbSlugFieldName.html">$dbSlugFieldName</a>.&quot; REGEXP '^&quot;.<a class="var it6751" onMouseOver="hilite(6751)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../../../_variables/urlbase.html">$urlbase</a>.&quot;(-[0-9]+)?$'&quot;;
<a name="l462"><span class="linenum"> 462</span></a>          <a class="var it6754" onMouseOver="hilite(6754)" onMouseOut="lolite()" onClick="logVariable('exact_match')" href="../../../../_variables/exact_match.html">$exact_match</a> = false;
<a name="l463"><span class="linenum"> 463</span></a>          <a class="var it6755" onMouseOver="hilite(6755)" onMouseOut="lolite()" onClick="logVariable('highest_number')" href="../../../../_variables/highest_number.html">$highest_number</a> = 0;
<a name="l464"><span class="linenum"> 464</span></a>          <a class="var it6756" onMouseOver="hilite(6756)" onMouseOut="lolite()" onClick="logVariable('use_existing_number')" href="../../../../_variables/use_existing_number.html">$use_existing_number</a> = NULL;
<a name="l465"><span class="linenum"> 465</span></a>          foreach( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a>, <a class="constant" onClick="logConstant('ARRAY_A')" href="../../../../_constants/ARRAY_A.html" onMouseOver="constPopup(event,'ARRAY_A')">ARRAY_A</a> ) as <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../../_variables/row.html">$row</a> )
<a name="l466"><span class="linenum"> 466</span></a>          {
<a name="l467"><span class="linenum"> 467</span></a>              <a class="var it6757" onMouseOver="hilite(6757)" onMouseOut="lolite()" onClick="logVariable('existing_urltitle')" href="../../../../_variables/existing_urltitle.html">$existing_urltitle</a> = <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../../_variables/row.html">$row</a>[<a class="var it6746" onMouseOver="hilite(6746)" onMouseOut="lolite()" onClick="logVariable('dbSlugFieldName')" href="../../../../_variables/dbSlugFieldName.html">$dbSlugFieldName</a>];
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">            // echo &quot;existing = $existing_urltitle &lt;br /&gt;&quot;;</span>
<a name="l469"><span class="linenum"> 469</span></a>              if( <a class="var it6757" onMouseOver="hilite(6757)" onMouseOut="lolite()" onClick="logVariable('existing_urltitle')" href="../../../../_variables/existing_urltitle.html">$existing_urltitle</a> == <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> &amp;&amp; <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../../_variables/row.html">$row</a>[<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../../_variables/dbIDname.html">$dbIDname</a>] != <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> )
<a name="l470"><span class="linenum"> 470</span></a>              { // We have an exact match, we'll have to change the number.
<a name="l471"><span class="linenum"> 471</span></a>                  <a class="var it6754" onMouseOver="hilite(6754)" onMouseOut="lolite()" onClick="logVariable('exact_match')" href="../../../../_variables/exact_match.html">$exact_match</a> = true;
<a name="l472"><span class="linenum"> 472</span></a>              }
<a name="l473"><span class="linenum"> 473</span></a>              if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/-([0-9]+)$/', <a class="var it6757" onMouseOver="hilite(6757)" onMouseOut="lolite()" onClick="logVariable('existing_urltitle')" href="../../../../_variables/existing_urltitle.html">$existing_urltitle</a>, <a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../../_variables/matches.html">$matches</a> ) )
<a name="l474"><span class="linenum"> 474</span></a>              { // This one has a number, we extract it:
<a name="l475"><span class="linenum"> 475</span></a>                  <a class="var it6758" onMouseOver="hilite(6758)" onMouseOut="lolite()" onClick="logVariable('existing_number')" href="../../../../_variables/existing_number.html">$existing_number</a> = (int)<a class="var it701" onMouseOver="hilite(701)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../../_variables/matches.html">$matches</a>[1];
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>                  if( ! isset(<a class="var it6756" onMouseOver="hilite(6756)" onMouseOut="lolite()" onClick="logVariable('use_existing_number')" href="../../../../_variables/use_existing_number.html">$use_existing_number</a>) &amp;&amp; <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../../_variables/row.html">$row</a>[<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../../_variables/dbIDname.html">$dbIDname</a>] == <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> )
<a name="l478"><span class="linenum"> 478</span></a>                  { // if there is a numbered entry for the current ID, use this:
<a name="l479"><span class="linenum"> 479</span></a>                      <a class="var it6756" onMouseOver="hilite(6756)" onMouseOut="lolite()" onClick="logVariable('use_existing_number')" href="../../../../_variables/use_existing_number.html">$use_existing_number</a> = <a class="var it6758" onMouseOver="hilite(6758)" onMouseOut="lolite()" onClick="logVariable('existing_number')" href="../../../../_variables/existing_number.html">$existing_number</a>;
<a name="l480"><span class="linenum"> 480</span></a>                  }
<a name="l481"><span class="linenum"> 481</span></a>  
<a name="l482"><span class="linenum"> 482</span></a>                  if( <a class="var it6758" onMouseOver="hilite(6758)" onMouseOut="lolite()" onClick="logVariable('existing_number')" href="../../../../_variables/existing_number.html">$existing_number</a> &gt; <a class="var it6755" onMouseOver="hilite(6755)" onMouseOut="lolite()" onClick="logVariable('highest_number')" href="../../../../_variables/highest_number.html">$highest_number</a> )
<a name="l483"><span class="linenum"> 483</span></a>                  { // This is the new high
<a name="l484"><span class="linenum"> 484</span></a>                      <a class="var it6755" onMouseOver="hilite(6755)" onMouseOut="lolite()" onClick="logVariable('highest_number')" href="../../../../_variables/highest_number.html">$highest_number</a> = <a class="var it6758" onMouseOver="hilite(6758)" onMouseOut="lolite()" onClick="logVariable('existing_number')" href="../../../../_variables/existing_number.html">$existing_number</a>;
<a name="l485"><span class="linenum"> 485</span></a>                  }
<a name="l486"><span class="linenum"> 486</span></a>              }
<a name="l487"><span class="linenum"> 487</span></a>          }
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">        // echo &quot;highest existing number = $highest_number &lt;br /&gt;&quot;;</span>
<a name="l489"><span class="linenum"> 489</span></a>  
<a name="l490"><span class="linenum"> 490</span></a>          if( <a class="var it6754" onMouseOver="hilite(6754)" onMouseOut="lolite()" onClick="logVariable('exact_match')" href="../../../../_variables/exact_match.html">$exact_match</a> &amp;&amp; !<a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('query_only')" href="../../../../_variables/query_only.html">$query_only</a> )
<a name="l491"><span class="linenum"> 491</span></a>          { // We got an exact (existing) match, we need to change the number:
<a name="l492"><span class="linenum"> 492</span></a>              <a class="var it2902" onMouseOver="hilite(2902)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../../_variables/number.html">$number</a> = <a class="var it6756" onMouseOver="hilite(6756)" onMouseOut="lolite()" onClick="logVariable('use_existing_number')" href="../../../../_variables/use_existing_number.html">$use_existing_number</a> ? <a class="var it6756" onMouseOver="hilite(6756)" onMouseOut="lolite()" onClick="logVariable('use_existing_number')" href="../../../../_variables/use_existing_number.html">$use_existing_number</a> : (<a class="var it6755" onMouseOver="hilite(6755)" onMouseOut="lolite()" onClick="logVariable('highest_number')" href="../../../../_variables/highest_number.html">$highest_number</a>+1);
<a name="l493"><span class="linenum"> 493</span></a>              <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> = <a class="var it6751" onMouseOver="hilite(6751)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../../../_variables/urlbase.html">$urlbase</a>.'-'.<a class="var it2902" onMouseOver="hilite(2902)" onMouseOut="lolite()" onClick="logVariable('number')" href="../../../../_variables/number.html">$number</a>;
<a name="l494"><span class="linenum"> 494</span></a>          }
<a name="l495"><span class="linenum"> 495</span></a>      }
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">    // echo &quot;using = $urltitle &lt;br /&gt;&quot;;</span>
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>      if( !empty(<a class="var it6747" onMouseOver="hilite(6747)" onMouseOut="lolite()" onClick="logVariable('orig_title')" href="../../../../_variables/orig_title.html">$orig_title</a>) &amp;&amp; <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> != <a class="var it6747" onMouseOver="hilite(6747)" onMouseOut="lolite()" onClick="logVariable('orig_title')" href="../../../../_variables/orig_title.html">$orig_title</a> )
<a name="l500"><span class="linenum"> 500</span></a>      {
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf(<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Warning: the URL slug has been changed to &amp;laquo;%s&amp;raquo;.'), <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a> ), 'note' );
<a name="l502"><span class="linenum"> 502</span></a>      }
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>      return <a class="var it974" onMouseOver="hilite(974)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../../_variables/urltitle.html">$urltitle</a>;
<a name="l505"><span class="linenum"> 505</span></a>  }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">/**</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment"> * if global $postdata was not set it will be</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment"> */</span>
<a name="l511"><span class="linenum"> 511</span></a>  function <a class="function" onClick="logFunction('get_postdata')" href="../../../../_functions/get_postdata.html" onMouseOver="funcPopup(event,'get_postdata')">get_postdata</a>(<a class="var it5312" onMouseOver="hilite(5312)" onMouseOut="lolite()" onClick="logVariable('postid')" href="../../../../_variables/postid.html">$postid</a>)
<a name="l512"><span class="linenum"> 512</span></a>  {
<a name="l513"><span class="linenum"> 513</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it1956" onMouseOver="hilite(1956)" onMouseOut="lolite()" onClick="logVariable('postdata')" href="../../../../_variables/postdata.html">$postdata</a>, <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a>;
<a name="l514"><span class="linenum"> 514</span></a>  
<a name="l515"><span class="linenum"> 515</span></a>      if( !empty(<a class="var it1956" onMouseOver="hilite(1956)" onMouseOut="lolite()" onClick="logVariable('postdata')" href="../../../../_variables/postdata.html">$postdata</a>) &amp;&amp; <a class="var it1956" onMouseOver="hilite(1956)" onMouseOut="lolite()" onClick="logVariable('postdata')" href="../../../../_variables/postdata.html">$postdata</a>['ID'] == <a class="var it5312" onMouseOver="hilite(5312)" onMouseOut="lolite()" onClick="logVariable('postid')" href="../../../../_variables/postid.html">$postid</a> )
<a name="l516"><span class="linenum"> 516</span></a>      { // We are asking for postdata of current post in memory! (we're in the b2 loop)
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">        // Already in memory! This will be the case when generating permalink at display</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">        // (but not when sending trackbacks!)</span>
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">        // echo &quot;*** Accessing post data in memory! ***&lt;br /&gt;\n&quot;;</span>
<a name="l520"><span class="linenum"> 520</span></a>          return(<a class="var it1956" onMouseOver="hilite(1956)" onMouseOut="lolite()" onClick="logVariable('postdata')" href="../../../../_variables/postdata.html">$postdata</a>);
<a name="l521"><span class="linenum"> 521</span></a>      }
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">    // echo &quot;*** Loading post data! ***&lt;br&gt;\n&quot;;</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">    // We have to load the post</span>
<a name="l525"><span class="linenum"> 525</span></a>      <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> = 'SELECT post_ID, post_creator_user_ID, post_datestart, post_datemodified, post_status, post_content, post_title,
<a name="l526"><span class="linenum"> 526</span></a>                                              post_main_cat_ID, cat_blog_ID ';
<a name="l527"><span class="linenum"> 527</span></a>      <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> .= ', post_locale, post_url, post_wordcount, post_comment_status ';
<a name="l528"><span class="linenum"> 528</span></a>      <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> .= '    FROM T_items__item
<a name="l529"><span class="linenum"> 529</span></a>                       INNER JOIN T_categories ON post_main_cat_ID = cat_ID
<a name="l530"><span class="linenum"> 530</span></a>                       WHERE post_ID = '.<a class="var it5312" onMouseOver="hilite(5312)" onMouseOut="lolite()" onClick="logVariable('postid')" href="../../../../_variables/postid.html">$postid</a>;
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">    // Restrict to the statuses we want to show:</span>
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">    // echo $show_statuses;</span>
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment">    // fplanque: 2004-04-04: this should not be needed here. (and is indeed problematic when we want to</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">    // get a post before even knowning which blog it belongs to. We can think of putting a security check</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">    // back into the Item class)</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">    // $sql .= ' AND '.statuses_where_clause( $show_statuses );</span>
<a name="l537"><span class="linenum"> 537</span></a>  
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">    // echo $sql;</span>
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>      if( <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( <a class="var it42" onMouseOver="hilite(42)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> ) )
<a name="l541"><span class="linenum"> 541</span></a>      {
<a name="l542"><span class="linenum"> 542</span></a>          <a class="var it6759" onMouseOver="hilite(6759)" onMouseOut="lolite()" onClick="logVariable('mypostdata')" href="../../../../_variables/mypostdata.html">$mypostdata</a> = array (
<a name="l543"><span class="linenum"> 543</span></a>              'ID' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_ID')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_ID.html">post_ID</a>,
<a name="l544"><span class="linenum"> 544</span></a>              'Author_ID' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_creator_user_ID')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_creator_user_ID.html">post_creator_user_ID</a>,
<a name="l545"><span class="linenum"> 545</span></a>              'Date' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_datestart')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_datestart.html">post_datestart</a>,
<a name="l546"><span class="linenum"> 546</span></a>              'Status' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_status')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_status.html">post_status</a>,
<a name="l547"><span class="linenum"> 547</span></a>              'Content' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_content')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_content.html">post_content</a>,
<a name="l548"><span class="linenum"> 548</span></a>              'Title' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_title')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_title.html">post_title</a>,
<a name="l549"><span class="linenum"> 549</span></a>              'Category' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_main_cat_ID')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_main_cat_ID.html">post_main_cat_ID</a>,
<a name="l550"><span class="linenum"> 550</span></a>              'Locale' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_locale')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_locale.html">post_locale</a>,
<a name="l551"><span class="linenum"> 551</span></a>              'Url' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_url')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_url.html">post_url</a>,
<a name="l552"><span class="linenum"> 552</span></a>              'Wordcount' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_wordcount')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_wordcount.html">post_wordcount</a>,
<a name="l553"><span class="linenum"> 553</span></a>              'comment_status' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('post_comment_status')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/post_comment_status.html">post_comment_status</a>,
<a name="l554"><span class="linenum"> 554</span></a>              'Blog' =&gt; <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('myrow')" href="../../../../_variables/myrow.html">$myrow</a>-&gt;<a onClick="logVariable('cat_blog_ID')" class="var it9186" onMouseOver="hilite(9186)" onMouseOut="lolite()" href="../../../../_variables/cat_blog_ID.html">cat_blog_ID</a>,
<a name="l555"><span class="linenum"> 555</span></a>              );
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">        // Caching is particularly useful when displaying a single post and you call single_post_title several times</span>
<a name="l558"><span class="linenum"> 558</span></a>          if( !isset( <a class="var it1956" onMouseOver="hilite(1956)" onMouseOut="lolite()" onClick="logVariable('postdata')" href="../../../../_variables/postdata.html">$postdata</a> ) ) <a class="var it1956" onMouseOver="hilite(1956)" onMouseOut="lolite()" onClick="logVariable('postdata')" href="../../../../_variables/postdata.html">$postdata</a> = <a class="var it6759" onMouseOver="hilite(6759)" onMouseOut="lolite()" onClick="logVariable('mypostdata')" href="../../../../_variables/mypostdata.html">$mypostdata</a>;    <span class="comment">// Will save time, next time :)</span>
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>          return(<a class="var it6759" onMouseOver="hilite(6759)" onMouseOut="lolite()" onClick="logVariable('mypostdata')" href="../../../../_variables/mypostdata.html">$mypostdata</a>);
<a name="l561"><span class="linenum"> 561</span></a>      }
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>      return false;
<a name="l564"><span class="linenum"> 564</span></a>  }
<a name="l565"><span class="linenum"> 565</span></a>  
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>  
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">// @@@ These aren't template tags, do not edit them</span>
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">/**</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment"> * Returns the number of the words in a string, sans HTML</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment"> *</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment"> * @todo dh&gt; Test if http://de3.php.net/manual/en/function.str-word-count.php#85579 works better/faster</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment"> *           (only one preg_* call and no loop).</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment"> *</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment"> * @param string The string.</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment"> * @return integer Number of words.</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment"> *</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment"> * @internal PHP's str_word_count() is not accurate. Inaccuracy reported</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment"> *           by sam2kb: http://forums.b2evolution.net/viewtopic.php?t=16596</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment"> */</span>
<a name="l585"><span class="linenum"> 585</span></a>  function <a class="function" onClick="logFunction('bpost_count_words')" href="../../../../_functions/bpost_count_words.html" onMouseOver="funcPopup(event,'bpost_count_words')">bpost_count_words</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../../_variables/str.html">$str</a> )
<a name="l586"><span class="linenum"> 586</span></a>  {
<a name="l587"><span class="linenum"> 587</span></a>      global <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../../_variables/evo_charset.html">$evo_charset</a>;
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>      <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../../_variables/str.html">$str</a> ) );
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">    // Note: The \p escape sequence is available since PHP 4.4.0 and 5.1.0.</span>
<a name="l592"><span class="linenum"> 592</span></a>      if( @<a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '|\pL|u', 'foo' ) === false )
<a name="l593"><span class="linenum"> 593</span></a>      {
<a name="l594"><span class="linenum"> 594</span></a>          return <a class="phpfunction" onClick="logFunction('str_word_count')" href="../../../../_functions/str_word_count.html" onMouseOver="phpfuncPopup(event,'str_word_count')">str_word_count</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../../_variables/str.html">$str</a> );
<a name="l595"><span class="linenum"> 595</span></a>      }
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>      <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a> = 0;
<a name="l598"><span class="linenum"> 598</span></a>  
<a name="l599"><span class="linenum"> 599</span></a>      foreach( <a class="phpfunction" onClick="logFunction('preg_split')" href="../../../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>( '#\s+#', <a class="function" onClick="logFunction('convert_charset')" href="../../../../_functions/convert_charset.html" onMouseOver="funcPopup(event,'convert_charset')">convert_charset</a>( <a class="var it2688" onMouseOver="hilite(2688)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../../../_variables/str.html">$str</a>, 'UTF-8', <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../../../../_variables/evo_charset.html">$evo_charset</a> ), -1,
<a name="l600"><span class="linenum"> 600</span></a>                              PREG_SPLIT_NO_EMPTY ) as <a class="var it1384" onMouseOver="hilite(1384)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../../../_variables/word.html">$word</a> )
<a name="l601"><span class="linenum"> 601</span></a>      {
<a name="l602"><span class="linenum"> 602</span></a>          if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#\pL#u', <a class="var it1384" onMouseOver="hilite(1384)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../../../_variables/word.html">$word</a> ) )
<a name="l603"><span class="linenum"> 603</span></a>          {
<a name="l604"><span class="linenum"> 604</span></a>              ++<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>;
<a name="l605"><span class="linenum"> 605</span></a>          }
<a name="l606"><span class="linenum"> 606</span></a>      }
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>      return <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>;
<a name="l609"><span class="linenum"> 609</span></a>  }
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">/**</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment"> * Get allowed statuses for the current User</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment"> *</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment"> * Note: This function must be called only from the statuses_where_clause()!</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment"> *</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment"> * @param array statuses to filter</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment"> * @param string database status field column prefix</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment"> * @param integer the blog ID where to check allowed statuses</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment"> * @param string the status permission prefix</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment"> * @return string the condition</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment"> */</span>
<a name="l623"><span class="linenum"> 623</span></a>  function <a class="function" onClick="logFunction('get_allowed_statuses_condition')" href="../../../../_functions/get_allowed_statuses_condition.html" onMouseOver="funcPopup(event,'get_allowed_statuses_condition')">get_allowed_statuses_condition</a>( <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../../_variables/statuses.html">$statuses</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a>, <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a> )
<a name="l624"><span class="linenum"> 624</span></a>  {
<a name="l625"><span class="linenum"> 625</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">    // init where clauses array</span>
<a name="l628"><span class="linenum"> 628</span></a>      <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a> = array();
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">    // init allowed statuses array</span>
<a name="l630"><span class="linenum"> 630</span></a>      <a class="var it6765" onMouseOver="hilite(6765)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses')" href="../../../../_variables/allowed_statuses.html">$allowed_statuses</a> = array();
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>      <a class="var it3160" onMouseOver="hilite(3160)" onMouseOut="lolite()" onClick="logVariable('is_logged_in')" href="../../../../_variables/is_logged_in.html">$is_logged_in</a> = <a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false );
<a name="l633"><span class="linenum"> 633</span></a>      <a class="var it6766" onMouseOver="hilite(6766)" onMouseOut="lolite()" onClick="logVariable('creator_coll_name')" href="../../../../_variables/creator_coll_name.html">$creator_coll_name</a> = ( <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a> == 'post_' ) ? <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.'creator_user_ID' : <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.'author_user_ID';
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">    // Iterate through all statuses and set allowed to true only if the corresponding status is allowed in case of any post/comments</span>
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">    // If the status is not allowed to show, but exists further conditions which may allow it, then set the condition.</span>
<a name="l636"><span class="linenum"> 636</span></a>      foreach( <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../../_variables/statuses.html">$statuses</a> as <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a> =&gt; <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> )
<a name="l637"><span class="linenum"> 637</span></a>      {
<a name="l638"><span class="linenum"> 638</span></a>          switch( <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> )
<a name="l639"><span class="linenum"> 639</span></a>          {
<a name="l640"><span class="linenum"> 640</span></a>              case 'published': // Published post/comments are always allowed
<a name="l641"><span class="linenum"> 641</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = true;
<a name="l642"><span class="linenum"> 642</span></a>                  break;
<a name="l643"><span class="linenum"> 643</span></a>  
<a name="l644"><span class="linenum"> 644</span></a>              case 'community': // It is always allowed for logged in users
<a name="l645"><span class="linenum"> 645</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = <a class="var it3160" onMouseOver="hilite(3160)" onMouseOut="lolite()" onClick="logVariable('is_logged_in')" href="../../../../_variables/is_logged_in.html">$is_logged_in</a>;
<a name="l646"><span class="linenum"> 646</span></a>                  break;
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>              case 'protected': // It is always allowed for members
<a name="l649"><span class="linenum"> 649</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = ( <a class="var it3160" onMouseOver="hilite(3160)" onMouseOut="lolite()" onClick="logVariable('is_logged_in')" href="../../../../_variables/is_logged_in.html">$is_logged_in</a> &amp;&amp; ( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_ismember', 1, false, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) ) );
<a name="l650"><span class="linenum"> 650</span></a>                  break;
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>              case 'private': // It is allowed for users who has global 'editall' permission but only on back-office
<a name="l653"><span class="linenum"> 653</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = ( <a class="function" onClick="logFunction('is_admin_page')" href="../../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'editall' ) );
<a name="l654"><span class="linenum"> 654</span></a>                  if( !<a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> &amp;&amp; <a class="var it3160" onMouseOver="hilite(3160)" onMouseOut="lolite()" onClick="logVariable('is_logged_in')" href="../../../../_variables/is_logged_in.html">$is_logged_in</a> &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a>.'private', 'create', false, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) )
<a name="l655"><span class="linenum"> 655</span></a>                  { // Own private posts/comments are allowed if user can create private posts/comments
<a name="l656"><span class="linenum"> 656</span></a>                      <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>[] = ' ( '.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.&quot;status = 'private' AND &quot;.<a class="var it6766" onMouseOver="hilite(6766)" onMouseOut="lolite()" onClick="logVariable('creator_coll_name')" href="../../../../_variables/creator_coll_name.html">$creator_coll_name</a>.' = '.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.' ) ';
<a name="l657"><span class="linenum"> 657</span></a>                  }
<a name="l658"><span class="linenum"> 658</span></a>                  break;
<a name="l659"><span class="linenum"> 659</span></a>  
<a name="l660"><span class="linenum"> 660</span></a>              case 'review': // It is allowed for users who have permission to create comments with 'review' status and have at least 'lt' posts/comments edit perm
<a name="l661"><span class="linenum"> 661</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = ( <a class="var it3160" onMouseOver="hilite(3160)" onMouseOut="lolite()" onClick="logVariable('is_logged_in')" href="../../../../_variables/is_logged_in.html">$is_logged_in</a> &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a>.'review', 'moderate', false, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) );
<a name="l662"><span class="linenum"> 662</span></a>                  if( !<a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> &amp;&amp; <a class="var it3160" onMouseOver="hilite(3160)" onMouseOut="lolite()" onClick="logVariable('is_logged_in')" href="../../../../_variables/is_logged_in.html">$is_logged_in</a> &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a>.'review', 'create', false, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) )
<a name="l663"><span class="linenum"> 663</span></a>                  { // Own posts/comments with 'review' status are allowed if user can create posts/comments with 'review' status
<a name="l664"><span class="linenum"> 664</span></a>                      <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>[] = ' ( '.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.&quot;status = 'review' AND &quot;.<a class="var it6766" onMouseOver="hilite(6766)" onMouseOut="lolite()" onClick="logVariable('creator_coll_name')" href="../../../../_variables/creator_coll_name.html">$creator_coll_name</a>.' = '.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.' ) ';
<a name="l665"><span class="linenum"> 665</span></a>                  }
<a name="l666"><span class="linenum"> 666</span></a>                  break;
<a name="l667"><span class="linenum"> 667</span></a>  
<a name="l668"><span class="linenum"> 668</span></a>              case 'draft': // In back-office it is always allowed for users who may create posts/commetns with 'draft' status
<a name="l669"><span class="linenum"> 669</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = ( <a class="function" onClick="logFunction('is_admin_page')" href="../../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a>.'draft', 'create', false, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) );
<a name="l670"><span class="linenum"> 670</span></a>                  if( !<a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> &amp;&amp; <a class="var it3160" onMouseOver="hilite(3160)" onMouseOut="lolite()" onClick="logVariable('is_logged_in')" href="../../../../_variables/is_logged_in.html">$is_logged_in</a> &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a>.'draft', 'create', false, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) )
<a name="l671"><span class="linenum"> 671</span></a>                  { // In front-office only authors may see their own draft posts/comments, but only if the have permission to create draft posts/comments
<a name="l672"><span class="linenum"> 672</span></a>                      <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>[] = ' ( '.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.&quot;status = 'draft' AND &quot;.<a class="var it6766" onMouseOver="hilite(6766)" onMouseOut="lolite()" onClick="logVariable('creator_coll_name')" href="../../../../_variables/creator_coll_name.html">$creator_coll_name</a>.' = '.<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.' ) ';
<a name="l673"><span class="linenum"> 673</span></a>                  }
<a name="l674"><span class="linenum"> 674</span></a>                  break;
<a name="l675"><span class="linenum"> 675</span></a>  
<a name="l676"><span class="linenum"> 676</span></a>              case 'deprecated': // In back-office it is always allowed for users who may create posts/comments with 'deprecated' status
<a name="l677"><span class="linenum"> 677</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = ( <a class="function" onClick="logFunction('is_admin_page')" href="../../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a>.'deprecated', 'create', false, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) );
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment">                // In front-office it is never allowed</span>
<a name="l679"><span class="linenum"> 679</span></a>                  break;
<a name="l680"><span class="linenum"> 680</span></a>  
<a name="l681"><span class="linenum"> 681</span></a>              case 'redirected': // In back-office it is always allowed for users who may create posts/comments with 'deprecated' status
<a name="l682"><span class="linenum"> 682</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = ( <a class="function" onClick="logFunction('is_admin_page')" href="../../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a>.'redirected', 'create', false, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) );
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">                // In front-office it is never allowed</span>
<a name="l684"><span class="linenum"> 684</span></a>                  break;
<a name="l685"><span class="linenum"> 685</span></a>  
<a name="l686"><span class="linenum"> 686</span></a>              case 'trash':
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">                // Currently only users with global editall permissions are allowed to view/delete recycled comments</span>
<a name="l688"><span class="linenum"> 688</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = ( ( <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a> == 'comment_' ) &amp;&amp; <a class="function" onClick="logFunction('is_admin_page')" href="../../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'editall' ) );
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">                // In front-office it is never allowed</span>
<a name="l690"><span class="linenum"> 690</span></a>                  break;
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>              default: // Allow other statuses are restricted. It is very important to keep this restricted because of SQL injections also, so we never allow a status what we don't know.
<a name="l693"><span class="linenum"> 693</span></a>                  <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> = false;
<a name="l694"><span class="linenum"> 694</span></a>          }
<a name="l695"><span class="linenum"> 695</span></a>  
<a name="l696"><span class="linenum"> 696</span></a>          if( <a class="var it2740" onMouseOver="hilite(2740)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../../../../_variables/allowed.html">$allowed</a> )
<a name="l697"><span class="linenum"> 697</span></a>          { // All posts/comments with this status can be displayed in the request blog for the current <a class="function" onClick="logFunction('User')" href="../../../../_functions/user.html" onMouseOver="funcPopup(event,'user')">User</a> ( or for anonymous )
<a name="l698"><span class="linenum"> 698</span></a>              <a class="var it6765" onMouseOver="hilite(6765)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses')" href="../../../../_variables/allowed_statuses.html">$allowed_statuses</a>[] = <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>;
<a name="l699"><span class="linenum"> 699</span></a>          }
<a name="l700"><span class="linenum"> 700</span></a>      }
<a name="l701"><span class="linenum"> 701</span></a>  
<a name="l702"><span class="linenum"> 702</span></a>      if( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it6765" onMouseOver="hilite(6765)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses')" href="../../../../_variables/allowed_statuses.html">$allowed_statuses</a> ) )
<a name="l703"><span class="linenum"> 703</span></a>      { // add allowed statuses condition
<a name="l704"><span class="linenum"> 704</span></a>          <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>[] = <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.'status IN ( \''.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '\',\'', <a class="var it6765" onMouseOver="hilite(6765)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses')" href="../../../../_variables/allowed_statuses.html">$allowed_statuses</a> ).'\' )';
<a name="l705"><span class="linenum"> 705</span></a>      }
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">    // Implode conditions collected in the $where array</span>
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">    // NOTE: If the array is empty, it means that the user has no permission to the requested statuses, so FALSE must be returned</span>
<a name="l709"><span class="linenum"> 709</span></a>      <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a> ) &gt; 0 ? ' ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' OR ', <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a> ).' ) ' : ' FALSE ';
<a name="l710"><span class="linenum"> 710</span></a>      return <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a>;
<a name="l711"><span class="linenum"> 711</span></a>  }
<a name="l712"><span class="linenum"> 712</span></a>  
<a name="l713"><span class="linenum"> 713</span></a>  
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">/**</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment"> * Construct the where clause to limit retrieved posts/comment on their status</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment"> *</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment"> * TODO: asimo&gt; would be good to move this function to an items and comments common file</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment"> *</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment"> * @param Array statuses of posts/comments we want to get</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment"> * @param string post/comment table db prefix</span>
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment"> * @param integer blog ID</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment"> * @param string permission prefix: 'blog_post!' or 'blog_comment!'</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment"> * @param boolean filter statuses by the current user perm and current page, by default is true. It should be false only e.g. when we have to count comments awaiting moderation.</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment"> * @return string statuses where condition</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment"> */</span>
<a name="l726"><span class="linenum"> 726</span></a>  function <a class="function" onClick="logFunction('statuses_where_clause')" href="../../../../_functions/statuses_where_clause.html" onMouseOver="funcPopup(event,'statuses_where_clause')">statuses_where_clause</a>( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> = NULL, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a> = 'post_', <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> = NULL, <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a> = 'blog_post!', <a class="var it3133" onMouseOver="hilite(3133)" onMouseOut="lolite()" onClick="logVariable('filter_by_perm')" href="../../../../_variables/filter_by_perm.html">$filter_by_perm</a> = true, <a class="var it6767" onMouseOver="hilite(6767)" onMouseOut="lolite()" onClick="logVariable('author_filter')" href="../../../../_variables/author_filter.html">$author_filter</a> = NULL )
<a name="l727"><span class="linenum"> 727</span></a>  {
<a name="l728"><span class="linenum"> 728</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">    // This statuses where clause is required for a post query</span>
<a name="l731"><span class="linenum"> 731</span></a>      <a class="var it6768" onMouseOver="hilite(6768)" onMouseOut="lolite()" onClick="logVariable('is_post_query')" href="../../../../_variables/is_post_query.html">$is_post_query</a> = ( <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a> == 'blog_post!' );
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> ) )
<a name="l734"><span class="linenum"> 734</span></a>      { // try to init request blog if it was not set
<a name="l735"><span class="linenum"> 735</span></a>          global <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l736"><span class="linenum"> 736</span></a>          <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l737"><span class="linenum"> 737</span></a>      }
<a name="l738"><span class="linenum"> 738</span></a>  
<a name="l739"><span class="linenum"> 739</span></a>      if( empty( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> ) )
<a name="l740"><span class="linenum"> 740</span></a>      { // use in-skin statuses if show_statuses is empty
<a name="l741"><span class="linenum"> 741</span></a>          <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> = <a class="function" onClick="logFunction('get_inskin_statuses')" href="../../../../_functions/get_inskin_statuses.html" onMouseOver="funcPopup(event,'get_inskin_statuses')">get_inskin_statuses</a>( <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a>, <a class="var it6768" onMouseOver="hilite(6768)" onMouseOut="lolite()" onClick="logVariable('is_post_query')" href="../../../../_variables/is_post_query.html">$is_post_query</a> ? 'post' : 'comment' );
<a name="l742"><span class="linenum"> 742</span></a>      }
<a name="l743"><span class="linenum"> 743</span></a>  
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">    // init where clauses array</span>
<a name="l745"><span class="linenum"> 745</span></a>      <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a> = array();
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">    // Check modules item statuses where condition but only in case of the items, and don't need to check in case of comments</span>
<a name="l748"><span class="linenum"> 748</span></a>      if( <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> &amp;&amp; <a class="var it6768" onMouseOver="hilite(6768)" onMouseOut="lolite()" onClick="logVariable('is_post_query')" href="../../../../_variables/is_post_query.html">$is_post_query</a> )
<a name="l749"><span class="linenum"> 749</span></a>      { // If requested blog is set, then set additional &quot;where&quot; clauses from modules method, before we would manipulate the <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> array
<a name="l750"><span class="linenum"> 750</span></a>          <a class="var it6769" onMouseOver="hilite(6769)" onMouseOut="lolite()" onClick="logVariable('modules_condition')" href="../../../../_variables/modules_condition.html">$modules_condition</a> = <a class="function" onClick="logFunction('modules_call_method')" href="../../../../_functions/modules_call_method.html" onMouseOver="funcPopup(event,'modules_call_method')">modules_call_method</a>( 'get_item_statuses_where_clause', array( 'blog_ID' =&gt; <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a>, 'statuses' =&gt; <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> ) );
<a name="l751"><span class="linenum"> 751</span></a>          if( !empty( <a class="var it6769" onMouseOver="hilite(6769)" onMouseOut="lolite()" onClick="logVariable('modules_condition')" href="../../../../_variables/modules_condition.html">$modules_condition</a> ) )
<a name="l752"><span class="linenum"> 752</span></a>          {
<a name="l753"><span class="linenum"> 753</span></a>              foreach( <a class="var it6769" onMouseOver="hilite(6769)" onMouseOut="lolite()" onClick="logVariable('modules_condition')" href="../../../../_variables/modules_condition.html">$modules_condition</a> as <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('condition')" href="../../../../_variables/condition.html">$condition</a> )
<a name="l754"><span class="linenum"> 754</span></a>              {
<a name="l755"><span class="linenum"> 755</span></a>                  if( ! empty( <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('condition')" href="../../../../_variables/condition.html">$condition</a> ) )
<a name="l756"><span class="linenum"> 756</span></a>                  { // condition is not empty
<a name="l757"><span class="linenum"> 757</span></a>                      <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>[] = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('condition')" href="../../../../_variables/condition.html">$condition</a>;
<a name="l758"><span class="linenum"> 758</span></a>                  }
<a name="l759"><span class="linenum"> 759</span></a>              }
<a name="l760"><span class="linenum"> 760</span></a>          }
<a name="l761"><span class="linenum"> 761</span></a>      }
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>      if( <a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) )
<a name="l764"><span class="linenum"> 764</span></a>      { // User is logged in and the account was activated
<a name="l765"><span class="linenum"> 765</span></a>          if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'editall', false ) )
<a name="l766"><span class="linenum"> 766</span></a>          { // User has permission to all blogs posts and comments, we don't have to check blog specific permissions.
<a name="l767"><span class="linenum"> 767</span></a>              <a class="var it6770" onMouseOver="hilite(6770)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses_cond')" href="../../../../_variables/allowed_statuses_cond.html">$allowed_statuses_cond</a> = <a class="function" onClick="logFunction('get_allowed_statuses_condition')" href="../../../../_functions/get_allowed_statuses_condition.html" onMouseOver="funcPopup(event,'get_allowed_statuses_condition')">get_allowed_statuses_condition</a>( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>, NULL, <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a> );
<a name="l768"><span class="linenum"> 768</span></a>              if( ! empty( <a class="var it6770" onMouseOver="hilite(6770)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses_cond')" href="../../../../_variables/allowed_statuses_cond.html">$allowed_statuses_cond</a> ) )
<a name="l769"><span class="linenum"> 769</span></a>              { // condition is not empty
<a name="l770"><span class="linenum"> 770</span></a>                  <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>[] = <a class="var it6770" onMouseOver="hilite(6770)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses_cond')" href="../../../../_variables/allowed_statuses_cond.html">$allowed_statuses_cond</a>;
<a name="l771"><span class="linenum"> 771</span></a>              }
<a name="l772"><span class="linenum"> 772</span></a>              <a class="var it3133" onMouseOver="hilite(3133)" onMouseOut="lolite()" onClick="logVariable('filter_by_perm')" href="../../../../_variables/filter_by_perm.html">$filter_by_perm</a> = false;
<a name="l773"><span class="linenum"> 773</span></a>              <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> = NULL;
<a name="l774"><span class="linenum"> 774</span></a>          }
<a name="l775"><span class="linenum"> 775</span></a>          elseif( !empty( <a class="var it6767" onMouseOver="hilite(6767)" onMouseOut="lolite()" onClick="logVariable('author_filter')" href="../../../../_variables/author_filter.html">$author_filter</a> ) &amp;&amp; ( <a class="var it6767" onMouseOver="hilite(6767)" onMouseOut="lolite()" onClick="logVariable('author_filter')" href="../../../../_variables/author_filter.html">$author_filter</a> != <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l776"><span class="linenum"> 776</span></a>          { // Author filter is set, but current_User is not the filtered user, then these statuses are not visible for sure
<a name="l777"><span class="linenum"> 777</span></a>              <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a>, array( 'private', 'draft' ) );
<a name="l778"><span class="linenum"> 778</span></a>          }
<a name="l779"><span class="linenum"> 779</span></a>      }
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>      if( ( <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a> == 0 ) &amp;&amp; <a class="var it3133" onMouseOver="hilite(3133)" onMouseOut="lolite()" onClick="logVariable('filter_by_perm')" href="../../../../_variables/filter_by_perm.html">$filter_by_perm</a> )
<a name="l782"><span class="linenum"> 782</span></a>      { // This is a very special case when we must check visibility statuses from each blog separately
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">        // Note: This case should not be called frequently, it may be really slow!!</span>
<a name="l784"><span class="linenum"> 784</span></a>          <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a> = '';
<a name="l785"><span class="linenum"> 785</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('condition')" href="../../../../_variables/condition.html">$condition</a> = '';
<a name="l786"><span class="linenum"> 786</span></a>          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'published', <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> ) )
<a name="l787"><span class="linenum"> 787</span></a>          { // 'published' status is always allowed in case of all blogs, handle this condition separately
<a name="l788"><span class="linenum"> 788</span></a>              <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a> = '( '.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.'status = &quot;published&quot; )';
<a name="l789"><span class="linenum"> 789</span></a>              <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('condition')" href="../../../../_variables/condition.html">$condition</a> = ' OR ';
<a name="l790"><span class="linenum"> 790</span></a>          }
<a name="l791"><span class="linenum"> 791</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) )
<a name="l792"><span class="linenum"> 792</span></a>          { // When user is not logged in only the 'published' status is allowed, don't check more
<a name="l793"><span class="linenum"> 793</span></a>              return <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a>;
<a name="l794"><span class="linenum"> 794</span></a>          }
<a name="l795"><span class="linenum"> 795</span></a>          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'community', <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> ) )
<a name="l796"><span class="linenum"> 796</span></a>          { // 'community' status is always allowed in case of all blogs when a user is logged in, handle this condition separately
<a name="l797"><span class="linenum"> 797</span></a>              <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a> .= <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('condition')" href="../../../../_variables/condition.html">$condition</a>.'( '.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.'status = &quot;community&quot; )';
<a name="l798"><span class="linenum"> 798</span></a>              <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('condition')" href="../../../../_variables/condition.html">$condition</a> = ' OR ';
<a name="l799"><span class="linenum"> 799</span></a>          }
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">        // Remove 'published' and 'community' statuses because those were already handled</span>
<a name="l801"><span class="linenum"> 801</span></a>          <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a>, array( 'published', 'community' ) );
<a name="l802"><span class="linenum"> 802</span></a>          if( empty( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> ) )
<a name="l803"><span class="linenum"> 803</span></a>          { // return if there are no other status
<a name="l804"><span class="linenum"> 804</span></a>              return <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a>;
<a name="l805"><span class="linenum"> 805</span></a>          }
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">        // Select each blog</span>
<a name="l807"><span class="linenum"> 807</span></a>          <a class="var it4361" onMouseOver="hilite(4361)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../../_variables/blog_ids.html">$blog_ids</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( 'SELECT blog_ID FROM T_blogs' );
<a name="l808"><span class="linenum"> 808</span></a>          <a class="var it6771" onMouseOver="hilite(6771)" onMouseOut="lolite()" onClick="logVariable('sub_condition')" href="../../../../_variables/sub_condition.html">$sub_condition</a> = '';
<a name="l809"><span class="linenum"> 809</span></a>          foreach( <a class="var it4361" onMouseOver="hilite(4361)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../../_variables/blog_ids.html">$blog_ids</a> as <a class="var it1913" onMouseOver="hilite(1913)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../../_variables/blog_id.html">$blog_id</a> )
<a name="l810"><span class="linenum"> 810</span></a>          { // create statuses where clause condition for each blog separately
<a name="l811"><span class="linenum"> 811</span></a>              <a class="var it6772" onMouseOver="hilite(6772)" onMouseOut="lolite()" onClick="logVariable('status_perm')" href="../../../../_variables/status_perm.html">$status_perm</a> = <a class="function" onClick="logFunction('statuses_where_clause')" href="../../../../_functions/statuses_where_clause.html" onMouseOver="funcPopup(event,'statuses_where_clause')">statuses_where_clause</a>( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>, <a class="var it1913" onMouseOver="hilite(1913)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../../_variables/blog_id.html">$blog_id</a>, <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a>, <a class="var it3133" onMouseOver="hilite(3133)" onMouseOut="lolite()" onClick="logVariable('filter_by_perm')" href="../../../../_variables/filter_by_perm.html">$filter_by_perm</a>, <a class="var it6767" onMouseOver="hilite(6767)" onMouseOut="lolite()" onClick="logVariable('author_filter')" href="../../../../_variables/author_filter.html">$author_filter</a> );
<a name="l812"><span class="linenum"> 812</span></a>              if( <a class="var it6772" onMouseOver="hilite(6772)" onMouseOut="lolite()" onClick="logVariable('status_perm')" href="../../../../_variables/status_perm.html">$status_perm</a> )
<a name="l813"><span class="linenum"> 813</span></a>              { // User has permission to view some statuses on this blog
<a name="l814"><span class="linenum"> 814</span></a>                  <a class="var it6771" onMouseOver="hilite(6771)" onMouseOut="lolite()" onClick="logVariable('sub_condition')" href="../../../../_variables/sub_condition.html">$sub_condition</a> .= '( ( cat_blog_ID = '.<a class="var it1913" onMouseOver="hilite(1913)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../../_variables/blog_id.html">$blog_id</a>.' ) AND'.<a class="var it6772" onMouseOver="hilite(6772)" onMouseOut="lolite()" onClick="logVariable('status_perm')" href="../../../../_variables/status_perm.html">$status_perm</a>.' ) OR ';
<a name="l815"><span class="linenum"> 815</span></a>              }
<a name="l816"><span class="linenum"> 816</span></a>          }
<a name="l817"><span class="linenum"> 817</span></a>          if( <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a> == 'post_' )
<a name="l818"><span class="linenum"> 818</span></a>          { // Item query condition
<a name="l819"><span class="linenum"> 819</span></a>              <a class="var it6773" onMouseOver="hilite(6773)" onMouseOut="lolite()" onClick="logVariable('from_table')" href="../../../../_variables/from_table.html">$from_table</a> = 'FROM T_items__item';
<a name="l820"><span class="linenum"> 820</span></a>              <a class="var it6774" onMouseOver="hilite(6774)" onMouseOut="lolite()" onClick="logVariable('reference_column')" href="../../../../_variables/reference_column.html">$reference_column</a> = 'post_ID';
<a name="l821"><span class="linenum"> 821</span></a>          }
<a name="l822"><span class="linenum"> 822</span></a>          else
<a name="l823"><span class="linenum"> 823</span></a>          { // Comment query condition
<a name="l824"><span class="linenum"> 824</span></a>              <a class="var it6773" onMouseOver="hilite(6773)" onMouseOut="lolite()" onClick="logVariable('from_table')" href="../../../../_variables/from_table.html">$from_table</a> = 'FROM T_comments';
<a name="l825"><span class="linenum"> 825</span></a>              <a class="var it6774" onMouseOver="hilite(6774)" onMouseOut="lolite()" onClick="logVariable('reference_column')" href="../../../../_variables/reference_column.html">$reference_column</a> ='comment_item_ID';
<a name="l826"><span class="linenum"> 826</span></a>          }
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">        // Select each object ID which corresponds to the statuses condition.</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">        // Note: This is a very slow query when there is many post/comments. This case should not be used frequently.</span>
<a name="l829"><span class="linenum"> 829</span></a>          <a class="var it6775" onMouseOver="hilite(6775)" onMouseOut="lolite()" onClick="logVariable('sub_query')" href="../../../../_variables/sub_query.html">$sub_query</a> = 'SELECT '.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.'ID '.<a class="var it6773" onMouseOver="hilite(6773)" onMouseOut="lolite()" onClick="logVariable('from_table')" href="../../../../_variables/from_table.html">$from_table</a>.'
<a name="l830"><span class="linenum"> 830</span></a>                          INNER JOIN T_postcats ON '.<a class="var it6774" onMouseOver="hilite(6774)" onMouseOut="lolite()" onClick="logVariable('reference_column')" href="../../../../_variables/reference_column.html">$reference_column</a>.' = postcat_post_ID
<a name="l831"><span class="linenum"> 831</span></a>                          INNER JOIN T_categories ON postcat_cat_ID = cat_ID
<a name="l832"><span class="linenum"> 832</span></a>                          <a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a> ('.<a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it6771" onMouseOver="hilite(6771)" onMouseOut="lolite()" onClick="logVariable('sub_condition')" href="../../../../_variables/sub_condition.html">$sub_condition</a>, 0, ( strlen( <a class="var it6771" onMouseOver="hilite(6771)" onMouseOut="lolite()" onClick="logVariable('sub_condition')" href="../../../../_variables/sub_condition.html">$sub_condition</a> ) - 3 ) ).')';
<a name="l833"><span class="linenum"> 833</span></a>          <a class="var it6776" onMouseOver="hilite(6776)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it6775" onMouseOver="hilite(6775)" onMouseOut="lolite()" onClick="logVariable('sub_query')" href="../../../../_variables/sub_query.html">$sub_query</a> ) );
<a name="l834"><span class="linenum"> 834</span></a>          if( <a class="var it6776" onMouseOver="hilite(6776)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> )
<a name="l835"><span class="linenum"> 835</span></a>          { // If thre is at least one post or comment
<a name="l836"><span class="linenum"> 836</span></a>              <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a> .= <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('condition')" href="../../../../_variables/condition.html">$condition</a>.'( '.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.'ID IN ('.<a class="var it6776" onMouseOver="hilite(6776)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a>.') )';
<a name="l837"><span class="linenum"> 837</span></a>          }
<a name="l838"><span class="linenum"> 838</span></a>          return <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a>;
<a name="l839"><span class="linenum"> 839</span></a>      }
<a name="l840"><span class="linenum"> 840</span></a>  
<a name="l841"><span class="linenum"> 841</span></a>      if( <a class="var it3133" onMouseOver="hilite(3133)" onMouseOut="lolite()" onClick="logVariable('filter_by_perm')" href="../../../../_variables/filter_by_perm.html">$filter_by_perm</a> )
<a name="l842"><span class="linenum"> 842</span></a>      { // filter allowed statuses by the current User perms and by the current page ( front or back office )
<a name="l843"><span class="linenum"> 843</span></a>          <a class="var it6770" onMouseOver="hilite(6770)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses_cond')" href="../../../../_variables/allowed_statuses_cond.html">$allowed_statuses_cond</a> = <a class="function" onClick="logFunction('get_allowed_statuses_condition')" href="../../../../_functions/get_allowed_statuses_condition.html" onMouseOver="funcPopup(event,'get_allowed_statuses_condition')">get_allowed_statuses_condition</a>( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>, <a class="var it6763" onMouseOver="hilite(6763)" onMouseOut="lolite()" onClick="logVariable('req_blog')" href="../../../../_variables/req_blog.html">$req_blog</a>, <a class="var it6764" onMouseOver="hilite(6764)" onMouseOut="lolite()" onClick="logVariable('perm_prefix')" href="../../../../_variables/perm_prefix.html">$perm_prefix</a> );
<a name="l844"><span class="linenum"> 844</span></a>          if( ! empty( <a class="var it6770" onMouseOver="hilite(6770)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses_cond')" href="../../../../_variables/allowed_statuses_cond.html">$allowed_statuses_cond</a> ) )
<a name="l845"><span class="linenum"> 845</span></a>          { // condition is not empty
<a name="l846"><span class="linenum"> 846</span></a>              <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>[] = <a class="var it6770" onMouseOver="hilite(6770)" onMouseOut="lolite()" onClick="logVariable('allowed_statuses_cond')" href="../../../../_variables/allowed_statuses_cond.html">$allowed_statuses_cond</a>;
<a name="l847"><span class="linenum"> 847</span></a>          }
<a name="l848"><span class="linenum"> 848</span></a>      }
<a name="l849"><span class="linenum"> 849</span></a>      elseif( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> ) )
<a name="l850"><span class="linenum"> 850</span></a>      { // we are not filtering so all status are allowed, add allowed statuses condition
<a name="l851"><span class="linenum"> 851</span></a>          <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>[] = <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>.'status IN ( \''.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '\',\'', <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('show_statuses')" href="../../../../_variables/show_statuses.html">$show_statuses</a> ).'\' )';
<a name="l852"><span class="linenum"> 852</span></a>      }
<a name="l853"><span class="linenum"> 853</span></a>  
<a name="l854"><span class="linenum"> 854</span></a>      <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a> ) &gt; 0 ? ' ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' OR ', <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a> ).' ) ' : '';
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">    // echo $where;</span>
<a name="l857"><span class="linenum"> 857</span></a>      return <a class="var it2493" onMouseOver="hilite(2493)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../../../_variables/where.html">$where</a>;
<a name="l858"><span class="linenum"> 858</span></a>  }
<a name="l859"><span class="linenum"> 859</span></a>  
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">/**</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment"> * Get post category setting</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment"> *</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment"> * @param int blog id</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment"> * @return int setting value</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment"> */</span>
<a name="l867"><span class="linenum"> 867</span></a>  function <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> )
<a name="l868"><span class="linenum"> 868</span></a>  {
<a name="l869"><span class="linenum"> 869</span></a>      <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l870"><span class="linenum"> 870</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, false, false );
<a name="l871"><span class="linenum"> 871</span></a>      if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> )
<a name="l872"><span class="linenum"> 872</span></a>      {
<a name="l873"><span class="linenum"> 873</span></a>          return -1;
<a name="l874"><span class="linenum"> 874</span></a>      }
<a name="l875"><span class="linenum"> 875</span></a>      <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../../_variables/post_categories.html">$post_categories</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'post_categories' );
<a name="l876"><span class="linenum"> 876</span></a>      switch( <a class="var it1927" onMouseOver="hilite(1927)" onMouseOut="lolite()" onClick="logVariable('post_categories')" href="../../../../_variables/post_categories.html">$post_categories</a> )
<a name="l877"><span class="linenum"> 877</span></a>      {
<a name="l878"><span class="linenum"> 878</span></a>          case 'no_cat_post':
<a name="l879"><span class="linenum"> 879</span></a>              return 0;
<a name="l880"><span class="linenum"> 880</span></a>          case 'one_cat_post':
<a name="l881"><span class="linenum"> 881</span></a>              return 1;
<a name="l882"><span class="linenum"> 882</span></a>          case 'multiple_cat_post':
<a name="l883"><span class="linenum"> 883</span></a>              return 2;
<a name="l884"><span class="linenum"> 884</span></a>          case 'main_extra_cat_post':
<a name="l885"><span class="linenum"> 885</span></a>              return 3;
<a name="l886"><span class="linenum"> 886</span></a>      }
<a name="l887"><span class="linenum"> 887</span></a>  }
<a name="l888"><span class="linenum"> 888</span></a>  
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">/**</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment"> * Recreate posts autogenerated excerpts</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment"> * Only those posts excerpt will be recreated which are visible in the front office</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment"> *</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment"> * Note: This process can be very very slow if there are many items in the database</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment"> *</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment"> * @param string the url to call if the process needs to be paused becuase of the max execution time</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment"> * @param boolean set true to start from the beginning, false otherwise</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment"> * @param boolean set to true to display recreated/all information or leave it on false to display only dots</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment"> */</span>
<a name="l899"><span class="linenum"> 899</span></a>  function <a class="function" onClick="logFunction('recreate_autogenerated_excerpts')" href="../../../../_functions/recreate_autogenerated_excerpts.html" onMouseOver="funcPopup(event,'recreate_autogenerated_excerpts')">recreate_autogenerated_excerpts</a>( <a class="var it5398" onMouseOver="hilite(5398)" onMouseOut="lolite()" onClick="logVariable('continue_url')" href="../../../../_variables/continue_url.html">$continue_url</a>, <a class="var it6777" onMouseOver="hilite(6777)" onMouseOut="lolite()" onClick="logVariable('remove_all')" href="../../../../_variables/remove_all.html">$remove_all</a> = true, <a class="var it6778" onMouseOver="hilite(6778)" onMouseOut="lolite()" onClick="logVariable('detailed_progress_log')" href="../../../../_variables/detailed_progress_log.html">$detailed_progress_log</a> = false )
<a name="l900"><span class="linenum"> 900</span></a>  {
<a name="l901"><span class="linenum"> 901</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a>;
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>      <a class="var it6779" onMouseOver="hilite(6779)" onMouseOut="lolite()" onClick="logVariable('start_time')" href="../../../../_variables/start_time.html">$start_time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l904"><span class="linenum"> 904</span></a>      <a class="var it6780" onMouseOver="hilite(6780)" onMouseOut="lolite()" onClick="logVariable('max_exec_time')" href="../../../../_variables/max_exec_time.html">$max_exec_time</a> = <a class="phpfunction" onClick="logFunction('ini_get')" href="../../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>( 'max_execution_time' );
<a name="l905"><span class="linenum"> 905</span></a>      <a class="var it6781" onMouseOver="hilite(6781)" onMouseOut="lolite()" onClick="logVariable('load_limit')" href="../../../../_variables/load_limit.html">$load_limit</a> = 50;
<a name="l906"><span class="linenum"> 906</span></a>      <a class="var it5404" onMouseOver="hilite(5404)" onMouseOut="lolite()" onClick="logVariable('progress_log_id')" href="../../../../_variables/progress_log_id.html">$progress_log_id</a> = 'progress_log';
<a name="l907"><span class="linenum"> 907</span></a>  <span class="comment">    // The timestamp when the process was started</span>
<a name="l908"><span class="linenum"> 908</span></a>      <a class="var it6782" onMouseOver="hilite(6782)" onMouseOut="lolite()" onClick="logVariable('process_start_ts')" href="../../../../_variables/process_start_ts.html">$process_start_ts</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'start_ts', 'string', <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a> );
<a name="l909"><span class="linenum"> 909</span></a>  
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">    // Update only those posts which may be visible in the front office</span>
<a name="l911"><span class="linenum"> 911</span></a>      <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a> = '( post_excerpt_autogenerated = 1 OR post_excerpt_autogenerated IS NULL ) AND post_status IN ( \''.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '\',\' ', <a class="function" onClick="logFunction('get_inskin_statuses')" href="../../../../_functions/get_inskin_statuses.html" onMouseOver="funcPopup(event,'get_inskin_statuses')">get_inskin_statuses</a>( NULL, 'post' ) ).'\' )';
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">    // Update only those posts which were already created when the recreate process was started</span>
<a name="l913"><span class="linenum"> 913</span></a>      <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a> .= ' AND post_datecreated &lt; '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="function" onClick="logFunction('date2mysql')" href="../../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it6782" onMouseOver="hilite(6782)" onMouseOut="lolite()" onClick="logVariable('process_start_ts')" href="../../../../_variables/process_start_ts.html">$process_start_ts</a> ) );
<a name="l914"><span class="linenum"> 914</span></a>  
<a name="l915"><span class="linenum"> 915</span></a>      if( <a class="var it6777" onMouseOver="hilite(6777)" onMouseOut="lolite()" onClick="logVariable('remove_all')" href="../../../../_variables/remove_all.html">$remove_all</a> )
<a name="l916"><span class="linenum"> 916</span></a>      { // We are in the beginning of the process and first we set all autogenerated excerpts values to NULL
<a name="l917"><span class="linenum"> 917</span></a>          if( <a class="var it6778" onMouseOver="hilite(6778)" onMouseOut="lolite()" onClick="logVariable('detailed_progress_log')" href="../../../../_variables/detailed_progress_log.html">$detailed_progress_log</a> )
<a name="l918"><span class="linenum"> 918</span></a>          { // Display detailed progess information
<a name="l919"><span class="linenum"> 919</span></a>              echo '&lt;span id=&quot;'.<a class="var it5404" onMouseOver="hilite(5404)" onMouseOut="lolite()" onClick="logVariable('progress_log_id')" href="../../../../_variables/progress_log_id.html">$progress_log_id</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Clearing autogenerated excerpt values').'&lt;/span&gt;';
<a name="l920"><span class="linenum"> 920</span></a>              <a class="function" onClick="logFunction('evo_flush')" href="../../../../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l921"><span class="linenum"> 921</span></a>          }
<a name="l922"><span class="linenum"> 922</span></a>  
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment">        // Set all autogenerated excerpt values to NULL</span>
<a name="l924"><span class="linenum"> 924</span></a>          <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = 'UPDATE T_items__item SET post_excerpt = NULL WHERE '.<a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a>;
<a name="l925"><span class="linenum"> 925</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, 'Remove all autogenerated excerpts' );
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">        // Count all autogenerated excerpt which value is NULL ( Note: Maybe some of them was already NULL before we have started this process )</span>
<a name="l928"><span class="linenum"> 928</span></a>          <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( 'SELECT <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(*) FROM T_items__item WHERE post_excerpt IS NULL AND '.<a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a> );
<a name="l929"><span class="linenum"> 929</span></a>          <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a> = 0;
<a name="l930"><span class="linenum"> 930</span></a>      }
<a name="l931"><span class="linenum"> 931</span></a>      else
<a name="l932"><span class="linenum"> 932</span></a>      { // Init params with a previously started process status
<a name="l933"><span class="linenum"> 933</span></a>          echo '&lt;span id=&quot;progress_log&quot;&gt;&lt;/span&gt;';
<a name="l934"><span class="linenum"> 934</span></a>          <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'all_excerpt', 'integer', 0 );
<a name="l935"><span class="linenum"> 935</span></a>          <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'recreated_excerpts', 'integer', 0 );
<a name="l936"><span class="linenum"> 936</span></a>      }
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">    // Display the current state of the process or a '.' character to indicate the ongoing process</span>
<a name="l939"><span class="linenum"> 939</span></a>      if( <a class="var it6778" onMouseOver="hilite(6778)" onMouseOut="lolite()" onClick="logVariable('detailed_progress_log')" href="../../../../_variables/detailed_progress_log.html">$detailed_progress_log</a> )
<a name="l940"><span class="linenum"> 940</span></a>      {
<a name="l941"><span class="linenum"> 941</span></a>          <a class="function" onClick="logFunction('echo_progress_log_update')" href="../../../../_functions/echo_progress_log_update.html" onMouseOver="funcPopup(event,'echo_progress_log_update')">echo_progress_log_update</a>( <a class="var it5404" onMouseOver="hilite(5404)" onMouseOut="lolite()" onClick="logVariable('progress_log_id')" href="../../../../_variables/progress_log_id.html">$progress_log_id</a>, <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a>, <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> );
<a name="l942"><span class="linenum"> 942</span></a>      }
<a name="l943"><span class="linenum"> 943</span></a>      else
<a name="l944"><span class="linenum"> 944</span></a>      {
<a name="l945"><span class="linenum"> 945</span></a>          echo ' .';
<a name="l946"><span class="linenum"> 946</span></a>      }
<a name="l947"><span class="linenum"> 947</span></a>      <a class="function" onClick="logFunction('evo_flush')" href="../../../../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>      <a class="var it6784" onMouseOver="hilite(6784)" onMouseOut="lolite()" onClick="logVariable('load_SQL')" href="../../../../_variables/load_SQL.html">$load_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l950"><span class="linenum"> 950</span></a>      <a class="var it6784" onMouseOver="hilite(6784)" onMouseOut="lolite()" onClick="logVariable('load_SQL')" href="../../../../_variables/load_SQL.html">$load_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '*' );
<a name="l951"><span class="linenum"> 951</span></a>      <a class="var it6784" onMouseOver="hilite(6784)" onMouseOut="lolite()" onClick="logVariable('load_SQL')" href="../../../../_variables/load_SQL.html">$load_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_items__item' );
<a name="l952"><span class="linenum"> 952</span></a>      <a class="var it6784" onMouseOver="hilite(6784)" onMouseOut="lolite()" onClick="logVariable('load_SQL')" href="../../../../_variables/load_SQL.html">$load_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../../../_variables/where_condition.html">$where_condition</a>.' AND post_excerpt IS NULL' );
<a name="l953"><span class="linenum"> 953</span></a>      <a class="var it6784" onMouseOver="hilite(6784)" onMouseOut="lolite()" onClick="logVariable('load_SQL')" href="../../../../_variables/load_SQL.html">$load_SQL</a>-&gt;<a class="function" onClick="logFunction('LIMIT')" href="../../../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">LIMIT</a>( <a class="var it6781" onMouseOver="hilite(6781)" onMouseOut="lolite()" onClick="logVariable('load_limit')" href="../../../../_variables/load_limit.html">$load_limit</a> );
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>      <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l956"><span class="linenum"> 956</span></a>      while( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;<a class="function" onClick="logFunction('load_by_sql')" href="../../../../_functions/load_by_sql.html" onMouseOver="funcPopup(event,'load_by_sql')">load_by_sql</a>( <a class="var it6784" onMouseOver="hilite(6784)" onMouseOut="lolite()" onClick="logVariable('load_SQL')" href="../../../../_variables/load_SQL.html">$load_SQL</a> ) ) &gt; 0 )
<a name="l957"><span class="linenum"> 957</span></a>      { // New portion of items was loaded
<a name="l958"><span class="linenum"> 958</span></a>          <a class="var it6785" onMouseOver="hilite(6785)" onMouseOut="lolite()" onClick="logVariable('processed_items')" href="../../../../_variables/processed_items.html">$processed_items</a> = 0;
<a name="l959"><span class="linenum"> 959</span></a>          while( ( <a class="var it6786" onMouseOver="hilite(6786)" onMouseOut="lolite()" onClick="logVariable('iterator_Item')" href="../../../../_variables/iterator_Item.html">$iterator_Item</a> = &amp; <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_next() ) != NULL )
<a name="l960"><span class="linenum"> 960</span></a>          { // Create new autogenerated excerpt and save it in the database
<a name="l961"><span class="linenum"> 961</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../../_variables/excerpt.html">$excerpt</a> = <a class="var it6786" onMouseOver="hilite(6786)" onMouseOut="lolite()" onClick="logVariable('iterator_Item')" href="../../../../_variables/iterator_Item.html">$iterator_Item</a>-&gt;<a class="function" onClick="logFunction('get_autogenerated_excerpt')" href="../../../../_functions/get_autogenerated_excerpt.html" onMouseOver="funcPopup(event,'get_autogenerated_excerpt')">get_autogenerated_excerpt</a>();
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment">            // Update excerpt without Item-&gt;dbupdate() call to make it faster</span>
<a name="l963"><span class="linenum"> 963</span></a>              <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_items__item SET post_excerpt = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../../_variables/excerpt.html">$excerpt</a> ).' WHERE post_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it6786" onMouseOver="hilite(6786)" onMouseOut="lolite()" onClick="logVariable('iterator_Item')" href="../../../../_variables/iterator_Item.html">$iterator_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it9187" onMouseOver="hilite(9187)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) );
<a name="l964"><span class="linenum"> 964</span></a>              <a class="var it6785" onMouseOver="hilite(6785)" onMouseOut="lolite()" onClick="logVariable('processed_items')" href="../../../../_variables/processed_items.html">$processed_items</a>++;
<a name="l965"><span class="linenum"> 965</span></a>              if( <a class="var it6778" onMouseOver="hilite(6778)" onMouseOut="lolite()" onClick="logVariable('detailed_progress_log')" href="../../../../_variables/detailed_progress_log.html">$detailed_progress_log</a> &amp;&amp; ( ( <a class="var it6785" onMouseOver="hilite(6785)" onMouseOut="lolite()" onClick="logVariable('processed_items')" href="../../../../_variables/processed_items.html">$processed_items</a> % 3 ) == 0 ) )
<a name="l966"><span class="linenum"> 966</span></a>              { // Update progress info after every 3 recreated excerpt when detailed progress log was requested
<a name="l967"><span class="linenum"> 967</span></a>                  <a class="function" onClick="logFunction('echo_progress_log_update')" href="../../../../_functions/echo_progress_log_update.html" onMouseOver="funcPopup(event,'echo_progress_log_update')">echo_progress_log_update</a>( <a class="var it5404" onMouseOver="hilite(5404)" onMouseOut="lolite()" onClick="logVariable('progress_log_id')" href="../../../../_variables/progress_log_id.html">$progress_log_id</a>, <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a> + <a class="var it6785" onMouseOver="hilite(6785)" onMouseOut="lolite()" onClick="logVariable('processed_items')" href="../../../../_variables/processed_items.html">$processed_items</a>, <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> );
<a name="l968"><span class="linenum"> 968</span></a>                  <a class="function" onClick="logFunction('evo_flush')" href="../../../../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l969"><span class="linenum"> 969</span></a>              }
<a name="l970"><span class="linenum"> 970</span></a>          }
<a name="l971"><span class="linenum"> 971</span></a>  
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment">        // Increase the number recreated excerpts</span>
<a name="l973"><span class="linenum"> 973</span></a>          <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a> += <a class="var it6785" onMouseOver="hilite(6785)" onMouseOut="lolite()" onClick="logVariable('processed_items')" href="../../../../_variables/processed_items.html">$processed_items</a>;
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment">        // Clear already process items from the cache</span>
<a name="l976"><span class="linenum"> 976</span></a>          <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment">        // Display progress log</span>
<a name="l978"><span class="linenum"> 978</span></a>          if( <a class="var it6778" onMouseOver="hilite(6778)" onMouseOut="lolite()" onClick="logVariable('detailed_progress_log')" href="../../../../_variables/detailed_progress_log.html">$detailed_progress_log</a> )
<a name="l979"><span class="linenum"> 979</span></a>          {
<a name="l980"><span class="linenum"> 980</span></a>              <a class="function" onClick="logFunction('echo_progress_log_update')" href="../../../../_functions/echo_progress_log_update.html" onMouseOver="funcPopup(event,'echo_progress_log_update')">echo_progress_log_update</a>( <a class="var it5404" onMouseOver="hilite(5404)" onMouseOut="lolite()" onClick="logVariable('progress_log_id')" href="../../../../_variables/progress_log_id.html">$progress_log_id</a>, <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a>, <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> );
<a name="l981"><span class="linenum"> 981</span></a>          }
<a name="l982"><span class="linenum"> 982</span></a>          else
<a name="l983"><span class="linenum"> 983</span></a>          {
<a name="l984"><span class="linenum"> 984</span></a>              echo ' .';
<a name="l985"><span class="linenum"> 985</span></a>          }
<a name="l986"><span class="linenum"> 986</span></a>          <a class="function" onClick="logFunction('evo_flush')" href="../../../../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l987"><span class="linenum"> 987</span></a>  
<a name="l988"><span class="linenum"> 988</span></a>          if( ( <a class="var it6780" onMouseOver="hilite(6780)" onMouseOut="lolite()" onClick="logVariable('max_exec_time')" href="../../../../_variables/max_exec_time.html">$max_exec_time</a> != 0 ) &amp;&amp; ( <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a> &lt; <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> ) )
<a name="l989"><span class="linenum"> 989</span></a>          { // a max execution time limit is set and there are more excerpts to create
<a name="l990"><span class="linenum"> 990</span></a>              <a class="var it5980" onMouseOver="hilite(5980)" onMouseOut="lolite()" onClick="logVariable('elapsed_time')" href="../../../../_variables/elapsed_time.html">$elapsed_time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - <a class="var it6779" onMouseOver="hilite(6779)" onMouseOut="lolite()" onClick="logVariable('start_time')" href="../../../../_variables/start_time.html">$start_time</a>;
<a name="l991"><span class="linenum"> 991</span></a>              if( <a class="var it5980" onMouseOver="hilite(5980)" onMouseOut="lolite()" onClick="logVariable('elapsed_time')" href="../../../../_variables/elapsed_time.html">$elapsed_time</a> &gt; ( <a class="var it6780" onMouseOver="hilite(6780)" onMouseOut="lolite()" onClick="logVariable('max_exec_time')" href="../../../../_variables/max_exec_time.html">$max_exec_time</a> - 10 ) )
<a name="l992"><span class="linenum"> 992</span></a>              { // Increase the time limit in case if less than 10 seconds remained
<a name="l993"><span class="linenum"> 993</span></a>                  <a class="var it6780" onMouseOver="hilite(6780)" onMouseOut="lolite()" onClick="logVariable('max_exec_time')" href="../../../../_variables/max_exec_time.html">$max_exec_time</a> = <a class="var it6780" onMouseOver="hilite(6780)" onMouseOut="lolite()" onClick="logVariable('max_exec_time')" href="../../../../_variables/max_exec_time.html">$max_exec_time</a> + 100;
<a name="l994"><span class="linenum"> 994</span></a>                  if( ! <a class="function" onClick="logFunction('set_max_execution_time')" href="../../../../_functions/set_max_execution_time.html" onMouseOver="funcPopup(event,'set_max_execution_time')">set_max_execution_time</a>( <a class="var it6780" onMouseOver="hilite(6780)" onMouseOut="lolite()" onClick="logVariable('max_exec_time')" href="../../../../_variables/max_exec_time.html">$max_exec_time</a> ) )
<a name="l995"><span class="linenum"> 995</span></a>                  {
<a name="l996"><span class="linenum"> 996</span></a>                      <a class="var it5398" onMouseOver="hilite(5398)" onMouseOut="lolite()" onClick="logVariable('continue_url')" href="../../../../_variables/continue_url.html">$continue_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it5398" onMouseOver="hilite(5398)" onMouseOut="lolite()" onClick="logVariable('continue_url')" href="../../../../_variables/continue_url.html">$continue_url</a>, 'all_excerpt='.<a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a>.'&amp;amp;recreated_excerpts='.<a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a>.'&amp;amp;start_ts='.<a class="var it6782" onMouseOver="hilite(6782)" onMouseOut="lolite()" onClick="logVariable('process_start_ts')" href="../../../../_variables/process_start_ts.html">$process_start_ts</a>, '&amp;amp;' );
<a name="l997"><span class="linenum"> 997</span></a>                      echo '&lt;br /&gt;'.'We are reaching the time limit for this script. Please click &lt;a href=&quot;'.<a class="var it5398" onMouseOver="hilite(5398)" onMouseOut="lolite()" onClick="logVariable('continue_url')" href="../../../../_variables/continue_url.html">$continue_url</a>.'&quot;&gt;continue&lt;/a&gt;...';
<a name="l998"><span class="linenum"> 998</span></a>                      <a class="function" onClick="logFunction('evo_flush')" href="../../../../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l999"><span class="linenum"> 999</span></a>                      exit(0);
<a name="l1000"><span class="linenum">1000</span></a>                  }
<a name="l1001"><span class="linenum">1001</span></a>              }
<a name="l1002"><span class="linenum">1002</span></a>          }
<a name="l1003"><span class="linenum">1003</span></a>      }
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment">    // Check if the recreated exceprts number match with the total number of autogenerated excerpts</span>
<a name="l1006"><span class="linenum">1006</span></a>      if( <a class="var it6778" onMouseOver="hilite(6778)" onMouseOut="lolite()" onClick="logVariable('detailed_progress_log')" href="../../../../_variables/detailed_progress_log.html">$detailed_progress_log</a> &amp;&amp; ( <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a> &lt; <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> ) )
<a name="l1007"><span class="linenum">1007</span></a>      { // This means that we are in the end of the process but some post excerpt was updated outside of this process
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">        // Here we increase the recreated excerpts value because all excerpts were recreated, however some of them not during this process</span>
<a name="l1009"><span class="linenum">1009</span></a>          <a class="function" onClick="logFunction('echo_progress_log_update')" href="../../../../_functions/echo_progress_log_update.html" onMouseOver="funcPopup(event,'echo_progress_log_update')">echo_progress_log_update</a>( <a class="var it5404" onMouseOver="hilite(5404)" onMouseOut="lolite()" onClick="logVariable('progress_log_id')" href="../../../../_variables/progress_log_id.html">$progress_log_id</a>, <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a>, <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> );
<a name="l1010"><span class="linenum">1010</span></a>          if( <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> == ( <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a> + 1 ) )
<a name="l1011"><span class="linenum">1011</span></a>          {
<a name="l1012"><span class="linenum">1012</span></a>              echo '&lt;br /&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Note: One excerpt was re-created in another simultaneous process!');
<a name="l1013"><span class="linenum">1013</span></a>          }
<a name="l1014"><span class="linenum">1014</span></a>          else
<a name="l1015"><span class="linenum">1015</span></a>          {
<a name="l1016"><span class="linenum">1016</span></a>              echo '&lt;br /&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Note: %d excerpts were re-created in another simultaneous process!'), <a class="var it6065" onMouseOver="hilite(6065)" onMouseOut="lolite()" onClick="logVariable('all_excerpt')" href="../../../../_variables/all_excerpt.html">$all_excerpt</a> - <a class="var it6783" onMouseOver="hilite(6783)" onMouseOut="lolite()" onClick="logVariable('recreated_excerpts')" href="../../../../_variables/recreated_excerpts.html">$recreated_excerpts</a> );
<a name="l1017"><span class="linenum">1017</span></a>          }
<a name="l1018"><span class="linenum">1018</span></a>      }
<a name="l1019"><span class="linenum">1019</span></a>  }
<a name="l1020"><span class="linenum">1020</span></a>  
<a name="l1021"><span class="linenum">1021</span></a>  
<a name="l1022"><span class="linenum">1022</span></a>  <span class="comment">/**</span>
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment"> * Creates a link to new category, with properties icon</span>
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment"> *</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment"> * @return string link url</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment"> */</span>
<a name="l1027"><span class="linenum">1027</span></a>  function <a class="function" onClick="logFunction('get_newcategory_link')" href="../../../../_functions/get_newcategory_link.html" onMouseOver="funcPopup(event,'get_newcategory_link')">get_newcategory_link</a>()
<a name="l1028"><span class="linenum">1028</span></a>  {
<a name="l1029"><span class="linenum">1029</span></a>      global <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l1030"><span class="linenum">1030</span></a>      <a class="var it6787" onMouseOver="hilite(6787)" onMouseOut="lolite()" onClick="logVariable('new_url')" href="../../../../_variables/new_url.html">$new_url</a> = <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=chapters&amp;amp;action=new&amp;amp;blog='.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l1031"><span class="linenum">1031</span></a>      <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../../_variables/link.html">$link</a> = ' &lt;span class=&quot;floatright&quot;&gt;'.<a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Add new category'), 'new', <a class="var it6787" onMouseOver="hilite(6787)" onMouseOut="lolite()" onClick="logVariable('new_url')" href="../../../../_variables/new_url.html">$new_url</a>, '', 5, 1 ).'&lt;/span&gt;';
<a name="l1032"><span class="linenum">1032</span></a>      return <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../../_variables/link.html">$link</a>;
<a name="l1033"><span class="linenum">1033</span></a>  }
<a name="l1034"><span class="linenum">1034</span></a>  
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment">/**</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment"> * Allow recursive category selection.</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment"> *</span>
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment"> * @todo Allow to use a dropdown (select) to switch between blogs ( CSS / JS onchange - no submit.. )</span>
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment"> *</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment"> * @param Form</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment"> * @param boolean true: use form fields, false: display only</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment"> * @param boolean true: show links for add new category &amp; manual</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment"> * @param array Params</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment"> */</span>
<a name="l1045"><span class="linenum">1045</span></a>  function <a class="function" onClick="logFunction('cat_select')" href="../../../../_functions/cat_select.html" onMouseOver="funcPopup(event,'cat_select')">cat_select</a>( <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>, <a class="var it6788" onMouseOver="hilite(6788)" onMouseOut="lolite()" onClick="logVariable('form_fields')" href="../../../../_variables/form_fields.html">$form_fields</a> = true, <a class="var it6789" onMouseOver="hilite(6789)" onMouseOut="lolite()" onClick="logVariable('show_title_links')" href="../../../../_variables/show_title_links.html">$show_title_links</a> = true, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l1046"><span class="linenum">1046</span></a>  {
<a name="l1047"><span class="linenum">1047</span></a>      global <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../../_variables/cache_categories.html">$cache_categories</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../../_variables/current_blog_ID.html">$current_blog_ID</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>, <a class="var it6790" onMouseOver="hilite(6790)" onMouseOut="lolite()" onClick="logVariable('cat_select_form_fields')" href="../../../../_variables/cat_select_form_fields.html">$cat_select_form_fields</a>;
<a name="l1048"><span class="linenum">1048</span></a>      global <a class="var it6791" onMouseOver="hilite(6791)" onMouseOut="lolite()" onClick="logVariable('cat_sel_total_count')" href="../../../../_variables/cat_sel_total_count.html">$cat_sel_total_count</a>, <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>;
<a name="l1049"><span class="linenum">1049</span></a>      global <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../../_variables/rsc_url.html">$rsc_url</a>;
<a name="l1050"><span class="linenum">1050</span></a>  
<a name="l1051"><span class="linenum">1051</span></a>      if( <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) &lt; 1 )
<a name="l1052"><span class="linenum">1052</span></a>      { // No categories for <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>
<a name="l1053"><span class="linenum">1053</span></a>          return;
<a name="l1054"><span class="linenum">1054</span></a>      }
<a name="l1055"><span class="linenum">1055</span></a>  
<a name="l1056"><span class="linenum">1056</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1057"><span class="linenum">1057</span></a>              'categories_name' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Categories'),
<a name="l1058"><span class="linenum">1058</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l1059"><span class="linenum">1059</span></a>  
<a name="l1060"><span class="linenum">1060</span></a>      <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'cat', 'integer', 0 );
<a name="l1061"><span class="linenum">1061</span></a>      if( empty( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) &amp;&amp; !empty( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a> ) )
<a name="l1062"><span class="linenum">1062</span></a>      {    // If the GET param 'cat' is defined we should preselect the category for new created post
<a name="l1063"><span class="linenum">1063</span></a>          global <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>;
<a name="l1064"><span class="linenum">1064</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> = array( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a> );
<a name="l1065"><span class="linenum">1065</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/main_cat_ID.html">main_cat_ID</a> = <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a>;
<a name="l1066"><span class="linenum">1066</span></a>      }
<a name="l1067"><span class="linenum">1067</span></a>  
<a name="l1068"><span class="linenum">1068</span></a>      if( <a class="var it6789" onMouseOver="hilite(6789)" onMouseOut="lolite()" onClick="logVariable('show_title_links')" href="../../../../_variables/show_title_links.html">$show_title_links</a> )
<a name="l1069"><span class="linenum">1069</span></a>      {    // Use in Back-office
<a name="l1070"><span class="linenum">1070</span></a>          <a class="var it1000" onMouseOver="hilite(1000)" onMouseOut="lolite()" onClick="logVariable('fieldset_title')" href="../../../../_variables/fieldset_title.html">$fieldset_title</a> = <a class="function" onClick="logFunction('get_newcategory_link')" href="../../../../_functions/get_newcategory_link.html" onMouseOver="funcPopup(event,'get_newcategory_link')">get_newcategory_link</a>().<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['categories_name'].<a class="function" onClick="logFunction('get_manual_link')" href="../../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>('item_categories_fieldset');
<a name="l1071"><span class="linenum">1071</span></a>      }
<a name="l1072"><span class="linenum">1072</span></a>      else
<a name="l1073"><span class="linenum">1073</span></a>      {
<a name="l1074"><span class="linenum">1074</span></a>          <a class="var it1000" onMouseOver="hilite(1000)" onMouseOut="lolite()" onClick="logVariable('fieldset_title')" href="../../../../_variables/fieldset_title.html">$fieldset_title</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['categories_name'];
<a name="l1075"><span class="linenum">1075</span></a>      }
<a name="l1076"><span class="linenum">1076</span></a>  
<a name="l1077"><span class="linenum">1077</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_fieldset')" href="../../../../_functions/begin_fieldset.html" onMouseOver="funcPopup(event,'begin_fieldset')">begin_fieldset</a>( <a class="var it1000" onMouseOver="hilite(1000)" onMouseOut="lolite()" onClick="logVariable('fieldset_title')" href="../../../../_variables/fieldset_title.html">$fieldset_title</a>, array( 'class'=&gt;'extracats', 'id' =&gt; 'itemform_categories' ) );
<a name="l1078"><span class="linenum">1078</span></a>  
<a name="l1079"><span class="linenum">1079</span></a>      <a class="var it6791" onMouseOver="hilite(6791)" onMouseOut="lolite()" onClick="logVariable('cat_sel_total_count')" href="../../../../_variables/cat_sel_total_count.html">$cat_sel_total_count</a> = 0;
<a name="l1080"><span class="linenum">1080</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> ='';
<a name="l1081"><span class="linenum">1081</span></a>  
<a name="l1082"><span class="linenum">1082</span></a>      <a class="var it6790" onMouseOver="hilite(6790)" onMouseOut="lolite()" onClick="logVariable('cat_select_form_fields')" href="../../../../_variables/cat_select_form_fields.html">$cat_select_form_fields</a> = <a class="var it6788" onMouseOver="hilite(6788)" onMouseOut="lolite()" onClick="logVariable('form_fields')" href="../../../../_variables/form_fields.html">$form_fields</a>;
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>      <a class="function" onClick="logFunction('cat_load_cache')" href="../../../../_functions/cat_load_cache.html" onMouseOver="funcPopup(event,'cat_load_cache')">cat_load_cache</a>(); <span class="comment">// make sure the caches are loaded</span>
<a name="l1085"><span class="linenum">1085</span></a>  
<a name="l1086"><span class="linenum">1086</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;table cellspacing=&quot;0&quot; class=&quot;catselect table table-striped table-bordered table-hover table-condensed&quot;&gt;';
<a name="l1087"><span class="linenum">1087</span></a>      if( <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>) == 3 )
<a name="l1088"><span class="linenum">1088</span></a>      { // Main + Extra cats option is set, display header
<a name="l1089"><span class="linenum">1089</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('cat_select_header')" href="../../../../_functions/cat_select_header.html" onMouseOver="funcPopup(event,'cat_select_header')">cat_select_header</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l1090"><span class="linenum">1090</span></a>      }
<a name="l1091"><span class="linenum">1091</span></a>  
<a name="l1092"><span class="linenum">1092</span></a>      if( <a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>() &gt;= 2 ||
<a name="l1093"><span class="linenum">1093</span></a>        ( isset( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>) &amp;&amp; <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) &gt; 1 &amp;&amp; <a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>() == 1 ) )
<a name="l1094"><span class="linenum">1094</span></a>      { // If BLOG cross posting enabled, go through all blogs with cats:
<a name="l1095"><span class="linenum">1095</span></a>          <span class="comment">/**</span>
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment">         * @var BlogCache</span>
<a name="l1097"><span class="linenum">1097</span></a>  <span class="comment">         */</span>
<a name="l1098"><span class="linenum">1098</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l1099"><span class="linenum">1099</span></a>  
<a name="l1100"><span class="linenum">1100</span></a>          <span class="comment">/**</span>
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment">         * @var Blog</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment">         */</span>
<a name="l1103"><span class="linenum">1103</span></a>          for( <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_first(); !<a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a>); <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_next() )
<a name="l1104"><span class="linenum">1104</span></a>          { // run recursively through the cats
<a name="l1105"><span class="linenum">1105</span></a>              if( ! <a class="function" onClick="logFunction('blog_has_cats')" href="../../../../_functions/blog_has_cats.html" onMouseOver="funcPopup(event,'blog_has_cats')">blog_has_cats</a>( <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it9130" onMouseOver="hilite(9130)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l1106"><span class="linenum">1106</span></a>                  continue;
<a name="l1107"><span class="linenum">1107</span></a>  
<a name="l1108"><span class="linenum">1108</span></a>              if( ! <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_post_statuses', 'edit', false, <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it9130" onMouseOver="hilite(9130)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l1109"><span class="linenum">1109</span></a>                  continue;
<a name="l1110"><span class="linenum">1110</span></a>  
<a name="l1111"><span class="linenum">1111</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;tr class=&quot;group&quot; id=&quot;catselect_blog'.<a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it9130" onMouseOver="hilite(9130)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&quot;&gt;&lt;td colspan=&quot;3&quot;&gt;'.<a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('name').&quot;&lt;/td&gt;&lt;/tr&gt;\n&quot;;
<a name="l1112"><span class="linenum">1112</span></a>              <a class="var it6791" onMouseOver="hilite(6791)" onMouseOut="lolite()" onClick="logVariable('cat_sel_total_count')" href="../../../../_variables/cat_sel_total_count.html">$cat_sel_total_count</a>++; <span class="comment">// the header uses 1 line</span>
<a name="l1113"><span class="linenum">1113</span></a>  
<a name="l1114"><span class="linenum">1114</span></a>              <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../../_variables/current_blog_ID.html">$current_blog_ID</a> = <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it9130" onMouseOver="hilite(9130)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;    <span class="comment">// Global needed in callbacks</span>
<a name="l1115"><span class="linenum">1115</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('cat_children')" href="../../../../_functions/cat_children.html" onMouseOver="funcPopup(event,'cat_children')">cat_children</a>( <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../../_variables/cache_categories.html">$cache_categories</a>, <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it9130" onMouseOver="hilite(9130)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, NULL, 'cat_select_before_first',
<a name="l1116"><span class="linenum">1116</span></a>                                          'cat_select_before_each', 'cat_select_after_each', 'cat_select_after_last', 1 );
<a name="l1117"><span class="linenum">1117</span></a>              if( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> == <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('l_Blog')" href="../../../../_variables/l_Blog.html">$l_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it9130" onMouseOver="hilite(9130)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> )
<a name="l1118"><span class="linenum">1118</span></a>              {
<a name="l1119"><span class="linenum">1119</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('cat_select_new')" href="../../../../_functions/cat_select_new.html" onMouseOver="funcPopup(event,'cat_select_new')">cat_select_new</a>();
<a name="l1120"><span class="linenum">1120</span></a>              }
<a name="l1121"><span class="linenum">1121</span></a>          }
<a name="l1122"><span class="linenum">1122</span></a>      }
<a name="l1123"><span class="linenum">1123</span></a>      else
<a name="l1124"><span class="linenum">1124</span></a>      { // BLOG Cross posting is disabled. Current blog only:
<a name="l1125"><span class="linenum">1125</span></a>          <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../../_variables/current_blog_ID.html">$current_blog_ID</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l1126"><span class="linenum">1126</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('cat_children')" href="../../../../_functions/cat_children.html" onMouseOver="funcPopup(event,'cat_children')">cat_children</a>( <a class="var it1143" onMouseOver="hilite(1143)" onMouseOut="lolite()" onClick="logVariable('cache_categories')" href="../../../../_variables/cache_categories.html">$cache_categories</a>, <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../../_variables/current_blog_ID.html">$current_blog_ID</a>, NULL, 'cat_select_before_first',
<a name="l1127"><span class="linenum">1127</span></a>                                      'cat_select_before_each', 'cat_select_after_each', 'cat_select_after_last', 1 );
<a name="l1128"><span class="linenum">1128</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('cat_select_new')" href="../../../../_functions/cat_select_new.html" onMouseOver="funcPopup(event,'cat_select_new')">cat_select_new</a>();
<a name="l1129"><span class="linenum">1129</span></a>      }
<a name="l1130"><span class="linenum">1130</span></a>  
<a name="l1131"><span class="linenum">1131</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;/table&gt;';
<a name="l1132"><span class="linenum">1132</span></a>  
<a name="l1133"><span class="linenum">1133</span></a>      echo <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1134"><span class="linenum">1134</span></a>  
<a name="l1135"><span class="linenum">1135</span></a>      if( isset(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>) &amp;&amp; <a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>() )
<a name="l1136"><span class="linenum">1136</span></a>      {
<a name="l1137"><span class="linenum">1137</span></a>          echo '&lt;script type=&quot;text/javascript&quot;&gt;jQuery.getScript(&quot;'.<a class="function" onClick="logFunction('get_require_url')" href="../../../../_functions/get_require_url.html" onMouseOver="funcPopup(event,'get_require_url')">get_require_url</a>( '#scrollto#' ).'&quot;, function () {
<a name="l1138"><span class="linenum">1138</span></a>              jQuery(&quot;[id$=itemform_categories]&quot;).scrollTo( &quot;#catselect_blog'.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>.'&quot; );
<a name="l1139"><span class="linenum">1139</span></a>          });&lt;/script&gt;';
<a name="l1140"><span class="linenum">1140</span></a>      }
<a name="l1141"><span class="linenum">1141</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_fieldset')" href="../../../../_functions/end_fieldset.html" onMouseOver="funcPopup(event,'end_fieldset')">end_fieldset</a>();
<a name="l1142"><span class="linenum">1142</span></a>  }
<a name="l1143"><span class="linenum">1143</span></a>  
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">/**</span>
<a name="l1145"><span class="linenum">1145</span></a>  <span class="comment"> * Header for {@link cat_select()}</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment"> *</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment"> * @param array Params</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment"> */</span>
<a name="l1149"><span class="linenum">1149</span></a>  function <a class="function" onClick="logFunction('cat_select_header')" href="../../../../_functions/cat_select_header.html" onMouseOver="funcPopup(event,'cat_select_header')">cat_select_header</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l1150"><span class="linenum">1150</span></a>  {
<a name="l1151"><span class="linenum">1151</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1152"><span class="linenum">1152</span></a>              'category_name'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Category'),
<a name="l1153"><span class="linenum">1153</span></a>              'category_main_title'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Main category'),
<a name="l1154"><span class="linenum">1154</span></a>              'category_extra_title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Additional category'),
<a name="l1155"><span class="linenum">1155</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l1156"><span class="linenum">1156</span></a>  
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment">    // main cat header</span>
<a name="l1158"><span class="linenum">1158</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = '&lt;thead&gt;&lt;tr&gt;&lt;th class=&quot;selector catsel_main&quot; title=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['category_main_title'].'&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Main').'&lt;/th&gt;';
<a name="l1159"><span class="linenum">1159</span></a>  
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment">    // extra cat header</span>
<a name="l1161"><span class="linenum">1161</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;th class=&quot;selector catsel_extra&quot; title=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['category_extra_title'].'&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Extra').'&lt;/th&gt;';
<a name="l1162"><span class="linenum">1162</span></a>  
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment">    // category header</span>
<a name="l1164"><span class="linenum">1164</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;th class=&quot;catsel_name&quot;&gt;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['category_name'].'&lt;/th&gt;'
<a name="l1165"><span class="linenum">1165</span></a>          .'&lt;/tr&gt;&lt;/thead&gt;';
<a name="l1166"><span class="linenum">1166</span></a>  
<a name="l1167"><span class="linenum">1167</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1168"><span class="linenum">1168</span></a>  }
<a name="l1169"><span class="linenum">1169</span></a>  
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment">/**</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment"> * callback to start sublist</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment"> */</span>
<a name="l1173"><span class="linenum">1173</span></a>  function <a class="function" onClick="logFunction('cat_select_before_first')" href="../../../../_functions/cat_select_before_first.html" onMouseOver="funcPopup(event,'cat_select_before_first')">cat_select_before_first</a>( <a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('parent_cat_ID')" href="../../../../_variables/parent_cat_ID.html">$parent_cat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> )
<a name="l1174"><span class="linenum">1174</span></a>  { // callback to start sublist
<a name="l1175"><span class="linenum">1175</span></a>      return ''; <span class="comment">// &quot;\n&lt;ul&gt;\n&quot;;</span>
<a name="l1176"><span class="linenum">1176</span></a>  }
<a name="l1177"><span class="linenum">1177</span></a>  
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment">/**</span>
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment"> * callback to display sublist element</span>
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment"> */</span>
<a name="l1181"><span class="linenum">1181</span></a>  function <a class="function" onClick="logFunction('cat_select_before_each')" href="../../../../_functions/cat_select_before_each.html" onMouseOver="funcPopup(event,'cat_select_before_each')">cat_select_before_each</a>( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>, <a class="var it1158" onMouseOver="hilite(1158)" onMouseOut="lolite()" onClick="logVariable('total_count')" href="../../../../_variables/total_count.html">$total_count</a> )
<a name="l1182"><span class="linenum">1182</span></a>  { // callback to display sublist element
<a name="l1183"><span class="linenum">1183</span></a>      global <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../../_variables/current_blog_ID.html">$current_blog_ID</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l1184"><span class="linenum">1184</span></a>      global <a class="var it337" onMouseOver="hilite(337)" onMouseOut="lolite()" onClick="logVariable('creating')" href="../../../../_variables/creating.html">$creating</a>, <a class="var it6792" onMouseOver="hilite(6792)" onMouseOut="lolite()" onClick="logVariable('cat_select_level')" href="../../../../_variables/cat_select_level.html">$cat_select_level</a>, <a class="var it6790" onMouseOver="hilite(6790)" onMouseOut="lolite()" onClick="logVariable('cat_select_form_fields')" href="../../../../_variables/cat_select_form_fields.html">$cat_select_form_fields</a>;
<a name="l1185"><span class="linenum">1185</span></a>      global <a class="var it6791" onMouseOver="hilite(6791)" onMouseOut="lolite()" onClick="logVariable('cat_sel_total_count')" href="../../../../_variables/cat_sel_total_count.html">$cat_sel_total_count</a>;
<a name="l1186"><span class="linenum">1186</span></a>  
<a name="l1187"><span class="linenum">1187</span></a>      <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l1188"><span class="linenum">1188</span></a>      <a class="var it6793" onMouseOver="hilite(6793)" onMouseOut="lolite()" onClick="logVariable('thisChapter')" href="../../../../_variables/thisChapter.html">$thisChapter</a> = <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>);
<a name="l1189"><span class="linenum">1189</span></a>  
<a name="l1190"><span class="linenum">1190</span></a>      if( <a class="var it6793" onMouseOver="hilite(6793)" onMouseOut="lolite()" onClick="logVariable('thisChapter')" href="../../../../_variables/thisChapter.html">$thisChapter</a>-&gt;<a onClick="logVariable('lock')" class="var it9188" onMouseOver="hilite(9188)" onMouseOut="lolite()" href="../../../../_variables/lock.html">lock</a> &amp;&amp; !<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_cats', '', false, <a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../../_variables/current_blog_ID.html">$current_blog_ID</a> ) )
<a name="l1191"><span class="linenum">1191</span></a>      {    // This chapter is locked and current user has no permission to edit the categories of this blog
<a name="l1192"><span class="linenum">1192</span></a>          return;
<a name="l1193"><span class="linenum">1193</span></a>      }
<a name="l1194"><span class="linenum">1194</span></a>  
<a name="l1195"><span class="linenum">1195</span></a>      <a class="var it6791" onMouseOver="hilite(6791)" onMouseOut="lolite()" onClick="logVariable('cat_sel_total_count')" href="../../../../_variables/cat_sel_total_count.html">$cat_sel_total_count</a>++;
<a name="l1196"><span class="linenum">1196</span></a>  
<a name="l1197"><span class="linenum">1197</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = &quot;\n&quot;.'&lt;tr class=&quot;'.( <a class="var it1158" onMouseOver="hilite(1158)" onMouseOut="lolite()" onClick="logVariable('total_count')" href="../../../../_variables/total_count.html">$total_count</a>%2 ? 'odd' : 'even' ).'&quot;&gt;';
<a name="l1198"><span class="linenum">1198</span></a>  
<a name="l1199"><span class="linenum">1199</span></a>  <span class="comment">    // RADIO for main cat:</span>
<a name="l1200"><span class="linenum">1200</span></a>      if( <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>) != 2 )
<a name="l1201"><span class="linenum">1201</span></a>      { // if no &quot;Multiple categories per post&quot; option is set display radio
<a name="l1202"><span class="linenum">1202</span></a>          if( !<a class="var it6793" onMouseOver="hilite(6793)" onMouseOut="lolite()" onClick="logVariable('thisChapter')" href="../../../../_variables/thisChapter.html">$thisChapter</a>-&gt;meta
<a name="l1203"><span class="linenum">1203</span></a>              &amp;&amp; ( (<a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../../_variables/current_blog_ID.html">$current_blog_ID</a> == <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>) || (<a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) &gt;= 2) ) )
<a name="l1204"><span class="linenum">1204</span></a>          { // This is current blog or we allow moving posts accross blogs
<a name="l1205"><span class="linenum">1205</span></a>              if( <a class="var it6790" onMouseOver="hilite(6790)" onMouseOut="lolite()" onClick="logVariable('cat_select_form_fields')" href="../../../../_variables/cat_select_form_fields.html">$cat_select_form_fields</a> )
<a name="l1206"><span class="linenum">1206</span></a>              {    // We want a form field:
<a name="l1207"><span class="linenum">1207</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;selector catsel_main&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;post_category&quot; class=&quot;checkbox&quot; title=&quot;'
<a name="l1208"><span class="linenum">1208</span></a>                              .<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select as MAIN category').'&quot; value=&quot;'.<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>.'&quot;';
<a name="l1209"><span class="linenum">1209</span></a>                  if( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a> == <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/main_cat_ID.html">main_cat_ID</a> )
<a name="l1210"><span class="linenum">1210</span></a>                  { // main cat of the Item or set as default main cat above
<a name="l1211"><span class="linenum">1211</span></a>                      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' checked=&quot;checked&quot;';
<a name="l1212"><span class="linenum">1212</span></a>                  }
<a name="l1213"><span class="linenum">1213</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' id=&quot;sel_maincat_'.<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>.'&quot;';
<a name="l1214"><span class="linenum">1214</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' onclick=&quot;<a class="function" onClick="logFunction('check_extracat')" href="../../../../_functions/check_extracat.html" onMouseOver="funcPopup(event,'check_extracat')">check_extracat</a>(this);&quot; /&gt;&lt;/td&gt;';
<a name="l1215"><span class="linenum">1215</span></a>              }
<a name="l1216"><span class="linenum">1216</span></a>              else
<a name="l1217"><span class="linenum">1217</span></a>              {    // We just want info:
<a name="l1218"><span class="linenum">1218</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;selector catsel_main&quot;&gt;'.<a class="function" onClick="logFunction('bullet')" href="../../../../_functions/bullet.html" onMouseOver="funcPopup(event,'bullet')">bullet</a>( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a> == <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/main_cat_ID.html">main_cat_ID</a> ).'&lt;/td&gt;';
<a name="l1219"><span class="linenum">1219</span></a>              }
<a name="l1220"><span class="linenum">1220</span></a>          }
<a name="l1221"><span class="linenum">1221</span></a>          else
<a name="l1222"><span class="linenum">1222</span></a>          { // Don't allow to select this cat as a main cat
<a name="l1223"><span class="linenum">1223</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;selector catsel_main&quot;&gt;&amp;nbsp;&lt;/td&gt;';
<a name="l1224"><span class="linenum">1224</span></a>          }
<a name="l1225"><span class="linenum">1225</span></a>      }
<a name="l1226"><span class="linenum">1226</span></a>  
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment">    // CHECKBOX:</span>
<a name="l1228"><span class="linenum">1228</span></a>      if( <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) &gt;= 2 )
<a name="l1229"><span class="linenum">1229</span></a>      { // We allow multiple categories or main + extra cat,  display checkbox:
<a name="l1230"><span class="linenum">1230</span></a>          if( !<a class="var it6793" onMouseOver="hilite(6793)" onMouseOut="lolite()" onClick="logVariable('thisChapter')" href="../../../../_variables/thisChapter.html">$thisChapter</a>-&gt;meta
<a name="l1231"><span class="linenum">1231</span></a>              &amp;&amp; ( (<a class="var it1955" onMouseOver="hilite(1955)" onMouseOut="lolite()" onClick="logVariable('current_blog_ID')" href="../../../../_variables/current_blog_ID.html">$current_blog_ID</a> == <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>) || ( <a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) % 2 == 1 )
<a name="l1232"><span class="linenum">1232</span></a>                  || ( ( <a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) == 2 ) &amp;&amp; ( <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) == 2 ) ) ) )
<a name="l1233"><span class="linenum">1233</span></a>          { // This is the current blog or we allow cross posting (select extra cat from another blog)
<a name="l1234"><span class="linenum">1234</span></a>              if( <a class="var it6790" onMouseOver="hilite(6790)" onMouseOut="lolite()" onClick="logVariable('cat_select_form_fields')" href="../../../../_variables/cat_select_form_fields.html">$cat_select_form_fields</a> )
<a name="l1235"><span class="linenum">1235</span></a>              {    // We want a form field:
<a name="l1236"><span class="linenum">1236</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;selector catsel_extra&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;post_extracats[]&quot; class=&quot;checkbox&quot; title=&quot;'
<a name="l1237"><span class="linenum">1237</span></a>                              .<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select as an additional category').'&quot; value=&quot;'.<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>.'&quot;';
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment">                // if( ($cat_ID == $edited_Item-&gt;main_cat_ID) || (in_array( $cat_ID, $post_extracats )) )  &lt;--- We don't want to precheck the default cat because it will stay checked if we change the default main. On edit, the checkbox will always be in the array.</span>
<a name="l1239"><span class="linenum">1239</span></a>                  if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> ) )
<a name="l1240"><span class="linenum">1240</span></a>                  { // This category was selected
<a name="l1241"><span class="linenum">1241</span></a>                      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' checked=&quot;checked&quot;';
<a name="l1242"><span class="linenum">1242</span></a>                  }
<a name="l1243"><span class="linenum">1243</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' id=&quot;sel_extracat_'.<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>.'&quot;';
<a name="l1244"><span class="linenum">1244</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' /&gt;&lt;/td&gt;';
<a name="l1245"><span class="linenum">1245</span></a>              }
<a name="l1246"><span class="linenum">1246</span></a>              else
<a name="l1247"><span class="linenum">1247</span></a>              {    // We just want info:
<a name="l1248"><span class="linenum">1248</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;selector catsel_main&quot;&gt;'.<a class="function" onClick="logFunction('bullet')" href="../../../../_functions/bullet.html" onMouseOver="funcPopup(event,'bullet')">bullet</a>( (<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a> == <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/main_cat_ID.html">main_cat_ID</a>) || (<a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> )) ).'&lt;/td&gt;';
<a name="l1249"><span class="linenum">1249</span></a>              }
<a name="l1250"><span class="linenum">1250</span></a>          }
<a name="l1251"><span class="linenum">1251</span></a>          else
<a name="l1252"><span class="linenum">1252</span></a>          { // Don't allow to select this cat as an extra cat
<a name="l1253"><span class="linenum">1253</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;selector catsel_main&quot;&gt;&amp;nbsp;&lt;/td&gt;';
<a name="l1254"><span class="linenum">1254</span></a>          }
<a name="l1255"><span class="linenum">1255</span></a>      }
<a name="l1256"><span class="linenum">1256</span></a>  
<a name="l1257"><span class="linenum">1257</span></a>      <a class="var it6794" onMouseOver="hilite(6794)" onMouseOut="lolite()" onClick="logVariable('additional_style')" href="../../../../_variables/additional_style.html">$additional_style</a> = '';
<a name="l1258"><span class="linenum">1258</span></a>  
<a name="l1259"><span class="linenum">1259</span></a>      if( <a class="var it6793" onMouseOver="hilite(6793)" onMouseOut="lolite()" onClick="logVariable('thisChapter')" href="../../../../_variables/thisChapter.html">$thisChapter</a>-&gt;<a onClick="logVariable('meta')" class="var it9188" onMouseOver="hilite(9188)" onMouseOut="lolite()" href="../../../../_variables/meta.html">meta</a> )
<a name="l1260"><span class="linenum">1260</span></a>      {    // Change style of meta category
<a name="l1261"><span class="linenum">1261</span></a>          <a class="var it6794" onMouseOver="hilite(6794)" onMouseOut="lolite()" onClick="logVariable('additional_style')" href="../../../../_variables/additional_style.html">$additional_style</a> .= 'font-weight:bold;';
<a name="l1262"><span class="linenum">1262</span></a>      }
<a name="l1263"><span class="linenum">1263</span></a>  
<a name="l1264"><span class="linenum">1264</span></a>      <a class="var it6795" onMouseOver="hilite(6795)" onMouseOut="lolite()" onClick="logVariable('chapter_lock_status')" href="../../../../_variables/chapter_lock_status.html">$chapter_lock_status</a> = '';
<a name="l1265"><span class="linenum">1265</span></a>      if( <a class="var it6793" onMouseOver="hilite(6793)" onMouseOut="lolite()" onClick="logVariable('thisChapter')" href="../../../../_variables/thisChapter.html">$thisChapter</a>-&gt;<a onClick="logVariable('lock')" class="var it9188" onMouseOver="hilite(9188)" onMouseOut="lolite()" href="../../../../_variables/lock.html">lock</a> )
<a name="l1266"><span class="linenum">1266</span></a>      {    // Add icon for locked category
<a name="l1267"><span class="linenum">1267</span></a>          <a class="var it6795" onMouseOver="hilite(6795)" onMouseOut="lolite()" onClick="logVariable('chapter_lock_status')" href="../../../../_variables/chapter_lock_status.html">$chapter_lock_status</a> = '&lt;span style=&quot;padding-left:5px&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'file_not_allowed', 'imgtag', array( 'title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Locked')) ).'&lt;/span&gt;';
<a name="l1268"><span class="linenum">1268</span></a>      }
<a name="l1269"><span class="linenum">1269</span></a>  
<a name="l1270"><span class="linenum">1270</span></a>      <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l1271"><span class="linenum">1271</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;catsel_name&quot;&gt;&lt;label'
<a name="l1272"><span class="linenum">1272</span></a>                  .' for=&quot;'.( <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) == 2
<a name="l1273"><span class="linenum">1273</span></a>                      ? 'sel_extracat_'.<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>
<a name="l1274"><span class="linenum">1274</span></a>                      : 'sel_maincat_'.<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a> ).'&quot;'
<a name="l1275"><span class="linenum">1275</span></a>                  .' style=&quot;padding-left:'.(<a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>-1).'em;'.<a class="var it6794" onMouseOver="hilite(6794)" onMouseOut="lolite()" onClick="logVariable('additional_style')" href="../../../../_variables/additional_style.html">$additional_style</a>.'&quot;&gt;'
<a name="l1276"><span class="linenum">1276</span></a>                  .<a class="var it6793" onMouseOver="hilite(6793)" onMouseOut="lolite()" onClick="logVariable('thisChapter')" href="../../../../_variables/thisChapter.html">$thisChapter</a>-&gt;<a onClick="logVariable('name')" class="var it9188" onMouseOver="hilite(9188)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>.'&lt;/label&gt;'
<a name="l1277"><span class="linenum">1277</span></a>                  .<a class="var it6795" onMouseOver="hilite(6795)" onMouseOut="lolite()" onClick="logVariable('chapter_lock_status')" href="../../../../_variables/chapter_lock_status.html">$chapter_lock_status</a>
<a name="l1278"><span class="linenum">1278</span></a>                  .' &lt;a href=&quot;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it6793" onMouseOver="hilite(6793)" onMouseOut="lolite()" onClick="logVariable('thisChapter')" href="../../../../_variables/thisChapter.html">$thisChapter</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>()).'&quot; title=&quot;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('View category in blog.')).'&quot;&gt;'
<a name="l1279"><span class="linenum">1279</span></a>                  .'&amp;nbsp;&amp;raquo;&amp;nbsp;' // TODO: dh&gt; provide an icon instead? // fp&gt; maybe the A(dmin)/B(log) icon from the toolbar? And also use it for permalinks to posts?
<a name="l1280"><span class="linenum">1280</span></a>                  .'&lt;/a&gt;&lt;/td&gt;'
<a name="l1281"><span class="linenum">1281</span></a>              .'&lt;/tr&gt;'.&quot;\n&quot;;
<a name="l1282"><span class="linenum">1282</span></a>  
<a name="l1283"><span class="linenum">1283</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1284"><span class="linenum">1284</span></a>  }
<a name="l1285"><span class="linenum">1285</span></a>  
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">/**</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment"> * callback after each sublist element</span>
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment"> */</span>
<a name="l1289"><span class="linenum">1289</span></a>  function <a class="function" onClick="logFunction('cat_select_after_each')" href="../../../../_functions/cat_select_after_each.html" onMouseOver="funcPopup(event,'cat_select_after_each')">cat_select_after_each</a>( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> )
<a name="l1290"><span class="linenum">1290</span></a>  { // callback after each sublist element
<a name="l1291"><span class="linenum">1291</span></a>      return '';
<a name="l1292"><span class="linenum">1292</span></a>  }
<a name="l1293"><span class="linenum">1293</span></a>  
<a name="l1294"><span class="linenum">1294</span></a>  <span class="comment">/**</span>
<a name="l1295"><span class="linenum">1295</span></a>  <span class="comment"> * callback to end sublist</span>
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment"> */</span>
<a name="l1297"><span class="linenum">1297</span></a>  function <a class="function" onClick="logFunction('cat_select_after_last')" href="../../../../_functions/cat_select_after_last.html" onMouseOver="funcPopup(event,'cat_select_after_last')">cat_select_after_last</a>( <a class="var it1165" onMouseOver="hilite(1165)" onMouseOut="lolite()" onClick="logVariable('parent_cat_ID')" href="../../../../_variables/parent_cat_ID.html">$parent_cat_ID</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> )
<a name="l1298"><span class="linenum">1298</span></a>  { // callback to end sublist
<a name="l1299"><span class="linenum">1299</span></a>      return ''; <span class="comment">// &quot;&lt;/ul&gt;\n&quot;;</span>
<a name="l1300"><span class="linenum">1300</span></a>  }
<a name="l1301"><span class="linenum">1301</span></a>  
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment">/**</span>
<a name="l1303"><span class="linenum">1303</span></a>  <span class="comment"> * new category line for catselect table</span>
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment"> * @return string new row code</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment"> */</span>
<a name="l1306"><span class="linenum">1306</span></a>  function <a class="function" onClick="logFunction('cat_select_new')" href="../../../../_functions/cat_select_new.html" onMouseOver="funcPopup(event,'cat_select_new')">cat_select_new</a>()
<a name="l1307"><span class="linenum">1307</span></a>  {
<a name="l1308"><span class="linenum">1308</span></a>      global <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l1309"><span class="linenum">1309</span></a>  
<a name="l1310"><span class="linenum">1310</span></a>      if( ! <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_cats', '', false, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) )
<a name="l1311"><span class="linenum">1311</span></a>      {    // Current user cannot add/edit a categories for this blog
<a name="l1312"><span class="linenum">1312</span></a>          return '';
<a name="l1313"><span class="linenum">1313</span></a>      }
<a name="l1314"><span class="linenum">1314</span></a>  
<a name="l1315"><span class="linenum">1315</span></a>      <a class="var it6796" onMouseOver="hilite(6796)" onMouseOut="lolite()" onClick="logVariable('new_maincat')" href="../../../../_variables/new_maincat.html">$new_maincat</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_maincat', 'boolean', false );
<a name="l1316"><span class="linenum">1316</span></a>      <a class="var it6797" onMouseOver="hilite(6797)" onMouseOut="lolite()" onClick="logVariable('new_extracat')" href="../../../../_variables/new_extracat.html">$new_extracat</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_extracat', 'boolean', false );
<a name="l1317"><span class="linenum">1317</span></a>      if( <a class="var it6796" onMouseOver="hilite(6796)" onMouseOut="lolite()" onClick="logVariable('new_maincat')" href="../../../../_variables/new_maincat.html">$new_maincat</a> || <a class="var it6797" onMouseOver="hilite(6797)" onMouseOut="lolite()" onClick="logVariable('new_extracat')" href="../../../../_variables/new_extracat.html">$new_extracat</a> )
<a name="l1318"><span class="linenum">1318</span></a>      {
<a name="l1319"><span class="linenum">1319</span></a>          <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('category_name')" href="../../../../_variables/category_name.html">$category_name</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'category_name', 'string', '' );
<a name="l1320"><span class="linenum">1320</span></a>      }
<a name="l1321"><span class="linenum">1321</span></a>      else
<a name="l1322"><span class="linenum">1322</span></a>      {
<a name="l1323"><span class="linenum">1323</span></a>          <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('category_name')" href="../../../../_variables/category_name.html">$category_name</a> = '';
<a name="l1324"><span class="linenum">1324</span></a>      }
<a name="l1325"><span class="linenum">1325</span></a>  
<a name="l1326"><span class="linenum">1326</span></a>      global <a class="var it6791" onMouseOver="hilite(6791)" onMouseOut="lolite()" onClick="logVariable('cat_sel_total_count')" href="../../../../_variables/cat_sel_total_count.html">$cat_sel_total_count</a>;
<a name="l1327"><span class="linenum">1327</span></a>      <a class="var it6791" onMouseOver="hilite(6791)" onMouseOut="lolite()" onClick="logVariable('cat_sel_total_count')" href="../../../../_variables/cat_sel_total_count.html">$cat_sel_total_count</a>++;
<a name="l1328"><span class="linenum">1328</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = &quot;\n&quot;.'&lt;tr class=&quot;'.( <a class="var it6791" onMouseOver="hilite(6791)" onMouseOut="lolite()" onClick="logVariable('cat_sel_total_count')" href="../../../../_variables/cat_sel_total_count.html">$cat_sel_total_count</a>%2 ? 'odd' : 'even' ).'&quot;&gt;';
<a name="l1329"><span class="linenum">1329</span></a>  
<a name="l1330"><span class="linenum">1330</span></a>      if( <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) != 2 )
<a name="l1331"><span class="linenum">1331</span></a>      {
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment">        // RADIO for new main cat:</span>
<a name="l1333"><span class="linenum">1333</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;selector catsel_main&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;post_category&quot; class=&quot;checkbox&quot; title=&quot;'
<a name="l1334"><span class="linenum">1334</span></a>                              .<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select as MAIN category').'&quot; value=&quot;0&quot;';
<a name="l1335"><span class="linenum">1335</span></a>          if( <a class="var it6796" onMouseOver="hilite(6796)" onMouseOut="lolite()" onClick="logVariable('new_maincat')" href="../../../../_variables/new_maincat.html">$new_maincat</a> )
<a name="l1336"><span class="linenum">1336</span></a>          {
<a name="l1337"><span class="linenum">1337</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>.= ' checked=&quot;checked&quot;';
<a name="l1338"><span class="linenum">1338</span></a>          }
<a name="l1339"><span class="linenum">1339</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' id=&quot;sel_maincat_new&quot;';
<a name="l1340"><span class="linenum">1340</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' onclick=&quot;<a class="function" onClick="logFunction('check_extracat')" href="../../../../_functions/check_extracat.html" onMouseOver="funcPopup(event,'check_extracat')">check_extracat</a>(this);&quot;';
<a name="l1341"><span class="linenum">1341</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '/&gt;&lt;/td&gt;';
<a name="l1342"><span class="linenum">1342</span></a>      }
<a name="l1343"><span class="linenum">1343</span></a>  
<a name="l1344"><span class="linenum">1344</span></a>      if( <a class="function" onClick="logFunction('get_post_cat_setting')" href="../../../../_functions/get_post_cat_setting.html" onMouseOver="funcPopup(event,'get_post_cat_setting')">get_post_cat_setting</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) &gt;= 2 )
<a name="l1345"><span class="linenum">1345</span></a>      {
<a name="l1346"><span class="linenum">1346</span></a>  <span class="comment">        // CHECKBOX</span>
<a name="l1347"><span class="linenum">1347</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;selector catsel_extra&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;post_extracats[]&quot; class=&quot;checkbox&quot; title=&quot;'
<a name="l1348"><span class="linenum">1348</span></a>                              .<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select as an additional category').'&quot; value=&quot;0&quot;';
<a name="l1349"><span class="linenum">1349</span></a>          if( <a class="var it6797" onMouseOver="hilite(6797)" onMouseOut="lolite()" onClick="logVariable('new_extracat')" href="../../../../_variables/new_extracat.html">$new_extracat</a> )
<a name="l1350"><span class="linenum">1350</span></a>          {
<a name="l1351"><span class="linenum">1351</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>.= ' checked=&quot;checked&quot;';
<a name="l1352"><span class="linenum">1352</span></a>          }
<a name="l1353"><span class="linenum">1353</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= 'id=&quot;sel_extracat_new&quot;/&gt;&lt;/td&gt;';
<a name="l1354"><span class="linenum">1354</span></a>      }
<a name="l1355"><span class="linenum">1355</span></a>  
<a name="l1356"><span class="linenum">1356</span></a>  <span class="comment">    // INPUT TEXT for new category name</span>
<a name="l1357"><span class="linenum">1357</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;catsel_name&quot;&gt;'
<a name="l1358"><span class="linenum">1358</span></a>                  .'&lt;input maxlength=&quot;255&quot; style=&quot;width: 100%;&quot; value=&quot;'.<a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('category_name')" href="../../../../_variables/category_name.html">$category_name</a>.'&quot; size=&quot;20&quot; type=&quot;text&quot; name=&quot;category_name&quot; id=&quot;new_category_name&quot; /&gt;'
<a name="l1359"><span class="linenum">1359</span></a>                  .'&lt;/td&gt;'
<a name="l1360"><span class="linenum">1360</span></a>              .'&lt;/tr&gt;';
<a name="l1361"><span class="linenum">1361</span></a>  
<a name="l1362"><span class="linenum">1362</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l1363"><span class="linenum">1363</span></a>  }
<a name="l1364"><span class="linenum">1364</span></a>  
<a name="l1365"><span class="linenum">1365</span></a>  
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment">/**</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment"> * Used by the items &amp; the comments controllers</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment"> *</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment"> * @param boolean TRUE - to display third level tabs, FALSE - to hide them(used in the edit mode)</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment"> */</span>
<a name="l1371"><span class="linenum">1371</span></a>  function <a class="function" onClick="logFunction('attach_browse_tabs')" href="../../../../_functions/attach_browse_tabs.html" onMouseOver="funcPopup(event,'attach_browse_tabs')">attach_browse_tabs</a>( <a class="var it6798" onMouseOver="hilite(6798)" onMouseOut="lolite()" onClick="logVariable('display_tabs3')" href="../../../../_variables/display_tabs3.html">$display_tabs3</a> = true )
<a name="l1372"><span class="linenum">1372</span></a>  {
<a name="l1373"><span class="linenum">1373</span></a>      global <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>, <a class="var it3229" onMouseOver="hilite(3229)" onMouseOut="lolite()" onClick="logVariable('ItemTypeCache')" href="../../../../_variables/ItemTypeCache.html">$ItemTypeCache</a>;
<a name="l1374"><span class="linenum">1374</span></a>  
<a name="l1375"><span class="linenum">1375</span></a>      <a class="var it6799" onMouseOver="hilite(6799)" onMouseOut="lolite()" onClick="logVariable('menu_entries')" href="../../../../_variables/menu_entries.html">$menu_entries</a> = array(
<a name="l1376"><span class="linenum">1376</span></a>              'full' =&gt; array(
<a name="l1377"><span class="linenum">1377</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('All'),
<a name="l1378"><span class="linenum">1378</span></a>                  'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=full&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1379"><span class="linenum">1379</span></a>                  ),
<a name="l1380"><span class="linenum">1380</span></a>          );
<a name="l1381"><span class="linenum">1381</span></a>  
<a name="l1382"><span class="linenum">1382</span></a>      if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'use_workflow' ) )
<a name="l1383"><span class="linenum">1383</span></a>      { // We want to use workflow properties for this blog:
<a name="l1384"><span class="linenum">1384</span></a>          <a class="var it6799" onMouseOver="hilite(6799)" onMouseOut="lolite()" onClick="logVariable('menu_entries')" href="../../../../_variables/menu_entries.html">$menu_entries</a>[ 'tracker' ] = array(
<a name="l1385"><span class="linenum">1385</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Workflow view'),
<a name="l1386"><span class="linenum">1386</span></a>                  'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=tracker&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1387"><span class="linenum">1387</span></a>              );
<a name="l1388"><span class="linenum">1388</span></a>      }
<a name="l1389"><span class="linenum">1389</span></a>  
<a name="l1390"><span class="linenum">1390</span></a>      if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'type' ) == 'manual' )
<a name="l1391"><span class="linenum">1391</span></a>      { // Display this tab only for manual blogs
<a name="l1392"><span class="linenum">1392</span></a>          <a class="var it6799" onMouseOver="hilite(6799)" onMouseOut="lolite()" onClick="logVariable('menu_entries')" href="../../../../_variables/menu_entries.html">$menu_entries</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it6799" onMouseOver="hilite(6799)" onMouseOut="lolite()" onClick="logVariable('menu_entries')" href="../../../../_variables/menu_entries.html">$menu_entries</a>, array(
<a name="l1393"><span class="linenum">1393</span></a>                  'manual' =&gt; array(
<a name="l1394"><span class="linenum">1394</span></a>                      'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Manual view'),
<a name="l1395"><span class="linenum">1395</span></a>                      'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=manual&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1396"><span class="linenum">1396</span></a>                      ),
<a name="l1397"><span class="linenum">1397</span></a>              ) );
<a name="l1398"><span class="linenum">1398</span></a>      }
<a name="l1399"><span class="linenum">1399</span></a>  
<a name="l1400"><span class="linenum">1400</span></a>      <a class="var it6799" onMouseOver="hilite(6799)" onMouseOut="lolite()" onClick="logVariable('menu_entries')" href="../../../../_variables/menu_entries.html">$menu_entries</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it6799" onMouseOver="hilite(6799)" onMouseOut="lolite()" onClick="logVariable('menu_entries')" href="../../../../_variables/menu_entries.html">$menu_entries</a>, array(
<a name="l1401"><span class="linenum">1401</span></a>              'list' =&gt; array(
<a name="l1402"><span class="linenum">1402</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Posts'),
<a name="l1403"><span class="linenum">1403</span></a>                  'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=list&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1404"><span class="linenum">1404</span></a>                  ),
<a name="l1405"><span class="linenum">1405</span></a>              'pages' =&gt; array(
<a name="l1406"><span class="linenum">1406</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Pages'),
<a name="l1407"><span class="linenum">1407</span></a>                  'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=pages&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1408"><span class="linenum">1408</span></a>                  ),
<a name="l1409"><span class="linenum">1409</span></a>              'intros' =&gt; array(
<a name="l1410"><span class="linenum">1410</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Intros'),
<a name="l1411"><span class="linenum">1411</span></a>                  'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=intros&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1412"><span class="linenum">1412</span></a>                  ),
<a name="l1413"><span class="linenum">1413</span></a>              'podcasts' =&gt; array(
<a name="l1414"><span class="linenum">1414</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Podcasts'),
<a name="l1415"><span class="linenum">1415</span></a>                  'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=podcasts&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1416"><span class="linenum">1416</span></a>                  ),
<a name="l1417"><span class="linenum">1417</span></a>              'links' =&gt; array(
<a name="l1418"><span class="linenum">1418</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Sidebar links'),
<a name="l1419"><span class="linenum">1419</span></a>                  'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=links&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1420"><span class="linenum">1420</span></a>                  ),
<a name="l1421"><span class="linenum">1421</span></a>              'ads' =&gt; array(
<a name="l1422"><span class="linenum">1422</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Advertisements'),
<a name="l1423"><span class="linenum">1423</span></a>                  'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;tab=ads&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l1424"><span class="linenum">1424</span></a>                  ),
<a name="l1425"><span class="linenum">1425</span></a>          ) );
<a name="l1426"><span class="linenum">1426</span></a>  
<a name="l1427"><span class="linenum">1427</span></a>      <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('add_menu_entries')" href="../../../../_functions/add_menu_entries.html" onMouseOver="funcPopup(event,'add_menu_entries')">add_menu_entries</a>( 'items', <a class="var it6799" onMouseOver="hilite(6799)" onMouseOut="lolite()" onClick="logVariable('menu_entries')" href="../../../../_variables/menu_entries.html">$menu_entries</a> );
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>      <span class="comment">/* fp&gt; Custom types should be variations of normal posts by default</span>
<a name="l1430"><span class="linenum">1430</span></a>  <span class="comment">      I am ok with giving extra tabs to SOME of them but then the</span>
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">        posttype list has to be transformed into a normal CREATE/UPDATE/DELETE (CRUD)</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment">        (see the stats&gt;goals CRUD for an example of a clean CRUD)</span>
<a name="l1433"><span class="linenum">1433</span></a>  <span class="comment">        and each post type must have a checkbox like &quot;use separate tab&quot;</span>
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">        Note: you can also make a select list &quot;group with: posts|pages|etc...|other|own tab&quot;</span>
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment"></span>
<a name="l1436"><span class="linenum">1436</span></a>  <span class="comment">        $ItemTypeCache = &amp; get_ItemTypeCache();</span>
<a name="l1437"><span class="linenum">1437</span></a>  <span class="comment">        $default_post_types = array(1,1000,1500,1520,1530,1570,1600,2000,3000,4000,5000);</span>
<a name="l1438"><span class="linenum">1438</span></a>  <span class="comment">        $items_types = array_values( array_keys( $ItemTypeCache-&gt;get_option_array() ) );</span>
<a name="l1439"><span class="linenum">1439</span></a>  <span class="comment">        // a tab for custom types</span>
<a name="l1440"><span class="linenum">1440</span></a>  <span class="comment">        if ( array_diff($items_types,$default_post_types) )</span>
<a name="l1441"><span class="linenum">1441</span></a>  <span class="comment">        {</span>
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment">            $AdminUI-&gt;add_menu_entries(</span>
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment">                    'items',</span>
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment">                    array(</span>
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment">                        'custom' =&gt; array(</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment">                            'text' =&gt; T_('Custom Types'),</span>
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment">                            'href' =&gt; $dispatcher.'?ctrl=items&amp;amp;tab=custom&amp;amp;filter=restore&amp;amp;blog='.$Blog-&gt;ID,</span>
<a name="l1448"><span class="linenum">1448</span></a>  <span class="comment">                        ),</span>
<a name="l1449"><span class="linenum">1449</span></a>  <span class="comment">                    )</span>
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment">            );</span>
<a name="l1451"><span class="linenum">1451</span></a>  <span class="comment">        }</span>
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">    */</span>
<a name="l1453"><span class="linenum">1453</span></a>  
<a name="l1454"><span class="linenum">1454</span></a>      if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_comments', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l1455"><span class="linenum">1455</span></a>      { // User has permission to edit published, draft or deprecated comments (at least one kind)
<a name="l1456"><span class="linenum">1456</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('add_menu_entries')" href="../../../../_functions/add_menu_entries.html" onMouseOver="funcPopup(event,'add_menu_entries')">add_menu_entries</a>(
<a name="l1457"><span class="linenum">1457</span></a>                  'items',
<a name="l1458"><span class="linenum">1458</span></a>                  array(
<a name="l1459"><span class="linenum">1459</span></a>                          'comments' =&gt; array(
<a name="l1460"><span class="linenum">1460</span></a>                              'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comments'),
<a name="l1461"><span class="linenum">1461</span></a>                              'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=comments&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;filter=restore',
<a name="l1462"><span class="linenum">1462</span></a>                              ),
<a name="l1463"><span class="linenum">1463</span></a>                      )
<a name="l1464"><span class="linenum">1464</span></a>              );
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>          if( <a class="var it6798" onMouseOver="hilite(6798)" onMouseOut="lolite()" onClick="logVariable('display_tabs3')" href="../../../../_variables/display_tabs3.html">$display_tabs3</a> )
<a name="l1467"><span class="linenum">1467</span></a>          {
<a name="l1468"><span class="linenum">1468</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('add_menu_entries')" href="../../../../_functions/add_menu_entries.html" onMouseOver="funcPopup(event,'add_menu_entries')">add_menu_entries</a>( array('items','comments'), array(
<a name="l1469"><span class="linenum">1469</span></a>                      'fullview' =&gt; array(
<a name="l1470"><span class="linenum">1470</span></a>                          'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Full text view'),
<a name="l1471"><span class="linenum">1471</span></a>                          'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=comments&amp;amp;tab3=fullview&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;ID
<a name="l1472"><span class="linenum">1472</span></a>                          ),
<a name="l1473"><span class="linenum">1473</span></a>                      'listview' =&gt; array(
<a name="l1474"><span class="linenum">1474</span></a>                          'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('List view'),
<a name="l1475"><span class="linenum">1475</span></a>                          'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=comments&amp;amp;tab3=listview&amp;amp;filter=restore&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;ID
<a name="l1476"><span class="linenum">1476</span></a>                          ),
<a name="l1477"><span class="linenum">1477</span></a>                      )
<a name="l1478"><span class="linenum">1478</span></a>                  );
<a name="l1479"><span class="linenum">1479</span></a>          }
<a name="l1480"><span class="linenum">1480</span></a>      }
<a name="l1481"><span class="linenum">1481</span></a>  
<a name="l1482"><span class="linenum">1482</span></a>  
<a name="l1483"><span class="linenum">1483</span></a>  <span class="comment">    // What perms do we have?</span>
<a name="l1484"><span class="linenum">1484</span></a>      <a class="var it3236" onMouseOver="hilite(3236)" onMouseOut="lolite()" onClick="logVariable('coll_settings_perm')" href="../../../../_variables/coll_settings_perm.html">$coll_settings_perm</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'options', 'view', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l1485"><span class="linenum">1485</span></a>      <a class="var it6802" onMouseOver="hilite(6802)" onMouseOut="lolite()" onClick="logVariable('settings_url')" href="../../../../_variables/settings_url.html">$settings_url</a> = '?ctrl=itemtypes&amp;amp;tab=settings&amp;amp;tab3=types&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l1486"><span class="linenum">1486</span></a>      if( <a class="var it6803" onMouseOver="hilite(6803)" onMouseOut="lolite()" onClick="logVariable('coll_chapters_perm')" href="../../../../_variables/coll_chapters_perm.html">$coll_chapters_perm</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_cats', '', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l1487"><span class="linenum">1487</span></a>      {
<a name="l1488"><span class="linenum">1488</span></a>          <a class="var it6802" onMouseOver="hilite(6802)" onMouseOut="lolite()" onClick="logVariable('settings_url')" href="../../../../_variables/settings_url.html">$settings_url</a> = '?ctrl=chapters&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l1489"><span class="linenum">1489</span></a>      }
<a name="l1490"><span class="linenum">1490</span></a>  
<a name="l1491"><span class="linenum">1491</span></a>      if( <a class="var it3236" onMouseOver="hilite(3236)" onMouseOut="lolite()" onClick="logVariable('coll_settings_perm')" href="../../../../_variables/coll_settings_perm.html">$coll_settings_perm</a> || <a class="var it6803" onMouseOver="hilite(6803)" onMouseOut="lolite()" onClick="logVariable('coll_chapters_perm')" href="../../../../_variables/coll_chapters_perm.html">$coll_chapters_perm</a> )
<a name="l1492"><span class="linenum">1492</span></a>      {
<a name="l1493"><span class="linenum">1493</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('add_menu_entries')" href="../../../../_functions/add_menu_entries.html" onMouseOver="funcPopup(event,'add_menu_entries')">add_menu_entries</a>(
<a name="l1494"><span class="linenum">1494</span></a>              'items',
<a name="l1495"><span class="linenum">1495</span></a>              array(
<a name="l1496"><span class="linenum">1496</span></a>                  'settings' =&gt; array(
<a name="l1497"><span class="linenum">1497</span></a>                      'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Content settings'),
<a name="l1498"><span class="linenum">1498</span></a>                      'href' =&gt; <a class="var it6802" onMouseOver="hilite(6802)" onMouseOut="lolite()" onClick="logVariable('settings_url')" href="../../../../_variables/settings_url.html">$settings_url</a>,
<a name="l1499"><span class="linenum">1499</span></a>                      )
<a name="l1500"><span class="linenum">1500</span></a>                  )
<a name="l1501"><span class="linenum">1501</span></a>              );
<a name="l1502"><span class="linenum">1502</span></a>  
<a name="l1503"><span class="linenum">1503</span></a>          if( <a class="var it6803" onMouseOver="hilite(6803)" onMouseOut="lolite()" onClick="logVariable('coll_chapters_perm')" href="../../../../_variables/coll_chapters_perm.html">$coll_chapters_perm</a> )
<a name="l1504"><span class="linenum">1504</span></a>          {
<a name="l1505"><span class="linenum">1505</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('add_menu_entries')" href="../../../../_functions/add_menu_entries.html" onMouseOver="funcPopup(event,'add_menu_entries')">add_menu_entries</a>( array('items','settings'), array(
<a name="l1506"><span class="linenum">1506</span></a>                  'chapters' =&gt; array(
<a name="l1507"><span class="linenum">1507</span></a>                      'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Categories'),
<a name="l1508"><span class="linenum">1508</span></a>                      'href' =&gt; '?ctrl=chapters&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;ID
<a name="l1509"><span class="linenum">1509</span></a>                      ),
<a name="l1510"><span class="linenum">1510</span></a>                  )
<a name="l1511"><span class="linenum">1511</span></a>              );
<a name="l1512"><span class="linenum">1512</span></a>          }
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>          if( <a class="var it3236" onMouseOver="hilite(3236)" onMouseOut="lolite()" onClick="logVariable('coll_settings_perm')" href="../../../../_variables/coll_settings_perm.html">$coll_settings_perm</a> )
<a name="l1515"><span class="linenum">1515</span></a>          {
<a name="l1516"><span class="linenum">1516</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('add_menu_entries')" href="../../../../_functions/add_menu_entries.html" onMouseOver="funcPopup(event,'add_menu_entries')">add_menu_entries</a>( array('items','settings'), array(
<a name="l1517"><span class="linenum">1517</span></a>                  'types' =&gt; array(
<a name="l1518"><span class="linenum">1518</span></a>                      'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post types'),
<a name="l1519"><span class="linenum">1519</span></a>                      'title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post types management'),
<a name="l1520"><span class="linenum">1520</span></a>                      'href' =&gt; '?ctrl=itemtypes&amp;amp;tab=settings&amp;amp;tab3=types&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;ID
<a name="l1521"><span class="linenum">1521</span></a>                      ),
<a name="l1522"><span class="linenum">1522</span></a>                  'statuses' =&gt; array(
<a name="l1523"><span class="linenum">1523</span></a>                      'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post statuses'),
<a name="l1524"><span class="linenum">1524</span></a>                      'title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post statuses management'),
<a name="l1525"><span class="linenum">1525</span></a>                      'href' =&gt; '?ctrl=itemstatuses&amp;amp;tab=settings&amp;amp;tab3=statuses&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;ID
<a name="l1526"><span class="linenum">1526</span></a>                      ),
<a name="l1527"><span class="linenum">1527</span></a>                  )
<a name="l1528"><span class="linenum">1528</span></a>              );
<a name="l1529"><span class="linenum">1529</span></a>          }
<a name="l1530"><span class="linenum">1530</span></a>      }
<a name="l1531"><span class="linenum">1531</span></a>  }
<a name="l1532"><span class="linenum">1532</span></a>  
<a name="l1533"><span class="linenum">1533</span></a>  
<a name="l1534"><span class="linenum">1534</span></a>  
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">/**</span>
<a name="l1536"><span class="linenum">1536</span></a>  <span class="comment"> * Allow to select status/visibility</span>
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment"> *</span>
<a name="l1538"><span class="linenum">1538</span></a>  <span class="comment"> * @param object Form</span>
<a name="l1539"><span class="linenum">1539</span></a>  <span class="comment"> * @param string Status</span>
<a name="l1540"><span class="linenum">1540</span></a>  <span class="comment"> * @param boolean Mass create</span>
<a name="l1541"><span class="linenum">1541</span></a>  <span class="comment"> * @param array labels of statuses</span>
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment"> */</span>
<a name="l1543"><span class="linenum">1543</span></a>  function <a class="function" onClick="logFunction('visibility_select')" href="../../../../_functions/visibility_select.html" onMouseOver="funcPopup(event,'visibility_select')">visibility_select</a>( &amp; <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../../_variables/post_status.html">$post_status</a>, <a class="var it6475" onMouseOver="hilite(6475)" onMouseOut="lolite()" onClick="logVariable('mass_create')" href="../../../../_variables/mass_create.html">$mass_create</a> = false, <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('labels')" href="../../../../_variables/labels.html">$labels</a> = array(), <a class="var it5797" onMouseOver="hilite(5797)" onMouseOut="lolite()" onClick="logVariable('field_label')" href="../../../../_variables/field_label.html">$field_label</a> = '' )
<a name="l1544"><span class="linenum">1544</span></a>  {
<a name="l1545"><span class="linenum">1545</span></a>      <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('labels')" href="../../../../_variables/labels.html">$labels</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>('notes-array'), <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('labels')" href="../../../../_variables/labels.html">$labels</a> );
<a name="l1546"><span class="linenum">1546</span></a>  
<a name="l1547"><span class="linenum">1547</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l1548"><span class="linenum">1548</span></a>  
<a name="l1549"><span class="linenum">1549</span></a>      <a class="var it6804" onMouseOver="hilite(6804)" onMouseOut="lolite()" onClick="logVariable('mass_create_statuses')" href="../../../../_variables/mass_create_statuses.html">$mass_create_statuses</a> = array( 'redirected' );
<a name="l1550"><span class="linenum">1550</span></a>  
<a name="l1551"><span class="linenum">1551</span></a>      <a class="var it2089" onMouseOver="hilite(2089)" onMouseOut="lolite()" onClick="logVariable('sharing_options')" href="../../../../_variables/sharing_options.html">$sharing_options</a> = array();
<a name="l1552"><span class="linenum">1552</span></a>  
<a name="l1553"><span class="linenum">1553</span></a>      foreach( <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('labels')" href="../../../../_variables/labels.html">$labels</a> as <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> =&gt; <a class="var it6175" onMouseOver="hilite(6175)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../../../_variables/label.html">$label</a> )
<a name="l1554"><span class="linenum">1554</span></a>      {
<a name="l1555"><span class="linenum">1555</span></a>          if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_post!'.<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>, 'create', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) &amp;&amp;
<a name="l1556"><span class="linenum">1556</span></a>              ( !<a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>, <a class="var it6804" onMouseOver="hilite(6804)" onMouseOut="lolite()" onClick="logVariable('mass_create_statuses')" href="../../../../_variables/mass_create_statuses.html">$mass_create_statuses</a> ) || !<a class="var it6475" onMouseOver="hilite(6475)" onMouseOut="lolite()" onClick="logVariable('mass_create')" href="../../../../_variables/mass_create.html">$mass_create</a> ) )
<a name="l1557"><span class="linenum">1557</span></a>          {
<a name="l1558"><span class="linenum">1558</span></a>              <a class="var it2089" onMouseOver="hilite(2089)" onMouseOut="lolite()" onClick="logVariable('sharing_options')" href="../../../../_variables/sharing_options.html">$sharing_options</a>[] = array( <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>, <a class="var it6175" onMouseOver="hilite(6175)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../../../_variables/label.html">$label</a>[0].' &lt;span class=&quot;notes&quot;&gt;'.<a class="var it6175" onMouseOver="hilite(6175)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../../../_variables/label.html">$label</a>[1].'&lt;/span&gt;' );
<a name="l1559"><span class="linenum">1559</span></a>          }
<a name="l1560"><span class="linenum">1560</span></a>      }
<a name="l1561"><span class="linenum">1561</span></a>  
<a name="l1562"><span class="linenum">1562</span></a>      if( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it2089" onMouseOver="hilite(2089)" onMouseOut="lolite()" onClick="logVariable('sharing_options')" href="../../../../_variables/sharing_options.html">$sharing_options</a> ) == 1 )
<a name="l1563"><span class="linenum">1563</span></a>      { // Only one status is available, don't show visibility select
<a name="l1564"><span class="linenum">1564</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'post_status', <a class="var it2089" onMouseOver="hilite(2089)" onMouseOut="lolite()" onClick="logVariable('sharing_options')" href="../../../../_variables/sharing_options.html">$sharing_options</a>[0][0] );
<a name="l1565"><span class="linenum">1565</span></a>          return;
<a name="l1566"><span class="linenum">1566</span></a>      }
<a name="l1567"><span class="linenum">1567</span></a>  
<a name="l1568"><span class="linenum">1568</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('radio')" href="../../../../_functions/radio.html" onMouseOver="funcPopup(event,'radio')">radio</a>( 'post_status', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('post_status')" href="../../../../_variables/post_status.html">$post_status</a>, <a class="var it2089" onMouseOver="hilite(2089)" onMouseOut="lolite()" onClick="logVariable('sharing_options')" href="../../../../_variables/sharing_options.html">$sharing_options</a>, <a class="var it5797" onMouseOver="hilite(5797)" onMouseOut="lolite()" onClick="logVariable('field_label')" href="../../../../_variables/field_label.html">$field_label</a>, true );
<a name="l1569"><span class="linenum">1569</span></a>  }
<a name="l1570"><span class="linenum">1570</span></a>  
<a name="l1571"><span class="linenum">1571</span></a>  
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment">/**</span>
<a name="l1573"><span class="linenum">1573</span></a>  <span class="comment"> * Selection of the issue date</span>
<a name="l1574"><span class="linenum">1574</span></a>  <span class="comment"> *</span>
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment"> * @todo dh&gt; should display erroneous values (e.g. when giving invalid date) as current (form) value, too.</span>
<a name="l1576"><span class="linenum">1576</span></a>  <span class="comment"> * @param Form</span>
<a name="l1577"><span class="linenum">1577</span></a>  <span class="comment"> * @param boolean Break line</span>
<a name="l1578"><span class="linenum">1578</span></a>  <span class="comment"> * @param string Title</span>
<a name="l1579"><span class="linenum">1579</span></a>  <span class="comment"> */</span>
<a name="l1580"><span class="linenum">1580</span></a>  function <a class="function" onClick="logFunction('issue_date_control')" href="../../../../_functions/issue_date_control.html" onMouseOver="funcPopup(event,'issue_date_control')">issue_date_control</a>( <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>, <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('break')" href="../../../../_variables/break.html">$break</a> = false, <a class="var it6805" onMouseOver="hilite(6805)" onMouseOut="lolite()" onClick="logVariable('field_title')" href="../../../../_variables/field_title.html">$field_title</a> = '' )
<a name="l1581"><span class="linenum">1581</span></a>  {
<a name="l1582"><span class="linenum">1582</span></a>      global <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>;
<a name="l1583"><span class="linenum">1583</span></a>  
<a name="l1584"><span class="linenum">1584</span></a>      if( <a class="var it6805" onMouseOver="hilite(6805)" onMouseOut="lolite()" onClick="logVariable('field_title')" href="../../../../_variables/field_title.html">$field_title</a> == '' )
<a name="l1585"><span class="linenum">1585</span></a>      {
<a name="l1586"><span class="linenum">1586</span></a>          <a class="var it6805" onMouseOver="hilite(6805)" onMouseOut="lolite()" onClick="logVariable('field_title')" href="../../../../_variables/field_title.html">$field_title</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Issue date');
<a name="l1587"><span class="linenum">1587</span></a>      }
<a name="l1588"><span class="linenum">1588</span></a>  
<a name="l1589"><span class="linenum">1589</span></a>      echo <a class="var it6805" onMouseOver="hilite(6805)" onMouseOut="lolite()" onClick="logVariable('field_title')" href="../../../../_variables/field_title.html">$field_title</a>.':&lt;br /&gt;';
<a name="l1590"><span class="linenum">1590</span></a>  
<a name="l1591"><span class="linenum">1591</span></a>      echo '&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;item_dateset&quot; id=&quot;set_issue_date_now&quot; value=&quot;0&quot; '
<a name="l1592"><span class="linenum">1592</span></a>                  .( (<a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('dateset')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/dateset.html">dateset</a> == 0) ? 'checked=&quot;checked&quot;' : '' )
<a name="l1593"><span class="linenum">1593</span></a>                  .'/&gt;&lt;strong&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Update to NOW').'&lt;/strong&gt;&lt;/label&gt;';
<a name="l1594"><span class="linenum">1594</span></a>  
<a name="l1595"><span class="linenum">1595</span></a>      if( <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('break')" href="../../../../_variables/break.html">$break</a> )
<a name="l1596"><span class="linenum">1596</span></a>      {
<a name="l1597"><span class="linenum">1597</span></a>          echo '&lt;br /&gt;';
<a name="l1598"><span class="linenum">1598</span></a>      }
<a name="l1599"><span class="linenum">1599</span></a>  
<a name="l1600"><span class="linenum">1600</span></a>      echo '&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;item_dateset&quot; id=&quot;set_issue_date_to&quot; value=&quot;1&quot; '
<a name="l1601"><span class="linenum">1601</span></a>                  .( (<a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('dateset')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/dateset.html">dateset</a> == 1) ? 'checked=&quot;checked&quot;' : '' )
<a name="l1602"><span class="linenum">1602</span></a>                  .'/&gt;&lt;strong&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Set to').':&lt;/strong&gt;&lt;/label&gt;';
<a name="l1603"><span class="linenum">1603</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="phpfunction" onClick="logFunction('date')" href="../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>( 'item_issue_date', <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('issue_date'), '' );
<a name="l1604"><span class="linenum">1604</span></a>      echo ' '; <span class="comment">// allow wrapping!</span>
<a name="l1605"><span class="linenum">1605</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>( 'item_issue_time', <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('issue_date'), '', 'hh:mm:ss', '' );
<a name="l1606"><span class="linenum">1606</span></a>      echo ' '; <span class="comment">// allow wrapping!</span>
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>  <span class="comment">    // Autoselect &quot;change date&quot; is the date is changed.</span>
<a name="l1609"><span class="linenum">1609</span></a>      ?&gt;
<a name="l1610"><span class="linenum">1610</span></a>      &lt;script&gt;
<a name="l1611"><span class="linenum">1611</span></a>      jQuery( function()
<a name="l1612"><span class="linenum">1612</span></a>              {
<a name="l1613"><span class="linenum">1613</span></a>                  jQuery('#item_issue_date, #item_issue_time').change(function()
<a name="l1614"><span class="linenum">1614</span></a>                  {
<a name="l1615"><span class="linenum">1615</span></a>                      jQuery('#set_issue_date_to').attr(&quot;checked&quot;, &quot;checked&quot;)
<a name="l1616"><span class="linenum">1616</span></a>                  })
<a name="l1617"><span class="linenum">1617</span></a>              }
<a name="l1618"><span class="linenum">1618</span></a>          )
<a name="l1619"><span class="linenum">1619</span></a>      &lt;/script&gt;
<a name="l1620"><span class="linenum">1620</span></a>      &lt;?php
<a name="l1621"><span class="linenum">1621</span></a>  
<a name="l1622"><span class="linenum">1622</span></a>  }
<a name="l1623"><span class="linenum">1623</span></a>  
<a name="l1624"><span class="linenum">1624</span></a>  
<a name="l1625"><span class="linenum">1625</span></a>  <span class="comment">/**</span>
<a name="l1626"><span class="linenum">1626</span></a>  <span class="comment"> * Template tag: Link to an item identified by its url title / slug / name</span>
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment"> *</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment"> * Note: this will query the database. Thus, in most situations it will make more sense</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment"> * to use a hardcoded link. This tag can be useful for prototyping location independant</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment"> * sites.</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment"> */</span>
<a name="l1632"><span class="linenum">1632</span></a>  function <a class="function" onClick="logFunction('item_link_by_urltitle')" href="../../../../_functions/item_link_by_urltitle.html" onMouseOver="funcPopup(event,'item_link_by_urltitle')">item_link_by_urltitle</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l1633"><span class="linenum">1633</span></a>  {
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l1635"><span class="linenum">1635</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1636"><span class="linenum">1636</span></a>              'urltitle'    =&gt; NULL,  // MUST BE SPECIFIED
<a name="l1637"><span class="linenum">1637</span></a>              'before'      =&gt; ' ',
<a name="l1638"><span class="linenum">1638</span></a>              'after'       =&gt; ' ',
<a name="l1639"><span class="linenum">1639</span></a>              'text'        =&gt; '#',
<a name="l1640"><span class="linenum">1640</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l1641"><span class="linenum">1641</span></a>  
<a name="l1642"><span class="linenum">1642</span></a>    <span class="comment">/**</span>
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment">     * @var ItemCache</span>
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment">     */</span>
<a name="l1645"><span class="linenum">1645</span></a>      <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l1646"><span class="linenum">1646</span></a>  
<a name="l1647"><span class="linenum">1647</span></a>    <span class="comment">/**</span>
<a name="l1648"><span class="linenum">1648</span></a>  <span class="comment">     * @var Item</span>
<a name="l1649"><span class="linenum">1649</span></a>  <span class="comment">     */</span>
<a name="l1650"><span class="linenum">1650</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> = &amp; <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_urltitle( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['urltitle'], false );
<a name="l1651"><span class="linenum">1651</span></a>  
<a name="l1652"><span class="linenum">1652</span></a>      if( empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>) )
<a name="l1653"><span class="linenum">1653</span></a>      {
<a name="l1654"><span class="linenum">1654</span></a>          return false;
<a name="l1655"><span class="linenum">1655</span></a>      }
<a name="l1656"><span class="linenum">1656</span></a>  
<a name="l1657"><span class="linenum">1657</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('permanent_link')" href="../../../../_functions/permanent_link.html" onMouseOver="funcPopup(event,'permanent_link')">permanent_link</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l1658"><span class="linenum">1658</span></a>  }
<a name="l1659"><span class="linenum">1659</span></a>  
<a name="l1660"><span class="linenum">1660</span></a>  
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment">/**</span>
<a name="l1662"><span class="linenum">1662</span></a>  <span class="comment"> * Load new status when the item was published</span>
<a name="l1663"><span class="linenum">1663</span></a>  <span class="comment"> * If the status is invalid then an error message will be added to messages</span>
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment"> *</span>
<a name="l1665"><span class="linenum">1665</span></a>  <span class="comment"> * @param boolean true if creating new post, false on update</span>
<a name="l1666"><span class="linenum">1666</span></a>  <span class="comment"> * @return string the publish status or an allowed status if the given status was invalid</span>
<a name="l1667"><span class="linenum">1667</span></a>  <span class="comment"> */</span>
<a name="l1668"><span class="linenum">1668</span></a>  function <a class="function" onClick="logFunction('load_publish_status')" href="../../../../_functions/load_publish_status.html" onMouseOver="funcPopup(event,'load_publish_status')">load_publish_status</a>( <a class="var it337" onMouseOver="hilite(337)" onMouseOut="lolite()" onClick="logVariable('creating')" href="../../../../_variables/creating.html">$creating</a> = false )
<a name="l1669"><span class="linenum">1669</span></a>  {
<a name="l1670"><span class="linenum">1670</span></a>      global <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>;
<a name="l1671"><span class="linenum">1671</span></a>  
<a name="l1672"><span class="linenum">1672</span></a>      <a class="var it6196" onMouseOver="hilite(6196)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../../../_variables/publish_status.html">$publish_status</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'publish_status', 'string', '' );
<a name="l1673"><span class="linenum">1673</span></a>      if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it6196" onMouseOver="hilite(6196)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../../../_variables/publish_status.html">$publish_status</a>, array( 'published', 'community', 'protected', 'private' ) ) )
<a name="l1674"><span class="linenum">1674</span></a>      { // Publish with the given status doesn't exists &quot;published&quot;
<a name="l1675"><span class="linenum">1675</span></a>          if( <a class="var it337" onMouseOver="hilite(337)" onMouseOut="lolite()" onClick="logVariable('creating')" href="../../../../_variables/creating.html">$creating</a> )
<a name="l1676"><span class="linenum">1676</span></a>          {
<a name="l1677"><span class="linenum">1677</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The post has been created but not published because it seems like you wanted to publish with an invalid status.'), 'error' );
<a name="l1678"><span class="linenum">1678</span></a>          }
<a name="l1679"><span class="linenum">1679</span></a>          else
<a name="l1680"><span class="linenum">1680</span></a>          {
<a name="l1681"><span class="linenum">1681</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The post has been updated but not published because it seems like you wanted to publish with an invalid status.'), 'error' );
<a name="l1682"><span class="linenum">1682</span></a>          }
<a name="l1683"><span class="linenum">1683</span></a>          <a class="var it6196" onMouseOver="hilite(6196)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../../../_variables/publish_status.html">$publish_status</a> = 'draft';
<a name="l1684"><span class="linenum">1684</span></a>      }
<a name="l1685"><span class="linenum">1685</span></a>      return <a class="var it6196" onMouseOver="hilite(6196)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../../../_variables/publish_status.html">$publish_status</a>;
<a name="l1686"><span class="linenum">1686</span></a>  }
<a name="l1687"><span class="linenum">1687</span></a>  
<a name="l1688"><span class="linenum">1688</span></a>  
<a name="l1689"><span class="linenum">1689</span></a>  function <a class="function" onClick="logFunction('echo_publish_buttons')" href="../../../../_functions/echo_publish_buttons.html" onMouseOver="funcPopup(event,'echo_publish_buttons')">echo_publish_buttons</a>( <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>, <a class="var it337" onMouseOver="hilite(337)" onMouseOut="lolite()" onClick="logVariable('creating')" href="../../../../_variables/creating.html">$creating</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>, <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../../../_variables/inskin.html">$inskin</a> = false, <a class="var it6806" onMouseOver="hilite(6806)" onMouseOut="lolite()" onClick="logVariable('display_preview')" href="../../../../_variables/display_preview.html">$display_preview</a> = false )
<a name="l1690"><span class="linenum">1690</span></a>  {
<a name="l1691"><span class="linenum">1691</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l1692"><span class="linenum">1692</span></a>      global <a class="var it242" onMouseOver="hilite(242)" onMouseOut="lolite()" onClick="logVariable('next_action')" href="../../../../_variables/next_action.html">$next_action</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('highest_publish_status')" href="../../../../_variables/highest_publish_status.html">$highest_publish_status</a>; <span class="comment">// needs to be passed out for echo_publishnowbutton_js( $action )</span>
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>  <span class="comment">    // ---------- PREVIEW ----------</span>
<a name="l1695"><span class="linenum">1695</span></a>      if( !<a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../../../_variables/inskin.html">$inskin</a> || <a class="var it6806" onMouseOver="hilite(6806)" onMouseOut="lolite()" onClick="logVariable('display_preview')" href="../../../../_variables/display_preview.html">$display_preview</a> )
<a name="l1696"><span class="linenum">1696</span></a>      {
<a name="l1697"><span class="linenum">1697</span></a>          <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('url_same_protocol')" href="../../../../_functions/url_same_protocol.html" onMouseOver="funcPopup(event,'url_same_protocol')">url_same_protocol</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' ) ); <span class="comment">// was dynurl</span>
<a name="l1698"><span class="linenum">1698</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('button')" href="../../../../_functions/button.html" onMouseOver="funcPopup(event,'button')">button</a>( array( 'button', '', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Preview'), 'PreviewButton', '<a class="function" onClick="logFunction('b2edit_open_preview')" href="../../../../_functions/b2edit_open_preview.html" onMouseOver="funcPopup(event,'b2edit_open_preview')">b2edit_open_preview</a>(this.form, \''.<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../../_variables/url.html">$url</a>.'\');' ) );
<a name="l1699"><span class="linenum">1699</span></a>      }
<a name="l1700"><span class="linenum">1700</span></a>  
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment">    // ---------- SAVE ----------</span>
<a name="l1702"><span class="linenum">1702</span></a>      <a class="var it242" onMouseOver="hilite(242)" onMouseOut="lolite()" onClick="logVariable('next_action')" href="../../../../_variables/next_action.html">$next_action</a> = (<a class="var it337" onMouseOver="hilite(337)" onMouseOut="lolite()" onClick="logVariable('creating')" href="../../../../_variables/creating.html">$creating</a> ? 'create' : 'update');
<a name="l1703"><span class="linenum">1703</span></a>      if( !<a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../../../_variables/inskin.html">$inskin</a> )
<a name="l1704"><span class="linenum">1704</span></a>      { // Show Save &amp; Edit only on admin mode
<a name="l1705"><span class="linenum">1705</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('submit')" href="../../../../_functions/submit.html" onMouseOver="funcPopup(event,'submit')">submit</a>( array( 'actionArray['.<a class="var it242" onMouseOver="hilite(242)" onMouseOut="lolite()" onClick="logVariable('next_action')" href="../../../../_variables/next_action.html">$next_action</a>.'_edit]', <span class="comment">/* TRANS: This is the value of an input submit button */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Save &amp; edit'), 'SaveEditButton' ) );
<a name="l1706"><span class="linenum">1706</span></a>      }
<a name="l1707"><span class="linenum">1707</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('submit')" href="../../../../_functions/submit.html" onMouseOver="funcPopup(event,'submit')">submit</a>( array( 'actionArray['.<a class="var it242" onMouseOver="hilite(242)" onMouseOut="lolite()" onClick="logVariable('next_action')" href="../../../../_variables/next_action.html">$next_action</a>.']', <span class="comment">/* TRANS: This is the value of an input submit button */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Save Changes!'), 'SaveButton' ) );
<a name="l1708"><span class="linenum">1708</span></a>  
<a name="l1709"><span class="linenum">1709</span></a>      <a class="function" onClick="logFunction('list')" href="../../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>( <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('highest_publish_status')" href="../../../../_variables/highest_publish_status.html">$highest_publish_status</a>, <a class="var it3142" onMouseOver="hilite(3142)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../../_variables/publish_text.html">$publish_text</a> ) = <a class="function" onClick="logFunction('get_highest_publish_status')" href="../../../../_functions/get_highest_publish_status.html" onMouseOver="funcPopup(event,'get_highest_publish_status')">get_highest_publish_status</a>( 'post', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l1710"><span class="linenum">1710</span></a>      if( !isset( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('status')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> ) )
<a name="l1711"><span class="linenum">1711</span></a>      {
<a name="l1712"><span class="linenum">1712</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('status')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> = <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('highest_publish_status')" href="../../../../_variables/highest_publish_status.html">$highest_publish_status</a>;
<a name="l1713"><span class="linenum">1713</span></a>      }
<a name="l1714"><span class="linenum">1714</span></a>      if( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('status')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> != <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('highest_publish_status')" href="../../../../_variables/highest_publish_status.html">$highest_publish_status</a> )
<a name="l1715"><span class="linenum">1715</span></a>      {    // Only allow publishing if in draft mode. Other modes are too special to run the risk of 1 click publication.
<a name="l1716"><span class="linenum">1716</span></a>          <a class="var it3145" onMouseOver="hilite(3145)" onMouseOut="lolite()" onClick="logVariable('publish_style')" href="../../../../_variables/publish_style.html">$publish_style</a> = 'display: inline';
<a name="l1717"><span class="linenum">1717</span></a>      }
<a name="l1718"><span class="linenum">1718</span></a>      else
<a name="l1719"><span class="linenum">1719</span></a>      {
<a name="l1720"><span class="linenum">1720</span></a>          <a class="var it3145" onMouseOver="hilite(3145)" onMouseOut="lolite()" onClick="logVariable('publish_style')" href="../../../../_variables/publish_style.html">$publish_style</a> = 'display: none';
<a name="l1721"><span class="linenum">1721</span></a>      }
<a name="l1722"><span class="linenum">1722</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'publish_status', <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('highest_publish_status')" href="../../../../_variables/highest_publish_status.html">$highest_publish_status</a> );
<a name="l1723"><span class="linenum">1723</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('submit')" href="../../../../_functions/submit.html" onMouseOver="funcPopup(event,'submit')">submit</a>( array(
<a name="l1724"><span class="linenum">1724</span></a>          'actionArray['.<a class="var it242" onMouseOver="hilite(242)" onMouseOut="lolite()" onClick="logVariable('next_action')" href="../../../../_variables/next_action.html">$next_action</a>.'_publish]',
<a name="l1725"><span class="linenum">1725</span></a>          <span class="comment">/* TRANS: This is the value of an input submit button */</span> <a class="var it3142" onMouseOver="hilite(3142)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../../_variables/publish_text.html">$publish_text</a>,
<a name="l1726"><span class="linenum">1726</span></a>          'SaveButton',
<a name="l1727"><span class="linenum">1727</span></a>          '',
<a name="l1728"><span class="linenum">1728</span></a>          <a class="var it3145" onMouseOver="hilite(3145)" onMouseOut="lolite()" onClick="logVariable('publish_style')" href="../../../../_variables/publish_style.html">$publish_style</a>
<a name="l1729"><span class="linenum">1729</span></a>      ) );
<a name="l1730"><span class="linenum">1730</span></a>  }
<a name="l1731"><span class="linenum">1731</span></a>  
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment">/**</span>
<a name="l1733"><span class="linenum">1733</span></a>  <span class="comment"> * Output JavaScript code to dynamically show popup files attachment window</span>
<a name="l1734"><span class="linenum">1734</span></a>  <span class="comment"> *</span>
<a name="l1735"><span class="linenum">1735</span></a>  <span class="comment"> * This is a part of the process that makes it smoother to &quot;Save &amp; start attaching files&quot;.</span>
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment"> */</span>
<a name="l1737"><span class="linenum">1737</span></a>  function <a class="function" onClick="logFunction('echo_attaching_files_button_js')" href="../../../../_functions/echo_attaching_files_button_js.html" onMouseOver="funcPopup(event,'echo_attaching_files_button_js')">echo_attaching_files_button_js</a>( &amp; <a class="var it986" onMouseOver="hilite(986)" onMouseOut="lolite()" onClick="logVariable('iframe_name')" href="../../../../_variables/iframe_name.html">$iframe_name</a> )
<a name="l1738"><span class="linenum">1738</span></a>  {
<a name="l1739"><span class="linenum">1739</span></a>      global <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>;
<a name="l1740"><span class="linenum">1740</span></a>      global <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>;
<a name="l1741"><span class="linenum">1741</span></a>      <a class="var it986" onMouseOver="hilite(986)" onMouseOut="lolite()" onClick="logVariable('iframe_name')" href="../../../../_variables/iframe_name.html">$iframe_name</a> = 'attach_'.<a class="function" onClick="logFunction('generate_random_key')" href="../../../../_functions/generate_random_key.html" onMouseOver="funcPopup(event,'generate_random_key')">generate_random_key</a>( 16 );
<a name="l1742"><span class="linenum">1742</span></a>      ?&gt;
<a name="l1743"><span class="linenum">1743</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l1744"><span class="linenum">1744</span></a>              <a class="function" onClick="logFunction('pop_up_window')" href="../../../../_functions/pop_up_window.html" onMouseOver="funcPopup(event,'pop_up_window')">pop_up_window</a>( '&lt;?php echo <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>; ?&gt;?ctrl=files&amp;mode=upload&amp;iframe_name=&lt;?php echo <a class="var it986" onMouseOver="hilite(986)" onMouseOut="lolite()" onClick="logVariable('iframe_name')" href="../../../../_variables/iframe_name.html">$iframe_name</a> ?&gt;&amp;fm_mode=link_object&amp;link_type=item&amp;link_object_ID=&lt;?php echo <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>?&gt;', 'fileman_upload', 1000 );
<a name="l1745"><span class="linenum">1745</span></a>      &lt;/script&gt;
<a name="l1746"><span class="linenum">1746</span></a>      &lt;?php
<a name="l1747"><span class="linenum">1747</span></a>  }
<a name="l1748"><span class="linenum">1748</span></a>  
<a name="l1749"><span class="linenum">1749</span></a>  <span class="comment">/**</span>
<a name="l1750"><span class="linenum">1750</span></a>  <span class="comment"> * Output JavaScript code to set hidden field is_attachments</span>
<a name="l1751"><span class="linenum">1751</span></a>  <span class="comment"> * which indicates that we must show attachments files popup window</span>
<a name="l1752"><span class="linenum">1752</span></a>  <span class="comment"> *</span>
<a name="l1753"><span class="linenum">1753</span></a>  <span class="comment"> * This is a part of the process that makes it smoother to &quot;Save &amp; start attaching files&quot;.</span>
<a name="l1754"><span class="linenum">1754</span></a>  <span class="comment"> */</span>
<a name="l1755"><span class="linenum">1755</span></a>  function <a class="function" onClick="logFunction('echo_set_is_attachments')" href="../../../../_functions/echo_set_is_attachments.html" onMouseOver="funcPopup(event,'echo_set_is_attachments')">echo_set_is_attachments</a>()
<a name="l1756"><span class="linenum">1756</span></a>  {
<a name="l1757"><span class="linenum">1757</span></a>      ?&gt;
<a name="l1758"><span class="linenum">1758</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l1759"><span class="linenum">1759</span></a>          jQuery( '#itemform_createlinks td input' ).click( function()
<a name="l1760"><span class="linenum">1760</span></a>          {
<a name="l1761"><span class="linenum">1761</span></a>              jQuery( 'input[name=is_attachments]' ).attr(&quot;value&quot;, &quot;true&quot;);
<a name="l1762"><span class="linenum">1762</span></a>          } );
<a name="l1763"><span class="linenum">1763</span></a>      &lt;/script&gt;
<a name="l1764"><span class="linenum">1764</span></a>      &lt;?php
<a name="l1765"><span class="linenum">1765</span></a>  }
<a name="l1766"><span class="linenum">1766</span></a>  
<a name="l1767"><span class="linenum">1767</span></a>  <span class="comment">/**</span>
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment"> * Output JavaScript code for &quot;Add/Link files&quot; link</span>
<a name="l1769"><span class="linenum">1769</span></a>  <span class="comment"> *</span>
<a name="l1770"><span class="linenum">1770</span></a>  <span class="comment"> * This is a part of the process that makes it smoother to &quot;Save &amp; start attaching files&quot;.</span>
<a name="l1771"><span class="linenum">1771</span></a>  <span class="comment"> */</span>
<a name="l1772"><span class="linenum">1772</span></a>  function <a class="function" onClick="logFunction('echo_link_files_js')" href="../../../../_functions/echo_link_files_js.html" onMouseOver="funcPopup(event,'echo_link_files_js')">echo_link_files_js</a>()
<a name="l1773"><span class="linenum">1773</span></a>  {
<a name="l1774"><span class="linenum">1774</span></a>      ?&gt;
<a name="l1775"><span class="linenum">1775</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l1776"><span class="linenum">1776</span></a>              jQuery( '#title_file_add' ).click( function()
<a name="l1777"><span class="linenum">1777</span></a>              {
<a name="l1778"><span class="linenum">1778</span></a>                  jQuery( 'input[name=is_attachments]' ).attr(&quot;value&quot;, &quot;true&quot;);
<a name="l1779"><span class="linenum">1779</span></a>                  jQuery( '#itemform_createlinks input[name=&quot;actionArray[create_edit]&quot;]' ).click();
<a name="l1780"><span class="linenum">1780</span></a>              } );
<a name="l1781"><span class="linenum">1781</span></a>      &lt;/script&gt;
<a name="l1782"><span class="linenum">1782</span></a>      &lt;?php
<a name="l1783"><span class="linenum">1783</span></a>  }
<a name="l1784"><span class="linenum">1784</span></a>  
<a name="l1785"><span class="linenum">1785</span></a>  <span class="comment">/**</span>
<a name="l1786"><span class="linenum">1786</span></a>  <span class="comment"> * Output JavaScript code to dynamically show or hide the &quot;Publish NOW!&quot;</span>
<a name="l1787"><span class="linenum">1787</span></a>  <span class="comment"> * button depending on the selected post status.</span>
<a name="l1788"><span class="linenum">1788</span></a>  <span class="comment"> *</span>
<a name="l1789"><span class="linenum">1789</span></a>  <span class="comment"> * This function is used by the simple and expert write screens.</span>
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment"> */</span>
<a name="l1791"><span class="linenum">1791</span></a>  function <a class="function" onClick="logFunction('echo_publishnowbutton_js')" href="../../../../_functions/echo_publishnowbutton_js.html" onMouseOver="funcPopup(event,'echo_publishnowbutton_js')">echo_publishnowbutton_js</a>()
<a name="l1792"><span class="linenum">1792</span></a>  {
<a name="l1793"><span class="linenum">1793</span></a>      global <a class="var it242" onMouseOver="hilite(242)" onMouseOut="lolite()" onClick="logVariable('next_action')" href="../../../../_variables/next_action.html">$next_action</a>, <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('highest_publish_status')" href="../../../../_variables/highest_publish_status.html">$highest_publish_status</a>;
<a name="l1794"><span class="linenum">1794</span></a>      ?&gt;
<a name="l1795"><span class="linenum">1795</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l1796"><span class="linenum">1796</span></a>          jQuery( '#itemform_visibility input[type=radio]' ).click( function()
<a name="l1797"><span class="linenum">1797</span></a>          {
<a name="l1798"><span class="linenum">1798</span></a>              var publishnow_btn = jQuery( '.edit_actions input[name=&quot;actionArray[&lt;?php echo <a class="var it242" onMouseOver="hilite(242)" onMouseOut="lolite()" onClick="logVariable('next_action')" href="../../../../_variables/next_action.html">$next_action</a>; ?&gt;_publish]&quot;]' );
<a name="l1799"><span class="linenum">1799</span></a>              var public_status = '&lt;?php echo <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('highest_publish_status')" href="../../../../_variables/highest_publish_status.html">$highest_publish_status</a>; ?&gt;';
<a name="l1800"><span class="linenum">1800</span></a>  
<a name="l1801"><span class="linenum">1801</span></a>              if( this.value == public_status || public_status == 'draft' )
<a name="l1802"><span class="linenum">1802</span></a>              {    // Hide the &quot;Publish NOW !&quot; button:
<a name="l1803"><span class="linenum">1803</span></a>                  publishnow_btn.css( 'display', 'none' );
<a name="l1804"><span class="linenum">1804</span></a>              }
<a name="l1805"><span class="linenum">1805</span></a>              else
<a name="l1806"><span class="linenum">1806</span></a>              {    // Show the button:
<a name="l1807"><span class="linenum">1807</span></a>                  publishnow_btn.css( 'display', 'inline' );
<a name="l1808"><span class="linenum">1808</span></a>              }
<a name="l1809"><span class="linenum">1809</span></a>          } );
<a name="l1810"><span class="linenum">1810</span></a>      &lt;/script&gt;
<a name="l1811"><span class="linenum">1811</span></a>      &lt;?php
<a name="l1812"><span class="linenum">1812</span></a>  }
<a name="l1813"><span class="linenum">1813</span></a>  
<a name="l1814"><span class="linenum">1814</span></a>  
<a name="l1815"><span class="linenum">1815</span></a>  <span class="comment">/**</span>
<a name="l1816"><span class="linenum">1816</span></a>  <span class="comment"> * Output Javascript for tags autocompletion.</span>
<a name="l1817"><span class="linenum">1817</span></a>  <span class="comment"> * @todo dh&gt; a more facebook like widget would be: http://plugins.jquery.com/project/facelist</span>
<a name="l1818"><span class="linenum">1818</span></a>  <span class="comment"> *           &quot;ListBuilder&quot; is being planned for jQuery UI: http://wiki.jqueryui.com/ListBuilder</span>
<a name="l1819"><span class="linenum">1819</span></a>  <span class="comment"> *</span>
<a name="l1820"><span class="linenum">1820</span></a>  <span class="comment"> * @param array Tags</span>
<a name="l1821"><span class="linenum">1821</span></a>  <span class="comment"> */</span>
<a name="l1822"><span class="linenum">1822</span></a>  function <a class="function" onClick="logFunction('echo_autocomplete_tags')" href="../../../../_functions/echo_autocomplete_tags.html" onMouseOver="funcPopup(event,'echo_autocomplete_tags')">echo_autocomplete_tags</a>( <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../../_variables/tags.html">$tags</a> = array() )
<a name="l1823"><span class="linenum">1823</span></a>  {
<a name="l1824"><span class="linenum">1824</span></a>      global <a class="var it308" onMouseOver="hilite(308)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../../../_variables/htsrv_url.html">$htsrv_url</a>;
<a name="l1825"><span class="linenum">1825</span></a>  
<a name="l1826"><span class="linenum">1826</span></a>  <span class="comment">    // Initialize an array to pre-fill the tags input</span>
<a name="l1827"><span class="linenum">1827</span></a>      <a class="var it6807" onMouseOver="hilite(6807)" onMouseOut="lolite()" onClick="logVariable('prefilled_tags')" href="../../../../_variables/prefilled_tags.html">$prefilled_tags</a> = array();
<a name="l1828"><span class="linenum">1828</span></a>      if( !empty( <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../../_variables/tags.html">$tags</a> ) )
<a name="l1829"><span class="linenum">1829</span></a>      {
<a name="l1830"><span class="linenum">1830</span></a>          foreach( <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../../_variables/tags.html">$tags</a> as <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('tag_name')" href="../../../../_variables/tag_name.html">$tag_name</a> )
<a name="l1831"><span class="linenum">1831</span></a>          {
<a name="l1832"><span class="linenum">1832</span></a>              <a class="var it6807" onMouseOver="hilite(6807)" onMouseOut="lolite()" onClick="logVariable('prefilled_tags')" href="../../../../_variables/prefilled_tags.html">$prefilled_tags</a>[] = array( 'id' =&gt; <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('tag_name')" href="../../../../_variables/tag_name.html">$tag_name</a>, 'title' =&gt; <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('tag_name')" href="../../../../_variables/tag_name.html">$tag_name</a> );
<a name="l1833"><span class="linenum">1833</span></a>          }
<a name="l1834"><span class="linenum">1834</span></a>      }
<a name="l1835"><span class="linenum">1835</span></a>  
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment">    //echo &lt;&lt;&lt;EOD</span>
<a name="l1837"><span class="linenum">1837</span></a>  ?&gt;
<a name="l1838"><span class="linenum">1838</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l1839"><span class="linenum">1839</span></a>      (function($){
<a name="l1840"><span class="linenum">1840</span></a>          jQuery(function() {
<a name="l1841"><span class="linenum">1841</span></a>              jQuery( '#item_tags' ).tokenInput(
<a name="l1842"><span class="linenum">1842</span></a>                  '&lt;?php echo <a class="var it308" onMouseOver="hilite(308)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../../../_variables/htsrv_url.html">$htsrv_url</a>.'async.php?action=get_tags' ?&gt;',
<a name="l1843"><span class="linenum">1843</span></a>                  {
<a name="l1844"><span class="linenum">1844</span></a>                      theme: 'facebook',
<a name="l1845"><span class="linenum">1845</span></a>                      queryParam: 'term',
<a name="l1846"><span class="linenum">1846</span></a>                      propertyToSearch: 'title',
<a name="l1847"><span class="linenum">1847</span></a>                      tokenValue: 'title',
<a name="l1848"><span class="linenum">1848</span></a>                      preventDuplicates: true,
<a name="l1849"><span class="linenum">1849</span></a>                      prePopulate: &lt;?php echo <a class="function" onClick="logFunction('evo_json_encode')" href="../../../../_functions/evo_json_encode.html" onMouseOver="funcPopup(event,'evo_json_encode')">evo_json_encode</a>( <a class="var it6807" onMouseOver="hilite(6807)" onMouseOut="lolite()" onClick="logVariable('prefilled_tags')" href="../../../../_variables/prefilled_tags.html">$prefilled_tags</a> ) ?&gt;,
<a name="l1850"><span class="linenum">1850</span></a>                      hintText: '&lt;?php echo <a class="function" onClick="logFunction('TS_')" href="../../../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Type in a tag') ?&gt;',
<a name="l1851"><span class="linenum">1851</span></a>                      noResultsText: '&lt;?php echo <a class="function" onClick="logFunction('TS_')" href="../../../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('No results') ?&gt;',
<a name="l1852"><span class="linenum">1852</span></a>                      searchingText: '&lt;?php echo <a class="function" onClick="logFunction('TS_')" href="../../../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Searching...') ?&gt;'
<a name="l1853"><span class="linenum">1853</span></a>                  }
<a name="l1854"><span class="linenum">1854</span></a>              );
<a name="l1855"><span class="linenum">1855</span></a>              &lt;?php
<a name="l1856"><span class="linenum">1856</span></a>  <span class="comment">                // Don't submit a form by Enter when user is editing the tags</span>
<a name="l1857"><span class="linenum">1857</span></a>                  echo <a class="function" onClick="logFunction('get_prevent_key_enter_js')" href="../../../../_functions/get_prevent_key_enter_js.html" onMouseOver="funcPopup(event,'get_prevent_key_enter_js')">get_prevent_key_enter_js</a>( '#token-input-item_tags' );
<a name="l1858"><span class="linenum">1858</span></a>              ?&gt;
<a name="l1859"><span class="linenum">1859</span></a>          });
<a name="l1860"><span class="linenum">1860</span></a>      })(jQuery);
<a name="l1861"><span class="linenum">1861</span></a>      &lt;/script&gt;
<a name="l1862"><span class="linenum">1862</span></a>  &lt;?php
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment">//EOD;</span>
<a name="l1864"><span class="linenum">1864</span></a>  }
<a name="l1865"><span class="linenum">1865</span></a>  
<a name="l1866"><span class="linenum">1866</span></a>  
<a name="l1867"><span class="linenum">1867</span></a>  <span class="comment">/**</span>
<a name="l1868"><span class="linenum">1868</span></a>  <span class="comment"> * Assert that the supplied post type can be used by the current user in</span>
<a name="l1869"><span class="linenum">1869</span></a>  <span class="comment"> * the post's extra categories' context.</span>
<a name="l1870"><span class="linenum">1870</span></a>  <span class="comment"> *</span>
<a name="l1871"><span class="linenum">1871</span></a>  <span class="comment"> * @param array The extra cats of the post.</span>
<a name="l1872"><span class="linenum">1872</span></a>  <span class="comment"> */</span>
<a name="l1873"><span class="linenum">1873</span></a>  function <a class="function" onClick="logFunction('check_perm_posttype')" href="../../../../_functions/check_perm_posttype.html" onMouseOver="funcPopup(event,'check_perm_posttype')">check_perm_posttype</a>( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> )
<a name="l1874"><span class="linenum">1874</span></a>  {
<a name="l1875"><span class="linenum">1875</span></a>      global <a class="var it4528" onMouseOver="hilite(4528)" onMouseOut="lolite()" onClick="logVariable('posttypes_perms')" href="../../../../_variables/posttypes_perms.html">$posttypes_perms</a>, <a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../../_variables/item_typ_ID.html">$item_typ_ID</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l1876"><span class="linenum">1876</span></a>  
<a name="l1877"><span class="linenum">1877</span></a>      static <a class="var it5318" onMouseOver="hilite(5318)" onMouseOut="lolite()" onClick="logVariable('posttype2perm')" href="../../../../_variables/posttype2perm.html">$posttype2perm</a> = NULL;
<a name="l1878"><span class="linenum">1878</span></a>      if( <a class="var it5318" onMouseOver="hilite(5318)" onMouseOut="lolite()" onClick="logVariable('posttype2perm')" href="../../../../_variables/posttype2perm.html">$posttype2perm</a> === NULL )
<a name="l1879"><span class="linenum">1879</span></a>      {    // &quot;Reverse&quot; the <a class="var it4528" onMouseOver="hilite(4528)" onMouseOut="lolite()" onClick="logVariable('posttypes_perms')" href="../../../../_variables/posttypes_perms.html">$posttypes_perms</a> array:
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment">        // Tblue&gt; Possibly bloat; this function usually is invoked only</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment">        //        once, thus it *may* be better to simply iterate through</span>
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment">        //        the $posttypes_perms array every time and look for the</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment">        //        post type ID.</span>
<a name="l1884"><span class="linenum">1884</span></a>          foreach( <a class="var it4528" onMouseOver="hilite(4528)" onMouseOut="lolite()" onClick="logVariable('posttypes_perms')" href="../../../../_variables/posttypes_perms.html">$posttypes_perms</a> as <a class="var it5315" onMouseOver="hilite(5315)" onMouseOut="lolite()" onClick="logVariable('l_permname')" href="../../../../_variables/l_permname.html">$l_permname</a> =&gt; <a class="var it5316" onMouseOver="hilite(5316)" onMouseOut="lolite()" onClick="logVariable('l_posttypes')" href="../../../../_variables/l_posttypes.html">$l_posttypes</a> )
<a name="l1885"><span class="linenum">1885</span></a>          {
<a name="l1886"><span class="linenum">1886</span></a>              foreach( <a class="var it5316" onMouseOver="hilite(5316)" onMouseOut="lolite()" onClick="logVariable('l_posttypes')" href="../../../../_variables/l_posttypes.html">$l_posttypes</a> as <a class="var it5317" onMouseOver="hilite(5317)" onMouseOut="lolite()" onClick="logVariable('ll_posttype')" href="../../../../_variables/ll_posttype.html">$ll_posttype</a> )
<a name="l1887"><span class="linenum">1887</span></a>              {
<a name="l1888"><span class="linenum">1888</span></a>                  <a class="var it5318" onMouseOver="hilite(5318)" onMouseOut="lolite()" onClick="logVariable('posttype2perm')" href="../../../../_variables/posttype2perm.html">$posttype2perm</a>[<a class="var it5317" onMouseOver="hilite(5317)" onMouseOut="lolite()" onClick="logVariable('ll_posttype')" href="../../../../_variables/ll_posttype.html">$ll_posttype</a>] = <a class="var it5315" onMouseOver="hilite(5315)" onMouseOut="lolite()" onClick="logVariable('l_permname')" href="../../../../_variables/l_permname.html">$l_permname</a>;
<a name="l1889"><span class="linenum">1889</span></a>              }
<a name="l1890"><span class="linenum">1890</span></a>          }
<a name="l1891"><span class="linenum">1891</span></a>      }
<a name="l1892"><span class="linenum">1892</span></a>  
<a name="l1893"><span class="linenum">1893</span></a>  <span class="comment">    // Tblue&gt; Usually, when this function is invoked, item_typ_ID is not</span>
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment">    //        loaded yet... If it is, it doesn't get loaded again anyway.</span>
<a name="l1895"><span class="linenum">1895</span></a>  <span class="comment">    //        Item::load_from_Request() uses param() again, in case this</span>
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment">    //        function wasn't called yet when load_from_Request() gets</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment">    //        called (does this happen?).</span>
<a name="l1898"><span class="linenum">1898</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_typ_ID', 'integer', true <span class="comment">/* require input */</span> );
<a name="l1899"><span class="linenum">1899</span></a>      if( ! isset( <a class="var it5318" onMouseOver="hilite(5318)" onMouseOut="lolite()" onClick="logVariable('posttype2perm')" href="../../../../_variables/posttype2perm.html">$posttype2perm</a>[<a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../../_variables/item_typ_ID.html">$item_typ_ID</a>] ) )
<a name="l1900"><span class="linenum">1900</span></a>      {    // Allow usage:
<a name="l1901"><span class="linenum">1901</span></a>          return;
<a name="l1902"><span class="linenum">1902</span></a>      }
<a name="l1903"><span class="linenum">1903</span></a>  
<a name="l1904"><span class="linenum">1904</span></a>  <span class="comment">    // Check permission:</span>
<a name="l1905"><span class="linenum">1905</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'cats_'.<a class="var it5318" onMouseOver="hilite(5318)" onMouseOut="lolite()" onClick="logVariable('posttype2perm')" href="../../../../_variables/posttype2perm.html">$posttype2perm</a>[<a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('item_typ_ID')" href="../../../../_variables/item_typ_ID.html">$item_typ_ID</a>], 'edit', true <span class="comment">/* assert */</span>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> );
<a name="l1906"><span class="linenum">1906</span></a>  }
<a name="l1907"><span class="linenum">1907</span></a>  
<a name="l1908"><span class="linenum">1908</span></a>  
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment">/**</span>
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment"> * Mass create.</span>
<a name="l1911"><span class="linenum">1911</span></a>  <span class="comment"> *</span>
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment"> * Create multiple posts from one post.</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment"> *</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment"> * @param object Instance of Item class (by reference).</span>
<a name="l1915"><span class="linenum">1915</span></a>  <span class="comment"> * @param boolean true if create paragraphs at each line break</span>
<a name="l1916"><span class="linenum">1916</span></a>  <span class="comment"> * @return array The posts, by reference.</span>
<a name="l1917"><span class="linenum">1917</span></a>  <span class="comment"> */</span>
<a name="l1918"><span class="linenum">1918</span></a>  function &amp; create_multiple_posts( &amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>, <a class="var it6808" onMouseOver="hilite(6808)" onMouseOut="lolite()" onClick="logVariable('linebreak')" href="../../../../_variables/linebreak.html">$linebreak</a> = false )
<a name="l1919"><span class="linenum">1919</span></a>  {
<a name="l1920"><span class="linenum">1920</span></a>      <a class="var it1981" onMouseOver="hilite(1981)" onMouseOut="lolite()" onClick="logVariable('Items')" href="../../../../_variables/Items.html">$Items</a> = array();
<a name="l1921"><span class="linenum">1921</span></a>  
<a name="l1922"><span class="linenum">1922</span></a>  <span class="comment">    // Parse text into titles and contents:</span>
<a name="l1923"><span class="linenum">1923</span></a>      <a class="var it6809" onMouseOver="hilite(6809)" onMouseOut="lolite()" onClick="logVariable('current_title')" href="../../../../_variables/current_title.html">$current_title</a> = '';
<a name="l1924"><span class="linenum">1924</span></a>      <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('current_data')" href="../../../../_variables/current_data.html">$current_data</a>  = '';
<a name="l1925"><span class="linenum">1925</span></a>  
<a name="l1926"><span class="linenum">1926</span></a>  <span class="comment">    // Append a newline to the end of the original contents to make sure</span>
<a name="l1927"><span class="linenum">1927</span></a>  <span class="comment">    // that the last item gets created - this saves a second loop.</span>
<a name="l1928"><span class="linenum">1928</span></a>      foreach( <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( &quot;\n&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('content')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/content.html">content</a>.&quot;\n&quot; ) as <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a> )
<a name="l1929"><span class="linenum">1929</span></a>      {
<a name="l1930"><span class="linenum">1930</span></a>          <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>( <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a> ) );
<a name="l1931"><span class="linenum">1931</span></a>  
<a name="l1932"><span class="linenum">1932</span></a>          if( <a class="var it6809" onMouseOver="hilite(6809)" onMouseOut="lolite()" onClick="logVariable('current_title')" href="../../../../_variables/current_title.html">$current_title</a> === '' &amp;&amp; <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a> !== '' )
<a name="l1933"><span class="linenum">1933</span></a>          {    // We got a new title:
<a name="l1934"><span class="linenum">1934</span></a>              <a class="var it6809" onMouseOver="hilite(6809)" onMouseOut="lolite()" onClick="logVariable('current_title')" href="../../../../_variables/current_title.html">$current_title</a> = <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a>;
<a name="l1935"><span class="linenum">1935</span></a>          }
<a name="l1936"><span class="linenum">1936</span></a>          elseif( <a class="var it6809" onMouseOver="hilite(6809)" onMouseOut="lolite()" onClick="logVariable('current_title')" href="../../../../_variables/current_title.html">$current_title</a> !== '' )
<a name="l1937"><span class="linenum">1937</span></a>          {
<a name="l1938"><span class="linenum">1938</span></a>              if( <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a> !== '' )
<a name="l1939"><span class="linenum">1939</span></a>              {    // We got a new paragraph for this post:
<a name="l1940"><span class="linenum">1940</span></a>                  if( <a class="var it6808" onMouseOver="hilite(6808)" onMouseOut="lolite()" onClick="logVariable('linebreak')" href="../../../../_variables/linebreak.html">$linebreak</a> )
<a name="l1941"><span class="linenum">1941</span></a>                  {
<a name="l1942"><span class="linenum">1942</span></a>                      <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('current_data')" href="../../../../_variables/current_data.html">$current_data</a> .= '&lt;p&gt;'.<a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a>.'&lt;/p&gt;';
<a name="l1943"><span class="linenum">1943</span></a>                  }
<a name="l1944"><span class="linenum">1944</span></a>                  else
<a name="l1945"><span class="linenum">1945</span></a>                  {
<a name="l1946"><span class="linenum">1946</span></a>                      <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('current_data')" href="../../../../_variables/current_data.html">$current_data</a> .= <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a>.' ';
<a name="l1947"><span class="linenum">1947</span></a>                  }
<a name="l1948"><span class="linenum">1948</span></a>              }
<a name="l1949"><span class="linenum">1949</span></a>              else
<a name="l1950"><span class="linenum">1950</span></a>              {    // End of this post:
<a name="l1951"><span class="linenum">1951</span></a>                  <a class="var it6209" onMouseOver="hilite(6209)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../../../_variables/new_Item.html">$new_Item</a> = <a class="function" onClick="logFunction('duplicate')" href="../../../../_functions/duplicate.html" onMouseOver="funcPopup(event,'duplicate')">duplicate</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> );
<a name="l1952"><span class="linenum">1952</span></a>  
<a name="l1953"><span class="linenum">1953</span></a>                  <a class="var it6209" onMouseOver="hilite(6209)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../../../_variables/new_Item.html">$new_Item</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'title', 'string', <a class="var it6809" onMouseOver="hilite(6809)" onMouseOut="lolite()" onClick="logVariable('current_title')" href="../../../../_variables/current_title.html">$current_title</a> );
<a name="l1954"><span class="linenum">1954</span></a>  
<a name="l1955"><span class="linenum">1955</span></a>                  if( !<a class="var it6808" onMouseOver="hilite(6808)" onMouseOut="lolite()" onClick="logVariable('linebreak')" href="../../../../_variables/linebreak.html">$linebreak</a> )
<a name="l1956"><span class="linenum">1956</span></a>                  {
<a name="l1957"><span class="linenum">1957</span></a>                      <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('current_data')" href="../../../../_variables/current_data.html">$current_data</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('current_data')" href="../../../../_variables/current_data.html">$current_data</a> );
<a name="l1958"><span class="linenum">1958</span></a>                  }
<a name="l1959"><span class="linenum">1959</span></a>                  <a class="var it6209" onMouseOver="hilite(6209)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../../../_variables/new_Item.html">$new_Item</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'content', 'string', <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('current_data')" href="../../../../_variables/current_data.html">$current_data</a> );
<a name="l1960"><span class="linenum">1960</span></a>  
<a name="l1961"><span class="linenum">1961</span></a>                  <a class="var it1981" onMouseOver="hilite(1981)" onMouseOut="lolite()" onClick="logVariable('Items')" href="../../../../_variables/Items.html">$Items</a>[] = <a class="var it6209" onMouseOver="hilite(6209)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../../../_variables/new_Item.html">$new_Item</a>;
<a name="l1962"><span class="linenum">1962</span></a>  
<a name="l1963"><span class="linenum">1963</span></a>                  <a class="var it6809" onMouseOver="hilite(6809)" onMouseOut="lolite()" onClick="logVariable('current_title')" href="../../../../_variables/current_title.html">$current_title</a> = '';
<a name="l1964"><span class="linenum">1964</span></a>                  <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('current_data')" href="../../../../_variables/current_data.html">$current_data</a>  = '';
<a name="l1965"><span class="linenum">1965</span></a>              }
<a name="l1966"><span class="linenum">1966</span></a>          }
<a name="l1967"><span class="linenum">1967</span></a>      }
<a name="l1968"><span class="linenum">1968</span></a>  
<a name="l1969"><span class="linenum">1969</span></a>      return <a class="var it1981" onMouseOver="hilite(1981)" onMouseOut="lolite()" onClick="logVariable('Items')" href="../../../../_variables/Items.html">$Items</a>;
<a name="l1970"><span class="linenum">1970</span></a>  }
<a name="l1971"><span class="linenum">1971</span></a>  
<a name="l1972"><span class="linenum">1972</span></a>  <span class="comment">/**</span>
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment"> *</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment"> * Check if new category needs to be created or not (after post editing).</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment"> * If the new category radio is checked creates the new category and set it to post category</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment"> * If the new category checkbox is checked creates the new category and set it to post extracat</span>
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment"> *</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment"> * Function is called during post creation or post update</span>
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment"> *</span>
<a name="l1980"><span class="linenum">1980</span></a>  <span class="comment"> * @param Object Post category (by reference).</span>
<a name="l1981"><span class="linenum">1981</span></a>  <span class="comment"> * @param Array Post extra categories (by reference).</span>
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment"> * @return boolean true - if there is no new category, or new category created succesfull; false if new category creation failed.</span>
<a name="l1983"><span class="linenum">1983</span></a>  <span class="comment"> */</span>
<a name="l1984"><span class="linenum">1984</span></a>  function <a class="function" onClick="logFunction('check_categories')" href="../../../../_functions/check_categories.html" onMouseOver="funcPopup(event,'check_categories')">check_categories</a>( &amp; <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>, &amp; <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> )
<a name="l1985"><span class="linenum">1985</span></a>  {
<a name="l1986"><span class="linenum">1986</span></a>      <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_category', 'integer', -1 );
<a name="l1987"><span class="linenum">1987</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_extracats', 'array/integer', array() );
<a name="l1988"><span class="linenum">1988</span></a>      global <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l1989"><span class="linenum">1989</span></a>  
<a name="l1990"><span class="linenum">1990</span></a>      <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'chapters/model/_chaptercache.class.php', 'ChapterCache' );
<a name="l1991"><span class="linenum">1991</span></a>      <a class="var it4909" onMouseOver="hilite(4909)" onMouseOut="lolite()" onClick="logVariable('GenericCategoryCache')" href="../../../../_variables/GenericCategoryCache.html">$GenericCategoryCache</a> = &amp; get_ChapterCache();
<a name="l1992"><span class="linenum">1992</span></a>  
<a name="l1993"><span class="linenum">1993</span></a>      if( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> == -1 )
<a name="l1994"><span class="linenum">1994</span></a>      { // no main cat select
<a name="l1995"><span class="linenum">1995</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> ) == 0 )
<a name="l1996"><span class="linenum">1996</span></a>          { // no extra cat select
<a name="l1997"><span class="linenum">1997</span></a>              <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_default_cat_ID')" href="../../../../_functions/get_default_cat_id.html" onMouseOver="funcPopup(event,'get_default_cat_id')">get_default_cat_ID</a>();
<a name="l1998"><span class="linenum">1998</span></a>          }
<a name="l1999"><span class="linenum">1999</span></a>          else
<a name="l2000"><span class="linenum">2000</span></a>          { // first extracat become main_cat
<a name="l2001"><span class="linenum">2001</span></a>              if( <a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>() &gt;= 2 )
<a name="l2002"><span class="linenum">2002</span></a>              { // allow moving posts between different blogs is enabled, set first selected cat as main cat
<a name="l2003"><span class="linenum">2003</span></a>                  <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> = <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[0];
<a name="l2004"><span class="linenum">2004</span></a>              }
<a name="l2005"><span class="linenum">2005</span></a>              else
<a name="l2006"><span class="linenum">2006</span></a>              { // allow moving posts between different blogs is disabled - we need a main cat from <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>
<a name="l2007"><span class="linenum">2007</span></a>                  foreach( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> as <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a> )
<a name="l2008"><span class="linenum">2008</span></a>                  {
<a name="l2009"><span class="linenum">2009</span></a>                      if( <a class="function" onClick="logFunction('get_catblog')" href="../../../../_functions/get_catblog.html" onMouseOver="funcPopup(event,'get_catblog')">get_catblog</a>( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a> ) != <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> )
<a name="l2010"><span class="linenum">2010</span></a>                      { // this cat is not from <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>
<a name="l2011"><span class="linenum">2011</span></a>                          continue;
<a name="l2012"><span class="linenum">2012</span></a>                      }
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment">                    // set first cat from $blog as main cat</span>
<a name="l2014"><span class="linenum">2014</span></a>                      <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> = <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a>;
<a name="l2015"><span class="linenum">2015</span></a>                      break;
<a name="l2016"><span class="linenum">2016</span></a>                  }
<a name="l2017"><span class="linenum">2017</span></a>                  if( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> == -1 )
<a name="l2018"><span class="linenum">2018</span></a>                  { // wasn't cat selected from <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> select a default as main cat
<a name="l2019"><span class="linenum">2019</span></a>                      <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_default_cat_ID')" href="../../../../_functions/get_default_cat_id.html" onMouseOver="funcPopup(event,'get_default_cat_id')">get_default_cat_ID</a>();
<a name="l2020"><span class="linenum">2020</span></a>                  }
<a name="l2021"><span class="linenum">2021</span></a>              }
<a name="l2022"><span class="linenum">2022</span></a>          }
<a name="l2023"><span class="linenum">2023</span></a>          if( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> )
<a name="l2024"><span class="linenum">2024</span></a>          { // If main cat is not a new category, and has been autoselected
<a name="l2025"><span class="linenum">2025</span></a>              <a class="var it5493" onMouseOver="hilite(5493)" onMouseOut="lolite()" onClick="logVariable('GenericCategory')" href="../../../../_variables/GenericCategory.html">$GenericCategory</a> = &amp; <a class="var it4909" onMouseOver="hilite(4909)" onMouseOut="lolite()" onClick="logVariable('GenericCategoryCache')" href="../../../../_variables/GenericCategoryCache.html">$GenericCategoryCache</a>-&gt;get_by_ID( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> );
<a name="l2026"><span class="linenum">2026</span></a>              <a class="var it6811" onMouseOver="hilite(6811)" onMouseOut="lolite()" onClick="logVariable('post_category_Blog')" href="../../../../_variables/post_category_Blog.html">$post_category_Blog</a> = <a class="var it5493" onMouseOver="hilite(5493)" onMouseOut="lolite()" onClick="logVariable('GenericCategory')" href="../../../../_variables/GenericCategory.html">$GenericCategory</a>-&gt;get_Blog();
<a name="l2027"><span class="linenum">2027</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The main category for this post has been automatically set to &quot;%s&quot; (Blog &quot;%s&quot;)'),
<a name="l2028"><span class="linenum">2028</span></a>                  <a class="var it5493" onMouseOver="hilite(5493)" onMouseOut="lolite()" onClick="logVariable('GenericCategory')" href="../../../../_variables/GenericCategory.html">$GenericCategory</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), <a class="var it6811" onMouseOver="hilite(6811)" onMouseOut="lolite()" onClick="logVariable('post_category_Blog')" href="../../../../_variables/post_category_Blog.html">$post_category_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'name') ), 'warning' );
<a name="l2029"><span class="linenum">2029</span></a>          }
<a name="l2030"><span class="linenum">2030</span></a>      }
<a name="l2031"><span class="linenum">2031</span></a>  
<a name="l2032"><span class="linenum">2032</span></a>      if( ! <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> || <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 0, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> ) )    // if category key is 0 =&gt; means it is a new category
<a name="l2033"><span class="linenum">2033</span></a>      {
<a name="l2034"><span class="linenum">2034</span></a>          global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l2035"><span class="linenum">2035</span></a>          if( ! <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_cats', '', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l2036"><span class="linenum">2036</span></a>          {    // Current user cannot add a categories for this blog
<a name="l2037"><span class="linenum">2037</span></a>              <a class="function" onClick="logFunction('check_categories_nosave')" href="../../../../_functions/check_categories_nosave.html" onMouseOver="funcPopup(event,'check_categories_nosave')">check_categories_nosave</a>( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>); <span class="comment">// set up the category parameters</span>
<a name="l2038"><span class="linenum">2038</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You are not allowed to create a new category.'), 'error' );
<a name="l2039"><span class="linenum">2039</span></a>              return false;
<a name="l2040"><span class="linenum">2040</span></a>          }
<a name="l2041"><span class="linenum">2041</span></a>  
<a name="l2042"><span class="linenum">2042</span></a>          <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('category_name')" href="../../../../_variables/category_name.html">$category_name</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'category_name', 'string', true );
<a name="l2043"><span class="linenum">2043</span></a>          if( <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('category_name')" href="../../../../_variables/category_name.html">$category_name</a> == '' )
<a name="l2044"><span class="linenum">2044</span></a>          {
<a name="l2045"><span class="linenum">2045</span></a>              <a class="var it6812" onMouseOver="hilite(6812)" onMouseOut="lolite()" onClick="logVariable('show_error')" href="../../../../_variables/show_error.html">$show_error</a> = ! <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>;    <span class="comment">// new main category without name =&gt; error message</span>
<a name="l2046"><span class="linenum">2046</span></a>              <a class="function" onClick="logFunction('check_categories_nosave')" href="../../../../_functions/check_categories_nosave.html" onMouseOver="funcPopup(event,'check_categories_nosave')">check_categories_nosave</a>( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>); <span class="comment">// set up the category parameters</span>
<a name="l2047"><span class="linenum">2047</span></a>              if( <a class="var it6812" onMouseOver="hilite(6812)" onMouseOut="lolite()" onClick="logVariable('show_error')" href="../../../../_variables/show_error.html">$show_error</a> )
<a name="l2048"><span class="linenum">2048</span></a>              { // new main category without name
<a name="l2049"><span class="linenum">2049</span></a>                  <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please provide a name for new category.'), 'error' );
<a name="l2050"><span class="linenum">2050</span></a>                  return false;
<a name="l2051"><span class="linenum">2051</span></a>              }
<a name="l2052"><span class="linenum">2052</span></a>              return true;
<a name="l2053"><span class="linenum">2053</span></a>          }
<a name="l2054"><span class="linenum">2054</span></a>  
<a name="l2055"><span class="linenum">2055</span></a>          <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('new_GenericCategory')" href="../../../../_variables/new_GenericCategory.html">$new_GenericCategory</a> = &amp; <a class="var it4909" onMouseOver="hilite(4909)" onMouseOut="lolite()" onClick="logVariable('GenericCategoryCache')" href="../../../../_variables/GenericCategoryCache.html">$GenericCategoryCache</a>-&gt;new_obj( NULL, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> );    <span class="comment">// create new category object</span>
<a name="l2056"><span class="linenum">2056</span></a>          <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('new_GenericCategory')" href="../../../../_variables/new_GenericCategory.html">$new_GenericCategory</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'name', <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('category_name')" href="../../../../_variables/category_name.html">$category_name</a> );
<a name="l2057"><span class="linenum">2057</span></a>          if( <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('new_GenericCategory')" href="../../../../_variables/new_GenericCategory.html">$new_GenericCategory</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() !== false )
<a name="l2058"><span class="linenum">2058</span></a>          {
<a name="l2059"><span class="linenum">2059</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New category created.'), 'success' );
<a name="l2060"><span class="linenum">2060</span></a>              if( ! <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> ) // if new category is main category
<a name="l2061"><span class="linenum">2061</span></a>              {
<a name="l2062"><span class="linenum">2062</span></a>                  <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> = <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('new_GenericCategory')" href="../../../../_variables/new_GenericCategory.html">$new_GenericCategory</a>-&gt;<a onClick="logVariable('ID')" class="var it9189" onMouseOver="hilite(9189)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;    <span class="comment">// set the new ID</span>
<a name="l2063"><span class="linenum">2063</span></a>              }
<a name="l2064"><span class="linenum">2064</span></a>  
<a name="l2065"><span class="linenum">2065</span></a>              if( ( <a class="var it6813" onMouseOver="hilite(6813)" onMouseOut="lolite()" onClick="logVariable('extracat_key')" href="../../../../_variables/extracat_key.html">$extracat_key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>( '0', <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> ) ) || <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[0] == '0' )
<a name="l2066"><span class="linenum">2066</span></a>              {
<a name="l2067"><span class="linenum">2067</span></a>                  if( <a class="var it6813" onMouseOver="hilite(6813)" onMouseOut="lolite()" onClick="logVariable('extracat_key')" href="../../../../_variables/extracat_key.html">$extracat_key</a> )
<a name="l2068"><span class="linenum">2068</span></a>                  {
<a name="l2069"><span class="linenum">2069</span></a>                      unset(<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[<a class="var it6813" onMouseOver="hilite(6813)" onMouseOut="lolite()" onClick="logVariable('extracat_key')" href="../../../../_variables/extracat_key.html">$extracat_key</a>]);
<a name="l2070"><span class="linenum">2070</span></a>                  }
<a name="l2071"><span class="linenum">2071</span></a>                  else
<a name="l2072"><span class="linenum">2072</span></a>                  {
<a name="l2073"><span class="linenum">2073</span></a>                      unset(<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[0]);
<a name="l2074"><span class="linenum">2074</span></a>                  }
<a name="l2075"><span class="linenum">2075</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[] = <a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('new_GenericCategory')" href="../../../../_variables/new_GenericCategory.html">$new_GenericCategory</a>-&gt;<a onClick="logVariable('ID')" class="var it9189" onMouseOver="hilite(9189)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l2076"><span class="linenum">2076</span></a>              }
<a name="l2077"><span class="linenum">2077</span></a>  
<a name="l2078"><span class="linenum">2078</span></a>              <a class="var it4909" onMouseOver="hilite(4909)" onMouseOut="lolite()" onClick="logVariable('GenericCategoryCache')" href="../../../../_variables/GenericCategoryCache.html">$GenericCategoryCache</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it6482" onMouseOver="hilite(6482)" onMouseOut="lolite()" onClick="logVariable('new_GenericCategory')" href="../../../../_variables/new_GenericCategory.html">$new_GenericCategory</a>);
<a name="l2079"><span class="linenum">2079</span></a>          }
<a name="l2080"><span class="linenum">2080</span></a>          else
<a name="l2081"><span class="linenum">2081</span></a>          {
<a name="l2082"><span class="linenum">2082</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New category creation failed.'), 'error' );
<a name="l2083"><span class="linenum">2083</span></a>              return false;
<a name="l2084"><span class="linenum">2084</span></a>          }
<a name="l2085"><span class="linenum">2085</span></a>      }
<a name="l2086"><span class="linenum">2086</span></a>  
<a name="l2087"><span class="linenum">2087</span></a>      if( <a class="function" onClick="logFunction('get_allow_cross_posting')" href="../../../../_functions/get_allow_cross_posting.html" onMouseOver="funcPopup(event,'get_allow_cross_posting')">get_allow_cross_posting</a>() == 2 )
<a name="l2088"><span class="linenum">2088</span></a>      { // Extra cats in different blogs is disabled, check selected extra cats
<a name="l2089"><span class="linenum">2089</span></a>          <a class="var it6814" onMouseOver="hilite(6814)" onMouseOut="lolite()" onClick="logVariable('post_category_blog')" href="../../../../_variables/post_category_blog.html">$post_category_blog</a> = <a class="function" onClick="logFunction('get_catblog')" href="../../../../_functions/get_catblog.html" onMouseOver="funcPopup(event,'get_catblog')">get_catblog</a>( <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> );
<a name="l2090"><span class="linenum">2090</span></a>          <a class="var it6815" onMouseOver="hilite(6815)" onMouseOut="lolite()" onClick="logVariable('ignored_cats')" href="../../../../_variables/ignored_cats.html">$ignored_cats</a> = '';
<a name="l2091"><span class="linenum">2091</span></a>          foreach( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> as <a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a> =&gt; <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a> )
<a name="l2092"><span class="linenum">2092</span></a>          {
<a name="l2093"><span class="linenum">2093</span></a>              if( <a class="function" onClick="logFunction('get_catblog')" href="../../../../_functions/get_catblog.html" onMouseOver="funcPopup(event,'get_catblog')">get_catblog</a>( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a> ) != <a class="var it6814" onMouseOver="hilite(6814)" onMouseOut="lolite()" onClick="logVariable('post_category_blog')" href="../../../../_variables/post_category_blog.html">$post_category_blog</a> )
<a name="l2094"><span class="linenum">2094</span></a>              { // this cat is not from main category blog, it has to be ingnored
<a name="l2095"><span class="linenum">2095</span></a>                  <a class="var it5493" onMouseOver="hilite(5493)" onMouseOut="lolite()" onClick="logVariable('GenericCategory')" href="../../../../_variables/GenericCategory.html">$GenericCategory</a> = &amp; <a class="var it4909" onMouseOver="hilite(4909)" onMouseOut="lolite()" onClick="logVariable('GenericCategoryCache')" href="../../../../_variables/GenericCategoryCache.html">$GenericCategoryCache</a>-&gt;get_by_ID( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../../_variables/cat.html">$cat</a> );
<a name="l2096"><span class="linenum">2096</span></a>                  <a class="var it6815" onMouseOver="hilite(6815)" onMouseOut="lolite()" onClick="logVariable('ignored_cats')" href="../../../../_variables/ignored_cats.html">$ignored_cats</a> = <a class="var it6815" onMouseOver="hilite(6815)" onMouseOut="lolite()" onClick="logVariable('ignored_cats')" href="../../../../_variables/ignored_cats.html">$ignored_cats</a>.<a class="var it5493" onMouseOver="hilite(5493)" onMouseOut="lolite()" onClick="logVariable('GenericCategory')" href="../../../../_variables/GenericCategory.html">$GenericCategory</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>().', ';
<a name="l2097"><span class="linenum">2097</span></a>                  unset( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[<a class="var it963" onMouseOver="hilite(963)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>] );
<a name="l2098"><span class="linenum">2098</span></a>              }
<a name="l2099"><span class="linenum">2099</span></a>          }
<a name="l2100"><span class="linenum">2100</span></a>          <a class="var it6816" onMouseOver="hilite(6816)" onMouseOut="lolite()" onClick="logVariable('ingnored_length')" href="../../../../_variables/ingnored_length.html">$ingnored_length</a> = strlen( <a class="var it6815" onMouseOver="hilite(6815)" onMouseOut="lolite()" onClick="logVariable('ignored_cats')" href="../../../../_variables/ignored_cats.html">$ignored_cats</a> );
<a name="l2101"><span class="linenum">2101</span></a>          if( <a class="var it6816" onMouseOver="hilite(6816)" onMouseOut="lolite()" onClick="logVariable('ingnored_length')" href="../../../../_variables/ingnored_length.html">$ingnored_length</a> &gt; 2 )
<a name="l2102"><span class="linenum">2102</span></a>          { // ingnore list is not empty
<a name="l2103"><span class="linenum">2103</span></a>              global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>;
<a name="l2104"><span class="linenum">2104</span></a>              if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'options', 'view', false ) )
<a name="l2105"><span class="linenum">2105</span></a>              {
<a name="l2106"><span class="linenum">2106</span></a>                  <a class="var it6817" onMouseOver="hilite(6817)" onMouseOut="lolite()" onClick="logVariable('cross_posting_text')" href="../../../../_variables/cross_posting_text.html">$cross_posting_text</a> = '&lt;a href=&quot;'.<a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=collections&amp;amp;tab=blog_settings&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('cross-posting is disabled').'&lt;/a&gt;';
<a name="l2107"><span class="linenum">2107</span></a>              }
<a name="l2108"><span class="linenum">2108</span></a>              else
<a name="l2109"><span class="linenum">2109</span></a>              {
<a name="l2110"><span class="linenum">2110</span></a>                  <a class="var it6817" onMouseOver="hilite(6817)" onMouseOut="lolite()" onClick="logVariable('cross_posting_text')" href="../../../../_variables/cross_posting_text.html">$cross_posting_text</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('cross-posting is disabled');
<a name="l2111"><span class="linenum">2111</span></a>              }
<a name="l2112"><span class="linenum">2112</span></a>              <a class="var it6815" onMouseOver="hilite(6815)" onMouseOut="lolite()" onClick="logVariable('ignored_cats')" href="../../../../_variables/ignored_cats.html">$ignored_cats</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it6815" onMouseOver="hilite(6815)" onMouseOut="lolite()" onClick="logVariable('ignored_cats')" href="../../../../_variables/ignored_cats.html">$ignored_cats</a>, 0, <a class="var it6816" onMouseOver="hilite(6816)" onMouseOut="lolite()" onClick="logVariable('ingnored_length')" href="../../../../_variables/ingnored_length.html">$ingnored_length</a> - 2 );
<a name="l2113"><span class="linenum">2113</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The category selection &quot;%s&quot; was ignored since %s'),
<a name="l2114"><span class="linenum">2114</span></a>                  <a class="var it6815" onMouseOver="hilite(6815)" onMouseOut="lolite()" onClick="logVariable('ignored_cats')" href="../../../../_variables/ignored_cats.html">$ignored_cats</a>, <a class="var it6817" onMouseOver="hilite(6817)" onMouseOut="lolite()" onClick="logVariable('cross_posting_text')" href="../../../../_variables/cross_posting_text.html">$cross_posting_text</a> ), 'warning' );
<a name="l2115"><span class="linenum">2115</span></a>          }
<a name="l2116"><span class="linenum">2116</span></a>      }
<a name="l2117"><span class="linenum">2117</span></a>  
<a name="l2118"><span class="linenum">2118</span></a>  <span class="comment">    // make sure main cat is in extracat list and there are no duplicates</span>
<a name="l2119"><span class="linenum">2119</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[] = <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>;
<a name="l2120"><span class="linenum">2120</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> );
<a name="l2121"><span class="linenum">2121</span></a>  
<a name="l2122"><span class="linenum">2122</span></a>      return true;
<a name="l2123"><span class="linenum">2123</span></a>  }
<a name="l2124"><span class="linenum">2124</span></a>  
<a name="l2125"><span class="linenum">2125</span></a>  <span class="comment">/*</span>
<a name="l2126"><span class="linenum">2126</span></a>  <span class="comment"> * Set up params for new category creation</span>
<a name="l2127"><span class="linenum">2127</span></a>  <span class="comment"> * Set main category to default category, if the current category does not exist yet</span>
<a name="l2128"><span class="linenum">2128</span></a>  <span class="comment"> * Delete non existing category from extracats</span>
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment"> * It is called after simple/expert tab switch, and can be called during post creation or modification</span>
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment"> *</span>
<a name="l2131"><span class="linenum">2131</span></a>  <span class="comment"> * @param Object Post category (by reference).</span>
<a name="l2132"><span class="linenum">2132</span></a>  <span class="comment"> * @param Array Post extra categories (by reference).</span>
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment"> *</span>
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment"> */</span>
<a name="l2135"><span class="linenum">2135</span></a>  function <a class="function" onClick="logFunction('check_categories_nosave')" href="../../../../_functions/check_categories_nosave.html" onMouseOver="funcPopup(event,'check_categories_nosave')">check_categories_nosave</a>( &amp; <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a>, &amp; <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> )
<a name="l2136"><span class="linenum">2136</span></a>  {
<a name="l2137"><span class="linenum">2137</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l2138"><span class="linenum">2138</span></a>      <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_category', 'integer', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_default_cat_ID')" href="../../../../_functions/get_default_cat_id.html" onMouseOver="funcPopup(event,'get_default_cat_id')">get_default_cat_ID</a>() );
<a name="l2139"><span class="linenum">2139</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_extracats', 'array/integer', array() );
<a name="l2140"><span class="linenum">2140</span></a>  
<a name="l2141"><span class="linenum">2141</span></a>      if( ! <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> )    // if category key is 0 =&gt; means it is a new category
<a name="l2142"><span class="linenum">2142</span></a>      {
<a name="l2143"><span class="linenum">2143</span></a>          <a class="var it28" onMouseOver="hilite(28)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../../_variables/post_category.html">$post_category</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_default_cat_ID')" href="../../../../_functions/get_default_cat_id.html" onMouseOver="funcPopup(event,'get_default_cat_id')">get_default_cat_ID</a>();
<a name="l2144"><span class="linenum">2144</span></a>          <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_maincat', 'boolean', 1 );
<a name="l2145"><span class="linenum">2145</span></a>      }
<a name="l2146"><span class="linenum">2146</span></a>  
<a name="l2147"><span class="linenum">2147</span></a>      if( ! empty( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>) &amp;&amp; ( ( <a class="var it6813" onMouseOver="hilite(6813)" onMouseOut="lolite()" onClick="logVariable('extracat_key')" href="../../../../_variables/extracat_key.html">$extracat_key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>( '0', <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a> ) ) || <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[0] == '0' ) )
<a name="l2148"><span class="linenum">2148</span></a>      {
<a name="l2149"><span class="linenum">2149</span></a>          <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_extracat', 'boolean', 1 );
<a name="l2150"><span class="linenum">2150</span></a>          if( <a class="var it6813" onMouseOver="hilite(6813)" onMouseOut="lolite()" onClick="logVariable('extracat_key')" href="../../../../_variables/extracat_key.html">$extracat_key</a> )
<a name="l2151"><span class="linenum">2151</span></a>          {
<a name="l2152"><span class="linenum">2152</span></a>              unset(<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[<a class="var it6813" onMouseOver="hilite(6813)" onMouseOut="lolite()" onClick="logVariable('extracat_key')" href="../../../../_variables/extracat_key.html">$extracat_key</a>]);
<a name="l2153"><span class="linenum">2153</span></a>          }
<a name="l2154"><span class="linenum">2154</span></a>          else
<a name="l2155"><span class="linenum">2155</span></a>          {
<a name="l2156"><span class="linenum">2156</span></a>              unset(<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('post_extracats')" href="../../../../_variables/post_extracats.html">$post_extracats</a>[0]);
<a name="l2157"><span class="linenum">2157</span></a>          }
<a name="l2158"><span class="linenum">2158</span></a>      }
<a name="l2159"><span class="linenum">2159</span></a>  }
<a name="l2160"><span class="linenum">2160</span></a>  
<a name="l2161"><span class="linenum">2161</span></a>  <span class="comment">/*</span>
<a name="l2162"><span class="linenum">2162</span></a>  <span class="comment"> * check the new category radio button, if the new category text has changed</span>
<a name="l2163"><span class="linenum">2163</span></a>  <span class="comment"> */</span>
<a name="l2164"><span class="linenum">2164</span></a>  function <a class="function" onClick="logFunction('echo_onchange_newcat')" href="../../../../_functions/echo_onchange_newcat.html" onMouseOver="funcPopup(event,'echo_onchange_newcat')">echo_onchange_newcat</a>()
<a name="l2165"><span class="linenum">2165</span></a>  {
<a name="l2166"><span class="linenum">2166</span></a>  ?&gt;
<a name="l2167"><span class="linenum">2167</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l2168"><span class="linenum">2168</span></a>          jQuery( '#new_category_name' ).keypress( function()
<a name="l2169"><span class="linenum">2169</span></a>          {
<a name="l2170"><span class="linenum">2170</span></a>              var newcategory_radio = jQuery( '#sel_maincat_new' );
<a name="l2171"><span class="linenum">2171</span></a>              if( ! newcategory_radio.attr('checked') )
<a name="l2172"><span class="linenum">2172</span></a>              {
<a name="l2173"><span class="linenum">2173</span></a>                  newcategory_radio.attr('checked', true);
<a name="l2174"><span class="linenum">2174</span></a>                  jQuery( '#sel_extracat_new' ).attr('checked', true);
<a name="l2175"><span class="linenum">2175</span></a>              }
<a name="l2176"><span class="linenum">2176</span></a>          } );
<a name="l2177"><span class="linenum">2177</span></a>      &lt;/script&gt;
<a name="l2178"><span class="linenum">2178</span></a>  &lt;?php
<a name="l2179"><span class="linenum">2179</span></a>  }
<a name="l2180"><span class="linenum">2180</span></a>  
<a name="l2181"><span class="linenum">2181</span></a>  <span class="comment">/**</span>
<a name="l2182"><span class="linenum">2182</span></a>  <span class="comment"> * Automatically update the slug field when a title is typed.</span>
<a name="l2183"><span class="linenum">2183</span></a>  <span class="comment"> *</span>
<a name="l2184"><span class="linenum">2184</span></a>  <span class="comment"> * Variable slug_changed hold true if slug was manually changed</span>
<a name="l2185"><span class="linenum">2185</span></a>  <span class="comment"> * (we already do not need autocomplete) and false in other case.</span>
<a name="l2186"><span class="linenum">2186</span></a>  <span class="comment"> */</span>
<a name="l2187"><span class="linenum">2187</span></a>  function <a class="function" onClick="logFunction('echo_slug_filler')" href="../../../../_functions/echo_slug_filler.html" onMouseOver="funcPopup(event,'echo_slug_filler')">echo_slug_filler</a>()
<a name="l2188"><span class="linenum">2188</span></a>  {
<a name="l2189"><span class="linenum">2189</span></a>  ?&gt;
<a name="l2190"><span class="linenum">2190</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l2191"><span class="linenum">2191</span></a>          var slug_changed = false;
<a name="l2192"><span class="linenum">2192</span></a>          jQuery( '#post_title' ).keyup( function()
<a name="l2193"><span class="linenum">2193</span></a>          {
<a name="l2194"><span class="linenum">2194</span></a>              if(!slug_changed)
<a name="l2195"><span class="linenum">2195</span></a>              {
<a name="l2196"><span class="linenum">2196</span></a>                  jQuery( '#post_urltitle' ).val( jQuery( '#post_title' ).val() );
<a name="l2197"><span class="linenum">2197</span></a>              }
<a name="l2198"><span class="linenum">2198</span></a>          } );
<a name="l2199"><span class="linenum">2199</span></a>  
<a name="l2200"><span class="linenum">2200</span></a>          jQuery( '#post_urltitle' ).change( function()
<a name="l2201"><span class="linenum">2201</span></a>          {
<a name="l2202"><span class="linenum">2202</span></a>              slug_changed = true;
<a name="l2203"><span class="linenum">2203</span></a>              jQuery( '[name=slug_changed]' ).val( 1 );
<a name="l2204"><span class="linenum">2204</span></a>          } );
<a name="l2205"><span class="linenum">2205</span></a>      &lt;/script&gt;
<a name="l2206"><span class="linenum">2206</span></a>  &lt;?php
<a name="l2207"><span class="linenum">2207</span></a>  }
<a name="l2208"><span class="linenum">2208</span></a>  
<a name="l2209"><span class="linenum">2209</span></a>  
<a name="l2210"><span class="linenum">2210</span></a>  <span class="comment">/**</span>
<a name="l2211"><span class="linenum">2211</span></a>  <span class="comment"> * Set slug_changed to 1 for cases when it is not needed trim slug</span>
<a name="l2212"><span class="linenum">2212</span></a>  <span class="comment"> */</span>
<a name="l2213"><span class="linenum">2213</span></a>  function <a class="function" onClick="logFunction('echo_set_slug_changed')" href="../../../../_functions/echo_set_slug_changed.html" onMouseOver="funcPopup(event,'echo_set_slug_changed')">echo_set_slug_changed</a>()
<a name="l2214"><span class="linenum">2214</span></a>  {
<a name="l2215"><span class="linenum">2215</span></a>  ?&gt;
<a name="l2216"><span class="linenum">2216</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l2217"><span class="linenum">2217</span></a>          jQuery( '[name=slug_changed]' ).val( 1 );
<a name="l2218"><span class="linenum">2218</span></a>      &lt;/script&gt;
<a name="l2219"><span class="linenum">2219</span></a>  &lt;?php
<a name="l2220"><span class="linenum">2220</span></a>  }
<a name="l2221"><span class="linenum">2221</span></a>  
<a name="l2222"><span class="linenum">2222</span></a>  
<a name="l2223"><span class="linenum">2223</span></a>  <span class="comment">/**</span>
<a name="l2224"><span class="linenum">2224</span></a>  <span class="comment"> * Handle show_comments radioboxes on item list full view</span>
<a name="l2225"><span class="linenum">2225</span></a>  <span class="comment"> */</span>
<a name="l2226"><span class="linenum">2226</span></a>  function <a class="function" onClick="logFunction('echo_show_comments_changed')" href="../../../../_functions/echo_show_comments_changed.html" onMouseOver="funcPopup(event,'echo_show_comments_changed')">echo_show_comments_changed</a>()
<a name="l2227"><span class="linenum">2227</span></a>  {
<a name="l2228"><span class="linenum">2228</span></a>  ?&gt;
<a name="l2229"><span class="linenum">2229</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l2230"><span class="linenum">2230</span></a>          jQuery( '[name ^= show_comments]' ).change( function()
<a name="l2231"><span class="linenum">2231</span></a>          {
<a name="l2232"><span class="linenum">2232</span></a>              var item_id = jQuery('#comments_container').attr('value');
<a name="l2233"><span class="linenum">2233</span></a>              if( ! <a class="function" onClick="logFunction('isDefined')" href="../../../../_functions/isdefined.html" onMouseOver="funcPopup(event,'isdefined')">isDefined</a>( item_id) )
<a name="l2234"><span class="linenum">2234</span></a>              { // if item_id is not defined, we have to show all comments from current blog
<a name="l2235"><span class="linenum">2235</span></a>                  item_id = -1;
<a name="l2236"><span class="linenum">2236</span></a>              }
<a name="l2237"><span class="linenum">2237</span></a>              <a class="function" onClick="logFunction('refresh_item_comments')" href="../../../../_functions/refresh_item_comments.html" onMouseOver="funcPopup(event,'refresh_item_comments')">refresh_item_comments</a>( item_id, 1 );
<a name="l2238"><span class="linenum">2238</span></a>          } );
<a name="l2239"><span class="linenum">2239</span></a>      &lt;/script&gt;
<a name="l2240"><span class="linenum">2240</span></a>  &lt;?php
<a name="l2241"><span class="linenum">2241</span></a>  }
<a name="l2242"><span class="linenum">2242</span></a>  
<a name="l2243"><span class="linenum">2243</span></a>  
<a name="l2244"><span class="linenum">2244</span></a>  <span class="comment">/**</span>
<a name="l2245"><span class="linenum">2245</span></a>  <span class="comment"> * Make location fields are not required for special posts</span>
<a name="l2246"><span class="linenum">2246</span></a>  <span class="comment"> */</span>
<a name="l2247"><span class="linenum">2247</span></a>  function <a class="function" onClick="logFunction('echo_onchange_item_type_js')" href="../../../../_functions/echo_onchange_item_type_js.html" onMouseOver="funcPopup(event,'echo_onchange_item_type_js')">echo_onchange_item_type_js</a>()
<a name="l2248"><span class="linenum">2248</span></a>  {
<a name="l2249"><span class="linenum">2249</span></a>      global <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('posttypes_specialtypes')" href="../../../../_variables/posttypes_specialtypes.html">$posttypes_specialtypes</a>;
<a name="l2250"><span class="linenum">2250</span></a>  
<a name="l2251"><span class="linenum">2251</span></a>  ?&gt;
<a name="l2252"><span class="linenum">2252</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l2253"><span class="linenum">2253</span></a>          var item_special_types = [&lt;?php echo <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('posttypes_specialtypes')" href="../../../../_variables/posttypes_specialtypes.html">$posttypes_specialtypes</a> ) ?&gt;];
<a name="l2254"><span class="linenum">2254</span></a>          jQuery( '#item_typ_ID' ).change( function()
<a name="l2255"><span class="linenum">2255</span></a>          {
<a name="l2256"><span class="linenum">2256</span></a>              for( var i in item_special_types )
<a name="l2257"><span class="linenum">2257</span></a>              {
<a name="l2258"><span class="linenum">2258</span></a>                  if( item_special_types[i] == jQuery( this ).val() )
<a name="l2259"><span class="linenum">2259</span></a>                  {
<a name="l2260"><span class="linenum">2260</span></a>                      jQuery( '#item_locations' ).addClass( 'not_required' );
<a name="l2261"><span class="linenum">2261</span></a>                      return true;
<a name="l2262"><span class="linenum">2262</span></a>                  }
<a name="l2263"><span class="linenum">2263</span></a>              }
<a name="l2264"><span class="linenum">2264</span></a>              jQuery( '#item_locations' ).removeClass( 'not_required' );
<a name="l2265"><span class="linenum">2265</span></a>          } );
<a name="l2266"><span class="linenum">2266</span></a>      &lt;/script&gt;
<a name="l2267"><span class="linenum">2267</span></a>  &lt;?php
<a name="l2268"><span class="linenum">2268</span></a>  }
<a name="l2269"><span class="linenum">2269</span></a>  
<a name="l2270"><span class="linenum">2270</span></a>  
<a name="l2271"><span class="linenum">2271</span></a>  <span class="comment">/**</span>
<a name="l2272"><span class="linenum">2272</span></a>  <span class="comment"> * Display CommentList with the given filters</span>
<a name="l2273"><span class="linenum">2273</span></a>  <span class="comment"> *</span>
<a name="l2274"><span class="linenum">2274</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l2275"><span class="linenum">2275</span></a>  <span class="comment"> * @param integer Item ID</span>
<a name="l2276"><span class="linenum">2276</span></a>  <span class="comment"> * @param array Status filters</span>
<a name="l2277"><span class="linenum">2277</span></a>  <span class="comment"> * @param integer Limit</span>
<a name="l2278"><span class="linenum">2278</span></a>  <span class="comment"> * @param array Comments IDs string to exclude from the list</span>
<a name="l2279"><span class="linenum">2279</span></a>  <span class="comment"> * @param string Filterset name</span>
<a name="l2280"><span class="linenum">2280</span></a>  <span class="comment"> * @param string Expiry status: 'all', 'active', 'expired'</span>
<a name="l2281"><span class="linenum">2281</span></a>  <span class="comment"> */</span>
<a name="l2282"><span class="linenum">2282</span></a>  function <a class="function" onClick="logFunction('echo_item_comments')" href="../../../../_functions/echo_item_comments.html" onMouseOver="funcPopup(event,'echo_item_comments')">echo_item_comments</a>( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../../_variables/blog_ID.html">$blog_ID</a>, <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../../_variables/statuses.html">$statuses</a> = NULL, <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> = 1, <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../../../_variables/limit.html">$limit</a> = 20, <a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('comment_IDs')" href="../../../../_variables/comment_IDs.html">$comment_IDs</a> = array(), <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('filterset_name')" href="../../../../_variables/filterset_name.html">$filterset_name</a> = '', <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../../../_variables/expiry_status.html">$expiry_status</a> = 'active' )
<a name="l2283"><span class="linenum">2283</span></a>  {
<a name="l2284"><span class="linenum">2284</span></a>      global <a class="var it246" onMouseOver="hilite(246)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../../../_variables/inc_path.html">$inc_path</a>, <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../../../_variables/status_list.html">$status_list</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>;
<a name="l2285"><span class="linenum">2285</span></a>  
<a name="l2286"><span class="linenum">2286</span></a>      <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l2287"><span class="linenum">2287</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../../_variables/blog_ID.html">$blog_ID</a>, false, false );
<a name="l2288"><span class="linenum">2288</span></a>  
<a name="l2289"><span class="linenum">2289</span></a>      global <a class="var it673" onMouseOver="hilite(673)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../../_variables/CommentList.html">$CommentList</a>;
<a name="l2290"><span class="linenum">2290</span></a>      <a class="var it673" onMouseOver="hilite(673)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../../_variables/CommentList.html">$CommentList</a> = <span class="keyword">new </span><a class="class" onClick="logClass('CommentList2')" href="../../../../_classes/commentlist2.html" onMouseOver="classPopup(event,'commentlist2')">CommentList2</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../../../_variables/limit.html">$limit</a>, 'CommentCache', '', <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('filterset_name')" href="../../../../_variables/filterset_name.html">$filterset_name</a> );
<a name="l2291"><span class="linenum">2291</span></a>  
<a name="l2292"><span class="linenum">2292</span></a>      <a class="var it2230" onMouseOver="hilite(2230)" onMouseOut="lolite()" onClick="logVariable('exlude_ID_list')" href="../../../../_variables/exlude_ID_list.html">$exlude_ID_list</a> = NULL;
<a name="l2293"><span class="linenum">2293</span></a>      if( !empty(<a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('comment_IDs')" href="../../../../_variables/comment_IDs.html">$comment_IDs</a>) )
<a name="l2294"><span class="linenum">2294</span></a>      {
<a name="l2295"><span class="linenum">2295</span></a>          <a class="var it2230" onMouseOver="hilite(2230)" onMouseOut="lolite()" onClick="logVariable('exlude_ID_list')" href="../../../../_variables/exlude_ID_list.html">$exlude_ID_list</a> = '-'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( &quot;,&quot;, <a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('comment_IDs')" href="../../../../_variables/comment_IDs.html">$comment_IDs</a> );
<a name="l2296"><span class="linenum">2296</span></a>      }
<a name="l2297"><span class="linenum">2297</span></a>  
<a name="l2298"><span class="linenum">2298</span></a>      if( empty( <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../../_variables/statuses.html">$statuses</a> ) )
<a name="l2299"><span class="linenum">2299</span></a>      {
<a name="l2300"><span class="linenum">2300</span></a>          <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../../_variables/statuses.html">$statuses</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'keys', array( 'redirected', 'trash' ) );
<a name="l2301"><span class="linenum">2301</span></a>      }
<a name="l2302"><span class="linenum">2302</span></a>  
<a name="l2303"><span class="linenum">2303</span></a>      if( <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../../../_variables/expiry_status.html">$expiry_status</a> == 'all' )
<a name="l2304"><span class="linenum">2304</span></a>      { // Display all comments
<a name="l2305"><span class="linenum">2305</span></a>          <a class="var it672" onMouseOver="hilite(672)" onMouseOut="lolite()" onClick="logVariable('expiry_statuses')" href="../../../../_variables/expiry_statuses.html">$expiry_statuses</a> = array( 'active', 'expired' );
<a name="l2306"><span class="linenum">2306</span></a>      }
<a name="l2307"><span class="linenum">2307</span></a>      else
<a name="l2308"><span class="linenum">2308</span></a>      { // Display active or expired comments
<a name="l2309"><span class="linenum">2309</span></a>          <a class="var it672" onMouseOver="hilite(672)" onMouseOut="lolite()" onClick="logVariable('expiry_statuses')" href="../../../../_variables/expiry_statuses.html">$expiry_statuses</a> = array( <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../../../_variables/expiry_status.html">$expiry_status</a> );
<a name="l2310"><span class="linenum">2310</span></a>      }
<a name="l2311"><span class="linenum">2311</span></a>  
<a name="l2312"><span class="linenum">2312</span></a>  <span class="comment">    // if item_ID == -1 then don't use item filter! display all comments from current blog</span>
<a name="l2313"><span class="linenum">2313</span></a>      if( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a> == -1 )
<a name="l2314"><span class="linenum">2314</span></a>      {
<a name="l2315"><span class="linenum">2315</span></a>          <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a> = NULL;
<a name="l2316"><span class="linenum">2316</span></a>      }
<a name="l2317"><span class="linenum">2317</span></a>  <span class="comment">    // set redirect_to</span>
<a name="l2318"><span class="linenum">2318</span></a>      if( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a> != null )
<a name="l2319"><span class="linenum">2319</span></a>      { // redirect to the items full view
<a name="l2320"><span class="linenum">2320</span></a>          <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', <a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>, 'ctrl=items&amp;blog='.<a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../../_variables/blog_ID.html">$blog_ID</a>.'&amp;p='.<a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, '&amp;' ) );
<a name="l2321"><span class="linenum">2321</span></a>          <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_id', 'integer', <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a> );
<a name="l2322"><span class="linenum">2322</span></a>          <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'currentpage', 'integer', <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> );
<a name="l2323"><span class="linenum">2323</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../../_variables/statuses.html">$statuses</a> ) == 1 )
<a name="l2324"><span class="linenum">2324</span></a>          {
<a name="l2325"><span class="linenum">2325</span></a>              <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('show_comments')" href="../../../../_variables/show_comments.html">$show_comments</a> = <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../../_variables/statuses.html">$statuses</a>[0];
<a name="l2326"><span class="linenum">2326</span></a>          }
<a name="l2327"><span class="linenum">2327</span></a>          else
<a name="l2328"><span class="linenum">2328</span></a>          {
<a name="l2329"><span class="linenum">2329</span></a>              <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('show_comments')" href="../../../../_variables/show_comments.html">$show_comments</a> = 'all';
<a name="l2330"><span class="linenum">2330</span></a>          }
<a name="l2331"><span class="linenum">2331</span></a>          <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comments_number', 'integer', <a class="function" onClick="logFunction('generic_ctp_number')" href="../../../../_functions/generic_ctp_number.html" onMouseOver="funcPopup(event,'generic_ctp_number')">generic_ctp_number</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, 'comments', <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('show_comments')" href="../../../../_variables/show_comments.html">$show_comments</a> ) );
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment">        // Filter list:</span>
<a name="l2333"><span class="linenum">2333</span></a>          <a class="var it673" onMouseOver="hilite(673)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('set_filters')" href="../../../../_functions/set_filters.html" onMouseOver="funcPopup(event,'set_filters')">set_filters</a>( array(
<a name="l2334"><span class="linenum">2334</span></a>              'types' =&gt; array( 'comment', 'trackback', 'pingback' ),
<a name="l2335"><span class="linenum">2335</span></a>              'statuses' =&gt; <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../../_variables/statuses.html">$statuses</a>,
<a name="l2336"><span class="linenum">2336</span></a>              'expiry_statuses' =&gt; <a class="var it672" onMouseOver="hilite(672)" onMouseOut="lolite()" onClick="logVariable('expiry_statuses')" href="../../../../_variables/expiry_statuses.html">$expiry_statuses</a>,
<a name="l2337"><span class="linenum">2337</span></a>              'comment_ID_list' =&gt; <a class="var it2230" onMouseOver="hilite(2230)" onMouseOut="lolite()" onClick="logVariable('exlude_ID_list')" href="../../../../_variables/exlude_ID_list.html">$exlude_ID_list</a>,
<a name="l2338"><span class="linenum">2338</span></a>              'post_ID' =&gt; <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>,
<a name="l2339"><span class="linenum">2339</span></a>              'order' =&gt; 'ASC',//<a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../../../_variables/order.html">$order</a>,
<a name="l2340"><span class="linenum">2340</span></a>              'comments' =&gt; <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../../../_variables/limit.html">$limit</a>,
<a name="l2341"><span class="linenum">2341</span></a>              'page' =&gt; <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a>,
<a name="l2342"><span class="linenum">2342</span></a>          ) );
<a name="l2343"><span class="linenum">2343</span></a>      }
<a name="l2344"><span class="linenum">2344</span></a>      else
<a name="l2345"><span class="linenum">2345</span></a>      { // redirect to the comments full view
<a name="l2346"><span class="linenum">2346</span></a>          <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', <a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>, 'ctrl=comments&amp;blog='.<a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../../_variables/blog_ID.html">$blog_ID</a>.'&amp;filter=restore', '&amp;' ) );
<a name="l2347"><span class="linenum">2347</span></a>  <span class="comment">        // this is an ajax call we always have to restore the filterst (we can set filters only without ajax call)</span>
<a name="l2348"><span class="linenum">2348</span></a>          <a class="var it673" onMouseOver="hilite(673)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('set_filters')" href="../../../../_functions/set_filters.html" onMouseOver="funcPopup(event,'set_filters')">set_filters</a>( array(
<a name="l2349"><span class="linenum">2349</span></a>              'types' =&gt; array( 'comment', 'trackback', 'pingback' ),
<a name="l2350"><span class="linenum">2350</span></a>          ) );
<a name="l2351"><span class="linenum">2351</span></a>          <a class="var it673" onMouseOver="hilite(673)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('restore_filterset')" href="../../../../_functions/restore_filterset.html" onMouseOver="funcPopup(event,'restore_filterset')">restore_filterset</a>();
<a name="l2352"><span class="linenum">2352</span></a>      }
<a name="l2353"><span class="linenum">2353</span></a>  
<a name="l2354"><span class="linenum">2354</span></a>  <span class="comment">    // Get ready for display (runs the query):</span>
<a name="l2355"><span class="linenum">2355</span></a>      <a class="var it673" onMouseOver="hilite(673)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('display_init')" href="../../../../_functions/display_init.html" onMouseOver="funcPopup(event,'display_init')">display_init</a>();
<a name="l2356"><span class="linenum">2356</span></a>  
<a name="l2357"><span class="linenum">2357</span></a>      <a class="var it673" onMouseOver="hilite(673)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('display_if_empty')" href="../../../../_functions/display_if_empty.html" onMouseOver="funcPopup(event,'display_if_empty')">display_if_empty</a>( array(
<a name="l2358"><span class="linenum">2358</span></a>          'before'    =&gt; '&lt;div class=&quot;bComment&quot;&gt;&lt;p&gt;',
<a name="l2359"><span class="linenum">2359</span></a>          'after'     =&gt; '&lt;/p&gt;&lt;/div&gt;',
<a name="l2360"><span class="linenum">2360</span></a>          'msg_empty' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No feedback for this post yet...'),
<a name="l2361"><span class="linenum">2361</span></a>      ) );
<a name="l2362"><span class="linenum">2362</span></a>  
<a name="l2363"><span class="linenum">2363</span></a>  <span class="comment">    // display comments</span>
<a name="l2364"><span class="linenum">2364</span></a>      require <a class="var it246" onMouseOver="hilite(246)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../../../_variables/inc_path.html">$inc_path</a>.'comments/views/_comment_list.inc.php';
<a name="l2365"><span class="linenum">2365</span></a>  }
<a name="l2366"><span class="linenum">2366</span></a>  
<a name="l2367"><span class="linenum">2367</span></a>  
<a name="l2368"><span class="linenum">2368</span></a>  <span class="comment">/**</span>
<a name="l2369"><span class="linenum">2369</span></a>  <span class="comment"> * Display a comment corresponding the given comment id</span>
<a name="l2370"><span class="linenum">2370</span></a>  <span class="comment"> *</span>
<a name="l2371"><span class="linenum">2371</span></a>  <span class="comment"> * @param int comment id</span>
<a name="l2372"><span class="linenum">2372</span></a>  <span class="comment"> * @param string where to redirect after comment edit</span>
<a name="l2373"><span class="linenum">2373</span></a>  <span class="comment"> * @param boolean true to set the new redirect param, false otherwise</span>
<a name="l2374"><span class="linenum">2374</span></a>  <span class="comment"> */</span>
<a name="l2375"><span class="linenum">2375</span></a>  function <a class="function" onClick="logFunction('echo_comment')" href="../../../../_functions/echo_comment.html" onMouseOver="funcPopup(event,'echo_comment')">echo_comment</a>( <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../../_variables/comment_ID.html">$comment_ID</a>, <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> = NULL, <a class="var it3246" onMouseOver="hilite(3246)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../../_variables/save_context.html">$save_context</a> = false )
<a name="l2376"><span class="linenum">2376</span></a>  {
<a name="l2377"><span class="linenum">2377</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a>;
<a name="l2378"><span class="linenum">2378</span></a>  
<a name="l2379"><span class="linenum">2379</span></a>      <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../../../_variables/CommentCache.html">$CommentCache</a> = &amp; get_CommentCache();
<a name="l2380"><span class="linenum">2380</span></a>      <span class="comment">/**</span>
<a name="l2381"><span class="linenum">2381</span></a>  <span class="comment">    * @var Comment</span>
<a name="l2382"><span class="linenum">2382</span></a>  <span class="comment">    */</span>
<a name="l2383"><span class="linenum">2383</span></a>      <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a> = <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../../../_variables/CommentCache.html">$CommentCache</a>-&gt;get_by_ID( <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../../_variables/comment_ID.html">$comment_ID</a> );
<a name="l2384"><span class="linenum">2384</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> = &amp; <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l2385"><span class="linenum">2385</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;get_Blog();
<a name="l2386"><span class="linenum">2386</span></a>  
<a name="l2387"><span class="linenum">2387</span></a>      <a class="var it6819" onMouseOver="hilite(6819)" onMouseOut="lolite()" onClick="logVariable('is_published')" href="../../../../_variables/is_published.html">$is_published</a> = ( <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'status' ) == 'published' );
<a name="l2388"><span class="linenum">2388</span></a>      <a class="var it676" onMouseOver="hilite(676)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../../_variables/expiry_delay.html">$expiry_delay</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'post_expiry_delay' );
<a name="l2389"><span class="linenum">2389</span></a>      <a class="var it6820" onMouseOver="hilite(6820)" onMouseOut="lolite()" onClick="logVariable('is_expired')" href="../../../../_variables/is_expired.html">$is_expired</a> = ( !empty( <a class="var it676" onMouseOver="hilite(676)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../../_variables/expiry_delay.html">$expiry_delay</a> ) &amp;&amp; ( ( <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a> - <a class="function" onClick="logFunction('mysql2timestamp')" href="../../../../_functions/mysql2timestamp.html" onMouseOver="funcPopup(event,'mysql2timestamp')">mysql2timestamp</a>( <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'date' ) ) ) &gt; <a class="var it676" onMouseOver="hilite(676)" onMouseOut="lolite()" onClick="logVariable('expiry_delay')" href="../../../../_variables/expiry_delay.html">$expiry_delay</a> ) );
<a name="l2390"><span class="linenum">2390</span></a>  
<a name="l2391"><span class="linenum">2391</span></a>      echo '&lt;a name=&quot;c'.<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../../_variables/comment_ID.html">$comment_ID</a>.'&quot;&gt;&lt;/a&gt;';
<a name="l2392"><span class="linenum">2392</span></a>      echo '&lt;div id=&quot;comment_'.<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../../_variables/comment_ID.html">$comment_ID</a>.'&quot; class=&quot;bComment bComment';
<a name="l2393"><span class="linenum">2393</span></a>  <span class="comment">    // check if comment is expired</span>
<a name="l2394"><span class="linenum">2394</span></a>      if( <a class="var it6820" onMouseOver="hilite(6820)" onMouseOut="lolite()" onClick="logVariable('is_expired')" href="../../../../_variables/is_expired.html">$is_expired</a> )
<a name="l2395"><span class="linenum">2395</span></a>      { // comment is expired
<a name="l2396"><span class="linenum">2396</span></a>          echo 'expired';
<a name="l2397"><span class="linenum">2397</span></a>      }
<a name="l2398"><span class="linenum">2398</span></a>      else
<a name="l2399"><span class="linenum">2399</span></a>      { // comment is not expired
<a name="l2400"><span class="linenum">2400</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('status')" href="../../../../_functions/status.html" onMouseOver="funcPopup(event,'status')">status</a>('raw');
<a name="l2401"><span class="linenum">2401</span></a>      }
<a name="l2402"><span class="linenum">2402</span></a>      echo '&quot;&gt;';
<a name="l2403"><span class="linenum">2403</span></a>  
<a name="l2404"><span class="linenum">2404</span></a>      if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'moderate', false, <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a> ) )
<a name="l2405"><span class="linenum">2405</span></a>      {    // User can moderate this comment
<a name="l2406"><span class="linenum">2406</span></a>          echo '&lt;div class=&quot;bSmallHead&quot;&gt;';
<a name="l2407"><span class="linenum">2407</span></a>          echo '&lt;div&gt;';
<a name="l2408"><span class="linenum">2408</span></a>  
<a name="l2409"><span class="linenum">2409</span></a>          echo '&lt;div class=&quot;bSmallHeadRight&quot;&gt;';
<a name="l2410"><span class="linenum">2410</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('permanent_link')" href="../../../../_functions/permanent_link.html" onMouseOver="funcPopup(event,'permanent_link')">permanent_link</a>( array(
<a name="l2411"><span class="linenum">2411</span></a>                  'before' =&gt; '',
<a name="l2412"><span class="linenum">2412</span></a>                  'text'   =&gt; '#text#'
<a name="l2413"><span class="linenum">2413</span></a>              ) );
<a name="l2414"><span class="linenum">2414</span></a>          echo '&lt;/div&gt;';
<a name="l2415"><span class="linenum">2415</span></a>  
<a name="l2416"><span class="linenum">2416</span></a>          echo '&lt;span class=&quot;bDate&quot;&gt;';
<a name="l2417"><span class="linenum">2417</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="phpfunction" onClick="logFunction('date')" href="../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>();
<a name="l2418"><span class="linenum">2418</span></a>          echo '&lt;/span&gt;@&lt;span class = &quot;bTime&quot;&gt;';
<a name="l2419"><span class="linenum">2419</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>( 'H:i' );
<a name="l2420"><span class="linenum">2420</span></a>          echo '&lt;/span&gt;';
<a name="l2421"><span class="linenum">2421</span></a>  
<a name="l2422"><span class="linenum">2422</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('author_email')" href="../../../../_functions/author_email.html" onMouseOver="funcPopup(event,'author_email')">author_email</a>( '', ' &amp;middot; Email: &lt;span class=&quot;bEmail&quot;&gt;', '&lt;/span&gt;' );
<a name="l2423"><span class="linenum">2423</span></a>          echo ' &amp;middot; &lt;span class=&quot;bKarma&quot;&gt;';
<a name="l2424"><span class="linenum">2424</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('spam_karma')" href="../../../../_functions/spam_karma.html" onMouseOver="funcPopup(event,'spam_karma')">spam_karma</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Spam Karma').': %s%', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No Spam Karma') );
<a name="l2425"><span class="linenum">2425</span></a>          echo '&lt;/span&gt;';
<a name="l2426"><span class="linenum">2426</span></a>  
<a name="l2427"><span class="linenum">2427</span></a>          echo '&lt;/div&gt;';
<a name="l2428"><span class="linenum">2428</span></a>          echo '&lt;div style=&quot;padding-top:3px&quot;&gt;';
<a name="l2429"><span class="linenum">2429</span></a>          if( <a class="var it6820" onMouseOver="hilite(6820)" onMouseOut="lolite()" onClick="logVariable('is_expired')" href="../../../../_variables/is_expired.html">$is_expired</a> )
<a name="l2430"><span class="linenum">2430</span></a>          {
<a name="l2431"><span class="linenum">2431</span></a>              echo '&lt;div class=&quot;bSmallHeadRight&quot;&gt;';
<a name="l2432"><span class="linenum">2432</span></a>              echo '&lt;span class=&quot;bExpired&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('EXPIRED').'&lt;/span&gt;';
<a name="l2433"><span class="linenum">2433</span></a>              echo '&lt;/div&gt;';
<a name="l2434"><span class="linenum">2434</span></a>          }
<a name="l2435"><span class="linenum">2435</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('author_ip')" href="../../../../_functions/author_ip.html" onMouseOver="funcPopup(event,'author_ip')">author_ip</a>( 'IP: &lt;span class=&quot;bIP&quot;&gt;', '&lt;/span&gt; &amp;middot; ', true );
<a name="l2436"><span class="linenum">2436</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('ip_country')" href="../../../../_functions/ip_country.html" onMouseOver="funcPopup(event,'ip_country')">ip_country</a>( '', ' &amp;middot; ' );
<a name="l2437"><span class="linenum">2437</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('author_url_with_actions')" href="../../../../_functions/author_url_with_actions.html" onMouseOver="funcPopup(event,'author_url_with_actions')">author_url_with_actions</a>( <span class="comment">/*$redirect_to*/</span>'', true, true );
<a name="l2438"><span class="linenum">2438</span></a>          echo '&lt;/div&gt;';
<a name="l2439"><span class="linenum">2439</span></a>          echo '&lt;/div&gt;';
<a name="l2440"><span class="linenum">2440</span></a>  
<a name="l2441"><span class="linenum">2441</span></a>          echo '&lt;div class=&quot;bCommentContent&quot;&gt;';
<a name="l2442"><span class="linenum">2442</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('status')" href="../../../../_functions/status.html" onMouseOver="funcPopup(event,'status')">status</a>( 'styled' );
<a name="l2443"><span class="linenum">2443</span></a>          echo '&lt;div class=&quot;bTitle&quot;&gt;';
<a name="l2444"><span class="linenum">2444</span></a>          echo <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('In response to:')
<a name="l2445"><span class="linenum">2445</span></a>                  .' &lt;a href=&quot;?ctrl=items&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;p='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&quot;&gt;'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('title').'&lt;/a&gt;';
<a name="l2446"><span class="linenum">2446</span></a>          echo '&lt;/div&gt;';
<a name="l2447"><span class="linenum">2447</span></a>          echo '&lt;div class=&quot;bCommentTitle&quot;&gt;';
<a name="l2448"><span class="linenum">2448</span></a>          echo <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../../../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l2449"><span class="linenum">2449</span></a>          echo '&lt;/div&gt;';
<a name="l2450"><span class="linenum">2450</span></a>          echo '&lt;div class=&quot;bCommentText&quot;&gt;';
<a name="l2451"><span class="linenum">2451</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('rating')" href="../../../../_functions/rating.html" onMouseOver="funcPopup(event,'rating')">rating</a>();
<a name="l2452"><span class="linenum">2452</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('avatar')" href="../../../../_functions/avatar.html" onMouseOver="funcPopup(event,'avatar')">avatar</a>();
<a name="l2453"><span class="linenum">2453</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('content')" href="../../../../_functions/content.html" onMouseOver="funcPopup(event,'content')">content</a>( 'htmlbody', 'true' );
<a name="l2454"><span class="linenum">2454</span></a>          echo '&lt;/div&gt;';
<a name="l2455"><span class="linenum">2455</span></a>          echo '&lt;/div&gt;';
<a name="l2456"><span class="linenum">2456</span></a>  
<a name="l2457"><span class="linenum">2457</span></a>          echo '&lt;div class=&quot;CommentActionsArea&quot;&gt;';
<a name="l2458"><span class="linenum">2458</span></a>  
<a name="l2459"><span class="linenum">2459</span></a>          echo '&lt;div class=&quot;floatleft&quot;&gt;';
<a name="l2460"><span class="linenum">2460</span></a>  
<a name="l2461"><span class="linenum">2461</span></a>  <span class="comment">        // Display edit button if current user has the rights:</span>
<a name="l2462"><span class="linenum">2462</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('edit_link')" href="../../../../_functions/edit_link.html" onMouseOver="funcPopup(event,'edit_link')">edit_link</a>( ' ', ' ', <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'edit' ), '#', <a class="function" onClick="logFunction('button_class')" href="../../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>(), '&amp;amp;', <a class="var it3246" onMouseOver="hilite(3246)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../../_variables/save_context.html">$save_context</a>, <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l2463"><span class="linenum">2463</span></a>  
<a name="l2464"><span class="linenum">2464</span></a>          echo '&lt;span class=&quot;'.<a class="function" onClick="logFunction('button_class')" href="../../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>( 'group' ).'&quot;&gt;';
<a name="l2465"><span class="linenum">2465</span></a>  <span class="comment">        // Display publish NOW button if current user has the rights:</span>
<a name="l2466"><span class="linenum">2466</span></a>          <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../../_variables/link_params.html">$link_params</a> = array(
<a name="l2467"><span class="linenum">2467</span></a>              'class'        =&gt; <a class="function" onClick="logFunction('button_class')" href="../../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>( 'text' ),
<a name="l2468"><span class="linenum">2468</span></a>              'save_context' =&gt; <a class="var it3246" onMouseOver="hilite(3246)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../../_variables/save_context.html">$save_context</a>,
<a name="l2469"><span class="linenum">2469</span></a>              'ajax_button'  =&gt; true,
<a name="l2470"><span class="linenum">2470</span></a>              'redirect_to'  =&gt; <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a>,
<a name="l2471"><span class="linenum">2471</span></a>          );
<a name="l2472"><span class="linenum">2472</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('raise_link')" href="../../../../_functions/raise_link.html" onMouseOver="funcPopup(event,'raise_link')">raise_link</a>( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../../_variables/link_params.html">$link_params</a> );
<a name="l2473"><span class="linenum">2473</span></a>  
<a name="l2474"><span class="linenum">2474</span></a>  <span class="comment">        // Display deprecate button if current user has the rights:</span>
<a name="l2475"><span class="linenum">2475</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('lower_link')" href="../../../../_functions/lower_link.html" onMouseOver="funcPopup(event,'lower_link')">lower_link</a>( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('link_params')" href="../../../../_variables/link_params.html">$link_params</a> );
<a name="l2476"><span class="linenum">2476</span></a>  
<a name="l2477"><span class="linenum">2477</span></a>          <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../../_variables/next_status_in_row.html">$next_status_in_row</a> = <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( false );
<a name="l2478"><span class="linenum">2478</span></a>          if( <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../../_variables/next_status_in_row.html">$next_status_in_row</a> &amp;&amp; <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0] != 'deprecated' )
<a name="l2479"><span class="linenum">2479</span></a>          { // Display deprecate button if current user has the rights:
<a name="l2480"><span class="linenum">2480</span></a>              <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('deprecate_link')" href="../../../../_functions/deprecate_link.html" onMouseOver="funcPopup(event,'deprecate_link')">deprecate_link</a>( '', '', <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'move_down_grey', 'imgtag', array( 'title' =&gt; '' ) ), '#', <a class="function" onClick="logFunction('button_class')" href="../../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>(), '&amp;amp;', true, true );
<a name="l2481"><span class="linenum">2481</span></a>          }
<a name="l2482"><span class="linenum">2482</span></a>  
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment">        // Display delete button if current user has the rights:</span>
<a name="l2484"><span class="linenum">2484</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('delete_link')" href="../../../../_functions/delete_link.html" onMouseOver="funcPopup(event,'delete_link')">delete_link</a>( '', '', '#', '#', <a class="function" onClick="logFunction('button_class')" href="../../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>( 'text' ), false, '&amp;amp;', <a class="var it3246" onMouseOver="hilite(3246)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../../_variables/save_context.html">$save_context</a>, true, '#', <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l2485"><span class="linenum">2485</span></a>          echo '&lt;/span&gt;';
<a name="l2486"><span class="linenum">2486</span></a>  
<a name="l2487"><span class="linenum">2487</span></a>          echo '&lt;/div&gt;';
<a name="l2488"><span class="linenum">2488</span></a>  
<a name="l2489"><span class="linenum">2489</span></a>  <span class="comment">        // Display Spam Voting system</span>
<a name="l2490"><span class="linenum">2490</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('vote_spam')" href="../../../../_functions/vote_spam.html" onMouseOver="funcPopup(event,'vote_spam')">vote_spam</a>( '', '', '&amp;amp;', <a class="var it3246" onMouseOver="hilite(3246)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../../_variables/save_context.html">$save_context</a>, true );
<a name="l2491"><span class="linenum">2491</span></a>  
<a name="l2492"><span class="linenum">2492</span></a>          echo '&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;';
<a name="l2493"><span class="linenum">2493</span></a>          echo '&lt;/div&gt;';
<a name="l2494"><span class="linenum">2494</span></a>      }
<a name="l2495"><span class="linenum">2495</span></a>      else
<a name="l2496"><span class="linenum">2496</span></a>      {    // No permissions to moderate of this comment, just preview
<a name="l2497"><span class="linenum">2497</span></a>          echo '&lt;div class=&quot;bSmallHead&quot;&gt;';
<a name="l2498"><span class="linenum">2498</span></a>          echo '&lt;div&gt;';
<a name="l2499"><span class="linenum">2499</span></a>  
<a name="l2500"><span class="linenum">2500</span></a>          echo '&lt;div class=&quot;bSmallHeadRight&quot;&gt;';
<a name="l2501"><span class="linenum">2501</span></a>          echo <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Visibility').': ';
<a name="l2502"><span class="linenum">2502</span></a>          echo '&lt;span class=&quot;bStatus&quot;&gt;';
<a name="l2503"><span class="linenum">2503</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('status')" href="../../../../_functions/status.html" onMouseOver="funcPopup(event,'status')">status</a>();
<a name="l2504"><span class="linenum">2504</span></a>          echo '&lt;/span&gt;';
<a name="l2505"><span class="linenum">2505</span></a>          echo '&lt;/div&gt;';
<a name="l2506"><span class="linenum">2506</span></a>  
<a name="l2507"><span class="linenum">2507</span></a>          echo '&lt;span class=&quot;bDate&quot;&gt;';
<a name="l2508"><span class="linenum">2508</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="phpfunction" onClick="logFunction('date')" href="../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>();
<a name="l2509"><span class="linenum">2509</span></a>          echo '&lt;/span&gt;@&lt;span class = &quot;bTime&quot;&gt;';
<a name="l2510"><span class="linenum">2510</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>( 'H:i' );
<a name="l2511"><span class="linenum">2511</span></a>          echo '&lt;/span&gt;';
<a name="l2512"><span class="linenum">2512</span></a>  
<a name="l2513"><span class="linenum">2513</span></a>          echo '&lt;/div&gt;';
<a name="l2514"><span class="linenum">2514</span></a>          echo '&lt;/div&gt;';
<a name="l2515"><span class="linenum">2515</span></a>  
<a name="l2516"><span class="linenum">2516</span></a>          if( <a class="var it6819" onMouseOver="hilite(6819)" onMouseOut="lolite()" onClick="logVariable('is_published')" href="../../../../_variables/is_published.html">$is_published</a> )
<a name="l2517"><span class="linenum">2517</span></a>          {
<a name="l2518"><span class="linenum">2518</span></a>              echo '&lt;div class=&quot;bCommentContent&quot;&gt;';
<a name="l2519"><span class="linenum">2519</span></a>              echo '&lt;div class=&quot;bCommentTitle&quot;&gt;';
<a name="l2520"><span class="linenum">2520</span></a>              echo <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../../../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l2521"><span class="linenum">2521</span></a>              echo '&lt;/div&gt;';
<a name="l2522"><span class="linenum">2522</span></a>              echo '&lt;div class=&quot;bCommentText&quot;&gt;';
<a name="l2523"><span class="linenum">2523</span></a>              <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('rating')" href="../../../../_functions/rating.html" onMouseOver="funcPopup(event,'rating')">rating</a>();
<a name="l2524"><span class="linenum">2524</span></a>              <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('avatar')" href="../../../../_functions/avatar.html" onMouseOver="funcPopup(event,'avatar')">avatar</a>();
<a name="l2525"><span class="linenum">2525</span></a>              <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('content')" href="../../../../_functions/content.html" onMouseOver="funcPopup(event,'content')">content</a>();
<a name="l2526"><span class="linenum">2526</span></a>              echo '&lt;/div&gt;';
<a name="l2527"><span class="linenum">2527</span></a>              echo '&lt;/div&gt;';
<a name="l2528"><span class="linenum">2528</span></a>          }
<a name="l2529"><span class="linenum">2529</span></a>  
<a name="l2530"><span class="linenum">2530</span></a>          echo '&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;';
<a name="l2531"><span class="linenum">2531</span></a>      }
<a name="l2532"><span class="linenum">2532</span></a>  
<a name="l2533"><span class="linenum">2533</span></a>      echo '&lt;/div&gt;'; <span class="comment">// end</span>
<a name="l2534"><span class="linenum">2534</span></a>  }
<a name="l2535"><span class="linenum">2535</span></a>  
<a name="l2536"><span class="linenum">2536</span></a>  
<a name="l2537"><span class="linenum">2537</span></a>  <span class="comment">/**</span>
<a name="l2538"><span class="linenum">2538</span></a>  <span class="comment"> * Display a page link on item full view</span>
<a name="l2539"><span class="linenum">2539</span></a>  <span class="comment"> *</span>
<a name="l2540"><span class="linenum">2540</span></a>  <span class="comment"> * @param integer the item id</span>
<a name="l2541"><span class="linenum">2541</span></a>  <span class="comment"> * @param string link text</span>
<a name="l2542"><span class="linenum">2542</span></a>  <span class="comment"> * @param integer the page number</span>
<a name="l2543"><span class="linenum">2543</span></a>  <span class="comment"> */</span>
<a name="l2544"><span class="linenum">2544</span></a>  function <a class="function" onClick="logFunction('echo_pagenumber')" href="../../../../_functions/echo_pagenumber.html" onMouseOver="funcPopup(event,'echo_pagenumber')">echo_pagenumber</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> )
<a name="l2545"><span class="linenum">2545</span></a>  {
<a name="l2546"><span class="linenum">2546</span></a>      echo ' &lt;a href=&quot;javascript:<a class="function" onClick="logFunction('startRefreshComments')" href="../../../../_functions/startrefreshcomments.html" onMouseOver="funcPopup(event,'startrefreshcomments')">startRefreshComments</a>( '.<a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>.', '.<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>.' )&quot;&gt;'.<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l2547"><span class="linenum">2547</span></a>  }
<a name="l2548"><span class="linenum">2548</span></a>  
<a name="l2549"><span class="linenum">2549</span></a>  
<a name="l2550"><span class="linenum">2550</span></a>  <span class="comment">/**</span>
<a name="l2551"><span class="linenum">2551</span></a>  <span class="comment"> * Display page links on item full view</span>
<a name="l2552"><span class="linenum">2552</span></a>  <span class="comment"> *</span>
<a name="l2553"><span class="linenum">2553</span></a>  <span class="comment"> * @param integer the item id</span>
<a name="l2554"><span class="linenum">2554</span></a>  <span class="comment"> * @param integer current page number</span>
<a name="l2555"><span class="linenum">2555</span></a>  <span class="comment"> * @param integer all comments number in the list</span>
<a name="l2556"><span class="linenum">2556</span></a>  <span class="comment"> * @param array Params</span>
<a name="l2557"><span class="linenum">2557</span></a>  <span class="comment"> */</span>
<a name="l2558"><span class="linenum">2558</span></a>  function <a class="function" onClick="logFunction('echo_pages')" href="../../../../_functions/echo_pages.html" onMouseOver="funcPopup(event,'echo_pages')">echo_pages</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a>, <a class="var it665" onMouseOver="hilite(665)" onMouseOut="lolite()" onClick="logVariable('comments_number')" href="../../../../_variables/comments_number.html">$comments_number</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l2559"><span class="linenum">2559</span></a>  {
<a name="l2560"><span class="linenum">2560</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2561"><span class="linenum">2561</span></a>              'list_span'  =&gt; 11, // The number of pages to display for one time
<a name="l2562"><span class="linenum">2562</span></a>              'page_size'  =&gt; 20, // The number of comments on one page
<a name="l2563"><span class="linenum">2563</span></a>              'list_start' =&gt; '&lt;div class=&quot;results_nav&quot; id=&quot;paging&quot;&gt;',
<a name="l2564"><span class="linenum">2564</span></a>              'list_end'   =&gt; '&lt;/div&gt;',
<a name="l2565"><span class="linenum">2565</span></a>              'prev_text'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Previous'),
<a name="l2566"><span class="linenum">2566</span></a>              'next_text'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Next'),
<a name="l2567"><span class="linenum">2567</span></a>              'pages_text' =&gt; '&lt;strong&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Pages').'&lt;/strong&gt;:',
<a name="l2568"><span class="linenum">2568</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l2569"><span class="linenum">2569</span></a>  
<a name="l2570"><span class="linenum">2570</span></a>      if( <a class="var it665" onMouseOver="hilite(665)" onMouseOut="lolite()" onClick="logVariable('comments_number')" href="../../../../_variables/comments_number.html">$comments_number</a> == 0 )
<a name="l2571"><span class="linenum">2571</span></a>      { // No comments
<a name="l2572"><span class="linenum">2572</span></a>          return;
<a name="l2573"><span class="linenum">2573</span></a>      }
<a name="l2574"><span class="linenum">2574</span></a>  
<a name="l2575"><span class="linenum">2575</span></a>      <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../../../../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>( <a class="var it665" onMouseOver="hilite(665)" onMouseOut="lolite()" onClick="logVariable('comments_number')" href="../../../../_variables/comments_number.html">$comments_number</a> / <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['page_size'] );
<a name="l2576"><span class="linenum">2576</span></a>  
<a name="l2577"><span class="linenum">2577</span></a>      if( <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> &gt; <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> )
<a name="l2578"><span class="linenum">2578</span></a>      { // current page number is greater then all page number, set current page to the last existing page
<a name="l2579"><span class="linenum">2579</span></a>          <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> = <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a>;
<a name="l2580"><span class="linenum">2580</span></a>      }
<a name="l2581"><span class="linenum">2581</span></a>  
<a name="l2582"><span class="linenum">2582</span></a>  <span class="comment">    // Set first page</span>
<a name="l2583"><span class="linenum">2583</span></a>      if( <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> &lt;= <a class="phpfunction" onClick="logFunction('intval')" href="../../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['list_span'] / 2 ) )
<a name="l2584"><span class="linenum">2584</span></a>      { // the current page number is small
<a name="l2585"><span class="linenum">2585</span></a>          <a class="var it6822" onMouseOver="hilite(6822)" onMouseOut="lolite()" onClick="logVariable('first_page')" href="../../../../_variables/first_page.html">$first_page</a> = 1;
<a name="l2586"><span class="linenum">2586</span></a>      }
<a name="l2587"><span class="linenum">2587</span></a>      elseif( <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> &gt; <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> - <a class="phpfunction" onClick="logFunction('intval')" href="../../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['list_span'] / 2 ) )
<a name="l2588"><span class="linenum">2588</span></a>      { // the current page number is big
<a name="l2589"><span class="linenum">2589</span></a>          <a class="var it6822" onMouseOver="hilite(6822)" onMouseOut="lolite()" onClick="logVariable('first_page')" href="../../../../_variables/first_page.html">$first_page</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>( 1, <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> - <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['list_span'] + 1 );
<a name="l2590"><span class="linenum">2590</span></a>      }
<a name="l2591"><span class="linenum">2591</span></a>      else
<a name="l2592"><span class="linenum">2592</span></a>      { // the current page number can be centered
<a name="l2593"><span class="linenum">2593</span></a>          <a class="var it6822" onMouseOver="hilite(6822)" onMouseOut="lolite()" onClick="logVariable('first_page')" href="../../../../_variables/first_page.html">$first_page</a> = <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> - <a class="phpfunction" onClick="logFunction('intval')" href="../../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['list_span'] / 2 );
<a name="l2594"><span class="linenum">2594</span></a>      }
<a name="l2595"><span class="linenum">2595</span></a>  
<a name="l2596"><span class="linenum">2596</span></a>  <span class="comment">    // Set last page</span>
<a name="l2597"><span class="linenum">2597</span></a>      if( <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> &gt; <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> - <a class="phpfunction" onClick="logFunction('intval')" href="../../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['list_span'] / 2 ) )
<a name="l2598"><span class="linenum">2598</span></a>      { // the current page number is big
<a name="l2599"><span class="linenum">2599</span></a>          <a class="var it6823" onMouseOver="hilite(6823)" onMouseOut="lolite()" onClick="logVariable('last_page')" href="../../../../_variables/last_page.html">$last_page</a> = <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a>;
<a name="l2600"><span class="linenum">2600</span></a>      }
<a name="l2601"><span class="linenum">2601</span></a>      else
<a name="l2602"><span class="linenum">2602</span></a>      {
<a name="l2603"><span class="linenum">2603</span></a>          <a class="var it6823" onMouseOver="hilite(6823)" onMouseOut="lolite()" onClick="logVariable('last_page')" href="../../../../_variables/last_page.html">$last_page</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>( <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a>, <a class="var it6822" onMouseOver="hilite(6822)" onMouseOut="lolite()" onClick="logVariable('first_page')" href="../../../../_variables/first_page.html">$first_page</a> + <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['list_span'] - 1 );
<a name="l2604"><span class="linenum">2604</span></a>      }
<a name="l2605"><span class="linenum">2605</span></a>  
<a name="l2606"><span class="linenum">2606</span></a>      echo '&lt;div id=&quot;currentpage&quot; value='.<a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a>.' /&gt;&lt;/div&gt;';
<a name="l2607"><span class="linenum">2607</span></a>      echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['list_start'];
<a name="l2608"><span class="linenum">2608</span></a>      if( <a class="var it665" onMouseOver="hilite(665)" onMouseOut="lolite()" onClick="logVariable('comments_number')" href="../../../../_variables/comments_number.html">$comments_number</a> &gt; 0 )
<a name="l2609"><span class="linenum">2609</span></a>      {
<a name="l2610"><span class="linenum">2610</span></a>          echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['pages_text'];
<a name="l2611"><span class="linenum">2611</span></a>          if( <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> &gt; 1 )
<a name="l2612"><span class="linenum">2612</span></a>          { // link to previous page
<a name="l2613"><span class="linenum">2613</span></a>              <a class="function" onClick="logFunction('echo_pagenumber')" href="../../../../_functions/echo_pagenumber.html" onMouseOver="funcPopup(event,'echo_pagenumber')">echo_pagenumber</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['prev_text'], <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> - 1 );
<a name="l2614"><span class="linenum">2614</span></a>          }
<a name="l2615"><span class="linenum">2615</span></a>          if( <a class="var it6822" onMouseOver="hilite(6822)" onMouseOut="lolite()" onClick="logVariable('first_page')" href="../../../../_variables/first_page.html">$first_page</a> &gt; 1 )
<a name="l2616"><span class="linenum">2616</span></a>          { // link to first page
<a name="l2617"><span class="linenum">2617</span></a>              <a class="function" onClick="logFunction('echo_pagenumber')" href="../../../../_functions/echo_pagenumber.html" onMouseOver="funcPopup(event,'echo_pagenumber')">echo_pagenumber</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, '1', '1' );
<a name="l2618"><span class="linenum">2618</span></a>          }
<a name="l2619"><span class="linenum">2619</span></a>          if( <a class="var it6822" onMouseOver="hilite(6822)" onMouseOut="lolite()" onClick="logVariable('first_page')" href="../../../../_variables/first_page.html">$first_page</a> &gt; 2 )
<a name="l2620"><span class="linenum">2620</span></a>          { // link to previous pages
<a name="l2621"><span class="linenum">2621</span></a>              <a class="var it6824" onMouseOver="hilite(6824)" onMouseOut="lolite()" onClick="logVariable('page_i')" href="../../../../_variables/page_i.html">$page_i</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../../../../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>( <a class="var it6822" onMouseOver="hilite(6822)" onMouseOut="lolite()" onClick="logVariable('first_page')" href="../../../../_variables/first_page.html">$first_page</a> / 2 );
<a name="l2622"><span class="linenum">2622</span></a>              <a class="function" onClick="logFunction('echo_pagenumber')" href="../../../../_functions/echo_pagenumber.html" onMouseOver="funcPopup(event,'echo_pagenumber')">echo_pagenumber</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, '...', <a class="var it6824" onMouseOver="hilite(6824)" onMouseOut="lolite()" onClick="logVariable('page_i')" href="../../../../_variables/page_i.html">$page_i</a> );
<a name="l2623"><span class="linenum">2623</span></a>          }
<a name="l2624"><span class="linenum">2624</span></a>          for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> = <a class="var it6822" onMouseOver="hilite(6822)" onMouseOut="lolite()" onClick="logVariable('first_page')" href="../../../../_variables/first_page.html">$first_page</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> &lt;= <a class="var it6823" onMouseOver="hilite(6823)" onMouseOut="lolite()" onClick="logVariable('last_page')" href="../../../../_variables/last_page.html">$last_page</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>++ )
<a name="l2625"><span class="linenum">2625</span></a>          { // Display list with pages
<a name="l2626"><span class="linenum">2626</span></a>              if( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> == <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> )
<a name="l2627"><span class="linenum">2627</span></a>              {
<a name="l2628"><span class="linenum">2628</span></a>                  echo ' &lt;strong&gt;'.<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>.'&lt;/strong&gt;';
<a name="l2629"><span class="linenum">2629</span></a>              }
<a name="l2630"><span class="linenum">2630</span></a>              else
<a name="l2631"><span class="linenum">2631</span></a>              {
<a name="l2632"><span class="linenum">2632</span></a>                  <a class="function" onClick="logFunction('echo_pagenumber')" href="../../../../_functions/echo_pagenumber.html" onMouseOver="funcPopup(event,'echo_pagenumber')">echo_pagenumber</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> );
<a name="l2633"><span class="linenum">2633</span></a>              }
<a name="l2634"><span class="linenum">2634</span></a>          }
<a name="l2635"><span class="linenum">2635</span></a>          if( <a class="var it6823" onMouseOver="hilite(6823)" onMouseOut="lolite()" onClick="logVariable('last_page')" href="../../../../_variables/last_page.html">$last_page</a> &lt; <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> - 1 )
<a name="l2636"><span class="linenum">2636</span></a>          { // link to next pages
<a name="l2637"><span class="linenum">2637</span></a>              <a class="var it6824" onMouseOver="hilite(6824)" onMouseOut="lolite()" onClick="logVariable('page_i')" href="../../../../_variables/page_i.html">$page_i</a> = <a class="var it6823" onMouseOver="hilite(6823)" onMouseOut="lolite()" onClick="logVariable('last_page')" href="../../../../_variables/last_page.html">$last_page</a> + <a class="phpfunction" onClick="logFunction('floor')" href="../../../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>( ( <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> - <a class="var it6823" onMouseOver="hilite(6823)" onMouseOut="lolite()" onClick="logVariable('last_page')" href="../../../../_variables/last_page.html">$last_page</a> ) / 2 );
<a name="l2638"><span class="linenum">2638</span></a>              <a class="function" onClick="logFunction('echo_pagenumber')" href="../../../../_functions/echo_pagenumber.html" onMouseOver="funcPopup(event,'echo_pagenumber')">echo_pagenumber</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, '...', <a class="var it6824" onMouseOver="hilite(6824)" onMouseOut="lolite()" onClick="logVariable('page_i')" href="../../../../_variables/page_i.html">$page_i</a> );
<a name="l2639"><span class="linenum">2639</span></a>          }
<a name="l2640"><span class="linenum">2640</span></a>          if( <a class="var it6823" onMouseOver="hilite(6823)" onMouseOut="lolite()" onClick="logVariable('last_page')" href="../../../../_variables/last_page.html">$last_page</a> &lt; <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> )
<a name="l2641"><span class="linenum">2641</span></a>          { // link to last page
<a name="l2642"><span class="linenum">2642</span></a>              <a class="function" onClick="logFunction('echo_pagenumber')" href="../../../../_functions/echo_pagenumber.html" onMouseOver="funcPopup(event,'echo_pagenumber')">echo_pagenumber</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a>, <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> );
<a name="l2643"><span class="linenum">2643</span></a>          }
<a name="l2644"><span class="linenum">2644</span></a>          if( <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> &lt; <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('total_pages')" href="../../../../_variables/total_pages.html">$total_pages</a> )
<a name="l2645"><span class="linenum">2645</span></a>          { // link to next page
<a name="l2646"><span class="linenum">2646</span></a>              <a class="function" onClick="logFunction('echo_pagenumber')" href="../../../../_functions/echo_pagenumber.html" onMouseOver="funcPopup(event,'echo_pagenumber')">echo_pagenumber</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../../_variables/item_ID.html">$item_ID</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['next_text'], <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../_variables/currentpage.html">$currentpage</a> + 1 );
<a name="l2647"><span class="linenum">2647</span></a>          }
<a name="l2648"><span class="linenum">2648</span></a>      }
<a name="l2649"><span class="linenum">2649</span></a>      echo <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['list_end'];
<a name="l2650"><span class="linenum">2650</span></a>  }
<a name="l2651"><span class="linenum">2651</span></a>  
<a name="l2652"><span class="linenum">2652</span></a>  <span class="comment">/**</span>
<a name="l2653"><span class="linenum">2653</span></a>  <span class="comment"> * Get item edit modes</span>
<a name="l2654"><span class="linenum">2654</span></a>  <span class="comment"> *</span>
<a name="l2655"><span class="linenum">2655</span></a>  <span class="comment"> * @param integer blog ID</span>
<a name="l2656"><span class="linenum">2656</span></a>  <span class="comment"> * @param string action</span>
<a name="l2657"><span class="linenum">2657</span></a>  <span class="comment"> * @param string path to admin page</span>
<a name="l2658"><span class="linenum">2658</span></a>  <span class="comment"> * @param string tab switch params</span>
<a name="l2659"><span class="linenum">2659</span></a>  <span class="comment"> * @return array with modes</span>
<a name="l2660"><span class="linenum">2660</span></a>  <span class="comment"> */</span>
<a name="l2661"><span class="linenum">2661</span></a>  function <a class="function" onClick="logFunction('get_item_edit_modes')" href="../../../../_functions/get_item_edit_modes.html" onMouseOver="funcPopup(event,'get_item_edit_modes')">get_item_edit_modes</a>( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../../_variables/blog_ID.html">$blog_ID</a>, <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>, <a class="var it6485" onMouseOver="hilite(6485)" onMouseOut="lolite()" onClick="logVariable('tab_switch_params')" href="../../../../_variables/tab_switch_params.html">$tab_switch_params</a> )
<a name="l2662"><span class="linenum">2662</span></a>  {
<a name="l2663"><span class="linenum">2663</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l2664"><span class="linenum">2664</span></a>  
<a name="l2665"><span class="linenum">2665</span></a>      <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l2666"><span class="linenum">2666</span></a>      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../../_variables/blog_ID.html">$blog_ID</a>, false, false );
<a name="l2667"><span class="linenum">2667</span></a>  
<a name="l2668"><span class="linenum">2668</span></a>      <a class="var it5619" onMouseOver="hilite(5619)" onMouseOut="lolite()" onClick="logVariable('modes')" href="../../../../_variables/modes.html">$modes</a> = array();
<a name="l2669"><span class="linenum">2669</span></a>      <a class="var it5619" onMouseOver="hilite(5619)" onMouseOut="lolite()" onClick="logVariable('modes')" href="../../../../_variables/modes.html">$modes</a>['simple'] = array(
<a name="l2670"><span class="linenum">2670</span></a>          'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Simple'),
<a name="l2671"><span class="linenum">2671</span></a>          'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;action='.<a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>.'&amp;amp;tab=simple&amp;amp;'.<a class="var it6485" onMouseOver="hilite(6485)" onMouseOut="lolite()" onClick="logVariable('tab_switch_params')" href="../../../../_variables/tab_switch_params.html">$tab_switch_params</a>,
<a name="l2672"><span class="linenum">2672</span></a>          'onclick' =&gt; 'return <a class="function" onClick="logFunction('b2edit_reload')" href="../../../../_functions/b2edit_reload.html" onMouseOver="funcPopup(event,'b2edit_reload')">b2edit_reload</a>( document.getElementById(\'item_checkchanges\'), \''.<a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;blog='.<a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../../_variables/blog_ID.html">$blog_ID</a>.'\', null, {tab:\'simple\'} );',
<a name="l2673"><span class="linenum">2673</span></a>  <span class="comment">        // 'name' =&gt; 'switch_to_simple_tab_nocheckchanges', // no bozo check</span>
<a name="l2674"><span class="linenum">2674</span></a>      );
<a name="l2675"><span class="linenum">2675</span></a>      <a class="var it5619" onMouseOver="hilite(5619)" onMouseOut="lolite()" onClick="logVariable('modes')" href="../../../../_variables/modes.html">$modes</a>['expert'] = array(
<a name="l2676"><span class="linenum">2676</span></a>          'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Expert'),
<a name="l2677"><span class="linenum">2677</span></a>          'href' =&gt; <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;action='.<a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>.'&amp;amp;tab=expert&amp;amp;'.<a class="var it6485" onMouseOver="hilite(6485)" onMouseOut="lolite()" onClick="logVariable('tab_switch_params')" href="../../../../_variables/tab_switch_params.html">$tab_switch_params</a>,
<a name="l2678"><span class="linenum">2678</span></a>          'onclick' =&gt; 'return <a class="function" onClick="logFunction('b2edit_reload')" href="../../../../_functions/b2edit_reload.html" onMouseOver="funcPopup(event,'b2edit_reload')">b2edit_reload</a>( document.getElementById(\'item_checkchanges\'), \''.<a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../../../_variables/dispatcher.html">$dispatcher</a>.'?ctrl=items&amp;amp;blog='.<a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../../_variables/blog_ID.html">$blog_ID</a>.'\', null, {tab:\'expert\'} );',
<a name="l2679"><span class="linenum">2679</span></a>  <span class="comment">        // 'name' =&gt; 'switch_to_expert_tab_nocheckchanges', // no bozo check</span>
<a name="l2680"><span class="linenum">2680</span></a>      );
<a name="l2681"><span class="linenum">2681</span></a>      if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'in_skin_editing' ) &amp;&amp; ( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_post!published', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) || <a class="function" onClick="logFunction('get_param')" href="../../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'p' ) &gt; 0 ) )
<a name="l2682"><span class="linenum">2682</span></a>      {    // Show 'In skin' tab if Blog setting 'In-skin editing' is ON and User has a permission to publish item in this blog
<a name="l2683"><span class="linenum">2683</span></a>          <a class="var it6825" onMouseOver="hilite(6825)" onMouseOut="lolite()" onClick="logVariable('mode_inskin_url')" href="../../../../_variables/mode_inskin_url.html">$mode_inskin_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' ), 'disp=edit&amp;amp;'.<a class="var it6485" onMouseOver="hilite(6485)" onMouseOut="lolite()" onClick="logVariable('tab_switch_params')" href="../../../../_variables/tab_switch_params.html">$tab_switch_params</a> );
<a name="l2684"><span class="linenum">2684</span></a>          <a class="var it6826" onMouseOver="hilite(6826)" onMouseOut="lolite()" onClick="logVariable('mode_inskin_action')" href="../../../../_variables/mode_inskin_action.html">$mode_inskin_action</a> = <a class="function" onClick="logFunction('get_samedomain_htsrv_url')" href="../../../../_functions/get_samedomain_htsrv_url.html" onMouseOver="funcPopup(event,'get_samedomain_htsrv_url')">get_samedomain_htsrv_url</a>().'item_edit.php';
<a name="l2685"><span class="linenum">2685</span></a>          <a class="var it5619" onMouseOver="hilite(5619)" onMouseOut="lolite()" onClick="logVariable('modes')" href="../../../../_variables/modes.html">$modes</a>['inskin'] = array(
<a name="l2686"><span class="linenum">2686</span></a>              'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('In skin'),
<a name="l2687"><span class="linenum">2687</span></a>              'href' =&gt; <a class="var it6825" onMouseOver="hilite(6825)" onMouseOut="lolite()" onClick="logVariable('mode_inskin_url')" href="../../../../_variables/mode_inskin_url.html">$mode_inskin_url</a>,
<a name="l2688"><span class="linenum">2688</span></a>              'onclick' =&gt; 'return <a class="function" onClick="logFunction('b2edit_reload')" href="../../../../_functions/b2edit_reload.html" onMouseOver="funcPopup(event,'b2edit_reload')">b2edit_reload</a>( document.getElementById(\'item_checkchanges\'), \''.<a class="var it6826" onMouseOver="hilite(6826)" onMouseOut="lolite()" onClick="logVariable('mode_inskin_action')" href="../../../../_variables/mode_inskin_action.html">$mode_inskin_action</a>.'\' );',
<a name="l2689"><span class="linenum">2689</span></a>          );
<a name="l2690"><span class="linenum">2690</span></a>      }
<a name="l2691"><span class="linenum">2691</span></a>  
<a name="l2692"><span class="linenum">2692</span></a>      return <a class="var it5619" onMouseOver="hilite(5619)" onMouseOut="lolite()" onClick="logVariable('modes')" href="../../../../_variables/modes.html">$modes</a>;
<a name="l2693"><span class="linenum">2693</span></a>  }
<a name="l2694"><span class="linenum">2694</span></a>  
<a name="l2695"><span class="linenum">2695</span></a>  
<a name="l2696"><span class="linenum">2696</span></a>  <span class="comment">/**</span>
<a name="l2697"><span class="linenum">2697</span></a>  <span class="comment"> * Check permission for editing of the item by current user</span>
<a name="l2698"><span class="linenum">2698</span></a>  <span class="comment"> *</span>
<a name="l2699"><span class="linenum">2699</span></a>  <span class="comment"> * @param integer post ID</span>
<a name="l2700"><span class="linenum">2700</span></a>  <span class="comment"> * @param boolean Set TRUE if we want to redirect when user cannot edit this post</span>
<a name="l2701"><span class="linenum">2701</span></a>  <span class="comment"> * @return boolean TRUE - user can edit this post</span>
<a name="l2702"><span class="linenum">2702</span></a>  <span class="comment"> */</span>
<a name="l2703"><span class="linenum">2703</span></a>  function <a class="function" onClick="logFunction('check_item_perm_edit')" href="../../../../_functions/check_item_perm_edit.html" onMouseOver="funcPopup(event,'check_item_perm_edit')">check_item_perm_edit</a>( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a>, <a class="var it6827" onMouseOver="hilite(6827)" onMouseOut="lolite()" onClick="logVariable('do_redirect')" href="../../../../_variables/do_redirect.html">$do_redirect</a> = true )
<a name="l2704"><span class="linenum">2704</span></a>  {
<a name="l2705"><span class="linenum">2705</span></a>      global <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>;
<a name="l2706"><span class="linenum">2706</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l2707"><span class="linenum">2707</span></a>  
<a name="l2708"><span class="linenum">2708</span></a>      <a class="var it6828" onMouseOver="hilite(6828)" onMouseOut="lolite()" onClick="logVariable('user_can_edit')" href="../../../../_variables/user_can_edit.html">$user_can_edit</a> = false;
<a name="l2709"><span class="linenum">2709</span></a>  
<a name="l2710"><span class="linenum">2710</span></a>      if( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> &gt; 0 )
<a name="l2711"><span class="linenum">2711</span></a>      {    // Check permissions for editing of the current item
<a name="l2712"><span class="linenum">2712</span></a>          <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache ();
<a name="l2713"><span class="linenum">2713</span></a>          <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a> = <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;<a onClick="logVariable('get_by_ID')" class="var it9027" onMouseOver="hilite(9027)" onMouseOut="lolite()" href="../../../../_variables/get_by_ID.html">get_by_ID</a> ( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../../../_variables/post_ID.html">$post_ID</a> );
<a name="l2714"><span class="linenum">2714</span></a>          <a class="var it6828" onMouseOver="hilite(6828)" onMouseOut="lolite()" onClick="logVariable('user_can_edit')" href="../../../../_variables/user_can_edit.html">$user_can_edit</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!CURSTATUS', 'edit', false, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a> );
<a name="l2715"><span class="linenum">2715</span></a>          <a class="var it6829" onMouseOver="hilite(6829)" onMouseOut="lolite()" onClick="logVariable('permission_message')" href="../../../../_variables/permission_message.html">$permission_message</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You don\'t have permission to edit this post');
<a name="l2716"><span class="linenum">2716</span></a>      }
<a name="l2717"><span class="linenum">2717</span></a>      else
<a name="l2718"><span class="linenum">2718</span></a>      {    // Check permissions for creating of a <span class="keyword">new </span><a class="class" onClick="logClass('item')" href="../../../../_classes/item.html" onMouseOver="classPopup(event,'item')">item</a>
<a name="l2719"><span class="linenum">2719</span></a>          <a class="var it3410" onMouseOver="hilite(3410)" onMouseOut="lolite()" onClick="logVariable('perm_target')" href="../../../../_variables/perm_target.html">$perm_target</a> = empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) ? NULL : <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l2720"><span class="linenum">2720</span></a>          <a class="var it6828" onMouseOver="hilite(6828)" onMouseOut="lolite()" onClick="logVariable('user_can_edit')" href="../../../../_variables/user_can_edit.html">$user_can_edit</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_post_statuses', 'edit', false, <a class="var it3410" onMouseOver="hilite(3410)" onMouseOut="lolite()" onClick="logVariable('perm_target')" href="../../../../_variables/perm_target.html">$perm_target</a> );
<a name="l2721"><span class="linenum">2721</span></a>          <a class="var it6829" onMouseOver="hilite(6829)" onMouseOut="lolite()" onClick="logVariable('permission_message')" href="../../../../_variables/permission_message.html">$permission_message</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You don\'t have permission to post into this blog');
<a name="l2722"><span class="linenum">2722</span></a>      }
<a name="l2723"><span class="linenum">2723</span></a>  
<a name="l2724"><span class="linenum">2724</span></a>      if( ! <a class="var it6828" onMouseOver="hilite(6828)" onMouseOut="lolite()" onClick="logVariable('user_can_edit')" href="../../../../_variables/user_can_edit.html">$user_can_edit</a> )
<a name="l2725"><span class="linenum">2725</span></a>      {
<a name="l2726"><span class="linenum">2726</span></a>          if( <a class="var it6827" onMouseOver="hilite(6827)" onMouseOut="lolite()" onClick="logVariable('do_redirect')" href="../../../../_variables/do_redirect.html">$do_redirect</a> )
<a name="l2727"><span class="linenum">2727</span></a>          {    // Redirect to the blog url for users without messaging permission
<a name="l2728"><span class="linenum">2728</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it6829" onMouseOver="hilite(6829)" onMouseOut="lolite()" onClick="logVariable('permission_message')" href="../../../../_variables/permission_message.html">$permission_message</a> );
<a name="l2729"><span class="linenum">2729</span></a>              if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) )
<a name="l2730"><span class="linenum">2730</span></a>              {    // Bad request without blog ID
<a name="l2731"><span class="linenum">2731</span></a>                  global <a class="var it3234" onMouseOver="hilite(3234)" onMouseOut="lolite()" onClick="logVariable('home_url')" href="../../../../_variables/home_url.html">$home_url</a>;
<a name="l2732"><span class="linenum">2732</span></a>                  <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it3234" onMouseOver="hilite(3234)" onMouseOut="lolite()" onClick="logVariable('home_url')" href="../../../../_variables/home_url.html">$home_url</a>;
<a name="l2733"><span class="linenum">2733</span></a>              }
<a name="l2734"><span class="linenum">2734</span></a>              else
<a name="l2735"><span class="linenum">2735</span></a>              {    // Redirect to the current blog
<a name="l2736"><span class="linenum">2736</span></a>                  <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l2737"><span class="linenum">2737</span></a>              }
<a name="l2738"><span class="linenum">2738</span></a>              <a class="function" onClick="logFunction('header_redirect')" href="../../../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a>, 302 );
<a name="l2739"><span class="linenum">2739</span></a>  <span class="comment">            // will have exited</span>
<a name="l2740"><span class="linenum">2740</span></a>          }
<a name="l2741"><span class="linenum">2741</span></a>          else
<a name="l2742"><span class="linenum">2742</span></a>          {    // Current user cannot edit this post
<a name="l2743"><span class="linenum">2743</span></a>              return false;
<a name="l2744"><span class="linenum">2744</span></a>          }
<a name="l2745"><span class="linenum">2745</span></a>      }
<a name="l2746"><span class="linenum">2746</span></a>  
<a name="l2747"><span class="linenum">2747</span></a>      return true;
<a name="l2748"><span class="linenum">2748</span></a>  }
<a name="l2749"><span class="linenum">2749</span></a>  
<a name="l2750"><span class="linenum">2750</span></a>  
<a name="l2751"><span class="linenum">2751</span></a>  <span class="comment">/**</span>
<a name="l2752"><span class="linenum">2752</span></a>  <span class="comment"> * Check permission for creating of a new item by current user</span>
<a name="l2753"><span class="linenum">2753</span></a>  <span class="comment"> *</span>
<a name="l2754"><span class="linenum">2754</span></a>  <span class="comment"> * @return boolean, TRUE if user can create a new post for the current blog</span>
<a name="l2755"><span class="linenum">2755</span></a>  <span class="comment"> */</span>
<a name="l2756"><span class="linenum">2756</span></a>  function <a class="function" onClick="logFunction('check_item_perm_create')" href="../../../../_functions/check_item_perm_create.html" onMouseOver="funcPopup(event,'check_item_perm_create')">check_item_perm_create</a>()
<a name="l2757"><span class="linenum">2757</span></a>  {
<a name="l2758"><span class="linenum">2758</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l2759"><span class="linenum">2759</span></a>  
<a name="l2760"><span class="linenum">2760</span></a>      if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) )
<a name="l2761"><span class="linenum">2761</span></a>      {    // Strange case, but we restrict to create a new post
<a name="l2762"><span class="linenum">2762</span></a>          return false;
<a name="l2763"><span class="linenum">2763</span></a>      }
<a name="l2764"><span class="linenum">2764</span></a>  
<a name="l2765"><span class="linenum">2765</span></a>      if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) || ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'in_skin_editing' ) )
<a name="l2766"><span class="linenum">2766</span></a>      {    // Don't allow anonymous users to create a new post &amp; If setting is OFF
<a name="l2767"><span class="linenum">2767</span></a>          return false;
<a name="l2768"><span class="linenum">2768</span></a>      }
<a name="l2769"><span class="linenum">2769</span></a>      else
<a name="l2770"><span class="linenum">2770</span></a>      {    // Check permissions for current user
<a name="l2771"><span class="linenum">2771</span></a>          global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l2772"><span class="linenum">2772</span></a>          return <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_post_statuses', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l2773"><span class="linenum">2773</span></a>      }
<a name="l2774"><span class="linenum">2774</span></a>  
<a name="l2775"><span class="linenum">2775</span></a>      return true;
<a name="l2776"><span class="linenum">2776</span></a>  }
<a name="l2777"><span class="linenum">2777</span></a>  
<a name="l2778"><span class="linenum">2778</span></a>  
<a name="l2779"><span class="linenum">2779</span></a>  <span class="comment">/**</span>
<a name="l2780"><span class="linenum">2780</span></a>  <span class="comment"> * Template tag: Display a link to create a new post</span>
<a name="l2781"><span class="linenum">2781</span></a>  <span class="comment"> */</span>
<a name="l2782"><span class="linenum">2782</span></a>  function <a class="function" onClick="logFunction('item_new_link')" href="../../../../_functions/item_new_link.html" onMouseOver="funcPopup(event,'item_new_link')">item_new_link</a>( <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../../_variables/before.html">$before</a> = '', <a class="var it84" onMouseOver="hilite(84)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../../_variables/after.html">$after</a> = '', <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../../_variables/link_text.html">$link_text</a> = '', <a class="var it1797" onMouseOver="hilite(1797)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../../_variables/link_title.html">$link_title</a> = '#' )
<a name="l2783"><span class="linenum">2783</span></a>  {
<a name="l2784"><span class="linenum">2784</span></a>      echo <a class="function" onClick="logFunction('get_item_new_link')" href="../../../../_functions/get_item_new_link.html" onMouseOver="funcPopup(event,'get_item_new_link')">get_item_new_link</a>( <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../../_variables/before.html">$before</a>, <a class="var it84" onMouseOver="hilite(84)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../../_variables/after.html">$after</a>, <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../../_variables/link_text.html">$link_text</a>, <a class="var it1797" onMouseOver="hilite(1797)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../../_variables/link_title.html">$link_title</a> );
<a name="l2785"><span class="linenum">2785</span></a>  }
<a name="l2786"><span class="linenum">2786</span></a>  
<a name="l2787"><span class="linenum">2787</span></a>  
<a name="l2788"><span class="linenum">2788</span></a>  <span class="comment">/**</span>
<a name="l2789"><span class="linenum">2789</span></a>  <span class="comment"> * Template tag: Get a link to create a new post</span>
<a name="l2790"><span class="linenum">2790</span></a>  <span class="comment"> *</span>
<a name="l2791"><span class="linenum">2791</span></a>  <span class="comment"> * @return string|false</span>
<a name="l2792"><span class="linenum">2792</span></a>  <span class="comment"> */</span>
<a name="l2793"><span class="linenum">2793</span></a>  function <a class="function" onClick="logFunction('get_item_new_link')" href="../../../../_functions/get_item_new_link.html" onMouseOver="funcPopup(event,'get_item_new_link')">get_item_new_link</a>( <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../../_variables/before.html">$before</a> = '', <a class="var it84" onMouseOver="hilite(84)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../../_variables/after.html">$after</a> = '', <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../../_variables/link_text.html">$link_text</a> = '', <a class="var it1797" onMouseOver="hilite(1797)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../../_variables/link_title.html">$link_title</a> = '#' )
<a name="l2794"><span class="linenum">2794</span></a>  {
<a name="l2795"><span class="linenum">2795</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l2796"><span class="linenum">2796</span></a>  
<a name="l2797"><span class="linenum">2797</span></a>      if( ! <a class="function" onClick="logFunction('check_item_perm_create')" href="../../../../_functions/check_item_perm_create.html" onMouseOver="funcPopup(event,'check_item_perm_create')">check_item_perm_create</a>() )
<a name="l2798"><span class="linenum">2798</span></a>      {    // Don't allow users to create a new post
<a name="l2799"><span class="linenum">2799</span></a>          return false;
<a name="l2800"><span class="linenum">2800</span></a>      }
<a name="l2801"><span class="linenum">2801</span></a>  
<a name="l2802"><span class="linenum">2802</span></a>      if( <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../../_variables/link_text.html">$link_text</a> == '' )
<a name="l2803"><span class="linenum">2803</span></a>      {    // Default text
<a name="l2804"><span class="linenum">2804</span></a>          <a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../../_variables/link_text.html">$link_text</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Write a new post');
<a name="l2805"><span class="linenum">2805</span></a>      }
<a name="l2806"><span class="linenum">2806</span></a>  
<a name="l2807"><span class="linenum">2807</span></a>      if( <a class="var it1797" onMouseOver="hilite(1797)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../../_variables/link_title.html">$link_title</a> == '#' ) <a class="var it1797" onMouseOver="hilite(1797)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../../_variables/link_title.html">$link_title</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Write a new post');
<a name="l2808"><span class="linenum">2808</span></a>  
<a name="l2809"><span class="linenum">2809</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../../_variables/before.html">$before</a>
<a name="l2810"><span class="linenum">2810</span></a>          .'&lt;a href=&quot;'.<a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' ), 'disp=edit' ).'&quot; title=&quot;'.<a class="var it1797" onMouseOver="hilite(1797)" onMouseOut="lolite()" onClick="logVariable('link_title')" href="../../../../_variables/link_title.html">$link_title</a>.'&quot;&gt;'
<a name="l2811"><span class="linenum">2811</span></a>          .<a class="var it708" onMouseOver="hilite(708)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../../_variables/link_text.html">$link_text</a>
<a name="l2812"><span class="linenum">2812</span></a>          .'&lt;/a&gt;'
<a name="l2813"><span class="linenum">2813</span></a>          .<a class="var it84" onMouseOver="hilite(84)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../../_variables/after.html">$after</a>;
<a name="l2814"><span class="linenum">2814</span></a>  
<a name="l2815"><span class="linenum">2815</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l2816"><span class="linenum">2816</span></a>  }
<a name="l2817"><span class="linenum">2817</span></a>  
<a name="l2818"><span class="linenum">2818</span></a>  
<a name="l2819"><span class="linenum">2819</span></a>  <span class="comment">/**</span>
<a name="l2820"><span class="linenum">2820</span></a>  <span class="comment"> * Display location select elements (Country, Region, Subregion, City)</span>
<a name="l2821"><span class="linenum">2821</span></a>  <span class="comment"> *</span>
<a name="l2822"><span class="linenum">2822</span></a>  <span class="comment"> * @param object Form</span>
<a name="l2823"><span class="linenum">2823</span></a>  <span class="comment"> * @param object Edited Item</span>
<a name="l2824"><span class="linenum">2824</span></a>  <span class="comment"> */</span>
<a name="l2825"><span class="linenum">2825</span></a>  function <a class="function" onClick="logFunction('echo_item_location_form')" href="../../../../_functions/echo_item_location_form.html" onMouseOver="funcPopup(event,'echo_item_location_form')">echo_item_location_form</a>( &amp; <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>, &amp; <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a> )
<a name="l2826"><span class="linenum">2826</span></a>  {
<a name="l2827"><span class="linenum">2827</span></a>      <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'regional/model/_country.class.php', 'Country' );
<a name="l2828"><span class="linenum">2828</span></a>      <a class="function" onClick="logFunction('load_funcs')" href="../../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'regional/model/_regional.funcs.php' );
<a name="l2829"><span class="linenum">2829</span></a>  
<a name="l2830"><span class="linenum">2830</span></a>      <a class="var it6737" onMouseOver="hilite(6737)" onMouseOut="lolite()" onClick="logVariable('edited_Item_Blog')" href="../../../../_variables/edited_Item_Blog.html">$edited_Item_Blog</a> = <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;get_Blog();
<a name="l2831"><span class="linenum">2831</span></a>      if( !<a class="var it6737" onMouseOver="hilite(6737)" onMouseOut="lolite()" onClick="logVariable('edited_Item_Blog')" href="../../../../_variables/edited_Item_Blog.html">$edited_Item_Blog</a>-&gt;<a class="function" onClick="logFunction('country_visible')" href="../../../../_functions/country_visible.html" onMouseOver="funcPopup(event,'country_visible')">country_visible</a>() )
<a name="l2832"><span class="linenum">2832</span></a>      {    // If country is NOT visible it means all other location fields also are not visible, so exit here
<a name="l2833"><span class="linenum">2833</span></a>          return;
<a name="l2834"><span class="linenum">2834</span></a>      }
<a name="l2835"><span class="linenum">2835</span></a>  
<a name="l2836"><span class="linenum">2836</span></a>      global <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../../_variables/rsc_url.html">$rsc_url</a>;
<a name="l2837"><span class="linenum">2837</span></a>  
<a name="l2838"><span class="linenum">2838</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_fieldset')" href="../../../../_functions/begin_fieldset.html" onMouseOver="funcPopup(event,'begin_fieldset')">begin_fieldset</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Location') );
<a name="l2839"><span class="linenum">2839</span></a>  
<a name="l2840"><span class="linenum">2840</span></a>      <a class="var it6830" onMouseOver="hilite(6830)" onMouseOut="lolite()" onClick="logVariable('table_class')" href="../../../../_variables/table_class.html">$table_class</a> = '';
<a name="l2841"><span class="linenum">2841</span></a>      if( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('is_special')" href="../../../../_functions/is_special.html" onMouseOver="funcPopup(event,'is_special')">is_special</a>() )
<a name="l2842"><span class="linenum">2842</span></a>      { // A post with special type should always has the location fields as not required
<a name="l2843"><span class="linenum">2843</span></a>  <span class="comment">        // This css class hides all red stars of required fields</span>
<a name="l2844"><span class="linenum">2844</span></a>          <a class="var it6830" onMouseOver="hilite(6830)" onMouseOut="lolite()" onClick="logVariable('table_class')" href="../../../../_variables/table_class.html">$table_class</a> = ' not_required';
<a name="l2845"><span class="linenum">2845</span></a>      }
<a name="l2846"><span class="linenum">2846</span></a>  
<a name="l2847"><span class="linenum">2847</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('switch_layout')" href="../../../../_functions/switch_layout.html" onMouseOver="funcPopup(event,'switch_layout')">switch_layout</a>( 'table' );
<a name="l2848"><span class="linenum">2848</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('formstart')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../../../_variables/formstart.html">formstart</a> = '&lt;table id=&quot;item_locations&quot; cellspacing=&quot;0&quot; class=&quot;fform'.<a class="var it6830" onMouseOver="hilite(6830)" onMouseOut="lolite()" onClick="logVariable('table_class')" href="../../../../_variables/table_class.html">$table_class</a>.'&quot;&gt;'.&quot;\n&quot;;
<a name="l2849"><span class="linenum">2849</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('labelstart')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../../../_variables/labelstart.html">labelstart</a> = '&lt;td class=&quot;right&quot;&gt;&lt;strong&gt;';
<a name="l2850"><span class="linenum">2850</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('labelend')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../../../_variables/labelend.html">labelend</a> = '&lt;/strong&gt;&lt;/td&gt;';
<a name="l2851"><span class="linenum">2851</span></a>  
<a name="l2852"><span class="linenum">2852</span></a>      echo <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('formstart')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../../../_variables/formstart.html">formstart</a>;
<a name="l2853"><span class="linenum">2853</span></a>  
<a name="l2854"><span class="linenum">2854</span></a>      <a class="var it3484" onMouseOver="hilite(3484)" onMouseOut="lolite()" onClick="logVariable('button_refresh_regional')" href="../../../../_variables/button_refresh_regional.html">$button_refresh_regional</a> = '&lt;button id=&quot;%s&quot; type=&quot;submit&quot; name=&quot;actionArray[edit_switchtab]&quot; class=&quot;action_icon refresh_button&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'refresh' ).'&lt;/button&gt;';
<a name="l2855"><span class="linenum">2855</span></a>      <a class="var it3484" onMouseOver="hilite(3484)" onMouseOut="lolite()" onClick="logVariable('button_refresh_regional')" href="../../../../_variables/button_refresh_regional.html">$button_refresh_regional</a> .= '&lt;img src=&quot;'.<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../../../_variables/rsc_url.html">$rsc_url</a>.'img/ajax-loader.gif&quot; alt=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Loading...').'&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Loading...').'&quot; style=&quot;display:none;margin-left:5px&quot; align=&quot;top&quot; /&gt;';
<a name="l2856"><span class="linenum">2856</span></a>  
<a name="l2857"><span class="linenum">2857</span></a>  <span class="comment">    // Country</span>
<a name="l2858"><span class="linenum">2858</span></a>      <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('CountryCache')" href="../../../../_variables/CountryCache.html">$CountryCache</a> = &amp; get_CountryCache();
<a name="l2859"><span class="linenum">2859</span></a>      <a class="var it5117" onMouseOver="hilite(5117)" onMouseOut="lolite()" onClick="logVariable('country_is_required')" href="../../../../_variables/country_is_required.html">$country_is_required</a> = ( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'location_country' ) == 'required' );
<a name="l2860"><span class="linenum">2860</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('select_country')" href="../../../../_functions/select_country.html" onMouseOver="funcPopup(event,'select_country')">select_country</a>( 'item_ctry_ID', <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/ctry_ID.html">ctry_ID</a>, <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('CountryCache')" href="../../../../_variables/CountryCache.html">$CountryCache</a>, <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Country'), array( 'required' =&gt; <a class="var it5117" onMouseOver="hilite(5117)" onMouseOut="lolite()" onClick="logVariable('country_is_required')" href="../../../../_variables/country_is_required.html">$country_is_required</a>, 'allow_none' =&gt; true ) );
<a name="l2861"><span class="linenum">2861</span></a>  
<a name="l2862"><span class="linenum">2862</span></a>      if( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('region_visible')" href="../../../../_functions/region_visible.html" onMouseOver="funcPopup(event,'region_visible')">region_visible</a>() )
<a name="l2863"><span class="linenum">2863</span></a>      { // Region
<a name="l2864"><span class="linenum">2864</span></a>          <a class="var it5118" onMouseOver="hilite(5118)" onMouseOut="lolite()" onClick="logVariable('region_is_required')" href="../../../../_variables/region_is_required.html">$region_is_required</a> = ( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'location_region' ) == 'required' );
<a name="l2865"><span class="linenum">2865</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('select_input_options')" href="../../../../_functions/select_input_options.html" onMouseOver="funcPopup(event,'select_input_options')">select_input_options</a>( 'item_rgn_ID', <a class="function" onClick="logFunction('get_regions_option_list')" href="../../../../_functions/get_regions_option_list.html" onMouseOver="funcPopup(event,'get_regions_option_list')">get_regions_option_list</a>( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/ctry_ID.html">ctry_ID</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/rgn_ID.html">rgn_ID</a>, array( 'none_option_text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Unknown' ) ) ), <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Region' ), sprintf( <a class="var it3484" onMouseOver="hilite(3484)" onMouseOut="lolite()" onClick="logVariable('button_refresh_regional')" href="../../../../_variables/button_refresh_regional.html">$button_refresh_regional</a>, 'button_refresh_region' ), array( 'required' =&gt; <a class="var it5118" onMouseOver="hilite(5118)" onMouseOut="lolite()" onClick="logVariable('region_is_required')" href="../../../../_variables/region_is_required.html">$region_is_required</a> ) );
<a name="l2866"><span class="linenum">2866</span></a>      }
<a name="l2867"><span class="linenum">2867</span></a>  
<a name="l2868"><span class="linenum">2868</span></a>      if( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('subregion_visible')" href="../../../../_functions/subregion_visible.html" onMouseOver="funcPopup(event,'subregion_visible')">subregion_visible</a>() )
<a name="l2869"><span class="linenum">2869</span></a>      { // Subregion
<a name="l2870"><span class="linenum">2870</span></a>          <a class="var it5119" onMouseOver="hilite(5119)" onMouseOut="lolite()" onClick="logVariable('subregion_is_required')" href="../../../../_variables/subregion_is_required.html">$subregion_is_required</a> = ( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'location_subregion' ) == 'required' );
<a name="l2871"><span class="linenum">2871</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('select_input_options')" href="../../../../_functions/select_input_options.html" onMouseOver="funcPopup(event,'select_input_options')">select_input_options</a>( 'item_subrg_ID', <a class="function" onClick="logFunction('get_subregions_option_list')" href="../../../../_functions/get_subregions_option_list.html" onMouseOver="funcPopup(event,'get_subregions_option_list')">get_subregions_option_list</a>( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/rgn_ID.html">rgn_ID</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('subrg_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/subrg_ID.html">subrg_ID</a>, array( 'none_option_text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Unknown' ) ) ), <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Sub-region' ), sprintf( <a class="var it3484" onMouseOver="hilite(3484)" onMouseOut="lolite()" onClick="logVariable('button_refresh_regional')" href="../../../../_variables/button_refresh_regional.html">$button_refresh_regional</a>, 'button_refresh_subregion' ), array( 'required' =&gt; <a class="var it5119" onMouseOver="hilite(5119)" onMouseOut="lolite()" onClick="logVariable('subregion_is_required')" href="../../../../_variables/subregion_is_required.html">$subregion_is_required</a> ) );
<a name="l2872"><span class="linenum">2872</span></a>      }
<a name="l2873"><span class="linenum">2873</span></a>  
<a name="l2874"><span class="linenum">2874</span></a>      if( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('city_visible')" href="../../../../_functions/city_visible.html" onMouseOver="funcPopup(event,'city_visible')">city_visible</a>() )
<a name="l2875"><span class="linenum">2875</span></a>      { // City
<a name="l2876"><span class="linenum">2876</span></a>          <a class="var it5120" onMouseOver="hilite(5120)" onMouseOut="lolite()" onClick="logVariable('city_is_required')" href="../../../../_variables/city_is_required.html">$city_is_required</a> = ( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'location_city' ) == 'required' );
<a name="l2877"><span class="linenum">2877</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('select_input_options')" href="../../../../_functions/select_input_options.html" onMouseOver="funcPopup(event,'select_input_options')">select_input_options</a>( 'item_city_ID', <a class="function" onClick="logFunction('get_cities_option_list')" href="../../../../_functions/get_cities_option_list.html" onMouseOver="funcPopup(event,'get_cities_option_list')">get_cities_option_list</a>( <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/ctry_ID.html">ctry_ID</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/rgn_ID.html">rgn_ID</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('subrg_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/subrg_ID.html">subrg_ID</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('city_ID')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/city_ID.html">city_ID</a>, array( 'none_option_text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Unknown' ) ) ), <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'City' ), sprintf( <a class="var it3484" onMouseOver="hilite(3484)" onMouseOut="lolite()" onClick="logVariable('button_refresh_regional')" href="../../../../_variables/button_refresh_regional.html">$button_refresh_regional</a>, 'button_refresh_city' ), array( 'required' =&gt; <a class="var it5120" onMouseOver="hilite(5120)" onMouseOut="lolite()" onClick="logVariable('city_is_required')" href="../../../../_variables/city_is_required.html">$city_is_required</a> ) );
<a name="l2878"><span class="linenum">2878</span></a>      }
<a name="l2879"><span class="linenum">2879</span></a>  
<a name="l2880"><span class="linenum">2880</span></a>      echo <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('formend')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../../../_variables/formend.html">formend</a>;
<a name="l2881"><span class="linenum">2881</span></a>  
<a name="l2882"><span class="linenum">2882</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('switch_layout')" href="../../../../_functions/switch_layout.html" onMouseOver="funcPopup(event,'switch_layout')">switch_layout</a>( NULL );
<a name="l2883"><span class="linenum">2883</span></a>  
<a name="l2884"><span class="linenum">2884</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_fieldset')" href="../../../../_functions/end_fieldset.html" onMouseOver="funcPopup(event,'end_fieldset')">end_fieldset</a>();
<a name="l2885"><span class="linenum">2885</span></a>  }
<a name="l2886"><span class="linenum">2886</span></a>  
<a name="l2887"><span class="linenum">2887</span></a>  
<a name="l2888"><span class="linenum">2888</span></a>  <span class="comment">/**</span>
<a name="l2889"><span class="linenum">2889</span></a>  <span class="comment"> * Get custom fields for item of current Blog</span>
<a name="l2890"><span class="linenum">2890</span></a>  <span class="comment"> *</span>
<a name="l2891"><span class="linenum">2891</span></a>  <span class="comment"> * @return array Custom fields = array( 'name', 'type', 'title' )</span>
<a name="l2892"><span class="linenum">2892</span></a>  <span class="comment"> */</span>
<a name="l2893"><span class="linenum">2893</span></a>  function <a class="function" onClick="logFunction('get_item_custom_fields')" href="../../../../_functions/get_item_custom_fields.html" onMouseOver="funcPopup(event,'get_item_custom_fields')">get_item_custom_fields</a>()
<a name="l2894"><span class="linenum">2894</span></a>  {
<a name="l2895"><span class="linenum">2895</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l2896"><span class="linenum">2896</span></a>  
<a name="l2897"><span class="linenum">2897</span></a>      <a class="var it4294" onMouseOver="hilite(4294)" onMouseOut="lolite()" onClick="logVariable('custom_fields')" href="../../../../_variables/custom_fields.html">$custom_fields</a> = array();
<a name="l2898"><span class="linenum">2898</span></a>  
<a name="l2899"><span class="linenum">2899</span></a>      if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) )
<a name="l2900"><span class="linenum">2900</span></a>      {    // No Blog
<a name="l2901"><span class="linenum">2901</span></a>          return <a class="var it4294" onMouseOver="hilite(4294)" onMouseOut="lolite()" onClick="logVariable('custom_fields')" href="../../../../_variables/custom_fields.html">$custom_fields</a>;
<a name="l2902"><span class="linenum">2902</span></a>      }
<a name="l2903"><span class="linenum">2903</span></a>  
<a name="l2904"><span class="linenum">2904</span></a>      foreach( array( 'double', 'varchar' ) as <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> )
<a name="l2905"><span class="linenum">2905</span></a>      { // get all types of custom fields
<a name="l2906"><span class="linenum">2906</span></a>          <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('count_custom_field')" href="../../../../_variables/count_custom_field.html">$count_custom_field</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'count_custom_'.<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> );
<a name="l2907"><span class="linenum">2907</span></a>          for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> = 1; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> &lt;= <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('count_custom_field')" href="../../../../_variables/count_custom_field.html">$count_custom_field</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>++ )
<a name="l2908"><span class="linenum">2908</span></a>          { // Add each custom field with type <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> to the custom_fields array
<a name="l2909"><span class="linenum">2909</span></a>              <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('field_guid')" href="../../../../_variables/field_guid.html">$field_guid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'custom_'.<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>.<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> );
<a name="l2910"><span class="linenum">2910</span></a>              <a class="var it6831" onMouseOver="hilite(6831)" onMouseOut="lolite()" onClick="logVariable('field_type_guid')" href="../../../../_variables/field_type_guid.html">$field_type_guid</a> = <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>.'_'.<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('field_guid')" href="../../../../_variables/field_guid.html">$field_guid</a>;
<a name="l2911"><span class="linenum">2911</span></a>              <a class="var it6805" onMouseOver="hilite(6805)" onMouseOut="lolite()" onClick="logVariable('field_title')" href="../../../../_variables/field_title.html">$field_title</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'custom_'.<a class="var it6831" onMouseOver="hilite(6831)" onMouseOut="lolite()" onClick="logVariable('field_type_guid')" href="../../../../_variables/field_type_guid.html">$field_type_guid</a> );
<a name="l2912"><span class="linenum">2912</span></a>              <a class="var it6832" onMouseOver="hilite(6832)" onMouseOut="lolite()" onClick="logVariable('field_fname')" href="../../../../_variables/field_fname.html">$field_fname</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'custom_fname_'.<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('field_guid')" href="../../../../_variables/field_guid.html">$field_guid</a> );
<a name="l2913"><span class="linenum">2913</span></a>              if( <a class="var it6805" onMouseOver="hilite(6805)" onMouseOut="lolite()" onClick="logVariable('field_title')" href="../../../../_variables/field_title.html">$field_title</a> &amp;&amp; <a class="var it6832" onMouseOver="hilite(6832)" onMouseOut="lolite()" onClick="logVariable('field_fname')" href="../../../../_variables/field_fname.html">$field_fname</a> )
<a name="l2914"><span class="linenum">2914</span></a>              {
<a name="l2915"><span class="linenum">2915</span></a>                  <a class="var it6833" onMouseOver="hilite(6833)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../../_variables/field_index.html">$field_index</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/\s+/', '_', <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it6832" onMouseOver="hilite(6832)" onMouseOut="lolite()" onClick="logVariable('field_fname')" href="../../../../_variables/field_fname.html">$field_fname</a> ) ) );
<a name="l2916"><span class="linenum">2916</span></a>                  <a class="var it4294" onMouseOver="hilite(4294)" onMouseOut="lolite()" onClick="logVariable('custom_fields')" href="../../../../_variables/custom_fields.html">$custom_fields</a>[<a class="var it6833" onMouseOver="hilite(6833)" onMouseOut="lolite()" onClick="logVariable('field_index')" href="../../../../_variables/field_index.html">$field_index</a>] = array(
<a name="l2917"><span class="linenum">2917</span></a>                          'name' =&gt; <a class="var it6831" onMouseOver="hilite(6831)" onMouseOut="lolite()" onClick="logVariable('field_type_guid')" href="../../../../_variables/field_type_guid.html">$field_type_guid</a>,
<a name="l2918"><span class="linenum">2918</span></a>                          'type' =&gt; <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>,
<a name="l2919"><span class="linenum">2919</span></a>                          'title' =&gt; <a class="var it6805" onMouseOver="hilite(6805)" onMouseOut="lolite()" onClick="logVariable('field_title')" href="../../../../_variables/field_title.html">$field_title</a>
<a name="l2920"><span class="linenum">2920</span></a>                      );
<a name="l2921"><span class="linenum">2921</span></a>              }
<a name="l2922"><span class="linenum">2922</span></a>          }
<a name="l2923"><span class="linenum">2923</span></a>      }
<a name="l2924"><span class="linenum">2924</span></a>  
<a name="l2925"><span class="linenum">2925</span></a>      return <a class="var it4294" onMouseOver="hilite(4294)" onMouseOut="lolite()" onClick="logVariable('custom_fields')" href="../../../../_variables/custom_fields.html">$custom_fields</a>;
<a name="l2926"><span class="linenum">2926</span></a>  }
<a name="l2927"><span class="linenum">2927</span></a>  
<a name="l2928"><span class="linenum">2928</span></a>  
<a name="l2929"><span class="linenum">2929</span></a>  <span class="comment">/**</span>
<a name="l2930"><span class="linenum">2930</span></a>  <span class="comment"> * Display custom field settings as hidden input values</span>
<a name="l2931"><span class="linenum">2931</span></a>  <span class="comment"> *</span>
<a name="l2932"><span class="linenum">2932</span></a>  <span class="comment"> * @param object Form</span>
<a name="l2933"><span class="linenum">2933</span></a>  <span class="comment"> * @param object edited Item</span>
<a name="l2934"><span class="linenum">2934</span></a>  <span class="comment"> */</span>
<a name="l2935"><span class="linenum">2935</span></a>  function <a class="function" onClick="logFunction('display_hidden_custom_fields')" href="../../../../_functions/display_hidden_custom_fields.html" onMouseOver="funcPopup(event,'display_hidden_custom_fields')">display_hidden_custom_fields</a>( &amp; <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>, &amp; <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a> )
<a name="l2936"><span class="linenum">2936</span></a>  {
<a name="l2937"><span class="linenum">2937</span></a>      <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l2938"><span class="linenum">2938</span></a>  
<a name="l2939"><span class="linenum">2939</span></a>      foreach( array( 'double', 'varchar' ) as <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> )
<a name="l2940"><span class="linenum">2940</span></a>      { // get all types of custom fields
<a name="l2941"><span class="linenum">2941</span></a>          <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('count_custom_field')" href="../../../../_variables/count_custom_field.html">$count_custom_field</a> = <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'count_custom_'.<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> );
<a name="l2942"><span class="linenum">2942</span></a>          for( <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> = 1; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> &lt;= <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('count_custom_field')" href="../../../../_variables/count_custom_field.html">$count_custom_field</a>; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>++ )
<a name="l2943"><span class="linenum">2943</span></a>          { // For each custom field with type <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>:
<a name="l2944"><span class="linenum">2944</span></a>              <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('field_guid')" href="../../../../_variables/field_guid.html">$field_guid</a> = <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'custom_'.<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>.<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> );
<a name="l2945"><span class="linenum">2945</span></a>              <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'item_'.<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>.'_'.<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('field_guid')" href="../../../../_variables/field_guid.html">$field_guid</a>, <a class="var it979" onMouseOver="hilite(979)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'custom_'.<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>.'_'.<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('field_guid')" href="../../../../_variables/field_guid.html">$field_guid</a> ) );
<a name="l2946"><span class="linenum">2946</span></a>          }
<a name="l2947"><span class="linenum">2947</span></a>      }
<a name="l2948"><span class="linenum">2948</span></a>  }
<a name="l2949"><span class="linenum">2949</span></a>  
<a name="l2950"><span class="linenum">2950</span></a>  
<a name="l2951"><span class="linenum">2951</span></a>  <span class="comment">/**</span>
<a name="l2952"><span class="linenum">2952</span></a>  <span class="comment"> * Log a creating of new item (Increase counter in global cache)</span>
<a name="l2953"><span class="linenum">2953</span></a>  <span class="comment"> *</span>
<a name="l2954"><span class="linenum">2954</span></a>  <span class="comment"> * @param string Source of item creation ( 'through_admin', 'through_xmlrpc', 'through_email' )</span>
<a name="l2955"><span class="linenum">2955</span></a>  <span class="comment"> */</span>
<a name="l2956"><span class="linenum">2956</span></a>  function <a class="function" onClick="logFunction('log_new_item_create')" href="../../../../_functions/log_new_item_create.html" onMouseOver="funcPopup(event,'log_new_item_create')">log_new_item_create</a>( <a class="var it6834" onMouseOver="hilite(6834)" onMouseOut="lolite()" onClick="logVariable('created_through')" href="../../../../_variables/created_through.html">$created_through</a> )
<a name="l2957"><span class="linenum">2957</span></a>  {
<a name="l2958"><span class="linenum">2958</span></a>      <span class="comment">/**</span>
<a name="l2959"><span class="linenum">2959</span></a>  <span class="comment">     * @var AbstractSettings</span>
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment">     */</span>
<a name="l2961"><span class="linenum">2961</span></a>      global <a class="var it580" onMouseOver="hilite(580)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../../../_variables/global_Cache.html">$global_Cache</a>;
<a name="l2962"><span class="linenum">2962</span></a>  
<a name="l2963"><span class="linenum">2963</span></a>      if( empty( <a class="var it580" onMouseOver="hilite(580)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../../../_variables/global_Cache.html">$global_Cache</a> ) )
<a name="l2964"><span class="linenum">2964</span></a>      {    // Init global cache if it is not <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a> (for example, during on install process)
<a name="l2965"><span class="linenum">2965</span></a>          <a class="var it580" onMouseOver="hilite(580)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../../../_variables/global_Cache.html">$global_Cache</a> = <span class="keyword">new </span><a class="class" onClick="logClass('AbstractSettings')" href="../../../../_classes/abstractsettings.html" onMouseOver="classPopup(event,'abstractsettings')">AbstractSettings</a>( 'T_global__cache', array( 'cach_name' ), 'cach_cache', 0 <span class="comment">/* load all */</span> );
<a name="l2966"><span class="linenum">2966</span></a>      }
<a name="l2967"><span class="linenum">2967</span></a>  
<a name="l2968"><span class="linenum">2968</span></a>      if( !<a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it6834" onMouseOver="hilite(6834)" onMouseOut="lolite()" onClick="logVariable('created_through')" href="../../../../_variables/created_through.html">$created_through</a>, array( 'through_admin', 'through_xmlrpc', 'through_email' ) ) )
<a name="l2969"><span class="linenum">2969</span></a>      {    // Set default value if source is wrong
<a name="l2970"><span class="linenum">2970</span></a>          <a class="var it6834" onMouseOver="hilite(6834)" onMouseOut="lolite()" onClick="logVariable('created_through')" href="../../../../_variables/created_through.html">$created_through</a> = 'through_admin';
<a name="l2971"><span class="linenum">2971</span></a>      }
<a name="l2972"><span class="linenum">2972</span></a>  
<a name="l2973"><span class="linenum">2973</span></a>  <span class="comment">    // Set variable name for current post counter</span>
<a name="l2974"><span class="linenum">2974</span></a>      <a class="var it6835" onMouseOver="hilite(6835)" onMouseOut="lolite()" onClick="logVariable('cache_var_name')" href="../../../../_variables/cache_var_name.html">$cache_var_name</a> = 'post_'.<a class="var it6834" onMouseOver="hilite(6834)" onMouseOut="lolite()" onClick="logVariable('created_through')" href="../../../../_variables/created_through.html">$created_through</a>;
<a name="l2975"><span class="linenum">2975</span></a>  
<a name="l2976"><span class="linenum">2976</span></a>  <span class="comment">    // Get previuos counter value</span>
<a name="l2977"><span class="linenum">2977</span></a>      <a class="var it1901" onMouseOver="hilite(1901)" onMouseOut="lolite()" onClick="logVariable('counter')" href="../../../../_variables/counter.html">$counter</a> = (int) <a class="var it580" onMouseOver="hilite(580)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../../../_variables/global_Cache.html">$global_Cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it6835" onMouseOver="hilite(6835)" onMouseOut="lolite()" onClick="logVariable('cache_var_name')" href="../../../../_variables/cache_var_name.html">$cache_var_name</a> );
<a name="l2978"><span class="linenum">2978</span></a>  
<a name="l2979"><span class="linenum">2979</span></a>  <span class="comment">    // Increase counter</span>
<a name="l2980"><span class="linenum">2980</span></a>      <a class="var it580" onMouseOver="hilite(580)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../../../_variables/global_Cache.html">$global_Cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it6835" onMouseOver="hilite(6835)" onMouseOut="lolite()" onClick="logVariable('cache_var_name')" href="../../../../_variables/cache_var_name.html">$cache_var_name</a>, <a class="var it1901" onMouseOver="hilite(1901)" onMouseOut="lolite()" onClick="logVariable('counter')" href="../../../../_variables/counter.html">$counter</a> + 1 );
<a name="l2981"><span class="linenum">2981</span></a>  
<a name="l2982"><span class="linenum">2982</span></a>  <span class="comment">    // Update the changed data in global cache</span>
<a name="l2983"><span class="linenum">2983</span></a>      <a class="var it580" onMouseOver="hilite(580)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../../../_variables/global_Cache.html">$global_Cache</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l2984"><span class="linenum">2984</span></a>  }
<a name="l2985"><span class="linenum">2985</span></a>  
<a name="l2986"><span class="linenum">2986</span></a>  
<a name="l2987"><span class="linenum">2987</span></a>  <span class="comment">/**</span>
<a name="l2988"><span class="linenum">2988</span></a>  <span class="comment"> * Prepare item content</span>
<a name="l2989"><span class="linenum">2989</span></a>  <span class="comment"> *</span>
<a name="l2990"><span class="linenum">2990</span></a>  <span class="comment"> * @param string Content</span>
<a name="l2991"><span class="linenum">2991</span></a>  <span class="comment"> * @return string Content</span>
<a name="l2992"><span class="linenum">2992</span></a>  <span class="comment"> */</span>
<a name="l2993"><span class="linenum">2993</span></a>  function <a class="function" onClick="logFunction('prepare_item_content')" href="../../../../_functions/prepare_item_content.html" onMouseOver="funcPopup(event,'prepare_item_content')">prepare_item_content</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> )
<a name="l2994"><span class="linenum">2994</span></a>  {
<a name="l2995"><span class="linenum">2995</span></a>  <span class="comment">    // Convert the content separators to new format:</span>
<a name="l2996"><span class="linenum">2996</span></a>      <a class="var it6836" onMouseOver="hilite(6836)" onMouseOut="lolite()" onClick="logVariable('old_separators')" href="../../../../_variables/old_separators.html">$old_separators</a> = array(
<a name="l2997"><span class="linenum">2997</span></a>              '&amp;lt;!--more--&amp;gt;', '&lt;!--more--&gt;', '&lt;p&gt;[teaserbreak]&lt;/p&gt;',
<a name="l2998"><span class="linenum">2998</span></a>              '&amp;lt;!--nextpage--&amp;gt;', '&lt;!--nextpage--&gt;', '&lt;p&gt;[pagebreak]&lt;/p&gt;'
<a name="l2999"><span class="linenum">2999</span></a>          );
<a name="l3000"><span class="linenum">3000</span></a>      <a class="var it6837" onMouseOver="hilite(6837)" onMouseOut="lolite()" onClick="logVariable('new_separators')" href="../../../../_variables/new_separators.html">$new_separators</a> = array(
<a name="l3001"><span class="linenum">3001</span></a>              '[teaserbreak]', '[teaserbreak]', '[teaserbreak]',
<a name="l3002"><span class="linenum">3002</span></a>              '[pagebreak]', '[pagebreak]', '[pagebreak]'
<a name="l3003"><span class="linenum">3003</span></a>          );
<a name="l3004"><span class="linenum">3004</span></a>      if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>, '&lt;code' ) !== false || <a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>, '&lt;pre' ) !== false )
<a name="l3005"><span class="linenum">3005</span></a>      { // Call prepare_item_content_callback() on everything outside code/pre:
<a name="l3006"><span class="linenum">3006</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('callback_on_non_matching_blocks')" href="../../../../_functions/callback_on_non_matching_blocks.html" onMouseOver="funcPopup(event,'callback_on_non_matching_blocks')">callback_on_non_matching_blocks</a>( <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>,
<a name="l3007"><span class="linenum">3007</span></a>              '~&lt;(code|pre)[^&gt;]*&gt;.*?&lt;/\1&gt;~is',
<a name="l3008"><span class="linenum">3008</span></a>              'replace_content', array( <a class="var it6836" onMouseOver="hilite(6836)" onMouseOut="lolite()" onClick="logVariable('old_separators')" href="../../../../_variables/old_separators.html">$old_separators</a>, <a class="var it6837" onMouseOver="hilite(6837)" onMouseOut="lolite()" onClick="logVariable('new_separators')" href="../../../../_variables/new_separators.html">$new_separators</a>, 'str' ) );
<a name="l3009"><span class="linenum">3009</span></a>      }
<a name="l3010"><span class="linenum">3010</span></a>      else
<a name="l3011"><span class="linenum">3011</span></a>      { // No code/pre blocks, replace on the whole thing
<a name="l3012"><span class="linenum">3012</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( <a class="var it6836" onMouseOver="hilite(6836)" onMouseOut="lolite()" onClick="logVariable('old_separators')" href="../../../../_variables/old_separators.html">$old_separators</a>, <a class="var it6837" onMouseOver="hilite(6837)" onMouseOut="lolite()" onClick="logVariable('new_separators')" href="../../../../_variables/new_separators.html">$new_separators</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> );
<a name="l3013"><span class="linenum">3013</span></a>      }
<a name="l3014"><span class="linenum">3014</span></a>  
<a name="l3015"><span class="linenum">3015</span></a>      return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>;
<a name="l3016"><span class="linenum">3016</span></a>  }
<a name="l3017"><span class="linenum">3017</span></a>  
<a name="l3018"><span class="linenum">3018</span></a>  
<a name="l3019"><span class="linenum">3019</span></a>  <span class="comment">/**</span>
<a name="l3020"><span class="linenum">3020</span></a>  <span class="comment"> * Get priority titles of an item</span>
<a name="l3021"><span class="linenum">3021</span></a>  <span class="comment"> *</span>
<a name="l3022"><span class="linenum">3022</span></a>  <span class="comment"> * @param boolean TRUE - to include null value</span>
<a name="l3023"><span class="linenum">3023</span></a>  <span class="comment"> * @return array Priority titles</span>
<a name="l3024"><span class="linenum">3024</span></a>  <span class="comment"> */</span>
<a name="l3025"><span class="linenum">3025</span></a>  function <a class="function" onClick="logFunction('item_priority_titles')" href="../../../../_functions/item_priority_titles.html" onMouseOver="funcPopup(event,'item_priority_titles')">item_priority_titles</a>( <a class="var it6838" onMouseOver="hilite(6838)" onMouseOut="lolite()" onClick="logVariable('include_null_value')" href="../../../../_variables/include_null_value.html">$include_null_value</a> = true )
<a name="l3026"><span class="linenum">3026</span></a>  {
<a name="l3027"><span class="linenum">3027</span></a>      <a class="var it6839" onMouseOver="hilite(6839)" onMouseOut="lolite()" onClick="logVariable('priorities')" href="../../../../_variables/priorities.html">$priorities</a> = array();
<a name="l3028"><span class="linenum">3028</span></a>  
<a name="l3029"><span class="linenum">3029</span></a>      if( <a class="var it6838" onMouseOver="hilite(6838)" onMouseOut="lolite()" onClick="logVariable('include_null_value')" href="../../../../_variables/include_null_value.html">$include_null_value</a> )
<a name="l3030"><span class="linenum">3030</span></a>      {
<a name="l3031"><span class="linenum">3031</span></a>          <a class="var it6839" onMouseOver="hilite(6839)" onMouseOut="lolite()" onClick="logVariable('priorities')" href="../../../../_variables/priorities.html">$priorities</a>[0] = <span class="comment">/* TRANS: &quot;None&quot; select option */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No priority');
<a name="l3032"><span class="linenum">3032</span></a>      }
<a name="l3033"><span class="linenum">3033</span></a>  
<a name="l3034"><span class="linenum">3034</span></a>      <a class="var it6839" onMouseOver="hilite(6839)" onMouseOut="lolite()" onClick="logVariable('priorities')" href="../../../../_variables/priorities.html">$priorities</a> += array(
<a name="l3035"><span class="linenum">3035</span></a>              1 =&gt; <span class="comment">/* TRANS: Priority name */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('1 - Highest'),
<a name="l3036"><span class="linenum">3036</span></a>              2 =&gt; <span class="comment">/* TRANS: Priority name */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('2 - High'),
<a name="l3037"><span class="linenum">3037</span></a>              3 =&gt; <span class="comment">/* TRANS: Priority name */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('3 - Medium'),
<a name="l3038"><span class="linenum">3038</span></a>              4 =&gt; <span class="comment">/* TRANS: Priority name */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('4 - Low'),
<a name="l3039"><span class="linenum">3039</span></a>              5 =&gt; <span class="comment">/* TRANS: Priority name */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('5 - Lowest'),
<a name="l3040"><span class="linenum">3040</span></a>          );
<a name="l3041"><span class="linenum">3041</span></a>  
<a name="l3042"><span class="linenum">3042</span></a>      return <a class="var it6839" onMouseOver="hilite(6839)" onMouseOut="lolite()" onClick="logVariable('priorities')" href="../../../../_variables/priorities.html">$priorities</a>;
<a name="l3043"><span class="linenum">3043</span></a>  }
<a name="l3044"><span class="linenum">3044</span></a>  
<a name="l3045"><span class="linenum">3045</span></a>  
<a name="l3046"><span class="linenum">3046</span></a>  <span class="comment">/**</span>
<a name="l3047"><span class="linenum">3047</span></a>  <span class="comment"> * Get priority colors of an item</span>
<a name="l3048"><span class="linenum">3048</span></a>  <span class="comment"> *</span>
<a name="l3049"><span class="linenum">3049</span></a>  <span class="comment"> * @return array Priority values</span>
<a name="l3050"><span class="linenum">3050</span></a>  <span class="comment"> */</span>
<a name="l3051"><span class="linenum">3051</span></a>  function <a class="function" onClick="logFunction('item_priority_colors')" href="../../../../_functions/item_priority_colors.html" onMouseOver="funcPopup(event,'item_priority_colors')">item_priority_colors</a>()
<a name="l3052"><span class="linenum">3052</span></a>  {
<a name="l3053"><span class="linenum">3053</span></a>      return array(
<a name="l3054"><span class="linenum">3054</span></a>              1 =&gt; 'CB4D4D', // Highest
<a name="l3055"><span class="linenum">3055</span></a>              2 =&gt; 'E09952', // High
<a name="l3056"><span class="linenum">3056</span></a>              3 =&gt; 'DBDB57', // Medium
<a name="l3057"><span class="linenum">3057</span></a>              4 =&gt; '34B27D', // Low
<a name="l3058"><span class="linenum">3058</span></a>              5 =&gt; '4D77CB', // Lowest
<a name="l3059"><span class="linenum">3059</span></a>          );
<a name="l3060"><span class="linenum">3060</span></a>  }
<a name="l3061"><span class="linenum">3061</span></a>  
<a name="l3062"><span class="linenum">3062</span></a>  
<a name="l3063"><span class="linenum">3063</span></a>  <span class="comment">/**</span>
<a name="l3064"><span class="linenum">3064</span></a>  <span class="comment"> * Get priority title of an item by priority value</span>
<a name="l3065"><span class="linenum">3065</span></a>  <span class="comment"> *</span>
<a name="l3066"><span class="linenum">3066</span></a>  <span class="comment"> * @param integer Priority value</span>
<a name="l3067"><span class="linenum">3067</span></a>  <span class="comment"> * @return string Priority title</span>
<a name="l3068"><span class="linenum">3068</span></a>  <span class="comment"> */</span>
<a name="l3069"><span class="linenum">3069</span></a>  function <a class="function" onClick="logFunction('item_priority_title')" href="../../../../_functions/item_priority_title.html" onMouseOver="funcPopup(event,'item_priority_title')">item_priority_title</a>( <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> )
<a name="l3070"><span class="linenum">3070</span></a>  {
<a name="l3071"><span class="linenum">3071</span></a>      <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../../_variables/titles.html">$titles</a> = <a class="function" onClick="logFunction('item_priority_titles')" href="../../../../_functions/item_priority_titles.html" onMouseOver="funcPopup(event,'item_priority_titles')">item_priority_titles</a>();
<a name="l3072"><span class="linenum">3072</span></a>  
<a name="l3073"><span class="linenum">3073</span></a>      return isset( <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../../_variables/titles.html">$titles</a>[ <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> ] ) ? <a class="var it1341" onMouseOver="hilite(1341)" onMouseOut="lolite()" onClick="logVariable('titles')" href="../../../../_variables/titles.html">$titles</a>[ <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> ] : <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a>;
<a name="l3074"><span class="linenum">3074</span></a>  }
<a name="l3075"><span class="linenum">3075</span></a>  
<a name="l3076"><span class="linenum">3076</span></a>  
<a name="l3077"><span class="linenum">3077</span></a>  <span class="comment">/**</span>
<a name="l3078"><span class="linenum">3078</span></a>  <span class="comment"> * Get priority color of an item by priority value</span>
<a name="l3079"><span class="linenum">3079</span></a>  <span class="comment"> *</span>
<a name="l3080"><span class="linenum">3080</span></a>  <span class="comment"> * @param string Priority value</span>
<a name="l3081"><span class="linenum">3081</span></a>  <span class="comment"> * @return string Color value</span>
<a name="l3082"><span class="linenum">3082</span></a>  <span class="comment"> */</span>
<a name="l3083"><span class="linenum">3083</span></a>  function <a class="function" onClick="logFunction('item_priority_color')" href="../../../../_functions/item_priority_color.html" onMouseOver="funcPopup(event,'item_priority_color')">item_priority_color</a>( <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> )
<a name="l3084"><span class="linenum">3084</span></a>  {
<a name="l3085"><span class="linenum">3085</span></a>      <a class="var it358" onMouseOver="hilite(358)" onMouseOut="lolite()" onClick="logVariable('colors')" href="../../../../_variables/colors.html">$colors</a> = <a class="function" onClick="logFunction('item_priority_colors')" href="../../../../_functions/item_priority_colors.html" onMouseOver="funcPopup(event,'item_priority_colors')">item_priority_colors</a>();
<a name="l3086"><span class="linenum">3086</span></a>  
<a name="l3087"><span class="linenum">3087</span></a>      return isset( <a class="var it358" onMouseOver="hilite(358)" onMouseOut="lolite()" onClick="logVariable('colors')" href="../../../../_variables/colors.html">$colors</a>[ <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> ] ) ? '#'.<a class="var it358" onMouseOver="hilite(358)" onMouseOut="lolite()" onClick="logVariable('colors')" href="../../../../_variables/colors.html">$colors</a>[ <a class="var it248" onMouseOver="hilite(248)" onMouseOut="lolite()" onClick="logVariable('priority')" href="../../../../_variables/priority.html">$priority</a> ] : 'none';
<a name="l3088"><span class="linenum">3088</span></a>  }
<a name="l3089"><span class="linenum">3089</span></a>  
<a name="l3090"><span class="linenum">3090</span></a>  
<a name="l3091"><span class="linenum">3091</span></a>  <span class="comment">/**</span>
<a name="l3092"><span class="linenum">3092</span></a>  <span class="comment"> * Display the manual pages results table</span>
<a name="l3093"><span class="linenum">3093</span></a>  <span class="comment"> *</span>
<a name="l3094"><span class="linenum">3094</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3095"><span class="linenum">3095</span></a>  <span class="comment"> */</span>
<a name="l3096"><span class="linenum">3096</span></a>  function <a class="function" onClick="logFunction('items_manual_results_block')" href="../../../../_functions/items_manual_results_block.html" onMouseOver="funcPopup(event,'items_manual_results_block')">items_manual_results_block</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l3097"><span class="linenum">3097</span></a>  {
<a name="l3098"><span class="linenum">3098</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l3099"><span class="linenum">3099</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3100"><span class="linenum">3100</span></a>              'results_param_prefix' =&gt; 'items_manual_',
<a name="l3101"><span class="linenum">3101</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3102"><span class="linenum">3102</span></a>  
<a name="l3103"><span class="linenum">3103</span></a>      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l3104"><span class="linenum">3104</span></a>      { // Only logged in users can access to this function
<a name="l3105"><span class="linenum">3105</span></a>          return;
<a name="l3106"><span class="linenum">3106</span></a>      }
<a name="l3107"><span class="linenum">3107</span></a>  
<a name="l3108"><span class="linenum">3108</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>, <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>;
<a name="l3109"><span class="linenum">3109</span></a>  
<a name="l3110"><span class="linenum">3110</span></a>      <a class="var it1285" onMouseOver="hilite(1285)" onMouseOut="lolite()" onClick="logVariable('result_fadeout')" href="../../../../_variables/result_fadeout.html">$result_fadeout</a> = <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'fadeout_array' );
<a name="l3111"><span class="linenum">3111</span></a>  
<a name="l3112"><span class="linenum">3112</span></a>      <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'cat_ID', 'integer', 0, true );
<a name="l3113"><span class="linenum">3113</span></a>  
<a name="l3114"><span class="linenum">3114</span></a>      if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) )
<a name="l3115"><span class="linenum">3115</span></a>      { // Init Blog
<a name="l3116"><span class="linenum">3116</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l3117"><span class="linenum">3117</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('get_param')" href="../../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'blog' );
<a name="l3118"><span class="linenum">3118</span></a>          if( !empty( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) )
<a name="l3119"><span class="linenum">3119</span></a>          { // Get Blog by ID
<a name="l3120"><span class="linenum">3120</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, false );
<a name="l3121"><span class="linenum">3121</span></a>          }
<a name="l3122"><span class="linenum">3122</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) &amp;&amp; !empty( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a> ) )
<a name="l3123"><span class="linenum">3123</span></a>          { // Get Blog from chapter ID
<a name="l3124"><span class="linenum">3124</span></a>              <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l3125"><span class="linenum">3125</span></a>              if( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>, false ) )
<a name="l3126"><span class="linenum">3126</span></a>              {
<a name="l3127"><span class="linenum">3127</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> = <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;get_Blog();
<a name="l3128"><span class="linenum">3128</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l3129"><span class="linenum">3129</span></a>              }
<a name="l3130"><span class="linenum">3130</span></a>          }
<a name="l3131"><span class="linenum">3131</span></a>      }
<a name="l3132"><span class="linenum">3132</span></a>  
<a name="l3133"><span class="linenum">3133</span></a>      if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'type' ) != 'manual' )
<a name="l3134"><span class="linenum">3134</span></a>      { // No Blog, Exit here
<a name="l3135"><span class="linenum">3135</span></a>          return;
<a name="l3136"><span class="linenum">3136</span></a>      }
<a name="l3137"><span class="linenum">3137</span></a>  
<a name="l3138"><span class="linenum">3138</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l3139"><span class="linenum">3139</span></a>      {
<a name="l3140"><span class="linenum">3140</span></a>          <a class="var it4382" onMouseOver="hilite(4382)" onMouseOut="lolite()" onClick="logVariable('order_action')" href="../../../../_variables/order_action.html">$order_action</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'order_action', 'string' );
<a name="l3141"><span class="linenum">3141</span></a>  
<a name="l3142"><span class="linenum">3142</span></a>          if( <a class="var it4382" onMouseOver="hilite(4382)" onMouseOut="lolite()" onClick="logVariable('order_action')" href="../../../../_variables/order_action.html">$order_action</a> == 'update' )
<a name="l3143"><span class="linenum">3143</span></a>          { // Update an order to new value
<a name="l3144"><span class="linenum">3144</span></a>              <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a> = (int)<a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_value', 'string', 0 );
<a name="l3145"><span class="linenum">3145</span></a>              <a class="var it4384" onMouseOver="hilite(4384)" onMouseOut="lolite()" onClick="logVariable('order_data')" href="../../../../_variables/order_data.html">$order_data</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'order_data', 'string' );
<a name="l3146"><span class="linenum">3146</span></a>              <a class="var it4384" onMouseOver="hilite(4384)" onMouseOut="lolite()" onClick="logVariable('order_data')" href="../../../../_variables/order_data.html">$order_data</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( '-', <a class="var it4384" onMouseOver="hilite(4384)" onMouseOut="lolite()" onClick="logVariable('order_data')" href="../../../../_variables/order_data.html">$order_data</a> );
<a name="l3147"><span class="linenum">3147</span></a>              <a class="var it4385" onMouseOver="hilite(4385)" onMouseOut="lolite()" onClick="logVariable('order_obj_ID')" href="../../../../_variables/order_obj_ID.html">$order_obj_ID</a> = (int)<a class="var it4384" onMouseOver="hilite(4384)" onMouseOut="lolite()" onClick="logVariable('order_data')" href="../../../../_variables/order_data.html">$order_data</a>[2];
<a name="l3148"><span class="linenum">3148</span></a>              if( <a class="var it4385" onMouseOver="hilite(4385)" onMouseOut="lolite()" onClick="logVariable('order_obj_ID')" href="../../../../_variables/order_obj_ID.html">$order_obj_ID</a> &gt; 0 )
<a name="l3149"><span class="linenum">3149</span></a>              {
<a name="l3150"><span class="linenum">3150</span></a>                  switch( <a class="var it4384" onMouseOver="hilite(4384)" onMouseOut="lolite()" onClick="logVariable('order_data')" href="../../../../_variables/order_data.html">$order_data</a>[1] )
<a name="l3151"><span class="linenum">3151</span></a>                  {
<a name="l3152"><span class="linenum">3152</span></a>                      case 'chapter':
<a name="l3153"><span class="linenum">3153</span></a>  <span class="comment">                        // Update chapter order</span>
<a name="l3154"><span class="linenum">3154</span></a>                          <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l3155"><span class="linenum">3155</span></a>                          if( <a class="var it6840" onMouseOver="hilite(6840)" onMouseOut="lolite()" onClick="logVariable('updated_Chapter')" href="../../../../_variables/updated_Chapter.html">$updated_Chapter</a> = &amp; <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID( <a class="var it4385" onMouseOver="hilite(4385)" onMouseOut="lolite()" onClick="logVariable('order_obj_ID')" href="../../../../_variables/order_obj_ID.html">$order_obj_ID</a>, false ) )
<a name="l3156"><span class="linenum">3156</span></a>                          {
<a name="l3157"><span class="linenum">3157</span></a>                              if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_cats', '', false, <a class="var it6840" onMouseOver="hilite(6840)" onMouseOut="lolite()" onClick="logVariable('updated_Chapter')" href="../../../../_variables/updated_Chapter.html">$updated_Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9190" onMouseOver="hilite(9190)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a> ) )
<a name="l3158"><span class="linenum">3158</span></a>                              { // Check permission to edit this Chapter
<a name="l3159"><span class="linenum">3159</span></a>                                  <a class="var it6840" onMouseOver="hilite(6840)" onMouseOut="lolite()" onClick="logVariable('updated_Chapter')" href="../../../../_variables/updated_Chapter.html">$updated_Chapter</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'order', <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a> );
<a name="l3160"><span class="linenum">3160</span></a>                                  <a class="var it6840" onMouseOver="hilite(6840)" onMouseOut="lolite()" onClick="logVariable('updated_Chapter')" href="../../../../_variables/updated_Chapter.html">$updated_Chapter</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l3161"><span class="linenum">3161</span></a>                                  <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l3162"><span class="linenum">3162</span></a>                              }
<a name="l3163"><span class="linenum">3163</span></a>                          }
<a name="l3164"><span class="linenum">3164</span></a>                          break;
<a name="l3165"><span class="linenum">3165</span></a>  
<a name="l3166"><span class="linenum">3166</span></a>                      case 'item':
<a name="l3167"><span class="linenum">3167</span></a>  <span class="comment">                        // Update item order</span>
<a name="l3168"><span class="linenum">3168</span></a>                          <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l3169"><span class="linenum">3169</span></a>                          if( <a class="var it6841" onMouseOver="hilite(6841)" onMouseOut="lolite()" onClick="logVariable('updated_Item')" href="../../../../_variables/updated_Item.html">$updated_Item</a> = &amp; <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_ID( <a class="var it4385" onMouseOver="hilite(4385)" onMouseOut="lolite()" onClick="logVariable('order_obj_ID')" href="../../../../_variables/order_obj_ID.html">$order_obj_ID</a>, false ) )
<a name="l3170"><span class="linenum">3170</span></a>                          {
<a name="l3171"><span class="linenum">3171</span></a>                              if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!CURSTATUS', 'edit', false, <a class="var it6841" onMouseOver="hilite(6841)" onMouseOut="lolite()" onClick="logVariable('updated_Item')" href="../../../../_variables/updated_Item.html">$updated_Item</a> ) )
<a name="l3172"><span class="linenum">3172</span></a>                              { // Check permission to edit this Item
<a name="l3173"><span class="linenum">3173</span></a>                                  <a class="var it6841" onMouseOver="hilite(6841)" onMouseOut="lolite()" onClick="logVariable('updated_Item')" href="../../../../_variables/updated_Item.html">$updated_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'order', <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a> );
<a name="l3174"><span class="linenum">3174</span></a>                                  <a class="var it6841" onMouseOver="hilite(6841)" onMouseOut="lolite()" onClick="logVariable('updated_Item')" href="../../../../_variables/updated_Item.html">$updated_Item</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l3175"><span class="linenum">3175</span></a>                              }
<a name="l3176"><span class="linenum">3176</span></a>                          }
<a name="l3177"><span class="linenum">3177</span></a>                          break;
<a name="l3178"><span class="linenum">3178</span></a>                  }
<a name="l3179"><span class="linenum">3179</span></a>              }
<a name="l3180"><span class="linenum">3180</span></a>          }
<a name="l3181"><span class="linenum">3181</span></a>      }
<a name="l3182"><span class="linenum">3182</span></a>  
<a name="l3183"><span class="linenum">3183</span></a>      <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '_core/ui/_uiwidget.class.php', 'Table' );
<a name="l3184"><span class="linenum">3184</span></a>  
<a name="l3185"><span class="linenum">3185</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Table')" href="../../../../_classes/table.html" onMouseOver="classPopup(event,'table')">Table</a>( NULL, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_param_prefix'] );
<a name="l3186"><span class="linenum">3186</span></a>  
<a name="l3187"><span class="linenum">3187</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a onClick="logVariable('title')" class="var it8990" onMouseOver="hilite(8990)" onMouseOut="lolite()" href="../../../../_variables/title.html">title</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Manual view');
<a name="l3188"><span class="linenum">3188</span></a>  
<a name="l3189"><span class="linenum">3189</span></a>  <span class="comment">    // Redirect to manual pages after adding chapter</span>
<a name="l3190"><span class="linenum">3190</span></a>      <a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('redirect_page')" href="../../../../_variables/redirect_page.html">$redirect_page</a> = '&amp;amp;redirect_page=manual';
<a name="l3191"><span class="linenum">3191</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('global_icon')" href="../../../../_functions/global_icon.html" onMouseOver="funcPopup(event,'global_icon')">global_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Add <span class="keyword">new </span><a class="class" onClick="logClass('chapter')" href="../../../../_classes/chapter.html" onMouseOver="classPopup(event,'chapter')">chapter</a>...'), 'add', <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=chapters&amp;amp;action=new&amp;amp;blog='.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>.<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('redirect_page')" href="../../../../_variables/redirect_page.html">$redirect_page</a>, ' '.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Add top level chapter').' &amp;raquo;', 3, 4 );
<a name="l3192"><span class="linenum">3192</span></a>  
<a name="l3193"><span class="linenum">3193</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a onClick="logVariable('cols')" class="var it8990" onMouseOver="hilite(8990)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3194"><span class="linenum">3194</span></a>                              'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Name'),
<a name="l3195"><span class="linenum">3195</span></a>                          );
<a name="l3196"><span class="linenum">3196</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a onClick="logVariable('cols')" class="var it8990" onMouseOver="hilite(8990)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3197"><span class="linenum">3197</span></a>                              'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('URL &quot;slug&quot;'),
<a name="l3198"><span class="linenum">3198</span></a>                          );
<a name="l3199"><span class="linenum">3199</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a onClick="logVariable('cols')" class="var it8990" onMouseOver="hilite(8990)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3200"><span class="linenum">3200</span></a>                              'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Order'),
<a name="l3201"><span class="linenum">3201</span></a>                              'th_class' =&gt; 'shrinkwrap',
<a name="l3202"><span class="linenum">3202</span></a>                          );
<a name="l3203"><span class="linenum">3203</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a onClick="logVariable('cols')" class="var it8990" onMouseOver="hilite(8990)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3204"><span class="linenum">3204</span></a>                              'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Actions'),
<a name="l3205"><span class="linenum">3205</span></a>                          );
<a name="l3206"><span class="linenum">3206</span></a>  
<a name="l3207"><span class="linenum">3207</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l3208"><span class="linenum">3208</span></a>      { // init results param by template name
<a name="l3209"><span class="linenum">3209</span></a>          if( !isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_type' ] ) || ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_name' ] ) )
<a name="l3210"><span class="linenum">3210</span></a>          {
<a name="l3211"><span class="linenum">3211</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid ajax results request!' );
<a name="l3212"><span class="linenum">3212</span></a>          }
<a name="l3213"><span class="linenum">3213</span></a>          <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('init_params_by_skin')" href="../../../../_functions/init_params_by_skin.html" onMouseOver="funcPopup(event,'init_params_by_skin')">init_params_by_skin</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_type' ], <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_name' ] );
<a name="l3214"><span class="linenum">3214</span></a>      }
<a name="l3215"><span class="linenum">3215</span></a>  
<a name="l3216"><span class="linenum">3216</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('display_init')" href="../../../../_functions/display_init.html" onMouseOver="funcPopup(event,'display_init')">display_init</a>( NULL, <a class="var it1285" onMouseOver="hilite(1285)" onMouseOut="lolite()" onClick="logVariable('result_fadeout')" href="../../../../_variables/result_fadeout.html">$result_fadeout</a> );
<a name="l3217"><span class="linenum">3217</span></a>  
<a name="l3218"><span class="linenum">3218</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('display_head')" href="../../../../_functions/display_head.html" onMouseOver="funcPopup(event,'display_head')">display_head</a>();
<a name="l3219"><span class="linenum">3219</span></a>  
<a name="l3220"><span class="linenum">3220</span></a>      echo <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('replace_vars')" href="../../../../_functions/replace_vars.html" onMouseOver="funcPopup(event,'replace_vars')">replace_vars</a>( <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a onClick="logVariable('params')" class="var it8990" onMouseOver="hilite(8990)" onMouseOut="lolite()" href="../../../../_variables/params.html">params</a>['content_start'] );
<a name="l3221"><span class="linenum">3221</span></a>  
<a name="l3222"><span class="linenum">3222</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('display_list_start')" href="../../../../_functions/display_list_start.html" onMouseOver="funcPopup(event,'display_list_start')">display_list_start</a>();
<a name="l3223"><span class="linenum">3223</span></a>  
<a name="l3224"><span class="linenum">3224</span></a>          <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('display_col_headers')" href="../../../../_functions/display_col_headers.html" onMouseOver="funcPopup(event,'display_col_headers')">display_col_headers</a>();
<a name="l3225"><span class="linenum">3225</span></a>  
<a name="l3226"><span class="linenum">3226</span></a>          <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('display_body_start')" href="../../../../_functions/display_body_start.html" onMouseOver="funcPopup(event,'display_body_start')">display_body_start</a>();
<a name="l3227"><span class="linenum">3227</span></a>  
<a name="l3228"><span class="linenum">3228</span></a>          <a class="function" onClick="logFunction('manual_display_chapters')" href="../../../../_functions/manual_display_chapters.html" onMouseOver="funcPopup(event,'manual_display_chapters')">manual_display_chapters</a>();
<a name="l3229"><span class="linenum">3229</span></a>  
<a name="l3230"><span class="linenum">3230</span></a>          <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('display_body_end')" href="../../../../_functions/display_body_end.html" onMouseOver="funcPopup(event,'display_body_end')">display_body_end</a>();
<a name="l3231"><span class="linenum">3231</span></a>  
<a name="l3232"><span class="linenum">3232</span></a>      <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a class="function" onClick="logFunction('display_list_end')" href="../../../../_functions/display_list_end.html" onMouseOver="funcPopup(event,'display_list_end')">display_list_end</a>();
<a name="l3233"><span class="linenum">3233</span></a>  
<a name="l3234"><span class="linenum">3234</span></a>  <span class="comment">    // Flush fadeout</span>
<a name="l3235"><span class="linenum">3235</span></a>      <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>( 'fadeout_array');
<a name="l3236"><span class="linenum">3236</span></a>  
<a name="l3237"><span class="linenum">3237</span></a>      echo <a class="var it2117" onMouseOver="hilite(2117)" onMouseOut="lolite()" onClick="logVariable('Table')" href="../../../../_variables/Table.html">$Table</a>-&gt;<a onClick="logVariable('params')" class="var it8990" onMouseOver="hilite(8990)" onMouseOut="lolite()" href="../../../../_variables/params.html">params</a>['content_end'];
<a name="l3238"><span class="linenum">3238</span></a>  
<a name="l3239"><span class="linenum">3239</span></a>      if( !<a class="function" onClick="logFunction('is_ajax_content')" href="../../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l3240"><span class="linenum">3240</span></a>      { // Create this hidden div to get a function name for AJAX request
<a name="l3241"><span class="linenum">3241</span></a>          echo '&lt;div id=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_param_prefix'].'ajax_callback&quot; style=&quot;display:none&quot;&gt;'.__FUNCTION__.'&lt;/div&gt;';
<a name="l3242"><span class="linenum">3242</span></a>      }
<a name="l3243"><span class="linenum">3243</span></a>  }
<a name="l3244"><span class="linenum">3244</span></a>  
<a name="l3245"><span class="linenum">3245</span></a>  
<a name="l3246"><span class="linenum">3246</span></a>  <span class="comment">/**</span>
<a name="l3247"><span class="linenum">3247</span></a>  <span class="comment"> * Display the created items results table</span>
<a name="l3248"><span class="linenum">3248</span></a>  <span class="comment"> *</span>
<a name="l3249"><span class="linenum">3249</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3250"><span class="linenum">3250</span></a>  <span class="comment"> */</span>
<a name="l3251"><span class="linenum">3251</span></a>  function <a class="function" onClick="logFunction('items_created_results_block')" href="../../../../_functions/items_created_results_block.html" onMouseOver="funcPopup(event,'items_created_results_block')">items_created_results_block</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l3252"><span class="linenum">3252</span></a>  {
<a name="l3253"><span class="linenum">3253</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l3254"><span class="linenum">3254</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3255"><span class="linenum">3255</span></a>              'edited_User'          =&gt; NULL,
<a name="l3256"><span class="linenum">3256</span></a>              'results_param_prefix' =&gt; 'actv_postown_',
<a name="l3257"><span class="linenum">3257</span></a>              'results_title'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Posts created by the user'),
<a name="l3258"><span class="linenum">3258</span></a>              'results_no_text'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User has not created any posts'),
<a name="l3259"><span class="linenum">3259</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3260"><span class="linenum">3260</span></a>  
<a name="l3261"><span class="linenum">3261</span></a>      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l3262"><span class="linenum">3262</span></a>      {    // Only logged in users can access to this function
<a name="l3263"><span class="linenum">3263</span></a>          return;
<a name="l3264"><span class="linenum">3264</span></a>      }
<a name="l3265"><span class="linenum">3265</span></a>  
<a name="l3266"><span class="linenum">3266</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l3267"><span class="linenum">3267</span></a>      if( !<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'users', 'edit' ) )
<a name="l3268"><span class="linenum">3268</span></a>      {    // Check minimum permission:
<a name="l3269"><span class="linenum">3269</span></a>          return;
<a name="l3270"><span class="linenum">3270</span></a>      }
<a name="l3271"><span class="linenum">3271</span></a>  
<a name="l3272"><span class="linenum">3272</span></a>      <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['edited_User'];
<a name="l3273"><span class="linenum">3273</span></a>      if( !<a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a> )
<a name="l3274"><span class="linenum">3274</span></a>      {    // No defined User, probably the function is calling from AJAX request
<a name="l3275"><span class="linenum">3275</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0 );
<a name="l3276"><span class="linenum">3276</span></a>          if( empty( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l3277"><span class="linenum">3277</span></a>          {    // Bad request, Exit here
<a name="l3278"><span class="linenum">3278</span></a>              return;
<a name="l3279"><span class="linenum">3279</span></a>          }
<a name="l3280"><span class="linenum">3280</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l3281"><span class="linenum">3281</span></a>          if( ( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a>, false ) ) === false )
<a name="l3282"><span class="linenum">3282</span></a>          {    // Bad request, Exit here
<a name="l3283"><span class="linenum">3283</span></a>              return;
<a name="l3284"><span class="linenum">3284</span></a>          }
<a name="l3285"><span class="linenum">3285</span></a>      }
<a name="l3286"><span class="linenum">3286</span></a>  
<a name="l3287"><span class="linenum">3287</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>;
<a name="l3288"><span class="linenum">3288</span></a>  
<a name="l3289"><span class="linenum">3289</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_tab', 'string', '', true );
<a name="l3290"><span class="linenum">3290</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0, true );
<a name="l3291"><span class="linenum">3291</span></a>  
<a name="l3292"><span class="linenum">3292</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l3293"><span class="linenum">3293</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '*' );
<a name="l3294"><span class="linenum">3294</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_items__item' );
<a name="l3295"><span class="linenum">3295</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'post_creator_user_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9038" onMouseOver="hilite(9038)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) );
<a name="l3296"><span class="linenum">3296</span></a>  
<a name="l3297"><span class="linenum">3297</span></a>  <span class="comment">    // Create result set:</span>
<a name="l3298"><span class="linenum">3298</span></a>      <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Results')" href="../../../../_classes/results.html" onMouseOver="classPopup(event,'results')">Results</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_param_prefix'], 'D' );
<a name="l3299"><span class="linenum">3299</span></a>      <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a>-&gt;<a onClick="logVariable('Cache')" class="var it9191" onMouseOver="hilite(9191)" onMouseOut="lolite()" href="../../../../_variables/Cache.html">Cache</a> = &amp; get_ItemCache();
<a name="l3300"><span class="linenum">3300</span></a>      <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a>-&gt;<a onClick="logVariable('title')" class="var it9191" onMouseOver="hilite(9191)" onMouseOut="lolite()" href="../../../../_variables/title.html">title</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_title'];
<a name="l3301"><span class="linenum">3301</span></a>      <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a>-&gt;<a onClick="logVariable('no_results_text')" class="var it9191" onMouseOver="hilite(9191)" onMouseOut="lolite()" href="../../../../_variables/no_results_text.html">no_results_text</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_no_text'];
<a name="l3302"><span class="linenum">3302</span></a>  
<a name="l3303"><span class="linenum">3303</span></a>  <span class="comment">    // Get a count of the post which current user can delete</span>
<a name="l3304"><span class="linenum">3304</span></a>      <a class="var it6843" onMouseOver="hilite(6843)" onMouseOut="lolite()" onClick="logVariable('deleted_posts_created_count')" href="../../../../_variables/deleted_posts_created_count.html">$deleted_posts_created_count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a class="function" onClick="logFunction('get_deleted_posts')" href="../../../../_functions/get_deleted_posts.html" onMouseOver="funcPopup(event,'get_deleted_posts')">get_deleted_posts</a>( 'created' ) );
<a name="l3305"><span class="linenum">3305</span></a>      if( ( <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a>-&gt;<a class="function" onClick="logFunction('get_total_rows')" href="../../../../_functions/get_total_rows.html" onMouseOver="funcPopup(event,'get_total_rows')">get_total_rows</a>() &gt; 0 ) &amp;&amp; ( <a class="var it6843" onMouseOver="hilite(6843)" onMouseOut="lolite()" onClick="logVariable('deleted_posts_created_count')" href="../../../../_variables/deleted_posts_created_count.html">$deleted_posts_created_count</a> &gt; 0 ) )
<a name="l3306"><span class="linenum">3306</span></a>      {    // Display action icon to delete all records if at least one record exists &amp; current user can delete at least one item created by user
<a name="l3307"><span class="linenum">3307</span></a>          <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a>-&gt;<a class="function" onClick="logFunction('global_icon')" href="../../../../_functions/global_icon.html" onMouseOver="funcPopup(event,'global_icon')">global_icon</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete all post created by %s'), <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('login')" class="var it9038" onMouseOver="hilite(9038)" onMouseOut="lolite()" href="../../../../_variables/login.html">login</a> ), 'delete', '?ctrl=user&amp;amp;user_tab=activity&amp;amp;action=delete_all_posts_created&amp;amp;user_ID='.<a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9038" onMouseOver="hilite(9038)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('user'), ' '.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete all'), 3, 4 );
<a name="l3308"><span class="linenum">3308</span></a>      }
<a name="l3309"><span class="linenum">3309</span></a>  
<a name="l3310"><span class="linenum">3310</span></a>  <span class="comment">    // Initialize Results object</span>
<a name="l3311"><span class="linenum">3311</span></a>      <a class="function" onClick="logFunction('items_results')" href="../../../../_functions/items_results.html" onMouseOver="funcPopup(event,'items_results')">items_results</a>( <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a>, array(
<a name="l3312"><span class="linenum">3312</span></a>              'field_prefix' =&gt; 'post_',
<a name="l3313"><span class="linenum">3313</span></a>              'display_ord' =&gt; false,
<a name="l3314"><span class="linenum">3314</span></a>              'display_history' =&gt; false,
<a name="l3315"><span class="linenum">3315</span></a>          ) );
<a name="l3316"><span class="linenum">3316</span></a>  
<a name="l3317"><span class="linenum">3317</span></a>      <a class="var it3188" onMouseOver="hilite(3188)" onMouseOut="lolite()" onClick="logVariable('results_params')" href="../../../../_variables/results_params.html">$results_params</a> = <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'Results' );
<a name="l3318"><span class="linenum">3318</span></a>      <a class="var it571" onMouseOver="hilite(571)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../../../_variables/display_params.html">$display_params</a> = array(
<a name="l3319"><span class="linenum">3319</span></a>          'before' =&gt; <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '&gt;', ' style=&quot;margin-top:25px&quot; id=&quot;created_posts_result&quot;&gt;', <a class="var it3188" onMouseOver="hilite(3188)" onMouseOut="lolite()" onClick="logVariable('results_params')" href="../../../../_variables/results_params.html">$results_params</a>['before'] ),
<a name="l3320"><span class="linenum">3320</span></a>      );
<a name="l3321"><span class="linenum">3321</span></a>  
<a name="l3322"><span class="linenum">3322</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l3323"><span class="linenum">3323</span></a>      { // init results param by template name
<a name="l3324"><span class="linenum">3324</span></a>          if( !isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_type' ] ) || ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_name' ] ) )
<a name="l3325"><span class="linenum">3325</span></a>          {
<a name="l3326"><span class="linenum">3326</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid ajax results request!' );
<a name="l3327"><span class="linenum">3327</span></a>          }
<a name="l3328"><span class="linenum">3328</span></a>          <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a>-&gt;<a class="function" onClick="logFunction('init_params_by_skin')" href="../../../../_functions/init_params_by_skin.html" onMouseOver="funcPopup(event,'init_params_by_skin')">init_params_by_skin</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_type' ], <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_name' ] );
<a name="l3329"><span class="linenum">3329</span></a>      }
<a name="l3330"><span class="linenum">3330</span></a>  
<a name="l3331"><span class="linenum">3331</span></a>      <a class="var it6842" onMouseOver="hilite(6842)" onMouseOut="lolite()" onClick="logVariable('created_items_Results')" href="../../../../_variables/created_items_Results.html">$created_items_Results</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( <a class="var it571" onMouseOver="hilite(571)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../../../_variables/display_params.html">$display_params</a> );
<a name="l3332"><span class="linenum">3332</span></a>  
<a name="l3333"><span class="linenum">3333</span></a>      if( !<a class="function" onClick="logFunction('is_ajax_content')" href="../../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l3334"><span class="linenum">3334</span></a>      {    // Create this hidden div to get a function name for AJAX request
<a name="l3335"><span class="linenum">3335</span></a>          echo '&lt;div id=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_param_prefix'].'ajax_callback&quot; style=&quot;display:none&quot;&gt;'.__FUNCTION__.'&lt;/div&gt;';
<a name="l3336"><span class="linenum">3336</span></a>      }
<a name="l3337"><span class="linenum">3337</span></a>  }
<a name="l3338"><span class="linenum">3338</span></a>  
<a name="l3339"><span class="linenum">3339</span></a>  
<a name="l3340"><span class="linenum">3340</span></a>  <span class="comment">/**</span>
<a name="l3341"><span class="linenum">3341</span></a>  <span class="comment"> * Display the edited items results table</span>
<a name="l3342"><span class="linenum">3342</span></a>  <span class="comment"> *</span>
<a name="l3343"><span class="linenum">3343</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3344"><span class="linenum">3344</span></a>  <span class="comment"> */</span>
<a name="l3345"><span class="linenum">3345</span></a>  function <a class="function" onClick="logFunction('items_edited_results_block')" href="../../../../_functions/items_edited_results_block.html" onMouseOver="funcPopup(event,'items_edited_results_block')">items_edited_results_block</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l3346"><span class="linenum">3346</span></a>  {
<a name="l3347"><span class="linenum">3347</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l3348"><span class="linenum">3348</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3349"><span class="linenum">3349</span></a>              'edited_User'          =&gt; NULL,
<a name="l3350"><span class="linenum">3350</span></a>              'results_param_prefix' =&gt; 'actv_postedit_',
<a name="l3351"><span class="linenum">3351</span></a>              'results_title'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Posts edited by the user'),
<a name="l3352"><span class="linenum">3352</span></a>              'results_no_text'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User has not edited any posts'),
<a name="l3353"><span class="linenum">3353</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3354"><span class="linenum">3354</span></a>  
<a name="l3355"><span class="linenum">3355</span></a>      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l3356"><span class="linenum">3356</span></a>      {    // Only logged in users can access to this function
<a name="l3357"><span class="linenum">3357</span></a>          return;
<a name="l3358"><span class="linenum">3358</span></a>      }
<a name="l3359"><span class="linenum">3359</span></a>  
<a name="l3360"><span class="linenum">3360</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l3361"><span class="linenum">3361</span></a>      if( !<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'users', 'edit' ) )
<a name="l3362"><span class="linenum">3362</span></a>      {    // Check minimum permission:
<a name="l3363"><span class="linenum">3363</span></a>          return;
<a name="l3364"><span class="linenum">3364</span></a>      }
<a name="l3365"><span class="linenum">3365</span></a>  
<a name="l3366"><span class="linenum">3366</span></a>      <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['edited_User'];
<a name="l3367"><span class="linenum">3367</span></a>      if( !<a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a> )
<a name="l3368"><span class="linenum">3368</span></a>      {    // No defined User, probably the function is calling from AJAX request
<a name="l3369"><span class="linenum">3369</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0 );
<a name="l3370"><span class="linenum">3370</span></a>          if( empty( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l3371"><span class="linenum">3371</span></a>          {    // Bad request, Exit here
<a name="l3372"><span class="linenum">3372</span></a>              return;
<a name="l3373"><span class="linenum">3373</span></a>          }
<a name="l3374"><span class="linenum">3374</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l3375"><span class="linenum">3375</span></a>          if( ( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../../_variables/user_ID.html">$user_ID</a>, false ) ) === false )
<a name="l3376"><span class="linenum">3376</span></a>          {    // Bad request, Exit here
<a name="l3377"><span class="linenum">3377</span></a>              return;
<a name="l3378"><span class="linenum">3378</span></a>          }
<a name="l3379"><span class="linenum">3379</span></a>      }
<a name="l3380"><span class="linenum">3380</span></a>  
<a name="l3381"><span class="linenum">3381</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>;
<a name="l3382"><span class="linenum">3382</span></a>  
<a name="l3383"><span class="linenum">3383</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_tab', 'string', '', true );
<a name="l3384"><span class="linenum">3384</span></a>      <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0, true );
<a name="l3385"><span class="linenum">3385</span></a>  
<a name="l3386"><span class="linenum">3386</span></a>      <a class="var it6844" onMouseOver="hilite(6844)" onMouseOut="lolite()" onClick="logVariable('edited_versions_SQL')" href="../../../../_variables/edited_versions_SQL.html">$edited_versions_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l3387"><span class="linenum">3387</span></a>      <a class="var it6844" onMouseOver="hilite(6844)" onMouseOut="lolite()" onClick="logVariable('edited_versions_SQL')" href="../../../../_variables/edited_versions_SQL.html">$edited_versions_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'DISTINCT( iver_itm_ID )' );
<a name="l3388"><span class="linenum">3388</span></a>      <a class="var it6844" onMouseOver="hilite(6844)" onMouseOut="lolite()" onClick="logVariable('edited_versions_SQL')" href="../../../../_variables/edited_versions_SQL.html">$edited_versions_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_items__version' );
<a name="l3389"><span class="linenum">3389</span></a>      <a class="var it6844" onMouseOver="hilite(6844)" onMouseOut="lolite()" onClick="logVariable('edited_versions_SQL')" href="../../../../_variables/edited_versions_SQL.html">$edited_versions_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'iver_edit_user_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9038" onMouseOver="hilite(9038)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) );
<a name="l3390"><span class="linenum">3390</span></a>  
<a name="l3391"><span class="linenum">3391</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l3392"><span class="linenum">3392</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '*' );
<a name="l3393"><span class="linenum">3393</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_items__item ' );
<a name="l3394"><span class="linenum">3394</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( '( ( post_lastedit_user_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9038" onMouseOver="hilite(9038)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ).' ) OR ( post_ID IN ( '.<a class="var it6844" onMouseOver="hilite(6844)" onMouseOut="lolite()" onClick="logVariable('edited_versions_SQL')" href="../../../../_variables/edited_versions_SQL.html">$edited_versions_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>().' ) ) )' );
<a name="l3395"><span class="linenum">3395</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'post_creator_user_ID != '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9038" onMouseOver="hilite(9038)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) );
<a name="l3396"><span class="linenum">3396</span></a>  
<a name="l3397"><span class="linenum">3397</span></a>  <span class="comment">    // Create result set:</span>
<a name="l3398"><span class="linenum">3398</span></a>      <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Results')" href="../../../../_classes/results.html" onMouseOver="classPopup(event,'results')">Results</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_param_prefix'], 'D' );
<a name="l3399"><span class="linenum">3399</span></a>      <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a>-&gt;<a onClick="logVariable('Cache')" class="var it9192" onMouseOver="hilite(9192)" onMouseOut="lolite()" href="../../../../_variables/Cache.html">Cache</a> = &amp; get_ItemCache();
<a name="l3400"><span class="linenum">3400</span></a>      <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a>-&gt;<a onClick="logVariable('title')" class="var it9192" onMouseOver="hilite(9192)" onMouseOut="lolite()" href="../../../../_variables/title.html">title</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_title'];
<a name="l3401"><span class="linenum">3401</span></a>      <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a>-&gt;<a onClick="logVariable('no_results_text')" class="var it9192" onMouseOver="hilite(9192)" onMouseOut="lolite()" href="../../../../_variables/no_results_text.html">no_results_text</a> = <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_no_text'];
<a name="l3402"><span class="linenum">3402</span></a>  
<a name="l3403"><span class="linenum">3403</span></a>  <span class="comment">    // Get a count of the post which current user can delete</span>
<a name="l3404"><span class="linenum">3404</span></a>      <a class="var it6846" onMouseOver="hilite(6846)" onMouseOut="lolite()" onClick="logVariable('deleted_posts_edited_count')" href="../../../../_variables/deleted_posts_edited_count.html">$deleted_posts_edited_count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a class="function" onClick="logFunction('get_deleted_posts')" href="../../../../_functions/get_deleted_posts.html" onMouseOver="funcPopup(event,'get_deleted_posts')">get_deleted_posts</a>( 'edited' ) );
<a name="l3405"><span class="linenum">3405</span></a>      if( ( <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a>-&gt;<a class="function" onClick="logFunction('get_total_rows')" href="../../../../_functions/get_total_rows.html" onMouseOver="funcPopup(event,'get_total_rows')">get_total_rows</a>() &gt; 0 ) &amp;&amp; ( <a class="var it6846" onMouseOver="hilite(6846)" onMouseOut="lolite()" onClick="logVariable('deleted_posts_edited_count')" href="../../../../_variables/deleted_posts_edited_count.html">$deleted_posts_edited_count</a> &gt; 0 ) )
<a name="l3406"><span class="linenum">3406</span></a>      {    // Display actino icon to delete all records if at least one record exists &amp; current user can delete at least one item created by user
<a name="l3407"><span class="linenum">3407</span></a>          <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a>-&gt;<a class="function" onClick="logFunction('global_icon')" href="../../../../_functions/global_icon.html" onMouseOver="funcPopup(event,'global_icon')">global_icon</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete all post edited by %s'), <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('login')" class="var it9038" onMouseOver="hilite(9038)" onMouseOut="lolite()" href="../../../../_variables/login.html">login</a> ), 'delete', '?ctrl=user&amp;amp;user_tab=activity&amp;amp;action=delete_all_posts_edited&amp;amp;user_ID='.<a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9038" onMouseOver="hilite(9038)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('user'), ' '.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete all'), 3, 4 );
<a name="l3408"><span class="linenum">3408</span></a>      }
<a name="l3409"><span class="linenum">3409</span></a>  
<a name="l3410"><span class="linenum">3410</span></a>  <span class="comment">    // Initialize Results object</span>
<a name="l3411"><span class="linenum">3411</span></a>      <a class="function" onClick="logFunction('items_results')" href="../../../../_functions/items_results.html" onMouseOver="funcPopup(event,'items_results')">items_results</a>( <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a>, array(
<a name="l3412"><span class="linenum">3412</span></a>              'field_prefix' =&gt; 'post_',
<a name="l3413"><span class="linenum">3413</span></a>              'display_ord' =&gt; false,
<a name="l3414"><span class="linenum">3414</span></a>              'display_history' =&gt; false,
<a name="l3415"><span class="linenum">3415</span></a>          ) );
<a name="l3416"><span class="linenum">3416</span></a>  
<a name="l3417"><span class="linenum">3417</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l3418"><span class="linenum">3418</span></a>      { // init results param by template name
<a name="l3419"><span class="linenum">3419</span></a>          if( !isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_type' ] ) || ! isset( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_name' ] ) )
<a name="l3420"><span class="linenum">3420</span></a>          {
<a name="l3421"><span class="linenum">3421</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid ajax results request!' );
<a name="l3422"><span class="linenum">3422</span></a>          }
<a name="l3423"><span class="linenum">3423</span></a>          <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a>-&gt;<a class="function" onClick="logFunction('init_params_by_skin')" href="../../../../_functions/init_params_by_skin.html" onMouseOver="funcPopup(event,'init_params_by_skin')">init_params_by_skin</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_type' ], <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>[ 'skin_name' ] );
<a name="l3424"><span class="linenum">3424</span></a>      }
<a name="l3425"><span class="linenum">3425</span></a>  
<a name="l3426"><span class="linenum">3426</span></a>      <a class="var it3188" onMouseOver="hilite(3188)" onMouseOut="lolite()" onClick="logVariable('results_params')" href="../../../../_variables/results_params.html">$results_params</a> = <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'Results' );
<a name="l3427"><span class="linenum">3427</span></a>      <a class="var it571" onMouseOver="hilite(571)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../../../_variables/display_params.html">$display_params</a> = array(
<a name="l3428"><span class="linenum">3428</span></a>          'before' =&gt; <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '&gt;', ' style=&quot;margin-top:25px&quot; id=&quot;edited_posts_result&quot;&gt;', <a class="var it3188" onMouseOver="hilite(3188)" onMouseOut="lolite()" onClick="logVariable('results_params')" href="../../../../_variables/results_params.html">$results_params</a>['before'] ),
<a name="l3429"><span class="linenum">3429</span></a>      );
<a name="l3430"><span class="linenum">3430</span></a>      <a class="var it6845" onMouseOver="hilite(6845)" onMouseOut="lolite()" onClick="logVariable('edited_items_Results')" href="../../../../_variables/edited_items_Results.html">$edited_items_Results</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( <a class="var it571" onMouseOver="hilite(571)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../../../_variables/display_params.html">$display_params</a> );
<a name="l3431"><span class="linenum">3431</span></a>  
<a name="l3432"><span class="linenum">3432</span></a>      if( !<a class="function" onClick="logFunction('is_ajax_content')" href="../../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l3433"><span class="linenum">3433</span></a>      {    // Create this hidden div to get a function name for AJAX request
<a name="l3434"><span class="linenum">3434</span></a>          echo '&lt;div id=&quot;'.<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['results_param_prefix'].'ajax_callback&quot; style=&quot;display:none&quot;&gt;'.__FUNCTION__.'&lt;/div&gt;';
<a name="l3435"><span class="linenum">3435</span></a>      }
<a name="l3436"><span class="linenum">3436</span></a>  }
<a name="l3437"><span class="linenum">3437</span></a>  
<a name="l3438"><span class="linenum">3438</span></a>  
<a name="l3439"><span class="linenum">3439</span></a>  <span class="comment">/**</span>
<a name="l3440"><span class="linenum">3440</span></a>  <span class="comment"> * Display the items list (Used to load next page of the items by AJAX)</span>
<a name="l3441"><span class="linenum">3441</span></a>  <span class="comment"> *</span>
<a name="l3442"><span class="linenum">3442</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3443"><span class="linenum">3443</span></a>  <span class="comment"> */</span>
<a name="l3444"><span class="linenum">3444</span></a>  function <a class="function" onClick="logFunction('items_list_block_by_page')" href="../../../../_functions/items_list_block_by_page.html" onMouseOver="funcPopup(event,'items_list_block_by_page')">items_list_block_by_page</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l3445"><span class="linenum">3445</span></a>  {
<a name="l3446"><span class="linenum">3446</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3447"><span class="linenum">3447</span></a>              'skin_name'    =&gt; '',
<a name="l3448"><span class="linenum">3448</span></a>              'content_mode' =&gt; 'auto', // 'auto' will auto select depending on <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../../_variables/disp.html">$disp</a>-detail
<a name="l3449"><span class="linenum">3449</span></a>              'image_size'   =&gt; 'fit-400x320',
<a name="l3450"><span class="linenum">3450</span></a>              'block_start'  =&gt; '&lt;div class=&quot;navigation ajax&quot;&gt;',
<a name="l3451"><span class="linenum">3451</span></a>              'block_end'    =&gt; '&lt;/div&gt;',
<a name="l3452"><span class="linenum">3452</span></a>              'links_format' =&gt; '<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../../../_variables/next.html">$next</a>$',
<a name="l3453"><span class="linenum">3453</span></a>              'next_text'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Load more entries').'&amp;hellip;',
<a name="l3454"><span class="linenum">3454</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3455"><span class="linenum">3455</span></a>  
<a name="l3456"><span class="linenum">3456</span></a>      if( !<a class="function" onClick="logFunction('skin_init_ajax')" href="../../../../_functions/skin_init_ajax.html" onMouseOver="funcPopup(event,'skin_init_ajax')">skin_init_ajax</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['skin_name'], 'posts' ) )
<a name="l3457"><span class="linenum">3457</span></a>      {    // Exit here if skin cannot be initialized
<a name="l3458"><span class="linenum">3458</span></a>          return;
<a name="l3459"><span class="linenum">3459</span></a>      }
<a name="l3460"><span class="linenum">3460</span></a>  
<a name="l3461"><span class="linenum">3461</span></a>      while( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> = &amp; mainlist_get_item() )
<a name="l3462"><span class="linenum">3462</span></a>      {    // For each blog post:
<a name="l3463"><span class="linenum">3463</span></a>  <span class="comment">        // ---------------------- ITEM BLOCK INCLUDED HERE ------------------------</span>
<a name="l3464"><span class="linenum">3464</span></a>          <a class="function" onClick="logFunction('skin_include')" href="../../../../_functions/skin_include.html" onMouseOver="funcPopup(event,'skin_include')">skin_include</a>( '_item_block.inc.php', <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3465"><span class="linenum">3465</span></a>  <span class="comment">        // ----------------------------END ITEM BLOCK  ----------------------------</span>
<a name="l3466"><span class="linenum">3466</span></a>      }
<a name="l3467"><span class="linenum">3467</span></a>  
<a name="l3468"><span class="linenum">3468</span></a>  <span class="comment">    // -------------------- PREV/NEXT PAGE LINKS (POST LIST MODE) --------------------</span>
<a name="l3469"><span class="linenum">3469</span></a>      <a class="function" onClick="logFunction('mainlist_page_links')" href="../../../../_functions/mainlist_page_links.html" onMouseOver="funcPopup(event,'mainlist_page_links')">mainlist_page_links</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3470"><span class="linenum">3470</span></a>  <span class="comment">    // ------------------------- END OF PREV/NEXT PAGE LINKS -------------------------</span>
<a name="l3471"><span class="linenum">3471</span></a>  }
<a name="l3472"><span class="linenum">3472</span></a>  
<a name="l3473"><span class="linenum">3473</span></a>  
<a name="l3474"><span class="linenum">3474</span></a>  <span class="comment">/**</span>
<a name="l3475"><span class="linenum">3475</span></a>  <span class="comment"> * Initialize Results object for items list</span>
<a name="l3476"><span class="linenum">3476</span></a>  <span class="comment"> *</span>
<a name="l3477"><span class="linenum">3477</span></a>  <span class="comment"> * @param object Results</span>
<a name="l3478"><span class="linenum">3478</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3479"><span class="linenum">3479</span></a>  <span class="comment"> */</span>
<a name="l3480"><span class="linenum">3480</span></a>  function <a class="function" onClick="logFunction('items_results')" href="../../../../_functions/items_results.html" onMouseOver="funcPopup(event,'items_results')">items_results</a>( &amp; <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l3481"><span class="linenum">3481</span></a>  {
<a name="l3482"><span class="linenum">3482</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l3483"><span class="linenum">3483</span></a>  
<a name="l3484"><span class="linenum">3484</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l3485"><span class="linenum">3485</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3486"><span class="linenum">3486</span></a>              'tab' =&gt; '',
<a name="l3487"><span class="linenum">3487</span></a>              'field_prefix' =&gt; '',
<a name="l3488"><span class="linenum">3488</span></a>              'display_date' =&gt; true,
<a name="l3489"><span class="linenum">3489</span></a>              'display_permalink' =&gt; true,
<a name="l3490"><span class="linenum">3490</span></a>              'display_blog' =&gt; true,
<a name="l3491"><span class="linenum">3491</span></a>              'display_type' =&gt; true,
<a name="l3492"><span class="linenum">3492</span></a>              'display_author' =&gt; true,
<a name="l3493"><span class="linenum">3493</span></a>              'display_title' =&gt; true,
<a name="l3494"><span class="linenum">3494</span></a>              'display_title_flag' =&gt; true,
<a name="l3495"><span class="linenum">3495</span></a>              'display_title_status' =&gt; true,
<a name="l3496"><span class="linenum">3496</span></a>              'display_visibility_actions' =&gt; true,
<a name="l3497"><span class="linenum">3497</span></a>              'display_ord' =&gt; true,
<a name="l3498"><span class="linenum">3498</span></a>              'display_history' =&gt; true,
<a name="l3499"><span class="linenum">3499</span></a>              'display_actions' =&gt; true,
<a name="l3500"><span class="linenum">3500</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3501"><span class="linenum">3501</span></a>  
<a name="l3502"><span class="linenum">3502</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_date'] )
<a name="l3503"><span class="linenum">3503</span></a>      {    // Display Date column
<a name="l3504"><span class="linenum">3504</span></a>          <a class="var it3189" onMouseOver="hilite(3189)" onMouseOut="lolite()" onClick="logVariable('td')" href="../../../../_variables/td.html">$td</a> = '&lt;span class=&quot;date&quot;&gt;@<a class="function" onClick="logFunction('get_issue_date')" href="../../../../_functions/get_issue_date.html" onMouseOver="funcPopup(event,'get_issue_date')">get_issue_date</a>()@&lt;/span&gt;';
<a name="l3505"><span class="linenum">3505</span></a>          if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_permalink'] )
<a name="l3506"><span class="linenum">3506</span></a>          {
<a name="l3507"><span class="linenum">3507</span></a>              <a class="var it3189" onMouseOver="hilite(3189)" onMouseOut="lolite()" onClick="logVariable('td')" href="../../../../_variables/td.html">$td</a> = '@<a class="function" onClick="logFunction('get_permanent_link')" href="../../../../_functions/get_permanent_link.html" onMouseOver="funcPopup(event,'get_permanent_link')">get_permanent_link</a>( <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>(\'permalink\'), \'\', \'\', \'auto\' )@ '.<a class="var it3189" onMouseOver="hilite(3189)" onMouseOut="lolite()" onClick="logVariable('td')" href="../../../../_variables/td.html">$td</a>;
<a name="l3508"><span class="linenum">3508</span></a>          }
<a name="l3509"><span class="linenum">3509</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3510"><span class="linenum">3510</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Date'),
<a name="l3511"><span class="linenum">3511</span></a>                  'order' =&gt; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['field_prefix'].'datestart',
<a name="l3512"><span class="linenum">3512</span></a>                  'default_dir' =&gt; 'D',
<a name="l3513"><span class="linenum">3513</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l3514"><span class="linenum">3514</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l3515"><span class="linenum">3515</span></a>                  'td' =&gt; <a class="var it3189" onMouseOver="hilite(3189)" onMouseOut="lolite()" onClick="logVariable('td')" href="../../../../_variables/td.html">$td</a>,
<a name="l3516"><span class="linenum">3516</span></a>              );
<a name="l3517"><span class="linenum">3517</span></a>      }
<a name="l3518"><span class="linenum">3518</span></a>  
<a name="l3519"><span class="linenum">3519</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_blog'] )
<a name="l3520"><span class="linenum">3520</span></a>      {    // Display Blog column
<a name="l3521"><span class="linenum">3521</span></a>          if( !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'aggregate_coll_IDs' ) )
<a name="l3522"><span class="linenum">3522</span></a>          { // Aggregated blog: display name of blog
<a name="l3523"><span class="linenum">3523</span></a>              <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3524"><span class="linenum">3524</span></a>                      'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Blog'),
<a name="l3525"><span class="linenum">3525</span></a>                      'th_class' =&gt; 'nowrap',
<a name="l3526"><span class="linenum">3526</span></a>                      'td_class' =&gt; 'nowrap',
<a name="l3527"><span class="linenum">3527</span></a>                      'td' =&gt; '@<a class="function" onClick="logFunction('load_Blog')" href="../../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>()@&lt;a href=&quot;~<a class="function" onClick="logFunction('regenerate_url')" href="../../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( \'blog,results_order\', \'blog=@blog_ID@\' )~&quot;&gt;@Blog-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>(\'shortname\')@&lt;/a&gt;',
<a name="l3528"><span class="linenum">3528</span></a>                  );
<a name="l3529"><span class="linenum">3529</span></a>          }
<a name="l3530"><span class="linenum">3530</span></a>      }
<a name="l3531"><span class="linenum">3531</span></a>  
<a name="l3532"><span class="linenum">3532</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['tab'] == 'intros' &amp;&amp; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_type'] )
<a name="l3533"><span class="linenum">3533</span></a>      { // Display Type column:
<a name="l3534"><span class="linenum">3534</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3535"><span class="linenum">3535</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Type'),
<a name="l3536"><span class="linenum">3536</span></a>                  'th_class' =&gt; 'nowrap',
<a name="l3537"><span class="linenum">3537</span></a>                  'td_class' =&gt; 'nowrap',
<a name="l3538"><span class="linenum">3538</span></a>                  'order' =&gt; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['field_prefix'].'ptyp_ID',
<a name="l3539"><span class="linenum">3539</span></a>                  'td' =&gt; '@<a class="function" onClick="logFunction('type')" href="../../../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>()@',
<a name="l3540"><span class="linenum">3540</span></a>              );
<a name="l3541"><span class="linenum">3541</span></a>      }
<a name="l3542"><span class="linenum">3542</span></a>      else if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_author'] )
<a name="l3543"><span class="linenum">3543</span></a>      { // Display Author column:
<a name="l3544"><span class="linenum">3544</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3545"><span class="linenum">3545</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Author'),
<a name="l3546"><span class="linenum">3546</span></a>                  'th_class' =&gt; 'nowrap',
<a name="l3547"><span class="linenum">3547</span></a>                  'td_class' =&gt; 'nowrap',
<a name="l3548"><span class="linenum">3548</span></a>                  'order' =&gt; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['field_prefix'].'creator_user_ID',
<a name="l3549"><span class="linenum">3549</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('get_user_identity_link')" href="../../../../_functions/get_user_identity_link.html" onMouseOver="funcPopup(event,'get_user_identity_link')">get_user_identity_link</a>( NULL, #post_creator_user_ID# )%',
<a name="l3550"><span class="linenum">3550</span></a>              );
<a name="l3551"><span class="linenum">3551</span></a>      }
<a name="l3552"><span class="linenum">3552</span></a>  
<a name="l3553"><span class="linenum">3553</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_title'] )
<a name="l3554"><span class="linenum">3554</span></a>      { // Display Title column
<a name="l3555"><span class="linenum">3555</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3556"><span class="linenum">3556</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Title'),
<a name="l3557"><span class="linenum">3557</span></a>                  'order' =&gt; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['field_prefix'].'title',
<a name="l3558"><span class="linenum">3558</span></a>                  'td_class' =&gt; 'tskst_<a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('post_pst_ID')" href="../../../../_variables/post_pst_ID.html">$post_pst_ID</a>$',
<a name="l3559"><span class="linenum">3559</span></a>                  'td' =&gt; '&lt;strong lang=&quot;@<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(\'locale\')@&quot;&gt;%<a class="function" onClick="logFunction('task_title_link')" href="../../../../_functions/task_title_link.html" onMouseOver="funcPopup(event,'task_title_link')">task_title_link</a>( {Obj}, '.(int)<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_title_flag'].', '.(int)<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_title_status'].' )%&lt;/strong&gt;',
<a name="l3560"><span class="linenum">3560</span></a>              );
<a name="l3561"><span class="linenum">3561</span></a>      }
<a name="l3562"><span class="linenum">3562</span></a>  
<a name="l3563"><span class="linenum">3563</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_visibility_actions'] )
<a name="l3564"><span class="linenum">3564</span></a>      { // Display Visibility actions
<a name="l3565"><span class="linenum">3565</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3566"><span class="linenum">3566</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Title'),
<a name="l3567"><span class="linenum">3567</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l3568"><span class="linenum">3568</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('item_visibility')" href="../../../../_functions/item_visibility.html" onMouseOver="funcPopup(event,'item_visibility')">item_visibility</a>( {Obj} )%',
<a name="l3569"><span class="linenum">3569</span></a>              );
<a name="l3570"><span class="linenum">3570</span></a>      }
<a name="l3571"><span class="linenum">3571</span></a>  
<a name="l3572"><span class="linenum">3572</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_ord'] )
<a name="l3573"><span class="linenum">3573</span></a>      {    // Display Ord column
<a name="l3574"><span class="linenum">3574</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3575"><span class="linenum">3575</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Ord'),
<a name="l3576"><span class="linenum">3576</span></a>                  'order' =&gt; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['field_prefix'].'order',
<a name="l3577"><span class="linenum">3577</span></a>                  'td_class' =&gt; 'right',
<a name="l3578"><span class="linenum">3578</span></a>                  'td' =&gt; '<a class="var it897" onMouseOver="hilite(897)" onMouseOut="lolite()" onClick="logVariable('post_order')" href="../../../../_variables/post_order.html">$post_order</a>$',
<a name="l3579"><span class="linenum">3579</span></a>              );
<a name="l3580"><span class="linenum">3580</span></a>      }
<a name="l3581"><span class="linenum">3581</span></a>  
<a name="l3582"><span class="linenum">3582</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_history'] )
<a name="l3583"><span class="linenum">3583</span></a>      {    // Display History (i) column
<a name="l3584"><span class="linenum">3584</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3585"><span class="linenum">3585</span></a>                  'th' =&gt; <span class="comment">/* TRANS: abbrev for info */</span> <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('i'),
<a name="l3586"><span class="linenum">3586</span></a>                  'th_title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Item history information'),
<a name="l3587"><span class="linenum">3587</span></a>                  'order' =&gt; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['field_prefix'].'datemodified',
<a name="l3588"><span class="linenum">3588</span></a>                  'default_dir' =&gt; 'D',
<a name="l3589"><span class="linenum">3589</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l3590"><span class="linenum">3590</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l3591"><span class="linenum">3591</span></a>                  'td' =&gt; '@<a class="function" onClick="logFunction('get_history_link')" href="../../../../_functions/get_history_link.html" onMouseOver="funcPopup(event,'get_history_link')">get_history_link</a>()@',
<a name="l3592"><span class="linenum">3592</span></a>              );
<a name="l3593"><span class="linenum">3593</span></a>      }
<a name="l3594"><span class="linenum">3594</span></a>  
<a name="l3595"><span class="linenum">3595</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['display_actions'] )
<a name="l3596"><span class="linenum">3596</span></a>      {    // Display Actions column
<a name="l3597"><span class="linenum">3597</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('items_Results')" href="../../../../_variables/items_Results.html">$items_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it9193" onMouseOver="hilite(9193)" onMouseOut="lolite()" href="../../../../_variables/cols.html">cols</a>[] = array(
<a name="l3598"><span class="linenum">3598</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Actions'),
<a name="l3599"><span class="linenum">3599</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l3600"><span class="linenum">3600</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('item_edit_actions')" href="../../../../_functions/item_edit_actions.html" onMouseOver="funcPopup(event,'item_edit_actions')">item_edit_actions</a>( {Obj} )%',
<a name="l3601"><span class="linenum">3601</span></a>              );
<a name="l3602"><span class="linenum">3602</span></a>      }
<a name="l3603"><span class="linenum">3603</span></a>  }
<a name="l3604"><span class="linenum">3604</span></a>  
<a name="l3605"><span class="linenum">3605</span></a>  
<a name="l3606"><span class="linenum">3606</span></a>  <span class="comment">/**</span>
<a name="l3607"><span class="linenum">3607</span></a>  <span class="comment"> * Helper functions to display Items results.</span>
<a name="l3608"><span class="linenum">3608</span></a>  <span class="comment"> * New ( not display helper ) functions must be created above item_results function</span>
<a name="l3609"><span class="linenum">3609</span></a>  <span class="comment"> */</span>
<a name="l3610"><span class="linenum">3610</span></a>  
<a name="l3611"><span class="linenum">3611</span></a>  <span class="comment">/**</span>
<a name="l3612"><span class="linenum">3612</span></a>  <span class="comment"> * Get a link with task title</span>
<a name="l3613"><span class="linenum">3613</span></a>  <span class="comment"> *</span>
<a name="l3614"><span class="linenum">3614</span></a>  <span class="comment"> * @param object Item</span>
<a name="l3615"><span class="linenum">3615</span></a>  <span class="comment"> * @param boolean Display country flag</span>
<a name="l3616"><span class="linenum">3616</span></a>  <span class="comment"> * @param boolean Display status banner</span>
<a name="l3617"><span class="linenum">3617</span></a>  <span class="comment"> * @return string Link</span>
<a name="l3618"><span class="linenum">3618</span></a>  <span class="comment"> */</span>
<a name="l3619"><span class="linenum">3619</span></a>  function <a class="function" onClick="logFunction('task_title_link')" href="../../../../_functions/task_title_link.html" onMouseOver="funcPopup(event,'task_title_link')">task_title_link</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>, <a class="var it6848" onMouseOver="hilite(6848)" onMouseOut="lolite()" onClick="logVariable('display_flag')" href="../../../../_variables/display_flag.html">$display_flag</a> = true, <a class="var it6849" onMouseOver="hilite(6849)" onMouseOut="lolite()" onClick="logVariable('display_status')" href="../../../../_variables/display_status.html">$display_status</a> = false )
<a name="l3620"><span class="linenum">3620</span></a>  {
<a name="l3621"><span class="linenum">3621</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>;
<a name="l3622"><span class="linenum">3622</span></a>  
<a name="l3623"><span class="linenum">3623</span></a>      <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a> = '';
<a name="l3624"><span class="linenum">3624</span></a>      if( <a class="var it6849" onMouseOver="hilite(6849)" onMouseOut="lolite()" onClick="logVariable('display_status')" href="../../../../_variables/display_status.html">$display_status</a> &amp;&amp; <a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l3625"><span class="linenum">3625</span></a>      { // Display status
<a name="l3626"><span class="linenum">3626</span></a>          <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a> .= <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_status')" href="../../../../_functions/get_status.html" onMouseOver="funcPopup(event,'get_status')">get_status</a>( array( 'format' =&gt; 'styled' ) );
<a name="l3627"><span class="linenum">3627</span></a>      }
<a name="l3628"><span class="linenum">3628</span></a>  
<a name="l3629"><span class="linenum">3629</span></a>      if( <a class="var it6848" onMouseOver="hilite(6848)" onMouseOut="lolite()" onClick="logVariable('display_flag')" href="../../../../_variables/display_flag.html">$display_flag</a> )
<a name="l3630"><span class="linenum">3630</span></a>      { // Display country flag
<a name="l3631"><span class="linenum">3631</span></a>          <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a> .= <a class="function" onClick="logFunction('locale_flag')" href="../../../../_functions/locale_flag.html" onMouseOver="funcPopup(event,'locale_flag')">locale_flag</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('locale')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/locale.html">locale</a>, 'w16px', 'flag', '', false ).' ';
<a name="l3632"><span class="linenum">3632</span></a>      }
<a name="l3633"><span class="linenum">3633</span></a>  
<a name="l3634"><span class="linenum">3634</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;get_Blog();
<a name="l3635"><span class="linenum">3635</span></a>  
<a name="l3636"><span class="linenum">3636</span></a>      if( <a class="function" onClick="logFunction('is_admin_page')" href="../../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l3637"><span class="linenum">3637</span></a>      { // Url to item page in backoffice
<a name="l3638"><span class="linenum">3638</span></a>          <a class="var it3156" onMouseOver="hilite(3156)" onMouseOut="lolite()" onClick="logVariable('item_url')" href="../../../../_variables/item_url.html">$item_url</a> = <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;blog='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>().'&amp;amp;p='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l3639"><span class="linenum">3639</span></a>      }
<a name="l3640"><span class="linenum">3640</span></a>      else
<a name="l3641"><span class="linenum">3641</span></a>      { // Url to item page in frontoffice
<a name="l3642"><span class="linenum">3642</span></a>          <a class="var it3156" onMouseOver="hilite(3156)" onMouseOut="lolite()" onClick="logVariable('item_url')" href="../../../../_variables/item_url.html">$item_url</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>();
<a name="l3643"><span class="linenum">3643</span></a>      }
<a name="l3644"><span class="linenum">3644</span></a>  
<a name="l3645"><span class="linenum">3645</span></a>      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_comments' ) != 'never' )
<a name="l3646"><span class="linenum">3646</span></a>      { // The current blog can have comments:
<a name="l3647"><span class="linenum">3647</span></a>          <a class="var it6850" onMouseOver="hilite(6850)" onMouseOut="lolite()" onClick="logVariable('nb_comments')" href="../../../../_variables/nb_comments.html">$nb_comments</a> = <a class="function" onClick="logFunction('generic_ctp_number')" href="../../../../_functions/generic_ctp_number.html" onMouseOver="funcPopup(event,'generic_ctp_number')">generic_ctp_number</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, 'feedback' );
<a name="l3648"><span class="linenum">3648</span></a>          <a class="var it6851" onMouseOver="hilite(6851)" onMouseOut="lolite()" onClick="logVariable('comments_url')" href="../../../../_variables/comments_url.html">$comments_url</a> = <a class="function" onClick="logFunction('is_admin_page')" href="../../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() ? <a class="var it3156" onMouseOver="hilite(3156)" onMouseOut="lolite()" onClick="logVariable('item_url')" href="../../../../_variables/item_url.html">$item_url</a> : <a class="function" onClick="logFunction('url_add_tail')" href="../../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it3156" onMouseOver="hilite(3156)" onMouseOut="lolite()" onClick="logVariable('item_url')" href="../../../../_variables/item_url.html">$item_url</a>, '#comments' );
<a name="l3649"><span class="linenum">3649</span></a>          <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a> .= '&lt;a href=&quot;'.<a class="var it6851" onMouseOver="hilite(6851)" onMouseOut="lolite()" onClick="logVariable('comments_url')" href="../../../../_variables/comments_url.html">$comments_url</a>.'&quot; title=&quot;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d feedbacks'), <a class="var it6850" onMouseOver="hilite(6850)" onMouseOut="lolite()" onClick="logVariable('nb_comments')" href="../../../../_variables/nb_comments.html">$nb_comments</a> ).'&quot; class=&quot;&quot;&gt;';
<a name="l3650"><span class="linenum">3650</span></a>          if( <a class="var it6850" onMouseOver="hilite(6850)" onMouseOut="lolite()" onClick="logVariable('nb_comments')" href="../../../../_variables/nb_comments.html">$nb_comments</a> )
<a name="l3651"><span class="linenum">3651</span></a>          {
<a name="l3652"><span class="linenum">3652</span></a>              <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a> .= <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'comments' );
<a name="l3653"><span class="linenum">3653</span></a>          }
<a name="l3654"><span class="linenum">3654</span></a>          else
<a name="l3655"><span class="linenum">3655</span></a>          {
<a name="l3656"><span class="linenum">3656</span></a>              <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a> .= <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'nocomment' );
<a name="l3657"><span class="linenum">3657</span></a>          }
<a name="l3658"><span class="linenum">3658</span></a>          <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a> .= '&lt;/a&gt; ';
<a name="l3659"><span class="linenum">3659</span></a>      }
<a name="l3660"><span class="linenum">3660</span></a>  
<a name="l3661"><span class="linenum">3661</span></a>      <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a> .= '&lt;a href=&quot;'.<a class="var it3156" onMouseOver="hilite(3156)" onMouseOut="lolite()" onClick="logVariable('item_url')" href="../../../../_variables/item_url.html">$item_url</a>.'&quot; class=&quot;&quot; title=&quot;'.
<a name="l3662"><span class="linenum">3662</span></a>                                  <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('View this post...').'&quot;&gt;'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>( 'title' ).'&lt;/a&gt;&lt;/strong&gt;';
<a name="l3663"><span class="linenum">3663</span></a>  
<a name="l3664"><span class="linenum">3664</span></a>      return <a class="var it1784" onMouseOver="hilite(1784)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../../../_variables/col.html">$col</a>;
<a name="l3665"><span class="linenum">3665</span></a>  }
<a name="l3666"><span class="linenum">3666</span></a>  
<a name="l3667"><span class="linenum">3667</span></a>  <span class="comment">/**</span>
<a name="l3668"><span class="linenum">3668</span></a>  <span class="comment"> * Get the icons to publish or to deprecate the item</span>
<a name="l3669"><span class="linenum">3669</span></a>  <span class="comment"> *</span>
<a name="l3670"><span class="linenum">3670</span></a>  <span class="comment"> * @param object Item</span>
<a name="l3671"><span class="linenum">3671</span></a>  <span class="comment"> * @return string Action icons</span>
<a name="l3672"><span class="linenum">3672</span></a>  <span class="comment"> */</span>
<a name="l3673"><span class="linenum">3673</span></a>  function <a class="function" onClick="logFunction('item_visibility')" href="../../../../_functions/item_visibility.html" onMouseOver="funcPopup(event,'item_visibility')">item_visibility</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> )
<a name="l3674"><span class="linenum">3674</span></a>  {
<a name="l3675"><span class="linenum">3675</span></a>  <span class="comment">    // Display publish NOW button if current user has the rights:</span>
<a name="l3676"><span class="linenum">3676</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_publish_link')" href="../../../../_functions/get_publish_link.html" onMouseOver="funcPopup(event,'get_publish_link')">get_publish_link</a>( ' ', ' ', <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'publish' ), '#', '' );
<a name="l3677"><span class="linenum">3677</span></a>  
<a name="l3678"><span class="linenum">3678</span></a>  <span class="comment">    // Display deprecate if current user has the rights:</span>
<a name="l3679"><span class="linenum">3679</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_deprecate_link')" href="../../../../_functions/get_deprecate_link.html" onMouseOver="funcPopup(event,'get_deprecate_link')">get_deprecate_link</a>( ' ', ' ', <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'deprecate' ), '#', '' );
<a name="l3680"><span class="linenum">3680</span></a>  
<a name="l3681"><span class="linenum">3681</span></a>      if( empty( <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> ) )
<a name="l3682"><span class="linenum">3682</span></a>      {    // for IE
<a name="l3683"><span class="linenum">3683</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = '&amp;nbsp;';
<a name="l3684"><span class="linenum">3684</span></a>      }
<a name="l3685"><span class="linenum">3685</span></a>  
<a name="l3686"><span class="linenum">3686</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l3687"><span class="linenum">3687</span></a>  }
<a name="l3688"><span class="linenum">3688</span></a>  
<a name="l3689"><span class="linenum">3689</span></a>  <span class="comment">/**</span>
<a name="l3690"><span class="linenum">3690</span></a>  <span class="comment"> * Edit Actions:</span>
<a name="l3691"><span class="linenum">3691</span></a>  <span class="comment"> *</span>
<a name="l3692"><span class="linenum">3692</span></a>  <span class="comment"> * @param Item</span>
<a name="l3693"><span class="linenum">3693</span></a>  <span class="comment"> */</span>
<a name="l3694"><span class="linenum">3694</span></a>  function <a class="function" onClick="logFunction('item_edit_actions')" href="../../../../_functions/item_edit_actions.html" onMouseOver="funcPopup(event,'item_edit_actions')">item_edit_actions</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> )
<a name="l3695"><span class="linenum">3695</span></a>  {
<a name="l3696"><span class="linenum">3696</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = '';
<a name="l3697"><span class="linenum">3697</span></a>  
<a name="l3698"><span class="linenum">3698</span></a>      if( isset(<a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>['files_Module']) )
<a name="l3699"><span class="linenum">3699</span></a>      {
<a name="l3700"><span class="linenum">3700</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit linked files...'), 'folder',
<a name="l3701"><span class="linenum">3701</span></a>                      <a class="function" onClick="logFunction('url_add_param')" href="../../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;get_Blog()-&gt;<a class="function" onClick="logFunction('get_filemanager_link')" href="../../../../_functions/get_filemanager_link.html" onMouseOver="funcPopup(event,'get_filemanager_link')">get_filemanager_link</a>(), 'fm_mode=link_object&amp;amp;link_type=item&amp;amp;link_object_ID='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ), <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Files') );
<a name="l3702"><span class="linenum">3702</span></a>      }
<a name="l3703"><span class="linenum">3703</span></a>  
<a name="l3704"><span class="linenum">3704</span></a>  <span class="comment">    // Display edit button if current user has the rights:</span>
<a name="l3705"><span class="linenum">3705</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_edit_link')" href="../../../../_functions/get_edit_link.html" onMouseOver="funcPopup(event,'get_edit_link')">get_edit_link</a>( array(
<a name="l3706"><span class="linenum">3706</span></a>          'before' =&gt; ' ',
<a name="l3707"><span class="linenum">3707</span></a>          'after' =&gt; ' ',
<a name="l3708"><span class="linenum">3708</span></a>          'text' =&gt; <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'edit' ),
<a name="l3709"><span class="linenum">3709</span></a>          'title' =&gt; '#',
<a name="l3710"><span class="linenum">3710</span></a>          'class' =&gt; '' ) );
<a name="l3711"><span class="linenum">3711</span></a>  
<a name="l3712"><span class="linenum">3712</span></a>  <span class="comment">    // Display duplicate button if current user has the rights:</span>
<a name="l3713"><span class="linenum">3713</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_copy_link')" href="../../../../_functions/get_copy_link.html" onMouseOver="funcPopup(event,'get_copy_link')">get_copy_link</a>( array(
<a name="l3714"><span class="linenum">3714</span></a>          'before' =&gt; ' ',
<a name="l3715"><span class="linenum">3715</span></a>          'after' =&gt; ' ',
<a name="l3716"><span class="linenum">3716</span></a>          'text' =&gt; <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'copy', 'imgtag', array( 'title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Duplicate this post...') ) ),
<a name="l3717"><span class="linenum">3717</span></a>          'title' =&gt; '#',
<a name="l3718"><span class="linenum">3718</span></a>          'class' =&gt; '' ) );
<a name="l3719"><span class="linenum">3719</span></a>  
<a name="l3720"><span class="linenum">3720</span></a>  <span class="comment">    // Display delete button if current user has the rights:</span>
<a name="l3721"><span class="linenum">3721</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_delete_link')" href="../../../../_functions/get_delete_link.html" onMouseOver="funcPopup(event,'get_delete_link')">get_delete_link</a>( ' ', ' ', <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'delete' ), '#', '', false, '#', '#', <a class="function" onClick="logFunction('regenerate_url')" href="../../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', '', '', '&amp;' ) );
<a name="l3722"><span class="linenum">3722</span></a>  
<a name="l3723"><span class="linenum">3723</span></a>      return <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l3724"><span class="linenum">3724</span></a>  }
<a name="l3725"><span class="linenum">3725</span></a>  
<a name="l3726"><span class="linenum">3726</span></a>  
<a name="l3727"><span class="linenum">3727</span></a>  <span class="comment">/**</span>
<a name="l3728"><span class="linenum">3728</span></a>  <span class="comment"> * Display chapters list</span>
<a name="l3729"><span class="linenum">3729</span></a>  <span class="comment"> *</span>
<a name="l3730"><span class="linenum">3730</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3731"><span class="linenum">3731</span></a>  <span class="comment"> */</span>
<a name="l3732"><span class="linenum">3732</span></a>  function <a class="function" onClick="logFunction('manual_display_chapters')" href="../../../../_functions/manual_display_chapters.html" onMouseOver="funcPopup(event,'manual_display_chapters')">manual_display_chapters</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array(), <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> = 0 )
<a name="l3733"><span class="linenum">3733</span></a>  {
<a name="l3734"><span class="linenum">3734</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3735"><span class="linenum">3735</span></a>              'parent_cat_ID'      =&gt; 0,
<a name="l3736"><span class="linenum">3736</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3737"><span class="linenum">3737</span></a>  
<a name="l3738"><span class="linenum">3738</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a>;
<a name="l3739"><span class="linenum">3739</span></a>  
<a name="l3740"><span class="linenum">3740</span></a>      <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a> = <a class="function" onClick="logFunction('manual_get_chapters')" href="../../../../_functions/manual_get_chapters.html" onMouseOver="funcPopup(event,'manual_get_chapters')">manual_get_chapters</a>( (int)<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['parent_cat_ID'] );
<a name="l3741"><span class="linenum">3741</span></a>  
<a name="l3742"><span class="linenum">3742</span></a>      if( empty( <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a> ) )
<a name="l3743"><span class="linenum">3743</span></a>      { // No categories, Exit here
<a name="l3744"><span class="linenum">3744</span></a>          return;
<a name="l3745"><span class="linenum">3745</span></a>      }
<a name="l3746"><span class="linenum">3746</span></a>  
<a name="l3747"><span class="linenum">3747</span></a>      if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) &amp;&amp; !empty( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) )
<a name="l3748"><span class="linenum">3748</span></a>      { // Set Blog if it still doesn't exist
<a name="l3749"><span class="linenum">3749</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l3750"><span class="linenum">3750</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, false );
<a name="l3751"><span class="linenum">3751</span></a>      }
<a name="l3752"><span class="linenum">3752</span></a>  
<a name="l3753"><span class="linenum">3753</span></a>      if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) )
<a name="l3754"><span class="linenum">3754</span></a>      { // No Blog, Exit here
<a name="l3755"><span class="linenum">3755</span></a>          return;
<a name="l3756"><span class="linenum">3756</span></a>      }
<a name="l3757"><span class="linenum">3757</span></a>  
<a name="l3758"><span class="linenum">3758</span></a>      <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('chapter_path')" href="../../../../_variables/chapter_path.html">$chapter_path</a> = array();
<a name="l3759"><span class="linenum">3759</span></a>      if( !empty( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a> ) )
<a name="l3760"><span class="linenum">3760</span></a>      { // A category is opened
<a name="l3761"><span class="linenum">3761</span></a>          <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('chapter_path')" href="../../../../_variables/chapter_path.html">$chapter_path</a> = <a class="function" onClick="logFunction('manual_get_chapter_path')" href="../../../../_functions/manual_get_chapter_path.html" onMouseOver="funcPopup(event,'manual_get_chapter_path')">manual_get_chapter_path</a>( <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../../_variables/cat_ID.html">$cat_ID</a> );
<a name="l3762"><span class="linenum">3762</span></a>      }
<a name="l3763"><span class="linenum">3763</span></a>  <span class="comment">    //pre_dump($chapter_path);</span>
<a name="l3764"><span class="linenum">3764</span></a>  
<a name="l3765"><span class="linenum">3765</span></a>      foreach( <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a> as <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a> )
<a name="l3766"><span class="linenum">3766</span></a>      { // Display all given chapters
<a name="l3767"><span class="linenum">3767</span></a>          <a class="function" onClick="logFunction('manual_display_chapter')" href="../../../../_functions/manual_display_chapter.html" onMouseOver="funcPopup(event,'manual_display_chapter')">manual_display_chapter</a>( <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>, array(
<a name="l3768"><span class="linenum">3768</span></a>                  'Chapter'      =&gt; <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>,
<a name="l3769"><span class="linenum">3769</span></a>                  'chapter_path' =&gt; <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('chapter_path')" href="../../../../_variables/chapter_path.html">$chapter_path</a>,
<a name="l3770"><span class="linenum">3770</span></a>              ) ), <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> );
<a name="l3771"><span class="linenum">3771</span></a>      }
<a name="l3772"><span class="linenum">3772</span></a>  }
<a name="l3773"><span class="linenum">3773</span></a>  
<a name="l3774"><span class="linenum">3774</span></a>  
<a name="l3775"><span class="linenum">3775</span></a>  <span class="comment">/**</span>
<a name="l3776"><span class="linenum">3776</span></a>  <span class="comment"> * Display chapter and children</span>
<a name="l3777"><span class="linenum">3777</span></a>  <span class="comment"> *</span>
<a name="l3778"><span class="linenum">3778</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3779"><span class="linenum">3779</span></a>  <span class="comment"> * @param integer Level of the category in the recursive tree</span>
<a name="l3780"><span class="linenum">3780</span></a>  <span class="comment"> */</span>
<a name="l3781"><span class="linenum">3781</span></a>  function <a class="function" onClick="logFunction('manual_display_chapter')" href="../../../../_functions/manual_display_chapter.html" onMouseOver="funcPopup(event,'manual_display_chapter')">manual_display_chapter</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array(), <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> = 0 )
<a name="l3782"><span class="linenum">3782</span></a>  {
<a name="l3783"><span class="linenum">3783</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3784"><span class="linenum">3784</span></a>              'Chapter'      =&gt; NULL,
<a name="l3785"><span class="linenum">3785</span></a>              'chapter_path' =&gt; array(),
<a name="l3786"><span class="linenum">3786</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3787"><span class="linenum">3787</span></a>  
<a name="l3788"><span class="linenum">3788</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>;
<a name="l3789"><span class="linenum">3789</span></a>  
<a name="l3790"><span class="linenum">3790</span></a>      if( empty( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['Chapter'] ) )
<a name="l3791"><span class="linenum">3791</span></a>      { // No Chapter, Exit here
<a name="l3792"><span class="linenum">3792</span></a>          return;
<a name="l3793"><span class="linenum">3793</span></a>      }
<a name="l3794"><span class="linenum">3794</span></a>  
<a name="l3795"><span class="linenum">3795</span></a>      <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['Chapter'];
<a name="l3796"><span class="linenum">3796</span></a>  
<a name="l3797"><span class="linenum">3797</span></a>      <a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('is_selected')" href="../../../../_variables/is_selected.html">$is_selected</a> = false;
<a name="l3798"><span class="linenum">3798</span></a>      <a class="var it6852" onMouseOver="hilite(6852)" onMouseOut="lolite()" onClick="logVariable('is_opened')" href="../../../../_variables/is_opened.html">$is_opened</a> = false;
<a name="l3799"><span class="linenum">3799</span></a>  
<a name="l3800"><span class="linenum">3800</span></a>      <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../../../_variables/classes.html">$classes</a> = array();
<a name="l3801"><span class="linenum">3801</span></a>      if( !empty( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapter_path'] ) &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapter_path'] ) )
<a name="l3802"><span class="linenum">3802</span></a>      { // A category is selected
<a name="l3803"><span class="linenum">3803</span></a>          <a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('is_selected')" href="../../../../_variables/is_selected.html">$is_selected</a> = true;
<a name="l3804"><span class="linenum">3804</span></a>      }
<a name="l3805"><span class="linenum">3805</span></a>      if( !empty( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('children')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/children.html">children</a> ) &amp;&amp; <a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('is_selected')" href="../../../../_variables/is_selected.html">$is_selected</a> )
<a name="l3806"><span class="linenum">3806</span></a>      { // A category is opened
<a name="l3807"><span class="linenum">3807</span></a>          <a class="var it6852" onMouseOver="hilite(6852)" onMouseOut="lolite()" onClick="logVariable('is_opened')" href="../../../../_variables/is_opened.html">$is_opened</a> = true;
<a name="l3808"><span class="linenum">3808</span></a>      }
<a name="l3809"><span class="linenum">3809</span></a>      else if( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('has_posts')" href="../../../../_functions/has_posts.html" onMouseOver="funcPopup(event,'has_posts')">has_posts</a>() &amp;&amp; <a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('is_selected')" href="../../../../_variables/is_selected.html">$is_selected</a> )
<a name="l3810"><span class="linenum">3810</span></a>      { // A category is selected and it has the posts
<a name="l3811"><span class="linenum">3811</span></a>          <a class="var it6852" onMouseOver="hilite(6852)" onMouseOut="lolite()" onClick="logVariable('is_opened')" href="../../../../_variables/is_opened.html">$is_opened</a> = true;
<a name="l3812"><span class="linenum">3812</span></a>      }
<a name="l3813"><span class="linenum">3813</span></a>  
<a name="l3814"><span class="linenum">3814</span></a>      <a class="function" onClick="logFunction('manual_display_chapter_row')" href="../../../../_functions/manual_display_chapter_row.html" onMouseOver="funcPopup(event,'manual_display_chapter_row')">manual_display_chapter_row</a>( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>, <a class="var it6852" onMouseOver="hilite(6852)" onMouseOut="lolite()" onClick="logVariable('is_opened')" href="../../../../_variables/is_opened.html">$is_opened</a> );
<a name="l3815"><span class="linenum">3815</span></a>  
<a name="l3816"><span class="linenum">3816</span></a>      if( <a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('is_selected')" href="../../../../_variables/is_selected.html">$is_selected</a> )
<a name="l3817"><span class="linenum">3817</span></a>      {
<a name="l3818"><span class="linenum">3818</span></a>          global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../../_variables/Settings.html">$Settings</a>;
<a name="l3819"><span class="linenum">3819</span></a>  
<a name="l3820"><span class="linenum">3820</span></a>          if( <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'chapter_ordering' ) == 'manual' &amp;&amp;
<a name="l3821"><span class="linenum">3821</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'orderby' ) == 'order' &amp;&amp;
<a name="l3822"><span class="linenum">3822</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'orderdir' ) == 'ASC' )
<a name="l3823"><span class="linenum">3823</span></a>          { // Items &amp; categories are ordered by manual field 'order'
<a name="l3824"><span class="linenum">3824</span></a>  <span class="comment">            // In this mode we should show them in one merged list ordered by field 'order'</span>
<a name="l3825"><span class="linenum">3825</span></a>              <a class="var it2978" onMouseOver="hilite(2978)" onMouseOut="lolite()" onClick="logVariable('chapters_items_mode')" href="../../../../_variables/chapters_items_mode.html">$chapters_items_mode</a> = 'order';
<a name="l3826"><span class="linenum">3826</span></a>          }
<a name="l3827"><span class="linenum">3827</span></a>          else
<a name="l3828"><span class="linenum">3828</span></a>          { // Standard mode for all other cases
<a name="l3829"><span class="linenum">3829</span></a>              <a class="var it2978" onMouseOver="hilite(2978)" onMouseOut="lolite()" onClick="logVariable('chapters_items_mode')" href="../../../../_variables/chapters_items_mode.html">$chapters_items_mode</a> = 'std';
<a name="l3830"><span class="linenum">3830</span></a>          }
<a name="l3831"><span class="linenum">3831</span></a>  
<a name="l3832"><span class="linenum">3832</span></a>          if( <a class="var it2978" onMouseOver="hilite(2978)" onMouseOut="lolite()" onClick="logVariable('chapters_items_mode')" href="../../../../_variables/chapters_items_mode.html">$chapters_items_mode</a> != 'order' )
<a name="l3833"><span class="linenum">3833</span></a>          { // Display all subchapters
<a name="l3834"><span class="linenum">3834</span></a>              <a class="function" onClick="logFunction('manual_display_chapters')" href="../../../../_functions/manual_display_chapters.html" onMouseOver="funcPopup(event,'manual_display_chapters')">manual_display_chapters</a>( <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>, array(
<a name="l3835"><span class="linenum">3835</span></a>                      'parent_cat_ID'      =&gt; <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l3836"><span class="linenum">3836</span></a>                  ) ), <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> + 1 );
<a name="l3837"><span class="linenum">3837</span></a>          }
<a name="l3838"><span class="linenum">3838</span></a>  
<a name="l3839"><span class="linenum">3839</span></a>          if( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('has_posts')" href="../../../../_functions/has_posts.html" onMouseOver="funcPopup(event,'has_posts')">has_posts</a>() || <a class="var it6852" onMouseOver="hilite(6852)" onMouseOut="lolite()" onClick="logVariable('is_opened')" href="../../../../_variables/is_opened.html">$is_opened</a> )
<a name="l3840"><span class="linenum">3840</span></a>          { // Display the posts/subcategories of this chapter
<a name="l3841"><span class="linenum">3841</span></a>              <a class="function" onClick="logFunction('manual_display_posts')" href="../../../../_functions/manual_display_posts.html" onMouseOver="funcPopup(event,'manual_display_posts')">manual_display_posts</a>( <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>, array(
<a name="l3842"><span class="linenum">3842</span></a>                  'chapter_ID'          =&gt; <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>,
<a name="l3843"><span class="linenum">3843</span></a>                  'chapters_items_mode' =&gt; <a class="var it2978" onMouseOver="hilite(2978)" onMouseOut="lolite()" onClick="logVariable('chapters_items_mode')" href="../../../../_variables/chapters_items_mode.html">$chapters_items_mode</a>,
<a name="l3844"><span class="linenum">3844</span></a>              ) ), <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> + 1 );
<a name="l3845"><span class="linenum">3845</span></a>          }
<a name="l3846"><span class="linenum">3846</span></a>      }
<a name="l3847"><span class="linenum">3847</span></a>  }
<a name="l3848"><span class="linenum">3848</span></a>  
<a name="l3849"><span class="linenum">3849</span></a>  
<a name="l3850"><span class="linenum">3850</span></a>  <span class="comment">/**</span>
<a name="l3851"><span class="linenum">3851</span></a>  <span class="comment"> * Display a list of the posts for current chapter</span>
<a name="l3852"><span class="linenum">3852</span></a>  <span class="comment"> *</span>
<a name="l3853"><span class="linenum">3853</span></a>  <span class="comment"> * @param array params</span>
<a name="l3854"><span class="linenum">3854</span></a>  <span class="comment"> * @return string List with posts</span>
<a name="l3855"><span class="linenum">3855</span></a>  <span class="comment"> */</span>
<a name="l3856"><span class="linenum">3856</span></a>  function <a class="function" onClick="logFunction('manual_display_posts')" href="../../../../_functions/manual_display_posts.html" onMouseOver="funcPopup(event,'manual_display_posts')">manual_display_posts</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array(), <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> = 0 )
<a name="l3857"><span class="linenum">3857</span></a>  {
<a name="l3858"><span class="linenum">3858</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3859"><span class="linenum">3859</span></a>              'chapter_ID'          =&gt; 0,
<a name="l3860"><span class="linenum">3860</span></a>              'chapters_items_mode' =&gt; 'std',
<a name="l3861"><span class="linenum">3861</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l3862"><span class="linenum">3862</span></a>  
<a name="l3863"><span class="linenum">3863</span></a>      global <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l3864"><span class="linenum">3864</span></a>  
<a name="l3865"><span class="linenum">3865</span></a>      if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) &amp;&amp; !empty( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ) )
<a name="l3866"><span class="linenum">3866</span></a>      { // Set Blog if it still doesn't exist
<a name="l3867"><span class="linenum">3867</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l3868"><span class="linenum">3868</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>, false );
<a name="l3869"><span class="linenum">3869</span></a>      }
<a name="l3870"><span class="linenum">3870</span></a>  
<a name="l3871"><span class="linenum">3871</span></a>      if( empty( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapter_ID'] ) || empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a> ) )
<a name="l3872"><span class="linenum">3872</span></a>      { // No chapter ID, Exit here
<a name="l3873"><span class="linenum">3873</span></a>          return;
<a name="l3874"><span class="linenum">3874</span></a>      }
<a name="l3875"><span class="linenum">3875</span></a>  
<a name="l3876"><span class="linenum">3876</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapters_items_mode'] == 'order' )
<a name="l3877"><span class="linenum">3877</span></a>      { // Get all subchapters in this mode to following insertion into posts list below
<a name="l3878"><span class="linenum">3878</span></a>          <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('sub_chapters')" href="../../../../_variables/sub_chapters.html">$sub_chapters</a> = <a class="function" onClick="logFunction('manual_get_chapters')" href="../../../../_functions/manual_get_chapters.html" onMouseOver="funcPopup(event,'manual_get_chapters')">manual_get_chapters</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapter_ID'] );
<a name="l3879"><span class="linenum">3879</span></a>      }
<a name="l3880"><span class="linenum">3880</span></a>  
<a name="l3881"><span class="linenum">3881</span></a>  <span class="comment">    // Get the posts of current category</span>
<a name="l3882"><span class="linenum">3882</span></a>      <a class="var it652" onMouseOver="hilite(652)" onMouseOut="lolite()" onClick="logVariable('ItemList')" href="../../../../_variables/ItemList.html">$ItemList</a> = <span class="keyword">new </span><a class="class" onClick="logClass('ItemList2')" href="../../../../_classes/itemlist2.html" onMouseOver="classPopup(event,'itemlist2')">ItemList2</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_timestamp_min')" href="../../../../_functions/get_timestamp_min.html" onMouseOver="funcPopup(event,'get_timestamp_min')">get_timestamp_min</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_timestamp_max')" href="../../../../_functions/get_timestamp_max.html" onMouseOver="funcPopup(event,'get_timestamp_max')">get_timestamp_max</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('posts_per_page') );
<a name="l3883"><span class="linenum">3883</span></a>      <a class="var it652" onMouseOver="hilite(652)" onMouseOut="lolite()" onClick="logVariable('ItemList')" href="../../../../_variables/ItemList.html">$ItemList</a>-&gt;<a class="function" onClick="logFunction('load_from_Request')" href="../../../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>();
<a name="l3884"><span class="linenum">3884</span></a>      <a class="var it652" onMouseOver="hilite(652)" onMouseOut="lolite()" onClick="logVariable('ItemList')" href="../../../../_variables/ItemList.html">$ItemList</a>-&gt;<a class="function" onClick="logFunction('set_filters')" href="../../../../_functions/set_filters.html" onMouseOver="funcPopup(event,'set_filters')">set_filters</a>( array(
<a name="l3885"><span class="linenum">3885</span></a>              'cat_array'    =&gt; array( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapter_ID'] ), // Limit only by selected cat (exclude posts from child categories)
<a name="l3886"><span class="linenum">3886</span></a>              'cat_modifier' =&gt; NULL,
<a name="l3887"><span class="linenum">3887</span></a>              'unit'         =&gt; 'all', // Display all items of this category, Don't limit by page
<a name="l3888"><span class="linenum">3888</span></a>          ) );
<a name="l3889"><span class="linenum">3889</span></a>      <a class="var it652" onMouseOver="hilite(652)" onMouseOut="lolite()" onClick="logVariable('ItemList')" href="../../../../_variables/ItemList.html">$ItemList</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>();
<a name="l3890"><span class="linenum">3890</span></a>  
<a name="l3891"><span class="linenum">3891</span></a>  <span class="comment">    // Split items in two arrays to know what items are from main category and what items are from extra category</span>
<a name="l3892"><span class="linenum">3892</span></a>      <a class="var it2981" onMouseOver="hilite(2981)" onMouseOut="lolite()" onClick="logVariable('items_main')" href="../../../../_variables/items_main.html">$items_main</a> = array();
<a name="l3893"><span class="linenum">3893</span></a>      <a class="var it2982" onMouseOver="hilite(2982)" onMouseOut="lolite()" onClick="logVariable('items_extra')" href="../../../../_variables/items_extra.html">$items_extra</a> = array();
<a name="l3894"><span class="linenum">3894</span></a>      while( <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a> = <a class="var it652" onMouseOver="hilite(652)" onMouseOut="lolite()" onClick="logVariable('ItemList')" href="../../../../_variables/ItemList.html">$ItemList</a>-&gt;<a class="function" onClick="logFunction('get_item')" href="../../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_item</a>() )
<a name="l3895"><span class="linenum">3895</span></a>      {
<a name="l3896"><span class="linenum">3896</span></a>          if( <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it9194" onMouseOver="hilite(9194)" onMouseOut="lolite()" href="../../../../_variables/main_cat_ID.html">main_cat_ID</a> == <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapter_ID'] )
<a name="l3897"><span class="linenum">3897</span></a>          { // Item is from main category
<a name="l3898"><span class="linenum">3898</span></a>              <a class="var it2981" onMouseOver="hilite(2981)" onMouseOut="lolite()" onClick="logVariable('items_main')" href="../../../../_variables/items_main.html">$items_main</a>[] = <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>;
<a name="l3899"><span class="linenum">3899</span></a>          }
<a name="l3900"><span class="linenum">3900</span></a>          else
<a name="l3901"><span class="linenum">3901</span></a>          { // Item is from extra catogry
<a name="l3902"><span class="linenum">3902</span></a>              <a class="var it2982" onMouseOver="hilite(2982)" onMouseOut="lolite()" onClick="logVariable('items_extra')" href="../../../../_variables/items_extra.html">$items_extra</a>[] = <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>;
<a name="l3903"><span class="linenum">3903</span></a>          }
<a name="l3904"><span class="linenum">3904</span></a>      }
<a name="l3905"><span class="linenum">3905</span></a>  
<a name="l3906"><span class="linenum">3906</span></a>  
<a name="l3907"><span class="linenum">3907</span></a>  <span class="comment">    // ---- Display Items from MAIN category ---- //</span>
<a name="l3908"><span class="linenum">3908</span></a>      <a class="var it2984" onMouseOver="hilite(2984)" onMouseOut="lolite()" onClick="logVariable('prev_item_order')" href="../../../../_variables/prev_item_order.html">$prev_item_order</a> = 0;
<a name="l3909"><span class="linenum">3909</span></a>      foreach( <a class="var it2981" onMouseOver="hilite(2981)" onMouseOut="lolite()" onClick="logVariable('items_main')" href="../../../../_variables/items_main.html">$items_main</a> as <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a> )
<a name="l3910"><span class="linenum">3910</span></a>      {
<a name="l3911"><span class="linenum">3911</span></a>          if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapters_items_mode'] == 'order' )
<a name="l3912"><span class="linenum">3912</span></a>          { // In this mode we display the chapters inside a posts list
<a name="l3913"><span class="linenum">3913</span></a>              foreach( <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('sub_chapters')" href="../../../../_variables/sub_chapters.html">$sub_chapters</a> as <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../../_variables/s.html">$s</a> =&gt; <a class="var it2985" onMouseOver="hilite(2985)" onMouseOut="lolite()" onClick="logVariable('sub_Chapter')" href="../../../../_variables/sub_Chapter.html">$sub_Chapter</a> )
<a name="l3914"><span class="linenum">3914</span></a>              { // Loop through categories to find for current order
<a name="l3915"><span class="linenum">3915</span></a>                  if( ( <a class="var it2985" onMouseOver="hilite(2985)" onMouseOut="lolite()" onClick="logVariable('sub_Chapter')" href="../../../../_variables/sub_Chapter.html">$sub_Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'order' ) &lt;= <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'order' ) &amp;&amp; <a class="var it2985" onMouseOver="hilite(2985)" onMouseOut="lolite()" onClick="logVariable('sub_Chapter')" href="../../../../_variables/sub_Chapter.html">$sub_Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'order' ) &gt; <a class="var it2984" onMouseOver="hilite(2984)" onMouseOut="lolite()" onClick="logVariable('prev_item_order')" href="../../../../_variables/prev_item_order.html">$prev_item_order</a> ) ||
<a name="l3916"><span class="linenum">3916</span></a>  <span class="comment">                            /* This condition is needed for NULL order: */</span>
<a name="l3917"><span class="linenum">3917</span></a>                              ( <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'order' ) == 0 &amp;&amp; <a class="var it2985" onMouseOver="hilite(2985)" onMouseOut="lolite()" onClick="logVariable('sub_Chapter')" href="../../../../_variables/sub_Chapter.html">$sub_Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'order' ) &gt;= <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'order' ) ) )
<a name="l3918"><span class="linenum">3918</span></a>                  { // Display chapter
<a name="l3919"><span class="linenum">3919</span></a>                      <a class="function" onClick="logFunction('manual_display_chapter')" href="../../../../_functions/manual_display_chapter.html" onMouseOver="funcPopup(event,'manual_display_chapter')">manual_display_chapter</a>( <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>, array(
<a name="l3920"><span class="linenum">3920</span></a>                              'Chapter'      =&gt; <a class="var it2985" onMouseOver="hilite(2985)" onMouseOut="lolite()" onClick="logVariable('sub_Chapter')" href="../../../../_variables/sub_Chapter.html">$sub_Chapter</a>,
<a name="l3921"><span class="linenum">3921</span></a>                          ) ), <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> );
<a name="l3922"><span class="linenum">3922</span></a>  <span class="comment">                    // Remove this chapter from array to avoid the duplicates</span>
<a name="l3923"><span class="linenum">3923</span></a>                      unset( <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('sub_chapters')" href="../../../../_variables/sub_chapters.html">$sub_chapters</a>[ <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../../_variables/s.html">$s</a> ] );
<a name="l3924"><span class="linenum">3924</span></a>                  }
<a name="l3925"><span class="linenum">3925</span></a>              }
<a name="l3926"><span class="linenum">3926</span></a>  
<a name="l3927"><span class="linenum">3927</span></a>  <span class="comment">            // Save current post order for next iteration</span>
<a name="l3928"><span class="linenum">3928</span></a>              <a class="var it2984" onMouseOver="hilite(2984)" onMouseOut="lolite()" onClick="logVariable('prev_item_order')" href="../../../../_variables/prev_item_order.html">$prev_item_order</a> = <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'order' );
<a name="l3929"><span class="linenum">3929</span></a>          }
<a name="l3930"><span class="linenum">3930</span></a>  
<a name="l3931"><span class="linenum">3931</span></a>          <a class="function" onClick="logFunction('manual_display_post_row')" href="../../../../_functions/manual_display_post_row.html" onMouseOver="funcPopup(event,'manual_display_post_row')">manual_display_post_row</a>( <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>, array(
<a name="l3932"><span class="linenum">3932</span></a>                  'post_navigation' =&gt; 'same_category', // we are always navigating through category in this skin
<a name="l3933"><span class="linenum">3933</span></a>                  'nav_target'      =&gt; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapter_ID'], // set the category ID as nav target
<a name="l3934"><span class="linenum">3934</span></a>                  'link_type'       =&gt; 'permalink',
<a name="l3935"><span class="linenum">3935</span></a>                  'title_field'     =&gt; 'urltitle',
<a name="l3936"><span class="linenum">3936</span></a>              ) );
<a name="l3937"><span class="linenum">3937</span></a>      }
<a name="l3938"><span class="linenum">3938</span></a>  
<a name="l3939"><span class="linenum">3939</span></a>      if( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapters_items_mode'] == 'order' )
<a name="l3940"><span class="linenum">3940</span></a>      {
<a name="l3941"><span class="linenum">3941</span></a>          foreach( <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('sub_chapters')" href="../../../../_variables/sub_chapters.html">$sub_chapters</a> as <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../../_variables/s.html">$s</a> =&gt; <a class="var it2985" onMouseOver="hilite(2985)" onMouseOut="lolite()" onClick="logVariable('sub_Chapter')" href="../../../../_variables/sub_Chapter.html">$sub_Chapter</a> )
<a name="l3942"><span class="linenum">3942</span></a>          { // Loop through rest categories that have order more than last item
<a name="l3943"><span class="linenum">3943</span></a>              <a class="function" onClick="logFunction('manual_display_chapter')" href="../../../../_functions/manual_display_chapter.html" onMouseOver="funcPopup(event,'manual_display_chapter')">manual_display_chapter</a>( <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>, array(
<a name="l3944"><span class="linenum">3944</span></a>                      'Chapter' =&gt; <a class="var it2985" onMouseOver="hilite(2985)" onMouseOut="lolite()" onClick="logVariable('sub_Chapter')" href="../../../../_variables/sub_Chapter.html">$sub_Chapter</a>,
<a name="l3945"><span class="linenum">3945</span></a>                  ) ), <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a> );
<a name="l3946"><span class="linenum">3946</span></a>  <span class="comment">            // Remove this chapter from array to avoid the duplicates</span>
<a name="l3947"><span class="linenum">3947</span></a>              unset( <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('sub_chapters')" href="../../../../_variables/sub_chapters.html">$sub_chapters</a>[ <a class="var it634" onMouseOver="hilite(634)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../../_variables/s.html">$s</a> ] );
<a name="l3948"><span class="linenum">3948</span></a>          }
<a name="l3949"><span class="linenum">3949</span></a>      }
<a name="l3950"><span class="linenum">3950</span></a>  
<a name="l3951"><span class="linenum">3951</span></a>  
<a name="l3952"><span class="linenum">3952</span></a>  <span class="comment">    // ---- Display Items from EXTRA category ---- //</span>
<a name="l3953"><span class="linenum">3953</span></a>      foreach( <a class="var it2982" onMouseOver="hilite(2982)" onMouseOut="lolite()" onClick="logVariable('items_extra')" href="../../../../_variables/items_extra.html">$items_extra</a> as <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a> )
<a name="l3954"><span class="linenum">3954</span></a>      {
<a name="l3955"><span class="linenum">3955</span></a>          <a class="function" onClick="logFunction('manual_display_post_row')" href="../../../../_functions/manual_display_post_row.html" onMouseOver="funcPopup(event,'manual_display_post_row')">manual_display_post_row</a>( <a class="var it2983" onMouseOver="hilite(2983)" onMouseOut="lolite()" onClick="logVariable('cur_Item')" href="../../../../_variables/cur_Item.html">$cur_Item</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>, array(
<a name="l3956"><span class="linenum">3956</span></a>              'post_navigation' =&gt; 'same_category', // we are always navigating through category in this skin
<a name="l3957"><span class="linenum">3957</span></a>              'nav_target'      =&gt; <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['chapter_ID'], // set the category ID as nav target
<a name="l3958"><span class="linenum">3958</span></a>              'link_type'       =&gt; 'permalink',
<a name="l3959"><span class="linenum">3959</span></a>              'title_field'     =&gt; 'urltitle',
<a name="l3960"><span class="linenum">3960</span></a>              'title_before'    =&gt; '&lt;i&gt;',
<a name="l3961"><span class="linenum">3961</span></a>              'title_after'     =&gt; '&lt;/i&gt;',
<a name="l3962"><span class="linenum">3962</span></a>          ) );
<a name="l3963"><span class="linenum">3963</span></a>      }
<a name="l3964"><span class="linenum">3964</span></a>  }
<a name="l3965"><span class="linenum">3965</span></a>  
<a name="l3966"><span class="linenum">3966</span></a>  <span class="comment">/**</span>
<a name="l3967"><span class="linenum">3967</span></a>  <span class="comment"> * Get chapters</span>
<a name="l3968"><span class="linenum">3968</span></a>  <span class="comment"> *</span>
<a name="l3969"><span class="linenum">3969</span></a>  <span class="comment"> * @param integer Chapter parent ID</span>
<a name="l3970"><span class="linenum">3970</span></a>  <span class="comment"> */</span>
<a name="l3971"><span class="linenum">3971</span></a>  function <a class="function" onClick="logFunction('manual_get_chapters')" href="../../../../_functions/manual_get_chapters.html" onMouseOver="funcPopup(event,'manual_get_chapters')">manual_get_chapters</a>( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('parent_ID')" href="../../../../_variables/parent_ID.html">$parent_ID</a> = 0 )
<a name="l3972"><span class="linenum">3972</span></a>  {
<a name="l3973"><span class="linenum">3973</span></a>      global <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>, <a class="var it2973" onMouseOver="hilite(2973)" onMouseOut="lolite()" onClick="logVariable('skin_chapters_cache')" href="../../../../_variables/skin_chapters_cache.html">$skin_chapters_cache</a>;
<a name="l3974"><span class="linenum">3974</span></a>  
<a name="l3975"><span class="linenum">3975</span></a>      if( !isset( <a class="var it2973" onMouseOver="hilite(2973)" onMouseOut="lolite()" onClick="logVariable('skin_chapters_cache')" href="../../../../_variables/skin_chapters_cache.html">$skin_chapters_cache</a> ) )
<a name="l3976"><span class="linenum">3976</span></a>      { // Get the all chapters for current blog
<a name="l3977"><span class="linenum">3977</span></a>          <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l3978"><span class="linenum">3978</span></a>          <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a class="function" onClick="logFunction('load_subset')" href="../../../../_functions/load_subset.html" onMouseOver="funcPopup(event,'load_subset')">load_subset</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l3979"><span class="linenum">3979</span></a>  
<a name="l3980"><span class="linenum">3980</span></a>          if( isset( <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a onClick="logVariable('subset_cache')" class="var it9147" onMouseOver="hilite(9147)" onMouseOut="lolite()" href="../../../../_variables/subset_cache.html">subset_cache</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ] ) )
<a name="l3981"><span class="linenum">3981</span></a>          {
<a name="l3982"><span class="linenum">3982</span></a>              <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a> = <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a onClick="logVariable('subset_cache')" class="var it9147" onMouseOver="hilite(9147)" onMouseOut="lolite()" href="../../../../_variables/subset_cache.html">subset_cache</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it8952" onMouseOver="hilite(8952)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ];
<a name="l3983"><span class="linenum">3983</span></a>  
<a name="l3984"><span class="linenum">3984</span></a>              <a class="var it2973" onMouseOver="hilite(2973)" onMouseOut="lolite()" onClick="logVariable('skin_chapters_cache')" href="../../../../_variables/skin_chapters_cache.html">$skin_chapters_cache</a> = array();
<a name="l3985"><span class="linenum">3985</span></a>              foreach( <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a> as <a class="var it984" onMouseOver="hilite(984)" onMouseOut="lolite()" onClick="logVariable('chapter_ID')" href="../../../../_variables/chapter_ID.html">$chapter_ID</a> =&gt; <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a> )
<a name="l3986"><span class="linenum">3986</span></a>              { // Init children
<a name="l3987"><span class="linenum">3987</span></a>  <span class="comment">                //pre_dump( $Chapter-&gt;ID.' - '.$Chapter-&gt;get_name().' : '.$Chapter-&gt;get( 'parent_ID' ) );</span>
<a name="l3988"><span class="linenum">3988</span></a>                  if( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'parent_ID' ) == 0 )
<a name="l3989"><span class="linenum">3989</span></a>                  {
<a name="l3990"><span class="linenum">3990</span></a>                      <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('children')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/children.html">children</a> = <a class="function" onClick="logFunction('manual_get_chapter_children')" href="../../../../_functions/manual_get_chapter_children.html" onMouseOver="funcPopup(event,'manual_get_chapter_children')">manual_get_chapter_children</a>( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l3991"><span class="linenum">3991</span></a>                      <a class="var it2973" onMouseOver="hilite(2973)" onMouseOut="lolite()" onClick="logVariable('skin_chapters_cache')" href="../../../../_variables/skin_chapters_cache.html">$skin_chapters_cache</a>[ <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ] = <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>;
<a name="l3992"><span class="linenum">3992</span></a>                  }
<a name="l3993"><span class="linenum">3993</span></a>              }
<a name="l3994"><span class="linenum">3994</span></a>          }
<a name="l3995"><span class="linenum">3995</span></a>      }
<a name="l3996"><span class="linenum">3996</span></a>  
<a name="l3997"><span class="linenum">3997</span></a>      if( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('parent_ID')" href="../../../../_variables/parent_ID.html">$parent_ID</a> &gt; 0 )
<a name="l3998"><span class="linenum">3998</span></a>      { // Get the chapters by parent
<a name="l3999"><span class="linenum">3999</span></a>          <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l4000"><span class="linenum">4000</span></a>          if( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('parent_ID')" href="../../../../_variables/parent_ID.html">$parent_ID</a>, false ) )
<a name="l4001"><span class="linenum">4001</span></a>          {
<a name="l4002"><span class="linenum">4002</span></a>              return <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('children')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/children.html">children</a>;
<a name="l4003"><span class="linenum">4003</span></a>          }
<a name="l4004"><span class="linenum">4004</span></a>          else
<a name="l4005"><span class="linenum">4005</span></a>          { // Invalid ID of parent category
<a name="l4006"><span class="linenum">4006</span></a>              return array();
<a name="l4007"><span class="linenum">4007</span></a>          }
<a name="l4008"><span class="linenum">4008</span></a>      }
<a name="l4009"><span class="linenum">4009</span></a>  
<a name="l4010"><span class="linenum">4010</span></a>      return <a class="var it2973" onMouseOver="hilite(2973)" onMouseOut="lolite()" onClick="logVariable('skin_chapters_cache')" href="../../../../_variables/skin_chapters_cache.html">$skin_chapters_cache</a>;
<a name="l4011"><span class="linenum">4011</span></a>  }
<a name="l4012"><span class="linenum">4012</span></a>  
<a name="l4013"><span class="linenum">4013</span></a>  
<a name="l4014"><span class="linenum">4014</span></a>  <span class="comment">/**</span>
<a name="l4015"><span class="linenum">4015</span></a>  <span class="comment"> * Get the children of current chapter recursively</span>
<a name="l4016"><span class="linenum">4016</span></a>  <span class="comment"> *</span>
<a name="l4017"><span class="linenum">4017</span></a>  <span class="comment"> * @param integer Parent ID</span>
<a name="l4018"><span class="linenum">4018</span></a>  <span class="comment"> * @return array Chapter children</span>
<a name="l4019"><span class="linenum">4019</span></a>  <span class="comment"> */</span>
<a name="l4020"><span class="linenum">4020</span></a>  function <a class="function" onClick="logFunction('manual_get_chapter_children')" href="../../../../_functions/manual_get_chapter_children.html" onMouseOver="funcPopup(event,'manual_get_chapter_children')">manual_get_chapter_children</a>( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('parent_ID')" href="../../../../_variables/parent_ID.html">$parent_ID</a> = 0 )
<a name="l4021"><span class="linenum">4021</span></a>  {
<a name="l4022"><span class="linenum">4022</span></a>      global <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l4023"><span class="linenum">4023</span></a>  
<a name="l4024"><span class="linenum">4024</span></a>      <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l4025"><span class="linenum">4025</span></a>  
<a name="l4026"><span class="linenum">4026</span></a>      <a class="var it2975" onMouseOver="hilite(2975)" onMouseOut="lolite()" onClick="logVariable('chapter_children')" href="../../../../_variables/chapter_children.html">$chapter_children</a> = array();
<a name="l4027"><span class="linenum">4027</span></a>      if( isset( <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a onClick="logVariable('subset_cache')" class="var it9147" onMouseOver="hilite(9147)" onMouseOut="lolite()" href="../../../../_variables/subset_cache.html">subset_cache</a>[ <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ] ) )
<a name="l4028"><span class="linenum">4028</span></a>      {
<a name="l4029"><span class="linenum">4029</span></a>          <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a> = <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a onClick="logVariable('subset_cache')" class="var it9147" onMouseOver="hilite(9147)" onMouseOut="lolite()" href="../../../../_variables/subset_cache.html">subset_cache</a>[ <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ];
<a name="l4030"><span class="linenum">4030</span></a>          foreach( <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a> as <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a> )
<a name="l4031"><span class="linenum">4031</span></a>          {
<a name="l4032"><span class="linenum">4032</span></a>              if( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('parent_ID')" href="../../../../_variables/parent_ID.html">$parent_ID</a> == <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'parent_ID' ) )
<a name="l4033"><span class="linenum">4033</span></a>              {
<a name="l4034"><span class="linenum">4034</span></a>                  <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('children')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/children.html">children</a> = <a class="function" onClick="logFunction('manual_get_chapter_children')" href="../../../../_functions/manual_get_chapter_children.html" onMouseOver="funcPopup(event,'manual_get_chapter_children')">manual_get_chapter_children</a>( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l4035"><span class="linenum">4035</span></a>                  <a class="var it2975" onMouseOver="hilite(2975)" onMouseOut="lolite()" onClick="logVariable('chapter_children')" href="../../../../_variables/chapter_children.html">$chapter_children</a>[ <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ] = <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>;
<a name="l4036"><span class="linenum">4036</span></a>              }
<a name="l4037"><span class="linenum">4037</span></a>          }
<a name="l4038"><span class="linenum">4038</span></a>      }
<a name="l4039"><span class="linenum">4039</span></a>  
<a name="l4040"><span class="linenum">4040</span></a>      return <a class="var it2975" onMouseOver="hilite(2975)" onMouseOut="lolite()" onClick="logVariable('chapter_children')" href="../../../../_variables/chapter_children.html">$chapter_children</a>;
<a name="l4041"><span class="linenum">4041</span></a>  }
<a name="l4042"><span class="linenum">4042</span></a>  
<a name="l4043"><span class="linenum">4043</span></a>  
<a name="l4044"><span class="linenum">4044</span></a>  <span class="comment">/**</span>
<a name="l4045"><span class="linenum">4045</span></a>  <span class="comment"> * Get an array with chapters ID that located in current path</span>
<a name="l4046"><span class="linenum">4046</span></a>  <span class="comment"> *</span>
<a name="l4047"><span class="linenum">4047</span></a>  <span class="comment"> * @param integer Chapter ID</span>
<a name="l4048"><span class="linenum">4048</span></a>  <span class="comment"> * @return array Chapters ID</span>
<a name="l4049"><span class="linenum">4049</span></a>  <span class="comment"> */</span>
<a name="l4050"><span class="linenum">4050</span></a>  function <a class="function" onClick="logFunction('manual_get_chapter_path')" href="../../../../_functions/manual_get_chapter_path.html" onMouseOver="funcPopup(event,'manual_get_chapter_path')">manual_get_chapter_path</a>( <a class="var it984" onMouseOver="hilite(984)" onMouseOut="lolite()" onClick="logVariable('chapter_ID')" href="../../../../_variables/chapter_ID.html">$chapter_ID</a> )
<a name="l4051"><span class="linenum">4051</span></a>  {
<a name="l4052"><span class="linenum">4052</span></a>      global <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a>;
<a name="l4053"><span class="linenum">4053</span></a>      <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l4054"><span class="linenum">4054</span></a>      <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a class="function" onClick="logFunction('load_subset')" href="../../../../_functions/load_subset.html" onMouseOver="funcPopup(event,'load_subset')">load_subset</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> );
<a name="l4055"><span class="linenum">4055</span></a>  
<a name="l4056"><span class="linenum">4056</span></a>      <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('chapter_path')" href="../../../../_variables/chapter_path.html">$chapter_path</a> = array( <a class="var it984" onMouseOver="hilite(984)" onMouseOut="lolite()" onClick="logVariable('chapter_ID')" href="../../../../_variables/chapter_ID.html">$chapter_ID</a> );
<a name="l4057"><span class="linenum">4057</span></a>      if( isset( <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a onClick="logVariable('subset_cache')" class="var it9147" onMouseOver="hilite(9147)" onMouseOut="lolite()" href="../../../../_variables/subset_cache.html">subset_cache</a>[ <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ] ) )
<a name="l4058"><span class="linenum">4058</span></a>      {
<a name="l4059"><span class="linenum">4059</span></a>          <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a> = <a class="var it503" onMouseOver="hilite(503)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a onClick="logVariable('subset_cache')" class="var it9147" onMouseOver="hilite(9147)" onMouseOut="lolite()" href="../../../../_variables/subset_cache.html">subset_cache</a>[ <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../../_variables/blog.html">$blog</a> ];
<a name="l4060"><span class="linenum">4060</span></a>          if( isset( <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a>[ <a class="var it984" onMouseOver="hilite(984)" onMouseOut="lolite()" onClick="logVariable('chapter_ID')" href="../../../../_variables/chapter_ID.html">$chapter_ID</a> ] ) )
<a name="l4061"><span class="linenum">4061</span></a>          {
<a name="l4062"><span class="linenum">4062</span></a>              <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a> = <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a>[ <a class="var it984" onMouseOver="hilite(984)" onMouseOut="lolite()" onClick="logVariable('chapter_ID')" href="../../../../_variables/chapter_ID.html">$chapter_ID</a> ];
<a name="l4063"><span class="linenum">4063</span></a>              while( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'parent_ID' ) &gt; 0 )
<a name="l4064"><span class="linenum">4064</span></a>              {
<a name="l4065"><span class="linenum">4065</span></a>                  <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('chapter_path')" href="../../../../_variables/chapter_path.html">$chapter_path</a>[] = <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'parent_ID' );
<a name="l4066"><span class="linenum">4066</span></a>  <span class="comment">                // Select a parent chapter</span>
<a name="l4067"><span class="linenum">4067</span></a>                  <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a> = <a class="var it1572" onMouseOver="hilite(1572)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../../_variables/chapters.html">$chapters</a>[ <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'parent_ID' ) ];
<a name="l4068"><span class="linenum">4068</span></a>              }
<a name="l4069"><span class="linenum">4069</span></a>          }
<a name="l4070"><span class="linenum">4070</span></a>      }
<a name="l4071"><span class="linenum">4071</span></a>  
<a name="l4072"><span class="linenum">4072</span></a>      return <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('chapter_path')" href="../../../../_variables/chapter_path.html">$chapter_path</a>;
<a name="l4073"><span class="linenum">4073</span></a>  }
<a name="l4074"><span class="linenum">4074</span></a>  
<a name="l4075"><span class="linenum">4075</span></a>  
<a name="l4076"><span class="linenum">4076</span></a>  <span class="comment">/**</span>
<a name="l4077"><span class="linenum">4077</span></a>  <span class="comment"> * Display chapter row</span>
<a name="l4078"><span class="linenum">4078</span></a>  <span class="comment"> *</span>
<a name="l4079"><span class="linenum">4079</span></a>  <span class="comment"> * @param object Chapter</span>
<a name="l4080"><span class="linenum">4080</span></a>  <span class="comment"> * @param integer Level of the category in the recursive tree</span>
<a name="l4081"><span class="linenum">4081</span></a>  <span class="comment"> * @param boolean TRUE - if category is opened</span>
<a name="l4082"><span class="linenum">4082</span></a>  <span class="comment"> */</span>
<a name="l4083"><span class="linenum">4083</span></a>  function <a class="function" onClick="logFunction('manual_display_chapter_row')" href="../../../../_functions/manual_display_chapter_row.html" onMouseOver="funcPopup(event,'manual_display_chapter_row')">manual_display_chapter_row</a>( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>, <a class="var it6852" onMouseOver="hilite(6852)" onMouseOut="lolite()" onClick="logVariable('is_opened')" href="../../../../_variables/is_opened.html">$is_opened</a> = false )
<a name="l4084"><span class="linenum">4084</span></a>  {
<a name="l4085"><span class="linenum">4085</span></a>      global <a class="var it6853" onMouseOver="hilite(6853)" onMouseOut="lolite()" onClick="logVariable('line_class')" href="../../../../_variables/line_class.html">$line_class</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../../_variables/Settings.html">$Settings</a>;
<a name="l4086"><span class="linenum">4086</span></a>      global <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>;
<a name="l4087"><span class="linenum">4087</span></a>      global <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>;
<a name="l4088"><span class="linenum">4088</span></a>  
<a name="l4089"><span class="linenum">4089</span></a>      <a class="var it1285" onMouseOver="hilite(1285)" onMouseOut="lolite()" onClick="logVariable('result_fadeout')" href="../../../../_variables/result_fadeout.html">$result_fadeout</a> = <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'fadeout_array' );
<a name="l4090"><span class="linenum">4090</span></a>  
<a name="l4091"><span class="linenum">4091</span></a>      <a class="var it6853" onMouseOver="hilite(6853)" onMouseOut="lolite()" onClick="logVariable('line_class')" href="../../../../_variables/line_class.html">$line_class</a> = <a class="var it6853" onMouseOver="hilite(6853)" onMouseOut="lolite()" onClick="logVariable('line_class')" href="../../../../_variables/line_class.html">$line_class</a> == 'even' ? 'odd' : 'even';
<a name="l4092"><span class="linenum">4092</span></a>  
<a name="l4093"><span class="linenum">4093</span></a>      <a class="var it4330" onMouseOver="hilite(4330)" onMouseOut="lolite()" onClick="logVariable('perm_edit')" href="../../../../_variables/perm_edit.html">$perm_edit</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_cats', '', false, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a> );
<a name="l4094"><span class="linenum">4094</span></a>      <a class="var it6854" onMouseOver="hilite(6854)" onMouseOut="lolite()" onClick="logVariable('perm_create_item')" href="../../../../_variables/perm_create_item.html">$perm_create_item</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_post_statuses', 'edit', false, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a> );
<a name="l4095"><span class="linenum">4095</span></a>  
<a name="l4096"><span class="linenum">4096</span></a>  <span class="comment">    // Redirect to manual pages after adding/editing chapter</span>
<a name="l4097"><span class="linenum">4097</span></a>      <a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('redirect_page')" href="../../../../_variables/redirect_page.html">$redirect_page</a> = '&amp;amp;redirect_page=manual';
<a name="l4098"><span class="linenum">4098</span></a>  
<a name="l4099"><span class="linenum">4099</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = '&lt;tr id=&quot;cat-'.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&quot; class=&quot;'.<a class="var it6853" onMouseOver="hilite(6853)" onMouseOut="lolite()" onClick="logVariable('line_class')" href="../../../../_variables/line_class.html">$line_class</a>.( isset( <a class="var it1285" onMouseOver="hilite(1285)" onMouseOut="lolite()" onClick="logVariable('result_fadeout')" href="../../../../_variables/result_fadeout.html">$result_fadeout</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it1285" onMouseOver="hilite(1285)" onMouseOut="lolite()" onClick="logVariable('result_fadeout')" href="../../../../_variables/result_fadeout.html">$result_fadeout</a> ) ? ' fadeout-ffff00': '' ).'&quot;&gt;';
<a name="l4100"><span class="linenum">4100</span></a>  
<a name="l4101"><span class="linenum">4101</span></a>      <a class="var it6855" onMouseOver="hilite(6855)" onMouseOut="lolite()" onClick="logVariable('open_url')" href="../../../../_variables/open_url.html">$open_url</a> = <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;tab=manual&amp;amp;blog='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a>;
<a name="l4102"><span class="linenum">4102</span></a>  <span class="comment">    // Name</span>
<a name="l4103"><span class="linenum">4103</span></a>      if( <a class="var it6852" onMouseOver="hilite(6852)" onMouseOut="lolite()" onClick="logVariable('is_opened')" href="../../../../_variables/is_opened.html">$is_opened</a> )
<a name="l4104"><span class="linenum">4104</span></a>      { // Chapter is expanded
<a name="l4105"><span class="linenum">4105</span></a>          <a class="var it6856" onMouseOver="hilite(6856)" onMouseOut="lolite()" onClick="logVariable('cat_icon')" href="../../../../_variables/cat_icon.html">$cat_icon</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'filters_hide' );
<a name="l4106"><span class="linenum">4106</span></a>          if( <a class="var it1357" onMouseOver="hilite(1357)" onMouseOut="lolite()" onClick="logVariable('parent_Chapter')" href="../../../../_variables/parent_Chapter.html">$parent_Chapter</a> = &amp; <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;get_parent_Chapter() )
<a name="l4107"><span class="linenum">4107</span></a>          {
<a name="l4108"><span class="linenum">4108</span></a>              <a class="var it6855" onMouseOver="hilite(6855)" onMouseOut="lolite()" onClick="logVariable('open_url')" href="../../../../_variables/open_url.html">$open_url</a> .= '&amp;amp;cat_ID='.<a class="var it1357" onMouseOver="hilite(1357)" onMouseOut="lolite()" onClick="logVariable('parent_Chapter')" href="../../../../_variables/parent_Chapter.html">$parent_Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9195" onMouseOver="hilite(9195)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l4109"><span class="linenum">4109</span></a>          }
<a name="l4110"><span class="linenum">4110</span></a>      }
<a name="l4111"><span class="linenum">4111</span></a>      else
<a name="l4112"><span class="linenum">4112</span></a>      { // Chapter is collapsed
<a name="l4113"><span class="linenum">4113</span></a>          <a class="var it6856" onMouseOver="hilite(6856)" onMouseOut="lolite()" onClick="logVariable('cat_icon')" href="../../../../_variables/cat_icon.html">$cat_icon</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'filters_show' );
<a name="l4114"><span class="linenum">4114</span></a>          <a class="var it6855" onMouseOver="hilite(6855)" onMouseOut="lolite()" onClick="logVariable('open_url')" href="../../../../_variables/open_url.html">$open_url</a> .= '&amp;amp;cat_ID='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l4115"><span class="linenum">4115</span></a>      }
<a name="l4116"><span class="linenum">4116</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;firstcol&quot;&gt;'
<a name="l4117"><span class="linenum">4117</span></a>                      .'&lt;strong style=&quot;padding-left: '.(<a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>).'em;&quot;&gt;'
<a name="l4118"><span class="linenum">4118</span></a>                          .'&lt;a href=&quot;'.<a class="var it6855" onMouseOver="hilite(6855)" onMouseOut="lolite()" onClick="logVariable('open_url')" href="../../../../_variables/open_url.html">$open_url</a>.'&quot;&gt;'.<a class="var it6856" onMouseOver="hilite(6856)" onMouseOut="lolite()" onClick="logVariable('cat_icon')" href="../../../../_variables/cat_icon.html">$cat_icon</a>.'&lt;/a&gt;';
<a name="l4119"><span class="linenum">4119</span></a>      if( <a class="var it4330" onMouseOver="hilite(4330)" onMouseOut="lolite()" onClick="logVariable('perm_edit')" href="../../../../_variables/perm_edit.html">$perm_edit</a> )
<a name="l4120"><span class="linenum">4120</span></a>      { // Current user can edit the chapters of the blog
<a name="l4121"><span class="linenum">4121</span></a>          <a class="var it1369" onMouseOver="hilite(1369)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../../_variables/edit_url.html">$edit_url</a> = <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=chapters&amp;amp;blog='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a>.'&amp;amp;cat_ID='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;action=edit'.<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('redirect_page')" href="../../../../_variables/redirect_page.html">$redirect_page</a>;
<a name="l4122"><span class="linenum">4122</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it1369" onMouseOver="hilite(1369)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../../_variables/edit_url.html">$edit_url</a>.'&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit...').'&quot;&gt;'.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('name').'&lt;/a&gt;';
<a name="l4123"><span class="linenum">4123</span></a>      }
<a name="l4124"><span class="linenum">4124</span></a>      else
<a name="l4125"><span class="linenum">4125</span></a>      {
<a name="l4126"><span class="linenum">4126</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('name');
<a name="l4127"><span class="linenum">4127</span></a>      }
<a name="l4128"><span class="linenum">4128</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;/strong&gt;&lt;/td&gt;';
<a name="l4129"><span class="linenum">4129</span></a>  
<a name="l4130"><span class="linenum">4130</span></a>  <span class="comment">    // URL &quot;slug&quot;</span>
<a name="l4131"><span class="linenum">4131</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td&gt;&lt;a href=&quot;'.<a class="function" onClick="logFunction('evo_htmlspecialchars')" href="../../../../_functions/evo_htmlspecialchars.html" onMouseOver="funcPopup(event,'evo_htmlspecialchars')">evo_htmlspecialchars</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>()).'&quot;&gt;'.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('urlname').'&lt;/a&gt;&lt;/td&gt;';
<a name="l4132"><span class="linenum">4132</span></a>  
<a name="l4133"><span class="linenum">4133</span></a>  <span class="comment">    // Order</span>
<a name="l4134"><span class="linenum">4134</span></a>      <a class="var it6857" onMouseOver="hilite(6857)" onMouseOut="lolite()" onClick="logVariable('order_attrs')" href="../../../../_variables/order_attrs.html">$order_attrs</a> = '';
<a name="l4135"><span class="linenum">4135</span></a>      if( <a class="var it4330" onMouseOver="hilite(4330)" onMouseOut="lolite()" onClick="logVariable('perm_edit')" href="../../../../_variables/perm_edit.html">$perm_edit</a> )
<a name="l4136"><span class="linenum">4136</span></a>      { // Add availability to edit an order if current user can edit chapters
<a name="l4137"><span class="linenum">4137</span></a>          <a class="var it6857" onMouseOver="hilite(6857)" onMouseOut="lolite()" onClick="logVariable('order_attrs')" href="../../../../_variables/order_attrs.html">$order_attrs</a> = ' id=&quot;order-chapter-'.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&quot; title=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Click to change an order'), 'htmlattr' ).'&quot;';
<a name="l4138"><span class="linenum">4138</span></a>      }
<a name="l4139"><span class="linenum">4139</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;center&quot;'.<a class="var it6857" onMouseOver="hilite(6857)" onMouseOut="lolite()" onClick="logVariable('order_attrs')" href="../../../../_variables/order_attrs.html">$order_attrs</a>.'&gt;'.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('order').'&lt;/td&gt;';
<a name="l4140"><span class="linenum">4140</span></a>  
<a name="l4141"><span class="linenum">4141</span></a>  <span class="comment">    // Actions</span>
<a name="l4142"><span class="linenum">4142</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;lastcol shrinkwrap&quot;&gt;';
<a name="l4143"><span class="linenum">4143</span></a>      if( <a class="var it4330" onMouseOver="hilite(4330)" onMouseOut="lolite()" onClick="logVariable('perm_edit')" href="../../../../_variables/perm_edit.html">$perm_edit</a> || <a class="var it6854" onMouseOver="hilite(6854)" onMouseOut="lolite()" onClick="logVariable('perm_create_item')" href="../../../../_variables/perm_create_item.html">$perm_create_item</a> )
<a name="l4144"><span class="linenum">4144</span></a>      { // Current user can edit the chapters of the blog or can create item in the blog
<a name="l4145"><span class="linenum">4145</span></a>          if( <a class="var it4330" onMouseOver="hilite(4330)" onMouseOut="lolite()" onClick="logVariable('perm_edit')" href="../../../../_variables/perm_edit.html">$perm_edit</a> )
<a name="l4146"><span class="linenum">4146</span></a>          { // Create/Edit chapter, Move to another blog
<a name="l4147"><span class="linenum">4147</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit...'), 'edit', <a class="var it1369" onMouseOver="hilite(1369)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../../_variables/edit_url.html">$edit_url</a> );
<a name="l4148"><span class="linenum">4148</span></a>              if( <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('allow_moving_chapters') )
<a name="l4149"><span class="linenum">4149</span></a>              { // If moving cats between blogs is allowed:
<a name="l4150"><span class="linenum">4150</span></a>                  <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Move to a different blog...'), 'file_move', <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=chapters&amp;amp;blog='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a>.'&amp;amp;cat_ID='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;action=move', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Move') );
<a name="l4151"><span class="linenum">4151</span></a>              }
<a name="l4152"><span class="linenum">4152</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('<span class="keyword">New </span><a class="class" onClick="logClass('chapter')" href="../../../../_classes/chapter.html" onMouseOver="classPopup(event,'chapter')">chapter</a>...'), 'add', <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=chapters&amp;amp;blog='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a>.'&amp;amp;cat_parent_ID='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;action=new'.<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('redirect_page')" href="../../../../_variables/redirect_page.html">$redirect_page</a> );
<a name="l4153"><span class="linenum">4153</span></a>          }
<a name="l4154"><span class="linenum">4154</span></a>          if( <a class="var it6854" onMouseOver="hilite(6854)" onMouseOut="lolite()" onClick="logVariable('perm_create_item')" href="../../../../_variables/perm_create_item.html">$perm_create_item</a> )
<a name="l4155"><span class="linenum">4155</span></a>          { // Create <span class="keyword">new </span><a class="class" onClick="logClass('item')" href="../../../../_classes/item.html" onMouseOver="classPopup(event,'item')">item</a>
<a name="l4156"><span class="linenum">4156</span></a>              <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> = '&amp;amp;redirect_to='.<a class="phpfunction" onClick="logFunction('urlencode')" href="../../../../_functions/urlencode.html" onMouseOver="phpfuncPopup(event,'urlencode')">urlencode</a>( <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;tab=manual&amp;cat_ID='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l4157"><span class="linenum">4157</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New manual page...'), 'new', <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;action=new&amp;blog='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a>.'&amp;amp;cat='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.<a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a>, NULL, NULL, NULL, array(), array( 'style' =&gt; 'width:12px' ) );
<a name="l4158"><span class="linenum">4158</span></a>          }
<a name="l4159"><span class="linenum">4159</span></a>          if( <a class="var it4330" onMouseOver="hilite(4330)" onMouseOut="lolite()" onClick="logVariable('perm_edit')" href="../../../../_variables/perm_edit.html">$perm_edit</a> )
<a name="l4160"><span class="linenum">4160</span></a>          { // Delete chapter
<a name="l4161"><span class="linenum">4161</span></a>              <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete chapter...'), 'delete', <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=chapters&amp;amp;blog='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/blog_ID.html">blog_ID</a>.'&amp;amp;cat_ID='.<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it9015" onMouseOver="hilite(9015)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;action=delete&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('element').<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('redirect_page')" href="../../../../_variables/redirect_page.html">$redirect_page</a> );
<a name="l4162"><span class="linenum">4162</span></a>          }
<a name="l4163"><span class="linenum">4163</span></a>      }
<a name="l4164"><span class="linenum">4164</span></a>      else
<a name="l4165"><span class="linenum">4165</span></a>      {
<a name="l4166"><span class="linenum">4166</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&amp;nbsp;';
<a name="l4167"><span class="linenum">4167</span></a>      }
<a name="l4168"><span class="linenum">4168</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;/td&gt;';
<a name="l4169"><span class="linenum">4169</span></a>  
<a name="l4170"><span class="linenum">4170</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;/tr&gt;';
<a name="l4171"><span class="linenum">4171</span></a>  
<a name="l4172"><span class="linenum">4172</span></a>      echo <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l4173"><span class="linenum">4173</span></a>  }
<a name="l4174"><span class="linenum">4174</span></a>  
<a name="l4175"><span class="linenum">4175</span></a>  
<a name="l4176"><span class="linenum">4176</span></a>  <span class="comment">/**</span>
<a name="l4177"><span class="linenum">4177</span></a>  <span class="comment"> * Display item row</span>
<a name="l4178"><span class="linenum">4178</span></a>  <span class="comment"> *</span>
<a name="l4179"><span class="linenum">4179</span></a>  <span class="comment"> * @param object Item</span>
<a name="l4180"><span class="linenum">4180</span></a>  <span class="comment"> * @param integer Level of the category in the recursive tree</span>
<a name="l4181"><span class="linenum">4181</span></a>  <span class="comment"> * @param array Params</span>
<a name="l4182"><span class="linenum">4182</span></a>  <span class="comment"> */</span>
<a name="l4183"><span class="linenum">4183</span></a>  function <a class="function" onClick="logFunction('manual_display_post_row')" href="../../../../_functions/manual_display_post_row.html" onMouseOver="funcPopup(event,'manual_display_post_row')">manual_display_post_row</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l4184"><span class="linenum">4184</span></a>  {
<a name="l4185"><span class="linenum">4185</span></a>      global <a class="var it6853" onMouseOver="hilite(6853)" onMouseOut="lolite()" onClick="logVariable('line_class')" href="../../../../_variables/line_class.html">$line_class</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../../_variables/Settings.html">$Settings</a>;
<a name="l4186"><span class="linenum">4186</span></a>      global <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>;
<a name="l4187"><span class="linenum">4187</span></a>      global <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>;
<a name="l4188"><span class="linenum">4188</span></a>  
<a name="l4189"><span class="linenum">4189</span></a>      <a class="var it1285" onMouseOver="hilite(1285)" onMouseOut="lolite()" onClick="logVariable('result_fadeout')" href="../../../../_variables/result_fadeout.html">$result_fadeout</a> = <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'fadeout_array' );
<a name="l4190"><span class="linenum">4190</span></a>  
<a name="l4191"><span class="linenum">4191</span></a>      <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4192"><span class="linenum">4192</span></a>              'title_before' =&gt; '',
<a name="l4193"><span class="linenum">4193</span></a>              'title_after'  =&gt; '',
<a name="l4194"><span class="linenum">4194</span></a>          ), <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l4195"><span class="linenum">4195</span></a>  
<a name="l4196"><span class="linenum">4196</span></a>      <a class="var it6853" onMouseOver="hilite(6853)" onMouseOut="lolite()" onClick="logVariable('line_class')" href="../../../../_variables/line_class.html">$line_class</a> = <a class="var it6853" onMouseOver="hilite(6853)" onMouseOut="lolite()" onClick="logVariable('line_class')" href="../../../../_variables/line_class.html">$line_class</a> == 'even' ? 'odd' : 'even';
<a name="l4197"><span class="linenum">4197</span></a>  
<a name="l4198"><span class="linenum">4198</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> = '&lt;tr id=&quot;item-'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&quot; class=&quot;'.<a class="var it6853" onMouseOver="hilite(6853)" onMouseOut="lolite()" onClick="logVariable('line_class')" href="../../../../_variables/line_class.html">$line_class</a>.( isset( <a class="var it1285" onMouseOver="hilite(1285)" onMouseOut="lolite()" onClick="logVariable('result_fadeout')" href="../../../../_variables/result_fadeout.html">$result_fadeout</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'item-'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>, <a class="var it1285" onMouseOver="hilite(1285)" onMouseOut="lolite()" onClick="logVariable('result_fadeout')" href="../../../../_variables/result_fadeout.html">$result_fadeout</a> ) ? ' fadeout-ffff00': '' ).'&quot;&gt;';
<a name="l4199"><span class="linenum">4199</span></a>  
<a name="l4200"><span class="linenum">4200</span></a>  <span class="comment">    // Title</span>
<a name="l4201"><span class="linenum">4201</span></a>      <a class="var it1369" onMouseOver="hilite(1369)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../../_variables/edit_url.html">$edit_url</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l4202"><span class="linenum">4202</span></a>      <a class="var it6858" onMouseOver="hilite(6858)" onMouseOut="lolite()" onClick="logVariable('item_icon')" href="../../../../_variables/item_icon.html">$item_icon</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'post', 'imgtag', array( 'title' =&gt; '' ) );
<a name="l4203"><span class="linenum">4203</span></a>      <a class="var it6859" onMouseOver="hilite(6859)" onMouseOut="lolite()" onClick="logVariable('item_edit_url')" href="../../../../_variables/item_edit_url.html">$item_edit_url</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_edit_url')" href="../../../../_functions/get_edit_url.html" onMouseOver="funcPopup(event,'get_edit_url')">get_edit_url</a>();
<a name="l4204"><span class="linenum">4204</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;firstcol&quot;&gt;&lt;strong style=&quot;padding-left: '.(<a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../../../_variables/level.html">$level</a>).'em;&quot;&gt;';
<a name="l4205"><span class="linenum">4205</span></a>      if( !empty( <a class="var it6859" onMouseOver="hilite(6859)" onMouseOut="lolite()" onClick="logVariable('item_edit_url')" href="../../../../_variables/item_edit_url.html">$item_edit_url</a> ) )
<a name="l4206"><span class="linenum">4206</span></a>      { // If current user can edit this item
<a name="l4207"><span class="linenum">4207</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_edit_url')" href="../../../../_functions/get_edit_url.html" onMouseOver="funcPopup(event,'get_edit_url')">get_edit_url</a>().'&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit...').'&quot;&gt;';
<a name="l4208"><span class="linenum">4208</span></a>      }
<a name="l4209"><span class="linenum">4209</span></a>      else
<a name="l4210"><span class="linenum">4210</span></a>      {
<a name="l4211"><span class="linenum">4211</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '';
<a name="l4212"><span class="linenum">4212</span></a>      }
<a name="l4213"><span class="linenum">4213</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['title_before']
<a name="l4214"><span class="linenum">4214</span></a>              .<a class="var it6858" onMouseOver="hilite(6858)" onMouseOut="lolite()" onClick="logVariable('item_icon')" href="../../../../_variables/item_icon.html">$item_icon</a>
<a name="l4215"><span class="linenum">4215</span></a>              .<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('title')
<a name="l4216"><span class="linenum">4216</span></a>              .<a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['title_after'];
<a name="l4217"><span class="linenum">4217</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= !empty( <a class="var it6859" onMouseOver="hilite(6859)" onMouseOut="lolite()" onClick="logVariable('item_edit_url')" href="../../../../_variables/item_edit_url.html">$item_edit_url</a> ) ? '&lt;/a&gt;' : '';
<a name="l4218"><span class="linenum">4218</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;/strong&gt;&lt;/td&gt;';
<a name="l4219"><span class="linenum">4219</span></a>  
<a name="l4220"><span class="linenum">4220</span></a>  <span class="comment">    // URL &quot;slug&quot;</span>
<a name="l4221"><span class="linenum">4221</span></a>      <a class="var it1369" onMouseOver="hilite(1369)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../../_variables/edit_url.html">$edit_url</a> = <a class="function" onClick="logFunction('regenerate_url')" href="../../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( 'action,cat_ID', 'cat_ID='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;action=edit' );
<a name="l4222"><span class="linenum">4222</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td&gt;'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../../../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>( <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l4223"><span class="linenum">4223</span></a>      if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'slugs', 'view', false ) )
<a name="l4224"><span class="linenum">4224</span></a>      { // Display icon to view all slugs of this item if current user has permission
<a name="l4225"><span class="linenum">4225</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= ' '.<a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit slugs...'), 'edit', <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=slugs&amp;amp;slug_item_ID='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l4226"><span class="linenum">4226</span></a>      }
<a name="l4227"><span class="linenum">4227</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;/td&gt;';
<a name="l4228"><span class="linenum">4228</span></a>  
<a name="l4229"><span class="linenum">4229</span></a>  <span class="comment">    // Order</span>
<a name="l4230"><span class="linenum">4230</span></a>      <a class="var it6857" onMouseOver="hilite(6857)" onMouseOut="lolite()" onClick="logVariable('order_attrs')" href="../../../../_variables/order_attrs.html">$order_attrs</a> = '';
<a name="l4231"><span class="linenum">4231</span></a>      if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!CURSTATUS', 'edit', false, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> ) )
<a name="l4232"><span class="linenum">4232</span></a>      { // Add availability to edit an order if current user can edit this item
<a name="l4233"><span class="linenum">4233</span></a>          <a class="var it6857" onMouseOver="hilite(6857)" onMouseOut="lolite()" onClick="logVariable('order_attrs')" href="../../../../_variables/order_attrs.html">$order_attrs</a> = ' id=&quot;order-item-'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&quot; title=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Click to change an order'), 'htmlattr' ).'&quot;';
<a name="l4234"><span class="linenum">4234</span></a>      }
<a name="l4235"><span class="linenum">4235</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;center&quot;'.<a class="var it6857" onMouseOver="hilite(6857)" onMouseOut="lolite()" onClick="logVariable('order_attrs')" href="../../../../_variables/order_attrs.html">$order_attrs</a>.'&gt;'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('order').'&lt;/td&gt;';
<a name="l4236"><span class="linenum">4236</span></a>  
<a name="l4237"><span class="linenum">4237</span></a>  <span class="comment">    // Actions</span>
<a name="l4238"><span class="linenum">4238</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;td class=&quot;lastcol shrinkwrap&quot;&gt;'.<a class="function" onClick="logFunction('item_edit_actions')" href="../../../../_functions/item_edit_actions.html" onMouseOver="funcPopup(event,'item_edit_actions')">item_edit_actions</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../../_variables/Item.html">$Item</a> ).'&lt;/td&gt;';
<a name="l4239"><span class="linenum">4239</span></a>  
<a name="l4240"><span class="linenum">4240</span></a>      <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a> .= '&lt;/tr&gt;';
<a name="l4241"><span class="linenum">4241</span></a>  
<a name="l4242"><span class="linenum">4242</span></a>      echo <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../../_variables/r.html">$r</a>;
<a name="l4243"><span class="linenum">4243</span></a>  }
<a name="l4244"><span class="linenum">4244</span></a>  
<a name="l4245"><span class="linenum">4245</span></a>  <span class="comment">/**</span>
<a name="l4246"><span class="linenum">4246</span></a>  <span class="comment"> * End of helper functions block to display Items results.</span>
<a name="l4247"><span class="linenum">4247</span></a>  <span class="comment"> * New ( not display helper ) functions must be created above items_results function.</span>
<a name="l4248"><span class="linenum">4248</span></a>  <span class="comment"> */</span>
<a name="l4249"><span class="linenum">4249</span></a>  
<a name="l4250"><span class="linenum">4250</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'display_body_start': ['display_body_start', '', [['blogs/inc/_core/ui','_uiwidget.class.php',903]], 9],
'get_status': ['get_status', 'Get status of comment ', [['blogs/inc/comments/model','_comment.class.php',2992],['blogs/inc/cron/model','_cronjob.class.php',180],['blogs/inc/items/model','_item.class.php',4116]], 8],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['blogs/inc/chapters/model','_chapter.class.php',317],['blogs/inc/collections/model','_collsettings.class.php',260],['blogs/inc/users/model','_group.class.php',470],['blogs/inc/widgets/model','_widget.class.php',757],['blogs/inc/collections/model','_blog.class.php',2327],['blogs/inc/settings/model','_abstractsettings.class.php',593],['blogs/inc/users/model','_user.class.php',2934],['blogs/inc/skins/model','_skin.class.php',348],['blogs/inc/comments/model','_comment.class.php',3470],['blogs/inc/users/model','_groupsettings.class.php',159],['blogs/inc/cron/model','_cronjob.class.php',207],['blogs/inc/items/model','_item.class.php',4867],['blogs/inc/slugs/model','_slug.class.php',265],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',129],['blogs/inc/files/model','_file.class.php',1739]], 266],
'get_deleted_posts': ['get_deleted_posts', 'Get the posts of this user which current user can delete ', [['blogs/inc/users/model','_user.class.php',4706]], 5],
'echo_onchange_newcat': ['echo_onchange_newcat', '', [['blogs/inc/items/model','_item.funcs.php',2164]], 6],
'item_priority_color': ['item_priority_color', 'Get priority color of an item by priority value ', [['blogs/inc/items/model','_item.funcs.php',3077]], 2],
'display_hidden_custom_fields': ['display_hidden_custom_fields', 'Display custom field settings as hidden input values ', [['blogs/inc/items/model','_item.funcs.php',2929]], 4],
'recreate_autogenerated_excerpts': ['recreate_autogenerated_excerpts', 'Recreate posts autogenerated excerpts Only those posts excerpt will be recreated which are visible in the front office ', [['blogs/inc/items/model','_item.funcs.php',889]], 2],
'is_special': ['is_special', 'Is this a Special post (Page, Intros, Sidebar, Advertisement) ', [['blogs/inc/items/model','_itemlight.class.php',176]], 5],
'check_perm_posttype': ['check_perm_posttype', 'Assert that the supplied post type can be used by the current user in the post\'s extra categories\' context. ', [['blogs/inc/items/model','_item.funcs.php',1867]], 4],
'get_item_new_link': ['get_item_new_link', 'Template tag: Get a link to create a new post ', [['blogs/inc/items/model','_item.funcs.php',2788]], 2],
'skin_init_ajax': ['skin_init_ajax', 'Initialize skin for AJAX request ', [['blogs/inc/skins','_skin.funcs.php',870]], 1],
'check_categories_nosave': ['check_categories_nosave', '', [['blogs/inc/items/model','_item.funcs.php',2135]], 11],
'display_col_headers': ['display_col_headers', 'Display column headers ', [['blogs/inc/_core/ui','_uiwidget.class.php',614]], 6],
'load_by_sql': ['load_by_sql', 'Load a set of objects into the cache. Already loaded objects get excluded via "NOT IN()" ', [['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',269]], 9],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['blogs/inc/_core','_param.funcs.php',50]], 1906],
'cat_children': ['cat_children', 'Taking a recursive walk in the category park... ', [['blogs/inc/collections/model','_category.funcs.php',329]], 5],
'items_edited_results_block': ['items_edited_results_block', 'Display the edited items results table ', [['blogs/inc/items/model','_item.funcs.php',3340]], 1],
'echo_onchange_item_type_js': ['echo_onchange_item_type_js', 'Make location fields are not required for special posts ', [['blogs/inc/items/model','_item.funcs.php',2244]], 1],
'get_item': ['get_item', 'Getting next item in archive list ', [['blogs/plugins','_archives.plugin.php',594]], 85],
'manual_display_posts': ['manual_display_posts', 'Display a list of the posts for current chapter ', [['blogs/inc/items/model','_item.funcs.php',3850]], 1],
'get_regions_option_list': ['get_regions_option_list', 'Get option list with regions by country ID ', [['blogs/inc/regional/model','_regional.funcs.php',119]], 8],
'list': ['list', '', [['blogs/rsc/js/bootstrap','typeahead.bundle.js',156]], 95],
'echo_pagenumber': ['echo_pagenumber', 'Display a page link on item full view ', [['blogs/inc/items/model','_item.funcs.php',2537]], 7],
'get_postdata': ['get_postdata', 'if global $postdata was not set it will be ', [['blogs/inc/items/model','_item.funcs.php',508]], 0],
'set_filters': ['set_filters', 'Set/Activate filterset ', [['blogs/inc/items/model','_itemlistlight.class.php',187],['blogs/inc/_core/model/dataobjects','_dataobjectlist2.class.php',225],['blogs/inc/users/model','_userlist.class.php',132],['blogs/inc/comments/model','_commentlist.class.php',158]], 40],
'get_history_link': ['get_history_link', 'Get a link to history of Item ', [['blogs/inc/items/model','_itemlight.class.php',1352]], 3],
'cat_select_new': ['cat_select_new', 'new category line for catselect table ', [['blogs/inc/items/model','_item.funcs.php',1302]], 2],
'check_categories': ['check_categories', '', [['blogs/inc/items/model','_item.funcs.php',1984]], 4],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['blogs/inc/_core','_misc.funcs.php',2535]], 216],
'date2mysql': ['date2mysql', 'Convert timestamp to MySQL/ISO format. ', [['blogs/inc/_core','_misc.funcs.php',1238]], 40],
'author_url_with_actions': ['author_url_with_actions', 'Display author url, delete icon and ban icon if user has proper rights ', [['blogs/inc/comments/model','_comment.class.php',1126]], 3],
'get_item_custom_fields': ['get_item_custom_fields', 'Get custom fields for item of current Blog ', [['blogs/inc/items/model','_item.funcs.php',2888]], 3],
'echo_publishnowbutton_js': ['echo_publishnowbutton_js', 'Output JavaScript code to dynamically show or hide the "Publish NOW!" button depending on the selected post status. ', [['blogs/inc/items/model','_item.funcs.php',1785]], 5],
'get_blog_id': ['get_blog_id', '', [['blogs/inc/items/model','_itemlight.class.php',733]], 33],
'permanent_link': ['permanent_link', 'Displays a permalink link to the Item ', [['blogs/inc/items/model','_itemlight.class.php',1049],['blogs/inc/comments/model','_comment.class.php',2339]], 25],
'select': ['select', 'Set SELECT clause ', [['blogs/inc/_core/model/db','_sql.class.php',194],['blogs/inc/_core/model/db','_db.class.php',466],['blogs/inc/_core/ui/forms','_form.class.php',1820]], 461],
'echo_show_comments_changed': ['echo_show_comments_changed', 'Handle show_comments radioboxes on item list full view ', [['blogs/inc/items/model','_item.funcs.php',2223]], 1],
'vote_spam': ['vote_spam', 'Display link to vote a comment as SPAM if user has edit rights ', [['blogs/inc/comments/model','_comment.class.php',1637]], 3],
'rating': ['rating', 'Template tag:  display rating ', [['blogs/inc/comments/model','_comment.class.php',2864]], 4],
'bpost_count_words': ['bpost_count_words', 'Returns the number of the words in a string, sans HTML ', [['blogs/inc/items/model','_item.funcs.php',573]], 4],
'echo_set_slug_changed': ['echo_set_slug_changed', 'Set slug_changed to 1 for cases when it is not needed trim slug ', [['blogs/inc/items/model','_item.funcs.php',2210]], 1],
'echo_pages': ['echo_pages', 'Display page links on item full view ', [['blogs/inc/items/model','_item.funcs.php',2550]], 2],
'country_visible': ['country_visible', 'Country is visible for defining ', [['blogs/inc/collections/model','_blog.class.php',3040]], 3],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['blogs/inc/_core/model/db','_db.class.php',961]], 137],
'get_timestamp_max': ['get_timestamp_max', 'Get timestamp value from the setting "timestamp_max" ', [['blogs/inc/collections/model','_blog.class.php',2919]], 13],
'get_prevent_key_enter_js': ['get_prevent_key_enter_js', 'Get JS code to prevent event of the key "Enter" for selected elements, Used to stop form submitting by enter on some input fields ', [['blogs/inc/_core','_template.funcs.php',2841]], 3],
'echo_link_files_js': ['echo_link_files_js', 'Output JavaScript code for "Add/Link files" link ', [['blogs/inc/items/model','_item.funcs.php',1767]], 2],
'url_crumb': ['url_crumb', 'Create a crumb param to be passed in action urls... ', [['blogs/inc/_core','_url.funcs.php',579]], 248],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['blogs/inc/_core/model/db','_db.class.php',1092]], 140],
'get_visibility_statuses': ['get_visibility_statuses', 'Get available post statuses ', [['blogs/inc/collections/model','_blog.funcs.php',897]], 60],
'pop_up_window': ['pop_up_window', 'Opens a window, centers it and makes sure it gets focus. ', [['blogs/rsc/js','functions.js',34]], 9],
'get_subregions_option_list': ['get_subregions_option_list', 'Get option list with sub-regions by region ID ', [['blogs/inc/regional/model','_regional.funcs.php',146]], 7],
'statuses_where_clause': ['statuses_where_clause', 'Construct the where clause to limit retrieved posts/comment on their status ', [['blogs/inc/items/model','_item.funcs.php',714]], 8],
'get_post_cat_setting': ['get_post_cat_setting', 'Get post category setting ', [['blogs/inc/items/model','_item.funcs.php',861]], 9],
'item_priority_titles': ['item_priority_titles', 'Get priority titles of an item ', [['blogs/inc/items/model','_item.funcs.php',3019]], 3],
'unfilter_contents': ['unfilter_contents', 'UnFilter (post) contents by calling the relevant filter plugins. ', [['blogs/inc/plugins/model','_plugins_admin.class.php',1511]], 7],
'get_filemanager_link': ['get_filemanager_link', 'Get link to edit files ', [['blogs/inc/collections/model','_blog.class.php',1727]], 4],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['blogs/inc/_core','_misc.funcs.php',221]], 293],
'generic_ctp_number': ['generic_ctp_number', 'Generic comments/trackbacks/pingbacks counting ', [['blogs/inc/comments/model','_comment.funcs.php',34]], 18],
'manual_get_chapter_children': ['manual_get_chapter_children', 'Get the children of current chapter recursively ', [['blogs/inc/items/model','_item.funcs.php',4014]], 2],
'get_permanent_link': ['get_permanent_link', 'Returns a permalink link to the Item ', [['blogs/inc/items/model','_itemlight.class.php',994],['blogs/inc/comments/model','_comment.class.php',2286]], 12],
'visibility_select': ['visibility_select', 'Allow to select status/visibility ', [['blogs/inc/items/model','_item.funcs.php',1535]], 6],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['blogs/inc/_core','_url.funcs.php',507]], 241],
'get_publish_link': ['get_publish_link', 'Provide link to publish a comment if user has edit rights ', [['blogs/inc/comments/model','_comment.class.php',1836],['blogs/inc/items/model','_item.class.php',3759]], 2],
'item_link_by_urltitle': ['item_link_by_urltitle', 'Template tag: Link to an item identified by its url title / slug / name ', [['blogs/inc/items/model','_item.funcs.php',1625]], 0],
'get_deprecate_link': ['get_deprecate_link', 'Provide link to deprecate a comment if user has edit rights ', [['blogs/inc/comments/model','_comment.class.php',1438],['blogs/inc/items/model','_item.class.php',4002]], 3],
'attach_browse_tabs': ['attach_browse_tabs', 'Used by the items & the comments controllers ', [['blogs/inc/items/model','_item.funcs.php',1366]], 7],
'manual_display_chapters': ['manual_display_chapters', 'Display chapters list ', [['blogs/inc/items/model','_item.funcs.php',3727]], 2],
'radio': ['radio', 'Generate set of radio options. ', [['blogs/inc/_core/ui/forms','_form.class.php',2966]], 71],
'items_results': ['items_results', 'Initialize Results object for items list ', [['blogs/inc/items/model','_item.funcs.php',3474]], 4],
'htmlspecialchars_decode': ['htmlspecialchars_decode', '', [['blogs/rsc/js/multiupload','fileuploader.js',74],['blogs/inc/_core','_misc.funcs.php',6144]], 13],
'mysql2timestamp': ['mysql2timestamp', 'Convert a MYSQL date to a UNIX timestamp. ', [['blogs/inc/_core','_misc.funcs.php',1249]], 14],
'get_issue_date': ['get_issue_date', 'returns issue date (datetime) of Item ', [['blogs/inc/items/model','_itemlight.class.php',744]], 3],
'is_ajax_content': ['is_ajax_content', 'Check if current request is AJAX Used in order to get only content of the requested page ', [['blogs/inc/_core','_misc.funcs.php',6253]], 31],
'header_redirect': ['header_redirect', 'Sends HTTP header to redirect to the previous location (which can be given as function parameter, GET parameter (redirect_to), is taken from {@link Hit::$referer} or {@link $baseurl}). ', [['blogs/inc/_core','_template.funcs.php',110]], 373],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['blogs/inc/users/model','_user.funcs.php',60]], 190],
'hidden': ['hidden', 'Builds an hidden input tag, overwriting any previous hidden values (except for "foo[]"). ', [['blogs/inc/_core/ui/forms','_form.class.php',2657]], 600],
'set_max_execution_time': ['set_max_execution_time', 'Set max execution time ', [['blogs/inc/_core','_misc.funcs.php',5658]], 20],
'task_title_link': ['task_title_link', 'Get a link with task title ', [['blogs/inc/items/model','_item.funcs.php',3611]], 2],
'get_item_type_id': ['get_item_type_id', '', [['blogs/inc/items/model','_item.funcs.php',323]], 1],
'url_same_protocol': ['url_same_protocol', 'Get $url with the same protocol (http/https) as $other_url. ', [['blogs/inc/_core','_url.funcs.php',471]], 2],
'submit': ['submit', 'Builds a submit input tag ', [['blogs/inc/_core/ui/forms','_form.class.php',2832]], 46],
'load_subset': ['load_subset', 'Load a keyed subset of the cache ', [['blogs/inc/chapters/model','_chaptercache.class.php',221]], 7],
'get_edit_link': ['get_edit_link', 'Provide link to edit a chapter if user has edit rights ', [['blogs/inc/chapters/model','_chapter.class.php',422],['blogs/inc/items/model','_item.class.php',3618]], 5],
'evo_htmlspecialchars': ['evo_htmlspecialchars', 'Wrapper function for htmlspecialchars to use the $evo_charset as default charset ', [['blogs/inc/_core','_misc.funcs.php',759]], 138],
'item_new_link': ['item_new_link', 'Template tag: Display a link to create a new post ', [['blogs/inc/items/model','_item.funcs.php',2779]], 0],
'refresh_item_comments': ['refresh_item_comments', '', [['blogs/inc/comments/model','_comment_js.funcs.php',333]], 3],
'preview_from_request': ['preview_from_request', 'We want to preview a single post, we are going to fake a lot of things... ', [['blogs/inc/items/model','_itemlist.class.php',89]], 2],
'ip_country': ['ip_country', 'Template function: display comment\'s country that was detected by IP address ', [['blogs/inc/comments/model','_comment.class.php',1015]], 3],
'get_page_id_array': ['get_page_id_array', 'Get an array of IDs for current page ', [['blogs/inc/_core/ui/results','_results.class.php',713]], 12],
'regenerate_url': ['regenerate_url', 'Regenerate current URL from parameters This may clean it up But it is also useful when generating static pages: you cannot rely on $_REQUEST[] ', [['blogs/inc/_core','_param.funcs.php',1743]], 456],
'get_user_identity_link': ['get_user_identity_link', 'Get User identity link. User is given with his login or ID. User login or ID must be set. ', [['blogs/inc/users/model','_user.funcs.php',884]], 12],
'get_next_status': ['get_next_status', 'Get next status to publish/restrict to this comment ', [['blogs/inc/comments/model','_comment.class.php',1792],['blogs/inc/items/model','_item.class.php',3720]], 12],
'echo_set_is_attachments': ['echo_set_is_attachments', 'Output JavaScript code to set hidden field is_attachments which indicates that we must show attachments files popup window ', [['blogs/inc/items/model','_item.funcs.php',1749]], 2],
'init_params_by_skin': ['init_params_by_skin', 'Init results params from skin template params. It\'s used when Results table is filled from ajax result. ', [['blogs/inc/_core/ui','_uiwidget.class.php',1097]], 9],
'deprecate_link': ['deprecate_link', 'Display link to deprecate a comment if user has edit rights ', [['blogs/inc/comments/model','_comment.class.php',1610],['blogs/inc/items/model','_item.class.php',4043]], 3],
'display': ['display', 'Display the widget! ', [['blogs/inc/widgets/widgets','_menu_link.widget.php',207],['blogs/inc/widgets/widgets','_msg_menu_link.widget.php',183],['blogs/inc/widgets/widgets','_coll_title.widget.php',80],['blogs/inc/widgets/widgets','_coll_tagline.widget.php',80],['blogs/inc/widgets/widgets','_user_login.widget.php',196],['blogs/inc/widgets/widgets','_online_users.widget.php',96],['blogs/inc/widgets/widgets','_free_html.widget.php',111],['blogs/inc/_core/model/db','_sql.class.php',81],['blogs/inc/widgets/widgets','_coll_common_links.widget.php',168],['blogs/inc/widgets/widgets','_coll_media_index.widget.php',169],['blogs/inc/widgets/widgets','_coll_item_list.widget.php',238],['blogs/inc/widgets/model','_widget.class.php',453],['blogs/inc/widgets/widgets','_coll_longdesc.widget.php',100],['blogs/inc/_core/model','_log.class.php',292],['blogs/inc/_core/model','_log.class.php',618],['blogs/inc/widgets/widgets','_mobile_skin_switcher.widget.php',106],['blogs/inc/_core/ui/results','_results.class.php',880],['blogs/inc/widgets/widgets','_coll_search_form.widget.php',115],['blogs/inc/widgets/widgets','_coll_xml_feeds.widget.php',121],['blogs/inc/widgets/widgets','_coll_category_list.widget.php',145],['blogs/plugins','_calendar.plugin.php',536],['blogs/inc/widgets/widgets','_user_avatars.widget.php',144],['blogs/inc/widgets/widgets','_coll_logo.widget.php',109],['blogs/inc/widgets/widgets','_colls_list_public.widget.php',122],['blogs/inc/widgets/widgets','_user_tools.widget.php',252],['blogs/inc/widgets/widgets','_coll_tag_cloud.widget.php',157],['blogs/inc/widgets/widgets','_coll_featured_intro.widget.php',147],['blogs/inc/widgets/widgets','_colls_list_owner.widget.php',122],['blogs/inc/widgets/widgets','_coll_comment_list.widget.php',129],['blogs/inc/_core/model','_messages.class.php',190],['blogs/inc/widgets/widgets','_coll_avatar.widget.php',94]], 107],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['blogs/inc/_core','_param.funcs.php',1673],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',630]], 111],
'echo_comment': ['echo_comment', 'Display a comment corresponding the given comment id ', [['blogs/inc/items/model','_item.funcs.php',2368]], 1],
'init_mainlist': ['init_mainlist', 'Prepare the MainList object for displaying skins. ', [['blogs/inc/items/model','_item.funcs.php',42]], 6],
'replace_vars': ['replace_vars', 'Replaces $vars$ with appropriate values. ', [['blogs/inc/_core/ui','_uiwidget.class.php',130]], 20],
'restore_filterset': ['restore_filterset', 'Load previously saved filterset from session. ', [['blogs/inc/_core/model/dataobjects','_dataobjectlist2.class.php',184]], 5],
'type': ['type', 'Template function: display type of item ', [['blogs/inc/items/model','_itemlight.class.php',1208]], 36],
'echo_autocomplete_tags': ['echo_autocomplete_tags', 'Output Javascript for tags autocompletion. ', [['blogs/inc/items/model','_item.funcs.php',1815]], 5],
'load_funcs': ['load_funcs', '', [['blogs/inc/_core','_misc.funcs.php',115]], 214],
'lower_link': ['lower_link', 'Display lower status link if it is available ', [['blogs/inc/comments/model','_comment.class.php',2089]], 1],
'is_filtered': ['is_filtered', 'Check if the Result set is filtered or not ', [['blogs/inc/_core/model/dataobjects','_dataobjectlist2.class.php',59],['blogs/inc/users/model','_userlist.class.php',550]], 10],
'content': ['content', 'Template function: display content of comment ', [['blogs/inc/comments/model','_comment.class.php',2533],['blogs/inc/items/model','_item.class.php',1741]], 8],
'dget': ['dget', 'Get a ready-to-display member param by its name ', [['blogs/inc/_core/model/dataobjects','_dataobject.class.php',586]], 225],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['blogs/inc/items/model','_itemlist.class.php',256],['blogs/inc/items/model','_itemlistlight.class.php',751],['blogs/inc/_core/model/db','_db.class.php',761],['blogs/inc/users/model','_userlist.class.php',474],['blogs/inc/_core/ui/results','_results.class.php',439],['blogs/inc/comments/model','_commentlist.class.php',515]], 972],
'switch_layout': ['switch_layout', '', [['blogs/inc/_core/ui/forms','_form.class.php',254]], 67],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['blogs/inc/locales','_pofile.class.php',267],['blogs/inc/_core/model/db','_db.class.php',503]], 791],
'set_creator_location': ['set_creator_location', 'Set the Item location from the current user. Use to create a new post. ', [['blogs/inc/items/model','_item.class.php',4588]], 8],
'get_row': ['get_row', 'Get one row from the DB. ', [['blogs/inc/_core/model/db','_db.class.php',996]], 57],
'get_total_rows': ['get_total_rows', 'Get the number of total rows in the result ', [['blogs/inc/_core/ui/results','_results.class.php',840]], 15],
'echo_publish_buttons': ['echo_publish_buttons', '', [['blogs/inc/items/model','_item.funcs.php',1689]], 5],
'display_list_end': ['display_list_end', 'Display list/table end. ', [['blogs/inc/_core/ui','_uiwidget.class.php',563],['blogs/inc/_core/ui/results','_resultsel.class.php',144]], 11],
'get_default_cat_id': ['get_default_cat_id', 'Get default category for current blog ', [['blogs/inc/collections/model','_blog.class.php',1566]], 20],
'item_visibility': ['item_visibility', 'Get the icons to publish or to deprecate the item ', [['blogs/inc/items/model','_item.funcs.php',3667]], 1],
'get_highest_publish_status': ['get_highest_publish_status', 'Get the highest public status and action button label of a new post or comment in the given blog what the current User may create. We assume here that the User should be able to create a post/comment with at least the lowest level status. ', [['blogs/inc/collections/model','_blog.funcs.php',697]], 10],
'user': ['user', 'Constructor ', [['blogs/inc/users/model','_user.class.php',154]], 20],
'ts_': ['ts_', 'Translate and escape single quotes. ', [['blogs/inc/locales','_locale.funcs.php',247],['blogs/inc/skins/model','_skin.class.php',703],['blogs/inc/plugins','_plugin.class.php',2665]], 242],
'callback_on_non_matching_blocks': ['callback_on_non_matching_blocks', 'Split $text into blocks by using $pattern and call $callback on the non-matching blocks. ', [['blogs/inc/_core','_misc.funcs.php',824]], 20],
'get_item_edit_modes': ['get_item_edit_modes', 'Get item edit modes ', [['blogs/inc/items/model','_item.funcs.php',2652]], 2],
'locale_flag': ['locale_flag', 'Template function: Display locale flag ', [['blogs/inc/locales','_locale.funcs.php',494],['blogs/inc/items/model','_itemlight.class.php',827]], 8],
'post': ['post', 'POST wrapper for oAuthRequest. ', [['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',157]], 40],
'get_allowed_statuses_condition': ['get_allowed_statuses_condition', 'Get allowed statuses for the current User ', [['blogs/inc/items/model','_item.funcs.php',612]], 2],
'global_icon': ['global_icon', 'Registers a global action icon ', [['blogs/inc/_core/ui','_uiwidget.class.php',89]], 152],
'begin_fieldset': ['begin_fieldset', 'Builds a fieldset tag. This is a "fieldset" element by default, but a "th" element for table layout. ', [['blogs/inc/_core/ui/forms','_form.class.php',586]], 273],
'manual_display_chapter': ['manual_display_chapter', 'Display chapter and children ', [['blogs/inc/items/model','_item.funcs.php',3775]], 3],
'get_catblog': ['get_catblog', 'Get blog ID for a given cat. This halts on error. ', [['blogs/inc/collections/model','_category.funcs.php',132]], 6],
'cat_select_after_each': ['cat_select_after_each', 'callback after each sublist element ', [['blogs/inc/items/model','_item.funcs.php',1286]], 0],
'is_admin_page': ['is_admin_page', 'Is the current page an admin/backoffice page? ', [['blogs/inc/_core','_misc.funcs.php',4764]], 73],
'get_allowed_item_status': ['get_allowed_item_status', 'Get allowed post status for current user in this blog ', [['blogs/inc/collections/model','_blog.class.php',1522]], 8],
'end_fieldset': ['end_fieldset', 'Ends a fieldset. ', [['blogs/inc/_core/ui/forms','_form.class.php',650]], 273],
'init_inskin_editing': ['init_inskin_editing', 'Prepare the \'In-skin editing\'. ', [['blogs/inc/items/model','_item.funcs.php',109]], 1],
'b2edit_reload': ['b2edit_reload', 'Submits the form after setting its action attribute to "newaction" and the blog value to "blog" (if given). ', [['blogs/rsc/js','admin.js',77]], 9],
'cat_select_before_each': ['cat_select_before_each', 'callback to display sublist element ', [['blogs/inc/items/model','_item.funcs.php',1178]], 0],
'get_name': ['get_name', 'Get name of widget ', [['blogs/inc/widgets/widgets','_menu_link.widget.php',83],['blogs/inc/widgets/widgets','_linkblog.widget.php',76],['blogs/inc/widgets/widgets','_coll_related_post_list.widget.php',76],['blogs/inc/widgets/widgets','_msg_menu_link.widget.php',55],['blogs/inc/users/model','_userfield.class.php',264],['blogs/inc/widgets/widgets','_coll_title.widget.php',49],['blogs/inc/generic/model','_genericelement.class.php',129],['blogs/inc/sessions/model','_goalcat.class.php',74],['blogs/inc/widgets/widgets','_coll_link_list.widget.php',76],['blogs/inc/widgets/widgets','_coll_tagline.widget.php',49],['blogs/inc/widgets/widgets','_user_login.widget.php',50],['blogs/inc/widgets/widgets','_online_users.widget.php',49],['blogs/inc/widgets/widgets','_free_html.widget.php',49],['blogs/plugins/twitter_plugin/twitteroauth','oauth.php',102],['blogs/plugins/twitter_plugin/twitteroauth','oauth.php',128],['blogs/plugins/twitter_plugin/twitteroauth','oauth.php',155],['blogs/inc/widgets/widgets','_coll_common_links.widget.php',53],['blogs/inc/widgets/widgets','_coll_media_index.widget.php',142],['blogs/inc/users/model','_group.class.php',440],['blogs/inc/widgets/widgets','_coll_item_list.widget.php',211],['blogs/inc/widgets/model','_widget.class.php',157],['blogs/inc/widgets/widgets','_coll_longdesc.widget.php',49],['blogs/inc/regional/model','_region.class.php',126],['blogs/inc/regional/model','_city.class.php',133],['blogs/inc/collections/model','_blog.class.php',2583],['blogs/inc/widgets/widgets','_coll_post_list.widget.php',76],['blogs/inc/widgets/widgets','_mobile_skin_switcher.widget.php',49],['blogs/inc/skins/model','_skin.class.php',127],['blogs/inc/items/model','_itemtype.class.php',99],['blogs/inc/regional/model','_country.class.php',131],['blogs/inc/widgets/widgets','_coll_search_form.widget.php',49],['blogs/inc/widgets/widgets','_coll_xml_feeds.widget.php',49],['blogs/inc/users/model','_userfieldgroup.class.php',106],['blogs/inc/widgets/widgets','_coll_category_list.widget.php',51],['blogs/inc/widgets/widgets','_coll_page_list.widget.php',76],['blogs/inc/widgets/widgets','_user_avatars.widget.php',117],['blogs/inc/regional/model','_currency.class.php',132],['blogs/inc/widgets/widgets','_coll_logo.widget.php',49],['blogs/inc/widgets/widgets','_colls_list_public.widget.php',49],['blogs/inc/widgets/widgets','_user_tools.widget.php',225],['blogs/inc/widgets/widgets','_coll_tag_cloud.widget.php',64],['blogs/inc/regional/model','_subregion.class.php',143],['blogs/inc/widgets/widgets','_coll_featured_intro.widget.php',120],['blogs/inc/antispam/model','_iprange.class.php',137],['blogs/inc/widgets/widgets','_colls_list_owner.widget.php',49],['blogs/inc/sessions/model','_goal.class.php',193],['blogs/inc/widgets/widgets','_coll_comment_list.widget.php',102],['blogs/inc/widgets/widgets','_coll_avatar.widget.php',51],['blogs/inc/files/model','_file.class.php',551]], 78],
'trigger_event_first_true': ['trigger_event_first_true', 'Call all plugins for a given event, until the first one returns true. ', [['blogs/inc/plugins/model','_plugins.class.php',862]], 17],
'author_email': ['author_email', 'Template function: display link to comment author\'s provided email ', [['blogs/inc/comments/model','_comment.class.php',992]], 3],
'load_from_request': ['load_from_request', 'Init filter params from Request params ', [['blogs/inc/items/model','_itemlistlight.class.php',336],['blogs/inc/chapters/model','_chapter.class.php',98],['blogs/inc/users/model','_userfield.class.php',179],['blogs/inc/generic/model','_genericelement.class.php',82],['blogs/inc/messaging/model','_message.class.php',89],['blogs/inc/sessions/model','_goalcat.class.php',55],['blogs/inc/users/model','_group.class.php',118],['blogs/inc/widgets/model','_widget.class.php',145],['blogs/inc/regional/model','_region.class.php',78],['blogs/inc/regional/model','_city.class.php',80],['blogs/inc/collections/model','_blog.class.php',300],['blogs/inc/users/model','_user.class.php',272],['blogs/inc/users/model','_userlist.class.php',253],['blogs/inc/generic/model','_genericcategory.class.php',80],['blogs/inc/tools/model','_emailaddress.class.php',99],['blogs/inc/skins/model','_skin.class.php',136],['blogs/inc/items/model','_itemtype.class.php',78],['blogs/inc/regional/model','_country.class.php',82],['blogs/inc/email_campaigns/model','_emailcampaign.class.php',186],['blogs/inc/cron/model','_cronjob.class.php',122],['blogs/inc/items/model','_item.class.php',522],['blogs/inc/files/model','_filetype.class.php',84],['blogs/inc/comments/model','_commentlist.class.php',266],['blogs/inc/sessions/model','_domain.class.php',63],['blogs/inc/users/model','_userfieldgroup.class.php',73],['blogs/inc/slugs/model','_slug.class.php',94],['blogs/inc/regional/model','_currency.class.php',74],['blogs/inc/messaging/model','_thread.class.php',160],['blogs/inc/maintenance/model','_backup.class.php',169],['blogs/inc/widgets/widgets','_coll_tag_cloud.widget.php',49],['blogs/inc/regional/model','_subregion.class.php',90],['blogs/inc/antispam/model','_iprange.class.php',95],['blogs/inc/sessions/model','_goal.class.php',110]], 79],
'echo_slug_filler': ['echo_slug_filler', 'Automatically update the slug field when a title is typed. ', [['blogs/inc/items/model','_item.funcs.php',2181]], 1],
'select_country': ['select_country', 'Display counrty select field and populate it with a cache object by using a callback method. ', [['blogs/inc/_core/ui/forms','_form.class.php',1920]], 12],
'gen_blogurl': ['gen_blogurl', 'Generate blog URL. That is the URL of the main page/home page of the blog. This will nto necessarily be a folder. For example, it can end in index.php?blog=4 ', [['blogs/inc/collections/model','_blog.class.php',1127]], 115],
'get_manual_link': ['get_manual_link', 'Generate a link to a online help resource. testing the concept of online help (aka webhelp). this function should be relocated somewhere better if it is taken onboard by the project ', [['blogs/inc/_core','_misc.funcs.php',4684]], 175],
'prepare_item_content': ['prepare_item_content', 'Prepare item content ', [['blogs/inc/items/model','_item.funcs.php',2987]], 4],
'load_blog': ['load_blog', '', [['blogs/inc/chapters/model','_chapter.class.php',277],['blogs/inc/items/model','_itemlight.class.php',1342],['blogs/inc/links/model','_linkuser.class.php',126],['blogs/inc/links/model','_linkitem.class.php',137],['blogs/inc/links/model','_linkcomment.class.php',113]], 56],
'issue_date_control': ['issue_date_control', 'Selection of the issue date ', [['blogs/inc/items/model','_item.funcs.php',1572]], 3],
'cat_select_header': ['cat_select_header', 'Header for {@link cat_select()} ', [['blogs/inc/items/model','_item.funcs.php',1144]], 1],
'cat_select_before_first': ['cat_select_before_first', 'callback to start sublist ', [['blogs/inc/items/model','_item.funcs.php',1170]], 0],
'echo_item_comments': ['echo_item_comments', 'Display CommentList with the given filters ', [['blogs/inc/items/model','_item.funcs.php',2271]], 3],
'display_head': ['display_head', 'Display list/table head. ', [['blogs/inc/_core/ui','_uiwidget.class.php',581]], 6],
'add': ['add', 'Add object to cache, handling our own indices. ', [['blogs/inc/collections/model','_blogcache.class.php',69],['blogs/inc/users/model','_usercache.class.php',231],['blogs/inc/files/model','_filelist.class.php',392],['blogs/inc/_core/model','_log.class.php',124],['blogs/inc/_core/model','_log.class.php',593],['blogs/inc/files/model','_filetypecache.class.php',57],['blogs/inc/_ext/pclzip','pclzip.lib.php',455],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',356],['blogs/inc/users/model','_groupsettings.class.php',103],['blogs/inc/links/model','_linkcache.class.php',101],['blogs/inc/skins/model','_skincache.class.php',62],['blogs/inc/generic/model','_genericcategorycache.class.php',113],['blogs/inc/_core/model','_messages.class.php',121]], 2022],
'items_created_results_block': ['items_created_results_block', 'Display the created items results table ', [['blogs/inc/items/model','_item.funcs.php',3246]], 1],
'replace_special_chars': ['replace_special_chars', 'Convert special chars (like german umlauts) to ASCII characters. ', [['blogs/inc/locales','_charset.funcs.php',104]], 6],
'load_publish_status': ['load_publish_status', 'Load new status when the item was published If the status is invalid then an error message will be added to messages ', [['blogs/inc/items/model','_item.funcs.php',1661]], 3],
'city_visible': ['city_visible', 'City is visible for defining ', [['blogs/inc/collections/model','_blog.class.php',3073]], 4],
'convert_charset': ['convert_charset', 'Convert a string from one charset to another. ', [['blogs/inc/locales','_locale.funcs.php',981]], 16],
'get_autogenerated_excerpt': ['get_autogenerated_excerpt', 'Get autogenerated excerpt, derived from {@link Item::$content}. ', [['blogs/inc/items/model','_item.class.php',5142]], 3],
'get_setting': ['get_setting', 'Get a setting. ', [['blogs/inc/collections/model','_blog.class.php',2021],['blogs/inc/skins/model','_skin.class.php',553],['blogs/inc/items/model','_item.class.php',6236]], 640],
'get_inskin_statuses': ['get_inskin_statuses', 'Get a list of those statuses which can be displayed in the front office ', [['blogs/inc/collections/model','_blog.funcs.php',849]], 16],
'evo_json_encode': ['evo_json_encode', 'A wrapper for json_encode function We need to pass valid UTF-8 string to json_encode, otherwise it may return NULL ', [['blogs/inc/_core','_misc.funcs.php',5770]], 11],
'generate_random_key': ['generate_random_key', 'Generate a valid key of size $length. ', [['blogs/inc/_core','_misc.funcs.php',4509]], 26],
't_': ['t_', 'TRANSLATE! ', [['blogs/inc/locales','_locale.funcs.php',48],['blogs/inc/locales','_locale.funcs.php',240],['blogs/inc/skins/model','_skin.class.php',672],['blogs/inc/_core/model','_module.class.php',79],['blogs/rsc/js','blog_widgets.js',422],['blogs/inc/plugins','_plugin.class.php',2617]], 10201],
'get_permanent_url': ['get_permanent_url', 'Generate the URL to access the category. ', [['blogs/inc/chapters/model','_chapter.class.php',182],['blogs/inc/items/model','_itemlight.class.php',334],['blogs/inc/comments/model','_comment.class.php',2255]], 115],
'get_renderers_validated': ['get_renderers_validated', 'Get the list of validated renderers for this Comment. This includes stealth plugins etc. ', [['blogs/inc/comments/model','_comment.class.php',2797],['blogs/inc/items/model','_item.class.php',5836]], 20],
'startrefreshcomments': ['startrefreshcomments', '', [['blogs/inc/comments/model','_comment_js.funcs.php',266],['blogs/inc/dashboard','dashboard.ctrl.php',394]], 3],
'cat_select': ['cat_select', 'Allow recursive category selection. ', [['blogs/inc/items/model','_item.funcs.php',1035]], 6],
'display_if_empty': ['display_if_empty', '', [['blogs/inc/_core','_template.funcs.php',1778],['blogs/inc/_core/ui/results','_results.class.php',2194],['blogs/inc/comments/model','_commentlist.class.php',634]], 44],
'url_add_tail': ['url_add_tail', 'Add a tail (starting with "/") at the end of an URL before any params (starting with "?") ', [['blogs/inc/_core','_url.funcs.php',557]], 41],
'get_timestamp_min': ['get_timestamp_min', 'Get timestamp value from the setting "timestamp_min" ', [['blogs/inc/collections/model','_blog.class.php',2892]], 13],
'get_param': ['get_param', 'Get param value. ', [['blogs/inc/widgets/model','_widget.class.php',295],['blogs/inc/_core','_param.funcs.php',1689]], 274],
'mainlist_page_links': ['mainlist_page_links', 'Stub: Links to list pages: ', [['blogs/inc/_core','_template.funcs.php',1721]], 30],
'region_visible': ['region_visible', 'Region is visible for defining ', [['blogs/inc/collections/model','_blog.class.php',3051]], 6],
'echo_progress_log_update': ['echo_progress_log_update', 'Update a progress information, display how many is done from all ', [['blogs/inc/tools/model','_dbmaintenance.funcs.php',794]], 4],
'get_edit_url': ['get_edit_url', 'Get URL to edit a chapter if user has edit rights. ', [['blogs/inc/chapters/model','_chapter.class.php',375],['blogs/inc/items/model','_item.class.php',3664],['blogs/inc/links/model','_linkuser.class.php',158],['blogs/inc/links/model','_linkitem.class.php',170],['blogs/inc/links/model','_linkcomment.class.php',149]], 6],
'item_edit_actions': ['item_edit_actions', 'Edit Actions: ', [['blogs/inc/items/model','_item.funcs.php',3689]], 3],
'get_allow_cross_posting': ['get_allow_cross_posting', 'Get global cross posting settings -- (cross posting = 1 post in multiple blogs) ', [['blogs/inc/collections/model','_category.funcs.php',536]], 14],
'from': ['from', '', [['blogs/inc/_core/model/db','_sql.class.php',219]], 380],
'display_body_end': ['display_body_end', '', [['blogs/inc/_core/ui','_uiwidget.class.php',915]], 8],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['blogs/inc/_core/model/db','_db.class.php',1041]], 88],
'cat_load_cache': ['cat_load_cache', 'Load cache for category definitions. ', [['blogs/inc/collections/model','_category.funcs.php',160]], 6],
'action_icon': ['action_icon', 'Create IMG tag for an action icon. ', [['blogs/inc/_core','_misc.funcs.php',3844],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',811]], 235],
'raise_link': ['raise_link', 'Display raise status link if it is available ', [['blogs/inc/comments/model','_comment.class.php',2077]], 1],
'delete': ['delete', 'Delete a hit. ', [['blogs/inc/sessions/model','_hitlist.class.php',47],['blogs/inc/plugins/model','_pluginsettings.class.php',83],['blogs/inc/settings/model','_abstractsettings.class.php',522],['blogs/inc/plugins/model','_pluginusersettings.class.php',107],['blogs/inc/_ext/pclzip','pclzip.lib.php',1007],['blogs/inc/users/model','_usersettings.class.php',212],['blogs/inc/users/model','_groupsettings.class.php',181],['blogs/inc/sessions/model','_session.class.php',452],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',168]], 90],
'bullet': ['bullet', 'Displays an empty or a full bullet based on boolean ', [['blogs/inc/_core','_template.funcs.php',1626]], 2],
'get_icon': ['get_icon', 'Get properties of an icon. ', [['blogs/inc/_core','_misc.funcs.php',3989],['blogs/inc/files/model','_filetype.class.php',174],['blogs/inc/files/model','_file.class.php',955]], 313],
'check_item_perm_edit': ['check_item_perm_edit', 'Check permission for editing of the item by current user ', [['blogs/inc/items/model','_item.funcs.php',2696]], 4],
'author_ip': ['author_ip', 'Template function: display comment\'s author\'s IP ', [['blogs/inc/comments/model','_comment.class.php',954]], 3],
'manual_get_chapters': ['manual_get_chapters', 'Get chapters ', [['blogs/inc/items/model','_item.funcs.php',3966]], 2],
'modules_call_method': ['modules_call_method', 'Call a method for all modules in a row ', [['blogs/inc/_core','_misc.funcs.php',49]], 26],
'skin_include': ['skin_include', 'Template tag. Include a sub-template at the current position ', [['blogs/inc/skins','_skin.funcs.php',940]], 333],
'dbinsert': ['dbinsert', 'Insert object into DB based on previously recorded changes. ', [['blogs/inc/chapters/model','_chapter.class.php',287],['blogs/inc/generic/model','_genericordered.class.php',101],['blogs/inc/users/model','_group.class.php',451],['blogs/inc/widgets/model','_widget.class.php',725],['blogs/inc/collections/model','_blog.class.php',2171],['blogs/inc/users/model','_user.class.php',2872],['blogs/inc/skins/model','_skin.class.php',370],['blogs/inc/comments/model','_comment.class.php',3511],['blogs/inc/items/model','_item.class.php',4685],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',210],['blogs/inc/files/model','_file.class.php',1698]], 93],
'get_copy_link': ['get_copy_link', 'Provide link to copy a post if user has edit rights ', [['blogs/inc/items/model','_item.class.php',3498]], 2],
'manual_get_chapter_path': ['manual_get_chapter_path', 'Get an array with chapters ID that located in current path ', [['blogs/inc/items/model','_item.funcs.php',4044]], 1],
'get_samedomain_htsrv_url': ['get_samedomain_htsrv_url', 'Get htsrv url on the same domain as the http request came from _init_hit.inc.php should be called before this call, because ReqHost and ReqPath must be initialized ', [['blogs/inc/_core','_misc.funcs.php',5601]], 34],
'display_list_start': ['display_list_start', 'Display list/table start. ', [['blogs/inc/_core/ui','_uiwidget.class.php',545],['blogs/inc/_core/ui/results','_resultsel.class.php',106]], 11],
'echo_item_location_form': ['echo_item_location_form', 'Display location select elements (Country, Region, Subregion, City) ', [['blogs/inc/items/model','_item.funcs.php',2819]], 2],
'set': ['set', 'Set param value ', [['blogs/inc/users/model','_userfield.class.php',243],['blogs/inc/generic/model','_genericordered.class.php',75],['blogs/inc/users/model','_group.class.php',204],['blogs/inc/items/model','_itemlight.class.php',1258],['blogs/inc/plugins/model','_pluginsettings.class.php',70],['blogs/inc/widgets/model','_widget.class.php',321],['blogs/inc/regional/model','_region.class.php',102],['blogs/inc/regional/model','_city.class.php',110],['blogs/inc/collections/model','_blog.class.php',1102],['blogs/inc/settings/model','_abstractsettings.class.php',446],['blogs/inc/plugins/model','_pluginusersettings.class.php',82],['blogs/inc/users/model','_user.class.php',1861],['blogs/inc/generic/model','_genericcategory.class.php',100],['blogs/inc/tools/model','_emailaddress.class.php',85],['blogs/inc/users/model','_usersettings.class.php',187],['blogs/inc/regional/model','_country.class.php',106],['blogs/inc/comments/model','_comment.class.php',315],['blogs/inc/users/model','_groupsettings.class.php',140],['blogs/inc/cron/model','_cronjob.class.php',79],['blogs/inc/items/model','_item.class.php',4497],['blogs/inc/files/model','_filetype.class.php',149],['blogs/inc/users/model','_userfieldgroup.class.php',92],['blogs/inc/sessions/model','_session.class.php',420],['blogs/plugins','_calendar.plugin.php',530],['blogs/inc/slugs/model','_slug.class.php',80],['blogs/inc/regional/model','_currency.class.php',96],['blogs/inc/messaging/model','_thread.class.php',185],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',614],['blogs/inc/regional/model','_subregion.class.php',119],['blogs/inc/antispam/model','_iprange.class.php',81],['blogs/inc/sessions/model','_goal.class.php',199]], 1121],
'select_input_options': ['select_input_options', 'Display a select field and populate it with a cache object. ', [['blogs/inc/_core/ui/forms','_form.class.php',2026]], 30],
'b2edit_open_preview': ['b2edit_open_preview', 'Open the item in a preview window (a new window with target \'b2evo_preview\'), by changing the form\'s action attribute and target temporarily. ', [['blogs/rsc/js','admin.js',46]], 1],
'avatar': ['avatar', 'Template function: display the avatar of the comment\'s author. ', [['blogs/inc/comments/model','_comment.class.php',745]], 4],
'spam_karma': ['spam_karma', 'Template function: display spam karma of the comment (in percent) ', [['blogs/inc/comments/model','_comment.class.php',1151]], 4],
'item_priority_colors': ['item_priority_colors', 'Get priority colors of an item ', [['blogs/inc/items/model','_item.funcs.php',3046]], 1],
'check_perm': ['check_perm', 'Check permission on a message ', [['blogs/inc/messaging/model','_message.class.php',467],['blogs/inc/users/model','_group.class.php',257],['blogs/inc/users/model','_user.class.php',2022],['blogs/inc/links/model','_linkuser.class.php',51],['blogs/inc/links/model','_linkitem.class.php',54],['blogs/inc/_core/model','_module.class.php',233],['blogs/inc/messaging/model','_thread.class.php',476],['blogs/inc/links/model','_linkcomment.class.php',53],['blogs/inc/sessions/model','_goal.class.php',92]], 967],
'isdefined': ['isdefined', '', [['blogs/inc/comments/model','_comment_js.funcs.php',12]], 7],
'cat_select_after_last': ['cat_select_after_last', 'callback to end sublist ', [['blogs/inc/items/model','_item.funcs.php',1294]], 0],
'where': ['where', '', [['blogs/inc/_core/model/db','_sql.class.php',240]], 238],
'duplicate': ['duplicate', 'Create a copy of an object (abstraction from PHP4 vs PHP5) ', [['blogs/inc/_core','_class4.funcs.php',41],['blogs/inc/_ext/pclzip','pclzip.lib.php',1163],['blogs/inc/_core','_class5.funcs.php',95]], 33],
'manual_display_chapter_row': ['manual_display_chapter_row', 'Display chapter row ', [['blogs/inc/items/model','_item.funcs.php',4076]], 1],
'button_class': ['button_class', 'Get a button class name depending on template ', [['blogs/inc/_core','_misc.funcs.php',6347]], 40],
'items_manual_results_block': ['items_manual_results_block', 'Display the manual pages results table ', [['blogs/inc/items/model','_item.funcs.php',3091]], 1],
'get_title': ['get_title', 'Get "nice" title of the Item ', [['blogs/inc/items/model','_itemlight.class.php',1094],['blogs/skins_adm','_adminUI_general.class.php',313],['blogs/inc/comments/model','_comment.class.php',2756],['blogs/inc/widgets/widgets','_coll_xml_feeds.widget.php',110]], 17],
'status': ['status', 'Template function: display status of comment ', [['blogs/inc/comments/model','_comment.class.php',3028],['blogs/inc/items/model','_item.class.php',4160]], 45],
'echo_attaching_files_button_js': ['echo_attaching_files_button_js', 'Output JavaScript code to dynamically show popup files attachment window ', [['blogs/inc/items/model','_item.funcs.php',1732]], 5],
'manual_display_post_row': ['manual_display_post_row', 'Display item row ', [['blogs/inc/items/model','_item.funcs.php',4176]], 2],
'get_page_id_list': ['get_page_id_list', 'Get a list of IDs for current page ', [['blogs/inc/_core/ui/results','_results.class.php',696]], 6],
'limit': ['limit', '', [['blogs/inc/_core/model/db','_sql.class.php',341]], 23],
'get_delete_link': ['get_delete_link', 'Gets button for deleting the Item if user has proper rights ', [['blogs/inc/items/model','_item.class.php',3403]], 2],
'edit_link': ['edit_link', 'Provide link to edit a comment if user has edit rights ', [['blogs/inc/comments/model','_comment.class.php',1179],['blogs/inc/items/model','_item.class.php',3710]], 47],
'subregion_visible': ['subregion_visible', 'Subregion is visible for defining ', [['blogs/inc/collections/model','_blog.class.php',3062]], 4],
'get_cities_option_list': ['get_cities_option_list', 'Get option list with cities by country, region or subregion ', [['blogs/inc/regional/model','_regional.funcs.php',173]], 6],
'get_template': ['get_template', 'Those templates are used for example by the messaging screens. ', [['blogs/skins/bootstrap','_skin.class.php',123],['blogs/skins_adm/evo','_adminUI.class.php',144],['blogs/skins_adm','_adminUI_general.class.php',855],['blogs/skins_adm/chicago','_adminUI.class.php',167],['blogs/inc/skins/model','_skin.class.php',721],['blogs/skins_adm/bootstrap','_adminUI.class.php',181],['blogs/skins/pureforums','_skin.class.php',360],['blogs/inc/_core/ui','_menu.class.php',408]], 63],
'blog_has_cats': ['blog_has_cats', 'Does a given blog have categories? ', [['blogs/inc/collections/model','_category.funcs.php',422]], 6],
'has_posts': ['has_posts', 'Check if this category has at least one post ', [['blogs/inc/chapters/model','_chapter.class.php',347]], 6],
'postcats_get_byid': ['postcats_get_byid', 'Get category associations with given item ', [['blogs/inc/collections/model','_category.funcs.php',306]], 7],
'check_item_perm_create': ['check_item_perm_create', 'Check permission for creating of a new item by current user ', [['blogs/inc/items/model','_item.funcs.php',2751]], 2],
'display_init': ['display_init', 'Get ready for displaying the skin. ', [['blogs/skins/photoblog','_skin.class.php',131],['blogs/skins/custom','_skin.class.php',99],['blogs/skins/intense','_skin.class.php',78],['blogs/skins/terrafirma','_skin.class.php',76],['blogs/inc/_core/ui','_uiwidget.class.php',318],['blogs/skins/bootstrap','_skin.class.php',74],['blogs/skins/miami_blue','_skin.class.php',76],['blogs/skins/manual','_skin.class.php',113],['blogs/skins/asevo','_skin.class.php',74],['blogs/skins/photoalbums','_skin.class.php',135],['blogs/skins/natural_pink','_skin.class.php',74],['blogs/skins/nifty_corners','_skin.class.php',75],['blogs/skins/touch','_skin.class.php',80],['blogs/skins/forums','_skin.class.php',125],['blogs/skins/evocamp','_skin.class.php',74],['blogs/skins/evopress','_skin.class.php',99],['blogs/skins/pixelgreen','_skin.class.php',74],['blogs/inc/skins/model','_skin.class.php',658],['blogs/inc/_core/ui/results','_results.class.php',973],['blogs/skins/glossyblue','_skin.class.php',76],['blogs/skins/pluralism','_skin.class.php',74],['blogs/skins/dating_mood','_skin.class.php',80],['blogs/skins/vastitude','_skin.class.php',75],['blogs/skins/pureforums','_skin.class.php',111],['blogs/skins/colourise','_skin.class.php',41]], 49],
'get': ['get', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',941],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15011],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/media/js','media.js',7],['blogs/inc/links/model','_linkowner.class.php',221],['blogs/inc/_core/model/db','_sql.class.php',64],['blogs/inc/plugins/model','_pluginsettings.class.php',58],['blogs/inc/collections/model','_blog.class.php',1822],['blogs/inc/settings/model','_generalsettings.class.php',383],['blogs/inc/settings/model','_abstractsettings.class.php',271],['blogs/inc/plugins/model','_pluginusersettings.class.php',58],['blogs/inc/users/model','_user.class.php',1126],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_gzip.js',38],['blogs/inc/users/model','_usersettings.class.php',151],['blogs/inc/comments/model','_comment.class.php',301],['blogs/inc/users/model','_groupsettings.class.php',124],['blogs/inc/cron/model','_cronjob.class.php',104],['blogs/inc/items/model','_item.class.php',5742],['blogs/inc/sessions/model','_session.class.php',397],['blogs/inc/links/model','_linkuser.class.php',141],['blogs/inc/links/model','_linkitem.class.php',155],['blogs/inc/slugs/model','_slug.class.php',68],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',574],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['blogs/inc/antispam/model','_iprange.class.php',69],['blogs/inc/links/model','_linkcomment.class.php',132],['blogs/inc/files/model','_file.class.php',532]], 2417],
'urltitle_validate': ['urltitle_validate', 'Validate URL title (slug) / Also used for category slugs ', [['blogs/inc/items/model','_item.funcs.php',351]], 9],
'items_list_block_by_page': ['items_list_block_by_page', 'Display the items list (Used to load next page of the items by AJAX) ', [['blogs/inc/items/model','_item.funcs.php',3439]], 1],
'get_newcategory_link': ['get_newcategory_link', 'Creates a link to new category, with properties icon ', [['blogs/inc/items/model','_item.funcs.php',1022]], 1],
'evo_flush': ['evo_flush', 'Flush the output buffer ', [['blogs/inc/_core','_misc.funcs.php',6282]], 156],
'add_menu_entries': ['add_menu_entries', 'Add menu entries to the list of entries for a given path. ', [['blogs/inc/_core/ui','_menu.class.php',53]], 58],
'load_class': ['load_class', 'Load class file ', [['blogs/inc/_core','_class4.funcs.php',28],['blogs/inc/_core','_class5.funcs.php',79]], 408],
'get_require_url': ['get_require_url', 'Get library url of JS or CSS file by file name or alias ', [['blogs/inc/_core','_template.funcs.php',839]], 5],
'get_tags': ['get_tags', 'Retrieves all tags from published posts ', [['blogs/inc/collections/model','_blog.funcs.php',764]], 13],
'set_default_filters': ['set_default_filters', 'Set default filter values we always want to use if not individually specified otherwise: ', [['blogs/inc/_core/model/dataobjects','_dataobjectlist2.class.php',135]], 20],
'button': ['button', 'Builds a button. ', [['blogs/inc/_core/ui/forms','_form.class.php',2592]], 29],
'item_priority_title': ['item_priority_title', 'Get priority title of an item by priority value ', [['blogs/inc/items/model','_item.funcs.php',3063]], 2],
'check_extracat': ['check_extracat', 'Automagically checks the matching extracat when we select a new main cat ', [['blogs/rsc/js','extracats.js',27]], 2],
'log_new_item_create': ['log_new_item_create', 'Log a creating of new item (Increase counter in global cache) ', [['blogs/inc/items/model','_item.funcs.php',2951]], 1],
'where_and': ['where_and', 'Extends the WHERE clause with AND ', [['blogs/inc/_core/model/db','_sql.class.php',245]], 280],
'delete_link': ['delete_link', 'Displays button for deleting the Comment if user has proper rights ', [['blogs/inc/comments/model','_comment.class.php',1334],['blogs/inc/items/model','_item.class.php',3480]], 7],
'clear': ['clear', 'Clear the cache ', [['blogs/inc/files/model','_filerootcache.class.php',173],['blogs/inc/users/model','_usercache.class.php',368],['blogs/inc/_core/model','_log.class.php',99],['blogs/inc/_core/model','_log.class.php',603],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',454],['blogs/inc/links/model','_linkcache.class.php',530],['blogs/inc/chapters/model','_chaptercache.class.php',65],['blogs/inc/generic/model','_genericcategorycache.class.php',98],['blogs/inc/_core/model','_messages.class.php',109]], 97],
'preg_replace': ['preg_replace', '', [], 281],
'count': ['count', '', [], 754],
'array_merge': ['array_merge', '', [], 500],
'strpos': ['strpos', '', [], 280],
'max': ['max', '', [], 97],
'defined': ['defined', '', [], 874],
'str_word_count': ['str_word_count', '', [], 1],
'time': ['time', '', [], 57],
'preg_split': ['preg_split', '', [], 29],
'reset': ['reset', '', [], 55],
'min': ['min', '', [], 79],
'strip_tags': ['strip_tags', '', [], 61],
'in_array': ['in_array', '', [], 335],
'implode': ['implode', '', [], 456],
'strtolower': ['strtolower', '', [], 168],
'floor': ['floor', '', [], 79],
'trim': ['trim', '', [], 351],
'intval': ['intval', '', [], 127],
'is_null': ['is_null', '', [], 251],
'array_unique': ['array_unique', '', [], 30],
'array_diff': ['array_diff', '', [], 26],
'ini_get': ['ini_get', '', [], 38],
'str_replace': ['str_replace', '', [], 403],
'explode': ['explode', '', [], 249],
'rtrim': ['rtrim', '', [], 11],
'substr': ['substr', '', [], 657],
'urlencode': ['urlencode', '', [], 30],
'ceil': ['ceil', '', [], 36],
'array_search': ['array_search', '', [], 30],
'date': ['date', '', [], 361],
'preg_match': ['preg_match', '', [], 363]};
CLASS_DATA={
'results': ['results', 'Results class ', [['blogs/inc/_core/ui/results','_results.class.php',44]], 58],
'abstractsettings': ['abstractsettings', 'Class to handle settings in an abstract manner (to get used with either 1, 2 or 3 DB column keys). ', [['blogs/inc/settings/model','_abstractsettings.class.php',41]], 9],
'chapter': ['chapter', 'Chapter Class ', [['blogs/inc/chapters/model','_chapter.class.php',32]], 17],
'commentlist2': ['commentlist2', '', [['blogs/inc/comments/model','_commentlist.class.php',41]], 19],
'sql': ['sql', 'SQL class: help constructing queries ', [['blogs/inc/_core/model/db','_sql.class.php',32]], 273],
'itemlist2': ['itemlist2', 'Item List Class 2 ', [['blogs/inc/items/model','_itemlist.class.php',36]], 15],
'table': ['table', 'Class Table ', [['blogs/inc/_core/ui','_uiwidget.class.php',248]], 9],
'item': ['item', 'Item Class ', [['blogs/inc/items/model','_item.class.php',46]], 92]};
CONST_DATA={
'ARRAY_A': ['ARRAY_A', '', [['blogs/inc/_core/model/db','_db.class.php',70]], 31],
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['blogs/inc','_main.inc.php',55],['blogs/install','index.php',25],['blogs/install','debug.php',22]], 827]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Jul  5 12:18:44 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
