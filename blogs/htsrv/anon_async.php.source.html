<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /blogs/htsrv/anon_async.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Jul  5 12:18:44 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='blogs/htsrv';
filename='anon_async.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/blogs/htsrv/</a> -> <a href="anon_async.php.html">anon_async.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="anon_async.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="anon_async.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This is the handler for ANONYMOUS (non logged in) asynchronous 'AJAX' calls.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link http://sourceforge.net/projects/evocms/}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @copyright (c)2003-2014 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * {@internal License choice</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * - If you have received this file as part of a package, please find the license.txt file in</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *   the same folder or the closest folder above for complete license terms.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * - If you have received this file individually (e-g: from http://evocms.cvs.sourceforge.net/)</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> *   then you must choose one of the following licenses before using the file:</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> *   - GNU General Public License 2 (GPL) - http://www.opensource.org/licenses/gpl-license.php</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> *   - Mozilla Public License 1.1 (MPL) - http://www.opensource.org/licenses/mozilla1.1.php</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> * }}</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> *</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * {@internal Open Source relicensing agreement:</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * }}</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package evocore</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> *</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @version $Id: anon_async.php 6411 2014-04-07 15:17:33Z yura $</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * Do the MAIN initializations:</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> */</span>
<a name="l31"><span class="linenum">  31</span></a>  require_once <a class="phpfunction" onClick="logFunction('dirname')" href="../../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__).'/../conf/_config.php';
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  require_once <a class="var it246" onMouseOver="hilite(246)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../_variables/inc_path.html">$inc_path</a>.'_main.inc.php';
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( '../inc/skins/_skin.funcs.php' );
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>, <a class="var it583" onMouseOver="hilite(583)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>, <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, <a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('ctrl')" href="../../_variables/ctrl.html">$ctrl</a>;
<a name="l38"><span class="linenum">  38</span></a>  <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'action', 'string', '' );
<a name="l39"><span class="linenum">  39</span></a>  <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'p', 'integer' );
<a name="l40"><span class="linenum">  40</span></a>  <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog', 'integer' );
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">// Make sure the async responses are never cached:</span>
<a name="l43"><span class="linenum">  43</span></a>  <a class="function" onClick="logFunction('header_nocache')" href="../../_functions/header_nocache.html" onMouseOver="funcPopup(event,'header_nocache')">header_nocache</a>();
<a name="l44"><span class="linenum">  44</span></a>  <a class="function" onClick="logFunction('header_content_type')" href="../../_functions/header_content_type.html" onMouseOver="funcPopup(event,'header_content_type')">header_content_type</a>( 'text/html', <a class="var it616" onMouseOver="hilite(616)" onMouseOut="lolite()" onClick="logVariable('io_charset')" href="../../_variables/io_charset.html">$io_charset</a> );
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">// Save current debug values</span>
<a name="l47"><span class="linenum">  47</span></a>  <a class="var it2846" onMouseOver="hilite(2846)" onMouseOut="lolite()" onClick="logVariable('current_debug')" href="../../_variables/current_debug.html">$current_debug</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a>;
<a name="l48"><span class="linenum">  48</span></a>  <a class="var it2847" onMouseOver="hilite(2847)" onMouseOut="lolite()" onClick="logVariable('current_debug_jslog')" href="../../_variables/current_debug_jslog.html">$current_debug_jslog</a> = <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('debug_jslog')" href="../../_variables/debug_jslog.html">$debug_jslog</a>;
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">// Do not append Debuglog to response!</span>
<a name="l51"><span class="linenum">  51</span></a>  <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a> = false;
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">// Do not append Debug JSlog to response!</span>
<a name="l54"><span class="linenum">  54</span></a>  <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('debug_jslog')" href="../../_variables/debug_jslog.html">$debug_jslog</a> = false;
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">// Init AJAX log</span>
<a name="l57"><span class="linenum">  57</span></a>  <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Log')" href="../../_classes/log.html" onMouseOver="classPopup(event,'log')">Log</a>();
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'action: %s', <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> ), 'note' );
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>  <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'params', 'array', array() );
<a name="l62"><span class="linenum">  62</span></a>  switch( <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> )
<a name="l63"><span class="linenum">  63</span></a>  {
<a name="l64"><span class="linenum">  64</span></a>      case 'get_comment_form':
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">        // display comment form</span>
<a name="l66"><span class="linenum">  66</span></a>          <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l67"><span class="linenum">  67</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_ID( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> );
<a name="l68"><span class="linenum">  68</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l69"><span class="linenum">  69</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> );
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>          <a class="function" onClick="logFunction('locale_activate')" href="../../_functions/locale_activate.html" onMouseOver="funcPopup(event,'locale_activate')">locale_activate</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('locale') );
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">        // Re-Init charset handling, in case current_charset has changed:</span>
<a name="l74"><span class="linenum">  74</span></a>          if( <a class="function" onClick="logFunction('init_charsets')" href="../../_functions/init_charsets.html" onMouseOver="funcPopup(event,'init_charsets')">init_charsets</a>( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../_variables/current_charset.html">$current_charset</a> ) )
<a name="l75"><span class="linenum">  75</span></a>          {
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">            // Reload Blog(s) (for encoding of name, tagline etc):</span>
<a name="l77"><span class="linenum">  77</span></a>              <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l78"><span class="linenum">  78</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> );
<a name="l79"><span class="linenum">  79</span></a>          }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'disp', '/^[a-z0-9\-_]+$/', '' );
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it244" onMouseOver="hilite(244)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a> = '';
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('blog_skin_ID')" href="../../_variables/blog_skin_ID.html">$blog_skin_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_skin_ID')" href="../../_functions/get_skin_id.html" onMouseOver="funcPopup(event,'get_skin_id')">get_skin_ID</a>();
<a name="l84"><span class="linenum">  84</span></a>          if( !empty( <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('blog_skin_ID')" href="../../_variables/blog_skin_ID.html">$blog_skin_ID</a> ) )
<a name="l85"><span class="linenum">  85</span></a>          { // check if Blog skin has specific comment form
<a name="l86"><span class="linenum">  86</span></a>              <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a> = &amp; get_SkinCache();
<a name="l87"><span class="linenum">  87</span></a>              <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> = &amp; <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a>-&gt;get_by_ID( <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('blog_skin_ID')" href="../../_variables/blog_skin_ID.html">$blog_skin_ID</a> );
<a name="l88"><span class="linenum">  88</span></a>              <a class="var it244" onMouseOver="hilite(244)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a> = <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a onClick="logVariable('folder')" class="var it9033" onMouseOver="hilite(9033)" onMouseOut="lolite()" href="../../_variables/folder.html">folder</a>.'/';
<a name="l89"><span class="linenum">  89</span></a>              <a class="var it583" onMouseOver="hilite(583)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a> = <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>.<a class="var it244" onMouseOver="hilite(244)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a>;
<a name="l90"><span class="linenum">  90</span></a>              if( ! <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>.<a class="var it244" onMouseOver="hilite(244)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a>.'_item_comment_form.inc.php' ) )
<a name="l91"><span class="linenum">  91</span></a>              {
<a name="l92"><span class="linenum">  92</span></a>                  <a class="var it244" onMouseOver="hilite(244)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a> = '';
<a name="l93"><span class="linenum">  93</span></a>              }
<a name="l94"><span class="linenum">  94</span></a>          }
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>          require <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>.<a class="var it244" onMouseOver="hilite(244)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a>.'_item_comment_form.inc.php';
<a name="l97"><span class="linenum">  97</span></a>          break;
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>      case 'get_msg_form':
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">        // display send message form</span>
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it2466" onMouseOver="hilite(2466)" onMouseOut="lolite()" onClick="logVariable('recipient_id')" href="../../_variables/recipient_id.html">$recipient_id</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'recipient_id', 'integer', 0 );
<a name="l103"><span class="linenum"> 103</span></a>          <a class="var it2849" onMouseOver="hilite(2849)" onMouseOut="lolite()" onClick="logVariable('recipient_name')" href="../../_variables/recipient_name.html">$recipient_name</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'recipient_name', 'string', '' );
<a name="l104"><span class="linenum"> 104</span></a>          <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'subject', 'string', '' );
<a name="l105"><span class="linenum"> 105</span></a>          <a class="var it2850" onMouseOver="hilite(2850)" onMouseOut="lolite()" onClick="logVariable('email_author')" href="../../_variables/email_author.html">$email_author</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'email_author', 'string', '' );
<a name="l106"><span class="linenum"> 106</span></a>          <a class="var it2851" onMouseOver="hilite(2851)" onMouseOut="lolite()" onClick="logVariable('email_author_address')" href="../../_variables/email_author_address.html">$email_author_address</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'email_author_address', 'string', '' );
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', '' );
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it875" onMouseOver="hilite(875)" onMouseOut="lolite()" onClick="logVariable('post_id')" href="../../_variables/post_id.html">$post_id</a> = NULL;
<a name="l109"><span class="linenum"> 109</span></a>          <a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_id', 'integer', 0 );
<a name="l110"><span class="linenum"> 110</span></a>          <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l111"><span class="linenum"> 111</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> );
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>          <a class="function" onClick="logFunction('locale_activate')" href="../../_functions/locale_activate.html" onMouseOver="funcPopup(event,'locale_activate')">locale_activate</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('locale') );
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">        // Re-Init charset handling, in case current_charset has changed:</span>
<a name="l116"><span class="linenum"> 116</span></a>          if( <a class="function" onClick="logFunction('init_charsets')" href="../../_functions/init_charsets.html" onMouseOver="funcPopup(event,'init_charsets')">init_charsets</a>( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../_variables/current_charset.html">$current_charset</a> ) )
<a name="l117"><span class="linenum"> 117</span></a>          {
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">            // Reload Blog(s) (for encoding of name, tagline etc):</span>
<a name="l119"><span class="linenum"> 119</span></a>              <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l120"><span class="linenum"> 120</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> );
<a name="l121"><span class="linenum"> 121</span></a>          }
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>          if( <a class="var it2466" onMouseOver="hilite(2466)" onMouseOut="lolite()" onClick="logVariable('recipient_id')" href="../../_variables/recipient_id.html">$recipient_id</a> &gt; 0 )
<a name="l124"><span class="linenum"> 124</span></a>          { // Get identity link for existed users
<a name="l125"><span class="linenum"> 125</span></a>              <a class="var it2852" onMouseOver="hilite(2852)" onMouseOut="lolite()" onClick="logVariable('RecipientCache')" href="../../_variables/RecipientCache.html">$RecipientCache</a> = &amp; get_UserCache();
<a name="l126"><span class="linenum"> 126</span></a>              <a class="var it2853" onMouseOver="hilite(2853)" onMouseOut="lolite()" onClick="logVariable('Recipient')" href="../../_variables/Recipient.html">$Recipient</a> = <a class="var it2852" onMouseOver="hilite(2852)" onMouseOut="lolite()" onClick="logVariable('RecipientCache')" href="../../_variables/RecipientCache.html">$RecipientCache</a>-&gt;get_by_ID( <a class="var it2466" onMouseOver="hilite(2466)" onMouseOut="lolite()" onClick="logVariable('recipient_id')" href="../../_variables/recipient_id.html">$recipient_id</a> );
<a name="l127"><span class="linenum"> 127</span></a>              <a class="var it2854" onMouseOver="hilite(2854)" onMouseOut="lolite()" onClick="logVariable('recipient_link')" href="../../_variables/recipient_link.html">$recipient_link</a> = <a class="var it2853" onMouseOver="hilite(2853)" onMouseOut="lolite()" onClick="logVariable('Recipient')" href="../../_variables/Recipient.html">$Recipient</a>-&gt;<a class="function" onClick="logFunction('get_identity_link')" href="../../_functions/get_identity_link.html" onMouseOver="funcPopup(event,'get_identity_link')">get_identity_link</a>( array( 'link_text' =&gt; 'nickname' ) );
<a name="l128"><span class="linenum"> 128</span></a>          }
<a name="l129"><span class="linenum"> 129</span></a>          else if( <a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a> &gt; 0 )
<a name="l130"><span class="linenum"> 130</span></a>          { // Anonymous Users
<a name="l131"><span class="linenum"> 131</span></a>              <a class="var it2855" onMouseOver="hilite(2855)" onMouseOut="lolite()" onClick="logVariable('gender_class')" href="../../_variables/gender_class.html">$gender_class</a> = '';
<a name="l132"><span class="linenum"> 132</span></a>              if( <a class="function" onClick="logFunction('check_setting')" href="../../_functions/check_setting.html" onMouseOver="funcPopup(event,'check_setting')">check_setting</a>( 'gender_colored' ) )
<a name="l133"><span class="linenum"> 133</span></a>              { // Set a gender class if the setting is ON
<a name="l134"><span class="linenum"> 134</span></a>                  <a class="var it2855" onMouseOver="hilite(2855)" onMouseOut="lolite()" onClick="logVariable('gender_class')" href="../../_variables/gender_class.html">$gender_class</a> = ' nogender';
<a name="l135"><span class="linenum"> 135</span></a>              }
<a name="l136"><span class="linenum"> 136</span></a>              <a class="var it2854" onMouseOver="hilite(2854)" onMouseOut="lolite()" onClick="logVariable('recipient_link')" href="../../_variables/recipient_link.html">$recipient_link</a> = '&lt;span class=&quot;user anonymous'.<a class="var it2855" onMouseOver="hilite(2855)" onMouseOut="lolite()" onClick="logVariable('gender_class')" href="../../_variables/gender_class.html">$gender_class</a>.'&quot; rel=&quot;bubbletip_comment_'.<a class="var it911" onMouseOver="hilite(911)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a>.'&quot;&gt;'.<a class="var it2849" onMouseOver="hilite(2849)" onMouseOut="lolite()" onClick="logVariable('recipient_name')" href="../../_variables/recipient_name.html">$recipient_name</a>.'&lt;/span&gt;';
<a name="l137"><span class="linenum"> 137</span></a>          }
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>          require <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>.'_contact_msg.form.php';
<a name="l140"><span class="linenum"> 140</span></a>          break;
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>      case 'get_user_bubbletip':
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">        // Get contents of a user bubbletip</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">        // Displays avatar &amp; name</span>
<a name="l146"><span class="linenum"> 146</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'userid', 'integer', 0 );
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'commentid', 'integer', 0 );
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../../_variables/_SERVER.html">$_SERVER</a>[&quot;HTTP_REFERER&quot;], <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a> ) !== false )
<a name="l150"><span class="linenum"> 150</span></a>          {    // If ajax is requested from admin page we should to set a variable <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true if user has permissions
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">            // Check global permission:</span>
<a name="l152"><span class="linenum"> 152</span></a>              if( empty(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>) || ! <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) )
<a name="l153"><span class="linenum"> 153</span></a>              {    // No permission to access admin...
<a name="l154"><span class="linenum"> 154</span></a>                  require <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>.'_access_denied.main.php';
<a name="l155"><span class="linenum"> 155</span></a>              }
<a name="l156"><span class="linenum"> 156</span></a>              else
<a name="l157"><span class="linenum"> 157</span></a>              {    // Set this page as admin page
<a name="l158"><span class="linenum"> 158</span></a>                  <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l159"><span class="linenum"> 159</span></a>              }
<a name="l160"><span class="linenum"> 160</span></a>          }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>          if( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> &gt; 0 )
<a name="l163"><span class="linenum"> 163</span></a>          {    // Get Blog if ID is set
<a name="l164"><span class="linenum"> 164</span></a>              <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l165"><span class="linenum"> 165</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> );
<a name="l166"><span class="linenum"> 166</span></a>          }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>          if( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> &gt; 0 )
<a name="l169"><span class="linenum"> 169</span></a>          {    // Print info of the registered users
<a name="l170"><span class="linenum"> 170</span></a>              <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l171"><span class="linenum"> 171</span></a>              <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> );
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>              <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'User: #'.<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>.' '.<a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('login')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/login.html">login</a> );
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>              echo '&lt;div class=&quot;bubbletip_user&quot;&gt;';
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>              if( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'is_closed' ) )
<a name="l178"><span class="linenum"> 178</span></a>              { // display only info about closed accounts
<a name="l179"><span class="linenum"> 179</span></a>                  echo <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'This account has been closed.' );
<a name="l180"><span class="linenum"> 180</span></a>                  echo '&lt;/div&gt;'; <span class="comment">/* end of: &lt;div class=&quot;bubbletip_user&quot;&gt; */</span>
<a name="l181"><span class="linenum"> 181</span></a>                  break;
<a name="l182"><span class="linenum"> 182</span></a>              }
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>              <a class="var it2856" onMouseOver="hilite(2856)" onMouseOut="lolite()" onClick="logVariable('avatar_overlay_text')" href="../../_variables/avatar_overlay_text.html">$avatar_overlay_text</a> = '';
<a name="l185"><span class="linenum"> 185</span></a>              <a class="var it2857" onMouseOver="hilite(2857)" onMouseOut="lolite()" onClick="logVariable('link_overlay_class')" href="../../_variables/link_overlay_class.html">$link_overlay_class</a> = '';
<a name="l186"><span class="linenum"> 186</span></a>              if( <a class="function" onClick="logFunction('is_admin_page')" href="../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l187"><span class="linenum"> 187</span></a>              {    // Set avatar size for Back-office
<a name="l188"><span class="linenum"> 188</span></a>                  <a class="var it1241" onMouseOver="hilite(1241)" onMouseOut="lolite()" onClick="logVariable('avatar_size')" href="../../_variables/avatar_size.html">$avatar_size</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('bubbletip_size_admin');
<a name="l189"><span class="linenum"> 189</span></a>              }
<a name="l190"><span class="linenum"> 190</span></a>              else if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l191"><span class="linenum"> 191</span></a>              {    // Set avatar size for logged in users in the Front-office
<a name="l192"><span class="linenum"> 192</span></a>                  <a class="var it1241" onMouseOver="hilite(1241)" onMouseOut="lolite()" onClick="logVariable('avatar_size')" href="../../_variables/avatar_size.html">$avatar_size</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('bubbletip_size_front');
<a name="l193"><span class="linenum"> 193</span></a>              }
<a name="l194"><span class="linenum"> 194</span></a>              else
<a name="l195"><span class="linenum"> 195</span></a>              {    // Set avatar size for Anonymous users
<a name="l196"><span class="linenum"> 196</span></a>                  <a class="var it1241" onMouseOver="hilite(1241)" onMouseOut="lolite()" onClick="logVariable('avatar_size')" href="../../_variables/avatar_size.html">$avatar_size</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('bubbletip_size_anonymous');
<a name="l197"><span class="linenum"> 197</span></a>                  <a class="var it2856" onMouseOver="hilite(2856)" onMouseOut="lolite()" onClick="logVariable('avatar_overlay_text')" href="../../_variables/avatar_overlay_text.html">$avatar_overlay_text</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('bubbletip_overlay');
<a name="l198"><span class="linenum"> 198</span></a>                  <a class="var it2857" onMouseOver="hilite(2857)" onMouseOut="lolite()" onClick="logVariable('link_overlay_class')" href="../../_variables/link_overlay_class.html">$link_overlay_class</a> = 'overlay_link';
<a name="l199"><span class="linenum"> 199</span></a>              }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>              <a class="var it731" onMouseOver="hilite(731)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../_variables/width.html">$width</a> = <a class="var it1498" onMouseOver="hilite(1498)" onMouseOut="lolite()" onClick="logVariable('thumbnail_sizes')" href="../../_variables/thumbnail_sizes.html">$thumbnail_sizes</a>[<a class="var it1241" onMouseOver="hilite(1241)" onMouseOut="lolite()" onClick="logVariable('avatar_size')" href="../../_variables/avatar_size.html">$avatar_size</a>][1];
<a name="l202"><span class="linenum"> 202</span></a>              <a class="var it732" onMouseOver="hilite(732)" onMouseOut="lolite()" onClick="logVariable('height')" href="../../_variables/height.html">$height</a> = <a class="var it1498" onMouseOver="hilite(1498)" onMouseOut="lolite()" onClick="logVariable('thumbnail_sizes')" href="../../_variables/thumbnail_sizes.html">$thumbnail_sizes</a>[<a class="var it1241" onMouseOver="hilite(1241)" onMouseOut="lolite()" onClick="logVariable('avatar_size')" href="../../_variables/avatar_size.html">$avatar_size</a>][2];
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">            // Display user avatar with login</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">            // Attributes 'w' &amp; 'h' we use for following js-scale div If image is downloading first time (Fix bubbletip)</span>
<a name="l205"><span class="linenum"> 205</span></a>              echo '&lt;div class=&quot;center&quot; w=&quot;'.<a class="var it731" onMouseOver="hilite(731)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../_variables/width.html">$width</a>.'&quot; h=&quot;'.<a class="var it732" onMouseOver="hilite(732)" onMouseOut="lolite()" onClick="logVariable('height')" href="../../_variables/height.html">$height</a>.'&quot;&gt;';
<a name="l206"><span class="linenum"> 206</span></a>              echo <a class="function" onClick="logFunction('get_avatar_imgtag')" href="../../_functions/get_avatar_imgtag.html" onMouseOver="funcPopup(event,'get_avatar_imgtag')">get_avatar_imgtag</a>( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('login')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/login.html">login</a>, true, true, <a class="var it1241" onMouseOver="hilite(1241)" onMouseOut="lolite()" onClick="logVariable('avatar_size')" href="../../_variables/avatar_size.html">$avatar_size</a>, 'avatar_above_login', '', <a class="var it2856" onMouseOver="hilite(2856)" onMouseOut="lolite()" onClick="logVariable('avatar_overlay_text')" href="../../_variables/avatar_overlay_text.html">$avatar_overlay_text</a>, <a class="var it2857" onMouseOver="hilite(2857)" onMouseOut="lolite()" onClick="logVariable('link_overlay_class')" href="../../_variables/link_overlay_class.html">$link_overlay_class</a> );
<a name="l207"><span class="linenum"> 207</span></a>              echo '&lt;/div&gt;';
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>              if( ! ( <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'allow_anonymous_user_profiles' ) || ( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'user', 'view', false, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> ) ) ) )
<a name="l210"><span class="linenum"> 210</span></a>              { // User is not logged in and anonymous users may NOT view user profiles, or if current User has no permission to view additional information about the User
<a name="l211"><span class="linenum"> 211</span></a>                  echo '&lt;/div&gt;'; <span class="comment">/* end of: &lt;div class=&quot;bubbletip_user&quot;&gt; */</span>
<a name="l212"><span class="linenum"> 212</span></a>                  break;
<a name="l213"><span class="linenum"> 213</span></a>              }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">            // Additional user info</span>
<a name="l216"><span class="linenum"> 216</span></a>              <a class="var it2858" onMouseOver="hilite(2858)" onMouseOut="lolite()" onClick="logVariable('user_info')" href="../../_variables/user_info.html">$user_info</a> = array();
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">            // Preferred Name</span>
<a name="l219"><span class="linenum"> 219</span></a>              if( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_preferred_name')" href="../../_functions/get_preferred_name.html" onMouseOver="funcPopup(event,'get_preferred_name')">get_preferred_name</a>() != <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('login')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/login.html">login</a> )
<a name="l220"><span class="linenum"> 220</span></a>              {
<a name="l221"><span class="linenum"> 221</span></a>                  <a class="var it2858" onMouseOver="hilite(2858)" onMouseOut="lolite()" onClick="logVariable('user_info')" href="../../_variables/user_info.html">$user_info</a>[] = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_preferred_name')" href="../../_functions/get_preferred_name.html" onMouseOver="funcPopup(event,'get_preferred_name')">get_preferred_name</a>();
<a name="l222"><span class="linenum"> 222</span></a>              }
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">            // Location</span>
<a name="l225"><span class="linenum"> 225</span></a>              <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a> = array();
<a name="l226"><span class="linenum"> 226</span></a>              if( !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('city_ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/city_ID.html">city_ID</a> ) )
<a name="l227"><span class="linenum"> 227</span></a>              {    // City
<a name="l228"><span class="linenum"> 228</span></a>                  <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a>[] = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_city_name')" href="../../_functions/get_city_name.html" onMouseOver="funcPopup(event,'get_city_name')">get_city_name</a>( false );
<a name="l229"><span class="linenum"> 229</span></a>              }
<a name="l230"><span class="linenum"> 230</span></a>              if( !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('subrg_ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/subrg_ID.html">subrg_ID</a> ) )
<a name="l231"><span class="linenum"> 231</span></a>              {    // Subregion
<a name="l232"><span class="linenum"> 232</span></a>                  if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l233"><span class="linenum"> 233</span></a>                  {    // Display subregion for not logged in users
<a name="l234"><span class="linenum"> 234</span></a>                      <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a>[] = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_subregion_name')" href="../../_functions/get_subregion_name.html" onMouseOver="funcPopup(event,'get_subregion_name')">get_subregion_name</a>();
<a name="l235"><span class="linenum"> 235</span></a>                  }
<a name="l236"><span class="linenum"> 236</span></a>                  else if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('subrg_ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/subrg_ID.html">subrg_ID</a> != <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('subrg_ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/subrg_ID.html">subrg_ID</a> )
<a name="l237"><span class="linenum"> 237</span></a>                  {    // If subregions are different
<a name="l238"><span class="linenum"> 238</span></a>                      <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a>[] = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_subregion_name')" href="../../_functions/get_subregion_name.html" onMouseOver="funcPopup(event,'get_subregion_name')">get_subregion_name</a>();
<a name="l239"><span class="linenum"> 239</span></a>                  }
<a name="l240"><span class="linenum"> 240</span></a>              }
<a name="l241"><span class="linenum"> 241</span></a>              if( !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/rgn_ID.html">rgn_ID</a> ) )
<a name="l242"><span class="linenum"> 242</span></a>              {    // Region
<a name="l243"><span class="linenum"> 243</span></a>                  if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l244"><span class="linenum"> 244</span></a>                  {    // Display region for not logged in users
<a name="l245"><span class="linenum"> 245</span></a>                      <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a>[] = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_region_name')" href="../../_functions/get_region_name.html" onMouseOver="funcPopup(event,'get_region_name')">get_region_name</a>();
<a name="l246"><span class="linenum"> 246</span></a>                  }
<a name="l247"><span class="linenum"> 247</span></a>                  else if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/rgn_ID.html">rgn_ID</a> != <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('rgn_ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/rgn_ID.html">rgn_ID</a> )
<a name="l248"><span class="linenum"> 248</span></a>                  {    // If regions are different
<a name="l249"><span class="linenum"> 249</span></a>                      <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a>[] = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_region_name')" href="../../_functions/get_region_name.html" onMouseOver="funcPopup(event,'get_region_name')">get_region_name</a>();
<a name="l250"><span class="linenum"> 250</span></a>                  }
<a name="l251"><span class="linenum"> 251</span></a>              }
<a name="l252"><span class="linenum"> 252</span></a>              if( !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a> ) )
<a name="l253"><span class="linenum"> 253</span></a>              {    // Country
<a name="l254"><span class="linenum"> 254</span></a>                  if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l255"><span class="linenum"> 255</span></a>                  {    // Display country for not logged in users
<a name="l256"><span class="linenum"> 256</span></a>                      <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a>[] = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_country_name')" href="../../_functions/get_country_name.html" onMouseOver="funcPopup(event,'get_country_name')">get_country_name</a>();
<a name="l257"><span class="linenum"> 257</span></a>                  }
<a name="l258"><span class="linenum"> 258</span></a>                  else if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a> != <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a> )
<a name="l259"><span class="linenum"> 259</span></a>                  {    // If countries are different
<a name="l260"><span class="linenum"> 260</span></a>                      <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a>[] = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_country_name')" href="../../_functions/get_country_name.html" onMouseOver="funcPopup(event,'get_country_name')">get_country_name</a>();
<a name="l261"><span class="linenum"> 261</span></a>                  }
<a name="l262"><span class="linenum"> 262</span></a>              }
<a name="l263"><span class="linenum"> 263</span></a>              if( !empty( <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a> ) )
<a name="l264"><span class="linenum"> 264</span></a>              {    // Set location info
<a name="l265"><span class="linenum"> 265</span></a>                  <a class="var it2858" onMouseOver="hilite(2858)" onMouseOut="lolite()" onClick="logVariable('user_info')" href="../../_variables/user_info.html">$user_info</a>[] = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&lt;br /&gt;', <a class="var it2859" onMouseOver="hilite(2859)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a> );
<a name="l266"><span class="linenum"> 266</span></a>              }
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">            // Age group</span>
<a name="l269"><span class="linenum"> 269</span></a>              if( !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_min')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_min.html">age_min</a> ) &amp;&amp; !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_max')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_max.html">age_max</a> ) &amp;&amp; <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_min')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_min.html">age_min</a> != <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_max')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_max.html">age_max</a> )
<a name="l270"><span class="linenum"> 270</span></a>              {
<a name="l271"><span class="linenum"> 271</span></a>                  <a class="var it2858" onMouseOver="hilite(2858)" onMouseOut="lolite()" onClick="logVariable('user_info')" href="../../_variables/user_info.html">$user_info</a>[] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d to %d years old '), <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_min')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_min.html">age_min</a>, <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_max')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_max.html">age_max</a> );
<a name="l272"><span class="linenum"> 272</span></a>              }
<a name="l273"><span class="linenum"> 273</span></a>              else if( !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_min')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_min.html">age_min</a> ) || !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_max')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_max.html">age_max</a> ) )
<a name="l274"><span class="linenum"> 274</span></a>              {    // Min age equals max age
<a name="l275"><span class="linenum"> 275</span></a>                  <a class="var it2862" onMouseOver="hilite(2862)" onMouseOut="lolite()" onClick="logVariable('age')" href="../../_variables/age.html">$age</a> = !empty( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_min')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_min.html">age_min</a> ) ? <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_min')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_min.html">age_min</a> : <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('age_max')" class="var it9005" onMouseOver="hilite(9005)" onMouseOut="lolite()" href="../../_variables/age_max.html">age_max</a>;
<a name="l276"><span class="linenum"> 276</span></a>                  <a class="var it2858" onMouseOver="hilite(2858)" onMouseOut="lolite()" onClick="logVariable('user_info')" href="../../_variables/user_info.html">$user_info</a>[] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d years old '), <a class="var it2862" onMouseOver="hilite(2862)" onMouseOut="lolite()" onClick="logVariable('age')" href="../../_variables/age.html">$age</a> );
<a name="l277"><span class="linenum"> 277</span></a>              }
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>              if( !empty( <a class="var it2858" onMouseOver="hilite(2858)" onMouseOut="lolite()" onClick="logVariable('user_info')" href="../../_variables/user_info.html">$user_info</a> ) )
<a name="l280"><span class="linenum"> 280</span></a>              {    // Display additional user info
<a name="l281"><span class="linenum"> 281</span></a>                  echo '&lt;ul&gt;';
<a name="l282"><span class="linenum"> 282</span></a>                  foreach( <a class="var it2858" onMouseOver="hilite(2858)" onMouseOut="lolite()" onClick="logVariable('user_info')" href="../../_variables/user_info.html">$user_info</a> as <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> )
<a name="l283"><span class="linenum"> 283</span></a>                  {
<a name="l284"><span class="linenum"> 284</span></a>                      echo '&lt;li&gt;'.<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>.'&lt;/li&gt;';
<a name="l285"><span class="linenum"> 285</span></a>                  }
<a name="l286"><span class="linenum"> 286</span></a>                  echo '&lt;/ul&gt;';
<a name="l287"><span class="linenum"> 287</span></a>              }
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>              echo '&lt;/div&gt;'; <span class="comment">/* end of: &lt;div class=&quot;bubbletip_user&quot;&gt; */</span>
<a name="l290"><span class="linenum"> 290</span></a>          }
<a name="l291"><span class="linenum"> 291</span></a>          else if( <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> &gt; 0 )
<a name="l292"><span class="linenum"> 292</span></a>          {    // Print info for an anonymous user who posted a comment
<a name="l293"><span class="linenum"> 293</span></a>              <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a> = &amp; get_CommentCache();
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a> = <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a>-&gt;get_by_ID( <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> );
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>              <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Comment: #'.<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a>.' '.<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_author_name')" href="../../_functions/get_author_name.html" onMouseOver="funcPopup(event,'get_author_name')">get_author_name</a>() );
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>              echo '&lt;div class=&quot;bubbletip_anon&quot;&gt;';
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>              echo <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_avatar')" href="../../_functions/get_avatar.html" onMouseOver="funcPopup(event,'get_avatar')">get_avatar</a>( 'fit-160x160', 'bCommentAvatarCenter' );
<a name="l301"><span class="linenum"> 301</span></a>              echo '&lt;div&gt;'.<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_author_name_anonymous')" href="../../_functions/get_author_name_anonymous.html" onMouseOver="funcPopup(event,'get_author_name_anonymous')">get_author_name_anonymous</a>().'&lt;/div&gt;';
<a name="l302"><span class="linenum"> 302</span></a>              echo '&lt;div&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('This user is not registered on this site.').'&lt;/div&gt;';
<a name="l303"><span class="linenum"> 303</span></a>              echo <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_author_url_link')" href="../../_functions/get_author_url_link.html" onMouseOver="funcPopup(event,'get_author_url_link')">get_author_url_link</a>( '', '&lt;div&gt;', '&lt;/div&gt;');
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>              if( isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) )
<a name="l306"><span class="linenum"> 306</span></a>              {    // Link to send message
<a name="l307"><span class="linenum"> 307</span></a>                  echo '&lt;div&gt;';
<a name="l308"><span class="linenum"> 308</span></a>                  <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('msgform_link')" href="../../_functions/msgform_link.html" onMouseOver="funcPopup(event,'msgform_link')">msgform_link</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('msgformurl'), '', '', <a class="function" onClick="logFunction('get_icon')" href="../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'email', 'imgtag' ).' '.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send a message') );
<a name="l309"><span class="linenum"> 309</span></a>                  echo '&lt;/div&gt;';
<a name="l310"><span class="linenum"> 310</span></a>              }
<a name="l311"><span class="linenum"> 311</span></a>              echo '&lt;/div&gt;';
<a name="l312"><span class="linenum"> 312</span></a>          }
<a name="l313"><span class="linenum"> 313</span></a>          else
<a name="l314"><span class="linenum"> 314</span></a>          { // user_ID and comment_ID are both null, this can happen when the user was deleted
<a name="l315"><span class="linenum"> 315</span></a>              echo '&lt;div class=&quot;bubbletip_user&quot;&gt;';
<a name="l316"><span class="linenum"> 316</span></a>              echo <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'This account has been deleted.' );
<a name="l317"><span class="linenum"> 317</span></a>              echo '&lt;/div&gt;';
<a name="l318"><span class="linenum"> 318</span></a>              break;
<a name="l319"><span class="linenum"> 319</span></a>          }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>          break;
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>      case 'set_comment_vote':
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">        // Used for quick SPAM vote of comments</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l327"><span class="linenum"> 327</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) )
<a name="l330"><span class="linenum"> 330</span></a>          { // Only active logged in users can vote
<a name="l331"><span class="linenum"> 331</span></a>              break;
<a name="l332"><span class="linenum"> 332</span></a>          }
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>          if( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'is_backoffice', 'integer', 0 ) )
<a name="l335"><span class="linenum"> 335</span></a>          { // Set admin skin, used for buttons, @see <a class="function" onClick="logFunction('button_class')" href="../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>()
<a name="l336"><span class="linenum"> 336</span></a>              global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a>, <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>;
<a name="l337"><span class="linenum"> 337</span></a>              <a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'admin_skin', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l338"><span class="linenum"> 338</span></a>              <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l339"><span class="linenum"> 339</span></a>              require_once <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>.<a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a>.'/_adminUI.class.php';
<a name="l340"><span class="linenum"> 340</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a> = <span class="keyword">new </span><a class="class" onClick="logClass('AdminUI')" href="../../_classes/adminui.html" onMouseOver="classPopup(event,'adminui')">AdminUI</a>();
<a name="l341"><span class="linenum"> 341</span></a>          }
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">        // Check permission for spam voting</span>
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_vote_spam_comments', 'edit', true, <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blogid', 'integer' ) );
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'type', 'string' );
<a name="l347"><span class="linenum"> 347</span></a>          <a class="var it2864" onMouseOver="hilite(2864)" onMouseOut="lolite()" onClick="logVariable('commentid')" href="../../_variables/commentid.html">$commentid</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'commentid', 'integer' );
<a name="l348"><span class="linenum"> 348</span></a>          if( <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> != 'spam' || empty( <a class="var it2864" onMouseOver="hilite(2864)" onMouseOut="lolite()" onClick="logVariable('commentid')" href="../../_variables/commentid.html">$commentid</a> ) )
<a name="l349"><span class="linenum"> 349</span></a>          {    // Incorrect params
<a name="l350"><span class="linenum"> 350</span></a>              break;
<a name="l351"><span class="linenum"> 351</span></a>          }
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="var it2864" onMouseOver="hilite(2864)" onMouseOut="lolite()" onClick="logVariable('commentid')" href="../../_variables/commentid.html">$commentid</a>, false );
<a name="l354"><span class="linenum"> 354</span></a>          if( <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> !== false )
<a name="l355"><span class="linenum"> 355</span></a>          { // The comment still exists
<a name="l356"><span class="linenum"> 356</span></a>              if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> == <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it9056" onMouseOver="hilite(9056)" onMouseOut="lolite()" href="../../_variables/author_user_ID.html">author_user_ID</a> )
<a name="l357"><span class="linenum"> 357</span></a>              { // Do not allow users to vote on their own comments
<a name="l358"><span class="linenum"> 358</span></a>                  break;
<a name="l359"><span class="linenum"> 359</span></a>              }
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set_vote')" href="../../_functions/set_vote.html" onMouseOver="funcPopup(event,'set_vote')">set_vote</a>( 'spam', <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'vote', 'string' ) );
<a name="l362"><span class="linenum"> 362</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l363"><span class="linenum"> 363</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('vote_spam')" href="../../_functions/vote_spam.html" onMouseOver="funcPopup(event,'vote_spam')">vote_spam</a>( '', '', '&amp;amp;', true, true, array( 'display' =&gt; true ) );
<a name="l364"><span class="linenum"> 364</span></a>          }
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>          break;
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>      case 'voting':
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">        // Actions for voting by AJAX</span>
<a name="l370"><span class="linenum"> 370</span></a>  
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l372"><span class="linenum"> 372</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'voting' );
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) )
<a name="l375"><span class="linenum"> 375</span></a>          { // Only active logged in users can vote
<a name="l376"><span class="linenum"> 376</span></a>              break;
<a name="l377"><span class="linenum"> 377</span></a>          }
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'vote_action', 'string', '' );
<a name="l380"><span class="linenum"> 380</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'vote_type', 'string', '' );
<a name="l381"><span class="linenum"> 381</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'vote_ID', 'string', 0 );
<a name="l382"><span class="linenum"> 382</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'checked', 'integer', 0 );
<a name="l383"><span class="linenum"> 383</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', '' );
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'vote action: %s', <a class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" onClick="logVariable('vote_action')" href="../../_variables/vote_action.html">$vote_action</a> ), 'note' );
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'vote type: %s', <a class="var it2866" onMouseOver="hilite(2866)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../_variables/vote_type.html">$vote_type</a> ), 'note' );
<a name="l387"><span class="linenum"> 387</span></a>          <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'vote ID: %s', <a class="var it2867" onMouseOver="hilite(2867)" onMouseOut="lolite()" onClick="logVariable('vote_ID')" href="../../_variables/vote_ID.html">$vote_ID</a> ), 'note' );
<a name="l388"><span class="linenum"> 388</span></a>  
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it2868" onMouseOver="hilite(2868)" onMouseOut="lolite()" onClick="logVariable('voting_form_params')" href="../../_variables/voting_form_params.html">$voting_form_params</a> = array(
<a name="l390"><span class="linenum"> 390</span></a>                  'vote_type' =&gt; <a class="var it2866" onMouseOver="hilite(2866)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../_variables/vote_type.html">$vote_type</a>,
<a name="l391"><span class="linenum"> 391</span></a>              );
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>          switch( <a class="var it2866" onMouseOver="hilite(2866)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../_variables/vote_type.html">$vote_type</a> )
<a name="l394"><span class="linenum"> 394</span></a>          {
<a name="l395"><span class="linenum"> 395</span></a>              case 'link':
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">                // Vote on pictures</span>
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>                  <a class="var it930" onMouseOver="hilite(930)" onMouseOut="lolite()" onClick="logVariable('link_ID')" href="../../_variables/link_ID.html">$link_ID</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '/link_(\d+)/i', '<a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../_variables/1.html">$1</a>', <a class="var it2867" onMouseOver="hilite(2867)" onMouseOut="lolite()" onClick="logVariable('vote_ID')" href="../../_variables/vote_ID.html">$vote_ID</a> );
<a name="l399"><span class="linenum"> 399</span></a>                  if( empty( <a class="var it930" onMouseOver="hilite(930)" onMouseOut="lolite()" onClick="logVariable('link_ID')" href="../../_variables/link_ID.html">$link_ID</a> )  || ( ! <a class="function" onClick="logFunction('is_decimal')" href="../../_functions/is_decimal.html" onMouseOver="funcPopup(event,'is_decimal')">is_decimal</a>( <a class="var it930" onMouseOver="hilite(930)" onMouseOut="lolite()" onClick="logVariable('link_ID')" href="../../_variables/link_ID.html">$link_ID</a> ) ) )
<a name="l400"><span class="linenum"> 400</span></a>                  { // There is no correct link ID
<a name="l401"><span class="linenum"> 401</span></a>                      break 2;
<a name="l402"><span class="linenum"> 402</span></a>                  }
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>                  <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('LinkCache')" href="../../_variables/LinkCache.html">$LinkCache</a> = &amp; get_LinkCache();
<a name="l405"><span class="linenum"> 405</span></a>                  <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a> = &amp; <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('LinkCache')" href="../../_variables/LinkCache.html">$LinkCache</a>-&gt;get_by_ID( <a class="var it930" onMouseOver="hilite(930)" onMouseOut="lolite()" onClick="logVariable('link_ID')" href="../../_variables/link_ID.html">$link_ID</a>, false );
<a name="l406"><span class="linenum"> 406</span></a>                  if( !<a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a> )
<a name="l407"><span class="linenum"> 407</span></a>                  { // Incorrect link ID
<a name="l408"><span class="linenum"> 408</span></a>                      break 2;
<a name="l409"><span class="linenum"> 409</span></a>                  }
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>                  <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a> = &amp; <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a>-&gt;get_File();
<a name="l412"><span class="linenum"> 412</span></a>                  if( !<a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a> )
<a name="l413"><span class="linenum"> 413</span></a>                  { // The Link File is not available
<a name="l414"><span class="linenum"> 414</span></a>                      break 2;
<a name="l415"><span class="linenum"> 415</span></a>                  }
<a name="l416"><span class="linenum"> 416</span></a>  
<a name="l417"><span class="linenum"> 417</span></a>                  if( empty( <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a>-&gt;<a onClick="logVariable('hash')" class="var it9057" onMouseOver="hilite(9057)" onMouseOut="lolite()" href="../../_variables/hash.html">hash</a> ) )
<a name="l418"><span class="linenum"> 418</span></a>                  { // File hash still is not defined, we should create and save it
<a name="l419"><span class="linenum"> 419</span></a>                      <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'hash', 'string', md5_file( <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_full_path')" href="../../_functions/get_full_path.html" onMouseOver="funcPopup(event,'get_full_path')">get_full_path</a>(), true ) );
<a name="l420"><span class="linenum"> 420</span></a>                      <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('dbsave')" href="../../_functions/dbsave.html" onMouseOver="funcPopup(event,'dbsave')">dbsave</a>();
<a name="l421"><span class="linenum"> 421</span></a>                  }
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>                  if( !empty( <a class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" onClick="logVariable('vote_action')" href="../../_variables/vote_action.html">$vote_action</a> ) )
<a name="l424"><span class="linenum"> 424</span></a>                  { // Vote for this file link
<a name="l425"><span class="linenum"> 425</span></a>                      <a class="function" onClick="logFunction('link_vote')" href="../../_functions/link_vote.html" onMouseOver="funcPopup(event,'link_vote')">link_vote</a>( <a class="var it930" onMouseOver="hilite(930)" onMouseOut="lolite()" onClick="logVariable('link_ID')" href="../../_variables/link_ID.html">$link_ID</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>, <a class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" onClick="logVariable('vote_action')" href="../../_variables/vote_action.html">$vote_action</a>, <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('checked')" href="../../_variables/checked.html">$checked</a> );
<a name="l426"><span class="linenum"> 426</span></a>                  }
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>                  <a class="var it2868" onMouseOver="hilite(2868)" onMouseOut="lolite()" onClick="logVariable('voting_form_params')" href="../../_variables/voting_form_params.html">$voting_form_params</a>['vote_ID'] = <a class="var it930" onMouseOver="hilite(930)" onMouseOut="lolite()" onClick="logVariable('link_ID')" href="../../_variables/link_ID.html">$link_ID</a>;
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>                  if( empty( <a class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" onClick="logVariable('vote_action')" href="../../_variables/vote_action.html">$vote_action</a> ) || <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" onClick="logVariable('vote_action')" href="../../_variables/vote_action.html">$vote_action</a>, array( 'like', 'noopinion', 'dontlike' ) ) )
<a name="l431"><span class="linenum"> 431</span></a>                  { // Display a voting form if no action
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">                    // or Refresh a voting form only for these actions (in order to disable icons)</span>
<a name="l433"><span class="linenum"> 433</span></a>                      <a class="function" onClick="logFunction('display_voting_form')" href="../../_functions/display_voting_form.html" onMouseOver="funcPopup(event,'display_voting_form')">display_voting_form</a>( <a class="var it2868" onMouseOver="hilite(2868)" onMouseOut="lolite()" onClick="logVariable('voting_form_params')" href="../../_variables/voting_form_params.html">$voting_form_params</a> );
<a name="l434"><span class="linenum"> 434</span></a>                  }
<a name="l435"><span class="linenum"> 435</span></a>                  break;
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>              case 'comment':
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">                // Vote on comments</span>
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>                  <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> = (int)<a class="var it2867" onMouseOver="hilite(2867)" onMouseOut="lolite()" onClick="logVariable('vote_ID')" href="../../_variables/vote_ID.html">$vote_ID</a>;
<a name="l441"><span class="linenum"> 441</span></a>                  if( empty( <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> ) )
<a name="l442"><span class="linenum"> 442</span></a>                  { // No comment ID
<a name="l443"><span class="linenum"> 443</span></a>                      break 2;
<a name="l444"><span class="linenum"> 444</span></a>                  }
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>                  <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a> = &amp; get_CommentCache();
<a name="l447"><span class="linenum"> 447</span></a>                  <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a> = <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a>-&gt;get_by_ID( <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a>, false );
<a name="l448"><span class="linenum"> 448</span></a>                  if( !<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a> )
<a name="l449"><span class="linenum"> 449</span></a>                  { // Incorrect comment ID
<a name="l450"><span class="linenum"> 450</span></a>                      break 2;
<a name="l451"><span class="linenum"> 451</span></a>                  }
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>                  if( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> == <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it9024" onMouseOver="hilite(9024)" onMouseOut="lolite()" href="../../_variables/author_user_ID.html">author_user_ID</a> )
<a name="l454"><span class="linenum"> 454</span></a>                  { // Do not allow users to vote on their own comments
<a name="l455"><span class="linenum"> 455</span></a>                      break 2;
<a name="l456"><span class="linenum"> 456</span></a>                  }
<a name="l457"><span class="linenum"> 457</span></a>  
<a name="l458"><span class="linenum"> 458</span></a>                  <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l459"><span class="linenum"> 459</span></a>                  <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>                  if( ! <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it9058" onMouseOver="hilite(9058)" onMouseOut="lolite()" href="../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('allow_rating_comment_helpfulness') )
<a name="l462"><span class="linenum"> 462</span></a>                  { // If Users cannot vote
<a name="l463"><span class="linenum"> 463</span></a>                      break 2;
<a name="l464"><span class="linenum"> 464</span></a>                  }
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>                  if( !empty( <a class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" onClick="logVariable('vote_action')" href="../../_variables/vote_action.html">$vote_action</a> ) )
<a name="l467"><span class="linenum"> 467</span></a>                  { // Vote for this comment
<a name="l468"><span class="linenum"> 468</span></a>                      switch( <a class="var it2865" onMouseOver="hilite(2865)" onMouseOut="lolite()" onClick="logVariable('vote_action')" href="../../_variables/vote_action.html">$vote_action</a> )
<a name="l469"><span class="linenum"> 469</span></a>                      { // Set field value
<a name="l470"><span class="linenum"> 470</span></a>                          case 'like':
<a name="l471"><span class="linenum"> 471</span></a>                              <a class="var it1278" onMouseOver="hilite(1278)" onMouseOut="lolite()" onClick="logVariable('field_value')" href="../../_variables/field_value.html">$field_value</a> = 'yes';
<a name="l472"><span class="linenum"> 472</span></a>                              break;
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>                          case 'dontlike':
<a name="l475"><span class="linenum"> 475</span></a>                              <a class="var it1278" onMouseOver="hilite(1278)" onMouseOut="lolite()" onClick="logVariable('field_value')" href="../../_variables/field_value.html">$field_value</a> = 'no';
<a name="l476"><span class="linenum"> 476</span></a>                              break;
<a name="l477"><span class="linenum"> 477</span></a>                      }
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>                      if( isset( <a class="var it1278" onMouseOver="hilite(1278)" onMouseOut="lolite()" onClick="logVariable('field_value')" href="../../_variables/field_value.html">$field_value</a> ) )
<a name="l480"><span class="linenum"> 480</span></a>                      { // Update a vote of current user
<a name="l481"><span class="linenum"> 481</span></a>                          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('set_vote')" href="../../_functions/set_vote.html" onMouseOver="funcPopup(event,'set_vote')">set_vote</a>( 'helpful', <a class="var it1278" onMouseOver="hilite(1278)" onMouseOut="lolite()" onClick="logVariable('field_value')" href="../../_variables/field_value.html">$field_value</a> );
<a name="l482"><span class="linenum"> 482</span></a>                          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l483"><span class="linenum"> 483</span></a>                      }
<a name="l484"><span class="linenum"> 484</span></a>                  }
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>                  if( !empty( <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l487"><span class="linenum"> 487</span></a>                  { // Redirect to back page, It is used by browsers without JavaScript
<a name="l488"><span class="linenum"> 488</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 303 ); <span class="comment">// Will EXIT</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">                    // We have EXITed already at this point!!</span>
<a name="l490"><span class="linenum"> 490</span></a>                  }
<a name="l491"><span class="linenum"> 491</span></a>  
<a name="l492"><span class="linenum"> 492</span></a>                  <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('vote_helpful')" href="../../_functions/vote_helpful.html" onMouseOver="funcPopup(event,'vote_helpful')">vote_helpful</a>( '', '', '&amp;amp;', true, true );
<a name="l493"><span class="linenum"> 493</span></a>                  break;
<a name="l494"><span class="linenum"> 494</span></a>          }
<a name="l495"><span class="linenum"> 495</span></a>          break;
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>      case 'get_user_new_field':
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">        // Used in the identity user form to add a new field</span>
<a name="l499"><span class="linenum"> 499</span></a>          <a class="var it2870" onMouseOver="hilite(2870)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../_variables/field_ID.html">$field_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'field_id', 'integer', 0 );
<a name="l500"><span class="linenum"> 500</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_id', 'integer', 0 );
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>          if( <a class="var it2870" onMouseOver="hilite(2870)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../_variables/field_ID.html">$field_ID</a> == 0 )
<a name="l503"><span class="linenum"> 503</span></a>          {    // Bad request
<a name="l504"><span class="linenum"> 504</span></a>              break;
<a name="l505"><span class="linenum"> 505</span></a>          }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>          <a class="var it2871" onMouseOver="hilite(2871)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( '
<a name="l508"><span class="linenum"> 508</span></a>              SELECT ufdf_ID, &quot;0&quot; AS uf_ID, ufdf_type, ufdf_name, &quot;&quot; AS uf_varchar, ufdf_required, ufdf_options, ufdf_suggest, ufdf_duplicated, ufgp_ID, ufgp_name
<a name="l509"><span class="linenum"> 509</span></a>                  FROM T_users__fielddefs
<a name="l510"><span class="linenum"> 510</span></a>                  LEFT JOIN T_users__fieldgroups ON ufgp_ID = ufdf_ufgp_ID
<a name="l511"><span class="linenum"> 511</span></a>              WHERE ufdf_ID = &quot;'.<a class="var it2870" onMouseOver="hilite(2870)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../_variables/field_ID.html">$field_ID</a>.'&quot;' );
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>          if( <a class="var it2871" onMouseOver="hilite(2871)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a>[0]-&gt;ufdf_duplicated == 'forbidden' )
<a name="l514"><span class="linenum"> 514</span></a>          {    // This field can be only one instance for one user
<a name="l515"><span class="linenum"> 515</span></a>              echo '[0]'; <span class="comment">// not duplicated field</span>
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>              <a class="var it2872" onMouseOver="hilite(2872)" onMouseOut="lolite()" onClick="logVariable('user_field_exist')" href="../../_variables/user_field_exist.html">$user_field_exist</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( '
<a name="l518"><span class="linenum"> 518</span></a>                  SELECT uf_ID
<a name="l519"><span class="linenum"> 519</span></a>                      FROM T_users__fields
<a name="l520"><span class="linenum"> 520</span></a>                  WHERE uf_user_ID = &quot;'.<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>.'&quot; AND uf_ufdf_ID = &quot;'.<a class="var it2870" onMouseOver="hilite(2870)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../_variables/field_ID.html">$field_ID</a>.'&quot;' );
<a name="l521"><span class="linenum"> 521</span></a>              if( <a class="var it2872" onMouseOver="hilite(2872)" onMouseOut="lolite()" onClick="logVariable('user_field_exist')" href="../../_variables/user_field_exist.html">$user_field_exist</a> &gt; 0 )
<a name="l522"><span class="linenum"> 522</span></a>              {    // User already has a current field type
<a name="l523"><span class="linenum"> 523</span></a>                  break;
<a name="l524"><span class="linenum"> 524</span></a>              }
<a name="l525"><span class="linenum"> 525</span></a>          }
<a name="l526"><span class="linenum"> 526</span></a>          else
<a name="l527"><span class="linenum"> 527</span></a>          {    // It Means: this field can be duplicated
<a name="l528"><span class="linenum"> 528</span></a>              echo '[1]';
<a name="l529"><span class="linenum"> 529</span></a>          }
<a name="l530"><span class="linenum"> 530</span></a>  
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">        // Use the glyph icons if it is defined by skin</span>
<a name="l532"><span class="linenum"> 532</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'use_glyphicons', 'integer', 0 );
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>();
<a name="l535"><span class="linenum"> 535</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('fieldstart')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/fieldstart.html">fieldstart</a> = '#fieldstart#';
<a name="l536"><span class="linenum"> 536</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('fieldend')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/fieldend.html">fieldend</a> = '#fieldend#';
<a name="l537"><span class="linenum"> 537</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('labelclass')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/labelclass.html">labelclass</a> = '#labelclass#';
<a name="l538"><span class="linenum"> 538</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('labelstart')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/labelstart.html">labelstart</a> = '#labelstart#';
<a name="l539"><span class="linenum"> 539</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('labelend')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/labelend.html">labelend</a> = '#labelend#';
<a name="l540"><span class="linenum"> 540</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('inputstart')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/inputstart.html">inputstart</a> = '#inputstart#';
<a name="l541"><span class="linenum"> 541</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('inputend')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/inputend.html">inputend</a> = '#inputend#';
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>          <a class="function" onClick="logFunction('userfields_display')" href="../../_functions/userfields_display.html" onMouseOver="funcPopup(event,'userfields_display')">userfields_display</a>( <a class="var it2871" onMouseOver="hilite(2871)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a>, <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>, 'add', false );
<a name="l544"><span class="linenum"> 544</span></a>  
<a name="l545"><span class="linenum"> 545</span></a>          break;
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>      case 'get_user_field_autocomplete':
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">        // Used for autocompletion of the user field</span>
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>          <span class="comment">/**</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">         * Possible values of var $attr_id</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">         * 1) 111 - this goes from filter search, it is ufdf_ID</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">         * 2) uf_new_222_ - field from identity form ( doesn't still exist in DB (recommened &amp; required fields) )</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">         * 3) uf_add_222_ - field from identity form ( user want add this field )</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">         *             where 222 == ufdf_ID</span>
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment">         * 4) uf_333 - field exists in DB (where 333 == uf_ID from table T_users__fields)</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">        */</span>
<a name="l558"><span class="linenum"> 558</span></a>          <a class="var it2876" onMouseOver="hilite(2876)" onMouseOut="lolite()" onClick="logVariable('attr_id')" href="../../_variables/attr_id.html">$attr_id</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'attr_id', 'string' );
<a name="l559"><span class="linenum"> 559</span></a>          <a class="var it803" onMouseOver="hilite(803)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'term', 'string' );
<a name="l560"><span class="linenum"> 560</span></a>  
<a name="l561"><span class="linenum"> 561</span></a>          <a class="var it2877" onMouseOver="hilite(2877)" onMouseOut="lolite()" onClick="logVariable('field_type_id')" href="../../_variables/field_type_id.html">$field_type_id</a> = 0;
<a name="l562"><span class="linenum"> 562</span></a>          if( (int)<a class="var it2876" onMouseOver="hilite(2876)" onMouseOut="lolite()" onClick="logVariable('attr_id')" href="../../_variables/attr_id.html">$attr_id</a> &gt; 0 )
<a name="l563"><span class="linenum"> 563</span></a>          {    // From filter 'Specific criteria'
<a name="l564"><span class="linenum"> 564</span></a>              <a class="var it2877" onMouseOver="hilite(2877)" onMouseOut="lolite()" onClick="logVariable('field_type_id')" href="../../_variables/field_type_id.html">$field_type_id</a> = (int)<a class="var it2876" onMouseOver="hilite(2876)" onMouseOut="lolite()" onClick="logVariable('attr_id')" href="../../_variables/attr_id.html">$attr_id</a>;
<a name="l565"><span class="linenum"> 565</span></a>          }
<a name="l566"><span class="linenum"> 566</span></a>          else if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/^uf_(new|add)_(\d+)_/i', <a class="var it2876" onMouseOver="hilite(2876)" onMouseOut="lolite()" onClick="logVariable('attr_id')" href="../../_variables/attr_id.html">$attr_id</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../_variables/match.html">$match</a> ) )
<a name="l567"><span class="linenum"> 567</span></a>          {    // From new fields we can get the value for uf_ufdf_ID
<a name="l568"><span class="linenum"> 568</span></a>              <a class="var it2877" onMouseOver="hilite(2877)" onMouseOut="lolite()" onClick="logVariable('field_type_id')" href="../../_variables/field_type_id.html">$field_type_id</a> = (int)<a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../_variables/match.html">$match</a>[2];
<a name="l569"><span class="linenum"> 569</span></a>          }
<a name="l570"><span class="linenum"> 570</span></a>          else if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/^uf_(\d+)$/i', <a class="var it2876" onMouseOver="hilite(2876)" onMouseOut="lolite()" onClick="logVariable('attr_id')" href="../../_variables/attr_id.html">$attr_id</a>, <a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../_variables/match.html">$match</a> ) )
<a name="l571"><span class="linenum"> 571</span></a>          {    // From fields in DB we can get only uf_ID, then we should get a value uf_ufdf_ID from DB
<a name="l572"><span class="linenum"> 572</span></a>              <a class="var it2878" onMouseOver="hilite(2878)" onMouseOut="lolite()" onClick="logVariable('field_id')" href="../../_variables/field_id.html">$field_id</a> = (int)<a class="var it257" onMouseOver="hilite(257)" onMouseOut="lolite()" onClick="logVariable('match')" href="../../_variables/match.html">$match</a>[1];
<a name="l573"><span class="linenum"> 573</span></a>              <a class="var it2877" onMouseOver="hilite(2877)" onMouseOut="lolite()" onClick="logVariable('field_type_id')" href="../../_variables/field_type_id.html">$field_type_id</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( '
<a name="l574"><span class="linenum"> 574</span></a>                  SELECT uf_ufdf_ID
<a name="l575"><span class="linenum"> 575</span></a>                    FROM T_users__fields
<a name="l576"><span class="linenum"> 576</span></a>                   WHERE uf_ID = &quot;'.<a class="var it2878" onMouseOver="hilite(2878)" onMouseOut="lolite()" onClick="logVariable('field_id')" href="../../_variables/field_id.html">$field_id</a>.'&quot;' );
<a name="l577"><span class="linenum"> 577</span></a>          }
<a name="l578"><span class="linenum"> 578</span></a>  
<a name="l579"><span class="linenum"> 579</span></a>          if( <a class="var it2877" onMouseOver="hilite(2877)" onMouseOut="lolite()" onClick="logVariable('field_type_id')" href="../../_variables/field_type_id.html">$field_type_id</a> == 0 )
<a name="l580"><span class="linenum"> 580</span></a>          {    // Bad request
<a name="l581"><span class="linenum"> 581</span></a>              break;
<a name="l582"><span class="linenum"> 582</span></a>          }
<a name="l583"><span class="linenum"> 583</span></a>  
<a name="l584"><span class="linenum"> 584</span></a>          echo <a class="function" onClick="logFunction('evo_json_encode')" href="../../_functions/evo_json_encode.html" onMouseOver="funcPopup(event,'evo_json_encode')">evo_json_encode</a>( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( '
<a name="l585"><span class="linenum"> 585</span></a>              SELECT DISTINCT ( uf_varchar )
<a name="l586"><span class="linenum"> 586</span></a>                FROM T_users__fields
<a name="l587"><span class="linenum"> 587</span></a>               WHERE uf_varchar LIKE '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>('%'.<a class="var it803" onMouseOver="hilite(803)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a>.'%').'
<a name="l588"><span class="linenum"> 588</span></a>                 AND uf_ufdf_ID = &quot;'.<a class="var it2877" onMouseOver="hilite(2877)" onMouseOut="lolite()" onClick="logVariable('field_type_id')" href="../../_variables/field_type_id.html">$field_type_id</a>.'&quot;
<a name="l589"><span class="linenum"> 589</span></a>               ORDER BY uf_varchar' ) );
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>          exit(0); <span class="comment">// Exit here in order to don't display the AJAX debug info after JSON formatted data</span>
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>          break;
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>      case 'get_widget_login_hidden_fields':
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">        // get the loginform crumb, the password encryption salt, and the Session ID</span>
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a> = <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('core.pwd_salt');
<a name="l598"><span class="linenum"> 598</span></a>          if( empty(<a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a>) )
<a name="l599"><span class="linenum"> 599</span></a>          { // Session salt is not generated yet, needs to generate
<a name="l600"><span class="linenum"> 600</span></a>              <a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a> = <a class="function" onClick="logFunction('generate_random_key')" href="../../_functions/generate_random_key.html" onMouseOver="funcPopup(event,'generate_random_key')">generate_random_key</a>(64);
<a name="l601"><span class="linenum"> 601</span></a>              <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'core.pwd_salt', <a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a>, 86400 <span class="comment">/* expire in 1 day */</span> );
<a name="l602"><span class="linenum"> 602</span></a>              <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('dbsave')" href="../../_functions/dbsave.html" onMouseOver="funcPopup(event,'dbsave')">dbsave</a>(); <span class="comment">// save now, in case there's an error later, and not saving it would prevent the user from logging in.</span>
<a name="l603"><span class="linenum"> 603</span></a>          }
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">        // display result to return</span>
<a name="l605"><span class="linenum"> 605</span></a>          echo <a class="function" onClick="logFunction('get_crumb')" href="../../_functions/get_crumb.html" onMouseOver="funcPopup(event,'get_crumb')">get_crumb</a>( 'loginform' ).' '.<a class="var it1616" onMouseOver="hilite(1616)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a>.' '.<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a onClick="logVariable('ID')" class="var it9059" onMouseOver="hilite(9059)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>;
<a name="l606"><span class="linenum"> 606</span></a>          break;
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>      case 'get_userfields_criteria':
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">        // Get fieldset for users filter by Specific criteria</span>
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">        // Use the glyph icons if it is defined by skin</span>
<a name="l612"><span class="linenum"> 612</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'use_glyphicons', 'integer', 0 );
<a name="l613"><span class="linenum"> 613</span></a>  
<a name="l614"><span class="linenum"> 614</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>();
<a name="l615"><span class="linenum"> 615</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('switch_layout')" href="../../_functions/switch_layout.html" onMouseOver="funcPopup(event,'switch_layout')">switch_layout</a>( 'blockspan' );
<a name="l616"><span class="linenum"> 616</span></a>  
<a name="l617"><span class="linenum"> 617</span></a>          echo '&lt;br /&gt;';
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('output')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/output.html">output</a> = false;
<a name="l619"><span class="linenum"> 619</span></a>          <a class="var it2879" onMouseOver="hilite(2879)" onMouseOut="lolite()" onClick="logVariable('criteria_input')" href="../../_variables/criteria_input.html">$criteria_input</a> = <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('text')" href="../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>( 'criteria_value[]', '', 17, '', '', 50 );
<a name="l620"><span class="linenum"> 620</span></a>          <a class="var it2879" onMouseOver="hilite(2879)" onMouseOut="lolite()" onClick="logVariable('criteria_input')" href="../../_variables/criteria_input.html">$criteria_input</a> .= <a class="function" onClick="logFunction('get_icon')" href="../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'add', 'imgtag', array( 'rel' =&gt; 'add_criteria' ) );
<a name="l621"><span class="linenum"> 621</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a onClick="logVariable('output')" class="var it8993" onMouseOver="hilite(8993)" onMouseOut="lolite()" href="../../_variables/output.html">output</a> = true;
<a name="l622"><span class="linenum"> 622</span></a>  
<a name="l623"><span class="linenum"> 623</span></a>          global <a class="var it2880" onMouseOver="hilite(2880)" onMouseOut="lolite()" onClick="logVariable('user_fields_empty_name')" href="../../_variables/user_fields_empty_name.html">$user_fields_empty_name</a>;
<a name="l624"><span class="linenum"> 624</span></a>          <a class="var it2880" onMouseOver="hilite(2880)" onMouseOut="lolite()" onClick="logVariable('user_fields_empty_name')" href="../../_variables/user_fields_empty_name.html">$user_fields_empty_name</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select...');
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('select')" href="../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>( 'criteria_type[]', '', 'callback_options_user_new_fields', <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Specific criteria'), <a class="var it2879" onMouseOver="hilite(2879)" onMouseOut="lolite()" onClick="logVariable('criteria_input')" href="../../_variables/criteria_input.html">$criteria_input</a> );
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>          break;
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>      case 'get_regions_option_list':
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">        // Get option list with regions by selected country</span>
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../_variables/country_ID.html">$country_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'ctry_id', 'integer', 0 );
<a name="l633"><span class="linenum"> 633</span></a>          <a class="var it1432" onMouseOver="hilite(1432)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../_variables/region_ID.html">$region_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'rgn_id', 'integer', 0 );
<a name="l634"><span class="linenum"> 634</span></a>          <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'page', 'string', '' );
<a name="l635"><span class="linenum"> 635</span></a>          <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'mode', 'string', '' );
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l638"><span class="linenum"> 638</span></a>          if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> == 'edit' )
<a name="l639"><span class="linenum"> 639</span></a>          {
<a name="l640"><span class="linenum"> 640</span></a>              <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['none_option_text'] = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Unknown' );
<a name="l641"><span class="linenum"> 641</span></a>          }
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'regional/model/_regional.funcs.php' );
<a name="l644"><span class="linenum"> 644</span></a>          echo <a class="function" onClick="logFunction('get_regions_option_list')" href="../../_functions/get_regions_option_list.html" onMouseOver="funcPopup(event,'get_regions_option_list')">get_regions_option_list</a>( <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../_variables/country_ID.html">$country_ID</a>, 0, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>          if( <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> == 'load_subregions' || <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> == 'load_all' )
<a name="l647"><span class="linenum"> 647</span></a>          {    // Load also the subregions
<a name="l648"><span class="linenum"> 648</span></a>              echo '-##-'.<a class="function" onClick="logFunction('get_subregions_option_list')" href="../../_functions/get_subregions_option_list.html" onMouseOver="funcPopup(event,'get_subregions_option_list')">get_subregions_option_list</a>( <a class="var it1432" onMouseOver="hilite(1432)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../_variables/region_ID.html">$region_ID</a>, 0, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l649"><span class="linenum"> 649</span></a>          }
<a name="l650"><span class="linenum"> 650</span></a>          if( <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> == 'load_all' )
<a name="l651"><span class="linenum"> 651</span></a>          {    // Load also the cities
<a name="l652"><span class="linenum"> 652</span></a>              echo '-##-'.<a class="function" onClick="logFunction('get_cities_option_list')" href="../../_functions/get_cities_option_list.html" onMouseOver="funcPopup(event,'get_cities_option_list')">get_cities_option_list</a>( <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../_variables/country_ID.html">$country_ID</a>, <a class="var it1432" onMouseOver="hilite(1432)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../_variables/region_ID.html">$region_ID</a>, 0, 0, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l653"><span class="linenum"> 653</span></a>          }
<a name="l654"><span class="linenum"> 654</span></a>  
<a name="l655"><span class="linenum"> 655</span></a>          break;
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>      case 'get_subregions_option_list':
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment">        // Get option list with sub-regions by selected region</span>
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../_variables/country_ID.html">$country_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'ctry_id', 'integer', 0 );
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it1432" onMouseOver="hilite(1432)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../_variables/region_ID.html">$region_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'rgn_id', 'integer', 0 );
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'page', 'string', '' );
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'mode', 'string', '' );
<a name="l663"><span class="linenum"> 663</span></a>  
<a name="l664"><span class="linenum"> 664</span></a>          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l665"><span class="linenum"> 665</span></a>          if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> == 'edit' )
<a name="l666"><span class="linenum"> 666</span></a>          {
<a name="l667"><span class="linenum"> 667</span></a>              <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['none_option_text'] = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Unknown' );
<a name="l668"><span class="linenum"> 668</span></a>          }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'regional/model/_regional.funcs.php' );
<a name="l671"><span class="linenum"> 671</span></a>          echo <a class="function" onClick="logFunction('get_subregions_option_list')" href="../../_functions/get_subregions_option_list.html" onMouseOver="funcPopup(event,'get_subregions_option_list')">get_subregions_option_list</a>( <a class="var it1432" onMouseOver="hilite(1432)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../_variables/region_ID.html">$region_ID</a>, 0, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>          if( <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> == 'load_all' )
<a name="l674"><span class="linenum"> 674</span></a>          {    // Load also the cities
<a name="l675"><span class="linenum"> 675</span></a>              echo '-##-'.<a class="function" onClick="logFunction('get_cities_option_list')" href="../../_functions/get_cities_option_list.html" onMouseOver="funcPopup(event,'get_cities_option_list')">get_cities_option_list</a>( <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../_variables/country_ID.html">$country_ID</a>, <a class="var it1432" onMouseOver="hilite(1432)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../_variables/region_ID.html">$region_ID</a>, 0, 0, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l676"><span class="linenum"> 676</span></a>          }
<a name="l677"><span class="linenum"> 677</span></a>  
<a name="l678"><span class="linenum"> 678</span></a>          break;
<a name="l679"><span class="linenum"> 679</span></a>  
<a name="l680"><span class="linenum"> 680</span></a>      case 'get_cities_option_list':
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">        // Get option list with cities by selected country, region or sub-region</span>
<a name="l682"><span class="linenum"> 682</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../_variables/country_ID.html">$country_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'ctry_id', 'integer', 0 );
<a name="l683"><span class="linenum"> 683</span></a>          <a class="var it1432" onMouseOver="hilite(1432)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../_variables/region_ID.html">$region_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'rgn_id', 'integer', 0 );
<a name="l684"><span class="linenum"> 684</span></a>          <a class="var it1434" onMouseOver="hilite(1434)" onMouseOut="lolite()" onClick="logVariable('subregion_ID')" href="../../_variables/subregion_ID.html">$subregion_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'subrg_id', 'integer', 0 );
<a name="l685"><span class="linenum"> 685</span></a>          <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'page', 'string', '' );
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>          <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l688"><span class="linenum"> 688</span></a>          if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> == 'edit' )
<a name="l689"><span class="linenum"> 689</span></a>          {
<a name="l690"><span class="linenum"> 690</span></a>              <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['none_option_text'] = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Unknown' );
<a name="l691"><span class="linenum"> 691</span></a>          }
<a name="l692"><span class="linenum"> 692</span></a>  
<a name="l693"><span class="linenum"> 693</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'regional/model/_regional.funcs.php' );
<a name="l694"><span class="linenum"> 694</span></a>          echo <a class="function" onClick="logFunction('get_cities_option_list')" href="../../_functions/get_cities_option_list.html" onMouseOver="funcPopup(event,'get_cities_option_list')">get_cities_option_list</a>( <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('country_ID')" href="../../_variables/country_ID.html">$country_ID</a>, <a class="var it1432" onMouseOver="hilite(1432)" onMouseOut="lolite()" onClick="logVariable('region_ID')" href="../../_variables/region_ID.html">$region_ID</a>, <a class="var it1434" onMouseOver="hilite(1434)" onMouseOut="lolite()" onClick="logVariable('subregion_ID')" href="../../_variables/subregion_ID.html">$subregion_ID</a>, 0, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l695"><span class="linenum"> 695</span></a>  
<a name="l696"><span class="linenum"> 696</span></a>          break;
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>      case 'get_field_bubbletip':
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">        // Get info for user field</span>
<a name="l700"><span class="linenum"> 700</span></a>          <a class="var it2870" onMouseOver="hilite(2870)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../_variables/field_ID.html">$field_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'field_ID', 'integer', 0 );
<a name="l701"><span class="linenum"> 701</span></a>  
<a name="l702"><span class="linenum"> 702</span></a>          if( <a class="var it2870" onMouseOver="hilite(2870)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../_variables/field_ID.html">$field_ID</a> &gt; 0 )
<a name="l703"><span class="linenum"> 703</span></a>          {    // Get field info from DB
<a name="l704"><span class="linenum"> 704</span></a>              <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( '
<a name="l705"><span class="linenum"> 705</span></a>                  SELECT ufdf_bubbletip, ufdf_duplicated
<a name="l706"><span class="linenum"> 706</span></a>                    FROM T_users__fielddefs
<a name="l707"><span class="linenum"> 707</span></a>                   WHERE ufdf_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it2870" onMouseOver="hilite(2870)" onMouseOut="lolite()" onClick="logVariable('field_ID')" href="../../_variables/field_ID.html">$field_ID</a> ) );
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>              if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> ) )
<a name="l710"><span class="linenum"> 710</span></a>              {    // No field in DB
<a name="l711"><span class="linenum"> 711</span></a>                  break;
<a name="l712"><span class="linenum"> 712</span></a>              }
<a name="l713"><span class="linenum"> 713</span></a>  
<a name="l714"><span class="linenum"> 714</span></a>              if( !empty( <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('ufdf_bubbletip')" class="var it9060" onMouseOver="hilite(9060)" onMouseOut="lolite()" href="../../_variables/ufdf_bubbletip.html">ufdf_bubbletip</a> ) )
<a name="l715"><span class="linenum"> 715</span></a>              {    // Field has a defined bubbletip text
<a name="l716"><span class="linenum"> 716</span></a>                  <a class="var it2881" onMouseOver="hilite(2881)" onMouseOut="lolite()" onClick="logVariable('field_info')" href="../../_variables/field_info.html">$field_info</a> = <a class="phpfunction" onClick="logFunction('nl2br')" href="../../_functions/nl2br.html" onMouseOver="phpfuncPopup(event,'nl2br')">nl2br</a>( <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('ufdf_bubbletip')" class="var it9060" onMouseOver="hilite(9060)" onMouseOut="lolite()" href="../../_variables/ufdf_bubbletip.html">ufdf_bubbletip</a> );
<a name="l717"><span class="linenum"> 717</span></a>              }
<a name="l718"><span class="linenum"> 718</span></a>              else if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('ufdf_duplicated')" class="var it9060" onMouseOver="hilite(9060)" onMouseOut="lolite()" href="../../_variables/ufdf_duplicated.html">ufdf_duplicated</a>, array( 'allowed', 'list' ) ) )
<a name="l719"><span class="linenum"> 719</span></a>              {    // Default info for fields with multiple values
<a name="l720"><span class="linenum"> 720</span></a>                  <a class="var it2881" onMouseOver="hilite(2881)" onMouseOut="lolite()" onClick="logVariable('field_info')" href="../../_variables/field_info.html">$field_info</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('To enter multiple values,&lt;br /&gt;please click <a class="function" onClick="logFunction('on')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a> (+)');
<a name="l721"><span class="linenum"> 721</span></a>              }
<a name="l722"><span class="linenum"> 722</span></a>          }
<a name="l723"><span class="linenum"> 723</span></a>  
<a name="l724"><span class="linenum"> 724</span></a>          if( !empty( <a class="var it2881" onMouseOver="hilite(2881)" onMouseOut="lolite()" onClick="logVariable('field_info')" href="../../_variables/field_info.html">$field_info</a> ) )
<a name="l725"><span class="linenum"> 725</span></a>          { // Replace mask <a class="function" onClick="logFunction('text')" href="../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a> (+) with img tag
<a name="l726"><span class="linenum"> 726</span></a>  
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">            // Use the glyph icons if it is defined by skin</span>
<a name="l728"><span class="linenum"> 728</span></a>              <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'use_glyphicons', 'integer', 0 );
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>              echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '(+)', <a class="function" onClick="logFunction('get_icon')" href="../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'add' ), <a class="var it2881" onMouseOver="hilite(2881)" onMouseOut="lolite()" onClick="logVariable('field_info')" href="../../_variables/field_info.html">$field_info</a> );
<a name="l731"><span class="linenum"> 731</span></a>          }
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>          break;
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>      case 'collapse_filter':
<a name="l736"><span class="linenum"> 736</span></a>      case 'expand_filter':
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">        // Save a value of state(collapse/expand) of the current filter</span>
<a name="l738"><span class="linenum"> 738</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'target', 'string', '' );
<a name="l739"><span class="linenum"> 739</span></a>          if( !empty( <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a> ) )
<a name="l740"><span class="linenum"> 740</span></a>          {    // We want to record a 'collapse'/'expand' value:
<a name="l741"><span class="linenum"> 741</span></a>              <a class="var it2882" onMouseOver="hilite(2882)" onMouseOut="lolite()" onClick="logVariable('target_status')" href="../../_variables/target_status.html">$target_status</a> = <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'collapse_filter' ? 'collapsed' : 'expanded';
<a name="l742"><span class="linenum"> 742</span></a>              if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/_(filters|colselect)$/', <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a> ) )
<a name="l743"><span class="linenum"> 743</span></a>              {    // accept all _filters and _colselect open/close requests!
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">                // We have a valid value:</span>
<a name="l745"><span class="linenum"> 745</span></a>                  <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a>, <a class="var it2882" onMouseOver="hilite(2882)" onMouseOut="lolite()" onClick="logVariable('target_status')" href="../../_variables/target_status.html">$target_status</a> );
<a name="l746"><span class="linenum"> 746</span></a>              }
<a name="l747"><span class="linenum"> 747</span></a>              else
<a name="l748"><span class="linenum"> 748</span></a>              {    // Warning: you may not see this on AJAX calls
<a name="l749"><span class="linenum"> 749</span></a>                  <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Cannot ['.<a class="var it2882" onMouseOver="hilite(2882)" onMouseOut="lolite()" onClick="logVariable('target_status')" href="../../_variables/target_status.html">$target_status</a>.'] unknown param ['.<a class="var it608" onMouseOver="hilite(608)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a>.']', 'error' );
<a name="l750"><span class="linenum"> 750</span></a>              }
<a name="l751"><span class="linenum"> 751</span></a>          }
<a name="l752"><span class="linenum"> 752</span></a>          break;
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>      case 'validate_login':
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">        // Validate if username is available</span>
<a name="l756"><span class="linenum"> 756</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'login', 'string', '' );
<a name="l757"><span class="linenum"> 757</span></a>          if( !empty( <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a> ) )
<a name="l758"><span class="linenum"> 758</span></a>          {
<a name="l759"><span class="linenum"> 759</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>( 'Validate if username is available' );
<a name="l760"><span class="linenum"> 760</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_ID' );
<a name="l761"><span class="linenum"> 761</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_users' );
<a name="l762"><span class="linenum"> 762</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'user_login = &quot;'.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('escape')" href="../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>( <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a> ).'&quot;' );
<a name="l763"><span class="linenum"> 763</span></a>              if( <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) )
<a name="l764"><span class="linenum"> 764</span></a>              {    // Login already exists
<a name="l765"><span class="linenum"> 765</span></a>                  echo 'exists';
<a name="l766"><span class="linenum"> 766</span></a>              }
<a name="l767"><span class="linenum"> 767</span></a>              else
<a name="l768"><span class="linenum"> 768</span></a>              {    // Login is available
<a name="l769"><span class="linenum"> 769</span></a>                  echo 'available';
<a name="l770"><span class="linenum"> 770</span></a>              }
<a name="l771"><span class="linenum"> 771</span></a>          }
<a name="l772"><span class="linenum"> 772</span></a>          break;
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>      case 'results':
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">        // Refresh a results table (To change page, page size, an order)</span>
<a name="l776"><span class="linenum"> 776</span></a>  
<a name="l777"><span class="linenum"> 777</span></a>          <span class="comment">/**</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">         * Variable to define a current request as ajax content</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">         * It is used to don't display a wrapper data such as header, footer and etc.</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">         * @see is_ajax_content()</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">         *</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">         * @var boolean</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">         */</span>
<a name="l784"><span class="linenum"> 784</span></a>          <a class="var it2883" onMouseOver="hilite(2883)" onMouseOut="lolite()" onClick="logVariable('ajax_content_mode')" href="../../_variables/ajax_content_mode.html">$ajax_content_mode</a> = true;
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment">        // get callback function param, this function will display the results content</span>
<a name="l787"><span class="linenum"> 787</span></a>          <a class="var it2884" onMouseOver="hilite(2884)" onMouseOut="lolite()" onClick="logVariable('callback_function')" href="../../_variables/callback_function.html">$callback_function</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'callback_function', 'string', '' );
<a name="l788"><span class="linenum"> 788</span></a>          if( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'is_backoffice', 'integer', 0 ) )
<a name="l789"><span class="linenum"> 789</span></a>          {
<a name="l790"><span class="linenum"> 790</span></a>              global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a>;
<a name="l791"><span class="linenum"> 791</span></a>              <a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'admin_skin', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l792"><span class="linenum"> 792</span></a>              <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array( 'skin_type' =&gt; 'admin', 'skin_name' =&gt; <a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a> );
<a name="l793"><span class="linenum"> 793</span></a>              <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l794"><span class="linenum"> 794</span></a>              <span class="comment">/**</span>
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">             * Load the AdminUI class for the skin.</span>
<a name="l796"><span class="linenum"> 796</span></a>  <span class="comment">             */</span>
<a name="l797"><span class="linenum"> 797</span></a>              require_once <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>.<a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a>.'/_adminUI.class.php';
<a name="l798"><span class="linenum"> 798</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a> = <span class="keyword">new </span><a class="class" onClick="logClass('AdminUI')" href="../../_classes/adminui.html" onMouseOver="classPopup(event,'adminui')">AdminUI</a>();
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">            // Get the requested params and memorize it to make correct links for paging, ordering and etc.</span>
<a name="l801"><span class="linenum"> 801</span></a>              <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'ctrl', '/^[a-z0-9_]+$/', <a class="var it2885" onMouseOver="hilite(2885)" onMouseOut="lolite()" onClick="logVariable('default_ctrl')" href="../../_variables/default_ctrl.html">$default_ctrl</a>, true );
<a name="l802"><span class="linenum"> 802</span></a>              <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog', 'integer', NULL, true );
<a name="l803"><span class="linenum"> 803</span></a>              <a class="var it2886" onMouseOver="hilite(2886)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../_variables/ReqPath.html">$ReqPath</a> = <a class="var it346" onMouseOver="hilite(346)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>;
<a name="l804"><span class="linenum"> 804</span></a>          }
<a name="l805"><span class="linenum"> 805</span></a>          else
<a name="l806"><span class="linenum"> 806</span></a>          {
<a name="l807"><span class="linenum"> 807</span></a>              <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp;get_BlogCache();
<a name="l808"><span class="linenum"> 808</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a>, true );
<a name="l809"><span class="linenum"> 809</span></a>              <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('skin_ID')" href="../../_variables/skin_ID.html">$skin_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_skin_ID')" href="../../_functions/get_skin_id.html" onMouseOver="funcPopup(event,'get_skin_id')">get_skin_ID</a>();
<a name="l810"><span class="linenum"> 810</span></a>              <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a> = &amp; get_SkinCache();
<a name="l811"><span class="linenum"> 811</span></a>              <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> = &amp; <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a>-&gt;get_by_ID( <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('skin_ID')" href="../../_variables/skin_ID.html">$skin_ID</a> );
<a name="l812"><span class="linenum"> 812</span></a>              <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array( 'skin_type' =&gt; 'front', 'skin_name' =&gt; <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a onClick="logVariable('folder')" class="var it9033" onMouseOver="hilite(9033)" onMouseOut="lolite()" href="../../_variables/folder.html">folder</a> );
<a name="l813"><span class="linenum"> 813</span></a>          }
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">        // load required resource for each callback function</span>
<a name="l816"><span class="linenum"> 816</span></a>          switch( <a class="var it2884" onMouseOver="hilite(2884)" onMouseOut="lolite()" onClick="logVariable('callback_function')" href="../../_variables/callback_function.html">$callback_function</a> )
<a name="l817"><span class="linenum"> 817</span></a>          {
<a name="l818"><span class="linenum"> 818</span></a>              case 'hits_results_block':
<a name="l819"><span class="linenum"> 819</span></a>                  <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('sessions/model/_hitlog.funcs.php');
<a name="l820"><span class="linenum"> 820</span></a>                  break;
<a name="l821"><span class="linenum"> 821</span></a>  
<a name="l822"><span class="linenum"> 822</span></a>              case 'items_created_results_block':
<a name="l823"><span class="linenum"> 823</span></a>              case 'items_edited_results_block':
<a name="l824"><span class="linenum"> 824</span></a>              case 'comments_results_block':
<a name="l825"><span class="linenum"> 825</span></a>              case 'threads_results_block':
<a name="l826"><span class="linenum"> 826</span></a>              case 'user_reports_results_block':
<a name="l827"><span class="linenum"> 827</span></a>              case 'blogs_user_results_block':
<a name="l828"><span class="linenum"> 828</span></a>              case 'blogs_all_results_block':
<a name="l829"><span class="linenum"> 829</span></a>              case 'items_list_block_by_page':
<a name="l830"><span class="linenum"> 830</span></a>              case 'items_manual_results_block':
<a name="l831"><span class="linenum"> 831</span></a>                  break;
<a name="l832"><span class="linenum"> 832</span></a>  
<a name="l833"><span class="linenum"> 833</span></a>              default:
<a name="l834"><span class="linenum"> 834</span></a>                  <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Incorrect callback function name!', 'error' );
<a name="l835"><span class="linenum"> 835</span></a>                  <a class="function" onClick="logFunction('debug_die')" href="../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Incorrect callback function!' );
<a name="l836"><span class="linenum"> 836</span></a>          }
<a name="l837"><span class="linenum"> 837</span></a>  
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment">        // Call the requested callback function to display the results</span>
<a name="l839"><span class="linenum"> 839</span></a>          <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>( <a class="var it2884" onMouseOver="hilite(2884)" onMouseOut="lolite()" onClick="logVariable('callback_function')" href="../../_variables/callback_function.html">$callback_function</a>, <a class="var it40" onMouseOver="hilite(40)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l840"><span class="linenum"> 840</span></a>          break;
<a name="l841"><span class="linenum"> 841</span></a>  
<a name="l842"><span class="linenum"> 842</span></a>      case 'get_recipients':
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">        // Get list of users by search word</span>
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment">        // Used for jQuery Tokeninput plugin ( when creating new messaging Thread )</span>
<a name="l845"><span class="linenum"> 845</span></a>  
<a name="l846"><span class="linenum"> 846</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() || !<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'reply' ) )
<a name="l847"><span class="linenum"> 847</span></a>          {    // Check permission: User is not allowed to view threads
<a name="l848"><span class="linenum"> 848</span></a>              exit(0);
<a name="l849"><span class="linenum"> 849</span></a>          }
<a name="l850"><span class="linenum"> 850</span></a>  
<a name="l851"><span class="linenum"> 851</span></a>          if( <a class="function" onClick="logFunction('check_create_thread_limit')" href="../../_functions/check_create_thread_limit.html" onMouseOver="funcPopup(event,'check_create_thread_limit')">check_create_thread_limit</a>() )
<a name="l852"><span class="linenum"> 852</span></a>          {    // user has already reached his limit, don't allow to get a users list
<a name="l853"><span class="linenum"> 853</span></a>              exit(0);
<a name="l854"><span class="linenum"> 854</span></a>          }
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'term', 'string' );
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">        // Clear users cache and load only possible recipients who need right now, but keep shadow</span>
<a name="l859"><span class="linenum"> 859</span></a>          <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../_variables/where_condition.html">$where_condition</a> = '( user_login LIKE '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( '%'.<a class="var it803" onMouseOver="hilite(803)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a>.'%' ).' ) AND ( user_ID != '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ).' )';
<a name="l860"><span class="linenum"> 860</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l861"><span class="linenum"> 861</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>( true );
<a name="l862"><span class="linenum"> 862</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_where')" href="../../_functions/load_where.html" onMouseOver="funcPopup(event,'load_where')">load_where</a>( <a class="var it2887" onMouseOver="hilite(2887)" onMouseOut="lolite()" onClick="logVariable('where_condition')" href="../../_variables/where_condition.html">$where_condition</a> );
<a name="l863"><span class="linenum"> 863</span></a>  
<a name="l864"><span class="linenum"> 864</span></a>          <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('result_users')" href="../../_variables/result_users.html">$result_users</a> = array();
<a name="l865"><span class="linenum"> 865</span></a>          while( ( <a class="var it1582" onMouseOver="hilite(1582)" onMouseOut="lolite()" onClick="logVariable('iterator_User')" href="../../_variables/iterator_User.html">$iterator_User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_next() ) != NULL )
<a name="l866"><span class="linenum"> 866</span></a>          { // Iterate through UserCache
<a name="l867"><span class="linenum"> 867</span></a>              if( !<a class="var it1582" onMouseOver="hilite(1582)" onMouseOut="lolite()" onClick="logVariable('iterator_User')" href="../../_variables/iterator_User.html">$iterator_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_receive_pm' ) )
<a name="l868"><span class="linenum"> 868</span></a>              { // this user is probably closed so don't show it
<a name="l869"><span class="linenum"> 869</span></a>                  continue;
<a name="l870"><span class="linenum"> 870</span></a>              }
<a name="l871"><span class="linenum"> 871</span></a>              <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('result_users')" href="../../_variables/result_users.html">$result_users</a>[] = array(
<a name="l872"><span class="linenum"> 872</span></a>                  'id'       =&gt; <a class="var it1582" onMouseOver="hilite(1582)" onMouseOut="lolite()" onClick="logVariable('iterator_User')" href="../../_variables/iterator_User.html">$iterator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it9035" onMouseOver="hilite(9035)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>,
<a name="l873"><span class="linenum"> 873</span></a>                  'title'    =&gt; <a class="var it1582" onMouseOver="hilite(1582)" onMouseOut="lolite()" onClick="logVariable('iterator_User')" href="../../_variables/iterator_User.html">$iterator_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'login' ),
<a name="l874"><span class="linenum"> 874</span></a>                  'fullname' =&gt; <a class="var it1582" onMouseOver="hilite(1582)" onMouseOut="lolite()" onClick="logVariable('iterator_User')" href="../../_variables/iterator_User.html">$iterator_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'fullname' ),
<a name="l875"><span class="linenum"> 875</span></a>                  'picture'  =&gt; <a class="var it1582" onMouseOver="hilite(1582)" onMouseOut="lolite()" onClick="logVariable('iterator_User')" href="../../_variables/iterator_User.html">$iterator_User</a>-&gt;<a class="function" onClick="logFunction('get_avatar_imgtag')" href="../../_functions/get_avatar_imgtag.html" onMouseOver="funcPopup(event,'get_avatar_imgtag')">get_avatar_imgtag</a>( 'crop-top-32x32' )
<a name="l876"><span class="linenum"> 876</span></a>              );
<a name="l877"><span class="linenum"> 877</span></a>          }
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>          echo <a class="function" onClick="logFunction('evo_json_encode')" href="../../_functions/evo_json_encode.html" onMouseOver="funcPopup(event,'evo_json_encode')">evo_json_encode</a>( <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('result_users')" href="../../_variables/result_users.html">$result_users</a> );
<a name="l880"><span class="linenum"> 880</span></a>          exit(0);
<a name="l881"><span class="linenum"> 881</span></a>  
<a name="l882"><span class="linenum"> 882</span></a>      case 'moderate_comment':
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">        // Used for quick moderation of comments in front-office</span>
<a name="l884"><span class="linenum"> 884</span></a>  
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l886"><span class="linenum"> 886</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l887"><span class="linenum"> 887</span></a>  
<a name="l888"><span class="linenum"> 888</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l889"><span class="linenum"> 889</span></a>          { // Only logged in users can moderate comments
<a name="l890"><span class="linenum"> 890</span></a>              break;
<a name="l891"><span class="linenum"> 891</span></a>          }
<a name="l892"><span class="linenum"> 892</span></a>  
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">        // Check comment moderate permission below after we have the $edited_Comment object</span>
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blogid', 'integer' );
<a name="l896"><span class="linenum"> 896</span></a>          <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'status', 'string' );
<a name="l897"><span class="linenum"> 897</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'commentid', 'integer' ), false );
<a name="l898"><span class="linenum"> 898</span></a>          if( <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> !== false )
<a name="l899"><span class="linenum"> 899</span></a>          { // The comment still exists
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment">            // Check permission:</span>
<a name="l901"><span class="linenum"> 901</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!'.<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>, 'moderate', true, <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> );
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>              <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', NULL );
<a name="l904"><span class="linenum"> 904</span></a>  
<a name="l905"><span class="linenum"> 905</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> );
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">            // Comment moderation is done, handle moderation &quot;secret&quot;</span>
<a name="l907"><span class="linenum"> 907</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_qm_secret')" href="../../_functions/handle_qm_secret.html" onMouseOver="funcPopup(event,'handle_qm_secret')">handle_qm_secret</a>();
<a name="l908"><span class="linenum"> 908</span></a>              if( <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>() !== false )
<a name="l909"><span class="linenum"> 909</span></a>              {
<a name="l910"><span class="linenum"> 910</span></a>                  if( <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> == 'published' )
<a name="l911"><span class="linenum"> 911</span></a>                  {
<a name="l912"><span class="linenum"> 912</span></a>                      <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_notifications')" href="../../_functions/handle_notifications.html" onMouseOver="funcPopup(event,'handle_notifications')">handle_notifications</a>( false, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l913"><span class="linenum"> 913</span></a>                  }
<a name="l914"><span class="linenum"> 914</span></a>  
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">                // Send new current status as ajax response</span>
<a name="l916"><span class="linenum"> 916</span></a>                  echo <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('status')" class="var it9056" onMouseOver="hilite(9056)" onMouseOut="lolite()" href="../../_variables/status.html">status</a>;
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">                // Also send the statuses which will be after raising/lowering of a status by current user</span>
<a name="l918"><span class="linenum"> 918</span></a>                  <a class="var it2889" onMouseOver="hilite(2889)" onMouseOut="lolite()" onClick="logVariable('comment_raise_status')" href="../../_variables/comment_raise_status.html">$comment_raise_status</a> = <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( true, <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('status')" class="var it9056" onMouseOver="hilite(9056)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> );
<a name="l919"><span class="linenum"> 919</span></a>                  <a class="var it2890" onMouseOver="hilite(2890)" onMouseOut="lolite()" onClick="logVariable('comment_lower_status')" href="../../_variables/comment_lower_status.html">$comment_lower_status</a> = <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( false, <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('status')" class="var it9056" onMouseOver="hilite(9056)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> );
<a name="l920"><span class="linenum"> 920</span></a>                  echo ':'.( <a class="var it2889" onMouseOver="hilite(2889)" onMouseOut="lolite()" onClick="logVariable('comment_raise_status')" href="../../_variables/comment_raise_status.html">$comment_raise_status</a> ? <a class="var it2889" onMouseOver="hilite(2889)" onMouseOut="lolite()" onClick="logVariable('comment_raise_status')" href="../../_variables/comment_raise_status.html">$comment_raise_status</a>[0] : '' );
<a name="l921"><span class="linenum"> 921</span></a>                  echo ':'.( <a class="var it2890" onMouseOver="hilite(2890)" onMouseOut="lolite()" onClick="logVariable('comment_lower_status')" href="../../_variables/comment_lower_status.html">$comment_lower_status</a> ? <a class="var it2890" onMouseOver="hilite(2890)" onMouseOut="lolite()" onClick="logVariable('comment_lower_status')" href="../../_variables/comment_lower_status.html">$comment_lower_status</a>[0] : '' );
<a name="l922"><span class="linenum"> 922</span></a>              }
<a name="l923"><span class="linenum"> 923</span></a>          }
<a name="l924"><span class="linenum"> 924</span></a>          break;
<a name="l925"><span class="linenum"> 925</span></a>  
<a name="l926"><span class="linenum"> 926</span></a>      default:
<a name="l927"><span class="linenum"> 927</span></a>          <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Incorrect action!'), 'error' );
<a name="l928"><span class="linenum"> 928</span></a>          break;
<a name="l929"><span class="linenum"> 929</span></a>  }
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>  <a class="var it140" onMouseOver="hilite(140)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = NULL;
<a name="l932"><span class="linenum"> 932</span></a>  <a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('ctrl')" href="../../_variables/ctrl.html">$ctrl</a> = NULL;
<a name="l933"><span class="linenum"> 933</span></a>  
<a name="l934"><span class="linenum"> 934</span></a>  if( <a class="var it2846" onMouseOver="hilite(2846)" onMouseOut="lolite()" onClick="logVariable('current_debug')" href="../../_variables/current_debug.html">$current_debug</a> || <a class="var it2847" onMouseOver="hilite(2847)" onMouseOut="lolite()" onClick="logVariable('current_debug_jslog')" href="../../_variables/current_debug_jslog.html">$current_debug_jslog</a> )
<a name="l935"><span class="linenum"> 935</span></a>  {    // debug is ON
<a name="l936"><span class="linenum"> 936</span></a>      <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( NULL, NULL, true, 'all',
<a name="l937"><span class="linenum"> 937</span></a>                      array(
<a name="l938"><span class="linenum"> 938</span></a>                              'error' =&gt; array( 'class' =&gt; 'jslog_error', 'divClass' =&gt; false ),
<a name="l939"><span class="linenum"> 939</span></a>                              'note'  =&gt; array( 'class' =&gt; 'jslog_note',  'divClass' =&gt; false ),
<a name="l940"><span class="linenum"> 940</span></a>                          ), 'ul', 'jslog' );
<a name="l941"><span class="linenum"> 941</span></a>  }
<a name="l942"><span class="linenum"> 942</span></a>  
<a name="l943"><span class="linenum"> 943</span></a>  echo '&lt;!-- Ajax response end --&gt;';
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>  exit(0);
<a name="l946"><span class="linenum"> 946</span></a>  
<a name="l947"><span class="linenum"> 947</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'add': ['add', 'Add object to cache, handling our own indices. ', [['blogs/inc/collections/model','_blogcache.class.php',69],['blogs/inc/users/model','_usercache.class.php',231],['blogs/inc/files/model','_filelist.class.php',392],['blogs/inc/_core/model','_log.class.php',124],['blogs/inc/_core/model','_log.class.php',593],['blogs/inc/files/model','_filetypecache.class.php',57],['blogs/inc/_ext/pclzip','pclzip.lib.php',455],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',356],['blogs/inc/users/model','_groupsettings.class.php',103],['blogs/inc/links/model','_linkcache.class.php',101],['blogs/inc/skins/model','_skincache.class.php',62],['blogs/inc/generic/model','_genericcategorycache.class.php',113],['blogs/inc/_core/model','_messages.class.php',121]], 2022],
'get_preferred_name': ['get_preferred_name', 'Get preferred name of the user ', [['blogs/inc/users/model','_user.class.php',1244]], 10],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['blogs/inc/_core','_misc.funcs.php',2535]], 216],
'init_charsets': ['init_charsets', 'Init charset handling between Input/Output ($io_charset) and the internal handling ($evo_charset). ', [['blogs/inc/locales','_locale.funcs.php',1081]], 12],
'check_status': ['check_status', 'Check if user status permit the give action ', [['blogs/inc/users/model','_user.class.php',2598]], 74],
'load_blog': ['load_blog', '', [['blogs/inc/chapters/model','_chapter.class.php',277],['blogs/inc/items/model','_itemlight.class.php',1342],['blogs/inc/links/model','_linkuser.class.php',126],['blogs/inc/links/model','_linkitem.class.php',137],['blogs/inc/links/model','_linkcomment.class.php',113]], 56],
'get_skin_id': ['get_skin_id', '', [['blogs/inc/collections/model','_blog.class.php',2634]], 13],
'get_regions_option_list': ['get_regions_option_list', 'Get option list with regions by country ID ', [['blogs/inc/regional/model','_regional.funcs.php',119]], 8],
'userfields_display': ['userfields_display', 'Display user fields from given array ', [['blogs/inc/users/model','_user.funcs.php',2538]], 3],
'get_city_name': ['get_city_name', 'Get city name ', [['blogs/inc/users/model','_user.class.php',1486]], 3],
'get_author_name_anonymous': ['get_author_name_anonymous', 'Get the comment anonymous author\'s name with gender class. ', [['blogs/inc/comments/model','_comment.class.php',676]], 2],
'get_item': ['get_item', 'Getting next item in archive list ', [['blogs/plugins','_archives.plugin.php',594]], 85],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['blogs/inc/_core','_param.funcs.php',50]], 1906],
'is_admin_page': ['is_admin_page', 'Is the current page an admin/backoffice page? ', [['blogs/inc/_core','_misc.funcs.php',4764]], 73],
'is_decimal': ['is_decimal', 'Checks if the param is a decimal number ', [['blogs/inc/_core','_misc.funcs.php',1765]], 2],
'set_vote': ['set_vote', 'Set the vote, as a number. ', [['blogs/inc/comments/model','_comment.class.php',384]], 3],
'get_avatar': ['get_avatar', 'Get the avatar of the comment\'s author. ', [['blogs/inc/comments/model','_comment.class.php',758]], 3],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['blogs/inc/chapters/model','_chapter.class.php',317],['blogs/inc/collections/model','_collsettings.class.php',260],['blogs/inc/users/model','_group.class.php',470],['blogs/inc/widgets/model','_widget.class.php',757],['blogs/inc/collections/model','_blog.class.php',2327],['blogs/inc/settings/model','_abstractsettings.class.php',593],['blogs/inc/users/model','_user.class.php',2934],['blogs/inc/skins/model','_skin.class.php',348],['blogs/inc/comments/model','_comment.class.php',3470],['blogs/inc/users/model','_groupsettings.class.php',159],['blogs/inc/cron/model','_cronjob.class.php',207],['blogs/inc/items/model','_item.class.php',4867],['blogs/inc/slugs/model','_slug.class.php',265],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',129],['blogs/inc/files/model','_file.class.php',1739]], 266],
'assert_received_crumb': ['assert_received_crumb', 'Assert that we received a valid crumb for the object we want to act on. ', [['blogs/inc/sessions/model','_session.class.php',582]], 256],
'handle_qm_secret': ['handle_qm_secret', 'Handle quick moderation secret param: checks if comment secret should expire after first comment moderation, and delete the secret if required This should be called after every kind of commment moderation ', [['blogs/inc/comments/model','_comment.class.php',3407]], 8],
'get_icon': ['get_icon', 'Get properties of an icon. ', [['blogs/inc/_core','_misc.funcs.php',3989],['blogs/inc/files/model','_filetype.class.php',174],['blogs/inc/files/model','_file.class.php',955]], 313],
'text': ['text', 'Builds a text (or password) input field. ', [['blogs/inc/_core/ui/forms','_form.class.php',721]], 135],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['blogs/inc/_core/model/db','_db.class.php',1041]], 88],
'get_region_name': ['get_region_name', 'Get region name ', [['blogs/inc/users/model','_user.class.php',1458]], 4],
'from': ['from', '', [['blogs/inc/_core/model/db','_sql.class.php',219]], 380],
'get_subregions_option_list': ['get_subregions_option_list', 'Get option list with sub-regions by region ID ', [['blogs/inc/regional/model','_regional.funcs.php',146]], 7],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['blogs/inc/_core/model/db','_db.class.php',1092]], 140],
't_': ['t_', 'TRANSLATE! ', [['blogs/inc/locales','_locale.funcs.php',48],['blogs/inc/locales','_locale.funcs.php',240],['blogs/inc/skins/model','_skin.class.php',672],['blogs/inc/_core/model','_module.class.php',79],['blogs/rsc/js','blog_widgets.js',422],['blogs/inc/plugins','_plugin.class.php',2617]], 10201],
'generate_random_key': ['generate_random_key', 'Generate a valid key of size $length. ', [['blogs/inc/_core','_misc.funcs.php',4509]], 26],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['blogs/inc/_core/model/db','_db.class.php',961]], 137],
'evo_json_encode': ['evo_json_encode', 'A wrapper for json_encode function We need to pass valid UTF-8 string to json_encode, otherwise it may return NULL ', [['blogs/inc/_core','_misc.funcs.php',5770]], 11],
'get_setting': ['get_setting', 'Get a setting. ', [['blogs/inc/collections/model','_blog.class.php',2021],['blogs/inc/skins/model','_skin.class.php',553],['blogs/inc/items/model','_item.class.php',6236]], 640],
'vote_spam': ['vote_spam', 'Display link to vote a comment as SPAM if user has edit rights ', [['blogs/inc/comments/model','_comment.class.php',1637]], 3],
'escape': ['escape', 'Format a string correctly for safe insert under all PHP conditions ', [['blogs/inc/_core/model/db','_db.class.php',494]], 145],
'locale_activate': ['locale_activate', 'Activate a locale. ', [['blogs/inc/locales','_locale.funcs.php',314]], 17],
'select': ['select', 'Set SELECT clause ', [['blogs/inc/_core/model/db','_sql.class.php',194],['blogs/inc/_core/model/db','_db.class.php',466],['blogs/inc/_core/ui/forms','_form.class.php',1820]], 461],
'display_voting_form': ['display_voting_form', 'Display a voting form ', [['blogs/inc/users/model','_user.funcs.php',3245]], 2],
'get_subregion_name': ['get_subregion_name', 'Get subregion name ', [['blogs/inc/users/model','_user.class.php',1472]], 4],
'msgform_link': ['msgform_link', 'Template function: display a link to a message form for this user ', [['blogs/inc/users/model','_user.class.php',3351],['blogs/inc/comments/model','_comment.class.php',2193],['blogs/inc/items/model','_item.class.php',2230]], 5],
'header_redirect': ['header_redirect', 'Sends HTTP header to redirect to the previous location (which can be given as function parameter, GET parameter (redirect_to), is taken from {@link Hit::$referer} or {@link $baseurl}). ', [['blogs/inc/_core','_template.funcs.php',110]], 373],
'header_content_type': ['header_content_type', 'Template tag. Output content-type header ', [['blogs/inc/_core','_template.funcs.php',37]], 6],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['blogs/inc/users/model','_user.funcs.php',60]], 190],
'button_class': ['button_class', 'Get a button class name depending on template ', [['blogs/inc/_core','_misc.funcs.php',6347]], 40],
'handle_notifications': ['handle_notifications', 'Handle comment email notifications ', [['blogs/inc/comments/model','_comment.class.php',3068]], 9],
'where': ['where', '', [['blogs/inc/_core/model/db','_sql.class.php',240]], 238],
'check_perm': ['check_perm', 'Check permission on a message ', [['blogs/inc/messaging/model','_message.class.php',467],['blogs/inc/users/model','_group.class.php',257],['blogs/inc/users/model','_user.class.php',2022],['blogs/inc/links/model','_linkuser.class.php',51],['blogs/inc/links/model','_linkitem.class.php',54],['blogs/inc/_core/model','_module.class.php',233],['blogs/inc/messaging/model','_thread.class.php',476],['blogs/inc/links/model','_linkcomment.class.php',53],['blogs/inc/sessions/model','_goal.class.php',92]], 967],
'header_nocache': ['header_nocache', 'Sends HTTP headers to avoid caching of the page at the browser level (at least without revalidating with the server to make sure whether the content has changed or not). ', [['blogs/inc/_core','_template.funcs.php',270]], 9],
'set': ['set', 'Set param value ', [['blogs/inc/users/model','_userfield.class.php',243],['blogs/inc/generic/model','_genericordered.class.php',75],['blogs/inc/users/model','_group.class.php',204],['blogs/inc/items/model','_itemlight.class.php',1258],['blogs/inc/plugins/model','_pluginsettings.class.php',70],['blogs/inc/widgets/model','_widget.class.php',321],['blogs/inc/regional/model','_region.class.php',102],['blogs/inc/regional/model','_city.class.php',110],['blogs/inc/collections/model','_blog.class.php',1102],['blogs/inc/settings/model','_abstractsettings.class.php',446],['blogs/inc/plugins/model','_pluginusersettings.class.php',82],['blogs/inc/users/model','_user.class.php',1861],['blogs/inc/generic/model','_genericcategory.class.php',100],['blogs/inc/tools/model','_emailaddress.class.php',85],['blogs/inc/users/model','_usersettings.class.php',187],['blogs/inc/regional/model','_country.class.php',106],['blogs/inc/comments/model','_comment.class.php',315],['blogs/inc/users/model','_groupsettings.class.php',140],['blogs/inc/cron/model','_cronjob.class.php',79],['blogs/inc/items/model','_item.class.php',4497],['blogs/inc/files/model','_filetype.class.php',149],['blogs/inc/users/model','_userfieldgroup.class.php',92],['blogs/inc/sessions/model','_session.class.php',420],['blogs/plugins','_calendar.plugin.php',530],['blogs/inc/slugs/model','_slug.class.php',80],['blogs/inc/regional/model','_currency.class.php',96],['blogs/inc/messaging/model','_thread.class.php',185],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',614],['blogs/inc/regional/model','_subregion.class.php',119],['blogs/inc/antispam/model','_iprange.class.php',81],['blogs/inc/sessions/model','_goal.class.php',199]], 1121],
'vote_helpful': ['vote_helpful', 'Display links to vote a comment as HELPFUL if user is logged ', [['blogs/inc/comments/model','_comment.class.php',1710]], 1],
'dbsave': ['dbsave', 'Updates session data in database. ', [['blogs/inc/sessions/model','_session.class.php',472],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',309]], 49],
'get_crumb': ['get_crumb', 'Get crumb via {@link $Session}. ', [['blogs/inc/_core','_url.funcs.php',591]], 16],
'check_create_thread_limit': ['check_create_thread_limit', 'Check if current User already reached his \'create new thread\' limit for today or not. Important: The current User messaging permission is not checked here! ', [['blogs/inc/messaging/model','_messaging.funcs.php',1336]], 7],
'get_author_url_link': ['get_author_url_link', 'Get link to comment author\'s provided URL ', [['blogs/inc/comments/model','_comment.class.php',1059]], 3],
'clear': ['clear', 'Clear the cache ', [['blogs/inc/files/model','_filerootcache.class.php',173],['blogs/inc/users/model','_usercache.class.php',368],['blogs/inc/_core/model','_log.class.php',99],['blogs/inc/_core/model','_log.class.php',603],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',454],['blogs/inc/links/model','_linkcache.class.php',530],['blogs/inc/chapters/model','_chaptercache.class.php',65],['blogs/inc/generic/model','_genericcategorycache.class.php',98],['blogs/inc/_core/model','_messages.class.php',109]], 97],
'get_row': ['get_row', 'Get one row from the DB. ', [['blogs/inc/_core/model/db','_db.class.php',996]], 57],
'switch_layout': ['switch_layout', '', [['blogs/inc/_core/ui/forms','_form.class.php',254]], 67],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['blogs/inc/locales','_pofile.class.php',267],['blogs/inc/_core/model/db','_db.class.php',503]], 791],
'get_avatar_imgtag': ['get_avatar_imgtag', 'Get avatar IMG tag. ', [['blogs/inc/users/model','_user.class.php',3618],['blogs/inc/users/model','_user.funcs.php',1332]], 18],
'check_setting': ['check_setting', 'Check a settings from user for Back office and from skin for Front office ', [['blogs/inc/users/model','_user.funcs.php',394]], 5],
'load_where': ['load_where', 'Load a set of objects into the cache. ', [['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',256]], 15],
'get_country_name': ['get_country_name', '', [['blogs/inc/users/model','_user.class.php',1447]], 6],
'load_funcs': ['load_funcs', '', [['blogs/inc/_core','_misc.funcs.php',115]], 214],
'link_vote': ['link_vote', 'Save a vote for the link of file by user ', [['blogs/inc/links/model','_link.funcs.php',397]], 1],
'get': ['get', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',941],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15011],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/media/js','media.js',7],['blogs/inc/links/model','_linkowner.class.php',221],['blogs/inc/_core/model/db','_sql.class.php',64],['blogs/inc/plugins/model','_pluginsettings.class.php',58],['blogs/inc/collections/model','_blog.class.php',1822],['blogs/inc/settings/model','_generalsettings.class.php',383],['blogs/inc/settings/model','_abstractsettings.class.php',271],['blogs/inc/plugins/model','_pluginusersettings.class.php',58],['blogs/inc/users/model','_user.class.php',1126],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_gzip.js',38],['blogs/inc/users/model','_usersettings.class.php',151],['blogs/inc/comments/model','_comment.class.php',301],['blogs/inc/users/model','_groupsettings.class.php',124],['blogs/inc/cron/model','_cronjob.class.php',104],['blogs/inc/items/model','_item.class.php',5742],['blogs/inc/sessions/model','_session.class.php',397],['blogs/inc/links/model','_linkuser.class.php',141],['blogs/inc/links/model','_linkitem.class.php',155],['blogs/inc/slugs/model','_slug.class.php',68],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',574],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['blogs/inc/antispam/model','_iprange.class.php',69],['blogs/inc/links/model','_linkcomment.class.php',132],['blogs/inc/files/model','_file.class.php',532]], 2417],
'get_author_name': ['get_author_name', 'Get the comment author\'s name. ', [['blogs/inc/comments/model','_comment.class.php',640]], 11],
'get_identity_link': ['get_identity_link', 'Get User identity link, which is a composite of user avatar and login, both point to the specific user profile tab. ', [['blogs/inc/users/model','_user.class.php',1306]], 27],
'get_full_path': ['get_full_path', 'Get the full path (directory and name) to the file. ', [['blogs/inc/files/model','_file.class.php',615]], 44],
'display': ['display', 'Display the widget! ', [['blogs/inc/widgets/widgets','_menu_link.widget.php',207],['blogs/inc/widgets/widgets','_msg_menu_link.widget.php',183],['blogs/inc/widgets/widgets','_coll_title.widget.php',80],['blogs/inc/widgets/widgets','_coll_tagline.widget.php',80],['blogs/inc/widgets/widgets','_user_login.widget.php',196],['blogs/inc/widgets/widgets','_online_users.widget.php',96],['blogs/inc/widgets/widgets','_free_html.widget.php',111],['blogs/inc/_core/model/db','_sql.class.php',81],['blogs/inc/widgets/widgets','_coll_common_links.widget.php',168],['blogs/inc/widgets/widgets','_coll_media_index.widget.php',169],['blogs/inc/widgets/widgets','_coll_item_list.widget.php',238],['blogs/inc/widgets/model','_widget.class.php',453],['blogs/inc/widgets/widgets','_coll_longdesc.widget.php',100],['blogs/inc/_core/model','_log.class.php',292],['blogs/inc/_core/model','_log.class.php',618],['blogs/inc/widgets/widgets','_mobile_skin_switcher.widget.php',106],['blogs/inc/_core/ui/results','_results.class.php',880],['blogs/inc/widgets/widgets','_coll_search_form.widget.php',115],['blogs/inc/widgets/widgets','_coll_xml_feeds.widget.php',121],['blogs/inc/widgets/widgets','_coll_category_list.widget.php',145],['blogs/plugins','_calendar.plugin.php',536],['blogs/inc/widgets/widgets','_user_avatars.widget.php',144],['blogs/inc/widgets/widgets','_coll_logo.widget.php',109],['blogs/inc/widgets/widgets','_colls_list_public.widget.php',122],['blogs/inc/widgets/widgets','_user_tools.widget.php',252],['blogs/inc/widgets/widgets','_coll_tag_cloud.widget.php',157],['blogs/inc/widgets/widgets','_coll_featured_intro.widget.php',147],['blogs/inc/widgets/widgets','_colls_list_owner.widget.php',122],['blogs/inc/widgets/widgets','_coll_comment_list.widget.php',129],['blogs/inc/_core/model','_messages.class.php',190],['blogs/inc/widgets/widgets','_coll_avatar.widget.php',94]], 107],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['blogs/inc/_core','_param.funcs.php',1673],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',630]], 111],
'get_next_status': ['get_next_status', 'Get next status to publish/restrict to this comment ', [['blogs/inc/comments/model','_comment.class.php',1792],['blogs/inc/items/model','_item.class.php',3720]], 12],
'on': ['on', '', [['blogs/rsc/js/bootstrap','typeahead.bundle.js',739]], 153],
'get_cities_option_list': ['get_cities_option_list', 'Get option list with cities by country, region or subregion ', [['blogs/inc/regional/model','_regional.funcs.php',173]], 6],
'call_user_func': ['call_user_func', '', [], 10],
'dirname': ['dirname', '', [], 186],
'nl2br': ['nl2br', '', [], 17],
'preg_match': ['preg_match', '', [], 363],
'in_array': ['in_array', '', [], 335],
'file_exists': ['file_exists', '', [], 121],
'implode': ['implode', '', [], 456],
'str_replace': ['str_replace', '', [], 403],
'preg_replace': ['preg_replace', '', [], 281],
'strpos': ['strpos', '', [], 280],
'is_null': ['is_null', '', [], 251]};
CLASS_DATA={
'sql': ['sql', 'SQL class: help constructing queries ', [['blogs/inc/_core/model/db','_sql.class.php',32]], 273],
'log': ['log', 'Log class. Logs notes and errors. ', [['blogs/inc/_core/model','_log.class.php',41]], 9],
'form': ['form', 'Form class ', [['blogs/inc/_core/ui/forms','_form.class.php',53]], 181],
'adminui': ['adminui', 'We\'ll use the default AdminUI templates etc. ', [['blogs/skins_adm/evo','_adminUI.class.php',35],['blogs/skins_adm/chicago','_adminUI.class.php',36],['blogs/skins_adm/bootstrap','_adminUI.class.php',35]], 7]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Jul  5 12:18:44 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
