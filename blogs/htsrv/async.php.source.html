<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /blogs/htsrv/async.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Jul  5 12:18:44 2014 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='blogs/htsrv';
filename='async.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/blogs/htsrv/</a> -> <a href="async.php.html">async.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="async.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="async.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This is the handler for asynchronous 'AJAX' calls.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link http://sourceforge.net/projects/evocms/}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * fp&gt; TODO: it would be better to have the code for the actions below part of the controllers they belong to.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * This would require some refectoring but would be better for maintenance and code clarity.</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> *</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * @copyright (c)2003-2014 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * {@internal License choice</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * - If you have received this file as part of a package, please find the license.txt file in</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> *   the same folder or the closest folder above for complete license terms.</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> * - If you have received this file individually (e-g: from http://evocms.cvs.sourceforge.net/)</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> *   then you must choose one of the following licenses before using the file:</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> *   - GNU General Public License 2 (GPL) - http://www.opensource.org/licenses/gpl-license.php</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *   - Mozilla Public License 1.1 (MPL) - http://www.opensource.org/licenses/mozilla1.1.php</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * }}</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * {@internal Open Source relicensing agreement:</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * }}</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> *</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @package evocore</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> *</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * @version $Id: async.php 6411 2014-04-07 15:17:33Z yura $</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> */</span>
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Do the MAIN initializations:</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> */</span>
<a name="l34"><span class="linenum">  34</span></a>  require_once <a class="phpfunction" onClick="logFunction('dirname')" href="../../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__).'/../conf/_config.php';
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * HEAVY :(</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> *</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @todo dh&gt; refactor _main.inc.php to be able to include small parts</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> *           (e.g. $current_User, charset init, ...) only..</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> *           It worked already for $DB (_connect_db.inc.php).</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * fp&gt; I think I'll try _core_main.inc , _evo_main.inc , _blog_main.inc ; this file would only need _core_main.inc</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> */</span>
<a name="l44"><span class="linenum">  44</span></a>  require_once <a class="var it246" onMouseOver="hilite(246)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../_variables/inc_path.html">$inc_path</a>.'_main.inc.php';
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">// create global $blog variable</span>
<a name="l47"><span class="linenum">  47</span></a>  global <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>;
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">// Init $blog with NULL to avoid injections, it will get the correct value from param where it is required</span>
<a name="l49"><span class="linenum">  49</span></a>  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> = NULL;
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>  <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'action', 'string', '' );
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">// Check global permission:</span>
<a name="l54"><span class="linenum">  54</span></a>  if( empty(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>) || ! <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) )
<a name="l55"><span class="linenum">  55</span></a>  {    // No permission to access admin...
<a name="l56"><span class="linenum">  56</span></a>      require <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>.'_access_denied.main.php';
<a name="l57"><span class="linenum">  57</span></a>  }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">// Make sure the async responses are never cached:</span>
<a name="l60"><span class="linenum">  60</span></a>  <a class="function" onClick="logFunction('header_nocache')" href="../../_functions/header_nocache.html" onMouseOver="funcPopup(event,'header_nocache')">header_nocache</a>();
<a name="l61"><span class="linenum">  61</span></a>  <a class="function" onClick="logFunction('header_content_type')" href="../../_functions/header_content_type.html" onMouseOver="funcPopup(event,'header_content_type')">header_content_type</a>( 'text/html', <a class="var it616" onMouseOver="hilite(616)" onMouseOut="lolite()" onClick="logVariable('io_charset')" href="../../_variables/io_charset.html">$io_charset</a> );
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">// Save current debug values</span>
<a name="l64"><span class="linenum">  64</span></a>  <a class="var it2846" onMouseOver="hilite(2846)" onMouseOut="lolite()" onClick="logVariable('current_debug')" href="../../_variables/current_debug.html">$current_debug</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a>;
<a name="l65"><span class="linenum">  65</span></a>  <a class="var it2847" onMouseOver="hilite(2847)" onMouseOut="lolite()" onClick="logVariable('current_debug_jslog')" href="../../_variables/current_debug_jslog.html">$current_debug_jslog</a> = <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('debug_jslog')" href="../../_variables/debug_jslog.html">$debug_jslog</a>;
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">// Do not append Debuglog to response!</span>
<a name="l68"><span class="linenum">  68</span></a>  <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a> = false;
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">// Do not append Debug JSlog to response!</span>
<a name="l71"><span class="linenum">  71</span></a>  <a class="var it2003" onMouseOver="hilite(2003)" onMouseOut="lolite()" onClick="logVariable('debug_jslog')" href="../../_variables/debug_jslog.html">$debug_jslog</a> = false;
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">// Init AJAX log</span>
<a name="l74"><span class="linenum">  74</span></a>  <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Log')" href="../../_classes/log.html" onMouseOver="classPopup(event,'log')">Log</a>();
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('action: %s'), <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> ), 'note' );
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>  <a class="var it8341" onMouseOver="hilite(8341)" onMouseOut="lolite()" onClick="logVariable('incorrect_action')" href="../../_variables/incorrect_action.html">$incorrect_action</a> = false;
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <a class="var it8342" onMouseOver="hilite(8342)" onMouseOut="lolite()" onClick="logVariable('add_response_end_comment')" href="../../_variables/add_response_end_comment.html">$add_response_end_comment</a> = true;
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">// fp&gt; Does the following have an HTTP fallback when Javascript/AJ is not available?</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">// dh&gt; yes, but not through this file..</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">// dh&gt; IMHO it does not make sense to let the &quot;normal controller&quot; handle the AJAX call</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">//     if there's something lightweight like calling &quot;$UserSettings-&gt;param_Request()&quot;!</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">//     Hmm.. bad example (but valid). Better example: something like the actions below, which</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">//     output only a small part of what the &quot;real controller&quot; does..</span>
<a name="l88"><span class="linenum">  88</span></a>  switch( <a class="var it225" onMouseOver="hilite(225)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> )
<a name="l89"><span class="linenum">  89</span></a>  {
<a name="l90"><span class="linenum">  90</span></a>      case 'add_plugin_sett_set':
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">        // Dislay a new Plugin(User)Settings set ( it's used only from plugins with &quot;array&quot; type settings):</span>
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">        // This does not require CSRF because it doesn't update the db, it only displays a new block of empty plugin setting fields</span>
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">        // Check permission to view plugin settings:</span>
<a name="l96"><span class="linenum">  96</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'options', 'view', true );
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'plugin_ID', 'integer', true );
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it1968" onMouseOver="hilite(1968)" onMouseOut="lolite()" onClick="logVariable('admin_Plugins')" href="../../_variables/admin_Plugins.html">$admin_Plugins</a> = &amp; get_Plugins_admin(); <span class="comment">// use Plugins_admin, because a plugin might be disabled</span>
<a name="l101"><span class="linenum"> 101</span></a>          <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../_variables/Plugin.html">$Plugin</a> = &amp; <a class="var it1968" onMouseOver="hilite(1968)" onMouseOut="lolite()" onClick="logVariable('admin_Plugins')" href="../../_variables/admin_Plugins.html">$admin_Plugins</a>-&gt;get_by_ID(<a class="var it2372" onMouseOver="hilite(2372)" onMouseOut="lolite()" onClick="logVariable('plugin_ID')" href="../../_variables/plugin_ID.html">$plugin_ID</a>);
<a name="l102"><span class="linenum"> 102</span></a>          if( ! <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../_variables/Plugin.html">$Plugin</a> )
<a name="l103"><span class="linenum"> 103</span></a>          {
<a name="l104"><span class="linenum"> 104</span></a>              <a class="function" onClick="logFunction('bad_request_die')" href="../../_functions/bad_request_die.html" onMouseOver="funcPopup(event,'bad_request_die')">bad_request_die</a>('Invalid Plugin.');
<a name="l105"><span class="linenum"> 105</span></a>          }
<a name="l106"><span class="linenum"> 106</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'set_type', 'string', '' ); <span class="comment">// &quot;Settings&quot; or &quot;UserSettings&quot;</span>
<a name="l107"><span class="linenum"> 107</span></a>          if( <a class="var it8222" onMouseOver="hilite(8222)" onMouseOut="lolite()" onClick="logVariable('set_type')" href="../../_variables/set_type.html">$set_type</a> != 'Settings' <span class="comment">/* &amp;&amp; $set_type != 'UserSettings' */</span> )
<a name="l108"><span class="linenum"> 108</span></a>          {
<a name="l109"><span class="linenum"> 109</span></a>              <a class="function" onClick="logFunction('bad_request_die')" href="../../_functions/bad_request_die.html" onMouseOver="funcPopup(event,'bad_request_die')">bad_request_die</a>('Invalid set_type param!');
<a name="l110"><span class="linenum"> 110</span></a>          }
<a name="l111"><span class="linenum"> 111</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'set_path', '/^\w+(?:\[\w+\])+$/', '' );
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('plugins/_plugin.funcs.php');
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">        // Init the new setting set:</span>
<a name="l116"><span class="linenum"> 116</span></a>          <a class="function" onClick="logFunction('_set_setting_by_path')" href="../../_functions/_set_setting_by_path.html" onMouseOver="funcPopup(event,'_set_setting_by_path')">_set_setting_by_path</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../_variables/Plugin.html">$Plugin</a>, <a class="var it8222" onMouseOver="hilite(8222)" onMouseOut="lolite()" onClick="logVariable('set_type')" href="../../_variables/set_type.html">$set_type</a>, <a class="var it2373" onMouseOver="hilite(2373)" onMouseOut="lolite()" onClick="logVariable('set_path')" href="../../_variables/set_path.html">$set_path</a>, array() );
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">        // Get the new plugin setting set and display it with a fake Form</span>
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('get_plugin_settings_node_by_path')" href="../../_functions/get_plugin_settings_node_by_path.html" onMouseOver="funcPopup(event,'get_plugin_settings_node_by_path')">get_plugin_settings_node_by_path</a>( <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../_variables/Plugin.html">$Plugin</a>, <a class="var it8222" onMouseOver="hilite(8222)" onMouseOut="lolite()" onClick="logVariable('set_type')" href="../../_variables/set_type.html">$set_type</a>, <a class="var it2373" onMouseOver="hilite(2373)" onMouseOut="lolite()" onClick="logVariable('set_path')" href="../../_variables/set_path.html">$set_path</a>, <span class="comment">/* create: */</span> false );
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>(); <span class="comment">// fake Form to display plugin setting</span>
<a name="l122"><span class="linenum"> 122</span></a>          <a class="function" onClick="logFunction('autoform_display_field')" href="../../_functions/autoform_display_field.html" onMouseOver="funcPopup(event,'autoform_display_field')">autoform_display_field</a>( <a class="var it2373" onMouseOver="hilite(2373)" onMouseOut="lolite()" onClick="logVariable('set_path')" href="../../_variables/set_path.html">$set_path</a>, <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>['set_meta'], <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>, <a class="var it8222" onMouseOver="hilite(8222)" onMouseOut="lolite()" onClick="logVariable('set_type')" href="../../_variables/set_type.html">$set_type</a>, <a class="var it351" onMouseOver="hilite(351)" onMouseOut="lolite()" onClick="logVariable('Plugin')" href="../../_variables/Plugin.html">$Plugin</a>, NULL, <a class="var it65" onMouseOver="hilite(65)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>['set_node'] );
<a name="l123"><span class="linenum"> 123</span></a>          break;
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>      case 'set_object_link_position':
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">        // Change a position of a link on the edit item screen (fieldset &quot;Images &amp; Attachments&quot;)</span>
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'link' );
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">        // Check item/comment edit permission below after we have the $LinkOwner object ( we call LinkOwner-&gt;check_perm ... )</span>
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('link_ID', 'integer', true);
<a name="l134"><span class="linenum"> 134</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('link_position', 'string', true);
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('LinkCache')" href="../../_variables/LinkCache.html">$LinkCache</a> = &amp; get_LinkCache();
<a name="l137"><span class="linenum"> 137</span></a>          if( ( <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a> = &amp; <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('LinkCache')" href="../../_variables/LinkCache.html">$LinkCache</a>-&gt;get_by_ID( <a class="var it930" onMouseOver="hilite(930)" onMouseOut="lolite()" onClick="logVariable('link_ID')" href="../../_variables/link_ID.html">$link_ID</a> ) ) === false )
<a name="l138"><span class="linenum"> 138</span></a>          {    // Bad request with incorrect link ID
<a name="l139"><span class="linenum"> 139</span></a>              echo '';
<a name="l140"><span class="linenum"> 140</span></a>              exit(0);
<a name="l141"><span class="linenum"> 141</span></a>          }
<a name="l142"><span class="linenum"> 142</span></a>          <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../_variables/LinkOwner.html">$LinkOwner</a> = &amp; <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a>-&gt;get_LinkOwner();
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">        // Check permission:</span>
<a name="l145"><span class="linenum"> 145</span></a>          <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'edit', true );
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>          if( <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'position', <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('link_position')" href="../../_variables/link_position.html">$link_position</a> ) &amp;&amp; <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>() )
<a name="l148"><span class="linenum"> 148</span></a>          { // update was successful
<a name="l149"><span class="linenum"> 149</span></a>              echo 'OK';
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">            // Update last touched date of Owners</span>
<a name="l152"><span class="linenum"> 152</span></a>              <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>();
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>              if( <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('link_position')" href="../../_variables/link_position.html">$link_position</a> == 'albumart' &amp;&amp; <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a onClick="logVariable('type')" class="var it9043" onMouseOver="hilite(9043)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> == 'item' )
<a name="l155"><span class="linenum"> 155</span></a>              { // Position &quot;Album Art&quot; can be used only by one link
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">              // Replace previous position with &quot;Inline&quot;</span>
<a name="l157"><span class="linenum"> 157</span></a>                  <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_links
<a name="l158"><span class="linenum"> 158</span></a>                          SET link_position = &quot;aftermore&quot;
<a name="l159"><span class="linenum"> 159</span></a>                      WHERE link_ID != '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it930" onMouseOver="hilite(930)" onMouseOut="lolite()" onClick="logVariable('link_ID')" href="../../_variables/link_ID.html">$link_ID</a> ).'
<a name="l160"><span class="linenum"> 160</span></a>                          AND link_itm_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a onClick="logVariable('Item')" class="var it9043" onMouseOver="hilite(9043)" onMouseOut="lolite()" href="../../_variables/Item.html">Item</a>-&gt;ID ).'
<a name="l161"><span class="linenum"> 161</span></a>                          AND link_position = &quot;albumart&quot;' );
<a name="l162"><span class="linenum"> 162</span></a>              }
<a name="l163"><span class="linenum"> 163</span></a>          }
<a name="l164"><span class="linenum"> 164</span></a>          else
<a name="l165"><span class="linenum"> 165</span></a>          { // return the current value on failure
<a name="l166"><span class="linenum"> 166</span></a>              echo <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'position' );
<a name="l167"><span class="linenum"> 167</span></a>          }
<a name="l168"><span class="linenum"> 168</span></a>          break;
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>      case 'get_login_list':
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">        // Get users login list for username form field hintbox.</span>
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">        // current user must have at least view permission to see users login</span>
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'users', 'view', true );
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // What users return: </span>
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it8343" onMouseOver="hilite(8343)" onMouseOut="lolite()" onClick="logVariable('user_type')" href="../../_variables/user_type.html">$user_type</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_type', 'string', '' );
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('urldecode')" href="../../_functions/urldecode.html" onMouseOver="phpfuncPopup(event,'urldecode')">urldecode</a>( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'q', 'string', '' ) ) );
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>          <span class="comment">/**</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">         * sam2kb&gt; The code below decodes percent-encoded unicode string produced by Javascript &quot;escape&quot;</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">         * function in format %uxxxx where xxxx is a Unicode value represented as four hexadecimal digits.</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">         * Example string &quot;MAMA&quot; (cyrillic letters) encoded with &quot;escape&quot;: %u041C%u0410%u041C%u0410</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">         * Same word encoded with &quot;encodeURI&quot;: %D0%9C%D0%90%D0%9C%D0%90</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">         *</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">         * jQuery hintbox plugin uses &quot;escape&quot; function to encode URIs</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">         *</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">         * More info here: http://en.wikipedia.org/wiki/Percent-encoding#Non-standard_implementations</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">         */</span>
<a name="l191"><span class="linenum"> 191</span></a>          if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~%u[0-9a-f]{3,4}~i', <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('version_compare')" href="../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(PHP_VERSION, '5', '&gt;=') )
<a name="l192"><span class="linenum"> 192</span></a>          {    // Decode UTF-8 string (PHP 5 and up)
<a name="l193"><span class="linenum"> 193</span></a>              <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~%u([0-9a-f]{3,4})~i', '&amp;#x\\1;', <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> );
<a name="l194"><span class="linenum"> 194</span></a>              <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('evo_html_entity_decode')" href="../../_functions/evo_html_entity_decode.html" onMouseOver="funcPopup(event,'evo_html_entity_decode')">evo_html_entity_decode</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, ENT_COMPAT, 'UTF-8' );
<a name="l195"><span class="linenum"> 195</span></a>          }
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>          if( !empty( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> ) )
<a name="l198"><span class="linenum"> 198</span></a>          {
<a name="l199"><span class="linenum"> 199</span></a>              switch( <a class="var it8343" onMouseOver="hilite(8343)" onMouseOut="lolite()" onClick="logVariable('user_type')" href="../../_variables/user_type.html">$user_type</a> )
<a name="l200"><span class="linenum"> 200</span></a>              {
<a name="l201"><span class="linenum"> 201</span></a>                  case 'assignees':
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">                    // Get only the assignees of this blog:</span>
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>                      <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog', 'integer', true );
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">                    // Get users which are assignees of the blog:</span>
<a name="l207"><span class="linenum"> 207</span></a>                      <a class="var it2301" onMouseOver="hilite(2301)" onMouseOut="lolite()" onClick="logVariable('user_perms_SQL')" href="../../_variables/user_perms_SQL.html">$user_perms_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l208"><span class="linenum"> 208</span></a>                      <a class="var it2301" onMouseOver="hilite(2301)" onMouseOut="lolite()" onClick="logVariable('user_perms_SQL')" href="../../_variables/user_perms_SQL.html">$user_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_login' );
<a name="l209"><span class="linenum"> 209</span></a>                      <a class="var it2301" onMouseOver="hilite(2301)" onMouseOut="lolite()" onClick="logVariable('user_perms_SQL')" href="../../_variables/user_perms_SQL.html">$user_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_users' );
<a name="l210"><span class="linenum"> 210</span></a>                      <a class="var it2301" onMouseOver="hilite(2301)" onMouseOut="lolite()" onClick="logVariable('user_perms_SQL')" href="../../_variables/user_perms_SQL.html">$user_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_coll_user_perms ON user_ID = bloguser_user_ID' );
<a name="l211"><span class="linenum"> 211</span></a>                      <a class="var it2301" onMouseOver="hilite(2301)" onMouseOut="lolite()" onClick="logVariable('user_perms_SQL')" href="../../_variables/user_perms_SQL.html">$user_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'user_login LIKE &quot;'.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('escape')" href="../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> ).'%&quot;' );
<a name="l212"><span class="linenum"> 212</span></a>                      <a class="var it2301" onMouseOver="hilite(2301)" onMouseOut="lolite()" onClick="logVariable('user_perms_SQL')" href="../../_variables/user_perms_SQL.html">$user_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'bloguser_blog_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> ) );
<a name="l213"><span class="linenum"> 213</span></a>                      <a class="var it2301" onMouseOver="hilite(2301)" onMouseOut="lolite()" onClick="logVariable('user_perms_SQL')" href="../../_variables/user_perms_SQL.html">$user_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'bloguser_can_be_assignee &lt;&gt; 0' );
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">                    // Get users which groups are assignees of the blog:</span>
<a name="l216"><span class="linenum"> 216</span></a>                      <a class="var it2302" onMouseOver="hilite(2302)" onMouseOut="lolite()" onClick="logVariable('group_perms_SQL')" href="../../_variables/group_perms_SQL.html">$group_perms_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l217"><span class="linenum"> 217</span></a>                      <a class="var it2302" onMouseOver="hilite(2302)" onMouseOut="lolite()" onClick="logVariable('group_perms_SQL')" href="../../_variables/group_perms_SQL.html">$group_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_login' );
<a name="l218"><span class="linenum"> 218</span></a>                      <a class="var it2302" onMouseOver="hilite(2302)" onMouseOut="lolite()" onClick="logVariable('group_perms_SQL')" href="../../_variables/group_perms_SQL.html">$group_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_users' );
<a name="l219"><span class="linenum"> 219</span></a>                      <a class="var it2302" onMouseOver="hilite(2302)" onMouseOut="lolite()" onClick="logVariable('group_perms_SQL')" href="../../_variables/group_perms_SQL.html">$group_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_coll_group_perms ON user_grp_ID = bloggroup_group_ID' );
<a name="l220"><span class="linenum"> 220</span></a>                      <a class="var it2302" onMouseOver="hilite(2302)" onMouseOut="lolite()" onClick="logVariable('group_perms_SQL')" href="../../_variables/group_perms_SQL.html">$group_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'user_login LIKE &quot;'.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('escape')" href="../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> ).'%&quot;' );
<a name="l221"><span class="linenum"> 221</span></a>                      <a class="var it2302" onMouseOver="hilite(2302)" onMouseOut="lolite()" onClick="logVariable('group_perms_SQL')" href="../../_variables/group_perms_SQL.html">$group_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'bloggroup_blog_ID = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> ) );
<a name="l222"><span class="linenum"> 222</span></a>                      <a class="var it2302" onMouseOver="hilite(2302)" onMouseOut="lolite()" onClick="logVariable('group_perms_SQL')" href="../../_variables/group_perms_SQL.html">$group_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'bloggroup_can_be_assignee &lt;&gt; 0' );
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">                    // Union two sql queries to execute one query and save an order as one list</span>
<a name="l225"><span class="linenum"> 225</span></a>                      <a class="var it2303" onMouseOver="hilite(2303)" onMouseOut="lolite()" onClick="logVariable('users_sql')" href="../../_variables/users_sql.html">$users_sql</a> = '( '.<a class="var it2301" onMouseOver="hilite(2301)" onMouseOut="lolite()" onClick="logVariable('user_perms_SQL')" href="../../_variables/user_perms_SQL.html">$user_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>().' )'
<a name="l226"><span class="linenum"> 226</span></a>                          .' UNION '
<a name="l227"><span class="linenum"> 227</span></a>                          .'( '.<a class="var it2302" onMouseOver="hilite(2302)" onMouseOut="lolite()" onClick="logVariable('group_perms_SQL')" href="../../_variables/group_perms_SQL.html">$group_perms_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>().' )'
<a name="l228"><span class="linenum"> 228</span></a>                          .' ORDER BY user_login'
<a name="l229"><span class="linenum"> 229</span></a>                          .' LIMIT 10';
<a name="l230"><span class="linenum"> 230</span></a>                      break;
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>                  default:
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">                    // Get all users:</span>
<a name="l234"><span class="linenum"> 234</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l235"><span class="linenum"> 235</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_login' );
<a name="l236"><span class="linenum"> 236</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_users' );
<a name="l237"><span class="linenum"> 237</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'user_login LIKE &quot;'.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('escape')" href="../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> ).'%&quot;' );
<a name="l238"><span class="linenum"> 238</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('LIMIT')" href="../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">LIMIT</a>( '10' );
<a name="l239"><span class="linenum"> 239</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('ORDER_BY')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">ORDER_BY</a>('user_login');
<a name="l240"><span class="linenum"> 240</span></a>                      <a class="var it2303" onMouseOver="hilite(2303)" onMouseOut="lolite()" onClick="logVariable('users_sql')" href="../../_variables/users_sql.html">$users_sql</a> = <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>();
<a name="l241"><span class="linenum"> 241</span></a>                      break;
<a name="l242"><span class="linenum"> 242</span></a>              }
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>              <a class="var it5392" onMouseOver="hilite(5392)" onMouseOut="lolite()" onClick="logVariable('user_logins')" href="../../_variables/user_logins.html">$user_logins</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it2303" onMouseOver="hilite(2303)" onMouseOut="lolite()" onClick="logVariable('users_sql')" href="../../_variables/users_sql.html">$users_sql</a> );
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>              echo <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( &quot;\n&quot;, <a class="var it5392" onMouseOver="hilite(5392)" onMouseOut="lolite()" onClick="logVariable('user_logins')" href="../../_variables/user_logins.html">$user_logins</a> );
<a name="l247"><span class="linenum"> 247</span></a>          }
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">        // don't show ajax response end comment, because the result will be processed with jquery hintbox</span>
<a name="l250"><span class="linenum"> 250</span></a>          <a class="var it8342" onMouseOver="hilite(8342)" onMouseOut="lolite()" onClick="logVariable('add_response_end_comment')" href="../../_variables/add_response_end_comment.html">$add_response_end_comment</a> = false;
<a name="l251"><span class="linenum"> 251</span></a>          break;
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>      case 'get_opentrash_link':
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">        // Used to get a link 'Open recycle bin' in order to show it in the header of comments list</span>
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l257"><span class="linenum"> 257</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog', 'integer', 0 );
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>          echo <a class="function" onClick="logFunction('get_opentrash_link')" href="../../_functions/get_opentrash_link.html" onMouseOver="funcPopup(event,'get_opentrash_link')">get_opentrash_link</a>( true, true );
<a name="l262"><span class="linenum"> 262</span></a>          break;
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>      case 'set_comment_status':
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">        // Used for quick moderation of comments in dashboard, item list full view and comment list screens</span>
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l268"><span class="linenum"> 268</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">        // Check comment moderate permission below after we have the $edited_Comment object</span>
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>          <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l273"><span class="linenum"> 273</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blogid', 'integer' );
<a name="l274"><span class="linenum"> 274</span></a>          <a class="var it8344" onMouseOver="hilite(8344)" onMouseOut="lolite()" onClick="logVariable('moderation')" href="../../_variables/moderation.html">$moderation</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'moderation', 'string', NULL );
<a name="l275"><span class="linenum"> 275</span></a>          <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'status', 'string' );
<a name="l276"><span class="linenum"> 276</span></a>          <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../_variables/expiry_status.html">$expiry_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'expiry_status', 'string', 'active' );
<a name="l277"><span class="linenum"> 277</span></a>          <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'limit', 'integer', 0 );
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'commentid', 'integer' ), false );
<a name="l279"><span class="linenum"> 279</span></a>          if( <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> !== false )
<a name="l280"><span class="linenum"> 280</span></a>          {    // The comment still exists
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">            // Check permission:</span>
<a name="l282"><span class="linenum"> 282</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!'.<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>, 'moderate', true, <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> );
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>              <a class="var it233" onMouseOver="hilite(233)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', NULL );
<a name="l285"><span class="linenum"> 285</span></a>  
<a name="l286"><span class="linenum"> 286</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> );
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">            // Comment moderation is done, handle moderation &quot;secret&quot;</span>
<a name="l288"><span class="linenum"> 288</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_qm_secret')" href="../../_functions/handle_qm_secret.html" onMouseOver="funcPopup(event,'handle_qm_secret')">handle_qm_secret</a>();
<a name="l289"><span class="linenum"> 289</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>              if( <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> == 'published' )
<a name="l292"><span class="linenum"> 292</span></a>              {
<a name="l293"><span class="linenum"> 293</span></a>                  <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_notifications')" href="../../_functions/handle_notifications.html" onMouseOver="funcPopup(event,'handle_notifications')">handle_notifications</a>();
<a name="l294"><span class="linenum"> 294</span></a>              }
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>              if( <a class="var it8344" onMouseOver="hilite(8344)" onMouseOut="lolite()" onClick="logVariable('moderation')" href="../../_variables/moderation.html">$moderation</a> != NULL )
<a name="l297"><span class="linenum"> 297</span></a>              {
<a name="l298"><span class="linenum"> 298</span></a>                  if( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'is_backoffice', 'integer', 0 ) )
<a name="l299"><span class="linenum"> 299</span></a>                  { // Set admin skin, used for buttons, @see <a class="function" onClick="logFunction('button_class')" href="../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>()
<a name="l300"><span class="linenum"> 300</span></a>                      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a>, <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>;
<a name="l301"><span class="linenum"> 301</span></a>                      <a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'admin_skin', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l302"><span class="linenum"> 302</span></a>                      <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l303"><span class="linenum"> 303</span></a>                      require_once <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>.<a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a>.'/_adminUI.class.php';
<a name="l304"><span class="linenum"> 304</span></a>                      <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a> = <span class="keyword">new </span><a class="class" onClick="logClass('AdminUI')" href="../../_classes/adminui.html" onMouseOver="classPopup(event,'adminui')">AdminUI</a>();
<a name="l305"><span class="linenum"> 305</span></a>                  }
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>                  <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'statuses', 'string', NULL );
<a name="l308"><span class="linenum"> 308</span></a>                  <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'itemid', 'integer' );
<a name="l309"><span class="linenum"> 309</span></a>                  <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'currentpage', 'integer', 1 );
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>                  if( strlen(<a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>) &gt; 2 )
<a name="l312"><span class="linenum"> 312</span></a>                  {
<a name="l313"><span class="linenum"> 313</span></a>                      <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>, 1, strlen(<a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>) - 2 );
<a name="l314"><span class="linenum"> 314</span></a>                  }
<a name="l315"><span class="linenum"> 315</span></a>                  <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> );
<a name="l316"><span class="linenum"> 316</span></a>                  if( <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> == NULL )
<a name="l317"><span class="linenum"> 317</span></a>                  {
<a name="l318"><span class="linenum"> 318</span></a>                      <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'keys', array( 'redirected', 'trash' ) );
<a name="l319"><span class="linenum"> 319</span></a>                  }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">                // In case of comments_fullview we must set a filterset name to be abble to restore filterset.</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">                // If $moderation is not NULL, then this requests came from the comments_fullview</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">                // TODO: asimo&gt; This should be handled with a better solution</span>
<a name="l324"><span class="linenum"> 324</span></a>                  <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('filterset_name')" href="../../_variables/filterset_name.html">$filterset_name</a> = ( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> &gt; 0 ) ? '' : 'fullview';
<a name="l325"><span class="linenum"> 325</span></a>                  if( <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a> == 0 )
<a name="l326"><span class="linenum"> 326</span></a>                  {
<a name="l327"><span class="linenum"> 327</span></a>                      <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'results_per_page' ); 
<a name="l328"><span class="linenum"> 328</span></a>                  }
<a name="l329"><span class="linenum"> 329</span></a>                  <a class="function" onClick="logFunction('echo_item_comments')" href="../../_functions/echo_item_comments.html" onMouseOver="funcPopup(event,'echo_item_comments')">echo_item_comments</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>, <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a>, <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a>, <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../_variables/currentpage.html">$currentpage</a>, <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, array(), <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('filterset_name')" href="../../_variables/filterset_name.html">$filterset_name</a>, <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../_variables/expiry_status.html">$expiry_status</a> );
<a name="l330"><span class="linenum"> 330</span></a>                  break;
<a name="l331"><span class="linenum"> 331</span></a>              }
<a name="l332"><span class="linenum"> 332</span></a>          }
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>          if( <a class="var it8344" onMouseOver="hilite(8344)" onMouseOut="lolite()" onClick="logVariable('moderation')" href="../../_variables/moderation.html">$moderation</a> == NULL )
<a name="l335"><span class="linenum"> 335</span></a>          {
<a name="l336"><span class="linenum"> 336</span></a>              <a class="function" onClick="logFunction('get_comments_awaiting_moderation')" href="../../_functions/get_comments_awaiting_moderation.html" onMouseOver="funcPopup(event,'get_comments_awaiting_moderation')">get_comments_awaiting_moderation</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l337"><span class="linenum"> 337</span></a>          }
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>          break;
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>      case 'delete_comment':
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">        // Delete a comment from dashboard screen</span>
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l345"><span class="linenum"> 345</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">        // Check comment moderate permission below after we have the $edited_Comment objects</span>
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>          <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l350"><span class="linenum"> 350</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blogid', 'integer' );
<a name="l351"><span class="linenum"> 351</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'commentid', 'integer' ), false );
<a name="l352"><span class="linenum"> 352</span></a>          if( <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> !== false )
<a name="l353"><span class="linenum"> 353</span></a>          {    // The comment still exists
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">            // Check permission:</span>
<a name="l355"><span class="linenum"> 355</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'delete', true, <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> );
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbdelete')" href="../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>();
<a name="l358"><span class="linenum"> 358</span></a>          }
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>          <a class="function" onClick="logFunction('get_comments_awaiting_moderation')" href="../../_functions/get_comments_awaiting_moderation.html" onMouseOver="funcPopup(event,'get_comments_awaiting_moderation')">get_comments_awaiting_moderation</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l361"><span class="linenum"> 361</span></a>          break;
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>      case 'delete_comments':
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">        // Delete the comments from the list on dashboard, on comments full text view screen or on a view item screen</span>
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l367"><span class="linenum"> 367</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">        // Check comment moderate permission below after we have the $edited_Comment objects</span>
<a name="l370"><span class="linenum"> 370</span></a>  
<a name="l371"><span class="linenum"> 371</span></a>          <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l372"><span class="linenum"> 372</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blogid', 'integer' );
<a name="l373"><span class="linenum"> 373</span></a>          <a class="var it8345" onMouseOver="hilite(8345)" onMouseOut="lolite()" onClick="logVariable('commentIds')" href="../../_variables/commentIds.html">$commentIds</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'commentIds', 'array' );
<a name="l374"><span class="linenum"> 374</span></a>          <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'statuses', 'string', NULL );
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../_variables/expiry_status.html">$expiry_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'expiry_status', 'string', 'active' );
<a name="l376"><span class="linenum"> 376</span></a>          <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'itemid', 'integer' );
<a name="l377"><span class="linenum"> 377</span></a>          <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'currentpage', 'integer', 1 );
<a name="l378"><span class="linenum"> 378</span></a>          <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'limit', 'integer', 0 );
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>          if( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'is_backoffice', 'integer', 0 ) )
<a name="l381"><span class="linenum"> 381</span></a>          { // Set admin skin, used for buttons, @see <a class="function" onClick="logFunction('button_class')" href="../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>()
<a name="l382"><span class="linenum"> 382</span></a>              global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a>, <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>;
<a name="l383"><span class="linenum"> 383</span></a>              <a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'admin_skin', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it8987" onMouseOver="hilite(8987)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l384"><span class="linenum"> 384</span></a>              <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l385"><span class="linenum"> 385</span></a>              require_once <a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('adminskins_path')" href="../../_variables/adminskins_path.html">$adminskins_path</a>.<a class="var it2863" onMouseOver="hilite(2863)" onMouseOut="lolite()" onClick="logVariable('admin_skin')" href="../../_variables/admin_skin.html">$admin_skin</a>.'/_adminUI.class.php';
<a name="l386"><span class="linenum"> 386</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a> = <span class="keyword">new </span><a class="class" onClick="logClass('AdminUI')" href="../../_classes/adminui.html" onMouseOver="classPopup(event,'adminui')">AdminUI</a>();
<a name="l387"><span class="linenum"> 387</span></a>          }
<a name="l388"><span class="linenum"> 388</span></a>  
<a name="l389"><span class="linenum"> 389</span></a>          foreach( <a class="var it8345" onMouseOver="hilite(8345)" onMouseOut="lolite()" onClick="logVariable('commentIds')" href="../../_variables/commentIds.html">$commentIds</a> as <a class="var it8346" onMouseOver="hilite(8346)" onMouseOut="lolite()" onClick="logVariable('commentID')" href="../../_variables/commentID.html">$commentID</a> )
<a name="l390"><span class="linenum"> 390</span></a>          {
<a name="l391"><span class="linenum"> 391</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="var it8346" onMouseOver="hilite(8346)" onMouseOut="lolite()" onClick="logVariable('commentID')" href="../../_variables/commentID.html">$commentID</a>, false );
<a name="l392"><span class="linenum"> 392</span></a>              if( <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> !== false )
<a name="l393"><span class="linenum"> 393</span></a>              { // The comment still exists
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">                // Check permission:</span>
<a name="l395"><span class="linenum"> 395</span></a>                  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'delete', true, <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> );
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>                  <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbdelete')" href="../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>();
<a name="l398"><span class="linenum"> 398</span></a>              }
<a name="l399"><span class="linenum"> 399</span></a>          }
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>          if( strlen(<a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>) &gt; 2 )
<a name="l402"><span class="linenum"> 402</span></a>          {
<a name="l403"><span class="linenum"> 403</span></a>              <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>, 1, strlen(<a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>) - 2 );
<a name="l404"><span class="linenum"> 404</span></a>          }
<a name="l405"><span class="linenum"> 405</span></a>          <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> );
<a name="l406"><span class="linenum"> 406</span></a>          if( <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> == NULL )
<a name="l407"><span class="linenum"> 407</span></a>          {
<a name="l408"><span class="linenum"> 408</span></a>              <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'keys', array( 'redirected', 'trash' ) );
<a name="l409"><span class="linenum"> 409</span></a>          }
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">        // In case of comments_fullview we must set a filterset name to be abble to restore filterset.</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">        // If $item_ID is not valid, then this requests came from the comments_fullview</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">        // TODO: asimo&gt; This should be handled with a better solution</span>
<a name="l414"><span class="linenum"> 414</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('filterset_name')" href="../../_variables/filterset_name.html">$filterset_name</a> = <span class="comment">/*'';*/</span>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> &gt; 0 ) ? '' : 'fullview';
<a name="l415"><span class="linenum"> 415</span></a>          if( <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a> == 0 )
<a name="l416"><span class="linenum"> 416</span></a>          {
<a name="l417"><span class="linenum"> 417</span></a>              <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'results_per_page' ); 
<a name="l418"><span class="linenum"> 418</span></a>          }
<a name="l419"><span class="linenum"> 419</span></a>          <a class="function" onClick="logFunction('echo_item_comments')" href="../../_functions/echo_item_comments.html" onMouseOver="funcPopup(event,'echo_item_comments')">echo_item_comments</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>, <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a>, <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a>, <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../_variables/currentpage.html">$currentpage</a>, <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, array(), <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('filterset_name')" href="../../_variables/filterset_name.html">$filterset_name</a>, <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../_variables/expiry_status.html">$expiry_status</a> );
<a name="l420"><span class="linenum"> 420</span></a>          break;
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>      case 'delete_comment_url':
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">        // Delete spam URL from a comment directly in the dashboard - comment remains otherwise untouched</span>
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l426"><span class="linenum"> 426</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">        // Check comment edit permission below after we have the $edited_Comment object</span>
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blogid', 'integer' );
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'commentid', 'integer' ), false );
<a name="l432"><span class="linenum"> 432</span></a>          if( <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> !== false &amp;&amp; <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('author_url')" class="var it9056" onMouseOver="hilite(9056)" onMouseOut="lolite()" href="../../_variables/author_url.html">author_url</a> != NULL )
<a name="l433"><span class="linenum"> 433</span></a>          {    // The comment still exists
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">            // Check permission:</span>
<a name="l435"><span class="linenum"> 435</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'edit', true, <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> );
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'author_url', NULL );
<a name="l438"><span class="linenum"> 438</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l439"><span class="linenum"> 439</span></a>          }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>          break;
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>      case 'refresh_comments':
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">        // Refresh the comments list on dashboard by clicking on the refresh icon or after ban url</span>
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l447"><span class="linenum"> 447</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>          <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l450"><span class="linenum"> 450</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blogid', 'integer' );
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">        // Check minimum permissions ( The comment specific permissions are checked when displaying the comments )</span>
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_ismember', 'view', true, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>          <a class="function" onClick="logFunction('get_comments_awaiting_moderation')" href="../../_functions/get_comments_awaiting_moderation.html" onMouseOver="funcPopup(event,'get_comments_awaiting_moderation')">get_comments_awaiting_moderation</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l455"><span class="linenum"> 455</span></a>          break;
<a name="l456"><span class="linenum"> 456</span></a>  
<a name="l457"><span class="linenum"> 457</span></a>      case 'refresh_item_comments':
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">        // Refresh item comments on the item view screen, or refresh all blog comments on comments view, if param itemid = -1</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">        // A refresh is used on the actions:</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">        // 1) click on the refresh icon.</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">        // 2) limit by selected status(radioboxes 'Draft', 'Published', 'All comments').</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">        // 3) ban by url of a comment</span>
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'items/model/_item.funcs.php' );
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l467"><span class="linenum"> 467</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blogid', 'integer' );
<a name="l468"><span class="linenum"> 468</span></a>          <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'itemid', 'integer', NULL );
<a name="l469"><span class="linenum"> 469</span></a>          <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'statuses', 'string', NULL );
<a name="l470"><span class="linenum"> 470</span></a>          <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../_variables/expiry_status.html">$expiry_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'expiry_status', 'string', 'active' );
<a name="l471"><span class="linenum"> 471</span></a>          <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'currentpage', 'string', 1 );
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">        // Check minimum permissions ( The comment specific permissions are checked when displaying the comments )</span>
<a name="l474"><span class="linenum"> 474</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_ismember', 'view', true, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>          if( strlen(<a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>) &gt; 2 )
<a name="l477"><span class="linenum"> 477</span></a>          {
<a name="l478"><span class="linenum"> 478</span></a>              <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>, 1, strlen(<a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a>) - 2 );
<a name="l479"><span class="linenum"> 479</span></a>          }
<a name="l480"><span class="linenum"> 480</span></a>          <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../_variables/statuses.html">$statuses</a> );
<a name="l481"><span class="linenum"> 481</span></a>          if( <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> == NULL )
<a name="l482"><span class="linenum"> 482</span></a>          { // init statuses
<a name="l483"><span class="linenum"> 483</span></a>              <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'keys', array( 'redirected', 'trash' ) );
<a name="l484"><span class="linenum"> 484</span></a>          }
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>          <a class="function" onClick="logFunction('echo_item_comments')" href="../../_functions/echo_item_comments.html" onMouseOver="funcPopup(event,'echo_item_comments')">echo_item_comments</a>( <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>, <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a>, <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('status_list')" href="../../_variables/status_list.html">$status_list</a>, <a class="var it3248" onMouseOver="hilite(3248)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../_variables/currentpage.html">$currentpage</a>, 20, array(), '', <a class="var it6818" onMouseOver="hilite(6818)" onMouseOut="lolite()" onClick="logVariable('expiry_status')" href="../../_variables/expiry_status.html">$expiry_status</a> );
<a name="l487"><span class="linenum"> 487</span></a>          break;
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>      case 'get_tags':
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">        // Get list of item tags, where $term is part of the tag name (sorted)</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">        // To be used for Tag autocompletion</span>
<a name="l492"><span class="linenum"> 492</span></a>  
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">        // Crumb check and permission check are not required because this won't modify anything and it returns public info</span>
<a name="l494"><span class="linenum"> 494</span></a>  
<a name="l495"><span class="linenum"> 495</span></a>          <a class="var it803" onMouseOver="hilite(803)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('term', 'string');
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( '
<a name="l498"><span class="linenum"> 498</span></a>              SELECT tag_name AS id, tag_name AS title
<a name="l499"><span class="linenum"> 499</span></a>                FROM T_items__tag
<a name="l500"><span class="linenum"> 500</span></a>               WHERE tag_name LIKE '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>('%'.<a class="var it803" onMouseOver="hilite(803)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a>.'%').'
<a name="l501"><span class="linenum"> 501</span></a>               ORDER BY tag_name', <a class="constant" onClick="logConstant('ARRAY_A')" href="../../_constants/ARRAY_A.html" onMouseOver="constPopup(event,'ARRAY_A')">ARRAY_A</a> );
<a name="l502"><span class="linenum"> 502</span></a>  
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">        // Check if current term is not an existing tag</span>
<a name="l504"><span class="linenum"> 504</span></a>          <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('term_is_new_tag')" href="../../_variables/term_is_new_tag.html">$term_is_new_tag</a> = true;
<a name="l505"><span class="linenum"> 505</span></a>          foreach( <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> as <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a> )
<a name="l506"><span class="linenum"> 506</span></a>          {
<a name="l507"><span class="linenum"> 507</span></a>              if( <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>['title'] == <a class="var it803" onMouseOver="hilite(803)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a> )
<a name="l508"><span class="linenum"> 508</span></a>              { // Current term is an existing tag
<a name="l509"><span class="linenum"> 509</span></a>                  <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('term_is_new_tag')" href="../../_variables/term_is_new_tag.html">$term_is_new_tag</a> = false;
<a name="l510"><span class="linenum"> 510</span></a>              }
<a name="l511"><span class="linenum"> 511</span></a>          }
<a name="l512"><span class="linenum"> 512</span></a>          if( <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('term_is_new_tag')" href="../../_variables/term_is_new_tag.html">$term_is_new_tag</a> )
<a name="l513"><span class="linenum"> 513</span></a>          {    // Add current term in the beginning of the tags list
<a name="l514"><span class="linenum"> 514</span></a>              <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>( <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>, array( 'id' =&gt; <a class="var it803" onMouseOver="hilite(803)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a>, 'title' =&gt; <a class="var it803" onMouseOver="hilite(803)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a> ) );
<a name="l515"><span class="linenum"> 515</span></a>          }
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>          echo <a class="function" onClick="logFunction('evo_json_encode')" href="../../_functions/evo_json_encode.html" onMouseOver="funcPopup(event,'evo_json_encode')">evo_json_encode</a>( <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> );
<a name="l518"><span class="linenum"> 518</span></a>          exit(0);
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>      case 'dom_type_edit':
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">        // Update type of a reffering domain from list screen by clicking on the type column</span>
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l524"><span class="linenum"> 524</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'domtype' );
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">        // Check permission:</span>
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'stats', 'edit', true );
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('sessions/model/_hitlog.funcs.php');
<a name="l530"><span class="linenum"> 530</span></a>  
<a name="l531"><span class="linenum"> 531</span></a>          <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('dom_type')" href="../../_variables/dom_type.html">$dom_type</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_dom_type', 'string' );
<a name="l532"><span class="linenum"> 532</span></a>          <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('dom_name')" href="../../_variables/dom_name.html">$dom_name</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'dom_name', 'string' );
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_basedomains
<a name="l535"><span class="linenum"> 535</span></a>                          SET dom_type = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('dom_type')" href="../../_variables/dom_type.html">$dom_type</a>).'
<a name="l536"><span class="linenum"> 536</span></a>                          WHERE dom_name =' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('dom_name')" href="../../_variables/dom_name.html">$dom_name</a>));
<a name="l537"><span class="linenum"> 537</span></a>          echo '&lt;a href=&quot;#&quot; rel=&quot;'.<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('dom_type')" href="../../_variables/dom_type.html">$dom_type</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('stats_dom_type_title')" href="../../_functions/stats_dom_type_title.html" onMouseOver="funcPopup(event,'stats_dom_type_title')">stats_dom_type_title</a>( <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('dom_type')" href="../../_variables/dom_type.html">$dom_type</a> ).'&lt;/a&gt;';
<a name="l538"><span class="linenum"> 538</span></a>          break;
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>      case 'dom_status_edit':
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment">        // Update status of a reffering domain from list screen by clicking on the type column</span>
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l544"><span class="linenum"> 544</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'domstatus' );
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">        // Check permission:</span>
<a name="l547"><span class="linenum"> 547</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'stats', 'edit', true );
<a name="l548"><span class="linenum"> 548</span></a>  
<a name="l549"><span class="linenum"> 549</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('sessions/model/_hitlog.funcs.php');
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>          <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('dom_status')" href="../../_variables/dom_status.html">$dom_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_dom_status', 'string' );
<a name="l552"><span class="linenum"> 552</span></a>          <a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('dom_name')" href="../../_variables/dom_name.html">$dom_name</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'dom_name', 'string' );
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_basedomains
<a name="l555"><span class="linenum"> 555</span></a>                          SET dom_status = '.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('dom_status')" href="../../_variables/dom_status.html">$dom_status</a>).'
<a name="l556"><span class="linenum"> 556</span></a>                          WHERE dom_name =' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it2047" onMouseOver="hilite(2047)" onMouseOut="lolite()" onClick="logVariable('dom_name')" href="../../_variables/dom_name.html">$dom_name</a>));
<a name="l557"><span class="linenum"> 557</span></a>          echo '&lt;a href=&quot;#&quot; rel=&quot;'.<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('dom_status')" href="../../_variables/dom_status.html">$dom_status</a>.'&quot; color=&quot;'.<a class="function" onClick="logFunction('stats_dom_status_color')" href="../../_functions/stats_dom_status_color.html" onMouseOver="funcPopup(event,'stats_dom_status_color')">stats_dom_status_color</a>( <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('dom_status')" href="../../_variables/dom_status.html">$dom_status</a> ).'&quot;&gt;'.<a class="function" onClick="logFunction('stats_dom_status_title')" href="../../_functions/stats_dom_status_title.html" onMouseOver="funcPopup(event,'stats_dom_status_title')">stats_dom_status_title</a>( <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('dom_status')" href="../../_variables/dom_status.html">$dom_status</a> ).'&lt;/a&gt;';
<a name="l558"><span class="linenum"> 558</span></a>          break;
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>      case 'iprange_status_edit':
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">        // Update status of IP range from list screen by clicking on the status column</span>
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l564"><span class="linenum"> 564</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'iprange' );
<a name="l565"><span class="linenum"> 565</span></a>  
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment">        // Check permission:</span>
<a name="l567"><span class="linenum"> 567</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'spamblacklist', 'edit', true );
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_status', 'string' );
<a name="l570"><span class="linenum"> 570</span></a>          <a class="var it6561" onMouseOver="hilite(6561)" onMouseOut="lolite()" onClick="logVariable('iprange_ID')" href="../../_variables/iprange_ID.html">$iprange_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'iprange_ID', 'integer', true );
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_antispam__iprange
<a name="l573"><span class="linenum"> 573</span></a>                          SET aipr_status = '.( empty( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ) ? 'NULL' : <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ) ).'
<a name="l574"><span class="linenum"> 574</span></a>                          WHERE aipr_ID =' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it6561" onMouseOver="hilite(6561)" onMouseOut="lolite()" onClick="logVariable('iprange_ID')" href="../../_variables/iprange_ID.html">$iprange_ID</a> ) );
<a name="l575"><span class="linenum"> 575</span></a>          echo '&lt;a href=&quot;#&quot; rel=&quot;'.<a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a>.'&quot; color=&quot;'.<a class="function" onClick="logFunction('aipr_status_color')" href="../../_functions/aipr_status_color.html" onMouseOver="funcPopup(event,'aipr_status_color')">aipr_status_color</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ).'&quot;&gt;'.<a class="function" onClick="logFunction('aipr_status_title')" href="../../_functions/aipr_status_title.html" onMouseOver="funcPopup(event,'aipr_status_title')">aipr_status_title</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ).'&lt;/a&gt;';
<a name="l576"><span class="linenum"> 576</span></a>          break;
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>      case 'emadr_status_edit':
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">        // Update status of email address</span>
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l582"><span class="linenum"> 582</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'emadrstatus' );
<a name="l583"><span class="linenum"> 583</span></a>  
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">        // Check permission:</span>
<a name="l585"><span class="linenum"> 585</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'emails', 'edit', true );
<a name="l586"><span class="linenum"> 586</span></a>  
<a name="l587"><span class="linenum"> 587</span></a>          <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_status', 'string' );
<a name="l588"><span class="linenum"> 588</span></a>          <a class="var it5604" onMouseOver="hilite(5604)" onMouseOut="lolite()" onClick="logVariable('emadr_ID')" href="../../_variables/emadr_ID.html">$emadr_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'emadr_ID', 'integer', true );
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('tools/model/_email.funcs.php');
<a name="l591"><span class="linenum"> 591</span></a>  
<a name="l592"><span class="linenum"> 592</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_email__address
<a name="l593"><span class="linenum"> 593</span></a>                          SET emadr_status = '.( empty( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ) ? 'NULL' : <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ) ).'
<a name="l594"><span class="linenum"> 594</span></a>                          WHERE emadr_ID =' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it5604" onMouseOver="hilite(5604)" onMouseOut="lolite()" onClick="logVariable('emadr_ID')" href="../../_variables/emadr_ID.html">$emadr_ID</a> ) );
<a name="l595"><span class="linenum"> 595</span></a>          echo '&lt;a href=&quot;#&quot; rel=&quot;'.<a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a>.'&quot; color=&quot;'.<a class="function" onClick="logFunction('emadr_get_status_color')" href="../../_functions/emadr_get_status_color.html" onMouseOver="funcPopup(event,'emadr_get_status_color')">emadr_get_status_color</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ).'&quot;&gt;'.<a class="function" onClick="logFunction('emadr_get_status_title')" href="../../_functions/emadr_get_status_title.html" onMouseOver="funcPopup(event,'emadr_get_status_title')">emadr_get_status_title</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ).'&lt;/a&gt;';
<a name="l596"><span class="linenum"> 596</span></a>          break;
<a name="l597"><span class="linenum"> 597</span></a>  
<a name="l598"><span class="linenum"> 598</span></a>      case 'user_level_edit':
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">        // Update level of an user from list screen by clicking on the level column</span>
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l602"><span class="linenum"> 602</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'userlevel' );
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">        // Check permission:</span>
<a name="l605"><span class="linenum"> 605</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'users', 'edit', true );
<a name="l606"><span class="linenum"> 606</span></a>  
<a name="l607"><span class="linenum"> 607</span></a>          <a class="var it3380" onMouseOver="hilite(3380)" onMouseOut="lolite()" onClick="logVariable('user_level')" href="../../_variables/user_level.html">$user_level</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_user_level', 'integer' );
<a name="l608"><span class="linenum"> 608</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'string' );
<a name="l609"><span class="linenum"> 609</span></a>  
<a name="l610"><span class="linenum"> 610</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l611"><span class="linenum"> 611</span></a>          if( <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, false ) )
<a name="l612"><span class="linenum"> 612</span></a>          {
<a name="l613"><span class="linenum"> 613</span></a>              <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'level', <a class="var it3380" onMouseOver="hilite(3380)" onMouseOut="lolite()" onClick="logVariable('user_level')" href="../../_variables/user_level.html">$user_level</a> );
<a name="l614"><span class="linenum"> 614</span></a>              <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l615"><span class="linenum"> 615</span></a>              echo '&lt;a href=&quot;#&quot; rel=&quot;'.<a class="var it3380" onMouseOver="hilite(3380)" onMouseOut="lolite()" onClick="logVariable('user_level')" href="../../_variables/user_level.html">$user_level</a>.'&quot;&gt;'.<a class="var it3380" onMouseOver="hilite(3380)" onMouseOut="lolite()" onClick="logVariable('user_level')" href="../../_variables/user_level.html">$user_level</a>.'&lt;/a&gt;';
<a name="l616"><span class="linenum"> 616</span></a>          }
<a name="l617"><span class="linenum"> 617</span></a>          break;
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>      case 'country_status_edit':
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">        // Update status of Country from list screen by clicking on the status column</span>
<a name="l621"><span class="linenum"> 621</span></a>  
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l623"><span class="linenum"> 623</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'country' );
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">        // Check permission:</span>
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'options', 'edit', true );
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>          <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'regional/model/_regional.funcs.php' );
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_status', 'string' );
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('ctry_ID')" href="../../_variables/ctry_ID.html">$ctry_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'ctry_ID', 'integer', true );
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_regional__country
<a name="l634"><span class="linenum"> 634</span></a>                          SET ctry_status = '.( empty( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ) ? 'NULL' : <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ) ).'
<a name="l635"><span class="linenum"> 635</span></a>                          WHERE ctry_ID =' . <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('ctry_ID')" href="../../_variables/ctry_ID.html">$ctry_ID</a> ) );
<a name="l636"><span class="linenum"> 636</span></a>          echo '&lt;a href=&quot;#&quot; rel=&quot;'.<a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a>.'&quot; color=&quot;'.<a class="function" onClick="logFunction('ctry_status_color')" href="../../_functions/ctry_status_color.html" onMouseOver="funcPopup(event,'ctry_status_color')">ctry_status_color</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ).'&quot;&gt;'.<a class="function" onClick="logFunction('ctry_status_title')" href="../../_functions/ctry_status_title.html" onMouseOver="funcPopup(event,'ctry_status_title')">ctry_status_title</a>( <a class="var it4349" onMouseOver="hilite(4349)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../_variables/new_status.html">$new_status</a> ).'&lt;/a&gt;';
<a name="l637"><span class="linenum"> 637</span></a>          break;
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>      case 'item_task_edit':
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">        // Update task fields of Item from list screen by clicking on the cell</span>
<a name="l641"><span class="linenum"> 641</span></a>  
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l643"><span class="linenum"> 643</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'itemtask' );
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>          <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'field', 'string' );
<a name="l646"><span class="linenum"> 646</span></a>          if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, array( 'priority', 'status', 'assigned' ) ) )
<a name="l647"><span class="linenum"> 647</span></a>          { // Invalid field
<a name="l648"><span class="linenum"> 648</span></a>              <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Invalid the edited field: %s'), <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> ), 'error' );
<a name="l649"><span class="linenum"> 649</span></a>              break;
<a name="l650"><span class="linenum"> 650</span></a>          }
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>          <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_ID', 'integer', true );
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>          <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l655"><span class="linenum"> 655</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = &amp; <a class="var it99" onMouseOver="hilite(99)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_ID( <a class="var it41" onMouseOver="hilite(41)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a> );
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">        // Check permission:</span>
<a name="l658"><span class="linenum"> 658</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!CURSTATUS', 'edit', true, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> );
<a name="l659"><span class="linenum"> 659</span></a>  
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it8348" onMouseOver="hilite(8348)" onMouseOut="lolite()" onClick="logVariable('new_attrs')" href="../../_variables/new_attrs.html">$new_attrs</a> = '';
<a name="l661"><span class="linenum"> 661</span></a>          switch( <a class="var it945" onMouseOver="hilite(945)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> )
<a name="l662"><span class="linenum"> 662</span></a>          {
<a name="l663"><span class="linenum"> 663</span></a>              case 'priority':
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment">                // Update task priority</span>
<a name="l665"><span class="linenum"> 665</span></a>                  <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../_variables/new_value.html">$new_value</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_priority', 'integer', NULL );
<a name="l666"><span class="linenum"> 666</span></a>                  <a class="var it8348" onMouseOver="hilite(8348)" onMouseOut="lolite()" onClick="logVariable('new_attrs')" href="../../_variables/new_attrs.html">$new_attrs</a> = ' color=&quot;'.<a class="function" onClick="logFunction('item_priority_color')" href="../../_functions/item_priority_color.html" onMouseOver="funcPopup(event,'item_priority_color')">item_priority_color</a>( <a class="var it8349" onMouseOver="hilite(8349)" onMouseOut="lolite()" onClick="logVariable('new_priority')" href="../../_variables/new_priority.html">$new_priority</a> ).'&quot;';
<a name="l667"><span class="linenum"> 667</span></a>                  <a class="var it8350" onMouseOver="hilite(8350)" onMouseOut="lolite()" onClick="logVariable('new_title')" href="../../_variables/new_title.html">$new_title</a> = <a class="function" onClick="logFunction('item_priority_title')" href="../../_functions/item_priority_title.html" onMouseOver="funcPopup(event,'item_priority_title')">item_priority_title</a>( <a class="var it8349" onMouseOver="hilite(8349)" onMouseOut="lolite()" onClick="logVariable('new_priority')" href="../../_variables/new_priority.html">$new_priority</a> );
<a name="l668"><span class="linenum"> 668</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'priority', 'new_priority', true );
<a name="l669"><span class="linenum"> 669</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l670"><span class="linenum"> 670</span></a>                  break;
<a name="l671"><span class="linenum"> 671</span></a>  
<a name="l672"><span class="linenum"> 672</span></a>              case 'assigned':
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">                // Update task assigned user</span>
<a name="l674"><span class="linenum"> 674</span></a>                  <a class="var it8351" onMouseOver="hilite(8351)" onMouseOut="lolite()" onClick="logVariable('new_assigned_ID')" href="../../_variables/new_assigned_ID.html">$new_assigned_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_assigned_ID', 'integer', NULL );
<a name="l675"><span class="linenum"> 675</span></a>                  <a class="var it8352" onMouseOver="hilite(8352)" onMouseOut="lolite()" onClick="logVariable('new_assigned_login')" href="../../_variables/new_assigned_login.html">$new_assigned_login</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_assigned_login', 'string', NULL );
<a name="l676"><span class="linenum"> 676</span></a>                  if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('assign_to')" href="../../_functions/assign_to.html" onMouseOver="funcPopup(event,'assign_to')">assign_to</a>( <a class="var it8351" onMouseOver="hilite(8351)" onMouseOut="lolite()" onClick="logVariable('new_assigned_ID')" href="../../_variables/new_assigned_ID.html">$new_assigned_ID</a>, <a class="var it8352" onMouseOver="hilite(8352)" onMouseOut="lolite()" onClick="logVariable('new_assigned_login')" href="../../_variables/new_assigned_login.html">$new_assigned_login</a> ) )
<a name="l677"><span class="linenum"> 677</span></a>                  { // An assigned user can be changed
<a name="l678"><span class="linenum"> 678</span></a>                      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l679"><span class="linenum"> 679</span></a>                  }
<a name="l680"><span class="linenum"> 680</span></a>                  else
<a name="l681"><span class="linenum"> 681</span></a>                  { // Error on changing of an assigned user
<a name="l682"><span class="linenum"> 682</span></a>                      <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('_core/_template.funcs.php');
<a name="l683"><span class="linenum"> 683</span></a>                      <a class="function" onClick="logFunction('headers_content_mightcache')" href="../../_functions/headers_content_mightcache.html" onMouseOver="funcPopup(event,'headers_content_mightcache')">headers_content_mightcache</a>( 'text/html', 0, '#', false );        <span class="comment">// Do NOT cache error messages! (Users would not see they fixed them)</span>
<a name="l684"><span class="linenum"> 684</span></a>                      <a class="function" onClick="logFunction('header_http_response')" href="../../_functions/header_http_response.html" onMouseOver="funcPopup(event,'header_http_response')">header_http_response</a>('400 Bad Request');
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">                    // This message is displayed after an input field</span>
<a name="l686"><span class="linenum"> 686</span></a>                      echo <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Username not found!');
<a name="l687"><span class="linenum"> 687</span></a>                      die(2); <span class="comment">// Error code 2. Note: this will still call the shutdown function.</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">                    // EXIT here!</span>
<a name="l689"><span class="linenum"> 689</span></a>                  }
<a name="l690"><span class="linenum"> 690</span></a>  
<a name="l691"><span class="linenum"> 691</span></a>                  if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../_variables/assigned_user_ID.html">assigned_user_ID</a> ) )
<a name="l692"><span class="linenum"> 692</span></a>                  {
<a name="l693"><span class="linenum"> 693</span></a>                      <a class="var it8350" onMouseOver="hilite(8350)" onMouseOut="lolite()" onClick="logVariable('new_title')" href="../../_variables/new_title.html">$new_title</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No user');
<a name="l694"><span class="linenum"> 694</span></a>                  }
<a name="l695"><span class="linenum"> 695</span></a>                  else
<a name="l696"><span class="linenum"> 696</span></a>                  {
<a name="l697"><span class="linenum"> 697</span></a>                      <a class="var it1623" onMouseOver="hilite(1623)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> = true;
<a name="l698"><span class="linenum"> 698</span></a>                      <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l699"><span class="linenum"> 699</span></a>                      <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../_variables/assigned_user_ID.html">assigned_user_ID</a> );
<a name="l700"><span class="linenum"> 700</span></a>                      <a class="var it8350" onMouseOver="hilite(8350)" onMouseOut="lolite()" onClick="logVariable('new_title')" href="../../_variables/new_title.html">$new_title</a> = <a class="var it197" onMouseOver="hilite(197)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get_colored_login')" href="../../_functions/get_colored_login.html" onMouseOver="funcPopup(event,'get_colored_login')">get_colored_login</a>( array( 'mask' =&gt; '<a class="var it3105" onMouseOver="hilite(3105)" onMouseOut="lolite()" onClick="logVariable('avatar')" href="../../_variables/avatar.html">$avatar</a>$ <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a>$' ) );
<a name="l701"><span class="linenum"> 701</span></a>                  }
<a name="l702"><span class="linenum"> 702</span></a>                  <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../_variables/new_value.html">$new_value</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('assigned_user_ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../_variables/assigned_user_ID.html">assigned_user_ID</a>;
<a name="l703"><span class="linenum"> 703</span></a>                  break;
<a name="l704"><span class="linenum"> 704</span></a>  
<a name="l705"><span class="linenum"> 705</span></a>              case 'status':
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">                // Update task status</span>
<a name="l707"><span class="linenum"> 707</span></a>                  <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../_variables/new_value.html">$new_value</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_status', 'integer', NULL );
<a name="l708"><span class="linenum"> 708</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'pst_ID', 'new_status', true );
<a name="l709"><span class="linenum"> 709</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>                  <a class="var it8350" onMouseOver="hilite(8350)" onMouseOut="lolite()" onClick="logVariable('new_title')" href="../../_variables/new_title.html">$new_title</a> = empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('pst_ID')" class="var it8969" onMouseOver="hilite(8969)" onMouseOut="lolite()" href="../../_variables/pst_ID.html">pst_ID</a> ) ? <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No status') : <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 't_extra_status' );
<a name="l712"><span class="linenum"> 712</span></a>                  break;
<a name="l713"><span class="linenum"> 713</span></a>          }
<a name="l714"><span class="linenum"> 714</span></a>  
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment">        // Return a link to make the cell editable on next time</span>
<a name="l716"><span class="linenum"> 716</span></a>          echo '&lt;a href=&quot;#&quot; rel=&quot;'.<a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../_variables/new_value.html">$new_value</a>.'&quot;'.<a class="var it8348" onMouseOver="hilite(8348)" onMouseOut="lolite()" onClick="logVariable('new_attrs')" href="../../_variables/new_attrs.html">$new_attrs</a>.'&gt;'.<a class="var it8350" onMouseOver="hilite(8350)" onMouseOut="lolite()" onClick="logVariable('new_title')" href="../../_variables/new_title.html">$new_title</a>.'&lt;/a&gt;';
<a name="l717"><span class="linenum"> 717</span></a>          break;
<a name="l718"><span class="linenum"> 718</span></a>  
<a name="l719"><span class="linenum"> 719</span></a>      case 'conflict_files':
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">        // Replace old file with new and set new name for old file</span>
<a name="l721"><span class="linenum"> 721</span></a>  
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l723"><span class="linenum"> 723</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'conflictfiles' );
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'fileroot_ID', 'string' );
<a name="l726"><span class="linenum"> 726</span></a>  
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">        // Check permission:</span>
<a name="l728"><span class="linenum"> 728</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'files', 'add', true, <a class="var it8353" onMouseOver="hilite(8353)" onMouseOut="lolite()" onClick="logVariable('fileroot_ID')" href="../../_variables/fileroot_ID.html">$fileroot_ID</a> );
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'path', 'string' );
<a name="l731"><span class="linenum"> 731</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'oldfile', 'string' );
<a name="l732"><span class="linenum"> 732</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'newfile', 'string' );
<a name="l733"><span class="linenum"> 733</span></a>  
<a name="l734"><span class="linenum"> 734</span></a>          <a class="var it8354" onMouseOver="hilite(8354)" onMouseOut="lolite()" onClick="logVariable('fileroot')" href="../../_variables/fileroot.html">$fileroot</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( '_', <a class="var it8353" onMouseOver="hilite(8353)" onMouseOut="lolite()" onClick="logVariable('fileroot_ID')" href="../../_variables/fileroot_ID.html">$fileroot_ID</a> );
<a name="l735"><span class="linenum"> 735</span></a>          <a class="var it8355" onMouseOver="hilite(8355)" onMouseOut="lolite()" onClick="logVariable('fileroot_type')" href="../../_variables/fileroot_type.html">$fileroot_type</a> = <a class="var it8354" onMouseOver="hilite(8354)" onMouseOut="lolite()" onClick="logVariable('fileroot')" href="../../_variables/fileroot.html">$fileroot</a>[0];
<a name="l736"><span class="linenum"> 736</span></a>          <a class="var it8356" onMouseOver="hilite(8356)" onMouseOut="lolite()" onClick="logVariable('fileroot_type_ID')" href="../../_variables/fileroot_type_ID.html">$fileroot_type_ID</a> = empty( <a class="var it8354" onMouseOver="hilite(8354)" onMouseOut="lolite()" onClick="logVariable('fileroot')" href="../../_variables/fileroot.html">$fileroot</a>[1] ) ? 0 : <a class="var it8354" onMouseOver="hilite(8354)" onMouseOut="lolite()" onClick="logVariable('fileroot')" href="../../_variables/fileroot.html">$fileroot</a>[1];
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('replace_old_file_with_new')" href="../../_functions/replace_old_file_with_new.html" onMouseOver="funcPopup(event,'replace_old_file_with_new')">replace_old_file_with_new</a>( <a class="var it8355" onMouseOver="hilite(8355)" onMouseOut="lolite()" onClick="logVariable('fileroot_type')" href="../../_variables/fileroot_type.html">$fileroot_type</a>, <a class="var it8356" onMouseOver="hilite(8356)" onMouseOut="lolite()" onClick="logVariable('fileroot_type_ID')" href="../../_variables/fileroot_type_ID.html">$fileroot_type_ID</a>, <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>, <a class="var it8357" onMouseOver="hilite(8357)" onMouseOut="lolite()" onClick="logVariable('newfile')" href="../../_variables/newfile.html">$newfile</a>, <a class="var it8358" onMouseOver="hilite(8358)" onMouseOut="lolite()" onClick="logVariable('oldfile')" href="../../_variables/oldfile.html">$oldfile</a>, false );
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>          <a class="var it953" onMouseOver="hilite(953)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = array();
<a name="l741"><span class="linenum"> 741</span></a>          <a class="var it953" onMouseOver="hilite(953)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['old'] = <a class="var it8358" onMouseOver="hilite(8358)" onMouseOut="lolite()" onClick="logVariable('oldfile')" href="../../_variables/oldfile.html">$oldfile</a>;
<a name="l742"><span class="linenum"> 742</span></a>          <a class="var it953" onMouseOver="hilite(953)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['new'] = <a class="var it8357" onMouseOver="hilite(8357)" onMouseOut="lolite()" onClick="logVariable('newfile')" href="../../_variables/newfile.html">$newfile</a>;
<a name="l743"><span class="linenum"> 743</span></a>          if( <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> !== true )
<a name="l744"><span class="linenum"> 744</span></a>          { // Send an error if it was created during the replacing
<a name="l745"><span class="linenum"> 745</span></a>              <a class="var it953" onMouseOver="hilite(953)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['error'] = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l746"><span class="linenum"> 746</span></a>          }
<a name="l747"><span class="linenum"> 747</span></a>  
<a name="l748"><span class="linenum"> 748</span></a>          echo <a class="function" onClick="logFunction('evo_json_encode')" href="../../_functions/evo_json_encode.html" onMouseOver="funcPopup(event,'evo_json_encode')">evo_json_encode</a>( <a class="var it953" onMouseOver="hilite(953)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> );
<a name="l749"><span class="linenum"> 749</span></a>          exit(0);
<a name="l750"><span class="linenum"> 750</span></a>  
<a name="l751"><span class="linenum"> 751</span></a>      default:
<a name="l752"><span class="linenum"> 752</span></a>          <a class="var it8341" onMouseOver="hilite(8341)" onMouseOut="lolite()" onClick="logVariable('incorrect_action')" href="../../_variables/incorrect_action.html">$incorrect_action</a> = true;
<a name="l753"><span class="linenum"> 753</span></a>          break;
<a name="l754"><span class="linenum"> 754</span></a>  }
<a name="l755"><span class="linenum"> 755</span></a>  
<a name="l756"><span class="linenum"> 756</span></a>  if( !<a class="var it8341" onMouseOver="hilite(8341)" onMouseOut="lolite()" onClick="logVariable('incorrect_action')" href="../../_variables/incorrect_action.html">$incorrect_action</a> )
<a name="l757"><span class="linenum"> 757</span></a>  {
<a name="l758"><span class="linenum"> 758</span></a>      if( <a class="var it2846" onMouseOver="hilite(2846)" onMouseOut="lolite()" onClick="logVariable('current_debug')" href="../../_variables/current_debug.html">$current_debug</a> || <a class="var it2847" onMouseOver="hilite(2847)" onMouseOut="lolite()" onClick="logVariable('current_debug_jslog')" href="../../_variables/current_debug_jslog.html">$current_debug_jslog</a> )
<a name="l759"><span class="linenum"> 759</span></a>      {    // debug is ON
<a name="l760"><span class="linenum"> 760</span></a>          <a class="var it2848" onMouseOver="hilite(2848)" onMouseOut="lolite()" onClick="logVariable('Ajaxlog')" href="../../_variables/Ajaxlog.html">$Ajaxlog</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( NULL, NULL, true, 'all',
<a name="l761"><span class="linenum"> 761</span></a>                          array(
<a name="l762"><span class="linenum"> 762</span></a>                                  'error' =&gt; array( 'class' =&gt; 'jslog_error', 'divClass' =&gt; false ),
<a name="l763"><span class="linenum"> 763</span></a>                                  'note'  =&gt; array( 'class' =&gt; 'jslog_note',  'divClass' =&gt; false ),
<a name="l764"><span class="linenum"> 764</span></a>                              ), 'ul', 'jslog' );
<a name="l765"><span class="linenum"> 765</span></a>      }
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>      if( <a class="var it8342" onMouseOver="hilite(8342)" onMouseOut="lolite()" onClick="logVariable('add_response_end_comment')" href="../../_variables/add_response_end_comment.html">$add_response_end_comment</a> )
<a name="l768"><span class="linenum"> 768</span></a>      { // add ajax response end comment
<a name="l769"><span class="linenum"> 769</span></a>          echo '&lt;!-- Ajax response end --&gt;';
<a name="l770"><span class="linenum"> 770</span></a>      }
<a name="l771"><span class="linenum"> 771</span></a>  
<a name="l772"><span class="linenum"> 772</span></a>      exit(0);
<a name="l773"><span class="linenum"> 773</span></a>  }
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">/**</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment"> * Get comments awaiting moderation</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment"> *</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment"> * @param integer blog_ID</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment"> */</span>
<a name="l780"><span class="linenum"> 780</span></a>  function <a class="function" onClick="logFunction('get_comments_awaiting_moderation')" href="../../_functions/get_comments_awaiting_moderation.html" onMouseOver="funcPopup(event,'get_comments_awaiting_moderation')">get_comments_awaiting_moderation</a>( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> )
<a name="l781"><span class="linenum"> 781</span></a>  {
<a name="l782"><span class="linenum"> 782</span></a>      <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a> = 5;
<a name="l783"><span class="linenum"> 783</span></a>  
<a name="l784"><span class="linenum"> 784</span></a>      <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'dashboard/model/_dashboard.funcs.php' );
<a name="l785"><span class="linenum"> 785</span></a>      <a class="function" onClick="logFunction('show_comments_awaiting_moderation')" href="../../_functions/show_comments_awaiting_moderation.html" onMouseOver="funcPopup(event,'show_comments_awaiting_moderation')">show_comments_awaiting_moderation</a>( <a class="var it326" onMouseOver="hilite(326)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a>, NULL, <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, array(), false );
<a name="l786"><span class="linenum"> 786</span></a>  }
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'set_from_request': ['set_from_request', 'Set a parameter from a Request form value. ', [['blogs/inc/_core/model/dataobjects','_dataobject.class.php',722]], 94],
'where_and': ['where_and', 'Extends the WHERE clause with AND ', [['blogs/inc/_core/model/db','_sql.class.php',245]], 280],
'ctry_status_title': ['ctry_status_title', 'Get status title of country by status value ', [['blogs/inc/regional/model','_regional.funcs.php',774]], 7],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['blogs/inc/items/model','_itemlist.class.php',256],['blogs/inc/items/model','_itemlistlight.class.php',751],['blogs/inc/_core/model/db','_db.class.php',761],['blogs/inc/users/model','_userlist.class.php',474],['blogs/inc/_core/ui/results','_results.class.php',439],['blogs/inc/comments/model','_commentlist.class.php',515]], 972],
'item_priority_title': ['item_priority_title', 'Get priority title of an item by priority value ', [['blogs/inc/items/model','_item.funcs.php',3063]], 2],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['blogs/inc/locales','_pofile.class.php',267],['blogs/inc/_core/model/db','_db.class.php',503]], 791],
'emadr_get_status_title': ['emadr_get_status_title', 'Get status title of email address by status value ', [['blogs/inc/tools/model','_email.funcs.php',143]], 11],
'get': ['get', '', [['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',941],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_src.js',15011],['blogs/plugins/tinymce_plugin/tiny_mce/plugins/media/js','media.js',7],['blogs/inc/links/model','_linkowner.class.php',221],['blogs/inc/_core/model/db','_sql.class.php',64],['blogs/inc/plugins/model','_pluginsettings.class.php',58],['blogs/inc/collections/model','_blog.class.php',1822],['blogs/inc/settings/model','_generalsettings.class.php',383],['blogs/inc/settings/model','_abstractsettings.class.php',271],['blogs/inc/plugins/model','_pluginusersettings.class.php',58],['blogs/inc/users/model','_user.class.php',1126],['blogs/plugins/tinymce_plugin/tiny_mce','tiny_mce_gzip.js',38],['blogs/inc/users/model','_usersettings.class.php',151],['blogs/inc/comments/model','_comment.class.php',301],['blogs/inc/users/model','_groupsettings.class.php',124],['blogs/inc/cron/model','_cronjob.class.php',104],['blogs/inc/items/model','_item.class.php',5742],['blogs/inc/sessions/model','_session.class.php',397],['blogs/inc/links/model','_linkuser.class.php',141],['blogs/inc/links/model','_linkitem.class.php',155],['blogs/inc/slugs/model','_slug.class.php',68],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',574],['blogs/plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['blogs/inc/antispam/model','_iprange.class.php',69],['blogs/inc/links/model','_linkcomment.class.php',132],['blogs/inc/files/model','_file.class.php',532]], 2417],
'load_funcs': ['load_funcs', '', [['blogs/inc/_core','_misc.funcs.php',115]], 214],
'display': ['display', 'Display the widget! ', [['blogs/inc/widgets/widgets','_menu_link.widget.php',207],['blogs/inc/widgets/widgets','_msg_menu_link.widget.php',183],['blogs/inc/widgets/widgets','_coll_title.widget.php',80],['blogs/inc/widgets/widgets','_coll_tagline.widget.php',80],['blogs/inc/widgets/widgets','_user_login.widget.php',196],['blogs/inc/widgets/widgets','_online_users.widget.php',96],['blogs/inc/widgets/widgets','_free_html.widget.php',111],['blogs/inc/_core/model/db','_sql.class.php',81],['blogs/inc/widgets/widgets','_coll_common_links.widget.php',168],['blogs/inc/widgets/widgets','_coll_media_index.widget.php',169],['blogs/inc/widgets/widgets','_coll_item_list.widget.php',238],['blogs/inc/widgets/model','_widget.class.php',453],['blogs/inc/widgets/widgets','_coll_longdesc.widget.php',100],['blogs/inc/_core/model','_log.class.php',292],['blogs/inc/_core/model','_log.class.php',618],['blogs/inc/widgets/widgets','_mobile_skin_switcher.widget.php',106],['blogs/inc/_core/ui/results','_results.class.php',880],['blogs/inc/widgets/widgets','_coll_search_form.widget.php',115],['blogs/inc/widgets/widgets','_coll_xml_feeds.widget.php',121],['blogs/inc/widgets/widgets','_coll_category_list.widget.php',145],['blogs/plugins','_calendar.plugin.php',536],['blogs/inc/widgets/widgets','_user_avatars.widget.php',144],['blogs/inc/widgets/widgets','_coll_logo.widget.php',109],['blogs/inc/widgets/widgets','_colls_list_public.widget.php',122],['blogs/inc/widgets/widgets','_user_tools.widget.php',252],['blogs/inc/widgets/widgets','_coll_tag_cloud.widget.php',157],['blogs/inc/widgets/widgets','_coll_featured_intro.widget.php',147],['blogs/inc/widgets/widgets','_colls_list_owner.widget.php',122],['blogs/inc/widgets/widgets','_coll_comment_list.widget.php',129],['blogs/inc/_core/model','_messages.class.php',190],['blogs/inc/widgets/widgets','_coll_avatar.widget.php',94]], 107],
'update_last_touched_date': ['update_last_touched_date', 'Update owner last_touched_ts if exists This must be override in the subclasses if the owner object has last_touched_ts field ', [['blogs/inc/links/model','_linkowner.class.php',413],['blogs/inc/comments/model','_comment.class.php',3769],['blogs/inc/items/model','_item.class.php',6658],['blogs/inc/links/model','_linkitem.class.php',189],['blogs/inc/links/model','_linkcomment.class.php',167]], 14],
'limit': ['limit', '', [['blogs/inc/_core/model/db','_sql.class.php',341]], 23],
'order_by': ['order_by', '', [['blogs/inc/_core/model/db','_sql.class.php',319]], 78],
'get_plugin_settings_node_by_path': ['get_plugin_settings_node_by_path', 'Get a node from settings by path (e.g. "locales[0][questions]") ', [['blogs/inc/plugins','_plugin.funcs.php',530]], 2],
'from_add': ['from_add', 'Extends the FROM clause. ', [['blogs/inc/_core/model/db','_sql.class.php',224]], 137],
'handle_notifications': ['handle_notifications', 'Handle comment email notifications ', [['blogs/inc/comments/model','_comment.class.php',3068]], 9],
'where': ['where', '', [['blogs/inc/_core/model/db','_sql.class.php',240]], 238],
'header_content_type': ['header_content_type', 'Template tag. Output content-type header ', [['blogs/inc/_core','_template.funcs.php',37]], 6],
'autoform_display_field': ['autoform_display_field', 'Recursive helper function to display a field of the plugin\'s settings (by manipulating a Form). ', [['blogs/inc/plugins','_plugin.funcs.php',37]], 8],
'button_class': ['button_class', 'Get a button class name depending on template ', [['blogs/inc/_core','_misc.funcs.php',6347]], 40],
'header_nocache': ['header_nocache', 'Sends HTTP headers to avoid caching of the page at the browser level (at least without revalidating with the server to make sure whether the content has changed or not). ', [['blogs/inc/_core','_template.funcs.php',270]], 9],
'get_comments_awaiting_moderation': ['get_comments_awaiting_moderation', 'Get comments awaiting moderation ', [['blogs/htsrv','async.php',775]], 3],
'check_perm': ['check_perm', 'Check permission on a message ', [['blogs/inc/messaging/model','_message.class.php',467],['blogs/inc/users/model','_group.class.php',257],['blogs/inc/users/model','_user.class.php',2022],['blogs/inc/links/model','_linkuser.class.php',51],['blogs/inc/links/model','_linkitem.class.php',54],['blogs/inc/_core/model','_module.class.php',233],['blogs/inc/messaging/model','_thread.class.php',476],['blogs/inc/links/model','_linkcomment.class.php',53],['blogs/inc/sessions/model','_goal.class.php',92]], 967],
'stats_dom_status_title': ['stats_dom_status_title', 'Get domain status title by value ', [['blogs/inc/sessions/model','_hitlog.funcs.php',994]], 5],
'set': ['set', 'Set param value ', [['blogs/inc/users/model','_userfield.class.php',243],['blogs/inc/generic/model','_genericordered.class.php',75],['blogs/inc/users/model','_group.class.php',204],['blogs/inc/items/model','_itemlight.class.php',1258],['blogs/inc/plugins/model','_pluginsettings.class.php',70],['blogs/inc/widgets/model','_widget.class.php',321],['blogs/inc/regional/model','_region.class.php',102],['blogs/inc/regional/model','_city.class.php',110],['blogs/inc/collections/model','_blog.class.php',1102],['blogs/inc/settings/model','_abstractsettings.class.php',446],['blogs/inc/plugins/model','_pluginusersettings.class.php',82],['blogs/inc/users/model','_user.class.php',1861],['blogs/inc/generic/model','_genericcategory.class.php',100],['blogs/inc/tools/model','_emailaddress.class.php',85],['blogs/inc/users/model','_usersettings.class.php',187],['blogs/inc/regional/model','_country.class.php',106],['blogs/inc/comments/model','_comment.class.php',315],['blogs/inc/users/model','_groupsettings.class.php',140],['blogs/inc/cron/model','_cronjob.class.php',79],['blogs/inc/items/model','_item.class.php',4497],['blogs/inc/files/model','_filetype.class.php',149],['blogs/inc/users/model','_userfieldgroup.class.php',92],['blogs/inc/sessions/model','_session.class.php',420],['blogs/plugins','_calendar.plugin.php',530],['blogs/inc/slugs/model','_slug.class.php',80],['blogs/inc/regional/model','_currency.class.php',96],['blogs/inc/messaging/model','_thread.class.php',185],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',614],['blogs/inc/regional/model','_subregion.class.php',119],['blogs/inc/antispam/model','_iprange.class.php',81],['blogs/inc/sessions/model','_goal.class.php',199]], 1121],
'ctry_status_color': ['ctry_status_color', 'Get status color of ip range by status value ', [['blogs/inc/regional/model','_regional.funcs.php',788]], 2],
'evo_html_entity_decode': ['evo_html_entity_decode', 'Wrapper function for htmlentites to use the $evo_charset as default charset ', [['blogs/inc/_core','_misc.funcs.php',803]], 10],
'aipr_status_color': ['aipr_status_color', 'Get status color of ip range by status value ', [['blogs/inc/antispam/model','_antispam.funcs.php',809]], 3],
'assert_received_crumb': ['assert_received_crumb', 'Assert that we received a valid crumb for the object we want to act on. ', [['blogs/inc/sessions/model','_session.class.php',582]], 256],
'get_colored_login': ['get_colored_login', 'Get user\'s login with gender color ', [['blogs/inc/users/model','_user.class.php',1271]], 19],
'handle_qm_secret': ['handle_qm_secret', 'Handle quick moderation secret param: checks if comment secret should expire after first comment moderation, and delete the secret if required This should be called after every kind of commment moderation ', [['blogs/inc/comments/model','_comment.class.php',3407]], 8],
'get_visibility_statuses': ['get_visibility_statuses', 'Get available post statuses ', [['blogs/inc/collections/model','_blog.funcs.php',897]], 60],
'_set_setting_by_path': ['_set_setting_by_path', '', [['blogs/inc/plugins','_plugin.funcs.php',466]], 5],
'get_opentrash_link': ['get_opentrash_link', 'Get opentrash link ', [['blogs/inc/comments/model','_comment.funcs.php',438]], 4],
'replace_old_file_with_new': ['replace_old_file_with_new', 'Replace the old file with the new one ', [['blogs/inc/files/model','_file.funcs.php',2382]], 2],
'from': ['from', '', [['blogs/inc/_core/model/db','_sql.class.php',219]], 380],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['blogs/inc/_core/model/db','_db.class.php',1041]], 88],
'stats_dom_type_title': ['stats_dom_type_title', 'Get domain type title by value ', [['blogs/inc/sessions/model','_hitlog.funcs.php',980]], 3],
'evo_json_encode': ['evo_json_encode', 'A wrapper for json_encode function We need to pass valid UTF-8 string to json_encode, otherwise it may return NULL ', [['blogs/inc/_core','_misc.funcs.php',5770]], 11],
't_': ['t_', 'TRANSLATE! ', [['blogs/inc/locales','_locale.funcs.php',48],['blogs/inc/locales','_locale.funcs.php',240],['blogs/inc/skins/model','_skin.class.php',672],['blogs/inc/_core/model','_module.class.php',79],['blogs/rsc/js','blog_widgets.js',422],['blogs/inc/plugins','_plugin.class.php',2617]], 10201],
'stats_dom_status_color': ['stats_dom_status_color', 'Get domain status color by value ', [['blogs/inc/sessions/model','_hitlog.funcs.php',1008]], 2],
'dbdelete': ['dbdelete', 'Delete message and dependencies from database ', [['blogs/inc/messaging/model','_message.class.php',411],['blogs/inc/users/model','_group.class.php',489],['blogs/inc/collections/model','_blog.class.php',2361],['blogs/inc/users/model','_user.class.php',2998],['blogs/inc/comments/model','_comment.class.php',3568],['blogs/inc/items/model','_item.class.php',5055],['blogs/inc/messaging/model','_thread.class.php',418],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',331]], 57],
'assign_to': ['assign_to', 'Assign user to the item by user ID or by user login ', [['blogs/inc/items/model','_item.class.php',380]], 2],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['blogs/inc/_core/model/db','_db.class.php',1092]], 140],
'escape': ['escape', 'Format a string correctly for safe insert under all PHP conditions ', [['blogs/inc/_core/model/db','_db.class.php',494]], 145],
'select': ['select', 'Set SELECT clause ', [['blogs/inc/_core/model/db','_sql.class.php',194],['blogs/inc/_core/model/db','_db.class.php',466],['blogs/inc/_core/ui/forms','_form.class.php',1820]], 461],
'headers_content_mightcache': ['headers_content_mightcache', 'This is a placeholder for future development. ', [['blogs/inc/_core','_template.funcs.php',63]], 29],
'echo_item_comments': ['echo_item_comments', 'Display CommentList with the given filters ', [['blogs/inc/items/model','_item.funcs.php',2271]], 3],
'add': ['add', 'Add object to cache, handling our own indices. ', [['blogs/inc/collections/model','_blogcache.class.php',69],['blogs/inc/users/model','_usercache.class.php',231],['blogs/inc/files/model','_filelist.class.php',392],['blogs/inc/_core/model','_log.class.php',124],['blogs/inc/_core/model','_log.class.php',593],['blogs/inc/files/model','_filetypecache.class.php',57],['blogs/inc/_ext/pclzip','pclzip.lib.php',455],['blogs/inc/_core/model/dataobjects','_dataobjectcache.class.php',356],['blogs/inc/users/model','_groupsettings.class.php',103],['blogs/inc/links/model','_linkcache.class.php',101],['blogs/inc/skins/model','_skincache.class.php',62],['blogs/inc/generic/model','_genericcategorycache.class.php',113],['blogs/inc/_core/model','_messages.class.php',121]], 2022],
'aipr_status_title': ['aipr_status_title', 'Get status title of ip range by status value ', [['blogs/inc/antispam/model','_antispam.funcs.php',795]], 14],
'show_comments_awaiting_moderation': ['show_comments_awaiting_moderation', 'Show comments awaiting moderation ', [['blogs/inc/dashboard/model','_dashboard.funcs.php',231]], 2],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['blogs/inc/_core','_param.funcs.php',50]], 1906],
'emadr_get_status_color': ['emadr_get_status_color', 'Get status color of email address by status value ', [['blogs/inc/tools/model','_email.funcs.php',157]], 2],
'bad_request_die': ['bad_request_die', 'Outputs Bad request Error message. When in debug mode it also prints a backtrace. ', [['blogs/inc/_core','_misc.funcs.php',2691]], 21],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['blogs/inc/chapters/model','_chapter.class.php',317],['blogs/inc/collections/model','_collsettings.class.php',260],['blogs/inc/users/model','_group.class.php',470],['blogs/inc/widgets/model','_widget.class.php',757],['blogs/inc/collections/model','_blog.class.php',2327],['blogs/inc/settings/model','_abstractsettings.class.php',593],['blogs/inc/users/model','_user.class.php',2934],['blogs/inc/skins/model','_skin.class.php',348],['blogs/inc/comments/model','_comment.class.php',3470],['blogs/inc/users/model','_groupsettings.class.php',159],['blogs/inc/cron/model','_cronjob.class.php',207],['blogs/inc/items/model','_item.class.php',4867],['blogs/inc/slugs/model','_slug.class.php',265],['blogs/inc/_core/model/dataobjects','_dataobject.class.php',129],['blogs/inc/files/model','_file.class.php',1739]], 266],
'header_http_response': ['header_http_response', 'Update global $http_response_code and call function header() ', [['blogs/inc/_core','_misc.funcs.php',5835]], 16],
'item_priority_color': ['item_priority_color', 'Get priority color of an item by priority value ', [['blogs/inc/items/model','_item.funcs.php',3077]], 2],
'preg_replace': ['preg_replace', '', [], 281],
'trim': ['trim', '', [], 351],
'urldecode': ['urldecode', '', [], 25],
'explode': ['explode', '', [], 249],
'substr': ['substr', '', [], 657],
'version_compare': ['version_compare', '', [], 83],
'array_unshift': ['array_unshift', '', [], 77],
'preg_match': ['preg_match', '', [], 363],
'in_array': ['in_array', '', [], 335],
'implode': ['implode', '', [], 456],
'dirname': ['dirname', '', [], 186]};
CLASS_DATA={
'sql': ['sql', 'SQL class: help constructing queries ', [['blogs/inc/_core/model/db','_sql.class.php',32]], 273],
'log': ['log', 'Log class. Logs notes and errors. ', [['blogs/inc/_core/model','_log.class.php',41]], 9],
'form': ['form', 'Form class ', [['blogs/inc/_core/ui/forms','_form.class.php',53]], 181],
'adminui': ['adminui', 'We\'ll use the default AdminUI templates etc. ', [['blogs/skins_adm/evo','_adminUI.class.php',35],['blogs/skins_adm/chicago','_adminUI.class.php',36],['blogs/skins_adm/bootstrap','_adminUI.class.php',35]], 7]};
CONST_DATA={
'ARRAY_A': ['ARRAY_A', '', [['blogs/inc/_core/model/db','_db.class.php',70]], 31]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Jul  5 12:18:44 2014</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
