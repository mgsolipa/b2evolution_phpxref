<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /install/_functions_install.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='install';
filename='_functions_install.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/install/</a> -> <a href="_functions_install.php.html">_functions_install.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_functions_install.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_functions_install.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements support functions for the installer</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * b2evolution - {@link http://b2evolution.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * Released under GNU GPL License - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * @package install</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> */</span>
<a name="l11"><span class="linenum">  11</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l12"><span class="linenum">  12</span></a>  
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">/**</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * Open a block</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> *</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment"> * @param string Block title</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> */</span>
<a name="l18"><span class="linenum">  18</span></a>  function <a class="function" onClick="logFunction('block_open')" href="../_functions/block_open.html" onMouseOver="funcPopup(event,'block_open')">block_open</a>( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> = '' )
<a name="l19"><span class="linenum">  19</span></a>  {
<a name="l20"><span class="linenum">  20</span></a>      global <a class="var it7800" onMouseOver="hilite(7800)" onMouseOut="lolite()" onClick="logVariable('block_status')" href="../_variables/block_status.html">$block_status</a>;
<a name="l21"><span class="linenum">  21</span></a>      if( isset( <a class="var it7800" onMouseOver="hilite(7800)" onMouseOut="lolite()" onClick="logVariable('block_status')" href="../_variables/block_status.html">$block_status</a> ) &amp;&amp; <a class="var it7800" onMouseOver="hilite(7800)" onMouseOut="lolite()" onClick="logVariable('block_status')" href="../_variables/block_status.html">$block_status</a> == 'open' )
<a name="l22"><span class="linenum">  22</span></a>      {
<a name="l23"><span class="linenum">  23</span></a>          return;
<a name="l24"><span class="linenum">  24</span></a>      }
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>      <a class="var it7800" onMouseOver="hilite(7800)" onMouseOut="lolite()" onClick="logVariable('block_status')" href="../_variables/block_status.html">$block_status</a> = 'open';
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>      echo &quot;\n&quot;.'&lt;div class=&quot;panel panel-default&quot;&gt;'.&quot;\n&quot;;
<a name="l29"><span class="linenum">  29</span></a>      if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> != '' )
<a name="l30"><span class="linenum">  30</span></a>      { // Display a title
<a name="l31"><span class="linenum">  31</span></a>          echo '&lt;div class=&quot;panel-heading&quot;&gt;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>.'&lt;/div&gt;'.&quot;\n&quot;;
<a name="l32"><span class="linenum">  32</span></a>      }
<a name="l33"><span class="linenum">  33</span></a>      echo '&lt;div class=&quot;panel-body&quot;&gt;'.&quot;\n&quot;;
<a name="l34"><span class="linenum">  34</span></a>  }
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * Close a block</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> */</span>
<a name="l39"><span class="linenum">  39</span></a>  function <a class="function" onClick="logFunction('block_close')" href="../_functions/block_close.html" onMouseOver="funcPopup(event,'block_close')">block_close</a>()
<a name="l40"><span class="linenum">  40</span></a>  {
<a name="l41"><span class="linenum">  41</span></a>      global <a class="var it7800" onMouseOver="hilite(7800)" onMouseOut="lolite()" onClick="logVariable('block_status')" href="../_variables/block_status.html">$block_status</a>;
<a name="l42"><span class="linenum">  42</span></a>      if( ! isset( <a class="var it7800" onMouseOver="hilite(7800)" onMouseOut="lolite()" onClick="logVariable('block_status')" href="../_variables/block_status.html">$block_status</a> ) || <a class="var it7800" onMouseOver="hilite(7800)" onMouseOut="lolite()" onClick="logVariable('block_status')" href="../_variables/block_status.html">$block_status</a> == 'closed' )
<a name="l43"><span class="linenum">  43</span></a>      {
<a name="l44"><span class="linenum">  44</span></a>          return;
<a name="l45"><span class="linenum">  45</span></a>      }
<a name="l46"><span class="linenum">  46</span></a>      <a class="var it7800" onMouseOver="hilite(7800)" onMouseOut="lolite()" onClick="logVariable('block_status')" href="../_variables/block_status.html">$block_status</a> = 'closed';
<a name="l47"><span class="linenum">  47</span></a>      echo '&lt;/div&gt;&lt;/div&gt;'.&quot;\n\n&quot;;
<a name="l48"><span class="linenum">  48</span></a>  }
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">/**</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * Language selector</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> */</span>
<a name="l53"><span class="linenum">  53</span></a>  function <a class="function" onClick="logFunction('display_locale_selector')" href="../_functions/display_locale_selector.html" onMouseOver="funcPopup(event,'display_locale_selector')">display_locale_selector</a>()
<a name="l54"><span class="linenum">  54</span></a>  {
<a name="l55"><span class="linenum">  55</span></a>      global <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('locales')" href="../_variables/locales.html">$locales</a>, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>, <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>;
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>      static <a class="var it7801" onMouseOver="hilite(7801)" onMouseOut="lolite()" onClick="logVariable('selector_already_displayed')" href="../_variables/selector_already_displayed.html">$selector_already_displayed</a> = false;
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      if( <a class="var it7801" onMouseOver="hilite(7801)" onMouseOut="lolite()" onClick="logVariable('selector_already_displayed')" href="../_variables/selector_already_displayed.html">$selector_already_displayed</a> )
<a name="l60"><span class="linenum">  60</span></a>      {
<a name="l61"><span class="linenum">  61</span></a>          return;
<a name="l62"><span class="linenum">  62</span></a>      }
<a name="l63"><span class="linenum">  63</span></a>      <a class="var it7801" onMouseOver="hilite(7801)" onMouseOut="lolite()" onClick="logVariable('selector_already_displayed')" href="../_variables/selector_already_displayed.html">$selector_already_displayed</a> = true;
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      <a class="function" onClick="logFunction('block_open')" href="../_functions/block_open.html" onMouseOver="funcPopup(event,'block_open')">block_open</a>( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Language / Locale') );
<a name="l66"><span class="linenum">  66</span></a>      ?&gt;
<a name="l67"><span class="linenum">  67</span></a>      &lt;ul class=&quot;pager pull-right&quot; style=&quot;margin:0&quot;&gt;
<a name="l68"><span class="linenum">  68</span></a>          &lt;li class=&quot;next&quot;&gt;&lt;a href=&quot;index.php?action=localeinfo&amp;amp;locale=&lt;?php echo <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>; ?&gt;&quot;&gt;More languages &lt;span aria-hidden=&quot;true&quot;&gt;&amp;rarr;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
<a name="l69"><span class="linenum">  69</span></a>      &lt;/ul&gt;
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>      &lt;?php
<a name="l72"><span class="linenum">  72</span></a>      if( isset( <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('locales')" href="../_variables/locales.html">$locales</a>[ <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a> ] ) )
<a name="l73"><span class="linenum">  73</span></a>      {
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it7802" onMouseOver="hilite(7802)" onMouseOut="lolite()" onClick="logVariable('default_locale_option_title')" href="../_variables/default_locale_option_title.html">$default_locale_option_title</a> = <a class="function" onClick="logFunction('locale_flag')" href="../_functions/locale_flag.html" onMouseOver="funcPopup(event,'locale_flag')">locale_flag</a>( <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>, 'w16px', 'flag', '', false ).' '.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('locales')" href="../_variables/locales.html">$locales</a>[ <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a> ]['name'];
<a name="l75"><span class="linenum">  75</span></a>      }
<a name="l76"><span class="linenum">  76</span></a>      <a class="var it4926" onMouseOver="hilite(4926)" onMouseOut="lolite()" onClick="logVariable('locale_options')" href="../_variables/locale_options.html">$locale_options</a> = '';
<a name="l77"><span class="linenum">  77</span></a>      foreach( <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('locales')" href="../_variables/locales.html">$locales</a> as <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('lkey')" href="../_variables/lkey.html">$lkey</a> =&gt; <a class="var it7803" onMouseOver="hilite(7803)" onMouseOut="lolite()" onClick="logVariable('lvalue')" href="../_variables/lvalue.html">$lvalue</a> )
<a name="l78"><span class="linenum">  78</span></a>      {
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it4926" onMouseOver="hilite(4926)" onMouseOut="lolite()" onClick="logVariable('locale_options')" href="../_variables/locale_options.html">$locale_options</a> .= '&lt;li&gt;&lt;a href=&quot;index.php?locale='.<a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('lkey')" href="../_variables/lkey.html">$lkey</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('locale_flag')" href="../_functions/locale_flag.html" onMouseOver="funcPopup(event,'locale_flag')">locale_flag</a>( <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('lkey')" href="../_variables/lkey.html">$lkey</a>, 'w16px', 'flag', '', false ).' '.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( <a class="var it7803" onMouseOver="hilite(7803)" onMouseOut="lolite()" onClick="logVariable('lvalue')" href="../_variables/lvalue.html">$lvalue</a>['name'] ).'&lt;/a&gt;&lt;/li&gt;'.&quot;\n&quot;;
<a name="l80"><span class="linenum">  80</span></a>      }
<a name="l81"><span class="linenum">  81</span></a>      ?&gt;
<a name="l82"><span class="linenum">  82</span></a>      &lt;div class=&quot;btn-group install-language&quot;&gt;
<a name="l83"><span class="linenum">  83</span></a>          &lt;button type=&quot;button&quot; class=&quot;btn btn-default dropdown-toggle&quot; data-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;&gt;
<a name="l84"><span class="linenum">  84</span></a>              &lt;?php echo <a class="var it7802" onMouseOver="hilite(7802)" onMouseOut="lolite()" onClick="logVariable('default_locale_option_title')" href="../_variables/default_locale_option_title.html">$default_locale_option_title</a>; ?&gt;
<a name="l85"><span class="linenum">  85</span></a>              &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;
<a name="l86"><span class="linenum">  86</span></a>          &lt;/button&gt;
<a name="l87"><span class="linenum">  87</span></a>          &lt;ul class=&quot;dropdown-menu&quot; role=&quot;menu&quot;&gt;
<a name="l88"><span class="linenum">  88</span></a>          &lt;?php echo <a class="var it4926" onMouseOver="hilite(4926)" onMouseOut="lolite()" onClick="logVariable('locale_options')" href="../_variables/locale_options.html">$locale_options</a>; ?&gt;
<a name="l89"><span class="linenum">  89</span></a>          &lt;/ul&gt;
<a name="l90"><span class="linenum">  90</span></a>      &lt;/div&gt;
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>      &lt;noscript&gt;
<a name="l93"><span class="linenum">  93</span></a>          &lt;style type=&quot;text/css&quot;&gt;.install-language{display:none;}&lt;/style&gt;
<a name="l94"><span class="linenum">  94</span></a>          &lt;form action="<a class="filename" href="../index.php.html">index.php</a>" method=&quot;get&quot; class=&quot;form-inline&quot;&gt;
<a name="l95"><span class="linenum">  95</span></a>          &lt;select name=&quot;locale&quot; class=&quot;form-control&quot;&gt;
<a name="l96"><span class="linenum">  96</span></a>          &lt;?php
<a name="l97"><span class="linenum">  97</span></a>          foreach( <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('locales')" href="../_variables/locales.html">$locales</a> as <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('lkey')" href="../_variables/lkey.html">$lkey</a> =&gt; <a class="var it7803" onMouseOver="hilite(7803)" onMouseOut="lolite()" onClick="logVariable('lvalue')" href="../_variables/lvalue.html">$lvalue</a> )
<a name="l98"><span class="linenum">  98</span></a>          {
<a name="l99"><span class="linenum">  99</span></a>              echo '&lt;option'.( <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a> == <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('lkey')" href="../_variables/lkey.html">$lkey</a> ? ' selected=&quot;selected&quot;' : '' ).' value=&quot;'.<a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('lkey')" href="../_variables/lkey.html">$lkey</a>.'&quot;&gt;';
<a name="l100"><span class="linenum"> 100</span></a>              echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( <a class="var it7803" onMouseOver="hilite(7803)" onMouseOut="lolite()" onClick="logVariable('lvalue')" href="../_variables/lvalue.html">$lvalue</a>['name'] );
<a name="l101"><span class="linenum"> 101</span></a>              echo '&lt;/option&gt;';
<a name="l102"><span class="linenum"> 102</span></a>          }
<a name="l103"><span class="linenum"> 103</span></a>          ?&gt;
<a name="l104"><span class="linenum"> 104</span></a>          &lt;/select&gt;
<a name="l105"><span class="linenum"> 105</span></a>          &lt;input type=&quot;submit&quot; value=&quot;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Select as default language/locale'); ?&gt;&quot; class=&quot;btn btn-primary&quot; /&gt;
<a name="l106"><span class="linenum"> 106</span></a>          &lt;/form&gt;
<a name="l107"><span class="linenum"> 107</span></a>      &lt;/noscript&gt;
<a name="l108"><span class="linenum"> 108</span></a>      &lt;?php
<a name="l109"><span class="linenum"> 109</span></a>      <a class="function" onClick="logFunction('block_close')" href="../_functions/block_close.html" onMouseOver="funcPopup(event,'block_close')">block_close</a>();
<a name="l110"><span class="linenum"> 110</span></a>  }
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">/**</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment"> * Base config recap</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment"> */</span>
<a name="l115"><span class="linenum"> 115</span></a>  function <a class="function" onClick="logFunction('display_base_config_recap')" href="../_functions/display_base_config_recap.html" onMouseOver="funcPopup(event,'display_base_config_recap')">display_base_config_recap</a>()
<a name="l116"><span class="linenum"> 116</span></a>  {
<a name="l117"><span class="linenum"> 117</span></a>      global <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>, <a class="var it6826" onMouseOver="hilite(6826)" onMouseOut="lolite()" onClick="logVariable('conf_db_user')" href="../_variables/conf_db_user.html">$conf_db_user</a>, <a class="var it6827" onMouseOver="hilite(6827)" onMouseOut="lolite()" onClick="logVariable('conf_db_password')" href="../_variables/conf_db_password.html">$conf_db_password</a>, <a class="var it6828" onMouseOver="hilite(6828)" onMouseOut="lolite()" onClick="logVariable('conf_db_name')" href="../_variables/conf_db_name.html">$conf_db_name</a>, <a class="var it6829" onMouseOver="hilite(6829)" onMouseOut="lolite()" onClick="logVariable('conf_db_host')" href="../_variables/conf_db_host.html">$conf_db_host</a>, <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('tableprefix')" href="../_variables/tableprefix.html">$tableprefix</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, <a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('admin_email')" href="../_variables/admin_email.html">$admin_email</a>;
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>      static <a class="var it7804" onMouseOver="hilite(7804)" onMouseOut="lolite()" onClick="logVariable('base_config_recap_already_displayed')" href="../_variables/base_config_recap_already_displayed.html">$base_config_recap_already_displayed</a> = false;
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>      if( <a class="var it7804" onMouseOver="hilite(7804)" onMouseOut="lolite()" onClick="logVariable('base_config_recap_already_displayed')" href="../_variables/base_config_recap_already_displayed.html">$base_config_recap_already_displayed</a> )
<a name="l122"><span class="linenum"> 122</span></a>      {
<a name="l123"><span class="linenum"> 123</span></a>          return;
<a name="l124"><span class="linenum"> 124</span></a>      }
<a name="l125"><span class="linenum"> 125</span></a>      <a class="var it7804" onMouseOver="hilite(7804)" onMouseOut="lolite()" onClick="logVariable('base_config_recap_already_displayed')" href="../_variables/base_config_recap_already_displayed.html">$base_config_recap_already_displayed</a> = true;
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>      echo '&lt;br /&gt;';
<a name="l128"><span class="linenum"> 128</span></a>      <a class="function" onClick="logFunction('block_open')" href="../_functions/block_open.html" onMouseOver="funcPopup(event,'block_open')">block_open</a>( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Base config recap...') );
<a name="l129"><span class="linenum"> 129</span></a>      ?&gt;
<a name="l130"><span class="linenum"> 130</span></a>      &lt;p&gt;&lt;?php printf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('If you don\'t see correct settings here, STOP before going any further, and &lt;a %s&gt;update your base configuration&lt;/a&gt;.'), 'href=&quot;index.php?action=start&amp;amp;locale='.<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>.'&quot;' ) ?&gt;&lt;/p&gt;
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>      &lt;?php
<a name="l133"><span class="linenum"> 133</span></a>      if( !isset(<a class="var it6826" onMouseOver="hilite(6826)" onMouseOut="lolite()" onClick="logVariable('conf_db_user')" href="../_variables/conf_db_user.html">$conf_db_user</a>) ) <a class="var it6826" onMouseOver="hilite(6826)" onMouseOut="lolite()" onClick="logVariable('conf_db_user')" href="../_variables/conf_db_user.html">$conf_db_user</a> = <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['user'];
<a name="l134"><span class="linenum"> 134</span></a>      if( !isset(<a class="var it6827" onMouseOver="hilite(6827)" onMouseOut="lolite()" onClick="logVariable('conf_db_password')" href="../_variables/conf_db_password.html">$conf_db_password</a>) ) <a class="var it6827" onMouseOver="hilite(6827)" onMouseOut="lolite()" onClick="logVariable('conf_db_password')" href="../_variables/conf_db_password.html">$conf_db_password</a> = <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['password'];
<a name="l135"><span class="linenum"> 135</span></a>      if( !isset(<a class="var it6828" onMouseOver="hilite(6828)" onMouseOut="lolite()" onClick="logVariable('conf_db_name')" href="../_variables/conf_db_name.html">$conf_db_name</a>) ) <a class="var it6828" onMouseOver="hilite(6828)" onMouseOut="lolite()" onClick="logVariable('conf_db_name')" href="../_variables/conf_db_name.html">$conf_db_name</a> = <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['name'];
<a name="l136"><span class="linenum"> 136</span></a>      if( !isset(<a class="var it6829" onMouseOver="hilite(6829)" onMouseOut="lolite()" onClick="logVariable('conf_db_host')" href="../_variables/conf_db_host.html">$conf_db_host</a>) ) <a class="var it6829" onMouseOver="hilite(6829)" onMouseOut="lolite()" onClick="logVariable('conf_db_host')" href="../_variables/conf_db_host.html">$conf_db_host</a> = isset(<a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['host']) ? <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['host'] : 'localhost';
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>      echo '&lt;samp&gt;'.
<a name="l139"><span class="linenum"> 139</span></a>      <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('MySQL Username').': '.<a class="var it6826" onMouseOver="hilite(6826)" onMouseOut="lolite()" onClick="logVariable('conf_db_user')" href="../_variables/conf_db_user.html">$conf_db_user</a>.'&lt;br /&gt;'.
<a name="l140"><span class="linenum"> 140</span></a>      <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('MySQL Password').': '.((<a class="var it6827" onMouseOver="hilite(6827)" onMouseOut="lolite()" onClick="logVariable('conf_db_password')" href="../_variables/conf_db_password.html">$conf_db_password</a> != 'demopass' ? <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('(Set, but not shown for security reasons)') : 'demopass') ).'&lt;br /&gt;'.
<a name="l141"><span class="linenum"> 141</span></a>      <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('MySQL Database name').': '.<a class="var it6828" onMouseOver="hilite(6828)" onMouseOut="lolite()" onClick="logVariable('conf_db_name')" href="../_variables/conf_db_name.html">$conf_db_name</a>.'&lt;br /&gt;'.
<a name="l142"><span class="linenum"> 142</span></a>      <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('MySQL Host/Server').': '.<a class="var it6829" onMouseOver="hilite(6829)" onMouseOut="lolite()" onClick="logVariable('conf_db_host')" href="../_variables/conf_db_host.html">$conf_db_host</a>.'&lt;br /&gt;'.
<a name="l143"><span class="linenum"> 143</span></a>      <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('MySQL tables prefix').': '.<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('tableprefix')" href="../_variables/tableprefix.html">$tableprefix</a>.'&lt;br /&gt;&lt;br /&gt;'.
<a name="l144"><span class="linenum"> 144</span></a>      <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Base URL').': '.<a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>.'&lt;br /&gt;&lt;br /&gt;'.
<a name="l145"><span class="linenum"> 145</span></a>      <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Admin email').': '.<a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('admin_email')" href="../_variables/admin_email.html">$admin_email</a>.
<a name="l146"><span class="linenum"> 146</span></a>      '&lt;/samp&gt;';
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>      <a class="function" onClick="logFunction('block_close')" href="../_functions/block_close.html" onMouseOver="funcPopup(event,'block_close')">block_close</a>();
<a name="l149"><span class="linenum"> 149</span></a>  }
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">/**</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment"> * Install new DB.</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment"> */</span>
<a name="l155"><span class="linenum"> 155</span></a>  function <a class="function" onClick="logFunction('install_newdb')" href="../_functions/install_newdb.html" onMouseOver="funcPopup(event,'install_newdb')">install_newdb</a>()
<a name="l156"><span class="linenum"> 156</span></a>  {
<a name="l157"><span class="linenum"> 157</span></a>      global <a class="var it3593" onMouseOver="hilite(3593)" onMouseOut="lolite()" onClick="logVariable('new_db_version')" href="../_variables/new_db_version.html">$new_db_version</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../_variables/admin_url.html">$admin_url</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, <a class="var it3558" onMouseOver="hilite(3558)" onMouseOut="lolite()" onClick="logVariable('install_login')" href="../_variables/install_login.html">$install_login</a>, <a class="var it3560" onMouseOver="hilite(3560)" onMouseOut="lolite()" onClick="logVariable('random_password')" href="../_variables/random_password.html">$random_password</a>, <a class="var it3555" onMouseOver="hilite(3555)" onMouseOut="lolite()" onClick="logVariable('create_sample_contents')" href="../_variables/create_sample_contents.html">$create_sample_contents</a>;
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>      <span class="comment">/*</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">     * -----------------------------------------------------------------------------------</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">     * NEW DB: Create a plain new db structure + sample contents</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">     * -----------------------------------------------------------------------------------</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     */</span>
<a name="l164"><span class="linenum"> 164</span></a>      require_once <a class="phpfunction" onClick="logFunction('dirname')" href="../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__).'/_functions_create.php';
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> = <a class="function" onClick="logFunction('get_db_version')" href="../_functions/get_db_version.html" onMouseOver="funcPopup(event,'get_db_version')">get_db_version</a>() )
<a name="l167"><span class="linenum"> 167</span></a>      {
<a name="l168"><span class="linenum"> 168</span></a>          echo '&lt;p class=&quot;text-warning&quot;&gt;&lt;strong&gt;&lt;evo:warning&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('OOPS! It seems b2evolution is already installed!').'&lt;/evo:warning&gt;&lt;/strong&gt;&lt;/p&gt;';
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>          if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; <a class="var it3593" onMouseOver="hilite(3593)" onMouseOut="lolite()" onClick="logVariable('new_db_version')" href="../_variables/new_db_version.html">$new_db_version</a> )
<a name="l171"><span class="linenum"> 171</span></a>          {
<a name="l172"><span class="linenum"> 172</span></a>              echo '&lt;p&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Would you like to &lt;a %s&gt;upgrade your existing installation now&lt;/a&gt;?'), 'href=&quot;?action=evoupgrade&quot;' ).'&lt;/p&gt;';
<a name="l173"><span class="linenum"> 173</span></a>          }
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>          return;
<a name="l176"><span class="linenum"> 176</span></a>      }
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>      <span class="comment">/**</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * 1 - If current installation is local, test or intranet</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     *     Used to turn off gravatar and all ping plugins</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     *</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * @var integer</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     */</span>
<a name="l184"><span class="linenum"> 184</span></a>      <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('local_installation')" href="../_variables/local_installation.html">$local_installation</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'local_installation', 'integer', ( <a class="var it3555" onMouseOver="hilite(3555)" onMouseOut="lolite()" onClick="logVariable('create_sample_contents')" href="../_variables/create_sample_contents.html">$create_sample_contents</a> == 'all' ? <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="function" onClick="logFunction('check_local_installation')" href="../_functions/check_local_installation.html" onMouseOver="funcPopup(event,'check_local_installation')">check_local_installation</a>() ) : 0 ) );
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>      echo '&lt;h2&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Creating b2evolution tables...').'&lt;/h2&gt;';
<a name="l187"><span class="linenum"> 187</span></a>      <a class="function" onClick="logFunction('evo_flush')" href="../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l188"><span class="linenum"> 188</span></a>      <a class="function" onClick="logFunction('create_tables')" href="../_functions/create_tables.html" onMouseOver="funcPopup(event,'create_tables')">create_tables</a>();
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">    // Update the progress bar status</span>
<a name="l191"><span class="linenum"> 191</span></a>      <a class="function" onClick="logFunction('update_install_progress_bar')" href="../_functions/update_install_progress_bar.html" onMouseOver="funcPopup(event,'update_install_progress_bar')">update_install_progress_bar</a>();
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>      echo '&lt;h2&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Creating minimum default data...').'&lt;/h2&gt;';
<a name="l194"><span class="linenum"> 194</span></a>      <a class="function" onClick="logFunction('evo_flush')" href="../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l195"><span class="linenum"> 195</span></a>      <a class="function" onClick="logFunction('create_default_data')" href="../_functions/create_default_data.html" onMouseOver="funcPopup(event,'create_default_data')">create_default_data</a>();
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>      if( <a class="var it3555" onMouseOver="hilite(3555)" onMouseOut="lolite()" onClick="logVariable('create_sample_contents')" href="../_variables/create_sample_contents.html">$create_sample_contents</a> )
<a name="l198"><span class="linenum"> 198</span></a>      {
<a name="l199"><span class="linenum"> 199</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../_variables/Settings.html">$Settings</a>, <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a>;
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>          echo '&lt;h2&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Installing sample contents...').'&lt;/h2&gt;';
<a name="l202"><span class="linenum"> 202</span></a>          <a class="function" onClick="logFunction('evo_flush')" href="../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">        // We're gonna need some environment in order to create the demo contents...</span>
<a name="l205"><span class="linenum"> 205</span></a>          <a class="function" onClick="logFunction('load_class')" href="../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'settings/model/_generalsettings.class.php', 'GeneralSettings' );
<a name="l206"><span class="linenum"> 206</span></a>          <a class="function" onClick="logFunction('load_class')" href="../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'users/model/_usersettings.class.php', 'UserSettings' );
<a name="l207"><span class="linenum"> 207</span></a>          <span class="comment">/**</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">         * @var GeneralSettings</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">         */</span>
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../_variables/Settings.html">$Settings</a> = <span class="keyword">new </span><a class="class" onClick="logClass('GeneralSettings')" href="../_classes/generalsettings.html" onMouseOver="classPopup(event,'generalsettings')">GeneralSettings</a>();
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>          <span class="comment">/**</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">         * @var UserCache</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">         */</span>
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">        // Create $current_User object.</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">        // (Assigning by reference does not work with &quot;global&quot; keyword (PHP 5.2.8))</span>
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../_variables/GLOBALS.html">$GLOBALS</a>['current_User'] = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( 1 );
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>          <a class="function" onClick="logFunction('create_demo_contents')" href="../_functions/create_demo_contents.html" onMouseOver="funcPopup(event,'create_demo_contents')">create_demo_contents</a>();
<a name="l221"><span class="linenum"> 221</span></a>      }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">    // Update the progress bar status</span>
<a name="l224"><span class="linenum"> 224</span></a>      <a class="function" onClick="logFunction('update_install_progress_bar')" href="../_functions/update_install_progress_bar.html" onMouseOver="funcPopup(event,'update_install_progress_bar')">update_install_progress_bar</a>();
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>      <a class="function" onClick="logFunction('track_step')" href="../_functions/track_step.html" onMouseOver="funcPopup(event,'track_step')">track_step</a>( 'install-success' );
<a name="l227"><span class="linenum"> 227</span></a>  
<a name="l228"><span class="linenum"> 228</span></a>      <a class="var it7805" onMouseOver="hilite(7805)" onMouseOut="lolite()" onClick="logVariable('install_result_title')" href="../_variables/install_result_title.html">$install_result_title</a> = <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Installation successful!');
<a name="l229"><span class="linenum"> 229</span></a>      <a class="var it7806" onMouseOver="hilite(7806)" onMouseOut="lolite()" onClick="logVariable('install_result_body')" href="../_variables/install_result_body.html">$install_result_body</a> = '&lt;p&gt;&lt;strong&gt;'
<a name="l230"><span class="linenum"> 230</span></a>          .sprintf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Now you can &lt;a %s&gt;log in&lt;/a&gt; with the following credentials:'), 'href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../_variables/admin_url.html">$admin_url</a>.'&quot;' )
<a name="l231"><span class="linenum"> 231</span></a>          .'&lt;/strong&gt;&lt;/p&gt;'
<a name="l232"><span class="linenum"> 232</span></a>          .'&lt;table&gt;'
<a name="l233"><span class="linenum"> 233</span></a>              .'&lt;tr&gt;&lt;td&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Login' ).': &amp;nbsp;&lt;/td&gt;&lt;td&gt;&lt;strong&gt;&lt;evo:login&gt;'.( isset( <a class="var it3558" onMouseOver="hilite(3558)" onMouseOut="lolite()" onClick="logVariable('install_login')" href="../_variables/install_login.html">$install_login</a> ) ? <a class="var it3558" onMouseOver="hilite(3558)" onMouseOut="lolite()" onClick="logVariable('install_login')" href="../_variables/install_login.html">$install_login</a> : 'admin' ).'&lt;/evo:login&gt;&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;'
<a name="l234"><span class="linenum"> 234</span></a>              .'&lt;tr&gt;&lt;td&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Password' ).': &amp;nbsp;&lt;/td&gt;&lt;td&gt;&lt;strong&gt;&lt;evo:password&gt;'.<a class="var it3560" onMouseOver="hilite(3560)" onMouseOut="lolite()" onClick="logVariable('random_password')" href="../_variables/random_password.html">$random_password</a>.'&lt;/evo:password&gt;&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;'
<a name="l235"><span class="linenum"> 235</span></a>          .'&lt;/table&gt;'
<a name="l236"><span class="linenum"> 236</span></a>          .'&lt;br /&gt;&lt;p&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Note that password carefully! It is a &lt;em&gt;random&lt;/em&gt; password that is given to you when you install b2evolution. If you lose it, you will have to delete the database tables and re-install anew.').'&lt;/p&gt;';
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">    // Display installation data and instructions</span>
<a name="l239"><span class="linenum"> 239</span></a>      echo '&lt;h2&gt;'.<a class="var it7805" onMouseOver="hilite(7805)" onMouseOut="lolite()" onClick="logVariable('install_result_title')" href="../_variables/install_result_title.html">$install_result_title</a>.'&lt;/h2&gt;';
<a name="l240"><span class="linenum"> 240</span></a>      echo <a class="var it7806" onMouseOver="hilite(7806)" onMouseOut="lolite()" onClick="logVariable('install_result_body')" href="../_variables/install_result_body.html">$install_result_body</a>;
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">    // Modal window with installation data and instructions</span>
<a name="l243"><span class="linenum"> 243</span></a>      <a class="function" onClick="logFunction('display_install_result_window')" href="../_functions/display_install_result_window.html" onMouseOver="funcPopup(event,'display_install_result_window')">display_install_result_window</a>( <a class="var it7805" onMouseOver="hilite(7805)" onMouseOut="lolite()" onClick="logVariable('install_result_title')" href="../_variables/install_result_title.html">$install_result_title</a>, <a class="var it7806" onMouseOver="hilite(7806)" onMouseOut="lolite()" onClick="logVariable('install_result_body')" href="../_variables/install_result_body.html">$install_result_body</a> );
<a name="l244"><span class="linenum"> 244</span></a>  }
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">/**</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment"> * Begin install task.</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment"> * This will offer other display methods in the future</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment"> */</span>
<a name="l251"><span class="linenum"> 251</span></a>  function <a class="function" onClick="logFunction('task_begin')" href="../_functions/task_begin.html" onMouseOver="funcPopup(event,'task_begin')">task_begin</a>( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> )
<a name="l252"><span class="linenum"> 252</span></a>  {
<a name="l253"><span class="linenum"> 253</span></a>      echo <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>.&quot;\n&quot;;
<a name="l254"><span class="linenum"> 254</span></a>      <a class="function" onClick="logFunction('evo_flush')" href="../_functions/evo_flush.html" onMouseOver="funcPopup(event,'evo_flush')">evo_flush</a>();
<a name="l255"><span class="linenum"> 255</span></a>  }
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">/**</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment"> * End install task.</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment"> * This will offer other display methods in the future</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment"> */</span>
<a name="l262"><span class="linenum"> 262</span></a>  function <a class="function" onClick="logFunction('task_end')" href="../_functions/task_end.html" onMouseOver="funcPopup(event,'task_end')">task_end</a>( <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = 'OK.' )
<a name="l263"><span class="linenum"> 263</span></a>  {
<a name="l264"><span class="linenum"> 264</span></a>      echo <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>.&quot;&lt;br /&gt;\n&quot;;
<a name="l265"><span class="linenum"> 265</span></a>  }
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>  function <a class="function" onClick="logFunction('get_db_version')" href="../_functions/get_db_version.html" onMouseOver="funcPopup(event,'get_db_version')">get_db_version</a>()
<a name="l269"><span class="linenum"> 269</span></a>  {
<a name="l270"><span class="linenum"> 270</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('save_error_state')" href="../_functions/save_error_state.html" onMouseOver="funcPopup(event,'save_error_state')">save_error_state</a>();
<a name="l273"><span class="linenum"> 273</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('halt_on_error')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/halt_on_error.html">halt_on_error</a> = false;
<a name="l274"><span class="linenum"> 274</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('show_errors')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/show_errors.html">show_errors</a> = false;
<a name="l275"><span class="linenum"> 275</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('log_errors')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/log_errors.html">log_errors</a> = false;
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = NULL;
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>      if( <a class="function" onClick="logFunction('db_col_exists')" href="../_functions/db_col_exists.html" onMouseOver="funcPopup(event,'db_col_exists')">db_col_exists</a>( 'T_settings', 'set_name' ) )
<a name="l280"><span class="linenum"> 280</span></a>      { // we have <span class="keyword">new </span><a class="class" onClick="logClass('table')" href="../_classes/table.html" onMouseOver="classPopup(event,'table')">table</a> <a class="function" onClick="logFunction('format')" href="../_functions/format.html" onMouseOver="funcPopup(event,'format')">format</a> (since 0.9)
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( 'SELECT set_value FROM T_settings WHERE set_name = &quot;db_version&quot;' );
<a name="l282"><span class="linenum"> 282</span></a>      }
<a name="l283"><span class="linenum"> 283</span></a>      else
<a name="l284"><span class="linenum"> 284</span></a>      {
<a name="l285"><span class="linenum"> 285</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( 'SELECT db_version FROM T_settings' );
<a name="l286"><span class="linenum"> 286</span></a>      }
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('restore_error_state')" href="../_functions/restore_error_state.html" onMouseOver="funcPopup(event,'restore_error_state')">restore_error_state</a>();
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>;
<a name="l291"><span class="linenum"> 291</span></a>  }
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">/**</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment"> * Get default locale from db</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment"> */</span>
<a name="l297"><span class="linenum"> 297</span></a>  function <a class="function" onClick="logFunction('get_default_locale_from_db')" href="../_functions/get_default_locale_from_db.html" onMouseOver="funcPopup(event,'get_default_locale_from_db')">get_default_locale_from_db</a>()
<a name="l298"><span class="linenum"> 298</span></a>  {
<a name="l299"><span class="linenum"> 299</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>      if( empty( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a> ) )
<a name="l302"><span class="linenum"> 302</span></a>      { // DB doesn't exists yet
<a name="l303"><span class="linenum"> 303</span></a>          return NULL;
<a name="l304"><span class="linenum"> 304</span></a>      }
<a name="l305"><span class="linenum"> 305</span></a>  
<a name="l306"><span class="linenum"> 306</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('save_error_state')" href="../_functions/save_error_state.html" onMouseOver="funcPopup(event,'save_error_state')">save_error_state</a>();
<a name="l307"><span class="linenum"> 307</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('halt_on_error')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/halt_on_error.html">halt_on_error</a> = false;
<a name="l308"><span class="linenum"> 308</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('show_errors')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/show_errors.html">show_errors</a> = false;
<a name="l309"><span class="linenum"> 309</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('log_errors')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/log_errors.html">log_errors</a> = false;
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = NULL;
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>      if( <a class="function" onClick="logFunction('db_col_exists')" href="../_functions/db_col_exists.html" onMouseOver="funcPopup(event,'db_col_exists')">db_col_exists</a>( 'T_settings', 'set_name' ) )
<a name="l314"><span class="linenum"> 314</span></a>      {
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( 'SELECT set_value FROM T_settings WHERE set_name = &quot;default_locale&quot;' );
<a name="l316"><span class="linenum"> 316</span></a>      }
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('restore_error_state')" href="../_functions/restore_error_state.html" onMouseOver="funcPopup(event,'restore_error_state')">restore_error_state</a>();
<a name="l319"><span class="linenum"> 319</span></a>  
<a name="l320"><span class="linenum"> 320</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>;
<a name="l321"><span class="linenum"> 321</span></a>  }
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">/**</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment"> * @return boolean Does a given column name exist in DB?</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment"> */</span>
<a name="l327"><span class="linenum"> 327</span></a>  function <a class="function" onClick="logFunction('db_col_exists')" href="../_functions/db_col_exists.html" onMouseOver="funcPopup(event,'db_col_exists')">db_col_exists</a>( <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>, <a class="var it4283" onMouseOver="hilite(4283)" onMouseOut="lolite()" onClick="logVariable('col_name')" href="../_variables/col_name.html">$col_name</a> )
<a name="l328"><span class="linenum"> 328</span></a>  {
<a name="l329"><span class="linenum"> 329</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>      <a class="var it4283" onMouseOver="hilite(4283)" onMouseOut="lolite()" onClick="logVariable('col_name')" href="../_variables/col_name.html">$col_name</a> = <a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it4283" onMouseOver="hilite(4283)" onMouseOut="lolite()" onClick="logVariable('col_name')" href="../_variables/col_name.html">$col_name</a>);
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = false;
<a name="l334"><span class="linenum"> 334</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('save_error_state')" href="../_functions/save_error_state.html" onMouseOver="funcPopup(event,'save_error_state')">save_error_state</a>();
<a name="l335"><span class="linenum"> 335</span></a>      foreach( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>('SHOW COLUMNS FROM '.<a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>) as <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> )
<a name="l336"><span class="linenum"> 336</span></a>      {
<a name="l337"><span class="linenum"> 337</span></a>          if( <a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('Field')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../_variables/Field.html">Field</a>) == <a class="var it4283" onMouseOver="hilite(4283)" onMouseOut="lolite()" onClick="logVariable('col_name')" href="../_variables/col_name.html">$col_name</a> )
<a name="l338"><span class="linenum"> 338</span></a>          {
<a name="l339"><span class="linenum"> 339</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = true;
<a name="l340"><span class="linenum"> 340</span></a>              break;
<a name="l341"><span class="linenum"> 341</span></a>          }
<a name="l342"><span class="linenum"> 342</span></a>      }
<a name="l343"><span class="linenum"> 343</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('restore_error_state')" href="../_functions/restore_error_state.html" onMouseOver="funcPopup(event,'restore_error_state')">restore_error_state</a>();
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>;
<a name="l346"><span class="linenum"> 346</span></a>  }
<a name="l347"><span class="linenum"> 347</span></a>  
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">/**</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment"> * Clean up extra quotes in comments</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment"> */</span>
<a name="l352"><span class="linenum"> 352</span></a>  function <a class="function" onClick="logFunction('cleanup_comment_quotes')" href="../_functions/cleanup_comment_quotes.html" onMouseOver="funcPopup(event,'cleanup_comment_quotes')">cleanup_comment_quotes</a>()
<a name="l353"><span class="linenum"> 353</span></a>  {
<a name="l354"><span class="linenum"> 354</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l355"><span class="linenum"> 355</span></a>  
<a name="l356"><span class="linenum"> 356</span></a>      <a class="function" onClick="logFunction('task_begin')" href="../_functions/task_begin.html" onMouseOver="funcPopup(event,'task_begin')">task_begin</a>( 'Checking for extra quote escaping in comments... ' );
<a name="l357"><span class="linenum"> 357</span></a>      <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> = &quot;SELECT comment_ID, comment_content
<a name="l358"><span class="linenum"> 358</span></a>                              FROM T_comments
<a name="l359"><span class="linenum"> 359</span></a>                           WHERE comment_content LIKE '%\\\\\\\\\'%'
<a name="l360"><span class="linenum"> 360</span></a>                                   OR comment_content LIKE '%\\\\\\\\\&quot;%' &quot;;
<a name="l361"><span class="linenum"> 361</span></a>      <span class="comment">/* FP: the above looks overkill, but MySQL is really full of surprises...</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">                    tested on 4.0.14-nt */</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">    // echo $query;</span>
<a name="l364"><span class="linenum"> 364</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../_variables/rows.html">$rows</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a>, <a class="constant" onClick="logConstant('ARRAY_A')" href="../_constants/ARRAY_A.html" onMouseOver="constPopup(event,'ARRAY_A')">ARRAY_A</a> );
<a name="l365"><span class="linenum"> 365</span></a>      if( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('num_rows')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/num_rows.html">num_rows</a> )
<a name="l366"><span class="linenum"> 366</span></a>      {
<a name="l367"><span class="linenum"> 367</span></a>          echo 'Updating '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('num_rows')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/num_rows.html">num_rows</a>.' comments... ';
<a name="l368"><span class="linenum"> 368</span></a>          foreach( <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../_variables/rows.html">$rows</a> as <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> )
<a name="l369"><span class="linenum"> 369</span></a>          {
<a name="l370"><span class="linenum"> 370</span></a>              <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> = &quot;UPDATE T_comments
<a name="l371"><span class="linenum"> 371</span></a>                                  SET comment_content = &quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="phpfunction" onClick="logFunction('stripslashes')" href="../_functions/stripslashes.html" onMouseOver="phpfuncPopup(event,'stripslashes')">stripslashes</a>( <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>['comment_content'] ) ).&quot;
<a name="l372"><span class="linenum"> 372</span></a>                                  WHERE comment_ID = &quot;.<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>['comment_ID'];
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">            // echo '&lt;br /&gt;'.$query;</span>
<a name="l374"><span class="linenum"> 374</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../_variables/query.html">$query</a> );
<a name="l375"><span class="linenum"> 375</span></a>          }
<a name="l376"><span class="linenum"> 376</span></a>      }
<a name="l377"><span class="linenum"> 377</span></a>      <a class="function" onClick="logFunction('task_end')" href="../_functions/task_end.html" onMouseOver="funcPopup(event,'task_end')">task_end</a>();
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>  }
<a name="l380"><span class="linenum"> 380</span></a>  
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">/**</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment"> * Validate install requirements.</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment"> *</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment"> * @return array List of errors, empty array if ok.</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment"> */</span>
<a name="l387"><span class="linenum"> 387</span></a>  function <a class="function" onClick="logFunction('install_validate_requirements')" href="../_functions/install_validate_requirements.html" onMouseOver="funcPopup(event,'install_validate_requirements')">install_validate_requirements</a>()
<a name="l388"><span class="linenum"> 388</span></a>  {
<a name="l389"><span class="linenum"> 389</span></a>      <a class="var it4614" onMouseOver="hilite(4614)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a> = array();
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>      return <a class="var it4614" onMouseOver="hilite(4614)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>;
<a name="l392"><span class="linenum"> 392</span></a>  }
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">/**</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment"> * Insert default locales into T_locales.</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment"> */</span>
<a name="l398"><span class="linenum"> 398</span></a>  function <a class="function" onClick="logFunction('create_default_locales')" href="../_functions/create_default_locales.html" onMouseOver="funcPopup(event,'create_default_locales')">create_default_locales</a>()
<a name="l399"><span class="linenum"> 399</span></a>  {
<a name="l400"><span class="linenum"> 400</span></a>      <a class="function" onClick="logFunction('task_begin')" href="../_functions/task_begin.html" onMouseOver="funcPopup(event,'task_begin')">task_begin</a>( 'Activating default locales... ' );
<a name="l401"><span class="linenum"> 401</span></a>      <a class="function" onClick="logFunction('locale_insert_default')" href="../_functions/locale_insert_default.html" onMouseOver="funcPopup(event,'locale_insert_default')">locale_insert_default</a>();
<a name="l402"><span class="linenum"> 402</span></a>      <a class="function" onClick="logFunction('task_end')" href="../_functions/task_end.html" onMouseOver="funcPopup(event,'task_end')">task_end</a>();
<a name="l403"><span class="linenum"> 403</span></a>  }
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">/**</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment"> * Insert default settings into T_settings.</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment"> *</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment"> * It only writes those to DB, that get overridden (passed as array), or have</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment"> * no default in {@link _generalsettings.class.php} / {@link GeneralSettings::default}.</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment"> *</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment"> * @param array associative array (settings name =&gt; value to use), allows</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment"> *              overriding of defaults</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment"> */</span>
<a name="l415"><span class="linenum"> 415</span></a>  function <a class="function" onClick="logFunction('create_default_settings')" href="../_functions/create_default_settings.html" onMouseOver="funcPopup(event,'create_default_settings')">create_default_settings</a>( <a class="var it923" onMouseOver="hilite(923)" onMouseOut="lolite()" onClick="logVariable('override')" href="../_variables/override.html">$override</a> = array() )
<a name="l416"><span class="linenum"> 416</span></a>  {
<a name="l417"><span class="linenum"> 417</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it3593" onMouseOver="hilite(3593)" onMouseOut="lolite()" onClick="logVariable('new_db_version')" href="../_variables/new_db_version.html">$new_db_version</a>, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>;
<a name="l418"><span class="linenum"> 418</span></a>      global <a class="var it3548" onMouseOver="hilite(3548)" onMouseOut="lolite()" onClick="logVariable('admins_Group')" href="../_variables/admins_Group.html">$admins_Group</a>, <a class="var it3549" onMouseOver="hilite(3549)" onMouseOut="lolite()" onClick="logVariable('moderators_Group')" href="../_variables/moderators_Group.html">$moderators_Group</a>, <a class="var it3550" onMouseOver="hilite(3550)" onMouseOut="lolite()" onClick="logVariable('editors_Group')" href="../_variables/editors_Group.html">$editors_Group</a>, <a class="var it3551" onMouseOver="hilite(3551)" onMouseOut="lolite()" onClick="logVariable('users_Group')" href="../_variables/users_Group.html">$users_Group</a>, <a class="var it3552" onMouseOver="hilite(3552)" onMouseOut="lolite()" onClick="logVariable('suspect_Group')" href="../_variables/suspect_Group.html">$suspect_Group</a>, <a class="var it3553" onMouseOver="hilite(3553)" onMouseOut="lolite()" onClick="logVariable('spam_Group')" href="../_variables/spam_Group.html">$spam_Group</a>;
<a name="l419"><span class="linenum"> 419</span></a>      global <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a>, <a class="var it3555" onMouseOver="hilite(3555)" onMouseOut="lolite()" onClick="logVariable('create_sample_contents')" href="../_variables/create_sample_contents.html">$create_sample_contents</a>, <a class="var it7809" onMouseOver="hilite(7809)" onMouseOut="lolite()" onClick="logVariable('install_site_color')" href="../_variables/install_site_color.html">$install_site_color</a>, <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('local_installation')" href="../_variables/local_installation.html">$local_installation</a>;
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>      <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a> = array(
<a name="l422"><span class="linenum"> 422</span></a>          'db_version' =&gt; <a class="var it3593" onMouseOver="hilite(3593)" onMouseOut="lolite()" onClick="logVariable('new_db_version')" href="../_variables/new_db_version.html">$new_db_version</a>,
<a name="l423"><span class="linenum"> 423</span></a>          'default_locale' =&gt; <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>,
<a name="l424"><span class="linenum"> 424</span></a>          'newusers_grp_ID' =&gt; <a class="var it3551" onMouseOver="hilite(3551)" onMouseOut="lolite()" onClick="logVariable('users_Group')" href="../_variables/users_Group.html">$users_Group</a>-&gt;<a onClick="logVariable('ID')" class="var it10863" onMouseOver="hilite(10863)" onMouseOut="lolite()" href="../_variables/ID.html">ID</a>,
<a name="l425"><span class="linenum"> 425</span></a>          'evocache_foldername' =&gt; '_evocache',
<a name="l426"><span class="linenum"> 426</span></a>          'newusers_canregister' =&gt; 'yes',
<a name="l427"><span class="linenum"> 427</span></a>          'registration_is_public' =&gt; 1,
<a name="l428"><span class="linenum"> 428</span></a>          'quick_registration' =&gt; 1,
<a name="l429"><span class="linenum"> 429</span></a>      );
<a name="l430"><span class="linenum"> 430</span></a>      if( <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> )
<a name="l431"><span class="linenum"> 431</span></a>      {
<a name="l432"><span class="linenum"> 432</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['gender_colored'] = 1;
<a name="l433"><span class="linenum"> 433</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['registration_require_country'] = 1;
<a name="l434"><span class="linenum"> 434</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['registration_require_gender'] = 'required';
<a name="l435"><span class="linenum"> 435</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['location_country'] = 'required';
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['location_region'] = 'required';
<a name="l437"><span class="linenum"> 437</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['location_subregion'] = 'required';
<a name="l438"><span class="linenum"> 438</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['location_city'] = 'required';
<a name="l439"><span class="linenum"> 439</span></a>      }
<a name="l440"><span class="linenum"> 440</span></a>      if( !empty( <a class="var it7809" onMouseOver="hilite(7809)" onMouseOut="lolite()" onClick="logVariable('install_site_color')" href="../_variables/install_site_color.html">$install_site_color</a> ) )
<a name="l441"><span class="linenum"> 441</span></a>      { // Set default site color
<a name="l442"><span class="linenum"> 442</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['site_color'] = <a class="var it7809" onMouseOver="hilite(7809)" onMouseOut="lolite()" onClick="logVariable('install_site_color')" href="../_variables/install_site_color.html">$install_site_color</a>;
<a name="l443"><span class="linenum"> 443</span></a>      }
<a name="l444"><span class="linenum"> 444</span></a>      if( !empty( <a class="var it3552" onMouseOver="hilite(3552)" onMouseOut="lolite()" onClick="logVariable('suspect_Group')" href="../_variables/suspect_Group.html">$suspect_Group</a> ) )
<a name="l445"><span class="linenum"> 445</span></a>      { // Set default antispam suspicious group
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['antispam_suspicious_group'] = <a class="var it3552" onMouseOver="hilite(3552)" onMouseOut="lolite()" onClick="logVariable('suspect_Group')" href="../_variables/suspect_Group.html">$suspect_Group</a>-&gt;<a onClick="logVariable('ID')" class="var it10864" onMouseOver="hilite(10864)" onMouseOut="lolite()" href="../_variables/ID.html">ID</a>;
<a name="l447"><span class="linenum"> 447</span></a>      }
<a name="l448"><span class="linenum"> 448</span></a>      <a class="var it7810" onMouseOver="hilite(7810)" onMouseOut="lolite()" onClick="logVariable('antispam_trust_groups')" href="../_variables/antispam_trust_groups.html">$antispam_trust_groups</a> = array();
<a name="l449"><span class="linenum"> 449</span></a>      if( !empty( <a class="var it3548" onMouseOver="hilite(3548)" onMouseOut="lolite()" onClick="logVariable('admins_Group')" href="../_variables/admins_Group.html">$admins_Group</a> ) )
<a name="l450"><span class="linenum"> 450</span></a>      {
<a name="l451"><span class="linenum"> 451</span></a>          <a class="var it7810" onMouseOver="hilite(7810)" onMouseOut="lolite()" onClick="logVariable('antispam_trust_groups')" href="../_variables/antispam_trust_groups.html">$antispam_trust_groups</a>[] = <a class="var it3548" onMouseOver="hilite(3548)" onMouseOut="lolite()" onClick="logVariable('admins_Group')" href="../_variables/admins_Group.html">$admins_Group</a>-&gt;<a onClick="logVariable('ID')" class="var it10865" onMouseOver="hilite(10865)" onMouseOut="lolite()" href="../_variables/ID.html">ID</a>;
<a name="l452"><span class="linenum"> 452</span></a>      }
<a name="l453"><span class="linenum"> 453</span></a>      if( !empty( <a class="var it3549" onMouseOver="hilite(3549)" onMouseOut="lolite()" onClick="logVariable('moderators_Group')" href="../_variables/moderators_Group.html">$moderators_Group</a> ) )
<a name="l454"><span class="linenum"> 454</span></a>      {
<a name="l455"><span class="linenum"> 455</span></a>          <a class="var it7810" onMouseOver="hilite(7810)" onMouseOut="lolite()" onClick="logVariable('antispam_trust_groups')" href="../_variables/antispam_trust_groups.html">$antispam_trust_groups</a>[] = <a class="var it3549" onMouseOver="hilite(3549)" onMouseOut="lolite()" onClick="logVariable('moderators_Group')" href="../_variables/moderators_Group.html">$moderators_Group</a>-&gt;<a onClick="logVariable('ID')" class="var it10866" onMouseOver="hilite(10866)" onMouseOut="lolite()" href="../_variables/ID.html">ID</a>;
<a name="l456"><span class="linenum"> 456</span></a>      }
<a name="l457"><span class="linenum"> 457</span></a>      if( !empty( <a class="var it3550" onMouseOver="hilite(3550)" onMouseOut="lolite()" onClick="logVariable('editors_Group')" href="../_variables/editors_Group.html">$editors_Group</a> ) )
<a name="l458"><span class="linenum"> 458</span></a>      {
<a name="l459"><span class="linenum"> 459</span></a>          <a class="var it7810" onMouseOver="hilite(7810)" onMouseOut="lolite()" onClick="logVariable('antispam_trust_groups')" href="../_variables/antispam_trust_groups.html">$antispam_trust_groups</a>[] = <a class="var it3550" onMouseOver="hilite(3550)" onMouseOut="lolite()" onClick="logVariable('editors_Group')" href="../_variables/editors_Group.html">$editors_Group</a>-&gt;<a onClick="logVariable('ID')" class="var it10867" onMouseOver="hilite(10867)" onMouseOut="lolite()" href="../_variables/ID.html">ID</a>;
<a name="l460"><span class="linenum"> 460</span></a>      }
<a name="l461"><span class="linenum"> 461</span></a>      if( !empty( <a class="var it3553" onMouseOver="hilite(3553)" onMouseOut="lolite()" onClick="logVariable('spam_Group')" href="../_variables/spam_Group.html">$spam_Group</a> ) )
<a name="l462"><span class="linenum"> 462</span></a>      {
<a name="l463"><span class="linenum"> 463</span></a>          <a class="var it7810" onMouseOver="hilite(7810)" onMouseOut="lolite()" onClick="logVariable('antispam_trust_groups')" href="../_variables/antispam_trust_groups.html">$antispam_trust_groups</a>[] = <a class="var it3553" onMouseOver="hilite(3553)" onMouseOut="lolite()" onClick="logVariable('spam_Group')" href="../_variables/spam_Group.html">$spam_Group</a>-&gt;<a onClick="logVariable('ID')" class="var it10868" onMouseOver="hilite(10868)" onMouseOut="lolite()" href="../_variables/ID.html">ID</a>;
<a name="l464"><span class="linenum"> 464</span></a>      }
<a name="l465"><span class="linenum"> 465</span></a>      if( <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7810" onMouseOver="hilite(7810)" onMouseOut="lolite()" onClick="logVariable('antispam_trust_groups')" href="../_variables/antispam_trust_groups.html">$antispam_trust_groups</a> ) &gt; 0 )
<a name="l466"><span class="linenum"> 466</span></a>      { // Set default antispam trust group
<a name="l467"><span class="linenum"> 467</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['antispam_trust_groups'] = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it7810" onMouseOver="hilite(7810)" onMouseOut="lolite()" onClick="logVariable('antispam_trust_groups')" href="../_variables/antispam_trust_groups.html">$antispam_trust_groups</a> );
<a name="l468"><span class="linenum"> 468</span></a>      }
<a name="l469"><span class="linenum"> 469</span></a>      if( <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('local_installation')" href="../_variables/local_installation.html">$local_installation</a> )
<a name="l470"><span class="linenum"> 470</span></a>      { // Current installation is local
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">        // Turn off gravatar and use 'Default gravatars' = 'Gravatar'</span>
<a name="l472"><span class="linenum"> 472</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['use_gravatar'] = 0;
<a name="l473"><span class="linenum"> 473</span></a>          <a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>['default_gravatar'] = '';
<a name="l474"><span class="linenum"> 474</span></a>      }
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>      <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>), <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it923" onMouseOver="hilite(923)" onMouseOut="lolite()" onClick="logVariable('override')" href="../_variables/override.html">$override</a>) );
<a name="l477"><span class="linenum"> 477</span></a>      <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> );
<a name="l478"><span class="linenum"> 478</span></a>      <a class="var it7811" onMouseOver="hilite(7811)" onMouseOut="lolite()" onClick="logVariable('insertvalues')" href="../_variables/insertvalues.html">$insertvalues</a> = array();
<a name="l479"><span class="linenum"> 479</span></a>      foreach( <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> as <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> )
<a name="l480"><span class="linenum"> 480</span></a>      {
<a name="l481"><span class="linenum"> 481</span></a>          if( isset(<a class="var it923" onMouseOver="hilite(923)" onMouseOut="lolite()" onClick="logVariable('override')" href="../_variables/override.html">$override</a>[<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>]) )
<a name="l482"><span class="linenum"> 482</span></a>          {
<a name="l483"><span class="linenum"> 483</span></a>              <a class="var it7811" onMouseOver="hilite(7811)" onMouseOut="lolite()" onClick="logVariable('insertvalues')" href="../_variables/insertvalues.html">$insertvalues</a>[] = '('.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it923" onMouseOver="hilite(923)" onMouseOut="lolite()" onClick="logVariable('override')" href="../_variables/override.html">$override</a>[<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>]).')';
<a name="l484"><span class="linenum"> 484</span></a>          }
<a name="l485"><span class="linenum"> 485</span></a>          else
<a name="l486"><span class="linenum"> 486</span></a>          {
<a name="l487"><span class="linenum"> 487</span></a>              <a class="var it7811" onMouseOver="hilite(7811)" onMouseOut="lolite()" onClick="logVariable('insertvalues')" href="../_variables/insertvalues.html">$insertvalues</a>[] = '('.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it2620" onMouseOver="hilite(2620)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../_variables/defaults.html">$defaults</a>[<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>]).')';
<a name="l488"><span class="linenum"> 488</span></a>          }
<a name="l489"><span class="linenum"> 489</span></a>      }
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>      <a class="function" onClick="logFunction('task_begin')" href="../_functions/task_begin.html" onMouseOver="funcPopup(event,'task_begin')">task_begin</a>( 'Creating default settings'.( <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it923" onMouseOver="hilite(923)" onMouseOut="lolite()" onClick="logVariable('override')" href="../_variables/override.html">$override</a>) ? ' (with '.<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it923" onMouseOver="hilite(923)" onMouseOut="lolite()" onClick="logVariable('override')" href="../_variables/override.html">$override</a>).' existing values)' : '' ).'... ' );
<a name="l492"><span class="linenum"> 492</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>(
<a name="l493"><span class="linenum"> 493</span></a>          &quot;INSERT INTO T_settings (set_name, set_value)
<a name="l494"><span class="linenum"> 494</span></a>          VALUES &quot;.<a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it7811" onMouseOver="hilite(7811)" onMouseOut="lolite()" onClick="logVariable('insertvalues')" href="../_variables/insertvalues.html">$insertvalues</a> ) );
<a name="l495"><span class="linenum"> 495</span></a>      <a class="function" onClick="logFunction('task_end')" href="../_functions/task_end.html" onMouseOver="funcPopup(event,'task_end')">task_end</a>();
<a name="l496"><span class="linenum"> 496</span></a>  }
<a name="l497"><span class="linenum"> 497</span></a>  
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">/**</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment"> * Install basic skins.</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment"> */</span>
<a name="l502"><span class="linenum"> 502</span></a>  function <a class="function" onClick="logFunction('install_basic_skins')" href="../_functions/install_basic_skins.html" onMouseOver="funcPopup(event,'install_basic_skins')">install_basic_skins</a>( <a class="var it7812" onMouseOver="hilite(7812)" onMouseOut="lolite()" onClick="logVariable('install_mobile_skins')" href="../_variables/install_mobile_skins.html">$install_mobile_skins</a> = true )
<a name="l503"><span class="linenum"> 503</span></a>  {
<a name="l504"><span class="linenum"> 504</span></a>      <a class="function" onClick="logFunction('load_funcs')" href="../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'skins/_skin.funcs.php' );
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>      <a class="function" onClick="logFunction('task_begin')" href="../_functions/task_begin.html" onMouseOver="funcPopup(event,'task_begin')">task_begin</a>( 'Installing default skins... ' );
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">    // Note: Skin #1 will we used by Home</span>
<a name="l509"><span class="linenum"> 509</span></a>      skin_install( 'bootstrap_main_skin' );
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">    // Note: Skin #2 will we used by Blog A and Blog B</span>
<a name="l512"><span class="linenum"> 512</span></a>      skin_install( 'bootstrap_blog_skin' );
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">    // Note: Skin #3 will we used by Photos</span>
<a name="l515"><span class="linenum"> 515</span></a>      skin_install( 'bootstrap_gallery_skin' );
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">    // Note: Skin #4 will we used by Forums</span>
<a name="l518"><span class="linenum"> 518</span></a>      skin_install( 'bootstrap_forums_skin' );
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">    // Note: Skin #5 will we used by Manual</span>
<a name="l521"><span class="linenum"> 521</span></a>      skin_install( 'bootstrap_manual_skin' );
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>      skin_install( 'asevo' );
<a name="l524"><span class="linenum"> 524</span></a>      skin_install( 'dating_mood' );
<a name="l525"><span class="linenum"> 525</span></a>      skin_install( 'evocamp' );
<a name="l526"><span class="linenum"> 526</span></a>      skin_install( 'evopress' );
<a name="l527"><span class="linenum"> 527</span></a>      skin_install( 'forums' );
<a name="l528"><span class="linenum"> 528</span></a>      skin_install( 'manual' );
<a name="l529"><span class="linenum"> 529</span></a>      skin_install( 'photoalbums' );
<a name="l530"><span class="linenum"> 530</span></a>      skin_install( 'photoblog' );
<a name="l531"><span class="linenum"> 531</span></a>      skin_install( 'pixelgreen' );
<a name="l532"><span class="linenum"> 532</span></a>      skin_install( 'pureforums' );
<a name="l533"><span class="linenum"> 533</span></a>      if( <a class="var it7812" onMouseOver="hilite(7812)" onMouseOut="lolite()" onClick="logVariable('install_mobile_skins')" href="../_variables/install_mobile_skins.html">$install_mobile_skins</a> )
<a name="l534"><span class="linenum"> 534</span></a>      {
<a name="l535"><span class="linenum"> 535</span></a>          skin_install( 'touch' );
<a name="l536"><span class="linenum"> 536</span></a>      }
<a name="l537"><span class="linenum"> 537</span></a>      skin_install( '_atom' );
<a name="l538"><span class="linenum"> 538</span></a>      skin_install( '_rss2' );
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>      <a class="function" onClick="logFunction('task_end')" href="../_functions/task_end.html" onMouseOver="funcPopup(event,'task_end')">task_end</a>();
<a name="l541"><span class="linenum"> 541</span></a>  }
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">/**</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment"> * Install basic plugins.</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment"> *</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment"> * This gets called separately on fresh installs.</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment"> *</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment"> * {@internal</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment"> * NOTE: this won't call the &quot;AfterInstall&quot; method on the plugin nor install its DB schema.</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment"> *       This get done in the plugins controller, on manually installing a plugin.</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment"> *</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment"> * If you change the plugins here, please also adjust {@link InstallUnitTestCase::basic_plugins}.</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment"> * }}</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment"> *</span>
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment"> * @param integer Old DB version, so that only new plugins gets installed</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment"> */</span>
<a name="l558"><span class="linenum"> 558</span></a>  function <a class="function" onClick="logFunction('install_basic_plugins')" href="../_functions/install_basic_plugins.html" onMouseOver="funcPopup(event,'install_basic_plugins')">install_basic_plugins</a>( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> = 0 )
<a name="l559"><span class="linenum"> 559</span></a>  {
<a name="l560"><span class="linenum"> 560</span></a>      <span class="comment">/**</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">     * @var Plugins_admin</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment">     */</span>
<a name="l563"><span class="linenum"> 563</span></a>      global <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../_variables/Plugins_admin.html">$Plugins_admin</a>, <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a>;
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>      <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../_variables/Plugins_admin.html">$Plugins_admin</a> = &amp; get_Plugins_admin();
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">    // Create global $Plugins instance, which is required during installation of basic plugins,</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">    // not only for the ones getting installed, but also during e.g. count_regs(), which instantiates</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">    // each plugin (which may then use (User)Settings in PluginInit (through Plugin::__get)).</span>
<a name="l570"><span class="linenum"> 570</span></a>      <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../_variables/GLOBALS.html">$GLOBALS</a>['Plugins'] = &amp; <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../_variables/Plugins_admin.html">$Plugins_admin</a>;
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 9100 )
<a name="l573"><span class="linenum"> 573</span></a>      {
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">        // Toolbars:</span>
<a name="l575"><span class="linenum"> 575</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'quicktags_plugin' );
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">        // Renderers:</span>
<a name="l577"><span class="linenum"> 577</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'auto_p_plugin' );
<a name="l578"><span class="linenum"> 578</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'autolinks_plugin' );
<a name="l579"><span class="linenum"> 579</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'texturize_plugin' );
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">        // SkinTags:</span>
<a name="l582"><span class="linenum"> 582</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'calendar_plugin' );
<a name="l583"><span class="linenum"> 583</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'archives_plugin' );
<a name="l584"><span class="linenum"> 584</span></a>      }
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 9290 )
<a name="l587"><span class="linenum"> 587</span></a>      {
<a name="l588"><span class="linenum"> 588</span></a>          if( <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> )
<a name="l589"><span class="linenum"> 589</span></a>          {
<a name="l590"><span class="linenum"> 590</span></a>              <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'smilies_plugin' );
<a name="l591"><span class="linenum"> 591</span></a>          }
<a name="l592"><span class="linenum"> 592</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'videoplug_plugin' );
<a name="l593"><span class="linenum"> 593</span></a>      }
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 9330 )
<a name="l596"><span class="linenum"> 596</span></a>      { // Upgrade to 1.9-beta
<a name="l597"><span class="linenum"> 597</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'ping_b2evonet_plugin' );
<a name="l598"><span class="linenum"> 598</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'ping_pingomatic_plugin' );
<a name="l599"><span class="linenum"> 599</span></a>      }
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 9930 )
<a name="l602"><span class="linenum"> 602</span></a>      { // Upgrade to 3.1.0
<a name="l603"><span class="linenum"> 603</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'tinymce_plugin' );
<a name="l604"><span class="linenum"> 604</span></a>      }
<a name="l605"><span class="linenum"> 605</span></a>  
<a name="l606"><span class="linenum"> 606</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 9940 )
<a name="l607"><span class="linenum"> 607</span></a>      { // Upgrade to 3.2.0
<a name="l608"><span class="linenum"> 608</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'twitter_plugin' );
<a name="l609"><span class="linenum"> 609</span></a>      }
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 10300 )
<a name="l612"><span class="linenum"> 612</span></a>      { // Upgrade to 5.0.0
<a name="l613"><span class="linenum"> 613</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'flowplayer_plugin' );
<a name="l614"><span class="linenum"> 614</span></a>  
<a name="l615"><span class="linenum"> 615</span></a>          if( <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> )
<a name="l616"><span class="linenum"> 616</span></a>          {
<a name="l617"><span class="linenum"> 617</span></a>              <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'google_maps_plugin' );
<a name="l618"><span class="linenum"> 618</span></a>          }
<a name="l619"><span class="linenum"> 619</span></a>      }
<a name="l620"><span class="linenum"> 620</span></a>  
<a name="l621"><span class="linenum"> 621</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 11000 )
<a name="l622"><span class="linenum"> 622</span></a>      { // Upgrade to 5.0.0-alpha-4
<a name="l623"><span class="linenum"> 623</span></a>          if( <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> )
<a name="l624"><span class="linenum"> 624</span></a>          {
<a name="l625"><span class="linenum"> 625</span></a>              <a class="var it7813" onMouseOver="hilite(7813)" onMouseOut="lolite()" onClick="logVariable('captcha_qstn_plugin_settings')" href="../_variables/captcha_qstn_plugin_settings.html">$captcha_qstn_plugin_settings</a> = array(
<a name="l626"><span class="linenum"> 626</span></a>                      'questions' =&gt; <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('What is the color of the sky? blue|grey|gray|dark').&quot;\r\n&quot;.
<a name="l627"><span class="linenum"> 627</span></a>                                                   <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('What animal is Bugs Bunny? rabbit|a rabbit').&quot;\r\n&quot;.
<a name="l628"><span class="linenum"> 628</span></a>                                                   <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('What color is a carrot? orange|yellow').&quot;\r\n&quot;.
<a name="l629"><span class="linenum"> 629</span></a>                                                   <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('What color is a tomato? red')
<a name="l630"><span class="linenum"> 630</span></a>                  );
<a name="l631"><span class="linenum"> 631</span></a>          }
<a name="l632"><span class="linenum"> 632</span></a>          else
<a name="l633"><span class="linenum"> 633</span></a>          {
<a name="l634"><span class="linenum"> 634</span></a>              <a class="var it7813" onMouseOver="hilite(7813)" onMouseOut="lolite()" onClick="logVariable('captcha_qstn_plugin_settings')" href="../_variables/captcha_qstn_plugin_settings.html">$captcha_qstn_plugin_settings</a> = array();
<a name="l635"><span class="linenum"> 635</span></a>          }
<a name="l636"><span class="linenum"> 636</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'captcha_qstn_plugin', true, <a class="var it7813" onMouseOver="hilite(7813)" onMouseOut="lolite()" onClick="logVariable('captcha_qstn_plugin_settings')" href="../_variables/captcha_qstn_plugin_settings.html">$captcha_qstn_plugin_settings</a> );
<a name="l637"><span class="linenum"> 637</span></a>      }
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 11100 )
<a name="l640"><span class="linenum"> 640</span></a>      { // Upgrade to 5.0.0-alpha-5
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">        // antispam</span>
<a name="l642"><span class="linenum"> 642</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'basic_antispam_plugin' );
<a name="l643"><span class="linenum"> 643</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'geoip_plugin' );
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">        // files</span>
<a name="l645"><span class="linenum"> 645</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'html5_mediaelementjs_plugin' );
<a name="l646"><span class="linenum"> 646</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'html5_videojs_plugin' );
<a name="l647"><span class="linenum"> 647</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'watermark_plugin', <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> );
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">        // ping</span>
<a name="l649"><span class="linenum"> 649</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'generic_ping_plugin' );
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">        // rendering</span>
<a name="l651"><span class="linenum"> 651</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'escapecode_plugin' );
<a name="l652"><span class="linenum"> 652</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'bbcode_plugin', <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> );
<a name="l653"><span class="linenum"> 653</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'star_plugin', <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> );
<a name="l654"><span class="linenum"> 654</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'prism_plugin', <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> );
<a name="l655"><span class="linenum"> 655</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'code_highlight_plugin', <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> );
<a name="l656"><span class="linenum"> 656</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'gmcode_plugin' );
<a name="l657"><span class="linenum"> 657</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'wacko_plugin' );
<a name="l658"><span class="linenum"> 658</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'wikilinks_plugin' );
<a name="l659"><span class="linenum"> 659</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'wikitables_plugin' );
<a name="l660"><span class="linenum"> 660</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'markdown_plugin' );
<a name="l661"><span class="linenum"> 661</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'infodots_plugin', <a class="var it1073" onMouseOver="hilite(1073)" onMouseOut="lolite()" onClick="logVariable('test_install_all_features')" href="../_variables/test_install_all_features.html">$test_install_all_features</a> );
<a name="l662"><span class="linenum"> 662</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'widescroll_plugin' );
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment">        // widget</span>
<a name="l664"><span class="linenum"> 664</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'facebook_plugin' );
<a name="l665"><span class="linenum"> 665</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'whosonline_plugin' );
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">        // Unclassified</span>
<a name="l667"><span class="linenum"> 667</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'bookmarklet_plugin' );
<a name="l668"><span class="linenum"> 668</span></a>      }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 11200 )
<a name="l671"><span class="linenum"> 671</span></a>      { // Upgrade to 5.1.3-stable
<a name="l672"><span class="linenum"> 672</span></a>          <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( 'shortcodes_plugin' );
<a name="l673"><span class="linenum"> 673</span></a>      }
<a name="l674"><span class="linenum"> 674</span></a>  }
<a name="l675"><span class="linenum"> 675</span></a>  
<a name="l676"><span class="linenum"> 676</span></a>  
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">/**</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment"> * Install plugin</span>
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment"> *</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment"> * @param string Plugin name</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment"> * @param boolean TRUE - to activate plugin</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment"> * @param array Plugin settings</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment"> * @return true on success</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment"> */</span>
<a name="l685"><span class="linenum"> 685</span></a>  function <a class="function" onClick="logFunction('install_plugin')" href="../_functions/install_plugin.html" onMouseOver="funcPopup(event,'install_plugin')">install_plugin</a>( <a class="var it7203" onMouseOver="hilite(7203)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it7814" onMouseOver="hilite(7814)" onMouseOut="lolite()" onClick="logVariable('activate')" href="../_variables/activate.html">$activate</a> = true, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> = array() )
<a name="l686"><span class="linenum"> 686</span></a>  {
<a name="l687"><span class="linenum"> 687</span></a>      <span class="comment">/**</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">     * @var Plugins_admin</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">     */</span>
<a name="l690"><span class="linenum"> 690</span></a>      global <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../_variables/Plugins_admin.html">$Plugins_admin</a>;
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>      <a class="function" onClick="logFunction('task_begin')" href="../_functions/task_begin.html" onMouseOver="funcPopup(event,'task_begin')">task_begin</a>( 'Installing plugin: '.<a class="var it7203" onMouseOver="hilite(7203)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>.'... ' );
<a name="l693"><span class="linenum"> 693</span></a>      <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a> = &amp; <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../_variables/Plugins_admin.html">$Plugins_admin</a>-&gt;<a class="function" onClick="logFunction('install')" href="../_functions/install.html" onMouseOver="funcPopup(event,'install')">install</a>( <a class="var it7203" onMouseOver="hilite(7203)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'broken' ); <span class="comment">// &quot;broken&quot; by default, gets adjusted later</span>
<a name="l694"><span class="linenum"> 694</span></a>      if( ! <a class="phpfunction" onClick="logFunction('is_a')" href="../_functions/is_a.html" onMouseOver="phpfuncPopup(event,'is_a')">is_a</a>( <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>, 'Plugin' ) )
<a name="l695"><span class="linenum"> 695</span></a>      { // Broken plugin
<a name="l696"><span class="linenum"> 696</span></a>          echo '&lt;span class=&quot;text-danger&quot;&gt;&lt;evo:error&gt;'.<a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>.'&lt;/evo:error&gt;&lt;/span&gt;&lt;br /&gt;'.&quot;\n&quot;;
<a name="l697"><span class="linenum"> 697</span></a>          return false;
<a name="l698"><span class="linenum"> 698</span></a>      }
<a name="l699"><span class="linenum"> 699</span></a>  
<a name="l700"><span class="linenum"> 700</span></a>      <a class="function" onClick="logFunction('load_funcs')" href="../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('plugins/_plugin.funcs.php');
<a name="l701"><span class="linenum"> 701</span></a>      <a class="function" onClick="logFunction('install_plugin_db_schema_action')" href="../_functions/install_plugin_db_schema_action.html" onMouseOver="funcPopup(event,'install_plugin_db_schema_action')">install_plugin_db_schema_action</a>( <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>, true );
<a name="l702"><span class="linenum"> 702</span></a>  
<a name="l703"><span class="linenum"> 703</span></a>      if( ! empty( <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> ) )
<a name="l704"><span class="linenum"> 704</span></a>      { // Set plugin settings
<a name="l705"><span class="linenum"> 705</span></a>          foreach( <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> as <a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../_variables/setting_name.html">$setting_name</a> =&gt; <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('setting_value')" href="../_variables/setting_value.html">$setting_value</a> )
<a name="l706"><span class="linenum"> 706</span></a>          {
<a name="l707"><span class="linenum"> 707</span></a>              <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>-&gt;<a onClick="logVariable('Settings')" class="var it10869" onMouseOver="hilite(10869)" onMouseOut="lolite()" href="../_variables/Settings.html">Settings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../_variables/setting_name.html">$setting_name</a>, <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('setting_value')" href="../_variables/setting_value.html">$setting_value</a> );
<a name="l708"><span class="linenum"> 708</span></a>          }
<a name="l709"><span class="linenum"> 709</span></a>          <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>-&gt;<a onClick="logVariable('Settings')" class="var it10869" onMouseOver="hilite(10869)" onMouseOut="lolite()" href="../_variables/Settings.html">Settings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l710"><span class="linenum"> 710</span></a>      }
<a name="l711"><span class="linenum"> 711</span></a>  
<a name="l712"><span class="linenum"> 712</span></a>      if( <a class="var it7814" onMouseOver="hilite(7814)" onMouseOut="lolite()" onClick="logVariable('activate')" href="../_variables/activate.html">$activate</a> )
<a name="l713"><span class="linenum"> 713</span></a>      { // Try to enable plugin:
<a name="l714"><span class="linenum"> 714</span></a>          <a class="var it5800" onMouseOver="hilite(5800)" onMouseOut="lolite()" onClick="logVariable('enable_return')" href="../_variables/enable_return.html">$enable_return</a> = <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>-&gt;<a class="function" onClick="logFunction('BeforeEnable')" href="../_functions/beforeenable.html" onMouseOver="funcPopup(event,'beforeenable')">BeforeEnable</a>();
<a name="l715"><span class="linenum"> 715</span></a>          if( <a class="var it5800" onMouseOver="hilite(5800)" onMouseOut="lolite()" onClick="logVariable('enable_return')" href="../_variables/enable_return.html">$enable_return</a> !== true )
<a name="l716"><span class="linenum"> 716</span></a>          { // Warning on enable a plugin
<a name="l717"><span class="linenum"> 717</span></a>              echo '&lt;span class=&quot;text-warning&quot;&gt;&lt;evo:warning&gt;'.<a class="var it5800" onMouseOver="hilite(5800)" onMouseOut="lolite()" onClick="logVariable('enable_return')" href="../_variables/enable_return.html">$enable_return</a>.'&lt;/evo:warning&gt;&lt;/span&gt;&lt;br /&gt;'.&quot;\n&quot;;
<a name="l718"><span class="linenum"> 718</span></a>  
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">            // Set plugin status to &quot;needs_config&quot; to mark the plugin as incomplete for using:</span>
<a name="l720"><span class="linenum"> 720</span></a>              <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../_variables/Plugins_admin.html">$Plugins_admin</a>-&gt;<a class="function" onClick="logFunction('set_Plugin_status')" href="../_functions/set_plugin_status.html" onMouseOver="funcPopup(event,'set_plugin_status')">set_Plugin_status</a>( <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>, 'needs_config' );
<a name="l721"><span class="linenum"> 721</span></a>  
<a name="l722"><span class="linenum"> 722</span></a>              return false;
<a name="l723"><span class="linenum"> 723</span></a>          }
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>          <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../_variables/Plugins_admin.html">$Plugins_admin</a>-&gt;<a class="function" onClick="logFunction('set_Plugin_status')" href="../_functions/set_plugin_status.html" onMouseOver="funcPopup(event,'set_plugin_status')">set_Plugin_status</a>( <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>, 'enabled' );
<a name="l726"><span class="linenum"> 726</span></a>      }
<a name="l727"><span class="linenum"> 727</span></a>      else
<a name="l728"><span class="linenum"> 728</span></a>      { // Set plugin status as disable
<a name="l729"><span class="linenum"> 729</span></a>          <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../_variables/Plugins_admin.html">$Plugins_admin</a>-&gt;<a class="function" onClick="logFunction('set_Plugin_status')" href="../_functions/set_plugin_status.html" onMouseOver="funcPopup(event,'set_plugin_status')">set_Plugin_status</a>( <a class="var it5919" onMouseOver="hilite(5919)" onMouseOut="lolite()" onClick="logVariable('edit_Plugin')" href="../_variables/edit_Plugin.html">$edit_Plugin</a>, 'disabled' );
<a name="l730"><span class="linenum"> 730</span></a>      }
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>      <a class="function" onClick="logFunction('task_end')" href="../_functions/task_end.html" onMouseOver="funcPopup(event,'task_end')">task_end</a>();
<a name="l733"><span class="linenum"> 733</span></a>      return true;
<a name="l734"><span class="linenum"> 734</span></a>  }
<a name="l735"><span class="linenum"> 735</span></a>  
<a name="l736"><span class="linenum"> 736</span></a>  
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">/**</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment"> * Install basic widgets.</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment"> */</span>
<a name="l740"><span class="linenum"> 740</span></a>  function <a class="function" onClick="logFunction('install_basic_widgets')" href="../_functions/install_basic_widgets.html" onMouseOver="funcPopup(event,'install_basic_widgets')">install_basic_widgets</a>( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> = 0 )
<a name="l741"><span class="linenum"> 741</span></a>  {
<a name="l742"><span class="linenum"> 742</span></a>      <span class="comment">/**</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">    * @var DB</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">    */</span>
<a name="l745"><span class="linenum"> 745</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>      <a class="function" onClick="logFunction('load_funcs')" href="../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'widgets/_widgets.funcs.php' );
<a name="l748"><span class="linenum"> 748</span></a>  
<a name="l749"><span class="linenum"> 749</span></a>      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; 11010 )
<a name="l750"><span class="linenum"> 750</span></a>      {
<a name="l751"><span class="linenum"> 751</span></a>          <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../_variables/blog_ids.html">$blog_ids</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( 'SELECT blog_ID, &quot;std&quot; FROM T_blogs' );
<a name="l752"><span class="linenum"> 752</span></a>      }
<a name="l753"><span class="linenum"> 753</span></a>      else
<a name="l754"><span class="linenum"> 754</span></a>      {
<a name="l755"><span class="linenum"> 755</span></a>          <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../_variables/blog_ids.html">$blog_ids</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( 'SELECT blog_ID, blog_type FROM T_blogs' );
<a name="l756"><span class="linenum"> 756</span></a>      }
<a name="l757"><span class="linenum"> 757</span></a>  
<a name="l758"><span class="linenum"> 758</span></a>      foreach( <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../_variables/blog_ids.html">$blog_ids</a> as <a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../_variables/blog_id.html">$blog_id</a> =&gt; <a class="var it6899" onMouseOver="hilite(6899)" onMouseOut="lolite()" onClick="logVariable('blog_type')" href="../_variables/blog_type.html">$blog_type</a> )
<a name="l759"><span class="linenum"> 759</span></a>      {
<a name="l760"><span class="linenum"> 760</span></a>          <a class="function" onClick="logFunction('task_begin')" href="../_functions/task_begin.html" onMouseOver="funcPopup(event,'task_begin')">task_begin</a>( 'Installing default widgets for blog #'.<a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../_variables/blog_id.html">$blog_id</a>.'... ' );
<a name="l761"><span class="linenum"> 761</span></a>          <a class="function" onClick="logFunction('insert_basic_widgets')" href="../_functions/insert_basic_widgets.html" onMouseOver="funcPopup(event,'insert_basic_widgets')">insert_basic_widgets</a>( <a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../_variables/blog_id.html">$blog_id</a>, true, <a class="var it6899" onMouseOver="hilite(6899)" onMouseOut="lolite()" onClick="logVariable('blog_type')" href="../_variables/blog_type.html">$blog_type</a> );
<a name="l762"><span class="linenum"> 762</span></a>          <a class="function" onClick="logFunction('task_end')" href="../_functions/task_end.html" onMouseOver="funcPopup(event,'task_end')">task_end</a>();
<a name="l763"><span class="linenum"> 763</span></a>      }
<a name="l764"><span class="linenum"> 764</span></a>  
<a name="l765"><span class="linenum"> 765</span></a>  }
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>  
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>  function <a class="function" onClick="logFunction('advanced_properties')" href="../_functions/advanced_properties.html" onMouseOver="funcPopup(event,'advanced_properties')">advanced_properties</a>()
<a name="l770"><span class="linenum"> 770</span></a>  {
<a name="l771"><span class="linenum"> 771</span></a>      <span class="comment">/*</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">// file_path needs to be case sensitive on unix</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">// Note: it should be ok on windows too if we take care of updating the db on case renames</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment">ALTER TABLE `T_files` CHANGE `file_path` `file_path` VARCHAR( 255 ) CHARACTER SET latin1 COLLATE latin1_bin NOT NULL</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">or</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">ALTER TABLE `T_files` CHANGE `file_path` `file_path` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">    */</span>
<a name="l778"><span class="linenum"> 778</span></a>  }
<a name="l779"><span class="linenum"> 779</span></a>  
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">/**</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment"> * Create relations</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment"> *</span>
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment"> * @todo NOT UP TO DATE AT ALL :( -- update field names before activating this</span>
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment"> */</span>
<a name="l786"><span class="linenum"> 786</span></a>  function <a class="function" onClick="logFunction('create_relations')" href="../_functions/create_relations.html" onMouseOver="funcPopup(event,'create_relations')">create_relations</a>()
<a name="l787"><span class="linenum"> 787</span></a>  {
<a name="l788"><span class="linenum"> 788</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l789"><span class="linenum"> 789</span></a>  
<a name="l790"><span class="linenum"> 790</span></a>      <a class="function" onClick="logFunction('task_begin')" href="../_functions/task_begin.html" onMouseOver="funcPopup(event,'task_begin')">task_begin</a>( 'Creating relations... ' );
<a name="l791"><span class="linenum"> 791</span></a>  
<a name="l792"><span class="linenum"> 792</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_coll_user_perms
<a name="l793"><span class="linenum"> 793</span></a>                                  add constraint FK_bloguser_blog_ID
<a name="l794"><span class="linenum"> 794</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (bloguser_blog_ID)
<a name="l795"><span class="linenum"> 795</span></a>                                              references T_blogs (blog_ID)
<a name="l796"><span class="linenum"> 796</span></a>                                              on delete restrict
<a name="l797"><span class="linenum"> 797</span></a>                                              on update restrict' );
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_coll_user_perms
<a name="l800"><span class="linenum"> 800</span></a>                                  add constraint FK_bloguser_user_ID
<a name="l801"><span class="linenum"> 801</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (bloguser_user_ID)
<a name="l802"><span class="linenum"> 802</span></a>                                              references T_users (user_ID)
<a name="l803"><span class="linenum"> 803</span></a>                                              on delete restrict
<a name="l804"><span class="linenum"> 804</span></a>                                              on update restrict' );
<a name="l805"><span class="linenum"> 805</span></a>  
<a name="l806"><span class="linenum"> 806</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_categories
<a name="l807"><span class="linenum"> 807</span></a>                                  add constraint FK_cat_blog_ID
<a name="l808"><span class="linenum"> 808</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (cat_blog_ID)
<a name="l809"><span class="linenum"> 809</span></a>                                              references T_blogs (blog_ID)
<a name="l810"><span class="linenum"> 810</span></a>                                              on delete restrict
<a name="l811"><span class="linenum"> 811</span></a>                                              on update restrict,
<a name="l812"><span class="linenum"> 812</span></a>                                  add constraint FK_cat_parent_ID
<a name="l813"><span class="linenum"> 813</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (cat_parent_ID)
<a name="l814"><span class="linenum"> 814</span></a>                                              references T_categories (cat_ID)
<a name="l815"><span class="linenum"> 815</span></a>                                              on delete restrict
<a name="l816"><span class="linenum"> 816</span></a>                                              on update restrict' );
<a name="l817"><span class="linenum"> 817</span></a>  
<a name="l818"><span class="linenum"> 818</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_comments
<a name="l819"><span class="linenum"> 819</span></a>                                  add constraint FK_comment_item_ID
<a name="l820"><span class="linenum"> 820</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (comment_item_ID)
<a name="l821"><span class="linenum"> 821</span></a>                                              references T_items__item (post_ID)
<a name="l822"><span class="linenum"> 822</span></a>                                              on delete restrict
<a name="l823"><span class="linenum"> 823</span></a>                                              on update restrict' );
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_postcats
<a name="l826"><span class="linenum"> 826</span></a>                                  add constraint FK_postcat_cat_ID
<a name="l827"><span class="linenum"> 827</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (postcat_cat_ID)
<a name="l828"><span class="linenum"> 828</span></a>                                              references T_categories (cat_ID)
<a name="l829"><span class="linenum"> 829</span></a>                                              on delete restrict
<a name="l830"><span class="linenum"> 830</span></a>                                              on update restrict,
<a name="l831"><span class="linenum"> 831</span></a>                                  add constraint FK_postcat_post_ID
<a name="l832"><span class="linenum"> 832</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (postcat_post_ID)
<a name="l833"><span class="linenum"> 833</span></a>                                              references T_items__item (post_ID)
<a name="l834"><span class="linenum"> 834</span></a>                                              on delete restrict
<a name="l835"><span class="linenum"> 835</span></a>                                              on update restrict' );
<a name="l836"><span class="linenum"> 836</span></a>  
<a name="l837"><span class="linenum"> 837</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_items__item
<a name="l838"><span class="linenum"> 838</span></a>                                  add constraint FK_post_assigned_user_ID
<a name="l839"><span class="linenum"> 839</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (post_assigned_user_ID)
<a name="l840"><span class="linenum"> 840</span></a>                                              references T_users (user_ID)
<a name="l841"><span class="linenum"> 841</span></a>                                              on delete restrict
<a name="l842"><span class="linenum"> 842</span></a>                                              on update restrict,
<a name="l843"><span class="linenum"> 843</span></a>                                  add constraint FK_post_lastedit_user_ID
<a name="l844"><span class="linenum"> 844</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (post_lastedit_user_ID)
<a name="l845"><span class="linenum"> 845</span></a>                                              references T_users (user_ID)
<a name="l846"><span class="linenum"> 846</span></a>                                              on delete restrict
<a name="l847"><span class="linenum"> 847</span></a>                                              on update restrict,
<a name="l848"><span class="linenum"> 848</span></a>                                  add constraint FK_post_creator_user_ID
<a name="l849"><span class="linenum"> 849</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (post_creator_user_ID)
<a name="l850"><span class="linenum"> 850</span></a>                                              references T_users (user_ID)
<a name="l851"><span class="linenum"> 851</span></a>                                              on delete restrict
<a name="l852"><span class="linenum"> 852</span></a>                                              on update restrict,
<a name="l853"><span class="linenum"> 853</span></a>                                  add constraint FK_post_main_cat_ID
<a name="l854"><span class="linenum"> 854</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (post_main_cat_ID)
<a name="l855"><span class="linenum"> 855</span></a>                                              references T_categories (cat_ID)
<a name="l856"><span class="linenum"> 856</span></a>                                              on delete restrict
<a name="l857"><span class="linenum"> 857</span></a>                                              on update restrict,
<a name="l858"><span class="linenum"> 858</span></a>                                  add constraint FK_post_parent_ID
<a name="l859"><span class="linenum"> 859</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (post_parent_ID)
<a name="l860"><span class="linenum"> 860</span></a>                                              references T_items__item (post_ID)
<a name="l861"><span class="linenum"> 861</span></a>                                              on delete restrict
<a name="l862"><span class="linenum"> 862</span></a>                                              on update restrict,
<a name="l863"><span class="linenum"> 863</span></a>                                  add constraint FK_post_pst_ID
<a name="l864"><span class="linenum"> 864</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (post_pst_ID)
<a name="l865"><span class="linenum"> 865</span></a>                                              references T_items__status (pst_ID)
<a name="l866"><span class="linenum"> 866</span></a>                                              on delete restrict
<a name="l867"><span class="linenum"> 867</span></a>                                              on update restrict,
<a name="l868"><span class="linenum"> 868</span></a>                                  add constraint FK_post_ityp_ID
<a name="l869"><span class="linenum"> 869</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (post_ityp_ID)
<a name="l870"><span class="linenum"> 870</span></a>                                              references T_items__type (ityp_ID)
<a name="l871"><span class="linenum"> 871</span></a>                                              on delete restrict
<a name="l872"><span class="linenum"> 872</span></a>                                              on update restrict' );
<a name="l873"><span class="linenum"> 873</span></a>  
<a name="l874"><span class="linenum"> 874</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_links
<a name="l875"><span class="linenum"> 875</span></a>                                  add constraint FK_link_creator_user_ID
<a name="l876"><span class="linenum"> 876</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (link_creator_user_ID)
<a name="l877"><span class="linenum"> 877</span></a>                                              references T_users (user_ID)
<a name="l878"><span class="linenum"> 878</span></a>                                              on delete restrict
<a name="l879"><span class="linenum"> 879</span></a>                                              on update restrict' );
<a name="l880"><span class="linenum"> 880</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_links
<a name="l881"><span class="linenum"> 881</span></a>                                  add constraint FK_link_lastedit_user_ID
<a name="l882"><span class="linenum"> 882</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (link_lastedit_user_ID)
<a name="l883"><span class="linenum"> 883</span></a>                                              references T_users (user_ID)
<a name="l884"><span class="linenum"> 884</span></a>                                              on delete restrict
<a name="l885"><span class="linenum"> 885</span></a>                                              on update restrict' );
<a name="l886"><span class="linenum"> 886</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_links
<a name="l887"><span class="linenum"> 887</span></a>                                  add constraint FK_link_file_ID
<a name="l888"><span class="linenum"> 888</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (link_file_ID)
<a name="l889"><span class="linenum"> 889</span></a>                                              references T_files (file_ID)
<a name="l890"><span class="linenum"> 890</span></a>                                              on delete restrict
<a name="l891"><span class="linenum"> 891</span></a>                                              on update restrict' );
<a name="l892"><span class="linenum"> 892</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_links
<a name="l893"><span class="linenum"> 893</span></a>                                  add constraint FK_link_itm_ID
<a name="l894"><span class="linenum"> 894</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (link_itm_ID)
<a name="l895"><span class="linenum"> 895</span></a>                                              references T_items__item (post_ID)
<a name="l896"><span class="linenum"> 896</span></a>                                              on delete restrict
<a name="l897"><span class="linenum"> 897</span></a>                                              on update restrict' );
<a name="l898"><span class="linenum"> 898</span></a>  
<a name="l899"><span class="linenum"> 899</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_pluginsettings
<a name="l900"><span class="linenum"> 900</span></a>                    add constraint FK_pset_plug_ID
<a name="l901"><span class="linenum"> 901</span></a>                          foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (pset_plug_ID)
<a name="l902"><span class="linenum"> 902</span></a>                          references T_plugins (plug_ID)
<a name="l903"><span class="linenum"> 903</span></a>                          on delete restrict
<a name="l904"><span class="linenum"> 904</span></a>                          on update restrict' );
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_pluginusersettings
<a name="l907"><span class="linenum"> 907</span></a>                    add constraint FK_puset_plug_ID
<a name="l908"><span class="linenum"> 908</span></a>                          foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (puset_plug_ID)
<a name="l909"><span class="linenum"> 909</span></a>                          references T_plugins (plug_ID)
<a name="l910"><span class="linenum"> 910</span></a>                          on delete restrict
<a name="l911"><span class="linenum"> 911</span></a>                          on update restrict' );
<a name="l912"><span class="linenum"> 912</span></a>  
<a name="l913"><span class="linenum"> 913</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_pluginevents
<a name="l914"><span class="linenum"> 914</span></a>                    add constraint FK_pevt_plug_ID
<a name="l915"><span class="linenum"> 915</span></a>                          foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (pevt_plug_ID)
<a name="l916"><span class="linenum"> 916</span></a>                          references T_plugins (plug_ID)
<a name="l917"><span class="linenum"> 917</span></a>                          on delete restrict
<a name="l918"><span class="linenum"> 918</span></a>                          on update restrict' );
<a name="l919"><span class="linenum"> 919</span></a>  
<a name="l920"><span class="linenum"> 920</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_users
<a name="l921"><span class="linenum"> 921</span></a>                                  add constraint FK_user_grp_ID
<a name="l922"><span class="linenum"> 922</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (user_grp_ID)
<a name="l923"><span class="linenum"> 923</span></a>                                              references T_groups (grp_ID)
<a name="l924"><span class="linenum"> 924</span></a>                                              on delete restrict
<a name="l925"><span class="linenum"> 925</span></a>                                              on update restrict' );
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_users__usersettings
<a name="l928"><span class="linenum"> 928</span></a>                                  add constraint FK_uset_user_ID
<a name="l929"><span class="linenum"> 929</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (uset_user_ID)
<a name="l930"><span class="linenum"> 930</span></a>                                              references T_users (user_ID)
<a name="l931"><span class="linenum"> 931</span></a>                                              on delete restrict
<a name="l932"><span class="linenum"> 932</span></a>                                              on update restrict' );
<a name="l933"><span class="linenum"> 933</span></a>  
<a name="l934"><span class="linenum"> 934</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_subscriptions
<a name="l935"><span class="linenum"> 935</span></a>                                  add constraint FK_sub_coll_ID
<a name="l936"><span class="linenum"> 936</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (sub_coll_ID)
<a name="l937"><span class="linenum"> 937</span></a>                                              references T_blogs (blog_ID)
<a name="l938"><span class="linenum"> 938</span></a>                                              on delete restrict
<a name="l939"><span class="linenum"> 939</span></a>                                              on update restrict' );
<a name="l940"><span class="linenum"> 940</span></a>  
<a name="l941"><span class="linenum"> 941</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_subscriptions
<a name="l942"><span class="linenum"> 942</span></a>                                  add constraint FK_sub_user_ID
<a name="l943"><span class="linenum"> 943</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (sub_user_ID)
<a name="l944"><span class="linenum"> 944</span></a>                                              references T_users (user_ID)
<a name="l945"><span class="linenum"> 945</span></a>                                              on delete restrict
<a name="l946"><span class="linenum"> 946</span></a>                                              on update restrict' );
<a name="l947"><span class="linenum"> 947</span></a>  
<a name="l948"><span class="linenum"> 948</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'alter table T_slug
<a name="l949"><span class="linenum"> 949</span></a>                                  add constraint FK_slug_itm_ID
<a name="l950"><span class="linenum"> 950</span></a>                                              foreign <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a> (slug_itm_ID)
<a name="l951"><span class="linenum"> 951</span></a>                                              references T_items__item (post_ID)
<a name="l952"><span class="linenum"> 952</span></a>                                              on delete restrict
<a name="l953"><span class="linenum"> 953</span></a>                                              on update restrict' );
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>      <a class="function" onClick="logFunction('task_end')" href="../_functions/task_end.html" onMouseOver="funcPopup(event,'task_end')">task_end</a>();
<a name="l956"><span class="linenum"> 956</span></a>  }
<a name="l957"><span class="linenum"> 957</span></a>  
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment">/**</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment"> * Install htaccess: Check if it works with the webserver, then install it for real.</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> *</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment"> * @return boolean TRUE if no errors</span>
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment"> */</span>
<a name="l964"><span class="linenum"> 964</span></a>  function <a class="function" onClick="logFunction('install_htaccess')" href="../_functions/install_htaccess.html" onMouseOver="funcPopup(event,'install_htaccess')">install_htaccess</a>( <a class="var it7815" onMouseOver="hilite(7815)" onMouseOut="lolite()" onClick="logVariable('upgrade')" href="../_variables/upgrade.html">$upgrade</a> = false )
<a name="l965"><span class="linenum"> 965</span></a>  {
<a name="l966"><span class="linenum"> 966</span></a>      echo '&lt;p&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Preparing to install &lt;code&gt;/.htaccess&lt;/code&gt; in the base folder...').' ';
<a name="l967"><span class="linenum"> 967</span></a>  
<a name="l968"><span class="linenum"> 968</span></a>      <a class="var it6190" onMouseOver="hilite(6190)" onMouseOut="lolite()" onClick="logVariable('server')" href="../_variables/server.html">$server</a> = isset( <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_SOFTWARE'] ) ? <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_SOFTWARE'] : '';
<a name="l969"><span class="linenum"> 969</span></a>      if( ! empty( <a class="var it6190" onMouseOver="hilite(6190)" onMouseOut="lolite()" onClick="logVariable('server')" href="../_variables/server.html">$server</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~(Nginx|Lighttpd|Microsoft-IIS)~i', <a class="var it6190" onMouseOver="hilite(6190)" onMouseOut="lolite()" onClick="logVariable('server')" href="../_variables/server.html">$server</a> ) )
<a name="l970"><span class="linenum"> 970</span></a>      { // Skip installation if this is not an Apache server
<a name="l971"><span class="linenum"> 971</span></a>          echo '&lt;br /&gt;&lt;b class=&quot;text-warning&quot;&gt;&lt;evo:warning&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('.htaccess is not needed because your web server is not Apache. WARNING: you will need to configure your web server manually.').'&lt;/evo:warning&gt;&lt;/b&gt;&lt;/p&gt;';
<a name="l972"><span class="linenum"> 972</span></a>          return true;
<a name="l973"><span class="linenum"> 973</span></a>      }
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>      <a class="var it1349" onMouseOver="hilite(1349)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../_variables/error_message.html">$error_message</a> = <a class="function" onClick="logFunction('do_install_htaccess')" href="../_functions/do_install_htaccess.html" onMouseOver="funcPopup(event,'do_install_htaccess')">do_install_htaccess</a>( <a class="var it7815" onMouseOver="hilite(7815)" onMouseOut="lolite()" onClick="logVariable('upgrade')" href="../_variables/upgrade.html">$upgrade</a> );
<a name="l976"><span class="linenum"> 976</span></a>  
<a name="l977"><span class="linenum"> 977</span></a>      if( <a class="var it1349" onMouseOver="hilite(1349)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../_variables/error_message.html">$error_message</a> )
<a name="l978"><span class="linenum"> 978</span></a>      {
<a name="l979"><span class="linenum"> 979</span></a>          <a class="var it7816" onMouseOver="hilite(7816)" onMouseOut="lolite()" onClick="logVariable('htignore')" href="../_variables/htignore.html">$htignore</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'htignore', 'integer', 0 );
<a name="l980"><span class="linenum"> 980</span></a>  
<a name="l981"><span class="linenum"> 981</span></a>          echo '&lt;span class=&quot;text-danger&quot;&gt;&lt;evo:error&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('ERROR!').'&lt;br/&gt;&lt;b&gt;'.<a class="var it1349" onMouseOver="hilite(1349)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../_variables/error_message.html">$error_message</a>.'&lt;/b&gt;&lt;/evo:error&gt;&lt;/span&gt;';
<a name="l982"><span class="linenum"> 982</span></a>  
<a name="l983"><span class="linenum"> 983</span></a>          if( <a class="var it7816" onMouseOver="hilite(7816)" onMouseOut="lolite()" onClick="logVariable('htignore')" href="../_variables/htignore.html">$htignore</a> )
<a name="l984"><span class="linenum"> 984</span></a>          { // Ignore errors with .htaccess file
<a name="l985"><span class="linenum"> 985</span></a>              return true;
<a name="l986"><span class="linenum"> 986</span></a>          }
<a name="l987"><span class="linenum"> 987</span></a>          else
<a name="l988"><span class="linenum"> 988</span></a>          { // Some errors are existing with .htaccess file, Display a link to ignore the errors and continue instalation
<a name="l989"><span class="linenum"> 989</span></a>              echo '&lt;ul class=&quot;pager&quot;&gt;&lt;li&gt;&lt;a href=&quot;'.<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['REQUEST_URI'].'&amp;htignore=1&quot; style=&quot;font-size:150%;font-weight:bold;&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Continue installation').' &lt;span aria-hidden=&quot;true&quot;&gt;&amp;rarr;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;';
<a name="l990"><span class="linenum"> 990</span></a>              return false;
<a name="l991"><span class="linenum"> 991</span></a>          }
<a name="l992"><span class="linenum"> 992</span></a>      }
<a name="l993"><span class="linenum"> 993</span></a>      echo '&lt;/p&gt;';
<a name="l994"><span class="linenum"> 994</span></a>  
<a name="l995"><span class="linenum"> 995</span></a>      return true;
<a name="l996"><span class="linenum"> 996</span></a>  }
<a name="l997"><span class="linenum"> 997</span></a>  
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">/**</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment"> * This does the actual file manipulations for installing .htaccess</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment"> * This will verify that the provided sample.htaccess does not crash apache in a test folder before installing it for real.</span>
<a name="l1001"><span class="linenum">1001</span></a>  <span class="comment"> *</span>
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment"> * @param boolean are we upgrading (vs installing)?</span>
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment"> * @return mixed</span>
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment"> */</span>
<a name="l1005"><span class="linenum">1005</span></a>  function <a class="function" onClick="logFunction('do_install_htaccess')" href="../_functions/do_install_htaccess.html" onMouseOver="funcPopup(event,'do_install_htaccess')">do_install_htaccess</a>( <a class="var it7815" onMouseOver="hilite(7815)" onMouseOut="lolite()" onClick="logVariable('upgrade')" href="../_variables/upgrade.html">$upgrade</a> = false )
<a name="l1006"><span class="linenum">1006</span></a>  {
<a name="l1007"><span class="linenum">1007</span></a>      global <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>;
<a name="l1008"><span class="linenum">1008</span></a>      global <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>;
<a name="l1009"><span class="linenum">1009</span></a>  
<a name="l1010"><span class="linenum">1010</span></a>      if( @<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'.htaccess' ) )
<a name="l1011"><span class="linenum">1011</span></a>      {
<a name="l1012"><span class="linenum">1012</span></a>          if( <a class="var it7815" onMouseOver="hilite(7815)" onMouseOut="lolite()" onClick="logVariable('upgrade')" href="../_variables/upgrade.html">$upgrade</a> )
<a name="l1013"><span class="linenum">1013</span></a>          {
<a name="l1014"><span class="linenum">1014</span></a>              echo '&lt;span class=&quot;text-warning&quot;&gt;&lt;evo:warning&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Already installed.').'&lt;/evo:warning&gt;&lt;/span&gt;';
<a name="l1015"><span class="linenum">1015</span></a>              return ''; <span class="comment">// all is well :)</span>
<a name="l1016"><span class="linenum">1016</span></a>          }
<a name="l1017"><span class="linenum">1017</span></a>  
<a name="l1018"><span class="linenum">1018</span></a>          if( @<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'<a class="filename" href="../sample.htaccess.html">sample.htaccess</a>' ) )
<a name="l1019"><span class="linenum">1019</span></a>          {
<a name="l1020"><span class="linenum">1020</span></a>              <a class="var it7817" onMouseOver="hilite(7817)" onMouseOut="lolite()" onClick="logVariable('content_htaccess')" href="../_variables/content_htaccess.html">$content_htaccess</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('file_get_contents')" href="../_functions/file_get_contents.html" onMouseOver="phpfuncPopup(event,'file_get_contents')">file_get_contents</a>( <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'.htaccess' ) );
<a name="l1021"><span class="linenum">1021</span></a>              <a class="var it7818" onMouseOver="hilite(7818)" onMouseOut="lolite()" onClick="logVariable('content_sample_htaccess')" href="../_variables/content_sample_htaccess.html">$content_sample_htaccess</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('file_get_contents')" href="../_functions/file_get_contents.html" onMouseOver="phpfuncPopup(event,'file_get_contents')">file_get_contents</a>( <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'<a class="filename" href="../sample.htaccess.html">sample.htaccess</a>' ) );
<a name="l1022"><span class="linenum">1022</span></a>  
<a name="l1023"><span class="linenum">1023</span></a>              if( <a class="var it7817" onMouseOver="hilite(7817)" onMouseOut="lolite()" onClick="logVariable('content_htaccess')" href="../_variables/content_htaccess.html">$content_htaccess</a> != <a class="var it7818" onMouseOver="hilite(7818)" onMouseOut="lolite()" onClick="logVariable('content_sample_htaccess')" href="../_variables/content_sample_htaccess.html">$content_sample_htaccess</a> )
<a name="l1024"><span class="linenum">1024</span></a>              { // The .htaccess file has content that different from a sample file
<a name="l1025"><span class="linenum">1025</span></a>                  echo '&lt;p class=&quot;text-danger&quot;&gt;&lt;evo:error&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('There is already a file called .htaccess at the blog root. If you don\'t specifically need this file, it is recommended that you delete it or rename it to old.htaccess before you continue. This will allow b2evolution to create a new .htaccess file that is optimized for best results.').'&lt;/evo:error&gt;&lt;/p&gt;';
<a name="l1026"><span class="linenum">1026</span></a>                  echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Here are the contents of the current .htaccess file:');
<a name="l1027"><span class="linenum">1027</span></a>                  echo '&lt;div style=&quot;overflow:auto&quot;&gt;&lt;pre&gt;'.<a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>( <a class="var it7817" onMouseOver="hilite(7817)" onMouseOut="lolite()" onClick="logVariable('content_htaccess')" href="../_variables/content_htaccess.html">$content_htaccess</a> ).'&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;';
<a name="l1028"><span class="linenum">1028</span></a>                  return sprintf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Again, we recommend you remove this file before continuing. If you chose to keep it, b2evolution will probably still work, but for optimization you should follow &lt;a %s&gt;these instructions&lt;/a&gt;.'), 'href=&quot;'.<a class="function" onClick="logFunction('get_manual_url')" href="../_functions/get_manual_url.html" onMouseOver="funcPopup(event,'get_manual_url')">get_manual_url</a>( 'htaccess-file' ).'&quot; target=&quot;_blank&quot;' );
<a name="l1029"><span class="linenum">1029</span></a>              }
<a name="l1030"><span class="linenum">1030</span></a>              else
<a name="l1031"><span class="linenum">1031</span></a>              {
<a name="l1032"><span class="linenum">1032</span></a>                  echo '&lt;span class=&quot;text-warning&quot;&gt;&lt;evo:warning&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Already installed.').'&lt;/evo:warning&gt;&lt;/span&gt;';
<a name="l1033"><span class="linenum">1033</span></a>                  return '';
<a name="l1034"><span class="linenum">1034</span></a>              }
<a name="l1035"><span class="linenum">1035</span></a>          }
<a name="l1036"><span class="linenum">1036</span></a>      }
<a name="l1037"><span class="linenum">1037</span></a>  
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment">    // Make sure we have a sample file to start with:</span>
<a name="l1039"><span class="linenum">1039</span></a>      if( ! @<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'<a class="filename" href="../sample.htaccess.html">sample.htaccess</a>' ) )
<a name="l1040"><span class="linenum">1040</span></a>      {
<a name="l1041"><span class="linenum">1041</span></a>          return <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Cannot find file [ sample.htaccess ] in your base url folder.');
<a name="l1042"><span class="linenum">1042</span></a>      }
<a name="l1043"><span class="linenum">1043</span></a>  
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment">    // Try to copy that file to the test folder:</span>
<a name="l1045"><span class="linenum">1045</span></a>      if( ! @<a class="phpfunction" onClick="logFunction('copy')" href="../_functions/copy.html" onMouseOver="phpfuncPopup(event,'copy')">copy</a>( <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'<a class="filename" href="../sample.htaccess.html">sample.htaccess</a>', <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'install/test/.htaccess' ) )
<a name="l1046"><span class="linenum">1046</span></a>      {
<a name="l1047"><span class="linenum">1047</span></a>          return <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Failed to copy files!');
<a name="l1048"><span class="linenum">1048</span></a>      }
<a name="l1049"><span class="linenum">1049</span></a>  
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment">    // Make sure .htaccess does not crash in the test folder:</span>
<a name="l1051"><span class="linenum">1051</span></a>      <a class="function" onClick="logFunction('load_funcs')" href="../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>('_core/_url.funcs.php');
<a name="l1052"><span class="linenum">1052</span></a>      <a class="var it1133" onMouseOver="hilite(1133)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a> = array();
<a name="l1053"><span class="linenum">1053</span></a>      if( ! <a class="var it7819" onMouseOver="hilite(7819)" onMouseOut="lolite()" onClick="logVariable('remote_page')" href="../_variables/remote_page.html">$remote_page</a> = <a class="function" onClick="logFunction('fetch_remote_page')" href="../_functions/fetch_remote_page.html" onMouseOver="funcPopup(event,'fetch_remote_page')">fetch_remote_page</a>( <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>.'install/test/', <a class="var it1133" onMouseOver="hilite(1133)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a> ) )
<a name="l1054"><span class="linenum">1054</span></a>      {
<a name="l1055"><span class="linenum">1055</span></a>          return <a class="var it1133" onMouseOver="hilite(1133)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>['error'];
<a name="l1056"><span class="linenum">1056</span></a>      }
<a name="l1057"><span class="linenum">1057</span></a>      if( <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it7819" onMouseOver="hilite(7819)" onMouseOut="lolite()" onClick="logVariable('remote_page')" href="../_variables/remote_page.html">$remote_page</a>, 0, 16 ) != 'Test successful.' )
<a name="l1058"><span class="linenum">1058</span></a>      {
<a name="l1059"><span class="linenum">1059</span></a>          return sprintf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%s was not found as expected.'), <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>.'<a class="filename" href="../install/test/index.html.html">install/test/index.html</a>' );
<a name="l1060"><span class="linenum">1060</span></a>      }
<a name="l1061"><span class="linenum">1061</span></a>  
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment">    // Now we consider it's safe, copy .htaccess to its real location:</span>
<a name="l1063"><span class="linenum">1063</span></a>      if( ! @<a class="phpfunction" onClick="logFunction('copy')" href="../_functions/copy.html" onMouseOver="phpfuncPopup(event,'copy')">copy</a>( <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'<a class="filename" href="../sample.htaccess.html">sample.htaccess</a>', <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../_variables/basepath.html">$basepath</a>.'.htaccess' ) )
<a name="l1064"><span class="linenum">1064</span></a>      {
<a name="l1065"><span class="linenum">1065</span></a>          return <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Test was successful, but failed to copy .htaccess into baseurl directory!');
<a name="l1066"><span class="linenum">1066</span></a>      }
<a name="l1067"><span class="linenum">1067</span></a>  
<a name="l1068"><span class="linenum">1068</span></a>      echo '&lt;span class=&quot;text-success&quot;&gt;&lt;evo:success&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Installation successful!').'&lt;/evo:success&gt;&lt;/span&gt;';
<a name="l1069"><span class="linenum">1069</span></a>      return '';
<a name="l1070"><span class="linenum">1070</span></a>  }
<a name="l1071"><span class="linenum">1071</span></a>  
<a name="l1072"><span class="linenum">1072</span></a>  
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment">/**</span>
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment"> * Return antispam SQL query.</span>
<a name="l1075"><span class="linenum">1075</span></a>  <span class="comment"> * This is obfuscated because some hosting companies prevent uploading PHP files</span>
<a name="l1076"><span class="linenum">1076</span></a>  <span class="comment"> * containing &quot;spam&quot; strings.</span>
<a name="l1077"><span class="linenum">1077</span></a>  <span class="comment"> *</span>
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment"> * @return string;</span>
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment"> */</span>
<a name="l1080"><span class="linenum">1080</span></a>  function <a class="function" onClick="logFunction('get_antispam_query')" href="../_functions/get_antispam_query.html" onMouseOver="funcPopup(event,'get_antispam_query')">get_antispam_query</a>()
<a name="l1081"><span class="linenum">1081</span></a>  {
<a name="l1082"><span class="linenum">1082</span></a>  <span class="comment">    //used base64_encode() for getting this code</span>
<a name="l1083"><span class="linenum">1083</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('base64_decode')" href="../_functions/base64_decode.html" onMouseOver="phpfuncPopup(event,'base64_decode')">base64_decode</a>('SU5TRVJUIElOVE8gVF9hbnRpc3BhbShhc3BtX3N0cmluZykgVkFMVUVTICgnb25saW5lLWNhc2lubycpLCAoJ3BlbmlzLWVubGFyZ2VtZW50JyksICgnb3JkZXItdmlhZ3JhJyksICgnb3JkZXItcGhlbnRlcm1pbmUnKSwgKCdvcmRlci14ZW5pY2FsJyksICgnb3JkZXItcHJvcGhlY2lhJyksICgnc2V4eS1saW5nZXJpZScpLCAoJy1wb3JuLScpLCAoJy1hZHVsdC0nKSwgKCctdGl0cy0nKSwgKCdidXktcGhlbnRlcm1pbmUnKSwgKCdvcmRlci1jaGVhcC1waWxscycpLCAoJ2J1eS14ZW5hZHJpbmUnKSwgKCdwYXJpcy1oaWx0b24nKSwgKCdwYXJpc2hpbHRvbicpLCAoJ2NhbWdpcmxzJyksICgnYWR1bHQtbW9kZWxzJyk=');
<a name="l1084"><span class="linenum">1084</span></a>  <span class="comment">    // pre_dump($r);</span>
<a name="l1085"><span class="linenum">1085</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>;
<a name="l1086"><span class="linenum">1086</span></a>  }
<a name="l1087"><span class="linenum">1087</span></a>  
<a name="l1088"><span class="linenum">1088</span></a>  <span class="comment">/**</span>
<a name="l1089"><span class="linenum">1089</span></a>  <span class="comment"> * We use the following tracking to determine the installer reliability (% of failed vs successful installs).</span>
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment"> */</span>
<a name="l1091"><span class="linenum">1091</span></a>  function <a class="function" onClick="logFunction('track_step')" href="../_functions/track_step.html" onMouseOver="funcPopup(event,'track_step')">track_step</a>( <a class="var it1942" onMouseOver="hilite(1942)" onMouseOut="lolite()" onClick="logVariable('current_step')" href="../_variables/current_step.html">$current_step</a> )
<a name="l1092"><span class="linenum">1092</span></a>  {
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment">    // echo 'Tracking '.$current_step;</span>
<a name="l1094"><span class="linenum">1094</span></a>      echo '&lt;div style=&quot;display:none&quot;&gt;'
<a name="l1095"><span class="linenum">1095</span></a>              .'&lt;img src=&quot;http://b2evolution.net/htsrv/track.php?key='.<a class="var it1942" onMouseOver="hilite(1942)" onMouseOut="lolite()" onClick="logVariable('current_step')" href="../_variables/current_step.html">$current_step</a>.'&quot; alt=&quot;&quot; /&gt;'
<a name="l1096"><span class="linenum">1096</span></a>          .'&lt;/div&gt;';
<a name="l1097"><span class="linenum">1097</span></a>  }
<a name="l1098"><span class="linenum">1098</span></a>  
<a name="l1099"><span class="linenum">1099</span></a>  
<a name="l1100"><span class="linenum">1100</span></a>  <span class="comment">/**</span>
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment"> * Display a link to back to install menu</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment"> */</span>
<a name="l1103"><span class="linenum">1103</span></a>  function <a class="function" onClick="logFunction('display_install_back_link')" href="../_functions/display_install_back_link.html" onMouseOver="funcPopup(event,'display_install_back_link')">display_install_back_link</a>()
<a name="l1104"><span class="linenum">1104</span></a>  {
<a name="l1105"><span class="linenum">1105</span></a>      global <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>;
<a name="l1106"><span class="linenum">1106</span></a>  
<a name="l1107"><span class="linenum">1107</span></a>      echo '&lt;ul class=&quot;pager&quot;&gt;'
<a name="l1108"><span class="linenum">1108</span></a>              .'&lt;li class=&quot;previous&quot;&gt;&lt;a href=&quot;index.php?locale='.<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>.'&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;larr;&lt;/span&gt; '.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Back to install menu').'&lt;/a&gt;&lt;/li&gt;'
<a name="l1109"><span class="linenum">1109</span></a>          .'&lt;/ul&gt;';
<a name="l1110"><span class="linenum">1110</span></a>  }
<a name="l1111"><span class="linenum">1111</span></a>  
<a name="l1112"><span class="linenum">1112</span></a>  
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment">/**</span>
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment"> * Display a progress bar to start an animation of a process</span>
<a name="l1115"><span class="linenum">1115</span></a>  <span class="comment"> *</span>
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment"> * @param string Title (Not visible on screen, it is used ONLY for screen readers)</span>
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment"> * @param integer|NULL A number of the steps</span>
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment"> */</span>
<a name="l1119"><span class="linenum">1119</span></a>  function <a class="function" onClick="logFunction('start_install_progress_bar')" href="../_functions/start_install_progress_bar.html" onMouseOver="funcPopup(event,'start_install_progress_bar')">start_install_progress_bar</a>( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>, <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a> = NULL )
<a name="l1120"><span class="linenum">1120</span></a>  {
<a name="l1121"><span class="linenum">1121</span></a>      global <a class="var it7820" onMouseOver="hilite(7820)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_counter')" href="../_variables/install_progress_bar_counter.html">$install_progress_bar_counter</a>, <a class="var it7821" onMouseOver="hilite(7821)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_total')" href="../_variables/install_progress_bar_total.html">$install_progress_bar_total</a>, <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>;
<a name="l1122"><span class="linenum">1122</span></a>  
<a name="l1123"><span class="linenum">1123</span></a>      if( ! empty( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> ) &amp;&amp; <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> != 'normal' )
<a name="l1124"><span class="linenum">1124</span></a>      { // Exit here, because we can use progress bar on normal mode (Hide on compact mode)
<a name="l1125"><span class="linenum">1125</span></a>          return;
<a name="l1126"><span class="linenum">1126</span></a>      }
<a name="l1127"><span class="linenum">1127</span></a>  
<a name="l1128"><span class="linenum">1128</span></a>      if( <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a> !== NULL )
<a name="l1129"><span class="linenum">1129</span></a>      { // Progress bar with steps
<a name="l1130"><span class="linenum">1130</span></a>          <a class="var it7821" onMouseOver="hilite(7821)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_total')" href="../_variables/install_progress_bar_total.html">$install_progress_bar_total</a> = <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>;
<a name="l1131"><span class="linenum">1131</span></a>          <a class="var it7820" onMouseOver="hilite(7820)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_counter')" href="../_variables/install_progress_bar_counter.html">$install_progress_bar_counter</a> = 0;
<a name="l1132"><span class="linenum">1132</span></a>          <a class="var it7822" onMouseOver="hilite(7822)" onMouseOut="lolite()" onClick="logVariable('bar_width')" href="../_variables/bar_width.html">$bar_width</a> = '0%';
<a name="l1133"><span class="linenum">1133</span></a>      }
<a name="l1134"><span class="linenum">1134</span></a>      else
<a name="l1135"><span class="linenum">1135</span></a>      { // Progress bar has no steps for update
<a name="l1136"><span class="linenum">1136</span></a>          <a class="var it7822" onMouseOver="hilite(7822)" onMouseOut="lolite()" onClick="logVariable('bar_width')" href="../_variables/bar_width.html">$bar_width</a> = '100%';
<a name="l1137"><span class="linenum">1137</span></a>      }
<a name="l1138"><span class="linenum">1138</span></a>  
<a name="l1139"><span class="linenum">1139</span></a>      echo '&lt;div class=&quot;progress&quot;&gt;'
<a name="l1140"><span class="linenum">1140</span></a>              .'&lt;div class=&quot;progress-bar progress-bar-striped active&quot; role=&quot;progressbar&quot; aria-valuenow=&quot;100&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; style=&quot;width:'.<a class="var it7822" onMouseOver="hilite(7822)" onMouseOut="lolite()" onClick="logVariable('bar_width')" href="../_variables/bar_width.html">$bar_width</a>.'&quot;&gt;'
<a name="l1141"><span class="linenum">1141</span></a>                  .'&lt;span class=&quot;sr-only&quot;&gt;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>.'&lt;/span&gt;'
<a name="l1142"><span class="linenum">1142</span></a>              .'&lt;/div&gt;'
<a name="l1143"><span class="linenum">1143</span></a>          .'&lt;/div&gt;';
<a name="l1144"><span class="linenum">1144</span></a>      if( <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a> !== NULL )
<a name="l1145"><span class="linenum">1145</span></a>      { // Use this fix to keep the progress animated forever when JavaScript is disabled
<a name="l1146"><span class="linenum">1146</span></a>          echo '&lt;noscript&gt;'
<a name="l1147"><span class="linenum">1147</span></a>                  .'&lt;style type=&quot;text/css&quot;&gt;.progress-bar{width:100% !important}&lt;/style&gt;'
<a name="l1148"><span class="linenum">1148</span></a>              .'&lt;/noscript&gt;';
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment">        // Don't use the striped animation when we have a real progress indication</span>
<a name="l1150"><span class="linenum">1150</span></a>          echo '&lt;script type=&quot;text/javascript&quot;&gt;'
<a name="l1151"><span class="linenum">1151</span></a>              .'jQuery( &quot;.progress-bar.active.progress-bar-striped&quot; ).removeClass( &quot;active progress-bar-striped&quot; );'
<a name="l1152"><span class="linenum">1152</span></a>          .'&lt;/script&gt;';
<a name="l1153"><span class="linenum">1153</span></a>      }
<a name="l1154"><span class="linenum">1154</span></a>  }
<a name="l1155"><span class="linenum">1155</span></a>  
<a name="l1156"><span class="linenum">1156</span></a>  
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment">/**</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment"> * Print JavaScript to stop the animation of the progress bar</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment"> */</span>
<a name="l1160"><span class="linenum">1160</span></a>  function <a class="function" onClick="logFunction('stop_install_progress_bar')" href="../_functions/stop_install_progress_bar.html" onMouseOver="funcPopup(event,'stop_install_progress_bar')">stop_install_progress_bar</a>()
<a name="l1161"><span class="linenum">1161</span></a>  {
<a name="l1162"><span class="linenum">1162</span></a>      global <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>;
<a name="l1163"><span class="linenum">1163</span></a>  
<a name="l1164"><span class="linenum">1164</span></a>      if( ! empty( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> ) &amp;&amp; <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> != 'normal' )
<a name="l1165"><span class="linenum">1165</span></a>      { // Exit here, because we can use progress bar on normal mode (Hide on compact mode)
<a name="l1166"><span class="linenum">1166</span></a>          return;
<a name="l1167"><span class="linenum">1167</span></a>      }
<a name="l1168"><span class="linenum">1168</span></a>  
<a name="l1169"><span class="linenum">1169</span></a>      echo '&lt;script type=&quot;text/javascript&quot;&gt;'
<a name="l1170"><span class="linenum">1170</span></a>          .'jQuery( &quot;.progress-bar&quot; ).css( &quot;width&quot;, &quot;100%&quot; ).removeClass( &quot;active progress-bar-striped&quot; );'
<a name="l1171"><span class="linenum">1171</span></a>          .'<a class="function" onClick="logFunction('setTimeout')" href="../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>( function() { jQuery( &quot;.progress-bar&quot; ).addClass( &quot;progress-bar-success&quot; ); }, 600 );'
<a name="l1172"><span class="linenum">1172</span></a>      .'&lt;/script&gt;';
<a name="l1173"><span class="linenum">1173</span></a>  }
<a name="l1174"><span class="linenum">1174</span></a>  
<a name="l1175"><span class="linenum">1175</span></a>  
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">/**</span>
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment"> * Print JavaScript to update the progress bar status</span>
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment"> */</span>
<a name="l1179"><span class="linenum">1179</span></a>  function <a class="function" onClick="logFunction('update_install_progress_bar')" href="../_functions/update_install_progress_bar.html" onMouseOver="funcPopup(event,'update_install_progress_bar')">update_install_progress_bar</a>()
<a name="l1180"><span class="linenum">1180</span></a>  {
<a name="l1181"><span class="linenum">1181</span></a>      global <a class="var it7820" onMouseOver="hilite(7820)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_counter')" href="../_variables/install_progress_bar_counter.html">$install_progress_bar_counter</a>, <a class="var it7821" onMouseOver="hilite(7821)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_total')" href="../_variables/install_progress_bar_total.html">$install_progress_bar_total</a>, <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>;
<a name="l1182"><span class="linenum">1182</span></a>  
<a name="l1183"><span class="linenum">1183</span></a>      if( ! empty( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> ) &amp;&amp; <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> != 'normal' )
<a name="l1184"><span class="linenum">1184</span></a>      { // Exit here, because we can use progress bar on normal mode (Hide on compact mode)
<a name="l1185"><span class="linenum">1185</span></a>          return;
<a name="l1186"><span class="linenum">1186</span></a>      }
<a name="l1187"><span class="linenum">1187</span></a>  
<a name="l1188"><span class="linenum">1188</span></a>      if( empty( <a class="var it7821" onMouseOver="hilite(7821)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_total')" href="../_variables/install_progress_bar_total.html">$install_progress_bar_total</a> ) )
<a name="l1189"><span class="linenum">1189</span></a>      { // No a number of the steps, Exit here
<a name="l1190"><span class="linenum">1190</span></a>          return;
<a name="l1191"><span class="linenum">1191</span></a>      }
<a name="l1192"><span class="linenum">1192</span></a>  
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment">    // This is next step</span>
<a name="l1194"><span class="linenum">1194</span></a>      <a class="var it7820" onMouseOver="hilite(7820)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_counter')" href="../_variables/install_progress_bar_counter.html">$install_progress_bar_counter</a>++;
<a name="l1195"><span class="linenum">1195</span></a>  
<a name="l1196"><span class="linenum">1196</span></a>      <a class="var it7822" onMouseOver="hilite(7822)" onMouseOut="lolite()" onClick="logVariable('bar_width')" href="../_variables/bar_width.html">$bar_width</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>( <a class="var it7820" onMouseOver="hilite(7820)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_counter')" href="../_variables/install_progress_bar_counter.html">$install_progress_bar_counter</a> / <a class="var it7821" onMouseOver="hilite(7821)" onMouseOut="lolite()" onClick="logVariable('install_progress_bar_total')" href="../_variables/install_progress_bar_total.html">$install_progress_bar_total</a> * 100 );
<a name="l1197"><span class="linenum">1197</span></a>      if( <a class="var it7822" onMouseOver="hilite(7822)" onMouseOut="lolite()" onClick="logVariable('bar_width')" href="../_variables/bar_width.html">$bar_width</a> &gt; 100 )
<a name="l1198"><span class="linenum">1198</span></a>      { // Limit by 100%
<a name="l1199"><span class="linenum">1199</span></a>          <a class="var it7822" onMouseOver="hilite(7822)" onMouseOut="lolite()" onClick="logVariable('bar_width')" href="../_variables/bar_width.html">$bar_width</a> = 100;
<a name="l1200"><span class="linenum">1200</span></a>      }
<a name="l1201"><span class="linenum">1201</span></a>  
<a name="l1202"><span class="linenum">1202</span></a>      echo '&lt;script type=&quot;text/javascript&quot;&gt;'
<a name="l1203"><span class="linenum">1203</span></a>          .'jQuery( &quot;.progress-bar&quot; ).css( &quot;width&quot;, &quot;'.<a class="var it7822" onMouseOver="hilite(7822)" onMouseOut="lolite()" onClick="logVariable('bar_width')" href="../_variables/bar_width.html">$bar_width</a>.'%&quot; );'
<a name="l1204"><span class="linenum">1204</span></a>      .'&lt;/script&gt;';
<a name="l1205"><span class="linenum">1205</span></a>  }
<a name="l1206"><span class="linenum">1206</span></a>  
<a name="l1207"><span class="linenum">1207</span></a>  
<a name="l1208"><span class="linenum">1208</span></a>  <span class="comment">/**</span>
<a name="l1209"><span class="linenum">1209</span></a>  <span class="comment"> * Calculate a number of the steps for current installation</span>
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment"> *</span>
<a name="l1211"><span class="linenum">1211</span></a>  <span class="comment"> * @return integer</span>
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment"> */</span>
<a name="l1213"><span class="linenum">1213</span></a>  function <a class="function" onClick="logFunction('get_install_steps_count')" href="../_functions/get_install_steps_count.html" onMouseOver="funcPopup(event,'get_install_steps_count')">get_install_steps_count</a>()
<a name="l1214"><span class="linenum">1214</span></a>  {
<a name="l1215"><span class="linenum">1215</span></a>      global <a class="var it6839" onMouseOver="hilite(6839)" onMouseOut="lolite()" onClick="logVariable('config_test_install_all_features')" href="../_variables/config_test_install_all_features.html">$config_test_install_all_features</a>, <a class="var it2921" onMouseOver="hilite(2921)" onMouseOut="lolite()" onClick="logVariable('allow_evodb_reset')" href="../_variables/allow_evodb_reset.html">$allow_evodb_reset</a>;
<a name="l1216"><span class="linenum">1216</span></a>  
<a name="l1217"><span class="linenum">1217</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a> = 0;
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">    // After Deleting b2evolution tables:</span>
<a name="l1220"><span class="linenum">1220</span></a>      if( <a class="var it6839" onMouseOver="hilite(6839)" onMouseOut="lolite()" onClick="logVariable('config_test_install_all_features')" href="../_variables/config_test_install_all_features.html">$config_test_install_all_features</a> &amp;&amp; <a class="var it2921" onMouseOver="hilite(2921)" onMouseOut="lolite()" onClick="logVariable('allow_evodb_reset')" href="../_variables/allow_evodb_reset.html">$allow_evodb_reset</a> )
<a name="l1221"><span class="linenum">1221</span></a>      { // Allow to quick delete before new installation only when these two settings are enabled in config files
<a name="l1222"><span class="linenum">1222</span></a>          <a class="var it6841" onMouseOver="hilite(6841)" onMouseOut="lolite()" onClick="logVariable('delete_contents')" href="../_variables/delete_contents.html">$delete_contents</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'delete_contents', 'integer', 0 );
<a name="l1223"><span class="linenum">1223</span></a>  
<a name="l1224"><span class="linenum">1224</span></a>          if( <a class="var it6841" onMouseOver="hilite(6841)" onMouseOut="lolite()" onClick="logVariable('delete_contents')" href="../_variables/delete_contents.html">$delete_contents</a> )
<a name="l1225"><span class="linenum">1225</span></a>          { // A quick deletion is requested before new installation
<a name="l1226"><span class="linenum">1226</span></a>              <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1227"><span class="linenum">1227</span></a>          }
<a name="l1228"><span class="linenum">1228</span></a>      }
<a name="l1229"><span class="linenum">1229</span></a>  
<a name="l1230"><span class="linenum">1230</span></a>  <span class="comment">    // After Checking files:</span>
<a name="l1231"><span class="linenum">1231</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1232"><span class="linenum">1232</span></a>  
<a name="l1233"><span class="linenum">1233</span></a>  <span class="comment">    // After Loading all modules:</span>
<a name="l1234"><span class="linenum">1234</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">    // After Creating all DB tables:</span>
<a name="l1237"><span class="linenum">1237</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1238"><span class="linenum">1238</span></a>  
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment">    // Before install default skins:</span>
<a name="l1240"><span class="linenum">1240</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1241"><span class="linenum">1241</span></a>  
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">    // Installing sample contents:</span>
<a name="l1243"><span class="linenum">1243</span></a>      <a class="var it3555" onMouseOver="hilite(3555)" onMouseOut="lolite()" onClick="logVariable('create_sample_contents')" href="../_variables/create_sample_contents.html">$create_sample_contents</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'create_sample_contents', 'string', '' );
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>      if( <a class="var it3555" onMouseOver="hilite(3555)" onMouseOut="lolite()" onClick="logVariable('create_sample_contents')" href="../_variables/create_sample_contents.html">$create_sample_contents</a> )
<a name="l1246"><span class="linenum">1246</span></a>      {
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment">        // After Creating default sample contents(users, and probably blogs and categories):</span>
<a name="l1248"><span class="linenum">1248</span></a>          <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1249"><span class="linenum">1249</span></a>  
<a name="l1250"><span class="linenum">1250</span></a>          if( <a class="var it3555" onMouseOver="hilite(3555)" onMouseOut="lolite()" onClick="logVariable('create_sample_contents')" href="../_variables/create_sample_contents.html">$create_sample_contents</a> == 'all' )
<a name="l1251"><span class="linenum">1251</span></a>          { // Array contains which collections should be installed
<a name="l1252"><span class="linenum">1252</span></a>              <a class="var it3613" onMouseOver="hilite(3613)" onMouseOut="lolite()" onClick="logVariable('install_collection_home')" href="../_variables/install_collection_home.html">$install_collection_home</a> =   1;
<a name="l1253"><span class="linenum">1253</span></a>              <a class="var it3614" onMouseOver="hilite(3614)" onMouseOut="lolite()" onClick="logVariable('install_collection_bloga')" href="../_variables/install_collection_bloga.html">$install_collection_bloga</a> =  1;
<a name="l1254"><span class="linenum">1254</span></a>              <a class="var it3615" onMouseOver="hilite(3615)" onMouseOut="lolite()" onClick="logVariable('install_collection_blogb')" href="../_variables/install_collection_blogb.html">$install_collection_blogb</a> =  1;
<a name="l1255"><span class="linenum">1255</span></a>              <a class="var it3616" onMouseOver="hilite(3616)" onMouseOut="lolite()" onClick="logVariable('install_collection_photos')" href="../_variables/install_collection_photos.html">$install_collection_photos</a> = 1;
<a name="l1256"><span class="linenum">1256</span></a>              <a class="var it3617" onMouseOver="hilite(3617)" onMouseOut="lolite()" onClick="logVariable('install_collection_forums')" href="../_variables/install_collection_forums.html">$install_collection_forums</a> = 1;
<a name="l1257"><span class="linenum">1257</span></a>              <a class="var it3618" onMouseOver="hilite(3618)" onMouseOut="lolite()" onClick="logVariable('install_collection_manual')" href="../_variables/install_collection_manual.html">$install_collection_manual</a> = 1;
<a name="l1258"><span class="linenum">1258</span></a>          }
<a name="l1259"><span class="linenum">1259</span></a>          else
<a name="l1260"><span class="linenum">1260</span></a>          { // Array contains which collections should be installed
<a name="l1261"><span class="linenum">1261</span></a>              <a class="var it3619" onMouseOver="hilite(3619)" onMouseOut="lolite()" onClick="logVariable('collections')" href="../_variables/collections.html">$collections</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'collections', 'array:string', array() );
<a name="l1262"><span class="linenum">1262</span></a>              <a class="var it3613" onMouseOver="hilite(3613)" onMouseOut="lolite()" onClick="logVariable('install_collection_home')" href="../_variables/install_collection_home.html">$install_collection_home</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'home', <a class="var it3619" onMouseOver="hilite(3619)" onMouseOut="lolite()" onClick="logVariable('collections')" href="../_variables/collections.html">$collections</a> );
<a name="l1263"><span class="linenum">1263</span></a>              <a class="var it3614" onMouseOver="hilite(3614)" onMouseOut="lolite()" onClick="logVariable('install_collection_bloga')" href="../_variables/install_collection_bloga.html">$install_collection_bloga</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'a', <a class="var it3619" onMouseOver="hilite(3619)" onMouseOut="lolite()" onClick="logVariable('collections')" href="../_variables/collections.html">$collections</a> );
<a name="l1264"><span class="linenum">1264</span></a>              <a class="var it3615" onMouseOver="hilite(3615)" onMouseOut="lolite()" onClick="logVariable('install_collection_blogb')" href="../_variables/install_collection_blogb.html">$install_collection_blogb</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'b', <a class="var it3619" onMouseOver="hilite(3619)" onMouseOut="lolite()" onClick="logVariable('collections')" href="../_variables/collections.html">$collections</a> );
<a name="l1265"><span class="linenum">1265</span></a>              <a class="var it3616" onMouseOver="hilite(3616)" onMouseOut="lolite()" onClick="logVariable('install_collection_photos')" href="../_variables/install_collection_photos.html">$install_collection_photos</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'photos', <a class="var it3619" onMouseOver="hilite(3619)" onMouseOut="lolite()" onClick="logVariable('collections')" href="../_variables/collections.html">$collections</a> );
<a name="l1266"><span class="linenum">1266</span></a>              <a class="var it3617" onMouseOver="hilite(3617)" onMouseOut="lolite()" onClick="logVariable('install_collection_forums')" href="../_variables/install_collection_forums.html">$install_collection_forums</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'forums', <a class="var it3619" onMouseOver="hilite(3619)" onMouseOut="lolite()" onClick="logVariable('collections')" href="../_variables/collections.html">$collections</a> );
<a name="l1267"><span class="linenum">1267</span></a>              <a class="var it3618" onMouseOver="hilite(3618)" onMouseOut="lolite()" onClick="logVariable('install_collection_manual')" href="../_variables/install_collection_manual.html">$install_collection_manual</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( 'manual', <a class="var it3619" onMouseOver="hilite(3619)" onMouseOut="lolite()" onClick="logVariable('collections')" href="../_variables/collections.html">$collections</a> );
<a name="l1268"><span class="linenum">1268</span></a>          }
<a name="l1269"><span class="linenum">1269</span></a>  
<a name="l1270"><span class="linenum">1270</span></a>          if( <a class="var it3613" onMouseOver="hilite(3613)" onMouseOut="lolite()" onClick="logVariable('install_collection_home')" href="../_variables/install_collection_home.html">$install_collection_home</a> )
<a name="l1271"><span class="linenum">1271</span></a>          { // After installing of the blog &quot;Home&quot;
<a name="l1272"><span class="linenum">1272</span></a>              <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1273"><span class="linenum">1273</span></a>          }
<a name="l1274"><span class="linenum">1274</span></a>          if( <a class="var it3614" onMouseOver="hilite(3614)" onMouseOut="lolite()" onClick="logVariable('install_collection_bloga')" href="../_variables/install_collection_bloga.html">$install_collection_bloga</a> )
<a name="l1275"><span class="linenum">1275</span></a>          { // After installing of the blog &quot;Blog A&quot;
<a name="l1276"><span class="linenum">1276</span></a>              <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1277"><span class="linenum">1277</span></a>          }
<a name="l1278"><span class="linenum">1278</span></a>          if( <a class="var it3615" onMouseOver="hilite(3615)" onMouseOut="lolite()" onClick="logVariable('install_collection_blogb')" href="../_variables/install_collection_blogb.html">$install_collection_blogb</a> )
<a name="l1279"><span class="linenum">1279</span></a>          { // After installing of the blog &quot;Blog B&quot;
<a name="l1280"><span class="linenum">1280</span></a>              <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1281"><span class="linenum">1281</span></a>          }
<a name="l1282"><span class="linenum">1282</span></a>          if( <a class="var it3616" onMouseOver="hilite(3616)" onMouseOut="lolite()" onClick="logVariable('install_collection_photos')" href="../_variables/install_collection_photos.html">$install_collection_photos</a> )
<a name="l1283"><span class="linenum">1283</span></a>          { // After installing of the blog &quot;Photos&quot;
<a name="l1284"><span class="linenum">1284</span></a>              <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1285"><span class="linenum">1285</span></a>          }
<a name="l1286"><span class="linenum">1286</span></a>          if( <a class="var it3617" onMouseOver="hilite(3617)" onMouseOut="lolite()" onClick="logVariable('install_collection_forums')" href="../_variables/install_collection_forums.html">$install_collection_forums</a> )
<a name="l1287"><span class="linenum">1287</span></a>          { // After installing of the blog &quot;Forums&quot;
<a name="l1288"><span class="linenum">1288</span></a>              <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1289"><span class="linenum">1289</span></a>          }
<a name="l1290"><span class="linenum">1290</span></a>          if( <a class="var it3618" onMouseOver="hilite(3618)" onMouseOut="lolite()" onClick="logVariable('install_collection_manual')" href="../_variables/install_collection_manual.html">$install_collection_manual</a> )
<a name="l1291"><span class="linenum">1291</span></a>          { // After installing of the blog &quot;Manual&quot;
<a name="l1292"><span class="linenum">1292</span></a>              <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1293"><span class="linenum">1293</span></a>          }
<a name="l1294"><span class="linenum">1294</span></a>      }
<a name="l1295"><span class="linenum">1295</span></a>  
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment">    // Last step before successful message:</span>
<a name="l1297"><span class="linenum">1297</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1298"><span class="linenum">1298</span></a>  
<a name="l1299"><span class="linenum">1299</span></a>      return <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>;
<a name="l1300"><span class="linenum">1300</span></a>  }
<a name="l1301"><span class="linenum">1301</span></a>  
<a name="l1302"><span class="linenum">1302</span></a>  
<a name="l1303"><span class="linenum">1303</span></a>  <span class="comment">/**</span>
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment"> * Calculate a number of the steps for current upgrading</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment"> *</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment"> * @return integer</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment"> */</span>
<a name="l1308"><span class="linenum">1308</span></a>  function <a class="function" onClick="logFunction('get_upgrade_steps_count')" href="../_functions/get_upgrade_steps_count.html" onMouseOver="funcPopup(event,'get_upgrade_steps_count')">get_upgrade_steps_count</a>()
<a name="l1309"><span class="linenum">1309</span></a>  {
<a name="l1310"><span class="linenum">1310</span></a>      global <a class="var it3593" onMouseOver="hilite(3593)" onMouseOut="lolite()" onClick="logVariable('new_db_version')" href="../_variables/new_db_version.html">$new_db_version</a>;
<a name="l1311"><span class="linenum">1311</span></a>  
<a name="l1312"><span class="linenum">1312</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a> = 0;
<a name="l1313"><span class="linenum">1313</span></a>  
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment">    // After Checking files:</span>
<a name="l1315"><span class="linenum">1315</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1316"><span class="linenum">1316</span></a>  
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment">    // After Loading all modules:</span>
<a name="l1318"><span class="linenum">1318</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1319"><span class="linenum">1319</span></a>  
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment">    // Calculate the upgrade blocks:</span>
<a name="l1321"><span class="linenum">1321</span></a>      <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> = <a class="function" onClick="logFunction('get_db_version')" href="../_functions/get_db_version.html" onMouseOver="funcPopup(event,'get_db_version')">get_db_version</a>();
<a name="l1322"><span class="linenum">1322</span></a>      if( <a class="var it3593" onMouseOver="hilite(3593)" onMouseOut="lolite()" onClick="logVariable('new_db_version')" href="../_variables/new_db_version.html">$new_db_version</a> &gt; <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> )
<a name="l1323"><span class="linenum">1323</span></a>      { // Only when DB must be updated
<a name="l1324"><span class="linenum">1324</span></a>          <a class="var it7823" onMouseOver="hilite(7823)" onMouseOut="lolite()" onClick="logVariable('upgrade_file_name')" href="../_variables/upgrade_file_name.html">$upgrade_file_name</a> = <a class="phpfunction" onClick="logFunction('dirname')" href="../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>( __FILE__ ).'/_functions_evoupgrade.php';
<a name="l1325"><span class="linenum">1325</span></a>          if( @<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it7823" onMouseOver="hilite(7823)" onMouseOut="lolite()" onClick="logVariable('upgrade_file_name')" href="../_variables/upgrade_file_name.html">$upgrade_file_name</a> ) )
<a name="l1326"><span class="linenum">1326</span></a>          { // If file exists we can parse to know how much the upgrade blocks will be executed
<a name="l1327"><span class="linenum">1327</span></a>              <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('upgrade_file_content')" href="../_variables/upgrade_file_content.html">$upgrade_file_content</a> = <a class="phpfunction" onClick="logFunction('file_get_contents')" href="../_functions/file_get_contents.html" onMouseOver="phpfuncPopup(event,'file_get_contents')">file_get_contents</a>( <a class="var it7823" onMouseOver="hilite(7823)" onMouseOut="lolite()" onClick="logVariable('upgrade_file_name')" href="../_variables/upgrade_file_name.html">$upgrade_file_name</a> );
<a name="l1328"><span class="linenum">1328</span></a>              if( <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>( '#if\(\s*\<a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a>\s*&lt;\s*(\d+)\s*\)#i', <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('upgrade_file_content')" href="../_variables/upgrade_file_content.html">$upgrade_file_content</a>, <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('version_matches')" href="../_variables/version_matches.html">$version_matches</a> ) )
<a name="l1329"><span class="linenum">1329</span></a>              {
<a name="l1330"><span class="linenum">1330</span></a>                  foreach( <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('version_matches')" href="../_variables/version_matches.html">$version_matches</a>[1] as <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> )
<a name="l1331"><span class="linenum">1331</span></a>                  {
<a name="l1332"><span class="linenum">1332</span></a>                      if( <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> &lt; <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> &amp;&amp; <a class="var it3593" onMouseOver="hilite(3593)" onMouseOut="lolite()" onClick="logVariable('new_db_version')" href="../_variables/new_db_version.html">$new_db_version</a> != <a class="var it6821" onMouseOver="hilite(6821)" onMouseOut="lolite()" onClick="logVariable('old_db_version')" href="../_variables/old_db_version.html">$old_db_version</a> )
<a name="l1333"><span class="linenum">1333</span></a>                      { // Only these blocks will be executed
<a name="l1334"><span class="linenum">1334</span></a>                          <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1335"><span class="linenum">1335</span></a>                      }
<a name="l1336"><span class="linenum">1336</span></a>                  }
<a name="l1337"><span class="linenum">1337</span></a>              }
<a name="l1338"><span class="linenum">1338</span></a>          }
<a name="l1339"><span class="linenum">1339</span></a>      }
<a name="l1340"><span class="linenum">1340</span></a>  
<a name="l1341"><span class="linenum">1341</span></a>  <span class="comment">    // Before Starting to check DB:</span>
<a name="l1342"><span class="linenum">1342</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1343"><span class="linenum">1343</span></a>  
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment">    // Last step before successful message:</span>
<a name="l1345"><span class="linenum">1345</span></a>      <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>++;
<a name="l1346"><span class="linenum">1346</span></a>  
<a name="l1347"><span class="linenum">1347</span></a>      return <a class="var it1941" onMouseOver="hilite(1941)" onMouseOut="lolite()" onClick="logVariable('steps')" href="../_variables/steps.html">$steps</a>;
<a name="l1348"><span class="linenum">1348</span></a>  }
<a name="l1349"><span class="linenum">1349</span></a>  
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">/**</span>
<a name="l1352"><span class="linenum">1352</span></a>  <span class="comment"> * Display the messages on install pages</span>
<a name="l1353"><span class="linenum">1353</span></a>  <span class="comment"> *</span>
<a name="l1354"><span class="linenum">1354</span></a>  <span class="comment"> * @param string|array Messages</span>
<a name="l1355"><span class="linenum">1355</span></a>  <span class="comment"> * @param string Message type: 'error', 'warning', 'success', 'info'</span>
<a name="l1356"><span class="linenum">1356</span></a>  <span class="comment"> */</span>
<a name="l1357"><span class="linenum">1357</span></a>  function <a class="function" onClick="logFunction('display_install_messages')" href="../_functions/display_install_messages.html" onMouseOver="funcPopup(event,'display_install_messages')">display_install_messages</a>( <a class="var it2362" onMouseOver="hilite(2362)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>, <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = 'error' )
<a name="l1358"><span class="linenum">1358</span></a>  {
<a name="l1359"><span class="linenum">1359</span></a>      if( empty( <a class="var it2362" onMouseOver="hilite(2362)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a> ) )
<a name="l1360"><span class="linenum">1360</span></a>      { // No messages
<a name="l1361"><span class="linenum">1361</span></a>          return;
<a name="l1362"><span class="linenum">1362</span></a>      }
<a name="l1363"><span class="linenum">1363</span></a>  
<a name="l1364"><span class="linenum">1364</span></a>      if( <a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>( <a class="var it2362" onMouseOver="hilite(2362)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a> ) )
<a name="l1365"><span class="linenum">1365</span></a>      {
<a name="l1366"><span class="linenum">1366</span></a>          <a class="var it2362" onMouseOver="hilite(2362)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a> = array( <a class="var it2362" onMouseOver="hilite(2362)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a> );
<a name="l1367"><span class="linenum">1367</span></a>      }
<a name="l1368"><span class="linenum">1368</span></a>  
<a name="l1369"><span class="linenum">1369</span></a>      switch( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> )
<a name="l1370"><span class="linenum">1370</span></a>      {
<a name="l1371"><span class="linenum">1371</span></a>          case 'error':
<a name="l1372"><span class="linenum">1372</span></a>              <a class="var it7826" onMouseOver="hilite(7826)" onMouseOut="lolite()" onClick="logVariable('before_message')" href="../_variables/before_message.html">$before_message</a> = '&lt;evo:error&gt;';
<a name="l1373"><span class="linenum">1373</span></a>              <a class="var it7827" onMouseOver="hilite(7827)" onMouseOut="lolite()" onClick="logVariable('after_message')" href="../_variables/after_message.html">$after_message</a> = '&lt;/evo:error&gt;';
<a name="l1374"><span class="linenum">1374</span></a>              break;
<a name="l1375"><span class="linenum">1375</span></a>  
<a name="l1376"><span class="linenum">1376</span></a>          case 'warning':
<a name="l1377"><span class="linenum">1377</span></a>              <a class="var it7826" onMouseOver="hilite(7826)" onMouseOut="lolite()" onClick="logVariable('before_message')" href="../_variables/before_message.html">$before_message</a> = '&lt;evo:warning&gt;';
<a name="l1378"><span class="linenum">1378</span></a>              <a class="var it7827" onMouseOver="hilite(7827)" onMouseOut="lolite()" onClick="logVariable('after_message')" href="../_variables/after_message.html">$after_message</a> = '&lt;/evo:warning&gt;';
<a name="l1379"><span class="linenum">1379</span></a>              break;
<a name="l1380"><span class="linenum">1380</span></a>  
<a name="l1381"><span class="linenum">1381</span></a>          case 'success':
<a name="l1382"><span class="linenum">1382</span></a>              <a class="var it7826" onMouseOver="hilite(7826)" onMouseOut="lolite()" onClick="logVariable('before_message')" href="../_variables/before_message.html">$before_message</a> = '&lt;evo:success&gt;';
<a name="l1383"><span class="linenum">1383</span></a>              <a class="var it7827" onMouseOver="hilite(7827)" onMouseOut="lolite()" onClick="logVariable('after_message')" href="../_variables/after_message.html">$after_message</a> = '&lt;/evo:success&gt;';
<a name="l1384"><span class="linenum">1384</span></a>              break;
<a name="l1385"><span class="linenum">1385</span></a>  
<a name="l1386"><span class="linenum">1386</span></a>          case 'info':
<a name="l1387"><span class="linenum">1387</span></a>              <a class="var it7826" onMouseOver="hilite(7826)" onMouseOut="lolite()" onClick="logVariable('before_message')" href="../_variables/before_message.html">$before_message</a> = '&lt;evo:note&gt;';
<a name="l1388"><span class="linenum">1388</span></a>              <a class="var it7827" onMouseOver="hilite(7827)" onMouseOut="lolite()" onClick="logVariable('after_message')" href="../_variables/after_message.html">$after_message</a> = '&lt;/evo:note&gt;';
<a name="l1389"><span class="linenum">1389</span></a>              break;
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>          default:
<a name="l1392"><span class="linenum">1392</span></a>              <a class="var it7826" onMouseOver="hilite(7826)" onMouseOut="lolite()" onClick="logVariable('before_message')" href="../_variables/before_message.html">$before_message</a> = '';
<a name="l1393"><span class="linenum">1393</span></a>              <a class="var it7827" onMouseOver="hilite(7827)" onMouseOut="lolite()" onClick="logVariable('after_message')" href="../_variables/after_message.html">$after_message</a> = '';
<a name="l1394"><span class="linenum">1394</span></a>              break;
<a name="l1395"><span class="linenum">1395</span></a>      }
<a name="l1396"><span class="linenum">1396</span></a>  
<a name="l1397"><span class="linenum">1397</span></a>      if( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == 'error' )
<a name="l1398"><span class="linenum">1398</span></a>      { // Fix to correct bootstrap class name &quot;alert-danger&quot;
<a name="l1399"><span class="linenum">1399</span></a>          <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = 'danger';
<a name="l1400"><span class="linenum">1400</span></a>      }
<a name="l1401"><span class="linenum">1401</span></a>  
<a name="l1402"><span class="linenum">1402</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = '';
<a name="l1403"><span class="linenum">1403</span></a>      foreach( <a class="var it2362" onMouseOver="hilite(2362)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a> as <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> )
<a name="l1404"><span class="linenum">1404</span></a>      {
<a name="l1405"><span class="linenum">1405</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> .= '&lt;div class=&quot;alert alert-'.<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.'&quot; role=&quot;alert&quot;&gt;'.<a class="var it7826" onMouseOver="hilite(7826)" onMouseOut="lolite()" onClick="logVariable('before_message')" href="../_variables/before_message.html">$before_message</a>.<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>.<a class="var it7827" onMouseOver="hilite(7827)" onMouseOut="lolite()" onClick="logVariable('after_message')" href="../_variables/after_message.html">$after_message</a>.'&lt;/div&gt;'.&quot;\n&quot;;
<a name="l1406"><span class="linenum">1406</span></a>      }
<a name="l1407"><span class="linenum">1407</span></a>  
<a name="l1408"><span class="linenum">1408</span></a>      echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>;
<a name="l1409"><span class="linenum">1409</span></a>  }
<a name="l1410"><span class="linenum">1410</span></a>  
<a name="l1411"><span class="linenum">1411</span></a>  
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment">/**</span>
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment"> * Print JavaScript to control button on install page</span>
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment"> */</span>
<a name="l1415"><span class="linenum">1415</span></a>  function <a class="function" onClick="logFunction('echo_install_button_js')" href="../_functions/echo_install_button_js.html" onMouseOver="funcPopup(event,'echo_install_button_js')">echo_install_button_js</a>()
<a name="l1416"><span class="linenum">1416</span></a>  {
<a name="l1417"><span class="linenum">1417</span></a>      global <a class="var it1348" onMouseOver="hilite(1348)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../_variables/app_name.html">$app_name</a>;
<a name="l1418"><span class="linenum">1418</span></a>  ?&gt;
<a name="l1419"><span class="linenum">1419</span></a>  &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l1420"><span class="linenum">1420</span></a>  jQuery( document ).ready( function()
<a name="l1421"><span class="linenum">1421</span></a>  {
<a name="l1422"><span class="linenum">1422</span></a>      jQuery( '#install_button' ).click( function()
<a name="l1423"><span class="linenum">1423</span></a>      {
<a name="l1424"><span class="linenum">1424</span></a>          if( jQuery( '#deletedb' ).is( ':checked' ) )
<a name="l1425"><span class="linenum">1425</span></a>          {
<a name="l1426"><span class="linenum">1426</span></a>              if( confirm( '&lt;?php printf( <span class="comment">/* TRANS: %s gets replaced by app name, usually &quot;b2evolution&quot; */</span> <a class="function" onClick="logFunction('TS_')" href="../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>( 'Are you sure you want to delete your existing %s tables?\nDo you have a backup?' ), <a class="var it1348" onMouseOver="hilite(1348)" onMouseOut="lolite()" onClick="logVariable('app_name')" href="../_variables/app_name.html">$app_name</a> ); ?&gt;' ) )
<a name="l1427"><span class="linenum">1427</span></a>              {
<a name="l1428"><span class="linenum">1428</span></a>                  jQuery( 'input[name=confirmed]' ).val( 1 );
<a name="l1429"><span class="linenum">1429</span></a>                  return true;
<a name="l1430"><span class="linenum">1430</span></a>              }
<a name="l1431"><span class="linenum">1431</span></a>              else
<a name="l1432"><span class="linenum">1432</span></a>              {
<a name="l1433"><span class="linenum">1433</span></a>                  return false;
<a name="l1434"><span class="linenum">1434</span></a>              }
<a name="l1435"><span class="linenum">1435</span></a>          }
<a name="l1436"><span class="linenum">1436</span></a>      } );
<a name="l1437"><span class="linenum">1437</span></a>  
<a name="l1438"><span class="linenum">1438</span></a>  	function <a class="function" onClick="logFunction('update_install_button_info')" href="../_functions/update_install_button_info.html" onMouseOver="funcPopup(event,'update_install_button_info')">update_install_button_info</a>()
<a name="l1439"><span class="linenum">1439</span></a>      {
<a name="l1440"><span class="linenum">1440</span></a>          switch( jQuery( 'input[type=radio][name=action]:checked' ).val() )
<a name="l1441"><span class="linenum">1441</span></a>          {
<a name="l1442"><span class="linenum">1442</span></a>              case 'menu-install':
<a name="l1443"><span class="linenum">1443</span></a>                  var btn_title = '&lt;?php echo <a class="function" onClick="logFunction('TS_')" href="../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Next').' &amp;raquo;'; ?&gt;';
<a name="l1444"><span class="linenum">1444</span></a>                  var btn_class = 'btn-success';
<a name="l1445"><span class="linenum">1445</span></a>                  break;
<a name="l1446"><span class="linenum">1446</span></a>  
<a name="l1447"><span class="linenum">1447</span></a>              case 'evoupgrade':
<a name="l1448"><span class="linenum">1448</span></a>                  var btn_title = '&lt;?php echo <a class="function" onClick="logFunction('TS_')" href="../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('UPGRADE!'); ?&gt;';
<a name="l1449"><span class="linenum">1449</span></a>                  var btn_class = 'btn-warning';
<a name="l1450"><span class="linenum">1450</span></a>                  break;
<a name="l1451"><span class="linenum">1451</span></a>  
<a name="l1452"><span class="linenum">1452</span></a>              case 'deletedb':
<a name="l1453"><span class="linenum">1453</span></a>                  var btn_title = '&lt;?php echo <a class="function" onClick="logFunction('TS_')" href="../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('DELETE ALL!'); ?&gt;';
<a name="l1454"><span class="linenum">1454</span></a>                  var btn_class = 'btn-danger';
<a name="l1455"><span class="linenum">1455</span></a>                  break;
<a name="l1456"><span class="linenum">1456</span></a>  
<a name="l1457"><span class="linenum">1457</span></a>              case 'start':
<a name="l1458"><span class="linenum">1458</span></a>                  var btn_title = '&lt;?php echo <a class="function" onClick="logFunction('TS_')" href="../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Change config').' &amp;raquo;'; ?&gt;';
<a name="l1459"><span class="linenum">1459</span></a>                  var btn_class = 'btn-primary';
<a name="l1460"><span class="linenum">1460</span></a>                  break;
<a name="l1461"><span class="linenum">1461</span></a>  
<a name="l1462"><span class="linenum">1462</span></a>              case 'utf8check':
<a name="l1463"><span class="linenum">1463</span></a>                  var btn_title = '&lt;?php echo <a class="function" onClick="logFunction('TS_')" href="../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('CHECK DB!'); ?&gt;';
<a name="l1464"><span class="linenum">1464</span></a>                  var btn_class = 'btn-primary';
<a name="l1465"><span class="linenum">1465</span></a>                  break;
<a name="l1466"><span class="linenum">1466</span></a>  
<a name="l1467"><span class="linenum">1467</span></a>              default:
<a name="l1468"><span class="linenum">1468</span></a>                  return true;
<a name="l1469"><span class="linenum">1469</span></a>          }
<a name="l1470"><span class="linenum">1470</span></a>  
<a name="l1471"><span class="linenum">1471</span></a>          jQuery( '#install_button' )
<a name="l1472"><span class="linenum">1472</span></a>              .html( btn_title )
<a name="l1473"><span class="linenum">1473</span></a>              .attr( 'class', 'btn btn-lg ' + btn_class );
<a name="l1474"><span class="linenum">1474</span></a>      }
<a name="l1475"><span class="linenum">1475</span></a>  
<a name="l1476"><span class="linenum">1476</span></a>      jQuery( 'input[type=radio][name=action]' ).click( function()
<a name="l1477"><span class="linenum">1477</span></a>      {
<a name="l1478"><span class="linenum">1478</span></a>          <a class="function" onClick="logFunction('update_install_button_info')" href="../_functions/update_install_button_info.html" onMouseOver="funcPopup(event,'update_install_button_info')">update_install_button_info</a>();
<a name="l1479"><span class="linenum">1479</span></a>      } );
<a name="l1480"><span class="linenum">1480</span></a>  
<a name="l1481"><span class="linenum">1481</span></a>      <a class="function" onClick="logFunction('update_install_button_info')" href="../_functions/update_install_button_info.html" onMouseOver="funcPopup(event,'update_install_button_info')">update_install_button_info</a>();
<a name="l1482"><span class="linenum">1482</span></a>  } );
<a name="l1483"><span class="linenum">1483</span></a>  &lt;/script&gt;
<a name="l1484"><span class="linenum">1484</span></a>  &lt;?php
<a name="l1485"><span class="linenum">1485</span></a>  }
<a name="l1486"><span class="linenum">1486</span></a>  
<a name="l1487"><span class="linenum">1487</span></a>  
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment">/**</span>
<a name="l1489"><span class="linenum">1489</span></a>  <span class="comment"> * Check if current installation is local</span>
<a name="l1490"><span class="linenum">1490</span></a>  <span class="comment"> *</span>
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment"> * @return boolean</span>
<a name="l1492"><span class="linenum">1492</span></a>  <span class="comment"> */</span>
<a name="l1493"><span class="linenum">1493</span></a>  function <a class="function" onClick="logFunction('check_local_installation')" href="../_functions/check_local_installation.html" onMouseOver="funcPopup(event,'check_local_installation')">check_local_installation</a>()
<a name="l1494"><span class="linenum">1494</span></a>  {
<a name="l1495"><span class="linenum">1495</span></a>      global <a class="var it4321" onMouseOver="hilite(4321)" onMouseOut="lolite()" onClick="logVariable('basehost')" href="../_variables/basehost.html">$basehost</a>;
<a name="l1496"><span class="linenum">1496</span></a>  
<a name="l1497"><span class="linenum">1497</span></a>      return <a class="phpfunction" onClick="logFunction('php_sapi_name')" href="../_functions/php_sapi_name.html" onMouseOver="phpfuncPopup(event,'php_sapi_name')">php_sapi_name</a>() != 'cli' &amp;&amp; // NOT php CLI mode
<a name="l1498"><span class="linenum">1498</span></a>          ( <a class="var it4321" onMouseOver="hilite(4321)" onMouseOut="lolite()" onClick="logVariable('basehost')" href="../_variables/basehost.html">$basehost</a> == 'localhost' ||
<a name="l1499"><span class="linenum">1499</span></a>              ( isset( <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_ADDR'] ) &amp;&amp; (
<a name="l1500"><span class="linenum">1500</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_ADDR'] == '127.0.0.1' ||
<a name="l1501"><span class="linenum">1501</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_ADDR'] == '::1' ) // IPv6 address of 127.0.0.1
<a name="l1502"><span class="linenum">1502</span></a>              ) ||
<a name="l1503"><span class="linenum">1503</span></a>              ( isset( <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['REMOTE_ADDR'] ) &amp;&amp; (
<a name="l1504"><span class="linenum">1504</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['REMOTE_ADDR'] == '127.0.0.1' ||
<a name="l1505"><span class="linenum">1505</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['REMOTE_ADDR'] == '::1' )
<a name="l1506"><span class="linenum">1506</span></a>              ) ||
<a name="l1507"><span class="linenum">1507</span></a>              ( isset( <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['HTTP_HOST'] ) &amp;&amp; (
<a name="l1508"><span class="linenum">1508</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['HTTP_HOST'] == '127.0.0.1' ||
<a name="l1509"><span class="linenum">1509</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['HTTP_HOST'] == '::1' )
<a name="l1510"><span class="linenum">1510</span></a>              ) ||
<a name="l1511"><span class="linenum">1511</span></a>              ( isset( <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_NAME'] ) &amp;&amp; (
<a name="l1512"><span class="linenum">1512</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_NAME'] == '127.0.0.1' ||
<a name="l1513"><span class="linenum">1513</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_NAME'] == '::1' )
<a name="l1514"><span class="linenum">1514</span></a>              )
<a name="l1515"><span class="linenum">1515</span></a>          );
<a name="l1516"><span class="linenum">1516</span></a>  }
<a name="l1517"><span class="linenum">1517</span></a>  
<a name="l1518"><span class="linenum">1518</span></a>  
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment">/**</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment"> * Display modal window after install process with some data</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment"> *</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment"> * @param string Title</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment"> * @param string Body</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment"> */</span>
<a name="l1525"><span class="linenum">1525</span></a>  function <a class="function" onClick="logFunction('display_install_result_window')" href="../_functions/display_install_result_window.html" onMouseOver="funcPopup(event,'display_install_result_window')">display_install_result_window</a>( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>, <a class="var it880" onMouseOver="hilite(880)" onMouseOut="lolite()" onClick="logVariable('body')" href="../_variables/body.html">$body</a> )
<a name="l1526"><span class="linenum">1526</span></a>  {
<a name="l1527"><span class="linenum">1527</span></a>      global <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../_variables/admin_url.html">$admin_url</a>, <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>;
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>      if( ! empty( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> ) &amp;&amp; <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> != 'normal' )
<a name="l1530"><span class="linenum">1530</span></a>      { // Exit here, because we can use the modal window ONLY on normal mode (Hide on compact mode)
<a name="l1531"><span class="linenum">1531</span></a>          return;
<a name="l1532"><span class="linenum">1532</span></a>      }
<a name="l1533"><span class="linenum">1533</span></a>  
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment">    // Remove a link to log in from body text:</span>
<a name="l1535"><span class="linenum">1535</span></a>      <a class="var it880" onMouseOver="hilite(880)" onMouseOut="lolite()" onClick="logVariable('body')" href="../_variables/body.html">$body</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~&lt;/?a[^&gt;]*&gt;~i', '', <a class="var it880" onMouseOver="hilite(880)" onMouseOut="lolite()" onClick="logVariable('body')" href="../_variables/body.html">$body</a> );
<a name="l1536"><span class="linenum">1536</span></a>  
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment">    // Modal window with info:</span>
<a name="l1538"><span class="linenum">1538</span></a>      echo '&lt;div class=&quot;modal modal-success fade&quot; id=&quot;evo_modal__install&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; aria-labelledby=&quot;evo_modal__label_install&quot; aria-hidden=&quot;true&quot;&gt;
<a name="l1539"><span class="linenum">1539</span></a>          &lt;div class=&quot;modal-dialog&quot;&gt;
<a name="l1540"><span class="linenum">1540</span></a>              &lt;div class=&quot;modal-content&quot;&gt;
<a name="l1541"><span class="linenum">1541</span></a>                  &lt;div class=&quot;modal-header&quot;&gt;
<a name="l1542"><span class="linenum">1542</span></a>                      &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;
<a name="l1543"><span class="linenum">1543</span></a>                      &lt;h4 class=&quot;modal-title&quot; id=&quot;evo_modal__label_install&quot;&gt;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>.'&lt;/h4&gt;
<a name="l1544"><span class="linenum">1544</span></a>                  &lt;/div&gt;
<a name="l1545"><span class="linenum">1545</span></a>                  &lt;div class=&quot;modal-body&quot;&gt;'.<a class="var it880" onMouseOver="hilite(880)" onMouseOut="lolite()" onClick="logVariable('body')" href="../_variables/body.html">$body</a>.'&lt;/div&gt;
<a name="l1546"><span class="linenum">1546</span></a>                  &lt;div class=&quot;modal-footer&quot; style=&quot;text-align:center&quot;&gt;
<a name="l1547"><span class="linenum">1547</span></a>                      &lt;a href=&quot;'.<a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>.'&quot; class=&quot;btn btn-primary&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Go to Front-office').'&lt;/a&gt;
<a name="l1548"><span class="linenum">1548</span></a>                      &lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../_variables/admin_url.html">$admin_url</a>.'&quot; class=&quot;btn btn-default&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Go to Back-office').'&lt;/a&gt;
<a name="l1549"><span class="linenum">1549</span></a>                  &lt;/div&gt;
<a name="l1550"><span class="linenum">1550</span></a>              &lt;/div&gt;
<a name="l1551"><span class="linenum">1551</span></a>          &lt;/div&gt;
<a name="l1552"><span class="linenum">1552</span></a>      &lt;/div&gt;';
<a name="l1553"><span class="linenum">1553</span></a>  
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">    // JavaScript to open modal window with info:</span>
<a name="l1555"><span class="linenum">1555</span></a>      echo '&lt;script type=&quot;text/javascript&quot;&gt;'
<a name="l1556"><span class="linenum">1556</span></a>          .'<a class="function" onClick="logFunction('setTimeout')" href="../_functions/settimeout.html" onMouseOver="funcPopup(event,'settimeout')">setTimeout</a>( function() { jQuery( &quot;#evo_modal__install&quot; ).modal(); }, 1000 );'
<a name="l1557"><span class="linenum">1557</span></a>      .'&lt;/script&gt;';
<a name="l1558"><span class="linenum">1558</span></a>  }
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>  
<a name="l1561"><span class="linenum">1561</span></a>  <span class="comment">/**</span>
<a name="l1562"><span class="linenum">1562</span></a>  <span class="comment"> * Check request for quick installation</span>
<a name="l1563"><span class="linenum">1563</span></a>  <span class="comment"> * Update basic config file from url params</span>
<a name="l1564"><span class="linenum">1564</span></a>  <span class="comment"> *</span>
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment"> * @return boolean|string TRUE on success, OR error messages</span>
<a name="l1566"><span class="linenum">1566</span></a>  <span class="comment"> */</span>
<a name="l1567"><span class="linenum">1567</span></a>  function <a class="function" onClick="logFunction('check_quick_install_request')" href="../_functions/check_quick_install_request.html" onMouseOver="funcPopup(event,'check_quick_install_request')">check_quick_install_request</a>()
<a name="l1568"><span class="linenum">1568</span></a>  {
<a name="l1569"><span class="linenum">1569</span></a>      global <a class="var it3710" onMouseOver="hilite(3710)" onMouseOut="lolite()" onClick="logVariable('config_is_done')" href="../_variables/config_is_done.html">$config_is_done</a>, <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>, <a class="var it3558" onMouseOver="hilite(3558)" onMouseOut="lolite()" onClick="logVariable('install_login')" href="../_variables/install_login.html">$install_login</a>, <a class="var it3559" onMouseOver="hilite(3559)" onMouseOut="lolite()" onClick="logVariable('install_password')" href="../_variables/install_password.html">$install_password</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../_variables/Messages.html">$Messages</a>;
<a name="l1570"><span class="linenum">1570</span></a>  
<a name="l1571"><span class="linenum">1571</span></a>      <a class="var it7828" onMouseOver="hilite(7828)" onMouseOut="lolite()" onClick="logVariable('admin_login')" href="../_variables/admin_login.html">$admin_login</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'admin_login', 'string', '' );
<a name="l1572"><span class="linenum">1572</span></a>      <a class="var it7829" onMouseOver="hilite(7829)" onMouseOut="lolite()" onClick="logVariable('admin_password')" href="../_variables/admin_password.html">$admin_password</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'admin_password', 'string', '' );
<a name="l1573"><span class="linenum">1573</span></a>  
<a name="l1574"><span class="linenum">1574</span></a>      if( ! empty( <a class="var it7828" onMouseOver="hilite(7828)" onMouseOut="lolite()" onClick="logVariable('admin_login')" href="../_variables/admin_login.html">$admin_login</a> ) )
<a name="l1575"><span class="linenum">1575</span></a>      { // Try to use an admin login from request:
<a name="l1576"><span class="linenum">1576</span></a>          if( <a class="function" onClick="logFunction('param_check_valid_login')" href="../_functions/param_check_valid_login.html" onMouseOver="funcPopup(event,'param_check_valid_login')">param_check_valid_login</a>( 'admin_login' ) )
<a name="l1577"><span class="linenum">1577</span></a>          { // We can use this login name
<a name="l1578"><span class="linenum">1578</span></a>              <a class="var it3558" onMouseOver="hilite(3558)" onMouseOut="lolite()" onClick="logVariable('install_login')" href="../_variables/install_login.html">$install_login</a> = <a class="var it7828" onMouseOver="hilite(7828)" onMouseOut="lolite()" onClick="logVariable('admin_login')" href="../_variables/admin_login.html">$admin_login</a>;
<a name="l1579"><span class="linenum">1579</span></a>          }
<a name="l1580"><span class="linenum">1580</span></a>          else
<a name="l1581"><span class="linenum">1581</span></a>          { // Display an error message for impossible login name:
<a name="l1582"><span class="linenum">1582</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'ERROR: Impossible to use &quot;%s&quot; for the admin account. Using &quot;admin&quot; instead.', <a class="var it7828" onMouseOver="hilite(7828)" onMouseOut="lolite()" onClick="logVariable('admin_login')" href="../_variables/admin_login.html">$admin_login</a> ) );
<a name="l1583"><span class="linenum">1583</span></a>          }
<a name="l1584"><span class="linenum">1584</span></a>      }
<a name="l1585"><span class="linenum">1585</span></a>  
<a name="l1586"><span class="linenum">1586</span></a>      if( ! empty( <a class="var it7829" onMouseOver="hilite(7829)" onMouseOut="lolite()" onClick="logVariable('admin_password')" href="../_variables/admin_password.html">$admin_password</a> ) &amp;&amp; <a class="function" onClick="logFunction('param_check_passwords')" href="../_functions/param_check_passwords.html" onMouseOver="funcPopup(event,'param_check_passwords')">param_check_passwords</a>( 'admin_password', 'admin_password', false, 5 ) )
<a name="l1587"><span class="linenum">1587</span></a>      { // Set admin password from request:
<a name="l1588"><span class="linenum">1588</span></a>          <a class="var it3559" onMouseOver="hilite(3559)" onMouseOut="lolite()" onClick="logVariable('install_password')" href="../_variables/install_password.html">$install_password</a> = <a class="var it7829" onMouseOver="hilite(7829)" onMouseOut="lolite()" onClick="logVariable('admin_password')" href="../_variables/admin_password.html">$admin_password</a>;
<a name="l1589"><span class="linenum">1589</span></a>      }
<a name="l1590"><span class="linenum">1590</span></a>  
<a name="l1591"><span class="linenum">1591</span></a>      if( <a class="var it3710" onMouseOver="hilite(3710)" onMouseOut="lolite()" onClick="logVariable('config_is_done')" href="../_variables/config_is_done.html">$config_is_done</a> )
<a name="l1592"><span class="linenum">1592</span></a>      { // Config is already done, Don't use url params to update basic config file
<a name="l1593"><span class="linenum">1593</span></a>          return true;
<a name="l1594"><span class="linenum">1594</span></a>      }
<a name="l1595"><span class="linenum">1595</span></a>  
<a name="l1596"><span class="linenum">1596</span></a>  <span class="comment">    // DB Access:</span>
<a name="l1597"><span class="linenum">1597</span></a>      <a class="var it7830" onMouseOver="hilite(7830)" onMouseOut="lolite()" onClick="logVariable('db_user')" href="../_variables/db_user.html">$db_user</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'db_user', 'string', '' );
<a name="l1598"><span class="linenum">1598</span></a>      <a class="var it7831" onMouseOver="hilite(7831)" onMouseOut="lolite()" onClick="logVariable('db_password')" href="../_variables/db_password.html">$db_password</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'db_password', 'raw', '' );
<a name="l1599"><span class="linenum">1599</span></a>      <a class="var it7832" onMouseOver="hilite(7832)" onMouseOut="lolite()" onClick="logVariable('db_name')" href="../_variables/db_name.html">$db_name</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'db_name', 'string', '' );
<a name="l1600"><span class="linenum">1600</span></a>      <a class="var it7833" onMouseOver="hilite(7833)" onMouseOut="lolite()" onClick="logVariable('db_host')" href="../_variables/db_host.html">$db_host</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'db_host', 'string', '' );
<a name="l1601"><span class="linenum">1601</span></a>      <a class="var it6814" onMouseOver="hilite(6814)" onMouseOut="lolite()" onClick="logVariable('db_tableprefix')" href="../_variables/db_tableprefix.html">$db_tableprefix</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'db_tableprefix', 'string', '' );
<a name="l1602"><span class="linenum">1602</span></a>  
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment">    // Admin e-mail:</span>
<a name="l1604"><span class="linenum">1604</span></a>      global <a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('admin_email')" href="../_variables/admin_email.html">$admin_email</a>;
<a name="l1605"><span class="linenum">1605</span></a>      <a class="var it7834" onMouseOver="hilite(7834)" onMouseOut="lolite()" onClick="logVariable('default_admin_email')" href="../_variables/default_admin_email.html">$default_admin_email</a> = <a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('admin_email')" href="../_variables/admin_email.html">$admin_email</a>;
<a name="l1606"><span class="linenum">1606</span></a>      <a class="var it6831" onMouseOver="hilite(6831)" onMouseOut="lolite()" onClick="logVariable('conf_admin_email')" href="../_variables/conf_admin_email.html">$conf_admin_email</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'admin_email', 'string', '', false, true );
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>      if( ! empty( <a class="var it6831" onMouseOver="hilite(6831)" onMouseOut="lolite()" onClick="logVariable('conf_admin_email')" href="../_variables/conf_admin_email.html">$conf_admin_email</a> ) ||
<a name="l1609"><span class="linenum">1609</span></a>          ! empty( <a class="var it7830" onMouseOver="hilite(7830)" onMouseOut="lolite()" onClick="logVariable('db_user')" href="../_variables/db_user.html">$db_user</a> ) || ! empty( <a class="var it7831" onMouseOver="hilite(7831)" onMouseOut="lolite()" onClick="logVariable('db_password')" href="../_variables/db_password.html">$db_password</a> ) || ! empty( <a class="var it7832" onMouseOver="hilite(7832)" onMouseOut="lolite()" onClick="logVariable('db_name')" href="../_variables/db_name.html">$db_name</a> ) || ! empty( <a class="var it7833" onMouseOver="hilite(7833)" onMouseOut="lolite()" onClick="logVariable('db_host')" href="../_variables/db_host.html">$db_host</a> ) ||
<a name="l1610"><span class="linenum">1610</span></a>          ! empty( <a class="var it6814" onMouseOver="hilite(6814)" onMouseOut="lolite()" onClick="logVariable('db_tableprefix')" href="../_variables/db_tableprefix.html">$db_tableprefix</a> ) )
<a name="l1611"><span class="linenum">1611</span></a>      { // Try to update basic config file ONLY when at least one of these params are defined
<a name="l1612"><span class="linenum">1612</span></a>  
<a name="l1613"><span class="linenum">1613</span></a>          if( empty( <a class="var it6831" onMouseOver="hilite(6831)" onMouseOut="lolite()" onClick="logVariable('conf_admin_email')" href="../_variables/conf_admin_email.html">$conf_admin_email</a> ) || ! <a class="function" onClick="logFunction('param_check_email')" href="../_functions/param_check_email.html" onMouseOver="funcPopup(event,'param_check_email')">param_check_email</a>( 'admin_email' ) )
<a name="l1614"><span class="linenum">1614</span></a>          { // Use default admin email if it is empty from request
<a name="l1615"><span class="linenum">1615</span></a>              <a class="var it6831" onMouseOver="hilite(6831)" onMouseOut="lolite()" onClick="logVariable('conf_admin_email')" href="../_variables/conf_admin_email.html">$conf_admin_email</a> = <a class="var it7834" onMouseOver="hilite(7834)" onMouseOut="lolite()" onClick="logVariable('default_admin_email')" href="../_variables/default_admin_email.html">$default_admin_email</a>;
<a name="l1616"><span class="linenum">1616</span></a>          }
<a name="l1617"><span class="linenum">1617</span></a>  
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment">        // Base URL:</span>
<a name="l1619"><span class="linenum">1619</span></a>          global <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../_variables/admin_url.html">$admin_url</a>, <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../_variables/dispatcher.html">$dispatcher</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('tableprefix')" href="../_variables/tableprefix.html">$tableprefix</a>;
<a name="l1620"><span class="linenum">1620</span></a>          <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'baseurl', 'string', '', false, true );
<a name="l1621"><span class="linenum">1621</span></a>          if( empty( <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> ) || ! <a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~https?://~', <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> ) )
<a name="l1622"><span class="linenum">1622</span></a>          { // Try to autogenerate base url if it is empty or wrong from request:
<a name="l1623"><span class="linenum">1623</span></a>              <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = 'http://'.( isset( <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_NAME'] ) ? <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_NAME'] : 'yourserver.com' );
<a name="l1624"><span class="linenum">1624</span></a>              if( isset( <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_PORT'] ) &amp;&amp; ( <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_PORT'] != '80' ) )
<a name="l1625"><span class="linenum">1625</span></a>                  <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> .= ':'.<a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_PORT'];
<a name="l1626"><span class="linenum">1626</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>( <a class="var it618" onMouseOver="hilite(618)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../_variables/ReqPath.html">$ReqPath</a>, <a class="var it477" onMouseOver="hilite(477)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../_variables/ReqURI.html">$ReqURI</a> ) = <a class="function" onClick="logFunction('get_ReqURI')" href="../_functions/get_requri.html" onMouseOver="funcPopup(event,'get_requri')">get_ReqURI</a>();
<a name="l1627"><span class="linenum">1627</span></a>              <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> .= <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '#/<a class="function" onClick="logFunction('install')" href="../_functions/install.html" onMouseOver="funcPopup(event,'install')">install</a>(/(index.php)?)?$#', '', <a class="var it618" onMouseOver="hilite(618)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../_variables/ReqPath.html">$ReqPath</a> ).'/';
<a name="l1628"><span class="linenum">1628</span></a>          }
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment">        // Add a slash at the end if it is missed:</span>
<a name="l1630"><span class="linenum">1630</span></a>          <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, '/' ).'/';
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment">        // Update $admin_url to new value because it depends on $baseurl:</span>
<a name="l1632"><span class="linenum">1632</span></a>          <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../_variables/admin_url.html">$admin_url</a> = <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>.<a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../_variables/dispatcher.html">$dispatcher</a>;
<a name="l1633"><span class="linenum">1633</span></a>  
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment">        // Update $tableprefix to new from request:</span>
<a name="l1635"><span class="linenum">1635</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('tableprefix')" href="../_variables/tableprefix.html">$tableprefix</a> = <a class="var it6814" onMouseOver="hilite(6814)" onMouseOut="lolite()" onClick="logVariable('db_tableprefix')" href="../_variables/db_tableprefix.html">$db_tableprefix</a>;
<a name="l1636"><span class="linenum">1636</span></a>  
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">        // Try to create basic config file:</span>
<a name="l1638"><span class="linenum">1638</span></a>          <a class="var it6825" onMouseOver="hilite(6825)" onMouseOut="lolite()" onClick="logVariable('basic_config_params')" href="../_variables/basic_config_params.html">$basic_config_params</a> = array(
<a name="l1639"><span class="linenum">1639</span></a>                  'db_user'        =&gt; <a class="var it7830" onMouseOver="hilite(7830)" onMouseOut="lolite()" onClick="logVariable('db_user')" href="../_variables/db_user.html">$db_user</a>,
<a name="l1640"><span class="linenum">1640</span></a>                  'db_password'    =&gt; <a class="var it7831" onMouseOver="hilite(7831)" onMouseOut="lolite()" onClick="logVariable('db_password')" href="../_variables/db_password.html">$db_password</a>,
<a name="l1641"><span class="linenum">1641</span></a>                  'db_name'        =&gt; <a class="var it7832" onMouseOver="hilite(7832)" onMouseOut="lolite()" onClick="logVariable('db_name')" href="../_variables/db_name.html">$db_name</a>,
<a name="l1642"><span class="linenum">1642</span></a>                  'db_host'        =&gt; <a class="var it7833" onMouseOver="hilite(7833)" onMouseOut="lolite()" onClick="logVariable('db_host')" href="../_variables/db_host.html">$db_host</a>,
<a name="l1643"><span class="linenum">1643</span></a>                  'db_tableprefix' =&gt; <a class="var it6814" onMouseOver="hilite(6814)" onMouseOut="lolite()" onClick="logVariable('db_tableprefix')" href="../_variables/db_tableprefix.html">$db_tableprefix</a>,
<a name="l1644"><span class="linenum">1644</span></a>                  'baseurl'        =&gt; <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>,
<a name="l1645"><span class="linenum">1645</span></a>                  'admin_email'    =&gt; <a class="var it6831" onMouseOver="hilite(6831)" onMouseOut="lolite()" onClick="logVariable('conf_admin_email')" href="../_variables/conf_admin_email.html">$conf_admin_email</a>,
<a name="l1646"><span class="linenum">1646</span></a>                  'print_messages' =&gt; false,
<a name="l1647"><span class="linenum">1647</span></a>                  'quick_install'  =&gt; true,
<a name="l1648"><span class="linenum">1648</span></a>              );
<a name="l1649"><span class="linenum">1649</span></a>          if( <a class="function" onClick="logFunction('update_basic_config_file')" href="../_functions/update_basic_config_file.html" onMouseOver="funcPopup(event,'update_basic_config_file')">update_basic_config_file</a>( <a class="var it6825" onMouseOver="hilite(6825)" onMouseOut="lolite()" onClick="logVariable('basic_config_params')" href="../_variables/basic_config_params.html">$basic_config_params</a> ) )
<a name="l1650"><span class="linenum">1650</span></a>          { // Basic config file has been created successfully
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment">            // Update DB config to connect to DB correctly</span>
<a name="l1652"><span class="linenum">1652</span></a>              <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['user'] = <a class="var it7830" onMouseOver="hilite(7830)" onMouseOut="lolite()" onClick="logVariable('db_user')" href="../_variables/db_user.html">$db_user</a>;
<a name="l1653"><span class="linenum">1653</span></a>              <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['password'] = <a class="var it7831" onMouseOver="hilite(7831)" onMouseOut="lolite()" onClick="logVariable('db_password')" href="../_variables/db_password.html">$db_password</a>;
<a name="l1654"><span class="linenum">1654</span></a>              <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['name'] = <a class="var it7832" onMouseOver="hilite(7832)" onMouseOut="lolite()" onClick="logVariable('db_name')" href="../_variables/db_name.html">$db_name</a>;
<a name="l1655"><span class="linenum">1655</span></a>              <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['host'] = <a class="var it7833" onMouseOver="hilite(7833)" onMouseOut="lolite()" onClick="logVariable('db_host')" href="../_variables/db_host.html">$db_host</a>;
<a name="l1656"><span class="linenum">1656</span></a>          }
<a name="l1657"><span class="linenum">1657</span></a>          else
<a name="l1658"><span class="linenum">1658</span></a>          { // Failed on createing of basic config file
<a name="l1659"><span class="linenum">1659</span></a>              return false;
<a name="l1660"><span class="linenum">1660</span></a>          }
<a name="l1661"><span class="linenum">1661</span></a>      }
<a name="l1662"><span class="linenum">1662</span></a>  
<a name="l1663"><span class="linenum">1663</span></a>  <span class="comment">    // Revert config admin email to original value:</span>
<a name="l1664"><span class="linenum">1664</span></a>      <a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('admin_email')" href="../_variables/admin_email.html">$admin_email</a> = <a class="var it7834" onMouseOver="hilite(7834)" onMouseOut="lolite()" onClick="logVariable('default_admin_email')" href="../_variables/default_admin_email.html">$default_admin_email</a>;
<a name="l1665"><span class="linenum">1665</span></a>  
<a name="l1666"><span class="linenum">1666</span></a>      return true;
<a name="l1667"><span class="linenum">1667</span></a>  }
<a name="l1668"><span class="linenum">1668</span></a>  
<a name="l1669"><span class="linenum">1669</span></a>  
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">/**</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment"> * Update file /conf/_basic_config.php</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment"> *</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment"> * @param string Current action, updated by reference</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment"> * @param array Params</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment"> * @return boolean TRUE on success</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment"> */</span>
<a name="l1677"><span class="linenum">1677</span></a>  function <a class="function" onClick="logFunction('update_basic_config_file')" href="../_functions/update_basic_config_file.html" onMouseOver="funcPopup(event,'update_basic_config_file')">update_basic_config_file</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array() )
<a name="l1678"><span class="linenum">1678</span></a>  {
<a name="l1679"><span class="linenum">1679</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>, <a class="var it926" onMouseOver="hilite(926)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../_variables/evo_charset.html">$evo_charset</a>, <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('conf_path')" href="../_variables/conf_path.html">$conf_path</a>, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>;
<a name="l1680"><span class="linenum">1680</span></a>  
<a name="l1681"><span class="linenum">1681</span></a>  <span class="comment">    // These global params should be rewritten by this function on success result</span>
<a name="l1682"><span class="linenum">1682</span></a>      global <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, <a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('admin_email')" href="../_variables/admin_email.html">$admin_email</a>, <a class="var it3710" onMouseOver="hilite(3710)" onMouseOut="lolite()" onClick="logVariable('config_is_done')" href="../_variables/config_is_done.html">$config_is_done</a>, <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>;
<a name="l1683"><span class="linenum">1683</span></a>  
<a name="l1684"><span class="linenum">1684</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1685"><span class="linenum">1685</span></a>              'db_user'        =&gt; '',
<a name="l1686"><span class="linenum">1686</span></a>              'db_password'    =&gt; '',
<a name="l1687"><span class="linenum">1687</span></a>              'db_name'        =&gt; '',
<a name="l1688"><span class="linenum">1688</span></a>              'db_host'        =&gt; '',
<a name="l1689"><span class="linenum">1689</span></a>              'db_tableprefix' =&gt; '',
<a name="l1690"><span class="linenum">1690</span></a>              'baseurl'        =&gt; '',
<a name="l1691"><span class="linenum">1691</span></a>              'admin_email'    =&gt; '',
<a name="l1692"><span class="linenum">1692</span></a>              'print_messages' =&gt; true, // TRUE - to print out all messages on screen, FALSE - to return
<a name="l1693"><span class="linenum">1693</span></a>              'quick_install'  =&gt; false, // TRUE - to mark this call as request to quick installation
<a name="l1694"><span class="linenum">1694</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> );
<a name="l1695"><span class="linenum">1695</span></a>  
<a name="l1696"><span class="linenum">1696</span></a>      if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['print_messages'] )
<a name="l1697"><span class="linenum">1697</span></a>      { // Start to get all messages instead of printing on screen:
<a name="l1698"><span class="linenum">1698</span></a>          <a class="phpfunction" onClick="logFunction('ob_start')" href="../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>();
<a name="l1699"><span class="linenum">1699</span></a>  <span class="comment">        // Use this global var to store all messages</span>
<a name="l1700"><span class="linenum">1700</span></a>          global <a class="var it6840" onMouseOver="hilite(6840)" onMouseOut="lolite()" onClick="logVariable('basic_config_file_result_messages')" href="../_variables/basic_config_file_result_messages.html">$basic_config_file_result_messages</a>;
<a name="l1701"><span class="linenum">1701</span></a>      }
<a name="l1702"><span class="linenum">1702</span></a>  
<a name="l1703"><span class="linenum">1703</span></a>  <span class="comment">    // Connect to DB:</span>
<a name="l1704"><span class="linenum">1704</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a> = <span class="keyword">new </span><a class="class" onClick="logClass('DB')" href="../_classes/db.html" onMouseOver="classPopup(event,'db')">DB</a>( array(
<a name="l1705"><span class="linenum">1705</span></a>              'user'     =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_user'],
<a name="l1706"><span class="linenum">1706</span></a>              'password' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_password'],
<a name="l1707"><span class="linenum">1707</span></a>              'name'     =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_name'],
<a name="l1708"><span class="linenum">1708</span></a>              'host'     =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_host'],
<a name="l1709"><span class="linenum">1709</span></a>              'aliases'          =&gt; <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['aliases'],
<a name="l1710"><span class="linenum">1710</span></a>              'connection_charset' =&gt; empty( <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['connection_charset'] ) ? <a class="class" onClick="logClass('DB')" href="../_classes/db.html" onMouseOver="classPopup(event,'db')">DB</a>::<a class="function" onClick="logFunction('php_to_mysql_charmap')" href="../_functions/php_to_mysql_charmap.html" onMouseOver="funcPopup(event,'php_to_mysql_charmap')">php_to_mysql_charmap</a>( <a class="var it926" onMouseOver="hilite(926)" onMouseOut="lolite()" onClick="logVariable('evo_charset')" href="../_variables/evo_charset.html">$evo_charset</a> ) : <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>['connection_charset'],
<a name="l1711"><span class="linenum">1711</span></a>              'halt_on_error'      =&gt; false
<a name="l1712"><span class="linenum">1712</span></a>          ) );
<a name="l1713"><span class="linenum">1713</span></a>  
<a name="l1714"><span class="linenum">1714</span></a>      if( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('error')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../_variables/error.html">error</a> )
<a name="l1715"><span class="linenum">1715</span></a>      { // restart conf
<a name="l1716"><span class="linenum">1716</span></a>          <a class="function" onClick="logFunction('display_install_messages')" href="../_functions/display_install_messages.html" onMouseOver="funcPopup(event,'display_install_messages')">display_install_messages</a>( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('It seems that the database config settings you entered don\'t work. Please check them carefully and try again...') );
<a name="l1717"><span class="linenum">1717</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a> = 'start';
<a name="l1718"><span class="linenum">1718</span></a>      }
<a name="l1719"><span class="linenum">1719</span></a>      else
<a name="l1720"><span class="linenum">1720</span></a>      {
<a name="l1721"><span class="linenum">1721</span></a>          <a class="var it7835" onMouseOver="hilite(7835)" onMouseOut="lolite()" onClick="logVariable('conf_template_filepath')" href="../_variables/conf_template_filepath.html">$conf_template_filepath</a> = <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('conf_path')" href="../_variables/conf_path.html">$conf_path</a>.'_basic_config.template.php';
<a name="l1722"><span class="linenum">1722</span></a>          <a class="var it7836" onMouseOver="hilite(7836)" onMouseOut="lolite()" onClick="logVariable('conf_filepath')" href="../_variables/conf_filepath.html">$conf_filepath</a> = <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('conf_path')" href="../_variables/conf_path.html">$conf_path</a>.'_basic_config.php';
<a name="l1723"><span class="linenum">1723</span></a>  
<a name="l1724"><span class="linenum">1724</span></a>  <span class="comment">        // Read original:</span>
<a name="l1725"><span class="linenum">1725</span></a>          <a class="var it7837" onMouseOver="hilite(7837)" onMouseOut="lolite()" onClick="logVariable('file_loaded')" href="../_variables/file_loaded.html">$file_loaded</a> = @<a class="phpfunction" onClick="logFunction('file')" href="../_functions/file.html" onMouseOver="phpfuncPopup(event,'file')">file</a>( <a class="var it7835" onMouseOver="hilite(7835)" onMouseOut="lolite()" onClick="logVariable('conf_template_filepath')" href="../_variables/conf_template_filepath.html">$conf_template_filepath</a> );
<a name="l1726"><span class="linenum">1726</span></a>  
<a name="l1727"><span class="linenum">1727</span></a>          if( empty( <a class="var it7837" onMouseOver="hilite(7837)" onMouseOut="lolite()" onClick="logVariable('file_loaded')" href="../_variables/file_loaded.html">$file_loaded</a> ) )
<a name="l1728"><span class="linenum">1728</span></a>          { // This should actually never happen, just in case...
<a name="l1729"><span class="linenum">1729</span></a>              <a class="function" onClick="logFunction('display_install_messages')" href="../_functions/display_install_messages.html" onMouseOver="funcPopup(event,'display_install_messages')">display_install_messages</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Could not load original conf file [%s]. Is it missing?'), <a class="var it7836" onMouseOver="hilite(7836)" onMouseOut="lolite()" onClick="logVariable('conf_filepath')" href="../_variables/conf_filepath.html">$conf_filepath</a> ) );
<a name="l1730"><span class="linenum">1730</span></a>              if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['print_messages'] )
<a name="l1731"><span class="linenum">1731</span></a>              { // Return all messages instead of printing on screen
<a name="l1732"><span class="linenum">1732</span></a>                  <a class="var it6840" onMouseOver="hilite(6840)" onMouseOut="lolite()" onClick="logVariable('basic_config_file_result_messages')" href="../_variables/basic_config_file_result_messages.html">$basic_config_file_result_messages</a> = <a class="phpfunction" onClick="logFunction('ob_get_clean')" href="../_functions/ob_get_clean.html" onMouseOver="phpfuncPopup(event,'ob_get_clean')">ob_get_clean</a>();
<a name="l1733"><span class="linenum">1733</span></a>              }
<a name="l1734"><span class="linenum">1734</span></a>              return false;
<a name="l1735"><span class="linenum">1735</span></a>          }
<a name="l1736"><span class="linenum">1736</span></a>  
<a name="l1737"><span class="linenum">1737</span></a>  <span class="comment">        // File loaded...</span>
<a name="l1738"><span class="linenum">1738</span></a>          <a class="var it7838" onMouseOver="hilite(7838)" onMouseOut="lolite()" onClick="logVariable('conf')" href="../_variables/conf.html">$conf</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '', <a class="var it7837" onMouseOver="hilite(7837)" onMouseOut="lolite()" onClick="logVariable('file_loaded')" href="../_variables/file_loaded.html">$file_loaded</a> );
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment">        // Update conf:</span>
<a name="l1740"><span class="linenum">1740</span></a>          <a class="var it7838" onMouseOver="hilite(7838)" onMouseOut="lolite()" onClick="logVariable('conf')" href="../_variables/conf.html">$conf</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(
<a name="l1741"><span class="linenum">1741</span></a>              array(
<a name="l1742"><span class="linenum">1742</span></a>                  '#\<a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a>\s*=\s*array\(
<a name="l1743"><span class="linenum">1743</span></a>                      \s*[\'&quot;]user[\'&quot;]\s*=&gt;\s*[\'&quot;].*?[\'&quot;],     ([^\n\r]*\r?\n)
<a name="l1744"><span class="linenum">1744</span></a>                      \s*[\'&quot;]password[\'&quot;]\s*=&gt;\s*[\'&quot;].*?[\'&quot;], ([^\n\r]*\r?\n)
<a name="l1745"><span class="linenum">1745</span></a>                      \s*[\'&quot;]name[\'&quot;]\s*=&gt;\s*[\'&quot;].*?[\'&quot;],     ([^\n\r]*\r?\n)
<a name="l1746"><span class="linenum">1746</span></a>                      \s*[\'&quot;]host[\'&quot;]\s*=&gt;\s*[\'&quot;].*?[\'&quot;],     ([^\n\r]*\r?\n)
<a name="l1747"><span class="linenum">1747</span></a>  <span class="comment">                    #ixs',</span>
<a name="l1748"><span class="linenum">1748</span></a>                  &quot;#tableprefix\s*=\s*'.*?';<span class="comment">#&quot;,</span>
<a name="l1749"><span class="linenum">1749</span></a>                  &quot;#baseurl\s*=\s*'.*?';<span class="comment">#&quot;,</span>
<a name="l1750"><span class="linenum">1750</span></a>                  &quot;#admin_email\s*=\s*'.*?';<span class="comment">#&quot;,</span>
<a name="l1751"><span class="linenum">1751</span></a>                  &quot;#config_is_done\s*=.*?;<span class="comment">#&quot;,</span>
<a name="l1752"><span class="linenum">1752</span></a>              ),
<a name="l1753"><span class="linenum">1753</span></a>              array(
<a name="l1754"><span class="linenum">1754</span></a>                  &quot;\<a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../_variables/db_config.html">$db_config</a> = array(\n&quot;
<a name="l1755"><span class="linenum">1755</span></a>                      .&quot;\t'user'     =&gt; '&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( &quot;'&quot;, &quot;\$&quot; ), array( &quot;\'&quot;, &quot;\\$&quot; ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_user'] ).&quot;',\<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('1')" href="../_variables/1.html">$1</a>&quot;
<a name="l1756"><span class="linenum">1756</span></a>                      .&quot;\t'password' =&gt; '&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( &quot;'&quot;, &quot;\$&quot; ), array( &quot;\'&quot;, &quot;\\$&quot; ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_password'] ).&quot;',\<a class="var it919" onMouseOver="hilite(919)" onMouseOut="lolite()" onClick="logVariable('2')" href="../_variables/2.html">$2</a>&quot;
<a name="l1757"><span class="linenum">1757</span></a>                      .&quot;\t'name'     =&gt; '&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( &quot;'&quot;, &quot;\$&quot; ), array( &quot;\'&quot;, &quot;\\$&quot; ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_name'] ).&quot;',\<a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('3')" href="../_variables/3.html">$3</a>&quot;
<a name="l1758"><span class="linenum">1758</span></a>                      .&quot;\t'host'     =&gt; '&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( &quot;'&quot;, &quot;\$&quot; ), array( &quot;\'&quot;, &quot;\\$&quot; ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_host'] ).&quot;',\<a class="var it4688" onMouseOver="hilite(4688)" onMouseOut="lolite()" onClick="logVariable('4')" href="../_variables/4.html">$4</a>&quot;,
<a name="l1759"><span class="linenum">1759</span></a>                  &quot;tableprefix = '&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( &quot;'&quot;, &quot;\'&quot;, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_tableprefix'] ).&quot;';&quot;,
<a name="l1760"><span class="linenum">1760</span></a>                  &quot;baseurl = '&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( &quot;'&quot;, &quot;\'&quot;, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['baseurl'] ).&quot;';&quot;,
<a name="l1761"><span class="linenum">1761</span></a>                  &quot;admin_email = '&quot;.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( &quot;'&quot;, &quot;\'&quot;, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['admin_email'] ).&quot;';&quot;,
<a name="l1762"><span class="linenum">1762</span></a>                  'config_is_done = 1;',
<a name="l1763"><span class="linenum">1763</span></a>              ), <a class="var it7838" onMouseOver="hilite(7838)" onMouseOut="lolite()" onClick="logVariable('conf')" href="../_variables/conf.html">$conf</a> );
<a name="l1764"><span class="linenum">1764</span></a>  
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment">        // Write new contents:</span>
<a name="l1766"><span class="linenum">1766</span></a>          if( <a class="function" onClick="logFunction('save_to_file')" href="../_functions/save_to_file.html" onMouseOver="funcPopup(event,'save_to_file')">save_to_file</a>( <a class="var it7838" onMouseOver="hilite(7838)" onMouseOut="lolite()" onClick="logVariable('conf')" href="../_variables/conf.html">$conf</a>, <a class="var it7836" onMouseOver="hilite(7836)" onMouseOut="lolite()" onClick="logVariable('conf_filepath')" href="../_variables/conf_filepath.html">$conf_filepath</a>, 'w' ) )
<a name="l1767"><span class="linenum">1767</span></a>          {
<a name="l1768"><span class="linenum">1768</span></a>              <a class="function" onClick="logFunction('display_install_messages')" href="../_functions/display_install_messages.html" onMouseOver="funcPopup(event,'display_install_messages')">display_install_messages</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Your configuration file &lt;code&gt;%s&lt;/code&gt; has been successfully created.').'&lt;/p&gt;', <a class="var it7836" onMouseOver="hilite(7836)" onMouseOut="lolite()" onClick="logVariable('conf_filepath')" href="../_variables/conf_filepath.html">$conf_filepath</a> ), 'success' );
<a name="l1769"><span class="linenum">1769</span></a>  
<a name="l1770"><span class="linenum">1770</span></a>              <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('tableprefix')" href="../_variables/tableprefix.html">$tableprefix</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['db_tableprefix'];
<a name="l1771"><span class="linenum">1771</span></a>              <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['baseurl'];
<a name="l1772"><span class="linenum">1772</span></a>              <a class="var it3556" onMouseOver="hilite(3556)" onMouseOut="lolite()" onClick="logVariable('admin_email')" href="../_variables/admin_email.html">$admin_email</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['admin_email'];
<a name="l1773"><span class="linenum">1773</span></a>              <a class="var it3710" onMouseOver="hilite(3710)" onMouseOut="lolite()" onClick="logVariable('config_is_done')" href="../_variables/config_is_done.html">$config_is_done</a> = 1;
<a name="l1774"><span class="linenum">1774</span></a>              if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['quick_install'] )
<a name="l1775"><span class="linenum">1775</span></a>              { // Switch to menu only on standard installation:
<a name="l1776"><span class="linenum">1776</span></a>                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a> = 'menu';
<a name="l1777"><span class="linenum">1777</span></a>              }
<a name="l1778"><span class="linenum">1778</span></a>          }
<a name="l1779"><span class="linenum">1779</span></a>          else
<a name="l1780"><span class="linenum">1780</span></a>          {
<a name="l1781"><span class="linenum">1781</span></a>              ?&gt;
<a name="l1782"><span class="linenum">1782</span></a>              &lt;h1&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Config file update') ?&gt;&lt;/h1&gt;
<a name="l1783"><span class="linenum">1783</span></a>              &lt;p&gt;&lt;strong&gt;&lt;?php printf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('We cannot automatically create or update your config file [%s]!'), <a class="var it7836" onMouseOver="hilite(7836)" onMouseOut="lolite()" onClick="logVariable('conf_filepath')" href="../_variables/conf_filepath.html">$conf_filepath</a> ); ?&gt;&lt;/strong&gt;&lt;/p&gt;
<a name="l1784"><span class="linenum">1784</span></a>              &lt;p&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('There are two ways to deal with this:') ?&gt;&lt;/p&gt;
<a name="l1785"><span class="linenum">1785</span></a>              &lt;ul&gt;
<a name="l1786"><span class="linenum">1786</span></a>                  &lt;li&gt;&lt;strong&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You can allow the installer to create the config file by changing permissions for the /conf directory:') ?&gt;&lt;/strong&gt;
<a name="l1787"><span class="linenum">1787</span></a>                      &lt;ol&gt;
<a name="l1788"><span class="linenum">1788</span></a>                          &lt;li&gt;&lt;?php printf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Make sure there is no existing and potentially locked configuration file named &lt;code&gt;%s&lt;/code&gt;. If so, please delete it.'), <a class="var it7836" onMouseOver="hilite(7836)" onMouseOut="lolite()" onClick="logVariable('conf_filepath')" href="../_variables/conf_filepath.html">$conf_filepath</a> ); ?&gt;&lt;/li&gt;
<a name="l1789"><span class="linenum">1789</span></a>                          &lt;li&gt;&lt;?php printf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('&lt;code&gt;chmod 777 %s&lt;/code&gt;. If needed, see the &lt;a %s&gt;online manual about permissions&lt;/a&gt;.'), <a class="var it1876" onMouseOver="hilite(1876)" onMouseOut="lolite()" onClick="logVariable('conf_path')" href="../_variables/conf_path.html">$conf_path</a>, 'href=&quot;'.<a class="function" onClick="logFunction('get_manual_url')" href="../_functions/get_manual_url.html" onMouseOver="funcPopup(event,'get_manual_url')">get_manual_url</a>( 'directory-and-file-permissions' ).'&quot; target=&quot;_blank&quot;' ); ?&gt;&lt;/li&gt;
<a name="l1790"><span class="linenum">1790</span></a>                          &lt;li&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Come back to this page and refresh/reload.') ?&gt;&lt;/li&gt;
<a name="l1791"><span class="linenum">1791</span></a>                      &lt;/ol&gt;
<a name="l1792"><span class="linenum">1792</span></a>                      &lt;br /&gt;
<a name="l1793"><span class="linenum">1793</span></a>                  &lt;/li&gt;
<a name="l1794"><span class="linenum">1794</span></a>                  &lt;li&gt;&lt;strong&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Alternatively, you can update the config file manually:') ?&gt;&lt;/strong&gt;
<a name="l1795"><span class="linenum">1795</span></a>                      &lt;ol&gt;
<a name="l1796"><span class="linenum">1796</span></a>                          &lt;li&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Create a new text file with a text editor.') ?&gt;&lt;/li&gt;
<a name="l1797"><span class="linenum">1797</span></a>                          &lt;li&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Copy the contents from the box below.') ?&gt;&lt;/li&gt;
<a name="l1798"><span class="linenum">1798</span></a>                          &lt;li&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Paste them into your local text editor. &lt;strong&gt;ATTENTION: make sure there is ABSOLUTELY NO WHITESPACE after the final &lt;code&gt;?&amp;gt;&lt;/code&gt; in the file.&lt;/strong&gt; Any space, tab, newline or blank line at the end of the conf file may prevent cookies from being set when you try to log in later.') ?&gt;&lt;/li&gt;
<a name="l1799"><span class="linenum">1799</span></a>                          &lt;li&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Save the file locally under the name &lt;code&gt;_basic_config.php&lt;/code&gt;') ?&gt;&lt;/li&gt;
<a name="l1800"><span class="linenum">1800</span></a>                          &lt;li&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Upload the file to your server, into the &lt;code&gt;/_conf&lt;/code&gt; folder.') ?&gt;&lt;/li&gt;
<a name="l1801"><span class="linenum">1801</span></a>                          &lt;li&gt;&lt;?php printf( <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('&lt;a %s&gt;Call the installer from scratch&lt;/a&gt;.'), 'href=&quot;index.php?locale='.<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../_variables/default_locale.html">$default_locale</a>.'&quot;') ?&gt;&lt;/li&gt;
<a name="l1802"><span class="linenum">1802</span></a>                      &lt;/ol&gt;
<a name="l1803"><span class="linenum">1803</span></a>                  &lt;/li&gt;
<a name="l1804"><span class="linenum">1804</span></a>              &lt;/ul&gt;
<a name="l1805"><span class="linenum">1805</span></a>              &lt;p&gt;&lt;?php echo <a class="function" onClick="logFunction('T_')" href="../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('This is how your _basic_config.php should look like:') ?&gt;&lt;/p&gt;
<a name="l1806"><span class="linenum">1806</span></a>              &lt;blockquote&gt;
<a name="l1807"><span class="linenum">1807</span></a>              &lt;pre&gt;&lt;?php
<a name="l1808"><span class="linenum">1808</span></a>                  echo <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>( <a class="var it7838" onMouseOver="hilite(7838)" onMouseOut="lolite()" onClick="logVariable('conf')" href="../_variables/conf.html">$conf</a> );
<a name="l1809"><span class="linenum">1809</span></a>              ?&gt;&lt;/pre&gt;
<a name="l1810"><span class="linenum">1810</span></a>              &lt;/blockquote&gt;
<a name="l1811"><span class="linenum">1811</span></a>              &lt;?php
<a name="l1812"><span class="linenum">1812</span></a>  
<a name="l1813"><span class="linenum">1813</span></a>              if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['print_messages'] )
<a name="l1814"><span class="linenum">1814</span></a>              { // Return all messages instead of printing on screen
<a name="l1815"><span class="linenum">1815</span></a>                  <a class="var it6840" onMouseOver="hilite(6840)" onMouseOut="lolite()" onClick="logVariable('basic_config_file_result_messages')" href="../_variables/basic_config_file_result_messages.html">$basic_config_file_result_messages</a> = <a class="phpfunction" onClick="logFunction('ob_get_clean')" href="../_functions/ob_get_clean.html" onMouseOver="phpfuncPopup(event,'ob_get_clean')">ob_get_clean</a>();
<a name="l1816"><span class="linenum">1816</span></a>              }
<a name="l1817"><span class="linenum">1817</span></a>  
<a name="l1818"><span class="linenum">1818</span></a>              return false;
<a name="l1819"><span class="linenum">1819</span></a>          }
<a name="l1820"><span class="linenum">1820</span></a>      }
<a name="l1821"><span class="linenum">1821</span></a>  
<a name="l1822"><span class="linenum">1822</span></a>      if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['print_messages'] )
<a name="l1823"><span class="linenum">1823</span></a>      { // Return all messages instead of printing on screen
<a name="l1824"><span class="linenum">1824</span></a>          <a class="var it6840" onMouseOver="hilite(6840)" onMouseOut="lolite()" onClick="logVariable('basic_config_file_result_messages')" href="../_variables/basic_config_file_result_messages.html">$basic_config_file_result_messages</a> = <a class="phpfunction" onClick="logFunction('ob_get_clean')" href="../_functions/ob_get_clean.html" onMouseOver="phpfuncPopup(event,'ob_get_clean')">ob_get_clean</a>();
<a name="l1825"><span class="linenum">1825</span></a>      }
<a name="l1826"><span class="linenum">1826</span></a>  
<a name="l1827"><span class="linenum">1827</span></a>      return true;
<a name="l1828"><span class="linenum">1828</span></a>  }
<a name="l1829"><span class="linenum">1829</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'install_basic_widgets': ['install_basic_widgets', 'Install basic widgets. ', [['install','_functions_install.php',737]], 2],
'get_install_steps_count': ['get_install_steps_count', 'Calculate a number of the steps for current installation ', [['install','_functions_install.php',1208]], 1],
'echo_install_button_js': ['echo_install_button_js', 'Print JavaScript to control button on install page ', [['install','_functions_install.php',1412]], 1],
'get_assoc': ['get_assoc', 'Function to get the second column from the cached result indexed by the first column ', [['inc/_core/model/db','_db.class.php',1057]], 60],
'create_demo_contents': ['create_demo_contents', 'Create the module\'s own demo content ', [['inc/_core/model','_module.class.php',111],['install','_functions_create.php',1299]], 1],
'get_manual_url': ['get_manual_url', 'Get the manual url for the given topic ', [['inc/_core','_misc.funcs.php',4922]], 60],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['inc/_core/model/db','_db.class.php',952]], 166],
'create_default_data': ['create_default_data', 'Insert all default data: ', [['install','_functions_create.php',39]], 1],
'do_install_htaccess': ['do_install_htaccess', 'This does the actual file manipulations for installing .htaccess This will verify that the provided sample.htaccess does not crash apache in a test folder before installing it for real. ', [['install','_functions_install.php',998]], 1],
'format': ['format', 'Format a diff. ', [['inc/_core/model','_diff.class.php',813],['inc/_core/model','_diff.class.php',976],['rsc/js/flowplayer','flowplayer.js',1446]], 78],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['inc/items/model','_itemlist.class.php',249],['inc/items/model','_itemlistlight.class.php',742],['inc/comments/model','_commentlist.class.php',507],['inc/users/model','_userlist.class.php',511],['inc/_core/ui/results','_results.class.php',468],['inc/_core/model/db','_db.class.php',749]], 1144],
'list': ['list', '', [['rsc/js/bootstrap','typeahead.bundle.js',156]], 105],
'update_install_button_info': ['update_install_button_info', '', [['install','_functions_install.php',1438]], 2],
'create_default_settings': ['create_default_settings', 'Insert default settings into T_settings. ', [['install','_functions_install.php',406]], 2],
'install_newdb': ['install_newdb', 'Install new DB. ', [['install','_functions_install.php',152]], 1],
'create_relations': ['create_relations', 'Create relations ', [['install','_functions_install.php',781]], 0],
'param_check_passwords': ['param_check_passwords', '', [['inc/_core','_param.funcs.php',1412]], 5],
'install_validate_requirements': ['install_validate_requirements', 'Validate install requirements. ', [['install','_functions_install.php',382]], 1],
'display_base_config_recap': ['display_base_config_recap', 'Base config recap ', [['install','_functions_install.php',112]], 2],
'db_col_exists': ['db_col_exists', '', [['install','_functions_install.php',327]], 8],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'save_to_file': ['save_to_file', 'Save text data to file, create target file if it doesn\'t exist ', [['inc/_core','_misc.funcs.php',6493]], 13],
'insert_basic_widgets': ['insert_basic_widgets', 'Insert the widgets for the blog ', [['inc/widgets','_widgets.funcs.php',60]], 3],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'settimeout': ['settimeout', 'Set the connection timeout. ', [['inc/_ext/swift/classes/Swift/Transport','EsmtpTransport.php',110],['inc/_ext/swift/classes/Swift/Plugins','PopBeforeSmtpPlugin.php',99]], 175],
'get_antispam_query': ['get_antispam_query', 'Return antispam SQL query. This is obfuscated because some hosting companies prevent uploading PHP files containing "spam" strings. ', [['install','_functions_install.php',1073]], 2],
'evo_flush': ['evo_flush', 'Flush the output buffer ', [['inc/_core','_misc.funcs.php',6613]], 166],
'locale_flag': ['locale_flag', 'Template tag ', [['inc/items/model','_itemlight.class.php',888],['inc/locales','_locale.funcs.php',480]], 8],
'install': ['install', 'Install current skin to DB ', [['inc/skins/model','_skin.class.php',108]], 4],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'advanced_properties': ['advanced_properties', '', [['install','_functions_install.php',769]], 0],
'install_htaccess': ['install_htaccess', 'Install htaccess: Check if it works with the webserver, then install it for real. ', [['install','_functions_install.php',959]], 2],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5287],['inc/_core/model/dataobjects','_dataobject.class.php',386],['inc/users/model','_user.class.php',3249],['inc/skins/model','_skin.class.php',416],['inc/settings/model','_abstractsettings.class.php',575],['inc/items/model','_itemtype.class.php',433],['inc/files/model','_filetype.class.php',242],['inc/collections/model','_blog.class.php',2630],['inc/comments/model','_comment.class.php',3747],['inc/cron/model','_cronjob.class.php',188],['inc/slugs/model','_slug.class.php',265],['inc/users/model','_group.class.php',478],['inc/widgets/model','_widget.class.php',861],['inc/users/model','_groupsettings.class.php',159],['inc/chapters/model','_chapter.class.php',564],['inc/files/model','_file.class.php',1825]], 289],
'beforeenable': ['beforeenable', 'Check ping service URL and plugin code. ', [['plugins','_generic_ping.plugin.php',106],['plugins/geoip_plugin','_geoip.plugin.php',135],['plugins/watermark_plugin','_watermark.plugin.php',151],['inc/plugins','_plugin.class.php',1127],['plugins','_captcha_qstn.plugin.php',117],['plugins/twitter_plugin','_twitter.plugin.php',102],['plugins/basic_antispam_plugin','_basic_antispam.plugin.php',131]], 6],
'display_install_messages': ['display_install_messages', 'Display the messages on install pages ', [['install','_functions_install.php',1351]], 15],
'param_check_valid_login': ['param_check_valid_login', 'Check if the value is a valid login (in terms of allowed chars) ', [['inc/_core','_param.funcs.php',741]], 5],
'install_plugin': ['install_plugin', 'Install plugin ', [['install','_functions_install.php',677]], 37],
'task_begin': ['task_begin', 'Begin install task. This will offer other display methods in the future ', [['install','_functions_install.php',247]], 442],
'set_plugin_status': ['set_plugin_status', 'Sets the status of a Plugin in DB and registers it into the internal indices when "enabled". Otherwise it gets unregistered, but only when we\'re not in {@link Plugins_admin}, because we want to keep it in then in our indices. ', [['inc/plugins/model','_plugins.class.php',233]], 15],
'get_upgrade_steps_count': ['get_upgrade_steps_count', 'Calculate a number of the steps for current upgrading ', [['install','_functions_install.php',1303]], 1],
'load_funcs': ['load_funcs', '', [['inc/_core','_misc.funcs.php',158]], 242],
'save_error_state': ['save_error_state', 'Save the vars responsible for error handling. This can be chained. ', [['inc/_core/model/db','_db.class.php',713]], 7],
'get_default_locale_from_db': ['get_default_locale_from_db', 'Get default locale from db ', [['install','_functions_install.php',294]], 1],
'start_install_progress_bar': ['start_install_progress_bar', 'Display a progress bar to start an animation of a process ', [['install','_functions_install.php',1113]], 4],
'install_plugin_db_schema_action': ['install_plugin_db_schema_action', 'Helper function to do the action part of DB schema upgrades for "enable" and "install" actions. ', [['inc/plugins','_plugin.funcs.php',1081]], 5],
'fetch_remote_page': ['fetch_remote_page', 'Fetch remote page ', [['inc/_core','_url.funcs.php',267]], 4],
'track_step': ['track_step', 'We use the following tracking to determine the installer reliability (% of failed vs successful installs). ', [['install','_functions_install.php',1088]], 7],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['inc/_core/model/db','_db.class.php',1083]], 152],
'update_basic_config_file': ['update_basic_config_file', 'Update file /conf/_basic_config.php ', [['install','_functions_install.php',1670]], 2],
'get_requri': ['get_requri', 'Get $ReqPath, $ReqURI ', [['inc/_core','_misc.funcs.php',5767]], 3],
'update_install_progress_bar': ['update_install_progress_bar', 'Print JavaScript to update the progress bar status ', [['install','_functions_install.php',1176]], 18],
'display_locale_selector': ['display_locale_selector', 'Language selector ', [['install','_functions_install.php',50]], 5],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'install_basic_plugins': ['install_basic_plugins', 'Install basic plugins. ', [['install','_functions_install.php',544]], 2],
'param_check_email': ['param_check_email', '', [['inc/_core','_param.funcs.php',720]], 10],
'create_default_locales': ['create_default_locales', 'Insert default locales into T_locales. ', [['install','_functions_install.php',395]], 1],
'cleanup_comment_quotes': ['cleanup_comment_quotes', 'Clean up extra quotes in comments ', [['install','_functions_install.php',349]], 1],
'ts_': ['ts_', 'Translate and escape single quotes. ', [['inc/skins/model','_skin.class.php',1162],['inc/plugins','_plugin.class.php',2847],['inc/locales','_locale.funcs.php',233]], 236],
'task_end': ['task_end', 'End install task. This will offer other display methods in the future ', [['install','_functions_install.php',258]], 443],
'check_quick_install_request': ['check_quick_install_request', 'Check request for quick installation Update basic config file from url params ', [['install','_functions_install.php',1561]], 1],
'php_to_mysql_charmap': ['php_to_mysql_charmap', 'Convert a PHP charset to its MySQL equivalent. ', [['inc/_core/model/db','_db.class.php',1660]], 7],
'get_db_version': ['get_db_version', '', [['install','_functions_install.php',268]], 7],
'stop_install_progress_bar': ['stop_install_progress_bar', 'Print JavaScript to stop the animation of the progress bar ', [['install','_functions_install.php',1157]], 5],
'display_install_result_window': ['display_install_result_window', 'Display modal window after install process with some data ', [['install','_functions_install.php',1519]], 2],
'block_close': ['block_close', 'Close a block ', [['install','_functions_install.php',36]], 8],
'install_basic_skins': ['install_basic_skins', 'Install basic skins. ', [['install','_functions_install.php',499]], 2],
'block_open': ['block_open', 'Open a block ', [['install','_functions_install.php',13]], 6],
'create_tables': ['create_tables', 'Used for fresh install ', [['install','_functions_create.php',19]], 1],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'check_local_installation': ['check_local_installation', 'Check if current installation is local ', [['install','_functions_install.php',1488]], 2],
'display_install_back_link': ['display_install_back_link', 'Display a link to back to install menu ', [['install','_functions_install.php',1100]], 6],
'locale_insert_default': ['locale_insert_default', 'Insert default locales into T_locales. ', [['inc/locales','_locale.funcs.php',1415]], 2],
'restore_error_state': ['restore_error_state', 'Call this after {@link save_halt_on_error()} to restore the previous error state. This can be chained. ', [['inc/_core/model/db','_db.class.php',729]], 7],
'copy': ['copy', '', [], 22],
'count': ['count', '', [], 928],
'intval': ['intval', '', [], 221],
'file': ['file', '', [], 78],
'trim': ['trim', '', [], 398],
'file_get_contents': ['file_get_contents', '', [], 28],
'substr': ['substr', '', [], 745],
'str_replace': ['str_replace', '', [], 531],
'dirname': ['dirname', '', [], 182],
'array_unique': ['array_unique', '', [], 38],
'php_sapi_name': ['php_sapi_name', '', [], 1],
'ob_get_clean': ['ob_get_clean', '', [], 30],
'implode': ['implode', '', [], 571],
'preg_match': ['preg_match', '', [], 423],
'preg_match_all': ['preg_match_all', '', [], 38],
'in_array': ['in_array', '', [], 417],
'htmlspecialchars': ['htmlspecialchars', '', [], 152],
'key': ['key', '', [], 172],
'ceil': ['ceil', '', [], 96],
'base64_decode': ['base64_decode', '', [], 10],
'array_keys': ['array_keys', '', [], 94],
'strtolower': ['strtolower', '', [], 202],
'array_merge': ['array_merge', '', [], 702],
'stripslashes': ['stripslashes', '', [], 11],
'is_a': ['is_a', '', [], 39],
'ob_start': ['ob_start', '', [], 45],
'preg_replace': ['preg_replace', '', [], 325],
'is_string': ['is_string', '', [], 74],
'defined': ['defined', '', [], 962],
'file_exists': ['file_exists', '', [], 142]};
CLASS_DATA={
'db': ['db', 'The Main Class ', [['inc/_core/model/db','_db.class.php',54]], 16],
'table': ['table', 'Class Table ', [['inc/_core/ui','_uiwidget.class.php',290]], 11],
'generalsettings': ['generalsettings', 'Class to handle the global settings. ', [['inc/settings/model','_generalsettings.class.php',19]], 6]};
CONST_DATA={
'ARRAY_A': ['ARRAY_A', '', [['inc/_core/model/db','_db.class.php',50]], 34],
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
