<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/_core/_template.funcs.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='inc/_core';
filename='_template.funcs.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/_core/</a> -> <a href="_template.funcs.php.html">_template.funcs.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_template.funcs.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_template.funcs.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements misc functions that handle output of the HTML page.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2006 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @package evocore</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Template tag. Output content-type header</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @param string content-type; override for RSS feeds</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> */</span>
<a name="l23"><span class="linenum">  23</span></a>  function <a class="function" onClick="logFunction('header_content_type')" href="../../_functions/header_content_type.html" onMouseOver="funcPopup(event,'header_content_type')">header_content_type</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'text/html', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = '#' )
<a name="l24"><span class="linenum">  24</span></a>  {
<a name="l25"><span class="linenum">  25</span></a>      global <a class="var it927" onMouseOver="hilite(927)" onMouseOut="lolite()" onClick="logVariable('io_charset')" href="../../_variables/io_charset.html">$io_charset</a>;
<a name="l26"><span class="linenum">  26</span></a>      global <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('content_type_header')" href="../../_variables/content_type_header.html">$content_type_header</a>;
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>      <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('content_type_header')" href="../../_variables/content_type_header.html">$content_type_header</a> = 'Content-type: '.<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>;
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>      if( !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>) )
<a name="l31"><span class="linenum">  31</span></a>      {
<a name="l32"><span class="linenum">  32</span></a>          if( <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> == '#' )
<a name="l33"><span class="linenum">  33</span></a>          {
<a name="l34"><span class="linenum">  34</span></a>              <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = <a class="var it927" onMouseOver="hilite(927)" onMouseOut="lolite()" onClick="logVariable('io_charset')" href="../../_variables/io_charset.html">$io_charset</a>;
<a name="l35"><span class="linenum">  35</span></a>          }
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>          <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('content_type_header')" href="../../_variables/content_type_header.html">$content_type_header</a> .= '; charset='.<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>;
<a name="l38"><span class="linenum">  38</span></a>      }
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>( <a class="var it612" onMouseOver="hilite(612)" onMouseOut="lolite()" onClick="logVariable('content_type_header')" href="../../_variables/content_type_header.html">$content_type_header</a> );
<a name="l41"><span class="linenum">  41</span></a>  }
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * This is a placeholder for future development.</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> *</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> * @param string content-type; override for RSS feeds</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> * @param integer seconds</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> * @param string charset</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * @param boolean flush already collected content from the PageCache</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> */</span>
<a name="l52"><span class="linenum">  52</span></a>  function <a class="function" onClick="logFunction('headers_content_mightcache')" href="../../_functions/headers_content_mightcache.html" onMouseOver="funcPopup(event,'headers_content_mightcache')">headers_content_mightcache</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'text/html', <a class="var it7249" onMouseOver="hilite(7249)" onMouseOut="lolite()" onClick="logVariable('max_age')" href="../../_variables/max_age.html">$max_age</a> = '#', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = '#', <a class="var it7250" onMouseOver="hilite(7250)" onMouseOut="lolite()" onClick="logVariable('flush_pagecache')" href="../../_variables/flush_pagecache.html">$flush_pagecache</a> = true )
<a name="l53"><span class="linenum">  53</span></a>  {
<a name="l54"><span class="linenum">  54</span></a>      global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>, <a class="var it488" onMouseOver="hilite(488)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a>;
<a name="l55"><span class="linenum">  55</span></a>      global <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a>, <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>      <a class="function" onClick="logFunction('header_content_type')" href="../../_functions/header_content_type.html" onMouseOver="funcPopup(event,'header_content_type')">header_content_type</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> );
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      if( empty(<a class="var it7249" onMouseOver="hilite(7249)" onMouseOut="lolite()" onClick="logVariable('max_age')" href="../../_variables/max_age.html">$max_age</a>) || <a class="var it488" onMouseOver="hilite(488)" onMouseOut="lolite()" onClick="logVariable('is_admin_page')" href="../../_variables/is_admin_page.html">$is_admin_page</a> || <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() || <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() )
<a name="l60"><span class="linenum">  60</span></a>      {    // Don't cache if no max_age given
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">        // + NEVER EVER allow admin pages to cache</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">        // + NEVER EVER allow logged in data to be cached</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">        // + NEVER EVER allow transactional Messages to be cached!:</span>
<a name="l64"><span class="linenum">  64</span></a>          <a class="function" onClick="logFunction('header_nocache')" href="../../_functions/header_nocache.html" onMouseOver="funcPopup(event,'header_nocache')">header_nocache</a>();
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">        // Check server caching too, but note that this is a different caching process then caching on the client</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">        // It's important that this is a double security check only and server caching should be prevented before this</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">        // If something should not be cached on the client, it should never be cached on the server either</span>
<a name="l69"><span class="linenum">  69</span></a>          if( !empty( <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a> ) )
<a name="l70"><span class="linenum">  70</span></a>          { // Abort PageCache collect
<a name="l71"><span class="linenum">  71</span></a>              <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Abort server caching in <a class="function" onClick="logFunction('headers_content_mightcache')" href="../../_functions/headers_content_mightcache.html" onMouseOver="funcPopup(event,'headers_content_mightcache')">headers_content_mightcache</a>() function. This should have been prevented!' );
<a name="l72"><span class="linenum">  72</span></a>              <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a>-&gt;<a class="function" onClick="logFunction('abort_collect')" href="../../_functions/abort_collect.html" onMouseOver="funcPopup(event,'abort_collect')">abort_collect</a>( <a class="var it7250" onMouseOver="hilite(7250)" onMouseOut="lolite()" onClick="logVariable('flush_pagecache')" href="../../_variables/flush_pagecache.html">$flush_pagecache</a> );
<a name="l73"><span class="linenum">  73</span></a>          }
<a name="l74"><span class="linenum">  74</span></a>          return;
<a name="l75"><span class="linenum">  75</span></a>      }
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">    // If we are on a &quot;normal&quot; page, we may, under some circumstances, tell the browser it can cache the data.</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">    // This MAY be extremely confusing though, every time a user logs in and gets back to a screen with no evobar!</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">    // This cannot be enabled by default and requires admin switches.</span>
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">    // For feeds, it is a little bit less confusing. We might want to have the param enabled by default in that case.</span>
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">    // WARNING: extra special care needs to be taken before ever caching a blog page that might contain a form or a comment preview</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">    // having user details cached would be extremely bad.</span>
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">    // in the meantime...</span>
<a name="l87"><span class="linenum">  87</span></a>      <a class="function" onClick="logFunction('header_nocache')" href="../../_functions/header_nocache.html" onMouseOver="funcPopup(event,'header_nocache')">header_nocache</a>();
<a name="l88"><span class="linenum">  88</span></a>  }
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">/**</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment"> * Sends HTTP header to redirect to the previous location (which</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment"> * can be given as function parameter, GET parameter (redirect_to),</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment"> * is taken from {@link Hit::$referer} or {@link $baseurl}).</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment"> *</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment"> * {@link $Debuglog} and {@link $Messages} get stored in {@link $Session}, so they</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment"> * are available after the redirect.</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment"> *</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment"> * NOTE: This function {@link exit() exits} the php script execution.</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment"> *</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment"> * @todo fp&gt; do NOT allow $redirect_to = NULL. This leads to spaghetti code and unpredictable behavior.</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment"> *</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment"> * @param string Destination URL to redirect to</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment"> * @param boolean|integer is this a permanent redirect? if true, send a 301; otherwise a 303 OR response code 301,302,303</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment"> * @param boolean is this a redirected post display? This param may be true only if we should redirect to a post url where the post status is 'redirected'!</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment"> */</span>
<a name="l107"><span class="linenum"> 107</span></a>  function <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = NULL, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = false, <a class="var it7251" onMouseOver="hilite(7251)" onMouseOut="lolite()" onClick="logVariable('redirected_post')" href="../../_variables/redirected_post.html">$redirected_post</a> = false )
<a name="l108"><span class="linenum"> 108</span></a>  {
<a name="l109"><span class="linenum"> 109</span></a>      <span class="comment">/**</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     * put your comment there...</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     *</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     * @var Hit</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     */</span>
<a name="l114"><span class="linenum"> 114</span></a>      global <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>;
<a name="l115"><span class="linenum"> 115</span></a>      global <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('htsrv_url_sensitive')" href="../../_variables/htsrv_url_sensitive.html">$htsrv_url_sensitive</a>, <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../_variables/ReqHost.html">$ReqHost</a>, <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../_variables/dispatcher.html">$dispatcher</a>;
<a name="l116"><span class="linenum"> 116</span></a>      global <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>, <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>;
<a name="l117"><span class="linenum"> 117</span></a>      global <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../_variables/http_response_code.html">$http_response_code</a>, <a class="var it3492" onMouseOver="hilite(3492)" onMouseOut="lolite()" onClick="logVariable('allow_redirects_to_different_domain')" href="../../_variables/allow_redirects_to_different_domain.html">$allow_redirects_to_different_domain</a>;
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">    // TODO: fp&gt; get this out to the caller, make a helper func like get_returnto_url()</span>
<a name="l120"><span class="linenum"> 120</span></a>      if( empty(<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>) )
<a name="l121"><span class="linenum"> 121</span></a>      { // see if there's a redirect_to request param given:
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', '' );
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>          if( empty(<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>) )
<a name="l125"><span class="linenum"> 125</span></a>          {
<a name="l126"><span class="linenum"> 126</span></a>              if( ! empty(<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>-&gt;<a onClick="logVariable('referer')" class="var it10691" onMouseOver="hilite(10691)" onMouseOut="lolite()" href="../../_variables/referer.html">referer</a>) )
<a name="l127"><span class="linenum"> 127</span></a>              {
<a name="l128"><span class="linenum"> 128</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>-&gt;<a onClick="logVariable('referer')" class="var it10691" onMouseOver="hilite(10691)" onMouseOut="lolite()" href="../../_variables/referer.html">referer</a>;
<a name="l129"><span class="linenum"> 129</span></a>              }
<a name="l130"><span class="linenum"> 130</span></a>              elseif( isset(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) )
<a name="l131"><span class="linenum"> 131</span></a>              {
<a name="l132"><span class="linenum"> 132</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('url');
<a name="l133"><span class="linenum"> 133</span></a>              }
<a name="l134"><span class="linenum"> 134</span></a>              else
<a name="l135"><span class="linenum"> 135</span></a>              {
<a name="l136"><span class="linenum"> 136</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>;
<a name="l137"><span class="linenum"> 137</span></a>              }
<a name="l138"><span class="linenum"> 138</span></a>          }
<a name="l139"><span class="linenum"> 139</span></a>          elseif( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>[0] == '/' )
<a name="l140"><span class="linenum"> 140</span></a>          { // relative URL, prepend current host:
<a name="l141"><span class="linenum"> 141</span></a>              <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l142"><span class="linenum"> 142</span></a>          }
<a name="l143"><span class="linenum"> 143</span></a>      }
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">    // &lt;fp</span>
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>      <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('Preparing to redirect to: '.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 'request' );
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">    // Determine if this is an external or internal redirect:</span>
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>      <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> = true; <span class="comment">// Start with worst case, then whitelist:</span>
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      if( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>[0] == '/' || <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>[0] == '?' )
<a name="l153"><span class="linenum"> 153</span></a>      { // We stay on the same domain or same page:
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> = false;
<a name="l155"><span class="linenum"> 155</span></a>      }
<a name="l156"><span class="linenum"> 156</span></a>      elseif( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../_variables/dispatcher.html">$dispatcher</a> ) === 0 )
<a name="l157"><span class="linenum"> 157</span></a>      { // <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../_variables/dispatcher.html">$dispatcher</a> is DEPRECATED and pages should use <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a> URL instead, but at least we're staying on the same site:
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> = false;
<a name="l159"><span class="linenum"> 159</span></a>      }
<a name="l160"><span class="linenum"> 160</span></a>      elseif( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>) === 0 )
<a name="l161"><span class="linenum"> 161</span></a>      {
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('Redirecting within <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>, all is fine.', 'request' );
<a name="l163"><span class="linenum"> 163</span></a>          <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> = false;
<a name="l164"><span class="linenum"> 164</span></a>      }
<a name="l165"><span class="linenum"> 165</span></a>      elseif( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('htsrv_url_sensitive')" href="../../_variables/htsrv_url_sensitive.html">$htsrv_url_sensitive</a>) === 0 )
<a name="l166"><span class="linenum"> 166</span></a>      {
<a name="l167"><span class="linenum"> 167</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('Redirecting within <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('htsrv_url_sensitive')" href="../../_variables/htsrv_url_sensitive.html">$htsrv_url_sensitive</a>, all is fine.', 'request' );
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> = false;
<a name="l169"><span class="linenum"> 169</span></a>      }
<a name="l170"><span class="linenum"> 170</span></a>      elseif( !empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_baseurl')" href="../../_functions/gen_baseurl.html" onMouseOver="funcPopup(event,'gen_baseurl')">gen_baseurl</a>()) === 0 )
<a name="l171"><span class="linenum"> 171</span></a>      {
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('Redirecting within current collection URL, all is fine.', 'request' );
<a name="l173"><span class="linenum"> 173</span></a>          <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> = false;
<a name="l174"><span class="linenum"> 174</span></a>      }
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">    // Remove login and pwd parameters from URL, so that they do not trigger the login screen again (and also as global security measure):</span>
<a name="l178"><span class="linenum"> 178</span></a>      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~(?&lt;=\?|&amp;) (login|pwd) = [^&amp;]+ ~x', '', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>      if( <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> == false )
<a name="l181"><span class="linenum"> 181</span></a>      {    // (blueyed&gt;) Remove &quot;confirm(ed)?&quot; from redirect_to so it doesn't do the same thing twice
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">        // TODO: fp&gt; confirm should be normalized to confirmed</span>
<a name="l183"><span class="linenum"> 183</span></a>          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~(?&lt;=\?|&amp;) (confirm(ed)?) = [^&amp;]+ ~x', '', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l184"><span class="linenum"> 184</span></a>      }
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>      <a class="var it7253" onMouseOver="hilite(7253)" onMouseOut="lolite()" onClick="logVariable('allow_collection_redirect')" href="../../_variables/allow_collection_redirect.html">$allow_collection_redirect</a> = false;
<a name="l188"><span class="linenum"> 188</span></a>      if( <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> &amp;&amp; <a class="var it3492" onMouseOver="hilite(3492)" onMouseOut="lolite()" onClick="logVariable('allow_redirects_to_different_domain')" href="../../_variables/allow_redirects_to_different_domain.html">$allow_redirects_to_different_domain</a> == 'all_collections_and_redirected_posts' &amp;&amp; ! <a class="var it7251" onMouseOver="hilite(7251)" onMouseOut="lolite()" onClick="logVariable('redirected_post')" href="../../_variables/redirected_post.html">$redirected_post</a> )
<a name="l189"><span class="linenum"> 189</span></a>      { // If a redirect is external and we allow to redirect to all collection domains:
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a class="function" onClick="logFunction('load_all')" href="../../_functions/load_all.html" onMouseOver="funcPopup(event,'load_all')">load_all</a>();
<a name="l192"><span class="linenum"> 192</span></a>          <a class="var it7254" onMouseOver="hilite(7254)" onMouseOut="lolite()" onClick="logVariable('redirect_to_domain')" href="../../_variables/redirect_to_domain.html">$redirect_to_domain</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~https?://([^/]+)/?.*~i', '<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../_variables/1.html">$1</a>', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l193"><span class="linenum"> 193</span></a>          foreach( <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a onClick="logVariable('cache')" class="var it10874" onMouseOver="hilite(10874)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a> as <a class="var it3216" onMouseOver="hilite(3216)" onMouseOut="lolite()" onClick="logVariable('url_Blog')" href="../../_variables/url_Blog.html">$url_Blog</a> )
<a name="l194"><span class="linenum"> 194</span></a>          {
<a name="l195"><span class="linenum"> 195</span></a>              <a class="var it7255" onMouseOver="hilite(7255)" onMouseOut="lolite()" onClick="logVariable('blog_domain')" href="../../_variables/blog_domain.html">$blog_domain</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '~https?://([^/]+)/?.*~i', '<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('1')" href="../../_variables/1.html">$1</a>', <a class="var it3216" onMouseOver="hilite(3216)" onMouseOut="lolite()" onClick="logVariable('url_Blog')" href="../../_variables/url_Blog.html">$url_Blog</a>-&gt;<a class="function" onClick="logFunction('gen_baseurl')" href="../../_functions/gen_baseurl.html" onMouseOver="funcPopup(event,'gen_baseurl')">gen_baseurl</a>() );
<a name="l196"><span class="linenum"> 196</span></a>              if( <a class="var it7255" onMouseOver="hilite(7255)" onMouseOut="lolite()" onClick="logVariable('blog_domain')" href="../../_variables/blog_domain.html">$blog_domain</a> == <a class="var it7254" onMouseOver="hilite(7254)" onMouseOut="lolite()" onClick="logVariable('redirect_to_domain')" href="../../_variables/redirect_to_domain.html">$redirect_to_domain</a> )
<a name="l197"><span class="linenum"> 197</span></a>              { // We found current redirect goes to a collection domain, so it is not external
<a name="l198"><span class="linenum"> 198</span></a>                  <a class="var it7253" onMouseOver="hilite(7253)" onMouseOut="lolite()" onClick="logVariable('allow_collection_redirect')" href="../../_variables/allow_collection_redirect.html">$allow_collection_redirect</a> = true;
<a name="l199"><span class="linenum"> 199</span></a>                  break;
<a name="l200"><span class="linenum"> 200</span></a>              }
<a name="l201"><span class="linenum"> 201</span></a>          }
<a name="l202"><span class="linenum"> 202</span></a>      }
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">    // Check if we're trying to redirect to an external URL:</span>
<a name="l205"><span class="linenum"> 205</span></a>      if( <a class="var it7252" onMouseOver="hilite(7252)" onMouseOut="lolite()" onClick="logVariable('external_redirect')" href="../../_variables/external_redirect.html">$external_redirect</a> // Attempting external redirect
<a name="l206"><span class="linenum"> 206</span></a>          &amp;&amp; ( <a class="var it3492" onMouseOver="hilite(3492)" onMouseOut="lolite()" onClick="logVariable('allow_redirects_to_different_domain')" href="../../_variables/allow_redirects_to_different_domain.html">$allow_redirects_to_different_domain</a> != 'always' ) // Always allow redirects to different domains is not set
<a name="l207"><span class="linenum"> 207</span></a>          &amp;&amp; ( ! <a class="var it7253" onMouseOver="hilite(7253)" onMouseOut="lolite()" onClick="logVariable('allow_collection_redirect')" href="../../_variables/allow_collection_redirect.html">$allow_collection_redirect</a> ) // This is not a redirect to collection domain of this site
<a name="l208"><span class="linenum"> 208</span></a>          &amp;&amp; ( ! ( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it3492" onMouseOver="hilite(3492)" onMouseOut="lolite()" onClick="logVariable('allow_redirects_to_different_domain')" href="../../_variables/allow_redirects_to_different_domain.html">$allow_redirects_to_different_domain</a>, array( 'all_collections_and_redirected_posts', 'only_redirected_posts' ) ) &amp;&amp; <a class="var it7251" onMouseOver="hilite(7251)" onMouseOut="lolite()" onClick="logVariable('redirected_post')" href="../../_variables/redirected_post.html">$redirected_post</a> ) ) ) // This is not a 'redirected' post display request
<a name="l209"><span class="linenum"> 209</span></a>      { // Force header redirects into the same domain. Do not allow external URLs.
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('A redirection to an external URL was blocked for security reasons.'), 'error' );
<a name="l211"><span class="linenum"> 211</span></a>          <a class="function" onClick="logFunction('syslog_insert')" href="../../_functions/syslog_insert.html" onMouseOver="funcPopup(event,'syslog_insert')">syslog_insert</a>( 'A redirection to an external URL '.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>.' was blocked for security reasons.', 'error', NULL );
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>;
<a name="l213"><span class="linenum"> 213</span></a>      }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>  
<a name="l216"><span class="linenum"> 216</span></a>      if( is_integer(<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>) )
<a name="l217"><span class="linenum"> 217</span></a>      {
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../_variables/http_response_code.html">$http_response_code</a> = <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l219"><span class="linenum"> 219</span></a>      }
<a name="l220"><span class="linenum"> 220</span></a>      else
<a name="l221"><span class="linenum"> 221</span></a>      {
<a name="l222"><span class="linenum"> 222</span></a>          <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../_variables/http_response_code.html">$http_response_code</a> = <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> ? 301 : 303;
<a name="l223"><span class="linenum"> 223</span></a>      }
<a name="l224"><span class="linenum"> 224</span></a>       <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('***** REDIRECT TO '.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>.' (status '.<a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../_variables/http_response_code.html">$http_response_code</a>.') *****', 'request' );
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>      if( ! empty(<a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>) )
<a name="l227"><span class="linenum"> 227</span></a>      {    // Session is required here
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">        // Transfer of Debuglog to next page:</span>
<a name="l230"><span class="linenum"> 230</span></a>          if( <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>('all') )
<a name="l231"><span class="linenum"> 231</span></a>          {    // Save Debuglog into Session, so that it's available after <a class="function" onClick="logFunction('redirect')" href="../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a> (gets loaded by Session constructor):
<a name="l232"><span class="linenum"> 232</span></a>              <a class="var it7256" onMouseOver="hilite(7256)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a> = <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('Debuglogs');
<a name="l233"><span class="linenum"> 233</span></a>              if( empty(<a class="var it7256" onMouseOver="hilite(7256)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a>) )
<a name="l234"><span class="linenum"> 234</span></a>              {
<a name="l235"><span class="linenum"> 235</span></a>                  <a class="var it7256" onMouseOver="hilite(7256)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a> = array();
<a name="l236"><span class="linenum"> 236</span></a>              }
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>              <a class="var it7256" onMouseOver="hilite(7256)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a>[] = <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l239"><span class="linenum"> 239</span></a>              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'Debuglogs', <a class="var it7256" onMouseOver="hilite(7256)" onMouseOut="lolite()" onClick="logVariable('sess_Debuglogs')" href="../../_variables/sess_Debuglogs.html">$sess_Debuglogs</a>, 60 <span class="comment">/* expire in 60 seconds */</span> );
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">            // echo 'Passing Debuglog(s) to next page';</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">            // pre_dump( $sess_Debuglogs );</span>
<a name="l242"><span class="linenum"> 242</span></a>          }
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">        // Transfer of Messages to next page:</span>
<a name="l245"><span class="linenum"> 245</span></a>          if( <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() )
<a name="l246"><span class="linenum"> 246</span></a>          {    // Set Messages into user's session, so they get restored on the next page (after redirect):
<a name="l247"><span class="linenum"> 247</span></a>              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'Messages', <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a> );
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">         // echo 'Passing Messages to next page';</span>
<a name="l249"><span class="linenum"> 249</span></a>          }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('dbsave')" href="../../_functions/dbsave.html" onMouseOver="funcPopup(event,'dbsave')">dbsave</a>(); <span class="comment">// If we don't save now, we run the risk that the redirect goes faster than the PHP script shutdown.</span>
<a name="l252"><span class="linenum"> 252</span></a>      }
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">    // see http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</span>
<a name="l255"><span class="linenum"> 255</span></a>      switch( <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../_variables/http_response_code.html">$http_response_code</a> )
<a name="l256"><span class="linenum"> 256</span></a>      {
<a name="l257"><span class="linenum"> 257</span></a>          case 301:
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">            // This should be a permanent move redirect!</span>
<a name="l259"><span class="linenum"> 259</span></a>              <a class="function" onClick="logFunction('header_http_response')" href="../../_functions/header_http_response.html" onMouseOver="funcPopup(event,'header_http_response')">header_http_response</a>( '301 Moved Permanently' );
<a name="l260"><span class="linenum"> 260</span></a>              break;
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>          case 303:
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">            // This should be a &quot;follow up&quot; redirect</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">            // Note: Also see http://de3.php.net/manual/en/function.header.php#50588 and the other comments around</span>
<a name="l265"><span class="linenum"> 265</span></a>              <a class="function" onClick="logFunction('header_http_response')" href="../../_functions/header_http_response.html" onMouseOver="funcPopup(event,'header_http_response')">header_http_response</a>( '303 See Other' );
<a name="l266"><span class="linenum"> 266</span></a>              break;
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>          case 302:
<a name="l269"><span class="linenum"> 269</span></a>          default:
<a name="l270"><span class="linenum"> 270</span></a>              <a class="function" onClick="logFunction('header_http_response')" href="../../_functions/header_http_response.html" onMouseOver="funcPopup(event,'header_http_response')">header_http_response</a>( '302 Found' );
<a name="l271"><span class="linenum"> 271</span></a>      }
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">    // debug_die($redirect_to);</span>
<a name="l274"><span class="linenum"> 274</span></a>      if( <a class="phpfunction" onClick="logFunction('headers_sent')" href="../../_functions/headers_sent.html" onMouseOver="phpfuncPopup(event,'headers_sent')">headers_sent</a>(<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>) )
<a name="l275"><span class="linenum"> 275</span></a>      {
<a name="l276"><span class="linenum"> 276</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( sprintf('Headers have already been sent in %s on line %d.', <a class="phpfunction" onClick="logFunction('basename')" href="../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>), <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>)
<a name="l277"><span class="linenum"> 277</span></a>                          .'&lt;br /&gt;Cannot &lt;a href=&quot;'.<a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>).'&quot;&gt;redirect&lt;/a&gt;.' );
<a name="l278"><span class="linenum"> 278</span></a>      }
<a name="l279"><span class="linenum"> 279</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>( 'Location: '.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, true, <a class="var it613" onMouseOver="hilite(613)" onMouseOut="lolite()" onClick="logVariable('http_response_code')" href="../../_variables/http_response_code.html">$http_response_code</a> ); <span class="comment">// explictly setting the status is required for (fast)cgi</span>
<a name="l280"><span class="linenum"> 280</span></a>      exit(0);
<a name="l281"><span class="linenum"> 281</span></a>  }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">/**</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment"> * Sends HTTP headers to avoid caching of the page at the browser level</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment"> * (at least without revalidating with the server to make sure whether the content has changed or not).</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment"> *</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment"> * @see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment"> */</span>
<a name="l291"><span class="linenum"> 291</span></a>  function <a class="function" onClick="logFunction('header_nocache')" href="../../_functions/header_nocache.html" onMouseOver="funcPopup(event,'header_nocache')">header_nocache</a>( <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../_variables/timestamp.html">$timestamp</a> = NULL )
<a name="l292"><span class="linenum"> 292</span></a>  {
<a name="l293"><span class="linenum"> 293</span></a>      global <a class="var it1254" onMouseOver="hilite(1254)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../_variables/servertimenow.html">$servertimenow</a>;
<a name="l294"><span class="linenum"> 294</span></a>      if( empty(<a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../_variables/timestamp.html">$timestamp</a>) )
<a name="l295"><span class="linenum"> 295</span></a>      {
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../_variables/timestamp.html">$timestamp</a> = <a class="var it1254" onMouseOver="hilite(1254)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../_variables/servertimenow.html">$servertimenow</a>;
<a name="l297"><span class="linenum"> 297</span></a>      }
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Expires: '.<a class="phpfunction" onClick="logFunction('gmdate')" href="../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>('r',<a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../_variables/timestamp.html">$timestamp</a>));
<a name="l300"><span class="linenum"> 300</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Last-Modified: '.<a class="phpfunction" onClick="logFunction('gmdate')" href="../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>('r',<a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../_variables/timestamp.html">$timestamp</a>));
<a name="l301"><span class="linenum"> 301</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Cache-Control: no-cache, must-revalidate');
<a name="l302"><span class="linenum"> 302</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Pragma: no-cache');
<a name="l303"><span class="linenum"> 303</span></a>  }
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>  
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">/**</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment"> * This is to &quot;force&quot; (strongly suggest) caching.</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment"> *</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment"> * WARNING: use this only for STATIC content that does NOT depend on the current user.</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment"> *</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment"> * @see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment"> */</span>
<a name="l313"><span class="linenum"> 313</span></a>  function <a class="function" onClick="logFunction('header_noexpire')" href="../../_functions/header_noexpire.html" onMouseOver="funcPopup(event,'header_noexpire')">header_noexpire</a>()
<a name="l314"><span class="linenum"> 314</span></a>  {
<a name="l315"><span class="linenum"> 315</span></a>      global <a class="var it1254" onMouseOver="hilite(1254)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../_variables/servertimenow.html">$servertimenow</a>;
<a name="l316"><span class="linenum"> 316</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Expires: '.<a class="phpfunction" onClick="logFunction('gmdate')" href="../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>('r', <a class="var it1254" onMouseOver="hilite(1254)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../_variables/servertimenow.html">$servertimenow</a> + 31536000)); <span class="comment">// 86400*365 (1 year)</span>
<a name="l317"><span class="linenum"> 317</span></a>  }
<a name="l318"><span class="linenum"> 318</span></a>  
<a name="l319"><span class="linenum"> 319</span></a>  
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">/**</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment"> * Generate an etag to identify the version of the current page.</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> * We use this primarily to make a difference between the same page that has been generated for anonymous users</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment"> * and a version that has been generated for a specific user.</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment"> *</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment"> * A common problem without this would be that when users log out, the page cache would tell them &quot;304 Not Modified&quot;</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment"> * based on the date of the cache and then the browser would show a locally cached version of the page that includes</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment"> * the evobar.</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment"> *</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment"> * When a specific user logs out, the browser will send back the Etag of the logged in version it got and we will</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"> * be able to detect that this is not a &quot;304 Not Modified&quot; case -&gt; we will send back the anonymou version of the page.</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> */</span>
<a name="l332"><span class="linenum"> 332</span></a>  function <a class="function" onClick="logFunction('gen_current_page_etag')" href="../../_functions/gen_current_page_etag.html" onMouseOver="funcPopup(event,'gen_current_page_etag')">gen_current_page_etag</a>()
<a name="l333"><span class="linenum"> 333</span></a>  {
<a name="l334"><span class="linenum"> 334</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>;
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>      if( isset(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>) )
<a name="l337"><span class="linenum"> 337</span></a>      {
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it7257" onMouseOver="hilite(7257)" onMouseOut="lolite()" onClick="logVariable('etag')" href="../../_variables/etag.html">$etag</a> = 'user:'.<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>;
<a name="l339"><span class="linenum"> 339</span></a>      }
<a name="l340"><span class="linenum"> 340</span></a>      else
<a name="l341"><span class="linenum"> 341</span></a>      {
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it7257" onMouseOver="hilite(7257)" onMouseOut="lolite()" onClick="logVariable('etag')" href="../../_variables/etag.html">$etag</a> = 'user:anon';
<a name="l343"><span class="linenum"> 343</span></a>      }
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      if( <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() )
<a name="l346"><span class="linenum"> 346</span></a>      {    // This case has never been observed yet, but let's forward protect us against client side cached messages
<a name="l347"><span class="linenum"> 347</span></a>          <a class="var it7257" onMouseOver="hilite(7257)" onMouseOut="lolite()" onClick="logVariable('etag')" href="../../_variables/etag.html">$etag</a> .= '-msg:'.md5(<a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('',''));
<a name="l348"><span class="linenum"> 348</span></a>      }
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>      return '&quot;'.<a class="var it7257" onMouseOver="hilite(7257)" onMouseOut="lolite()" onClick="logVariable('etag')" href="../../_variables/etag.html">$etag</a>.'&quot;';
<a name="l351"><span class="linenum"> 351</span></a>  }
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>  
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">/**</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment"> * This adds teh etag header</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment"> *</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment"> * @param string etag MUST be &quot;quoted&quot;</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment"> */</span>
<a name="l359"><span class="linenum"> 359</span></a>  function <a class="function" onClick="logFunction('header_etag')" href="../../_functions/header_etag.html" onMouseOver="funcPopup(event,'header_etag')">header_etag</a>( <a class="var it7257" onMouseOver="hilite(7257)" onMouseOut="lolite()" onClick="logVariable('etag')" href="../../_variables/etag.html">$etag</a> )
<a name="l360"><span class="linenum"> 360</span></a>  {
<a name="l361"><span class="linenum"> 361</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>( 'ETag: '.<a class="var it7257" onMouseOver="hilite(7257)" onMouseOut="lolite()" onClick="logVariable('etag')" href="../../_variables/etag.html">$etag</a> );
<a name="l362"><span class="linenum"> 362</span></a>  }
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">/**</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment"> * Get global title matching filter params</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment"> *</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment"> * Outputs the title of the category when you load the page with &lt;code&gt;?cat=&lt;/code&gt;</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment"> * Display &quot;Archive Directory&quot; title if it has been requested</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment"> * Display &quot;Latest comments&quot; title if these have been requested</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment"> * Display &quot;Statistics&quot; title if these have been requested</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment"> * Display &quot;User profile&quot; title if it has been requested</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment"> *</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment"> * @todo single month: Respect locales datefmt</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment"> * @todo single post: posts do no get proper checking (wether they are in the requested blog or wether their permissions match user rights,</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment"> * thus the title sometimes gets displayed even when it should not. We need to pre-query the ItemList instead!!</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment"> * @todo make it complete with all possible params!</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment"> *</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment"> * @param array params</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment"> *        - &quot;auto_pilot&quot;: &quot;seo_title&quot;: Use the SEO title autopilot. (Default: &quot;none&quot;)</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment"> */</span>
<a name="l382"><span class="linenum"> 382</span></a>  function <a class="function" onClick="logFunction('get_request_title')" href="../../_functions/get_request_title.html" onMouseOver="funcPopup(event,'get_request_title')">get_request_title</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l383"><span class="linenum"> 383</span></a>  {
<a name="l384"><span class="linenum"> 384</span></a>      global <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>, <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../_variables/preview.html">$preview</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>;
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = array();
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l389"><span class="linenum"> 389</span></a>              'auto_pilot'          =&gt; 'none',
<a name="l390"><span class="linenum"> 390</span></a>              'title_before'        =&gt; '',
<a name="l391"><span class="linenum"> 391</span></a>              'title_after'         =&gt; '',
<a name="l392"><span class="linenum"> 392</span></a>              'title_none'          =&gt; '',
<a name="l393"><span class="linenum"> 393</span></a>              'title_single_disp'   =&gt; true,
<a name="l394"><span class="linenum"> 394</span></a>              'title_single_before' =&gt; '#',
<a name="l395"><span class="linenum"> 395</span></a>              'title_single_after'  =&gt; '#',
<a name="l396"><span class="linenum"> 396</span></a>              'title_page_disp'     =&gt; true,
<a name="l397"><span class="linenum"> 397</span></a>              'title_page_before'   =&gt; '#',
<a name="l398"><span class="linenum"> 398</span></a>              'title_page_after'    =&gt; '#',
<a name="l399"><span class="linenum"> 399</span></a>              'title_terms_disp'    =&gt; true,
<a name="l400"><span class="linenum"> 400</span></a>              'title_terms_before'  =&gt; '#',
<a name="l401"><span class="linenum"> 401</span></a>              'title_terms_after'   =&gt; '#',
<a name="l402"><span class="linenum"> 402</span></a>              'glue'                =&gt; ' - ',
<a name="l403"><span class="linenum"> 403</span></a>              'format'              =&gt; 'htmlbody',
<a name="l404"><span class="linenum"> 404</span></a>              'arcdir_text'         =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Archive Directory'),
<a name="l405"><span class="linenum"> 405</span></a>              'catdir_text'         =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Category Directory'),
<a name="l406"><span class="linenum"> 406</span></a>              'mediaidx_text'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Photo Index'),
<a name="l407"><span class="linenum"> 407</span></a>              'postidx_text'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post Index'),
<a name="l408"><span class="linenum"> 408</span></a>              'search_text'         =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Search'),
<a name="l409"><span class="linenum"> 409</span></a>              'sitemap_text'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Site Map'),
<a name="l410"><span class="linenum"> 410</span></a>              'msgform_text'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Sending a message'),
<a name="l411"><span class="linenum"> 411</span></a>              'messages_text'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Messages'),
<a name="l412"><span class="linenum"> 412</span></a>              'contacts_text'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Contacts'),
<a name="l413"><span class="linenum"> 413</span></a>              'login_text'          =&gt; <span class="comment">/* TRANS: trailing space = verb */</span> <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Login '),
<a name="l414"><span class="linenum"> 414</span></a>              'register_text'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Register'),
<a name="l415"><span class="linenum"> 415</span></a>              'req_validatemail'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Account activation'),
<a name="l416"><span class="linenum"> 416</span></a>              'account_activation'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Account activation'),
<a name="l417"><span class="linenum"> 417</span></a>              'lostpassword_text'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Lost your password?'),
<a name="l418"><span class="linenum"> 418</span></a>              'profile_text'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User Profile'),
<a name="l419"><span class="linenum"> 419</span></a>              'avatar_text'         =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Profile picture'),
<a name="l420"><span class="linenum"> 420</span></a>              'pwdchange_text'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Password change'),
<a name="l421"><span class="linenum"> 421</span></a>              'userprefs_text'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User preferences'),
<a name="l422"><span class="linenum"> 422</span></a>              'user_text'           =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User: %s'),
<a name="l423"><span class="linenum"> 423</span></a>              'users_text'          =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Users'),
<a name="l424"><span class="linenum"> 424</span></a>              'closeaccount_text'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Close account'),
<a name="l425"><span class="linenum"> 425</span></a>              'subs_text'           =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Notifications'),
<a name="l426"><span class="linenum"> 426</span></a>              'comments_text'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Latest Comments'),
<a name="l427"><span class="linenum"> 427</span></a>              'feedback-popup_text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Feedback'),
<a name="l428"><span class="linenum"> 428</span></a>              'edit_text_create'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New post'),
<a name="l429"><span class="linenum"> 429</span></a>              'edit_text_update'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Editing post'),
<a name="l430"><span class="linenum"> 430</span></a>              'edit_text_copy'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Duplicating post'),
<a name="l431"><span class="linenum"> 431</span></a>              'edit_comment_text'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Editing comment'),
<a name="l432"><span class="linenum"> 432</span></a>              'front_text'          =&gt; '',        // We don't want to display a special title on the front page
<a name="l433"><span class="linenum"> 433</span></a>              'posts_text'          =&gt; '#',
<a name="l434"><span class="linenum"> 434</span></a>              'useritems_text'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User posts'),
<a name="l435"><span class="linenum"> 435</span></a>              'usercomments_text'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User comments'),
<a name="l436"><span class="linenum"> 436</span></a>              'download_head_text'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Download').' - <a class="var it574" onMouseOver="hilite(574)" onMouseOut="lolite()" onClick="logVariable('file_title')" href="../../_variables/file_title.html">$file_title</a>$ - <a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../_variables/post_title.html">$post_title</a>$',
<a name="l437"><span class="linenum"> 437</span></a>              'download_body_text'  =&gt; '',
<a name="l438"><span class="linenum"> 438</span></a>              'display_edit_links'  =&gt; true, // Display the links to advanced editing on disp=edit|edit_comment
<a name="l439"><span class="linenum"> 439</span></a>              'edit_links_template' =&gt; array(), // Template for the links to advanced editing on disp=edit|edit_comment
<a name="l440"><span class="linenum"> 440</span></a>              'tags_text'           =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Tags'),
<a name="l441"><span class="linenum"> 441</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['auto_pilot'] == 'seo_title' )
<a name="l444"><span class="linenum"> 444</span></a>      {    // We want to use the SEO title autopilot. Do overrides:
<a name="l445"><span class="linenum"> 445</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['format'] = 'htmlhead';
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_after'] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['glue'].<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('name');
<a name="l447"><span class="linenum"> 447</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_single_after'] = '';
<a name="l448"><span class="linenum"> 448</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_page_after'] = '';
<a name="l449"><span class="linenum"> 449</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_none'] = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('name','htmlhead');
<a name="l450"><span class="linenum"> 450</span></a>      }
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>      <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../_variables/before.html">$before</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_before'];
<a name="l454"><span class="linenum"> 454</span></a>      <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_after'];
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>      switch( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> )
<a name="l457"><span class="linenum"> 457</span></a>      {
<a name="l458"><span class="linenum"> 458</span></a>          case 'front':
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">            // We are requesting a front page:</span>
<a name="l460"><span class="linenum"> 460</span></a>              if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['front_text'] ) )
<a name="l461"><span class="linenum"> 461</span></a>              {
<a name="l462"><span class="linenum"> 462</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['front_text'];
<a name="l463"><span class="linenum"> 463</span></a>              }
<a name="l464"><span class="linenum"> 464</span></a>              break;
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>          case 'arcdir':
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">            // We are requesting the archive directory:</span>
<a name="l468"><span class="linenum"> 468</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['arcdir_text'];
<a name="l469"><span class="linenum"> 469</span></a>              break;
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>          case 'catdir':
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">            // We are requesting the archive directory:</span>
<a name="l473"><span class="linenum"> 473</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['catdir_text'];
<a name="l474"><span class="linenum"> 474</span></a>              break;
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>          case 'mediaidx':
<a name="l477"><span class="linenum"> 477</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['mediaidx_text'];
<a name="l478"><span class="linenum"> 478</span></a>              break;
<a name="l479"><span class="linenum"> 479</span></a>  
<a name="l480"><span class="linenum"> 480</span></a>          case 'postidx':
<a name="l481"><span class="linenum"> 481</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['postidx_text'];
<a name="l482"><span class="linenum"> 482</span></a>              break;
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>          case 'sitemap':
<a name="l485"><span class="linenum"> 485</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sitemap_text'];
<a name="l486"><span class="linenum"> 486</span></a>              break;
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>          case 'search':
<a name="l489"><span class="linenum"> 489</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['search_text'];
<a name="l490"><span class="linenum"> 490</span></a>              break;
<a name="l491"><span class="linenum"> 491</span></a>  
<a name="l492"><span class="linenum"> 492</span></a>          case 'comments':
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">            // We are requesting the latest comments:</span>
<a name="l494"><span class="linenum"> 494</span></a>              global <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>;
<a name="l495"><span class="linenum"> 495</span></a>              if( isset( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) )
<a name="l496"><span class="linenum"> 496</span></a>              {
<a name="l497"><span class="linenum"> 497</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = sprintf( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['comments_text'] . <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>(' on %s'), <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('title') );
<a name="l498"><span class="linenum"> 498</span></a>              }
<a name="l499"><span class="linenum"> 499</span></a>              else
<a name="l500"><span class="linenum"> 500</span></a>              {
<a name="l501"><span class="linenum"> 501</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['comments_text'];
<a name="l502"><span class="linenum"> 502</span></a>              }
<a name="l503"><span class="linenum"> 503</span></a>              break;
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>          case 'feedback-popup':
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">            // We are requesting the comments on a specific post:</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">            // Should be in first position</span>
<a name="l508"><span class="linenum"> 508</span></a>              <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = &amp; <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;get_by_idx( 0 );
<a name="l509"><span class="linenum"> 509</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = sprintf( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['feedback-popup_text'] . <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>(' on %s'), <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('title') );
<a name="l510"><span class="linenum"> 510</span></a>              break;
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>          case 'profile':
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">            // We are requesting the user profile:</span>
<a name="l514"><span class="linenum"> 514</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['profile_text'];
<a name="l515"><span class="linenum"> 515</span></a>              break;
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>          case 'avatar':
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">            // We are requesting the user avatar:</span>
<a name="l519"><span class="linenum"> 519</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['avatar_text'];
<a name="l520"><span class="linenum"> 520</span></a>              break;
<a name="l521"><span class="linenum"> 521</span></a>  
<a name="l522"><span class="linenum"> 522</span></a>          case 'pwdchange':
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">            // We are requesting the user change password:</span>
<a name="l524"><span class="linenum"> 524</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['pwdchange_text'];
<a name="l525"><span class="linenum"> 525</span></a>              break;
<a name="l526"><span class="linenum"> 526</span></a>  
<a name="l527"><span class="linenum"> 527</span></a>          case 'userprefs':
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">            // We are requesting the user preferences:</span>
<a name="l529"><span class="linenum"> 529</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userprefs_text'];
<a name="l530"><span class="linenum"> 530</span></a>              break;
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>          case 'subs':
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment">            // We are requesting the subscriptions screen:</span>
<a name="l534"><span class="linenum"> 534</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['subs_text'];
<a name="l535"><span class="linenum"> 535</span></a>              break;
<a name="l536"><span class="linenum"> 536</span></a>  
<a name="l537"><span class="linenum"> 537</span></a>          case 'msgform':
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">            // We are requesting the message form:</span>
<a name="l539"><span class="linenum"> 539</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['msgform_text'];
<a name="l540"><span class="linenum"> 540</span></a>              break;
<a name="l541"><span class="linenum"> 541</span></a>  
<a name="l542"><span class="linenum"> 542</span></a>          case 'threads':
<a name="l543"><span class="linenum"> 543</span></a>          case 'messages':
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">            // We are requesting the messages form</span>
<a name="l545"><span class="linenum"> 545</span></a>              <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'thrd_ID', 'integer', 0 );
<a name="l546"><span class="linenum"> 546</span></a>              if( empty( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a> ) )
<a name="l547"><span class="linenum"> 547</span></a>              {
<a name="l548"><span class="linenum"> 548</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['messages_text'];
<a name="l549"><span class="linenum"> 549</span></a>              }
<a name="l550"><span class="linenum"> 550</span></a>              else
<a name="l551"><span class="linenum"> 551</span></a>              {    // We get a thread title by ID
<a name="l552"><span class="linenum"> 552</span></a>                  <a class="function" onClick="logFunction('load_class')" href="../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'messaging/model/_thread.class.php', 'Thread' );
<a name="l553"><span class="linenum"> 553</span></a>                  <a class="var it1072" onMouseOver="hilite(1072)" onMouseOut="lolite()" onClick="logVariable('ThreadCache')" href="../../_variables/ThreadCache.html">$ThreadCache</a> = &amp; get_ThreadCache();
<a name="l554"><span class="linenum"> 554</span></a>                  if( <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('Thread')" href="../../_variables/Thread.html">$Thread</a> = <a class="var it1072" onMouseOver="hilite(1072)" onMouseOut="lolite()" onClick="logVariable('ThreadCache')" href="../../_variables/ThreadCache.html">$ThreadCache</a>-&gt;get_by_ID( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a>, false ) )
<a name="l555"><span class="linenum"> 555</span></a>                  {    // Thread exists and we get a title
<a name="l556"><span class="linenum"> 556</span></a>                      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['auto_pilot'] == 'seo_title' )
<a name="l557"><span class="linenum"> 557</span></a>                      {    // Display thread title only for tag &lt;title&gt;
<a name="l558"><span class="linenum"> 558</span></a>                          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('Thread')" href="../../_variables/Thread.html">$Thread</a>-&gt;<a onClick="logVariable('title')" class="var it10923" onMouseOver="hilite(10923)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>;
<a name="l559"><span class="linenum"> 559</span></a>                      }
<a name="l560"><span class="linenum"> 560</span></a>                  }
<a name="l561"><span class="linenum"> 561</span></a>                  else
<a name="l562"><span class="linenum"> 562</span></a>                  {    // Bad request with not existing thread
<a name="l563"><span class="linenum"> 563</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['messages_text'] );
<a name="l564"><span class="linenum"> 564</span></a>                  }
<a name="l565"><span class="linenum"> 565</span></a>              }
<a name="l566"><span class="linenum"> 566</span></a>              break;
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>          case 'contacts':
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">            // We are requesting the message form:</span>
<a name="l570"><span class="linenum"> 570</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['contacts_text'];
<a name="l571"><span class="linenum"> 571</span></a>              break;
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>          case 'login':
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">            // We are requesting the login form:</span>
<a name="l575"><span class="linenum"> 575</span></a>              if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'req_validatemail' )
<a name="l576"><span class="linenum"> 576</span></a>              {
<a name="l577"><span class="linenum"> 577</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['req_validatemail'];
<a name="l578"><span class="linenum"> 578</span></a>              }
<a name="l579"><span class="linenum"> 579</span></a>              else
<a name="l580"><span class="linenum"> 580</span></a>              {
<a name="l581"><span class="linenum"> 581</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['login_text'];
<a name="l582"><span class="linenum"> 582</span></a>              }
<a name="l583"><span class="linenum"> 583</span></a>              break;
<a name="l584"><span class="linenum"> 584</span></a>  
<a name="l585"><span class="linenum"> 585</span></a>          case 'register':
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment">            // We are requesting the registration form:</span>
<a name="l587"><span class="linenum"> 587</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['register_text'];
<a name="l588"><span class="linenum"> 588</span></a>              break;
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>          case 'activateinfo':
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">            // We are requesting the activate info form:</span>
<a name="l592"><span class="linenum"> 592</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['account_activation'];
<a name="l593"><span class="linenum"> 593</span></a>              break;
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>          case 'lostpassword':
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">            // We are requesting the lost password form:</span>
<a name="l597"><span class="linenum"> 597</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['lostpassword_text'];
<a name="l598"><span class="linenum"> 598</span></a>              break;
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>          case 'single':
<a name="l601"><span class="linenum"> 601</span></a>          case 'page':
<a name="l602"><span class="linenum"> 602</span></a>          case 'terms':
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">            // We are displaying a single message:</span>
<a name="l604"><span class="linenum"> 604</span></a>              if( <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../_variables/preview.html">$preview</a> )
<a name="l605"><span class="linenum"> 605</span></a>              {    // We are requesting a post preview:
<a name="l606"><span class="linenum"> 606</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('PREVIEW');
<a name="l607"><span class="linenum"> 607</span></a>              }
<a name="l608"><span class="linenum"> 608</span></a>              elseif( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_'.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_disp'] &amp;&amp; isset( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a> ) )
<a name="l609"><span class="linenum"> 609</span></a>              {
<a name="l610"><span class="linenum"> 610</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_filter_titles')" href="../../_functions/get_filter_titles.html" onMouseOver="funcPopup(event,'get_filter_titles')">get_filter_titles</a>( array( 'visibility', 'hide_future' ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> ) );
<a name="l611"><span class="linenum"> 611</span></a>              }
<a name="l612"><span class="linenum"> 612</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_'.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_before'] != '#' )
<a name="l613"><span class="linenum"> 613</span></a>              {
<a name="l614"><span class="linenum"> 614</span></a>                  <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../_variables/before.html">$before</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_'.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_before'];
<a name="l615"><span class="linenum"> 615</span></a>              }
<a name="l616"><span class="linenum"> 616</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_'.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_after'] != '#' )
<a name="l617"><span class="linenum"> 617</span></a>              {
<a name="l618"><span class="linenum"> 618</span></a>                  <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_'.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_after'];
<a name="l619"><span class="linenum"> 619</span></a>              }
<a name="l620"><span class="linenum"> 620</span></a>              break;
<a name="l621"><span class="linenum"> 621</span></a>      
<a name="l622"><span class="linenum"> 622</span></a>          case 'download':
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">            // We are displaying a download page:</span>
<a name="l624"><span class="linenum"> 624</span></a>              global <a class="var it2213" onMouseOver="hilite(2213)" onMouseOut="lolite()" onClick="logVariable('download_Link')" href="../../_variables/download_Link.html">$download_Link</a>;
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>              <a class="var it7258" onMouseOver="hilite(7258)" onMouseOut="lolite()" onClick="logVariable('download_text')" href="../../_variables/download_text.html">$download_text</a> = ( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['format'] == 'htmlhead' ) ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['download_head_text'] : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['download_body_text'];
<a name="l627"><span class="linenum"> 627</span></a>              if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it7258" onMouseOver="hilite(7258)" onMouseOut="lolite()" onClick="logVariable('download_text')" href="../../_variables/download_text.html">$download_text</a>, '<a class="var it574" onMouseOver="hilite(574)" onMouseOut="lolite()" onClick="logVariable('file_title')" href="../../_variables/file_title.html">$file_title</a>$' ) !== false )
<a name="l628"><span class="linenum"> 628</span></a>              { // Replace a mask <a class="var it574" onMouseOver="hilite(574)" onMouseOut="lolite()" onClick="logVariable('file_title')" href="../../_variables/file_title.html">$file_title</a>$ with real file name
<a name="l629"><span class="linenum"> 629</span></a>                  <a class="var it2215" onMouseOver="hilite(2215)" onMouseOut="lolite()" onClick="logVariable('download_File')" href="../../_variables/download_File.html">$download_File</a> = &amp; <a class="var it2213" onMouseOver="hilite(2213)" onMouseOut="lolite()" onClick="logVariable('download_Link')" href="../../_variables/download_Link.html">$download_Link</a>-&gt;get_File();
<a name="l630"><span class="linenum"> 630</span></a>                  <a class="var it7258" onMouseOver="hilite(7258)" onMouseOut="lolite()" onClick="logVariable('download_text')" href="../../_variables/download_text.html">$download_text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it574" onMouseOver="hilite(574)" onMouseOut="lolite()" onClick="logVariable('file_title')" href="../../_variables/file_title.html">$file_title</a>$', <a class="var it2215" onMouseOver="hilite(2215)" onMouseOut="lolite()" onClick="logVariable('download_File')" href="../../_variables/download_File.html">$download_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), <a class="var it7258" onMouseOver="hilite(7258)" onMouseOut="lolite()" onClick="logVariable('download_text')" href="../../_variables/download_text.html">$download_text</a> );
<a name="l631"><span class="linenum"> 631</span></a>              }
<a name="l632"><span class="linenum"> 632</span></a>              if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it7258" onMouseOver="hilite(7258)" onMouseOut="lolite()" onClick="logVariable('download_text')" href="../../_variables/download_text.html">$download_text</a>, '<a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../_variables/post_title.html">$post_title</a>$' ) !== false )
<a name="l633"><span class="linenum"> 633</span></a>              { // Replace a mask <a class="var it574" onMouseOver="hilite(574)" onMouseOut="lolite()" onClick="logVariable('file_title')" href="../../_variables/file_title.html">$file_title</a>$ with real file name
<a name="l634"><span class="linenum"> 634</span></a>                  <a class="var it7258" onMouseOver="hilite(7258)" onMouseOut="lolite()" onClick="logVariable('download_text')" href="../../_variables/download_text.html">$download_text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it209" onMouseOver="hilite(209)" onMouseOut="lolite()" onClick="logVariable('post_title')" href="../../_variables/post_title.html">$post_title</a>$', <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['glue'], <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_filter_titles')" href="../../_functions/get_filter_titles.html" onMouseOver="funcPopup(event,'get_filter_titles')">get_filter_titles</a>( array( 'visibility', 'hide_future' ) ) ), <a class="var it7258" onMouseOver="hilite(7258)" onMouseOut="lolite()" onClick="logVariable('download_text')" href="../../_variables/download_text.html">$download_text</a> );
<a name="l635"><span class="linenum"> 635</span></a>              }
<a name="l636"><span class="linenum"> 636</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it7258" onMouseOver="hilite(7258)" onMouseOut="lolite()" onClick="logVariable('download_text')" href="../../_variables/download_text.html">$download_text</a>;
<a name="l637"><span class="linenum"> 637</span></a>              break;
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>          case 'user':
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">            // We are requesting the user page:</span>
<a name="l641"><span class="linenum"> 641</span></a>              <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0 );
<a name="l642"><span class="linenum"> 642</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l643"><span class="linenum"> 643</span></a>              <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, false, false );
<a name="l644"><span class="linenum"> 644</span></a>              <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../_variables/user_login.html">$user_login</a> = <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> ? <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'login' ) : '';
<a name="l645"><span class="linenum"> 645</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = sprintf( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['user_text'], <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../_variables/user_login.html">$user_login</a> );
<a name="l646"><span class="linenum"> 646</span></a>              break;
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>          case 'users':
<a name="l649"><span class="linenum"> 649</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['users_text'];
<a name="l650"><span class="linenum"> 650</span></a>              break;
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>          case 'closeaccount':
<a name="l653"><span class="linenum"> 653</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['closeaccount_text'];
<a name="l654"><span class="linenum"> 654</span></a>              break;
<a name="l655"><span class="linenum"> 655</span></a>  
<a name="l656"><span class="linenum"> 656</span></a>          case 'edit':
<a name="l657"><span class="linenum"> 657</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="function" onClick="logFunction('param_action')" href="../../_functions/param_action.html" onMouseOver="funcPopup(event,'param_action')">param_action</a>(); <span class="comment">// Edit post by switching into 'In skin' mode from Back-office</span>
<a name="l658"><span class="linenum"> 658</span></a>              <a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('p')" href="../../_variables/p.html">$p</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'p', 'integer', 0 ); <span class="comment">// Edit post from Front-office</span>
<a name="l659"><span class="linenum"> 659</span></a>              <a class="var it342" onMouseOver="hilite(342)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a> ( 'post_ID', 'integer', 0 ); <span class="comment">// Update the edited post( If user is redirected to edit form again with some error messages )</span>
<a name="l660"><span class="linenum"> 660</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('cp')" href="../../_variables/cp.html">$cp</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'cp', 'integer', 0 ); <span class="comment">// Copy post from Front-office</span>
<a name="l661"><span class="linenum"> 661</span></a>              if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'edit_switchtab' || <a class="var it1938" onMouseOver="hilite(1938)" onMouseOut="lolite()" onClick="logVariable('p')" href="../../_variables/p.html">$p</a> &gt; 0 || <a class="var it342" onMouseOver="hilite(342)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a> &gt; 0 )
<a name="l662"><span class="linenum"> 662</span></a>              {    // Edit post
<a name="l663"><span class="linenum"> 663</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_text_update'];
<a name="l664"><span class="linenum"> 664</span></a>              }
<a name="l665"><span class="linenum"> 665</span></a>              else if( <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('cp')" href="../../_variables/cp.html">$cp</a> &gt; 0 )
<a name="l666"><span class="linenum"> 666</span></a>              {    // Copy post
<a name="l667"><span class="linenum"> 667</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_text_copy'];
<a name="l668"><span class="linenum"> 668</span></a>              }
<a name="l669"><span class="linenum"> 669</span></a>              else
<a name="l670"><span class="linenum"> 670</span></a>              {    // Create post
<a name="l671"><span class="linenum"> 671</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_text_create'];
<a name="l672"><span class="linenum"> 672</span></a>              }
<a name="l673"><span class="linenum"> 673</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['display_edit_links'] &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['auto_pilot'] != 'seo_title' )
<a name="l674"><span class="linenum"> 674</span></a>              { // Add advanced edit and close icon
<a name="l675"><span class="linenum"> 675</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template'] = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l676"><span class="linenum"> 676</span></a>                          'before'              =&gt; '&lt;span class=&quot;title_action_icons&quot;&gt;',
<a name="l677"><span class="linenum"> 677</span></a>                          'after'               =&gt; '&lt;/span&gt;',
<a name="l678"><span class="linenum"> 678</span></a>                          'advanced_link_class' =&gt; '',
<a name="l679"><span class="linenum"> 679</span></a>                          'close_link_class'    =&gt; '',
<a name="l680"><span class="linenum"> 680</span></a>                      ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template'] );
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>                  global <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../_variables/edited_Item.html">$edited_Item</a>;
<a name="l683"><span class="linenum"> 683</span></a>                  if( !empty( <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../_variables/edited_Item.html">$edited_Item</a> ) &amp;&amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10697" onMouseOver="hilite(10697)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> &gt; 0 )
<a name="l684"><span class="linenum"> 684</span></a>                  { // Set the cancel editing url as permanent url of the item
<a name="l685"><span class="linenum"> 685</span></a>                      <a class="var it7259" onMouseOver="hilite(7259)" onMouseOut="lolite()" onClick="logVariable('cancel_url')" href="../../_variables/cancel_url.html">$cancel_url</a> = <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>();
<a name="l686"><span class="linenum"> 686</span></a>                  }
<a name="l687"><span class="linenum"> 687</span></a>                  else
<a name="l688"><span class="linenum"> 688</span></a>                  { // Set the cancel editing url to home page of the blog
<a name="l689"><span class="linenum"> 689</span></a>                      <a class="var it7259" onMouseOver="hilite(7259)" onMouseOut="lolite()" onClick="logVariable('cancel_url')" href="../../_variables/cancel_url.html">$cancel_url</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l690"><span class="linenum"> 690</span></a>                  }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template']['before'];
<a name="l693"><span class="linenum"> 693</span></a>                  if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) )
<a name="l694"><span class="linenum"> 694</span></a>                  {
<a name="l695"><span class="linenum"> 695</span></a>                      global <a class="var it7260" onMouseOver="hilite(7260)" onMouseOut="lolite()" onClick="logVariable('advanced_edit_link')" href="../../_variables/advanced_edit_link.html">$advanced_edit_link</a>;
<a name="l696"><span class="linenum"> 696</span></a>                      <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Go to advanced edit screen'), 'edit', <a class="var it7260" onMouseOver="hilite(7260)" onMouseOut="lolite()" onClick="logVariable('advanced_edit_link')" href="../../_variables/advanced_edit_link.html">$advanced_edit_link</a>['href'], ' '.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Advanced editing'), NULL, 3, array(
<a name="l697"><span class="linenum"> 697</span></a>                              'onclick' =&gt; <a class="var it7260" onMouseOver="hilite(7260)" onMouseOut="lolite()" onClick="logVariable('advanced_edit_link')" href="../../_variables/advanced_edit_link.html">$advanced_edit_link</a>['onclick'],
<a name="l698"><span class="linenum"> 698</span></a>                              'class'   =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template']['advanced_link_class'].' action_icon',
<a name="l699"><span class="linenum"> 699</span></a>                          ) );
<a name="l700"><span class="linenum"> 700</span></a>                  }
<a name="l701"><span class="linenum"> 701</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Cancel editing'), 'close', <a class="var it7259" onMouseOver="hilite(7259)" onMouseOut="lolite()" onClick="logVariable('cancel_url')" href="../../_variables/cancel_url.html">$cancel_url</a>, ' '.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Cancel editing'), NULL, 3, array(
<a name="l702"><span class="linenum"> 702</span></a>                          'class' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template']['close_link_class'].' action_icon',
<a name="l703"><span class="linenum"> 703</span></a>                      ) );
<a name="l704"><span class="linenum"> 704</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template']['after'];
<a name="l705"><span class="linenum"> 705</span></a>              }
<a name="l706"><span class="linenum"> 706</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>;
<a name="l707"><span class="linenum"> 707</span></a>              break;
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>          case 'edit_comment':
<a name="l710"><span class="linenum"> 710</span></a>              global <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>, <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>;
<a name="l711"><span class="linenum"> 711</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_comment_text'];
<a name="l712"><span class="linenum"> 712</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['display_edit_links'] &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['auto_pilot'] != 'seo_title' )
<a name="l713"><span class="linenum"> 713</span></a>              { // Add advanced edit and close icon
<a name="l714"><span class="linenum"> 714</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template'] = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l715"><span class="linenum"> 715</span></a>                          'before'              =&gt; '&lt;span class=&quot;title_action_icons&quot;&gt;',
<a name="l716"><span class="linenum"> 716</span></a>                          'after'               =&gt; '&lt;/span&gt;',
<a name="l717"><span class="linenum"> 717</span></a>                          'advanced_link_class' =&gt; '',
<a name="l718"><span class="linenum"> 718</span></a>                          'close_link_class'    =&gt; '',
<a name="l719"><span class="linenum"> 719</span></a>                      ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template'] );
<a name="l720"><span class="linenum"> 720</span></a>  
<a name="l721"><span class="linenum"> 721</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template']['before'];
<a name="l722"><span class="linenum"> 722</span></a>                  if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) )
<a name="l723"><span class="linenum"> 723</span></a>                  {
<a name="l724"><span class="linenum"> 724</span></a>                      <a class="var it7261" onMouseOver="hilite(7261)" onMouseOut="lolite()" onClick="logVariable('advanced_edit_url')" href="../../_variables/advanced_edit_url.html">$advanced_edit_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>, 'ctrl=comments&amp;amp;action=edit&amp;amp;blog='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>.'&amp;amp;comment_ID='.<a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l725"><span class="linenum"> 725</span></a>                      <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Go to advanced edit screen'), 'edit', <a class="var it7261" onMouseOver="hilite(7261)" onMouseOut="lolite()" onClick="logVariable('advanced_edit_url')" href="../../_variables/advanced_edit_url.html">$advanced_edit_url</a>, ' '.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Advanced editing'), NULL, 3, array(
<a name="l726"><span class="linenum"> 726</span></a>                              'onclick' =&gt; 'return <a class="function" onClick="logFunction('switch_edit_view')" href="../../_functions/switch_edit_view.html" onMouseOver="funcPopup(event,'switch_edit_view')">switch_edit_view</a>();',
<a name="l727"><span class="linenum"> 727</span></a>                              'class'   =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template']['advanced_link_class'].' action_icon',
<a name="l728"><span class="linenum"> 728</span></a>                          ) );
<a name="l729"><span class="linenum"> 729</span></a>                  }
<a name="l730"><span class="linenum"> 730</span></a>                  if( empty( <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a> ) )
<a name="l731"><span class="linenum"> 731</span></a>                  {
<a name="l732"><span class="linenum"> 732</span></a>                      <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l733"><span class="linenum"> 733</span></a>                  }
<a name="l734"><span class="linenum"> 734</span></a>                  if( !empty( <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a> ) )
<a name="l735"><span class="linenum"> 735</span></a>                  {
<a name="l736"><span class="linenum"> 736</span></a>                      <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Cancel editing'), 'close', <a class="function" onClick="logFunction('url_add_tail')" href="../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>(), '#c'.<a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ), ' '.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Cancel editing'), NULL, 3, array(
<a name="l737"><span class="linenum"> 737</span></a>                              'class' =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template']['close_link_class'].' action_icon',
<a name="l738"><span class="linenum"> 738</span></a>                          ) );
<a name="l739"><span class="linenum"> 739</span></a>                  }
<a name="l740"><span class="linenum"> 740</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['edit_links_template']['after'];
<a name="l741"><span class="linenum"> 741</span></a>              }
<a name="l742"><span class="linenum"> 742</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>;
<a name="l743"><span class="linenum"> 743</span></a>              break;
<a name="l744"><span class="linenum"> 744</span></a>  
<a name="l745"><span class="linenum"> 745</span></a>          case 'useritems':
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">            // We are requesting the user items list:</span>
<a name="l747"><span class="linenum"> 747</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['useritems_text'];
<a name="l748"><span class="linenum"> 748</span></a>              break;
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>          case 'usercomments':
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">            // We are requesting the user comments list:</span>
<a name="l752"><span class="linenum"> 752</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['usercomments_text'];
<a name="l753"><span class="linenum"> 753</span></a>              break;
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>          case 'tags':
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">            // We are requesting the tags directory:</span>
<a name="l757"><span class="linenum"> 757</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['tags_text'];
<a name="l758"><span class="linenum"> 758</span></a>              break;
<a name="l759"><span class="linenum"> 759</span></a>  
<a name="l760"><span class="linenum"> 760</span></a>          case 'posts':
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">            // We are requesting a posts page:</span>
<a name="l762"><span class="linenum"> 762</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['posts_text'] != '#' )
<a name="l763"><span class="linenum"> 763</span></a>              {
<a name="l764"><span class="linenum"> 764</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['posts_text'];
<a name="l765"><span class="linenum"> 765</span></a>                  break;
<a name="l766"><span class="linenum"> 766</span></a>              }
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">            // No break if empty, Use title from default case</span>
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>          default:
<a name="l770"><span class="linenum"> 770</span></a>              if( isset( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a> ) )
<a name="l771"><span class="linenum"> 771</span></a>              {
<a name="l772"><span class="linenum"> 772</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_filter_titles')" href="../../_functions/get_filter_titles.html" onMouseOver="funcPopup(event,'get_filter_titles')">get_filter_titles</a>( array( 'visibility', 'hide_future' ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> ) );
<a name="l773"><span class="linenum"> 773</span></a>              }
<a name="l774"><span class="linenum"> 774</span></a>              break;
<a name="l775"><span class="linenum"> 775</span></a>      }
<a name="l776"><span class="linenum"> 776</span></a>  
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>      if( ! empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> ) )
<a name="l779"><span class="linenum"> 779</span></a>      {    // We have at leats one title match:
<a name="l780"><span class="linenum"> 780</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['glue'], <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> );
<a name="l781"><span class="linenum"> 781</span></a>          if( ! empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> ) )
<a name="l782"><span class="linenum"> 782</span></a>          {    // This is in case we asked for an empty <a class="function" onClick="logFunction('title')" href="../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a> (e-g for search)
<a name="l783"><span class="linenum"> 783</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../_variables/before.html">$before</a>.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['format'] ).<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>;
<a name="l784"><span class="linenum"> 784</span></a>          }
<a name="l785"><span class="linenum"> 785</span></a>      }
<a name="l786"><span class="linenum"> 786</span></a>      elseif( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_none'] ) )
<a name="l787"><span class="linenum"> 787</span></a>      {
<a name="l788"><span class="linenum"> 788</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['title_none'];
<a name="l789"><span class="linenum"> 789</span></a>      }
<a name="l790"><span class="linenum"> 790</span></a>      else
<a name="l791"><span class="linenum"> 791</span></a>      {    // never return array()
<a name="l792"><span class="linenum"> 792</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = '';
<a name="l793"><span class="linenum"> 793</span></a>      }
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>;
<a name="l796"><span class="linenum"> 796</span></a>  }
<a name="l797"><span class="linenum"> 797</span></a>  
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment">/**</span>
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment"> * Display a global title matching filter params</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment"> *</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment"> * @param array params</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment"> *        - &quot;auto_pilot&quot;: &quot;seo_title&quot;: Use the SEO title autopilot. (Default: &quot;none&quot;)</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment"> */</span>
<a name="l805"><span class="linenum"> 805</span></a>  function <a class="function" onClick="logFunction('request_title')" href="../../_functions/request_title.html" onMouseOver="funcPopup(event,'request_title')">request_title</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l806"><span class="linenum"> 806</span></a>  {
<a name="l807"><span class="linenum"> 807</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('get_request_title')" href="../../_functions/get_request_title.html" onMouseOver="funcPopup(event,'get_request_title')">get_request_title</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l808"><span class="linenum"> 808</span></a>  
<a name="l809"><span class="linenum"> 809</span></a>      if( !empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> ) )
<a name="l810"><span class="linenum"> 810</span></a>      { // We have something to display:
<a name="l811"><span class="linenum"> 811</span></a>          echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>;
<a name="l812"><span class="linenum"> 812</span></a>      }
<a name="l813"><span class="linenum"> 813</span></a>  }
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>  
<a name="l816"><span class="linenum"> 816</span></a>  <span class="comment">/**</span>
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment"> * Returns a &quot;&lt;base /&gt;&quot; tag and remembers that we've used it ({@link regenerate_url()} needs this).</span>
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment"> *</span>
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment"> * @param string URL to use (this gets used as base URL for all relative links on the HTML page)</span>
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment"> * @return string</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment"> */</span>
<a name="l822"><span class="linenum"> 822</span></a>  function <a class="function" onClick="logFunction('base_tag')" href="../../_functions/base_tag.html" onMouseOver="funcPopup(event,'base_tag')">base_tag</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a> = NULL )
<a name="l823"><span class="linenum"> 823</span></a>  {
<a name="l824"><span class="linenum"> 824</span></a>      global <a class="var it1012" onMouseOver="hilite(1012)" onMouseOut="lolite()" onClick="logVariable('base_tag_set')" href="../../_variables/base_tag_set.html">$base_tag_set</a>;
<a name="l825"><span class="linenum"> 825</span></a>      <a class="var it1012" onMouseOver="hilite(1012)" onMouseOut="lolite()" onClick="logVariable('base_tag_set')" href="../../_variables/base_tag_set.html">$base_tag_set</a> = <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>;
<a name="l826"><span class="linenum"> 826</span></a>      echo '&lt;base href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>.'&quot;';
<a name="l827"><span class="linenum"> 827</span></a>  
<a name="l828"><span class="linenum"> 828</span></a>      if( !empty(<a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a>) )
<a name="l829"><span class="linenum"> 829</span></a>      {
<a name="l830"><span class="linenum"> 830</span></a>          echo ' target=&quot;'.<a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a>.'&quot;';
<a name="l831"><span class="linenum"> 831</span></a>      }
<a name="l832"><span class="linenum"> 832</span></a>      echo &quot; /&gt;\n&quot;;
<a name="l833"><span class="linenum"> 833</span></a>  }
<a name="l834"><span class="linenum"> 834</span></a>  
<a name="l835"><span class="linenum"> 835</span></a>  
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">/**</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment"> * Robots tag</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment"> *</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment"> * Outputs the robots meta tag if necessary</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment"> */</span>
<a name="l841"><span class="linenum"> 841</span></a>  function <a class="function" onClick="logFunction('robots_tag')" href="../../_functions/robots_tag.html" onMouseOver="funcPopup(event,'robots_tag')">robots_tag</a>()
<a name="l842"><span class="linenum"> 842</span></a>  {
<a name="l843"><span class="linenum"> 843</span></a>      global <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('robots_follow')" href="../../_variables/robots_follow.html">$robots_follow</a>;
<a name="l844"><span class="linenum"> 844</span></a>  
<a name="l845"><span class="linenum"> 845</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('robots_follow')" href="../../_variables/robots_follow.html">$robots_follow</a>) )
<a name="l846"><span class="linenum"> 846</span></a>      {
<a name="l847"><span class="linenum"> 847</span></a>          return;
<a name="l848"><span class="linenum"> 848</span></a>      }
<a name="l849"><span class="linenum"> 849</span></a>  
<a name="l850"><span class="linenum"> 850</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = '&lt;meta name=&quot;robots&quot; content=&quot;';
<a name="l851"><span class="linenum"> 851</span></a>  
<a name="l852"><span class="linenum"> 852</span></a>      if( <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> === false )
<a name="l853"><span class="linenum"> 853</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> .= 'NOINDEX';
<a name="l854"><span class="linenum"> 854</span></a>      else
<a name="l855"><span class="linenum"> 855</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> .= 'INDEX';
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> .= ',';
<a name="l858"><span class="linenum"> 858</span></a>  
<a name="l859"><span class="linenum"> 859</span></a>      if( <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('robots_follow')" href="../../_variables/robots_follow.html">$robots_follow</a> === false )
<a name="l860"><span class="linenum"> 860</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> .= 'NOFOLLOW';
<a name="l861"><span class="linenum"> 861</span></a>      else
<a name="l862"><span class="linenum"> 862</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> .= 'FOLLOW';
<a name="l863"><span class="linenum"> 863</span></a>  
<a name="l864"><span class="linenum"> 864</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> .= '&quot; /&gt;'.&quot;\n&quot;;
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>      echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>;
<a name="l867"><span class="linenum"> 867</span></a>  }
<a name="l868"><span class="linenum"> 868</span></a>  
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">/**</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment"> * Output a link to current blog.</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment"> *</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment"> * We need this function because if no Blog is currently active (some admin pages or site pages)</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment"> * then we'll go to the general home.</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment"> */</span>
<a name="l876"><span class="linenum"> 876</span></a>  function <a class="function" onClick="logFunction('blog_home_link')" href="../../_functions/blog_home_link.html" onMouseOver="funcPopup(event,'blog_home_link')">blog_home_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a> = '', <a class="var it7262" onMouseOver="hilite(7262)" onMouseOut="lolite()" onClick="logVariable('blog_text')" href="../../_variables/blog_text.html">$blog_text</a> = 'Blog', <a class="var it7263" onMouseOver="hilite(7263)" onMouseOut="lolite()" onClick="logVariable('home_text')" href="../../_variables/home_text.html">$home_text</a> = 'Home' )
<a name="l877"><span class="linenum"> 877</span></a>  {
<a name="l878"><span class="linenum"> 878</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>;
<a name="l879"><span class="linenum"> 879</span></a>  
<a name="l880"><span class="linenum"> 880</span></a>      if( !empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) )
<a name="l881"><span class="linenum"> 881</span></a>      {
<a name="l882"><span class="linenum"> 882</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../_variables/before.html">$before</a>.'&lt;a href=&quot;'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'url' ).'&quot;&gt;'.<a class="var it7262" onMouseOver="hilite(7262)" onMouseOut="lolite()" onClick="logVariable('blog_text')" href="../../_variables/blog_text.html">$blog_text</a>.'&lt;/a&gt;'.<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>;
<a name="l883"><span class="linenum"> 883</span></a>      }
<a name="l884"><span class="linenum"> 884</span></a>      elseif( !empty(<a class="var it7263" onMouseOver="hilite(7263)" onMouseOut="lolite()" onClick="logVariable('home_text')" href="../../_variables/home_text.html">$home_text</a>) )
<a name="l885"><span class="linenum"> 885</span></a>      {
<a name="l886"><span class="linenum"> 886</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../_variables/before.html">$before</a>.'&lt;a href=&quot;'.<a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>.'&quot;&gt;'.<a class="var it7263" onMouseOver="hilite(7263)" onMouseOut="lolite()" onClick="logVariable('home_text')" href="../../_variables/home_text.html">$home_text</a>.'&lt;/a&gt;'.<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>;
<a name="l887"><span class="linenum"> 887</span></a>      }
<a name="l888"><span class="linenum"> 888</span></a>  }
<a name="l889"><span class="linenum"> 889</span></a>  
<a name="l890"><span class="linenum"> 890</span></a>  
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">/**</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment"> * Get library url of JS or CSS file by file name or alias</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment"> *</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment"> * @param string File or Alias name</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment"> * @param boolean|string 'relative' or true (relative to &lt;base&gt;) or 'rsc_url' (relative to $rsc_url) or 'blog' (relative to current blog URL -- may be subdomain or custom domain)</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment"> * @param string 'js' or 'css' or 'build'</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment"> * @return string URL</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment"> * @param string version number to append at the end of requested url to avoid getting an old version from the cache</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment"> */</span>
<a name="l900"><span class="linenum"> 900</span></a>  function <a class="function" onClick="logFunction('get_require_url')" href="../../_functions/get_require_url.html" onMouseOver="funcPopup(event,'get_require_url')">get_require_url</a>( <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a>, <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url', <a class="var it7265" onMouseOver="hilite(7265)" onMouseOut="lolite()" onClick="logVariable('subfolder')" href="../../_variables/subfolder.html">$subfolder</a> = 'js', <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> = '#' )
<a name="l901"><span class="linenum"> 901</span></a>  {
<a name="l902"><span class="linenum"> 902</span></a>      global <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('library_local_urls')" href="../../_variables/library_local_urls.html">$library_local_urls</a>, <a class="var it4365" onMouseOver="hilite(4365)" onMouseOut="lolite()" onClick="logVariable('library_cdn_urls')" href="../../_variables/library_cdn_urls.html">$library_cdn_urls</a>, <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('use_cdns')" href="../../_variables/use_cdns.html">$use_cdns</a>, <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a>, <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>;
<a name="l903"><span class="linenum"> 903</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>, <a class="var it7266" onMouseOver="hilite(7266)" onMouseOut="lolite()" onClick="logVariable('assets_baseurl')" href="../../_variables/assets_baseurl.html">$assets_baseurl</a>;
<a name="l904"><span class="linenum"> 904</span></a>  
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment">    // Check if we have a public CDN we want to use for this library file:</span>
<a name="l906"><span class="linenum"> 906</span></a>      if( <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('use_cdns')" href="../../_variables/use_cdns.html">$use_cdns</a> &amp;&amp; ! empty( <a class="var it4365" onMouseOver="hilite(4365)" onMouseOut="lolite()" onClick="logVariable('library_cdn_urls')" href="../../_variables/library_cdn_urls.html">$library_cdn_urls</a>[ <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> ] ) )
<a name="l907"><span class="linenum"> 907</span></a>      { // Rewrite local urls with public CDN urls if they are defined in _advanced.php
<a name="l908"><span class="linenum"> 908</span></a>          <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('library_local_urls')" href="../../_variables/library_local_urls.html">$library_local_urls</a>[ <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> ] = <a class="var it4365" onMouseOver="hilite(4365)" onMouseOut="lolite()" onClick="logVariable('library_cdn_urls')" href="../../_variables/library_cdn_urls.html">$library_cdn_urls</a>[ <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> ];
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment">        // Don't append version for global CDN urls</span>
<a name="l910"><span class="linenum"> 910</span></a>          <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> = NULL;
<a name="l911"><span class="linenum"> 911</span></a>      }
<a name="l912"><span class="linenum"> 912</span></a>  
<a name="l913"><span class="linenum"> 913</span></a>      if( ! empty( <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('library_local_urls')" href="../../_variables/library_local_urls.html">$library_local_urls</a>[ <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> ] ) )
<a name="l914"><span class="linenum"> 914</span></a>      { // We are requesting an alias
<a name="l915"><span class="linenum"> 915</span></a>          if( <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a> &amp;&amp; ! empty( <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('library_local_urls')" href="../../_variables/library_local_urls.html">$library_local_urls</a>[ <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> ][1] ) )
<a name="l916"><span class="linenum"> 916</span></a>          { // Load JS file for debug mode (optional)
<a name="l917"><span class="linenum"> 917</span></a>              <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> = <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('library_local_urls')" href="../../_variables/library_local_urls.html">$library_local_urls</a>[ <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> ][1];
<a name="l918"><span class="linenum"> 918</span></a>          }
<a name="l919"><span class="linenum"> 919</span></a>          else
<a name="l920"><span class="linenum"> 920</span></a>          { // Load JS file for production mode
<a name="l921"><span class="linenum"> 921</span></a>              <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> = <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('library_local_urls')" href="../../_variables/library_local_urls.html">$library_local_urls</a>[ <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> ][0];
<a name="l922"><span class="linenum"> 922</span></a>          }
<a name="l923"><span class="linenum"> 923</span></a>  
<a name="l924"><span class="linenum"> 924</span></a>          if( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> === 'relative' || <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> === true )
<a name="l925"><span class="linenum"> 925</span></a>          { // Aliases cannot be relative to &lt;base&gt;, make it relative to <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>
<a name="l926"><span class="linenum"> 926</span></a>              <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url';
<a name="l927"><span class="linenum"> 927</span></a>          }
<a name="l928"><span class="linenum"> 928</span></a>      }
<a name="l929"><span class="linenum"> 929</span></a>  
<a name="l930"><span class="linenum"> 930</span></a>      if( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> === 'relative' || <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> === true )
<a name="l931"><span class="linenum"> 931</span></a>      { // Make the file relative to current page &lt;base&gt;:
<a name="l932"><span class="linenum"> 932</span></a>          <a class="var it7267" onMouseOver="hilite(7267)" onMouseOut="lolite()" onClick="logVariable('lib_url')" href="../../_variables/lib_url.html">$lib_url</a> = <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a>;
<a name="l933"><span class="linenum"> 933</span></a>      }
<a name="l934"><span class="linenum"> 934</span></a>      elseif( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('~^(https?:)?//~', <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a> ) )
<a name="l935"><span class="linenum"> 935</span></a>      { // It's already an absolute url, keep it as is:
<a name="l936"><span class="linenum"> 936</span></a>          <a class="var it7267" onMouseOver="hilite(7267)" onMouseOut="lolite()" onClick="logVariable('lib_url')" href="../../_variables/lib_url.html">$lib_url</a> = <a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a>;
<a name="l937"><span class="linenum"> 937</span></a>      }
<a name="l938"><span class="linenum"> 938</span></a>      elseif( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> === 'blog' &amp;&amp; ! empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) )
<a name="l939"><span class="linenum"> 939</span></a>      { // Get the file from <a class="var it4337" onMouseOver="hilite(4337)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../_variables/rsc_uri.html">$rsc_uri</a> relative to the current blog's <a class="function" onClick="logFunction('domain')" href="../../_functions/domain.html" onMouseOver="funcPopup(event,'domain')">domain</a> (may be a subdomain or a custom domain):
<a name="l940"><span class="linenum"> 940</span></a>          if( <a class="var it7266" onMouseOver="hilite(7266)" onMouseOut="lolite()" onClick="logVariable('assets_baseurl')" href="../../_variables/assets_baseurl.html">$assets_baseurl</a> !== <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a> )
<a name="l941"><span class="linenum"> 941</span></a>          { // We are using a specific domain, don't try to load from blog specific domain
<a name="l942"><span class="linenum"> 942</span></a>              <a class="var it7267" onMouseOver="hilite(7267)" onMouseOut="lolite()" onClick="logVariable('lib_url')" href="../../_variables/lib_url.html">$lib_url</a> = <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>.<a class="var it7265" onMouseOver="hilite(7265)" onMouseOut="lolite()" onClick="logVariable('subfolder')" href="../../_variables/subfolder.html">$subfolder</a>.'/'.<a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a>;
<a name="l943"><span class="linenum"> 943</span></a>          }
<a name="l944"><span class="linenum"> 944</span></a>          else
<a name="l945"><span class="linenum"> 945</span></a>          {
<a name="l946"><span class="linenum"> 946</span></a>              <a class="var it7267" onMouseOver="hilite(7267)" onMouseOut="lolite()" onClick="logVariable('lib_url')" href="../../_variables/lib_url.html">$lib_url</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_local_rsc_url')" href="../../_functions/get_local_rsc_url.html" onMouseOver="funcPopup(event,'get_local_rsc_url')">get_local_rsc_url</a>().<a class="var it7265" onMouseOver="hilite(7265)" onMouseOut="lolite()" onClick="logVariable('subfolder')" href="../../_variables/subfolder.html">$subfolder</a>.'/'.<a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a>;
<a name="l947"><span class="linenum"> 947</span></a>          }
<a name="l948"><span class="linenum"> 948</span></a>      }
<a name="l949"><span class="linenum"> 949</span></a>      else
<a name="l950"><span class="linenum"> 950</span></a>      { // Get the file from <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>:
<a name="l951"><span class="linenum"> 951</span></a>          <a class="var it7267" onMouseOver="hilite(7267)" onMouseOut="lolite()" onClick="logVariable('lib_url')" href="../../_variables/lib_url.html">$lib_url</a> = <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>.<a class="var it7265" onMouseOver="hilite(7265)" onMouseOut="lolite()" onClick="logVariable('subfolder')" href="../../_variables/subfolder.html">$subfolder</a>.'/'.<a class="var it7264" onMouseOver="hilite(7264)" onMouseOut="lolite()" onClick="logVariable('lib_file')" href="../../_variables/lib_file.html">$lib_file</a>;
<a name="l952"><span class="linenum"> 952</span></a>      }
<a name="l953"><span class="linenum"> 953</span></a>  
<a name="l954"><span class="linenum"> 954</span></a>      if( ! empty( <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> ) )
<a name="l955"><span class="linenum"> 955</span></a>      { // Be sure to get a fresh copy of this CSS file after application upgrades:
<a name="l956"><span class="linenum"> 956</span></a>          if( <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> == '#' )
<a name="l957"><span class="linenum"> 957</span></a>          {
<a name="l958"><span class="linenum"> 958</span></a>              global <a class="var it7268" onMouseOver="hilite(7268)" onMouseOut="lolite()" onClick="logVariable('app_version_long')" href="../../_variables/app_version_long.html">$app_version_long</a>;
<a name="l959"><span class="linenum"> 959</span></a>              <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> = <a class="var it7268" onMouseOver="hilite(7268)" onMouseOut="lolite()" onClick="logVariable('app_version_long')" href="../../_variables/app_version_long.html">$app_version_long</a>;
<a name="l960"><span class="linenum"> 960</span></a>          }
<a name="l961"><span class="linenum"> 961</span></a>          <a class="var it7267" onMouseOver="hilite(7267)" onMouseOut="lolite()" onClick="logVariable('lib_url')" href="../../_variables/lib_url.html">$lib_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it7267" onMouseOver="hilite(7267)" onMouseOut="lolite()" onClick="logVariable('lib_url')" href="../../_variables/lib_url.html">$lib_url</a>, 'v='.<a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> );
<a name="l962"><span class="linenum"> 962</span></a>      }
<a name="l963"><span class="linenum"> 963</span></a>  
<a name="l964"><span class="linenum"> 964</span></a>      return <a class="var it7267" onMouseOver="hilite(7267)" onMouseOut="lolite()" onClick="logVariable('lib_url')" href="../../_variables/lib_url.html">$lib_url</a>;
<a name="l965"><span class="linenum"> 965</span></a>  }
<a name="l966"><span class="linenum"> 966</span></a>  
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment">/**</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment"> * Memorize that a specific javascript file will be required by the current page.</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment"> * All requested files will be included in the page head only once (when headlines is called)</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment"> *</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment"> * Accepts absolute urls, filenames relative to the rsc/js directory and certain aliases, like 'jquery' and 'jquery_debug'</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment"> * If 'jquery' is used and $debug is set to true, the 'jquery_debug' is automatically swapped in.</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment"> * Any javascript added to the page is also added to the $required_js array, which is then checked to prevent adding the same code twice</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment"> *</span>
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment"> * @param string alias, url or filename (relative to rsc/js) for javascript file</span>
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment"> * @param boolean|string Is the file's path relative to the base path/url?</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment"> * @param boolean TRUE to add attribute &quot;async&quot; to load javascript asynchronously</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment"> * @param boolean TRUE to print script tag on the page, FALSE to store in array to print then inside &lt;head&gt;</span>
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment"> */</span>
<a name="l980"><span class="linenum"> 980</span></a>  function <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('js_file')" href="../../_variables/js_file.html">$js_file</a>, <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url', <a class="var it7270" onMouseOver="hilite(7270)" onMouseOut="lolite()" onClick="logVariable('async')" href="../../_variables/async.html">$async</a> = false, <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = false )
<a name="l981"><span class="linenum"> 981</span></a>  {
<a name="l982"><span class="linenum"> 982</span></a>      static <a class="var it615" onMouseOver="hilite(615)" onMouseOut="lolite()" onClick="logVariable('required_js')" href="../../_variables/required_js.html">$required_js</a>;
<a name="l983"><span class="linenum"> 983</span></a>      global <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a>;
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>      if( isset( <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a>[ <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('js_file')" href="../../_variables/js_file.html">$js_file</a> ] ) )
<a name="l986"><span class="linenum"> 986</span></a>      { // Don't require this file if it was dequeued before this request
<a name="l987"><span class="linenum"> 987</span></a>          return;
<a name="l988"><span class="linenum"> 988</span></a>      }
<a name="l989"><span class="linenum"> 989</span></a>  
<a name="l990"><span class="linenum"> 990</span></a>      if( <a class="function" onClick="logFunction('is_admin_page')" href="../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() &amp;&amp; ( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> == 'blog' ) )
<a name="l991"><span class="linenum"> 991</span></a>      { // Make sure we never use resource url relative to any blog url in case of an admin page ( important in case of multi-domain installations )
<a name="l992"><span class="linenum"> 992</span></a>          <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url';
<a name="l993"><span class="linenum"> 993</span></a>      }
<a name="l994"><span class="linenum"> 994</span></a>  
<a name="l995"><span class="linenum"> 995</span></a>      if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('js_file')" href="../../_variables/js_file.html">$js_file</a>, array( '#jqueryUI#', 'communication.js', 'functions.js' ) ) )
<a name="l996"><span class="linenum"> 996</span></a>      { // Dependency : ensure jQuery is loaded
<a name="l997"><span class="linenum"> 997</span></a>          <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, <a class="var it7270" onMouseOver="hilite(7270)" onMouseOut="lolite()" onClick="logVariable('async')" href="../../_variables/async.html">$async</a>, <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> );
<a name="l998"><span class="linenum"> 998</span></a>      }
<a name="l999"><span class="linenum"> 999</span></a>  
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">    // Get library url of JS file by alias name</span>
<a name="l1001"><span class="linenum">1001</span></a>      <a class="var it7272" onMouseOver="hilite(7272)" onMouseOut="lolite()" onClick="logVariable('js_url')" href="../../_variables/js_url.html">$js_url</a> = <a class="function" onClick="logFunction('get_require_url')" href="../../_functions/get_require_url.html" onMouseOver="funcPopup(event,'get_require_url')">get_require_url</a>( <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('js_file')" href="../../_variables/js_file.html">$js_file</a>, <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, 'js' );
<a name="l1002"><span class="linenum">1002</span></a>  
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment">    // Add to headlines, if not done already:</span>
<a name="l1004"><span class="linenum">1004</span></a>      if( empty( <a class="var it615" onMouseOver="hilite(615)" onMouseOut="lolite()" onClick="logVariable('required_js')" href="../../_variables/required_js.html">$required_js</a> ) || ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="var it7272" onMouseOver="hilite(7272)" onMouseOut="lolite()" onClick="logVariable('js_url')" href="../../_variables/js_url.html">$js_url</a> ), <a class="var it615" onMouseOver="hilite(615)" onMouseOut="lolite()" onClick="logVariable('required_js')" href="../../_variables/required_js.html">$required_js</a> ) )
<a name="l1005"><span class="linenum">1005</span></a>      {
<a name="l1006"><span class="linenum">1006</span></a>          <a class="var it615" onMouseOver="hilite(615)" onMouseOut="lolite()" onClick="logVariable('required_js')" href="../../_variables/required_js.html">$required_js</a>[] = <a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="var it7272" onMouseOver="hilite(7272)" onMouseOut="lolite()" onClick="logVariable('js_url')" href="../../_variables/js_url.html">$js_url</a> );
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>          <a class="var it7273" onMouseOver="hilite(7273)" onMouseOut="lolite()" onClick="logVariable('script_tag')" href="../../_variables/script_tag.html">$script_tag</a> = '&lt;script type=&quot;text/javascript&quot;';
<a name="l1009"><span class="linenum">1009</span></a>          <a class="var it7273" onMouseOver="hilite(7273)" onMouseOut="lolite()" onClick="logVariable('script_tag')" href="../../_variables/script_tag.html">$script_tag</a> .= <a class="var it7270" onMouseOver="hilite(7270)" onMouseOut="lolite()" onClick="logVariable('async')" href="../../_variables/async.html">$async</a> ? ' async' : '';
<a name="l1010"><span class="linenum">1010</span></a>          <a class="var it7273" onMouseOver="hilite(7273)" onMouseOut="lolite()" onClick="logVariable('script_tag')" href="../../_variables/script_tag.html">$script_tag</a> .= ' src=&quot;'.<a class="var it7272" onMouseOver="hilite(7272)" onMouseOut="lolite()" onClick="logVariable('js_url')" href="../../_variables/js_url.html">$js_url</a>.'&quot;&gt;';
<a name="l1011"><span class="linenum">1011</span></a>          <a class="var it7273" onMouseOver="hilite(7273)" onMouseOut="lolite()" onClick="logVariable('script_tag')" href="../../_variables/script_tag.html">$script_tag</a> .= '&lt;/script&gt;';
<a name="l1012"><span class="linenum">1012</span></a>  
<a name="l1013"><span class="linenum">1013</span></a>          if( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> )
<a name="l1014"><span class="linenum">1014</span></a>          { // Print script tag right here
<a name="l1015"><span class="linenum">1015</span></a>              echo <a class="var it7273" onMouseOver="hilite(7273)" onMouseOut="lolite()" onClick="logVariable('script_tag')" href="../../_variables/script_tag.html">$script_tag</a>;
<a name="l1016"><span class="linenum">1016</span></a>          }
<a name="l1017"><span class="linenum">1017</span></a>          else
<a name="l1018"><span class="linenum">1018</span></a>          { // Add script tag to &lt;head&gt;
<a name="l1019"><span class="linenum">1019</span></a>              <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>( <a class="var it7273" onMouseOver="hilite(7273)" onMouseOut="lolite()" onClick="logVariable('script_tag')" href="../../_variables/script_tag.html">$script_tag</a>, <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('js_file')" href="../../_variables/js_file.html">$js_file</a> );
<a name="l1020"><span class="linenum">1020</span></a>          }
<a name="l1021"><span class="linenum">1021</span></a>      }
<a name="l1022"><span class="linenum">1022</span></a>  
<a name="l1023"><span class="linenum">1023</span></a>      <span class="comment">/* Yura: Don't require this plugin when it is already concatenated in jquery.bundle.js</span>
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment">     * But we should don't forget it for CDN jQuery file and when js code uses deprecated things of jQuery</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">    if( $js_file == '#jquery#' )</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">    { // Dependency : The plugin restores deprecated features and behaviors so that older code will still run properly on jQuery 1.9 and later</span>
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment">        require_js( '#jquery_migrate#', $relative_to, $async, $output );</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment">    }</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment">     */</span>
<a name="l1030"><span class="linenum">1030</span></a>  }
<a name="l1031"><span class="linenum">1031</span></a>  
<a name="l1032"><span class="linenum">1032</span></a>  
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment">/**</span>
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment"> * Memorize that a specific css that file will be required by the current page.</span>
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment"> * All requested files will be included in the page head only once (when headlines is called)</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment"> *</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment"> * Accepts absolute urls, filenames relative to the rsc/css directory.</span>
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment"> * Set $relative_to_base to TRUE to prevent this function from adding on the rsc_path</span>
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment"> *</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment"> * @param string alias, url or filename (relative to rsc/css) for CSS file</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment"> * @param boolean|string 'relative' or true (relative to &lt;base&gt;) or 'rsc_url' (relative to $rsc_url) or 'blog' (relative to current blog URL -- may be subdomain or custom domain)</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment"> * @param string title.  The title for the link tag</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment"> * @param string media.  ie, 'print'</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment"> * @param string version number to append at the end of requested url to avoid getting an old version from the cache</span>
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment"> * @param boolean TRUE to print script tag on the page, FALSE to store in array to print then inside &lt;head&gt;</span>
<a name="l1046"><span class="linenum">1046</span></a>  <span class="comment"> */</span>
<a name="l1047"><span class="linenum">1047</span></a>  function <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( <a class="var it7274" onMouseOver="hilite(7274)" onMouseOut="lolite()" onClick="logVariable('css_file')" href="../../_variables/css_file.html">$css_file</a>, <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = NULL, <a class="var it4152" onMouseOver="hilite(4152)" onMouseOut="lolite()" onClick="logVariable('media')" href="../../_variables/media.html">$media</a> = NULL, <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> = '#', <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = false )
<a name="l1048"><span class="linenum">1048</span></a>  {
<a name="l1049"><span class="linenum">1049</span></a>      static <a class="var it616" onMouseOver="hilite(616)" onMouseOut="lolite()" onClick="logVariable('required_css')" href="../../_variables/required_css.html">$required_css</a>;
<a name="l1050"><span class="linenum">1050</span></a>      global <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a>;
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>      if( isset( <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a>[ <a class="var it7274" onMouseOver="hilite(7274)" onMouseOut="lolite()" onClick="logVariable('css_file')" href="../../_variables/css_file.html">$css_file</a> ] ) )
<a name="l1053"><span class="linenum">1053</span></a>      { // Don't require this file if it was dequeued before this request
<a name="l1054"><span class="linenum">1054</span></a>          return;
<a name="l1055"><span class="linenum">1055</span></a>      }
<a name="l1056"><span class="linenum">1056</span></a>  
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">    // Which subfolder do we want to use in case of absolute paths? (doesn't appy to 'relative')</span>
<a name="l1058"><span class="linenum">1058</span></a>      <a class="var it7265" onMouseOver="hilite(7265)" onMouseOut="lolite()" onClick="logVariable('subfolder')" href="../../_variables/subfolder.html">$subfolder</a> = 'css';
<a name="l1059"><span class="linenum">1059</span></a>      if( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> == 'rsc_url' || <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> == 'blog' )
<a name="l1060"><span class="linenum">1060</span></a>      {
<a name="l1061"><span class="linenum">1061</span></a>          if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '/\.(bundle|bmin|min)\.css$/', <a class="var it7274" onMouseOver="hilite(7274)" onMouseOut="lolite()" onClick="logVariable('css_file')" href="../../_variables/css_file.html">$css_file</a> ) )
<a name="l1062"><span class="linenum">1062</span></a>          {
<a name="l1063"><span class="linenum">1063</span></a>              <a class="var it7265" onMouseOver="hilite(7265)" onMouseOut="lolite()" onClick="logVariable('subfolder')" href="../../_variables/subfolder.html">$subfolder</a> = 'build';
<a name="l1064"><span class="linenum">1064</span></a>          }
<a name="l1065"><span class="linenum">1065</span></a>      }
<a name="l1066"><span class="linenum">1066</span></a>  
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">    // Get library url of CSS file by alias name</span>
<a name="l1068"><span class="linenum">1068</span></a>      <a class="var it7275" onMouseOver="hilite(7275)" onMouseOut="lolite()" onClick="logVariable('css_url')" href="../../_variables/css_url.html">$css_url</a> = <a class="function" onClick="logFunction('get_require_url')" href="../../_functions/get_require_url.html" onMouseOver="funcPopup(event,'get_require_url')">get_require_url</a>( <a class="var it7274" onMouseOver="hilite(7274)" onMouseOut="lolite()" onClick="logVariable('css_file')" href="../../_variables/css_file.html">$css_file</a>, <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, <a class="var it7265" onMouseOver="hilite(7265)" onMouseOut="lolite()" onClick="logVariable('subfolder')" href="../../_variables/subfolder.html">$subfolder</a>, <a class="var it814" onMouseOver="hilite(814)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> );
<a name="l1069"><span class="linenum">1069</span></a>  
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">    // Add to headlines, if not done already:</span>
<a name="l1071"><span class="linenum">1071</span></a>      if( empty( <a class="var it616" onMouseOver="hilite(616)" onMouseOut="lolite()" onClick="logVariable('required_css')" href="../../_variables/required_css.html">$required_css</a> ) || ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="var it7275" onMouseOver="hilite(7275)" onMouseOut="lolite()" onClick="logVariable('css_url')" href="../../_variables/css_url.html">$css_url</a> ), <a class="var it616" onMouseOver="hilite(616)" onMouseOut="lolite()" onClick="logVariable('required_css')" href="../../_variables/required_css.html">$required_css</a> ) )
<a name="l1072"><span class="linenum">1072</span></a>      {
<a name="l1073"><span class="linenum">1073</span></a>          <a class="var it616" onMouseOver="hilite(616)" onMouseOut="lolite()" onClick="logVariable('required_css')" href="../../_variables/required_css.html">$required_css</a>[] = <a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>( <a class="var it7275" onMouseOver="hilite(7275)" onMouseOut="lolite()" onClick="logVariable('css_url')" href="../../_variables/css_url.html">$css_url</a> );
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>          <a class="var it7276" onMouseOver="hilite(7276)" onMouseOut="lolite()" onClick="logVariable('stylesheet_tag')" href="../../_variables/stylesheet_tag.html">$stylesheet_tag</a> = '&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot;';
<a name="l1076"><span class="linenum">1076</span></a>          <a class="var it7276" onMouseOver="hilite(7276)" onMouseOut="lolite()" onClick="logVariable('stylesheet_tag')" href="../../_variables/stylesheet_tag.html">$stylesheet_tag</a> .= empty( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> ) ? '' : ' title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>.'&quot;';
<a name="l1077"><span class="linenum">1077</span></a>          <a class="var it7276" onMouseOver="hilite(7276)" onMouseOut="lolite()" onClick="logVariable('stylesheet_tag')" href="../../_variables/stylesheet_tag.html">$stylesheet_tag</a> .= empty( <a class="var it4152" onMouseOver="hilite(4152)" onMouseOut="lolite()" onClick="logVariable('media')" href="../../_variables/media.html">$media</a> ) ? '' : ' media=&quot;'.<a class="var it4152" onMouseOver="hilite(4152)" onMouseOut="lolite()" onClick="logVariable('media')" href="../../_variables/media.html">$media</a>.'&quot;';
<a name="l1078"><span class="linenum">1078</span></a>          <a class="var it7276" onMouseOver="hilite(7276)" onMouseOut="lolite()" onClick="logVariable('stylesheet_tag')" href="../../_variables/stylesheet_tag.html">$stylesheet_tag</a> .= ' href=&quot;'.<a class="var it7275" onMouseOver="hilite(7275)" onMouseOut="lolite()" onClick="logVariable('css_url')" href="../../_variables/css_url.html">$css_url</a>.'&quot; /&gt;';
<a name="l1079"><span class="linenum">1079</span></a>  
<a name="l1080"><span class="linenum">1080</span></a>          if( <a class="var it62" onMouseOver="hilite(62)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> )
<a name="l1081"><span class="linenum">1081</span></a>          { // Print stylesheet tag right here
<a name="l1082"><span class="linenum">1082</span></a>              echo <a class="var it7276" onMouseOver="hilite(7276)" onMouseOut="lolite()" onClick="logVariable('stylesheet_tag')" href="../../_variables/stylesheet_tag.html">$stylesheet_tag</a>;
<a name="l1083"><span class="linenum">1083</span></a>          }
<a name="l1084"><span class="linenum">1084</span></a>          else
<a name="l1085"><span class="linenum">1085</span></a>          { // Add stylesheet tag to &lt;head&gt;
<a name="l1086"><span class="linenum">1086</span></a>              <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>( <a class="var it7276" onMouseOver="hilite(7276)" onMouseOut="lolite()" onClick="logVariable('stylesheet_tag')" href="../../_variables/stylesheet_tag.html">$stylesheet_tag</a>, <a class="var it7274" onMouseOver="hilite(7274)" onMouseOut="lolite()" onClick="logVariable('css_file')" href="../../_variables/css_file.html">$css_file</a> );
<a name="l1087"><span class="linenum">1087</span></a>          }
<a name="l1088"><span class="linenum">1088</span></a>      }
<a name="l1089"><span class="linenum">1089</span></a>  }
<a name="l1090"><span class="linenum">1090</span></a>  
<a name="l1091"><span class="linenum">1091</span></a>  
<a name="l1092"><span class="linenum">1092</span></a>  <span class="comment">/**</span>
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment"> * Dequeue a file from $headlines array by file name or alias</span>
<a name="l1094"><span class="linenum">1094</span></a>  <span class="comment"> *</span>
<a name="l1095"><span class="linenum">1095</span></a>  <span class="comment"> * @param string alias, url or filename (relative to rsc/js) for javascript file</span>
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment"> */</span>
<a name="l1097"><span class="linenum">1097</span></a>  function <a class="function" onClick="logFunction('dequeue')" href="../../_functions/dequeue.html" onMouseOver="funcPopup(event,'dequeue')">dequeue</a>( <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../_variables/file_name.html">$file_name</a> )
<a name="l1098"><span class="linenum">1098</span></a>  {
<a name="l1099"><span class="linenum">1099</span></a>      global <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a>, <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a>;
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>      if( ! <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a> ) )
<a name="l1102"><span class="linenum">1102</span></a>      { // Initialize array firs time
<a name="l1103"><span class="linenum">1103</span></a>          <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a> = array();
<a name="l1104"><span class="linenum">1104</span></a>      }
<a name="l1105"><span class="linenum">1105</span></a>  
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment">    // Store each dequeued file in order to don't require this next time</span>
<a name="l1107"><span class="linenum">1107</span></a>      <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a>[ <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../_variables/file_name.html">$file_name</a> ] = true;
<a name="l1108"><span class="linenum">1108</span></a>  
<a name="l1109"><span class="linenum">1109</span></a>      if( isset( <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a>[ <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../_variables/file_name.html">$file_name</a> ] ) )
<a name="l1110"><span class="linenum">1110</span></a>      { // Dequeue this file
<a name="l1111"><span class="linenum">1111</span></a>          unset( <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a>[ <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../_variables/file_name.html">$file_name</a> ] );
<a name="l1112"><span class="linenum">1112</span></a>      }
<a name="l1113"><span class="linenum">1113</span></a>  }
<a name="l1114"><span class="linenum">1114</span></a>  
<a name="l1115"><span class="linenum">1115</span></a>  
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment">/**</span>
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment"> * Memorize that a specific js helper will be required by the current page.</span>
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment"> * This allows to require JS + SS + do init.</span>
<a name="l1119"><span class="linenum">1119</span></a>  <span class="comment"> *</span>
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment"> * All requested helpers will be included in the page head only once (when headlines is called)</span>
<a name="l1121"><span class="linenum">1121</span></a>  <span class="comment"> * Requested helpers should add their required translation strings and any other settings</span>
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment"> *</span>
<a name="l1123"><span class="linenum">1123</span></a>  <span class="comment"> * @param string helper, name of the required helper</span>
<a name="l1124"><span class="linenum">1124</span></a>  <span class="comment"> */</span>
<a name="l1125"><span class="linenum">1125</span></a>  function <a class="function" onClick="logFunction('require_js_helper')" href="../../_functions/require_js_helper.html" onMouseOver="funcPopup(event,'require_js_helper')">require_js_helper</a>( <a class="var it7277" onMouseOver="hilite(7277)" onMouseOut="lolite()" onClick="logVariable('helper')" href="../../_variables/helper.html">$helper</a> = '', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l1126"><span class="linenum">1126</span></a>  {
<a name="l1127"><span class="linenum">1127</span></a>      static <a class="var it7278" onMouseOver="hilite(7278)" onMouseOut="lolite()" onClick="logVariable('helpers')" href="../../_variables/helpers.html">$helpers</a>;
<a name="l1128"><span class="linenum">1128</span></a>  
<a name="l1129"><span class="linenum">1129</span></a>      if( empty( <a class="var it7278" onMouseOver="hilite(7278)" onMouseOut="lolite()" onClick="logVariable('helpers')" href="../../_variables/helpers.html">$helpers</a> ) || !<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it7277" onMouseOver="hilite(7277)" onMouseOut="lolite()" onClick="logVariable('helper')" href="../../_variables/helper.html">$helper</a>, <a class="var it7278" onMouseOver="hilite(7278)" onMouseOut="lolite()" onClick="logVariable('helpers')" href="../../_variables/helpers.html">$helpers</a> ) )
<a name="l1130"><span class="linenum">1130</span></a>      { // Helper not already added, add the helper:
<a name="l1131"><span class="linenum">1131</span></a>  
<a name="l1132"><span class="linenum">1132</span></a>          switch( <a class="var it7277" onMouseOver="hilite(7277)" onMouseOut="lolite()" onClick="logVariable('helper')" href="../../_variables/helper.html">$helper</a> )
<a name="l1133"><span class="linenum">1133</span></a>          {
<a name="l1134"><span class="linenum">1134</span></a>              case 'helper' :
<a name="l1135"><span class="linenum">1135</span></a>  <span class="comment">                // main helper object required</span>
<a name="l1136"><span class="linenum">1136</span></a>                  global <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a>;
<a name="l1137"><span class="linenum">1137</span></a>                  <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> ); <span class="comment">// dependency</span>
<a name="l1138"><span class="linenum">1138</span></a>                  <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'helper.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1139"><span class="linenum">1139</span></a>                  <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>('jQuery(document).ready(function()
<a name="l1140"><span class="linenum">1140</span></a>                  {
<a name="l1141"><span class="linenum">1141</span></a>                      b2evoHelper.<a class="function" onClick="logFunction('Init')" href="../../_functions/init.html" onMouseOver="funcPopup(event,'init')">Init</a>({
<a name="l1142"><span class="linenum">1142</span></a>                          debug:'.( <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a> ? 'true' : 'false' ).'
<a name="l1143"><span class="linenum">1143</span></a>                      });
<a name="l1144"><span class="linenum">1144</span></a>                  });');
<a name="l1145"><span class="linenum">1145</span></a>                  break;
<a name="l1146"><span class="linenum">1146</span></a>  
<a name="l1147"><span class="linenum">1147</span></a>              case 'communications' :
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">                // communications object required</span>
<a name="l1149"><span class="linenum">1149</span></a>                  <a class="function" onClick="logFunction('require_js_helper')" href="../../_functions/require_js_helper.html" onMouseOver="funcPopup(event,'require_js_helper')">require_js_helper</a>('helper', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> ); <span class="comment">// dependency</span>
<a name="l1150"><span class="linenum">1150</span></a>  
<a name="l1151"><span class="linenum">1151</span></a>                  global <a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../_variables/dispatcher.html">$dispatcher</a>;
<a name="l1152"><span class="linenum">1152</span></a>                  <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'communication.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1153"><span class="linenum">1153</span></a>                  <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>('jQuery(document).ready(function()
<a name="l1154"><span class="linenum">1154</span></a>                  {
<a name="l1155"><span class="linenum">1155</span></a>                      b2evoCommunications.<a class="function" onClick="logFunction('Init')" href="../../_functions/init.html" onMouseOver="funcPopup(event,'init')">Init</a>({
<a name="l1156"><span class="linenum">1156</span></a>                          dispatcher:&quot;'.<a class="var it147" onMouseOver="hilite(147)" onMouseOut="lolite()" onClick="logVariable('dispatcher')" href="../../_variables/dispatcher.html">$dispatcher</a>.'&quot;
<a name="l1157"><span class="linenum">1157</span></a>                      });
<a name="l1158"><span class="linenum">1158</span></a>                  });' );
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment">                // add translation strings</span>
<a name="l1160"><span class="linenum">1160</span></a>                  <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Update cancelled', NULL, array( 'for_helper' =&gt; true ) );
<a name="l1161"><span class="linenum">1161</span></a>                  <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Update paused', NULL, array( 'for_helper' =&gt; true ) );
<a name="l1162"><span class="linenum">1162</span></a>                  <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Changes pending', NULL, array( 'for_helper' =&gt; true ) );
<a name="l1163"><span class="linenum">1163</span></a>                  <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Saving changes', NULL, array( 'for_helper' =&gt; true ) );
<a name="l1164"><span class="linenum">1164</span></a>                  break;
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>              case 'colorbox':
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment">                // Colorbox: a lightweight Lightbox alternative -- allows zooming on images and slideshows in groups of images</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment">                // Added by fplanque - (MIT License) - http://colorpowered.com/colorbox/</span>
<a name="l1169"><span class="linenum">1169</span></a>  
<a name="l1170"><span class="linenum">1170</span></a>                  global <a class="var it2598" onMouseOver="hilite(2598)" onMouseOut="lolite()" onClick="logVariable('b2evo_icons_type')" href="../../_variables/b2evo_icons_type.html">$b2evo_icons_type</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>;
<a name="l1171"><span class="linenum">1171</span></a>                  <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('blog_param')" href="../../_variables/blog_param.html">$blog_param</a> = empty( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> ) ? '' : '&amp;blog='.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>;
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">                // Colorbox params to translate the strings:</span>
<a name="l1173"><span class="linenum">1173</span></a>                  <a class="var it7279" onMouseOver="hilite(7279)" onMouseOut="lolite()" onClick="logVariable('colorbox_strings_params')" href="../../_variables/colorbox_strings_params.html">$colorbox_strings_params</a> = 'current: &quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('image {current} of {total}').'&quot;,
<a name="l1174"><span class="linenum">1174</span></a>                      previous: &quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Previous').'&quot;,
<a name="l1175"><span class="linenum">1175</span></a>                      next: &quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Next').'&quot;,
<a name="l1176"><span class="linenum">1176</span></a>                      close: &quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Close').'&quot;,
<a name="l1177"><span class="linenum">1177</span></a>                      openNewWindowText: &quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Open in a new window').'&quot;,
<a name="l1178"><span class="linenum">1178</span></a>                      slideshowStart: &quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Start slideshow').'&quot;,
<a name="l1179"><span class="linenum">1179</span></a>                      slideshowStop: &quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Stop slideshow').'&quot;,';
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment">                // Colorbox params to display a voting panel:</span>
<a name="l1181"><span class="linenum">1181</span></a>                  <a class="var it7280" onMouseOver="hilite(7280)" onMouseOut="lolite()" onClick="logVariable('colorbox_voting_params')" href="../../_variables/colorbox_voting_params.html">$colorbox_voting_params</a> = '{'.<a class="var it7279" onMouseOver="hilite(7279)" onMouseOut="lolite()" onClick="logVariable('colorbox_strings_params')" href="../../_variables/colorbox_strings_params.html">$colorbox_strings_params</a>.'
<a name="l1182"><span class="linenum">1182</span></a>                      displayVoting: true,
<a name="l1183"><span class="linenum">1183</span></a>                      votingUrl: &quot;'.<a class="function" onClick="logFunction('get_secure_htsrv_url')" href="../../_functions/get_secure_htsrv_url.html" onMouseOver="funcPopup(event,'get_secure_htsrv_url')">get_secure_htsrv_url</a>().'anon_async.php?action=voting&amp;vote_type=link&amp;b2evo_icons_type='.<a class="var it2598" onMouseOver="hilite(2598)" onMouseOut="lolite()" onClick="logVariable('b2evo_icons_type')" href="../../_variables/b2evo_icons_type.html">$b2evo_icons_type</a>.<a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('blog_param')" href="../../_variables/blog_param.html">$blog_param</a>.'&quot;,
<a name="l1184"><span class="linenum">1184</span></a>                      minWidth: 305}';
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">                // Colorbox params without voting panel:</span>
<a name="l1186"><span class="linenum">1186</span></a>                  <a class="var it7281" onMouseOver="hilite(7281)" onMouseOut="lolite()" onClick="logVariable('colorbox_no_voting_params')" href="../../_variables/colorbox_no_voting_params.html">$colorbox_no_voting_params</a> = '{'.<a class="var it7279" onMouseOver="hilite(7279)" onMouseOut="lolite()" onClick="logVariable('colorbox_strings_params')" href="../../_variables/colorbox_strings_params.html">$colorbox_strings_params</a>.'
<a name="l1187"><span class="linenum">1187</span></a>                      minWidth: 255}';
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment">                // Initialize js variables b2evo_colorbox_params* that are used in async loaded colorbox file</span>
<a name="l1190"><span class="linenum">1190</span></a>                  if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1191"><span class="linenum">1191</span></a>                  { // User is logged in
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment">                    // All unknown images have a voting panel</span>
<a name="l1193"><span class="linenum">1193</span></a>                      <a class="var it7282" onMouseOver="hilite(7282)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_other')" href="../../_variables/colorbox_params_other.html">$colorbox_params_other</a> = 'var b2evo_colorbox_params_other = '.<a class="var it7280" onMouseOver="hilite(7280)" onMouseOut="lolite()" onClick="logVariable('colorbox_voting_params')" href="../../_variables/colorbox_voting_params.html">$colorbox_voting_params</a>;
<a name="l1194"><span class="linenum">1194</span></a>                      if( <a class="function" onClick="logFunction('is_admin_page')" href="../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l1195"><span class="linenum">1195</span></a>                      { // Display a voting panel for all images in backoffice
<a name="l1196"><span class="linenum">1196</span></a>                          <a class="var it7283" onMouseOver="hilite(7283)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_post')" href="../../_variables/colorbox_params_post.html">$colorbox_params_post</a> = 'var b2evo_colorbox_params_post = '.<a class="var it7280" onMouseOver="hilite(7280)" onMouseOut="lolite()" onClick="logVariable('colorbox_voting_params')" href="../../_variables/colorbox_voting_params.html">$colorbox_voting_params</a>;
<a name="l1197"><span class="linenum">1197</span></a>                          <a class="var it7284" onMouseOver="hilite(7284)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_cmnt')" href="../../_variables/colorbox_params_cmnt.html">$colorbox_params_cmnt</a> = 'var b2evo_colorbox_params_cmnt = '.<a class="var it7280" onMouseOver="hilite(7280)" onMouseOut="lolite()" onClick="logVariable('colorbox_voting_params')" href="../../_variables/colorbox_voting_params.html">$colorbox_voting_params</a>;
<a name="l1198"><span class="linenum">1198</span></a>                          <a class="var it7285" onMouseOver="hilite(7285)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_user')" href="../../_variables/colorbox_params_user.html">$colorbox_params_user</a> = 'var b2evo_colorbox_params_user = '.<a class="var it7280" onMouseOver="hilite(7280)" onMouseOut="lolite()" onClick="logVariable('colorbox_voting_params')" href="../../_variables/colorbox_voting_params.html">$colorbox_voting_params</a>;
<a name="l1199"><span class="linenum">1199</span></a>                      }
<a name="l1200"><span class="linenum">1200</span></a>                      else
<a name="l1201"><span class="linenum">1201</span></a>                      { // Display a voting panel depending on skin settings
<a name="l1202"><span class="linenum">1202</span></a>                          global <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>;
<a name="l1203"><span class="linenum">1203</span></a>                          if( ! empty( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> ) )
<a name="l1204"><span class="linenum">1204</span></a>                          {
<a name="l1205"><span class="linenum">1205</span></a>                              <a class="var it7283" onMouseOver="hilite(7283)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_post')" href="../../_variables/colorbox_params_post.html">$colorbox_params_post</a> = 'var b2evo_colorbox_params_post = '.( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'colorbox_vote_post' ) ? <a class="var it7280" onMouseOver="hilite(7280)" onMouseOut="lolite()" onClick="logVariable('colorbox_voting_params')" href="../../_variables/colorbox_voting_params.html">$colorbox_voting_params</a> : <a class="var it7281" onMouseOver="hilite(7281)" onMouseOut="lolite()" onClick="logVariable('colorbox_no_voting_params')" href="../../_variables/colorbox_no_voting_params.html">$colorbox_no_voting_params</a> );
<a name="l1206"><span class="linenum">1206</span></a>                              <a class="var it7284" onMouseOver="hilite(7284)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_cmnt')" href="../../_variables/colorbox_params_cmnt.html">$colorbox_params_cmnt</a> = 'var b2evo_colorbox_params_cmnt = '.( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'colorbox_vote_comment' ) ? <a class="var it7280" onMouseOver="hilite(7280)" onMouseOut="lolite()" onClick="logVariable('colorbox_voting_params')" href="../../_variables/colorbox_voting_params.html">$colorbox_voting_params</a> : <a class="var it7281" onMouseOver="hilite(7281)" onMouseOut="lolite()" onClick="logVariable('colorbox_no_voting_params')" href="../../_variables/colorbox_no_voting_params.html">$colorbox_no_voting_params</a> );
<a name="l1207"><span class="linenum">1207</span></a>                              <a class="var it7285" onMouseOver="hilite(7285)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_user')" href="../../_variables/colorbox_params_user.html">$colorbox_params_user</a> = 'var b2evo_colorbox_params_user = '.( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'colorbox_vote_user' ) ? <a class="var it7280" onMouseOver="hilite(7280)" onMouseOut="lolite()" onClick="logVariable('colorbox_voting_params')" href="../../_variables/colorbox_voting_params.html">$colorbox_voting_params</a> : <a class="var it7281" onMouseOver="hilite(7281)" onMouseOut="lolite()" onClick="logVariable('colorbox_no_voting_params')" href="../../_variables/colorbox_no_voting_params.html">$colorbox_no_voting_params</a> );
<a name="l1208"><span class="linenum">1208</span></a>                          }
<a name="l1209"><span class="linenum">1209</span></a>                      }
<a name="l1210"><span class="linenum">1210</span></a>                  }
<a name="l1211"><span class="linenum">1211</span></a>                  if( ! isset( <a class="var it7283" onMouseOver="hilite(7283)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_post')" href="../../_variables/colorbox_params_post.html">$colorbox_params_post</a> ) )
<a name="l1212"><span class="linenum">1212</span></a>                  { // Don't display a voting panel for all images if user is NOT logged in OR for case when <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> is not defined
<a name="l1213"><span class="linenum">1213</span></a>                      <a class="var it7282" onMouseOver="hilite(7282)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_other')" href="../../_variables/colorbox_params_other.html">$colorbox_params_other</a> = 'var b2evo_colorbox_params_other = '.<a class="var it7281" onMouseOver="hilite(7281)" onMouseOut="lolite()" onClick="logVariable('colorbox_no_voting_params')" href="../../_variables/colorbox_no_voting_params.html">$colorbox_no_voting_params</a>;
<a name="l1214"><span class="linenum">1214</span></a>                      <a class="var it7283" onMouseOver="hilite(7283)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_post')" href="../../_variables/colorbox_params_post.html">$colorbox_params_post</a> = 'var b2evo_colorbox_params_post = '.<a class="var it7281" onMouseOver="hilite(7281)" onMouseOut="lolite()" onClick="logVariable('colorbox_no_voting_params')" href="../../_variables/colorbox_no_voting_params.html">$colorbox_no_voting_params</a>;
<a name="l1215"><span class="linenum">1215</span></a>                      <a class="var it7284" onMouseOver="hilite(7284)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_cmnt')" href="../../_variables/colorbox_params_cmnt.html">$colorbox_params_cmnt</a> = 'var b2evo_colorbox_params_cmnt = '.<a class="var it7281" onMouseOver="hilite(7281)" onMouseOut="lolite()" onClick="logVariable('colorbox_no_voting_params')" href="../../_variables/colorbox_no_voting_params.html">$colorbox_no_voting_params</a>;
<a name="l1216"><span class="linenum">1216</span></a>                      <a class="var it7285" onMouseOver="hilite(7285)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_user')" href="../../_variables/colorbox_params_user.html">$colorbox_params_user</a> = 'var b2evo_colorbox_params_user = '.<a class="var it7281" onMouseOver="hilite(7281)" onMouseOut="lolite()" onClick="logVariable('colorbox_no_voting_params')" href="../../_variables/colorbox_no_voting_params.html">$colorbox_no_voting_params</a>;
<a name="l1217"><span class="linenum">1217</span></a>                  }
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>                  <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment">                // Initialize the colorbox settings:</span>
<a name="l1221"><span class="linenum">1221</span></a>                  <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>(
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment">                    // General settings:</span>
<a name="l1223"><span class="linenum">1223</span></a>                      'var b2evo_colorbox_params = {
<a name="l1224"><span class="linenum">1224</span></a>                          maxWidth: jQuery( window ).width() &gt; 480 ? &quot;95%&quot; : &quot;100%&quot;,
<a name="l1225"><span class="linenum">1225</span></a>                          maxHeight: jQuery( window ).height() &gt; 480 ? &quot;90%&quot; : &quot;100%&quot;,
<a name="l1226"><span class="linenum">1226</span></a>                          slideshow: true,
<a name="l1227"><span class="linenum">1227</span></a>                          slideshowAuto: false
<a name="l1228"><span class="linenum">1228</span></a>                      };
<a name="l1229"><span class="linenum">1229</span></a>                      '// For post images
<a name="l1230"><span class="linenum">1230</span></a>                      .<a class="var it7283" onMouseOver="hilite(7283)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_post')" href="../../_variables/colorbox_params_post.html">$colorbox_params_post</a>.';
<a name="l1231"><span class="linenum">1231</span></a>                      b2evo_colorbox_params_post = jQuery.<a class="function" onClick="logFunction('extend')" href="../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, b2evo_colorbox_params, b2evo_colorbox_params_post );
<a name="l1232"><span class="linenum">1232</span></a>                      '// For comment images
<a name="l1233"><span class="linenum">1233</span></a>                      .<a class="var it7284" onMouseOver="hilite(7284)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_cmnt')" href="../../_variables/colorbox_params_cmnt.html">$colorbox_params_cmnt</a>.';
<a name="l1234"><span class="linenum">1234</span></a>                      b2evo_colorbox_params_cmnt = jQuery.<a class="function" onClick="logFunction('extend')" href="../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, b2evo_colorbox_params, b2evo_colorbox_params_cmnt );
<a name="l1235"><span class="linenum">1235</span></a>                      '// For user images
<a name="l1236"><span class="linenum">1236</span></a>                      .<a class="var it7285" onMouseOver="hilite(7285)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_user')" href="../../_variables/colorbox_params_user.html">$colorbox_params_user</a>.';
<a name="l1237"><span class="linenum">1237</span></a>                      b2evo_colorbox_params_user = jQuery.<a class="function" onClick="logFunction('extend')" href="../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, b2evo_colorbox_params, b2evo_colorbox_params_user );
<a name="l1238"><span class="linenum">1238</span></a>                      '// For all other images
<a name="l1239"><span class="linenum">1239</span></a>                      .<a class="var it7282" onMouseOver="hilite(7282)" onMouseOut="lolite()" onClick="logVariable('colorbox_params_other')" href="../../_variables/colorbox_params_other.html">$colorbox_params_other</a>.';
<a name="l1240"><span class="linenum">1240</span></a>                      b2evo_colorbox_params = jQuery.<a class="function" onClick="logFunction('extend')" href="../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>( {}, b2evo_colorbox_params, b2evo_colorbox_params_other );' );
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment">                // TODO: translation strings for colorbox buttons</span>
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>                  <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'build/colorbox.bmin.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, true );
<a name="l1244"><span class="linenum">1244</span></a>                  <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'colorbox/colorbox.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1245"><span class="linenum">1245</span></a>                  break;
<a name="l1246"><span class="linenum">1246</span></a>          }
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment">        // add to list of loaded helpers</span>
<a name="l1248"><span class="linenum">1248</span></a>          <a class="var it7278" onMouseOver="hilite(7278)" onMouseOut="lolite()" onClick="logVariable('helpers')" href="../../_variables/helpers.html">$helpers</a>[] = <a class="var it7277" onMouseOver="hilite(7277)" onMouseOut="lolite()" onClick="logVariable('helper')" href="../../_variables/helper.html">$helper</a>;
<a name="l1249"><span class="linenum">1249</span></a>      }
<a name="l1250"><span class="linenum">1250</span></a>  }
<a name="l1251"><span class="linenum">1251</span></a>  
<a name="l1252"><span class="linenum">1252</span></a>  <span class="comment">/**</span>
<a name="l1253"><span class="linenum">1253</span></a>  <span class="comment"> * Memorize that a specific translation will be required by the current page.</span>
<a name="l1254"><span class="linenum">1254</span></a>  <span class="comment"> * All requested translations will be included in the page body only once (when footerlines is called)</span>
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment"> *</span>
<a name="l1256"><span class="linenum">1256</span></a>  <span class="comment"> * @param string string, untranslated string</span>
<a name="l1257"><span class="linenum">1257</span></a>  <span class="comment"> * @param string translation, translated string</span>
<a name="l1258"><span class="linenum">1258</span></a>  <span class="comment"> */</span>
<a name="l1259"><span class="linenum">1259</span></a>  function <a class="function" onClick="logFunction('add_js_translation')" href="../../_functions/add_js_translation.html" onMouseOver="funcPopup(event,'add_js_translation')">add_js_translation</a>( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>, <a class="var it7286" onMouseOver="hilite(7286)" onMouseOut="lolite()" onClick="logVariable('translation')" href="../../_variables/translation.html">$translation</a> )
<a name="l1260"><span class="linenum">1260</span></a>  {
<a name="l1261"><span class="linenum">1261</span></a>      global <a class="var it7287" onMouseOver="hilite(7287)" onMouseOut="lolite()" onClick="logVariable('js_translations')" href="../../_variables/js_translations.html">$js_translations</a>;
<a name="l1262"><span class="linenum">1262</span></a>      if( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a> != <a class="var it7286" onMouseOver="hilite(7286)" onMouseOut="lolite()" onClick="logVariable('translation')" href="../../_variables/translation.html">$translation</a> )
<a name="l1263"><span class="linenum">1263</span></a>      { // it's translated
<a name="l1264"><span class="linenum">1264</span></a>          <a class="var it7287" onMouseOver="hilite(7287)" onMouseOut="lolite()" onClick="logVariable('js_translations')" href="../../_variables/js_translations.html">$js_translations</a>[ <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a> ] = <a class="var it7286" onMouseOver="hilite(7286)" onMouseOut="lolite()" onClick="logVariable('translation')" href="../../_variables/translation.html">$translation</a>;
<a name="l1265"><span class="linenum">1265</span></a>      }
<a name="l1266"><span class="linenum">1266</span></a>  }
<a name="l1267"><span class="linenum">1267</span></a>  
<a name="l1268"><span class="linenum">1268</span></a>  
<a name="l1269"><span class="linenum">1269</span></a>  <span class="comment">/**</span>
<a name="l1270"><span class="linenum">1270</span></a>  <span class="comment"> * Add a headline, which then gets output in the HTML HEAD section.</span>
<a name="l1271"><span class="linenum">1271</span></a>  <span class="comment"> * If you want to include CSS or JavaScript files, please use</span>
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment"> * {@link require_css()} and {@link require_js()} instead.</span>
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment"> * This avoids duplicates and allows caching/concatenating those files</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment"> * later (not implemented yet)</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment"> *</span>
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment"> * @param string HTML tag like &lt;script&gt;&lt;/script&gt; or &lt;link /&gt;</span>
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment"> * @param string File name (used to index)</span>
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment"> */</span>
<a name="l1279"><span class="linenum">1279</span></a>  function <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>( <a class="var it7288" onMouseOver="hilite(7288)" onMouseOut="lolite()" onClick="logVariable('headline')" href="../../_variables/headline.html">$headline</a>, <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../_variables/file_name.html">$file_name</a> = NULL )
<a name="l1280"><span class="linenum">1280</span></a>  {
<a name="l1281"><span class="linenum">1281</span></a>      global <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a>, <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a>;
<a name="l1282"><span class="linenum">1282</span></a>  
<a name="l1283"><span class="linenum">1283</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../_variables/file_name.html">$file_name</a> ) )
<a name="l1284"><span class="linenum">1284</span></a>      { // Use auto index if file name is not defined
<a name="l1285"><span class="linenum">1285</span></a>          <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a>[] = <a class="var it7288" onMouseOver="hilite(7288)" onMouseOut="lolite()" onClick="logVariable('headline')" href="../../_variables/headline.html">$headline</a>;
<a name="l1286"><span class="linenum">1286</span></a>      }
<a name="l1287"><span class="linenum">1287</span></a>      else
<a name="l1288"><span class="linenum">1288</span></a>      { // Try to add headline with file name to array
<a name="l1289"><span class="linenum">1289</span></a>          if( isset( <a class="var it7271" onMouseOver="hilite(7271)" onMouseOut="lolite()" onClick="logVariable('dequeued_headlines')" href="../../_variables/dequeued_headlines.html">$dequeued_headlines</a>[ <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../_variables/file_name.html">$file_name</a> ] ) )
<a name="l1290"><span class="linenum">1290</span></a>          { // Don't require this file if it was dequeued before this request
<a name="l1291"><span class="linenum">1291</span></a>              return;
<a name="l1292"><span class="linenum">1292</span></a>          }
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment">        // Use file name as key index in $headline array</span>
<a name="l1294"><span class="linenum">1294</span></a>          <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a>[ <a class="var it1591" onMouseOver="hilite(1591)" onMouseOut="lolite()" onClick="logVariable('file_name')" href="../../_variables/file_name.html">$file_name</a> ] = <a class="var it7288" onMouseOver="hilite(7288)" onMouseOut="lolite()" onClick="logVariable('headline')" href="../../_variables/headline.html">$headline</a>;
<a name="l1295"><span class="linenum">1295</span></a>      }
<a name="l1296"><span class="linenum">1296</span></a>  }
<a name="l1297"><span class="linenum">1297</span></a>  
<a name="l1298"><span class="linenum">1298</span></a>  
<a name="l1299"><span class="linenum">1299</span></a>  <span class="comment">/**</span>
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment"> * Add a Javascript headline.</span>
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment"> * This is an extra function, to provide consistent wrapping and allow to bundle it</span>
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment"> * (i.e. create a bundle with all required JS files and these inline code snippets,</span>
<a name="l1303"><span class="linenum">1303</span></a>  <span class="comment"> *  in the correct order).</span>
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment"> * @param string Javascript</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment"> */</span>
<a name="l1306"><span class="linenum">1306</span></a>  function <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>(<a class="var it7288" onMouseOver="hilite(7288)" onMouseOut="lolite()" onClick="logVariable('headline')" href="../../_variables/headline.html">$headline</a>)
<a name="l1307"><span class="linenum">1307</span></a>  {
<a name="l1308"><span class="linenum">1308</span></a>      <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>(&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;\n\t<span class="comment">/* &lt;![CDATA[ */</span>\n\t\t&quot;
<a name="l1309"><span class="linenum">1309</span></a>          .<a class="var it7288" onMouseOver="hilite(7288)" onMouseOut="lolite()" onClick="logVariable('headline')" href="../../_variables/headline.html">$headline</a>.&quot;\n\t<span class="comment">/* ]]&gt; */</span>\n\t&lt;/script&gt;&quot;);
<a name="l1310"><span class="linenum">1310</span></a>  }
<a name="l1311"><span class="linenum">1311</span></a>  
<a name="l1312"><span class="linenum">1312</span></a>  
<a name="l1313"><span class="linenum">1313</span></a>  <span class="comment">/**</span>
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment"> * Add a CSS headline.</span>
<a name="l1315"><span class="linenum">1315</span></a>  <span class="comment"> * This is an extra function, to provide consistent wrapping and allow to bundle it</span>
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment"> * (i.e. create a bundle with all required JS files and these inline code snippets,</span>
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment"> *  in the correct order).</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment"> * @param string CSS</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment"> */</span>
<a name="l1320"><span class="linenum">1320</span></a>  function <a class="function" onClick="logFunction('add_css_headline')" href="../../_functions/add_css_headline.html" onMouseOver="funcPopup(event,'add_css_headline')">add_css_headline</a>(<a class="var it7288" onMouseOver="hilite(7288)" onMouseOut="lolite()" onClick="logVariable('headline')" href="../../_variables/headline.html">$headline</a>)
<a name="l1321"><span class="linenum">1321</span></a>  {
<a name="l1322"><span class="linenum">1322</span></a>      <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>(&quot;&lt;style type=\&quot;text/css\&quot;&gt;\n\t&quot;.<a class="var it7288" onMouseOver="hilite(7288)" onMouseOut="lolite()" onClick="logVariable('headline')" href="../../_variables/headline.html">$headline</a>.&quot;\n\t&lt;/style&gt;&quot;);
<a name="l1323"><span class="linenum">1323</span></a>  }
<a name="l1324"><span class="linenum">1324</span></a>  
<a name="l1325"><span class="linenum">1325</span></a>  
<a name="l1326"><span class="linenum">1326</span></a>  <span class="comment">/**</span>
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment"> * Registers all the javascripts needed by the toolbar menu</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment"> *</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment"> * @deprecated because #evo_toolbar doesn't use js anymore, only css is enough</span>
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment"> */</span>
<a name="l1331"><span class="linenum">1331</span></a>  function <a class="function" onClick="logFunction('add_js_for_toolbar')" href="../../_functions/add_js_for_toolbar.html" onMouseOver="funcPopup(event,'add_js_for_toolbar')">add_js_for_toolbar</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l1332"><span class="linenum">1332</span></a>  {
<a name="l1333"><span class="linenum">1333</span></a>      return true;
<a name="l1334"><span class="linenum">1334</span></a>  }
<a name="l1335"><span class="linenum">1335</span></a>  
<a name="l1336"><span class="linenum">1336</span></a>  
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment">/**</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment"> * Registers headlines required by AJAX forms, but only if javascript forms are enabled in blog settings.</span>
<a name="l1339"><span class="linenum">1339</span></a>  <span class="comment"> */</span>
<a name="l1340"><span class="linenum">1340</span></a>  function <a class="function" onClick="logFunction('init_ajax_forms')" href="../../_functions/init_ajax_forms.html" onMouseOver="funcPopup(event,'init_ajax_forms')">init_ajax_forms</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'blog' )
<a name="l1341"><span class="linenum">1341</span></a>  {
<a name="l1342"><span class="linenum">1342</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>;
<a name="l1343"><span class="linenum">1343</span></a>  
<a name="l1344"><span class="linenum">1344</span></a>      if( !empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('ajax_form_enabled') )
<a name="l1345"><span class="linenum">1345</span></a>      {
<a name="l1346"><span class="linenum">1346</span></a>          <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'communication.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1347"><span class="linenum">1347</span></a>      }
<a name="l1348"><span class="linenum">1348</span></a>  }
<a name="l1349"><span class="linenum">1349</span></a>  
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">/**</span>
<a name="l1352"><span class="linenum">1352</span></a>  <span class="comment"> * Registers headlines required by comments forms</span>
<a name="l1353"><span class="linenum">1353</span></a>  <span class="comment"> */</span>
<a name="l1354"><span class="linenum">1354</span></a>  function <a class="function" onClick="logFunction('init_ratings_js')" href="../../_functions/init_ratings_js.html" onMouseOver="funcPopup(event,'init_ratings_js')">init_ratings_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'blog', <a class="var it4560" onMouseOver="hilite(4560)" onMouseOut="lolite()" onClick="logVariable('force_init')" href="../../_variables/force_init.html">$force_init</a> = false )
<a name="l1355"><span class="linenum">1355</span></a>  {
<a name="l1356"><span class="linenum">1356</span></a>      global <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>;
<a name="l1357"><span class="linenum">1357</span></a>  
<a name="l1358"><span class="linenum">1358</span></a>  <span class="comment">    // fp&gt; Note, the following test is good for $disp == 'single', not for 'posts'</span>
<a name="l1359"><span class="linenum">1359</span></a>      if( <a class="var it4560" onMouseOver="hilite(4560)" onMouseOut="lolite()" onClick="logVariable('force_init')" href="../../_variables/force_init.html">$force_init</a> || ( !empty(<a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>) &amp;&amp; <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('can_rate')" href="../../_functions/can_rate.html" onMouseOver="funcPopup(event,'can_rate')">can_rate</a>() ) )
<a name="l1360"><span class="linenum">1360</span></a>      {
<a name="l1361"><span class="linenum">1361</span></a>          <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> ); <span class="comment">// dependency</span>
<a name="l1362"><span class="linenum">1362</span></a>          <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'jquery/jquery.raty.min.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1363"><span class="linenum">1363</span></a>      }
<a name="l1364"><span class="linenum">1364</span></a>  }
<a name="l1365"><span class="linenum">1365</span></a>  
<a name="l1366"><span class="linenum">1366</span></a>  
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">/**</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment"> * Registers headlines required to a bubbletip above user login.</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment"> *</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment"> * @param string alias, url or filename (relative to rsc/css, rsc/js) for JS/CSS files</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment"> * @param string Library: 'bubbletip', 'popover'</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment"> */</span>
<a name="l1373"><span class="linenum">1373</span></a>  function <a class="function" onClick="logFunction('init_bubbletip_js')" href="../../_functions/init_bubbletip_js.html" onMouseOver="funcPopup(event,'init_bubbletip_js')">init_bubbletip_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url', <a class="var it7289" onMouseOver="hilite(7289)" onMouseOut="lolite()" onClick="logVariable('library')" href="../../_variables/library.html">$library</a> = 'bubbletip' )
<a name="l1374"><span class="linenum">1374</span></a>  {
<a name="l1375"><span class="linenum">1375</span></a>      if( ! <a class="function" onClick="logFunction('check_setting')" href="../../_functions/check_setting.html" onMouseOver="funcPopup(event,'check_setting')">check_setting</a>( 'bubbletip' ) )
<a name="l1376"><span class="linenum">1376</span></a>      { // If setting &quot;bubbletip&quot; is OFF for current case
<a name="l1377"><span class="linenum">1377</span></a>          return;
<a name="l1378"><span class="linenum">1378</span></a>      }
<a name="l1379"><span class="linenum">1379</span></a>  
<a name="l1380"><span class="linenum">1380</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1381"><span class="linenum">1381</span></a>  
<a name="l1382"><span class="linenum">1382</span></a>      switch( <a class="var it7289" onMouseOver="hilite(7289)" onMouseOut="lolite()" onClick="logVariable('library')" href="../../_variables/library.html">$library</a> )
<a name="l1383"><span class="linenum">1383</span></a>      {
<a name="l1384"><span class="linenum">1384</span></a>          case 'popover':
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment">            // Use popover library of bootstrap</span>
<a name="l1386"><span class="linenum">1386</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'build/popover.bmin.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, true );
<a name="l1387"><span class="linenum">1387</span></a>              break;
<a name="l1388"><span class="linenum">1388</span></a>  
<a name="l1389"><span class="linenum">1389</span></a>          case 'bubbletip':
<a name="l1390"><span class="linenum">1390</span></a>          default:
<a name="l1391"><span class="linenum">1391</span></a>  <span class="comment">            // Use bubbletip plugin of jQuery</span>
<a name="l1392"><span class="linenum">1392</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'jquery/jquery.bubbletip.min.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1393"><span class="linenum">1393</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'build/bubbletip.bmin.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, true );
<a name="l1394"><span class="linenum">1394</span></a>              <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'jquery/jquery.bubbletip.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1395"><span class="linenum">1395</span></a>              break;
<a name="l1396"><span class="linenum">1396</span></a>      }
<a name="l1397"><span class="linenum">1397</span></a>  }
<a name="l1398"><span class="linenum">1398</span></a>  
<a name="l1399"><span class="linenum">1399</span></a>  
<a name="l1400"><span class="linenum">1400</span></a>  <span class="comment">/**</span>
<a name="l1401"><span class="linenum">1401</span></a>  <span class="comment"> * Registers headlines required to display a bubbletip to the right of user multi-field.</span>
<a name="l1402"><span class="linenum">1402</span></a>  <span class="comment"> *</span>
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment"> * @param string alias, url or filename (relative to rsc/css, rsc/js) for JS/CSS files</span>
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment"> * @param string Library: 'bubbletip', 'popover'</span>
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment"> */</span>
<a name="l1406"><span class="linenum">1406</span></a>  function <a class="function" onClick="logFunction('init_userfields_js')" href="../../_functions/init_userfields_js.html" onMouseOver="funcPopup(event,'init_userfields_js')">init_userfields_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url', <a class="var it7289" onMouseOver="hilite(7289)" onMouseOut="lolite()" onClick="logVariable('library')" href="../../_variables/library.html">$library</a> = 'bubbletip' )
<a name="l1407"><span class="linenum">1407</span></a>  {
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">    // Load to autocomplete user fields with list type</span>
<a name="l1409"><span class="linenum">1409</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqueryUI#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1410"><span class="linenum">1410</span></a>      <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( '#jqueryUI_css#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1411"><span class="linenum">1411</span></a>  
<a name="l1412"><span class="linenum">1412</span></a>      switch( <a class="var it7289" onMouseOver="hilite(7289)" onMouseOut="lolite()" onClick="logVariable('library')" href="../../_variables/library.html">$library</a> )
<a name="l1413"><span class="linenum">1413</span></a>      {
<a name="l1414"><span class="linenum">1414</span></a>          case 'popover':
<a name="l1415"><span class="linenum">1415</span></a>  <span class="comment">            // Use popover library of bootstrap</span>
<a name="l1416"><span class="linenum">1416</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'build/popover.bmin.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, true );
<a name="l1417"><span class="linenum">1417</span></a>              break;
<a name="l1418"><span class="linenum">1418</span></a>  
<a name="l1419"><span class="linenum">1419</span></a>          case 'bubbletip':
<a name="l1420"><span class="linenum">1420</span></a>          default:
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">            // Use bubbletip plugin of jQuery</span>
<a name="l1422"><span class="linenum">1422</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'jquery/jquery.bubbletip.min.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1423"><span class="linenum">1423</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'build/bubbletip.bmin.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, true );
<a name="l1424"><span class="linenum">1424</span></a>              <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'jquery/jquery.bubbletip.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1425"><span class="linenum">1425</span></a>              break;
<a name="l1426"><span class="linenum">1426</span></a>      }
<a name="l1427"><span class="linenum">1427</span></a>  }
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>  
<a name="l1430"><span class="linenum">1430</span></a>  <span class="comment">/**</span>
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment"> * Registers headlines required to display a bubbletip to the right of plugin help icon.</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment"> *</span>
<a name="l1433"><span class="linenum">1433</span></a>  <span class="comment"> * @param string alias, url or filename (relative to rsc/css, rsc/js) for JS/CSS files</span>
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment"> * @param string Library: 'bubbletip', 'popover'</span>
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment"> */</span>
<a name="l1436"><span class="linenum">1436</span></a>  function <a class="function" onClick="logFunction('init_plugins_js')" href="../../_functions/init_plugins_js.html" onMouseOver="funcPopup(event,'init_plugins_js')">init_plugins_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url', <a class="var it7289" onMouseOver="hilite(7289)" onMouseOut="lolite()" onClick="logVariable('library')" href="../../_variables/library.html">$library</a> = 'bubbletip' )
<a name="l1437"><span class="linenum">1437</span></a>  {
<a name="l1438"><span class="linenum">1438</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>      switch( <a class="var it7289" onMouseOver="hilite(7289)" onMouseOut="lolite()" onClick="logVariable('library')" href="../../_variables/library.html">$library</a> )
<a name="l1441"><span class="linenum">1441</span></a>      {
<a name="l1442"><span class="linenum">1442</span></a>          case 'popover':
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment">            // Use popover library of bootstrap</span>
<a name="l1444"><span class="linenum">1444</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'build/popover.bmin.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, true );
<a name="l1445"><span class="linenum">1445</span></a>              break;
<a name="l1446"><span class="linenum">1446</span></a>  
<a name="l1447"><span class="linenum">1447</span></a>          case 'bubbletip':
<a name="l1448"><span class="linenum">1448</span></a>          default:
<a name="l1449"><span class="linenum">1449</span></a>  <span class="comment">            // Use bubbletip plugin of jQuery</span>
<a name="l1450"><span class="linenum">1450</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'jquery/jquery.bubbletip.min.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1451"><span class="linenum">1451</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'build/bubbletip.bmin.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, true );
<a name="l1452"><span class="linenum">1452</span></a>              <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'jquery/jquery.bubbletip.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1453"><span class="linenum">1453</span></a>              break;
<a name="l1454"><span class="linenum">1454</span></a>      }
<a name="l1455"><span class="linenum">1455</span></a>  }
<a name="l1456"><span class="linenum">1456</span></a>  
<a name="l1457"><span class="linenum">1457</span></a>  
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">/**</span>
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment"> * Registers headlines for initialization of datepicker inputs</span>
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment"> */</span>
<a name="l1461"><span class="linenum">1461</span></a>  function <a class="function" onClick="logFunction('init_datepicker_js')" href="../../_functions/init_datepicker_js.html" onMouseOver="funcPopup(event,'init_datepicker_js')">init_datepicker_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l1462"><span class="linenum">1462</span></a>  {
<a name="l1463"><span class="linenum">1463</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqueryUI#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1464"><span class="linenum">1464</span></a>      <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( '#jqueryUI_css#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>      <a class="var it7290" onMouseOver="hilite(7290)" onMouseOut="lolite()" onClick="logVariable('datefmt')" href="../../_variables/datefmt.html">$datefmt</a> = <a class="function" onClick="logFunction('locale_datefmt')" href="../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>();
<a name="l1467"><span class="linenum">1467</span></a>      <a class="var it7290" onMouseOver="hilite(7290)" onMouseOut="lolite()" onClick="logVariable('datefmt')" href="../../_variables/datefmt.html">$datefmt</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( 'd', 'j', 'm', 'Y' ), array( 'dd', 'd', 'mm', 'yy' ), <a class="var it7290" onMouseOver="hilite(7290)" onMouseOut="lolite()" onClick="logVariable('datefmt')" href="../../_variables/datefmt.html">$datefmt</a> );
<a name="l1468"><span class="linenum">1468</span></a>      <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>( 'jQuery(document).ready( function(){
<a name="l1469"><span class="linenum">1469</span></a>          var monthNames = [&quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('January').'&quot;,&quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('February').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('March').'&quot;,
<a name="l1470"><span class="linenum">1470</span></a>                            &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('April').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('May').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('June').'&quot;,
<a name="l1471"><span class="linenum">1471</span></a>                            &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('July').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('August').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('September').'&quot;,
<a name="l1472"><span class="linenum">1472</span></a>                            &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('October').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('November').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('December').'&quot;];
<a name="l1473"><span class="linenum">1473</span></a>  
<a name="l1474"><span class="linenum">1474</span></a>          var dayNamesMin = [&quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Sun').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mon').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Tue').'&quot;,
<a name="l1475"><span class="linenum">1475</span></a>                            &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Wed').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Thu').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Fri').'&quot;, &quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Sat').'&quot;];
<a name="l1476"><span class="linenum">1476</span></a>  
<a name="l1477"><span class="linenum">1477</span></a>          var docHead = document.getElementsByTagName(&quot;head&quot;)[0];
<a name="l1478"><span class="linenum">1478</span></a>          for (i=0;i&lt;dayNamesMin.length;i++)
<a name="l1479"><span class="linenum">1479</span></a>              dayNamesMin[i] = dayNamesMin[i].<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(0, 2)
<a name="l1480"><span class="linenum">1480</span></a>  
<a name="l1481"><span class="linenum">1481</span></a>          jQuery(&quot;.form_date_input&quot;).<a class="function" onClick="logFunction('datepicker')" href="../../_functions/datepicker.html" onMouseOver="funcPopup(event,'datepicker')">datepicker</a>({
<a name="l1482"><span class="linenum">1482</span></a>              dateFormat: &quot;'.<a class="var it7290" onMouseOver="hilite(7290)" onMouseOut="lolite()" onClick="logVariable('datefmt')" href="../../_variables/datefmt.html">$datefmt</a>.'&quot;,
<a name="l1483"><span class="linenum">1483</span></a>              monthNames: monthNames,
<a name="l1484"><span class="linenum">1484</span></a>              dayNamesMin: dayNamesMin,
<a name="l1485"><span class="linenum">1485</span></a>              firstDay: '.<a class="function" onClick="logFunction('locale_startofweek')" href="../../_functions/locale_startofweek.html" onMouseOver="funcPopup(event,'locale_startofweek')">locale_startofweek</a>().'
<a name="l1486"><span class="linenum">1486</span></a>          })
<a name="l1487"><span class="linenum">1487</span></a>      })' );
<a name="l1488"><span class="linenum">1488</span></a>  }
<a name="l1489"><span class="linenum">1489</span></a>  
<a name="l1490"><span class="linenum">1490</span></a>  
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment">/**</span>
<a name="l1492"><span class="linenum">1492</span></a>  <span class="comment"> * Registers headlines for initialization of jQuery Tokeninput plugin</span>
<a name="l1493"><span class="linenum">1493</span></a>  <span class="comment"> */</span>
<a name="l1494"><span class="linenum">1494</span></a>  function <a class="function" onClick="logFunction('init_tokeninput_js')" href="../../_functions/init_tokeninput_js.html" onMouseOver="funcPopup(event,'init_tokeninput_js')">init_tokeninput_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l1495"><span class="linenum">1495</span></a>  {
<a name="l1496"><span class="linenum">1496</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> ); <span class="comment">// dependency</span>
<a name="l1497"><span class="linenum">1497</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'jquery/jquery.tokeninput.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1498"><span class="linenum">1498</span></a>      <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'jquery/jquery.token-input-facebook.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1499"><span class="linenum">1499</span></a>  }
<a name="l1500"><span class="linenum">1500</span></a>  
<a name="l1501"><span class="linenum">1501</span></a>  
<a name="l1502"><span class="linenum">1502</span></a>  <span class="comment">/**</span>
<a name="l1503"><span class="linenum">1503</span></a>  <span class="comment"> * Registers headlines for initialization of functions to work with Results tables</span>
<a name="l1504"><span class="linenum">1504</span></a>  <span class="comment"> */</span>
<a name="l1505"><span class="linenum">1505</span></a>  function <a class="function" onClick="logFunction('init_results_js')" href="../../_functions/init_results_js.html" onMouseOver="funcPopup(event,'init_results_js')">init_results_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l1506"><span class="linenum">1506</span></a>  {
<a name="l1507"><span class="linenum">1507</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> ); <span class="comment">// dependency</span>
<a name="l1508"><span class="linenum">1508</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'results.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1509"><span class="linenum">1509</span></a>  }
<a name="l1510"><span class="linenum">1510</span></a>  
<a name="l1511"><span class="linenum">1511</span></a>  
<a name="l1512"><span class="linenum">1512</span></a>  <span class="comment">/**</span>
<a name="l1513"><span class="linenum">1513</span></a>  <span class="comment"> * Registers headlines for initialization of functions to work with Results tables</span>
<a name="l1514"><span class="linenum">1514</span></a>  <span class="comment"> */</span>
<a name="l1515"><span class="linenum">1515</span></a>  function <a class="function" onClick="logFunction('init_voting_comment_js')" href="../../_functions/init_voting_comment_js.html" onMouseOver="funcPopup(event,'init_voting_comment_js')">init_voting_comment_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l1516"><span class="linenum">1516</span></a>  {
<a name="l1517"><span class="linenum">1517</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it2598" onMouseOver="hilite(2598)" onMouseOut="lolite()" onClick="logVariable('b2evo_icons_type')" href="../../_variables/b2evo_icons_type.html">$b2evo_icons_type</a>;
<a name="l1518"><span class="linenum">1518</span></a>  
<a name="l1519"><span class="linenum">1519</span></a>      if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) || ! <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) || ! <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('allow_rating_comment_helpfulness') )
<a name="l1520"><span class="linenum">1520</span></a>      {    // If User is not logged OR Users cannot vote
<a name="l1521"><span class="linenum">1521</span></a>          return false;
<a name="l1522"><span class="linenum">1522</span></a>      }
<a name="l1523"><span class="linenum">1523</span></a>  
<a name="l1524"><span class="linenum">1524</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> ); <span class="comment">// dependency</span>
<a name="l1525"><span class="linenum">1525</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'voting.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1526"><span class="linenum">1526</span></a>      <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>( '
<a name="l1527"><span class="linenum">1527</span></a>      jQuery( document ).ready( function()
<a name="l1528"><span class="linenum">1528</span></a>      {
<a name="l1529"><span class="linenum">1529</span></a>          var comment_voting_url = &quot;'.<a class="function" onClick="logFunction('get_secure_htsrv_url')" href="../../_functions/get_secure_htsrv_url.html" onMouseOver="funcPopup(event,'get_secure_htsrv_url')">get_secure_htsrv_url</a>().'anon_async.php?action=voting&amp;vote_type=comment&amp;b2evo_icons_type='.<a class="var it2598" onMouseOver="hilite(2598)" onMouseOut="lolite()" onClick="logVariable('b2evo_icons_type')" href="../../_variables/b2evo_icons_type.html">$b2evo_icons_type</a>.'&quot;;
<a name="l1530"><span class="linenum">1530</span></a>          jQuery( &quot;span[id^=vote_helpful_]&quot; ).<a class="phpfunction" onClick="logFunction('each')" href="../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>( function()
<a name="l1531"><span class="linenum">1531</span></a>          {
<a name="l1532"><span class="linenum">1532</span></a>              <a class="function" onClick="logFunction('init_voting_bar')" href="../../_functions/init_voting_bar.html" onMouseOver="funcPopup(event,'init_voting_bar')">init_voting_bar</a>( jQuery( this ), comment_voting_url, jQuery( this ).<a class="function" onClick="logFunction('find')" href="../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;#votingID&quot; ).val(), false );
<a name="l1533"><span class="linenum">1533</span></a>          } );
<a name="l1534"><span class="linenum">1534</span></a>      } );
<a name="l1535"><span class="linenum">1535</span></a>      ' );
<a name="l1536"><span class="linenum">1536</span></a>  }
<a name="l1537"><span class="linenum">1537</span></a>  
<a name="l1538"><span class="linenum">1538</span></a>  
<a name="l1539"><span class="linenum">1539</span></a>  <span class="comment">/**</span>
<a name="l1540"><span class="linenum">1540</span></a>  <span class="comment"> * Registers headlines for initialization of colorpicker inputs</span>
<a name="l1541"><span class="linenum">1541</span></a>  <span class="comment"> */</span>
<a name="l1542"><span class="linenum">1542</span></a>  function <a class="function" onClick="logFunction('init_colorpicker_js')" href="../../_functions/init_colorpicker_js.html" onMouseOver="funcPopup(event,'init_colorpicker_js')">init_colorpicker_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l1543"><span class="linenum">1543</span></a>  {
<a name="l1544"><span class="linenum">1544</span></a>  <span class="comment">    // Inititialize bubbletip plugin</span>
<a name="l1545"><span class="linenum">1545</span></a>      global <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>, <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>;
<a name="l1546"><span class="linenum">1546</span></a>      if( ! empty( <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a> ) )
<a name="l1547"><span class="linenum">1547</span></a>      { // Get library of tooltip for current back-office skin
<a name="l1548"><span class="linenum">1548</span></a>          <a class="var it7291" onMouseOver="hilite(7291)" onMouseOut="lolite()" onClick="logVariable('tooltip_plugin')" href="../../_variables/tooltip_plugin.html">$tooltip_plugin</a> = <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'tooltip_plugin' );
<a name="l1549"><span class="linenum">1549</span></a>      }
<a name="l1550"><span class="linenum">1550</span></a>      elseif( ! empty( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> ) )
<a name="l1551"><span class="linenum">1551</span></a>      { // Get library of tooltip for current front-office skin
<a name="l1552"><span class="linenum">1552</span></a>          <a class="var it7291" onMouseOver="hilite(7291)" onMouseOut="lolite()" onClick="logVariable('tooltip_plugin')" href="../../_variables/tooltip_plugin.html">$tooltip_plugin</a> = <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'tooltip_plugin' );
<a name="l1553"><span class="linenum">1553</span></a>      }
<a name="l1554"><span class="linenum">1554</span></a>      else
<a name="l1555"><span class="linenum">1555</span></a>      { // Use bubbletip library by default for unknown skins
<a name="l1556"><span class="linenum">1556</span></a>          <a class="var it7291" onMouseOver="hilite(7291)" onMouseOut="lolite()" onClick="logVariable('tooltip_plugin')" href="../../_variables/tooltip_plugin.html">$tooltip_plugin</a> = 'bubbletip';
<a name="l1557"><span class="linenum">1557</span></a>      }
<a name="l1558"><span class="linenum">1558</span></a>      <a class="function" onClick="logFunction('init_bubbletip_js')" href="../../_functions/init_bubbletip_js.html" onMouseOver="funcPopup(event,'init_bubbletip_js')">init_bubbletip_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a>, <a class="var it7291" onMouseOver="hilite(7291)" onMouseOut="lolite()" onClick="logVariable('tooltip_plugin')" href="../../_variables/tooltip_plugin.html">$tooltip_plugin</a> );
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">    // Initialize farbastic colorpicker</span>
<a name="l1561"><span class="linenum">1561</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1562"><span class="linenum">1562</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'jquery/jquery.farbtastic.min.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1563"><span class="linenum">1563</span></a>      <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'jquery/farbtastic/farbtastic.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1564"><span class="linenum">1564</span></a>  }
<a name="l1565"><span class="linenum">1565</span></a>  
<a name="l1566"><span class="linenum">1566</span></a>  
<a name="l1567"><span class="linenum">1567</span></a>  <span class="comment">/**</span>
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment"> * Registers headlines required to autocomplete the user logins</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment"> *</span>
<a name="l1570"><span class="linenum">1570</span></a>  <span class="comment"> * @param string alias, url or filename (relative to rsc/css, rsc/js) for JS/CSS files</span>
<a name="l1571"><span class="linenum">1571</span></a>  <span class="comment"> * @param string Library: 'hintbox', 'typeahead'</span>
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment"> */</span>
<a name="l1573"><span class="linenum">1573</span></a>  function <a class="function" onClick="logFunction('init_autocomplete_login_js')" href="../../_functions/init_autocomplete_login_js.html" onMouseOver="funcPopup(event,'init_autocomplete_login_js')">init_autocomplete_login_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url', <a class="var it7289" onMouseOver="hilite(7289)" onMouseOut="lolite()" onClick="logVariable('library')" href="../../_variables/library.html">$library</a> = 'hintbox' )
<a name="l1574"><span class="linenum">1574</span></a>  {
<a name="l1575"><span class="linenum">1575</span></a>      global <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>;
<a name="l1576"><span class="linenum">1576</span></a>  
<a name="l1577"><span class="linenum">1577</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> ); <span class="comment">// dependency</span>
<a name="l1578"><span class="linenum">1578</span></a>  
<a name="l1579"><span class="linenum">1579</span></a>      switch( <a class="var it7289" onMouseOver="hilite(7289)" onMouseOut="lolite()" onClick="logVariable('library')" href="../../_variables/library.html">$library</a> )
<a name="l1580"><span class="linenum">1580</span></a>      {
<a name="l1581"><span class="linenum">1581</span></a>          case 'typeahead':
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">            // Use typeahead library of bootstrap</span>
<a name="l1583"><span class="linenum">1583</span></a>              <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>( 'jQuery( document ).ready( function()
<a name="l1584"><span class="linenum">1584</span></a>              {
<a name="l1585"><span class="linenum">1585</span></a>                  jQuery( &quot;input.autocomplete_login&quot; ).<a class="function" onClick="logFunction('typeahead')" href="../../_functions/typeahead.html" onMouseOver="funcPopup(event,'typeahead')">typeahead</a>( null,
<a name="l1586"><span class="linenum">1586</span></a>                  {
<a name="l1587"><span class="linenum">1587</span></a>                      displayKey: &quot;login&quot;,
<a name="l1588"><span class="linenum">1588</span></a>                      source: function ( query, cb )
<a name="l1589"><span class="linenum">1589</span></a>                      {
<a name="l1590"><span class="linenum">1590</span></a>                          jQuery.ajax(
<a name="l1591"><span class="linenum">1591</span></a>                          {
<a name="l1592"><span class="linenum">1592</span></a>                              url: &quot;'.<a class="function" onClick="logFunction('get_secure_htsrv_url')" href="../../_functions/get_secure_htsrv_url.html" onMouseOver="funcPopup(event,'get_secure_htsrv_url')">get_secure_htsrv_url</a>().'async.php?action=get_login_list&quot;,
<a name="l1593"><span class="linenum">1593</span></a>                              type: &quot;post&quot;,
<a name="l1594"><span class="linenum">1594</span></a>                              data: { q: query, data_type: &quot;json&quot; },
<a name="l1595"><span class="linenum">1595</span></a>                              dataType: &quot;JSON&quot;,
<a name="l1596"><span class="linenum">1596</span></a>                              success: function( logins )
<a name="l1597"><span class="linenum">1597</span></a>                              {
<a name="l1598"><span class="linenum">1598</span></a>                                  var json = new Array();
<a name="l1599"><span class="linenum">1599</span></a>                                  for( var l in logins )
<a name="l1600"><span class="linenum">1600</span></a>                                  {
<a name="l1601"><span class="linenum">1601</span></a>                                      json.push( { login: logins[ l ] } );
<a name="l1602"><span class="linenum">1602</span></a>                                  }
<a name="l1603"><span class="linenum">1603</span></a>                                  <a class="function" onClick="logFunction('cb')" href="../../_functions/cb.html" onMouseOver="funcPopup(event,'cb')">cb</a>( json );
<a name="l1604"><span class="linenum">1604</span></a>                              }
<a name="l1605"><span class="linenum">1605</span></a>                          } );
<a name="l1606"><span class="linenum">1606</span></a>                      }
<a name="l1607"><span class="linenum">1607</span></a>                  } );
<a name="l1608"><span class="linenum">1608</span></a>                  '
<a name="l1609"><span class="linenum">1609</span></a>  <span class="comment">                // Don't submit a form by Enter when user is editing the owner fields</span>
<a name="l1610"><span class="linenum">1610</span></a>                  .<a class="function" onClick="logFunction('get_prevent_key_enter_js')" href="../../_functions/get_prevent_key_enter_js.html" onMouseOver="funcPopup(event,'get_prevent_key_enter_js')">get_prevent_key_enter_js</a>( 'input.autocomplete_login' ).'
<a name="l1611"><span class="linenum">1611</span></a>              } );' );
<a name="l1612"><span class="linenum">1612</span></a>              break;
<a name="l1613"><span class="linenum">1613</span></a>  
<a name="l1614"><span class="linenum">1614</span></a>          case 'hintbox':
<a name="l1615"><span class="linenum">1615</span></a>          default:
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">            // Use hintbox plugin of jQuery</span>
<a name="l1617"><span class="linenum">1617</span></a>  
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment">            // Add jQuery hintbox (autocompletion).</span>
<a name="l1619"><span class="linenum">1619</span></a>  <span class="comment">            // Form 'username' field requires the following JS and CSS.</span>
<a name="l1620"><span class="linenum">1620</span></a>  <span class="comment">            // fp&gt; TODO: think about a way to bundle this with other JS on the page -- maybe always load hintbox in the backoffice</span>
<a name="l1621"><span class="linenum">1621</span></a>  <span class="comment">            //     dh&gt; Handle it via http://www.appelsiini.net/projects/lazyload ?</span>
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment">            // dh&gt; TODO: should probably also get ported to use jquery.ui.autocomplete (or its successor)</span>
<a name="l1623"><span class="linenum">1623</span></a>              <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'jquery/jquery.hintbox.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1624"><span class="linenum">1624</span></a>              <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'jquery/jquery.hintbox.min.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1625"><span class="linenum">1625</span></a>              <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>( 'jQuery( document ).<a class="function" onClick="logFunction('on')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>( &quot;focus&quot;, &quot;input.autocomplete_login&quot;, function()
<a name="l1626"><span class="linenum">1626</span></a>              {
<a name="l1627"><span class="linenum">1627</span></a>                  var ajax_params = &quot;&quot;;
<a name="l1628"><span class="linenum">1628</span></a>                  if( jQuery( this ).hasClass( &quot;only_assignees&quot; ) )
<a name="l1629"><span class="linenum">1629</span></a>                  {
<a name="l1630"><span class="linenum">1630</span></a>                      ajax_params = &quot;&amp;user_type=assignees&amp;blog='.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>.'&quot;;
<a name="l1631"><span class="linenum">1631</span></a>                  }
<a name="l1632"><span class="linenum">1632</span></a>                  jQuery( this ).hintbox(
<a name="l1633"><span class="linenum">1633</span></a>                  {
<a name="l1634"><span class="linenum">1634</span></a>                      url: &quot;'.<a class="function" onClick="logFunction('get_secure_htsrv_url')" href="../../_functions/get_secure_htsrv_url.html" onMouseOver="funcPopup(event,'get_secure_htsrv_url')">get_secure_htsrv_url</a>().'async.php?action=get_login_list&quot; + ajax_params,
<a name="l1635"><span class="linenum">1635</span></a>                      matchHint: true,
<a name="l1636"><span class="linenum">1636</span></a>                      autoDimentions: true
<a name="l1637"><span class="linenum">1637</span></a>                  } );
<a name="l1638"><span class="linenum">1638</span></a>                  '
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment">                // Don't submit a form by Enter when user is editing the owner fields</span>
<a name="l1640"><span class="linenum">1640</span></a>                  .<a class="function" onClick="logFunction('get_prevent_key_enter_js')" href="../../_functions/get_prevent_key_enter_js.html" onMouseOver="funcPopup(event,'get_prevent_key_enter_js')">get_prevent_key_enter_js</a>( 'input.autocomplete_login' ).'
<a name="l1641"><span class="linenum">1641</span></a>              } );' );
<a name="l1642"><span class="linenum">1642</span></a>              break;
<a name="l1643"><span class="linenum">1643</span></a>      }
<a name="l1644"><span class="linenum">1644</span></a>  }
<a name="l1645"><span class="linenum">1645</span></a>  
<a name="l1646"><span class="linenum">1646</span></a>  
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment">/**</span>
<a name="l1648"><span class="linenum">1648</span></a>  <span class="comment"> * Registers headlines required to jqPlot charts</span>
<a name="l1649"><span class="linenum">1649</span></a>  <span class="comment"> *</span>
<a name="l1650"><span class="linenum">1650</span></a>  <span class="comment"> * @param string alias, url or filename (relative to rsc/css, rsc/js) for JS/CSS files</span>
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment"> */</span>
<a name="l1652"><span class="linenum">1652</span></a>  function <a class="function" onClick="logFunction('init_jqplot_js')" href="../../_functions/init_jqplot_js.html" onMouseOver="funcPopup(event,'init_jqplot_js')">init_jqplot_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l1653"><span class="linenum">1653</span></a>  {
<a name="l1654"><span class="linenum">1654</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> ); <span class="comment">// dependency</span>
<a name="l1655"><span class="linenum">1655</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1656"><span class="linenum">1656</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot_barRenderer#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1657"><span class="linenum">1657</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot_canvasAxisTickRenderer#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1658"><span class="linenum">1658</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot_canvasTextRenderer#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1659"><span class="linenum">1659</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot_categoryAxisRenderer#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1660"><span class="linenum">1660</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot_enhancedLegendRenderer#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1661"><span class="linenum">1661</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot_highlighter#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1662"><span class="linenum">1662</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot_canvasOverlay#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1663"><span class="linenum">1663</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqplot_donutRenderer#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1664"><span class="linenum">1664</span></a>      <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( '#jqplot_css#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1665"><span class="linenum">1665</span></a>      <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'jquery/jquery.jqplot.b2evo.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l1666"><span class="linenum">1666</span></a>  }
<a name="l1667"><span class="linenum">1667</span></a>  
<a name="l1668"><span class="linenum">1668</span></a>  
<a name="l1669"><span class="linenum">1669</span></a>  <span class="comment">/**</span>
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment"> * Outputs the collected HTML HEAD lines.</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment"> * @see add_headline()</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment"> * @return string</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment"> */</span>
<a name="l1674"><span class="linenum">1674</span></a>  function <a class="function" onClick="logFunction('include_headlines')" href="../../_functions/include_headlines.html" onMouseOver="funcPopup(event,'include_headlines')">include_headlines</a>()
<a name="l1675"><span class="linenum">1675</span></a>  {
<a name="l1676"><span class="linenum">1676</span></a>      global <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a>;
<a name="l1677"><span class="linenum">1677</span></a>  
<a name="l1678"><span class="linenum">1678</span></a>      if( <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a> )
<a name="l1679"><span class="linenum">1679</span></a>      {
<a name="l1680"><span class="linenum">1680</span></a>          echo &quot;\n\t&lt;!-- headlines: --&gt;\n\t&quot;.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( &quot;\n\t&quot;, <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('headlines')" href="../../_variables/headlines.html">$headlines</a> );
<a name="l1681"><span class="linenum">1681</span></a>          echo &quot;\n\n&quot;;
<a name="l1682"><span class="linenum">1682</span></a>      }
<a name="l1683"><span class="linenum">1683</span></a>  }
<a name="l1684"><span class="linenum">1684</span></a>  
<a name="l1685"><span class="linenum">1685</span></a>  
<a name="l1686"><span class="linenum">1686</span></a>  <span class="comment">/**</span>
<a name="l1687"><span class="linenum">1687</span></a>  <span class="comment"> * Outputs the collected translation lines before &lt;/body&gt;</span>
<a name="l1688"><span class="linenum">1688</span></a>  <span class="comment"> *</span>
<a name="l1689"><span class="linenum">1689</span></a>  <span class="comment"> * yabs &gt; Should this be expanded to similar functionality to headlines?</span>
<a name="l1690"><span class="linenum">1690</span></a>  <span class="comment"> *</span>
<a name="l1691"><span class="linenum">1691</span></a>  <span class="comment"> * @see add_js_translation()</span>
<a name="l1692"><span class="linenum">1692</span></a>  <span class="comment"> */</span>
<a name="l1693"><span class="linenum">1693</span></a>  function <a class="function" onClick="logFunction('include_footerlines')" href="../../_functions/include_footerlines.html" onMouseOver="funcPopup(event,'include_footerlines')">include_footerlines</a>()
<a name="l1694"><span class="linenum">1694</span></a>  {
<a name="l1695"><span class="linenum">1695</span></a>      global <a class="var it7287" onMouseOver="hilite(7287)" onMouseOut="lolite()" onClick="logVariable('js_translations')" href="../../_variables/js_translations.html">$js_translations</a>;
<a name="l1696"><span class="linenum">1696</span></a>      if( empty( <a class="var it7287" onMouseOver="hilite(7287)" onMouseOut="lolite()" onClick="logVariable('js_translations')" href="../../_variables/js_translations.html">$js_translations</a> ) )
<a name="l1697"><span class="linenum">1697</span></a>      { // nothing to do
<a name="l1698"><span class="linenum">1698</span></a>          return;
<a name="l1699"><span class="linenum">1699</span></a>      }
<a name="l1700"><span class="linenum">1700</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = '';
<a name="l1701"><span class="linenum">1701</span></a>  
<a name="l1702"><span class="linenum">1702</span></a>      foreach( <a class="var it7287" onMouseOver="hilite(7287)" onMouseOut="lolite()" onClick="logVariable('js_translations')" href="../../_variables/js_translations.html">$js_translations</a> as <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a> =&gt; <a class="var it7286" onMouseOver="hilite(7286)" onMouseOut="lolite()" onClick="logVariable('translation')" href="../../_variables/translation.html">$translation</a> )
<a name="l1703"><span class="linenum">1703</span></a>      { // output each translation
<a name="l1704"><span class="linenum">1704</span></a>          if( <a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a> != <a class="var it7286" onMouseOver="hilite(7286)" onMouseOut="lolite()" onClick="logVariable('translation')" href="../../_variables/translation.html">$translation</a> )
<a name="l1705"><span class="linenum">1705</span></a>          { // this is translated
<a name="l1706"><span class="linenum">1706</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> .= '&lt;div&gt;&lt;span class=&quot;b2evo_t_string&quot;&gt;'.<a class="var it85" onMouseOver="hilite(85)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>.'&lt;/span&gt;&lt;span class=&quot;b2evo_translation&quot;&gt;'.<a class="var it7286" onMouseOver="hilite(7286)" onMouseOut="lolite()" onClick="logVariable('translation')" href="../../_variables/translation.html">$translation</a>.'&lt;/span&gt;&lt;/div&gt;'.&quot;\n&quot;;
<a name="l1707"><span class="linenum">1707</span></a>          }
<a name="l1708"><span class="linenum">1708</span></a>      }
<a name="l1709"><span class="linenum">1709</span></a>      if( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> )
<a name="l1710"><span class="linenum">1710</span></a>      { // we have some translations
<a name="l1711"><span class="linenum">1711</span></a>          echo '&lt;div id=&quot;b2evo_translations&quot; style=&quot;display:none;&quot;&gt;'.&quot;\n&quot;;
<a name="l1712"><span class="linenum">1712</span></a>          echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>;
<a name="l1713"><span class="linenum">1713</span></a>          echo '&lt;/div&gt;'.&quot;\n&quot;;
<a name="l1714"><span class="linenum">1714</span></a>      }
<a name="l1715"><span class="linenum">1715</span></a>  }
<a name="l1716"><span class="linenum">1716</span></a>  
<a name="l1717"><span class="linenum">1717</span></a>  
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment">/**</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment"> * Template tag.</span>
<a name="l1720"><span class="linenum">1720</span></a>  <span class="comment"> */</span>
<a name="l1721"><span class="linenum">1721</span></a>  function <a class="function" onClick="logFunction('app_version')" href="../../_functions/app_version.html" onMouseOver="funcPopup(event,'app_version')">app_version</a>()
<a name="l1722"><span class="linenum">1722</span></a>  {
<a name="l1723"><span class="linenum">1723</span></a>      global <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../_variables/app_version.html">$app_version</a>;
<a name="l1724"><span class="linenum">1724</span></a>      echo <a class="var it44" onMouseOver="hilite(44)" onMouseOut="lolite()" onClick="logVariable('app_version')" href="../../_variables/app_version.html">$app_version</a>;
<a name="l1725"><span class="linenum">1725</span></a>  }
<a name="l1726"><span class="linenum">1726</span></a>  
<a name="l1727"><span class="linenum">1727</span></a>  
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment">/**</span>
<a name="l1729"><span class="linenum">1729</span></a>  <span class="comment"> * Displays an empty or a full bullet based on boolean</span>
<a name="l1730"><span class="linenum">1730</span></a>  <span class="comment"> *</span>
<a name="l1731"><span class="linenum">1731</span></a>  <span class="comment"> * @param boolean true for full bullet, false for empty bullet</span>
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment"> */</span>
<a name="l1733"><span class="linenum">1733</span></a>  function <a class="function" onClick="logFunction('bullet')" href="../../_functions/bullet.html" onMouseOver="funcPopup(event,'bullet')">bullet</a>( <a class="var it7292" onMouseOver="hilite(7292)" onMouseOut="lolite()" onClick="logVariable('bool')" href="../../_variables/bool.html">$bool</a> )
<a name="l1734"><span class="linenum">1734</span></a>  {
<a name="l1735"><span class="linenum">1735</span></a>      if( <a class="var it7292" onMouseOver="hilite(7292)" onMouseOut="lolite()" onClick="logVariable('bool')" href="../../_variables/bool.html">$bool</a> )
<a name="l1736"><span class="linenum">1736</span></a>          return <a class="function" onClick="logFunction('get_icon')" href="../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'bullet_full', 'imgtag' );
<a name="l1737"><span class="linenum">1737</span></a>  
<a name="l1738"><span class="linenum">1738</span></a>      return <a class="function" onClick="logFunction('get_icon')" href="../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'bullet_empty', 'imgtag' );
<a name="l1739"><span class="linenum">1739</span></a>  }
<a name="l1740"><span class="linenum">1740</span></a>  
<a name="l1741"><span class="linenum">1741</span></a>  
<a name="l1742"><span class="linenum">1742</span></a>  
<a name="l1743"><span class="linenum">1743</span></a>  
<a name="l1744"><span class="linenum">1744</span></a>  <span class="comment">/**</span>
<a name="l1745"><span class="linenum">1745</span></a>  <span class="comment"> * Stub: Links to previous and next post in single post mode</span>
<a name="l1746"><span class="linenum">1746</span></a>  <span class="comment"> */</span>
<a name="l1747"><span class="linenum">1747</span></a>  function <a class="function" onClick="logFunction('item_prevnext_links')" href="../../_functions/item_prevnext_links.html" onMouseOver="funcPopup(event,'item_prevnext_links')">item_prevnext_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l1748"><span class="linenum">1748</span></a>  {
<a name="l1749"><span class="linenum">1749</span></a>      global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l1750"><span class="linenum">1750</span></a>  
<a name="l1751"><span class="linenum">1751</span></a>      if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> == 'download' )
<a name="l1752"><span class="linenum">1752</span></a>      { // Don't display the links on download page
<a name="l1753"><span class="linenum">1753</span></a>          return;
<a name="l1754"><span class="linenum">1754</span></a>      }
<a name="l1755"><span class="linenum">1755</span></a>  
<a name="l1756"><span class="linenum">1756</span></a>      global <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>;
<a name="l1757"><span class="linenum">1757</span></a>  
<a name="l1758"><span class="linenum">1758</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array( 'target_blog' =&gt; 'auto' ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1759"><span class="linenum">1759</span></a>  
<a name="l1760"><span class="linenum">1760</span></a>      if( isset( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a> ) )
<a name="l1761"><span class="linenum">1761</span></a>      {
<a name="l1762"><span class="linenum">1762</span></a>          <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('prevnext_item_links')" href="../../_functions/prevnext_item_links.html" onMouseOver="funcPopup(event,'prevnext_item_links')">prevnext_item_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1763"><span class="linenum">1763</span></a>      }
<a name="l1764"><span class="linenum">1764</span></a>  }
<a name="l1765"><span class="linenum">1765</span></a>  
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment">/**</span>
<a name="l1767"><span class="linenum">1767</span></a>  <span class="comment"> * Stub: Links to previous and next user in single user mode</span>
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment"> */</span>
<a name="l1769"><span class="linenum">1769</span></a>  function <a class="function" onClick="logFunction('user_prevnext_links')" href="../../_functions/user_prevnext_links.html" onMouseOver="funcPopup(event,'user_prevnext_links')">user_prevnext_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l1770"><span class="linenum">1770</span></a>  {
<a name="l1771"><span class="linenum">1771</span></a>      global <a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('UserList')" href="../../_variables/UserList.html">$UserList</a>, <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>, <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>;
<a name="l1772"><span class="linenum">1772</span></a>  
<a name="l1773"><span class="linenum">1773</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1774"><span class="linenum">1774</span></a>              'template'     =&gt; '<a class="var it371" onMouseOver="hilite(371)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a>$<a class="var it4822" onMouseOver="hilite(4822)" onMouseOut="lolite()" onClick="logVariable('back')" href="../../_variables/back.html">$back</a>$<a class="var it298" onMouseOver="hilite(298)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>$',
<a name="l1775"><span class="linenum">1775</span></a>              'block_start'  =&gt; '&lt;table class=&quot;prevnext_user&quot;&gt;&lt;tr&gt;',
<a name="l1776"><span class="linenum">1776</span></a>              'prev_start'   =&gt; '&lt;td width=&quot;33%&quot;&gt;',
<a name="l1777"><span class="linenum">1777</span></a>              'prev_end'     =&gt; '&lt;/td&gt;',
<a name="l1778"><span class="linenum">1778</span></a>              'prev_no_user' =&gt; '&lt;td width=&quot;33%&quot;&gt;&amp;nbsp;&lt;/td&gt;',
<a name="l1779"><span class="linenum">1779</span></a>              'back_start'   =&gt; '&lt;td width=&quot;33%&quot; class=&quot;back_users_list&quot;&gt;',
<a name="l1780"><span class="linenum">1780</span></a>              'back_end'     =&gt; '&lt;/td&gt;',
<a name="l1781"><span class="linenum">1781</span></a>              'next_start'   =&gt; '&lt;td width=&quot;33%&quot; class=&quot;right&quot;&gt;',
<a name="l1782"><span class="linenum">1782</span></a>              'next_end'     =&gt; '&lt;/td&gt;',
<a name="l1783"><span class="linenum">1783</span></a>              'next_no_user' =&gt; '&lt;td width=&quot;33%&quot;&gt;&amp;nbsp;&lt;/td&gt;',
<a name="l1784"><span class="linenum">1784</span></a>              'block_end'    =&gt; '&lt;/tr&gt;&lt;/table&gt;',
<a name="l1785"><span class="linenum">1785</span></a>              'user_tab'     =&gt; 'profile',
<a name="l1786"><span class="linenum">1786</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1787"><span class="linenum">1787</span></a>  
<a name="l1788"><span class="linenum">1788</span></a>      if( !empty( <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a> ) )
<a name="l1789"><span class="linenum">1789</span></a>      { // Set template from AdminUI
<a name="l1790"><span class="linenum">1790</span></a>          <a class="var it7293" onMouseOver="hilite(7293)" onMouseOut="lolite()" onClick="logVariable('user_navigation')" href="../../_variables/user_navigation.html">$user_navigation</a> = <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'user_navigation' );
<a name="l1791"><span class="linenum">1791</span></a>      }
<a name="l1792"><span class="linenum">1792</span></a>      elseif( !empty( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> ) )
<a name="l1793"><span class="linenum">1793</span></a>      { // Set template from Skin
<a name="l1794"><span class="linenum">1794</span></a>          <a class="var it7293" onMouseOver="hilite(7293)" onMouseOut="lolite()" onClick="logVariable('user_navigation')" href="../../_variables/user_navigation.html">$user_navigation</a> = <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'user_navigation' );
<a name="l1795"><span class="linenum">1795</span></a>      }
<a name="l1796"><span class="linenum">1796</span></a>      if( !empty( <a class="var it7293" onMouseOver="hilite(7293)" onMouseOut="lolite()" onClick="logVariable('user_navigation')" href="../../_variables/user_navigation.html">$user_navigation</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it7293" onMouseOver="hilite(7293)" onMouseOut="lolite()" onClick="logVariable('user_navigation')" href="../../_variables/user_navigation.html">$user_navigation</a> ) )
<a name="l1797"><span class="linenum">1797</span></a>      {
<a name="l1798"><span class="linenum">1798</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it7293" onMouseOver="hilite(7293)" onMouseOut="lolite()" onClick="logVariable('user_navigation')" href="../../_variables/user_navigation.html">$user_navigation</a> );
<a name="l1799"><span class="linenum">1799</span></a>      }
<a name="l1800"><span class="linenum">1800</span></a>  
<a name="l1801"><span class="linenum">1801</span></a>      if( isset(<a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('UserList')" href="../../_variables/UserList.html">$UserList</a>) )
<a name="l1802"><span class="linenum">1802</span></a>      {
<a name="l1803"><span class="linenum">1803</span></a>          <a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('UserList')" href="../../_variables/UserList.html">$UserList</a>-&gt;<a class="function" onClick="logFunction('prevnext_user_links')" href="../../_functions/prevnext_user_links.html" onMouseOver="funcPopup(event,'prevnext_user_links')">prevnext_user_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1804"><span class="linenum">1804</span></a>      }
<a name="l1805"><span class="linenum">1805</span></a>  }
<a name="l1806"><span class="linenum">1806</span></a>  
<a name="l1807"><span class="linenum">1807</span></a>  
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment">/**</span>
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment"> * Stub</span>
<a name="l1810"><span class="linenum">1810</span></a>  <span class="comment"> */</span>
<a name="l1811"><span class="linenum">1811</span></a>  function <a class="function" onClick="logFunction('messages')" href="../../_functions/messages.html" onMouseOver="funcPopup(event,'messages')">messages</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l1812"><span class="linenum">1812</span></a>  {
<a name="l1813"><span class="linenum">1813</span></a>      global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>;
<a name="l1814"><span class="linenum">1814</span></a>  
<a name="l1815"><span class="linenum">1815</span></a>      if( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['has_errors'] ) )
<a name="l1816"><span class="linenum">1816</span></a>      {
<a name="l1817"><span class="linenum">1817</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['has_errors'] = <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('has_errors')" href="../../_functions/has_errors.html" onMouseOver="funcPopup(event,'has_errors')">has_errors</a>();
<a name="l1818"><span class="linenum">1818</span></a>      }
<a name="l1819"><span class="linenum">1819</span></a>      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('disp')" href="../../_functions/disp.html" onMouseOver="funcPopup(event,'disp')">disp</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['block_start'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['block_end'] );
<a name="l1820"><span class="linenum">1820</span></a>  }
<a name="l1821"><span class="linenum">1821</span></a>  
<a name="l1822"><span class="linenum">1822</span></a>  
<a name="l1823"><span class="linenum">1823</span></a>  <span class="comment">/**</span>
<a name="l1824"><span class="linenum">1824</span></a>  <span class="comment"> * Stub: Links to list pages:</span>
<a name="l1825"><span class="linenum">1825</span></a>  <span class="comment"> *</span>
<a name="l1826"><span class="linenum">1826</span></a>  <span class="comment"> * @param array Params</span>
<a name="l1827"><span class="linenum">1827</span></a>  <span class="comment"> * @param object ItemList2, NULL to use global $MainList</span>
<a name="l1828"><span class="linenum">1828</span></a>  <span class="comment"> */</span>
<a name="l1829"><span class="linenum">1829</span></a>  function <a class="function" onClick="logFunction('mainlist_page_links')" href="../../_functions/mainlist_page_links.html" onMouseOver="funcPopup(event,'mainlist_page_links')">mainlist_page_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(), <a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('ItemList2')" href="../../_variables/ItemList2.html">$ItemList2</a> = NULL )
<a name="l1830"><span class="linenum">1830</span></a>  {
<a name="l1831"><span class="linenum">1831</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('ItemList2')" href="../../_variables/ItemList2.html">$ItemList2</a> ) )
<a name="l1832"><span class="linenum">1832</span></a>      {
<a name="l1833"><span class="linenum">1833</span></a>          global <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>;
<a name="l1834"><span class="linenum">1834</span></a>          <a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('ItemList2')" href="../../_variables/ItemList2.html">$ItemList2</a> = <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>;
<a name="l1835"><span class="linenum">1835</span></a>      }
<a name="l1836"><span class="linenum">1836</span></a>  
<a name="l1837"><span class="linenum">1837</span></a>      if( ! empty( <a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('ItemList2')" href="../../_variables/ItemList2.html">$ItemList2</a> ) )
<a name="l1838"><span class="linenum">1838</span></a>      {
<a name="l1839"><span class="linenum">1839</span></a>          <a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('ItemList2')" href="../../_variables/ItemList2.html">$ItemList2</a>-&gt;<a class="function" onClick="logFunction('page_links')" href="../../_functions/page_links.html" onMouseOver="funcPopup(event,'page_links')">page_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1840"><span class="linenum">1840</span></a>      }
<a name="l1841"><span class="linenum">1841</span></a>  }
<a name="l1842"><span class="linenum">1842</span></a>  
<a name="l1843"><span class="linenum">1843</span></a>  
<a name="l1844"><span class="linenum">1844</span></a>  <span class="comment">/**</span>
<a name="l1845"><span class="linenum">1845</span></a>  <span class="comment"> * Stub</span>
<a name="l1846"><span class="linenum">1846</span></a>  <span class="comment"> *</span>
<a name="l1847"><span class="linenum">1847</span></a>  <span class="comment"> * Sets $Item ion global scope</span>
<a name="l1848"><span class="linenum">1848</span></a>  <span class="comment"> *</span>
<a name="l1849"><span class="linenum">1849</span></a>  <span class="comment"> * @return Item</span>
<a name="l1850"><span class="linenum">1850</span></a>  <span class="comment"> */</span>
<a name="l1851"><span class="linenum">1851</span></a>  function &amp; mainlist_get_item()
<a name="l1852"><span class="linenum">1852</span></a>  {
<a name="l1853"><span class="linenum">1853</span></a>      global <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>, <a class="var it614" onMouseOver="hilite(614)" onMouseOut="lolite()" onClick="logVariable('featured_displayed_item_IDs')" href="../../_variables/featured_displayed_item_IDs.html">$featured_displayed_item_IDs</a>;
<a name="l1854"><span class="linenum">1854</span></a>  
<a name="l1855"><span class="linenum">1855</span></a>      if( isset( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a> ) )
<a name="l1856"><span class="linenum">1856</span></a>      {
<a name="l1857"><span class="linenum">1857</span></a>          <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = &amp; <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_item')" href="../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_item</a>();
<a name="l1858"><span class="linenum">1858</span></a>  
<a name="l1859"><span class="linenum">1859</span></a>          if( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>, <a class="var it614" onMouseOver="hilite(614)" onMouseOut="lolite()" onClick="logVariable('featured_displayed_item_IDs')" href="../../_variables/featured_displayed_item_IDs.html">$featured_displayed_item_IDs</a> ) )
<a name="l1860"><span class="linenum">1860</span></a>          { // This post was already displayed as a Featured post, let's skip it and get the next one:
<a name="l1861"><span class="linenum">1861</span></a>              <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = &amp; mainlist_get_item();
<a name="l1862"><span class="linenum">1862</span></a>          }
<a name="l1863"><span class="linenum">1863</span></a>      }
<a name="l1864"><span class="linenum">1864</span></a>      else
<a name="l1865"><span class="linenum">1865</span></a>      {
<a name="l1866"><span class="linenum">1866</span></a>          <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = NULL;
<a name="l1867"><span class="linenum">1867</span></a>      }
<a name="l1868"><span class="linenum">1868</span></a>  
<a name="l1869"><span class="linenum">1869</span></a>  <span class="comment">    // Make this available globally:</span>
<a name="l1870"><span class="linenum">1870</span></a>      <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['Item'] = &amp; <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>;
<a name="l1871"><span class="linenum">1871</span></a>  
<a name="l1872"><span class="linenum">1872</span></a>      return <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>;
<a name="l1873"><span class="linenum">1873</span></a>  }
<a name="l1874"><span class="linenum">1874</span></a>  
<a name="l1875"><span class="linenum">1875</span></a>  
<a name="l1876"><span class="linenum">1876</span></a>  <span class="comment">/**</span>
<a name="l1877"><span class="linenum">1877</span></a>  <span class="comment"> * Stub</span>
<a name="l1878"><span class="linenum">1878</span></a>  <span class="comment"> *</span>
<a name="l1879"><span class="linenum">1879</span></a>  <span class="comment"> * @return boolean true if empty MainList</span>
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment"> */</span>
<a name="l1881"><span class="linenum">1881</span></a>  function <a class="function" onClick="logFunction('display_if_empty')" href="../../_functions/display_if_empty.html" onMouseOver="funcPopup(event,'display_if_empty')">display_if_empty</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l1882"><span class="linenum">1882</span></a>  {
<a name="l1883"><span class="linenum">1883</span></a>      global <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>, <a class="var it614" onMouseOver="hilite(614)" onMouseOut="lolite()" onClick="logVariable('featured_displayed_item_IDs')" href="../../_variables/featured_displayed_item_IDs.html">$featured_displayed_item_IDs</a>;
<a name="l1884"><span class="linenum">1884</span></a>  
<a name="l1885"><span class="linenum">1885</span></a>      if( isset( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a> ) &amp;&amp; empty( <a class="var it614" onMouseOver="hilite(614)" onMouseOut="lolite()" onClick="logVariable('featured_displayed_item_IDs')" href="../../_variables/featured_displayed_item_IDs.html">$featured_displayed_item_IDs</a> ) )
<a name="l1886"><span class="linenum">1886</span></a>      {
<a name="l1887"><span class="linenum">1887</span></a>          return <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('display_if_empty')" href="../../_functions/display_if_empty.html" onMouseOver="funcPopup(event,'display_if_empty')">display_if_empty</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1888"><span class="linenum">1888</span></a>      }
<a name="l1889"><span class="linenum">1889</span></a>  
<a name="l1890"><span class="linenum">1890</span></a>      return NULL;
<a name="l1891"><span class="linenum">1891</span></a>  }
<a name="l1892"><span class="linenum">1892</span></a>  
<a name="l1893"><span class="linenum">1893</span></a>  
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment">/**</span>
<a name="l1895"><span class="linenum">1895</span></a>  <span class="comment"> * Template tag for credits</span>
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment"> *</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment"> * Note: You can limit (and even disable) the number of links being displayed here though the Admin interface:</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment"> * Blog Settings &gt; Advanced &gt; Software credits</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment"> *</span>
<a name="l1900"><span class="linenum">1900</span></a>  <span class="comment"> * @param array</span>
<a name="l1901"><span class="linenum">1901</span></a>  <span class="comment"> */</span>
<a name="l1902"><span class="linenum">1902</span></a>  function <a class="function" onClick="logFunction('credits')" href="../../_functions/credits.html" onMouseOver="funcPopup(event,'credits')">credits</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l1903"><span class="linenum">1903</span></a>  {
<a name="l1904"><span class="linenum">1904</span></a>      <span class="comment">/**</span>
<a name="l1905"><span class="linenum">1905</span></a>  <span class="comment">     * @var AbstractSettings</span>
<a name="l1906"><span class="linenum">1906</span></a>  <span class="comment">     */</span>
<a name="l1907"><span class="linenum">1907</span></a>      global <a class="var it2236" onMouseOver="hilite(2236)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../_variables/global_Cache.html">$global_Cache</a>;
<a name="l1908"><span class="linenum">1908</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>;
<a name="l1909"><span class="linenum">1909</span></a>  
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l1911"><span class="linenum">1911</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1912"><span class="linenum">1912</span></a>              'list_start'  =&gt; ' ',
<a name="l1913"><span class="linenum">1913</span></a>              'list_end'    =&gt; ' ',
<a name="l1914"><span class="linenum">1914</span></a>              'item_start'  =&gt; ' ',
<a name="l1915"><span class="linenum">1915</span></a>              'item_end'    =&gt; ' ',
<a name="l1916"><span class="linenum">1916</span></a>              'separator'   =&gt; ',',
<a name="l1917"><span class="linenum">1917</span></a>              'after_item'  =&gt; '#',
<a name="l1918"><span class="linenum">1918</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1919"><span class="linenum">1919</span></a>  
<a name="l1920"><span class="linenum">1920</span></a>  
<a name="l1921"><span class="linenum">1921</span></a>      <a class="var it7295" onMouseOver="hilite(7295)" onMouseOut="lolite()" onClick="logVariable('cred_links')" href="../../_variables/cred_links.html">$cred_links</a> = <a class="var it2236" onMouseOver="hilite(2236)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../_variables/global_Cache.html">$global_Cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'creds' );
<a name="l1922"><span class="linenum">1922</span></a>      if( empty( <a class="var it7295" onMouseOver="hilite(7295)" onMouseOut="lolite()" onClick="logVariable('cred_links')" href="../../_variables/cred_links.html">$cred_links</a> ) )
<a name="l1923"><span class="linenum">1923</span></a>      {    // Use basic default:
<a name="l1924"><span class="linenum">1924</span></a>          <a class="var it7295" onMouseOver="hilite(7295)" onMouseOut="lolite()" onClick="logVariable('cred_links')" href="../../_variables/cred_links.html">$cred_links</a> = <a class="phpfunction" onClick="logFunction('unserialize')" href="../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>('a:2:{i:0;a:2:{i:0;s:24:&quot;http://b2evolution.net/r&quot;;i:1;s:3:&quot;CMS&quot;;}i:1;a:2:{i:0;s:36:&quot;http://b2evolution.net/web-hosting/r&quot;;i:1;s:19:&quot;quality web hosting&quot;;}}');
<a name="l1925"><span class="linenum">1925</span></a>      }
<a name="l1926"><span class="linenum">1926</span></a>  
<a name="l1927"><span class="linenum">1927</span></a>      <a class="var it4248" onMouseOver="hilite(4248)" onMouseOut="lolite()" onClick="logVariable('max_credits')" href="../../_variables/max_credits.html">$max_credits</a> = (empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) ? NULL : <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'max_footer_credits' ));
<a name="l1928"><span class="linenum">1928</span></a>  
<a name="l1929"><span class="linenum">1929</span></a>      <a class="function" onClick="logFunction('display_list')" href="../../_functions/display_list.html" onMouseOver="funcPopup(event,'display_list')">display_list</a>( <a class="var it7295" onMouseOver="hilite(7295)" onMouseOut="lolite()" onClick="logVariable('cred_links')" href="../../_variables/cred_links.html">$cred_links</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['list_start'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['list_end'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['separator'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['item_start'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['item_end'], NULL, <a class="var it4248" onMouseOver="hilite(4248)" onMouseOut="lolite()" onClick="logVariable('max_credits')" href="../../_variables/max_credits.html">$max_credits</a> );
<a name="l1930"><span class="linenum">1930</span></a>  
<a name="l1931"><span class="linenum">1931</span></a>      return <a class="var it4248" onMouseOver="hilite(4248)" onMouseOut="lolite()" onClick="logVariable('max_credits')" href="../../_variables/max_credits.html">$max_credits</a>;    
<a name="l1932"><span class="linenum">1932</span></a>  }
<a name="l1933"><span class="linenum">1933</span></a>  
<a name="l1934"><span class="linenum">1934</span></a>  
<a name="l1935"><span class="linenum">1935</span></a>  <span class="comment">/**</span>
<a name="l1936"><span class="linenum">1936</span></a>  <span class="comment"> * Get rating as 5 stars</span>
<a name="l1937"><span class="linenum">1937</span></a>  <span class="comment"> *</span>
<a name="l1938"><span class="linenum">1938</span></a>  <span class="comment"> * @param integer Number of stars</span>
<a name="l1939"><span class="linenum">1939</span></a>  <span class="comment"> * @param string Class name</span>
<a name="l1940"><span class="linenum">1940</span></a>  <span class="comment"> * @return string Template for star rating</span>
<a name="l1941"><span class="linenum">1941</span></a>  <span class="comment"> */</span>
<a name="l1942"><span class="linenum">1942</span></a>  function <a class="function" onClick="logFunction('get_star_rating')" href="../../_functions/get_star_rating.html" onMouseOver="funcPopup(event,'get_star_rating')">get_star_rating</a>( <a class="var it7296" onMouseOver="hilite(7296)" onMouseOut="lolite()" onClick="logVariable('stars')" href="../../_variables/stars.html">$stars</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'not-used-any-more' )
<a name="l1943"><span class="linenum">1943</span></a>  {
<a name="l1944"><span class="linenum">1944</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it7296" onMouseOver="hilite(7296)" onMouseOut="lolite()" onClick="logVariable('stars')" href="../../_variables/stars.html">$stars</a> ) )
<a name="l1945"><span class="linenum">1945</span></a>      {
<a name="l1946"><span class="linenum">1946</span></a>          return;
<a name="l1947"><span class="linenum">1947</span></a>      }
<a name="l1948"><span class="linenum">1948</span></a>  
<a name="l1949"><span class="linenum">1949</span></a>      <a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('average')" href="../../_variables/average.html">$average</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>( ( <a class="var it7296" onMouseOver="hilite(7296)" onMouseOut="lolite()" onClick="logVariable('stars')" href="../../_variables/stars.html">$stars</a> ) / 5 * 100 );
<a name="l1950"><span class="linenum">1950</span></a>  
<a name="l1951"><span class="linenum">1951</span></a>      return '&lt;div class=&quot;star_rating&quot;&gt;&lt;div style=&quot;width:'.<a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('average')" href="../../_variables/average.html">$average</a>.'%&quot;&gt;'.<a class="var it7296" onMouseOver="hilite(7296)" onMouseOut="lolite()" onClick="logVariable('stars')" href="../../_variables/stars.html">$stars</a>.' stars&lt;/div&gt;&lt;/div&gt;';
<a name="l1952"><span class="linenum">1952</span></a>  }
<a name="l1953"><span class="linenum">1953</span></a>  
<a name="l1954"><span class="linenum">1954</span></a>  
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment">/**</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment"> * Display rating as 5 stars</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment"> *</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment"> * @param integer Number of stars</span>
<a name="l1959"><span class="linenum">1959</span></a>  <span class="comment"> * @param string Class name</span>
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment"> */</span>
<a name="l1961"><span class="linenum">1961</span></a>  function <a class="function" onClick="logFunction('star_rating')" href="../../_functions/star_rating.html" onMouseOver="funcPopup(event,'star_rating')">star_rating</a>( <a class="var it7296" onMouseOver="hilite(7296)" onMouseOut="lolite()" onClick="logVariable('stars')" href="../../_variables/stars.html">$stars</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'not-used-any-more' )
<a name="l1962"><span class="linenum">1962</span></a>  {
<a name="l1963"><span class="linenum">1963</span></a>      echo <a class="function" onClick="logFunction('get_star_rating')" href="../../_functions/get_star_rating.html" onMouseOver="funcPopup(event,'get_star_rating')">get_star_rating</a>( <a class="var it7296" onMouseOver="hilite(7296)" onMouseOut="lolite()" onClick="logVariable('stars')" href="../../_variables/stars.html">$stars</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> );
<a name="l1964"><span class="linenum">1964</span></a>  }
<a name="l1965"><span class="linenum">1965</span></a>  
<a name="l1966"><span class="linenum">1966</span></a>  
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment">/**</span>
<a name="l1968"><span class="linenum">1968</span></a>  <span class="comment"> * Display &quot;powered by b2evolution&quot; logo</span>
<a name="l1969"><span class="linenum">1969</span></a>  <span class="comment"> */</span>
<a name="l1970"><span class="linenum">1970</span></a>  function <a class="function" onClick="logFunction('powered_by')" href="../../_functions/powered_by.html" onMouseOver="funcPopup(event,'powered_by')">powered_by</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l1971"><span class="linenum">1971</span></a>  {
<a name="l1972"><span class="linenum">1972</span></a>      <span class="comment">/**</span>
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment">     * @var AbstractSettings</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment">     */</span>
<a name="l1975"><span class="linenum">1975</span></a>      global <a class="var it2236" onMouseOver="hilite(2236)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../_variables/global_Cache.html">$global_Cache</a>;
<a name="l1976"><span class="linenum">1976</span></a>  
<a name="l1977"><span class="linenum">1977</span></a>      global <a class="var it4337" onMouseOver="hilite(4337)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../_variables/rsc_uri.html">$rsc_uri</a>;
<a name="l1978"><span class="linenum">1978</span></a>  
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l1980"><span class="linenum">1980</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1981"><span class="linenum">1981</span></a>              'block_start' =&gt; '&lt;div class=&quot;powered_by&quot;&gt;',
<a name="l1982"><span class="linenum">1982</span></a>              'block_end'   =&gt; '&lt;/div&gt;',
<a name="l1983"><span class="linenum">1983</span></a>              'img_url'     =&gt; '<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('rsc')" href="../../_variables/rsc.html">$rsc</a><a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('img')" href="../../_variables/img.html">$img</a>/powered-by-b2evolution-120t.gif',
<a name="l1984"><span class="linenum">1984</span></a>              'img_width'   =&gt; '',
<a name="l1985"><span class="linenum">1985</span></a>              'img_height'  =&gt; '',
<a name="l1986"><span class="linenum">1986</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1987"><span class="linenum">1987</span></a>  
<a name="l1988"><span class="linenum">1988</span></a>      echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['block_start'];
<a name="l1989"><span class="linenum">1989</span></a>  
<a name="l1990"><span class="linenum">1990</span></a>      <a class="var it3250" onMouseOver="hilite(3250)" onMouseOut="lolite()" onClick="logVariable('img_url')" href="../../_variables/img_url.html">$img_url</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('rsc')" href="../../_variables/rsc.html">$rsc</a>$', <a class="var it4337" onMouseOver="hilite(4337)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../_variables/rsc_uri.html">$rsc_uri</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['img_url'] );
<a name="l1991"><span class="linenum">1991</span></a>  
<a name="l1992"><span class="linenum">1992</span></a>      <a class="var it7297" onMouseOver="hilite(7297)" onMouseOut="lolite()" onClick="logVariable('evo_links')" href="../../_variables/evo_links.html">$evo_links</a> = <a class="var it2236" onMouseOver="hilite(2236)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../_variables/global_Cache.html">$global_Cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'evo_links' );
<a name="l1993"><span class="linenum">1993</span></a>      if( empty( <a class="var it7297" onMouseOver="hilite(7297)" onMouseOut="lolite()" onClick="logVariable('evo_links')" href="../../_variables/evo_links.html">$evo_links</a> ) )
<a name="l1994"><span class="linenum">1994</span></a>      {    // Use basic default:
<a name="l1995"><span class="linenum">1995</span></a>          <a class="var it7297" onMouseOver="hilite(7297)" onMouseOut="lolite()" onClick="logVariable('evo_links')" href="../../_variables/evo_links.html">$evo_links</a> = <a class="phpfunction" onClick="logFunction('unserialize')" href="../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>('a:1:{s:0:&quot;&quot;;a:1:{i:0;a:3:{i:0;i:100;i:1;s:23:&quot;http://b2evolution.net/&quot;;i:2;a:2:{i:0;a:2:{i:0;i:55;i:1;s:26:&quot;powered by b2evolution CMS&quot;;}i:1;a:2:{i:0;i:100;i:1;s:29:&quot;powered by an open-source CMS&quot;;}}}}}');
<a name="l1996"><span class="linenum">1996</span></a>      }
<a name="l1997"><span class="linenum">1997</span></a>  
<a name="l1998"><span class="linenum">1998</span></a>      echo <a class="function" onClick="logFunction('resolve_link_params')" href="../../_functions/resolve_link_params.html" onMouseOver="funcPopup(event,'resolve_link_params')">resolve_link_params</a>( <a class="var it7297" onMouseOver="hilite(7297)" onMouseOut="lolite()" onClick="logVariable('evo_links')" href="../../_variables/evo_links.html">$evo_links</a>, NULL, array(
<a name="l1999"><span class="linenum">1999</span></a>              'type'        =&gt; 'img',
<a name="l2000"><span class="linenum">2000</span></a>              'img_url'     =&gt; <a class="var it3250" onMouseOver="hilite(3250)" onMouseOut="lolite()" onClick="logVariable('img_url')" href="../../_variables/img_url.html">$img_url</a>,
<a name="l2001"><span class="linenum">2001</span></a>              'img_width'   =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['img_width'],
<a name="l2002"><span class="linenum">2002</span></a>              'img_height'  =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['img_height'],
<a name="l2003"><span class="linenum">2003</span></a>              'title'       =&gt; 'b2evolution CMS',
<a name="l2004"><span class="linenum">2004</span></a>          ) );
<a name="l2005"><span class="linenum">2005</span></a>  
<a name="l2006"><span class="linenum">2006</span></a>      echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['block_end'];
<a name="l2007"><span class="linenum">2007</span></a>  }
<a name="l2008"><span class="linenum">2008</span></a>  
<a name="l2009"><span class="linenum">2009</span></a>  
<a name="l2010"><span class="linenum">2010</span></a>  
<a name="l2011"><span class="linenum">2011</span></a>  <span class="comment">/**</span>
<a name="l2012"><span class="linenum">2012</span></a>  <span class="comment"> * DEPRECATED</span>
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment"> */</span>
<a name="l2014"><span class="linenum">2014</span></a>  function <a class="function" onClick="logFunction('bloginfo')" href="../../_functions/bloginfo.html" onMouseOver="funcPopup(event,'bloginfo')">bloginfo</a>( <a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('what')" href="../../_variables/what.html">$what</a> )
<a name="l2015"><span class="linenum">2015</span></a>  {
<a name="l2016"><span class="linenum">2016</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>;
<a name="l2017"><span class="linenum">2017</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('disp')" href="../../_functions/disp.html" onMouseOver="funcPopup(event,'disp')">disp</a>( <a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('what')" href="../../_variables/what.html">$what</a> );
<a name="l2018"><span class="linenum">2018</span></a>  }
<a name="l2019"><span class="linenum">2019</span></a>  
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment">/**</span>
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment"> * Display allowed tags for comments</span>
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment"> * (Mainly provided for WP compatibility. Not recommended for use)</span>
<a name="l2023"><span class="linenum">2023</span></a>  <span class="comment"> *</span>
<a name="l2024"><span class="linenum">2024</span></a>  <span class="comment"> * @param string format</span>
<a name="l2025"><span class="linenum">2025</span></a>  <span class="comment"> */</span>
<a name="l2026"><span class="linenum">2026</span></a>  function <a class="function" onClick="logFunction('comment_allowed_tags')" href="../../_functions/comment_allowed_tags.html" onMouseOver="funcPopup(event,'comment_allowed_tags')">comment_allowed_tags</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l2027"><span class="linenum">2027</span></a>  {
<a name="l2028"><span class="linenum">2028</span></a>      global <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('comment_allowed_tags')" href="../../_variables/comment_allowed_tags.html">$comment_allowed_tags</a>;
<a name="l2029"><span class="linenum">2029</span></a>  
<a name="l2030"><span class="linenum">2030</span></a>      echo <a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('comment_allowed_tags')" href="../../_variables/comment_allowed_tags.html">$comment_allowed_tags</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a> );
<a name="l2031"><span class="linenum">2031</span></a>  }
<a name="l2032"><span class="linenum">2032</span></a>  
<a name="l2033"><span class="linenum">2033</span></a>  <span class="comment">/**</span>
<a name="l2034"><span class="linenum">2034</span></a>  <span class="comment"> * DEPRECATED</span>
<a name="l2035"><span class="linenum">2035</span></a>  <span class="comment"> */</span>
<a name="l2036"><span class="linenum">2036</span></a>  function <a class="function" onClick="logFunction('link_pages')" href="../../_functions/link_pages.html" onMouseOver="funcPopup(event,'link_pages')">link_pages</a>()
<a name="l2037"><span class="linenum">2037</span></a>  {
<a name="l2038"><span class="linenum">2038</span></a>      echo '&lt;!-- <a class="function" onClick="logFunction('link_pages')" href="../../_functions/link_pages.html" onMouseOver="funcPopup(event,'link_pages')">link_pages</a>() is DEPRECATED --&gt;';
<a name="l2039"><span class="linenum">2039</span></a>  }
<a name="l2040"><span class="linenum">2040</span></a>  
<a name="l2041"><span class="linenum">2041</span></a>  
<a name="l2042"><span class="linenum">2042</span></a>  <span class="comment">/**</span>
<a name="l2043"><span class="linenum">2043</span></a>  <span class="comment"> * Return a formatted percentage (should probably go to _misc.funcs)</span>
<a name="l2044"><span class="linenum">2044</span></a>  <span class="comment"> */</span>
<a name="l2045"><span class="linenum">2045</span></a>  function <a class="function" onClick="logFunction('percentage')" href="../../_functions/percentage.html" onMouseOver="funcPopup(event,'percentage')">percentage</a>( <a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('hit_count')" href="../../_variables/hit_count.html">$hit_count</a>, <a class="var it7299" onMouseOver="hilite(7299)" onMouseOut="lolite()" onClick="logVariable('hit_total')" href="../../_variables/hit_total.html">$hit_total</a>, <a class="var it6106" onMouseOver="hilite(6106)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../../_variables/decimals.html">$decimals</a> = 1, <a class="var it7300" onMouseOver="hilite(7300)" onMouseOut="lolite()" onClick="logVariable('dec_point')" href="../../_variables/dec_point.html">$dec_point</a> = '.' )
<a name="l2046"><span class="linenum">2046</span></a>  {
<a name="l2047"><span class="linenum">2047</span></a>      <a class="var it7301" onMouseOver="hilite(7301)" onMouseOut="lolite()" onClick="logVariable('percentage')" href="../../_variables/percentage.html">$percentage</a> = <a class="var it7299" onMouseOver="hilite(7299)" onMouseOut="lolite()" onClick="logVariable('hit_total')" href="../../_variables/hit_total.html">$hit_total</a> &gt; 0 ? <a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('hit_count')" href="../../_variables/hit_count.html">$hit_count</a> * 100 / <a class="var it7299" onMouseOver="hilite(7299)" onMouseOut="lolite()" onClick="logVariable('hit_total')" href="../../_variables/hit_total.html">$hit_total</a> : 0;
<a name="l2048"><span class="linenum">2048</span></a>      return <a class="phpfunction" onClick="logFunction('number_format')" href="../../_functions/number_format.html" onMouseOver="phpfuncPopup(event,'number_format')">number_format</a>( <a class="var it7301" onMouseOver="hilite(7301)" onMouseOut="lolite()" onClick="logVariable('percentage')" href="../../_variables/percentage.html">$percentage</a>, <a class="var it6106" onMouseOver="hilite(6106)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../../_variables/decimals.html">$decimals</a>, <a class="var it7300" onMouseOver="hilite(7300)" onMouseOut="lolite()" onClick="logVariable('dec_point')" href="../../_variables/dec_point.html">$dec_point</a>, '' ).'&amp;nbsp;%';
<a name="l2049"><span class="linenum">2049</span></a>  }
<a name="l2050"><span class="linenum">2050</span></a>  
<a name="l2051"><span class="linenum">2051</span></a>  function <a class="function" onClick="logFunction('addup_percentage')" href="../../_functions/addup_percentage.html" onMouseOver="funcPopup(event,'addup_percentage')">addup_percentage</a>( <a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('hit_count')" href="../../_variables/hit_count.html">$hit_count</a>, <a class="var it7299" onMouseOver="hilite(7299)" onMouseOut="lolite()" onClick="logVariable('hit_total')" href="../../_variables/hit_total.html">$hit_total</a>, <a class="var it6106" onMouseOver="hilite(6106)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../../_variables/decimals.html">$decimals</a> = 1, <a class="var it7300" onMouseOver="hilite(7300)" onMouseOut="lolite()" onClick="logVariable('dec_point')" href="../../_variables/dec_point.html">$dec_point</a> = '.' )
<a name="l2052"><span class="linenum">2052</span></a>  {
<a name="l2053"><span class="linenum">2053</span></a>      static <a class="var it7302" onMouseOver="hilite(7302)" onMouseOut="lolite()" onClick="logVariable('addup')" href="../../_variables/addup.html">$addup</a> = 0;
<a name="l2054"><span class="linenum">2054</span></a>  
<a name="l2055"><span class="linenum">2055</span></a>      <a class="var it7302" onMouseOver="hilite(7302)" onMouseOut="lolite()" onClick="logVariable('addup')" href="../../_variables/addup.html">$addup</a> += <a class="var it7298" onMouseOver="hilite(7298)" onMouseOut="lolite()" onClick="logVariable('hit_count')" href="../../_variables/hit_count.html">$hit_count</a>;
<a name="l2056"><span class="linenum">2056</span></a>      return <a class="phpfunction" onClick="logFunction('number_format')" href="../../_functions/number_format.html" onMouseOver="phpfuncPopup(event,'number_format')">number_format</a>( <a class="var it7302" onMouseOver="hilite(7302)" onMouseOut="lolite()" onClick="logVariable('addup')" href="../../_variables/addup.html">$addup</a> * 100 / <a class="var it7299" onMouseOver="hilite(7299)" onMouseOut="lolite()" onClick="logVariable('hit_total')" href="../../_variables/hit_total.html">$hit_total</a>, <a class="var it6106" onMouseOver="hilite(6106)" onMouseOut="lolite()" onClick="logVariable('decimals')" href="../../_variables/decimals.html">$decimals</a>, <a class="var it7300" onMouseOver="hilite(7300)" onMouseOut="lolite()" onClick="logVariable('dec_point')" href="../../_variables/dec_point.html">$dec_point</a>, '' ).'&amp;nbsp;%';
<a name="l2057"><span class="linenum">2057</span></a>  }
<a name="l2058"><span class="linenum">2058</span></a>  
<a name="l2059"><span class="linenum">2059</span></a>  
<a name="l2060"><span class="linenum">2060</span></a>  <span class="comment">/**</span>
<a name="l2061"><span class="linenum">2061</span></a>  <span class="comment"> * Check if the array given as the first param contains recursion</span>
<a name="l2062"><span class="linenum">2062</span></a>  <span class="comment"> *</span>
<a name="l2063"><span class="linenum">2063</span></a>  <span class="comment"> * @param array what to check</span>
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment"> * @param array contains object which were already seen</span>
<a name="l2065"><span class="linenum">2065</span></a>  <span class="comment"> * @return boolean true if contains recursion false otherwise</span>
<a name="l2066"><span class="linenum">2066</span></a>  <span class="comment"> */</span>
<a name="l2067"><span class="linenum">2067</span></a>  function <a class="function" onClick="logFunction('is_recursive')" href="../../_functions/is_recursive.html" onMouseOver="funcPopup(event,'is_recursive')">is_recursive</a>( <span class="comment">/*array*/</span> &amp; <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../_variables/array.html">$array</a>, <span class="comment">/*array*/</span> &amp; <a class="var it7303" onMouseOver="hilite(7303)" onMouseOut="lolite()" onClick="logVariable('alreadySeen')" href="../../_variables/alreadySeen.html">$alreadySeen</a> = array() )
<a name="l2068"><span class="linenum">2068</span></a>  {
<a name="l2069"><span class="linenum">2069</span></a>      static <a class="var it7304" onMouseOver="hilite(7304)" onMouseOut="lolite()" onClick="logVariable('uniqueObject')" href="../../_variables/uniqueObject.html">$uniqueObject</a>;
<a name="l2070"><span class="linenum">2070</span></a>      if( !<a class="var it7304" onMouseOver="hilite(7304)" onMouseOut="lolite()" onClick="logVariable('uniqueObject')" href="../../_variables/uniqueObject.html">$uniqueObject</a> )
<a name="l2071"><span class="linenum">2071</span></a>      {
<a name="l2072"><span class="linenum">2072</span></a>          <a class="var it7304" onMouseOver="hilite(7304)" onMouseOut="lolite()" onClick="logVariable('uniqueObject')" href="../../_variables/uniqueObject.html">$uniqueObject</a> = new stdClass;
<a name="l2073"><span class="linenum">2073</span></a>      }
<a name="l2074"><span class="linenum">2074</span></a>  
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment">    // Set main array as already seen</span>
<a name="l2076"><span class="linenum">2076</span></a>      <a class="var it7303" onMouseOver="hilite(7303)" onMouseOut="lolite()" onClick="logVariable('alreadySeen')" href="../../_variables/alreadySeen.html">$alreadySeen</a>[] = &amp; <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../_variables/array.html">$array</a>;
<a name="l2077"><span class="linenum">2077</span></a>  
<a name="l2078"><span class="linenum">2078</span></a>      foreach( <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('array')" href="../../_variables/array.html">$array</a> as &amp; <a class="var it3175" onMouseOver="hilite(3175)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> )
<a name="l2079"><span class="linenum">2079</span></a>      { // for each item in array
<a name="l2080"><span class="linenum">2080</span></a>          if( !<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it3175" onMouseOver="hilite(3175)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> ) )
<a name="l2081"><span class="linenum">2081</span></a>          { // if not array, we don't have to check it
<a name="l2082"><span class="linenum">2082</span></a>              continue;
<a name="l2083"><span class="linenum">2083</span></a>          }
<a name="l2084"><span class="linenum">2084</span></a>  
<a name="l2085"><span class="linenum">2085</span></a>  <span class="comment">        // put the unique object into the end of the array</span>
<a name="l2086"><span class="linenum">2086</span></a>          <a class="var it3175" onMouseOver="hilite(3175)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>[] = <a class="var it7304" onMouseOver="hilite(7304)" onMouseOut="lolite()" onClick="logVariable('uniqueObject')" href="../../_variables/uniqueObject.html">$uniqueObject</a>;
<a name="l2087"><span class="linenum">2087</span></a>          <a class="var it7305" onMouseOver="hilite(7305)" onMouseOut="lolite()" onClick="logVariable('recursionDetected')" href="../../_variables/recursionDetected.html">$recursionDetected</a> = false;
<a name="l2088"><span class="linenum">2088</span></a>          foreach( <a class="var it7303" onMouseOver="hilite(7303)" onMouseOut="lolite()" onClick="logVariable('alreadySeen')" href="../../_variables/alreadySeen.html">$alreadySeen</a> as <a class="var it7306" onMouseOver="hilite(7306)" onMouseOut="lolite()" onClick="logVariable('candidate')" href="../../_variables/candidate.html">$candidate</a> )
<a name="l2089"><span class="linenum">2089</span></a>          {
<a name="l2090"><span class="linenum">2090</span></a>              if( <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>( <a class="var it7306" onMouseOver="hilite(7306)" onMouseOut="lolite()" onClick="logVariable('candidate')" href="../../_variables/candidate.html">$candidate</a> ) === <a class="var it7304" onMouseOver="hilite(7304)" onMouseOut="lolite()" onClick="logVariable('uniqueObject')" href="../../_variables/uniqueObject.html">$uniqueObject</a> )
<a name="l2091"><span class="linenum">2091</span></a>              { // In the end of an already scanned array is the same unique Obect, this means that recursion was detected
<a name="l2092"><span class="linenum">2092</span></a>                  <a class="var it7305" onMouseOver="hilite(7305)" onMouseOut="lolite()" onClick="logVariable('recursionDetected')" href="../../_variables/recursionDetected.html">$recursionDetected</a> = true;
<a name="l2093"><span class="linenum">2093</span></a>                  break;
<a name="l2094"><span class="linenum">2094</span></a>              }
<a name="l2095"><span class="linenum">2095</span></a>          }
<a name="l2096"><span class="linenum">2096</span></a>  
<a name="l2097"><span class="linenum">2097</span></a>          <a class="phpfunction" onClick="logFunction('array_pop')" href="../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>( <a class="var it3175" onMouseOver="hilite(3175)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> );
<a name="l2098"><span class="linenum">2098</span></a>  
<a name="l2099"><span class="linenum">2099</span></a>          if( <a class="var it7305" onMouseOver="hilite(7305)" onMouseOut="lolite()" onClick="logVariable('recursionDetected')" href="../../_variables/recursionDetected.html">$recursionDetected</a> || <a class="function" onClick="logFunction('is_recursive')" href="../../_functions/is_recursive.html" onMouseOver="funcPopup(event,'is_recursive')">is_recursive</a>( <a class="var it3175" onMouseOver="hilite(3175)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>, <a class="var it7303" onMouseOver="hilite(7303)" onMouseOut="lolite()" onClick="logVariable('alreadySeen')" href="../../_variables/alreadySeen.html">$alreadySeen</a> ) )
<a name="l2100"><span class="linenum">2100</span></a>          { // Check until recursion detected or there are not more arrays
<a name="l2101"><span class="linenum">2101</span></a>              return true;
<a name="l2102"><span class="linenum">2102</span></a>          }
<a name="l2103"><span class="linenum">2103</span></a>      }
<a name="l2104"><span class="linenum">2104</span></a>  
<a name="l2105"><span class="linenum">2105</span></a>      return false;
<a name="l2106"><span class="linenum">2106</span></a>  }
<a name="l2107"><span class="linenum">2107</span></a>  
<a name="l2108"><span class="linenum">2108</span></a>  
<a name="l2109"><span class="linenum">2109</span></a>  <span class="comment">/**</span>
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment"> * Display a form (like comment or contact form) through an ajax call</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment"> *</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment"> * @param array params</span>
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment"> */</span>
<a name="l2114"><span class="linenum">2114</span></a>  function <a class="function" onClick="logFunction('display_ajax_form')" href="../../_functions/display_ajax_form.html" onMouseOver="funcPopup(event,'display_ajax_form')">display_ajax_form</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> )
<a name="l2115"><span class="linenum">2115</span></a>  {
<a name="l2116"><span class="linenum">2116</span></a>      global <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>, <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('samedomain_htsrv_url')" href="../../_variables/samedomain_htsrv_url.html">$samedomain_htsrv_url</a>, <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>;
<a name="l2117"><span class="linenum">2117</span></a>  
<a name="l2118"><span class="linenum">2118</span></a>      if( <a class="function" onClick="logFunction('is_recursive')" href="../../_functions/is_recursive.html" onMouseOver="funcPopup(event,'is_recursive')">is_recursive</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> ) )
<a name="l2119"><span class="linenum">2119</span></a>      { // The params array contains recursion, don't try to encode, display error message instead
<a name="l2120"><span class="linenum">2120</span></a>  <span class="comment">        // We don't use translation because this situation should not really happen ( Probably it happesn with some wrong skin )</span>
<a name="l2121"><span class="linenum">2121</span></a>          echo '&lt;p style=&quot;color:red;font-weight:bold&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'This section can\'t be displayed because wrong params were created by the skin.' ).'&lt;/p&gt;';
<a name="l2122"><span class="linenum">2122</span></a>          return;
<a name="l2123"><span class="linenum">2123</span></a>      }
<a name="l2124"><span class="linenum">2124</span></a>  
<a name="l2125"><span class="linenum">2125</span></a>      if( empty( <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a> ) )
<a name="l2126"><span class="linenum">2126</span></a>      { // Set number for ajax form to use unique ID for each <span class="keyword">new </span><a class="class" onClick="logClass('form')" href="../../_classes/form.html" onMouseOver="classPopup(event,'form')">form</a>
<a name="l2127"><span class="linenum">2127</span></a>          <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a> = 0;
<a name="l2128"><span class="linenum">2128</span></a>      }
<a name="l2129"><span class="linenum">2129</span></a>      <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>++;
<a name="l2130"><span class="linenum">2130</span></a>  
<a name="l2131"><span class="linenum">2131</span></a>      echo '&lt;div id=&quot;ajax_form_number_'.<a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>.'&quot; class=&quot;section_requires_javascript&quot;&gt;';
<a name="l2132"><span class="linenum">2132</span></a>  
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment">    // Needs json_encode function to create json type params</span>
<a name="l2134"><span class="linenum">2134</span></a>      <a class="var it5671" onMouseOver="hilite(5671)" onMouseOut="lolite()" onClick="logVariable('json_params')" href="../../_variables/json_params.html">$json_params</a> = <a class="function" onClick="logFunction('evo_json_encode')" href="../../_functions/evo_json_encode.html" onMouseOver="funcPopup(event,'evo_json_encode')">evo_json_encode</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2135"><span class="linenum">2135</span></a>      <a class="var it7308" onMouseOver="hilite(7308)" onMouseOut="lolite()" onClick="logVariable('ajax_loader')" href="../../_variables/ajax_loader.html">$ajax_loader</a> = '&lt;p class=&quot;ajax-loader&quot;&gt;&lt;span class=&quot;loader_img loader_ajax_form&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Loading...').'&quot;&gt;&lt;/span&gt;&lt;br /&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Form is loading...' ).'&lt;/p&gt;';
<a name="l2136"><span class="linenum">2136</span></a>      ?&gt;
<a name="l2137"><span class="linenum">2137</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l2138"><span class="linenum">2138</span></a>  <span class="comment">        // display loader gif until the ajax call returns</span>
<a name="l2139"><span class="linenum">2139</span></a>          document.<a class="function" onClick="logFunction('write')" href="../../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>( &lt;?php echo &quot;'&quot;.<a class="var it7308" onMouseOver="hilite(7308)" onMouseOut="lolite()" onClick="logVariable('ajax_loader')" href="../../_variables/ajax_loader.html">$ajax_loader</a>.&quot;'&quot;; ?&gt; );
<a name="l2140"><span class="linenum">2140</span></a>  
<a name="l2141"><span class="linenum">2141</span></a>          var ajax_form_offset_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt; = jQuery('#ajax_form_number_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt;').offset().top;
<a name="l2142"><span class="linenum">2142</span></a>          var request_sent_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt; = false;
<a name="l2143"><span class="linenum">2143</span></a>  
<a name="l2144"><span class="linenum">2144</span></a>  		function <a class="function" onClick="logFunction('get_form_')" href="../../_functions/get_form_.html" onMouseOver="funcPopup(event,'get_form_')">get_form_</a>&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt;()
<a name="l2145"><span class="linenum">2145</span></a>          {
<a name="l2146"><span class="linenum">2146</span></a>              jQuery.ajax({
<a name="l2147"><span class="linenum">2147</span></a>                  url: '&lt;?php echo <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('samedomain_htsrv_url')" href="../../_variables/samedomain_htsrv_url.html">$samedomain_htsrv_url</a>; ?&gt;anon_async.php',
<a name="l2148"><span class="linenum">2148</span></a>                  type: 'POST',
<a name="l2149"><span class="linenum">2149</span></a>                  data: &lt;?php echo <a class="var it5671" onMouseOver="hilite(5671)" onMouseOut="lolite()" onClick="logVariable('json_params')" href="../../_variables/json_params.html">$json_params</a>; ?&gt;,
<a name="l2150"><span class="linenum">2150</span></a>                  success: function(result)
<a name="l2151"><span class="linenum">2151</span></a>                      {
<a name="l2152"><span class="linenum">2152</span></a>                          jQuery('#ajax_form_number_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt;').html( <a class="function" onClick="logFunction('ajax_debug_clear')" href="../../_functions/ajax_debug_clear.html" onMouseOver="funcPopup(event,'ajax_debug_clear')">ajax_debug_clear</a>( result ) );
<a name="l2153"><span class="linenum">2153</span></a>                      }
<a name="l2154"><span class="linenum">2154</span></a>              });
<a name="l2155"><span class="linenum">2155</span></a>          }
<a name="l2156"><span class="linenum">2156</span></a>  
<a name="l2157"><span class="linenum">2157</span></a>  		function <a class="function" onClick="logFunction('check_and_show_')" href="../../_functions/check_and_show_.html" onMouseOver="funcPopup(event,'check_and_show_')">check_and_show_</a>&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt;()
<a name="l2158"><span class="linenum">2158</span></a>          {
<a name="l2159"><span class="linenum">2159</span></a>              var window_scrollTop = jQuery(window).scrollTop();
<a name="l2160"><span class="linenum">2160</span></a>              var window_height = jQuery(window).height();
<a name="l2161"><span class="linenum">2161</span></a>  <span class="comment">            // check if the ajax form is visible, or if it will be visible soon ( 20 pixel )</span>
<a name="l2162"><span class="linenum">2162</span></a>              if( window_scrollTop &gt;= ajax_form_offset_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt; - window_height - 20 )
<a name="l2163"><span class="linenum">2163</span></a>              {
<a name="l2164"><span class="linenum">2164</span></a>                  if( !request_sent_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt; )
<a name="l2165"><span class="linenum">2165</span></a>                  {
<a name="l2166"><span class="linenum">2166</span></a>                      request_sent_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt; = true;
<a name="l2167"><span class="linenum">2167</span></a>  <span class="comment">                    // get the form</span>
<a name="l2168"><span class="linenum">2168</span></a>                      get_form_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt;();
<a name="l2169"><span class="linenum">2169</span></a>                  }
<a name="l2170"><span class="linenum">2170</span></a>              }
<a name="l2171"><span class="linenum">2171</span></a>          }
<a name="l2172"><span class="linenum">2172</span></a>  
<a name="l2173"><span class="linenum">2173</span></a>          jQuery(window).scroll(function() {
<a name="l2174"><span class="linenum">2174</span></a>              check_and_show_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt;();
<a name="l2175"><span class="linenum">2175</span></a>          });
<a name="l2176"><span class="linenum">2176</span></a>  
<a name="l2177"><span class="linenum">2177</span></a>          jQuery(document).ready( function() {
<a name="l2178"><span class="linenum">2178</span></a>              check_and_show_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt;();
<a name="l2179"><span class="linenum">2179</span></a>          });
<a name="l2180"><span class="linenum">2180</span></a>  
<a name="l2181"><span class="linenum">2181</span></a>          jQuery(window).<a class="function" onClick="logFunction('resize')" href="../../_functions/resize.html" onMouseOver="funcPopup(event,'resize')">resize</a>( function() {
<a name="l2182"><span class="linenum">2182</span></a>              check_and_show_&lt;?php echo <a class="var it7307" onMouseOver="hilite(7307)" onMouseOut="lolite()" onClick="logVariable('ajax_form_number')" href="../../_variables/ajax_form_number.html">$ajax_form_number</a>; ?&gt;();
<a name="l2183"><span class="linenum">2183</span></a>          });
<a name="l2184"><span class="linenum">2184</span></a>      &lt;/script&gt;
<a name="l2185"><span class="linenum">2185</span></a>      &lt;noscript&gt;
<a name="l2186"><span class="linenum">2186</span></a>          &lt;?php echo '&lt;p&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'This section can only be displayed by javascript enabled browsers.' ).'&lt;/p&gt;'; ?&gt;
<a name="l2187"><span class="linenum">2187</span></a>      &lt;/noscript&gt;
<a name="l2188"><span class="linenum">2188</span></a>      &lt;?php
<a name="l2189"><span class="linenum">2189</span></a>      echo '&lt;/div&gt;';
<a name="l2190"><span class="linenum">2190</span></a>  }
<a name="l2191"><span class="linenum">2191</span></a>  
<a name="l2192"><span class="linenum">2192</span></a>  
<a name="l2193"><span class="linenum">2193</span></a>  <span class="comment">/**</span>
<a name="l2194"><span class="linenum">2194</span></a>  <span class="comment"> * Display login form</span>
<a name="l2195"><span class="linenum">2195</span></a>  <span class="comment"> *</span>
<a name="l2196"><span class="linenum">2196</span></a>  <span class="comment"> * @param array params</span>
<a name="l2197"><span class="linenum">2197</span></a>  <span class="comment"> */</span>
<a name="l2198"><span class="linenum">2198</span></a>  function <a class="function" onClick="logFunction('display_login_form')" href="../../_functions/display_login_form.html" onMouseOver="funcPopup(event,'display_login_form')">display_login_form</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> )
<a name="l2199"><span class="linenum">2199</span></a>  {
<a name="l2200"><span class="linenum">2200</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>, <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>, <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>;
<a name="l2201"><span class="linenum">2201</span></a>      global <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>, <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../_variables/ReqHost.html">$ReqHost</a>, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l2202"><span class="linenum">2202</span></a>  
<a name="l2203"><span class="linenum">2203</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2204"><span class="linenum">2204</span></a>              'form_before' =&gt; '',
<a name="l2205"><span class="linenum">2205</span></a>              'form_after' =&gt; '',
<a name="l2206"><span class="linenum">2206</span></a>              'form_action' =&gt; '',
<a name="l2207"><span class="linenum">2207</span></a>              'form_name' =&gt; 'login_form',
<a name="l2208"><span class="linenum">2208</span></a>              'form_title' =&gt; '',
<a name="l2209"><span class="linenum">2209</span></a>              'form_layout' =&gt; '',
<a name="l2210"><span class="linenum">2210</span></a>              'form_class' =&gt; 'bComment',
<a name="l2211"><span class="linenum">2211</span></a>              'source' =&gt; 'inskin login form',
<a name="l2212"><span class="linenum">2212</span></a>              'inskin' =&gt; true,
<a name="l2213"><span class="linenum">2213</span></a>              'inskin_urls' =&gt; true, // Use urls of front-end
<a name="l2214"><span class="linenum">2214</span></a>              'login_required' =&gt; true,
<a name="l2215"><span class="linenum">2215</span></a>              'validate_required' =&gt; NULL,
<a name="l2216"><span class="linenum">2216</span></a>              'redirect_to' =&gt; '',
<a name="l2217"><span class="linenum">2217</span></a>              'return_to' =&gt; '',
<a name="l2218"><span class="linenum">2218</span></a>              'login' =&gt; '',
<a name="l2219"><span class="linenum">2219</span></a>              'action' =&gt; '',
<a name="l2220"><span class="linenum">2220</span></a>              'reqID' =&gt; '',
<a name="l2221"><span class="linenum">2221</span></a>              'sessID' =&gt; '',
<a name="l2222"><span class="linenum">2222</span></a>              'transmit_hashed_password' =&gt; false,
<a name="l2223"><span class="linenum">2223</span></a>              'display_abort_link'  =&gt; true,
<a name="l2224"><span class="linenum">2224</span></a>              'abort_link_position' =&gt; 'above_form', // 'above_form', 'form_title'
<a name="l2225"><span class="linenum">2225</span></a>              'abort_link_text'     =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Abort login!'),
<a name="l2226"><span class="linenum">2226</span></a>              'display_reg_link'    =&gt; false, // Display registration link after login button
<a name="l2227"><span class="linenum">2227</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2228"><span class="linenum">2228</span></a>  
<a name="l2229"><span class="linenum">2229</span></a>      <a class="var it6300" onMouseOver="hilite(6300)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../_variables/inskin.html">$inskin</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['inskin'];
<a name="l2230"><span class="linenum">2230</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['login'];
<a name="l2231"><span class="linenum">2231</span></a>      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['redirect_to'];
<a name="l2232"><span class="linenum">2232</span></a>      <a class="var it1867" onMouseOver="hilite(1867)" onMouseOut="lolite()" onClick="logVariable('return_to')" href="../../_variables/return_to.html">$return_to</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['return_to'];
<a name="l2233"><span class="linenum">2233</span></a>      <a class="var it1647" onMouseOver="hilite(1647)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a> = array();
<a name="l2234"><span class="linenum">2234</span></a>      <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a> = array();
<a name="l2235"><span class="linenum">2235</span></a>  
<a name="l2236"><span class="linenum">2236</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['display_abort_link']
<a name="l2237"><span class="linenum">2237</span></a>          &amp;&amp; empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['login_required'] )
<a name="l2238"><span class="linenum">2238</span></a>          &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['action'] != 'req_validatemail'
<a name="l2239"><span class="linenum">2239</span></a>          &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it1867" onMouseOver="hilite(1867)" onMouseOut="lolite()" onClick="logVariable('return_to')" href="../../_variables/return_to.html">$return_to</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a> ) !== 0
<a name="l2240"><span class="linenum">2240</span></a>          &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it1867" onMouseOver="hilite(1867)" onMouseOut="lolite()" onClick="logVariable('return_to')" href="../../_variables/return_to.html">$return_to</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a> ) !== 0 )
<a name="l2241"><span class="linenum">2241</span></a>      { // No login required, allow to pass through
<a name="l2242"><span class="linenum">2242</span></a>  <span class="comment">        // TODO: dh&gt; validate return_to param?!</span>
<a name="l2243"><span class="linenum">2243</span></a>  <span class="comment">        // check if return_to url requires logged in user</span>
<a name="l2244"><span class="linenum">2244</span></a>          if( empty( <a class="var it1867" onMouseOver="hilite(1867)" onMouseOut="lolite()" onClick="logVariable('return_to')" href="../../_variables/return_to.html">$return_to</a> ) || <a class="function" onClick="logFunction('require_login')" href="../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>( <a class="var it1867" onMouseOver="hilite(1867)" onMouseOut="lolite()" onClick="logVariable('return_to')" href="../../_variables/return_to.html">$return_to</a>, true ) )
<a name="l2245"><span class="linenum">2245</span></a>          { // logged in user require for return_to url
<a name="l2246"><span class="linenum">2246</span></a>              if( !empty( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> ) )
<a name="l2247"><span class="linenum">2247</span></a>              { // blog is set
<a name="l2248"><span class="linenum">2248</span></a>                  if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) )
<a name="l2249"><span class="linenum">2249</span></a>                  {
<a name="l2250"><span class="linenum">2250</span></a>                      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l2251"><span class="linenum">2251</span></a>                      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>, false );
<a name="l2252"><span class="linenum">2252</span></a>                  }
<a name="l2253"><span class="linenum">2253</span></a>  <span class="comment">                // set abort url to Blog url</span>
<a name="l2254"><span class="linenum">2254</span></a>                  <a class="var it7309" onMouseOver="hilite(7309)" onMouseOut="lolite()" onClick="logVariable('abort_url')" href="../../_variables/abort_url.html">$abort_url</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l2255"><span class="linenum">2255</span></a>              }
<a name="l2256"><span class="linenum">2256</span></a>              else
<a name="l2257"><span class="linenum">2257</span></a>              { // set abort login url to base url
<a name="l2258"><span class="linenum">2258</span></a>                  <a class="var it7309" onMouseOver="hilite(7309)" onMouseOut="lolite()" onClick="logVariable('abort_url')" href="../../_variables/abort_url.html">$abort_url</a> = <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>;
<a name="l2259"><span class="linenum">2259</span></a>              }
<a name="l2260"><span class="linenum">2260</span></a>          }
<a name="l2261"><span class="linenum">2261</span></a>          else
<a name="l2262"><span class="linenum">2262</span></a>          { // logged in user isn't required for return_to url, set abort url to return_to
<a name="l2263"><span class="linenum">2263</span></a>              <a class="var it7309" onMouseOver="hilite(7309)" onMouseOut="lolite()" onClick="logVariable('abort_url')" href="../../_variables/abort_url.html">$abort_url</a> = <a class="var it1867" onMouseOver="hilite(1867)" onMouseOut="lolite()" onClick="logVariable('return_to')" href="../../_variables/return_to.html">$return_to</a>;
<a name="l2264"><span class="linenum">2264</span></a>          }
<a name="l2265"><span class="linenum">2265</span></a>  <span class="comment">        // Gets displayed as link to the location on the login form if no login is required</span>
<a name="l2266"><span class="linenum">2266</span></a>          <a class="var it7310" onMouseOver="hilite(7310)" onMouseOut="lolite()" onClick="logVariable('abort_link')" href="../../_variables/abort_link.html">$abort_link</a> = '&lt;a href=&quot;'.<a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>( <a class="function" onClick="logFunction('url_rel_to_same_host')" href="../../_functions/url_rel_to_same_host.html" onMouseOver="funcPopup(event,'url_rel_to_same_host')">url_rel_to_same_host</a>( <a class="var it7309" onMouseOver="hilite(7309)" onMouseOut="lolite()" onClick="logVariable('abort_url')" href="../../_variables/abort_url.html">$abort_url</a>, <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../_variables/ReqHost.html">$ReqHost</a> ) ).'&quot;&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['abort_link_text'].'&lt;/a&gt;';
<a name="l2267"><span class="linenum">2267</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['abort_link_position'] == 'above_form' )
<a name="l2268"><span class="linenum">2268</span></a>          { // Display an abort link under login form
<a name="l2269"><span class="linenum">2269</span></a>              <a class="var it1647" onMouseOver="hilite(1647)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[] = <a class="var it7310" onMouseOver="hilite(7310)" onMouseOut="lolite()" onClick="logVariable('abort_link')" href="../../_variables/abort_link.html">$abort_link</a>;
<a name="l2270"><span class="linenum">2270</span></a>          }
<a name="l2271"><span class="linenum">2271</span></a>          elseif( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['abort_link_position'] == 'form_title' )
<a name="l2272"><span class="linenum">2272</span></a>          { // Display an abort link in form title block
<a name="l2273"><span class="linenum">2273</span></a>              <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a>[] = <a class="var it7310" onMouseOver="hilite(7310)" onMouseOut="lolite()" onClick="logVariable('abort_link')" href="../../_variables/abort_link.html">$abort_link</a>;
<a name="l2274"><span class="linenum">2274</span></a>          }
<a name="l2275"><span class="linenum">2275</span></a>      }
<a name="l2276"><span class="linenum">2276</span></a>  
<a name="l2277"><span class="linenum">2277</span></a>      if( ! <a class="var it6300" onMouseOver="hilite(6300)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../_variables/inskin.html">$inskin</a> &amp;&amp; <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l2278"><span class="linenum">2278</span></a>      { // if we arrive here, but are logged in, provide an option to <a class="function" onClick="logFunction('logout')" href="../../_functions/logout.html" onMouseOver="funcPopup(event,'logout')">logout</a> (e.g. during the email validation procedure)
<a name="l2279"><span class="linenum">2279</span></a>          <a class="var it1647" onMouseOver="hilite(1647)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[] = <a class="function" onClick="logFunction('get_user_logout_link')" href="../../_functions/get_user_logout_link.html" onMouseOver="funcPopup(event,'get_user_logout_link')">get_user_logout_link</a>();
<a name="l2280"><span class="linenum">2280</span></a>      }
<a name="l2281"><span class="linenum">2281</span></a>  
<a name="l2282"><span class="linenum">2282</span></a>      if( <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1647" onMouseOver="hilite(1647)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a> ) )
<a name="l2283"><span class="linenum">2283</span></a>      {
<a name="l2284"><span class="linenum">2284</span></a>          echo '&lt;div class=&quot;evo_form__login_links&quot;&gt;'
<a name="l2285"><span class="linenum">2285</span></a>                  .'&lt;div class=&quot;floatright&quot;&gt;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( <a class="var it1647" onMouseOver="hilite(1647)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>, ' &amp;middot; ' ).'&lt;/div&gt;'
<a name="l2286"><span class="linenum">2286</span></a>                  .'&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;'
<a name="l2287"><span class="linenum">2287</span></a>              .'&lt;/div&gt;';
<a name="l2288"><span class="linenum">2288</span></a>      }
<a name="l2289"><span class="linenum">2289</span></a>  
<a name="l2290"><span class="linenum">2290</span></a>      <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a> ) ? '&lt;span class=&quot;pull-right&quot;&gt;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' ', <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a> ).'&lt;/span&gt;' : '';
<a name="l2291"><span class="linenum">2291</span></a>      echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a>$', <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_before'] );
<a name="l2292"><span class="linenum">2292</span></a>  
<a name="l2293"><span class="linenum">2293</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_action'] , <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_name'], 'post', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_layout'] );
<a name="l2294"><span class="linenum">2294</span></a>  
<a name="l2295"><span class="linenum">2295</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_form')" href="../../_functions/begin_form.html" onMouseOver="funcPopup(event,'begin_form')">begin_form</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_class'] );
<a name="l2296"><span class="linenum">2296</span></a>  
<a name="l2297"><span class="linenum">2297</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('add_crumb')" href="../../_functions/add_crumb.html" onMouseOver="funcPopup(event,'add_crumb')">add_crumb</a>( 'loginform' );
<a name="l2298"><span class="linenum">2298</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../_variables/source.html">$source</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'source', 'string', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['source'].' login form' );
<a name="l2299"><span class="linenum">2299</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'source', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../_variables/source.html">$source</a> );
<a name="l2300"><span class="linenum">2300</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'redirect_to', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l2301"><span class="linenum">2301</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'return_to', <a class="var it1867" onMouseOver="hilite(1867)" onMouseOut="lolite()" onClick="logVariable('return_to')" href="../../_variables/return_to.html">$return_to</a> );
<a name="l2302"><span class="linenum">2302</span></a>      if( <a class="var it6300" onMouseOver="hilite(6300)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../_variables/inskin.html">$inskin</a> || <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['inskin_urls'] )
<a name="l2303"><span class="linenum">2303</span></a>      { // inskin login form
<a name="l2304"><span class="linenum">2304</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'inskin', true );
<a name="l2305"><span class="linenum">2305</span></a>          <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a> = '&lt;br /&gt;';
<a name="l2306"><span class="linenum">2306</span></a>      }
<a name="l2307"><span class="linenum">2307</span></a>      else
<a name="l2308"><span class="linenum">2308</span></a>      { // standard login form
<a name="l2309"><span class="linenum">2309</span></a>  
<a name="l2310"><span class="linenum">2310</span></a>          if( ! empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_title'] ) )
<a name="l2311"><span class="linenum">2311</span></a>          {
<a name="l2312"><span class="linenum">2312</span></a>              echo '&lt;h4&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_title'].'&lt;/h4&gt;';
<a name="l2313"><span class="linenum">2313</span></a>          }
<a name="l2314"><span class="linenum">2314</span></a>  
<a name="l2315"><span class="linenum">2315</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'validate_required', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'validate_required' ] );
<a name="l2316"><span class="linenum">2316</span></a>          if( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'action' ],  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'reqID' ], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'sessID' ] ) &amp;&amp;  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'action' ] == 'validatemail' )
<a name="l2317"><span class="linenum">2317</span></a>          { // the user clicked the link from the &quot;validate your account&quot; email, but has not been logged in; pass on the relevant data:
<a name="l2318"><span class="linenum">2318</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'action', 'validatemail' );
<a name="l2319"><span class="linenum">2319</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'reqID', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'reqID' ] );
<a name="l2320"><span class="linenum">2320</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'sessID', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'sessID' ] );
<a name="l2321"><span class="linenum">2321</span></a>          }
<a name="l2322"><span class="linenum">2322</span></a>          <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a> = '';
<a name="l2323"><span class="linenum">2323</span></a>      }
<a name="l2324"><span class="linenum">2324</span></a>  
<a name="l2325"><span class="linenum">2325</span></a>  <span class="comment">    // check if should transmit hashed password</span>
<a name="l2326"><span class="linenum">2326</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'transmit_hashed_password' ] )
<a name="l2327"><span class="linenum">2327</span></a>      { // used by JS-password encryption/hashing:
<a name="l2328"><span class="linenum">2328</span></a>          <a class="var it1189" onMouseOver="hilite(1189)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a> = <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('core.pwd_salt');
<a name="l2329"><span class="linenum">2329</span></a>          if( empty(<a class="var it1189" onMouseOver="hilite(1189)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a>) )
<a name="l2330"><span class="linenum">2330</span></a>          { // Do not regenerate if already set because we want to reuse the previous salt on login screen reloads
<a name="l2331"><span class="linenum">2331</span></a>  <span class="comment">            // fp&gt; Question: the comment implies that the salt is reset even on failed login attemps. Why that? I would only have reset it on successful login. Do experts recommend it this way?</span>
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment">            // but if you kill the session you get a new salt anyway, so it's no big deal.</span>
<a name="l2333"><span class="linenum">2333</span></a>  <span class="comment">            // At that point, why not reset the salt at every reload? (it may be good to keep it, but I think the reason should be documented here)</span>
<a name="l2334"><span class="linenum">2334</span></a>              <a class="var it1189" onMouseOver="hilite(1189)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a> = <a class="function" onClick="logFunction('generate_random_key')" href="../../_functions/generate_random_key.html" onMouseOver="funcPopup(event,'generate_random_key')">generate_random_key</a>(64);
<a name="l2335"><span class="linenum">2335</span></a>              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'core.pwd_salt', <a class="var it1189" onMouseOver="hilite(1189)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a>, 86400 <span class="comment">/* expire in 1 day */</span> );
<a name="l2336"><span class="linenum">2336</span></a>              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('dbsave')" href="../../_functions/dbsave.html" onMouseOver="funcPopup(event,'dbsave')">dbsave</a>(); <span class="comment">// save now, in case there's an error later, and not saving it would prevent the user from logging in.</span>
<a name="l2337"><span class="linenum">2337</span></a>          }
<a name="l2338"><span class="linenum">2338</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'pwd_salt', <a class="var it1189" onMouseOver="hilite(1189)" onMouseOut="lolite()" onClick="logVariable('pwd_salt')" href="../../_variables/pwd_salt.html">$pwd_salt</a> );
<a name="l2339"><span class="linenum">2339</span></a>  <span class="comment">        // Add container for the hashed password hidden inputs</span>
<a name="l2340"><span class="linenum">2340</span></a>          echo '&lt;div id=&quot;pwd_hashed_container&quot;&gt;&lt;/div&gt;'; <span class="comment">// gets filled by JS</span>
<a name="l2341"><span class="linenum">2341</span></a>      }
<a name="l2342"><span class="linenum">2342</span></a>  
<a name="l2343"><span class="linenum">2343</span></a>      if( <a class="var it6300" onMouseOver="hilite(6300)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../_variables/inskin.html">$inskin</a> )
<a name="l2344"><span class="linenum">2344</span></a>      {
<a name="l2345"><span class="linenum">2345</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_field')" href="../../_functions/begin_field.html" onMouseOver="funcPopup(event,'begin_field')">begin_field</a>();
<a name="l2346"><span class="linenum">2346</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('text_input')" href="../../_functions/text_input.html" onMouseOver="funcPopup(event,'text_input')">text_input</a>( <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'login' ], 18, <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Login'), <a class="var it79" onMouseOver="hilite(79)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Enter your <a class="function" onClick="logFunction('username')" href="../../_functions/username.html" onMouseOver="funcPopup(event,'username')">username</a> (or email address).'),
<a name="l2347"><span class="linenum">2347</span></a>                      array( 'maxlength' =&gt; 255, 'class' =&gt; 'input_text', 'required' =&gt; true ) );
<a name="l2348"><span class="linenum">2348</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_field')" href="../../_functions/end_field.html" onMouseOver="funcPopup(event,'end_field')">end_field</a>();
<a name="l2349"><span class="linenum">2349</span></a>      }
<a name="l2350"><span class="linenum">2350</span></a>      else
<a name="l2351"><span class="linenum">2351</span></a>      {
<a name="l2352"><span class="linenum">2352</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('text_input')" href="../../_functions/text_input.html" onMouseOver="funcPopup(event,'text_input')">text_input</a>( <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'login' ], 18, '', '',
<a name="l2353"><span class="linenum">2353</span></a>                      array( 'maxlength' =&gt; 255, 'class' =&gt; 'input_text', 'input_required' =&gt; 'required', 'placeholder' =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('<a class="function" onClick="logFunction('Username')" href="../../_functions/username.html" onMouseOver="funcPopup(event,'username')">Username</a> (or email address)') ) );
<a name="l2354"><span class="linenum">2354</span></a>      }
<a name="l2355"><span class="linenum">2355</span></a>  
<a name="l2356"><span class="linenum">2356</span></a>      <a class="var it7311" onMouseOver="hilite(7311)" onMouseOut="lolite()" onClick="logVariable('lost_password_url')" href="../../_variables/lost_password_url.html">$lost_password_url</a> = <a class="function" onClick="logFunction('get_lostpassword_url')" href="../../_functions/get_lostpassword_url.html" onMouseOver="funcPopup(event,'get_lostpassword_url')">get_lostpassword_url</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, '&amp;amp;', <a class="var it1867" onMouseOver="hilite(1867)" onMouseOut="lolite()" onClick="logVariable('return_to')" href="../../_variables/return_to.html">$return_to</a> );
<a name="l2357"><span class="linenum">2357</span></a>      if( ! empty( <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a> ) )
<a name="l2358"><span class="linenum">2358</span></a>      {
<a name="l2359"><span class="linenum">2359</span></a>          <a class="var it7311" onMouseOver="hilite(7311)" onMouseOut="lolite()" onClick="logVariable('lost_password_url')" href="../../_variables/lost_password_url.html">$lost_password_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it7311" onMouseOver="hilite(7311)" onMouseOut="lolite()" onClick="logVariable('lost_password_url')" href="../../_variables/lost_password_url.html">$lost_password_url</a>, <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>['login'].'='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a> ) );
<a name="l2360"><span class="linenum">2360</span></a>      }
<a name="l2361"><span class="linenum">2361</span></a>      <a class="var it7312" onMouseOver="hilite(7312)" onMouseOut="lolite()" onClick="logVariable('pwd_note')" href="../../_variables/pwd_note.html">$pwd_note</a> = '&lt;a href=&quot;'.<a class="var it7311" onMouseOver="hilite(7311)" onMouseOut="lolite()" onClick="logVariable('lost_password_url')" href="../../_variables/lost_password_url.html">$lost_password_url</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Lost your password?').'&lt;/a&gt;';
<a name="l2362"><span class="linenum">2362</span></a>  
<a name="l2363"><span class="linenum">2363</span></a>      if( <a class="var it6300" onMouseOver="hilite(6300)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../_variables/inskin.html">$inskin</a> )
<a name="l2364"><span class="linenum">2364</span></a>      {
<a name="l2365"><span class="linenum">2365</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_field')" href="../../_functions/begin_field.html" onMouseOver="funcPopup(event,'begin_field')">begin_field</a>();
<a name="l2366"><span class="linenum">2366</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('password_input')" href="../../_functions/password_input.html" onMouseOver="funcPopup(event,'password_input')">password_input</a>( <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'pwd' ], '', 18, <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Password'), array( 'note' =&gt; <a class="var it7312" onMouseOver="hilite(7312)" onMouseOut="lolite()" onClick="logVariable('pwd_note')" href="../../_variables/pwd_note.html">$pwd_note</a>, 'maxlength' =&gt; 70, 'class' =&gt; 'input_text', 'required' =&gt; true ) );
<a name="l2367"><span class="linenum">2367</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_field')" href="../../_functions/end_field.html" onMouseOver="funcPopup(event,'end_field')">end_field</a>();
<a name="l2368"><span class="linenum">2368</span></a>      }
<a name="l2369"><span class="linenum">2369</span></a>      else
<a name="l2370"><span class="linenum">2370</span></a>      {
<a name="l2371"><span class="linenum">2371</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('password_input')" href="../../_functions/password_input.html" onMouseOver="funcPopup(event,'password_input')">password_input</a>( <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'pwd' ], '', 18, '', array( 'placeholder' =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Password'), 'note' =&gt; <a class="var it7312" onMouseOver="hilite(7312)" onMouseOut="lolite()" onClick="logVariable('pwd_note')" href="../../_variables/pwd_note.html">$pwd_note</a>, 'maxlength' =&gt; 70, 'class' =&gt; 'input_text', 'input_required' =&gt; 'required' ) );
<a name="l2372"><span class="linenum">2372</span></a>      }
<a name="l2373"><span class="linenum">2373</span></a>  
<a name="l2374"><span class="linenum">2374</span></a>  <span class="comment">    // Allow a plugin to add fields/payload</span>
<a name="l2375"><span class="linenum">2375</span></a>      <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'DisplayLoginFormFieldset', array( 'Form' =&gt; &amp; <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> ) );
<a name="l2376"><span class="linenum">2376</span></a>  
<a name="l2377"><span class="linenum">2377</span></a>  <span class="comment">    // Display registration link after login button</span>
<a name="l2378"><span class="linenum">2378</span></a>      <a class="var it7122" onMouseOver="hilite(7122)" onMouseOut="lolite()" onClick="logVariable('register_link')" href="../../_variables/register_link.html">$register_link</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['display_reg_link'] ? <a class="function" onClick="logFunction('get_user_register_link')" href="../../_functions/get_user_register_link.html" onMouseOver="funcPopup(event,'get_user_register_link')">get_user_register_link</a>( '', '', <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Register').' &amp;raquo;', '#', true <span class="comment">/*disp_when_logged_in*/</span>, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../_variables/source.html">$source</a>, 'btn btn-primary btn-lg pull-right' ) : '';
<a name="l2379"><span class="linenum">2379</span></a>  
<a name="l2380"><span class="linenum">2380</span></a>  <span class="comment">    // Submit button(s):</span>
<a name="l2381"><span class="linenum">2381</span></a>      <a class="var it7313" onMouseOver="hilite(7313)" onMouseOut="lolite()" onClick="logVariable('submit_buttons')" href="../../_variables/submit_buttons.html">$submit_buttons</a> = array( array( 'name' =&gt; 'login_action[login]', 'value' =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Log in!'), 'class' =&gt; 'btn-success btn-lg', 'input_suffix' =&gt; <a class="var it7122" onMouseOver="hilite(7122)" onMouseOut="lolite()" onClick="logVariable('register_link')" href="../../_variables/register_link.html">$register_link</a> ) );
<a name="l2382"><span class="linenum">2382</span></a>  
<a name="l2383"><span class="linenum">2383</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('buttons_input')" href="../../_functions/buttons_input.html" onMouseOver="funcPopup(event,'buttons_input')">buttons_input</a>( <a class="var it7313" onMouseOver="hilite(7313)" onMouseOut="lolite()" onClick="logVariable('submit_buttons')" href="../../_variables/submit_buttons.html">$submit_buttons</a> );
<a name="l2384"><span class="linenum">2384</span></a>  
<a name="l2385"><span class="linenum">2385</span></a>      if( <a class="var it6300" onMouseOver="hilite(6300)" onMouseOut="lolite()" onClick="logVariable('inskin')" href="../../_variables/inskin.html">$inskin</a> )
<a name="l2386"><span class="linenum">2386</span></a>      {
<a name="l2387"><span class="linenum">2387</span></a>          <a class="var it7314" onMouseOver="hilite(7314)" onMouseOut="lolite()" onClick="logVariable('before_register_link')" href="../../_variables/before_register_link.html">$before_register_link</a> = '&lt;div class=&quot;login_actions&quot; style=&quot;text-align:right; margin: 1em 0 1ex&quot;&gt;&lt;strong&gt;';
<a name="l2388"><span class="linenum">2388</span></a>          <a class="var it7315" onMouseOver="hilite(7315)" onMouseOut="lolite()" onClick="logVariable('after_register_link')" href="../../_variables/after_register_link.html">$after_register_link</a> = '&lt;/strong&gt;&lt;/div&gt;';
<a name="l2389"><span class="linenum">2389</span></a>          <a class="function" onClick="logFunction('user_register_link')" href="../../_functions/user_register_link.html" onMouseOver="funcPopup(event,'user_register_link')">user_register_link</a>( <a class="var it7314" onMouseOver="hilite(7314)" onMouseOut="lolite()" onClick="logVariable('before_register_link')" href="../../_variables/before_register_link.html">$before_register_link</a>, <a class="var it7315" onMouseOver="hilite(7315)" onMouseOut="lolite()" onClick="logVariable('after_register_link')" href="../../_variables/after_register_link.html">$after_register_link</a>, <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No account yet? Register here').' &amp;raquo;', '#', true <span class="comment">/*disp_when_logged_in*/</span>, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('source')" href="../../_variables/source.html">$source</a> );
<a name="l2390"><span class="linenum">2390</span></a>      }
<a name="l2391"><span class="linenum">2391</span></a>      else
<a name="l2392"><span class="linenum">2392</span></a>      {
<a name="l2393"><span class="linenum">2393</span></a>  <span class="comment">        // Passthrough REQUEST data (when login is required after having POSTed something)</span>
<a name="l2394"><span class="linenum">2394</span></a>  <span class="comment">        // (Exclusion of 'login_action', 'login', and 'action' has been removed. This should get handled via detection in Form (included_input_field_names),</span>
<a name="l2395"><span class="linenum">2395</span></a>  <span class="comment">        //  and &quot;action&quot; is protected via crumbs)</span>
<a name="l2396"><span class="linenum">2396</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hiddens_by_key')" href="../../_functions/hiddens_by_key.html" onMouseOver="funcPopup(event,'hiddens_by_key')">hiddens_by_key</a>( <a class="function" onClick="logFunction('remove_magic_quotes')" href="../../_functions/remove_magic_quotes.html" onMouseOver="funcPopup(event,'remove_magic_quotes')">remove_magic_quotes</a>( <a class="var it6076" onMouseOver="hilite(6076)" onMouseOut="lolite()" onClick="logVariable('_REQUEST')" href="../../_variables/_REQUEST.html">$_REQUEST</a> ), array( 'pwd_hashed' ) );
<a name="l2397"><span class="linenum">2397</span></a>      }
<a name="l2398"><span class="linenum">2398</span></a>  
<a name="l2399"><span class="linenum">2399</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_form')" href="../../_functions/end_form.html" onMouseOver="funcPopup(event,'end_form')">end_form</a>();
<a name="l2400"><span class="linenum">2400</span></a>  
<a name="l2401"><span class="linenum">2401</span></a>      echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_after'];
<a name="l2402"><span class="linenum">2402</span></a>  
<a name="l2403"><span class="linenum">2403</span></a>      <a class="function" onClick="logFunction('display_login_js_handler')" href="../../_functions/display_login_js_handler.html" onMouseOver="funcPopup(event,'display_login_js_handler')">display_login_js_handler</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2404"><span class="linenum">2404</span></a>  }
<a name="l2405"><span class="linenum">2405</span></a>  
<a name="l2406"><span class="linenum">2406</span></a>  
<a name="l2407"><span class="linenum">2407</span></a>  <span class="comment">/**</span>
<a name="l2408"><span class="linenum">2408</span></a>  <span class="comment"> * Display the login form js part, to get the user salt and encrypt the password</span>
<a name="l2409"><span class="linenum">2409</span></a>  <span class="comment"> *</span>
<a name="l2410"><span class="linenum">2410</span></a>  <span class="comment"> * @param array params</span>
<a name="l2411"><span class="linenum">2411</span></a>  <span class="comment"> */</span>
<a name="l2412"><span class="linenum">2412</span></a>  function <a class="function" onClick="logFunction('display_login_js_handler')" href="../../_functions/display_login_js_handler.html" onMouseOver="funcPopup(event,'display_login_js_handler')">display_login_js_handler</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> )
<a name="l2413"><span class="linenum">2413</span></a>  {
<a name="l2414"><span class="linenum">2414</span></a>      global <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>, <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>;
<a name="l2415"><span class="linenum">2415</span></a>  
<a name="l2416"><span class="linenum">2416</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array( 'get_widget_login_hidden_fields' =&gt; false ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2417"><span class="linenum">2417</span></a>  
<a name="l2418"><span class="linenum">2418</span></a>  ?&gt;
<a name="l2419"><span class="linenum">2419</span></a>      &lt;script type=&quot;text/javascript&quot;&gt;
<a name="l2420"><span class="linenum">2420</span></a>      var requestSent = false;
<a name="l2421"><span class="linenum">2421</span></a>      var login = document.getElementById(&quot;&lt;?php echo <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ]; ?&gt;&quot;);
<a name="l2422"><span class="linenum">2422</span></a>      if( login.value.length &gt; 0 )
<a name="l2423"><span class="linenum">2423</span></a>      { // Focus on the password field:
<a name="l2424"><span class="linenum">2424</span></a>          document.getElementById(&quot;&lt;?php echo <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'pwd' ]; ?&gt;&quot;).focus();
<a name="l2425"><span class="linenum">2425</span></a>      }
<a name="l2426"><span class="linenum">2426</span></a>      else
<a name="l2427"><span class="linenum">2427</span></a>      { // Focus on the login field:
<a name="l2428"><span class="linenum">2428</span></a>          login.focus();
<a name="l2429"><span class="linenum">2429</span></a>      }
<a name="l2430"><span class="linenum">2430</span></a>  
<a name="l2431"><span class="linenum">2431</span></a>  	function <a class="function" onClick="logFunction('processSubmit')" href="../../_functions/processsubmit.html" onMouseOver="funcPopup(event,'processsubmit')">processSubmit</a>(e) {
<a name="l2432"><span class="linenum">2432</span></a>          if (e.preventDefault) e.preventDefault();
<a name="l2433"><span class="linenum">2433</span></a>          if( requestSent )
<a name="l2434"><span class="linenum">2434</span></a>          { // A submit request was already sent, do not send another
<a name="l2435"><span class="linenum">2435</span></a>              return;
<a name="l2436"><span class="linenum">2436</span></a>          }
<a name="l2437"><span class="linenum">2437</span></a>  
<a name="l2438"><span class="linenum">2438</span></a>          requestSent = true;
<a name="l2439"><span class="linenum">2439</span></a>          var form = document.getElementById(&quot;login_form&quot;);
<a name="l2440"><span class="linenum">2440</span></a>          var username = form.&lt;?php echo <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ]; ?&gt;.value;
<a name="l2441"><span class="linenum">2441</span></a>          var get_widget_login_hidden_fields = &lt;?php echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['get_widget_login_hidden_fields'] ? 'true' : 'false'; ?&gt;;
<a name="l2442"><span class="linenum">2442</span></a>          var sessionid = '&lt;?php echo <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a onClick="logVariable('ID')" class="var it10685" onMouseOver="hilite(10685)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>; ?&gt;';
<a name="l2443"><span class="linenum">2443</span></a>  
<a name="l2444"><span class="linenum">2444</span></a>          if( !form.&lt;?php echo <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'pwd' ]; ?&gt; || !form.pwd_salt || typeof hex_sha1 == &quot;undefined&quot; &amp;&amp; typeof hex_md5 == &quot;undefined&quot; ) {
<a name="l2445"><span class="linenum">2445</span></a>              return true;
<a name="l2446"><span class="linenum">2446</span></a>          }
<a name="l2447"><span class="linenum">2447</span></a>  
<a name="l2448"><span class="linenum">2448</span></a>          jQuery.ajax({
<a name="l2449"><span class="linenum">2449</span></a>              type: 'POST',
<a name="l2450"><span class="linenum">2450</span></a>              url: '&lt;?php echo <a class="function" onClick="logFunction('get_samedomain_htsrv_url')" href="../../_functions/get_samedomain_htsrv_url.html" onMouseOver="funcPopup(event,'get_samedomain_htsrv_url')">get_samedomain_htsrv_url</a>(); ?&gt;anon_async.php',
<a name="l2451"><span class="linenum">2451</span></a>              data: {
<a name="l2452"><span class="linenum">2452</span></a>                  '&lt;?php echo <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ]; ?&gt;': username,
<a name="l2453"><span class="linenum">2453</span></a>                  'action': 'get_user_salt',
<a name="l2454"><span class="linenum">2454</span></a>                  'get_widget_login_hidden_fields': get_widget_login_hidden_fields,
<a name="l2455"><span class="linenum">2455</span></a>                  'crumb_loginsalt': '&lt;?php echo <a class="function" onClick="logFunction('get_crumb')" href="../../_functions/get_crumb.html" onMouseOver="funcPopup(event,'get_crumb')">get_crumb</a>('loginsalt'); ?&gt;',
<a name="l2456"><span class="linenum">2456</span></a>              },
<a name="l2457"><span class="linenum">2457</span></a>              success: function(result) {
<a name="l2458"><span class="linenum">2458</span></a>                  var pwd_container = jQuery('#pwd_hashed_container');
<a name="l2459"><span class="linenum">2459</span></a>                  var parsed_result;
<a name="l2460"><span class="linenum">2460</span></a>  
<a name="l2461"><span class="linenum">2461</span></a>                  try {
<a name="l2462"><span class="linenum">2462</span></a>                      parsed_result = JSON.<a class="function" onClick="logFunction('parse')" href="../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>(result);
<a name="l2463"><span class="linenum">2463</span></a>                  } catch( e ) {
<a name="l2464"><span class="linenum">2464</span></a>                      pwd_container.html( result );
<a name="l2465"><span class="linenum">2465</span></a>                      return;
<a name="l2466"><span class="linenum">2466</span></a>                  }
<a name="l2467"><span class="linenum">2467</span></a>  
<a name="l2468"><span class="linenum">2468</span></a>                  var raw_password = form.&lt;?php echo <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'pwd' ]; ?&gt;.value;
<a name="l2469"><span class="linenum">2469</span></a>                  var salts = parsed_result['salts'];
<a name="l2470"><span class="linenum">2470</span></a>  
<a name="l2471"><span class="linenum">2471</span></a>                  if( get_widget_login_hidden_fields )
<a name="l2472"><span class="linenum">2472</span></a>                  {
<a name="l2473"><span class="linenum">2473</span></a>                      form.crumb_loginform.value = parsed_result['crumb'];
<a name="l2474"><span class="linenum">2474</span></a>                      form.pwd_salt.value = parsed_result['pwd_salt'];
<a name="l2475"><span class="linenum">2475</span></a>                      sessionid = parsed_result['session_id'];
<a name="l2476"><span class="linenum">2476</span></a>                  }
<a name="l2477"><span class="linenum">2477</span></a>  
<a name="l2478"><span class="linenum">2478</span></a>                  for( var index in salts ) {
<a name="l2479"><span class="linenum">2479</span></a>                      var pwd_hashed = <a class="function" onClick="logFunction('hex_sha1')" href="../../_functions/hex_sha1.html" onMouseOver="funcPopup(event,'hex_sha1')">hex_sha1</a>( <a class="function" onClick="logFunction('hex_md5')" href="../../_functions/hex_md5.html" onMouseOver="funcPopup(event,'hex_md5')">hex_md5</a>( salts[index] + raw_password ) + form.pwd_salt.value );
<a name="l2480"><span class="linenum">2480</span></a>                      pwd_container.<a class="function" onClick="logFunction('append')" href="../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>( '&lt;input type=&quot;hidden&quot; value=&quot;' + pwd_hashed + '&quot; name=&quot;pwd_hashed[]&quot;&gt;' );
<a name="l2481"><span class="linenum">2481</span></a>                  }
<a name="l2482"><span class="linenum">2482</span></a>  
<a name="l2483"><span class="linenum">2483</span></a>                  form.&lt;?php echo <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'pwd' ]; ?&gt;.value = 'padding_padding_padding_padding_padding_padding_hashed_' + sessionid; <span class="comment">/* to detect cookie problems */</span>
<a name="l2484"><span class="linenum">2484</span></a>  <span class="comment">                // (paddings to make it look like encryption on screen. When the string changes to just one more or one less *, it looks like the browser is changing the password on the fly)</span>
<a name="l2485"><span class="linenum">2485</span></a>  
<a name="l2486"><span class="linenum">2486</span></a>  <span class="comment">                // Append the correct login action as hidden input field</span>
<a name="l2487"><span class="linenum">2487</span></a>                  pwd_container.<a class="function" onClick="logFunction('append')" href="../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>( '&lt;input type=&quot;hidden&quot; value=&quot;1&quot; name=&quot;login_action[login]&quot;&gt;' );
<a name="l2488"><span class="linenum">2488</span></a>                  form.<a class="function" onClick="logFunction('submit')" href="../../_functions/submit.html" onMouseOver="funcPopup(event,'submit')">submit</a>();
<a name="l2489"><span class="linenum">2489</span></a>              }
<a name="l2490"><span class="linenum">2490</span></a>          });
<a name="l2491"><span class="linenum">2491</span></a>  
<a name="l2492"><span class="linenum">2492</span></a>  <span class="comment">        // You must return false to prevent the default form behavior</span>
<a name="l2493"><span class="linenum">2493</span></a>          return false;
<a name="l2494"><span class="linenum">2494</span></a>      }
<a name="l2495"><span class="linenum">2495</span></a>  
<a name="l2496"><span class="linenum">2496</span></a>      &lt;?php
<a name="l2497"><span class="linenum">2497</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'transmit_hashed_password' ] )
<a name="l2498"><span class="linenum">2498</span></a>      { // Hash the password onsubmit and clear the original pwd field
<a name="l2499"><span class="linenum">2499</span></a>  <span class="comment">        // TODO: dh&gt; it would be nice to disable the clicked/used submit button. That's how it has been when the submit was attached to the submit button(s)</span>
<a name="l2500"><span class="linenum">2500</span></a>          ?&gt;
<a name="l2501"><span class="linenum">2501</span></a>  <span class="comment">        // Set login form submit handler</span>
<a name="l2502"><span class="linenum">2502</span></a>          jQuery( '#login_form' ).<a class="function" onClick="logFunction('bind')" href="../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>( 'submit', processSubmit );
<a name="l2503"><span class="linenum">2503</span></a>          &lt;?php
<a name="l2504"><span class="linenum">2504</span></a>      }
<a name="l2505"><span class="linenum">2505</span></a>      ?&gt;
<a name="l2506"><span class="linenum">2506</span></a>  
<a name="l2507"><span class="linenum">2507</span></a>      &lt;/script&gt;
<a name="l2508"><span class="linenum">2508</span></a>  &lt;?php
<a name="l2509"><span class="linenum">2509</span></a>  }
<a name="l2510"><span class="linenum">2510</span></a>  
<a name="l2511"><span class="linenum">2511</span></a>  
<a name="l2512"><span class="linenum">2512</span></a>  <span class="comment">/**</span>
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment"> * Display lost password form</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment"> *</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment"> * @param string Login value</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment"> * @param array login form hidden params</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment"> * @param array Params</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment"> */</span>
<a name="l2519"><span class="linenum">2519</span></a>  function <a class="function" onClick="logFunction('display_lostpassword_form')" href="../../_functions/display_lostpassword_form.html" onMouseOver="funcPopup(event,'display_lostpassword_form')">display_lostpassword_form</a>( <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a>, <a class="var it7316" onMouseOver="hilite(7316)" onMouseOut="lolite()" onClick="logVariable('hidden_params')" href="../../_variables/hidden_params.html">$hidden_params</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l2520"><span class="linenum">2520</span></a>  {
<a name="l2521"><span class="linenum">2521</span></a>      global <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>, <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>;
<a name="l2522"><span class="linenum">2522</span></a>  
<a name="l2523"><span class="linenum">2523</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2524"><span class="linenum">2524</span></a>              'form_before'     =&gt; '',
<a name="l2525"><span class="linenum">2525</span></a>              'form_after'      =&gt; '',
<a name="l2526"><span class="linenum">2526</span></a>              'form_action'     =&gt; <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>.'login.php',
<a name="l2527"><span class="linenum">2527</span></a>              'form_name'       =&gt; 'lostpass_form',
<a name="l2528"><span class="linenum">2528</span></a>              'form_class'      =&gt; 'fform',
<a name="l2529"><span class="linenum">2529</span></a>              'form_template'   =&gt; NULL,
<a name="l2530"><span class="linenum">2530</span></a>              'inskin'          =&gt; true,
<a name="l2531"><span class="linenum">2531</span></a>              'inskin_urls'     =&gt; true,
<a name="l2532"><span class="linenum">2532</span></a>              'abort_link_text' =&gt; '',
<a name="l2533"><span class="linenum">2533</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2534"><span class="linenum">2534</span></a>  
<a name="l2535"><span class="linenum">2535</span></a>      if( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'field_error', 'integer', 0 ) )
<a name="l2536"><span class="linenum">2536</span></a>      { // Mark login field as error because it was on page before redirection
<a name="l2537"><span class="linenum">2537</span></a>          <a class="function" onClick="logFunction('param_error')" href="../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>['login'], '', '' );
<a name="l2538"><span class="linenum">2538</span></a>      }
<a name="l2539"><span class="linenum">2539</span></a>  
<a name="l2540"><span class="linenum">2540</span></a>      <a class="var it7317" onMouseOver="hilite(7317)" onMouseOut="lolite()" onClick="logVariable('login_url')" href="../../_variables/login_url.html">$login_url</a> = <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>( <a class="function" onClick="logFunction('get_param')" href="../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'source' ), <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l2541"><span class="linenum">2541</span></a>  
<a name="l2542"><span class="linenum">2542</span></a>      <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a> = array();
<a name="l2543"><span class="linenum">2543</span></a>      if( ! empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['abort_link_text'] ) )
<a name="l2544"><span class="linenum">2544</span></a>      { // A link to &quot;close&quot; the window
<a name="l2545"><span class="linenum">2545</span></a>          <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a>[] = '&lt;a href=&quot;'.<a class="var it7317" onMouseOver="hilite(7317)" onMouseOut="lolite()" onClick="logVariable('login_url')" href="../../_variables/login_url.html">$login_url</a>.'&quot;&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['abort_link_text'].'&lt;/a&gt;';
<a name="l2546"><span class="linenum">2546</span></a>      }
<a name="l2547"><span class="linenum">2547</span></a>  
<a name="l2548"><span class="linenum">2548</span></a>      <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a> ) ? '&lt;span class=&quot;pull-right&quot;&gt;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' ', <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a> ).'&lt;/span&gt;' : '';
<a name="l2549"><span class="linenum">2549</span></a>      echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a>$', <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_before'] );
<a name="l2550"><span class="linenum">2550</span></a>  
<a name="l2551"><span class="linenum">2551</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_action'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_name'], 'post', 'fieldset' );
<a name="l2552"><span class="linenum">2552</span></a>  
<a name="l2553"><span class="linenum">2553</span></a>      if( ! empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_template'] ) )
<a name="l2554"><span class="linenum">2554</span></a>      { // Switch layout to template from array
<a name="l2555"><span class="linenum">2555</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_template']['formstart'] = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a>$', <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('form_links')" href="../../_variables/form_links.html">$form_links</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_template']['formstart'] );
<a name="l2556"><span class="linenum">2556</span></a>  
<a name="l2557"><span class="linenum">2557</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('switch_template_parts')" href="../../_functions/switch_template_parts.html" onMouseOver="funcPopup(event,'switch_template_parts')">switch_template_parts</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_template'] );
<a name="l2558"><span class="linenum">2558</span></a>      }
<a name="l2559"><span class="linenum">2559</span></a>  
<a name="l2560"><span class="linenum">2560</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_form')" href="../../_functions/begin_form.html" onMouseOver="funcPopup(event,'begin_form')">begin_form</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_class'] );
<a name="l2561"><span class="linenum">2561</span></a>  
<a name="l2562"><span class="linenum">2562</span></a>  <span class="comment">    // Display hidden fields</span>
<a name="l2563"><span class="linenum">2563</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('add_crumb')" href="../../_functions/add_crumb.html" onMouseOver="funcPopup(event,'add_crumb')">add_crumb</a>( 'lostpassform' );
<a name="l2564"><span class="linenum">2564</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'action', 'retrievepassword' );
<a name="l2565"><span class="linenum">2565</span></a>      foreach( <a class="var it7316" onMouseOver="hilite(7316)" onMouseOut="lolite()" onClick="logVariable('hidden_params')" href="../../_variables/hidden_params.html">$hidden_params</a> as <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> )
<a name="l2566"><span class="linenum">2566</span></a>      {
<a name="l2567"><span class="linenum">2567</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> );
<a name="l2568"><span class="linenum">2568</span></a>      }
<a name="l2569"><span class="linenum">2569</span></a>  
<a name="l2570"><span class="linenum">2570</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_fieldset')" href="../../_functions/begin_fieldset.html" onMouseOver="funcPopup(event,'begin_fieldset')">begin_fieldset</a>();
<a name="l2571"><span class="linenum">2571</span></a>  
<a name="l2572"><span class="linenum">2572</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['inskin'] )
<a name="l2573"><span class="linenum">2573</span></a>      {
<a name="l2574"><span class="linenum">2574</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('text')" href="../../_functions/text.html" onMouseOver="funcPopup(event,'text')">text</a>( <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ], <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a>, 30, <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Login'), '', 255, 'input_text' );
<a name="l2575"><span class="linenum">2575</span></a>      }
<a name="l2576"><span class="linenum">2576</span></a>      else
<a name="l2577"><span class="linenum">2577</span></a>      {
<a name="l2578"><span class="linenum">2578</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('text_input')" href="../../_functions/text_input.html" onMouseOver="funcPopup(event,'text_input')">text_input</a>( <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ], <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../_variables/login.html">$login</a>, 30, '', '', array( 'maxlength' =&gt; 255, 'placeholder' =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('<a class="function" onClick="logFunction('Username')" href="../../_functions/username.html" onMouseOver="funcPopup(event,'username')">Username</a> (or email address)'), 'input_required' =&gt; 'required' ) );
<a name="l2579"><span class="linenum">2579</span></a>      }
<a name="l2580"><span class="linenum">2580</span></a>  
<a name="l2581"><span class="linenum">2581</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('buttons_input')" href="../../_functions/buttons_input.html" onMouseOver="funcPopup(event,'buttons_input')">buttons_input</a>( array( array( <span class="comment">/* TRANS: Text for submit button to request an activation link by email */</span> 'value' =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send me a recovery email!'), 'class' =&gt; 'btn-primary btn-lg' ) ) );
<a name="l2582"><span class="linenum">2582</span></a>  
<a name="l2583"><span class="linenum">2583</span></a>      echo '&lt;b&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('How to recover your password:').'&lt;/b&gt;';
<a name="l2584"><span class="linenum">2584</span></a>      echo '&lt;ol&gt;';
<a name="l2585"><span class="linenum">2585</span></a>      echo '&lt;li&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter you <a class="function" onClick="logFunction('login')" href="../../_functions/login.html" onMouseOver="funcPopup(event,'login')">login</a> (or email address) above.').'&lt;/li&gt;';
<a name="l2586"><span class="linenum">2586</span></a>      echo '&lt;li&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('An email will be sent to your registered email address immediately.').'&lt;/li&gt;';
<a name="l2587"><span class="linenum">2587</span></a>      echo '&lt;li&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('As soon as you receive the email, click on the link therein to change your password.').'&lt;/li&gt;';
<a name="l2588"><span class="linenum">2588</span></a>      echo '&lt;li&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Your browser will open a page where you can chose a new password.').'&lt;/li&gt;';
<a name="l2589"><span class="linenum">2589</span></a>      echo '&lt;/ol&gt;';
<a name="l2590"><span class="linenum">2590</span></a>      echo '&lt;p class=&quot;red&quot;&gt;&lt;strong&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Important: for security reasons, you must do steps 1 and 4 on the same computer and same web browser. Do not close your browser in between.').'&lt;/strong&gt;&lt;/p&gt;';
<a name="l2591"><span class="linenum">2591</span></a>  
<a name="l2592"><span class="linenum">2592</span></a>      <a class="var it1520" onMouseOver="hilite(1520)" onMouseOut="lolite()" onClick="logVariable('login_link')" href="../../_variables/login_link.html">$login_link</a> = '&lt;a href=&quot;'.<a class="var it7317" onMouseOver="hilite(7317)" onMouseOut="lolite()" onClick="logVariable('login_url')" href="../../_variables/login_url.html">$login_url</a>.'&quot; class=&quot;floatleft&quot;&gt;'.'&amp;laquo; '.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Back to login form').'&lt;/a&gt;';
<a name="l2593"><span class="linenum">2593</span></a>  
<a name="l2594"><span class="linenum">2594</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['inskin'] )
<a name="l2595"><span class="linenum">2595</span></a>      {
<a name="l2596"><span class="linenum">2596</span></a>          echo '&lt;div class=&quot;login_actions&quot; style=&quot;text-align:right; margin: 1em 0 1ex&quot;&gt;&lt;strong&gt;';
<a name="l2597"><span class="linenum">2597</span></a>          echo <a class="var it1520" onMouseOver="hilite(1520)" onMouseOut="lolite()" onClick="logVariable('login_link')" href="../../_variables/login_link.html">$login_link</a>;
<a name="l2598"><span class="linenum">2598</span></a>          echo '&lt;/strong&gt;&lt;/div&gt;';
<a name="l2599"><span class="linenum">2599</span></a>      }
<a name="l2600"><span class="linenum">2600</span></a>  
<a name="l2601"><span class="linenum">2601</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_fieldset')" href="../../_functions/end_fieldset.html" onMouseOver="funcPopup(event,'end_fieldset')">end_fieldset</a>();
<a name="l2602"><span class="linenum">2602</span></a>  
<a name="l2603"><span class="linenum">2603</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_form')" href="../../_functions/end_form.html" onMouseOver="funcPopup(event,'end_form')">end_form</a>();
<a name="l2604"><span class="linenum">2604</span></a>  
<a name="l2605"><span class="linenum">2605</span></a>      echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_after'];
<a name="l2606"><span class="linenum">2606</span></a>  
<a name="l2607"><span class="linenum">2607</span></a>      if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['inskin'] )
<a name="l2608"><span class="linenum">2608</span></a>      {
<a name="l2609"><span class="linenum">2609</span></a>          echo '&lt;div class=&quot;evo_form__login_links&quot;&gt;';
<a name="l2610"><span class="linenum">2610</span></a>          echo <a class="var it1520" onMouseOver="hilite(1520)" onMouseOut="lolite()" onClick="logVariable('login_link')" href="../../_variables/login_link.html">$login_link</a>;
<a name="l2611"><span class="linenum">2611</span></a>          echo '&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;';
<a name="l2612"><span class="linenum">2612</span></a>          echo '&lt;/div&gt;';
<a name="l2613"><span class="linenum">2613</span></a>      }
<a name="l2614"><span class="linenum">2614</span></a>  }
<a name="l2615"><span class="linenum">2615</span></a>  
<a name="l2616"><span class="linenum">2616</span></a>  
<a name="l2617"><span class="linenum">2617</span></a>  <span class="comment">/**</span>
<a name="l2618"><span class="linenum">2618</span></a>  <span class="comment"> * Display user activate info form content</span>
<a name="l2619"><span class="linenum">2619</span></a>  <span class="comment"> *</span>
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment"> * @param Object activateinfo Form</span>
<a name="l2621"><span class="linenum">2621</span></a>  <span class="comment"> */</span>
<a name="l2622"><span class="linenum">2622</span></a>  function <a class="function" onClick="logFunction('display_activateinfo')" href="../../_functions/display_activateinfo.html" onMouseOver="funcPopup(event,'display_activateinfo')">display_activateinfo</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> )
<a name="l2623"><span class="linenum">2623</span></a>  {
<a name="l2624"><span class="linenum">2624</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>;
<a name="l2625"><span class="linenum">2625</span></a>      global <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>, <a class="var it1865" onMouseOver="hilite(1865)" onMouseOut="lolite()" onClick="logVariable('rsc_path')" href="../../_variables/rsc_path.html">$rsc_path</a>, <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>, <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>;
<a name="l2626"><span class="linenum">2626</span></a>  
<a name="l2627"><span class="linenum">2627</span></a>      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l2628"><span class="linenum">2628</span></a>      { // if this happens, it means the code is not correct somewhere before this
<a name="l2629"><span class="linenum">2629</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( &quot;You must log in to see this page.&quot; );
<a name="l2630"><span class="linenum">2630</span></a>      }
<a name="l2631"><span class="linenum">2631</span></a>  
<a name="l2632"><span class="linenum">2632</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2633"><span class="linenum">2633</span></a>              'use_form_wrapper' =&gt; true,
<a name="l2634"><span class="linenum">2634</span></a>              'form_before'      =&gt; '',
<a name="l2635"><span class="linenum">2635</span></a>              'form_after'       =&gt; '',
<a name="l2636"><span class="linenum">2636</span></a>              'form_action'      =&gt; <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>.'login.php',
<a name="l2637"><span class="linenum">2637</span></a>              'form_name'        =&gt; 'form_validatemail',
<a name="l2638"><span class="linenum">2638</span></a>              'form_class'       =&gt; 'fform',
<a name="l2639"><span class="linenum">2639</span></a>              'form_layout'      =&gt; 'fieldset',
<a name="l2640"><span class="linenum">2640</span></a>              'form_template'    =&gt; NULL,
<a name="l2641"><span class="linenum">2641</span></a>              'form_title'       =&gt; '',
<a name="l2642"><span class="linenum">2642</span></a>              'inskin'           =&gt; false,
<a name="l2643"><span class="linenum">2643</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2644"><span class="linenum">2644</span></a>  
<a name="l2645"><span class="linenum">2645</span></a>  <span class="comment">    // init force request new email address param</span>
<a name="l2646"><span class="linenum">2646</span></a>      <a class="var it5303" onMouseOver="hilite(5303)" onMouseOut="lolite()" onClick="logVariable('force_request')" href="../../_variables/force_request.html">$force_request</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'force_request', 'boolean', false );
<a name="l2647"><span class="linenum">2647</span></a>  
<a name="l2648"><span class="linenum">2648</span></a>  <span class="comment">    // get last activation email timestamp from User Settings</span>
<a name="l2649"><span class="linenum">2649</span></a>      <a class="var it5304" onMouseOver="hilite(5304)" onMouseOut="lolite()" onClick="logVariable('last_activation_email_date')" href="../../_variables/last_activation_email_date.html">$last_activation_email_date</a> = <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'last_activation_email', <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l2650"><span class="linenum">2650</span></a>  
<a name="l2651"><span class="linenum">2651</span></a>      if( <a class="var it5303" onMouseOver="hilite(5303)" onMouseOut="lolite()" onClick="logVariable('force_request')" href="../../_variables/force_request.html">$force_request</a> || empty( <a class="var it5304" onMouseOver="hilite(5304)" onMouseOut="lolite()" onClick="logVariable('last_activation_email_date')" href="../../_variables/last_activation_email_date.html">$last_activation_email_date</a> ) )
<a name="l2652"><span class="linenum">2652</span></a>      { // notification email was not sent yet, or user needs another one ( forced request )
<a name="l2653"><span class="linenum">2653</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['use_form_wrapper'] ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_before'] : '';
<a name="l2654"><span class="linenum">2654</span></a>  
<a name="l2655"><span class="linenum">2655</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'form_action' ], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'form_name' ], 'post', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'form_layout' ] );
<a name="l2656"><span class="linenum">2656</span></a>  
<a name="l2657"><span class="linenum">2657</span></a>          if( ! empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_template'] ) )
<a name="l2658"><span class="linenum">2658</span></a>          { // Switch layout to template from array
<a name="l2659"><span class="linenum">2659</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('switch_template_parts')" href="../../_functions/switch_template_parts.html" onMouseOver="funcPopup(event,'switch_template_parts')">switch_template_parts</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_template'] );
<a name="l2660"><span class="linenum">2660</span></a>          }
<a name="l2661"><span class="linenum">2661</span></a>  
<a name="l2662"><span class="linenum">2662</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_form')" href="../../_functions/begin_form.html" onMouseOver="funcPopup(event,'begin_form')">begin_form</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'form_class' ] );
<a name="l2663"><span class="linenum">2663</span></a>  
<a name="l2664"><span class="linenum">2664</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('add_crumb')" href="../../_functions/add_crumb.html" onMouseOver="funcPopup(event,'add_crumb')">add_crumb</a>( 'validateform' );
<a name="l2665"><span class="linenum">2665</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'action', 'req_validatemail');
<a name="l2666"><span class="linenum">2666</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'redirect_to', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'redirect_to' ] );
<a name="l2667"><span class="linenum">2667</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'inskin' ] )
<a name="l2668"><span class="linenum">2668</span></a>          {
<a name="l2669"><span class="linenum">2669</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'inskin', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'inskin' ] );
<a name="l2670"><span class="linenum">2670</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'blog', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'blog' ] );
<a name="l2671"><span class="linenum">2671</span></a>          }
<a name="l2672"><span class="linenum">2672</span></a>          else
<a name="l2673"><span class="linenum">2673</span></a>          { // Form title in standard form
<a name="l2674"><span class="linenum">2674</span></a>              echo '&lt;h4&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_title'].'&lt;/h4&gt;';
<a name="l2675"><span class="linenum">2675</span></a>          }
<a name="l2676"><span class="linenum">2676</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'req_validatemail_submit', 1 ); <span class="comment">// to know if the form has been submitted</span>
<a name="l2677"><span class="linenum">2677</span></a>  
<a name="l2678"><span class="linenum">2678</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_fieldset')" href="../../_functions/begin_fieldset.html" onMouseOver="funcPopup(event,'begin_fieldset')">begin_fieldset</a>();
<a name="l2679"><span class="linenum">2679</span></a>  
<a name="l2680"><span class="linenum">2680</span></a>          echo '&lt;ol&gt;';
<a name="l2681"><span class="linenum">2681</span></a>          echo '&lt;li&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please confirm your email address below:').'&lt;/li&gt;';
<a name="l2682"><span class="linenum">2682</span></a>          echo '&lt;/ol&gt;';
<a name="l2683"><span class="linenum">2683</span></a>  
<a name="l2684"><span class="linenum">2684</span></a>  <span class="comment">        // set email text input content only if this is not a forced request. This way the user may have bigger chance to write a correct email address.</span>
<a name="l2685"><span class="linenum">2685</span></a>          <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a> = ( <a class="var it5303" onMouseOver="hilite(5303)" onMouseOut="lolite()" onClick="logVariable('force_request')" href="../../_variables/force_request.html">$force_request</a> ? '' : <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('email')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/email.html">email</a> );
<a name="l2686"><span class="linenum">2686</span></a>  <span class="comment">        // fp&gt; note: 45 is the max length for evopress skin.</span>
<a name="l2687"><span class="linenum">2687</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('text_input')" href="../../_functions/text_input.html" onMouseOver="funcPopup(event,'text_input')">text_input</a>( <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'email' ], <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a>, 42, <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Your email'), '', array( 'maxlength' =&gt; 255, 'class' =&gt; 'input_text', 'required' =&gt; true, 'input_required' =&gt; 'required' ) );
<a name="l2688"><span class="linenum">2688</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_fieldset')" href="../../_functions/end_fieldset.html" onMouseOver="funcPopup(event,'end_fieldset')">end_fieldset</a>();
<a name="l2689"><span class="linenum">2689</span></a>  
<a name="l2690"><span class="linenum">2690</span></a>  <span class="comment">        // Submit button:</span>
<a name="l2691"><span class="linenum">2691</span></a>          <a class="var it1980" onMouseOver="hilite(1980)" onMouseOut="lolite()" onClick="logVariable('submit_button')" href="../../_variables/submit_button.html">$submit_button</a> = array( array( 'name'=&gt;'submit', 'value'=&gt;<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send me a new activation email now!'), 'class'=&gt;'btn-primary btn-lg' ) );
<a name="l2692"><span class="linenum">2692</span></a>  
<a name="l2693"><span class="linenum">2693</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('buttons_input')" href="../../_functions/buttons_input.html" onMouseOver="funcPopup(event,'buttons_input')">buttons_input</a>(<a class="var it1980" onMouseOver="hilite(1980)" onMouseOut="lolite()" onClick="logVariable('submit_button')" href="../../_variables/submit_button.html">$submit_button</a>);
<a name="l2694"><span class="linenum">2694</span></a>  
<a name="l2695"><span class="linenum">2695</span></a>          if( !<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'inskin' ] )
<a name="l2696"><span class="linenum">2696</span></a>          {
<a name="l2697"><span class="linenum">2697</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'DisplayValidateAccountFormFieldset', array( 'Form' =&gt; &amp; <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> ) );
<a name="l2698"><span class="linenum">2698</span></a>          }
<a name="l2699"><span class="linenum">2699</span></a>  
<a name="l2700"><span class="linenum">2700</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_form')" href="../../_functions/end_form.html" onMouseOver="funcPopup(event,'end_form')">end_form</a>();
<a name="l2701"><span class="linenum">2701</span></a>  
<a name="l2702"><span class="linenum">2702</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['use_form_wrapper'] ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_after'] : '';
<a name="l2703"><span class="linenum">2703</span></a>  
<a name="l2704"><span class="linenum">2704</span></a>          return;
<a name="l2705"><span class="linenum">2705</span></a>      }
<a name="l2706"><span class="linenum">2706</span></a>  
<a name="l2707"><span class="linenum">2707</span></a>  <span class="comment">    // get notification email from general Settings</span>
<a name="l2708"><span class="linenum">2708</span></a>      <a class="var it7318" onMouseOver="hilite(7318)" onMouseOut="lolite()" onClick="logVariable('notification_email')" href="../../_variables/notification_email.html">$notification_email</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'notification_sender_email' );
<a name="l2709"><span class="linenum">2709</span></a>  <span class="comment">    // convert date to timestamp</span>
<a name="l2710"><span class="linenum">2710</span></a>      <a class="var it7319" onMouseOver="hilite(7319)" onMouseOut="lolite()" onClick="logVariable('last_activation_email_ts')" href="../../_variables/last_activation_email_ts.html">$last_activation_email_ts</a> = <a class="function" onClick="logFunction('mysql2timestamp')" href="../../_functions/mysql2timestamp.html" onMouseOver="funcPopup(event,'mysql2timestamp')">mysql2timestamp</a>( <a class="var it5304" onMouseOver="hilite(5304)" onMouseOut="lolite()" onClick="logVariable('last_activation_email_date')" href="../../_variables/last_activation_email_date.html">$last_activation_email_date</a> );
<a name="l2711"><span class="linenum">2711</span></a>  <span class="comment">    // get difference between local time and server time</span>
<a name="l2712"><span class="linenum">2712</span></a>      <a class="var it6011" onMouseOver="hilite(6011)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../_variables/time_difference.html">$time_difference</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('time_difference');
<a name="l2713"><span class="linenum">2713</span></a>  <span class="comment">    // get last activation email local date and time</span>
<a name="l2714"><span class="linenum">2714</span></a>      <a class="var it7320" onMouseOver="hilite(7320)" onMouseOut="lolite()" onClick="logVariable('last_email_date')" href="../../_variables/last_email_date.html">$last_email_date</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>( <a class="function" onClick="logFunction('locale_datefmt')" href="../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>(), <a class="var it7319" onMouseOver="hilite(7319)" onMouseOut="lolite()" onClick="logVariable('last_activation_email_ts')" href="../../_variables/last_activation_email_ts.html">$last_activation_email_ts</a> + <a class="var it6011" onMouseOver="hilite(6011)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../_variables/time_difference.html">$time_difference</a> );
<a name="l2715"><span class="linenum">2715</span></a>      <a class="var it7321" onMouseOver="hilite(7321)" onMouseOut="lolite()" onClick="logVariable('last_email_time')" href="../../_variables/last_email_time.html">$last_email_time</a> = <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>( <a class="function" onClick="logFunction('locale_shorttimefmt')" href="../../_functions/locale_shorttimefmt.html" onMouseOver="funcPopup(event,'locale_shorttimefmt')">locale_shorttimefmt</a>(), <a class="var it7319" onMouseOver="hilite(7319)" onMouseOut="lolite()" onClick="logVariable('last_activation_email_ts')" href="../../_variables/last_activation_email_ts.html">$last_activation_email_ts</a> + <a class="var it6011" onMouseOver="hilite(6011)" onMouseOut="lolite()" onClick="logVariable('time_difference')" href="../../_variables/time_difference.html">$time_difference</a> );
<a name="l2716"><span class="linenum">2716</span></a>      <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('email')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/email.html">email</a>;
<a name="l2717"><span class="linenum">2717</span></a>  
<a name="l2718"><span class="linenum">2718</span></a>      echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_before'];
<a name="l2719"><span class="linenum">2719</span></a>  
<a name="l2720"><span class="linenum">2720</span></a>      if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['inskin'] )
<a name="l2721"><span class="linenum">2721</span></a>      {
<a name="l2722"><span class="linenum">2722</span></a>          echo '&lt;div class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_class'].'&quot;&gt;';
<a name="l2723"><span class="linenum">2723</span></a>      }
<a name="l2724"><span class="linenum">2724</span></a>  
<a name="l2725"><span class="linenum">2725</span></a>      echo '&lt;ol start=&quot;1&quot; class=&quot;expanded&quot;&gt;';
<a name="l2726"><span class="linenum">2726</span></a>      <a class="var it7322" onMouseOver="hilite(7322)" onMouseOut="lolite()" onClick="logVariable('instruction')" href="../../_variables/instruction.html">$instruction</a> =  sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Open your email account for %s and find a message we sent you on %s at %s with the following title:'), <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a>, <a class="var it7320" onMouseOver="hilite(7320)" onMouseOut="lolite()" onClick="logVariable('last_email_date')" href="../../_variables/last_email_date.html">$last_email_date</a>, <a class="var it7321" onMouseOver="hilite(7321)" onMouseOut="lolite()" onClick="logVariable('last_email_time')" href="../../_variables/last_email_time.html">$last_email_time</a> );
<a name="l2727"><span class="linenum">2727</span></a>      echo '&lt;li&gt;'.<a class="var it7322" onMouseOver="hilite(7322)" onMouseOut="lolite()" onClick="logVariable('instruction')" href="../../_variables/instruction.html">$instruction</a>.'&lt;br /&gt;&lt;b&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Activate your account: %s'), <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('login')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/login.html">login</a> ).'&lt;/b&gt;';
<a name="l2728"><span class="linenum">2728</span></a>      <a class="var it7323" onMouseOver="hilite(7323)" onMouseOut="lolite()" onClick="logVariable('request_validation_url')" href="../../_variables/request_validation_url.html">$request_validation_url</a> = 'href=&quot;'.<a class="function" onClick="logFunction('regenerate_url')" href="../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'force_request=1&amp;validate_required=true&amp;redirect_to='.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'redirect_to' ] ).'&quot;';
<a name="l2729"><span class="linenum">2729</span></a>      echo '&lt;p&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('NOTE: If you don\'t find it, check your &quot;Junk&quot;, &quot;Spam&quot; or &quot;Unsolicited email&quot; folders. If you really can\'t find it, &lt;a %s&gt;request a new activation email&lt;/a&gt;.'), <a class="var it7323" onMouseOver="hilite(7323)" onMouseOut="lolite()" onClick="logVariable('request_validation_url')" href="../../_variables/request_validation_url.html">$request_validation_url</a> ).'&lt;/p&gt;&lt;/li&gt;';
<a name="l2730"><span class="linenum">2730</span></a>      echo '&lt;li&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Add us (%s) to your contacts to make sure you receive future email notifications, especially when someone sends you a private message.'), '&lt;b&gt;&lt;span class=&quot;nowrap&quot;&gt;'.<a class="var it7318" onMouseOver="hilite(7318)" onMouseOut="lolite()" onClick="logVariable('notification_email')" href="../../_variables/notification_email.html">$notification_email</a>.'&lt;/span&gt;&lt;/b&gt;').'&lt;/li&gt;';
<a name="l2731"><span class="linenum">2731</span></a>      echo '&lt;li&gt;&lt;b class=&quot;red&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Click on the activation link in the email.').'&lt;/b&gt;';
<a name="l2732"><span class="linenum">2732</span></a>      echo '&lt;p&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('If this does not work, please copy/paste that link into the address bar of your browser.').'&lt;/p&gt;';
<a name="l2733"><span class="linenum">2733</span></a>      echo '&lt;p&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('If you need assistance, please send an email to %s'), '&lt;b&gt;&lt;a href=&quot;mailto:&quot;'.<a class="var it7318" onMouseOver="hilite(7318)" onMouseOut="lolite()" onClick="logVariable('notification_email')" href="../../_variables/notification_email.html">$notification_email</a>.'&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;'.<a class="var it7318" onMouseOver="hilite(7318)" onMouseOut="lolite()" onClick="logVariable('notification_email')" href="../../_variables/notification_email.html">$notification_email</a>.'&lt;/span&gt;&lt;/a&gt;&lt;/b&gt;' ).'&lt;/p&gt;&lt;/li&gt;';
<a name="l2734"><span class="linenum">2734</span></a>      echo '&lt;/ol&gt;';
<a name="l2735"><span class="linenum">2735</span></a>  
<a name="l2736"><span class="linenum">2736</span></a>      if( ( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a>, '@hotmail.' ) || <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a>, '@live.' ) || <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a>, '@msn.' ) )
<a name="l2737"><span class="linenum">2737</span></a>          &amp;&amp; <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1865" onMouseOver="hilite(1865)" onMouseOut="lolite()" onClick="logVariable('rsc_path')" href="../../_variables/rsc_path.html">$rsc_path</a>.'img/login_help/hotmail-validation.png' ) )
<a name="l2738"><span class="linenum">2738</span></a>      { // The user is on hotmail and we have a help screen to show him: (needs to be localized and include correct site name)
<a name="l2739"><span class="linenum">2739</span></a>          echo '&lt;div class=&quot;center&quot; style=&quot;margin: 2em auto&quot;&gt;&lt;img src=&quot;'.<a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>.'img/login_help/hotmail-validation.png&quot; /&gt;&lt;/div&gt;';
<a name="l2740"><span class="linenum">2740</span></a>      }
<a name="l2741"><span class="linenum">2741</span></a>      elseif( ( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a>, '@gmail.com' ) || <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it3383" onMouseOver="hilite(3383)" onMouseOut="lolite()" onClick="logVariable('user_email')" href="../../_variables/user_email.html">$user_email</a>, '@googlemail.com' ) )
<a name="l2742"><span class="linenum">2742</span></a>          &amp;&amp; <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1865" onMouseOver="hilite(1865)" onMouseOut="lolite()" onClick="logVariable('rsc_path')" href="../../_variables/rsc_path.html">$rsc_path</a>.'img/login_help/gmail-validation.png' ) )
<a name="l2743"><span class="linenum">2743</span></a>      { // The user is on hotmail and we have a help screen to show him: (needs to be localized and include correct site name)
<a name="l2744"><span class="linenum">2744</span></a>          echo '&lt;div class=&quot;center&quot; style=&quot;margin: 2em auto&quot;&gt;&lt;img src=&quot;'.<a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>.'img/login_help/gmail-validation.png&quot; /&gt;&lt;/div&gt;';
<a name="l2745"><span class="linenum">2745</span></a>      }
<a name="l2746"><span class="linenum">2746</span></a>  
<a name="l2747"><span class="linenum">2747</span></a>      if( ! <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['inskin'] )
<a name="l2748"><span class="linenum">2748</span></a>      {
<a name="l2749"><span class="linenum">2749</span></a>          echo '&lt;/div&gt;';
<a name="l2750"><span class="linenum">2750</span></a>      }
<a name="l2751"><span class="linenum">2751</span></a>  
<a name="l2752"><span class="linenum">2752</span></a>      echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_after'];
<a name="l2753"><span class="linenum">2753</span></a>  
<a name="l2754"><span class="linenum">2754</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('grp_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/grp_ID.html">grp_ID</a> == 1 )
<a name="l2755"><span class="linenum">2755</span></a>      { // allow admin users to validate themselves by a single click:
<a name="l2756"><span class="linenum">2756</span></a>          global <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l2757"><span class="linenum">2757</span></a>  
<a name="l2758"><span class="linenum">2758</span></a>          if( empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l2759"><span class="linenum">2759</span></a>          { // Set where to redirect
<a name="l2760"><span class="linenum">2760</span></a>              <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('regenerate_url')" href="../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>();
<a name="l2761"><span class="linenum">2761</span></a>          }
<a name="l2762"><span class="linenum">2762</span></a>  
<a name="l2763"><span class="linenum">2763</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['use_form_wrapper'] ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_before'] : '';
<a name="l2764"><span class="linenum">2764</span></a>  
<a name="l2765"><span class="linenum">2765</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>( <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>.'login.php', 'form_validatemail', 'post', 'fieldset' );
<a name="l2766"><span class="linenum">2766</span></a>  
<a name="l2767"><span class="linenum">2767</span></a>          if( ! empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_template'] ) )
<a name="l2768"><span class="linenum">2768</span></a>          { // Switch layout to template from array
<a name="l2769"><span class="linenum">2769</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('switch_template_parts')" href="../../_functions/switch_template_parts.html" onMouseOver="funcPopup(event,'switch_template_parts')">switch_template_parts</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_template'] );
<a name="l2770"><span class="linenum">2770</span></a>          }
<a name="l2771"><span class="linenum">2771</span></a>  
<a name="l2772"><span class="linenum">2772</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_form')" href="../../_functions/begin_form.html" onMouseOver="funcPopup(event,'begin_form')">begin_form</a>( 'evo_form__login' );
<a name="l2773"><span class="linenum">2773</span></a>  
<a name="l2774"><span class="linenum">2774</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('add_crumb')" href="../../_functions/add_crumb.html" onMouseOver="funcPopup(event,'add_crumb')">add_crumb</a>( 'validateform' );
<a name="l2775"><span class="linenum">2775</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'action', 'validatemail' );
<a name="l2776"><span class="linenum">2776</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'redirect_to', <a class="function" onClick="logFunction('url_rel_to_same_host')" href="../../_functions/url_rel_to_same_host.html" onMouseOver="funcPopup(event,'url_rel_to_same_host')">url_rel_to_same_host</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a> ) );
<a name="l2777"><span class="linenum">2777</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'reqID', 1 );
<a name="l2778"><span class="linenum">2778</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'sessID', <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a onClick="logVariable('ID')" class="var it10685" onMouseOver="hilite(10685)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l2779"><span class="linenum">2779</span></a>  
<a name="l2780"><span class="linenum">2780</span></a>          echo '&lt;p&gt;'.sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Since you are an admin user, you can activate your account (%s) by a single click.' ), <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('email')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/email.html">email</a> ).'&lt;/p&gt;';
<a name="l2781"><span class="linenum">2781</span></a>  <span class="comment">        // TODO: the form submit value is too wide (in Konqueror and most probably in IE!)</span>
<a name="l2782"><span class="linenum">2782</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_form')" href="../../_functions/end_form.html" onMouseOver="funcPopup(event,'end_form')">end_form</a>( array( array(
<a name="l2783"><span class="linenum">2783</span></a>                  'name'  =&gt; 'form_validatemail_admin_submit',
<a name="l2784"><span class="linenum">2784</span></a>                  'value' =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Activate my account!'),
<a name="l2785"><span class="linenum">2785</span></a>                  'class' =&gt; 'ActionButton btn btn-primary'
<a name="l2786"><span class="linenum">2786</span></a>              ) ) ); <span class="comment">// display hidden fields etc</span>
<a name="l2787"><span class="linenum">2787</span></a>  
<a name="l2788"><span class="linenum">2788</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['use_form_wrapper'] ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['form_after'] : '';
<a name="l2789"><span class="linenum">2789</span></a>      }
<a name="l2790"><span class="linenum">2790</span></a>  
<a name="l2791"><span class="linenum">2791</span></a>      echo '&lt;div class=&quot;evo_form__login_links floatright&quot;&gt;';
<a name="l2792"><span class="linenum">2792</span></a>      <a class="function" onClick="logFunction('user_logout_link')" href="../../_functions/user_logout_link.html" onMouseOver="funcPopup(event,'user_logout_link')">user_logout_link</a>();
<a name="l2793"><span class="linenum">2793</span></a>      echo '&lt;/div&gt;';
<a name="l2794"><span class="linenum">2794</span></a>  }
<a name="l2795"><span class="linenum">2795</span></a>  
<a name="l2796"><span class="linenum">2796</span></a>  
<a name="l2797"><span class="linenum">2797</span></a>  <span class="comment">/*</span>
<a name="l2798"><span class="linenum">2798</span></a>  <span class="comment"> * Display javascript password strength indicator bar</span>
<a name="l2799"><span class="linenum">2799</span></a>  <span class="comment"> *</span>
<a name="l2800"><span class="linenum">2800</span></a>  <span class="comment"> * @param array Params</span>
<a name="l2801"><span class="linenum">2801</span></a>  <span class="comment"> */</span>
<a name="l2802"><span class="linenum">2802</span></a>  function <a class="function" onClick="logFunction('display_password_indicator')" href="../../_functions/display_password_indicator.html" onMouseOver="funcPopup(event,'display_password_indicator')">display_password_indicator</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l2803"><span class="linenum">2803</span></a>  {
<a name="l2804"><span class="linenum">2804</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>;
<a name="l2805"><span class="linenum">2805</span></a>  
<a name="l2806"><span class="linenum">2806</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2807"><span class="linenum">2807</span></a>              'pass1-id'    =&gt; <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'pass1' ],
<a name="l2808"><span class="linenum">2808</span></a>              'pass2-id'    =&gt; <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'pass2' ],
<a name="l2809"><span class="linenum">2809</span></a>              'login-id'    =&gt; <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ],
<a name="l2810"><span class="linenum">2810</span></a>              'email-id'    =&gt; <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'email' ],
<a name="l2811"><span class="linenum">2811</span></a>              'field-width' =&gt; 140,
<a name="l2812"><span class="linenum">2812</span></a>              'disp-status' =&gt; 1,
<a name="l2813"><span class="linenum">2813</span></a>              'disp-time'   =&gt; 0,
<a name="l2814"><span class="linenum">2814</span></a>              'blacklist'   =&gt; &quot;'b2evo','b2evolution'&quot;, // Identify the password as &quot;weak&quot; if it includes any of these words
<a name="l2815"><span class="linenum">2815</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2816"><span class="linenum">2816</span></a>  
<a name="l2817"><span class="linenum">2817</span></a>      echo &quot;&lt;script type='text/javascript'&gt;
<a name="l2818"><span class="linenum">2818</span></a>  <span class="comment">    // Load password strength estimation library</span>
<a name="l2819"><span class="linenum">2819</span></a>      (function(){var a;a=function(){var a,b;b=document.<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('script');b.src='&quot;.<a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>.&quot;js/zxcvbn.js';b.type='text/javascript';b.async=!0;a=document.getElementsByTagName('script')[0];return a.parentNode.insertBefore(b,a)};null!=window.attachEvent?window.attachEvent('onload',a):window.addEventListener('load',a,!1)}).call(this);
<a name="l2820"><span class="linenum">2820</span></a>  
<a name="l2821"><span class="linenum">2821</span></a>  <span class="comment">    // Call 'passcheck' function when document is loaded</span>
<a name="l2822"><span class="linenum">2822</span></a>      if( document.addEventListener )
<a name="l2823"><span class="linenum">2823</span></a>      {
<a name="l2824"><span class="linenum">2824</span></a>          document.addEventListener( 'DOMContentLoaded', passcheck, false );
<a name="l2825"><span class="linenum">2825</span></a>      }
<a name="l2826"><span class="linenum">2826</span></a>      else
<a name="l2827"><span class="linenum">2827</span></a>      {
<a name="l2828"><span class="linenum">2828</span></a>          window.attachEvent( 'onload', passcheck );
<a name="l2829"><span class="linenum">2829</span></a>      }
<a name="l2830"><span class="linenum">2830</span></a>  
<a name="l2831"><span class="linenum">2831</span></a>  	function <a class="function" onClick="logFunction('passcheck')" href="../../_functions/passcheck.html" onMouseOver="funcPopup(event,'passcheck')">passcheck</a>()
<a name="l2832"><span class="linenum">2832</span></a>      {
<a name="l2833"><span class="linenum">2833</span></a>          var pass1input = jQuery( 'input#&quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['pass1-id'].&quot;' );
<a name="l2834"><span class="linenum">2834</span></a>          if( pass1input.length == 0 ) {
<a name="l2835"><span class="linenum">2835</span></a>              return; <span class="comment">// password field not found</span>
<a name="l2836"><span class="linenum">2836</span></a>          }
<a name="l2837"><span class="linenum">2837</span></a>  
<a name="l2838"><span class="linenum">2838</span></a>          var pass2input = jQuery( 'input#&quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['pass2-id'].&quot;' );
<a name="l2839"><span class="linenum">2839</span></a>          if( pass2input.length != 0 ) {
<a name="l2840"><span class="linenum">2840</span></a>              pass2input.css( 'width', '&quot;.(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['field-width'] - 2).&quot;px' ); <span class="comment">// Set fixed length</span>
<a name="l2841"><span class="linenum">2841</span></a>          }
<a name="l2842"><span class="linenum">2842</span></a>  
<a name="l2843"><span class="linenum">2843</span></a>  <span class="comment">        // Prepair password field</span>
<a name="l2844"><span class="linenum">2844</span></a>          pass1input.css( 'width', '&quot;.(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['field-width'] - 2).&quot;px' ); <span class="comment">// Set fixed length</span>
<a name="l2845"><span class="linenum">2845</span></a>          pass1input.attr( 'onkeyup', 'return <a class="function" onClick="logFunction('passinfo')" href="../../_functions/passinfo.html" onMouseOver="funcPopup(event,'passinfo')">passinfo</a>(this);' ); <span class="comment">// Add onkeyup attribute</span>
<a name="l2846"><span class="linenum">2846</span></a>          pass1input.parent().<a class="function" onClick="logFunction('append')" href="../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>( \&quot;&lt;div id='p-container'&gt;&lt;div id='p-result'&gt;&lt;/div&gt;&lt;div id='p-status'&gt;&lt;/div&gt;&lt;div id='p-time'&gt;&lt;/div&gt;&lt;/div&gt;\&quot; );
<a name="l2847"><span class="linenum">2847</span></a>  
<a name="l2848"><span class="linenum">2848</span></a>          jQuery( 'head' ).<a class="function" onClick="logFunction('append')" href="../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>( '&lt;style&gt;' +
<a name="l2849"><span class="linenum">2849</span></a>                  '#p-container { position: relative; margin-top: 4px; height:5px; border: 1px solid #CCC; font-size: 84%; line-height:normal; color: #999; background: #FFF } ' +
<a name="l2850"><span class="linenum">2850</span></a>                  '#p-result { height:5px } ' +
<a name="l2851"><span class="linenum">2851</span></a>                  '#p-status { position:absolute; width: 100px; top:-5px; left:&quot;.(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['field-width']+8).&quot;px } ' +
<a name="l2852"><span class="linenum">2852</span></a>                  '#p-time { position:absolute; width: 400px } ' +
<a name="l2853"><span class="linenum">2853</span></a>              '&lt;/style&gt;'
<a name="l2854"><span class="linenum">2854</span></a>          );
<a name="l2855"><span class="linenum">2855</span></a>          jQuery( '#p-container' ).css( 'width', pass1input.outerWidth() - 2 );
<a name="l2856"><span class="linenum">2856</span></a>          var pass1input_marginleft = parseInt( pass1input.css( 'margin-left' ) );
<a name="l2857"><span class="linenum">2857</span></a>          if( pass1input_marginleft &gt; 0 )
<a name="l2858"><span class="linenum">2858</span></a>          {
<a name="l2859"><span class="linenum">2859</span></a>              jQuery( '#p-container' ).css( 'margin-left', pass1input_marginleft + 'px' );
<a name="l2860"><span class="linenum">2860</span></a>          }
<a name="l2861"><span class="linenum">2861</span></a>      }
<a name="l2862"><span class="linenum">2862</span></a>  
<a name="l2863"><span class="linenum">2863</span></a>  	function <a class="function" onClick="logFunction('passinfo')" href="../../_functions/passinfo.html" onMouseOver="funcPopup(event,'passinfo')">passinfo</a>(el)
<a name="l2864"><span class="linenum">2864</span></a>      {
<a name="l2865"><span class="linenum">2865</span></a>          var presult = document.getElementById('p-result');
<a name="l2866"><span class="linenum">2866</span></a>          var pstatus = document.getElementById('p-status');
<a name="l2867"><span class="linenum">2867</span></a>          var ptime = document.getElementById('p-time');
<a name="l2868"><span class="linenum">2868</span></a>  
<a name="l2869"><span class="linenum">2869</span></a>          var vlogin = '';
<a name="l2870"><span class="linenum">2870</span></a>          var login = document.getElementById('&quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['login-id'].&quot;');
<a name="l2871"><span class="linenum">2871</span></a>          if( login != null &amp;&amp; login.value != '' ) { vlogin = login.value; }
<a name="l2872"><span class="linenum">2872</span></a>  
<a name="l2873"><span class="linenum">2873</span></a>          var vemail = '';
<a name="l2874"><span class="linenum">2874</span></a>          var email = document.getElementById('&quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['email-id'].&quot;');
<a name="l2875"><span class="linenum">2875</span></a>          if( email != null &amp;&amp; email.value != '' ) { vemail = email.value; }
<a name="l2876"><span class="linenum">2876</span></a>  
<a name="l2877"><span class="linenum">2877</span></a>  <span class="comment">        // Check the password</span>
<a name="l2878"><span class="linenum">2878</span></a>          var passcheck = zxcvbn(el.value, [vlogin, vemail, &quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['blacklist'].&quot;]);
<a name="l2879"><span class="linenum">2879</span></a>  
<a name="l2880"><span class="linenum">2880</span></a>          var bar_color = 'red';
<a name="l2881"><span class="linenum">2881</span></a>          var bar_status = '&quot;.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Very weak'), 'htmlattr' ).&quot;';
<a name="l2882"><span class="linenum">2882</span></a>  
<a name="l2883"><span class="linenum">2883</span></a>          if( el.value.length == 0 ) {
<a name="l2884"><span class="linenum">2884</span></a>              presult.style.display = 'none';
<a name="l2885"><span class="linenum">2885</span></a>              pstatus.style.display = 'none';
<a name="l2886"><span class="linenum">2886</span></a>              ptime.style.display = 'none';
<a name="l2887"><span class="linenum">2887</span></a>          } else {
<a name="l2888"><span class="linenum">2888</span></a>              presult.style.display = 'block';
<a name="l2889"><span class="linenum">2889</span></a>              pstatus.style.display = 'block';
<a name="l2890"><span class="linenum">2890</span></a>              ptime.style.display = 'block';
<a name="l2891"><span class="linenum">2891</span></a>          }
<a name="l2892"><span class="linenum">2892</span></a>  
<a name="l2893"><span class="linenum">2893</span></a>          switch(passcheck.score) {
<a name="l2894"><span class="linenum">2894</span></a>              case 1:
<a name="l2895"><span class="linenum">2895</span></a>                  bar_color = '#F88158';
<a name="l2896"><span class="linenum">2896</span></a>                  bar_status = '&quot;.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Weak'), 'htmlattr' ).&quot;';
<a name="l2897"><span class="linenum">2897</span></a>                  break;
<a name="l2898"><span class="linenum">2898</span></a>              case 2:
<a name="l2899"><span class="linenum">2899</span></a>                  bar_color = '#FBB917';
<a name="l2900"><span class="linenum">2900</span></a>                  bar_status = '&quot;.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('So-so'), 'htmlattr' ).&quot;';
<a name="l2901"><span class="linenum">2901</span></a>                  break;
<a name="l2902"><span class="linenum">2902</span></a>              case 3:
<a name="l2903"><span class="linenum">2903</span></a>                  bar_color = '#8BB381';
<a name="l2904"><span class="linenum">2904</span></a>                  bar_status = '&quot;.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Good'), 'htmlattr' ).&quot;';
<a name="l2905"><span class="linenum">2905</span></a>                  break;
<a name="l2906"><span class="linenum">2906</span></a>              case 4:
<a name="l2907"><span class="linenum">2907</span></a>                  bar_color = '#59E817';
<a name="l2908"><span class="linenum">2908</span></a>                  bar_status = '&quot;.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Great!'), 'htmlattr' ).&quot;';
<a name="l2909"><span class="linenum">2909</span></a>                  break;
<a name="l2910"><span class="linenum">2910</span></a>          }
<a name="l2911"><span class="linenum">2911</span></a>  
<a name="l2912"><span class="linenum">2912</span></a>          presult.style.width = (passcheck.score * 20 + 20)+'%';
<a name="l2913"><span class="linenum">2913</span></a>          presult.style.background = bar_color;
<a name="l2914"><span class="linenum">2914</span></a>  
<a name="l2915"><span class="linenum">2915</span></a>          if( &quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['disp-status'].&quot; ) {
<a name="l2916"><span class="linenum">2916</span></a>              pstatus.innerHTML = bar_status;
<a name="l2917"><span class="linenum">2917</span></a>          }
<a name="l2918"><span class="linenum">2918</span></a>          if( &quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['disp-time'].&quot; ) {
<a name="l2919"><span class="linenum">2919</span></a>              document.getElementById('p-time').innerHTML = '&quot;.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Estimated crack time').&quot;: ' + passcheck.crack_time_display;
<a name="l2920"><span class="linenum">2920</span></a>          }
<a name="l2921"><span class="linenum">2921</span></a>      }
<a name="l2922"><span class="linenum">2922</span></a>  
<a name="l2923"><span class="linenum">2923</span></a>      jQuery( 'input#&quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'pass1-id' ].&quot;, input#&quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'pass2-id' ].&quot;' ).keyup( function()
<a name="l2924"><span class="linenum">2924</span></a>      {    // Validate passwords
<a name="l2925"><span class="linenum">2925</span></a>          if( jQuery( 'input#&quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'pass2-id' ].&quot;' ).val() != jQuery( 'input#&quot;.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'pass1-id' ].&quot;' ).val() )
<a name="l2926"><span class="linenum">2926</span></a>          {    // Passwords are different
<a name="l2927"><span class="linenum">2927</span></a>              jQuery( '#pass2_status' ).html( '&quot;.<a class="function" onClick="logFunction('get_icon')" href="../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'xross' ).&quot; &quot;.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('The second password is different from the first.').&quot;' );
<a name="l2928"><span class="linenum">2928</span></a>          }
<a name="l2929"><span class="linenum">2929</span></a>          else
<a name="l2930"><span class="linenum">2930</span></a>          {
<a name="l2931"><span class="linenum">2931</span></a>              jQuery( '#pass2_status' ).html( '' );
<a name="l2932"><span class="linenum">2932</span></a>          }
<a name="l2933"><span class="linenum">2933</span></a>      } );
<a name="l2934"><span class="linenum">2934</span></a>  &lt;/script&gt;&quot;;
<a name="l2935"><span class="linenum">2935</span></a>  }
<a name="l2936"><span class="linenum">2936</span></a>  
<a name="l2937"><span class="linenum">2937</span></a>  
<a name="l2938"><span class="linenum">2938</span></a>  <span class="comment">/*</span>
<a name="l2939"><span class="linenum">2939</span></a>  <span class="comment"> * Display javascript login validator</span>
<a name="l2940"><span class="linenum">2940</span></a>  <span class="comment"> *</span>
<a name="l2941"><span class="linenum">2941</span></a>  <span class="comment"> * @param array Params</span>
<a name="l2942"><span class="linenum">2942</span></a>  <span class="comment"> */</span>
<a name="l2943"><span class="linenum">2943</span></a>  function <a class="function" onClick="logFunction('display_login_validator')" href="../../_functions/display_login_validator.html" onMouseOver="funcPopup(event,'display_login_validator')">display_login_validator</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l2944"><span class="linenum">2944</span></a>  {
<a name="l2945"><span class="linenum">2945</span></a>      global <a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>, <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>;
<a name="l2946"><span class="linenum">2946</span></a>  
<a name="l2947"><span class="linenum">2947</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2948"><span class="linenum">2948</span></a>              'login-id' =&gt; <a class="var it403" onMouseOver="hilite(403)" onMouseOut="lolite()" onClick="logVariable('dummy_fields')" href="../../_variables/dummy_fields.html">$dummy_fields</a>[ 'login' ],
<a name="l2949"><span class="linenum">2949</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2950"><span class="linenum">2950</span></a>  
<a name="l2951"><span class="linenum">2951</span></a>      echo '&lt;script type=&quot;text/javascript&quot;&gt;
<a name="l2952"><span class="linenum">2952</span></a>      var login_icon_load = \'&lt;img src=&quot;'.<a class="var it1303" onMouseOver="hilite(1303)" onMouseOut="lolite()" onClick="logVariable('rsc_url')" href="../../_variables/rsc_url.html">$rsc_url</a>.'img/ajax-loader.gif&quot; alt=&quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Loading...').'&quot; title=&quot;'.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Loading...').'&quot; style=&quot;margin:2px 0 0 5px&quot; align=&quot;top&quot; /&gt;\';
<a name="l2953"><span class="linenum">2953</span></a>      var login_icon_available = \''.<a class="function" onClick="logFunction('get_icon')" href="../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'allowback', 'imgtag', array( 'title' =&gt; <a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('This username is available.') ) ).'\';
<a name="l2954"><span class="linenum">2954</span></a>      var login_icon_exists = \''.<a class="function" onClick="logFunction('get_icon')" href="../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'xross', 'imgtag', array( 'title' =&gt; <a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('This username is already in use. Please choose another one.') ) ).'\';
<a name="l2955"><span class="linenum">2955</span></a>  
<a name="l2956"><span class="linenum">2956</span></a>      var login_text_empty = \''.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('Choose an username.').'\';
<a name="l2957"><span class="linenum">2957</span></a>      var login_text_available = \''.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('This username is available.').'\';
<a name="l2958"><span class="linenum">2958</span></a>      var login_text_exists = \''.<a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('This username is already in use. Please choose another one.').'\';
<a name="l2959"><span class="linenum">2959</span></a>  
<a name="l2960"><span class="linenum">2960</span></a>      jQuery( &quot;#register_form input#'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[ 'login-id' ].'&quot; ).change( function()
<a name="l2961"><span class="linenum">2961</span></a>      {    // Validate if username is available
<a name="l2962"><span class="linenum">2962</span></a>          var note_Obj = jQuery( this ).<a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>().<a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>();
<a name="l2963"><span class="linenum">2963</span></a>          if( jQuery( this ).val() == &quot;&quot; )
<a name="l2964"><span class="linenum">2964</span></a>          {    // Login is empty
<a name="l2965"><span class="linenum">2965</span></a>              jQuery( &quot;#login_status&quot; ).html( &quot;&quot; );
<a name="l2966"><span class="linenum">2966</span></a>              note_Obj.html( login_text_empty ).attr( &quot;class&quot;, &quot;notes&quot; );
<a name="l2967"><span class="linenum">2967</span></a>          }
<a name="l2968"><span class="linenum">2968</span></a>          else
<a name="l2969"><span class="linenum">2969</span></a>          {    // Validate login
<a name="l2970"><span class="linenum">2970</span></a>              jQuery( &quot;#login_status&quot; ).html( login_icon_load );
<a name="l2971"><span class="linenum">2971</span></a>              jQuery.ajax( {
<a name="l2972"><span class="linenum">2972</span></a>                  type: &quot;POST&quot;,
<a name="l2973"><span class="linenum">2973</span></a>                  url: &quot;'.<a class="function" onClick="logFunction('get_samedomain_htsrv_url')" href="../../_functions/get_samedomain_htsrv_url.html" onMouseOver="funcPopup(event,'get_samedomain_htsrv_url')">get_samedomain_htsrv_url</a>().'anon_async.php&quot;,
<a name="l2974"><span class="linenum">2974</span></a>                  data: &quot;action=validate_login&amp;login=&quot; + jQuery( this ).val(),
<a name="l2975"><span class="linenum">2975</span></a>                  success: function( result )
<a name="l2976"><span class="linenum">2976</span></a>                  {
<a name="l2977"><span class="linenum">2977</span></a>                      result = <a class="function" onClick="logFunction('ajax_debug_clear')" href="../../_functions/ajax_debug_clear.html" onMouseOver="funcPopup(event,'ajax_debug_clear')">ajax_debug_clear</a>( result );
<a name="l2978"><span class="linenum">2978</span></a>                      if( result == &quot;exists&quot; )
<a name="l2979"><span class="linenum">2979</span></a>                      {    // Login already exists
<a name="l2980"><span class="linenum">2980</span></a>                          jQuery( &quot;#login_status&quot; ).html( login_icon_exists );
<a name="l2981"><span class="linenum">2981</span></a>                          note_Obj.html( login_text_exists ).attr( &quot;class&quot;, &quot;notes red&quot; );
<a name="l2982"><span class="linenum">2982</span></a>                      }
<a name="l2983"><span class="linenum">2983</span></a>                      else if( result == &quot;available&quot; )
<a name="l2984"><span class="linenum">2984</span></a>                      {    // Login is available
<a name="l2985"><span class="linenum">2985</span></a>                          jQuery( &quot;#login_status&quot; ).html( login_icon_available );
<a name="l2986"><span class="linenum">2986</span></a>                          note_Obj.html( login_text_available ).attr( &quot;class&quot;, &quot;notes green&quot; );
<a name="l2987"><span class="linenum">2987</span></a>                      }
<a name="l2988"><span class="linenum">2988</span></a>                      else
<a name="l2989"><span class="linenum">2989</span></a>                      {    // Errors
<a name="l2990"><span class="linenum">2990</span></a>                          jQuery( &quot;#login_status&quot; ).html( login_icon_exists );
<a name="l2991"><span class="linenum">2991</span></a>                          note_Obj.html( result ).attr( &quot;class&quot;, &quot;notes red&quot; );
<a name="l2992"><span class="linenum">2992</span></a>                      }
<a name="l2993"><span class="linenum">2993</span></a>                  }
<a name="l2994"><span class="linenum">2994</span></a>              } );
<a name="l2995"><span class="linenum">2995</span></a>          }
<a name="l2996"><span class="linenum">2996</span></a>      } );
<a name="l2997"><span class="linenum">2997</span></a>  &lt;/script&gt;';
<a name="l2998"><span class="linenum">2998</span></a>  }
<a name="l2999"><span class="linenum">2999</span></a>  
<a name="l3000"><span class="linenum">3000</span></a>  
<a name="l3001"><span class="linenum">3001</span></a>  <span class="comment">/*</span>
<a name="l3002"><span class="linenum">3002</span></a>  <span class="comment"> * Display javascript to quick edit field by AJAX</span>
<a name="l3003"><span class="linenum">3003</span></a>  <span class="comment"> * Used to edit fields such as 'order' by one click on value in table list</span>
<a name="l3004"><span class="linenum">3004</span></a>  <span class="comment"> *</span>
<a name="l3005"><span class="linenum">3005</span></a>  <span class="comment"> * @param array Params</span>
<a name="l3006"><span class="linenum">3006</span></a>  <span class="comment"> */</span>
<a name="l3007"><span class="linenum">3007</span></a>  function <a class="function" onClick="logFunction('init_field_editor_js')" href="../../_functions/init_field_editor_js.html" onMouseOver="funcPopup(event,'init_field_editor_js')">init_field_editor_js</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l3008"><span class="linenum">3008</span></a>  {
<a name="l3009"><span class="linenum">3009</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l3010"><span class="linenum">3010</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3011"><span class="linenum">3011</span></a>              'field_prefix' =&gt; 'order-',
<a name="l3012"><span class="linenum">3012</span></a>              'action_url'   =&gt; '',
<a name="l3013"><span class="linenum">3013</span></a>              'question'     =&gt; <a class="function" onClick="logFunction('TS_')" href="../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>(&quot;Do you want discard your changes for this order field?&quot;),
<a name="l3014"><span class="linenum">3014</span></a>              'relative_to'  =&gt; 'rsc_url',
<a name="l3015"><span class="linenum">3015</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l3016"><span class="linenum">3016</span></a>  
<a name="l3017"><span class="linenum">3017</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['relative_to'] ); <span class="comment">// dependency</span>
<a name="l3018"><span class="linenum">3018</span></a>  
<a name="l3019"><span class="linenum">3019</span></a>      <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>( 'jQuery( document ).<a class="function" onClick="logFunction('on')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>( &quot;click&quot;, &quot;[id^='.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['field_prefix'].']&quot;, function()
<a name="l3020"><span class="linenum">3020</span></a>  {
<a name="l3021"><span class="linenum">3021</span></a>      if( jQuery( this ).<a class="function" onClick="logFunction('find')" href="../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;input&quot; ).length &gt; 0 )
<a name="l3022"><span class="linenum">3022</span></a>      { // This order field is already editing now
<a name="l3023"><span class="linenum">3023</span></a>          return false;
<a name="l3024"><span class="linenum">3024</span></a>      }
<a name="l3025"><span class="linenum">3025</span></a>  
<a name="l3026"><span class="linenum">3026</span></a>  <span class="comment">    // Get current value and wrapper if value is stored in &lt;span&gt;:</span>
<a name="l3027"><span class="linenum">3027</span></a>      var value = jQuery( this ).html();
<a name="l3028"><span class="linenum">3028</span></a>      var wrapper = false;
<a name="l3029"><span class="linenum">3029</span></a>      if( jQuery( this ).<a class="function" onClick="logFunction('find')" href="../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;span&quot; ).length &gt; 0 )
<a name="l3030"><span class="linenum">3030</span></a>      {
<a name="l3031"><span class="linenum">3031</span></a>          wrapper = jQuery( this ).<a class="function" onClick="logFunction('find')" href="../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;span&quot; );
<a name="l3032"><span class="linenum">3032</span></a>          value = wrapper.html();
<a name="l3033"><span class="linenum">3033</span></a>      }
<a name="l3034"><span class="linenum">3034</span></a>  
<a name="l3035"><span class="linenum">3035</span></a>  <span class="comment">    // Create &lt;input&gt; to edit order field</span>
<a name="l3036"><span class="linenum">3036</span></a>      var input = document.<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>( &quot;input&quot; )
<a name="l3037"><span class="linenum">3037</span></a>      var <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../_variables/input.html">$input</a> = jQuery( input );
<a name="l3038"><span class="linenum">3038</span></a>      <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../_variables/input.html">$input</a>.val( value );
<a name="l3039"><span class="linenum">3039</span></a>      <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../_variables/input.html">$input</a>.css( {
<a name="l3040"><span class="linenum">3040</span></a>          width: jQuery( this ).width(),
<a name="l3041"><span class="linenum">3041</span></a>          height: jQuery( this ).height(),
<a name="l3042"><span class="linenum">3042</span></a>          &quot;line-height&quot;: jQuery( this ).height() + &quot;px&quot;,
<a name="l3043"><span class="linenum">3043</span></a>          padding: &quot;0&quot;,
<a name="l3044"><span class="linenum">3044</span></a>          &quot;text-align&quot;: &quot;center&quot;,
<a name="l3045"><span class="linenum">3045</span></a>          &quot;vertical-align&quot;: &quot;bottom&quot;,
<a name="l3046"><span class="linenum">3046</span></a>      } );
<a name="l3047"><span class="linenum">3047</span></a>  
<a name="l3048"><span class="linenum">3048</span></a>  <span class="comment">    // Save current value</span>
<a name="l3049"><span class="linenum">3049</span></a>      jQuery( this ).attr( &quot;rel&quot;, value );
<a name="l3050"><span class="linenum">3050</span></a>  
<a name="l3051"><span class="linenum">3051</span></a>  <span class="comment">    // Replace static value with &lt;input&gt;:</span>
<a name="l3052"><span class="linenum">3052</span></a>      if( wrapper === false )
<a name="l3053"><span class="linenum">3053</span></a>      {
<a name="l3054"><span class="linenum">3054</span></a>          jQuery( this ).html( &quot;&quot; );
<a name="l3055"><span class="linenum">3055</span></a>      }
<a name="l3056"><span class="linenum">3056</span></a>      else
<a name="l3057"><span class="linenum">3057</span></a>      {
<a name="l3058"><span class="linenum">3058</span></a>          wrapper.hide();
<a name="l3059"><span class="linenum">3059</span></a>      }
<a name="l3060"><span class="linenum">3060</span></a>      jQuery( this ).<a class="function" onClick="logFunction('append')" href="../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>( <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../_variables/input.html">$input</a> );
<a name="l3061"><span class="linenum">3061</span></a>      <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../_variables/input.html">$input</a>.focus();
<a name="l3062"><span class="linenum">3062</span></a>  
<a name="l3063"><span class="linenum">3063</span></a>  <span class="comment">    // Bind events for &lt;input&gt;</span>
<a name="l3064"><span class="linenum">3064</span></a>      <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../_variables/input.html">$input</a>.<a class="function" onClick="logFunction('bind')" href="../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>( &quot;keydown&quot;, function( e )
<a name="l3065"><span class="linenum">3065</span></a>      {
<a name="l3066"><span class="linenum">3066</span></a>          var key = e.keyCode;
<a name="l3067"><span class="linenum">3067</span></a>          var parent_obj = jQuery( this ).parent();
<a name="l3068"><span class="linenum">3068</span></a>          if( key == 27 )
<a name="l3069"><span class="linenum">3069</span></a>          { // &quot;Esc&quot; key
<a name="l3070"><span class="linenum">3070</span></a>              if( wrapper === false )
<a name="l3071"><span class="linenum">3071</span></a>              {
<a name="l3072"><span class="linenum">3072</span></a>                  parent_obj.html( parent_obj.attr( &quot;rel&quot; ) );
<a name="l3073"><span class="linenum">3073</span></a>              }
<a name="l3074"><span class="linenum">3074</span></a>              else
<a name="l3075"><span class="linenum">3075</span></a>              {
<a name="l3076"><span class="linenum">3076</span></a>                  parent_obj.<a class="function" onClick="logFunction('find')" href="../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;input&quot; ).<a class="function" onClick="logFunction('remove')" href="../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l3077"><span class="linenum">3077</span></a>                  wrapper.<a class="function" onClick="logFunction('show')" href="../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l3078"><span class="linenum">3078</span></a>              }
<a name="l3079"><span class="linenum">3079</span></a>          }
<a name="l3080"><span class="linenum">3080</span></a>          else if( key == 13 )
<a name="l3081"><span class="linenum">3081</span></a>          { // &quot;Enter&quot; key
<a name="l3082"><span class="linenum">3082</span></a>              <a class="function" onClick="logFunction('results_ajax_load')" href="../../_functions/results_ajax_load.html" onMouseOver="funcPopup(event,'results_ajax_load')">results_ajax_load</a>( jQuery( this ), &quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['action_url'].'&quot; + parent_obj.attr( &quot;id&quot; ) + &quot;&amp;new_value=&quot; + jQuery( this ).val() );
<a name="l3083"><span class="linenum">3083</span></a>          }
<a name="l3084"><span class="linenum">3084</span></a>      } );
<a name="l3085"><span class="linenum">3085</span></a>  
<a name="l3086"><span class="linenum">3086</span></a>      <a class="var it245" onMouseOver="hilite(245)" onMouseOut="lolite()" onClick="logVariable('input')" href="../../_variables/input.html">$input</a>.<a class="function" onClick="logFunction('bind')" href="../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>( &quot;blur&quot;, function()
<a name="l3087"><span class="linenum">3087</span></a>      {
<a name="l3088"><span class="linenum">3088</span></a>          var revert_changes = false;
<a name="l3089"><span class="linenum">3089</span></a>  
<a name="l3090"><span class="linenum">3090</span></a>          var parent_obj = jQuery( this ).parent();
<a name="l3091"><span class="linenum">3091</span></a>          if( parent_obj.attr( &quot;rel&quot; ) != jQuery( this ).val() )
<a name="l3092"><span class="linenum">3092</span></a>          { // Value was changed, ask about saving
<a name="l3093"><span class="linenum">3093</span></a>              if( confirm( &quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['question'].'&quot; ) )
<a name="l3094"><span class="linenum">3094</span></a>              {
<a name="l3095"><span class="linenum">3095</span></a>                  revert_changes = true;
<a name="l3096"><span class="linenum">3096</span></a>              }
<a name="l3097"><span class="linenum">3097</span></a>          }
<a name="l3098"><span class="linenum">3098</span></a>          else
<a name="l3099"><span class="linenum">3099</span></a>          {
<a name="l3100"><span class="linenum">3100</span></a>              revert_changes = true;
<a name="l3101"><span class="linenum">3101</span></a>          }
<a name="l3102"><span class="linenum">3102</span></a>  
<a name="l3103"><span class="linenum">3103</span></a>          if( revert_changes )
<a name="l3104"><span class="linenum">3104</span></a>          { // Revert the changed value
<a name="l3105"><span class="linenum">3105</span></a>              if( wrapper === false )
<a name="l3106"><span class="linenum">3106</span></a>              {
<a name="l3107"><span class="linenum">3107</span></a>                  parent_obj.html( parent_obj.attr( &quot;rel&quot; ) );
<a name="l3108"><span class="linenum">3108</span></a>              }
<a name="l3109"><span class="linenum">3109</span></a>              else
<a name="l3110"><span class="linenum">3110</span></a>              {
<a name="l3111"><span class="linenum">3111</span></a>                  parent_obj.<a class="function" onClick="logFunction('find')" href="../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>( &quot;input&quot; ).<a class="function" onClick="logFunction('remove')" href="../../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l3112"><span class="linenum">3112</span></a>                  wrapper.<a class="function" onClick="logFunction('show')" href="../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l3113"><span class="linenum">3113</span></a>              }
<a name="l3114"><span class="linenum">3114</span></a>          }
<a name="l3115"><span class="linenum">3115</span></a>      } );
<a name="l3116"><span class="linenum">3116</span></a>  
<a name="l3117"><span class="linenum">3117</span></a>      return false;
<a name="l3118"><span class="linenum">3118</span></a>  } );' );
<a name="l3119"><span class="linenum">3119</span></a>  }
<a name="l3120"><span class="linenum">3120</span></a>  
<a name="l3121"><span class="linenum">3121</span></a>  
<a name="l3122"><span class="linenum">3122</span></a>  <span class="comment">/**</span>
<a name="l3123"><span class="linenum">3123</span></a>  <span class="comment"> * Registers headlines for initialization of functions to autocomplete usernames in textarea</span>
<a name="l3124"><span class="linenum">3124</span></a>  <span class="comment"> */</span>
<a name="l3125"><span class="linenum">3125</span></a>  function <a class="function" onClick="logFunction('init_autocomplete_usernames_js')" href="../../_functions/init_autocomplete_usernames_js.html" onMouseOver="funcPopup(event,'init_autocomplete_usernames_js')">init_autocomplete_usernames_js</a>( <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> = 'rsc_url' )
<a name="l3126"><span class="linenum">3126</span></a>  {
<a name="l3127"><span class="linenum">3127</span></a>      if( <a class="function" onClick="logFunction('is_admin_page')" href="../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l3128"><span class="linenum">3128</span></a>      { // Check to enable it in back-office
<a name="l3129"><span class="linenum">3129</span></a>          global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>;
<a name="l3130"><span class="linenum">3130</span></a>          if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) || ! <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'autocomplete_usernames' ) )
<a name="l3131"><span class="linenum">3131</span></a>          { // Blog setting doesn't allow to autocomplete usernames
<a name="l3132"><span class="linenum">3132</span></a>              return;
<a name="l3133"><span class="linenum">3133</span></a>          }
<a name="l3134"><span class="linenum">3134</span></a>      }
<a name="l3135"><span class="linenum">3135</span></a>      else
<a name="l3136"><span class="linenum">3136</span></a>      { // Check to enable it in front-office
<a name="l3137"><span class="linenum">3137</span></a>          global <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>, <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l3138"><span class="linenum">3138</span></a>          if( ! empty( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> ) &amp;&amp; ! <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'autocomplete_usernames' ) )
<a name="l3139"><span class="linenum">3139</span></a>          { // Skin disables to autocomplete usernames
<a name="l3140"><span class="linenum">3140</span></a>              return;
<a name="l3141"><span class="linenum">3141</span></a>          }
<a name="l3142"><span class="linenum">3142</span></a>          if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> != 'edit' &amp;&amp; <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> != 'edit_comment' &amp;&amp; ( empty( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) || ! <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('can_comment')" href="../../_functions/can_comment.html" onMouseOver="funcPopup(event,'can_comment')">can_comment</a>( NULL ) ) )
<a name="l3143"><span class="linenum">3143</span></a>          { // It is not the edit post/comment form and No form to comment of this post
<a name="l3144"><span class="linenum">3144</span></a>              return;
<a name="l3145"><span class="linenum">3145</span></a>          }
<a name="l3146"><span class="linenum">3146</span></a>      }
<a name="l3147"><span class="linenum">3147</span></a>  
<a name="l3148"><span class="linenum">3148</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jquery#', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l3149"><span class="linenum">3149</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'build/textcomplete.bmin.js', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l3150"><span class="linenum">3150</span></a>      <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( 'jquery/jquery.textcomplete.css', <a class="var it2335" onMouseOver="hilite(2335)" onMouseOut="lolite()" onClick="logVariable('relative_to')" href="../../_variables/relative_to.html">$relative_to</a> );
<a name="l3151"><span class="linenum">3151</span></a>  }
<a name="l3152"><span class="linenum">3152</span></a>  
<a name="l3153"><span class="linenum">3153</span></a>  
<a name="l3154"><span class="linenum">3154</span></a>  <span class="comment">/**</span>
<a name="l3155"><span class="linenum">3155</span></a>  <span class="comment"> * Get JS code to prevent event of the key &quot;Enter&quot; for selected elements,</span>
<a name="l3156"><span class="linenum">3156</span></a>  <span class="comment"> * Used to stop form submitting by enter on some input fields</span>
<a name="l3157"><span class="linenum">3157</span></a>  <span class="comment"> *</span>
<a name="l3158"><span class="linenum">3158</span></a>  <span class="comment"> * @param string Selection for jQuery selector</span>
<a name="l3159"><span class="linenum">3159</span></a>  <span class="comment"> */</span>
<a name="l3160"><span class="linenum">3160</span></a>  function <a class="function" onClick="logFunction('get_prevent_key_enter_js')" href="../../_functions/get_prevent_key_enter_js.html" onMouseOver="funcPopup(event,'get_prevent_key_enter_js')">get_prevent_key_enter_js</a>( <a class="var it7324" onMouseOver="hilite(7324)" onMouseOut="lolite()" onClick="logVariable('jquery_selection')" href="../../_variables/jquery_selection.html">$jquery_selection</a> )
<a name="l3161"><span class="linenum">3161</span></a>  {
<a name="l3162"><span class="linenum">3162</span></a>      if( empty( <a class="var it7324" onMouseOver="hilite(7324)" onMouseOut="lolite()" onClick="logVariable('jquery_selection')" href="../../_variables/jquery_selection.html">$jquery_selection</a> ) )
<a name="l3163"><span class="linenum">3163</span></a>      { // jQuery selection must be filled
<a name="l3164"><span class="linenum">3164</span></a>          return '';
<a name="l3165"><span class="linenum">3165</span></a>      }
<a name="l3166"><span class="linenum">3166</span></a>  
<a name="l3167"><span class="linenum">3167</span></a>      return 'jQuery( &quot;'.<a class="var it7324" onMouseOver="hilite(7324)" onMouseOut="lolite()" onClick="logVariable('jquery_selection')" href="../../_variables/jquery_selection.html">$jquery_selection</a>.'&quot; ).keypress( function( e ) { if( e.keyCode == 13 ) return false; } );';
<a name="l3168"><span class="linenum">3168</span></a>  }
<a name="l3169"><span class="linenum">3169</span></a>  
<a name="l3170"><span class="linenum">3170</span></a>  
<a name="l3171"><span class="linenum">3171</span></a>  <span class="comment">/**</span>
<a name="l3172"><span class="linenum">3172</span></a>  <span class="comment"> * Initialize CSS and JS to use font-awesome icons</span>
<a name="l3173"><span class="linenum">3173</span></a>  <span class="comment"> *</span>
<a name="l3174"><span class="linenum">3174</span></a>  <span class="comment"> * @param string Icons type:</span>
<a name="l3175"><span class="linenum">3175</span></a>  <span class="comment"> *               - 'fontawesome' - Use only font-awesome icons</span>
<a name="l3176"><span class="linenum">3176</span></a>  <span class="comment"> *               - 'fontawesome-glyphicons' - Use font-awesome icons as a priority over the glyphicons</span>
<a name="l3177"><span class="linenum">3177</span></a>  <span class="comment"> */</span>
<a name="l3178"><span class="linenum">3178</span></a>  function <a class="function" onClick="logFunction('init_fontawesome_icons')" href="../../_functions/init_fontawesome_icons.html" onMouseOver="funcPopup(event,'init_fontawesome_icons')">init_fontawesome_icons</a>( <a class="var it7325" onMouseOver="hilite(7325)" onMouseOut="lolite()" onClick="logVariable('icons_type')" href="../../_variables/icons_type.html">$icons_type</a> = 'fontawesome' )
<a name="l3179"><span class="linenum">3179</span></a>  {
<a name="l3180"><span class="linenum">3180</span></a>      global <a class="var it2598" onMouseOver="hilite(2598)" onMouseOut="lolite()" onClick="logVariable('b2evo_icons_type')" href="../../_variables/b2evo_icons_type.html">$b2evo_icons_type</a>;
<a name="l3181"><span class="linenum">3181</span></a>  
<a name="l3182"><span class="linenum">3182</span></a>  <span class="comment">    // Use font-awesome icons, @see get_icon()</span>
<a name="l3183"><span class="linenum">3183</span></a>      <a class="var it2598" onMouseOver="hilite(2598)" onMouseOut="lolite()" onClick="logVariable('b2evo_icons_type')" href="../../_variables/b2evo_icons_type.html">$b2evo_icons_type</a> = <a class="var it7325" onMouseOver="hilite(7325)" onMouseOut="lolite()" onClick="logVariable('icons_type')" href="../../_variables/icons_type.html">$icons_type</a>;
<a name="l3184"><span class="linenum">3184</span></a>  
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment">    // Load main CSS file of font-awesome icons</span>
<a name="l3186"><span class="linenum">3186</span></a>      <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( '//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css' );
<a name="l3187"><span class="linenum">3187</span></a>  }
<a name="l3188"><span class="linenum">3188</span></a>  
<a name="l3189"><span class="linenum">3189</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'find': ['find', '', [['rsc/js/flowplayer','flowplayer.js',1498]], 701],
'powered_by': ['powered_by', 'Display "powered by b2evolution" logo ', [['inc/_core','_template.funcs.php',1967]], 32],
'has_errors': ['has_errors', 'Has error message in current object ', [['inc/_core/model','_messages.class.php',314]], 54],
'get_string': ['get_string', 'Concatenates messages of a given category to a string ', [['inc/_core/model','_messages.class.php',258],['inc/_core/model','_log.class.php',419],['inc/_core/model','_log.class.php',620]], 16],
'require_css': ['require_css', 'Memorize that a specific css that file will be required by the current page. All requested files will be included in the page head only once (when headlines is called) ', [['inc/_core','_template.funcs.php',1033]], 92],
'get_prevent_key_enter_js': ['get_prevent_key_enter_js', 'Get JS code to prevent event of the key "Enter" for selected elements, Used to stop form submitting by enter on some input fields ', [['inc/_core','_template.funcs.php',3154]], 3],
'remove_magic_quotes': ['remove_magic_quotes', '', [['inc/_core','_param.funcs.php',1997],['inc/_core','_param.funcs.php',2016],['inc/_core','_param.funcs.php',2048]], 15],
'redirect': ['redirect', '', [['inc/_ext/phpsvnclient','http.php',1387]], 4],
'user_logout_link': ['user_logout_link', 'Template tag: Output a link to logout ', [['inc/users/model','_user.funcs.php',711]], 4],
'display_password_indicator': ['display_password_indicator', '', [['inc/_core','_template.funcs.php',2802]], 3],
'mysql2timestamp': ['mysql2timestamp', 'Convert a MYSQL date to a UNIX timestamp. ', [['inc/_core','_misc.funcs.php',1237]], 15],
'init_ratings_js': ['init_ratings_js', 'Registers headlines required by comments forms ', [['inc/_core','_template.funcs.php',1351]], 6],
'base_tag': ['base_tag', 'Returns a "<base />" tag and remembers that we\'ve used it ({@link regenerate_url()} needs this). ', [['inc/_core','_template.funcs.php',816]], 1],
'password_input': ['password_input', 'Builds a password input field. ', [['inc/_core/ui/forms','_form.class.php',1124]], 17],
'get_filter_titles': ['get_filter_titles', 'Generate a title for the current list, depending on its filtering params ', [['inc/items/model','_itemlistlight.class.php',857],['inc/comments/model','_commentlist.class.php',565]], 5],
'require_js': ['require_js', 'Memorize that a specific javascript file will be required by the current page. All requested files will be included in the page head only once (when headlines is called) ', [['inc/_core','_template.funcs.php',967]], 173],
'results_ajax_load': ['results_ajax_load', '', [['rsc/js','results.js',61]], 1],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'get_param': ['get_param', 'Get the value of a param. ', [['inc/_core','_param.funcs.php',1694],['inc/widgets/model','_widget.class.php',343]], 340],
'require_login': ['require_login', 'Does the given url require logged in user ', [['inc/_core','_misc.funcs.php',5054]], 2],
'get_crumb': ['get_crumb', 'Get crumb via {@link $Session}. ', [['inc/_core','_url.funcs.php',609]], 27],
'begin_form': ['begin_form', 'Builds the form field ', [['inc/_core/ui/forms','_form.class.php',1816]], 194],
'get_setting': ['get_setting', 'Get a setting. ', [['inc/items/model','_item.class.php',6656],['inc/skins/model','_skin.class.php',661],['inc/collections/model','_blog.class.php',2109]], 728],
'display_login_validator': ['display_login_validator', '', [['inc/_core','_template.funcs.php',2943]], 2],
'bullet': ['bullet', 'Displays an empty or a full bullet based on boolean ', [['inc/_core','_template.funcs.php',1728]], 2],
'logout': ['logout', 'Log the user out ', [['inc/users/model','_user.funcs.php',21],['inc/sessions/model','_session.class.php',365],['inc/plugins','_plugin.class.php',2426]], 6],
'param_error': ['param_error', 'Add an error for a variable, either to the Form\'s field and/or the global {@link $Messages} object. ', [['inc/_core','_param.funcs.php',1524]], 148],
'comment_allowed_tags': ['comment_allowed_tags', 'Display allowed tags for comments (Mainly provided for WP compatibility. Not recommended for use) ', [['inc/_core','_template.funcs.php',2020]], 0],
'messages': ['messages', 'Constructor. ', [['inc/_core/model','_messages.class.php',77],['inc/_core','_template.funcs.php',1808]], 86],
'resolve_link_params': ['resolve_link_params', 'Resolve a link based on params (credits stuff) ', [['inc/_core','_misc.funcs.php',5185]], 3],
'header_content_type': ['header_content_type', 'Template tag. Output content-type header ', [['inc/_core','_template.funcs.php',18]], 6],
'get_icon': ['get_icon', 'Return the img html code of the icon ', [['inc/files/model','_filetype.class.php',153],['inc/files/model','_file.class.php',978],['inc/_core','_misc.funcs.php',4122]], 428],
'init': ['init', '', [['inc/sessions','_sessions.init.php',117],['inc/_core','__core.init.php',494],['inc/messaging','_messaging.init.php',134],['inc/_core/model','_module.class.php',19],['inc/_ext/swift/classes','Swift.php',26],['inc/maintenance','_maintenance.init.php',38],['rsc/js/jquery','jquery.touchswipe.js',330],['inc/collections','_collections.init.php',393],['inc/_ext/swift/classes/Swift/Mime','Grammar.php',48],['inc/files','_files.init.php',127],['plugins','_whosonline.plugin.php',165],['inc/_ext/swift/classes/Swift/CharacterReaderFactory','SimpleCharacterReaderFactory.php',47]], 62],
'get_user_register_link': ['get_user_register_link', 'Template tag: Get a link to new user registration ', [['inc/users/model','_user.funcs.php',590]], 3],
'init_autocomplete_login_js': ['init_autocomplete_login_js', 'Registers headlines required to autocomplete the user logins ', [['inc/_core','_template.funcs.php',1567]], 4],
'submit': ['submit', 'Builds a submit input tag ', [['inc/_core/ui/forms','_form.class.php',3221]], 47],
'display_login_js_handler': ['display_login_js_handler', 'Display the login form js part, to get the user salt and encrypt the password ', [['inc/_core','_template.funcs.php',2407]], 2],
'regenerate_url': ['regenerate_url', 'Regenerate current URL from parameters This may clean it up But it is also useful when generating static pages: you cannot rely on $_REQUEST[] ', [['inc/_core','_param.funcs.php',1748]], 503],
'get_template': ['get_template', 'Get a template by name and depth. ', [['skins_adm/chicago','_adminUI.class.php',163],['skins/bootstrap_gallery_legacy','_skin.class.php',397],['skins_adm/bootstrap','_adminUI.class.php',240],['inc/skins/model','_skin.class.php',1180],['inc/_core/ui/forms','_form.class.php',185],['skins/bootstrap_main_skin','_skin.class.php',416],['skins/pureforums','_skin.class.php',322],['skins/bootstrap_blog_skin','_skin.class.php',233],['inc/plugins','_plugin.class.php',378],['skins/bootstrap_gallery_skin','_skin.class.php',397],['skins_adm','_adminUI_general.class.php',859],['skins/forums','_skin.class.php',346],['skins/bootstrap_forums_skin','_skin.class.php',410],['inc/_core/ui','_menu.class.php',430],['skins/bootstrap_manual_skin','_skin.class.php',254]], 211],
'add_css_headline': ['add_css_headline', 'Add a CSS headline. This is an extra function, to provide consistent wrapping and allow to bundle it (i.e. create a bundle with all required JS files and these inline code snippets, in the correct order). ', [['inc/_core','_template.funcs.php',1313]], 7],
'dget': ['dget', 'Get a ready-to-display member param by its name ', [['inc/_core/model/dataobjects','_dataobject.class.php',846]], 252],
'disp': ['disp', 'Display a member param by its name ', [['inc/_core/model/dataobjects','_dataobject.class.php',861],['inc/_core/model','_messages.class.php',152],['inc/_core/model','_log.class.php',241],['inc/_core/model','_log.class.php',597]], 66],
'init_voting_comment_js': ['init_voting_comment_js', 'Registers headlines for initialization of functions to work with Results tables ', [['inc/_core','_template.funcs.php',1512]], 1],
'get_local_rsc_url': ['get_local_rsc_url', 'Get the URL of the rsc folder, on the current blog\'s domain (which is NOT always the same as the $baseurl domain!). ', [['inc/collections/model','_blog.class.php',1294]], 1],
'get_item': ['get_item', 'Getting next item in archive list ', [['plugins','_archives.plugin.php',594]], 102],
'locale_startofweek': ['locale_startofweek', 'Returns the current locale\'s start of week ', [['inc/locales','_locale.funcs.php',432]], 11],
'switch_template_parts': ['switch_template_parts', 'Set a parts of form from array ', [['inc/_core/ui/forms','_form.class.php',690]], 76],
'include_footerlines': ['include_footerlines', 'Outputs the collected translation lines before </body> ', [['inc/_core','_template.funcs.php',1686]], 1],
'mainlist_page_links': ['mainlist_page_links', 'Stub: Links to list pages: ', [['inc/_core','_template.funcs.php',1823]], 20],
'add_headline': ['add_headline', 'Add a headline, which then gets output in the HTML HEAD section. If you want to include CSS or JavaScript files, please use {@link require_css()} and {@link require_js()} instead. This avoids duplicates and allows caching/concatenating those files later (not implemented yet) ', [['inc/_core','_template.funcs.php',1269]], 31],
'check_setting': ['check_setting', 'Check a settings from user for Back office and from skin for Front office ', [['inc/users/model','_user.funcs.php',531]], 6],
'dbsave': ['dbsave', 'Inserts or Updates depending on object state. ', [['inc/_core/model/dataobjects','_dataobject.class.php',569],['inc/sessions/model','_session.class.php',503]], 51],
'init_plugins_js': ['init_plugins_js', 'Registers headlines required to display a bubbletip to the right of plugin help icon. ', [['inc/_core','_template.funcs.php',1430]], 9],
'get_require_url': ['get_require_url', 'Get library url of JS or CSS file by file name or alias ', [['inc/_core','_template.funcs.php',891]], 7],
'title': ['title', 'Template function: display title for item and link to related URL ', [['inc/items/model','_itemlight.class.php',1154]], 58],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'robots_tag': ['robots_tag', 'Robots tag ', [['inc/_core','_template.funcs.php',836]], 4],
'login': ['login', 'Template function: display user\'s login ', [['inc/users/model','_user.class.php',3589]], 29],
'add_js_headline': ['add_js_headline', 'Add a Javascript headline. This is an extra function, to provide consistent wrapping and allow to bundle it (i.e. create a bundle with all required JS files and these inline code snippets, in the correct order). ', [['inc/_core','_template.funcs.php',1299]], 24],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['inc/_core','_url.funcs.php',525]], 256],
'begin_fieldset': ['begin_fieldset', 'Builds a fieldset tag. This is a "fieldset" element by default, but a "th" element for table layout. ', [['inc/_core/ui/forms','_form.class.php',870]], 281],
'action_icon': ['action_icon', 'Generate requested action icon depending on perm ', [['inc/_core/model/dataobjects','_dataobject.class.php',1071],['inc/_core','_misc.funcs.php',3977]], 289],
'link_pages': ['link_pages', 'DEPRECATED ', [['inc/_core','_template.funcs.php',2033]], 1],
'get_lostpassword_url': ['get_lostpassword_url', 'Get url to show user a form to restore a lost passowrd ', [['inc/users/model','_user.funcs.php',240]], 3],
'get_user_logout_link': ['get_user_logout_link', 'Template tag: Get a link to logout ', [['inc/users/model','_user.funcs.php',720]], 3],
'bind': ['bind', 'Attach $is to this stream. ', [['inc/_ext/swift/classes/Swift/ByteStream','AbstractFilterableInputStream.php',108],['inc/_ext/swift/classes/Swift/Signers','DKIMSigner.php',235],['inc/_ext/swift/classes/Swift/ByteStream','ArrayByteStream.php',123],['inc/_ext/swift/classes/Swift/Plugins','BandwidthMonitorPlugin.php',97],['inc/_ext/swift/classes/Swift','InputByteStream.php',49],['inc/_ext/swift/classes/Swift/Signers','DomainKeySigner.php',191],['inc/_ext/swift/classes/Swift/KeyCache','SimpleKeyCacheInputStream.php',78]], 543],
'item_prevnext_links': ['item_prevnext_links', 'Stub: Links to previous and next post in single post mode ', [['inc/_core','_template.funcs.php',1744]], 17],
'trigger_event': ['trigger_event', 'Call all plugins for a given event. ', [['inc/plugins/model','_plugins.class.php',817]], 130],
'get_secure_htsrv_url': ['get_secure_htsrv_url', 'Get secure htsrv url on the same domain as the http request came from It is important on login and register calls _init_hit.inc.php should be called before this call, because ReqHost and ReqPath must be initialized ', [['inc/_core','_misc.funcs.php',5920]], 49],
'cb': ['cb', '', [['plugins/wikitables_plugin','_string_utils.inc.php',281]], 12],
'get_samedomain_htsrv_url': ['get_samedomain_htsrv_url', 'Get htsrv url on the same domain as the http request came from ', [['inc/_core','_misc.funcs.php',5872]], 45],
'init_results_js': ['init_results_js', 'Registers headlines for initialization of functions to work with Results tables ', [['inc/_core','_template.funcs.php',1502]], 3],
'prevnext_user_links': ['prevnext_user_links', 'Link to previous and next link in collection ', [['inc/users/model','_userlist.class.php',605]], 1],
'text': ['text', 'Builds a text (or password) input field. ', [['inc/_core/ui/forms','_form.class.php',1037]], 228],
'datepicker': ['datepicker', '', [['rsc/js/jquery','jquery.ui.b2evo.js',4355],['rsc/js/jquery','jquery.ui.all.js',6828]], 3],
'gen_baseurl': ['gen_baseurl', 'Generate the baseurl of the blog (URL of the folder where the blog lives). Will always end with \'/\'. ', [['inc/collections/model','_blog.class.php',1185]], 10],
'can_rate': ['can_rate', 'Template function: Check if user can rate this post ', [['inc/items/model','_item.class.php',1441]], 12],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['inc/_core','_misc.funcs.php',264]], 318],
'app_version': ['app_version', 'Template tag. ', [['inc/_core','_template.funcs.php',1718]], 2],
'url_rel_to_same_host': ['url_rel_to_same_host', 'Try to make $url relative to $target_url, if scheme, host, user and pass matches. ', [['inc/_core','_url.funcs.php',622]], 29],
'display_ajax_form': ['display_ajax_form', 'Display a form (like comment or contact form) through an ajax call ', [['inc/_core','_template.funcs.php',2109]], 2],
'init_field_editor_js': ['init_field_editor_js', '', [['inc/_core','_template.funcs.php',3007]], 2],
'remove': ['remove', 'Remove the header with the given $name if it\'s set. ', [['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',123],['inc/links/model','_linkcache.class.php',137],['inc/files/model','_filelist.class.php',1044],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',226]], 433],
'header_http_response': ['header_http_response', 'Update global $http_response_code and call function header() ', [['inc/_core','_misc.funcs.php',6115]], 18],
'on': ['on', '', [['rsc/js/bootstrap','typeahead.bundle.js',739]], 619],
'ajax_debug_clear': ['ajax_debug_clear', 'Clear ajax request from debug text ', [['rsc/js','ajax.js',8]], 46],
'add_js_translation': ['add_js_translation', 'Memorize that a specific translation will be required by the current page. All requested translations will be included in the page body only once (when footerlines is called) ', [['inc/_core','_template.funcs.php',1252]], 1],
'can_comment': ['can_comment', 'Template function: Check if user can leave comment on this post or display error ', [['inc/items/model','_item.class.php',1151]], 17],
'addup_percentage': ['addup_percentage', '', [['inc/_core','_template.funcs.php',2051]], 1],
'headers_content_mightcache': ['headers_content_mightcache', 'This is a placeholder for future development. ', [['inc/_core','_template.funcs.php',44]], 27],
'bloginfo': ['bloginfo', 'DEPRECATED ', [['inc/_core','_template.funcs.php',2011]], 0],
'init_jqplot_js': ['init_jqplot_js', 'Registers headlines required to jqPlot charts ', [['inc/_core','_template.funcs.php',1647]], 3],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'init_fontawesome_icons': ['init_fontawesome_icons', 'Initialize CSS and JS to use font-awesome icons ', [['inc/_core','_template.funcs.php',3171]], 4],
'extend': ['extend', '', [['rsc/js/videojs','video.js',9920]], 740],
'url_add_tail': ['url_add_tail', 'Add a tail (starting with "/") at the end of an URL before any params (starting with "?") ', [['inc/_core','_url.funcs.php',575]], 38],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'display_if_empty': ['display_if_empty', '', [['inc/comments/model','_commentlist.class.php',626],['inc/_core','_template.funcs.php',1881],['inc/_core/ui/results','_results.class.php',2259]], 39],
'processsubmit': ['processsubmit', '', [['inc/_core','_template.funcs.php',2431]], 0],
'parse': ['parse', '', [['inc/_ext/phpsvnclient','xml_parser.php',177],['inc/_ext/mime_parser','mime_parser.php',1598],['plugins/markdown_plugin','_parsedown.inc.php',69]], 61],
'header_nocache': ['header_nocache', 'Sends HTTP headers to avoid caching of the page at the browser level (at least without revalidating with the server to make sure whether the content has changed or not). ', [['inc/_core','_template.funcs.php',285]], 9],
'display_list': ['display_list', 'Display an array as a list: ', [['inc/_core','_misc.funcs.php',5126]], 2],
'evo_json_encode': ['evo_json_encode', 'A wrapper for json_encode function We need to pass valid UTF-8 string to json_encode, otherwise it may return NULL ', [['inc/_core','_misc.funcs.php',6043]], 12],
'begin_field': ['begin_field', 'Start an input field. ', [['inc/_core/ui/forms','_form.class.php',728]], 25],
'display_login_form': ['display_login_form', 'Display login form ', [['inc/_core','_template.funcs.php',2193]], 2],
'get_star_rating': ['get_star_rating', 'Get rating as 5 stars ', [['inc/_core','_template.funcs.php',1935]], 2],
'domain': ['domain', 'Constructor ', [['inc/sessions/model','_domain.class.php',34]], 5],
'prevnext_item_links': ['prevnext_item_links', 'Link to previous and next link in collection ', [['inc/items/model','_itemlist.class.php',444]], 1],
'init_tokeninput_js': ['init_tokeninput_js', 'Registers headlines for initialization of jQuery Tokeninput plugin ', [['inc/_core','_template.funcs.php',1491]], 7],
'get_permanent_url': ['get_permanent_url', 'Generate permalink to this comment. ', [['inc/comments/model','_comment.class.php',2372],['inc/chapters/model','_chapter.class.php',379],['inc/items/model','_itemlight.class.php',376]], 155],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['inc/users/model','_user.funcs.php',38]], 274],
'display_activateinfo': ['display_activateinfo', 'Display user activate info form content ', [['inc/_core','_template.funcs.php',2617]], 2],
'user_prevnext_links': ['user_prevnext_links', 'Stub: Links to previous and next user in single user mode ', [['inc/_core','_template.funcs.php',1766]], 14],
'resize': ['resize', '', [['rsc/js/jquery','jquery.jcrop.js',952]], 11],
'show': ['show', '', [['rsc/js/jquery','jquery.ui.all.js',12111],['rsc/js/jquery','jquery.jcrop.js',1008]], 283],
'require_js_helper': ['require_js_helper', 'Memorize that a specific js helper will be required by the current page. This allows to require JS + SS + do init. ', [['inc/_core','_template.funcs.php',1116]], 9],
'passinfo': ['passinfo', '', [['inc/_core','_template.funcs.php',2863]], 1],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'switch_edit_view': ['switch_edit_view', '', [['skins_fallback_v6','_edit_comment.disp.php',142],['skins/forums','_edit_comment.disp.php',189],['skins/pureforums','_edit_comment.disp.php',191],['skins_fallback_v5','_edit_comment.disp.php',148]], 1],
'display_lostpassword_form': ['display_lostpassword_form', 'Display lost password form ', [['inc/_core','_template.funcs.php',2512]], 2],
'credits': ['credits', 'Template tag for credits ', [['inc/_core','_template.funcs.php',1894]], 32],
'hiddens_by_key': ['hiddens_by_key', 'Builds a list of hidden inputs from an array where the keys are the field names. ', [['inc/_core/ui/forms','_form.class.php',3145]], 56],
'generate_random_key': ['generate_random_key', 'Generate a valid key of size $length. ', [['inc/_core','_misc.funcs.php',4759]], 24],
'dequeue': ['dequeue', 'Dequeue a file from $headlines array by file name or alias ', [['inc/_core','_template.funcs.php',1092]], 17],
'include_headlines': ['include_headlines', 'Outputs the collected HTML HEAD lines. ', [['inc/_core','_template.funcs.php',1669]], 13],
'typeahead': ['typeahead', '', [['rsc/js/bootstrap','typeahead.bundle.js',1343]], 2],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'append': ['append', '', [['inc/_core/model/db','_sql.class.php',348]], 234],
'get_name': ['get_name', 'Get name of widget ', [['inc/widgets/widgets','_coll_tag_cloud.widget.php',63],['plugins/twitter_plugin/twitteroauth','oauth.php',102],['plugins/twitter_plugin/twitteroauth','oauth.php',128],['plugins/twitter_plugin/twitteroauth','oauth.php',155],['inc/widgets/widgets','_coll_page_list.widget.php',77],['inc/items/model','_itemstatus.class.php',77],['inc/widgets/widgets','_coll_logo.widget.php',48],['inc/widgets/widgets','_mobile_skin_switcher.widget.php',48],['inc/widgets/widgets','_online_users.widget.php',48],['inc/regional/model','_country.class.php',119],['inc/widgets/widgets','_user_login.widget.php',49],['inc/skins/model','_skin.class.php',137],['inc/widgets/widgets','_linkblog.widget.php',76],['inc/widgets/widgets','_coll_related_post_list.widget.php',76],['inc/widgets/widgets','_coll_item_list.widget.php',247],['inc/items/model','_itemtype.class.php',379],['inc/widgets/widgets','_user_links.widget.php',48],['inc/widgets/widgets','_coll_featured_intro.widget.php',128],['inc/regional/model','_subregion.class.php',131],['inc/widgets/widgets','_coll_search_form.widget.php',48],['inc/widgets/widgets','_coll_longdesc.widget.php',48],['inc/widgets/widgets','_content_hierarchy.widget.php',93],['inc/widgets/widgets','_coll_tagline.widget.php',48],['inc/widgets/widgets','_coll_current_filters.widget.php',49],['inc/widgets/widgets','_coll_category_list.widget.php',49],['inc/widgets/widgets','_org_members.widget.php',48],['inc/collections/model','_blog.class.php',2802],['inc/widgets/widgets','_coll_comment_list.widget.php',102],['inc/widgets/widgets','_member_count.widget.php',48],['inc/users/model','_userfield.class.php',279],['inc/widgets/widgets','_coll_link_list.widget.php',76],['inc/widgets/widgets','_menu_link.widget.php',84],['inc/widgets/widgets','_free_html.widget.php',48],['inc/widgets/widgets','_breadcrumb_path.widget.php',76],['inc/regional/model','_city.class.php',121],['inc/widgets/widgets','_image.widget.php',48],['inc/users/model','_group.class.php',448],['inc/regional/model','_currency.class.php',120],['inc/widgets/widgets','_profile_menu_link.widget.php',48],['inc/widgets/widgets','_coll_media_index.widget.php',156],['inc/widgets/model','_widget.class.php',157],['inc/widgets/widgets','_colls_list_owner.widget.php',48],['inc/widgets/widgets','_user_tools.widget.php',225],['inc/widgets/widgets','_coll_common_links.widget.php',52],['inc/widgets/widgets','_msg_menu_link.widget.php',54],['inc/widgets/widgets','_user_avatars.widget.php',150],['inc/widgets/widgets','_coll_xml_feeds.widget.php',48],['inc/regional/model','_region.class.php',114],['inc/chapters/model','_chapter.class.php',618],['inc/antispam/model','_iprange.class.php',128],['inc/sessions/model','_goalcat.class.php',78],['inc/widgets/widgets','_coll_avatar.widget.php',49],['inc/widgets/widgets','_coll_post_list.widget.php',76],['inc/files/model','_file.class.php',574],['inc/sessions/model','_goal.class.php',195],['inc/widgets/widgets','_user_register.widget.php',49],['inc/widgets/widgets','_colls_list_public.widget.php',48],['inc/users/model','_userfieldgroup.class.php',97],['inc/users/model','_organization.class.php',88],['inc/widgets/widgets','_coll_title.widget.php',69]], 114],
'init_ajax_forms': ['init_ajax_forms', 'Registers headlines required by AJAX forms, but only if javascript forms are enabled in blog settings. ', [['inc/_core','_template.funcs.php',1337]], 3],
'createelement': ['createelement', '', [['rsc/js/videojs','video.js',10648]], 208],
'request_title': ['request_title', 'Display a global title matching filter params ', [['inc/_core','_template.funcs.php',799]], 49],
'header_redirect': ['header_redirect', 'Sends HTTP header to redirect to the previous location (which can be given as function parameter, GET parameter (redirect_to), is taken from {@link Hit::$referer} or {@link $baseurl}). ', [['inc/_core','_template.funcs.php',91]], 427],
'param_action': ['param_action', 'Get the action from params. ', [['inc/_core','_param.funcs.php',458]], 63],
'add_js_for_toolbar': ['add_js_for_toolbar', 'Registers all the javascripts needed by the toolbar menu ', [['inc/_core','_template.funcs.php',1326]], 1],
'init_voting_bar': ['init_voting_bar', '', [['rsc/js/build','colorbox.bmin.js',2],['rsc/js','voting.js',7]], 2],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'check_and_show_': ['check_and_show_', '', [['inc/_core','_template.funcs.php',2157]], 0],
'user_register_link': ['user_register_link', 'Template tag: Output a link to new user registration ', [['inc/users/model','_user.funcs.php',572]], 4],
'page_links': ['page_links', 'Template tag ', [['inc/items/model','_itemlistlight.class.php',1723],['inc/items/model','_item.class.php',2484],['inc/comments/model','_commentlist.class.php',637]], 10],
'abort_collect': ['abort_collect', 'We are going to output personal data and we want to abort collecting the data for the cache. ', [['inc/_core/model','_blockcache.class.php',213],['inc/_core/model','_pagecache.class.php',470]], 13],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'header_noexpire': ['header_noexpire', 'This is to "force" (strongly suggest) caching. ', [['inc/_core','_template.funcs.php',306]], 1],
'syslog_insert': ['syslog_insert', 'Insert system log into DB ', [['inc/_core','_misc.funcs.php',6553]], 52],
'locale_shorttimefmt': ['locale_shorttimefmt', 'Returns the current locale\'s default short time format ', [['inc/locales','_locale.funcs.php',414]], 4],
'init_userfields_js': ['init_userfields_js', 'Registers headlines required to display a bubbletip to the right of user multi-field. ', [['inc/_core','_template.funcs.php',1400]], 2],
'percentage': ['percentage', 'Return a formatted percentage (should probably go to _misc.funcs) ', [['inc/_core','_template.funcs.php',2042]], 3],
'add_crumb': ['add_crumb', 'Add a crumb to the current form ', [['inc/_core/ui/forms','_form.class.php',3094]], 164],
'hex_sha1': ['hex_sha1', '', [['rsc/js/src','sha1.js',22],['rsc/js/build','sha1_md5.bundle.js',22],['rsc/js/build','sha1_md5.bmin.js',1]], 3],
'text_input': ['text_input', 'Builds a text (or password) input field. ', [['inc/_core/ui/forms','_form.class.php',988]], 257],
'hidden': ['hidden', 'Builds an hidden input tag, overwriting any previous hidden values (except for "foo[]"). ', [['inc/_core/ui/forms','_form.class.php',3046]], 689],
'locale_datefmt': ['locale_datefmt', 'Returns the current locale\'s default date format ', [['inc/locales','_locale.funcs.php',385]], 71],
'is_recursive': ['is_recursive', 'Check if the array given as the first param contains recursion ', [['inc/_core','_template.funcs.php',2060]], 2],
'ts_': ['ts_', 'Translate and escape single quotes. ', [['inc/skins/model','_skin.class.php',1162],['inc/plugins','_plugin.class.php',2847],['inc/locales','_locale.funcs.php',233]], 236],
'hex_md5': ['hex_md5', '', [['rsc/js/build','sha1_md5.bundle.js',346],['rsc/js/src','md5.js',15]], 3],
'get_login_url': ['get_login_url', 'Get url to login ', [['inc/users/model','_user.funcs.php',178]], 23],
'get_request_title': ['get_request_title', 'Get global title matching filter params ', [['inc/_core','_template.funcs.php',365]], 13],
'passcheck': ['passcheck', '', [['inc/_core','_template.funcs.php',2831]], 0],
'username': ['username', 'Build username/login field. ', [['inc/_core/ui/forms','_form.class.php',1178]], 22],
'write': ['write', '', [['inc/locales','_pofile.class.php',297],['inc/_ext/swift/classes/Swift/ByteStream','AbstractFilterableInputStream.php',75],['inc/_ext/swift/classes/Swift/Signers','DKIMSigner.php',201],['inc/_ext/swift/classes/Swift/ByteStream','ArrayByteStream.php',98],['inc/_ext/swift/classes/Swift/Plugins','BandwidthMonitorPlugin.php',77],['inc/_ext/swift/classes/Swift','CharacterStream.php',73],['inc/_ext/swift/classes/Swift/CharacterStream','NgCharacterStream.php',260],['inc/_ext/swift/classes/Swift/CharacterStream','ArrayCharacterStream.php',181],['inc/_ext/swift/classes/Swift','InputByteStream.php',23],['inc/_ext/swift/classes/Swift/Signers','DomainKeySigner.php',153],['inc/_ext/swift/classes/Swift/KeyCache','SimpleKeyCacheInputStream.php',52]], 70],
'header_etag': ['header_etag', 'This adds teh etag header ', [['inc/_core','_template.funcs.php',354]], 1],
'init_autocomplete_usernames_js': ['init_autocomplete_usernames_js', 'Registers headlines for initialization of functions to autocomplete usernames in textarea ', [['inc/_core','_template.funcs.php',3122]], 5],
'gen_current_page_etag': ['gen_current_page_etag', 'Generate an etag to identify the version of the current page. We use this primarily to make a difference between the same page that has been generated for anonymous users and a version that has been generated for a specific user. ', [['inc/_core','_template.funcs.php',320]], 2],
'get_form_': ['get_form_', '', [['inc/_core','_template.funcs.php',2144]], 0],
'load_all': ['load_all', 'Load the cache **extensively** ', [['inc/items/model','_itemcache.class.php',52],['inc/comments/model','_commentcache.class.php',43],['inc/settings/model','_abstractsettings.class.php',130],['inc/_core/model/dataobjects','_dataobjectcache.class.php',187],['inc/files/model','_filecache.class.php',41],['inc/users/model','_usercache.class.php',51],['inc/collections/model','_blogcache.class.php',175]], 32],
'gen_blogurl': ['gen_blogurl', 'Generate blog URL. That is the URL of the main page/home page of the blog. This will nto necessarily be a folder. For example, it can end in index.php?blog=4 ', [['inc/collections/model','_blog.class.php',1128]], 94],
'init_colorpicker_js': ['init_colorpicker_js', 'Registers headlines for initialization of colorpicker inputs ', [['inc/_core','_template.funcs.php',1539]], 4],
'end_form': ['end_form', 'Ends the form, optionally displays buttons and closes all open fieldsets. ', [['inc/_core/ui/forms','_form.class.php',1975]], 208],
'buttons_input': ['buttons_input', 'Builds a button list. ', [['inc/_core/ui/forms','_form.class.php',2841]], 8],
'init_bubbletip_js': ['init_bubbletip_js', 'Registers headlines required to a bubbletip above user login. ', [['inc/_core','_template.funcs.php',1367]], 5],
'end_field': ['end_field', 'End an input field. ', [['inc/_core/ui/forms','_form.class.php',826]], 21],
'blog_home_link': ['blog_home_link', 'Output a link to current blog. ', [['inc/_core','_template.funcs.php',870]], 0],
'end_fieldset': ['end_fieldset', 'Ends a fieldset. ', [['inc/_core/ui/forms','_form.class.php',966]], 278],
'init_datepicker_js': ['init_datepicker_js', 'Registers headlines for initialization of datepicker inputs ', [['inc/_core','_template.funcs.php',1458]], 10],
'star_rating': ['star_rating', 'Display rating as 5 stars ', [['inc/_core','_template.funcs.php',1955]], 1],
'is_admin_page': ['is_admin_page', 'Is the current page an admin/backoffice page? ', [['inc/_core','_misc.funcs.php',5028]], 118],
'file_exists': ['file_exists', '', [], 142],
'array_merge': ['array_merge', '', [], 702],
'ceil': ['ceil', '', [], 96],
'strpos': ['strpos', '', [], 347],
'in_array': ['in_array', '', [], 417],
'is_array': ['is_array', '', [], 311],
'next': ['next', '', [], 172],
'number_format': ['number_format', '', [], 21],
'date': ['date', '', [], 446],
'implode': ['implode', '', [], 571],
'substr': ['substr', '', [], 745],
'str_replace': ['str_replace', '', [], 531],
'end': ['end', '', [], 64],
'defined': ['defined', '', [], 962],
'header': ['header', '', [], 83],
'each': ['each', '', [], 826],
'is_null': ['is_null', '', [], 299],
'strip_tags': ['strip_tags', '', [], 53],
'htmlspecialchars': ['htmlspecialchars', '', [], 152],
'array_pop': ['array_pop', '', [], 54],
'gmdate': ['gmdate', '', [], 18],
'count': ['count', '', [], 928],
'preg_replace': ['preg_replace', '', [], 325],
'basename': ['basename', '', [], 24],
'strtolower': ['strtolower', '', [], 202],
'is_object': ['is_object', '', [], 70],
'headers_sent': ['headers_sent', '', [], 4],
'unserialize': ['unserialize', '', [], 18],
'preg_match': ['preg_match', '', [], 423],
'rawurlencode': ['rawurlencode', '', [], 137]};
CLASS_DATA={
'form': ['form', 'Form class ', [['inc/_core/ui/forms','_form.class.php',28]], 208]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
