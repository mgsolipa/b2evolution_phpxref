<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/_core/model/dataobjects/_dataobject.class.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='inc/_core/model/dataobjects';
filename='_dataobject.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/_core/model/dataobjects/</a> -> <a href="_dataobject.class.php.html">_dataobject.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_dataobject.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_dataobject.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements the abstract DataObject base class.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2006 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> * Parts of this file are copyright (c)2005-2006 by PROGIDISTRI - {@link http://progidistri.com/}.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> *</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * @package evocore</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> */</span>
<a name="l16"><span class="linenum">  16</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Data Object Base Class</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * This is typically an abstract class, useful only when derived.</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @package evocore</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @version beta</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @abstract</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> */</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('DataObject')" href="../../../../_classes/dataobject.html" onMouseOver="classPopup(event,'dataobject')">DataObject</a>
<a name="l28"><span class="linenum">  28</span></a>  {
<a name="l29"><span class="linenum">  29</span></a>      <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">     * Unique ID of object in database</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">     *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">     * Please use get/set functions to read or write this param</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">     *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">     * @var int</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">     * @access protected</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     */</span>
<a name="l37"><span class="linenum">  37</span></a>      var <a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('ID')" href="../../../../_variables/ID.html">$ID</a> = 0;  <span class="comment">// This will be the ID in the DB</span>
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>      var <a class="var it2441" onMouseOver="hilite(2441)" onMouseOut="lolite()" onClick="logVariable('allow_ID_insert')" href="../../../../_variables/allow_ID_insert.html">$allow_ID_insert</a> = false;
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>      <span class="comment">/**#@+</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * @access private</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     */</span>
<a name="l44"><span class="linenum">  44</span></a>      var <a class="var it1659" onMouseOver="hilite(1659)" onMouseOut="lolite()" onClick="logVariable('dbtablename')" href="../../../../_variables/dbtablename.html">$dbtablename</a>;
<a name="l45"><span class="linenum">  45</span></a>      var <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../../_variables/dbprefix.html">$dbprefix</a>;
<a name="l46"><span class="linenum">  46</span></a>      var <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../../_variables/dbIDname.html">$dbIDname</a>;
<a name="l47"><span class="linenum">  47</span></a>      var <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('datecreated_field')" href="../../../../_variables/datecreated_field.html">$datecreated_field</a>;
<a name="l48"><span class="linenum">  48</span></a>      var <a class="var it1475" onMouseOver="hilite(1475)" onMouseOut="lolite()" onClick="logVariable('datemodified_field')" href="../../../../_variables/datemodified_field.html">$datemodified_field</a>;
<a name="l49"><span class="linenum">  49</span></a>      var <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('creator_field')" href="../../../../_variables/creator_field.html">$creator_field</a>;
<a name="l50"><span class="linenum">  50</span></a>      var <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('lasteditor_field')" href="../../../../_variables/lasteditor_field.html">$lasteditor_field</a>;
<a name="l51"><span class="linenum">  51</span></a>      var <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../../_variables/dbchanges.html">$dbchanges</a> = array();
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">    /**#@-*/</span>
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>      <span class="comment">/**</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * Relations that may restrict deletion.</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     */</span>
<a name="l57"><span class="linenum">  57</span></a>      var <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('delete_restrictions')" href="../../../../_variables/delete_restrictions.html">$delete_restrictions</a> = NULL;
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      <span class="comment">/**</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * Relations that will cascade deletion.</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     */</span>
<a name="l62"><span class="linenum">  62</span></a>      var <a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('delete_cascades')" href="../../../../_variables/delete_cascades.html">$delete_cascades</a> = NULL;
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      <span class="comment">/**</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * Constructor</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     *</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * @param string Name of table in database</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     * @param string Prefix of fields in the table</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     * @param string Name of the ID field (including prefix)</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">     * @param string datetime field name</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     * @param string datetime field name</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * @param string User ID field name</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * @param string User ID field name</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     * @param string datetime field name</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">     */</span>
<a name="l77"><span class="linenum">  77</span></a>  	function <a class="function" onClick="logFunction('DataObject')" href="../../../../_functions/dataobject.html" onMouseOver="funcPopup(event,'dataobject')">DataObject</a>( <a class="var it2444" onMouseOver="hilite(2444)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../../../_variables/tablename.html">$tablename</a>, <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a> = '', <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../../_variables/dbIDname.html">$dbIDname</a> = 'ID', <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('datecreated_field')" href="../../../../_variables/datecreated_field.html">$datecreated_field</a> = '', <a class="var it1475" onMouseOver="hilite(1475)" onMouseOut="lolite()" onClick="logVariable('datemodified_field')" href="../../../../_variables/datemodified_field.html">$datemodified_field</a> = '', <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('creator_field')" href="../../../../_variables/creator_field.html">$creator_field</a> = '', <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('lasteditor_field')" href="../../../../_variables/lasteditor_field.html">$lasteditor_field</a> = '' )
<a name="l78"><span class="linenum">  78</span></a>      {
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbtablename.html">dbtablename</a>        = <a class="var it2444" onMouseOver="hilite(2444)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../../../_variables/tablename.html">$tablename</a>;
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbprefix.html">dbprefix</a>           = <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>;
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbIDname.html">dbIDname</a>           = <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../../_variables/dbIDname.html">$dbIDname</a>;
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>  = <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('datecreated_field')" href="../../../../_variables/datecreated_field.html">$datecreated_field</a>;
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a> = <a class="var it1475" onMouseOver="hilite(1475)" onMouseOut="lolite()" onClick="logVariable('datemodified_field')" href="../../../../_variables/datemodified_field.html">$datemodified_field</a>;
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/creator_field.html">creator_field</a>      = <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('creator_field')" href="../../../../_variables/creator_field.html">$creator_field</a>;
<a name="l85"><span class="linenum">  85</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lasteditor_field.html">lasteditor_field</a>   = <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('lasteditor_field')" href="../../../../_variables/lasteditor_field.html">$lasteditor_field</a>;
<a name="l86"><span class="linenum">  86</span></a>      }
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>  
<a name="l89"><span class="linenum">  89</span></a>      <span class="comment">/**</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">     * Initialize relations for restrict and cascade deletion.</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">     */</span>
<a name="l92"><span class="linenum">  92</span></a>  	function <a class="function" onClick="logFunction('init_relations')" href="../../../../_functions/init_relations.html" onMouseOver="funcPopup(event,'init_relations')">init_relations</a>()
<a name="l93"><span class="linenum">  93</span></a>      {
<a name="l94"><span class="linenum">  94</span></a>          if( ! <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a> ) || ! <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_restrictions')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_restrictions.html">delete_restrictions</a> ) )
<a name="l95"><span class="linenum">  95</span></a>          { // Initialize the relations only once
<a name="l96"><span class="linenum">  96</span></a>              return;
<a name="l97"><span class="linenum">  97</span></a>          }
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_restrictions')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_restrictions.html">delete_restrictions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_delete_restrictions')" href="../../../../_functions/get_delete_restrictions.html" onMouseOver="funcPopup(event,'get_delete_restrictions')">get_delete_restrictions</a>();
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_delete_cascades')" href="../../../../_functions/get_delete_cascades.html" onMouseOver="funcPopup(event,'get_delete_cascades')">get_delete_cascades</a>();
<a name="l101"><span class="linenum"> 101</span></a>      }
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>  
<a name="l104"><span class="linenum"> 104</span></a>      <span class="comment">/**</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     * Get this class db table config params</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">     *</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * @return array</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     */</span>
<a name="l109"><span class="linenum"> 109</span></a>  	static function <a class="function" onClick="logFunction('get_class_db_config')" href="../../../../_functions/get_class_db_config.html" onMouseOver="funcPopup(event,'get_class_db_config')">get_class_db_config</a>()
<a name="l110"><span class="linenum"> 110</span></a>      {
<a name="l111"><span class="linenum"> 111</span></a>          static <a class="var it2445" onMouseOver="hilite(2445)" onMouseOut="lolite()" onClick="logVariable('class_db_config')" href="../../../../_variables/class_db_config.html">$class_db_config</a>;
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>          if( !isset( <a class="var it2445" onMouseOver="hilite(2445)" onMouseOut="lolite()" onClick="logVariable('class_db_config')" href="../../../../_variables/class_db_config.html">$class_db_config</a> ) )
<a name="l114"><span class="linenum"> 114</span></a>          {
<a name="l115"><span class="linenum"> 115</span></a>              <a class="var it2445" onMouseOver="hilite(2445)" onMouseOut="lolite()" onClick="logVariable('class_db_config')" href="../../../../_variables/class_db_config.html">$class_db_config</a> = array(
<a name="l116"><span class="linenum"> 116</span></a>                  'dbprefix'           =&gt; '',
<a name="l117"><span class="linenum"> 117</span></a>                  'dbIDname'           =&gt; 'ID',
<a name="l118"><span class="linenum"> 118</span></a>                  'datecreated_field'  =&gt; '',
<a name="l119"><span class="linenum"> 119</span></a>                  'datemodified_field' =&gt; '',
<a name="l120"><span class="linenum"> 120</span></a>                  'creator_field'      =&gt; '',
<a name="l121"><span class="linenum"> 121</span></a>                  'lasteditor_field'   =&gt; '',
<a name="l122"><span class="linenum"> 122</span></a>              );
<a name="l123"><span class="linenum"> 123</span></a>          }
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>          return <a class="var it2445" onMouseOver="hilite(2445)" onMouseOut="lolite()" onClick="logVariable('class_db_config')" href="../../../../_variables/class_db_config.html">$class_db_config</a>;
<a name="l126"><span class="linenum"> 126</span></a>      }
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>  
<a name="l129"><span class="linenum"> 129</span></a>      <span class="comment">/**</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     * Get delete restriction settings</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     *</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">     * Note: In some special cases the objects may require additional restriction values.</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">     * The extra restrictions must be added with the $this-&gt;add_relations() function.</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     *</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     * @return array</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     */</span>
<a name="l137"><span class="linenum"> 137</span></a>  	static function <a class="function" onClick="logFunction('get_delete_restrictions')" href="../../../../_functions/get_delete_restrictions.html" onMouseOver="funcPopup(event,'get_delete_restrictions')">get_delete_restrictions</a>()
<a name="l138"><span class="linenum"> 138</span></a>      {
<a name="l139"><span class="linenum"> 139</span></a>          <span class="comment">/* Examples of the delete restrictions:</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment"></span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">        return array(</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">                array( 'table'=&gt;'T_table_name', 'fk'=&gt;'foreign_column_ID', 'msg'=&gt;T_('%d rows'),</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">                    'and_condition' =&gt; 'foreign_column_name = &quot;value&quot;' ),</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">            );</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment"></span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">        */</span>
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>          return array();
<a name="l149"><span class="linenum"> 149</span></a>      }
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      <span class="comment">/**</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * Get delete cascade settings</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     *</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * Note: In some special cases ( E.g. in case of spammer user delete ) the objects may require additional cascade values.</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * The extra cascade options must be added with the $this-&gt;add_relations() function.</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     *</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     * @return array</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">     */</span>
<a name="l160"><span class="linenum"> 160</span></a>  	static function <a class="function" onClick="logFunction('get_delete_cascades')" href="../../../../_functions/get_delete_cascades.html" onMouseOver="funcPopup(event,'get_delete_cascades')">get_delete_cascades</a>()
<a name="l161"><span class="linenum"> 161</span></a>      {
<a name="l162"><span class="linenum"> 162</span></a>          <span class="comment">/* Examples of the delete cascades:</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment"></span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">        return array(</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">                array( 'table'=&gt;'T_table_name', 'fk'=&gt;'foreign_column_ID', 'msg'=&gt;T_('%d rows'),</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">                    'and_condition' =&gt; 'foreign_column_name = &quot;value&quot;' ),</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">            );</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment"></span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">        */</span>
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>          return array();
<a name="l172"><span class="linenum"> 172</span></a>      }
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>      <span class="comment">/**</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">     * Delete the given class objects from the database which corresponds to the given condition or to the given ids array</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     * This function must be overriden on those classes where the db delete requires some updates on other table content or some files/folders delete.</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     * Note: the delete cascade arrays are handled!</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * Delete cascades are handled recursively only if the cascade arrays from the reffering class contains the class and class_path params ( e.g. see User class )!</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     *</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * @param string the name of the class which objects needs to be deleted;</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     *   Note: This is required until min phpversion will be 5.3. Since PHP 5.3 we can use static::function_name to achieve late static bindings</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     * @param string where condition</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     * @param array object ids</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     * @param array additional params if required</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     * @return mixed # of rows affected or false if error</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     */</span>
<a name="l188"><span class="linenum"> 188</span></a>  	static function <a class="function" onClick="logFunction('db_delete_where')" href="../../../../_functions/db_delete_where.html" onMouseOver="funcPopup(event,'db_delete_where')">db_delete_where</a>( <a class="var it2446" onMouseOver="hilite(2446)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../../_variables/class_name.html">$class_name</a>, <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a>, <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> = NULL, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = NULL )
<a name="l189"><span class="linenum"> 189</span></a>      {
<a name="l190"><span class="linenum"> 190</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../../_variables/db_config.html">$db_config</a>;
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">        // Init delete cascades</span>
<a name="l193"><span class="linenum"> 193</span></a>          if( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['delete_cascades'] ) )
<a name="l194"><span class="linenum"> 194</span></a>          { // Use predefined delete cascades
<a name="l195"><span class="linenum"> 195</span></a>              <a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('delete_cascades')" href="../../../../_variables/delete_cascades.html">$delete_cascades</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['delete_cascades'];
<a name="l196"><span class="linenum"> 196</span></a>              unset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['delete_cascades'] );
<a name="l197"><span class="linenum"> 197</span></a>          }
<a name="l198"><span class="linenum"> 198</span></a>          else
<a name="l199"><span class="linenum"> 199</span></a>          { // Get delete cascades from the given class
<a name="l200"><span class="linenum"> 200</span></a>              <a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('delete_cascades')" href="../../../../_variables/delete_cascades.html">$delete_cascades</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>( array( <a class="var it2446" onMouseOver="hilite(2446)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../../_variables/class_name.html">$class_name</a>, 'get_delete_cascades' ) );
<a name="l201"><span class="linenum"> 201</span></a>          }
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">        // Init dbconfig variables</span>
<a name="l204"><span class="linenum"> 204</span></a>          if( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['class_db_config'] ) )
<a name="l205"><span class="linenum"> 205</span></a>          { // Use predefined class dbconfig
<a name="l206"><span class="linenum"> 206</span></a>              <a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['class_db_config'];
<a name="l207"><span class="linenum"> 207</span></a>              unset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['class_db_config'] );
<a name="l208"><span class="linenum"> 208</span></a>          }
<a name="l209"><span class="linenum"> 209</span></a>          else
<a name="l210"><span class="linenum"> 210</span></a>          { // Get class dbconfig from the given class
<a name="l211"><span class="linenum"> 211</span></a>              <a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>( array( <a class="var it2446" onMouseOver="hilite(2446)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../../_variables/class_name.html">$class_name</a>, 'get_class_db_config' ) );
<a name="l212"><span class="linenum"> 212</span></a>          }
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>          if( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['force_delete'] ) )
<a name="l215"><span class="linenum"> 215</span></a>          { // In case of force deletion, also delete restrictions
<a name="l216"><span class="linenum"> 216</span></a>              <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('delete_restrictions')" href="../../../../_variables/delete_restrictions.html">$delete_restrictions</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>( array( <a class="var it2446" onMouseOver="hilite(2446)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../../_variables/class_name.html">$class_name</a>, 'get_delete_restrictions' ) );
<a name="l217"><span class="linenum"> 217</span></a>              <a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('delete_cascades')" href="../../../../_variables/delete_cascades.html">$delete_cascades</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('delete_cascades')" href="../../../../_variables/delete_cascades.html">$delete_cascades</a>, <a class="var it2442" onMouseOver="hilite(2442)" onMouseOut="lolite()" onClick="logVariable('delete_restrictions')" href="../../../../_variables/delete_restrictions.html">$delete_restrictions</a> );
<a name="l218"><span class="linenum"> 218</span></a>          }
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>          <a class="var it2450" onMouseOver="hilite(2450)" onMouseOut="lolite()" onClick="logVariable('delete_query')" href="../../../../_variables/delete_query.html">$delete_query</a> = 'DELETE '.<a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a>['dbtablename'];
<a name="l221"><span class="linenum"> 221</span></a>          <a class="var it2451" onMouseOver="hilite(2451)" onMouseOut="lolite()" onClick="logVariable('from_clause')" href="../../../../_variables/from_clause.html">$from_clause</a> = ' FROM '.<a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a>['dbtablename'];
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>          if( empty( <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a> ) )
<a name="l224"><span class="linenum"> 224</span></a>          {
<a name="l225"><span class="linenum"> 225</span></a>              if( empty( <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ) )
<a name="l226"><span class="linenum"> 226</span></a>              {
<a name="l227"><span class="linenum"> 227</span></a>                  return 0;
<a name="l228"><span class="linenum"> 228</span></a>              }
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>              <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a> = <a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a>['dbIDname'].' IN ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ).' )';
<a name="l231"><span class="linenum"> 231</span></a>          }
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>          if( empty( <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ) )
<a name="l234"><span class="linenum"> 234</span></a>          {
<a name="l235"><span class="linenum"> 235</span></a>              <a class="var it2452" onMouseOver="hilite(2452)" onMouseOut="lolite()" onClick="logVariable('sub_query')" href="../../../../_variables/sub_query.html">$sub_query</a> = 'SELECT '.<a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a>['dbIDname'].'
<a name="l236"><span class="linenum"> 236</span></a>                          FROM '.<a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a>['dbtablename'].'
<a name="l237"><span class="linenum"> 237</span></a>                          WHERE '.<a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a>;
<a name="l238"><span class="linenum"> 238</span></a>              <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it2452" onMouseOver="hilite(2452)" onMouseOut="lolite()" onClick="logVariable('sub_query')" href="../../../../_variables/sub_query.html">$sub_query</a> );
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>              if( empty( <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ) )
<a name="l241"><span class="linenum"> 241</span></a>              {
<a name="l242"><span class="linenum"> 242</span></a>                  return 0;
<a name="l243"><span class="linenum"> 243</span></a>              }
<a name="l244"><span class="linenum"> 244</span></a>          }
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../../_variables/use_transaction.html">$use_transaction</a> = ( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['use_transaction'] ) ) ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['use_transaction'] : true;
<a name="l247"><span class="linenum"> 247</span></a>          if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l248"><span class="linenum"> 248</span></a>          {
<a name="l249"><span class="linenum"> 249</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l250"><span class="linenum"> 250</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['use_transaction'] = false;
<a name="l251"><span class="linenum"> 251</span></a>          }
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>          <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../../_variables/index.html">$index</a> = 0;
<a name="l254"><span class="linenum"> 254</span></a>          foreach( <a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('delete_cascades')" href="../../../../_variables/delete_cascades.html">$delete_cascades</a> as <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a> )
<a name="l255"><span class="linenum"> 255</span></a>          {
<a name="l256"><span class="linenum"> 256</span></a>              if( !isset( <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../../_variables/db_config.html">$db_config</a>['aliases'][<a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['table']] ) )
<a name="l257"><span class="linenum"> 257</span></a>              {    // We have no declaration for this table, we consider we don't deal with this table in this app:
<a name="l258"><span class="linenum"> 258</span></a>                  continue;
<a name="l259"><span class="linenum"> 259</span></a>              }
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">            // add more where condition</span>
<a name="l262"><span class="linenum"> 262</span></a>              <a class="var it2454" onMouseOver="hilite(2454)" onMouseOut="lolite()" onClick="logVariable('more_restriction')" href="../../../../_variables/more_restriction.html">$more_restriction</a> = '';
<a name="l263"><span class="linenum"> 263</span></a>              if( isset( <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['and_condition'] ) )
<a name="l264"><span class="linenum"> 264</span></a>              {
<a name="l265"><span class="linenum"> 265</span></a>                  <a class="var it2454" onMouseOver="hilite(2454)" onMouseOut="lolite()" onClick="logVariable('more_restriction')" href="../../../../_variables/more_restriction.html">$more_restriction</a> .= ' AND ( '.<a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['and_condition'].' )';
<a name="l266"><span class="linenum"> 266</span></a>              }
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>              if( isset( <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['class'] ) )
<a name="l269"><span class="linenum"> 269</span></a>              { // The cascade class attributum is set, call the corresponding <a class="function" onClick="logFunction('db_delete_where')" href="../../../../_functions/db_delete_where.html" onMouseOver="funcPopup(event,'db_delete_where')">db_delete_where</a>() function
<a name="l270"><span class="linenum"> 270</span></a>                  if( empty( <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ) )
<a name="l271"><span class="linenum"> 271</span></a>                  { // delete by where condition
<a name="l272"><span class="linenum"> 272</span></a>                      <a class="var it2452" onMouseOver="hilite(2452)" onMouseOut="lolite()" onClick="logVariable('sub_query')" href="../../../../_variables/sub_query.html">$sub_query</a> = 'SELECT '.<a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a>['dbIDname'].'
<a name="l273"><span class="linenum"> 273</span></a>                          FROM '.<a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a>['dbtablename'].'
<a name="l274"><span class="linenum"> 274</span></a>                          WHERE '.<a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a>.<a class="var it2454" onMouseOver="hilite(2454)" onMouseOut="lolite()" onClick="logVariable('more_restriction')" href="../../../../_variables/more_restriction.html">$more_restriction</a>;
<a name="l275"><span class="linenum"> 275</span></a>                      if( <a class="var it2449" onMouseOver="hilite(2449)" onMouseOut="lolite()" onClick="logVariable('self_db_config')" href="../../../../_variables/self_db_config.html">$self_db_config</a>['dbtablename'] == <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['table'] )
<a name="l276"><span class="linenum"> 276</span></a>                      { // We are removing items from the same table, avoid infinite loop
<a name="l277"><span class="linenum"> 277</span></a>                          <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it2452" onMouseOver="hilite(2452)" onMouseOut="lolite()" onClick="logVariable('sub_query')" href="../../../../_variables/sub_query.html">$sub_query</a> );
<a name="l278"><span class="linenum"> 278</span></a>                          if( empty( <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ) )
<a name="l279"><span class="linenum"> 279</span></a>                          { // There are no entries in the foreign key table with the given condition, so nothing to delete
<a name="l280"><span class="linenum"> 280</span></a>                              continue;
<a name="l281"><span class="linenum"> 281</span></a>                          }
<a name="l282"><span class="linenum"> 282</span></a>                      }
<a name="l283"><span class="linenum"> 283</span></a>                  }
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">                // Set cascade condition based on the already known foreign key ids or on the sub query in case of unknown foreign keys</span>
<a name="l286"><span class="linenum"> 286</span></a>                  <a class="var it2455" onMouseOver="hilite(2455)" onMouseOut="lolite()" onClick="logVariable('cascade_condition')" href="../../../../_variables/cascade_condition.html">$cascade_condition</a> = <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['fk'].' IN ( '.( empty( <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ) ? <a class="var it2452" onMouseOver="hilite(2452)" onMouseOut="lolite()" onClick="logVariable('sub_query')" href="../../../../_variables/sub_query.html">$sub_query</a> : <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ) ).' )';
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>                  <a class="function" onClick="logFunction('load_class')" href="../../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['class_path'], <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['class'] );
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">                // Delete the given class objects together with all of its delete cascades</span>
<a name="l290"><span class="linenum"> 290</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['force_delete'] = true;
<a name="l291"><span class="linenum"> 291</span></a>                  <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>( array( <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['class'], 'db_delete_where' ), <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['class'], <a class="var it2455" onMouseOver="hilite(2455)" onMouseOut="lolite()" onClick="logVariable('cascade_condition')" href="../../../../_variables/cascade_condition.html">$cascade_condition</a>, NULL, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l292"><span class="linenum"> 292</span></a>                  if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> === false )
<a name="l293"><span class="linenum"> 293</span></a>                  { // Delete cascade operation failed in a cascade class
<a name="l294"><span class="linenum"> 294</span></a>                      if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l295"><span class="linenum"> 295</span></a>                      { // Rollback transaction
<a name="l296"><span class="linenum"> 296</span></a>                          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l297"><span class="linenum"> 297</span></a>                      }
<a name="l298"><span class="linenum"> 298</span></a>                      return false;
<a name="l299"><span class="linenum"> 299</span></a>                  }
<a name="l300"><span class="linenum"> 300</span></a>                  continue;
<a name="l301"><span class="linenum"> 301</span></a>              }
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>              <a class="var it1920" onMouseOver="hilite(1920)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../../_variables/alias.html">$alias</a> = <a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['table'].++<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../../_variables/index.html">$index</a>;
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE '.<a class="var it1920" onMouseOver="hilite(1920)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../../_variables/alias.html">$alias</a>.'
<a name="l306"><span class="linenum"> 306</span></a>                  FROM '.<a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['table'].' AS '.<a class="var it1920" onMouseOver="hilite(1920)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../../_variables/alias.html">$alias</a>.'
<a name="l307"><span class="linenum"> 307</span></a>                  WHERE '.<a class="var it1920" onMouseOver="hilite(1920)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../../../_variables/alias.html">$alias</a>.'.'.<a class="var it2453" onMouseOver="hilite(2453)" onMouseOut="lolite()" onClick="logVariable('cascade')" href="../../../../_variables/cascade.html">$cascade</a>['fk'].' IN ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../../_variables/object_ids.html">$object_ids</a> ).' )'.<a class="var it2454" onMouseOver="hilite(2454)" onMouseOut="lolite()" onClick="logVariable('more_restriction')" href="../../../../_variables/more_restriction.html">$more_restriction</a>,
<a name="l308"><span class="linenum"> 308</span></a>                  'Delete object from db with where condition' );
<a name="l309"><span class="linenum"> 309</span></a>              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> === false )
<a name="l310"><span class="linenum"> 310</span></a>              { // There is an open transaction, needs to be closed.
<a name="l311"><span class="linenum"> 311</span></a>                  if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../../_variables/use_transaction.html">$use_transaction</a> ) {
<a name="l312"><span class="linenum"> 312</span></a>                      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l313"><span class="linenum"> 313</span></a>                  }
<a name="l314"><span class="linenum"> 314</span></a>                  return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>;
<a name="l315"><span class="linenum"> 315</span></a>              }
<a name="l316"><span class="linenum"> 316</span></a>          }
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">        // Delete this (main/parent) object:</span>
<a name="l319"><span class="linenum"> 319</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it2450" onMouseOver="hilite(2450)" onMouseOut="lolite()" onClick="logVariable('delete_query')" href="../../../../_variables/delete_query.html">$delete_query</a>.<a class="var it2451" onMouseOver="hilite(2451)" onMouseOut="lolite()" onClick="logVariable('from_clause')" href="../../../../_variables/from_clause.html">$from_clause</a>.' WHERE '.<a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a>, 'Delete object from db with where condition' );
<a name="l320"><span class="linenum"> 320</span></a>          if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l321"><span class="linenum"> 321</span></a>          { // There is an open transaction, needs to be closed.
<a name="l322"><span class="linenum"> 322</span></a>              ( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> === false ) ? <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>() : <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l323"><span class="linenum"> 323</span></a>          }
<a name="l324"><span class="linenum"> 324</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>;
<a name="l325"><span class="linenum"> 325</span></a>      }
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>      <span class="comment">/**</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">     * Add additional relations for specific cases</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">     * E.g. On spammer user delete the user comments must be also deleted</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     *</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     * @param string relation type: restrictions, cascades</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">     * @param unknown_type $new_relations</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     */</span>
<a name="l335"><span class="linenum"> 335</span></a>  	function <a class="function" onClick="logFunction('add_relations')" href="../../../../_functions/add_relations.html" onMouseOver="funcPopup(event,'add_relations')">add_relations</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>, <a class="var it2456" onMouseOver="hilite(2456)" onMouseOut="lolite()" onClick="logVariable('new_relations')" href="../../../../_variables/new_relations.html">$new_relations</a> )
<a name="l336"><span class="linenum"> 336</span></a>      {
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">        // Make sure relations was initialized</span>
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('init_relations')" href="../../../../_functions/init_relations.html" onMouseOver="funcPopup(event,'init_relations')">init_relations</a>();
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>          switch( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> )
<a name="l341"><span class="linenum"> 341</span></a>          {
<a name="l342"><span class="linenum"> 342</span></a>              case 'restrictions':
<a name="l343"><span class="linenum"> 343</span></a>                  if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_restrictions')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_restrictions.html">delete_restrictions</a> ) )
<a name="l344"><span class="linenum"> 344</span></a>                  {
<a name="l345"><span class="linenum"> 345</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_restrictions')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_restrictions.html">delete_restrictions</a> = <a class="var it2456" onMouseOver="hilite(2456)" onMouseOut="lolite()" onClick="logVariable('new_relations')" href="../../../../_variables/new_relations.html">$new_relations</a>;
<a name="l346"><span class="linenum"> 346</span></a>                  }
<a name="l347"><span class="linenum"> 347</span></a>                  else
<a name="l348"><span class="linenum"> 348</span></a>                  {
<a name="l349"><span class="linenum"> 349</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_restrictions')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_restrictions.html">delete_restrictions</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_restrictions')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_restrictions.html">delete_restrictions</a>, <a class="var it2456" onMouseOver="hilite(2456)" onMouseOut="lolite()" onClick="logVariable('new_relations')" href="../../../../_variables/new_relations.html">$new_relations</a> );
<a name="l350"><span class="linenum"> 350</span></a>                  }
<a name="l351"><span class="linenum"> 351</span></a>                  break;
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>              case 'cascades':
<a name="l354"><span class="linenum"> 354</span></a>                  if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a> ) )
<a name="l355"><span class="linenum"> 355</span></a>                  {
<a name="l356"><span class="linenum"> 356</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a> = <a class="var it2456" onMouseOver="hilite(2456)" onMouseOut="lolite()" onClick="logVariable('new_relations')" href="../../../../_variables/new_relations.html">$new_relations</a>;
<a name="l357"><span class="linenum"> 357</span></a>                  }
<a name="l358"><span class="linenum"> 358</span></a>                  else
<a name="l359"><span class="linenum"> 359</span></a>                  {
<a name="l360"><span class="linenum"> 360</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a>, <a class="var it2456" onMouseOver="hilite(2456)" onMouseOut="lolite()" onClick="logVariable('new_relations')" href="../../../../_variables/new_relations.html">$new_relations</a> );
<a name="l361"><span class="linenum"> 361</span></a>                  }
<a name="l362"><span class="linenum"> 362</span></a>                  break;
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>              default:
<a name="l365"><span class="linenum"> 365</span></a>                  <a class="function" onClick="logFunction('debug_die')" href="../../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid realtion type received.' );
<a name="l366"><span class="linenum"> 366</span></a>          }
<a name="l367"><span class="linenum"> 367</span></a>      }
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>  
<a name="l370"><span class="linenum"> 370</span></a>      <span class="comment">/**</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">     * Records a change that will need to be updated in the db</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">     *</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     * @access protected</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">     * @param string Name of parameter</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">     * @param string DB field type ('string', 'number', 'date', 'dbfield' )</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     * @param mixed Pointer to value of parameter - dh&gt; pointer? So it should be a reference? Would make sense IMHO anyway.. fp&gt; I just wonder why it's not already a reference... :@</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     */</span>
<a name="l378"><span class="linenum"> 378</span></a>  	function <a class="function" onClick="logFunction('dbchange')" href="../../../../_functions/dbchange.html" onMouseOver="funcPopup(event,'dbchange')">dbchange</a>( <a class="var it2457" onMouseOver="hilite(2457)" onMouseOut="lolite()" onClick="logVariable('dbfieldname')" href="../../../../_variables/dbfieldname.html">$dbfieldname</a>, <a class="var it2458" onMouseOver="hilite(2458)" onMouseOut="lolite()" onClick="logVariable('dbfieldtype')" href="../../../../_variables/dbfieldtype.html">$dbfieldtype</a>, <a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('valuepointer')" href="../../../../_variables/valuepointer.html">$valuepointer</a> ) // TODO: dh&gt; value by reference? see above..
<a name="l379"><span class="linenum"> 379</span></a>      {
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">        // echo '&lt;br /&gt;DB change on :'.$dbfieldname;</span>
<a name="l381"><span class="linenum"> 381</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbchanges.html">dbchanges</a>[<a class="var it2457" onMouseOver="hilite(2457)" onMouseOut="lolite()" onClick="logVariable('dbfieldname')" href="../../../../_variables/dbfieldname.html">$dbfieldname</a>]['type'] = <a class="var it2458" onMouseOver="hilite(2458)" onMouseOut="lolite()" onClick="logVariable('dbfieldtype')" href="../../../../_variables/dbfieldtype.html">$dbfieldtype</a>;
<a name="l382"><span class="linenum"> 382</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbchanges.html">dbchanges</a>[<a class="var it2457" onMouseOver="hilite(2457)" onMouseOut="lolite()" onClick="logVariable('dbfieldname')" href="../../../../_variables/dbfieldname.html">$dbfieldname</a>]['value'] = <a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('valuepointer')" href="../../../../_variables/valuepointer.html">$valuepointer</a> ;
<a name="l383"><span class="linenum"> 383</span></a>      }
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>      <span class="comment">/**</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">     * Update the DB based on previously recorded changes</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">     *</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">     * @param boolean do we want to auto track the mod date?</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">     * @return boolean true on success, false on failure to update, NULL if no update necessary</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">     */</span>
<a name="l392"><span class="linenum"> 392</span></a>  	function <a class="function" onClick="logFunction('dbupdate')" href="../../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>( <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('auto_track_modification')" href="../../../../_variables/auto_track_modification.html">$auto_track_modification</a> = true )
<a name="l393"><span class="linenum"> 393</span></a>      {
<a name="l394"><span class="linenum"> 394</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> == 0 )
<a name="l397"><span class="linenum"> 397</span></a>          {
<a name="l398"><span class="linenum"> 398</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'New object cannot be updated!' );
<a name="l399"><span class="linenum"> 399</span></a>          }
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbchanges.html">dbchanges</a> ) == 0 )
<a name="l402"><span class="linenum"> 402</span></a>          {
<a name="l403"><span class="linenum"> 403</span></a>              return NULL;    <span class="comment">// No changes!</span>
<a name="l404"><span class="linenum"> 404</span></a>          }
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>          if( <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('auto_track_modification')" href="../../../../_variables/auto_track_modification.html">$auto_track_modification</a> )
<a name="l407"><span class="linenum"> 407</span></a>          { // We wnat to track modification date and author automatically:
<a name="l408"><span class="linenum"> 408</span></a>              if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>) )
<a name="l409"><span class="linenum"> 409</span></a>              {    // We want to track modification date:
<a name="l410"><span class="linenum"> 410</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>, 'date', <a class="phpfunction" onClick="logFunction('date')" href="../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d H:i:s',<a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a>) );
<a name="l411"><span class="linenum"> 411</span></a>              }
<a name="l412"><span class="linenum"> 412</span></a>              if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lasteditor_field.html">lasteditor_field</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_object')" href="../../../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>) )
<a name="l413"><span class="linenum"> 413</span></a>              {    // We want to track last editor:
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">                // TODO: the current_User is not necessarily the last editor. Item::dbupdate() gets called after incrementing the view for example!</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">                // fplanque: this should be handled by set() deciding wether the setting changes the last editor or not</span>
<a name="l416"><span class="linenum"> 416</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lasteditor_field.html">lasteditor_field</a>, 'number', <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l417"><span class="linenum"> 417</span></a>              }
<a name="l418"><span class="linenum"> 418</span></a>          }
<a name="l419"><span class="linenum"> 419</span></a>  
<a name="l420"><span class="linenum"> 420</span></a>          <a class="var it2460" onMouseOver="hilite(2460)" onMouseOut="lolite()" onClick="logVariable('sql_changes')" href="../../../../_variables/sql_changes.html">$sql_changes</a> = array();
<a name="l421"><span class="linenum"> 421</span></a>          foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbchanges.html">dbchanges</a> as <a class="var it2461" onMouseOver="hilite(2461)" onMouseOut="lolite()" onClick="logVariable('loop_dbfieldname')" href="../../../../_variables/loop_dbfieldname.html">$loop_dbfieldname</a> =&gt; <a class="var it2462" onMouseOver="hilite(2462)" onMouseOut="lolite()" onClick="logVariable('loop_dbchange')" href="../../../../_variables/loop_dbchange.html">$loop_dbchange</a> )
<a name="l422"><span class="linenum"> 422</span></a>          {
<a name="l423"><span class="linenum"> 423</span></a>              if( <a class="var it2462" onMouseOver="hilite(2462)" onMouseOut="lolite()" onClick="logVariable('loop_dbchange')" href="../../../../_variables/loop_dbchange.html">$loop_dbchange</a>['type'] == 'dbfield' )
<a name="l424"><span class="linenum"> 424</span></a>              {    // Set to dbfield only:
<a name="l425"><span class="linenum"> 425</span></a>                  <a class="var it2460" onMouseOver="hilite(2460)" onMouseOut="lolite()" onClick="logVariable('sql_changes')" href="../../../../_variables/sql_changes.html">$sql_changes</a>[] = &quot;`<a class="var it2461" onMouseOver="hilite(2461)" onMouseOut="lolite()" onClick="logVariable('loop_dbfieldname')" href="../../../../_variables/loop_dbfieldname.html">$loop_dbfieldname</a>` = `&quot;.<a class="var it2462" onMouseOver="hilite(2462)" onMouseOut="lolite()" onClick="logVariable('loop_dbchange')" href="../../../../_variables/loop_dbchange.html">$loop_dbchange</a>['value'].'` ';
<a name="l426"><span class="linenum"> 426</span></a>                  continue;
<a name="l427"><span class="linenum"> 427</span></a>              }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">            // Get changed value (we use eval() to allow constructs like $loop_dbchange['value'] = 'Group-&gt;get(\'ID\')'):</span>
<a name="l430"><span class="linenum"> 430</span></a>              eval( '<a class="var it2463" onMouseOver="hilite(2463)" onMouseOut="lolite()" onClick="logVariable('loop_value')" href="../../../../_variables/loop_value.html">$loop_value</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;'.<a class="var it2462" onMouseOver="hilite(2462)" onMouseOut="lolite()" onClick="logVariable('loop_dbchange')" href="../../../../_variables/loop_dbchange.html">$loop_dbchange</a>['value'].';' );
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">            // Prepare matching statement:</span>
<a name="l432"><span class="linenum"> 432</span></a>              if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2463" onMouseOver="hilite(2463)" onMouseOut="lolite()" onClick="logVariable('loop_value')" href="../../../../_variables/loop_value.html">$loop_value</a>) )
<a name="l433"><span class="linenum"> 433</span></a>              {
<a name="l434"><span class="linenum"> 434</span></a>                  <a class="var it2460" onMouseOver="hilite(2460)" onMouseOut="lolite()" onClick="logVariable('sql_changes')" href="../../../../_variables/sql_changes.html">$sql_changes</a>[] = <a class="var it2461" onMouseOver="hilite(2461)" onMouseOut="lolite()" onClick="logVariable('loop_dbfieldname')" href="../../../../_variables/loop_dbfieldname.html">$loop_dbfieldname</a>.' = NULL ';
<a name="l435"><span class="linenum"> 435</span></a>              }
<a name="l436"><span class="linenum"> 436</span></a>              else
<a name="l437"><span class="linenum"> 437</span></a>              {
<a name="l438"><span class="linenum"> 438</span></a>                  switch( <a class="var it2462" onMouseOver="hilite(2462)" onMouseOut="lolite()" onClick="logVariable('loop_dbchange')" href="../../../../_variables/loop_dbchange.html">$loop_dbchange</a>['type'] )
<a name="l439"><span class="linenum"> 439</span></a>                  {
<a name="l440"><span class="linenum"> 440</span></a>                      case 'date':
<a name="l441"><span class="linenum"> 441</span></a>                      case 'string':
<a name="l442"><span class="linenum"> 442</span></a>                          <a class="var it2460" onMouseOver="hilite(2460)" onMouseOut="lolite()" onClick="logVariable('sql_changes')" href="../../../../_variables/sql_changes.html">$sql_changes</a>[] = <a class="var it2461" onMouseOver="hilite(2461)" onMouseOut="lolite()" onClick="logVariable('loop_dbfieldname')" href="../../../../_variables/loop_dbfieldname.html">$loop_dbfieldname</a>.&quot; = '&quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('escape')" href="../../../../_functions/escape.html" onMouseOver="funcPopup(event,'escape')">escape</a>( <a class="var it2463" onMouseOver="hilite(2463)" onMouseOut="lolite()" onClick="logVariable('loop_value')" href="../../../../_variables/loop_value.html">$loop_value</a> ).&quot;' &quot;;
<a name="l443"><span class="linenum"> 443</span></a>                          break;
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>                      default:
<a name="l446"><span class="linenum"> 446</span></a>                          <a class="var it2460" onMouseOver="hilite(2460)" onMouseOut="lolite()" onClick="logVariable('sql_changes')" href="../../../../_variables/sql_changes.html">$sql_changes</a>[] = <a class="var it2461" onMouseOver="hilite(2461)" onMouseOut="lolite()" onClick="logVariable('loop_dbfieldname')" href="../../../../_variables/loop_dbfieldname.html">$loop_dbfieldname</a>.&quot; = &quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('null')" href="../../../../_functions/null.html" onMouseOver="funcPopup(event,'null')">null</a>(<a class="var it2463" onMouseOver="hilite(2463)" onMouseOut="lolite()" onClick="logVariable('loop_value')" href="../../../../_variables/loop_value.html">$loop_value</a>).' ';
<a name="l447"><span class="linenum"> 447</span></a>                  }
<a name="l448"><span class="linenum"> 448</span></a>              }
<a name="l449"><span class="linenum"> 449</span></a>          }
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">        // Prepare full statement:</span>
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> = &quot;UPDATE <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbtablename.html">dbtablename</a> SET &quot;. <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it2460" onMouseOver="hilite(2460)" onMouseOut="lolite()" onClick="logVariable('sql_changes')" href="../../../../_variables/sql_changes.html">$sql_changes</a> ). &quot;
<a name="l453"><span class="linenum"> 453</span></a>                           WHERE <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbIDname.html">dbIDname</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>&quot;;
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">        //echo $sql;</span>
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>          if( ! <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a>, '<a class="class" onClick="logClass('DataObject')" href="../../../../_classes/dataobject.html" onMouseOver="classPopup(event,'dataobject')">DataObject</a>::<a class="function" onClick="logFunction('dbupdate')" href="../../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>()' ) )
<a name="l457"><span class="linenum"> 457</span></a>          {
<a name="l458"><span class="linenum"> 458</span></a>              return false;
<a name="l459"><span class="linenum"> 459</span></a>          }
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">        // Reset changes in object:</span>
<a name="l462"><span class="linenum"> 462</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbchanges.html">dbchanges</a> = array();
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>          <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterObjectUpdate', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array( 'Object' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>, 'type' =&gt; <a class="phpfunction" onClick="logFunction('get_class')" href="../../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>) ) );
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>          return true;
<a name="l467"><span class="linenum"> 467</span></a>      }
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>      <span class="comment">/**</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">     * Insert object into DB based on previously recorded changes.</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     *</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     * Note: DataObject does not require a matching *Cache object.</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     * Therefore it will not try to update the Cache.</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     * If something like that was needed, sth like *Cache-&gt;add() should be called.</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * ATTENTION: Any dbinsert should typically be followed by a 303 redirect. Updating the Cache before redirect is generally not needed.</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     *</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @return boolean true on success</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     */</span>
<a name="l480"><span class="linenum"> 480</span></a>  	function <a class="function" onClick="logFunction('dbinsert')" href="../../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>()
<a name="l481"><span class="linenum"> 481</span></a>      {
<a name="l482"><span class="linenum"> 482</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>;
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> != 0 &amp;&amp; !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allow_ID_insert')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/allow_ID_insert.html">allow_ID_insert</a> )
<a name="l485"><span class="linenum"> 485</span></a>          {
<a name="l486"><span class="linenum"> 486</span></a>              die( 'Existing object/object with an ID cannot be inserted!' );
<a name="l487"><span class="linenum"> 487</span></a>          }
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>          if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>) )
<a name="l490"><span class="linenum"> 490</span></a>          { // We want to track creation date:
<a name="l491"><span class="linenum"> 491</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>, 'date', <a class="phpfunction" onClick="logFunction('date')" href="../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d H:i:s',<a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a>) );
<a name="l492"><span class="linenum"> 492</span></a>          }
<a name="l493"><span class="linenum"> 493</span></a>          if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>) )
<a name="l494"><span class="linenum"> 494</span></a>          { // We want to track modification date:
<a name="l495"><span class="linenum"> 495</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>, 'date', <a class="phpfunction" onClick="logFunction('date')" href="../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d H:i:s',<a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../../_variables/localtimenow.html">$localtimenow</a>) );
<a name="l496"><span class="linenum"> 496</span></a>          }
<a name="l497"><span class="linenum"> 497</span></a>          if( <a class="function" onClick="logFunction('is_logged_in')" href="../../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l498"><span class="linenum"> 498</span></a>          { // Assign user's ID only when user is logged in
<a name="l499"><span class="linenum"> 499</span></a>              if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/creator_field.html">creator_field</a>) )
<a name="l500"><span class="linenum"> 500</span></a>              { // We want to track creator:
<a name="l501"><span class="linenum"> 501</span></a>                  if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/creator_user_ID.html">creator_user_ID</a>) )
<a name="l502"><span class="linenum"> 502</span></a>                  { // No creator assigned yet, use current user:
<a name="l503"><span class="linenum"> 503</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/creator_field.html">creator_field</a>, 'number', <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l504"><span class="linenum"> 504</span></a>                  }
<a name="l505"><span class="linenum"> 505</span></a>              }
<a name="l506"><span class="linenum"> 506</span></a>              if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lasteditor_field.html">lasteditor_field</a>) )
<a name="l507"><span class="linenum"> 507</span></a>              { // We want to track last editor:
<a name="l508"><span class="linenum"> 508</span></a>                  if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastedit_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lastedit_user_ID.html">lastedit_user_ID</a>) )
<a name="l509"><span class="linenum"> 509</span></a>                  { // No editor assigned yet, use current user:
<a name="l510"><span class="linenum"> 510</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lasteditor_field.html">lasteditor_field</a>, 'number', <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> );
<a name="l511"><span class="linenum"> 511</span></a>                  }
<a name="l512"><span class="linenum"> 512</span></a>              }
<a name="l513"><span class="linenum"> 513</span></a>          }
<a name="l514"><span class="linenum"> 514</span></a>  
<a name="l515"><span class="linenum"> 515</span></a>          <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('sql_fields')" href="../../../../_variables/sql_fields.html">$sql_fields</a> = array();
<a name="l516"><span class="linenum"> 516</span></a>          <a class="var it2465" onMouseOver="hilite(2465)" onMouseOut="lolite()" onClick="logVariable('sql_values')" href="../../../../_variables/sql_values.html">$sql_values</a> = array();
<a name="l517"><span class="linenum"> 517</span></a>          foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbchanges.html">dbchanges</a> as <a class="var it2461" onMouseOver="hilite(2461)" onMouseOut="lolite()" onClick="logVariable('loop_dbfieldname')" href="../../../../_variables/loop_dbfieldname.html">$loop_dbfieldname</a> =&gt; <a class="var it2462" onMouseOver="hilite(2462)" onMouseOut="lolite()" onClick="logVariable('loop_dbchange')" href="../../../../_variables/loop_dbchange.html">$loop_dbchange</a> )
<a name="l518"><span class="linenum"> 518</span></a>          {
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">            // Get changed value (we use eval() to allow constructs like $loop_dbchange['value'] = 'Group-&gt;get(\'ID\')'):</span>
<a name="l520"><span class="linenum"> 520</span></a>              eval( '<a class="var it2463" onMouseOver="hilite(2463)" onMouseOut="lolite()" onClick="logVariable('loop_value')" href="../../../../_variables/loop_value.html">$loop_value</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;'. <a class="var it2462" onMouseOver="hilite(2462)" onMouseOut="lolite()" onClick="logVariable('loop_dbchange')" href="../../../../_variables/loop_dbchange.html">$loop_dbchange</a>['value'].';' );
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">            // Prepare matching statement:</span>
<a name="l522"><span class="linenum"> 522</span></a>              <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('sql_fields')" href="../../../../_variables/sql_fields.html">$sql_fields</a>[] = <a class="var it2461" onMouseOver="hilite(2461)" onMouseOut="lolite()" onClick="logVariable('loop_dbfieldname')" href="../../../../_variables/loop_dbfieldname.html">$loop_dbfieldname</a>;
<a name="l523"><span class="linenum"> 523</span></a>              if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2463" onMouseOver="hilite(2463)" onMouseOut="lolite()" onClick="logVariable('loop_value')" href="../../../../_variables/loop_value.html">$loop_value</a>) )
<a name="l524"><span class="linenum"> 524</span></a>              {
<a name="l525"><span class="linenum"> 525</span></a>                  <a class="var it2465" onMouseOver="hilite(2465)" onMouseOut="lolite()" onClick="logVariable('sql_values')" href="../../../../_variables/sql_values.html">$sql_values</a>[] = 'NULL';
<a name="l526"><span class="linenum"> 526</span></a>              }
<a name="l527"><span class="linenum"> 527</span></a>              else
<a name="l528"><span class="linenum"> 528</span></a>              {
<a name="l529"><span class="linenum"> 529</span></a>                  switch( <a class="var it2462" onMouseOver="hilite(2462)" onMouseOut="lolite()" onClick="logVariable('loop_dbchange')" href="../../../../_variables/loop_dbchange.html">$loop_dbchange</a>['type'] )
<a name="l530"><span class="linenum"> 530</span></a>                  {
<a name="l531"><span class="linenum"> 531</span></a>                      case 'date':
<a name="l532"><span class="linenum"> 532</span></a>                      case 'string':
<a name="l533"><span class="linenum"> 533</span></a>                          <a class="var it2465" onMouseOver="hilite(2465)" onMouseOut="lolite()" onClick="logVariable('sql_values')" href="../../../../_variables/sql_values.html">$sql_values</a>[] = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it2463" onMouseOver="hilite(2463)" onMouseOut="lolite()" onClick="logVariable('loop_value')" href="../../../../_variables/loop_value.html">$loop_value</a> );
<a name="l534"><span class="linenum"> 534</span></a>                          break;
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>                      default:
<a name="l537"><span class="linenum"> 537</span></a>                          <a class="var it2465" onMouseOver="hilite(2465)" onMouseOut="lolite()" onClick="logVariable('sql_values')" href="../../../../_variables/sql_values.html">$sql_values</a>[] = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('null')" href="../../../../_functions/null.html" onMouseOver="funcPopup(event,'null')">null</a>( <a class="var it2463" onMouseOver="hilite(2463)" onMouseOut="lolite()" onClick="logVariable('loop_value')" href="../../../../_variables/loop_value.html">$loop_value</a> );
<a name="l538"><span class="linenum"> 538</span></a>                  }
<a name="l539"><span class="linenum"> 539</span></a>              }
<a name="l540"><span class="linenum"> 540</span></a>          }
<a name="l541"><span class="linenum"> 541</span></a>  
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment">        // Prepare full statement:</span>
<a name="l543"><span class="linenum"> 543</span></a>          <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> = &quot;INSERT INTO {<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbtablename.html">dbtablename</a>} (&quot;. <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it2464" onMouseOver="hilite(2464)" onMouseOut="lolite()" onClick="logVariable('sql_fields')" href="../../../../_variables/sql_fields.html">$sql_fields</a> ). &quot;) VALUES (&quot;. <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it2465" onMouseOver="hilite(2465)" onMouseOut="lolite()" onClick="logVariable('sql_values')" href="../../../../_variables/sql_values.html">$sql_values</a> ). &quot;)&quot;;
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">        // echo $sql;</span>
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>          if( ! <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a>, '<a class="class" onClick="logClass('DataObject')" href="../../../../_classes/dataobject.html" onMouseOver="classPopup(event,'dataobject')">DataObject</a>::<a class="function" onClick="logFunction('dbinsert')" href="../../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>()' ) )
<a name="l547"><span class="linenum"> 547</span></a>          {
<a name="l548"><span class="linenum"> 548</span></a>              return false;
<a name="l549"><span class="linenum"> 549</span></a>          }
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>          if( !( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allow_ID_insert')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/allow_ID_insert.html">allow_ID_insert</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ) )
<a name="l553"><span class="linenum"> 553</span></a>          {// store ID for newly created db record. Do not if allow_ID_insert is true and <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> is not 0
<a name="l554"><span class="linenum"> 554</span></a>  
<a name="l555"><span class="linenum"> 555</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('insert_id')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../../../../_variables/insert_id.html">insert_id</a>;
<a name="l556"><span class="linenum"> 556</span></a>          }
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">        // Reset changes in object:</span>
<a name="l558"><span class="linenum"> 558</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbchanges.html">dbchanges</a> = array();
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>          if( !empty( <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a> ) )
<a name="l561"><span class="linenum"> 561</span></a>          {
<a name="l562"><span class="linenum"> 562</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterObjectInsert', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array( 'Object' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>, 'type' =&gt; <a class="phpfunction" onClick="logFunction('get_class')" href="../../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>) ) );
<a name="l563"><span class="linenum"> 563</span></a>          }
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>          return true;
<a name="l566"><span class="linenum"> 566</span></a>      }
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>      <span class="comment">/**</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">     * Inserts or Updates depending on object state.</span>
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">     *</span>
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">     * @uses dbinsert()</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">     * @uses dbupdate()</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     * @return boolean true on success, false on failure</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     */</span>
<a name="l576"><span class="linenum"> 576</span></a>  	function <a class="function" onClick="logFunction('dbsave')" href="../../../../_functions/dbsave.html" onMouseOver="funcPopup(event,'dbsave')">dbsave</a>()
<a name="l577"><span class="linenum"> 577</span></a>      {
<a name="l578"><span class="linenum"> 578</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> == 0 )
<a name="l579"><span class="linenum"> 579</span></a>          {    // Object not serialized yet, let's insert!
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">            // echo 'INSERT';</span>
<a name="l581"><span class="linenum"> 581</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>();
<a name="l582"><span class="linenum"> 582</span></a>          }
<a name="l583"><span class="linenum"> 583</span></a>          else
<a name="l584"><span class="linenum"> 584</span></a>          {    // Object already serialized, let's update!
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">            // echo 'UPDATE';</span>
<a name="l586"><span class="linenum"> 586</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l587"><span class="linenum"> 587</span></a>          }
<a name="l588"><span class="linenum"> 588</span></a>      }
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>      <span class="comment">/**</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">     * Delete object from DB.</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">     *</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">     * @return boolean true on success</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">     */</span>
<a name="l596"><span class="linenum"> 596</span></a>  	function <a class="function" onClick="logFunction('dbdelete')" href="../../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>( <a class="var it2466" onMouseOver="hilite(2466)" onMouseOut="lolite()" onClick="logVariable('ignore_restrictions')" href="../../../../_variables/ignore_restrictions.html">$ignore_restrictions</a> = array() )
<a name="l597"><span class="linenum"> 597</span></a>      {
<a name="l598"><span class="linenum"> 598</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a>, <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('db_config')" href="../../../../_variables/db_config.html">$db_config</a>;
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> == 0 ) { <a class="function" onClick="logFunction('debug_die')" href="../../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Non persistant object cannot be deleted!' ); }
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('init_relations')" href="../../../../_functions/init_relations.html" onMouseOver="funcPopup(event,'init_relations')">init_relations</a>();
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">        // Make sure to handle in transaction if the are cascading deletes to be performed</span>
<a name="l605"><span class="linenum"> 605</span></a>          <a class="var it2467" onMouseOver="hilite(2467)" onMouseOut="lolite()" onClick="logVariable('need_transaction')" href="../../../../_variables/need_transaction.html">$need_transaction</a> = ( ! empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a> ) );
<a name="l606"><span class="linenum"> 606</span></a>          if( <a class="var it2467" onMouseOver="hilite(2467)" onMouseOut="lolite()" onClick="logVariable('need_transaction')" href="../../../../_variables/need_transaction.html">$need_transaction</a> )
<a name="l607"><span class="linenum"> 607</span></a>          {
<a name="l608"><span class="linenum"> 608</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l609"><span class="linenum"> 609</span></a>          }
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_delete')" href="../../../../_functions/check_delete.html" onMouseOver="funcPopup(event,'check_delete')">check_delete</a>( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Some restrictions prevent deletion:'), <a class="var it2466" onMouseOver="hilite(2466)" onMouseOut="lolite()" onClick="logVariable('ignore_restrictions')" href="../../../../_variables/ignore_restrictions.html">$ignore_restrictions</a> ) )
<a name="l612"><span class="linenum"> 612</span></a>          { // Some restrictions still prevent deletion
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">            // Note: This restrictions must be handled previously before dbdelete is called.</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">            // If this code is executed it means there is an implementation issue and restricitons must be check there.</span>
<a name="l615"><span class="linenum"> 615</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l616"><span class="linenum"> 616</span></a>              return false;
<a name="l617"><span class="linenum"> 617</span></a>          }
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment">        // Set params for this object</span>
<a name="l620"><span class="linenum"> 620</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array(
<a name="l621"><span class="linenum"> 621</span></a>              'delete_cascades' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('delete_cascades')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/delete_cascades.html">delete_cascades</a>,
<a name="l622"><span class="linenum"> 622</span></a>              'class_db_config' =&gt; array(
<a name="l623"><span class="linenum"> 623</span></a>                  'dbtablename'     =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbtablename.html">dbtablename</a>,
<a name="l624"><span class="linenum"> 624</span></a>                  'dbprefix'        =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbprefix.html">dbprefix</a>,
<a name="l625"><span class="linenum"> 625</span></a>                  'dbIDname'        =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbIDname.html">dbIDname</a>,
<a name="l626"><span class="linenum"> 626</span></a>              )
<a name="l627"><span class="linenum"> 627</span></a>          );
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">        // Delete this object with all of its cascade and execute all required updates if there are any</span>
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('db_delete_where')" href="../../../../_functions/db_delete_where.html" onMouseOver="funcPopup(event,'db_delete_where')">db_delete_where</a>( <a class="phpfunction" onClick="logFunction('get_class')" href="../../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>), NULL, array( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterObjectDelete', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array( 'Object' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>, 'type' =&gt; <a class="phpfunction" onClick="logFunction('get_class')" href="../../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>) ) );
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>          if( <a class="var it2467" onMouseOver="hilite(2467)" onMouseOut="lolite()" onClick="logVariable('need_transaction')" href="../../../../_variables/need_transaction.html">$need_transaction</a> )
<a name="l635"><span class="linenum"> 635</span></a>          { // Transaction was started, call commit or rollback
<a name="l636"><span class="linenum"> 636</span></a>              ( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> !== false ) ? <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>() : <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l637"><span class="linenum"> 637</span></a>          }
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment">        // Just in case... remember this object has been deleted from DB!</span>
<a name="l640"><span class="linenum"> 640</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a> = 0;
<a name="l641"><span class="linenum"> 641</span></a>  
<a name="l642"><span class="linenum"> 642</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>;
<a name="l643"><span class="linenum"> 643</span></a>      }
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>      <span class="comment">/**</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">     * Check existence of specified value in unique field.</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     *</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     * @param string Name of unique field  OR array of Names (for UNIQUE index with MULTIPLE fields)</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     * @param mixed specified value        OR array of Values (for UNIQUE index with MULTIPLE fields)</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     * @return int ID if value exists otherwise NULL/false</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     */</span>
<a name="l653"><span class="linenum"> 653</span></a>  	function <a class="function" onClick="logFunction('dbexists')" href="../../../../_functions/dbexists.html" onMouseOver="funcPopup(event,'dbexists')">dbexists</a>( <a class="var it2468" onMouseOver="hilite(2468)" onMouseOut="lolite()" onClick="logVariable('unique_fields')" href="../../../../_variables/unique_fields.html">$unique_fields</a>, <a class="var it850" onMouseOver="hilite(850)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../../_variables/values.html">$values</a> )
<a name="l654"><span class="linenum"> 654</span></a>      {
<a name="l655"><span class="linenum"> 655</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>          if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it2468" onMouseOver="hilite(2468)" onMouseOut="lolite()" onClick="logVariable('unique_fields')" href="../../../../_variables/unique_fields.html">$unique_fields</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it850" onMouseOver="hilite(850)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../../_variables/values.html">$values</a> ) )
<a name="l658"><span class="linenum"> 658</span></a>          {    // UNIQUE index consists of MULTIPLE fields
<a name="l659"><span class="linenum"> 659</span></a>              <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a> = array();
<a name="l660"><span class="linenum"> 660</span></a>              foreach( <a class="var it2468" onMouseOver="hilite(2468)" onMouseOut="lolite()" onClick="logVariable('unique_fields')" href="../../../../_variables/unique_fields.html">$unique_fields</a> as <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> =&gt; <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('unique_field')" href="../../../../_variables/unique_field.html">$unique_field</a> )
<a name="l661"><span class="linenum"> 661</span></a>              {
<a name="l662"><span class="linenum"> 662</span></a>                  <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a>[] = <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('unique_field')" href="../../../../_variables/unique_field.html">$unique_field</a>.&quot; = &quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it850" onMouseOver="hilite(850)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../../_variables/values.html">$values</a>[<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>] );
<a name="l663"><span class="linenum"> 663</span></a>              }
<a name="l664"><span class="linenum"> 664</span></a>              <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' AND ', <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a> );
<a name="l665"><span class="linenum"> 665</span></a>          }
<a name="l666"><span class="linenum"> 666</span></a>          else
<a name="l667"><span class="linenum"> 667</span></a>          {    // UNIQUE index consists of ONE field
<a name="l668"><span class="linenum"> 668</span></a>              <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a> = <a class="var it2468" onMouseOver="hilite(2468)" onMouseOut="lolite()" onClick="logVariable('unique_fields')" href="../../../../_variables/unique_fields.html">$unique_fields</a>.&quot; = &quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it850" onMouseOver="hilite(850)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../../../_variables/values.html">$values</a> );
<a name="l669"><span class="linenum"> 669</span></a>          }
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>          <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;dbIDname
<a name="l672"><span class="linenum"> 672</span></a>                            FROM <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;dbtablename
<a name="l673"><span class="linenum"> 673</span></a>                         WHERE <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../../_variables/sql_where.html">$sql_where</a>
<a name="l674"><span class="linenum"> 674</span></a>                             AND <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbIDname.html">dbIDname</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>&quot;;
<a name="l675"><span class="linenum"> 675</span></a>  
<a name="l676"><span class="linenum"> 676</span></a>          return <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> );
<a name="l677"><span class="linenum"> 677</span></a>      }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>  
<a name="l680"><span class="linenum"> 680</span></a>      <span class="comment">/**</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">     * Check relations for restrictions or cascades.</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment">     * @todo dh&gt; Add link to affected items, e.g. items when trying to delete an attachment, where it gets used.</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">     *</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment">     * @return Messages object with the restriction messages</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">     */</span>
<a name="l686"><span class="linenum"> 686</span></a>  	function <a class="function" onClick="logFunction('check_relations')" href="../../../../_functions/check_relations.html" onMouseOver="funcPopup(event,'check_relations')">check_relations</a>( <a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('what')" href="../../../../_variables/what.html">$what</a>, <a class="var it1007" onMouseOver="hilite(1007)" onMouseOut="lolite()" onClick="logVariable('ignore')" href="../../../../_variables/ignore.html">$ignore</a> = array(), <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('addlink')" href="../../../../_variables/addlink.html">$addlink</a> = false )
<a name="l687"><span class="linenum"> 687</span></a>      {
<a name="l688"><span class="linenum"> 688</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l689"><span class="linenum"> 689</span></a>  
<a name="l690"><span class="linenum"> 690</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('init_relations')" href="../../../../_functions/init_relations.html" onMouseOver="funcPopup(event,'init_relations')">init_relations</a>();
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>          <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Messages')" href="../../../../_classes/messages.html" onMouseOver="classPopup(event,'messages')">Messages</a>();
<a name="l693"><span class="linenum"> 693</span></a>  
<a name="l694"><span class="linenum"> 694</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('what')" href="../../../../_variables/what.html">$what</a> ) )
<a name="l695"><span class="linenum"> 695</span></a>          { // The relations are not defined
<a name="l696"><span class="linenum"> 696</span></a>              return <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>;
<a name="l697"><span class="linenum"> 697</span></a>          }
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>          foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1325" onMouseOver="hilite(1325)" onMouseOut="lolite()" onClick="logVariable('what')" href="../../../../_variables/what.html">$what</a> as <a class="var it2472" onMouseOver="hilite(2472)" onMouseOut="lolite()" onClick="logVariable('restriction')" href="../../../../_variables/restriction.html">$restriction</a> )
<a name="l700"><span class="linenum"> 700</span></a>          {
<a name="l701"><span class="linenum"> 701</span></a>              if( !<a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it2472" onMouseOver="hilite(2472)" onMouseOut="lolite()" onClick="logVariable('restriction')" href="../../../../_variables/restriction.html">$restriction</a>['fk'], <a class="var it1007" onMouseOver="hilite(1007)" onMouseOut="lolite()" onClick="logVariable('ignore')" href="../../../../_variables/ignore.html">$ignore</a> ) )
<a name="l702"><span class="linenum"> 702</span></a>              {
<a name="l703"><span class="linenum"> 703</span></a>                  if( <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('addlink')" href="../../../../_variables/addlink.html">$addlink</a> )
<a name="l704"><span class="linenum"> 704</span></a>                  { // get linked objects and add a link
<a name="l705"><span class="linenum"> 705</span></a>                      <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../../_variables/link.html">$link</a> = '';
<a name="l706"><span class="linenum"> 706</span></a>                      if( <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('addlink')" href="../../../../_variables/addlink.html">$addlink</a> )
<a name="l707"><span class="linenum"> 707</span></a>                      { // get link from derived class
<a name="l708"><span class="linenum"> 708</span></a>                          <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../../_variables/link.html">$link</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_restriction_link')" href="../../../../_functions/get_restriction_link.html" onMouseOver="funcPopup(event,'get_restriction_link')">get_restriction_link</a>( <a class="var it2472" onMouseOver="hilite(2472)" onMouseOut="lolite()" onClick="logVariable('restriction')" href="../../../../_variables/restriction.html">$restriction</a> );
<a name="l709"><span class="linenum"> 709</span></a>                      }
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">                    // without restriction =&gt; don't display the message</span>
<a name="l711"><span class="linenum"> 711</span></a>                      if( <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../../_variables/link.html">$link</a> != '' )
<a name="l712"><span class="linenum"> 712</span></a>                      {
<a name="l713"><span class="linenum"> 713</span></a>                          <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../../_variables/link.html">$link</a> );
<a name="l714"><span class="linenum"> 714</span></a>                      }
<a name="l715"><span class="linenum"> 715</span></a>                  }
<a name="l716"><span class="linenum"> 716</span></a>                  else
<a name="l717"><span class="linenum"> 717</span></a>                  { // count and show how many object is connected
<a name="l718"><span class="linenum"> 718</span></a>                      <a class="var it2473" onMouseOver="hilite(2473)" onMouseOut="lolite()" onClick="logVariable('extra_condition')" href="../../../../_variables/extra_condition.html">$extra_condition</a> = ( isset( <a class="var it2472" onMouseOver="hilite(2472)" onMouseOut="lolite()" onClick="logVariable('restriction')" href="../../../../_variables/restriction.html">$restriction</a>['and_condition'] ) ) ? ' AND '.<a class="var it2472" onMouseOver="hilite(2472)" onMouseOut="lolite()" onClick="logVariable('restriction')" href="../../../../_variables/restriction.html">$restriction</a>['and_condition'] : '';
<a name="l719"><span class="linenum"> 719</span></a>                      <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>(
<a name="l720"><span class="linenum"> 720</span></a>                      'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*)
<a name="l721"><span class="linenum"> 721</span></a>                         FROM '.<a class="var it2472" onMouseOver="hilite(2472)" onMouseOut="lolite()" onClick="logVariable('restriction')" href="../../../../_variables/restriction.html">$restriction</a>['table'].'
<a name="l722"><span class="linenum"> 722</span></a>                        WHERE '.<a class="var it2472" onMouseOver="hilite(2472)" onMouseOut="lolite()" onClick="logVariable('restriction')" href="../../../../_variables/restriction.html">$restriction</a>['fk'].' = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.<a class="var it2473" onMouseOver="hilite(2473)" onMouseOut="lolite()" onClick="logVariable('extra_condition')" href="../../../../_variables/extra_condition.html">$extra_condition</a>,
<a name="l723"><span class="linenum"> 723</span></a>                      0, 0, 'restriction/cascade check' );
<a name="l724"><span class="linenum"> 724</span></a>                      if( <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a> )
<a name="l725"><span class="linenum"> 725</span></a>                      {
<a name="l726"><span class="linenum"> 726</span></a>                          <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="var it2472" onMouseOver="hilite(2472)" onMouseOut="lolite()" onClick="logVariable('restriction')" href="../../../../_variables/restriction.html">$restriction</a>['msg'], <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a> ), 'error' );
<a name="l727"><span class="linenum"> 727</span></a>                      }
<a name="l728"><span class="linenum"> 728</span></a>                  }
<a name="l729"><span class="linenum"> 729</span></a>              }
<a name="l730"><span class="linenum"> 730</span></a>          }
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>          return <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>;
<a name="l733"><span class="linenum"> 733</span></a>      }
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>  
<a name="l736"><span class="linenum"> 736</span></a>      <span class="comment">/**</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">     * Check relations for restrictions before deleting</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">     *</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">     * @param string</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">     * @param array list of foreign keys to ignore</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     * @return boolean true if no restriction prevents deletion</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     */</span>
<a name="l743"><span class="linenum"> 743</span></a>  	function <a class="function" onClick="logFunction('check_delete')" href="../../../../_functions/check_delete.html" onMouseOver="funcPopup(event,'check_delete')">check_delete</a>( <a class="var it2474" onMouseOver="hilite(2474)" onMouseOut="lolite()" onClick="logVariable('restrict_title')" href="../../../../_variables/restrict_title.html">$restrict_title</a>, <a class="var it1007" onMouseOver="hilite(1007)" onMouseOut="lolite()" onClick="logVariable('ignore')" href="../../../../_variables/ignore.html">$ignore</a> = array(), <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('addlink')" href="../../../../_variables/addlink.html">$addlink</a> = false )
<a name="l744"><span class="linenum"> 744</span></a>      {
<a name="l745"><span class="linenum"> 745</span></a>          global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>;
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">        // Check restrictions:</span>
<a name="l748"><span class="linenum"> 748</span></a>          <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_relations')" href="../../../../_functions/check_relations.html" onMouseOver="funcPopup(event,'check_relations')">check_relations</a>( 'delete_restrictions', <a class="var it1007" onMouseOver="hilite(1007)" onMouseOut="lolite()" onClick="logVariable('ignore')" href="../../../../_variables/ignore.html">$ignore</a>, <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('addlink')" href="../../../../_variables/addlink.html">$addlink</a> );
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>          if( <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() )
<a name="l751"><span class="linenum"> 751</span></a>          {    // There are restrictions:
<a name="l752"><span class="linenum"> 752</span></a>              <a class="var it2475" onMouseOver="hilite(2475)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../../_variables/head.html">$head</a> = <a class="var it2474" onMouseOver="hilite(2474)" onMouseOut="lolite()" onClick="logVariable('restrict_title')" href="../../../../_variables/restrict_title.html">$restrict_title</a>.' '.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The following relations prevent deletion:');
<a name="l753"><span class="linenum"> 753</span></a>              <a class="var it2476" onMouseOver="hilite(2476)" onMouseOut="lolite()" onClick="logVariable('foot')" href="../../../../_variables/foot.html">$foot</a> = <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please delete related objects before you proceed.');
<a name="l754"><span class="linenum"> 754</span></a>              <a class="var it2477" onMouseOver="hilite(2477)" onMouseOut="lolite()" onClick="logVariable('final_message')" href="../../../../_variables/final_message.html">$final_message</a> = <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( <a class="var it2475" onMouseOver="hilite(2475)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../../_variables/head.html">$head</a>, <a class="var it2476" onMouseOver="hilite(2476)" onMouseOut="lolite()" onClick="logVariable('foot')" href="../../../../_variables/foot.html">$foot</a>, false, false );
<a name="l755"><span class="linenum"> 755</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it2477" onMouseOver="hilite(2477)" onMouseOut="lolite()" onClick="logVariable('final_message')" href="../../../../_variables/final_message.html">$final_message</a>, 'error' );
<a name="l756"><span class="linenum"> 756</span></a>              return false;    <span class="comment">// Can't delete</span>
<a name="l757"><span class="linenum"> 757</span></a>          }
<a name="l758"><span class="linenum"> 758</span></a>  
<a name="l759"><span class="linenum"> 759</span></a>          return true;    <span class="comment">// can delete</span>
<a name="l760"><span class="linenum"> 760</span></a>      }
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>      <span class="comment">/**</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">     * Displays form to confirm deletion of this object</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">     *</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">     * @param string Title for confirmation</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">     * @param string crumb name</span>
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">     * @param string &quot;action&quot; param value to use (hidden field)</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">     * @param array Hidden keys (apart from &quot;action&quot;)</span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment">     * @param array Additional messages for restriction messages, array( '0' - message text, '1' - message type )</span>
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment">     * @param array Params</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">     */</span>
<a name="l773"><span class="linenum"> 773</span></a>  	function <a class="function" onClick="logFunction('confirm_delete')" href="../../../../_functions/confirm_delete.html" onMouseOver="funcPopup(event,'confirm_delete')">confirm_delete</a>( <a class="var it2478" onMouseOver="hilite(2478)" onMouseOut="lolite()" onClick="logVariable('confirm_title')" href="../../../../_variables/confirm_title.html">$confirm_title</a>, <a class="var it2479" onMouseOver="hilite(2479)" onMouseOut="lolite()" onClick="logVariable('crumb_name')" href="../../../../_variables/crumb_name.html">$crumb_name</a>, <a class="var it2480" onMouseOver="hilite(2480)" onMouseOut="lolite()" onClick="logVariable('delete_action')" href="../../../../_variables/delete_action.html">$delete_action</a>, <a class="var it2481" onMouseOver="hilite(2481)" onMouseOut="lolite()" onClick="logVariable('hiddens')" href="../../../../_variables/hiddens.html">$hiddens</a>, <a class="var it2482" onMouseOver="hilite(2482)" onMouseOut="lolite()" onClick="logVariable('additional_messages')" href="../../../../_variables/additional_messages.html">$additional_messages</a> = array(), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array() )
<a name="l774"><span class="linenum"> 774</span></a>      {
<a name="l775"><span class="linenum"> 775</span></a>          global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../../_variables/Messages.html">$Messages</a>;
<a name="l776"><span class="linenum"> 776</span></a>  
<a name="l777"><span class="linenum"> 777</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l778"><span class="linenum"> 778</span></a>                  'before_submit_button' =&gt; '', // Additional text before button to submit a form
<a name="l779"><span class="linenum"> 779</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> );
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>          <a class="var it2483" onMouseOver="hilite(2483)" onMouseOut="lolite()" onClick="logVariable('block_item_Widget')" href="../../../../_variables/block_item_Widget.html">$block_item_Widget</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Widget')" href="../../../../_classes/widget.html" onMouseOver="classPopup(event,'widget')">Widget</a>( 'block_item' );
<a name="l782"><span class="linenum"> 782</span></a>  
<a name="l783"><span class="linenum"> 783</span></a>          <a class="var it2483" onMouseOver="hilite(2483)" onMouseOut="lolite()" onClick="logVariable('block_item_Widget')" href="../../../../_variables/block_item_Widget.html">$block_item_Widget</a>-&gt;<a onClick="logVariable('title')" class="var it10785" onMouseOver="hilite(10785)" onMouseOut="lolite()" href="../../../../_variables/title.html">title</a> = <a class="var it2478" onMouseOver="hilite(2478)" onMouseOut="lolite()" onClick="logVariable('confirm_title')" href="../../../../_variables/confirm_title.html">$confirm_title</a>;
<a name="l784"><span class="linenum"> 784</span></a>          echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( 'panel-default', 'panel-danger', <a class="var it2483" onMouseOver="hilite(2483)" onMouseOut="lolite()" onClick="logVariable('block_item_Widget')" href="../../../../_variables/block_item_Widget.html">$block_item_Widget</a>-&gt;<a class="function" onClick="logFunction('replace_vars')" href="../../../../_functions/replace_vars.html" onMouseOver="funcPopup(event,'replace_vars')">replace_vars</a>( <a class="var it2483" onMouseOver="hilite(2483)" onMouseOut="lolite()" onClick="logVariable('block_item_Widget')" href="../../../../_variables/block_item_Widget.html">$block_item_Widget</a>-&gt;<a onClick="logVariable('params')" class="var it10785" onMouseOver="hilite(10785)" onMouseOut="lolite()" href="../../../../_variables/params.html">params</a>[ 'block_start' ] ) );
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>          <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_relations')" href="../../../../_functions/check_relations.html" onMouseOver="funcPopup(event,'check_relations')">check_relations</a>( 'delete_cascades' );
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>          if( !empty( <a class="var it2482" onMouseOver="hilite(2482)" onMouseOut="lolite()" onClick="logVariable('additional_messages')" href="../../../../_variables/additional_messages.html">$additional_messages</a> ) )
<a name="l789"><span class="linenum"> 789</span></a>          { // Initialaize additional messages
<a name="l790"><span class="linenum"> 790</span></a>              foreach( <a class="var it2482" onMouseOver="hilite(2482)" onMouseOut="lolite()" onClick="logVariable('additional_messages')" href="../../../../_variables/additional_messages.html">$additional_messages</a> as <a class="var it2484" onMouseOver="hilite(2484)" onMouseOut="lolite()" onClick="logVariable('additional_message')" href="../../../../_variables/additional_message.html">$additional_message</a> )
<a name="l791"><span class="linenum"> 791</span></a>              {
<a name="l792"><span class="linenum"> 792</span></a>                  <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it2484" onMouseOver="hilite(2484)" onMouseOut="lolite()" onClick="logVariable('additional_message')" href="../../../../_variables/additional_message.html">$additional_message</a>[0], <a class="var it2484" onMouseOver="hilite(2484)" onMouseOut="lolite()" onClick="logVariable('additional_message')" href="../../../../_variables/additional_message.html">$additional_message</a>[1] );
<a name="l793"><span class="linenum"> 793</span></a>              }
<a name="l794"><span class="linenum"> 794</span></a>          }
<a name="l795"><span class="linenum"> 795</span></a>  
<a name="l796"><span class="linenum"> 796</span></a>          if( <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() )
<a name="l797"><span class="linenum"> 797</span></a>          {    // The will be cascading deletes, issue WARNING:
<a name="l798"><span class="linenum"> 798</span></a>              echo '&lt;h3 class=&quot;evo_confirm_delete__title&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('WARNING: Deleting this object will also delete:').'&lt;/h3&gt;';
<a name="l799"><span class="linenum"> 799</span></a>              <a class="var it2471" onMouseOver="hilite(2471)" onMouseOut="lolite()" onClick="logVariable('restriction_Messages')" href="../../../../_variables/restriction_Messages.html">$restriction_Messages</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( '', '', true, 'log_container delete_messages' );
<a name="l800"><span class="linenum"> 800</span></a>          }
<a name="l801"><span class="linenum"> 801</span></a>  
<a name="l802"><span class="linenum"> 802</span></a>          echo '&lt;p class=&quot;warning text-danger&quot;&gt;'.<a class="var it2478" onMouseOver="hilite(2478)" onMouseOut="lolite()" onClick="logVariable('confirm_title')" href="../../../../_variables/confirm_title.html">$confirm_title</a>.'&lt;/p&gt;';
<a name="l803"><span class="linenum"> 803</span></a>          echo '&lt;p class=&quot;warning text-danger&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('THIS CANNOT BE UNDONE!').'&lt;/p&gt;';
<a name="l804"><span class="linenum"> 804</span></a>  
<a name="l805"><span class="linenum"> 805</span></a>          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', '' );
<a name="l806"><span class="linenum"> 806</span></a>  
<a name="l807"><span class="linenum"> 807</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>( '', 'form_confirm', 'get', '' );
<a name="l808"><span class="linenum"> 808</span></a>  
<a name="l809"><span class="linenum"> 809</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_form')" href="../../../../_functions/begin_form.html" onMouseOver="funcPopup(event,'begin_form')">begin_form</a>( 'inline' );
<a name="l810"><span class="linenum"> 810</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('add_crumb')" href="../../../../_functions/add_crumb.html" onMouseOver="funcPopup(event,'add_crumb')">add_crumb</a>( <a class="var it2479" onMouseOver="hilite(2479)" onMouseOut="lolite()" onClick="logVariable('crumb_name')" href="../../../../_variables/crumb_name.html">$crumb_name</a> );
<a name="l811"><span class="linenum"> 811</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hiddens_by_key')" href="../../../../_functions/hiddens_by_key.html" onMouseOver="funcPopup(event,'hiddens_by_key')">hiddens_by_key</a>( <a class="var it2481" onMouseOver="hilite(2481)" onMouseOut="lolite()" onClick="logVariable('hiddens')" href="../../../../_variables/hiddens.html">$hiddens</a> );
<a name="l812"><span class="linenum"> 812</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'action', <a class="var it2480" onMouseOver="hilite(2480)" onMouseOut="lolite()" onClick="logVariable('delete_action')" href="../../../../_variables/delete_action.html">$delete_action</a> );
<a name="l813"><span class="linenum"> 813</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'confirm', 1 );
<a name="l814"><span class="linenum"> 814</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hidden')" href="../../../../_functions/hidden.html" onMouseOver="funcPopup(event,'hidden')">hidden</a>( 'redirect_to', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l815"><span class="linenum"> 815</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['before_submit_button'];
<a name="l816"><span class="linenum"> 816</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('button')" href="../../../../_functions/button.html" onMouseOver="funcPopup(event,'button')">button</a>( array( 'submit', '', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('I am sure!'), 'DeleteButton btn-danger' ) );
<a name="l817"><span class="linenum"> 817</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_form')" href="../../../../_functions/end_form.html" onMouseOver="funcPopup(event,'end_form')">end_form</a>();
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Form')" href="../../../../_classes/form.html" onMouseOver="classPopup(event,'form')">Form</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a>, 'form_cancel', 'get', '' );
<a name="l820"><span class="linenum"> 820</span></a>  
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_form')" href="../../../../_functions/begin_form.html" onMouseOver="funcPopup(event,'begin_form')">begin_form</a>( 'inline' );
<a name="l822"><span class="linenum"> 822</span></a>              if( empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l823"><span class="linenum"> 823</span></a>              { // If redirect url is not defined we should go to current url after cancel action
<a name="l824"><span class="linenum"> 824</span></a>                  <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('hiddens_by_key')" href="../../../../_functions/hiddens_by_key.html" onMouseOver="funcPopup(event,'hiddens_by_key')">hiddens_by_key</a>( <a class="var it2481" onMouseOver="hilite(2481)" onMouseOut="lolite()" onClick="logVariable('hiddens')" href="../../../../_variables/hiddens.html">$hiddens</a> );
<a name="l825"><span class="linenum"> 825</span></a>              }
<a name="l826"><span class="linenum"> 826</span></a>              <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('button')" href="../../../../_functions/button.html" onMouseOver="funcPopup(event,'button')">button</a>( array( 'submit', '', <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('CANCEL'), 'CancelButton' ) );
<a name="l827"><span class="linenum"> 827</span></a>          <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_form')" href="../../../../_functions/end_form.html" onMouseOver="funcPopup(event,'end_form')">end_form</a>();
<a name="l828"><span class="linenum"> 828</span></a>  
<a name="l829"><span class="linenum"> 829</span></a>          <a class="var it2483" onMouseOver="hilite(2483)" onMouseOut="lolite()" onClick="logVariable('block_item_Widget')" href="../../../../_variables/block_item_Widget.html">$block_item_Widget</a>-&gt;<a class="function" onClick="logFunction('disp_template_replaced')" href="../../../../_functions/disp_template_replaced.html" onMouseOver="funcPopup(event,'disp_template_replaced')">disp_template_replaced</a>( 'block_end' );
<a name="l830"><span class="linenum"> 830</span></a>          return true;
<a name="l831"><span class="linenum"> 831</span></a>      }
<a name="l832"><span class="linenum"> 832</span></a>  
<a name="l833"><span class="linenum"> 833</span></a>  
<a name="l834"><span class="linenum"> 834</span></a>      <span class="comment">/**</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">     * Get a member param by its name</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">     *</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment">     * @param mixed Name of parameter</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment">     * @return mixed Value of parameter</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment">     */</span>
<a name="l840"><span class="linenum"> 840</span></a>  	function <a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a> )
<a name="l841"><span class="linenum"> 841</span></a>      {
<a name="l842"><span class="linenum"> 842</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>;
<a name="l843"><span class="linenum"> 843</span></a>      }
<a name="l844"><span class="linenum"> 844</span></a>  
<a name="l845"><span class="linenum"> 845</span></a>  
<a name="l846"><span class="linenum"> 846</span></a>      <span class="comment">/**</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">     * Get a ready-to-display member param by its name</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">     *</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">     * Same as disp but don't echo</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment">     *</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment">     * @param string Name of parameter</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment">     */</span>
<a name="l854"><span class="linenum"> 854</span></a>  	function <a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l855"><span class="linenum"> 855</span></a>      {
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">        // Note: we call get again because of derived objects specific handlers !</span>
<a name="l857"><span class="linenum"> 857</span></a>          return <a class="function" onClick="logFunction('format_to_output')" href="../../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../../_variables/format.html">$format</a> );
<a name="l858"><span class="linenum"> 858</span></a>      }
<a name="l859"><span class="linenum"> 859</span></a>  
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>      <span class="comment">/**</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">     * Display a member param by its name</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">     *</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment">     * @param string Name of parameter</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">     */</span>
<a name="l867"><span class="linenum"> 867</span></a>  	function <a class="function" onClick="logFunction('disp')" href="../../../../_functions/disp.html" onMouseOver="funcPopup(event,'disp')">disp</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l868"><span class="linenum"> 868</span></a>      {
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">        // Note: we call get again because of derived objects specific handlers !</span>
<a name="l870"><span class="linenum"> 870</span></a>          echo <a class="function" onClick="logFunction('format_to_output')" href="../../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../../_variables/format.html">$format</a> );
<a name="l871"><span class="linenum"> 871</span></a>      }
<a name="l872"><span class="linenum"> 872</span></a>  
<a name="l873"><span class="linenum"> 873</span></a>  
<a name="l874"><span class="linenum"> 874</span></a>      <span class="comment">/**</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment">     * Set param value</span>
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment">     *</span>
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment">     * By default, all values will be considered strings</span>
<a name="l878"><span class="linenum"> 878</span></a>  <span class="comment">     *</span>
<a name="l879"><span class="linenum"> 879</span></a>  <span class="comment">     * @param string parameter name</span>
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">     * @param mixed parameter value</span>
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty value</span>
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">     * @return boolean true, if a value has been set; false if it has not changed</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">     */</span>
<a name="l884"><span class="linenum"> 884</span></a>  	function <a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../../_variables/make_null.html">$make_null</a> = false )
<a name="l885"><span class="linenum"> 885</span></a>      {
<a name="l886"><span class="linenum"> 886</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, 'string', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../../_variables/make_null.html">$make_null</a> );
<a name="l887"><span class="linenum"> 887</span></a>      }
<a name="l888"><span class="linenum"> 888</span></a>  
<a name="l889"><span class="linenum"> 889</span></a>  
<a name="l890"><span class="linenum"> 890</span></a>      <span class="comment">/**</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">     * Set param value.</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">     *</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">     * @param string Name of parameter</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">     * @param string DB field type ('string', 'number', 'date' )</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">     * @param mixed Value of parameter</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty string value</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">     * @return boolean true, if value has been set/changed, false if not.</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment">     */</span>
<a name="l899"><span class="linenum"> 899</span></a>  	function <a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it2485" onMouseOver="hilite(2485)" onMouseOut="lolite()" onClick="logVariable('fieldtype')" href="../../../../_variables/fieldtype.html">$fieldtype</a>, <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../../_variables/make_null.html">$make_null</a> = false )
<a name="l900"><span class="linenum"> 900</span></a>      {
<a name="l901"><span class="linenum"> 901</span></a>          global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>          <a class="var it2486" onMouseOver="hilite(2486)" onMouseOut="lolite()" onClick="logVariable('dbfield')" href="../../../../_variables/dbfield.html">$dbfield</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbprefix.html">dbprefix</a>.<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>;
<a name="l904"><span class="linenum"> 904</span></a>  
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment">        // Set value:</span>
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">        // fplanque: Note: I am changing the &quot;make NULL&quot; test to differentiate between 0 and NULL .</span>
<a name="l907"><span class="linenum"> 907</span></a>  <span class="comment">        // There might be side effects. In this case it would be better to fix them before coming here.</span>
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">        // i-e: transform 0 to ''</span>
<a name="l909"><span class="linenum"> 909</span></a>          <a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a> = (<a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../../_variables/make_null.html">$make_null</a> &amp;&amp; (<a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../../_variables/parvalue.html">$parvalue</a> === '')) ? NULL : <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../../_variables/parvalue.html">$parvalue</a>;
<a name="l910"><span class="linenum"> 910</span></a>  
<a name="l911"><span class="linenum"> 911</span></a>          <span class="comment">/* Tblue&gt; Problem: All class member variables originating from the</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">         *                 DB are strings (unless they were NULL in the DB,</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">         *                 then they are set to NULL by the PHP MySQL</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">         *                 extension).</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">         *                 If we pass an integer or a double to this function,</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">         *                 the corresponding member variable gets changed</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">         *                 on every call, because its type is 'string' and</span>
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">         *                 we compare using the === operator. Using the</span>
<a name="l919"><span class="linenum"> 919</span></a>  <span class="comment">         *                 == operator would be a bad idea, though, because</span>
<a name="l920"><span class="linenum"> 920</span></a>  <span class="comment">         *                 somebody could pass a NULL value to this function.</span>
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">         *                 If the member variable then is set to 0, then</span>
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment">         *                 0 equals NULL and the member variable does not</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment">         *                 get updated at all!</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment">         *                 Thus, using the === operator is correct.</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment">         *       Solution: If $fieldtype is 'number' and the type of the</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment">         *                 passed value is either integer or double, we</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">         *                 convert it to a string (no data loss). The</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">         *                 member variable and the passed value can then</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">         *                 be correctly compared using the === operator.</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">         *  fp&gt; It would be nicer to convert numeric values to ints &amp; floats at load time in class constructor  x=(int)$y-&gt;value  or sth.</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">         * THIS IS EXPERIMENTAL! Feel free to revert if something does not</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">         * work as expected.</span>
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment">         */</span>
<a name="l934"><span class="linenum"> 934</span></a>          if( <a class="var it2485" onMouseOver="hilite(2485)" onMouseOut="lolite()" onClick="logVariable('fieldtype')" href="../../../../_variables/fieldtype.html">$fieldtype</a> == 'number' &amp;&amp; ( is_int( <a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a> ) || <a class="phpfunction" onClick="logFunction('is_float')" href="../../../../_functions/is_float.html" onMouseOver="phpfuncPopup(event,'is_float')">is_float</a>( <a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a> ) ) )
<a name="l935"><span class="linenum"> 935</span></a>          {
<a name="l936"><span class="linenum"> 936</span></a>              <a class="phpfunction" onClick="logFunction('settype')" href="../../../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">settype</a>( <a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a>, 'string' );
<a name="l937"><span class="linenum"> 937</span></a>          }
<a name="l938"><span class="linenum"> 938</span></a>  
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">        //$Debuglog-&gt;add( $this-&gt;dbtablename.' object; $fieldtype = '.$fieldtype.'; type of $this-&gt;'.$parname.' = '.gettype( @$this-&gt;$parname ).'; type of $new_value = '.gettype( $new_value ), 'dataobjects' );</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment">/* &gt;old</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment">        if( !isset($this-&gt;$parname) )</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment">        {    // This property has never been set before, set it to NULL now in order for tests to work:</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment">            $this-&gt;$parname = NULL;</span>
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment">        }</span>
<a name="l945"><span class="linenum"> 945</span></a>  <span class="comment"></span>
<a name="l946"><span class="linenum"> 946</span></a>  <span class="comment"></span>
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment">        /* blueyed&gt;</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">        TODO: there's a bug here: you cannot use set_param('foo', 'number', 0), if the $parname member</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">              has not been set before or is null!!</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment">              What about just:</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment">              ( isset($this-&gt;$parname) &amp;&amp; $this-&gt;$parname === $new_value )</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">              This would also eliminate the isset() check from above.</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">              IIRC you've once said here that '===' would be too expensive and I would misuse the DataObjects,</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">              but IMHO what we have now is not much faster and buggy anyway..</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment">            fp&gt; okay let's give it a try...</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">        if( (!is_null($new_value) &amp;&amp; $this-&gt;$parname == $new_value)</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">            || (is_null($this-&gt;$parname) &amp;&amp; is_null($new_value)) )</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">&lt;old */</span>
<a name="l959"><span class="linenum"> 959</span></a>          if( (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a> === <a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a>)
<a name="l960"><span class="linenum"> 960</span></a>              || ( ! isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>) &amp;&amp; ! isset(<a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a>) ) )
<a name="l961"><span class="linenum"> 961</span></a>          {    // Value has not changed (we need 2 tests, for NULL and for NOT NULL value pairs)
<a name="l962"><span class="linenum"> 962</span></a>              <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbtablename.html">dbtablename</a>.' object, already set to same value: '.<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>.'/'.<a class="var it2486" onMouseOver="hilite(2486)" onMouseOut="lolite()" onClick="logVariable('dbfield')" href="../../../../_variables/dbfield.html">$dbfield</a>.' = '.<a class="phpfunction" onClick="logFunction('var_export')" href="../../../../_functions/var_export.html" onMouseOver="phpfuncPopup(event,'var_export')">var_export</a>( @<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, true ), 'dataobjects' );
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment">            // echo '&lt;br /&gt;'.$this-&gt;dbtablename.' object, already set to same value: '.$parname.'/'.$dbfield.' = '.$this-&gt;$parname;</span>
<a name="l964"><span class="linenum"> 964</span></a>  
<a name="l965"><span class="linenum"> 965</span></a>              return false;
<a name="l966"><span class="linenum"> 966</span></a>          }
<a name="l967"><span class="linenum"> 967</span></a>          else
<a name="l968"><span class="linenum"> 968</span></a>          {
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment">            // Set the value in the object:</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment">            // echo '&lt;br/&gt;'.$this-&gt;dbtablename.' object, setting param '.$parname.'/'.$dbfield.' to '.$new_value.(is_null($new_value)?' NULL':'').' (was:'.$this-&gt;$parname.(is_null($this-&gt;$parname)?' NULL':'').')';</span>
<a name="l971"><span class="linenum"> 971</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a> = <a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../../_variables/new_value.html">$new_value</a>;
<a name="l972"><span class="linenum"> 972</span></a>              <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbtablename')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbtablename.html">dbtablename</a>.' object, setting param '.<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>.'/'.<a class="var it2486" onMouseOver="hilite(2486)" onMouseOut="lolite()" onClick="logVariable('dbfield')" href="../../../../_variables/dbfield.html">$dbfield</a>.' to '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, 'dataobjects' );
<a name="l973"><span class="linenum"> 973</span></a>  
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment">            // Remember change for later db update:</span>
<a name="l975"><span class="linenum"> 975</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbchange')" href="../../../../_functions/dbchange.html" onMouseOver="funcPopup(event,'dbchange')">dbchange</a>( <a class="var it2486" onMouseOver="hilite(2486)" onMouseOut="lolite()" onClick="logVariable('dbfield')" href="../../../../_variables/dbfield.html">$dbfield</a>, <a class="var it2485" onMouseOver="hilite(2485)" onMouseOut="lolite()" onClick="logVariable('fieldtype')" href="../../../../_variables/fieldtype.html">$fieldtype</a>, <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a> );
<a name="l976"><span class="linenum"> 976</span></a>  
<a name="l977"><span class="linenum"> 977</span></a>              return true;
<a name="l978"><span class="linenum"> 978</span></a>          }
<a name="l979"><span class="linenum"> 979</span></a>      }
<a name="l980"><span class="linenum"> 980</span></a>  
<a name="l981"><span class="linenum"> 981</span></a>  
<a name="l982"><span class="linenum"> 982</span></a>      <span class="comment">/**</span>
<a name="l983"><span class="linenum"> 983</span></a>  <span class="comment">     * Set a parameter from a Request form value.</span>
<a name="l984"><span class="linenum"> 984</span></a>  <span class="comment">     *</span>
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">     * @param string Dataobject parameter name</span>
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment">     * @param string Request parameter name (NULL means to use Dataobject param name with its prefix)</span>
<a name="l987"><span class="linenum"> 987</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty string value</span>
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment">     * @return boolean true, if value has been set/changed, false if not.</span>
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">     */</span>
<a name="l990"><span class="linenum"> 990</span></a>  	function <a class="function" onClick="logFunction('set_from_Request')" href="../../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a> = NULL, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../../_variables/make_null.html">$make_null</a> = false, <a class="var it2488" onMouseOver="hilite(2488)" onMouseOut="lolite()" onClick="logVariable('cleanup_function')" href="../../../../_variables/cleanup_function.html">$cleanup_function</a> = NULL )
<a name="l991"><span class="linenum"> 991</span></a>      {
<a name="l992"><span class="linenum"> 992</span></a>          if( empty(<a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a>) )
<a name="l993"><span class="linenum"> 993</span></a>          {
<a name="l994"><span class="linenum"> 994</span></a>              <a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbprefix.html">dbprefix</a>.<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>;
<a name="l995"><span class="linenum"> 995</span></a>          }
<a name="l996"><span class="linenum"> 996</span></a>  
<a name="l997"><span class="linenum"> 997</span></a>          <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('get_param')" href="../../../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>(<a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a>);
<a name="l998"><span class="linenum"> 998</span></a>  
<a name="l999"><span class="linenum"> 999</span></a>          if( !empty(<a class="var it2488" onMouseOver="hilite(2488)" onMouseOut="lolite()" onClick="logVariable('cleanup_function')" href="../../../../_variables/cleanup_function.html">$cleanup_function</a>) )
<a name="l1000"><span class="linenum">1000</span></a>          {    //We want to apply a cleanup function
<a name="l1001"><span class="linenum">1001</span></a>              <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = <a class="var it2488" onMouseOver="hilite(2488)" onMouseOut="lolite()" onClick="logVariable('cleanup_function')" href="../../../../_variables/cleanup_function.html">$cleanup_function</a>(<a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>);
<a name="l1002"><span class="linenum">1002</span></a>              <a class="function" onClick="logFunction('set_param')" href="../../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>(<a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a>, <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>);
<a name="l1003"><span class="linenum">1003</span></a>          }
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../../_variables/make_null.html">$make_null</a> );
<a name="l1006"><span class="linenum">1006</span></a>      }
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>  
<a name="l1009"><span class="linenum">1009</span></a>      <span class="comment">/**</span>
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment">     * Set a string parameter from a Request form value.</span>
<a name="l1011"><span class="linenum">1011</span></a>  <span class="comment">     *</span>
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment">     * @param string Dataobject parameter name</span>
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty string value</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">     * @param string name of function used to clean up input</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment">     * @param string name of fucntion used to validate input (TODO)</span>
<a name="l1016"><span class="linenum">1016</span></a>  <span class="comment">     * @return boolean true, if value is required</span>
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment">     */</span>
<a name="l1018"><span class="linenum">1018</span></a>  	function <a class="function" onClick="logFunction('set_string_from_param')" href="../../../../_functions/set_string_from_param.html" onMouseOver="funcPopup(event,'set_string_from_param')">set_string_from_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it948" onMouseOver="hilite(948)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../../_variables/required.html">$required</a> = false, <a class="var it2488" onMouseOver="hilite(2488)" onMouseOut="lolite()" onClick="logVariable('cleanup_function')" href="../../../../_variables/cleanup_function.html">$cleanup_function</a> = NULL, <a class="var it2489" onMouseOver="hilite(2489)" onMouseOut="lolite()" onClick="logVariable('validation_function')" href="../../../../_variables/validation_function.html">$validation_function</a> = NULL, <a class="var it1349" onMouseOver="hilite(1349)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../../../../_variables/error_message.html">$error_message</a> = NULL )
<a name="l1019"><span class="linenum">1019</span></a>      {
<a name="l1020"><span class="linenum">1020</span></a>          <a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbprefix')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbprefix.html">dbprefix</a>.<a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>;
<a name="l1021"><span class="linenum">1021</span></a>  
<a name="l1022"><span class="linenum">1022</span></a>          <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('param')" href="../../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( <a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a>, 'string' );
<a name="l1023"><span class="linenum">1023</span></a>  
<a name="l1024"><span class="linenum">1024</span></a>          if( !empty(<a class="var it2488" onMouseOver="hilite(2488)" onMouseOut="lolite()" onClick="logVariable('cleanup_function')" href="../../../../_variables/cleanup_function.html">$cleanup_function</a>) )
<a name="l1025"><span class="linenum">1025</span></a>          {    // We want to apply a cleanup function:
<a name="l1026"><span class="linenum">1026</span></a>              <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../../../_variables/GLOBALS.html">$GLOBALS</a>[<a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a>] = <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = <a class="var it2488" onMouseOver="hilite(2488)" onMouseOut="lolite()" onClick="logVariable('cleanup_function')" href="../../../../_variables/cleanup_function.html">$cleanup_function</a>( <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> );
<a name="l1027"><span class="linenum">1027</span></a>          }
<a name="l1028"><span class="linenum">1028</span></a>  
<a name="l1029"><span class="linenum">1029</span></a>          if( <a class="var it948" onMouseOver="hilite(948)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../../_variables/required.html">$required</a> )
<a name="l1030"><span class="linenum">1030</span></a>          {
<a name="l1031"><span class="linenum">1031</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( <a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a> );
<a name="l1032"><span class="linenum">1032</span></a>          }
<a name="l1033"><span class="linenum">1033</span></a>  
<a name="l1034"><span class="linenum">1034</span></a>          if( <a class="var it2489" onMouseOver="hilite(2489)" onMouseOut="lolite()" onClick="logVariable('validation_function')" href="../../../../_variables/validation_function.html">$validation_function</a> != NULL )
<a name="l1035"><span class="linenum">1035</span></a>          {
<a name="l1036"><span class="linenum">1036</span></a>              <a class="function" onClick="logFunction('param_validate')" href="../../../../_functions/param_validate.html" onMouseOver="funcPopup(event,'param_validate')">param_validate</a>( <a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../../_variables/var.html">$var</a>, <a class="var it2489" onMouseOver="hilite(2489)" onMouseOut="lolite()" onClick="logVariable('validation_function')" href="../../../../_variables/validation_function.html">$validation_function</a>, <a class="var it948" onMouseOver="hilite(948)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../../_variables/required.html">$required</a>, <a class="var it1349" onMouseOver="hilite(1349)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../../../../_variables/error_message.html">$error_message</a> );
<a name="l1037"><span class="linenum">1037</span></a>          }
<a name="l1038"><span class="linenum">1038</span></a>  
<a name="l1039"><span class="linenum">1039</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../../_variables/parname.html">$parname</a>, <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, ! <a class="var it948" onMouseOver="hilite(948)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../../../_variables/required.html">$required</a> );
<a name="l1040"><span class="linenum">1040</span></a>      }
<a name="l1041"><span class="linenum">1041</span></a>  
<a name="l1042"><span class="linenum">1042</span></a>  
<a name="l1043"><span class="linenum">1043</span></a>      <span class="comment">/**</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment">     * Template function: Displays object ID.</span>
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment">     */</span>
<a name="l1046"><span class="linenum">1046</span></a>      function <a class="function" onClick="logFunction('ID')" href="../../../../_functions/id.html" onMouseOver="funcPopup(event,'id')">ID</a>()
<a name="l1047"><span class="linenum">1047</span></a>      {
<a name="l1048"><span class="linenum">1048</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>;
<a name="l1049"><span class="linenum">1049</span></a>      }
<a name="l1050"><span class="linenum">1050</span></a>  
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>      <span class="comment">/**</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment">     * Generate help title text for action</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">     *</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment">     * @param string action code: edit, delete, etc.</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">     * @return string translated help string</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     */</span>
<a name="l1058"><span class="linenum">1058</span></a>  	function <a class="function" onClick="logFunction('get_action_title')" href="../../../../_functions/get_action_title.html" onMouseOver="funcPopup(event,'get_action_title')">get_action_title</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a> )
<a name="l1059"><span class="linenum">1059</span></a>      {
<a name="l1060"><span class="linenum">1060</span></a>          switch( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a> )
<a name="l1061"><span class="linenum">1061</span></a>          {
<a name="l1062"><span class="linenum">1062</span></a>              case 'edit': return <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit this object...');
<a name="l1063"><span class="linenum">1063</span></a>              case 'copy': return <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Duplicate this object...');
<a name="l1064"><span class="linenum">1064</span></a>              case 'delete': return <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete this object!');
<a name="l1065"><span class="linenum">1065</span></a>              default:
<a name="l1066"><span class="linenum">1066</span></a>                  return '';
<a name="l1067"><span class="linenum">1067</span></a>          }
<a name="l1068"><span class="linenum">1068</span></a>      }
<a name="l1069"><span class="linenum">1069</span></a>  
<a name="l1070"><span class="linenum">1070</span></a>  
<a name="l1071"><span class="linenum">1071</span></a>      <span class="comment">/**</span>
<a name="l1072"><span class="linenum">1072</span></a>  <span class="comment">     * Generate requested action icon depending on perm</span>
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment">     */</span>
<a name="l1074"><span class="linenum">1074</span></a>  	function <a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, <a class="var it2490" onMouseOver="hilite(2490)" onMouseOut="lolite()" onClick="logVariable('help_texts')" href="../../../../_variables/help_texts.html">$help_texts</a> = array() )
<a name="l1075"><span class="linenum">1075</span></a>      {
<a name="l1076"><span class="linenum">1076</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, false) )
<a name="l1077"><span class="linenum">1077</span></a>          {    // permission denied:
<a name="l1078"><span class="linenum">1078</span></a>              return '';
<a name="l1079"><span class="linenum">1079</span></a>          }
<a name="l1080"><span class="linenum">1080</span></a>  
<a name="l1081"><span class="linenum">1081</span></a>          return <a class="function" onClick="logFunction('action_icon')" href="../../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_action_title')" href="../../../../_functions/get_action_title.html" onMouseOver="funcPopup(event,'get_action_title')">get_action_title</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>), <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>,
<a name="l1082"><span class="linenum">1082</span></a>                                    <a class="function" onClick="logFunction('regenerate_url')" href="../../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( 'action', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbIDname.html">dbIDname</a>.'='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;action='.<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>
<a name="l1083"><span class="linenum">1083</span></a>                                                                    .'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>(<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('get_class')" href="../../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>))) ) );
<a name="l1084"><span class="linenum">1084</span></a>      }
<a name="l1085"><span class="linenum">1085</span></a>  
<a name="l1086"><span class="linenum">1086</span></a>  
<a name="l1087"><span class="linenum">1087</span></a>      <span class="comment">/**</span>
<a name="l1088"><span class="linenum">1088</span></a>  <span class="comment">     * Generate requested action link depending on perm</span>
<a name="l1089"><span class="linenum">1089</span></a>  <span class="comment">     */</span>
<a name="l1090"><span class="linenum">1090</span></a>  	function <a class="function" onClick="logFunction('action_link')" href="../../../../_functions/action_link.html" onMouseOver="funcPopup(event,'action_link')">action_link</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../../_variables/link_text.html">$link_text</a>, <a class="var it2490" onMouseOver="hilite(2490)" onMouseOut="lolite()" onClick="logVariable('help_texts')" href="../../../../_variables/help_texts.html">$help_texts</a> = array() )
<a name="l1091"><span class="linenum">1091</span></a>      {
<a name="l1092"><span class="linenum">1092</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>, false) )
<a name="l1093"><span class="linenum">1093</span></a>          {    // permission denied:
<a name="l1094"><span class="linenum">1094</span></a>              return '';
<a name="l1095"><span class="linenum">1095</span></a>          }
<a name="l1096"><span class="linenum">1096</span></a>  
<a name="l1097"><span class="linenum">1097</span></a>          return '&lt;a href=&quot;'.<a class="function" onClick="logFunction('regenerate_url')" href="../../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( 'action', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbIDname')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/dbIDname.html">dbIDname</a>.'='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/ID.html">ID</a>.'&amp;amp;action='.<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a> )
<a name="l1098"><span class="linenum">1098</span></a>                          .'&quot; title=&quot;'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_action_title')" href="../../../../_functions/get_action_title.html" onMouseOver="funcPopup(event,'get_action_title')">get_action_title</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../../_variables/action.html">$action</a>).'&quot;&gt;'.<a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../../_variables/link_text.html">$link_text</a>.'&lt;/a&gt;';
<a name="l1099"><span class="linenum">1099</span></a>      }
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>  
<a name="l1102"><span class="linenum">1102</span></a>      <span class="comment">/**</span>
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment">     * Create icon with dataobject history</span>
<a name="l1104"><span class="linenum">1104</span></a>  <span class="comment">     */</span>
<a name="l1105"><span class="linenum">1105</span></a>  	function <a class="function" onClick="logFunction('history_info_icon')" href="../../../../_functions/history_info_icon.html" onMouseOver="funcPopup(event,'history_info_icon')">history_info_icon</a>()
<a name="l1106"><span class="linenum">1106</span></a>      {
<a name="l1107"><span class="linenum">1107</span></a>          <a class="var it2491" onMouseOver="hilite(2491)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../../../_variables/history.html">$history</a> = array();
<a name="l1108"><span class="linenum">1108</span></a>  
<a name="l1109"><span class="linenum">1109</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l1110"><span class="linenum">1110</span></a>  
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment">        // HANDLE CREATOR STUFF</span>
<a name="l1112"><span class="linenum">1112</span></a>          if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/creator_field.html">creator_field</a>) &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/creator_field.html">creator_field</a>}) )
<a name="l1113"><span class="linenum">1113</span></a>          {    // We have a creator:
<a name="l1114"><span class="linenum">1114</span></a>              <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../../_variables/creator_User.html">$creator_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creator_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/creator_field.html">creator_field</a>} );
<a name="l1115"><span class="linenum">1115</span></a>  
<a name="l1116"><span class="linenum">1116</span></a>              if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>) &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>}) )
<a name="l1117"><span class="linenum">1117</span></a>              {    // We also have a create date:
<a name="l1118"><span class="linenum">1118</span></a>                  <a class="var it2491" onMouseOver="hilite(2491)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../../../_variables/history.html">$history</a>[0] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Created on %s by %s'), <a class="function" onClick="logFunction('mysql2localedate')" href="../../../../_functions/mysql2localedate.html" onMouseOver="funcPopup(event,'mysql2localedate')">mysql2localedate</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>} ),
<a name="l1119"><span class="linenum">1119</span></a>                      <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../../_variables/creator_User.html">$creator_User</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('preferredname') );
<a name="l1120"><span class="linenum">1120</span></a>              }
<a name="l1121"><span class="linenum">1121</span></a>              else
<a name="l1122"><span class="linenum">1122</span></a>              {    // We only have a cretaor:
<a name="l1123"><span class="linenum">1123</span></a>                  <a class="var it2491" onMouseOver="hilite(2491)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../../../_variables/history.html">$history</a>[0] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Created by %s'), <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../../_variables/creator_User.html">$creator_User</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('preferredname') );
<a name="l1124"><span class="linenum">1124</span></a>              }
<a name="l1125"><span class="linenum">1125</span></a>          }
<a name="l1126"><span class="linenum">1126</span></a>          elseif( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>) &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>}) )
<a name="l1127"><span class="linenum">1127</span></a>          {    // We only have a create date:
<a name="l1128"><span class="linenum">1128</span></a>              <a class="var it2491" onMouseOver="hilite(2491)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../../../_variables/history.html">$history</a>[0] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Created on %s'), <a class="function" onClick="logFunction('mysql2localedate')" href="../../../../_functions/mysql2localedate.html" onMouseOver="funcPopup(event,'mysql2localedate')">mysql2localedate</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datecreated_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datecreated_field.html">datecreated_field</a>} ) );
<a name="l1129"><span class="linenum">1129</span></a>          }
<a name="l1130"><span class="linenum">1130</span></a>  
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment">        // HANDLE LAST UPDATE STUFF</span>
<a name="l1132"><span class="linenum">1132</span></a>          if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lasteditor_field.html">lasteditor_field</a>) &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lasteditor_field.html">lasteditor_field</a>}) )
<a name="l1133"><span class="linenum">1133</span></a>          {    // We have a creator:
<a name="l1134"><span class="linenum">1134</span></a>              <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../../_variables/creator_User.html">$creator_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lasteditor_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/lasteditor_field.html">lasteditor_field</a>} );
<a name="l1135"><span class="linenum">1135</span></a>  
<a name="l1136"><span class="linenum">1136</span></a>              if( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>) &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>}) )
<a name="l1137"><span class="linenum">1137</span></a>              {    // We also have a create date:
<a name="l1138"><span class="linenum">1138</span></a>                  <a class="var it2491" onMouseOver="hilite(2491)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../../../_variables/history.html">$history</a>[1] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last mod on %s by %s'), <a class="function" onClick="logFunction('mysql2localedate')" href="../../../../_functions/mysql2localedate.html" onMouseOver="funcPopup(event,'mysql2localedate')">mysql2localedate</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>} ),
<a name="l1139"><span class="linenum">1139</span></a>                      <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../../_variables/creator_User.html">$creator_User</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('preferredname') );
<a name="l1140"><span class="linenum">1140</span></a>              }
<a name="l1141"><span class="linenum">1141</span></a>              else
<a name="l1142"><span class="linenum">1142</span></a>              {    // We only have a cretaor:
<a name="l1143"><span class="linenum">1143</span></a>                  <a class="var it2491" onMouseOver="hilite(2491)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../../../_variables/history.html">$history</a>[1] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last mod by %s'), <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../../_variables/creator_User.html">$creator_User</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>('preferredname') );
<a name="l1144"><span class="linenum">1144</span></a>              }
<a name="l1145"><span class="linenum">1145</span></a>          }
<a name="l1146"><span class="linenum">1146</span></a>          elseif( !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>) &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>}) )
<a name="l1147"><span class="linenum">1147</span></a>          {    // We only have a create date:
<a name="l1148"><span class="linenum">1148</span></a>              <a class="var it2491" onMouseOver="hilite(2491)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../../../_variables/history.html">$history</a>[1] = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Last mod on %s'), <a class="function" onClick="logFunction('mysql2localedate')" href="../../../../_functions/mysql2localedate.html" onMouseOver="funcPopup(event,'mysql2localedate')">mysql2localedate</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified_field')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../../_variables/datemodified_field.html">datemodified_field</a>} ) );
<a name="l1149"><span class="linenum">1149</span></a>          }
<a name="l1150"><span class="linenum">1150</span></a>  
<a name="l1151"><span class="linenum">1151</span></a>          return <a class="function" onClick="logFunction('get_icon')" href="../../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'history', 'imgtag', array( 'title'=&gt;<a class="phpfunction" onClick="logFunction('implode')" href="../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' - ', <a class="var it2491" onMouseOver="hilite(2491)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../../../_variables/history.html">$history</a> ) ), true );
<a name="l1152"><span class="linenum">1152</span></a>      }
<a name="l1153"><span class="linenum">1153</span></a>  }
<a name="l1154"><span class="linenum">1154</span></a>  
<a name="l1155"><span class="linenum">1155</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'url_crumb': ['url_crumb', 'Create a crumb param to be passed in action urls... ', [['inc/_core','_url.funcs.php',597]], 281],
'set_from_request': ['set_from_request', 'Set a parameter from a Request form value. ', [['inc/_core/model/dataobjects','_dataobject.class.php',982]], 128],
'dbsave': ['dbsave', 'Inserts or Updates depending on object state. ', [['inc/_core/model/dataobjects','_dataobject.class.php',569],['inc/sessions/model','_session.class.php',503]], 51],
'dbinsert': ['dbinsert', 'Insert object into DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5108],['inc/_core/model/dataobjects','_dataobject.class.php',470],['inc/users/model','_user.class.php',3187],['inc/skins/model','_skin.class.php',438],['inc/items/model','_itemtype.class.php',405],['inc/files/model','_filetype.class.php',213],['inc/tools/model','_syslog.class.php',58],['inc/collections/model','_blog.class.php',2272],['inc/comments/model','_comment.class.php',3815],['inc/users/model','_group.class.php',459],['inc/widgets/model','_widget.class.php',829],['inc/chapters/model','_chapter.class.php',532],['inc/files/model','_file.class.php',1784]], 99],
'action_icon': ['action_icon', 'Generate requested action icon depending on perm ', [['inc/_core/model/dataobjects','_dataobject.class.php',1071],['inc/_core','_misc.funcs.php',3977]], 289],
'hidden': ['hidden', 'Builds an hidden input tag, overwriting any previous hidden values (except for "foo[]"). ', [['inc/_core/ui/forms','_form.class.php',3046]], 689],
'replace_vars': ['replace_vars', 'Replaces $vars$ with appropriate values. ', [['inc/_core/ui','_uiwidget.class.php',119]], 23],
'check_relations': ['check_relations', 'Check relations for restrictions or cascades. ', [['inc/_core/model/dataobjects','_dataobject.class.php',680]], 6],
'get_delete_cascades': ['get_delete_cascades', 'Get delete cascade settings ', [['inc/email_campaigns/model','_emailcampaign.class.php',71],['inc/_core/model/dataobjects','_dataobject.class.php',152],['inc/users/model','_user.class.php',278],['inc/skins/model','_skin.class.php',95],['inc/messaging/model','_message.class.php',111],['inc/messaging/model','_thread.class.php',171],['inc/items/model','_itemtype.class.php',134],['inc/collections/model','_blog.class.php',190],['inc/comments/model','_comment.class.php',274],['inc/users/model','_userfield.class.php',74],['inc/links/model','_link.class.php',108],['inc/items/model','_itemtag.class.php',48],['inc/sessions/model','_goal.class.php',62],['inc/items/model','_itemlight.class.php',175]], 1],
'get_action_title': ['get_action_title', 'Generate help title text for action ', [['inc/_core/model/dataobjects','_dataobject.class.php',1052],['inc/sessions/model','_goal.class.php',75]], 2],
'trigger_event': ['trigger_event', 'Call all plugins for a given event. ', [['inc/plugins/model','_plugins.class.php',817]], 130],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'add_crumb': ['add_crumb', 'Add a crumb to the current form ', [['inc/_core/ui/forms','_form.class.php',3094]], 164],
'disp_template_replaced': ['disp_template_replaced', 'Display a template param with its variables replaced ', [['inc/_core/ui','_uiwidget.class.php',110]], 53],
'confirm_delete': ['confirm_delete', 'Displays form to confirm deletion of this object ', [['inc/_core/model/dataobjects','_dataobject.class.php',763]], 25],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['inc/_core','_misc.funcs.php',264]], 318],
'mysql2localedate': ['mysql2localedate', 'Format a MYSQL date to current locale date format. ', [['inc/_core','_misc.funcs.php',1263]], 13],
'param_validate': ['param_validate', 'Validate variable ', [['inc/_core','_misc.funcs.php',1701]], 8],
'rollback': ['rollback', 'Rollback current transaction ', [['inc/_core/model/db','_db.class.php',1625]], 48],
'begin': ['begin', 'BEGIN A TRANSCATION ', [['inc/_core/model/db','_db.class.php',1537]], 114],
'get_delete_restrictions': ['get_delete_restrictions', 'Get delete restriction settings ', [['inc/_core/model/dataobjects','_dataobject.class.php',129],['inc/items/model','_itemstatus.class.php',50],['inc/regional/model','_country.class.php',55],['inc/users/model','_user.class.php',255],['inc/skins/model','_skin.class.php',79],['inc/items/model','_itemtype.class.php',121],['inc/regional/model','_subregion.class.php',64],['inc/regional/model','_city.class.php',55],['inc/slugs/model','_slug.class.php',54],['inc/users/model','_group.class.php',108],['inc/regional/model','_currency.class.php',49],['inc/regional/model','_region.class.php',51],['inc/chapters/model','_chapter.class.php',144],['inc/sessions/model','_goalcat.class.php',46],['inc/files/model','_file.class.php',274],['inc/items/model','_itemlight.class.php',161],['inc/users/model','_userfieldgroup.class.php',51],['inc/users/model','_organization.class.php',54]], 1],
'dbexists': ['dbexists', 'Check existence of specified value in unique field. ', [['inc/_core/model/dataobjects','_dataobject.class.php',646],['inc/regional/model','_country.class.php',130],['inc/items/model','_itemtype.class.php',388],['inc/regional/model','_subregion.class.php',142],['inc/regional/model','_currency.class.php',109],['inc/regional/model','_region.class.php',125],['inc/sessions/model','_goal.class.php',230],['inc/users/model','_userfieldgroup.class.php',108]], 25],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['inc/_core','_param.funcs.php',1678],['inc/_core/model/dataobjects','_dataobject.class.php',890]], 127],
'end_form': ['end_form', 'Ends the form, optionally displays buttons and closes all open fieldsets. ', [['inc/_core/ui/forms','_form.class.php',1975]], 208],
'id': ['id', 'Template function: Displays object ID. ', [['inc/_core/model/dataobjects','_dataobject.class.php',1043]], 19],
'display': ['display', 'Display the widget! ', [['inc/widgets/widgets','_coll_tag_cloud.widget.php',170],['inc/_core/model/db','_sql.class.php',68],['inc/widgets/widgets','_coll_logo.widget.php',138],['inc/widgets/widgets','_mobile_skin_switcher.widget.php',105],['inc/widgets/widgets','_online_users.widget.php',95],['inc/widgets/widgets','_user_login.widget.php',195],['inc/widgets/widgets','_coll_item_list.widget.php',274],['inc/_core/model','_messages.class.php',183],['inc/widgets/widgets','_user_links.widget.php',114],['inc/widgets/widgets','_coll_featured_intro.widget.php',171],['plugins','_calendar.plugin.php',619],['inc/widgets/widgets','_coll_search_form.widget.php',135],['inc/widgets/widgets','_coll_longdesc.widget.php',99],['inc/widgets/widgets','_content_hierarchy.widget.php',120],['inc/widgets/widgets','_coll_tagline.widget.php',79],['inc/widgets/widgets','_coll_current_filters.widget.php',113],['inc/widgets/widgets','_coll_category_list.widget.php',198],['inc/widgets/widgets','_org_members.widget.php',147],['inc/widgets/widgets','_coll_comment_list.widget.php',129],['inc/_core/model','_log.class.php',276],['inc/_core/model','_log.class.php',602],['inc/widgets/widgets','_member_count.widget.php',66],['inc/widgets/widgets','_menu_link.widget.php',202],['inc/_core/ui/results','_results.class.php',916],['inc/widgets/widgets','_free_html.widget.php',110],['inc/widgets/widgets','_breadcrumb_path.widget.php',103],['inc/widgets/widgets','_image.widget.php',139],['inc/widgets/widgets','_profile_menu_link.widget.php',128],['inc/widgets/widgets','_coll_media_index.widget.php',199],['inc/widgets/model','_widget.class.php',513],['inc/widgets/widgets','_colls_list_owner.widget.php',121],['inc/widgets/widgets','_user_tools.widget.php',252],['inc/widgets/widgets','_coll_common_links.widget.php',167],['inc/widgets/widgets','_msg_menu_link.widget.php',191],['inc/widgets/widgets','_user_avatars.widget.php',177],['inc/widgets/widgets','_coll_xml_feeds.widget.php',120],['inc/widgets/widgets','_coll_avatar.widget.php',92],['inc/widgets/widgets','_user_register.widget.php',156],['inc/widgets/widgets','_colls_list_public.widget.php',121],['inc/widgets/widgets','_coll_title.widget.php',100]], 129],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5287],['inc/_core/model/dataobjects','_dataobject.class.php',386],['inc/users/model','_user.class.php',3249],['inc/skins/model','_skin.class.php',416],['inc/settings/model','_abstractsettings.class.php',575],['inc/items/model','_itemtype.class.php',433],['inc/files/model','_filetype.class.php',242],['inc/collections/model','_blog.class.php',2630],['inc/comments/model','_comment.class.php',3747],['inc/cron/model','_cronjob.class.php',188],['inc/slugs/model','_slug.class.php',265],['inc/users/model','_group.class.php',478],['inc/widgets/model','_widget.class.php',861],['inc/users/model','_groupsettings.class.php',159],['inc/chapters/model','_chapter.class.php',564],['inc/files/model','_file.class.php',1825]], 289],
'set_string_from_param': ['set_string_from_param', 'Set a string parameter from a Request form value. ', [['inc/_core/model/dataobjects','_dataobject.class.php',1009]], 15],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'db_delete_where': ['db_delete_where', 'Delete the given class objects from the database which corresponds to the given condition or to the given ids array This function must be overriden on those classes where the db delete requires some updates on other table content or some files/folders delete. Note: the delete cascade arrays are handled! Delete cascades are handled recursively only if the cascade arrays from the reffering class contains the class and class_path params ( e.g. see User class )! ', [['inc/_core/model/dataobjects','_dataobject.class.php',175],['inc/users/model','_user.class.php',3308],['inc/messaging/model','_message.class.php',503],['inc/sessions/model','_session.class.php',281],['inc/comments/model','_comment.class.php',290]], 11],
'dataobject': ['dataobject', 'Constructor ', [['inc/_core/model/dataobjects','_dataobject.class.php',65]], 35],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'get_restriction_link': ['get_restriction_link', 'Get link to restricted object ', [['inc/slugs/model','_slug.class.php',205],['inc/regional/model','_currency.class.php',131],['inc/files/model','_file.class.php',2649]], 1],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'get_param': ['get_param', 'Get the value of a param. ', [['inc/_core','_param.funcs.php',1694],['inc/widgets/model','_widget.class.php',343]], 340],
'begin_form': ['begin_form', 'Builds the form field ', [['inc/_core/ui/forms','_form.class.php',1816]], 194],
'dbdelete': ['dbdelete', 'Trigger event AfterItemDelete after calling parent method. ', [['inc/items/model','_item.class.php',5506],['inc/_core/model/dataobjects','_dataobject.class.php',591],['inc/users/model','_user.class.php',3376],['inc/messaging/model','_message.class.php',582],['inc/messaging/model','_thread.class.php',444],['inc/items/model','_itemtype.class.php',451],['inc/files/model','_filetype.class.php',271],['inc/collections/model','_blog.class.php',2664],['inc/comments/model','_comment.class.php',3872],['inc/users/model','_group.class.php',497]], 62],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['inc/users/model','_user.funcs.php',38]], 274],
'add_relations': ['add_relations', 'Add additional relations for specific cases E.g. On spammer user delete the user comments must be also deleted ', [['inc/_core/model/dataobjects','_dataobject.class.php',328]], 0],
'get_icon': ['get_icon', 'Return the img html code of the icon ', [['inc/files/model','_filetype.class.php',153],['inc/files/model','_file.class.php',978],['inc/_core','_misc.funcs.php',4122]], 428],
'param_check_not_empty': ['param_check_not_empty', '', [['inc/_core','_param.funcs.php',564]], 53],
'get_class_db_config': ['get_class_db_config', 'Get this class db table config params ', [['inc/_core/model/dataobjects','_dataobject.class.php',104],['inc/users/model','_user.class.php',231],['inc/messaging/model','_message.class.php',87],['inc/messaging/model','_thread.class.php',147],['inc/sessions/model','_session.class.php',259],['inc/comments/model','_comment.class.php',250],['inc/links/model','_link.class.php',84],['inc/chapters/model','_chapter.class.php',120],['inc/files/model','_file.class.php',250],['inc/items/model','_itemlight.class.php',199]], 7],
'check_delete': ['check_delete', 'Check relations for restrictions before deleting ', [['inc/_core/model/dataobjects','_dataobject.class.php',736]], 25],
'escape': ['escape', '', [['rsc/js/jquery','jquery.ui.b2evo.js',6537],['rsc/js/jquery','jquery.ui.all.js',9814],['inc/_core/model/db','_db.class.php',482]], 103],
'init_relations': ['init_relations', 'Initialize relations for restrict and cascade deletion. ', [['inc/_core/model/dataobjects','_dataobject.class.php',89],['inc/users/model','_user.class.php',313]], 6],
'dbchange': ['dbchange', 'Records a change that will need to be updated in the db ', [['inc/_core/model/dataobjects','_dataobject.class.php',370]], 2],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'null': ['null', '', [['inc/_core/model/db','_db.class.php',522]], 5],
'history_info_icon': ['history_info_icon', 'Create icon with dataobject history ', [['inc/_core/model/dataobjects','_dataobject.class.php',1102]], 3],
'hiddens_by_key': ['hiddens_by_key', 'Builds a list of hidden inputs from an array where the keys are the field names. ', [['inc/_core/ui/forms','_form.class.php',3145]], 56],
'button': ['button', 'Builds a button. ', [['inc/_core/ui/forms','_form.class.php',2980]], 68],
'commit': ['commit', 'For any bytes that are currently buffered inside the stream, force them off the buffer. ', [['inc/_ext/swift/classes/Swift/ByteStream','AbstractFilterableInputStream.php',97],['inc/_ext/swift/classes/Swift/Signers','DKIMSigner.php',223],['inc/_ext/swift/classes/Swift/ByteStream','ArrayByteStream.php',116],['inc/_ext/swift/classes/Swift/Plugins','BandwidthMonitorPlugin.php',90],['inc/_ext/swift/classes/Swift','InputByteStream.php',41],['inc/_ext/swift/classes/Swift/Signers','DomainKeySigner.php',178],['inc/_ext/swift/classes/Swift/KeyCache','SimpleKeyCacheInputStream.php',71],['inc/_core/model/db','_db.class.php',1589]], 135],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['inc/items/model','_itemlist.class.php',249],['inc/items/model','_itemlistlight.class.php',742],['inc/comments/model','_commentlist.class.php',507],['inc/users/model','_userlist.class.php',511],['inc/_core/ui/results','_results.class.php',468],['inc/_core/model/db','_db.class.php',749]], 1144],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['inc/_core/model/db','_db.class.php',1032]], 117],
'regenerate_url': ['regenerate_url', 'Regenerate current URL from parameters This may clean it up But it is also useful when generating static pages: you cannot rely on $_REQUEST[] ', [['inc/_core','_param.funcs.php',1748]], 503],
'action_link': ['action_link', 'Generate requested action link depending on perm ', [['inc/_core/model/dataobjects','_dataobject.class.php',1087]], 1],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['inc/_core/model/db','_db.class.php',952]], 166],
'disp': ['disp', 'Display a member param by its name ', [['inc/_core/model/dataobjects','_dataobject.class.php',861],['inc/_core/model','_messages.class.php',152],['inc/_core/model','_log.class.php',241],['inc/_core/model','_log.class.php',597]], 66],
'dget': ['dget', 'Get a ready-to-display member param by its name ', [['inc/_core/model/dataobjects','_dataobject.class.php',846]], 252],
'settype': ['settype', '', [], 4],
'is_array': ['is_array', '', [], 311],
'count': ['count', '', [], 928],
'get_class': ['get_class', '', [], 30],
'str_replace': ['str_replace', '', [], 531],
'strtolower': ['strtolower', '', [], 202],
'is_object': ['is_object', '', [], 70],
'array_merge': ['array_merge', '', [], 702],
'is_float': ['is_float', '', [], 3],
'defined': ['defined', '', [], 962],
'implode': ['implode', '', [], 571],
'is_null': ['is_null', '', [], 299],
'in_array': ['in_array', '', [], 417],
'call_user_func': ['call_user_func', '', [], 17],
'var_export': ['var_export', '', [], 48],
'date': ['date', '', [], 446]};
CLASS_DATA={
'widget': ['widget', 'Widget class which provides an interface to widget methods for other classes. ', [['inc/_core/ui','_uiwidget.class.php',18]], 43],
'form': ['form', 'Form class ', [['inc/_core/ui/forms','_form.class.php',28]], 208],
'dataobject': ['dataobject', 'Data Object Base Class ', [['inc/_core/model/dataobjects','_dataobject.class.php',18]], 37],
'messages': ['messages', 'Messages class. For displaying notes, successful actions & errors. ', [['inc/_core/model','_messages.class.php',26]], 4]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
