<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/skins/_skin.funcs.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='inc/skins';
filename='_skin.funcs.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/skins/</a> -> <a href="_skin.funcs.php.html">_skin.funcs.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_skin.funcs.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_skin.funcs.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements Template tags for use withing skins.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the b2evolution/evocms project - {@link http://b2evolution.net/}.</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}.</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2005 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @package evocore</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">// DEBUG: (Turn switch on or off to log debug info for specified category)</span>
<a name="l19"><span class="linenum">  19</span></a>  <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['debug_skins'] = true;
<a name="l20"><span class="linenum">  20</span></a>  
<a name="l21"><span class="linenum">  21</span></a>  
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment">/**</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * Initialize internal states for the most common skin displays.</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> *</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * For more specific skins, this function may not be called and</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * equivalent code may be customized within the skin.</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @param string What are we going to display. Most of the time the global $disp should be passed.</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> */</span>
<a name="l30"><span class="linenum">  30</span></a>  function <a class="function" onClick="logFunction('skin_init')" href="../../_functions/skin_init.html" onMouseOver="funcPopup(event,'skin_init')">skin_init</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> )
<a name="l31"><span class="linenum">  31</span></a>  {
<a name="l32"><span class="linenum">  32</span></a>      <span class="comment">/**</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">     * @var Blog</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">     */</span>
<a name="l35"><span class="linenum">  35</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>;
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>      <span class="comment">/**</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * @var Item</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     */</span>
<a name="l40"><span class="linenum">  40</span></a>      global <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>;
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>      <span class="comment">/**</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * @var Skin</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     */</span>
<a name="l45"><span class="linenum">  45</span></a>      global <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>;
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      global <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a>;
<a name="l48"><span class="linenum">  48</span></a>      global <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a>;
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>      global <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a>, <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it477" onMouseOver="hilite(477)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../_variables/ReqURI.html">$ReqURI</a>, <a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../_variables/m.html">$m</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../_variables/w.html">$w</a>, <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../_variables/preview.html">$preview</a>;
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>      global <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a>;
<a name="l53"><span class="linenum">  53</span></a>      global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>      <span class="comment">/**</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * @var ItemList2</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     */</span>
<a name="l58"><span class="linenum">  58</span></a>      global <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>;
<a name="l59"><span class="linenum">  59</span></a>  
<a name="l60"><span class="linenum">  60</span></a>      <span class="comment">/**</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * This will give more detail when $disp == 'posts'; otherwise it will have the same content as $disp</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     * @var string</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     */</span>
<a name="l64"><span class="linenum">  64</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>;
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>      global <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>;
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>      global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>, <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a>;
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>      global <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>( 'skin_init' );
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>      if( empty(<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a>) )
<a name="l75"><span class="linenum">  75</span></a>      {
<a name="l76"><span class="linenum">  76</span></a>          <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> = <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l77"><span class="linenum">  77</span></a>      }
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>      <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('skin_init: <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>='.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, 'skins' );
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">    // This is the main template; it may be used to display very different things.</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">    // Do inits depending on current $disp:</span>
<a name="l83"><span class="linenum">  83</span></a>      switch( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> )
<a name="l84"><span class="linenum">  84</span></a>      {
<a name="l85"><span class="linenum">  85</span></a>          case 'front':
<a name="l86"><span class="linenum">  86</span></a>          case 'posts':
<a name="l87"><span class="linenum">  87</span></a>          case 'single':
<a name="l88"><span class="linenum">  88</span></a>          case 'page':
<a name="l89"><span class="linenum">  89</span></a>          case 'terms':
<a name="l90"><span class="linenum">  90</span></a>          case 'download':
<a name="l91"><span class="linenum">  91</span></a>          case 'feedback-popup':
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">            // We need to load posts for this display:</span>
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>              if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> == 'terms' )
<a name="l95"><span class="linenum">  95</span></a>              {    // Initialize the redirect param to know what page redirect after accepting of terms:
<a name="l96"><span class="linenum">  96</span></a>                  <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', '' );
<a name="l97"><span class="linenum">  97</span></a>              }
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">            // Note: even if we request the same post as $Item above, the following will do more restrictions (dates, etc.)</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">            // Init the MainList object:</span>
<a name="l101"><span class="linenum"> 101</span></a>              <a class="function" onClick="logFunction('init_MainList')" href="../../_functions/init_mainlist.html" onMouseOver="funcPopup(event,'init_mainlist')">init_MainList</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('posts_per_page') );
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">            // Init post navigation</span>
<a name="l104"><span class="linenum"> 104</span></a>              <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a> = <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_post_navigation')" href="../../_functions/get_post_navigation.html" onMouseOver="funcPopup(event,'get_post_navigation')">get_post_navigation</a>();
<a name="l105"><span class="linenum"> 105</span></a>              if( empty( <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a> ) )
<a name="l106"><span class="linenum"> 106</span></a>              {
<a name="l107"><span class="linenum"> 107</span></a>                  <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'post_navigation' );
<a name="l108"><span class="linenum"> 108</span></a>              }
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>              if( ! empty( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a> ) &amp;&amp; <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('single_post')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../_variables/single_post.html">single_post</a> &amp;&amp;
<a name="l111"><span class="linenum"> 111</span></a>                  <a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('single_Item')" href="../../_variables/single_Item.html">$single_Item</a> = &amp; mainlist_get_item() )
<a name="l112"><span class="linenum"> 112</span></a>              {    // If we are currently viewing a single post
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">                // We assume the current user will have read the entire post and all its current comments:</span>
<a name="l114"><span class="linenum"> 114</span></a>                  <a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('single_Item')" href="../../_variables/single_Item.html">$single_Item</a>-&gt;<a class="function" onClick="logFunction('update_read_timestamps')" href="../../_functions/update_read_timestamps.html" onMouseOver="funcPopup(event,'update_read_timestamps')">update_read_timestamps</a>( true, true );
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">                // Restart the items list:</span>
<a name="l116"><span class="linenum"> 116</span></a>                  <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('restart')" href="../../_functions/restart.html" onMouseOver="funcPopup(event,'restart')">restart</a>();
<a name="l117"><span class="linenum"> 117</span></a>              }
<a name="l118"><span class="linenum"> 118</span></a>              break;
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>          case 'search':
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">            // Searching post, comments and categories</span>
<a name="l122"><span class="linenum"> 122</span></a>              <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'collections/_search.funcs.php' );
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">            // Check previous search keywords so it can be displayed in the search input box</span>
<a name="l124"><span class="linenum"> 124</span></a>              <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 's', 'string', '', true );
<a name="l125"><span class="linenum"> 125</span></a>              break;
<a name="l126"><span class="linenum"> 126</span></a>      }
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">    // SEO stuff &amp; redirects if necessary:</span>
<a name="l129"><span class="linenum"> 129</span></a>      <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = NULL;
<a name="l130"><span class="linenum"> 130</span></a>      switch( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> )
<a name="l131"><span class="linenum"> 131</span></a>      {
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">        // CONTENT PAGES:</span>
<a name="l133"><span class="linenum"> 133</span></a>          case 'single':
<a name="l134"><span class="linenum"> 134</span></a>          case 'page':
<a name="l135"><span class="linenum"> 135</span></a>          case 'terms':
<a name="l136"><span class="linenum"> 136</span></a>              if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> == 'terms' &amp;&amp; ! <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> )
<a name="l137"><span class="linenum"> 137</span></a>              {    // Wrong post ID for terms page:
<a name="l138"><span class="linenum"> 138</span></a>                  global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l139"><span class="linenum"> 139</span></a>                  <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = '404';
<a name="l140"><span class="linenum"> 140</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Terms not found. (post ID #%s)'), <a class="function" onClick="logFunction('get_param')" href="../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'p' ) ), 'error' );
<a name="l141"><span class="linenum"> 141</span></a>                  break;
<a name="l142"><span class="linenum"> 142</span></a>              }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>              if( ( ! <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../_variables/preview.html">$preview</a> ) &amp;&amp; ( empty( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) ) )
<a name="l145"><span class="linenum"> 145</span></a>              { // No Item, incorrect request and incorrect state of the application, a 404 redirect should have already happened
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">                //debug_die( 'Invalid page URL!' );</span>
<a name="l147"><span class="linenum"> 147</span></a>              }
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>              if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> == 'single' )
<a name="l150"><span class="linenum"> 150</span></a>              {
<a name="l151"><span class="linenum"> 151</span></a>                  <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Single post page';
<a name="l152"><span class="linenum"> 152</span></a>              }
<a name="l153"><span class="linenum"> 153</span></a>              else
<a name="l154"><span class="linenum"> 154</span></a>              {
<a name="l155"><span class="linenum"> 155</span></a>                  <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = '&quot;Page&quot; page';
<a name="l156"><span class="linenum"> 156</span></a>              }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>              if( ! <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../_variables/preview.html">$preview</a> )
<a name="l159"><span class="linenum"> 159</span></a>              { // Check if item has a goal to insert a hit into DB
<a name="l160"><span class="linenum"> 160</span></a>                  <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('check_goal')" href="../../_functions/check_goal.html" onMouseOver="funcPopup(event,'check_goal')">check_goal</a>();
<a name="l161"><span class="linenum"> 161</span></a>              }
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">            // Check if the post has 'redirected' status:</span>
<a name="l164"><span class="linenum"> 164</span></a>              if( ! <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../_variables/preview.html">$preview</a> &amp;&amp; <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('status')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == 'redirected' &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' )
<a name="l165"><span class="linenum"> 165</span></a>              {    // <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a>=no here allows to force a 'single post' URL for commenting
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">                // Redirect to the URL specified in the post:</span>
<a name="l167"><span class="linenum"> 167</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Redirecting to post URL ['.<a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('url')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/url.html">url</a>.'].' );
<a name="l168"><span class="linenum"> 168</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('url')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/url.html">url</a>, true, true );
<a name="l169"><span class="linenum"> 169</span></a>              }
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">            // Check if we want to redirect to a canonical URL for the post</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">            // Please document encountered problems.</span>
<a name="l173"><span class="linenum"> 173</span></a>              if( ! <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../_variables/preview.html">$preview</a>
<a name="l174"><span class="linenum"> 174</span></a>                      &amp;&amp; (( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'canonical_item_urls' ) &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' )
<a name="l175"><span class="linenum"> 175</span></a>                                  || <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'relcanonical_item_urls' ) ) )
<a name="l176"><span class="linenum"> 176</span></a>              {    // We want to redirect to the Item's canonical URL:
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>                  <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a> = <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( '', '', '&amp;' );
<a name="l179"><span class="linenum"> 179</span></a>                  if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '|[&amp;?](page=\d+)|', <a class="var it477" onMouseOver="hilite(477)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../_variables/ReqURI.html">$ReqURI</a>, <a class="var it1368" onMouseOver="hilite(1368)" onMouseOut="lolite()" onClick="logVariable('page_param')" href="../../_variables/page_param.html">$page_param</a> ) )
<a name="l180"><span class="linenum"> 180</span></a>                  {    // A certain post page has been requested, keep only this param and discard all others:
<a name="l181"><span class="linenum"> 181</span></a>                      <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, <a class="var it1368" onMouseOver="hilite(1368)" onMouseOut="lolite()" onClick="logVariable('page_param')" href="../../_variables/page_param.html">$page_param</a>[1], '&amp;' );
<a name="l182"><span class="linenum"> 182</span></a>                  }
<a name="l183"><span class="linenum"> 183</span></a>                  if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '|[&amp;?](mode=quote&amp;[qcp]+=\d+)|', <a class="var it477" onMouseOver="hilite(477)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../_variables/ReqURI.html">$ReqURI</a>, <a class="var it1368" onMouseOver="hilite(1368)" onMouseOut="lolite()" onClick="logVariable('page_param')" href="../../_variables/page_param.html">$page_param</a> ) )
<a name="l184"><span class="linenum"> 184</span></a>                  {    // A quote of comment/post, keep only these params and discard all others:
<a name="l185"><span class="linenum"> 185</span></a>                      <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, <a class="var it1368" onMouseOver="hilite(1368)" onMouseOut="lolite()" onClick="logVariable('page_param')" href="../../_variables/page_param.html">$page_param</a>[1], '&amp;' );
<a name="l186"><span class="linenum"> 186</span></a>                  }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>                  if( ! <a class="function" onClick="logFunction('is_same_url')" href="../../_functions/is_same_url.html" onMouseOver="funcPopup(event,'is_same_url')">is_same_url</a>( <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a> ) )
<a name="l189"><span class="linenum"> 189</span></a>                  {    // The requested URL does not look like the canonical URL for this post...
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">                    // url difference was resolved</span>
<a name="l191"><span class="linenum"> 191</span></a>                      <a class="var it2207" onMouseOver="hilite(2207)" onMouseOut="lolite()" onClick="logVariable('url_resolved')" href="../../_variables/url_resolved.html">$url_resolved</a> = false;
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">                    // Check if the difference is because of an allowed post navigation param</span>
<a name="l193"><span class="linenum"> 193</span></a>                      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '|[&amp;?]cat=(\d+)|', <a class="var it477" onMouseOver="hilite(477)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../_variables/ReqURI.html">$ReqURI</a>, <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('cat_param')" href="../../_variables/cat_param.html">$cat_param</a> ) )
<a name="l194"><span class="linenum"> 194</span></a>                      { // A category post navigation param is set
<a name="l195"><span class="linenum"> 195</span></a>                          <a class="var it2209" onMouseOver="hilite(2209)" onMouseOut="lolite()" onClick="logVariable('extended_url')" href="../../_variables/extended_url.html">$extended_url</a> = '';
<a name="l196"><span class="linenum"> 196</span></a>                          if( ( <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a> == 'same_category' ) &amp;&amp; ( isset( <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('cat_param')" href="../../_variables/cat_param.html">$cat_param</a>[1] ) ) )
<a name="l197"><span class="linenum"> 197</span></a>                          { // navigatie through posts from the same category
<a name="l198"><span class="linenum"> 198</span></a>                              <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('category_ids')" href="../../_variables/category_ids.html">$category_ids</a> = <a class="function" onClick="logFunction('postcats_get_byID')" href="../../_functions/postcats_get_byid.html" onMouseOver="funcPopup(event,'postcats_get_byid')">postcats_get_byID</a>( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l199"><span class="linenum"> 199</span></a>                              if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('cat_param')" href="../../_variables/cat_param.html">$cat_param</a>[1], <a class="var it2210" onMouseOver="hilite(2210)" onMouseOut="lolite()" onClick="logVariable('category_ids')" href="../../_variables/category_ids.html">$category_ids</a> ) )
<a name="l200"><span class="linenum"> 200</span></a>                              { // cat param is one of this Item categories
<a name="l201"><span class="linenum"> 201</span></a>                                  <a class="var it2209" onMouseOver="hilite(2209)" onMouseOut="lolite()" onClick="logVariable('extended_url')" href="../../_variables/extended_url.html">$extended_url</a> = <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('add_navigation_param')" href="../../_functions/add_navigation_param.html" onMouseOver="funcPopup(event,'add_navigation_param')">add_navigation_param</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a>, <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('cat_param')" href="../../_variables/cat_param.html">$cat_param</a>[1], '&amp;' );
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">                                // Set MainList navigation target to the requested category</span>
<a name="l203"><span class="linenum"> 203</span></a>                                  <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('nav_target')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../_variables/nav_target.html">nav_target</a> = <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('cat_param')" href="../../_variables/cat_param.html">$cat_param</a>[1];
<a name="l204"><span class="linenum"> 204</span></a>                              }
<a name="l205"><span class="linenum"> 205</span></a>                          }
<a name="l206"><span class="linenum"> 206</span></a>                          <a class="var it2207" onMouseOver="hilite(2207)" onMouseOut="lolite()" onClick="logVariable('url_resolved')" href="../../_variables/url_resolved.html">$url_resolved</a> = <a class="function" onClick="logFunction('is_same_url')" href="../../_functions/is_same_url.html" onMouseOver="funcPopup(event,'is_same_url')">is_same_url</a>( <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it2209" onMouseOver="hilite(2209)" onMouseOut="lolite()" onClick="logVariable('extended_url')" href="../../_variables/extended_url.html">$extended_url</a> );
<a name="l207"><span class="linenum"> 207</span></a>                      }
<a name="l208"><span class="linenum"> 208</span></a>                      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '|[&amp;?]tag=([^&amp;A-Z]+)|', <a class="var it477" onMouseOver="hilite(477)" onMouseOut="lolite()" onClick="logVariable('ReqURI')" href="../../_variables/ReqURI.html">$ReqURI</a>, <a class="var it2211" onMouseOver="hilite(2211)" onMouseOut="lolite()" onClick="logVariable('tag_param')" href="../../_variables/tag_param.html">$tag_param</a> ) )
<a name="l209"><span class="linenum"> 209</span></a>                      { // A tag post navigation param is set
<a name="l210"><span class="linenum"> 210</span></a>                          <a class="var it2209" onMouseOver="hilite(2209)" onMouseOut="lolite()" onClick="logVariable('extended_url')" href="../../_variables/extended_url.html">$extended_url</a> = '';
<a name="l211"><span class="linenum"> 211</span></a>                          if( ( <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a> == 'same_tag' ) &amp;&amp; ( isset( <a class="var it2211" onMouseOver="hilite(2211)" onMouseOut="lolite()" onClick="logVariable('tag_param')" href="../../_variables/tag_param.html">$tag_param</a>[1] ) ) )
<a name="l212"><span class="linenum"> 212</span></a>                          { // navigatie through posts from the same tag
<a name="l213"><span class="linenum"> 213</span></a>                              <a class="var it1411" onMouseOver="hilite(1411)" onMouseOut="lolite()" onClick="logVariable('tag_names')" href="../../_variables/tag_names.html">$tag_names</a> = <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_tags')" href="../../_functions/get_tags.html" onMouseOver="funcPopup(event,'get_tags')">get_tags</a>();
<a name="l214"><span class="linenum"> 214</span></a>                              if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it2211" onMouseOver="hilite(2211)" onMouseOut="lolite()" onClick="logVariable('tag_param')" href="../../_variables/tag_param.html">$tag_param</a>[1], <a class="var it1411" onMouseOver="hilite(1411)" onMouseOut="lolite()" onClick="logVariable('tag_names')" href="../../_variables/tag_names.html">$tag_names</a> ) )
<a name="l215"><span class="linenum"> 215</span></a>                              { // tag param is one of this Item tags
<a name="l216"><span class="linenum"> 216</span></a>                                  <a class="var it2209" onMouseOver="hilite(2209)" onMouseOut="lolite()" onClick="logVariable('extended_url')" href="../../_variables/extended_url.html">$extended_url</a> = <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('add_navigation_param')" href="../../_functions/add_navigation_param.html" onMouseOver="funcPopup(event,'add_navigation_param')">add_navigation_param</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a>, <a class="var it2211" onMouseOver="hilite(2211)" onMouseOut="lolite()" onClick="logVariable('tag_param')" href="../../_variables/tag_param.html">$tag_param</a>[1], '&amp;' );
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">                                // Set MainList navigation target to the requested tag</span>
<a name="l218"><span class="linenum"> 218</span></a>                                  <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('nav_target')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../_variables/nav_target.html">nav_target</a> = <a class="var it2211" onMouseOver="hilite(2211)" onMouseOut="lolite()" onClick="logVariable('tag_param')" href="../../_variables/tag_param.html">$tag_param</a>[1];
<a name="l219"><span class="linenum"> 219</span></a>                              }
<a name="l220"><span class="linenum"> 220</span></a>                          }
<a name="l221"><span class="linenum"> 221</span></a>                          <a class="var it2207" onMouseOver="hilite(2207)" onMouseOut="lolite()" onClick="logVariable('url_resolved')" href="../../_variables/url_resolved.html">$url_resolved</a> = <a class="function" onClick="logFunction('is_same_url')" href="../../_functions/is_same_url.html" onMouseOver="funcPopup(event,'is_same_url')">is_same_url</a>( <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it2209" onMouseOver="hilite(2209)" onMouseOut="lolite()" onClick="logVariable('extended_url')" href="../../_variables/extended_url.html">$extended_url</a> );
<a name="l222"><span class="linenum"> 222</span></a>                      }
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>                      if( !<a class="var it2207" onMouseOver="hilite(2207)" onMouseOut="lolite()" onClick="logVariable('url_resolved')" href="../../_variables/url_resolved.html">$url_resolved</a> &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'canonical_item_urls' ) &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' &amp;&amp; ( ! <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('check_cross_post_nav')" href="../../_functions/check_cross_post_nav.html" onMouseOver="funcPopup(event,'check_cross_post_nav')">check_cross_post_nav</a>( 'auto', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) ) )
<a name="l225"><span class="linenum"> 225</span></a>                      {    // REDIRECT TO THE CANONICAL URL:
<a name="l226"><span class="linenum"> 226</span></a>                          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Redirecting to canonical URL ['.<a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>.'].' );
<a name="l227"><span class="linenum"> 227</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, true );
<a name="l228"><span class="linenum"> 228</span></a>                      }
<a name="l229"><span class="linenum"> 229</span></a>                      else
<a name="l230"><span class="linenum"> 230</span></a>                      {    // Use rel=&quot;canoncial&quot;:
<a name="l231"><span class="linenum"> 231</span></a>                          <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>( '&lt;link rel=&quot;canonical&quot; href=&quot;'.<a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>.'&quot; /&gt;' );
<a name="l232"><span class="linenum"> 232</span></a>                      }
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">                    // EXITED.</span>
<a name="l234"><span class="linenum"> 234</span></a>                  }
<a name="l235"><span class="linenum"> 235</span></a>              }
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>              if( ! <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('result_num_rows')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../_variables/result_num_rows.html">result_num_rows</a> )
<a name="l238"><span class="linenum"> 238</span></a>              {    // There is nothing to display for this page, don't index it!
<a name="l239"><span class="linenum"> 239</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l240"><span class="linenum"> 240</span></a>              }
<a name="l241"><span class="linenum"> 241</span></a>              break;
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>          case 'download':
<a name="l244"><span class="linenum"> 244</span></a>              if( empty( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) )
<a name="l245"><span class="linenum"> 245</span></a>              { // No Item, incorrect request and incorrect state of the application, a 404 redirect should have already happened
<a name="l246"><span class="linenum"> 246</span></a>                  <a class="function" onClick="logFunction('debug_die')" href="../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid page URL!' );
<a name="l247"><span class="linenum"> 247</span></a>              }
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>              <a class="var it2212" onMouseOver="hilite(2212)" onMouseOut="lolite()" onClick="logVariable('download_link_ID')" href="../../_variables/download_link_ID.html">$download_link_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'download', 'integer', 0 );
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">            // Check if we can allow to download the selected file</span>
<a name="l252"><span class="linenum"> 252</span></a>              <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('LinkCache')" href="../../_variables/LinkCache.html">$LinkCache</a> = &amp; get_LinkCache();
<a name="l253"><span class="linenum"> 253</span></a>              if( ! (
<a name="l254"><span class="linenum"> 254</span></a>                  ( <a class="var it2213" onMouseOver="hilite(2213)" onMouseOut="lolite()" onClick="logVariable('download_Link')" href="../../_variables/download_Link.html">$download_Link</a> = &amp; <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('LinkCache')" href="../../_variables/LinkCache.html">$LinkCache</a>-&gt;get_by_ID( <a class="var it2212" onMouseOver="hilite(2212)" onMouseOut="lolite()" onClick="logVariable('download_link_ID')" href="../../_variables/download_link_ID.html">$download_link_ID</a>, false, false ) ) &amp;&amp; // Link exists in DB
<a name="l255"><span class="linenum"> 255</span></a>                  ( <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('LinkItem')" href="../../_variables/LinkItem.html">$LinkItem</a> = &amp; <a class="var it2213" onMouseOver="hilite(2213)" onMouseOut="lolite()" onClick="logVariable('download_Link')" href="../../_variables/download_Link.html">$download_Link</a>-&gt;get_LinkOwner() ) &amp;&amp; // Link has an owner object
<a name="l256"><span class="linenum"> 256</span></a>                  ( <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('LinkItem')" href="../../_variables/LinkItem.html">$LinkItem</a>-&gt;<a onClick="logVariable('Item')" class="var it10737" onMouseOver="hilite(10737)" onMouseOut="lolite()" href="../../_variables/Item.html">Item</a> &amp;&amp; <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('LinkItem')" href="../../_variables/LinkItem.html">$LinkItem</a>-&gt;<a onClick="logVariable('Item')" class="var it10737" onMouseOver="hilite(10737)" onMouseOut="lolite()" href="../../_variables/Item.html">Item</a>-&gt;ID == <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) &amp;&amp; // Link is attached to this Item
<a name="l257"><span class="linenum"> 257</span></a>                  ( <a class="var it2215" onMouseOver="hilite(2215)" onMouseOut="lolite()" onClick="logVariable('download_File')" href="../../_variables/download_File.html">$download_File</a> = &amp; <a class="var it2213" onMouseOver="hilite(2213)" onMouseOut="lolite()" onClick="logVariable('download_Link')" href="../../_variables/download_Link.html">$download_Link</a>-&gt;get_File() ) &amp;&amp; // Link has a correct File object
<a name="l258"><span class="linenum"> 258</span></a>                  ( <a class="var it2215" onMouseOver="hilite(2215)" onMouseOut="lolite()" onClick="logVariable('download_File')" href="../../_variables/download_File.html">$download_File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() ) // File exists on the disk
<a name="l259"><span class="linenum"> 259</span></a>                ) )
<a name="l260"><span class="linenum"> 260</span></a>              { // Bad request, Redirect to Item permanent url
<a name="l261"><span class="linenum"> 261</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The requested file is not available for download.' ), 'error' );
<a name="l262"><span class="linenum"> 262</span></a>                  <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a> = <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( '', '', '&amp;' );
<a name="l263"><span class="linenum"> 263</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Redirecting to canonical URL ['.<a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>.'].' );
<a name="l264"><span class="linenum"> 264</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, true );
<a name="l265"><span class="linenum"> 265</span></a>              }
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">            // Save the downloading Link to the global vars</span>
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['download_Link'] = &amp; <a class="var it2213" onMouseOver="hilite(2213)" onMouseOut="lolite()" onClick="logVariable('download_Link')" href="../../_variables/download_Link.html">$download_Link</a>;
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">            // Save global $Item to $download_Item, because $Item can be rewritten by function get_featured_Item() in some skins</span>
<a name="l270"><span class="linenum"> 270</span></a>              <a class="var it575" onMouseOver="hilite(575)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['download_Item'] = &amp; <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>;
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>              <a class="function" onClick="logFunction('init_ajax_forms')" href="../../_functions/init_ajax_forms.html" onMouseOver="funcPopup(event,'init_ajax_forms')">init_ajax_forms</a>( 'blog' ); <span class="comment">// auto requires jQuery</span>
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">            // Initialize JavaScript to download file after X seconds</span>
<a name="l275"><span class="linenum"> 275</span></a>              <a class="function" onClick="logFunction('add_js_headline')" href="../../_functions/add_js_headline.html" onMouseOver="funcPopup(event,'add_js_headline')">add_js_headline</a>( '
<a name="l276"><span class="linenum"> 276</span></a>  jQuery( document ).ready( function ()
<a name="l277"><span class="linenum"> 277</span></a>  {
<a name="l278"><span class="linenum"> 278</span></a>      jQuery( &quot;#download_timer_js&quot; ).<a class="function" onClick="logFunction('show')" href="../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l279"><span class="linenum"> 279</span></a>  } );
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>  var b2evo_download_timer = '.<a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'download_delay' ) ).';
<a name="l282"><span class="linenum"> 282</span></a>  var downloadInterval = setInterval( function()
<a name="l283"><span class="linenum"> 283</span></a>  {
<a name="l284"><span class="linenum"> 284</span></a>      jQuery( &quot;#download_timer&quot; ).html( b2evo_download_timer );
<a name="l285"><span class="linenum"> 285</span></a>      if( b2evo_download_timer == 0 )
<a name="l286"><span class="linenum"> 286</span></a>      { // Stop timer and download a file
<a name="l287"><span class="linenum"> 287</span></a>          clearInterval( downloadInterval );
<a name="l288"><span class="linenum"> 288</span></a>          jQuery( &quot;#download_help_url&quot; ).<a class="function" onClick="logFunction('show')" href="../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l289"><span class="linenum"> 289</span></a>      }
<a name="l290"><span class="linenum"> 290</span></a>      b2evo_download_timer--;
<a name="l291"><span class="linenum"> 291</span></a>  }, 1000 );' );
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">            // Use meta tag to download file when JavaScript is NOT enabled</span>
<a name="l294"><span class="linenum"> 294</span></a>              <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>( '&lt;meta http-equiv=&quot;refresh&quot; content=&quot;'.<a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'download_delay' ) )
<a name="l295"><span class="linenum"> 295</span></a>                  .'; url='.<a class="var it2213" onMouseOver="hilite(2213)" onMouseOut="lolite()" onClick="logVariable('download_Link')" href="../../_variables/download_Link.html">$download_Link</a>-&gt;<a class="function" onClick="logFunction('get_download_url')" href="../../_functions/get_download_url.html" onMouseOver="funcPopup(event,'get_download_url')">get_download_url</a>( array( 'type' =&gt; 'action' ) ).'&quot; /&gt;' );
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Download page';
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_noindex' ) )
<a name="l300"><span class="linenum"> 300</span></a>              { // We prefer robots not to index these pages:
<a name="l301"><span class="linenum"> 301</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l302"><span class="linenum"> 302</span></a>              }
<a name="l303"><span class="linenum"> 303</span></a>              break;
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>          case 'posts':
<a name="l306"><span class="linenum"> 306</span></a>              <a class="function" onClick="logFunction('init_ajax_forms')" href="../../_functions/init_ajax_forms.html" onMouseOver="funcPopup(event,'init_ajax_forms')">init_ajax_forms</a>( 'blog' ); <span class="comment">// auto requires jQuery</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">            // fp&gt; if we add this here, we have to exetnd the inner if()</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">            // init_ratings_js( 'blog' );</span>
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">            // Get list of active filters:</span>
<a name="l311"><span class="linenum"> 311</span></a>              <a class="var it2216" onMouseOver="hilite(2216)" onMouseOut="lolite()" onClick="logVariable('active_filters')" href="../../_variables/active_filters.html">$active_filters</a> = <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_active_filters')" href="../../_functions/get_active_filters.html" onMouseOver="funcPopup(event,'get_active_filters')">get_active_filters</a>();
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>              if( !empty(<a class="var it2216" onMouseOver="hilite(2216)" onMouseOut="lolite()" onClick="logVariable('active_filters')" href="../../_variables/active_filters.html">$active_filters</a>) )
<a name="l314"><span class="linenum"> 314</span></a>              {    // The current page is being filtered...
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>                  if( <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it2216" onMouseOver="hilite(2216)" onMouseOut="lolite()" onClick="logVariable('active_filters')" href="../../_variables/active_filters.html">$active_filters</a>, array( 'page' ) ) == array() )
<a name="l317"><span class="linenum"> 317</span></a>                  { // This is just a follow &quot;paged&quot; page
<a name="l318"><span class="linenum"> 318</span></a>                      <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> = 'posts-next';
<a name="l319"><span class="linenum"> 319</span></a>                      <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Next page';
<a name="l320"><span class="linenum"> 320</span></a>                      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'paged_noindex' ) )
<a name="l321"><span class="linenum"> 321</span></a>                      {    // We prefer robots not to index category pages:
<a name="l322"><span class="linenum"> 322</span></a>                          <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l323"><span class="linenum"> 323</span></a>                      }
<a name="l324"><span class="linenum"> 324</span></a>                  }
<a name="l325"><span class="linenum"> 325</span></a>                  elseif( <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it2216" onMouseOver="hilite(2216)" onMouseOut="lolite()" onClick="logVariable('active_filters')" href="../../_variables/active_filters.html">$active_filters</a>, array( 'cat_array', 'cat_modifier', 'cat_focus', 'posts', 'page' ) ) == array() )
<a name="l326"><span class="linenum"> 326</span></a>                  { // This is a category page
<a name="l327"><span class="linenum"> 327</span></a>                      <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> = 'posts-cat';
<a name="l328"><span class="linenum"> 328</span></a>                      <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Category page';
<a name="l329"><span class="linenum"> 329</span></a>                      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'chapter_noindex' ) )
<a name="l330"><span class="linenum"> 330</span></a>                      {    // We prefer robots not to index category pages:
<a name="l331"><span class="linenum"> 331</span></a>                          <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l332"><span class="linenum"> 332</span></a>                      }
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>                      global <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../_variables/cat.html">$cat</a>, <a class="var it991" onMouseOver="hilite(991)" onMouseOut="lolite()" onClick="logVariable('catsel')" href="../../_variables/catsel.html">$catsel</a>;
<a name="l335"><span class="linenum"> 335</span></a>                      if( empty( <a class="var it991" onMouseOver="hilite(991)" onMouseOut="lolite()" onClick="logVariable('catsel')" href="../../_variables/catsel.html">$catsel</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~^[0-9]+$~', <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../_variables/cat.html">$cat</a> ) )
<a name="l336"><span class="linenum"> 336</span></a>                      {    // We are on a single cat page:
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">                        // NOTE: we must have selected EXACTLY ONE CATEGORY through the cat parameter</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">                        // BUT: - this can resolve to including children</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">                        //      - selecting exactly one cat through catsel[] is NOT OK since not equivalent (will exclude children)</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">                        // echo 'SINGLE CAT PAGE';</span>
<a name="l341"><span class="linenum"> 341</span></a>                          if( ( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'canonical_cat_urls' ) &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' )
<a name="l342"><span class="linenum"> 342</span></a>                              || <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'relcanonical_cat_urls' ) )
<a name="l343"><span class="linenum"> 343</span></a>                          { // Check if the URL was canonical:
<a name="l344"><span class="linenum"> 344</span></a>                              if( !isset( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a> ) )
<a name="l345"><span class="linenum"> 345</span></a>                              {
<a name="l346"><span class="linenum"> 346</span></a>                                  <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l347"><span class="linenum"> 347</span></a>                                  <span class="comment">/**</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">                                 * @var Chapter</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">                                 */</span>
<a name="l350"><span class="linenum"> 350</span></a>                                  <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('filters')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../_variables/filters.html">filters</a>['cat_array'][0], false );
<a name="l351"><span class="linenum"> 351</span></a>                              }
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>                              if( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a> )
<a name="l354"><span class="linenum"> 354</span></a>                              {
<a name="l355"><span class="linenum"> 355</span></a>                                  if( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('parent_ID')" class="var it10738" onMouseOver="hilite(10738)" onMouseOut="lolite()" href="../../_variables/parent_ID.html">parent_ID</a> )
<a name="l356"><span class="linenum"> 356</span></a>                                  {    // This is a sub-category page (i-e: not a level 1 category)
<a name="l357"><span class="linenum"> 357</span></a>                                      <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> = 'posts-subcat';
<a name="l358"><span class="linenum"> 358</span></a>                                  }
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>                                  <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a> = <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( NULL, NULL, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_active_filter')" href="../../_functions/get_active_filter.html" onMouseOver="funcPopup(event,'get_active_filter')">get_active_filter</a>('page'), NULL, '&amp;' );
<a name="l361"><span class="linenum"> 361</span></a>                                  if( ! <a class="function" onClick="logFunction('is_same_url')" href="../../_functions/is_same_url.html" onMouseOver="funcPopup(event,'is_same_url')">is_same_url</a>(<a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>) )
<a name="l362"><span class="linenum"> 362</span></a>                                  {    // fp&gt; TODO: we're going to lose the additional params, it would be better to keep them...
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">                                    // fp&gt; what additional params actually?</span>
<a name="l364"><span class="linenum"> 364</span></a>                                      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'canonical_cat_urls' ) &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' )
<a name="l365"><span class="linenum"> 365</span></a>                                      {    // REDIRECT TO THE CANONICAL URL:
<a name="l366"><span class="linenum"> 366</span></a>                                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, true );
<a name="l367"><span class="linenum"> 367</span></a>                                      }
<a name="l368"><span class="linenum"> 368</span></a>                                      else
<a name="l369"><span class="linenum"> 369</span></a>                                      {    // Use rel=&quot;canonical&quot;:
<a name="l370"><span class="linenum"> 370</span></a>                                          <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>( '&lt;link rel=&quot;canonical&quot; href=&quot;'.<a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>.'&quot; /&gt;' );
<a name="l371"><span class="linenum"> 371</span></a>                                      }
<a name="l372"><span class="linenum"> 372</span></a>                                  }
<a name="l373"><span class="linenum"> 373</span></a>                              }
<a name="l374"><span class="linenum"> 374</span></a>                              else
<a name="l375"><span class="linenum"> 375</span></a>                              { // If the requested chapter was not found display 404 page
<a name="l376"><span class="linenum"> 376</span></a>                                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The requested chapter was not found') );
<a name="l377"><span class="linenum"> 377</span></a>                                  global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l378"><span class="linenum"> 378</span></a>                                  <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = '404';
<a name="l379"><span class="linenum"> 379</span></a>                                  break;
<a name="l380"><span class="linenum"> 380</span></a>                              }
<a name="l381"><span class="linenum"> 381</span></a>                          }
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>                          if( <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a> == 'same_category' )
<a name="l384"><span class="linenum"> 384</span></a>                          { // Category is set and post navigation should go through the same category, set navigation target param
<a name="l385"><span class="linenum"> 385</span></a>                              <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('nav_target')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../_variables/nav_target.html">nav_target</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../_variables/cat.html">$cat</a>;
<a name="l386"><span class="linenum"> 386</span></a>                          }
<a name="l387"><span class="linenum"> 387</span></a>                      }
<a name="l388"><span class="linenum"> 388</span></a>                  }
<a name="l389"><span class="linenum"> 389</span></a>                  elseif( <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it2216" onMouseOver="hilite(2216)" onMouseOut="lolite()" onClick="logVariable('active_filters')" href="../../_variables/active_filters.html">$active_filters</a>, array( 'tags', 'posts', 'page' ) ) == array() )
<a name="l390"><span class="linenum"> 390</span></a>                  { // This is a tag page
<a name="l391"><span class="linenum"> 391</span></a>                      <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> = 'posts-tag';
<a name="l392"><span class="linenum"> 392</span></a>                      <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Tag page';
<a name="l393"><span class="linenum"> 393</span></a>                      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'tag_noindex' ) )
<a name="l394"><span class="linenum"> 394</span></a>                      {    // We prefer robots not to index tag pages:
<a name="l395"><span class="linenum"> 395</span></a>                          <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l396"><span class="linenum"> 396</span></a>                      }
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>                      if( ( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'canonical_tag_urls' ) &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' )
<a name="l399"><span class="linenum"> 399</span></a>                              || <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'relcanonical_tag_urls' ) )
<a name="l400"><span class="linenum"> 400</span></a>                      { // Check if the URL was canonical:
<a name="l401"><span class="linenum"> 401</span></a>                          <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_tag_url')" href="../../_functions/gen_tag_url.html" onMouseOver="funcPopup(event,'gen_tag_url')">gen_tag_url</a>( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_active_filter')" href="../../_functions/get_active_filter.html" onMouseOver="funcPopup(event,'get_active_filter')">get_active_filter</a>('tags'), <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_active_filter')" href="../../_functions/get_active_filter.html" onMouseOver="funcPopup(event,'get_active_filter')">get_active_filter</a>('page'), '&amp;' );
<a name="l402"><span class="linenum"> 402</span></a>                          if( ! <a class="function" onClick="logFunction('is_same_url')" href="../../_functions/is_same_url.html" onMouseOver="funcPopup(event,'is_same_url')">is_same_url</a>(<a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>) )
<a name="l403"><span class="linenum"> 403</span></a>                          {
<a name="l404"><span class="linenum"> 404</span></a>                              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'canonical_tag_urls' ) &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' )
<a name="l405"><span class="linenum"> 405</span></a>                              {    // REDIRECT TO THE CANONICAL URL:
<a name="l406"><span class="linenum"> 406</span></a>                                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, true );
<a name="l407"><span class="linenum"> 407</span></a>                              }
<a name="l408"><span class="linenum"> 408</span></a>                              else
<a name="l409"><span class="linenum"> 409</span></a>                              {    // Use rel=&quot;canoncial&quot;:
<a name="l410"><span class="linenum"> 410</span></a>                                  <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>( '&lt;link rel=&quot;canonical&quot; href=&quot;'.<a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>.'&quot; /&gt;' );
<a name="l411"><span class="linenum"> 411</span></a>                              }
<a name="l412"><span class="linenum"> 412</span></a>                          }
<a name="l413"><span class="linenum"> 413</span></a>                      }
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>                      <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a> = <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_active_filter')" href="../../_functions/get_active_filter.html" onMouseOver="funcPopup(event,'get_active_filter')">get_active_filter</a>('tags');
<a name="l416"><span class="linenum"> 416</span></a>                      if( <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../_variables/post_navigation.html">$post_navigation</a> == 'same_tag' &amp;&amp; !empty( <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a> ) )
<a name="l417"><span class="linenum"> 417</span></a>                      { // Tag is set and post navigation should go through the same tag, set navigation target param
<a name="l418"><span class="linenum"> 418</span></a>                          <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('nav_target')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../_variables/nav_target.html">nav_target</a> = <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>;
<a name="l419"><span class="linenum"> 419</span></a>                      }
<a name="l420"><span class="linenum"> 420</span></a>                  }
<a name="l421"><span class="linenum"> 421</span></a>                  elseif( <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it2216" onMouseOver="hilite(2216)" onMouseOut="lolite()" onClick="logVariable('active_filters')" href="../../_variables/active_filters.html">$active_filters</a>, array( 'ymdhms', 'week', 'posts', 'page' ) ) == array() ) // fp&gt; added 'posts' 2009-05-19; can't remember why it's not in there
<a name="l422"><span class="linenum"> 422</span></a>                  { // This is an archive page
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">                    // echo 'archive page';</span>
<a name="l424"><span class="linenum"> 424</span></a>                      <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> = 'posts-date';
<a name="l425"><span class="linenum"> 425</span></a>                      <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Date archive page';
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>                      if( (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'canonical_archive_urls' ) &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' )
<a name="l428"><span class="linenum"> 428</span></a>                              || <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'relcanonical_archive_urls' ) )
<a name="l429"><span class="linenum"> 429</span></a>                      { // Check if the URL was canonical:
<a name="l430"><span class="linenum"> 430</span></a>                          <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a> =  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_archive_url')" href="../../_functions/gen_archive_url.html" onMouseOver="funcPopup(event,'gen_archive_url')">gen_archive_url</a>( <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../_variables/m.html">$m</a>, 0, 4 ), <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../_variables/m.html">$m</a>, 4, 2 ), <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it73" onMouseOver="hilite(73)" onMouseOut="lolite()" onClick="logVariable('m')" href="../../_variables/m.html">$m</a>, 6, 2 ), <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../_variables/w.html">$w</a>, '&amp;', <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_active_filter')" href="../../_functions/get_active_filter.html" onMouseOver="funcPopup(event,'get_active_filter')">get_active_filter</a>('page') );
<a name="l431"><span class="linenum"> 431</span></a>                          if( ! <a class="function" onClick="logFunction('is_same_url')" href="../../_functions/is_same_url.html" onMouseOver="funcPopup(event,'is_same_url')">is_same_url</a>(<a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>) )
<a name="l432"><span class="linenum"> 432</span></a>                          {
<a name="l433"><span class="linenum"> 433</span></a>                              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'canonical_archive_urls' ) &amp;&amp; <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('redir')" href="../../_variables/redir.html">$redir</a> == 'yes' )
<a name="l434"><span class="linenum"> 434</span></a>                              {    // REDIRECT TO THE CANONICAL URL:
<a name="l435"><span class="linenum"> 435</span></a>                                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>, true );
<a name="l436"><span class="linenum"> 436</span></a>                              }
<a name="l437"><span class="linenum"> 437</span></a>                              else
<a name="l438"><span class="linenum"> 438</span></a>                              {    // Use rel=&quot;canoncial&quot;:
<a name="l439"><span class="linenum"> 439</span></a>                                  <a class="function" onClick="logFunction('add_headline')" href="../../_functions/add_headline.html" onMouseOver="funcPopup(event,'add_headline')">add_headline</a>( '&lt;link rel=&quot;canonical&quot; href=&quot;'.<a class="var it2206" onMouseOver="hilite(2206)" onMouseOut="lolite()" onClick="logVariable('canonical_url')" href="../../_variables/canonical_url.html">$canonical_url</a>.'&quot; /&gt;' );
<a name="l440"><span class="linenum"> 440</span></a>                              }
<a name="l441"><span class="linenum"> 441</span></a>                          }
<a name="l442"><span class="linenum"> 442</span></a>                      }
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>                      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'archive_noindex' ) )
<a name="l445"><span class="linenum"> 445</span></a>                      {    // We prefer robots not to index archive pages:
<a name="l446"><span class="linenum"> 446</span></a>                          <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l447"><span class="linenum"> 447</span></a>                      }
<a name="l448"><span class="linenum"> 448</span></a>                  }
<a name="l449"><span class="linenum"> 449</span></a>                  else
<a name="l450"><span class="linenum"> 450</span></a>                  {    // Other filtered pages:
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">                    // pre_dump( $active_filters );</span>
<a name="l452"><span class="linenum"> 452</span></a>                      <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> = 'posts-filtered';
<a name="l453"><span class="linenum"> 453</span></a>                      <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Other filtered page';
<a name="l454"><span class="linenum"> 454</span></a>                      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'filtered_noindex' ) )
<a name="l455"><span class="linenum"> 455</span></a>                      {    // We prefer robots not to index other filtered pages:
<a name="l456"><span class="linenum"> 456</span></a>                          <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l457"><span class="linenum"> 457</span></a>                      }
<a name="l458"><span class="linenum"> 458</span></a>                  }
<a name="l459"><span class="linenum"> 459</span></a>              }
<a name="l460"><span class="linenum"> 460</span></a>              elseif( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('front_disp') == 'posts' )
<a name="l461"><span class="linenum"> 461</span></a>              {    // This is the default blog page only if the 'front_disp' is set to 'posts'
<a name="l462"><span class="linenum"> 462</span></a>                  <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> = 'posts-default';
<a name="l463"><span class="linenum"> 463</span></a>                  <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Default page';
<a name="l464"><span class="linenum"> 464</span></a>                  if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'default_noindex' ) )
<a name="l465"><span class="linenum"> 465</span></a>                  {    // We prefer robots not to index archive pages:
<a name="l466"><span class="linenum"> 466</span></a>                      <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l467"><span class="linenum"> 467</span></a>                  }
<a name="l468"><span class="linenum"> 468</span></a>              }
<a name="l469"><span class="linenum"> 469</span></a>              break;
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>          case 'search':
<a name="l472"><span class="linenum"> 472</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Search page';
<a name="l473"><span class="linenum"> 473</span></a>              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'filtered_noindex' ) )
<a name="l474"><span class="linenum"> 474</span></a>              {    // We prefer robots not to index these pages:
<a name="l475"><span class="linenum"> 475</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l476"><span class="linenum"> 476</span></a>              }
<a name="l477"><span class="linenum"> 477</span></a>              break;
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">        // SPECIAL FEATURE PAGES:</span>
<a name="l480"><span class="linenum"> 480</span></a>          case 'feedback-popup':
<a name="l481"><span class="linenum"> 481</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Comment popup';
<a name="l482"><span class="linenum"> 482</span></a>              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_noindex' ) )
<a name="l483"><span class="linenum"> 483</span></a>              {    // We prefer robots not to index these pages:
<a name="l484"><span class="linenum"> 484</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l485"><span class="linenum"> 485</span></a>              }
<a name="l486"><span class="linenum"> 486</span></a>              break;
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>          case 'arcdir':
<a name="l489"><span class="linenum"> 489</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Date archive directory';
<a name="l490"><span class="linenum"> 490</span></a>              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_noindex' ) )
<a name="l491"><span class="linenum"> 491</span></a>              {    // We prefer robots not to index these pages:
<a name="l492"><span class="linenum"> 492</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l493"><span class="linenum"> 493</span></a>              }
<a name="l494"><span class="linenum"> 494</span></a>              break;
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>          case 'catdir':
<a name="l497"><span class="linenum"> 497</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Category directory';
<a name="l498"><span class="linenum"> 498</span></a>              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_noindex' ) )
<a name="l499"><span class="linenum"> 499</span></a>              {    // We prefer robots not to index these pages:
<a name="l500"><span class="linenum"> 500</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l501"><span class="linenum"> 501</span></a>              }
<a name="l502"><span class="linenum"> 502</span></a>              break;
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>          case 'msgform':
<a name="l505"><span class="linenum"> 505</span></a>              global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">            // get expected message form type</span>
<a name="l508"><span class="linenum"> 508</span></a>              <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../_variables/msg_type.html">$msg_type</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'msg_type', 'string', '' );
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">            // initialize</span>
<a name="l510"><span class="linenum"> 510</span></a>              <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a> = NULL;
<a name="l511"><span class="linenum"> 511</span></a>              <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a> = NULL;
<a name="l512"><span class="linenum"> 512</span></a>              <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> = NULL;
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">            // get possible params</span>
<a name="l515"><span class="linenum"> 515</span></a>              <a class="var it410" onMouseOver="hilite(410)" onMouseOut="lolite()" onClick="logVariable('recipient_id')" href="../../_variables/recipient_id.html">$recipient_id</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'recipient_id', 'integer', 0, true );
<a name="l516"><span class="linenum"> 516</span></a>              <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_id', 'integer', 0, true );
<a name="l517"><span class="linenum"> 517</span></a>              <a class="var it411" onMouseOver="hilite(411)" onMouseOut="lolite()" onClick="logVariable('post_id')" href="../../_variables/post_id.html">$post_id</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_id', 'integer', 0, true );
<a name="l518"><span class="linenum"> 518</span></a>              <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'subject', 'string', '' );
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">            // try to init recipient_User</span>
<a name="l521"><span class="linenum"> 521</span></a>              if( !empty( <a class="var it410" onMouseOver="hilite(410)" onMouseOut="lolite()" onClick="logVariable('recipient_id')" href="../../_variables/recipient_id.html">$recipient_id</a> ) )
<a name="l522"><span class="linenum"> 522</span></a>              {
<a name="l523"><span class="linenum"> 523</span></a>                  <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l524"><span class="linenum"> 524</span></a>                  <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it410" onMouseOver="hilite(410)" onMouseOut="lolite()" onClick="logVariable('recipient_id')" href="../../_variables/recipient_id.html">$recipient_id</a> );
<a name="l525"><span class="linenum"> 525</span></a>              }
<a name="l526"><span class="linenum"> 526</span></a>              elseif( !empty( <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a> ) )
<a name="l527"><span class="linenum"> 527</span></a>              { // comment id is set, try to get comment author user
<a name="l528"><span class="linenum"> 528</span></a>                  <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a> = &amp; get_CommentCache();
<a name="l529"><span class="linenum"> 529</span></a>                  <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a> = <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a>-&gt;get_by_ID( <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a>, false );
<a name="l530"><span class="linenum"> 530</span></a>  
<a name="l531"><span class="linenum"> 531</span></a>                  if( <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a> = <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a>-&gt;get_by_ID( <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a>, false ) )
<a name="l532"><span class="linenum"> 532</span></a>                  {
<a name="l533"><span class="linenum"> 533</span></a>                      <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a> = &amp; <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;get_author_User();
<a name="l534"><span class="linenum"> 534</span></a>                      if( empty( <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a> ) &amp;&amp; ( <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a onClick="logVariable('allow_msgform')" class="var it10680" onMouseOver="hilite(10680)" onMouseOut="lolite()" href="../../_variables/allow_msgform.html">allow_msgform</a> ) &amp;&amp; ( <a class="function" onClick="logFunction('is_email')" href="../../_functions/is_email.html" onMouseOver="funcPopup(event,'is_email')">is_email</a>( <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_author_email')" href="../../_functions/get_author_email.html" onMouseOver="funcPopup(event,'get_author_email')">get_author_email</a>() ) ) )
<a name="l535"><span class="linenum"> 535</span></a>                      { // set allow message form to email because comment <a class="function" onClick="logFunction('author')" href="../../_functions/author.html" onMouseOver="funcPopup(event,'author')">author</a> (not registered) accepts email
<a name="l536"><span class="linenum"> 536</span></a>                          <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> = 'email';
<a name="l537"><span class="linenum"> 537</span></a>                          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'recipient_address', 'string', <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_author_email')" href="../../_functions/get_author_email.html" onMouseOver="funcPopup(event,'get_author_email')">get_author_email</a>() );
<a name="l538"><span class="linenum"> 538</span></a>                          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'recipient_name', 'string', <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a class="function" onClick="logFunction('get_author_name')" href="../../_functions/get_author_name.html" onMouseOver="funcPopup(event,'get_author_name')">get_author_name</a>() );
<a name="l539"><span class="linenum"> 539</span></a>                      }
<a name="l540"><span class="linenum"> 540</span></a>                  }
<a name="l541"><span class="linenum"> 541</span></a>              }
<a name="l542"><span class="linenum"> 542</span></a>              else
<a name="l543"><span class="linenum"> 543</span></a>              { // Recipient was not defined, try set the blog owner as recipient
<a name="l544"><span class="linenum"> 544</span></a>                  global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>;
<a name="l545"><span class="linenum"> 545</span></a>                  if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) )
<a name="l546"><span class="linenum"> 546</span></a>                  { // Blog is not set, this is an invalid request
<a name="l547"><span class="linenum"> 547</span></a>                      <a class="function" onClick="logFunction('debug_die')" href="../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid send message request!');
<a name="l548"><span class="linenum"> 548</span></a>                  }
<a name="l549"><span class="linenum"> 549</span></a>                  <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;get_owner_User();
<a name="l550"><span class="linenum"> 550</span></a>              }
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>              if( <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a> )
<a name="l553"><span class="linenum"> 553</span></a>              { // recipient User is set
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">                // get_msgform_possibility returns NULL (false), only if there is no messaging option between current_User and recipient user</span>
<a name="l555"><span class="linenum"> 555</span></a>                  <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> = <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('get_msgform_possibility')" href="../../_functions/get_msgform_possibility.html" onMouseOver="funcPopup(event,'get_msgform_possibility')">get_msgform_possibility</a>();
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>                  if( <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../_variables/msg_type.html">$msg_type</a> == 'email' &amp;&amp; <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('get_msgform_possibility')" href="../../_functions/get_msgform_possibility.html" onMouseOver="funcPopup(event,'get_msgform_possibility')">get_msgform_possibility</a>( NULL, 'email' ) != 'email' )
<a name="l558"><span class="linenum"> 558</span></a>                  { // User doesn't want to receive email messages, Restrict if this was requested by wrong url:
<a name="l559"><span class="linenum"> 559</span></a>                      <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../_variables/msg_type.html">$msg_type</a> = '';
<a name="l560"><span class="linenum"> 560</span></a>                  }
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>                  if( <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == 'login' )
<a name="l563"><span class="linenum"> 563</span></a>                  { // user must login first to be able to send a message to this User
<a name="l564"><span class="linenum"> 564</span></a>                      <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = 'login';
<a name="l565"><span class="linenum"> 565</span></a>                      <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'action', 'string', 'req_login' );
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment">                    // override redirect to param</span>
<a name="l567"><span class="linenum"> 567</span></a>                      <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', <a class="function" onClick="logFunction('regenerate_url')" href="../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>(), true, true );
<a name="l568"><span class="linenum"> 568</span></a>                      if( <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a> = &amp; get_setting_Blog( 'msg_blog_ID' ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10739" onMouseOver="hilite(10739)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l569"><span class="linenum"> 569</span></a>                      { // Redirect to special blog for messaging actions if it is defined in general settings
<a name="l570"><span class="linenum"> 570</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'msgformurl', array( 'glue' =&gt; '&amp;' ) ), 'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ), '&amp;' ) );
<a name="l571"><span class="linenum"> 571</span></a>                      }
<a name="l572"><span class="linenum"> 572</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must log in before you can contact this user' ) );
<a name="l573"><span class="linenum"> 573</span></a>                  }
<a name="l574"><span class="linenum"> 574</span></a>                  elseif( ( <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == 'PM' ) &amp;&amp; <a class="function" onClick="logFunction('check_user_status')" href="../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>( 'can_be_validated' ) )
<a name="l575"><span class="linenum"> 575</span></a>                  { // user is not activated
<a name="l576"><span class="linenum"> 576</span></a>                      if( <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('accepts_email')" href="../../_functions/accepts_email.html" onMouseOver="funcPopup(event,'accepts_email')">accepts_email</a>() )
<a name="l577"><span class="linenum"> 577</span></a>                      { // recipient User accepts email allow to send email
<a name="l578"><span class="linenum"> 578</span></a>                          <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> = 'email';
<a name="l579"><span class="linenum"> 579</span></a>                          <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../_variables/msg_type.html">$msg_type</a> = 'email';
<a name="l580"><span class="linenum"> 580</span></a>                          <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('activateinfo_link')" href="../../_variables/activateinfo_link.html">$activateinfo_link</a> = 'href=&quot;'.<a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>( NULL, '&amp;amp;' ).'&quot;';
<a name="l581"><span class="linenum"> 581</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account before you can send a private message to %s. However you can send them an email if you\'d like. &lt;a %s&gt;More info &amp;raquo;&lt;/a&gt;' ), <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'login' ), <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('activateinfo_link')" href="../../_variables/activateinfo_link.html">$activateinfo_link</a> ), 'warning' );
<a name="l582"><span class="linenum"> 582</span></a>                      }
<a name="l583"><span class="linenum"> 583</span></a>                      else
<a name="l584"><span class="linenum"> 584</span></a>                      { // Redirect to the activate info page for not activated users
<a name="l585"><span class="linenum"> 585</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account before you can contact a user. &lt;b&gt;See below:&lt;/b&gt;' ) );
<a name="l586"><span class="linenum"> 586</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment">                        // will have exited</span>
<a name="l588"><span class="linenum"> 588</span></a>                      }
<a name="l589"><span class="linenum"> 589</span></a>                  }
<a name="l590"><span class="linenum"> 590</span></a>                  elseif( ( <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../_variables/msg_type.html">$msg_type</a> == 'PM' ) &amp;&amp; ( <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == 'email' ) )
<a name="l591"><span class="linenum"> 591</span></a>                  { // only email is allowed but user expect private message form
<a name="l592"><span class="linenum"> 592</span></a>                      if( ( !empty( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a> ) ) &amp;&amp; ( <a class="var it410" onMouseOver="hilite(410)" onMouseOut="lolite()" onClick="logVariable('recipient_id')" href="../../_variables/recipient_id.html">$recipient_id</a> == <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) )
<a name="l593"><span class="linenum"> 593</span></a>                      {
<a name="l594"><span class="linenum"> 594</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You cannot send a private message to yourself. However you can send yourself an email if you\'d like.' ), 'warning' );
<a name="l595"><span class="linenum"> 595</span></a>                      }
<a name="l596"><span class="linenum"> 596</span></a>                      else
<a name="l597"><span class="linenum"> 597</span></a>                      {
<a name="l598"><span class="linenum"> 598</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You cannot send a private message to %s. However you can send them an email if you\'d like.' ), <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'login' ) ), 'warning' );
<a name="l599"><span class="linenum"> 599</span></a>                      }
<a name="l600"><span class="linenum"> 600</span></a>                  }
<a name="l601"><span class="linenum"> 601</span></a>                  elseif( ( <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../_variables/msg_type.html">$msg_type</a> != 'email' ) &amp;&amp; ( <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == 'PM' ) )
<a name="l602"><span class="linenum"> 602</span></a>                  { // private message form should be displayed, change display to create new individual thread with the given recipient user
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">                    // check if creating new PM is allowed</span>
<a name="l604"><span class="linenum"> 604</span></a>                      if( <a class="function" onClick="logFunction('check_create_thread_limit')" href="../../_functions/check_create_thread_limit.html" onMouseOver="funcPopup(event,'check_create_thread_limit')">check_create_thread_limit</a>( true ) )
<a name="l605"><span class="linenum"> 605</span></a>                      { // thread limit reached
<a name="l606"><span class="linenum"> 606</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>();
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment">                        // exited here</span>
<a name="l608"><span class="linenum"> 608</span></a>                      }
<a name="l609"><span class="linenum"> 609</span></a>  
<a name="l610"><span class="linenum"> 610</span></a>                      global <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>, <a class="var it2220" onMouseOver="hilite(2220)" onMouseOut="lolite()" onClick="logVariable('recipients_selected')" href="../../_variables/recipients_selected.html">$recipients_selected</a>;
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">                    // Load classes</span>
<a name="l613"><span class="linenum"> 613</span></a>                      <a class="function" onClick="logFunction('load_class')" href="../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'messaging/model/_thread.class.php', 'Thread' );
<a name="l614"><span class="linenum"> 614</span></a>                      <a class="function" onClick="logFunction('load_class')" href="../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'messaging/model/_message.class.php', 'Message' );
<a name="l615"><span class="linenum"> 615</span></a>  
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">                    // Set global variable to auto define the FB autocomplete plugin field</span>
<a name="l617"><span class="linenum"> 617</span></a>                      <a class="var it2220" onMouseOver="hilite(2220)" onMouseOut="lolite()" onClick="logVariable('recipients_selected')" href="../../_variables/recipients_selected.html">$recipients_selected</a> = array( array(
<a name="l618"><span class="linenum"> 618</span></a>                              'id'    =&gt; <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10700" onMouseOver="hilite(10700)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>,
<a name="l619"><span class="linenum"> 619</span></a>                              'title' =&gt; <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('login')" class="var it10700" onMouseOver="hilite(10700)" onMouseOut="lolite()" href="../../_variables/login.html">login</a>,
<a name="l620"><span class="linenum"> 620</span></a>                          ) );
<a name="l621"><span class="linenum"> 621</span></a>  
<a name="l622"><span class="linenum"> 622</span></a>                      <a class="function" onClick="logFunction('init_tokeninput_js')" href="../../_functions/init_tokeninput_js.html" onMouseOver="funcPopup(event,'init_tokeninput_js')">init_tokeninput_js</a>( 'blog' );
<a name="l623"><span class="linenum"> 623</span></a>  
<a name="l624"><span class="linenum"> 624</span></a>                      <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = 'threads';
<a name="l625"><span class="linenum"> 625</span></a>                      <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Thread')" href="../../_classes/thread.html" onMouseOver="classPopup(event,'thread')">Thread</a>();
<a name="l626"><span class="linenum"> 626</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Message')" href="../../_classes/message.html" onMouseOver="classPopup(event,'message')">Message</a>();
<a name="l627"><span class="linenum"> 627</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a onClick="logVariable('Thread')" class="var it10740" onMouseOver="hilite(10740)" onMouseOut="lolite()" href="../../_variables/Thread.html">Thread</a> = &amp; <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>;
<a name="l628"><span class="linenum"> 628</span></a>                      <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>-&gt;<a onClick="logVariable('recipients')" class="var it10741" onMouseOver="hilite(10741)" onMouseOut="lolite()" href="../../_variables/recipients.html">recipients</a> = <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('login')" class="var it10700" onMouseOver="hilite(10700)" onMouseOut="lolite()" href="../../_variables/login.html">login</a>;
<a name="l629"><span class="linenum"> 629</span></a>                      <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'action', 'string', 'new', true );
<a name="l630"><span class="linenum"> 630</span></a>                      <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'thrdtype', 'string', 'individual', true );
<a name="l631"><span class="linenum"> 631</span></a>                  }
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>                  if( <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == 'email' )
<a name="l634"><span class="linenum"> 634</span></a>                  { // set recippient user param
<a name="l635"><span class="linenum"> 635</span></a>                      <a class="function" onClick="logFunction('set_param')" href="../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'recipient_id', <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10700" onMouseOver="hilite(10700)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l636"><span class="linenum"> 636</span></a>                  }
<a name="l637"><span class="linenum"> 637</span></a>              }
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>              if( <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == NULL )
<a name="l640"><span class="linenum"> 640</span></a>              { // should be Prevented by UI
<a name="l641"><span class="linenum"> 641</span></a>                  if( !empty( <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a> ) )
<a name="l642"><span class="linenum"> 642</span></a>                  {
<a name="l643"><span class="linenum"> 643</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The user &quot;%s&quot; does not want to be contacted through the message form.' ), <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'login' ) ), 'error' );
<a name="l644"><span class="linenum"> 644</span></a>                  }
<a name="l645"><span class="linenum"> 645</span></a>                  elseif( !empty( <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a> ) )
<a name="l646"><span class="linenum"> 646</span></a>                  {
<a name="l647"><span class="linenum"> 647</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'This commentator does not want to get contacted through the message form.' ), 'error' );
<a name="l648"><span class="linenum"> 648</span></a>                  }
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>                  <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">                // If it was a front page request or the front page is set to 'msgform' then we must not redirect to the front page because it is forbidden for the current User</span>
<a name="l652"><span class="linenum"> 652</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = ( <a class="function" onClick="logFunction('is_front_page')" href="../../_functions/is_front_page.html" onMouseOver="funcPopup(event,'is_front_page')">is_front_page</a>() || ( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'front_disp' ) == 'msgform' ) ) ? <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>, 'disp=403', '&amp;' ) : <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>;
<a name="l653"><span class="linenum"> 653</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 302 );
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">                // exited here</span>
<a name="l655"><span class="linenum"> 655</span></a>              }
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>              if( <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == 'PM' || <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == 'email' )
<a name="l658"><span class="linenum"> 658</span></a>              { // Some message form is available
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment">                // Get the suggested subject for the email:</span>
<a name="l660"><span class="linenum"> 660</span></a>                  if( empty(<a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>) )
<a name="l661"><span class="linenum"> 661</span></a>                  { // no subject provided by param:
<a name="l662"><span class="linenum"> 662</span></a>                      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l663"><span class="linenum"> 663</span></a>  
<a name="l664"><span class="linenum"> 664</span></a>                      if( ! empty(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a>) )
<a name="l665"><span class="linenum"> 665</span></a>                      {
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">                        // fp&gt;TODO there should be NO SQL in this file. Make a $ItemCache-&gt;get_by_comment_ID().</span>
<a name="l667"><span class="linenum"> 667</span></a>                          <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( '
<a name="l668"><span class="linenum"> 668</span></a>                              SELECT post_title
<a name="l669"><span class="linenum"> 669</span></a>                                  FROM T_items__item, T_comments
<a name="l670"><span class="linenum"> 670</span></a>                               WHERE comment_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('comment_id')" href="../../_variables/comment_id.html">$comment_id</a>).'
<a name="l671"><span class="linenum"> 671</span></a>                                   AND post_ID = comment_item_ID' );
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>                          if( <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> )
<a name="l674"><span class="linenum"> 674</span></a>                          {
<a name="l675"><span class="linenum"> 675</span></a>                              <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Re:').' '.sprintf( <span class="comment">/* TRANS: Used as mail subject; %s gets replaced by an item's title */</span> <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Comment on %s' ), <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('post_title')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../_variables/post_title.html">post_title</a> );
<a name="l676"><span class="linenum"> 676</span></a>                          }
<a name="l677"><span class="linenum"> 677</span></a>                      }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>                      if( empty(<a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>) &amp;&amp; ! empty(<a class="var it411" onMouseOver="hilite(411)" onMouseOut="lolite()" onClick="logVariable('post_id')" href="../../_variables/post_id.html">$post_id</a>) )
<a name="l680"><span class="linenum"> 680</span></a>                      {
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">                        // fp&gt;TODO there should be NO SQL in this file. Use $ItemCache-&gt;get_by_ID.</span>
<a name="l682"><span class="linenum"> 682</span></a>                          <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( '
<a name="l683"><span class="linenum"> 683</span></a>                                  SELECT post_title
<a name="l684"><span class="linenum"> 684</span></a>                                      FROM T_items__item
<a name="l685"><span class="linenum"> 685</span></a>                                   WHERE post_ID = '.<a class="var it411" onMouseOver="hilite(411)" onMouseOut="lolite()" onClick="logVariable('post_id')" href="../../_variables/post_id.html">$post_id</a> );
<a name="l686"><span class="linenum"> 686</span></a>                          if( <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> )
<a name="l687"><span class="linenum"> 687</span></a>                          {
<a name="l688"><span class="linenum"> 688</span></a>                              <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Re:').' '.<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('post_title')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../_variables/post_title.html">post_title</a>;
<a name="l689"><span class="linenum"> 689</span></a>                          }
<a name="l690"><span class="linenum"> 690</span></a>                      }
<a name="l691"><span class="linenum"> 691</span></a>                  }
<a name="l692"><span class="linenum"> 692</span></a>                  if( <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../_variables/allow_msgform.html">$allow_msgform</a> == 'PM' &amp;&amp; isset( <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a> ) )
<a name="l693"><span class="linenum"> 693</span></a>                  {
<a name="l694"><span class="linenum"> 694</span></a>                      <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>-&gt;<a onClick="logVariable('title')" class="var it10741" onMouseOver="hilite(10741)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>;
<a name="l695"><span class="linenum"> 695</span></a>                  }
<a name="l696"><span class="linenum"> 696</span></a>                  else
<a name="l697"><span class="linenum"> 697</span></a>                  {
<a name="l698"><span class="linenum"> 698</span></a>                      <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'subject', 'string', <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>, true );
<a name="l699"><span class="linenum"> 699</span></a>                  }
<a name="l700"><span class="linenum"> 700</span></a>              }
<a name="l701"><span class="linenum"> 701</span></a>  
<a name="l702"><span class="linenum"> 702</span></a>              if( <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a> = &amp; get_setting_Blog( 'msg_blog_ID' ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10739" onMouseOver="hilite(10739)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l703"><span class="linenum"> 703</span></a>              { // Redirect to special blog for messaging actions if it is defined in general settings
<a name="l704"><span class="linenum"> 704</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'msgformurl', array( 'glue' =&gt; '&amp;' ) ) );
<a name="l705"><span class="linenum"> 705</span></a>              }
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Contact form';
<a name="l708"><span class="linenum"> 708</span></a>              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_noindex' ) )
<a name="l709"><span class="linenum"> 709</span></a>              { // We prefer robots not to index these pages:
<a name="l710"><span class="linenum"> 710</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l711"><span class="linenum"> 711</span></a>              }
<a name="l712"><span class="linenum"> 712</span></a>              break;
<a name="l713"><span class="linenum"> 713</span></a>  
<a name="l714"><span class="linenum"> 714</span></a>          case 'messages':
<a name="l715"><span class="linenum"> 715</span></a>          case 'contacts':
<a name="l716"><span class="linenum"> 716</span></a>          case 'threads':
<a name="l717"><span class="linenum"> 717</span></a>              switch( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> )
<a name="l718"><span class="linenum"> 718</span></a>              {
<a name="l719"><span class="linenum"> 719</span></a>                  case 'messages':
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">                    // Actions ONLY for disp=messages</span>
<a name="l721"><span class="linenum"> 721</span></a>  
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment">                    // fp&gt; The correct place to get thrd_ID is here, because we want it in redirect_to in case we need to ask for login.</span>
<a name="l723"><span class="linenum"> 723</span></a>                      <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'thrd_ID', 'integer', '', true );
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>                      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l726"><span class="linenum"> 726</span></a>                      { // Redirect to the login page for anonymous users
<a name="l727"><span class="linenum"> 727</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must log in to read your messages.' ) );
<a name="l728"><span class="linenum"> 728</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>('cannot see messages'), 302 );
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">                        // will have exited</span>
<a name="l730"><span class="linenum"> 730</span></a>                      }
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">                    // check if user status allow to view messages</span>
<a name="l733"><span class="linenum"> 733</span></a>                      if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_messages' ) )
<a name="l734"><span class="linenum"> 734</span></a>                      { // user status does not allow to view messages
<a name="l735"><span class="linenum"> 735</span></a>                          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_be_validated' ) )
<a name="l736"><span class="linenum"> 736</span></a>                          { // user is logged in but his/her account is not activate yet
<a name="l737"><span class="linenum"> 737</span></a>                              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account before you can read &amp; send messages. &lt;b&gt;See below:&lt;/b&gt;' ) );
<a name="l738"><span class="linenum"> 738</span></a>                              <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">                            // will have exited</span>
<a name="l740"><span class="linenum"> 740</span></a>                          }
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'You are not allowed to view Messages!' );
<a name="l743"><span class="linenum"> 743</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 302 );
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">                        // will have exited</span>
<a name="l745"><span class="linenum"> 745</span></a>                      }
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">                    // check if user permissions allow to view messages</span>
<a name="l748"><span class="linenum"> 748</span></a>                      if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'reply' ) )
<a name="l749"><span class="linenum"> 749</span></a>                      { // Redirect to the blog url for users without messaging permission
<a name="l750"><span class="linenum"> 750</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'You are not allowed to view Messages!' );
<a name="l751"><span class="linenum"> 751</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 302 );
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">                        // will have exited</span>
<a name="l753"><span class="linenum"> 753</span></a>                      }
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>                      if( !empty( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a> ) )
<a name="l756"><span class="linenum"> 756</span></a>                      { // if this thread exists and current user is part of this thread update status because won't be any unread messages on this conversation
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">                        // we need to mark this early to make sure the unread message count will be correct in the evobar</span>
<a name="l758"><span class="linenum"> 758</span></a>                          <a class="function" onClick="logFunction('mark_as_read_by_user')" href="../../_functions/mark_as_read_by_user.html" onMouseOver="funcPopup(event,'mark_as_read_by_user')">mark_as_read_by_user</a>( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l759"><span class="linenum"> 759</span></a>                      }
<a name="l760"><span class="linenum"> 760</span></a>  
<a name="l761"><span class="linenum"> 761</span></a>                      if( ( <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a> = <a class="function" onClick="logFunction('get_message_params_from_session')" href="../../_functions/get_message_params_from_session.html" onMouseOver="funcPopup(event,'get_message_params_from_session')">get_message_params_from_session</a>() ) !== NULL )
<a name="l762"><span class="linenum"> 762</span></a>                      { // set Message and Thread saved params from Session
<a name="l763"><span class="linenum"> 763</span></a>                          global <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>, <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>;
<a name="l764"><span class="linenum"> 764</span></a>                          <a class="function" onClick="logFunction('load_class')" href="../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'messaging/model/_message.class.php', 'Message' );
<a name="l765"><span class="linenum"> 765</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Message')" href="../../_classes/message.html" onMouseOver="classPopup(event,'message')">Message</a>();
<a name="l766"><span class="linenum"> 766</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a onClick="logVariable('text')" class="var it10740" onMouseOver="hilite(10740)" onMouseOut="lolite()" href="../../_variables/text.html">text</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'message' ];
<a name="l767"><span class="linenum"> 767</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a onClick="logVariable('original_text')" class="var it10740" onMouseOver="hilite(10740)" onMouseOut="lolite()" href="../../_variables/original_text.html">original_text</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'message_original' ];
<a name="l768"><span class="linenum"> 768</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'renderers' ] );
<a name="l769"><span class="linenum"> 769</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a onClick="logVariable('thread_ID')" class="var it10740" onMouseOver="hilite(10740)" onMouseOut="lolite()" href="../../_variables/thread_ID.html">thread_ID</a> = <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a>;
<a name="l770"><span class="linenum"> 770</span></a>                          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'action' ];
<a name="l771"><span class="linenum"> 771</span></a>                      }
<a name="l772"><span class="linenum"> 772</span></a>                      break;
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>                  case 'contacts':
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">                    // Actions ONLY for disp=contacts</span>
<a name="l776"><span class="linenum"> 776</span></a>  
<a name="l777"><span class="linenum"> 777</span></a>                      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l778"><span class="linenum"> 778</span></a>                      { // Redirect to the login page for anonymous users
<a name="l779"><span class="linenum"> 779</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must log in to manage your contacts.' ) );
<a name="l780"><span class="linenum"> 780</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>('cannot see contacts'), 302 );
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">                        // will have exited</span>
<a name="l782"><span class="linenum"> 782</span></a>                      }
<a name="l783"><span class="linenum"> 783</span></a>  
<a name="l784"><span class="linenum"> 784</span></a>                      if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_contacts' ) )
<a name="l785"><span class="linenum"> 785</span></a>                      { // user is logged in, but his status doesn't allow to view contacts
<a name="l786"><span class="linenum"> 786</span></a>                          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_be_validated' ) )
<a name="l787"><span class="linenum"> 787</span></a>                          { // user is logged in but his/her account was not activated yet
<a name="l788"><span class="linenum"> 788</span></a>  <span class="comment">                            // Redirect to the account activation page</span>
<a name="l789"><span class="linenum"> 789</span></a>                              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account before you can manage your contacts. &lt;b&gt;See below:&lt;/b&gt;' ) );
<a name="l790"><span class="linenum"> 790</span></a>                              <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l791"><span class="linenum"> 791</span></a>  <span class="comment">                            // will have exited</span>
<a name="l792"><span class="linenum"> 792</span></a>                          }
<a name="l793"><span class="linenum"> 793</span></a>  
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment">                        // Redirect to the blog url for users without messaging permission</span>
<a name="l795"><span class="linenum"> 795</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'You are not allowed to view Contacts!' );
<a name="l796"><span class="linenum"> 796</span></a>                          <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment">                        // If it was a front page request or the front page is set to display 'contacts' then we must not redirect to the front page because it is forbidden for the current User</span>
<a name="l798"><span class="linenum"> 798</span></a>                          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = ( <a class="function" onClick="logFunction('is_front_page')" href="../../_functions/is_front_page.html" onMouseOver="funcPopup(event,'is_front_page')">is_front_page</a>() || ( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'front_disp' ) == 'contacts' ) ) ? <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>, 'disp=403', '&amp;' ) : <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>;
<a name="l799"><span class="linenum"> 799</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 302 );
<a name="l800"><span class="linenum"> 800</span></a>                      }
<a name="l801"><span class="linenum"> 801</span></a>  
<a name="l802"><span class="linenum"> 802</span></a>                      if( <a class="function" onClick="logFunction('has_cross_country_restriction')" href="../../_functions/has_cross_country_restriction.html" onMouseOver="funcPopup(event,'has_cross_country_restriction')">has_cross_country_restriction</a>( 'any' ) &amp;&amp; empty( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a> ) )
<a name="l803"><span class="linenum"> 803</span></a>                      { // User may browse/contact other users only from the same country
<a name="l804"><span class="linenum"> 804</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please specify your country before attempting to contact other users.') );
<a name="l805"><span class="linenum"> 805</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_user_profile_url')" href="../../_functions/get_user_profile_url.html" onMouseOver="funcPopup(event,'get_user_profile_url')">get_user_profile_url</a>() );
<a name="l806"><span class="linenum"> 806</span></a>                      }
<a name="l807"><span class="linenum"> 807</span></a>  
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">                    // Get action parameter from request:</span>
<a name="l809"><span class="linenum"> 809</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="function" onClick="logFunction('param_action')" href="../../_functions/param_action.html" onMouseOver="funcPopup(event,'param_action')">param_action</a>();
<a name="l810"><span class="linenum"> 810</span></a>  
<a name="l811"><span class="linenum"> 811</span></a>                      if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'reply' ) )
<a name="l812"><span class="linenum"> 812</span></a>                      { // Redirect to the blog url for users without messaging permission
<a name="l813"><span class="linenum"> 813</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'You are not allowed to view Contacts!' );
<a name="l814"><span class="linenum"> 814</span></a>                          <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">                        // If it was a front page request or the front page is set to display 'contacts' then we must not redirect to the front page because it is forbidden for the current User</span>
<a name="l816"><span class="linenum"> 816</span></a>                          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = ( <a class="function" onClick="logFunction('is_front_page')" href="../../_functions/is_front_page.html" onMouseOver="funcPopup(event,'is_front_page')">is_front_page</a>() || ( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'front_disp' ) == 'contacts' ) ) ? <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>, 'disp=403', '&amp;' ) : <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>;
<a name="l817"><span class="linenum"> 817</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 302 );
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment">                        // will have exited</span>
<a name="l819"><span class="linenum"> 819</span></a>                      }
<a name="l820"><span class="linenum"> 820</span></a>  
<a name="l821"><span class="linenum"> 821</span></a>                      switch( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> )
<a name="l822"><span class="linenum"> 822</span></a>                      {
<a name="l823"><span class="linenum"> 823</span></a>                          case 'add_user': // Add user to contacts list
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment">                            // Check that this action request is not a CSRF hacked request:</span>
<a name="l825"><span class="linenum"> 825</span></a>                              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'messaging_contacts' );
<a name="l826"><span class="linenum"> 826</span></a>  
<a name="l827"><span class="linenum"> 827</span></a>                              <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0 );
<a name="l828"><span class="linenum"> 828</span></a>                              if( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> &gt; 0 )
<a name="l829"><span class="linenum"> 829</span></a>                              { // Add user to contacts
<a name="l830"><span class="linenum"> 830</span></a>                                  if( <a class="function" onClick="logFunction('create_contacts_user')" href="../../_functions/create_contacts_user.html" onMouseOver="funcPopup(event,'create_contacts_user')">create_contacts_user</a>( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l831"><span class="linenum"> 831</span></a>                                  { // Add user to the group
<a name="l832"><span class="linenum"> 832</span></a>                                      <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'group_ID', 'string', '' );
<a name="l833"><span class="linenum"> 833</span></a>                                      if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('create_contacts_group_users')" href="../../_functions/create_contacts_group_users.html" onMouseOver="funcPopup(event,'create_contacts_group_users')">create_contacts_group_users</a>( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a>, <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, 'group_ID_combo' ) )
<a name="l834"><span class="linenum"> 834</span></a>                                      { // User has been added to the group
<a name="l835"><span class="linenum"> 835</span></a>                                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User has been added to the &amp;laquo;%s&amp;raquo; group.'), <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['group_name'] ), 'success' );
<a name="l836"><span class="linenum"> 836</span></a>                                      }
<a name="l837"><span class="linenum"> 837</span></a>                                      else
<a name="l838"><span class="linenum"> 838</span></a>                                      { // User has been added ONLY to the contacts list
<a name="l839"><span class="linenum"> 839</span></a>                                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'User has been added to your contacts.', 'success' );
<a name="l840"><span class="linenum"> 840</span></a>                                      }
<a name="l841"><span class="linenum"> 841</span></a>                                  }
<a name="l842"><span class="linenum"> 842</span></a>                                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'userurl', array( 'url_suffix' =&gt; 'user_ID='.<a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, 'glue' =&gt; '&amp;' ) ) );
<a name="l843"><span class="linenum"> 843</span></a>                              }
<a name="l844"><span class="linenum"> 844</span></a>                              break;
<a name="l845"><span class="linenum"> 845</span></a>  
<a name="l846"><span class="linenum"> 846</span></a>                          case 'unblock': // Unblock user
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">                            // Check that this action request is not a CSRF hacked request:</span>
<a name="l848"><span class="linenum"> 848</span></a>                              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'messaging_contacts' );
<a name="l849"><span class="linenum"> 849</span></a>  
<a name="l850"><span class="linenum"> 850</span></a>                              <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0 );
<a name="l851"><span class="linenum"> 851</span></a>                              if( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> &gt; 0 )
<a name="l852"><span class="linenum"> 852</span></a>                              {
<a name="l853"><span class="linenum"> 853</span></a>                                  <a class="function" onClick="logFunction('set_contact_blocked')" href="../../_functions/set_contact_blocked.html" onMouseOver="funcPopup(event,'set_contact_blocked')">set_contact_blocked</a>( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, 0 );
<a name="l854"><span class="linenum"> 854</span></a>                                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Contact was unblocked.'), 'success' );
<a name="l855"><span class="linenum"> 855</span></a>                              }
<a name="l856"><span class="linenum"> 856</span></a>                              break;
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>                          case 'remove_user': // Remove user from contacts group
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">                            // Check that this action request is not a CSRF hacked request:</span>
<a name="l860"><span class="linenum"> 860</span></a>                              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'messaging_contacts' );
<a name="l861"><span class="linenum"> 861</span></a>  
<a name="l862"><span class="linenum"> 862</span></a>                              <a class="var it2221" onMouseOver="hilite(2221)" onMouseOut="lolite()" onClick="logVariable('view')" href="../../_variables/view.html">$view</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'view', 'string', 'profile' );
<a name="l863"><span class="linenum"> 863</span></a>                              <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0 );
<a name="l864"><span class="linenum"> 864</span></a>                              <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'group_ID', 'integer', 0 );
<a name="l865"><span class="linenum"> 865</span></a>                              if( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> &gt; 0 &amp;&amp; <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a> &gt; 0 )
<a name="l866"><span class="linenum"> 866</span></a>                              { // Remove user from selected group
<a name="l867"><span class="linenum"> 867</span></a>                                  if( <a class="function" onClick="logFunction('remove_contacts_group_user')" href="../../_functions/remove_contacts_group_user.html" onMouseOver="funcPopup(event,'remove_contacts_group_user')">remove_contacts_group_user</a>( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a>, <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l868"><span class="linenum"> 868</span></a>                                  { // User has been removed from the group
<a name="l869"><span class="linenum"> 869</span></a>                                      if( <a class="var it2221" onMouseOver="hilite(2221)" onMouseOut="lolite()" onClick="logVariable('view')" href="../../_variables/view.html">$view</a> == 'contacts' )
<a name="l870"><span class="linenum"> 870</span></a>                                      { // Redirect to the contacts list
<a name="l871"><span class="linenum"> 871</span></a>                                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'contactsurl', array( 'glue' =&gt; '&amp;' ) ) );
<a name="l872"><span class="linenum"> 872</span></a>                                      }
<a name="l873"><span class="linenum"> 873</span></a>                                      else
<a name="l874"><span class="linenum"> 874</span></a>                                      { // Redirect to the user profile page
<a name="l875"><span class="linenum"> 875</span></a>                                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'userurl', array( 'url_suffix' =&gt; 'user_ID='.<a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, 'glue' =&gt; '&amp;' ) ) );
<a name="l876"><span class="linenum"> 876</span></a>                                      }
<a name="l877"><span class="linenum"> 877</span></a>                                  }
<a name="l878"><span class="linenum"> 878</span></a>                              }
<a name="l879"><span class="linenum"> 879</span></a>                              break;
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>                          case 'add_group': // Add users to the group
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">                            // Check that this action request is not a CSRF hacked request:</span>
<a name="l883"><span class="linenum"> 883</span></a>                              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'messaging_contacts' );
<a name="l884"><span class="linenum"> 884</span></a>  
<a name="l885"><span class="linenum"> 885</span></a>                              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'group', 'string', '' );
<a name="l886"><span class="linenum"> 886</span></a>                              <a class="var it536" onMouseOver="hilite(536)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'users', 'string', '' );
<a name="l887"><span class="linenum"> 887</span></a>  
<a name="l888"><span class="linenum"> 888</span></a>                              if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('create_contacts_group_users')" href="../../_functions/create_contacts_group_users.html" onMouseOver="funcPopup(event,'create_contacts_group_users')">create_contacts_group_users</a>( <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>, <a class="var it536" onMouseOver="hilite(536)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> ) )
<a name="l889"><span class="linenum"> 889</span></a>                              {    // Users have been added to the group
<a name="l890"><span class="linenum"> 890</span></a>                                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d contacts have been added to the &amp;laquo;%s&amp;raquo; group.'), <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['count_users'], <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['group_name'] ), 'success' );
<a name="l891"><span class="linenum"> 891</span></a>                                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'contactsurl', array( 'glue' =&gt; '&amp;' ) );
<a name="l892"><span class="linenum"> 892</span></a>  
<a name="l893"><span class="linenum"> 893</span></a>                                  <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_ID', 'integer', 0 );
<a name="l894"><span class="linenum"> 894</span></a>                                  if( <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> &gt; 0 )
<a name="l895"><span class="linenum"> 895</span></a>                                  {
<a name="l896"><span class="linenum"> 896</span></a>                                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 'item_ID='.<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a>, '&amp;' );
<a name="l897"><span class="linenum"> 897</span></a>                                  }
<a name="l898"><span class="linenum"> 898</span></a>                                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l899"><span class="linenum"> 899</span></a>                              }
<a name="l900"><span class="linenum"> 900</span></a>                              break;
<a name="l901"><span class="linenum"> 901</span></a>  
<a name="l902"><span class="linenum"> 902</span></a>                          case 'rename_group': // Rename the group
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">                            // Check that this action request is not a CSRF hacked request:</span>
<a name="l904"><span class="linenum"> 904</span></a>                              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'messaging_contacts' );
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>                              <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'group_ID', 'integer', true );
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>                              if( <a class="function" onClick="logFunction('rename_contacts_group')" href="../../_functions/rename_contacts_group.html" onMouseOver="funcPopup(event,'rename_contacts_group')">rename_contacts_group</a>( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a> ) )
<a name="l909"><span class="linenum"> 909</span></a>                              {
<a name="l910"><span class="linenum"> 910</span></a>                                  <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_ID', 'integer', 0 );
<a name="l911"><span class="linenum"> 911</span></a>  
<a name="l912"><span class="linenum"> 912</span></a>                                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'contactsurl', array( 'glue' =&gt; '&amp;' ) ), 'g='.<a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a>, '&amp;' );
<a name="l913"><span class="linenum"> 913</span></a>                                  if( <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> &gt; 0 )
<a name="l914"><span class="linenum"> 914</span></a>                                  {
<a name="l915"><span class="linenum"> 915</span></a>                                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 'item_ID='.<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a>, '&amp;' );
<a name="l916"><span class="linenum"> 916</span></a>                                  }
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>                                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The group has been renamed.'), 'success' );
<a name="l919"><span class="linenum"> 919</span></a>                                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l920"><span class="linenum"> 920</span></a>                              }
<a name="l921"><span class="linenum"> 921</span></a>                              break;
<a name="l922"><span class="linenum"> 922</span></a>  
<a name="l923"><span class="linenum"> 923</span></a>                          case 'delete_group': // Delete the group
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment">                            // Check that this action request is not a CSRF hacked request:</span>
<a name="l925"><span class="linenum"> 925</span></a>                              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'messaging_contacts' );
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>                              <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'group_ID', 'integer', true );
<a name="l928"><span class="linenum"> 928</span></a>  
<a name="l929"><span class="linenum"> 929</span></a>                              if( <a class="function" onClick="logFunction('delete_contacts_group')" href="../../_functions/delete_contacts_group.html" onMouseOver="funcPopup(event,'delete_contacts_group')">delete_contacts_group</a>( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../_variables/group_ID.html">$group_ID</a> ) )
<a name="l930"><span class="linenum"> 930</span></a>                              {
<a name="l931"><span class="linenum"> 931</span></a>                                  <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'item_ID', 'integer', 0 );
<a name="l932"><span class="linenum"> 932</span></a>  
<a name="l933"><span class="linenum"> 933</span></a>                                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'contactsurl', array( 'glue' =&gt; '&amp;' ) );
<a name="l934"><span class="linenum"> 934</span></a>                                  if( <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a> &gt; 0 )
<a name="l935"><span class="linenum"> 935</span></a>                                  {
<a name="l936"><span class="linenum"> 936</span></a>                                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 'item_ID='.<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../_variables/item_ID.html">$item_ID</a>, '&amp;' );
<a name="l937"><span class="linenum"> 937</span></a>                                  }
<a name="l938"><span class="linenum"> 938</span></a>  
<a name="l939"><span class="linenum"> 939</span></a>                                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The group has been deleted.'), 'success' );
<a name="l940"><span class="linenum"> 940</span></a>                                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l941"><span class="linenum"> 941</span></a>                              }
<a name="l942"><span class="linenum"> 942</span></a>                              break;
<a name="l943"><span class="linenum"> 943</span></a>                      }
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>                      <a class="function" onClick="logFunction('modules_call_method')" href="../../_functions/modules_call_method.html" onMouseOver="funcPopup(event,'modules_call_method')">modules_call_method</a>( 'switch_contacts_actions', array( 'action' =&gt; <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> ) );
<a name="l946"><span class="linenum"> 946</span></a>                      break;
<a name="l947"><span class="linenum"> 947</span></a>  
<a name="l948"><span class="linenum"> 948</span></a>                  case 'threads':
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">                    // Actions ONLY for disp=threads</span>
<a name="l950"><span class="linenum"> 950</span></a>  
<a name="l951"><span class="linenum"> 951</span></a>                      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l952"><span class="linenum"> 952</span></a>                      { // Redirect to the login page for anonymous users
<a name="l953"><span class="linenum"> 953</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must log in to read your messages.' ) );
<a name="l954"><span class="linenum"> 954</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>('cannot see messages'), 302 );
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment">                        // will have exited</span>
<a name="l956"><span class="linenum"> 956</span></a>                      }
<a name="l957"><span class="linenum"> 957</span></a>  
<a name="l958"><span class="linenum"> 958</span></a>                      if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_threads' ) )
<a name="l959"><span class="linenum"> 959</span></a>                      { // user status does not allow to view threads
<a name="l960"><span class="linenum"> 960</span></a>                          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_be_validated' ) )
<a name="l961"><span class="linenum"> 961</span></a>                          { // user is logged in but his/her account is not activate yet
<a name="l962"><span class="linenum"> 962</span></a>                              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account before you can read &amp; send messages. &lt;b&gt;See below:&lt;/b&gt;' ) );
<a name="l963"><span class="linenum"> 963</span></a>                              <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l964"><span class="linenum"> 964</span></a>  <span class="comment">                            // will have exited</span>
<a name="l965"><span class="linenum"> 965</span></a>                          }
<a name="l966"><span class="linenum"> 966</span></a>  
<a name="l967"><span class="linenum"> 967</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'You are not allowed to view Messages!' );
<a name="l968"><span class="linenum"> 968</span></a>  
<a name="l969"><span class="linenum"> 969</span></a>                          <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment">                        // If it was a front page request or the front page is set to display 'threads' then we must not redirect to the front page because it is forbidden for the current User</span>
<a name="l971"><span class="linenum"> 971</span></a>                          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = ( <a class="function" onClick="logFunction('is_front_page')" href="../../_functions/is_front_page.html" onMouseOver="funcPopup(event,'is_front_page')">is_front_page</a>() || ( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'front_disp' ) == 'threads' ) ) ? <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>, 'disp=404', '&amp;' ) : <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>;
<a name="l972"><span class="linenum"> 972</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 302 );
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment">                        // will have exited</span>
<a name="l974"><span class="linenum"> 974</span></a>                      }
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>                      if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'reply' ) )
<a name="l977"><span class="linenum"> 977</span></a>                      { // Redirect to the blog url for users without messaging permission
<a name="l978"><span class="linenum"> 978</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'You are not allowed to view Messages!' );
<a name="l979"><span class="linenum"> 979</span></a>                          <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment">                        // If it was a front page request or the front page is set to display 'threads' then we must not redirect to the front page because it is forbidden for the current User</span>
<a name="l981"><span class="linenum"> 981</span></a>                          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = ( <a class="function" onClick="logFunction('is_front_page')" href="../../_functions/is_front_page.html" onMouseOver="funcPopup(event,'is_front_page')">is_front_page</a>() || ( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'front_disp' ) == 'threads' ) ) ? <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>, 'disp=403', '&amp;' ) : <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../_variables/blogurl.html">$blogurl</a>;
<a name="l982"><span class="linenum"> 982</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 302 );
<a name="l983"><span class="linenum"> 983</span></a>  <span class="comment">                        // will have exited</span>
<a name="l984"><span class="linenum"> 984</span></a>                      }
<a name="l985"><span class="linenum"> 985</span></a>  
<a name="l986"><span class="linenum"> 986</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'action', 'string', 'view' );
<a name="l987"><span class="linenum"> 987</span></a>                      if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'new' )
<a name="l988"><span class="linenum"> 988</span></a>                      { // Before <span class="keyword">new </span><a class="class" onClick="logClass('message')" href="../../_classes/message.html" onMouseOver="classPopup(event,'message')">message</a> form is displayed ...
<a name="l989"><span class="linenum"> 989</span></a>                          if( <a class="function" onClick="logFunction('has_cross_country_restriction')" href="../../_functions/has_cross_country_restriction.html" onMouseOver="funcPopup(event,'has_cross_country_restriction')">has_cross_country_restriction</a>( 'contact' ) &amp;&amp; empty( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a> ) )
<a name="l990"><span class="linenum"> 990</span></a>                          { // Cross country contact restriction is enabled, but user country is not set yet
<a name="l991"><span class="linenum"> 991</span></a>                              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please specify your country before attempting to contact other users.') );
<a name="l992"><span class="linenum"> 992</span></a>                              <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_user_profile_url')" href="../../_functions/get_user_profile_url.html" onMouseOver="funcPopup(event,'get_user_profile_url')">get_user_profile_url</a>() );
<a name="l993"><span class="linenum"> 993</span></a>                          }
<a name="l994"><span class="linenum"> 994</span></a>                          elseif( <a class="function" onClick="logFunction('check_create_thread_limit')" href="../../_functions/check_create_thread_limit.html" onMouseOver="funcPopup(event,'check_create_thread_limit')">check_create_thread_limit</a>( true ) )
<a name="l995"><span class="linenum"> 995</span></a>                          { // don't allow to create <span class="keyword">new </span><a class="class" onClick="logClass('thread')" href="../../_classes/thread.html" onMouseOver="classPopup(event,'thread')">thread</a>, because the <span class="keyword">new </span><a class="class" onClick="logClass('thread')" href="../../_classes/thread.html" onMouseOver="classPopup(event,'thread')">thread</a> limit was already reached
<a name="l996"><span class="linenum"> 996</span></a>                              <a class="function" onClick="logFunction('set_param')" href="../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'action', 'view' );
<a name="l997"><span class="linenum"> 997</span></a>                          }
<a name="l998"><span class="linenum"> 998</span></a>                      }
<a name="l999"><span class="linenum"> 999</span></a>  
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">                    // Load classes</span>
<a name="l1001"><span class="linenum">1001</span></a>                      <a class="function" onClick="logFunction('load_class')" href="../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'messaging/model/_thread.class.php', 'Thread' );
<a name="l1002"><span class="linenum">1002</span></a>                      <a class="function" onClick="logFunction('load_class')" href="../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'messaging/model/_message.class.php', 'Message' );
<a name="l1003"><span class="linenum">1003</span></a>  
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment">                    // Get action parameter from request:</span>
<a name="l1005"><span class="linenum">1005</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="function" onClick="logFunction('param_action')" href="../../_functions/param_action.html" onMouseOver="funcPopup(event,'param_action')">param_action</a>( 'view' );
<a name="l1006"><span class="linenum">1006</span></a>  
<a name="l1007"><span class="linenum">1007</span></a>                      switch( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> )
<a name="l1008"><span class="linenum">1008</span></a>                      {
<a name="l1009"><span class="linenum">1009</span></a>                          case 'new':
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment">                            // Check permission:</span>
<a name="l1011"><span class="linenum">1011</span></a>                              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'reply', true );
<a name="l1012"><span class="linenum">1012</span></a>  
<a name="l1013"><span class="linenum">1013</span></a>                              global <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>;
<a name="l1014"><span class="linenum">1014</span></a>  
<a name="l1015"><span class="linenum">1015</span></a>                              <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Thread')" href="../../_classes/thread.html" onMouseOver="classPopup(event,'thread')">Thread</a>();
<a name="l1016"><span class="linenum">1016</span></a>                              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Message')" href="../../_classes/message.html" onMouseOver="classPopup(event,'message')">Message</a>();
<a name="l1017"><span class="linenum">1017</span></a>                              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a onClick="logVariable('Thread')" class="var it10740" onMouseOver="hilite(10740)" onMouseOut="lolite()" href="../../_variables/Thread.html">Thread</a> = &amp; <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>;
<a name="l1018"><span class="linenum">1018</span></a>  
<a name="l1019"><span class="linenum">1019</span></a>                              <a class="function" onClick="logFunction('modules_call_method')" href="../../_functions/modules_call_method.html" onMouseOver="funcPopup(event,'modules_call_method')">modules_call_method</a>( 'update_new_thread', array( 'Thread' =&gt; &amp; <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a> ) );
<a name="l1020"><span class="linenum">1020</span></a>  
<a name="l1021"><span class="linenum">1021</span></a>                              if( ( <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a> = <a class="function" onClick="logFunction('get_message_params_from_session')" href="../../_functions/get_message_params_from_session.html" onMouseOver="funcPopup(event,'get_message_params_from_session')">get_message_params_from_session</a>() ) !== NULL )
<a name="l1022"><span class="linenum">1022</span></a>                              { // set Message and Thread saved params from Session
<a name="l1023"><span class="linenum">1023</span></a>                                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a onClick="logVariable('text')" class="var it10740" onMouseOver="hilite(10740)" onMouseOut="lolite()" href="../../_variables/text.html">text</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'message' ];
<a name="l1024"><span class="linenum">1024</span></a>                                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a onClick="logVariable('original_text')" class="var it10740" onMouseOver="hilite(10740)" onMouseOut="lolite()" href="../../_variables/original_text.html">original_text</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'message_original' ];
<a name="l1025"><span class="linenum">1025</span></a>                                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'renderers' ] );
<a name="l1026"><span class="linenum">1026</span></a>                                  <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>-&gt;<a onClick="logVariable('title')" class="var it10741" onMouseOver="hilite(10741)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'subject' ];
<a name="l1027"><span class="linenum">1027</span></a>                                  <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>-&gt;<a onClick="logVariable('recipients')" class="var it10741" onMouseOver="hilite(10741)" onMouseOut="lolite()" href="../../_variables/recipients.html">recipients</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'thrd_recipients' ];
<a name="l1028"><span class="linenum">1028</span></a>                                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('edited_Message')" href="../../_variables/edited_Message.html">$edited_Message</a>-&gt;<a onClick="logVariable('Thread')" class="var it10740" onMouseOver="hilite(10740)" onMouseOut="lolite()" href="../../_variables/Thread.html">Thread</a> = <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>;
<a name="l1029"><span class="linenum">1029</span></a>  
<a name="l1030"><span class="linenum">1030</span></a>                                  global <a class="var it1086" onMouseOver="hilite(1086)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients_array')" href="../../_variables/thrd_recipients_array.html">$thrd_recipients_array</a>, <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('thrdtype')" href="../../_variables/thrdtype.html">$thrdtype</a>, <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, <a class="var it1084" onMouseOver="hilite(1084)" onMouseOut="lolite()" onClick="logVariable('creating_success')" href="../../_variables/creating_success.html">$creating_success</a>;
<a name="l1031"><span class="linenum">1031</span></a>  
<a name="l1032"><span class="linenum">1032</span></a>                                  <a class="var it1086" onMouseOver="hilite(1086)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients_array')" href="../../_variables/thrd_recipients_array.html">$thrd_recipients_array</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'thrd_recipients_array' ];
<a name="l1033"><span class="linenum">1033</span></a>                                  <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('thrdtype')" href="../../_variables/thrdtype.html">$thrdtype</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'thrdtype' ];
<a name="l1034"><span class="linenum">1034</span></a>                                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'action' ];
<a name="l1035"><span class="linenum">1035</span></a>                                  <a class="var it1084" onMouseOver="hilite(1084)" onMouseOut="lolite()" onClick="logVariable('creating_success')" href="../../_variables/creating_success.html">$creating_success</a> = !empty( <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'creating_success' ] ) ? <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('unsaved_message_params')" href="../../_variables/unsaved_message_params.html">$unsaved_message_params</a>[ 'creating_success' ] : false;
<a name="l1036"><span class="linenum">1036</span></a>                              }
<a name="l1037"><span class="linenum">1037</span></a>                              else
<a name="l1038"><span class="linenum">1038</span></a>                              {
<a name="l1039"><span class="linenum">1039</span></a>                                  if( empty( <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>-&gt;<a onClick="logVariable('recipients')" class="var it10741" onMouseOver="hilite(10741)" onMouseOut="lolite()" href="../../_variables/recipients.html">recipients</a> ) )
<a name="l1040"><span class="linenum">1040</span></a>                                  {
<a name="l1041"><span class="linenum">1041</span></a>                                      <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>-&gt;<a onClick="logVariable('recipients')" class="var it10741" onMouseOver="hilite(10741)" onMouseOut="lolite()" href="../../_variables/recipients.html">recipients</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'thrd_recipients', 'string', '' );
<a name="l1042"><span class="linenum">1042</span></a>                                  }
<a name="l1043"><span class="linenum">1043</span></a>                                  if( empty( <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>-&gt;<a onClick="logVariable('title')" class="var it10741" onMouseOver="hilite(10741)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> ) )
<a name="l1044"><span class="linenum">1044</span></a>                                  {
<a name="l1045"><span class="linenum">1045</span></a>                                      <a class="var it121" onMouseOver="hilite(121)" onMouseOut="lolite()" onClick="logVariable('edited_Thread')" href="../../_variables/edited_Thread.html">$edited_Thread</a>-&gt;<a onClick="logVariable('title')" class="var it10741" onMouseOver="hilite(10741)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'subject', 'string', '' );
<a name="l1046"><span class="linenum">1046</span></a>                                  }
<a name="l1047"><span class="linenum">1047</span></a>                              }
<a name="l1048"><span class="linenum">1048</span></a>                              break;
<a name="l1049"><span class="linenum">1049</span></a>  
<a name="l1050"><span class="linenum">1050</span></a>                          default:
<a name="l1051"><span class="linenum">1051</span></a>  <span class="comment">                            // Check permission:</span>
<a name="l1052"><span class="linenum">1052</span></a>                              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'reply', true );
<a name="l1053"><span class="linenum">1053</span></a>                              break;
<a name="l1054"><span class="linenum">1054</span></a>                      }
<a name="l1055"><span class="linenum">1055</span></a>                      break;
<a name="l1056"><span class="linenum">1056</span></a>              }
<a name="l1057"><span class="linenum">1057</span></a>  
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">            // Actions for disp = messages, contacts, threads:</span>
<a name="l1059"><span class="linenum">1059</span></a>  
<a name="l1060"><span class="linenum">1060</span></a>              if( <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a> = &amp; get_setting_Blog( 'msg_blog_ID' ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10739" onMouseOver="hilite(10739)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l1061"><span class="linenum">1061</span></a>              { // Redirect to special blog for messaging actions if it is defined in general settings
<a name="l1062"><span class="linenum">1062</span></a>                  <a class="var it2222" onMouseOver="hilite(2222)" onMouseOut="lolite()" onClick="logVariable('blog_url_params')" href="../../_variables/blog_url_params.html">$blog_url_params</a> = array( 'glue' =&gt; '&amp;' );
<a name="l1063"><span class="linenum">1063</span></a>                  if( ! empty( <a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a> ) )
<a name="l1064"><span class="linenum">1064</span></a>                  { // Don't forget the important param on redirect
<a name="l1065"><span class="linenum">1065</span></a>                      <a class="var it2222" onMouseOver="hilite(2222)" onMouseOut="lolite()" onClick="logVariable('blog_url_params')" href="../../_variables/blog_url_params.html">$blog_url_params</a>['url_suffix'] = 'thrd_ID='.<a class="var it1083" onMouseOver="hilite(1083)" onMouseOut="lolite()" onClick="logVariable('thrd_ID')" href="../../_variables/thrd_ID.html">$thrd_ID</a>;
<a name="l1066"><span class="linenum">1066</span></a>                  }
<a name="l1067"><span class="linenum">1067</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2219" onMouseOver="hilite(2219)" onMouseOut="lolite()" onClick="logVariable('msg_Blog')" href="../../_variables/msg_Blog.html">$msg_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'url', <a class="var it2222" onMouseOver="hilite(2222)" onMouseOut="lolite()" onClick="logVariable('blog_url_params')" href="../../_variables/blog_url_params.html">$blog_url_params</a> ) );
<a name="l1068"><span class="linenum">1068</span></a>              }
<a name="l1069"><span class="linenum">1069</span></a>  
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">            // just in case some robot would be logged in:</span>
<a name="l1071"><span class="linenum">1071</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Messaging module';
<a name="l1072"><span class="linenum">1072</span></a>              <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l1073"><span class="linenum">1073</span></a>  
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment">            // Display messages depending on user email status</span>
<a name="l1075"><span class="linenum">1075</span></a>              <a class="function" onClick="logFunction('display_user_email_status_message')" href="../../_functions/display_user_email_status_message.html" onMouseOver="funcPopup(event,'display_user_email_status_message')">display_user_email_status_message</a>();
<a name="l1076"><span class="linenum">1076</span></a>              break;
<a name="l1077"><span class="linenum">1077</span></a>  
<a name="l1078"><span class="linenum">1078</span></a>          case 'login':
<a name="l1079"><span class="linenum">1079</span></a>              global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>, <a class="var it1866" onMouseOver="hilite(1866)" onMouseOut="lolite()" onClick="logVariable('transmit_hashed_password')" href="../../_variables/transmit_hashed_password.html">$transmit_hashed_password</a>;
<a name="l1080"><span class="linenum">1080</span></a>  
<a name="l1081"><span class="linenum">1081</span></a>              if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1082"><span class="linenum">1082</span></a>              { // User is already logged in
<a name="l1083"><span class="linenum">1083</span></a>                  if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_be_validated' ) )
<a name="l1084"><span class="linenum">1084</span></a>                  { // account is not active yet, redirect to the account activation page
<a name="l1085"><span class="linenum">1085</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You are logged in but your account is not activated. You will find instructions about activating your account below:' ) );
<a name="l1086"><span class="linenum">1086</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1088"><span class="linenum">1088</span></a>                  }
<a name="l1089"><span class="linenum">1089</span></a>  
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment">                // User is already logged in, redirect to &quot;redirect_to&quot; page</span>
<a name="l1091"><span class="linenum">1091</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You are already logged in.' ), 'note' );
<a name="l1092"><span class="linenum">1092</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', NULL );
<a name="l1093"><span class="linenum">1093</span></a>                  if( empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l1094"><span class="linenum">1094</span></a>                  { // If empty redirect to referer page
<a name="l1095"><span class="linenum">1095</span></a>                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = '';
<a name="l1096"><span class="linenum">1096</span></a>                  }
<a name="l1097"><span class="linenum">1097</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 302 );
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">                // will have exited</span>
<a name="l1099"><span class="linenum">1099</span></a>              }
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>              if( <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a> = &amp; get_setting_Blog( 'login_blog_ID' ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10742" onMouseOver="hilite(10742)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l1102"><span class="linenum">1102</span></a>              { // Redirect to special blog for login/register actions if it is defined in general settings
<a name="l1103"><span class="linenum">1103</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'loginurl', array( 'glue' =&gt; '&amp;' ) ) );
<a name="l1104"><span class="linenum">1104</span></a>              }
<a name="l1105"><span class="linenum">1105</span></a>  
<a name="l1106"><span class="linenum">1106</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Login form';
<a name="l1107"><span class="linenum">1107</span></a>              <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l1108"><span class="linenum">1108</span></a>              break;
<a name="l1109"><span class="linenum">1109</span></a>  
<a name="l1110"><span class="linenum">1110</span></a>          case 'register':
<a name="l1111"><span class="linenum">1111</span></a>              if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1112"><span class="linenum">1112</span></a>              { // If user is logged in the register form should not be displayed. In this case redirect to the blog home page.
<a name="l1113"><span class="linenum">1113</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You are already logged in.' ), 'note' );
<a name="l1114"><span class="linenum">1114</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), false );
<a name="l1115"><span class="linenum">1115</span></a>              }
<a name="l1116"><span class="linenum">1116</span></a>  
<a name="l1117"><span class="linenum">1117</span></a>              if( <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a> = &amp; get_setting_Blog( 'login_blog_ID' ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10742" onMouseOver="hilite(10742)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l1118"><span class="linenum">1118</span></a>              { // Redirect to special blog for login/register actions if it is defined in general settings
<a name="l1119"><span class="linenum">1119</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'registerurl', array( 'glue' =&gt; '&amp;' ) ) );
<a name="l1120"><span class="linenum">1120</span></a>              }
<a name="l1121"><span class="linenum">1121</span></a>  
<a name="l1122"><span class="linenum">1122</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Register form';
<a name="l1123"><span class="linenum">1123</span></a>              <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l1124"><span class="linenum">1124</span></a>  
<a name="l1125"><span class="linenum">1125</span></a>  <span class="comment">            // Check invitation code if it exists and registration is enabled</span>
<a name="l1126"><span class="linenum">1126</span></a>              global <a class="var it2224" onMouseOver="hilite(2224)" onMouseOut="lolite()" onClick="logVariable('display_invitation')" href="../../_variables/display_invitation.html">$display_invitation</a>;
<a name="l1127"><span class="linenum">1127</span></a>              <a class="var it2224" onMouseOver="hilite(2224)" onMouseOut="lolite()" onClick="logVariable('display_invitation')" href="../../_variables/display_invitation.html">$display_invitation</a> = <a class="function" onClick="logFunction('check_invitation_code')" href="../../_functions/check_invitation_code.html" onMouseOver="funcPopup(event,'check_invitation_code')">check_invitation_code</a>();
<a name="l1128"><span class="linenum">1128</span></a>              break;
<a name="l1129"><span class="linenum">1129</span></a>  
<a name="l1130"><span class="linenum">1130</span></a>          case 'lostpassword':
<a name="l1131"><span class="linenum">1131</span></a>              if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1132"><span class="linenum">1132</span></a>              { // If user is logged in the lost password form should not be displayed. In this case redirect to the blog home page.
<a name="l1133"><span class="linenum">1133</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You are already logged in.' ), 'note' );
<a name="l1134"><span class="linenum">1134</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), false );
<a name="l1135"><span class="linenum">1135</span></a>              }
<a name="l1136"><span class="linenum">1136</span></a>  
<a name="l1137"><span class="linenum">1137</span></a>              if( <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a> = &amp; get_setting_Blog( 'login_blog_ID' ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10742" onMouseOver="hilite(10742)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l1138"><span class="linenum">1138</span></a>              { // Redirect to special blog for login/register actions if it is defined in general settings
<a name="l1139"><span class="linenum">1139</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'lostpasswordurl', array( 'glue' =&gt; '&amp;' ) ) );
<a name="l1140"><span class="linenum">1140</span></a>              }
<a name="l1141"><span class="linenum">1141</span></a>  
<a name="l1142"><span class="linenum">1142</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Lost password form';
<a name="l1143"><span class="linenum">1143</span></a>              <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l1144"><span class="linenum">1144</span></a>              break;
<a name="l1145"><span class="linenum">1145</span></a>  
<a name="l1146"><span class="linenum">1146</span></a>          case 'activateinfo':
<a name="l1147"><span class="linenum">1147</span></a>              if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1148"><span class="linenum">1148</span></a>              { // Redirect to the login page for anonymous users
<a name="l1149"><span class="linenum">1149</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must log in before you can activate your account.' ) );
<a name="l1150"><span class="linenum">1150</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>('cannot see messages'), 302 );
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">                // will have exited</span>
<a name="l1152"><span class="linenum">1152</span></a>              }
<a name="l1153"><span class="linenum">1153</span></a>  
<a name="l1154"><span class="linenum">1154</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_be_validated' ) )
<a name="l1155"><span class="linenum">1155</span></a>              { // don't display activateinfo screen
<a name="l1156"><span class="linenum">1156</span></a>                  <a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('after_email_validation')" href="../../_variables/after_email_validation.html">$after_email_validation</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'after_email_validation' );
<a name="l1157"><span class="linenum">1157</span></a>                  if( <a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('after_email_validation')" href="../../_variables/after_email_validation.html">$after_email_validation</a> == 'return_to_original' )
<a name="l1158"><span class="linenum">1158</span></a>                  { // we want to return to original page after account activation
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment">                    // check if Session 'validatemail.redirect_to' param is still set</span>
<a name="l1160"><span class="linenum">1160</span></a>                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'core.validatemail.redirect_to' );
<a name="l1161"><span class="linenum">1161</span></a>                      if( empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l1162"><span class="linenum">1162</span></a>                      { // Session param is empty try to get general redirect_to param
<a name="l1163"><span class="linenum">1163</span></a>                          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', '' );
<a name="l1164"><span class="linenum">1164</span></a>                      }
<a name="l1165"><span class="linenum">1165</span></a>                      else
<a name="l1166"><span class="linenum">1166</span></a>                      { // cleanup validateemail.redirect_to param from session
<a name="l1167"><span class="linenum">1167</span></a>                          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>('core.validatemail.redirect_to');
<a name="l1168"><span class="linenum">1168</span></a>                      }
<a name="l1169"><span class="linenum">1169</span></a>                  }
<a name="l1170"><span class="linenum">1170</span></a>                  else
<a name="l1171"><span class="linenum">1171</span></a>                  { // go to after email validation url which is set in the user general settings form
<a name="l1172"><span class="linenum">1172</span></a>                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('after_email_validation')" href="../../_variables/after_email_validation.html">$after_email_validation</a>;
<a name="l1173"><span class="linenum">1173</span></a>                  }
<a name="l1174"><span class="linenum">1174</span></a>                  if( empty( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ) || <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#disp=activateinfo#', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ) )
<a name="l1175"><span class="linenum">1175</span></a>                  { // redirect_to is pointing to the activate info display or is empty
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">                    // redirect to referer page</span>
<a name="l1177"><span class="linenum">1177</span></a>                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = '';
<a name="l1178"><span class="linenum">1178</span></a>                  }
<a name="l1179"><span class="linenum">1179</span></a>  
<a name="l1180"><span class="linenum">1180</span></a>                  if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'is_validated' ) )
<a name="l1181"><span class="linenum">1181</span></a>                  {
<a name="l1182"><span class="linenum">1182</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Your account has already been activated.' ) );
<a name="l1183"><span class="linenum">1183</span></a>                  }
<a name="l1184"><span class="linenum">1184</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 302 );
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">                // will have exited</span>
<a name="l1186"><span class="linenum">1186</span></a>              }
<a name="l1187"><span class="linenum">1187</span></a>  
<a name="l1188"><span class="linenum">1188</span></a>              if( <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a> = &amp; get_setting_Blog( 'login_blog_ID' ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10742" onMouseOver="hilite(10742)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l1189"><span class="linenum">1189</span></a>              { // Redirect to special blog for login/register actions if it is defined in general settings
<a name="l1190"><span class="linenum">1190</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2223" onMouseOver="hilite(2223)" onMouseOut="lolite()" onClick="logVariable('login_Blog')" href="../../_variables/login_Blog.html">$login_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'activateinfourl', array( 'glue' =&gt; '&amp;' ) ) );
<a name="l1191"><span class="linenum">1191</span></a>              }
<a name="l1192"><span class="linenum">1192</span></a>              break;
<a name="l1193"><span class="linenum">1193</span></a>  
<a name="l1194"><span class="linenum">1194</span></a>          case 'profile':
<a name="l1195"><span class="linenum">1195</span></a>          case 'avatar':
<a name="l1196"><span class="linenum">1196</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="function" onClick="logFunction('param_action')" href="../../_functions/param_action.html" onMouseOver="funcPopup(event,'param_action')">param_action</a>();
<a name="l1197"><span class="linenum">1197</span></a>              if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'crop' &amp;&amp; <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1198"><span class="linenum">1198</span></a>              { // Check data for crop action:
<a name="l1199"><span class="linenum">1199</span></a>                  global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('cropped_File')" href="../../_variables/cropped_File.html">$cropped_File</a>;
<a name="l1200"><span class="linenum">1200</span></a>                  <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('file_ID')" href="../../_variables/file_ID.html">$file_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'file_ID', 'integer' );
<a name="l1201"><span class="linenum">1201</span></a>                  if( ! ( <a class="var it1194" onMouseOver="hilite(1194)" onMouseOut="lolite()" onClick="logVariable('cropped_File')" href="../../_variables/cropped_File.html">$cropped_File</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;get_File_by_ID( <a class="var it1193" onMouseOver="hilite(1193)" onMouseOut="lolite()" onClick="logVariable('file_ID')" href="../../_variables/file_ID.html">$file_ID</a>, <a class="var it823" onMouseOver="hilite(823)" onMouseOut="lolite()" onClick="logVariable('error_code')" href="../../_variables/error_code.html">$error_code</a> ) ) )
<a name="l1202"><span class="linenum">1202</span></a>                  { // Current user cannot crop this file
<a name="l1203"><span class="linenum">1203</span></a>                      <a class="function" onClick="logFunction('set_param')" href="../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'action', '' );
<a name="l1204"><span class="linenum">1204</span></a>                  }
<a name="l1205"><span class="linenum">1205</span></a>              }
<a name="l1206"><span class="linenum">1206</span></a>          case 'pwdchange':
<a name="l1207"><span class="linenum">1207</span></a>          case 'userprefs':
<a name="l1208"><span class="linenum">1208</span></a>          case 'subs':
<a name="l1209"><span class="linenum">1209</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Special feature page';
<a name="l1210"><span class="linenum">1210</span></a>              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'special_noindex' ) )
<a name="l1211"><span class="linenum">1211</span></a>              {    // We prefer robots not to index these pages:
<a name="l1212"><span class="linenum">1212</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l1213"><span class="linenum">1213</span></a>              }
<a name="l1214"><span class="linenum">1214</span></a>  
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">            // Display messages depending on user email status</span>
<a name="l1216"><span class="linenum">1216</span></a>              <a class="function" onClick="logFunction('display_user_email_status_message')" href="../../_functions/display_user_email_status_message.html" onMouseOver="funcPopup(event,'display_user_email_status_message')">display_user_email_status_message</a>();
<a name="l1217"><span class="linenum">1217</span></a>              break;
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>          case 'users':
<a name="l1220"><span class="linenum">1220</span></a>              if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; !<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'allow_anonymous_user_list' ) ) 
<a name="l1221"><span class="linenum">1221</span></a>              { // Redirect to the login page if not logged in and allow anonymous user setting is OFF
<a name="l1222"><span class="linenum">1222</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must log in to view the user directory.' ) );
<a name="l1223"><span class="linenum">1223</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>( 'cannot see user' ), 302 );
<a name="l1224"><span class="linenum">1224</span></a>  <span class="comment">                // will have exited</span>
<a name="l1225"><span class="linenum">1225</span></a>              }
<a name="l1226"><span class="linenum">1226</span></a>  
<a name="l1227"><span class="linenum">1227</span></a>              if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; ( !<a class="function" onClick="logFunction('check_user_status')" href="../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>( 'can_view_users' ) ) )
<a name="l1228"><span class="linenum">1228</span></a>              { // user status doesn't permit to view users list
<a name="l1229"><span class="linenum">1229</span></a>                  if( <a class="function" onClick="logFunction('check_user_status')" href="../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>( 'can_be_validated' ) )
<a name="l1230"><span class="linenum">1230</span></a>                  { // user is logged in but his/her account is not active yet
<a name="l1231"><span class="linenum">1231</span></a>  <span class="comment">                    // Redirect to the account activation page</span>
<a name="l1232"><span class="linenum">1232</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account before you can view the user directory. &lt;b&gt;See below:&lt;/b&gt;' ) );
<a name="l1233"><span class="linenum">1233</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l1234"><span class="linenum">1234</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1235"><span class="linenum">1235</span></a>                  }
<a name="l1236"><span class="linenum">1236</span></a>  
<a name="l1237"><span class="linenum">1237</span></a>  <span class="comment">                // set where to redirect</span>
<a name="l1238"><span class="linenum">1238</span></a>                  <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a> = ( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) ? <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a> : <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>() );
<a name="l1239"><span class="linenum">1239</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Your account status currently does not permit to view the user directory.' ) );
<a name="l1240"><span class="linenum">1240</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a>, 302 );
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment">                // will have exited</span>
<a name="l1242"><span class="linenum">1242</span></a>              }
<a name="l1243"><span class="linenum">1243</span></a>  
<a name="l1244"><span class="linenum">1244</span></a>              if( <a class="function" onClick="logFunction('has_cross_country_restriction')" href="../../_functions/has_cross_country_restriction.html" onMouseOver="funcPopup(event,'has_cross_country_restriction')">has_cross_country_restriction</a>( 'users', 'list' ) &amp;&amp; empty( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a> ) )
<a name="l1245"><span class="linenum">1245</span></a>              { // User may browse other users only from the same country
<a name="l1246"><span class="linenum">1246</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please specify your country before attempting to contact other users.') );
<a name="l1247"><span class="linenum">1247</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_user_profile_url')" href="../../_functions/get_user_profile_url.html" onMouseOver="funcPopup(event,'get_user_profile_url')">get_user_profile_url</a>() );
<a name="l1248"><span class="linenum">1248</span></a>              }
<a name="l1249"><span class="linenum">1249</span></a>  
<a name="l1250"><span class="linenum">1250</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Users list';
<a name="l1251"><span class="linenum">1251</span></a>              <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l1252"><span class="linenum">1252</span></a>              break;
<a name="l1253"><span class="linenum">1253</span></a>  
<a name="l1254"><span class="linenum">1254</span></a>          case 'user':
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment">            // get user_ID because we want it in redirect_to in case we need to ask for login.</span>
<a name="l1256"><span class="linenum">1256</span></a>              <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', '', true );
<a name="l1257"><span class="linenum">1257</span></a>  <span class="comment">            // set where to redirect in case of error</span>
<a name="l1258"><span class="linenum">1258</span></a>              <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a> = ( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) ? <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a> : <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>() );
<a name="l1259"><span class="linenum">1259</span></a>  
<a name="l1260"><span class="linenum">1260</span></a>              if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1261"><span class="linenum">1261</span></a>              { // Redirect to the login page if not logged in and allow anonymous user setting is OFF
<a name="l1262"><span class="linenum">1262</span></a>                  <a class="var it2227" onMouseOver="hilite(2227)" onMouseOut="lolite()" onClick="logVariable('user_available_by_group_level')" href="../../_variables/user_available_by_group_level.html">$user_available_by_group_level</a> = true;
<a name="l1263"><span class="linenum">1263</span></a>                  if( ! empty( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l1264"><span class="linenum">1264</span></a>                  {
<a name="l1265"><span class="linenum">1265</span></a>                      <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l1266"><span class="linenum">1266</span></a>                      if( <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, false ) )
<a name="l1267"><span class="linenum">1267</span></a>                      { // If user exists we can check if the anonymous users have an access to view the user by group level limitation
<a name="l1268"><span class="linenum">1268</span></a>                          <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;get_Group();
<a name="l1269"><span class="linenum">1269</span></a>                          <a class="var it2227" onMouseOver="hilite(2227)" onMouseOut="lolite()" onClick="logVariable('user_available_by_group_level')" href="../../_variables/user_available_by_group_level.html">$user_available_by_group_level</a> = <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('Group')" class="var it10677" onMouseOver="hilite(10677)" onMouseOut="lolite()" href="../../_variables/Group.html">Group</a>-&gt;level &gt;= <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('allow_anonymous_user_level_min') &amp;&amp; <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('Group')" class="var it10677" onMouseOver="hilite(10677)" onMouseOut="lolite()" href="../../_variables/Group.html">Group</a>-&gt;level &lt;= <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('allow_anonymous_user_level_max');
<a name="l1270"><span class="linenum">1270</span></a>                      }
<a name="l1271"><span class="linenum">1271</span></a>                  }
<a name="l1272"><span class="linenum">1272</span></a>  
<a name="l1273"><span class="linenum">1273</span></a>                  if( ! <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'allow_anonymous_user_profiles' ) || ! <a class="var it2227" onMouseOver="hilite(2227)" onMouseOut="lolite()" onClick="logVariable('user_available_by_group_level')" href="../../_variables/user_available_by_group_level.html">$user_available_by_group_level</a> || empty( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l1274"><span class="linenum">1274</span></a>                  { // If this user is not available for anonymous users
<a name="l1275"><span class="linenum">1275</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You must log in to view this user profile.') );
<a name="l1276"><span class="linenum">1276</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>('cannot see user'), 302 );
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1278"><span class="linenum">1278</span></a>                  }
<a name="l1279"><span class="linenum">1279</span></a>              }
<a name="l1280"><span class="linenum">1280</span></a>  
<a name="l1281"><span class="linenum">1281</span></a>              if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; ( !<a class="function" onClick="logFunction('check_user_status')" href="../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>( 'can_view_user', <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> ) ) )
<a name="l1282"><span class="linenum">1282</span></a>              { // user is logged in, but his/her status doesn't permit to view user profile
<a name="l1283"><span class="linenum">1283</span></a>                  if( <a class="function" onClick="logFunction('check_user_status')" href="../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>('can_be_validated') )
<a name="l1284"><span class="linenum">1284</span></a>                  { // user is logged in but his/her account is not active yet
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment">                    // Redirect to the account activation page</span>
<a name="l1286"><span class="linenum">1286</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You must activate your account before you can view this user profile. &lt;b&gt;See below:&lt;/b&gt;') );
<a name="l1287"><span class="linenum">1287</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1289"><span class="linenum">1289</span></a>                  }
<a name="l1290"><span class="linenum">1290</span></a>  
<a name="l1291"><span class="linenum">1291</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Your account status currently does not permit to view this user profile.') );
<a name="l1292"><span class="linenum">1292</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a>, 302 );
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment">                // will have exited</span>
<a name="l1294"><span class="linenum">1294</span></a>              }
<a name="l1295"><span class="linenum">1295</span></a>  
<a name="l1296"><span class="linenum">1296</span></a>              if( !empty(<a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>) )
<a name="l1297"><span class="linenum">1297</span></a>              {
<a name="l1298"><span class="linenum">1298</span></a>                  <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l1299"><span class="linenum">1299</span></a>                  <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, false );
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>                  if( empty( <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a> ) )
<a name="l1302"><span class="linenum">1302</span></a>                  {
<a name="l1303"><span class="linenum">1303</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The requested user does not exist!') );
<a name="l1304"><span class="linenum">1304</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a> );
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1306"><span class="linenum">1306</span></a>                  }
<a name="l1307"><span class="linenum">1307</span></a>  
<a name="l1308"><span class="linenum">1308</span></a>                  if( <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>('is_closed') )
<a name="l1309"><span class="linenum">1309</span></a>                  {
<a name="l1310"><span class="linenum">1310</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The requested user account is closed!') );
<a name="l1311"><span class="linenum">1311</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a> );
<a name="l1312"><span class="linenum">1312</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1313"><span class="linenum">1313</span></a>                  }
<a name="l1314"><span class="linenum">1314</span></a>  
<a name="l1315"><span class="linenum">1315</span></a>                  if( <a class="function" onClick="logFunction('has_cross_country_restriction')" href="../../_functions/has_cross_country_restriction.html" onMouseOver="funcPopup(event,'has_cross_country_restriction')">has_cross_country_restriction</a>( 'any' ) )
<a name="l1316"><span class="linenum">1316</span></a>                  {
<a name="l1317"><span class="linenum">1317</span></a>                      if( empty( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a>  ) )
<a name="l1318"><span class="linenum">1318</span></a>                      { // Current User country is not set
<a name="l1319"><span class="linenum">1319</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please specify your country before attempting to contact other users.') );
<a name="l1320"><span class="linenum">1320</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_user_profile_url')" href="../../_functions/get_user_profile_url.html" onMouseOver="funcPopup(event,'get_user_profile_url')">get_user_profile_url</a>() );
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment">                        // will have exited</span>
<a name="l1322"><span class="linenum">1322</span></a>                      }
<a name="l1323"><span class="linenum">1323</span></a>  
<a name="l1324"><span class="linenum">1324</span></a>                      if( <a class="function" onClick="logFunction('has_cross_country_restriction')" href="../../_functions/has_cross_country_restriction.html" onMouseOver="funcPopup(event,'has_cross_country_restriction')">has_cross_country_restriction</a>( 'users', 'profile' ) &amp;&amp; ( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a> !== <a class="var it173" onMouseOver="hilite(173)" onMouseOut="lolite()" onClick="logVariable('User')" href="../../_variables/User.html">$User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10677" onMouseOver="hilite(10677)" onMouseOut="lolite()" href="../../_variables/ctry_ID.html">ctry_ID</a> ) )
<a name="l1325"><span class="linenum">1325</span></a>                      { // Current user country is different then edited user country and cross country user browsing is not enabled.
<a name="l1326"><span class="linenum">1326</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You don\'t have permission to view this user profile.') );
<a name="l1327"><span class="linenum">1327</span></a>                          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a>, 'disp=403', '&amp;' ) );
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment">                        // will have exited</span>
<a name="l1329"><span class="linenum">1329</span></a>                      }
<a name="l1330"><span class="linenum">1330</span></a>                  }
<a name="l1331"><span class="linenum">1331</span></a>              }
<a name="l1332"><span class="linenum">1332</span></a>  
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment">            // Initialize users list from session cache in order to display prev/next links:</span>
<a name="l1334"><span class="linenum">1334</span></a>  <span class="comment">            // It is used to navigate between users</span>
<a name="l1335"><span class="linenum">1335</span></a>              <a class="function" onClick="logFunction('load_class')" href="../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'users/model/_userlist.class.php', 'UserList' );
<a name="l1336"><span class="linenum">1336</span></a>              global <a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('UserList')" href="../../_variables/UserList.html">$UserList</a>;
<a name="l1337"><span class="linenum">1337</span></a>              <a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('UserList')" href="../../_variables/UserList.html">$UserList</a> = <span class="keyword">new </span><a class="class" onClick="logClass('UserList')" href="../../_classes/userlist.html" onMouseOver="classPopup(event,'userlist')">UserList</a>();
<a name="l1338"><span class="linenum">1338</span></a>              <a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('UserList')" href="../../_variables/UserList.html">$UserList</a>-&gt;<a onClick="logVariable('memorize')" class="var it10743" onMouseOver="hilite(10743)" onMouseOut="lolite()" href="../../_variables/memorize.html">memorize</a> = false;
<a name="l1339"><span class="linenum">1339</span></a>              <a class="var it2228" onMouseOver="hilite(2228)" onMouseOut="lolite()" onClick="logVariable('UserList')" href="../../_variables/UserList.html">$UserList</a>-&gt;<a class="function" onClick="logFunction('load_from_Request')" href="../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>();
<a name="l1340"><span class="linenum">1340</span></a>  
<a name="l1341"><span class="linenum">1341</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'User display';
<a name="l1342"><span class="linenum">1342</span></a>              break;
<a name="l1343"><span class="linenum">1343</span></a>  
<a name="l1344"><span class="linenum">1344</span></a>          case 'edit':
<a name="l1345"><span class="linenum">1345</span></a>              global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it342" onMouseOver="hilite(342)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a>;
<a name="l1346"><span class="linenum">1346</span></a>  
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment">            // Post ID, go from $_GET when we edit a post from Front-office</span>
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment">            //          or from $_POST when we switch from Back-office</span>
<a name="l1349"><span class="linenum">1349</span></a>              <a class="var it342" onMouseOver="hilite(342)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'p', 'integer', ( empty( <a class="var it342" onMouseOver="hilite(342)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a> ) ? 0 : <a class="var it342" onMouseOver="hilite(342)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a> ), true );
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>              if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1352"><span class="linenum">1352</span></a>              { // Redirect to the login page if not logged in and allow anonymous user setting is OFF
<a name="l1353"><span class="linenum">1353</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 'disp=edit' );
<a name="l1354"><span class="linenum">1354</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must log in to create &amp; edit posts.' ) );
<a name="l1355"><span class="linenum">1355</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>( 'cannot edit posts', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ), 302 );
<a name="l1356"><span class="linenum">1356</span></a>  <span class="comment">                // will have exited</span>
<a name="l1357"><span class="linenum">1357</span></a>              }
<a name="l1358"><span class="linenum">1358</span></a>  
<a name="l1359"><span class="linenum">1359</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_edit_post' ) )
<a name="l1360"><span class="linenum">1360</span></a>              {
<a name="l1361"><span class="linenum">1361</span></a>                  if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_be_validated' ) )
<a name="l1362"><span class="linenum">1362</span></a>                  { // user is logged in but his/her account was not activated yet
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">                    // Redirect to the account activation page</span>
<a name="l1364"><span class="linenum">1364</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account before you can create &amp; edit posts. &lt;b&gt;See below:&lt;/b&gt;' ) );
<a name="l1365"><span class="linenum">1365</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1367"><span class="linenum">1367</span></a>                  }
<a name="l1368"><span class="linenum">1368</span></a>  
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">                // Redirect to the blog url for users without messaging permission</span>
<a name="l1370"><span class="linenum">1370</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You are not allowed to create &amp; edit posts!') );
<a name="l1371"><span class="linenum">1371</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 302 );
<a name="l1372"><span class="linenum">1372</span></a>              }
<a name="l1373"><span class="linenum">1373</span></a>  
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment">            // user logged in and the account was activated</span>
<a name="l1375"><span class="linenum">1375</span></a>              <a class="function" onClick="logFunction('check_item_perm_edit')" href="../../_functions/check_item_perm_edit.html" onMouseOver="funcPopup(event,'check_item_perm_edit')">check_item_perm_edit</a>( <a class="var it342" onMouseOver="hilite(342)" onMouseOut="lolite()" onClick="logVariable('post_ID')" href="../../_variables/post_ID.html">$post_ID</a> );
<a name="l1376"><span class="linenum">1376</span></a>  
<a name="l1377"><span class="linenum">1377</span></a>              if( ! <a class="function" onClick="logFunction('blog_has_cats')" href="../../_functions/blog_has_cats.html" onMouseOver="funcPopup(event,'blog_has_cats')">blog_has_cats</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) )
<a name="l1378"><span class="linenum">1378</span></a>              { // No categories are in this blog
<a name="l1379"><span class="linenum">1379</span></a>                  <a class="var it1349" onMouseOver="hilite(1349)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../../_variables/error_message.html">$error_message</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Since this blog has no categories, you cannot post into it.');
<a name="l1380"><span class="linenum">1380</span></a>                  if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_cats', 'edit', false, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) )
<a name="l1381"><span class="linenum">1381</span></a>                  { // If current user has a permission to create a category
<a name="l1382"><span class="linenum">1382</span></a>                      global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>;
<a name="l1383"><span class="linenum">1383</span></a>                      <a class="var it1349" onMouseOver="hilite(1349)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../../_variables/error_message.html">$error_message</a> .= ' '.sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You must &lt;a %s&gt;create categories&lt;/a&gt; first.'), 'href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>.'?ctrl=chapters&amp;amp;blog='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>.'&quot;');
<a name="l1384"><span class="linenum">1384</span></a>                  }
<a name="l1385"><span class="linenum">1385</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it1349" onMouseOver="hilite(1349)" onMouseOut="lolite()" onClick="logVariable('error_message')" href="../../_variables/error_message.html">$error_message</a>, 'error' );
<a name="l1386"><span class="linenum">1386</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 302 );
<a name="l1387"><span class="linenum">1387</span></a>              }
<a name="l1388"><span class="linenum">1388</span></a>  
<a name="l1389"><span class="linenum">1389</span></a>  <span class="comment">            // Prepare the 'In-skin editing':</span>
<a name="l1390"><span class="linenum">1390</span></a>              <a class="function" onClick="logFunction('init_inskin_editing')" href="../../_functions/init_inskin_editing.html" onMouseOver="funcPopup(event,'init_inskin_editing')">init_inskin_editing</a>();
<a name="l1391"><span class="linenum">1391</span></a>              break;
<a name="l1392"><span class="linenum">1392</span></a>  
<a name="l1393"><span class="linenum">1393</span></a>          case 'edit_comment':
<a name="l1394"><span class="linenum">1394</span></a>              global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>, <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>, <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>, <a class="var it2229" onMouseOver="hilite(2229)" onMouseOut="lolite()" onClick="logVariable('comment_title')" href="../../_variables/comment_title.html">$comment_title</a>, <a class="var it2230" onMouseOver="hilite(2230)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../_variables/comment_content.html">$comment_content</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../_variables/display_params.html">$display_params</a>;
<a name="l1395"><span class="linenum">1395</span></a>  
<a name="l1396"><span class="linenum">1396</span></a>  <span class="comment">            // comment ID</span>
<a name="l1397"><span class="linenum">1397</span></a>              <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'c', 'integer', 0, true );
<a name="l1398"><span class="linenum">1398</span></a>  
<a name="l1399"><span class="linenum">1399</span></a>              if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1400"><span class="linenum">1400</span></a>              { // Redirect to the login page if not logged in and allow anonymous user setting is OFF
<a name="l1401"><span class="linenum">1401</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 'disp=edit_comment' );
<a name="l1402"><span class="linenum">1402</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must log in to edit comments.' ) );
<a name="l1403"><span class="linenum">1403</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>( 'cannot edit comments', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> ), 302 );
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment">                // will have exited</span>
<a name="l1405"><span class="linenum">1405</span></a>              }
<a name="l1406"><span class="linenum">1406</span></a>  
<a name="l1407"><span class="linenum">1407</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_edit_comment' ) )
<a name="l1408"><span class="linenum">1408</span></a>              {
<a name="l1409"><span class="linenum">1409</span></a>                  if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_be_validated' ) )
<a name="l1410"><span class="linenum">1410</span></a>                  { // user is logged in but his/her account was not activated yet
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">                    // Redirect to the account activation page</span>
<a name="l1412"><span class="linenum">1412</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You must activate your account before you can edit comments. &lt;b&gt;See below:&lt;/b&gt;' ) );
<a name="l1413"><span class="linenum">1413</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1415"><span class="linenum">1415</span></a>                  }
<a name="l1416"><span class="linenum">1416</span></a>  
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment">                // Redirect to the blog url for users without messaging permission</span>
<a name="l1418"><span class="linenum">1418</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'You are not allowed to edit comments!' );
<a name="l1419"><span class="linenum">1419</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 302 );
<a name="l1420"><span class="linenum">1420</span></a>              }
<a name="l1421"><span class="linenum">1421</span></a>  
<a name="l1422"><span class="linenum">1422</span></a>              if( empty( <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> ) )
<a name="l1423"><span class="linenum">1423</span></a>              { // Can't edit a not exisiting comment
<a name="l1424"><span class="linenum">1424</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Invalid comment edit URL!' );
<a name="l1425"><span class="linenum">1425</span></a>                  global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l1426"><span class="linenum">1426</span></a>                  <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = 404;
<a name="l1427"><span class="linenum">1427</span></a>                  break;
<a name="l1428"><span class="linenum">1428</span></a>              }
<a name="l1429"><span class="linenum">1429</span></a>  
<a name="l1430"><span class="linenum">1430</span></a>              <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a> = &amp; get_CommentCache();
<a name="l1431"><span class="linenum">1431</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a>-&gt;get_by_ID( <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> );
<a name="l1432"><span class="linenum">1432</span></a>              <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a> = <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l1433"><span class="linenum">1433</span></a>  
<a name="l1434"><span class="linenum">1434</span></a>              if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'edit', false, <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> ) )
<a name="l1435"><span class="linenum">1435</span></a>              { // If User has no permission to edit comments with this comment status:
<a name="l1436"><span class="linenum">1436</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'You are not allowed to edit the previously selected comment!' );
<a name="l1437"><span class="linenum">1437</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 302 );
<a name="l1438"><span class="linenum">1438</span></a>              }
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>              <a class="var it2229" onMouseOver="hilite(2229)" onMouseOut="lolite()" onClick="logVariable('comment_title')" href="../../_variables/comment_title.html">$comment_title</a> = '';
<a name="l1441"><span class="linenum">1441</span></a>              <a class="var it2230" onMouseOver="hilite(2230)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../_variables/comment_content.html">$comment_content</a> = <a class="function" onClick="logFunction('htmlspecialchars_decode')" href="../../_functions/htmlspecialchars_decode.html" onMouseOver="funcPopup(event,'htmlspecialchars_decode')">htmlspecialchars_decode</a>( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('content')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> );
<a name="l1442"><span class="linenum">1442</span></a>  
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment">            // Format content for editing, if we were not already in editing...</span>
<a name="l1444"><span class="linenum">1444</span></a>              <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../../_variables/Plugins_admin.html">$Plugins_admin</a> = &amp; get_Plugins_admin();
<a name="l1445"><span class="linenum">1445</span></a>              <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l1446"><span class="linenum">1446</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array( 'object_type' =&gt; 'Comment', 'object_Blog' =&gt; &amp; <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it10681" onMouseOver="hilite(10681)" onMouseOut="lolite()" href="../../_variables/Blog.html">Blog</a> );
<a name="l1447"><span class="linenum">1447</span></a>              <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../../_variables/Plugins_admin.html">$Plugins_admin</a>-&gt;<a class="function" onClick="logFunction('unfilter_contents')" href="../../_functions/unfilter_contents.html" onMouseOver="funcPopup(event,'unfilter_contents')">unfilter_contents</a>( <a class="var it2229" onMouseOver="hilite(2229)" onMouseOut="lolite()" onClick="logVariable('comment_title')" href="../../_variables/comment_title.html">$comment_title</a> <span class="comment">/* by ref */</span>, <a class="var it2230" onMouseOver="hilite(2230)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../_variables/comment_content.html">$comment_content</a> <span class="comment">/* by ref */</span>, <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>(), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1448"><span class="linenum">1448</span></a>  
<a name="l1449"><span class="linenum">1449</span></a>              <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>;
<a name="l1450"><span class="linenum">1450</span></a>  
<a name="l1451"><span class="linenum">1451</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../_variables/display_params.html">$display_params</a> = array();
<a name="l1452"><span class="linenum">1452</span></a>              break;
<a name="l1453"><span class="linenum">1453</span></a>  
<a name="l1454"><span class="linenum">1454</span></a>          case 'useritems':
<a name="l1455"><span class="linenum">1455</span></a>          case 'usercomments':
<a name="l1456"><span class="linenum">1456</span></a>              global <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../_variables/display_params.html">$display_params</a>, <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('viewed_User')" href="../../_variables/viewed_User.html">$viewed_User</a>;
<a name="l1457"><span class="linenum">1457</span></a>  
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">            // get user_ID because we want it in redirect_to in case we need to ask for login.</span>
<a name="l1459"><span class="linenum">1459</span></a>              <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', true, true );
<a name="l1460"><span class="linenum">1460</span></a>              if( empty( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l1461"><span class="linenum">1461</span></a>              {
<a name="l1462"><span class="linenum">1462</span></a>                  <a class="function" onClick="logFunction('bad_request_die')" href="../../_functions/bad_request_die.html" onMouseOver="funcPopup(event,'bad_request_die')">bad_request_die</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Parameter &amp;laquo;%s&amp;raquo; is required!'), 'user_ID' ) );
<a name="l1463"><span class="linenum">1463</span></a>              }
<a name="l1464"><span class="linenum">1464</span></a>  <span class="comment">            // set where to redirect in case of error</span>
<a name="l1465"><span class="linenum">1465</span></a>              <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a> = empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) ? <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a> : <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l1466"><span class="linenum">1466</span></a>  
<a name="l1467"><span class="linenum">1467</span></a>              if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1468"><span class="linenum">1468</span></a>              { // Redirect to the login page if not logged in and allow anonymous user setting is OFF
<a name="l1469"><span class="linenum">1469</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You must log in to view this user profile.') );
<a name="l1470"><span class="linenum">1470</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_login_url')" href="../../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>( 'cannot see user' ), 302 );
<a name="l1471"><span class="linenum">1471</span></a>  <span class="comment">                // will have exited</span>
<a name="l1472"><span class="linenum">1472</span></a>              }
<a name="l1473"><span class="linenum">1473</span></a>  
<a name="l1474"><span class="linenum">1474</span></a>              if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; ( !<a class="function" onClick="logFunction('check_user_status')" href="../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>( 'can_view_user', <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> ) ) )
<a name="l1475"><span class="linenum">1475</span></a>              { // user is logged in, but his/her status doesn't permit to view user profile
<a name="l1476"><span class="linenum">1476</span></a>                  if( <a class="function" onClick="logFunction('check_user_status')" href="../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>( 'can_be_validated' ) )
<a name="l1477"><span class="linenum">1477</span></a>                  { // user is logged in but his/her account is not active yet
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment">                    // Redirect to the account activation page</span>
<a name="l1479"><span class="linenum">1479</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You must activate your account before you can view this user profile. &lt;b&gt;See below:&lt;/b&gt;') );
<a name="l1480"><span class="linenum">1480</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('get_activate_info_url')" href="../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>(), 302 );
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1482"><span class="linenum">1482</span></a>                  }
<a name="l1483"><span class="linenum">1483</span></a>  
<a name="l1484"><span class="linenum">1484</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Your account status currently does not permit to view this user profile.') );
<a name="l1485"><span class="linenum">1485</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a>, 302 );
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment">                // will have exited</span>
<a name="l1487"><span class="linenum">1487</span></a>              }
<a name="l1488"><span class="linenum">1488</span></a>  
<a name="l1489"><span class="linenum">1489</span></a>              if( !empty( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l1490"><span class="linenum">1490</span></a>              {
<a name="l1491"><span class="linenum">1491</span></a>                  <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l1492"><span class="linenum">1492</span></a>                  <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('viewed_User')" href="../../_variables/viewed_User.html">$viewed_User</a> = <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>, false );
<a name="l1493"><span class="linenum">1493</span></a>  
<a name="l1494"><span class="linenum">1494</span></a>                  if( empty( <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('viewed_User')" href="../../_variables/viewed_User.html">$viewed_User</a> ) )
<a name="l1495"><span class="linenum">1495</span></a>                  {
<a name="l1496"><span class="linenum">1496</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The requested user does not exist!') );
<a name="l1497"><span class="linenum">1497</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a> );
<a name="l1498"><span class="linenum">1498</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1499"><span class="linenum">1499</span></a>                  }
<a name="l1500"><span class="linenum">1500</span></a>  
<a name="l1501"><span class="linenum">1501</span></a>                  if( <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('viewed_User')" href="../../_variables/viewed_User.html">$viewed_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'is_closed' ) )
<a name="l1502"><span class="linenum">1502</span></a>                  {
<a name="l1503"><span class="linenum">1503</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The requested user account is closed!') );
<a name="l1504"><span class="linenum">1504</span></a>                      <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it2226" onMouseOver="hilite(2226)" onMouseOut="lolite()" onClick="logVariable('error_redirect_to')" href="../../_variables/error_redirect_to.html">$error_redirect_to</a> );
<a name="l1505"><span class="linenum">1505</span></a>  <span class="comment">                    // will have exited</span>
<a name="l1506"><span class="linenum">1506</span></a>                  }
<a name="l1507"><span class="linenum">1507</span></a>              }
<a name="l1508"><span class="linenum">1508</span></a>  
<a name="l1509"><span class="linenum">1509</span></a>              <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../_variables/display_params.html">$display_params</a> = !empty( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> ) ? <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'Results' ) : NULL;
<a name="l1510"><span class="linenum">1510</span></a>  
<a name="l1511"><span class="linenum">1511</span></a>              if( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> == 'useritems' )
<a name="l1512"><span class="linenum">1512</span></a>              { // Init items list
<a name="l1513"><span class="linenum">1513</span></a>                  global <a class="var it2232" onMouseOver="hilite(2232)" onMouseOut="lolite()" onClick="logVariable('user_ItemList')" href="../../_variables/user_ItemList.html">$user_ItemList</a>;
<a name="l1514"><span class="linenum">1514</span></a>  
<a name="l1515"><span class="linenum">1515</span></a>                  <a class="var it2233" onMouseOver="hilite(2233)" onMouseOut="lolite()" onClick="logVariable('useritems_Blog')" href="../../_variables/useritems_Blog.html">$useritems_Blog</a> = NULL;
<a name="l1516"><span class="linenum">1516</span></a>                  <a class="var it2232" onMouseOver="hilite(2232)" onMouseOut="lolite()" onClick="logVariable('user_ItemList')" href="../../_variables/user_ItemList.html">$user_ItemList</a> = <span class="keyword">new </span><a class="class" onClick="logClass('ItemList2')" href="../../_classes/itemlist2.html" onMouseOver="classPopup(event,'itemlist2')">ItemList2</a>( <a class="var it2233" onMouseOver="hilite(2233)" onMouseOut="lolite()" onClick="logVariable('useritems_Blog')" href="../../_variables/useritems_Blog.html">$useritems_Blog</a>, NULL, NULL, NULL, 'ItemCache', 'useritems_' );
<a name="l1517"><span class="linenum">1517</span></a>                  <a class="var it2232" onMouseOver="hilite(2232)" onMouseOut="lolite()" onClick="logVariable('user_ItemList')" href="../../_variables/user_ItemList.html">$user_ItemList</a>-&gt;<a class="function" onClick="logFunction('load_from_Request')" href="../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>();
<a name="l1518"><span class="linenum">1518</span></a>                  <a class="var it2232" onMouseOver="hilite(2232)" onMouseOut="lolite()" onClick="logVariable('user_ItemList')" href="../../_variables/user_ItemList.html">$user_ItemList</a>-&gt;<a class="function" onClick="logFunction('set_filters')" href="../../_functions/set_filters.html" onMouseOver="funcPopup(event,'set_filters')">set_filters</a>( array(
<a name="l1519"><span class="linenum">1519</span></a>                          'authors' =&gt; <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>,
<a name="l1520"><span class="linenum">1520</span></a>                      ), true, true );
<a name="l1521"><span class="linenum">1521</span></a>                  <a class="var it2232" onMouseOver="hilite(2232)" onMouseOut="lolite()" onClick="logVariable('user_ItemList')" href="../../_variables/user_ItemList.html">$user_ItemList</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>();
<a name="l1522"><span class="linenum">1522</span></a>              }
<a name="l1523"><span class="linenum">1523</span></a>              else // <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> == 'usercomments'
<a name="l1524"><span class="linenum">1524</span></a>              { // Init comments list
<a name="l1525"><span class="linenum">1525</span></a>                  global <a class="var it2234" onMouseOver="hilite(2234)" onMouseOut="lolite()" onClick="logVariable('user_CommentList')" href="../../_variables/user_CommentList.html">$user_CommentList</a>;
<a name="l1526"><span class="linenum">1526</span></a>  
<a name="l1527"><span class="linenum">1527</span></a>                  <a class="var it2234" onMouseOver="hilite(2234)" onMouseOut="lolite()" onClick="logVariable('user_CommentList')" href="../../_variables/user_CommentList.html">$user_CommentList</a> = <span class="keyword">new </span><a class="class" onClick="logClass('CommentList2')" href="../../_classes/commentlist2.html" onMouseOver="classPopup(event,'commentlist2')">CommentList2</a>( NULL, NULL, 'CommentCache', 'usercmts_' );
<a name="l1528"><span class="linenum">1528</span></a>                  <a class="var it2234" onMouseOver="hilite(2234)" onMouseOut="lolite()" onClick="logVariable('user_CommentList')" href="../../_variables/user_CommentList.html">$user_CommentList</a>-&gt;<a class="function" onClick="logFunction('load_from_Request')" href="../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>();
<a name="l1529"><span class="linenum">1529</span></a>                  <a class="var it2234" onMouseOver="hilite(2234)" onMouseOut="lolite()" onClick="logVariable('user_CommentList')" href="../../_variables/user_CommentList.html">$user_CommentList</a>-&gt;<a class="function" onClick="logFunction('set_filters')" href="../../_functions/set_filters.html" onMouseOver="funcPopup(event,'set_filters')">set_filters</a>( array(
<a name="l1530"><span class="linenum">1530</span></a>                          'author_IDs' =&gt; <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../_variables/user_ID.html">$user_ID</a>,
<a name="l1531"><span class="linenum">1531</span></a>                      ), true, true );
<a name="l1532"><span class="linenum">1532</span></a>                  <a class="var it2234" onMouseOver="hilite(2234)" onMouseOut="lolite()" onClick="logVariable('user_CommentList')" href="../../_variables/user_CommentList.html">$user_CommentList</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>();
<a name="l1533"><span class="linenum">1533</span></a>              }
<a name="l1534"><span class="linenum">1534</span></a>              break;
<a name="l1535"><span class="linenum">1535</span></a>  
<a name="l1536"><span class="linenum">1536</span></a>          case 'comments':
<a name="l1537"><span class="linenum">1537</span></a>              if( !<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'comments_latest' ) )
<a name="l1538"><span class="linenum">1538</span></a>              { // If latest comments page is disabled - Display 404 page with error message
<a name="l1539"><span class="linenum">1539</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('This feature is disabled.'), 'error' );
<a name="l1540"><span class="linenum">1540</span></a>                  global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l1541"><span class="linenum">1541</span></a>                  <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = '404';
<a name="l1542"><span class="linenum">1542</span></a>              }
<a name="l1543"><span class="linenum">1543</span></a>              break;
<a name="l1544"><span class="linenum">1544</span></a>  
<a name="l1545"><span class="linenum">1545</span></a>          case 'closeaccount':
<a name="l1546"><span class="linenum">1546</span></a>              global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>;
<a name="l1547"><span class="linenum">1547</span></a>              if( ! <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'account_close_enabled' ) ||
<a name="l1548"><span class="linenum">1548</span></a>                  ( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'users', 'edit', false ) ) ||
<a name="l1549"><span class="linenum">1549</span></a>                  ( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; ! <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'account_closing_success' ) ) )
<a name="l1550"><span class="linenum">1550</span></a>              { // If an account closing page is disabled - Display 404 page with error message
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment">              // Don't allow admins close own accounts from front office</span>
<a name="l1552"><span class="linenum">1552</span></a>  <span class="comment">              // Don't display this message for not logged in users, except of one case to display a bye message after account closing</span>
<a name="l1553"><span class="linenum">1553</span></a>                  global <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l1554"><span class="linenum">1554</span></a>                  <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = '404';
<a name="l1555"><span class="linenum">1555</span></a>              }
<a name="l1556"><span class="linenum">1556</span></a>              elseif( <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'account_closing_success' ) )
<a name="l1557"><span class="linenum">1557</span></a>              { // User has closed the account
<a name="l1558"><span class="linenum">1558</span></a>                  global <a class="var it2235" onMouseOver="hilite(2235)" onMouseOut="lolite()" onClick="logVariable('account_closing_success')" href="../../_variables/account_closing_success.html">$account_closing_success</a>;
<a name="l1559"><span class="linenum">1559</span></a>                  <a class="var it2235" onMouseOver="hilite(2235)" onMouseOut="lolite()" onClick="logVariable('account_closing_success')" href="../../_variables/account_closing_success.html">$account_closing_success</a> = <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'account_closing_success' );
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">                // Unset this temp session var to don't display the message twice</span>
<a name="l1561"><span class="linenum">1561</span></a>                  <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>( 'account_closing_success' );
<a name="l1562"><span class="linenum">1562</span></a>                  if( <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1563"><span class="linenum">1563</span></a>                  { // log out current User
<a name="l1564"><span class="linenum">1564</span></a>                      <a class="function" onClick="logFunction('logout')" href="../../_functions/logout.html" onMouseOver="funcPopup(event,'logout')">logout</a>();
<a name="l1565"><span class="linenum">1565</span></a>                  }
<a name="l1566"><span class="linenum">1566</span></a>              }
<a name="l1567"><span class="linenum">1567</span></a>              break;
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>          case 'tags':
<a name="l1570"><span class="linenum">1570</span></a>              <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a> = 'Tags';
<a name="l1571"><span class="linenum">1571</span></a>              if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>.'_noindex' ) )
<a name="l1572"><span class="linenum">1572</span></a>              {    // We prefer robots not to index these pages:
<a name="l1573"><span class="linenum">1573</span></a>                  <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l1574"><span class="linenum">1574</span></a>              }
<a name="l1575"><span class="linenum">1575</span></a>              break;
<a name="l1576"><span class="linenum">1576</span></a>      }
<a name="l1577"><span class="linenum">1577</span></a>  
<a name="l1578"><span class="linenum">1578</span></a>      <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('skin_init: <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>='.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>. ' / <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a>='.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a>.' / <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a>='.<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('seo_page_type')" href="../../_variables/seo_page_type.html">$seo_page_type</a>, 'skins' );
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>  <span class="comment">    // Make this switch block special only for 404 page</span>
<a name="l1581"><span class="linenum">1581</span></a>      switch( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> )
<a name="l1582"><span class="linenum">1582</span></a>      {
<a name="l1583"><span class="linenum">1583</span></a>          case '404':
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">            // We have a 404 unresolved content error</span>
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">            // How do we want do deal with it?</span>
<a name="l1586"><span class="linenum">1586</span></a>              <a class="function" onClick="logFunction('skin_404_header')" href="../../_functions/skin_404_header.html" onMouseOver="funcPopup(event,'skin_404_header')">skin_404_header</a>();
<a name="l1587"><span class="linenum">1587</span></a>  <span class="comment">            // This MAY or MAY not have exited -- will exit on 30x redirect, otherwise will return here.</span>
<a name="l1588"><span class="linenum">1588</span></a>  <span class="comment">            // Just in case some dumb robot needs extra directives on this:</span>
<a name="l1589"><span class="linenum">1589</span></a>              <a class="var it467" onMouseOver="hilite(467)" onMouseOut="lolite()" onClick="logVariable('robots_index')" href="../../_variables/robots_index.html">$robots_index</a> = false;
<a name="l1590"><span class="linenum">1590</span></a>              break;
<a name="l1591"><span class="linenum">1591</span></a>      }
<a name="l1592"><span class="linenum">1592</span></a>  
<a name="l1593"><span class="linenum">1593</span></a>      global <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>, <a class="var it1297" onMouseOver="hilite(1297)" onMouseOut="lolite()" onClick="logVariable('check_browser_version')" href="../../_variables/check_browser_version.html">$check_browser_version</a>;
<a name="l1594"><span class="linenum">1594</span></a>      if( <a class="var it1297" onMouseOver="hilite(1297)" onMouseOut="lolite()" onClick="logVariable('check_browser_version')" href="../../_variables/check_browser_version.html">$check_browser_version</a> &amp;&amp; <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>-&gt;<a class="function" onClick="logFunction('get_browser_version')" href="../../_functions/get_browser_version.html" onMouseOver="funcPopup(event,'get_browser_version')">get_browser_version</a>() &gt; 0 &amp;&amp; <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>-&gt;<a class="function" onClick="logFunction('is_IE')" href="../../_functions/is_ie.html" onMouseOver="funcPopup(event,'is_ie')">is_IE</a>( 9, '&lt;' ) )
<a name="l1595"><span class="linenum">1595</span></a>      {    // Display info message if browser IE &lt; 9 version and it is allowed by config var:
<a name="l1596"><span class="linenum">1596</span></a>          global <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a>;
<a name="l1597"><span class="linenum">1597</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Your web browser is too old. For this site to work correctly, we recommend you use a more recent browser.'), 'note' );
<a name="l1598"><span class="linenum">1598</span></a>          if( <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a> )
<a name="l1599"><span class="linenum">1599</span></a>          {
<a name="l1600"><span class="linenum">1600</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'User Agent: '.<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>-&gt;<a class="function" onClick="logFunction('get_user_agent')" href="../../_functions/get_user_agent.html" onMouseOver="funcPopup(event,'get_user_agent')">get_user_agent</a>(), 'note' );
<a name="l1601"><span class="linenum">1601</span></a>          }
<a name="l1602"><span class="linenum">1602</span></a>      }
<a name="l1603"><span class="linenum">1603</span></a>  
<a name="l1604"><span class="linenum">1604</span></a>  <span class="comment">    // dummy var for backward compatibility with versions &lt; 2.4.1 -- prevents &quot;Undefined variable&quot;</span>
<a name="l1605"><span class="linenum">1605</span></a>      global <a class="var it2236" onMouseOver="hilite(2236)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../_variables/global_Cache.html">$global_Cache</a>, <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('credit_links')" href="../../_variables/credit_links.html">$credit_links</a>;
<a name="l1606"><span class="linenum">1606</span></a>      <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('credit_links')" href="../../_variables/credit_links.html">$credit_links</a> = <a class="var it2236" onMouseOver="hilite(2236)" onMouseOut="lolite()" onClick="logVariable('global_Cache')" href="../../_variables/global_Cache.html">$global_Cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'creds' );
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>      <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>( 'skin_init' );
<a name="l1609"><span class="linenum">1609</span></a>  
<a name="l1610"><span class="linenum">1610</span></a>  <span class="comment">    // Check if user is logged in with a not active account, and display an error message if required</span>
<a name="l1611"><span class="linenum">1611</span></a>      <a class="function" onClick="logFunction('check_allow_disp')" href="../../_functions/check_allow_disp.html" onMouseOver="funcPopup(event,'check_allow_disp')">check_allow_disp</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> );
<a name="l1612"><span class="linenum">1612</span></a>  
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">    // initialize Blog enabled widgets, before displaying anything</span>
<a name="l1614"><span class="linenum">1614</span></a>      <a class="function" onClick="logFunction('init_blog_widgets')" href="../../_functions/init_blog_widgets.html" onMouseOver="funcPopup(event,'init_blog_widgets')">init_blog_widgets</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l1615"><span class="linenum">1615</span></a>  
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">    // Initialize displaying....</span>
<a name="l1617"><span class="linenum">1617</span></a>      <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('start')" href="../../_functions/start.html" onMouseOver="funcPopup(event,'start')">start</a>( 'Skin:display_init' );
<a name="l1618"><span class="linenum">1618</span></a>      <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('display_init')" href="../../_functions/display_init.html" onMouseOver="funcPopup(event,'display_init')">display_init</a>();
<a name="l1619"><span class="linenum">1619</span></a>      <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>( 'Skin:display_init' );
<a name="l1620"><span class="linenum">1620</span></a>  
<a name="l1621"><span class="linenum">1621</span></a>  <span class="comment">    // Send default headers:</span>
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment">    // See comments inside of this function:</span>
<a name="l1623"><span class="linenum">1623</span></a>      <a class="function" onClick="logFunction('headers_content_mightcache')" href="../../_functions/headers_content_mightcache.html" onMouseOver="funcPopup(event,'headers_content_mightcache')">headers_content_mightcache</a>( 'text/html' );        <span class="comment">// In most situations, you do NOT want to cache dynamic content!</span>
<a name="l1624"><span class="linenum">1624</span></a>  <span class="comment">    // Never allow Messages to be cached!</span>
<a name="l1625"><span class="linenum">1625</span></a>      if( <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() &amp;&amp; ( !empty( <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a> ) ) )
<a name="l1626"><span class="linenum">1626</span></a>      { // Abort PageCache collect
<a name="l1627"><span class="linenum">1627</span></a>          <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a>-&gt;<a class="function" onClick="logFunction('abort_collect')" href="../../_functions/abort_collect.html" onMouseOver="funcPopup(event,'abort_collect')">abort_collect</a>();
<a name="l1628"><span class="linenum">1628</span></a>      }
<a name="l1629"><span class="linenum">1629</span></a>  }
<a name="l1630"><span class="linenum">1630</span></a>  
<a name="l1631"><span class="linenum">1631</span></a>  function <a class="function" onClick="logFunction('siteskin_init')" href="../../_functions/siteskin_init.html" onMouseOver="funcPopup(event,'siteskin_init')">siteskin_init</a>()
<a name="l1632"><span class="linenum">1632</span></a>  {
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment">    // The following is temporary and should be moved to some SiteSkin class</span>
<a name="l1634"><span class="linenum">1634</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>;
<a name="l1635"><span class="linenum">1635</span></a>  
<a name="l1636"><span class="linenum">1636</span></a>      if( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'site_skins_enabled' ) )
<a name="l1637"><span class="linenum">1637</span></a>      { // Site skins are enabled
<a name="l1638"><span class="linenum">1638</span></a>  <span class="comment">        // Include the additional required files</span>
<a name="l1639"><span class="linenum">1639</span></a>          <a class="function" onClick="logFunction('siteskin_include')" href="../../_functions/siteskin_include.html" onMouseOver="funcPopup(event,'siteskin_include')">siteskin_include</a>( '_skin_init.inc.php' );
<a name="l1640"><span class="linenum">1640</span></a>      }
<a name="l1641"><span class="linenum">1641</span></a>  }
<a name="l1642"><span class="linenum">1642</span></a>  
<a name="l1643"><span class="linenum">1643</span></a>  
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment">/**</span>
<a name="l1645"><span class="linenum">1645</span></a>  <span class="comment"> * Initialize skin for AJAX request</span>
<a name="l1646"><span class="linenum">1646</span></a>  <span class="comment"> *</span>
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment"> * @param string Skin name</span>
<a name="l1648"><span class="linenum">1648</span></a>  <span class="comment"> * @param string What are we going to display. Most of the time the global $disp should be passed.</span>
<a name="l1649"><span class="linenum">1649</span></a>  <span class="comment"> */</span>
<a name="l1650"><span class="linenum">1650</span></a>  function <a class="function" onClick="logFunction('skin_init_ajax')" href="../../_functions/skin_init_ajax.html" onMouseOver="funcPopup(event,'skin_init_ajax')">skin_init_ajax</a>( <a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('skin_name')" href="../../_variables/skin_name.html">$skin_name</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> )
<a name="l1651"><span class="linenum">1651</span></a>  {
<a name="l1652"><span class="linenum">1652</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l1653"><span class="linenum">1653</span></a>      {    // AJAX request
<a name="l1654"><span class="linenum">1654</span></a>          if( empty( <a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('skin_name')" href="../../_variables/skin_name.html">$skin_name</a> ) )
<a name="l1655"><span class="linenum">1655</span></a>          {    // Don't initialize without skin name
<a name="l1656"><span class="linenum">1656</span></a>              return false;
<a name="l1657"><span class="linenum">1657</span></a>          }
<a name="l1658"><span class="linenum">1658</span></a>  
<a name="l1659"><span class="linenum">1659</span></a>          global <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>, <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>;
<a name="l1660"><span class="linenum">1660</span></a>  
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment">        // Init path for current skin</span>
<a name="l1662"><span class="linenum">1662</span></a>          <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a> = <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>.<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('skin_name')" href="../../_variables/skin_name.html">$skin_name</a>.'/';
<a name="l1663"><span class="linenum">1663</span></a>  
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment">        // This is the main template; it may be used to display very different things.</span>
<a name="l1665"><span class="linenum">1665</span></a>  <span class="comment">        // Do inits depending on current $disp:</span>
<a name="l1666"><span class="linenum">1666</span></a>          <a class="function" onClick="logFunction('skin_init')" href="../../_functions/skin_init.html" onMouseOver="funcPopup(event,'skin_init')">skin_init</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> );
<a name="l1667"><span class="linenum">1667</span></a>      }
<a name="l1668"><span class="linenum">1668</span></a>  
<a name="l1669"><span class="linenum">1669</span></a>      return true;
<a name="l1670"><span class="linenum">1670</span></a>  }
<a name="l1671"><span class="linenum">1671</span></a>  
<a name="l1672"><span class="linenum">1672</span></a>  
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment">/**</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment"> * Init some global variables used by skins</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment"> * Note: This initializations were removed from the _main.inc.php, because it should not be part of the main init.</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment"> */</span>
<a name="l1677"><span class="linenum">1677</span></a>  function <a class="function" onClick="logFunction('skin_init_global_vars')" href="../../_functions/skin_init_global_vars.html" onMouseOver="funcPopup(event,'skin_init_global_vars')">skin_init_global_vars</a>()
<a name="l1678"><span class="linenum">1678</span></a>  {
<a name="l1679"><span class="linenum">1679</span></a>      global <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('credit_links')" href="../../_variables/credit_links.html">$credit_links</a>, <a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('francois_links')" href="../../_variables/francois_links.html">$francois_links</a>, <a class="var it2239" onMouseOver="hilite(2239)" onMouseOut="lolite()" onClick="logVariable('fplanque_links')" href="../../_variables/fplanque_links.html">$fplanque_links</a>, <a class="var it1871" onMouseOver="hilite(1871)" onMouseOut="lolite()" onClick="logVariable('skin_links')" href="../../_variables/skin_links.html">$skin_links</a>, <a class="var it2240" onMouseOver="hilite(2240)" onMouseOut="lolite()" onClick="logVariable('skinfaktory_links')" href="../../_variables/skinfaktory_links.html">$skinfaktory_links</a>;
<a name="l1680"><span class="linenum">1680</span></a>  
<a name="l1681"><span class="linenum">1681</span></a>      <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('credit_links')" href="../../_variables/credit_links.html">$credit_links</a> = array();
<a name="l1682"><span class="linenum">1682</span></a>      <a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('francois_links')" href="../../_variables/francois_links.html">$francois_links</a> = array(
<a name="l1683"><span class="linenum">1683</span></a>          'fr' =&gt; array( 'http://fplanque.net/', array( array( 78, 'Fran&amp;ccedil;ois'),  array( 100, 'Francois') ) ),
<a name="l1684"><span class="linenum">1684</span></a>          '' =&gt; array( 'http://fplanque.com/', array( array( 78, 'Fran&amp;ccedil;ois'),  array( 100, 'Francois') ) )
<a name="l1685"><span class="linenum">1685</span></a>      );
<a name="l1686"><span class="linenum">1686</span></a>      <a class="var it2239" onMouseOver="hilite(2239)" onMouseOut="lolite()" onClick="logVariable('fplanque_links')" href="../../_variables/fplanque_links.html">$fplanque_links</a> = array(
<a name="l1687"><span class="linenum">1687</span></a>          'fr' =&gt; array( 'http://fplanque.net/', array( array( 78, 'Fran&amp;ccedil;ois Planque'),  array( 100, 'Francois Planque') ) ),
<a name="l1688"><span class="linenum">1688</span></a>          '' =&gt; array( 'http://fplanque.com/', array( array( 78, 'Fran&amp;ccedil;ois Planque'),  array( 100, 'Francois Planque') ) )
<a name="l1689"><span class="linenum">1689</span></a>      );
<a name="l1690"><span class="linenum">1690</span></a>      <a class="var it1871" onMouseOver="hilite(1871)" onMouseOut="lolite()" onClick="logVariable('skin_links')" href="../../_variables/skin_links.html">$skin_links</a> = array(
<a name="l1691"><span class="linenum">1691</span></a>          '' =&gt; array( 'http://skinfaktory.com/', array( array( 15, 'b2evo skin'), array( 20, 'b2evo skins'), array( 35, 'b2evolution skin'), array( 40, 'b2evolution skins'), array( 55, 'Blog skin'), array( 60, 'Blog skins'), array( 75, 'Blog theme'),array( 80, 'Blog themes'), array( 95, 'Blog template'), array( 100, 'Blog templates') ) ),
<a name="l1692"><span class="linenum">1692</span></a>      );
<a name="l1693"><span class="linenum">1693</span></a>      <a class="var it2240" onMouseOver="hilite(2240)" onMouseOut="lolite()" onClick="logVariable('skinfaktory_links')" href="../../_variables/skinfaktory_links.html">$skinfaktory_links</a> = array(
<a name="l1694"><span class="linenum">1694</span></a>          '' =&gt; array(
<a name="l1695"><span class="linenum">1695</span></a>              array( 73, 'http://evofactory.com/', array( array( 61, 'Evo Factory'), array( 68, 'EvoFactory'), array( 73, 'Evofactory') ) ),
<a name="l1696"><span class="linenum">1696</span></a>              array( 100, 'http://skinfaktory.com/', array( array( 92, 'Skin Faktory'), array( 97, 'SkinFaktory'), array( 99, 'Skin Factory'), array( 100, 'SkinFactory') ) ),
<a name="l1697"><span class="linenum">1697</span></a>          )
<a name="l1698"><span class="linenum">1698</span></a>      );
<a name="l1699"><span class="linenum">1699</span></a>  }
<a name="l1700"><span class="linenum">1700</span></a>  
<a name="l1701"><span class="linenum">1701</span></a>  
<a name="l1702"><span class="linenum">1702</span></a>  <span class="comment">/**</span>
<a name="l1703"><span class="linenum">1703</span></a>  <span class="comment"> * Tells if we are on the default blog page / front page.</span>
<a name="l1704"><span class="linenum">1704</span></a>  <span class="comment"> *</span>
<a name="l1705"><span class="linenum">1705</span></a>  <span class="comment"> * @return boolean</span>
<a name="l1706"><span class="linenum">1706</span></a>  <span class="comment"> */</span>
<a name="l1707"><span class="linenum">1707</span></a>  function <a class="function" onClick="logFunction('is_default_page')" href="../../_functions/is_default_page.html" onMouseOver="funcPopup(event,'is_default_page')">is_default_page</a>()
<a name="l1708"><span class="linenum">1708</span></a>  {
<a name="l1709"><span class="linenum">1709</span></a>      global <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../_variables/is_front.html">$is_front</a>;
<a name="l1710"><span class="linenum">1710</span></a>      return <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../_variables/is_front.html">$is_front</a>;
<a name="l1711"><span class="linenum">1711</span></a>  }
<a name="l1712"><span class="linenum">1712</span></a>  
<a name="l1713"><span class="linenum">1713</span></a>  
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment">/**</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment"> * Template tag. Include a sub-template at the current position</span>
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment"> *</span>
<a name="l1717"><span class="linenum">1717</span></a>  <span class="comment"> */</span>
<a name="l1718"><span class="linenum">1718</span></a>  function <a class="function" onClick="logFunction('skin_include')" href="../../_functions/skin_include.html" onMouseOver="funcPopup(event,'skin_include')">skin_include</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l1719"><span class="linenum">1719</span></a>  {
<a name="l1720"><span class="linenum">1720</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) )
<a name="l1721"><span class="linenum">1721</span></a>      { // When we request ajax content for results table we need to hide wrapper data (header, footer &amp; etc)
<a name="l1722"><span class="linenum">1722</span></a>          return;
<a name="l1723"><span class="linenum">1723</span></a>      }
<a name="l1724"><span class="linenum">1724</span></a>  
<a name="l1725"><span class="linenum">1725</span></a>      global <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>, <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l1726"><span class="linenum">1726</span></a>  
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment">    // Globals that may be needed by the template:</span>
<a name="l1728"><span class="linenum">1728</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>, <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>;
<a name="l1729"><span class="linenum">1729</span></a>      global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>, <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>;
<a name="l1730"><span class="linenum">1730</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>, <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>;
<a name="l1731"><span class="linenum">1731</span></a>      global <a class="var it2242" onMouseOver="hilite(2242)" onMouseOut="lolite()" onClick="logVariable('skin_url')" href="../../_variables/skin_url.html">$skin_url</a>, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../_variables/htsrv_url.html">$htsrv_url</a>, <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('htsrv_url_sensitive')" href="../../_variables/htsrv_url_sensitive.html">$htsrv_url_sensitive</a>;
<a name="l1732"><span class="linenum">1732</span></a>      global <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('samedomain_htsrv_url')" href="../../_variables/samedomain_htsrv_url.html">$samedomain_htsrv_url</a>, <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>;
<a name="l1733"><span class="linenum">1733</span></a>      global <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('credit_links')" href="../../_variables/credit_links.html">$credit_links</a>, <a class="var it1871" onMouseOver="hilite(1871)" onMouseOut="lolite()" onClick="logVariable('skin_links')" href="../../_variables/skin_links.html">$skin_links</a>, <a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('francois_links')" href="../../_variables/francois_links.html">$francois_links</a>, <a class="var it2239" onMouseOver="hilite(2239)" onMouseOut="lolite()" onClick="logVariable('fplanque_links')" href="../../_variables/fplanque_links.html">$fplanque_links</a>, <a class="var it2240" onMouseOver="hilite(2240)" onMouseOut="lolite()" onClick="logVariable('skinfaktory_links')" href="../../_variables/skinfaktory_links.html">$skinfaktory_links</a>;
<a name="l1734"><span class="linenum">1734</span></a>      <span class="comment">/**</span>
<a name="l1735"><span class="linenum">1735</span></a>  <span class="comment">    * @var Log</span>
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment">    */</span>
<a name="l1737"><span class="linenum">1737</span></a>      global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l1738"><span class="linenum">1738</span></a>      global <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>;
<a name="l1739"><span class="linenum">1739</span></a>  
<a name="l1740"><span class="linenum">1740</span></a>      <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../_variables/timer_name.html">$timer_name</a> = '<a class="function" onClick="logFunction('skin_include')" href="../../_functions/skin_include.html" onMouseOver="funcPopup(event,'skin_include')">skin_include</a>('.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>.')';
<a name="l1741"><span class="linenum">1741</span></a>      <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>( <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../_variables/timer_name.html">$timer_name</a> );
<a name="l1742"><span class="linenum">1742</span></a>  
<a name="l1743"><span class="linenum">1743</span></a>      if( ! empty( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> ) &amp;&amp; ( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> == 'single' || <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> == 'page' ) &amp;&amp;
<a name="l1744"><span class="linenum">1744</span></a>          <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> == '<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>$' &amp;&amp;
<a name="l1745"><span class="linenum">1745</span></a>          ! empty( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) &amp;&amp; ( <a class="var it322" onMouseOver="hilite(322)" onMouseOut="lolite()" onClick="logVariable('ItemType')" href="../../_variables/ItemType.html">$ItemType</a> = &amp; <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;get_ItemType() ) )
<a name="l1746"><span class="linenum">1746</span></a>      { // Get template name for the current Item if it is defined by Item Type
<a name="l1747"><span class="linenum">1747</span></a>          <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a> = <a class="var it322" onMouseOver="hilite(322)" onMouseOut="lolite()" onClick="logVariable('ItemType')" href="../../_variables/ItemType.html">$ItemType</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'template_name' );
<a name="l1748"><span class="linenum">1748</span></a>          if( ! empty( <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a> ) )
<a name="l1749"><span class="linenum">1749</span></a>          { // The item type has a specific template for this display:
<a name="l1750"><span class="linenum">1750</span></a>              <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a> = '_'.<a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a>.'.disp.php';
<a name="l1751"><span class="linenum">1751</span></a>              if( <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>.<a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a> ) ||
<a name="l1752"><span class="linenum">1752</span></a>                  <a class="function" onClick="logFunction('skin_fallback_path')" href="../../_functions/skin_fallback_path.html" onMouseOver="funcPopup(event,'skin_fallback_path')">skin_fallback_path</a>( <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a> ) )
<a name="l1753"><span class="linenum">1753</span></a>              { // Use template file name of the Item Type only if it exists
<a name="l1754"><span class="linenum">1754</span></a>                  <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> = <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a>;
<a name="l1755"><span class="linenum">1755</span></a>              }
<a name="l1756"><span class="linenum">1756</span></a>          }
<a name="l1757"><span class="linenum">1757</span></a>      }
<a name="l1758"><span class="linenum">1758</span></a>  
<a name="l1759"><span class="linenum">1759</span></a>      if( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> == '<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>$' )
<a name="l1760"><span class="linenum">1760</span></a>      { // This is a special case.
<a name="l1761"><span class="linenum">1761</span></a>  <span class="comment">        // We are going to include a template based on $disp:</span>
<a name="l1762"><span class="linenum">1762</span></a>  
<a name="l1763"><span class="linenum">1763</span></a>  <span class="comment">        // Default display handlers:</span>
<a name="l1764"><span class="linenum">1764</span></a>          <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('disp_handlers')" href="../../_variables/disp_handlers.html">$disp_handlers</a> = array(
<a name="l1765"><span class="linenum">1765</span></a>                  'disp_404'            =&gt; '_404_not_found.disp.php',
<a name="l1766"><span class="linenum">1766</span></a>                  'disp_403'            =&gt; '_403_forbidden.disp.php',
<a name="l1767"><span class="linenum">1767</span></a>                  'disp_arcdir'         =&gt; '_arcdir.disp.php',
<a name="l1768"><span class="linenum">1768</span></a>                  'disp_catdir'         =&gt; '_catdir.disp.php',
<a name="l1769"><span class="linenum">1769</span></a>                  'disp_comments'       =&gt; '_comments.disp.php',
<a name="l1770"><span class="linenum">1770</span></a>                  'disp_feedback-popup' =&gt; '_feedback_popup.disp.php',
<a name="l1771"><span class="linenum">1771</span></a>                  'disp_help'           =&gt; '_help.disp.php',
<a name="l1772"><span class="linenum">1772</span></a>                  'disp_login'          =&gt; '_login.disp.php',
<a name="l1773"><span class="linenum">1773</span></a>                  'disp_register'       =&gt; '_register.disp.php',
<a name="l1774"><span class="linenum">1774</span></a>                  'disp_activateinfo'   =&gt; '_activateinfo.disp.php',
<a name="l1775"><span class="linenum">1775</span></a>                  'disp_lostpassword'   =&gt; '_lostpassword.disp.php',
<a name="l1776"><span class="linenum">1776</span></a>                  'disp_mediaidx'       =&gt; '_mediaidx.disp.php',
<a name="l1777"><span class="linenum">1777</span></a>                  'disp_msgform'        =&gt; '_msgform.disp.php',
<a name="l1778"><span class="linenum">1778</span></a>                  'disp_threads'        =&gt; '_threads.disp.php',
<a name="l1779"><span class="linenum">1779</span></a>                  'disp_contacts'       =&gt; '_threads.disp.php',
<a name="l1780"><span class="linenum">1780</span></a>                  'disp_messages'       =&gt; '_messages.disp.php',
<a name="l1781"><span class="linenum">1781</span></a>                  'disp_page'           =&gt; '_page.disp.php',
<a name="l1782"><span class="linenum">1782</span></a>                  'disp_postidx'        =&gt; '_postidx.disp.php',
<a name="l1783"><span class="linenum">1783</span></a>                  'disp_posts'          =&gt; '_posts.disp.php',
<a name="l1784"><span class="linenum">1784</span></a>                  'disp_profile'        =&gt; '_profile.disp.php',
<a name="l1785"><span class="linenum">1785</span></a>                  'disp_avatar'         =&gt; '_profile.disp.php',
<a name="l1786"><span class="linenum">1786</span></a>                  'disp_pwdchange'      =&gt; '_profile.disp.php',
<a name="l1787"><span class="linenum">1787</span></a>                  'disp_userprefs'      =&gt; '_profile.disp.php',
<a name="l1788"><span class="linenum">1788</span></a>                  'disp_subs'           =&gt; '_profile.disp.php',
<a name="l1789"><span class="linenum">1789</span></a>                  'disp_search'         =&gt; '_search.disp.php',
<a name="l1790"><span class="linenum">1790</span></a>                  'disp_single'         =&gt; '_single.disp.php',
<a name="l1791"><span class="linenum">1791</span></a>                  'disp_sitemap'        =&gt; '_sitemap.disp.php',
<a name="l1792"><span class="linenum">1792</span></a>                  'disp_user'           =&gt; '_user.disp.php',
<a name="l1793"><span class="linenum">1793</span></a>                  'disp_users'          =&gt; '_users.disp.php',
<a name="l1794"><span class="linenum">1794</span></a>                  'disp_edit'           =&gt; '_edit.disp.php',
<a name="l1795"><span class="linenum">1795</span></a>                  'disp_edit_comment'   =&gt; '_edit_comment.disp.php',
<a name="l1796"><span class="linenum">1796</span></a>                  'disp_closeaccount'   =&gt; '_closeaccount.disp.php',
<a name="l1797"><span class="linenum">1797</span></a>                  'disp_module_form'    =&gt; '_module_form.disp.php',
<a name="l1798"><span class="linenum">1798</span></a>                  'disp_front'          =&gt; '_front.disp.php',
<a name="l1799"><span class="linenum">1799</span></a>                  'disp_useritems'      =&gt; '_useritems.disp.php',
<a name="l1800"><span class="linenum">1800</span></a>                  'disp_usercomments'   =&gt; '_usercomments.disp.php',
<a name="l1801"><span class="linenum">1801</span></a>                  'disp_download'       =&gt; '_download.disp.php',
<a name="l1802"><span class="linenum">1802</span></a>                  'disp_access_denied'  =&gt; '_access_denied.disp.php',
<a name="l1803"><span class="linenum">1803</span></a>                  'disp_access_requires_login' =&gt; '_access_requires_login.disp.php',
<a name="l1804"><span class="linenum">1804</span></a>                  'disp_tags'           =&gt; '_tags.disp.php',
<a name="l1805"><span class="linenum">1805</span></a>                  'disp_terms'          =&gt; '_terms.disp.php',
<a name="l1806"><span class="linenum">1806</span></a>              );
<a name="l1807"><span class="linenum">1807</span></a>  
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment">        // Add plugin disp handlers:</span>
<a name="l1809"><span class="linenum">1809</span></a>          if( <a class="var it2247" onMouseOver="hilite(2247)" onMouseOut="lolite()" onClick="logVariable('disp_Plugins')" href="../../_variables/disp_Plugins.html">$disp_Plugins</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('get_list_by_event')" href="../../_functions/get_list_by_event.html" onMouseOver="funcPopup(event,'get_list_by_event')">get_list_by_event</a>( 'GetHandledDispModes' ) )
<a name="l1810"><span class="linenum">1810</span></a>          {
<a name="l1811"><span class="linenum">1811</span></a>              foreach( <a class="var it2247" onMouseOver="hilite(2247)" onMouseOut="lolite()" onClick="logVariable('disp_Plugins')" href="../../_variables/disp_Plugins.html">$disp_Plugins</a> as <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('disp_Plugin')" href="../../_variables/disp_Plugin.html">$disp_Plugin</a> )
<a name="l1812"><span class="linenum">1812</span></a>              { // Go through whole list of plugins providing disps
<a name="l1813"><span class="linenum">1813</span></a>                  if( <a class="var it2249" onMouseOver="hilite(2249)" onMouseOut="lolite()" onClick="logVariable('plugin_modes')" href="../../_variables/plugin_modes.html">$plugin_modes</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('call_method')" href="../../_functions/call_method.html" onMouseOver="funcPopup(event,'call_method')">call_method</a>( <a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('disp_Plugin')" href="../../_variables/disp_Plugin.html">$disp_Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it10744" onMouseOver="hilite(10744)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>, 'GetHandledDispModes', <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('disp_handlers')" href="../../_variables/disp_handlers.html">$disp_handlers</a> ) )
<a name="l1814"><span class="linenum">1814</span></a>                  { // plugin handles some custom disp modes
<a name="l1815"><span class="linenum">1815</span></a>                      foreach( <a class="var it2249" onMouseOver="hilite(2249)" onMouseOut="lolite()" onClick="logVariable('plugin_modes')" href="../../_variables/plugin_modes.html">$plugin_modes</a> as <a class="var it2250" onMouseOver="hilite(2250)" onMouseOut="lolite()" onClick="logVariable('plugin_mode')" href="../../_variables/plugin_mode.html">$plugin_mode</a> )
<a name="l1816"><span class="linenum">1816</span></a>                      {
<a name="l1817"><span class="linenum">1817</span></a>                          <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('disp_handlers')" href="../../_variables/disp_handlers.html">$disp_handlers</a>[<a class="var it2250" onMouseOver="hilite(2250)" onMouseOut="lolite()" onClick="logVariable('plugin_mode')" href="../../_variables/plugin_mode.html">$plugin_mode</a>] = '#'.<a class="var it2248" onMouseOver="hilite(2248)" onMouseOut="lolite()" onClick="logVariable('disp_Plugin')" href="../../_variables/disp_Plugin.html">$disp_Plugin</a>-&gt;<a onClick="logVariable('ID')" class="var it10744" onMouseOver="hilite(10744)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>;
<a name="l1818"><span class="linenum">1818</span></a>                      }
<a name="l1819"><span class="linenum">1819</span></a>                  }
<a name="l1820"><span class="linenum">1820</span></a>              }
<a name="l1821"><span class="linenum">1821</span></a>          }
<a name="l1822"><span class="linenum">1822</span></a>  
<a name="l1823"><span class="linenum">1823</span></a>  <span class="comment">        // Allow skin overrides as well as additional disp modes (This can be used in the famou shopping cart scenario...)</span>
<a name="l1824"><span class="linenum">1824</span></a>          <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('disp_handlers')" href="../../_variables/disp_handlers.html">$disp_handlers</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('disp_handlers')" href="../../_variables/disp_handlers.html">$disp_handlers</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l1825"><span class="linenum">1825</span></a>  
<a name="l1826"><span class="linenum">1826</span></a>          if( !isset( <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('disp_handlers')" href="../../_variables/disp_handlers.html">$disp_handlers</a>['disp_'.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>] ) )
<a name="l1827"><span class="linenum">1827</span></a>          {
<a name="l1828"><span class="linenum">1828</span></a>              global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>;
<a name="l1829"><span class="linenum">1829</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'Unhandled disp type [%s]', <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> ) ) );
<a name="l1830"><span class="linenum">1830</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l1831"><span class="linenum">1831</span></a>              <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>( <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../_variables/timer_name.html">$timer_name</a> );
<a name="l1832"><span class="linenum">1832</span></a>              <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> = '404';
<a name="l1833"><span class="linenum">1833</span></a>          }
<a name="l1834"><span class="linenum">1834</span></a>  
<a name="l1835"><span class="linenum">1835</span></a>          <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('disp_handlers')" href="../../_variables/disp_handlers.html">$disp_handlers</a>['disp_'.<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>];
<a name="l1836"><span class="linenum">1836</span></a>  
<a name="l1837"><span class="linenum">1837</span></a>          if( empty( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) )
<a name="l1838"><span class="linenum">1838</span></a>          {    // The caller asked not to display this handler
<a name="l1839"><span class="linenum">1839</span></a>              <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>( <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../_variables/timer_name.html">$timer_name</a> );
<a name="l1840"><span class="linenum">1840</span></a>              return;
<a name="l1841"><span class="linenum">1841</span></a>          }
<a name="l1842"><span class="linenum">1842</span></a>  
<a name="l1843"><span class="linenum">1843</span></a>      }
<a name="l1844"><span class="linenum">1844</span></a>  
<a name="l1845"><span class="linenum">1845</span></a>  
<a name="l1846"><span class="linenum">1846</span></a>  <span class="comment">    // DECIDE WHAT TO INCLUDE:</span>
<a name="l1847"><span class="linenum">1847</span></a>      if( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>[0] == '#' )
<a name="l1848"><span class="linenum">1848</span></a>      { // This disp mode is handled by a plugin:
<a name="l1849"><span class="linenum">1849</span></a>          <a class="var it2251" onMouseOver="hilite(2251)" onMouseOut="lolite()" onClick="logVariable('debug_info')" href="../../_variables/debug_info.html">$debug_info</a> = 'Call plugin';
<a name="l1850"><span class="linenum">1850</span></a>          <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> = 'plugin';
<a name="l1851"><span class="linenum">1851</span></a>      }
<a name="l1852"><span class="linenum">1852</span></a>      elseif( <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) )
<a name="l1853"><span class="linenum">1853</span></a>      { // The skin has a customized handler, use that one instead:
<a name="l1854"><span class="linenum">1854</span></a>          <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>;
<a name="l1855"><span class="linenum">1855</span></a>          <a class="var it2251" onMouseOver="hilite(2251)" onMouseOut="lolite()" onClick="logVariable('debug_info')" href="../../_variables/debug_info.html">$debug_info</a> = '&lt;b&gt;Skin template&lt;/b&gt;: '.<a class="function" onClick="logFunction('rel_path_to_base')" href="../../_functions/rel_path_to_base.html" onMouseOver="funcPopup(event,'rel_path_to_base')">rel_path_to_base</a>( <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> );
<a name="l1856"><span class="linenum">1856</span></a>          <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> = 'custom';
<a name="l1857"><span class="linenum">1857</span></a>      }
<a name="l1858"><span class="linenum">1858</span></a>      elseif( <a class="var it2253" onMouseOver="hilite(2253)" onMouseOut="lolite()" onClick="logVariable('fallback_template_path')" href="../../_variables/fallback_template_path.html">$fallback_template_path</a> = <a class="function" onClick="logFunction('skin_fallback_path')" href="../../_functions/skin_fallback_path.html" onMouseOver="funcPopup(event,'skin_fallback_path')">skin_fallback_path</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) )
<a name="l1859"><span class="linenum">1859</span></a>      { // Use the default/fallback template:
<a name="l1860"><span class="linenum">1860</span></a>          <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it2253" onMouseOver="hilite(2253)" onMouseOut="lolite()" onClick="logVariable('fallback_template_path')" href="../../_variables/fallback_template_path.html">$fallback_template_path</a>;
<a name="l1861"><span class="linenum">1861</span></a>          <a class="var it2251" onMouseOver="hilite(2251)" onMouseOut="lolite()" onClick="logVariable('debug_info')" href="../../_variables/debug_info.html">$debug_info</a> = '&lt;b&gt;Fallback to&lt;/b&gt;: '.<a class="function" onClick="logFunction('rel_path_to_base')" href="../../_functions/rel_path_to_base.html" onMouseOver="funcPopup(event,'rel_path_to_base')">rel_path_to_base</a>( <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> );
<a name="l1862"><span class="linenum">1862</span></a>          <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> = 'fallback';
<a name="l1863"><span class="linenum">1863</span></a>      }
<a name="l1864"><span class="linenum">1864</span></a>      else
<a name="l1865"><span class="linenum">1865</span></a>      {
<a name="l1866"><span class="linenum">1866</span></a>          <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> = false;
<a name="l1867"><span class="linenum">1867</span></a>      }
<a name="l1868"><span class="linenum">1868</span></a>  
<a name="l1869"><span class="linenum">1869</span></a>  <span class="comment">    // Do we want a visible container for DEBUG/DEV ?:</span>
<a name="l1870"><span class="linenum">1870</span></a>      if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>, '_html_' ) !== false )
<a name="l1871"><span class="linenum">1871</span></a>      {    // We're outside of the page body: NEVER display wrap this include with a &lt;div&gt;
<a name="l1872"><span class="linenum">1872</span></a>          <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> = false;
<a name="l1873"><span class="linenum">1873</span></a>      }
<a name="l1874"><span class="linenum">1874</span></a>      else
<a name="l1875"><span class="linenum">1875</span></a>      {    // We may wrap with a &lt;div&gt;:
<a name="l1876"><span class="linenum">1876</span></a>          <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> = <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'display_includes_'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) == 1;
<a name="l1877"><span class="linenum">1877</span></a>      }
<a name="l1878"><span class="linenum">1878</span></a>      if( <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> )
<a name="l1879"><span class="linenum">1879</span></a>      { // Wrap the include with a visible div:
<a name="l1880"><span class="linenum">1880</span></a>          echo '&lt;div class=&quot;dev-blocks dev-blocks--include&quot;&gt;';
<a name="l1881"><span class="linenum">1881</span></a>          echo '&lt;div class=&quot;dev-blocks-name&quot;&gt;';
<a name="l1882"><span class="linenum">1882</span></a>          if( empty( <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a> ) )
<a name="l1883"><span class="linenum">1883</span></a>          { // Default template
<a name="l1884"><span class="linenum">1884</span></a>              echo '<a class="function" onClick="logFunction('skin_include')" href="../../_functions/skin_include.html" onMouseOver="funcPopup(event,'skin_include')">skin_include</a>( &lt;b&gt;'.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>.'&lt;/b&gt; )';
<a name="l1885"><span class="linenum">1885</span></a>          }
<a name="l1886"><span class="linenum">1886</span></a>          else
<a name="l1887"><span class="linenum">1887</span></a>          { // Custom template
<a name="l1888"><span class="linenum">1888</span></a>              echo '&lt;b&gt;CUSTOM&lt;/b&gt; <a class="function" onClick="logFunction('skin_include')" href="../../_functions/skin_include.html" onMouseOver="funcPopup(event,'skin_include')">skin_include</a>( &lt;b&gt;'.<a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('item_type_template_name')" href="../../_variables/item_type_template_name.html">$item_type_template_name</a>.'&lt;/b&gt; )';
<a name="l1889"><span class="linenum">1889</span></a>          }
<a name="l1890"><span class="linenum">1890</span></a>          echo ' -&gt; '.<a class="var it2251" onMouseOver="hilite(2251)" onMouseOut="lolite()" onClick="logVariable('debug_info')" href="../../_variables/debug_info.html">$debug_info</a>.'&lt;/div&gt;';
<a name="l1891"><span class="linenum">1891</span></a>      }
<a name="l1892"><span class="linenum">1892</span></a>  
<a name="l1893"><span class="linenum">1893</span></a>      switch( <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> )
<a name="l1894"><span class="linenum">1894</span></a>      {
<a name="l1895"><span class="linenum">1895</span></a>          case 'plugin':
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment">            // This disp mode is handled by a plugin:</span>
<a name="l1897"><span class="linenum">1897</span></a>              <a class="var it2255" onMouseOver="hilite(2255)" onMouseOut="lolite()" onClick="logVariable('plug_ID')" href="../../_variables/plug_ID.html">$plug_ID</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>, 1 );
<a name="l1898"><span class="linenum">1898</span></a>              <a class="var it2072" onMouseOver="hilite(2072)" onMouseOut="lolite()" onClick="logVariable('disp_params')" href="../../_variables/disp_params.html">$disp_params</a> = array( 'disp' =&gt; <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> );
<a name="l1899"><span class="linenum">1899</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('call_method')" href="../../_functions/call_method.html" onMouseOver="funcPopup(event,'call_method')">call_method</a>( <a class="var it2255" onMouseOver="hilite(2255)" onMouseOut="lolite()" onClick="logVariable('plug_ID')" href="../../_variables/plug_ID.html">$plug_ID</a>, 'HandleDispMode', <a class="var it2072" onMouseOver="hilite(2072)" onMouseOut="lolite()" onClick="logVariable('disp_params')" href="../../_variables/disp_params.html">$disp_params</a> );
<a name="l1900"><span class="linenum">1900</span></a>              break;
<a name="l1901"><span class="linenum">1901</span></a>  
<a name="l1902"><span class="linenum">1902</span></a>          case 'custom':            // The skin has a customized handler, use that one instead:
<a name="l1903"><span class="linenum">1903</span></a>          case 'fallback':        // Use the default/fallback template:
<a name="l1904"><span class="linenum">1904</span></a>              <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('<a class="function" onClick="logFunction('skin_include')" href="../../_functions/skin_include.html" onMouseOver="funcPopup(event,'skin_include')">skin_include</a> ('.(<a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ? 'Item #'.<a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> : '-').'): '.<a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, 'skins');
<a name="l1905"><span class="linenum">1905</span></a>              require <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>;
<a name="l1906"><span class="linenum">1906</span></a>              break;
<a name="l1907"><span class="linenum">1907</span></a>      }
<a name="l1908"><span class="linenum">1908</span></a>  
<a name="l1909"><span class="linenum">1909</span></a>      if( ! <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> )
<a name="l1910"><span class="linenum">1910</span></a>      { // nothing handled the disp mode
<a name="l1911"><span class="linenum">1911</span></a>          printf( '&lt;div class=&quot;skin_error&quot;&gt;Sub template [%s] not found.&lt;/div&gt;', <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> );
<a name="l1912"><span class="linenum">1912</span></a>          if( !empty(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>) &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('level')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/level.html">level</a> == 10 )
<a name="l1913"><span class="linenum">1913</span></a>          {
<a name="l1914"><span class="linenum">1914</span></a>              printf( '&lt;div class=&quot;skin_error&quot;&gt;User level 10 help info: [%s]&lt;/div&gt;', <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> );
<a name="l1915"><span class="linenum">1915</span></a>          }
<a name="l1916"><span class="linenum">1916</span></a>      }
<a name="l1917"><span class="linenum">1917</span></a>  
<a name="l1918"><span class="linenum">1918</span></a>      if( <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> )
<a name="l1919"><span class="linenum">1919</span></a>      { // End of visible container:
<a name="l1920"><span class="linenum">1920</span></a>  <span class="comment">        // echo get_icon( 'pixel', 'imgtag', array( 'class' =&gt; 'clear' ) );</span>
<a name="l1921"><span class="linenum">1921</span></a>          echo '&lt;/div&gt;';
<a name="l1922"><span class="linenum">1922</span></a>      }
<a name="l1923"><span class="linenum">1923</span></a>  
<a name="l1924"><span class="linenum">1924</span></a>      <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>( <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../_variables/timer_name.html">$timer_name</a> );
<a name="l1925"><span class="linenum">1925</span></a>  }
<a name="l1926"><span class="linenum">1926</span></a>  
<a name="l1927"><span class="linenum">1927</span></a>  
<a name="l1928"><span class="linenum">1928</span></a>  <span class="comment">/**</span>
<a name="l1929"><span class="linenum">1929</span></a>  <span class="comment"> * Get file path to fallback file depending on skin API version</span>
<a name="l1930"><span class="linenum">1930</span></a>  <span class="comment"> *</span>
<a name="l1931"><span class="linenum">1931</span></a>  <span class="comment"> * @param string Template name</span>
<a name="l1932"><span class="linenum">1932</span></a>  <span class="comment"> * @param integer Skin API version, NULL - to get API version of the current Skin</span>
<a name="l1933"><span class="linenum">1933</span></a>  <span class="comment"> * @return string|FALSE File path OR FALSE if fallback file doesn't exist</span>
<a name="l1934"><span class="linenum">1934</span></a>  <span class="comment"> */</span>
<a name="l1935"><span class="linenum">1935</span></a>  function <a class="function" onClick="logFunction('skin_fallback_path')" href="../../_functions/skin_fallback_path.html" onMouseOver="funcPopup(event,'skin_fallback_path')">skin_fallback_path</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>, <a class="var it2256" onMouseOver="hilite(2256)" onMouseOut="lolite()" onClick="logVariable('skin_api_version')" href="../../_variables/skin_api_version.html">$skin_api_version</a> = NULL )
<a name="l1936"><span class="linenum">1936</span></a>  {
<a name="l1937"><span class="linenum">1937</span></a>      global <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>, <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../../_variables/basepath.html">$basepath</a>;
<a name="l1938"><span class="linenum">1938</span></a>  
<a name="l1939"><span class="linenum">1939</span></a>      if( <a class="var it2256" onMouseOver="hilite(2256)" onMouseOut="lolite()" onClick="logVariable('skin_api_version')" href="../../_variables/skin_api_version.html">$skin_api_version</a> === NULL &amp;&amp; ! empty( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> ) )
<a name="l1940"><span class="linenum">1940</span></a>      { // Get API version of the current skin
<a name="l1941"><span class="linenum">1941</span></a>          <a class="var it2256" onMouseOver="hilite(2256)" onMouseOut="lolite()" onClick="logVariable('skin_api_version')" href="../../_variables/skin_api_version.html">$skin_api_version</a> = <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('get_api_version')" href="../../_functions/get_api_version.html" onMouseOver="funcPopup(event,'get_api_version')">get_api_version</a>();
<a name="l1942"><span class="linenum">1942</span></a>      }
<a name="l1943"><span class="linenum">1943</span></a>  
<a name="l1944"><span class="linenum">1944</span></a>      if( <a class="var it2256" onMouseOver="hilite(2256)" onMouseOut="lolite()" onClick="logVariable('skin_api_version')" href="../../_variables/skin_api_version.html">$skin_api_version</a> == 6 )
<a name="l1945"><span class="linenum">1945</span></a>      { // Check fallback file for v6 API skin
<a name="l1946"><span class="linenum">1946</span></a>          <a class="var it2257" onMouseOver="hilite(2257)" onMouseOut="lolite()" onClick="logVariable('fallback_path')" href="../../_variables/fallback_path.html">$fallback_path</a> = <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../../_variables/basepath.html">$basepath</a>.'skins_fallback_v6/'.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>;
<a name="l1947"><span class="linenum">1947</span></a>          if( <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it2257" onMouseOver="hilite(2257)" onMouseOut="lolite()" onClick="logVariable('fallback_path')" href="../../_variables/fallback_path.html">$fallback_path</a> ) )
<a name="l1948"><span class="linenum">1948</span></a>          {
<a name="l1949"><span class="linenum">1949</span></a>              return <a class="var it2257" onMouseOver="hilite(2257)" onMouseOut="lolite()" onClick="logVariable('fallback_path')" href="../../_variables/fallback_path.html">$fallback_path</a>;
<a name="l1950"><span class="linenum">1950</span></a>          }
<a name="l1951"><span class="linenum">1951</span></a>      }
<a name="l1952"><span class="linenum">1952</span></a>  
<a name="l1953"><span class="linenum">1953</span></a>  <span class="comment">    // Check fallback file for v5 API skin</span>
<a name="l1954"><span class="linenum">1954</span></a>      <a class="var it2257" onMouseOver="hilite(2257)" onMouseOut="lolite()" onClick="logVariable('fallback_path')" href="../../_variables/fallback_path.html">$fallback_path</a> = <a class="var it1895" onMouseOver="hilite(1895)" onMouseOut="lolite()" onClick="logVariable('basepath')" href="../../_variables/basepath.html">$basepath</a>.'skins_fallback_v5/'.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>;
<a name="l1955"><span class="linenum">1955</span></a>      if( <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it2257" onMouseOver="hilite(2257)" onMouseOut="lolite()" onClick="logVariable('fallback_path')" href="../../_variables/fallback_path.html">$fallback_path</a> ) )
<a name="l1956"><span class="linenum">1956</span></a>      {
<a name="l1957"><span class="linenum">1957</span></a>          return <a class="var it2257" onMouseOver="hilite(2257)" onMouseOut="lolite()" onClick="logVariable('fallback_path')" href="../../_variables/fallback_path.html">$fallback_path</a>;
<a name="l1958"><span class="linenum">1958</span></a>      }
<a name="l1959"><span class="linenum">1959</span></a>  
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment">    // No fallback file</span>
<a name="l1961"><span class="linenum">1961</span></a>      return false;
<a name="l1962"><span class="linenum">1962</span></a>  }
<a name="l1963"><span class="linenum">1963</span></a>  
<a name="l1964"><span class="linenum">1964</span></a>  
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment">/**</span>
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment"> * Get file path to template file</span>
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment"> *</span>
<a name="l1968"><span class="linenum">1968</span></a>  <span class="comment"> * @param string Template name</span>
<a name="l1969"><span class="linenum">1969</span></a>  <span class="comment"> * @return string|FALSE File path OR FALSE if fallback file doesn't exist</span>
<a name="l1970"><span class="linenum">1970</span></a>  <span class="comment"> */</span>
<a name="l1971"><span class="linenum">1971</span></a>  function <a class="function" onClick="logFunction('skin_template_path')" href="../../_functions/skin_template_path.html" onMouseOver="funcPopup(event,'skin_template_path')">skin_template_path</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> )
<a name="l1972"><span class="linenum">1972</span></a>  {
<a name="l1973"><span class="linenum">1973</span></a>      global <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>, <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>;
<a name="l1974"><span class="linenum">1974</span></a>  
<a name="l1975"><span class="linenum">1975</span></a>      if( ! empty( <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> ) &amp;&amp; <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) )
<a name="l1976"><span class="linenum">1976</span></a>      { // Template file exists for the current skin
<a name="l1977"><span class="linenum">1977</span></a>          return <a class="var it1108" onMouseOver="hilite(1108)" onMouseOut="lolite()" onClick="logVariable('ads_current_skin_path')" href="../../_variables/ads_current_skin_path.html">$ads_current_skin_path</a>.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>;
<a name="l1978"><span class="linenum">1978</span></a>      }
<a name="l1979"><span class="linenum">1979</span></a>      elseif( <a class="var it2257" onMouseOver="hilite(2257)" onMouseOut="lolite()" onClick="logVariable('fallback_path')" href="../../_variables/fallback_path.html">$fallback_path</a> = <a class="function" onClick="logFunction('skin_fallback_path')" href="../../_functions/skin_fallback_path.html" onMouseOver="funcPopup(event,'skin_fallback_path')">skin_fallback_path</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) )
<a name="l1980"><span class="linenum">1980</span></a>      { // Falback file exists
<a name="l1981"><span class="linenum">1981</span></a>          return <a class="var it2257" onMouseOver="hilite(2257)" onMouseOut="lolite()" onClick="logVariable('fallback_path')" href="../../_variables/fallback_path.html">$fallback_path</a>;
<a name="l1982"><span class="linenum">1982</span></a>      }
<a name="l1983"><span class="linenum">1983</span></a>  
<a name="l1984"><span class="linenum">1984</span></a>      return false;
<a name="l1985"><span class="linenum">1985</span></a>  }
<a name="l1986"><span class="linenum">1986</span></a>  
<a name="l1987"><span class="linenum">1987</span></a>  
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment">/**</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment"> * Template tag.</span>
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment"> *</span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment"> * @param string Template name</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment"> * @param array Params</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment"> * @param boolean force include even if sitewide header/footer not enabled</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment"> */</span>
<a name="l1995"><span class="linenum">1995</span></a>  function <a class="function" onClick="logFunction('siteskin_include')" href="../../_functions/siteskin_include.html" onMouseOver="funcPopup(event,'siteskin_include')">siteskin_include</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(), <a class="var it2258" onMouseOver="hilite(2258)" onMouseOut="lolite()" onClick="logVariable('force')" href="../../_variables/force.html">$force</a> = false )
<a name="l1996"><span class="linenum">1996</span></a>  {
<a name="l1997"><span class="linenum">1997</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>, <a class="var it2259" onMouseOver="hilite(2259)" onMouseOut="lolite()" onClick="logVariable('siteskins_path')" href="../../_variables/siteskins_path.html">$siteskins_path</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>;
<a name="l1998"><span class="linenum">1998</span></a>  
<a name="l1999"><span class="linenum">1999</span></a>      if( !<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'site_skins_enabled' ) &amp;&amp; !<a class="var it2258" onMouseOver="hilite(2258)" onMouseOut="lolite()" onClick="logVariable('force')" href="../../_variables/force.html">$force</a> )
<a name="l2000"><span class="linenum">2000</span></a>      { // Site skins are not enabled and we don't want to force either
<a name="l2001"><span class="linenum">2001</span></a>          return;
<a name="l2002"><span class="linenum">2002</span></a>      }
<a name="l2003"><span class="linenum">2003</span></a>  
<a name="l2004"><span class="linenum">2004</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) )
<a name="l2005"><span class="linenum">2005</span></a>      { // When we request ajax content for results table we need to hide wrapper data (header, footer &amp; etc)
<a name="l2006"><span class="linenum">2006</span></a>          return;
<a name="l2007"><span class="linenum">2007</span></a>      }
<a name="l2008"><span class="linenum">2008</span></a>  
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment">    // Globals that may be needed by the template:</span>
<a name="l2010"><span class="linenum">2010</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>, <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('Hit')" href="../../_variables/Hit.html">$Hit</a>, <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../_variables/Settings.html">$Settings</a>;
<a name="l2011"><span class="linenum">2011</span></a>      global <a class="var it2242" onMouseOver="hilite(2242)" onMouseOut="lolite()" onClick="logVariable('skin_url')" href="../../_variables/skin_url.html">$skin_url</a>, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../_variables/htsrv_url.html">$htsrv_url</a>, <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('htsrv_url_sensitive')" href="../../_variables/htsrv_url_sensitive.html">$htsrv_url_sensitive</a>;
<a name="l2012"><span class="linenum">2012</span></a>      global <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('samedomain_htsrv_url')" href="../../_variables/samedomain_htsrv_url.html">$samedomain_htsrv_url</a>, <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>;
<a name="l2013"><span class="linenum">2013</span></a>      global <a class="var it2237" onMouseOver="hilite(2237)" onMouseOut="lolite()" onClick="logVariable('credit_links')" href="../../_variables/credit_links.html">$credit_links</a>, <a class="var it1871" onMouseOver="hilite(1871)" onMouseOut="lolite()" onClick="logVariable('skin_links')" href="../../_variables/skin_links.html">$skin_links</a>, <a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('francois_links')" href="../../_variables/francois_links.html">$francois_links</a>, <a class="var it2239" onMouseOver="hilite(2239)" onMouseOut="lolite()" onClick="logVariable('fplanque_links')" href="../../_variables/fplanque_links.html">$fplanque_links</a>, <a class="var it2240" onMouseOver="hilite(2240)" onMouseOut="lolite()" onClick="logVariable('skinfaktory_links')" href="../../_variables/skinfaktory_links.html">$skinfaktory_links</a>;
<a name="l2014"><span class="linenum">2014</span></a>      <span class="comment">/**</span>
<a name="l2015"><span class="linenum">2015</span></a>  <span class="comment">    * @var Log</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment">    */</span>
<a name="l2017"><span class="linenum">2017</span></a>      global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2018"><span class="linenum">2018</span></a>      global <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>;
<a name="l2019"><span class="linenum">2019</span></a>  
<a name="l2020"><span class="linenum">2020</span></a>      <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../_variables/timer_name.html">$timer_name</a> = '<a class="function" onClick="logFunction('siteskin_include')" href="../../_functions/siteskin_include.html" onMouseOver="funcPopup(event,'siteskin_include')">siteskin_include</a>('.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>.')';
<a name="l2021"><span class="linenum">2021</span></a>      <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('resume')" href="../../_functions/resume.html" onMouseOver="funcPopup(event,'resume')">resume</a>( <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../_variables/timer_name.html">$timer_name</a> );
<a name="l2022"><span class="linenum">2022</span></a>  
<a name="l2023"><span class="linenum">2023</span></a>      if( <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it2259" onMouseOver="hilite(2259)" onMouseOut="lolite()" onClick="logVariable('siteskins_path')" href="../../_variables/siteskins_path.html">$siteskins_path</a>.'custom/'.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) )
<a name="l2024"><span class="linenum">2024</span></a>      { // Use the custom template:
<a name="l2025"><span class="linenum">2025</span></a>          <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it2259" onMouseOver="hilite(2259)" onMouseOut="lolite()" onClick="logVariable('siteskins_path')" href="../../_variables/siteskins_path.html">$siteskins_path</a>.'custom/'.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>;
<a name="l2026"><span class="linenum">2026</span></a>          <a class="var it2251" onMouseOver="hilite(2251)" onMouseOut="lolite()" onClick="logVariable('debug_info')" href="../../_variables/debug_info.html">$debug_info</a> = '&lt;b&gt;Custom template&lt;/b&gt;: '.<a class="function" onClick="logFunction('rel_path_to_base')" href="../../_functions/rel_path_to_base.html" onMouseOver="funcPopup(event,'rel_path_to_base')">rel_path_to_base</a>(<a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>);
<a name="l2027"><span class="linenum">2027</span></a>          <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> = 'custom';
<a name="l2028"><span class="linenum">2028</span></a>      }
<a name="l2029"><span class="linenum">2029</span></a>      elseif( <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it2259" onMouseOver="hilite(2259)" onMouseOut="lolite()" onClick="logVariable('siteskins_path')" href="../../_variables/siteskins_path.html">$siteskins_path</a>.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> ) ) // Try to include standard template only if custom template doesn't exist
<a name="l2030"><span class="linenum">2030</span></a>      { // Use the default/fallback template:
<a name="l2031"><span class="linenum">2031</span></a>          <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it2259" onMouseOver="hilite(2259)" onMouseOut="lolite()" onClick="logVariable('siteskins_path')" href="../../_variables/siteskins_path.html">$siteskins_path</a>.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>;
<a name="l2032"><span class="linenum">2032</span></a>          <a class="var it2251" onMouseOver="hilite(2251)" onMouseOut="lolite()" onClick="logVariable('debug_info')" href="../../_variables/debug_info.html">$debug_info</a> = '&lt;b&gt;Fallback to&lt;/b&gt;: '.<a class="function" onClick="logFunction('rel_path_to_base')" href="../../_functions/rel_path_to_base.html" onMouseOver="funcPopup(event,'rel_path_to_base')">rel_path_to_base</a>(<a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>);
<a name="l2033"><span class="linenum">2033</span></a>          <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> = 'fallback';
<a name="l2034"><span class="linenum">2034</span></a>      }
<a name="l2035"><span class="linenum">2035</span></a>      else
<a name="l2036"><span class="linenum">2036</span></a>      {
<a name="l2037"><span class="linenum">2037</span></a>          <a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a> = false;
<a name="l2038"><span class="linenum">2038</span></a>      }
<a name="l2039"><span class="linenum">2039</span></a>  
<a name="l2040"><span class="linenum">2040</span></a>  
<a name="l2041"><span class="linenum">2041</span></a>  <span class="comment">    // Do we want a visible container for DEBUG/DEV ?:</span>
<a name="l2042"><span class="linenum">2042</span></a>      if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>, '_html_' ) !== false ||  <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>, '_init.' ) !== false )
<a name="l2043"><span class="linenum">2043</span></a>      {    // We're outside of the page body: NEVER display wrap this include with a &lt;div&gt;
<a name="l2044"><span class="linenum">2044</span></a>          <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> = false;
<a name="l2045"><span class="linenum">2045</span></a>      }
<a name="l2046"><span class="linenum">2046</span></a>      elseif( isset( <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a> ) )
<a name="l2047"><span class="linenum">2047</span></a>      {    // We may wrap with a &lt;div&gt;:
<a name="l2048"><span class="linenum">2048</span></a>          <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> = <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'display_includes_'.( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) ? 0 : <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) ) == 1;
<a name="l2049"><span class="linenum">2049</span></a>      }
<a name="l2050"><span class="linenum">2050</span></a>      else
<a name="l2051"><span class="linenum">2051</span></a>      {    // Request without defined <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>, Don't display the includes:
<a name="l2052"><span class="linenum">2052</span></a>          <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> = false;
<a name="l2053"><span class="linenum">2053</span></a>      }
<a name="l2054"><span class="linenum">2054</span></a>      if( <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> )
<a name="l2055"><span class="linenum">2055</span></a>      { // Wrap the include with a visible div:
<a name="l2056"><span class="linenum">2056</span></a>          echo '&lt;div class=&quot;dev-blocks dev-blocks--siteinclude&quot;&gt;';
<a name="l2057"><span class="linenum">2057</span></a>          echo '&lt;div class=&quot;dev-blocks-name&quot;&gt;<a class="function" onClick="logFunction('siteskin_include')" href="../../_functions/siteskin_include.html" onMouseOver="funcPopup(event,'siteskin_include')">siteskin_include</a>( &lt;b&gt;'.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a>.'&lt;/b&gt; ) -&gt; '.<a class="var it2251" onMouseOver="hilite(2251)" onMouseOut="lolite()" onClick="logVariable('debug_info')" href="../../_variables/debug_info.html">$debug_info</a>.'&lt;/div&gt;';
<a name="l2058"><span class="linenum">2058</span></a>      }
<a name="l2059"><span class="linenum">2059</span></a>  
<a name="l2060"><span class="linenum">2060</span></a>  
<a name="l2061"><span class="linenum">2061</span></a>      if(<a class="var it2252" onMouseOver="hilite(2252)" onMouseOut="lolite()" onClick="logVariable('disp_handled')" href="../../_variables/disp_handled.html">$disp_handled</a>)
<a name="l2062"><span class="linenum">2062</span></a>      {
<a name="l2063"><span class="linenum">2063</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('siteskin_include: '.<a class="function" onClick="logFunction('rel_path_to_base')" href="../../_functions/rel_path_to_base.html" onMouseOver="funcPopup(event,'rel_path_to_base')">rel_path_to_base</a>(<a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>), 'skins');
<a name="l2064"><span class="linenum">2064</span></a>          require <a class="var it838" onMouseOver="hilite(838)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>;
<a name="l2065"><span class="linenum">2065</span></a>      }
<a name="l2066"><span class="linenum">2066</span></a>      else
<a name="l2067"><span class="linenum">2067</span></a>      {    // nothing handled the display
<a name="l2068"><span class="linenum">2068</span></a>          printf( '&lt;div class=&quot;skin_error&quot;&gt;Site template [%s] not found.&lt;/div&gt;', <a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> );
<a name="l2069"><span class="linenum">2069</span></a>          if( !empty(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>) &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('level')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/level.html">level</a> == 10 )
<a name="l2070"><span class="linenum">2070</span></a>          {
<a name="l2071"><span class="linenum">2071</span></a>              printf( '&lt;div class=&quot;skin_error&quot;&gt;User level 10 help info: [%s]&lt;/div&gt;', <a class="var it2259" onMouseOver="hilite(2259)" onMouseOut="lolite()" onClick="logVariable('siteskins_path')" href="../../_variables/siteskins_path.html">$siteskins_path</a>.<a class="var it2241" onMouseOver="hilite(2241)" onMouseOut="lolite()" onClick="logVariable('template_name')" href="../../_variables/template_name.html">$template_name</a> );
<a name="l2072"><span class="linenum">2072</span></a>          }
<a name="l2073"><span class="linenum">2073</span></a>      }
<a name="l2074"><span class="linenum">2074</span></a>  
<a name="l2075"><span class="linenum">2075</span></a>  
<a name="l2076"><span class="linenum">2076</span></a>      if( <a class="var it2254" onMouseOver="hilite(2254)" onMouseOut="lolite()" onClick="logVariable('display_includes')" href="../../_variables/display_includes.html">$display_includes</a> )
<a name="l2077"><span class="linenum">2077</span></a>      { // End of visible container:
<a name="l2078"><span class="linenum">2078</span></a>  <span class="comment">        // echo get_icon( 'pixel', 'imgtag', array( 'class' =&gt; 'clear' ) );</span>
<a name="l2079"><span class="linenum">2079</span></a>          echo '&lt;/div&gt;';
<a name="l2080"><span class="linenum">2080</span></a>      }
<a name="l2081"><span class="linenum">2081</span></a>  
<a name="l2082"><span class="linenum">2082</span></a>  
<a name="l2083"><span class="linenum">2083</span></a>      <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('Timer')" href="../../_variables/Timer.html">$Timer</a>-&gt;<a class="function" onClick="logFunction('pause')" href="../../_functions/pause.html" onMouseOver="funcPopup(event,'pause')">pause</a>( <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('timer_name')" href="../../_variables/timer_name.html">$timer_name</a> );
<a name="l2084"><span class="linenum">2084</span></a>  }
<a name="l2085"><span class="linenum">2085</span></a>  
<a name="l2086"><span class="linenum">2086</span></a>  
<a name="l2087"><span class="linenum">2087</span></a>  <span class="comment">/**</span>
<a name="l2088"><span class="linenum">2088</span></a>  <span class="comment"> * Template tag. Output HTML base tag to current skin.</span>
<a name="l2089"><span class="linenum">2089</span></a>  <span class="comment"> *</span>
<a name="l2090"><span class="linenum">2090</span></a>  <span class="comment"> * This is needed for relative css and img includes.</span>
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment"> */</span>
<a name="l2092"><span class="linenum">2092</span></a>  function <a class="function" onClick="logFunction('skin_base_tag')" href="../../_functions/skin_base_tag.html" onMouseOver="funcPopup(event,'skin_base_tag')">skin_base_tag</a>()
<a name="l2093"><span class="linenum">2093</span></a>  {
<a name="l2094"><span class="linenum">2094</span></a>      global <a class="var it2260" onMouseOver="hilite(2260)" onMouseOut="lolite()" onClick="logVariable('skins_url')" href="../../_variables/skins_url.html">$skins_url</a>, <a class="var it1603" onMouseOver="hilite(1603)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>;
<a name="l2095"><span class="linenum">2095</span></a>  
<a name="l2096"><span class="linenum">2096</span></a>      if( ! empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) )
<a name="l2097"><span class="linenum">2097</span></a>      {    // We are displaying a blog:
<a name="l2098"><span class="linenum">2098</span></a>          if( ! empty( <a class="var it1603" onMouseOver="hilite(1603)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a> ) )
<a name="l2099"><span class="linenum">2099</span></a>          {    // We are using a skin:
<a name="l2100"><span class="linenum">2100</span></a>              <a class="var it2261" onMouseOver="hilite(2261)" onMouseOut="lolite()" onClick="logVariable('base_href')" href="../../_variables/base_href.html">$base_href</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_local_skins_url')" href="../../_functions/get_local_skins_url.html" onMouseOver="funcPopup(event,'get_local_skins_url')">get_local_skins_url</a>().<a class="var it1603" onMouseOver="hilite(1603)" onMouseOut="lolite()" onClick="logVariable('skin')" href="../../_variables/skin.html">$skin</a>.'/';
<a name="l2101"><span class="linenum">2101</span></a>          }
<a name="l2102"><span class="linenum">2102</span></a>          else
<a name="l2103"><span class="linenum">2103</span></a>          { // No skin used:
<a name="l2104"><span class="linenum">2104</span></a>              <a class="var it2261" onMouseOver="hilite(2261)" onMouseOut="lolite()" onClick="logVariable('base_href')" href="../../_variables/base_href.html">$base_href</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_baseurl')" href="../../_functions/gen_baseurl.html" onMouseOver="funcPopup(event,'gen_baseurl')">gen_baseurl</a>();
<a name="l2105"><span class="linenum">2105</span></a>          }
<a name="l2106"><span class="linenum">2106</span></a>      }
<a name="l2107"><span class="linenum">2107</span></a>      else
<a name="l2108"><span class="linenum">2108</span></a>      {    // We are displaying a general page that is not specific to a blog:
<a name="l2109"><span class="linenum">2109</span></a>          global <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>;
<a name="l2110"><span class="linenum">2110</span></a>          <a class="var it2261" onMouseOver="hilite(2261)" onMouseOut="lolite()" onClick="logVariable('base_href')" href="../../_variables/base_href.html">$base_href</a> = <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>;
<a name="l2111"><span class="linenum">2111</span></a>      }
<a name="l2112"><span class="linenum">2112</span></a>  
<a name="l2113"><span class="linenum">2113</span></a>      <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a> = NULL;
<a name="l2114"><span class="linenum">2114</span></a>      if( !empty(<a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, '-popup' ) )
<a name="l2115"><span class="linenum">2115</span></a>      {    // We are (normally) displaying in a popup window, we need most links to open a new window!
<a name="l2116"><span class="linenum">2116</span></a>          <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a> = '_blank';
<a name="l2117"><span class="linenum">2117</span></a>      }
<a name="l2118"><span class="linenum">2118</span></a>  
<a name="l2119"><span class="linenum">2119</span></a>      <a class="function" onClick="logFunction('base_tag')" href="../../_functions/base_tag.html" onMouseOver="funcPopup(event,'base_tag')">base_tag</a>( <a class="var it2261" onMouseOver="hilite(2261)" onMouseOut="lolite()" onClick="logVariable('base_href')" href="../../_variables/base_href.html">$base_href</a>, <a class="var it1169" onMouseOver="hilite(1169)" onMouseOut="lolite()" onClick="logVariable('target')" href="../../_variables/target.html">$target</a> );
<a name="l2120"><span class="linenum">2120</span></a>  }
<a name="l2121"><span class="linenum">2121</span></a>  
<a name="l2122"><span class="linenum">2122</span></a>  
<a name="l2123"><span class="linenum">2123</span></a>  <span class="comment">/**</span>
<a name="l2124"><span class="linenum">2124</span></a>  <span class="comment"> * Template tag</span>
<a name="l2125"><span class="linenum">2125</span></a>  <span class="comment"> *</span>
<a name="l2126"><span class="linenum">2126</span></a>  <span class="comment"> * Note for future mods: we do NOT want to repeat identical content on multiple pages.</span>
<a name="l2127"><span class="linenum">2127</span></a>  <span class="comment"> */</span>
<a name="l2128"><span class="linenum">2128</span></a>  function <a class="function" onClick="logFunction('skin_description_tag')" href="../../_functions/skin_description_tag.html" onMouseOver="funcPopup(event,'skin_description_tag')">skin_description_tag</a>()
<a name="l2129"><span class="linenum">2129</span></a>  {
<a name="l2130"><span class="linenum">2130</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a>, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>, <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a>, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../_variables/is_front.html">$is_front</a>;
<a name="l2131"><span class="linenum">2131</span></a>  
<a name="l2132"><span class="linenum">2132</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = '';
<a name="l2133"><span class="linenum">2133</span></a>  
<a name="l2134"><span class="linenum">2134</span></a>      if( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../_variables/is_front.html">$is_front</a> )
<a name="l2135"><span class="linenum">2135</span></a>      {    // Use default description:
<a name="l2136"><span class="linenum">2136</span></a>          if( ! empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) )
<a name="l2137"><span class="linenum">2137</span></a>          {    // Description for the blog:
<a name="l2138"><span class="linenum">2138</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'shortdesc' );
<a name="l2139"><span class="linenum">2139</span></a>          }
<a name="l2140"><span class="linenum">2140</span></a>      }
<a name="l2141"><span class="linenum">2141</span></a>      elseif( <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> == 'posts-cat' || <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> == 'posts-subcat' )
<a name="l2142"><span class="linenum">2142</span></a>      {
<a name="l2143"><span class="linenum">2143</span></a>          if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'categories_meta_description' ) &amp;&amp; ( ! empty( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a> ) ) )
<a name="l2144"><span class="linenum">2144</span></a>          {
<a name="l2145"><span class="linenum">2145</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'description' );
<a name="l2146"><span class="linenum">2146</span></a>          }
<a name="l2147"><span class="linenum">2147</span></a>      }
<a name="l2148"><span class="linenum">2148</span></a>      elseif( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, array( 'single', 'page' ) ) )
<a name="l2149"><span class="linenum">2149</span></a>      {    // custom desc for the current single post:
<a name="l2150"><span class="linenum">2150</span></a>          <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = &amp; <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;get_by_idx( 0 );
<a name="l2151"><span class="linenum">2151</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) )
<a name="l2152"><span class="linenum">2152</span></a>          {    // This is not an object (happens on an invalid request):
<a name="l2153"><span class="linenum">2153</span></a>              return;
<a name="l2154"><span class="linenum">2154</span></a>          }
<a name="l2155"><span class="linenum">2155</span></a>  
<a name="l2156"><span class="linenum">2156</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_metadesc')" href="../../_functions/get_metadesc.html" onMouseOver="funcPopup(event,'get_metadesc')">get_metadesc</a>();
<a name="l2157"><span class="linenum">2157</span></a>  
<a name="l2158"><span class="linenum">2158</span></a>          if( empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> )&amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'excerpts_meta_description' ) )
<a name="l2159"><span class="linenum">2159</span></a>          {    // Fall back to excerpt for the current single post:
<a name="l2160"><span class="linenum">2160</span></a>  <span class="comment">            // Replace line breaks with single space</span>
<a name="l2161"><span class="linenum">2161</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>( '|[\r\n]+|', ' ', <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('excerpt') );
<a name="l2162"><span class="linenum">2162</span></a>          }
<a name="l2163"><span class="linenum">2163</span></a>      }
<a name="l2164"><span class="linenum">2164</span></a>  
<a name="l2165"><span class="linenum">2165</span></a>      if( !empty(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>) )
<a name="l2166"><span class="linenum">2166</span></a>      {
<a name="l2167"><span class="linenum">2167</span></a>          echo '&lt;meta name=&quot;description&quot; content=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>, 'htmlattr' ).&quot;\&quot; /&gt;\n&quot;;
<a name="l2168"><span class="linenum">2168</span></a>      }
<a name="l2169"><span class="linenum">2169</span></a>  }
<a name="l2170"><span class="linenum">2170</span></a>  
<a name="l2171"><span class="linenum">2171</span></a>  
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment">/**</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment"> * Template tag</span>
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment"> *</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment"> * Note for future mods: we do NOT want to repeat identical content on multiple pages.</span>
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment"> */</span>
<a name="l2177"><span class="linenum">2177</span></a>  function <a class="function" onClick="logFunction('skin_keywords_tag')" href="../../_functions/skin_keywords_tag.html" onMouseOver="funcPopup(event,'skin_keywords_tag')">skin_keywords_tag</a>()
<a name="l2178"><span class="linenum">2178</span></a>  {
<a name="l2179"><span class="linenum">2179</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../_variables/is_front.html">$is_front</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>;
<a name="l2180"><span class="linenum">2180</span></a>  
<a name="l2181"><span class="linenum">2181</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = '';
<a name="l2182"><span class="linenum">2182</span></a>  
<a name="l2183"><span class="linenum">2183</span></a>      if( <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('is_front')" href="../../_variables/is_front.html">$is_front</a> )
<a name="l2184"><span class="linenum">2184</span></a>      {    // Use default keywords:
<a name="l2185"><span class="linenum">2185</span></a>          if( !empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) )
<a name="l2186"><span class="linenum">2186</span></a>          {
<a name="l2187"><span class="linenum">2187</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('keywords');
<a name="l2188"><span class="linenum">2188</span></a>          }
<a name="l2189"><span class="linenum">2189</span></a>      }
<a name="l2190"><span class="linenum">2190</span></a>      elseif( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, array( 'single', 'page' ) ) )
<a name="l2191"><span class="linenum">2191</span></a>      {    // custom keywords for the current single post:
<a name="l2192"><span class="linenum">2192</span></a>          <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = &amp; <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;get_by_idx( 0 );
<a name="l2193"><span class="linenum">2193</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) )
<a name="l2194"><span class="linenum">2194</span></a>          {    // This is not an object (happens on an invalid request):
<a name="l2195"><span class="linenum">2195</span></a>              return;
<a name="l2196"><span class="linenum">2196</span></a>          }
<a name="l2197"><span class="linenum">2197</span></a>  
<a name="l2198"><span class="linenum">2198</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_metakeywords')" href="../../_functions/get_metakeywords.html" onMouseOver="funcPopup(event,'get_metakeywords')">get_metakeywords</a>();
<a name="l2199"><span class="linenum">2199</span></a>  
<a name="l2200"><span class="linenum">2200</span></a>  
<a name="l2201"><span class="linenum">2201</span></a>          if( empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'tags_meta_keywords' ) )
<a name="l2202"><span class="linenum">2202</span></a>          {    // Fall back to tags for the current single post:
<a name="l2203"><span class="linenum">2203</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a class="function" onClick="logFunction('get_tags')" href="../../_functions/get_tags.html" onMouseOver="funcPopup(event,'get_tags')">get_tags</a>() );
<a name="l2204"><span class="linenum">2204</span></a>          }
<a name="l2205"><span class="linenum">2205</span></a>  
<a name="l2206"><span class="linenum">2206</span></a>      }
<a name="l2207"><span class="linenum">2207</span></a>  
<a name="l2208"><span class="linenum">2208</span></a>      if( !empty(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>) )
<a name="l2209"><span class="linenum">2209</span></a>      {
<a name="l2210"><span class="linenum">2210</span></a>          echo '&lt;meta name=&quot;keywords&quot; content=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>, 'htmlattr' ).&quot;\&quot; /&gt;\n&quot;;
<a name="l2211"><span class="linenum">2211</span></a>      }
<a name="l2212"><span class="linenum">2212</span></a>  }
<a name="l2213"><span class="linenum">2213</span></a>  
<a name="l2214"><span class="linenum">2214</span></a>  
<a name="l2215"><span class="linenum">2215</span></a>  <span class="comment">/**</span>
<a name="l2216"><span class="linenum">2216</span></a>  <span class="comment"> * Template tag</span>
<a name="l2217"><span class="linenum">2217</span></a>  <span class="comment"> *</span>
<a name="l2218"><span class="linenum">2218</span></a>  <span class="comment"> * Used to print out open graph tags</span>
<a name="l2219"><span class="linenum">2219</span></a>  <span class="comment"> */</span>
<a name="l2220"><span class="linenum">2220</span></a>  function <a class="function" onClick="logFunction('skin_opengraph_tags')" href="../../_functions/skin_opengraph_tags.html" onMouseOver="funcPopup(event,'skin_opengraph_tags')">skin_opengraph_tags</a>()
<a name="l2221"><span class="linenum">2221</span></a>  {
<a name="l2222"><span class="linenum">2222</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>;
<a name="l2223"><span class="linenum">2223</span></a>  
<a name="l2224"><span class="linenum">2224</span></a>      if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) || ! <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'tags_open_graph' ) )
<a name="l2225"><span class="linenum">2225</span></a>      { // Open Graph tags are not allowed
<a name="l2226"><span class="linenum">2226</span></a>          return;
<a name="l2227"><span class="linenum">2227</span></a>      }
<a name="l2228"><span class="linenum">2228</span></a>  
<a name="l2229"><span class="linenum">2229</span></a>  <span class="comment">    // Get info for og:image tag</span>
<a name="l2230"><span class="linenum">2230</span></a>      <a class="var it2262" onMouseOver="hilite(2262)" onMouseOut="lolite()" onClick="logVariable('og_images')" href="../../_variables/og_images.html">$og_images</a> = array();
<a name="l2231"><span class="linenum">2231</span></a>      if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, array( 'single', 'page' ) ) )
<a name="l2232"><span class="linenum">2232</span></a>      { // Use only on 'single' and 'page' disp
<a name="l2233"><span class="linenum">2233</span></a>          <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> = &amp; <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../_variables/MainList.html">$MainList</a>-&gt;get_by_idx( 0 );
<a name="l2234"><span class="linenum">2234</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) )
<a name="l2235"><span class="linenum">2235</span></a>          { // This is not an object (happens on an invalid request):
<a name="l2236"><span class="linenum">2236</span></a>              return;
<a name="l2237"><span class="linenum">2237</span></a>          }
<a name="l2238"><span class="linenum">2238</span></a>  
<a name="l2239"><span class="linenum">2239</span></a>          <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkItem')" href="../../_classes/linkitem.html" onMouseOver="classPopup(event,'linkitem')">LinkItem</a>( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> );
<a name="l2240"><span class="linenum">2240</span></a>          if( ! <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../_variables/LinkList.html">$LinkList</a> = <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;<a class="function" onClick="logFunction('get_attachment_LinkList')" href="../../_functions/get_attachment_linklist.html" onMouseOver="funcPopup(event,'get_attachment_linklist')">get_attachment_LinkList</a>( 1000 ) )
<a name="l2241"><span class="linenum">2241</span></a>          { // Item has no linked files
<a name="l2242"><span class="linenum">2242</span></a>              return;
<a name="l2243"><span class="linenum">2243</span></a>          }
<a name="l2244"><span class="linenum">2244</span></a>  
<a name="l2245"><span class="linenum">2245</span></a>          while( <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a> = &amp; <a class="var it1578" onMouseOver="hilite(1578)" onMouseOut="lolite()" onClick="logVariable('LinkList')" href="../../_variables/LinkList.html">$LinkList</a>-&gt;get_next() )
<a name="l2246"><span class="linenum">2246</span></a>          {
<a name="l2247"><span class="linenum">2247</span></a>              if( ! ( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a> = &amp; <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a>-&gt;get_File() ) )
<a name="l2248"><span class="linenum">2248</span></a>              { // No File object
<a name="l2249"><span class="linenum">2249</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2250"><span class="linenum">2250</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'Link ID#%d of item #%d does not have a file object!', <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../_variables/Link.html">$Link</a>-&gt;<a onClick="logVariable('ID')" class="var it10745" onMouseOver="hilite(10745)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>, <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ), array( 'error', 'files' ) );
<a name="l2251"><span class="linenum">2251</span></a>                  continue;
<a name="l2252"><span class="linenum">2252</span></a>              }
<a name="l2253"><span class="linenum">2253</span></a>  
<a name="l2254"><span class="linenum">2254</span></a>              if( ! <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l2255"><span class="linenum">2255</span></a>              { // File doesn't exist
<a name="l2256"><span class="linenum">2256</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2257"><span class="linenum">2257</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'File linked to item #%d does not exist (%s)!', <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>, <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_full_path')" href="../../_functions/get_full_path.html" onMouseOver="funcPopup(event,'get_full_path')">get_full_path</a>() ), array( 'error', 'files' ) );
<a name="l2258"><span class="linenum">2258</span></a>                  continue;
<a name="l2259"><span class="linenum">2259</span></a>              }
<a name="l2260"><span class="linenum">2260</span></a>  
<a name="l2261"><span class="linenum">2261</span></a>              if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('is_image')" href="../../_functions/is_image.html" onMouseOver="funcPopup(event,'is_image')">is_image</a>() )
<a name="l2262"><span class="linenum">2262</span></a>              { // Use only image files for og:image tag
<a name="l2263"><span class="linenum">2263</span></a>                  <a class="var it2262" onMouseOver="hilite(2262)" onMouseOut="lolite()" onClick="logVariable('og_images')" href="../../_variables/og_images.html">$og_images</a>[] = <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>();
<a name="l2264"><span class="linenum">2264</span></a>              }
<a name="l2265"><span class="linenum">2265</span></a>          }
<a name="l2266"><span class="linenum">2266</span></a>      }
<a name="l2267"><span class="linenum">2267</span></a>  
<a name="l2268"><span class="linenum">2268</span></a>      if( ! empty( <a class="var it2262" onMouseOver="hilite(2262)" onMouseOut="lolite()" onClick="logVariable('og_images')" href="../../_variables/og_images.html">$og_images</a> ) )
<a name="l2269"><span class="linenum">2269</span></a>      { // Display meta tags for image:
<a name="l2270"><span class="linenum">2270</span></a>  <span class="comment">        // Open Graph type tag (This tag is necessary for multiple images on facebook share button)</span>
<a name="l2271"><span class="linenum">2271</span></a>          echo '&lt;meta property=&quot;og:type&quot; content=&quot;article&quot; /&gt;'.&quot;\n&quot;;
<a name="l2272"><span class="linenum">2272</span></a>          foreach( <a class="var it2262" onMouseOver="hilite(2262)" onMouseOut="lolite()" onClick="logVariable('og_images')" href="../../_variables/og_images.html">$og_images</a> as <a class="var it2263" onMouseOver="hilite(2263)" onMouseOut="lolite()" onClick="logVariable('og_image')" href="../../_variables/og_image.html">$og_image</a> )
<a name="l2273"><span class="linenum">2273</span></a>          { // Open Graph image tag
<a name="l2274"><span class="linenum">2274</span></a>              echo '&lt;meta property=&quot;og:image&quot; content=&quot;'.<a class="function" onClick="logFunction('format_to_output')" href="../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it2263" onMouseOver="hilite(2263)" onMouseOut="lolite()" onClick="logVariable('og_image')" href="../../_variables/og_image.html">$og_image</a>, 'htmlattr' ).&quot;\&quot; /&gt;\n&quot;;
<a name="l2275"><span class="linenum">2275</span></a>          }
<a name="l2276"><span class="linenum">2276</span></a>      }
<a name="l2277"><span class="linenum">2277</span></a>  }
<a name="l2278"><span class="linenum">2278</span></a>  
<a name="l2279"><span class="linenum">2279</span></a>  
<a name="l2280"><span class="linenum">2280</span></a>  <span class="comment">/**</span>
<a name="l2281"><span class="linenum">2281</span></a>  <span class="comment"> * Sends the desired HTTP response header in case of a &quot;404&quot;.</span>
<a name="l2282"><span class="linenum">2282</span></a>  <span class="comment"> */</span>
<a name="l2283"><span class="linenum">2283</span></a>  function <a class="function" onClick="logFunction('skin_404_header')" href="../../_functions/skin_404_header.html" onMouseOver="funcPopup(event,'skin_404_header')">skin_404_header</a>()
<a name="l2284"><span class="linenum">2284</span></a>  {
<a name="l2285"><span class="linenum">2285</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>;
<a name="l2286"><span class="linenum">2286</span></a>  
<a name="l2287"><span class="linenum">2287</span></a>  <span class="comment">    // We have a 404 unresolved content error</span>
<a name="l2288"><span class="linenum">2288</span></a>  <span class="comment">    // How do we want do deal with it?</span>
<a name="l2289"><span class="linenum">2289</span></a>      switch( <a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('resp_code')" href="../../_variables/resp_code.html">$resp_code</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( '404_response' ) )
<a name="l2290"><span class="linenum">2290</span></a>      {
<a name="l2291"><span class="linenum">2291</span></a>          case '404':
<a name="l2292"><span class="linenum">2292</span></a>              <a class="function" onClick="logFunction('header_http_response')" href="../../_functions/header_http_response.html" onMouseOver="funcPopup(event,'header_http_response')">header_http_response</a>('404 Not Found');
<a name="l2293"><span class="linenum">2293</span></a>              break;
<a name="l2294"><span class="linenum">2294</span></a>  
<a name="l2295"><span class="linenum">2295</span></a>          case '410':
<a name="l2296"><span class="linenum">2296</span></a>              <a class="function" onClick="logFunction('header_http_response')" href="../../_functions/header_http_response.html" onMouseOver="funcPopup(event,'header_http_response')">header_http_response</a>('410 Gone');
<a name="l2297"><span class="linenum">2297</span></a>              break;
<a name="l2298"><span class="linenum">2298</span></a>  
<a name="l2299"><span class="linenum">2299</span></a>          case '301':
<a name="l2300"><span class="linenum">2300</span></a>          case '302':
<a name="l2301"><span class="linenum">2301</span></a>          case '303':
<a name="l2302"><span class="linenum">2302</span></a>  <span class="comment">            // Redirect to home page:</span>
<a name="l2303"><span class="linenum">2303</span></a>              <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('url'), <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('resp_code')" href="../../_variables/resp_code.html">$resp_code</a>) );
<a name="l2304"><span class="linenum">2304</span></a>  <span class="comment">            // THIS WILL EXIT!</span>
<a name="l2305"><span class="linenum">2305</span></a>              break;
<a name="l2306"><span class="linenum">2306</span></a>  
<a name="l2307"><span class="linenum">2307</span></a>          default:
<a name="l2308"><span class="linenum">2308</span></a>  <span class="comment">            // Will result in a 200 OK</span>
<a name="l2309"><span class="linenum">2309</span></a>      }
<a name="l2310"><span class="linenum">2310</span></a>  }
<a name="l2311"><span class="linenum">2311</span></a>  
<a name="l2312"><span class="linenum">2312</span></a>  
<a name="l2313"><span class="linenum">2313</span></a>  <span class="comment">/**</span>
<a name="l2314"><span class="linenum">2314</span></a>  <span class="comment"> * Template tag. Output content-type header</span>
<a name="l2315"><span class="linenum">2315</span></a>  <span class="comment"> * For backward compatibility</span>
<a name="l2316"><span class="linenum">2316</span></a>  <span class="comment"> *</span>
<a name="l2317"><span class="linenum">2317</span></a>  <span class="comment"> * @see skin_content_meta()</span>
<a name="l2318"><span class="linenum">2318</span></a>  <span class="comment"> *</span>
<a name="l2319"><span class="linenum">2319</span></a>  <span class="comment"> * @param string content-type; override for RSS feeds</span>
<a name="l2320"><span class="linenum">2320</span></a>  <span class="comment"> */</span>
<a name="l2321"><span class="linenum">2321</span></a>  function <a class="function" onClick="logFunction('skin_content_header')" href="../../_functions/skin_content_header.html" onMouseOver="funcPopup(event,'skin_content_header')">skin_content_header</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'text/html' )
<a name="l2322"><span class="linenum">2322</span></a>  {
<a name="l2323"><span class="linenum">2323</span></a>      <a class="function" onClick="logFunction('header_content_type')" href="../../_functions/header_content_type.html" onMouseOver="funcPopup(event,'header_content_type')">header_content_type</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> );
<a name="l2324"><span class="linenum">2324</span></a>  }
<a name="l2325"><span class="linenum">2325</span></a>  
<a name="l2326"><span class="linenum">2326</span></a>  
<a name="l2327"><span class="linenum">2327</span></a>  <span class="comment">/**</span>
<a name="l2328"><span class="linenum">2328</span></a>  <span class="comment"> * Template tag. Output content-type http_equiv meta tag</span>
<a name="l2329"><span class="linenum">2329</span></a>  <span class="comment"> *</span>
<a name="l2330"><span class="linenum">2330</span></a>  <span class="comment"> * @see skin_content_header()</span>
<a name="l2331"><span class="linenum">2331</span></a>  <span class="comment"> *</span>
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment"> * @param string content-type; override for RSS feeds</span>
<a name="l2333"><span class="linenum">2333</span></a>  <span class="comment"> */</span>
<a name="l2334"><span class="linenum">2334</span></a>  function <a class="function" onClick="logFunction('skin_content_meta')" href="../../_functions/skin_content_meta.html" onMouseOver="funcPopup(event,'skin_content_meta')">skin_content_meta</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'text/html' )
<a name="l2335"><span class="linenum">2335</span></a>  {
<a name="l2336"><span class="linenum">2336</span></a>      global <a class="var it927" onMouseOver="hilite(927)" onMouseOut="lolite()" onClick="logVariable('io_charset')" href="../../_variables/io_charset.html">$io_charset</a>;
<a name="l2337"><span class="linenum">2337</span></a>  
<a name="l2338"><span class="linenum">2338</span></a>      echo '&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;'.<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>.'; charset='.<a class="var it927" onMouseOver="hilite(927)" onMouseOut="lolite()" onClick="logVariable('io_charset')" href="../../_variables/io_charset.html">$io_charset</a>.'&quot; /&gt;'.&quot;\n&quot;;
<a name="l2339"><span class="linenum">2339</span></a>  }
<a name="l2340"><span class="linenum">2340</span></a>  
<a name="l2341"><span class="linenum">2341</span></a>  
<a name="l2342"><span class="linenum">2342</span></a>  <span class="comment">/**</span>
<a name="l2343"><span class="linenum">2343</span></a>  <span class="comment"> * Template tag. Display a Widget.</span>
<a name="l2344"><span class="linenum">2344</span></a>  <span class="comment"> *</span>
<a name="l2345"><span class="linenum">2345</span></a>  <span class="comment"> * This load the widget class, instantiates it, and displays it.</span>
<a name="l2346"><span class="linenum">2346</span></a>  <span class="comment"> *</span>
<a name="l2347"><span class="linenum">2347</span></a>  <span class="comment"> * @param array</span>
<a name="l2348"><span class="linenum">2348</span></a>  <span class="comment"> */</span>
<a name="l2349"><span class="linenum">2349</span></a>  function <a class="function" onClick="logFunction('skin_widget')" href="../../_functions/skin_widget.html" onMouseOver="funcPopup(event,'skin_widget')">skin_widget</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> )
<a name="l2350"><span class="linenum">2350</span></a>  {
<a name="l2351"><span class="linenum">2351</span></a>      global <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../_variables/inc_path.html">$inc_path</a>;
<a name="l2352"><span class="linenum">2352</span></a>  
<a name="l2353"><span class="linenum">2353</span></a>      if( empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['widget'] ) )
<a name="l2354"><span class="linenum">2354</span></a>      {
<a name="l2355"><span class="linenum">2355</span></a>          echo 'No widget code provided!';
<a name="l2356"><span class="linenum">2356</span></a>          return false;
<a name="l2357"><span class="linenum">2357</span></a>      }
<a name="l2358"><span class="linenum">2358</span></a>  
<a name="l2359"><span class="linenum">2359</span></a>      <a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('widget_code')" href="../../_variables/widget_code.html">$widget_code</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['widget'];
<a name="l2360"><span class="linenum">2360</span></a>      unset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['widget'] );
<a name="l2361"><span class="linenum">2361</span></a>  
<a name="l2362"><span class="linenum">2362</span></a>      if( ! <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>( <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../_variables/inc_path.html">$inc_path</a>.'widgets/widgets/_'.<a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('widget_code')" href="../../_variables/widget_code.html">$widget_code</a>.'.widget.php' ) )
<a name="l2363"><span class="linenum">2363</span></a>      {    // For some reason, that widget doesn't seem to exist... (any more?)
<a name="l2364"><span class="linenum">2364</span></a>          echo &quot;Invalid widget code provided [<a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('widget_code')" href="../../_variables/widget_code.html">$widget_code</a>]!&quot;;
<a name="l2365"><span class="linenum">2365</span></a>          return false;
<a name="l2366"><span class="linenum">2366</span></a>      }
<a name="l2367"><span class="linenum">2367</span></a>      require_once <a class="var it43" onMouseOver="hilite(43)" onMouseOut="lolite()" onClick="logVariable('inc_path')" href="../../_variables/inc_path.html">$inc_path</a>.'widgets/widgets/_'.<a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('widget_code')" href="../../_variables/widget_code.html">$widget_code</a>.'.widget.php';
<a name="l2368"><span class="linenum">2368</span></a>  
<a name="l2369"><span class="linenum">2369</span></a>      <a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('widget_classname')" href="../../_variables/widget_classname.html">$widget_classname</a> = <a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('widget_code')" href="../../_variables/widget_code.html">$widget_code</a>.'_Widget';
<a name="l2370"><span class="linenum">2370</span></a>  
<a name="l2371"><span class="linenum">2371</span></a>      <span class="comment">/**</span>
<a name="l2372"><span class="linenum">2372</span></a>  <span class="comment">     * @var ComponentWidget</span>
<a name="l2373"><span class="linenum">2373</span></a>  <span class="comment">     */</span>
<a name="l2374"><span class="linenum">2374</span></a>      <a class="var it1978" onMouseOver="hilite(1978)" onMouseOut="lolite()" onClick="logVariable('Widget')" href="../../_variables/Widget.html">$Widget</a> = new <a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('widget_classname')" href="../../_variables/widget_classname.html">$widget_classname</a>();    <span class="comment">// COPY !!</span>
<a name="l2375"><span class="linenum">2375</span></a>  
<a name="l2376"><span class="linenum">2376</span></a>      return <a class="var it1978" onMouseOver="hilite(1978)" onMouseOut="lolite()" onClick="logVariable('Widget')" href="../../_variables/Widget.html">$Widget</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2377"><span class="linenum">2377</span></a>  }
<a name="l2378"><span class="linenum">2378</span></a>  
<a name="l2379"><span class="linenum">2379</span></a>  
<a name="l2380"><span class="linenum">2380</span></a>  <span class="comment">/**</span>
<a name="l2381"><span class="linenum">2381</span></a>  <span class="comment"> * Display a container</span>
<a name="l2382"><span class="linenum">2382</span></a>  <span class="comment"> *</span>
<a name="l2383"><span class="linenum">2383</span></a>  <span class="comment"> * @param string</span>
<a name="l2384"><span class="linenum">2384</span></a>  <span class="comment"> * @param array</span>
<a name="l2385"><span class="linenum">2385</span></a>  <span class="comment"> */</span>
<a name="l2386"><span class="linenum">2386</span></a>  function <a class="function" onClick="logFunction('skin_container')" href="../../_functions/skin_container.html" onMouseOver="funcPopup(event,'skin_container')">skin_container</a>( <a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('sco_name')" href="../../_variables/sco_name.html">$sco_name</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l2387"><span class="linenum">2387</span></a>  {
<a name="l2388"><span class="linenum">2388</span></a>      global <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>;
<a name="l2389"><span class="linenum">2389</span></a>  
<a name="l2390"><span class="linenum">2390</span></a>      <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('container')" href="../../_functions/container.html" onMouseOver="funcPopup(event,'container')">container</a>( <a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('sco_name')" href="../../_variables/sco_name.html">$sco_name</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2391"><span class="linenum">2391</span></a>  }
<a name="l2392"><span class="linenum">2392</span></a>  
<a name="l2393"><span class="linenum">2393</span></a>  
<a name="l2394"><span class="linenum">2394</span></a>  <span class="comment">/**</span>
<a name="l2395"><span class="linenum">2395</span></a>  <span class="comment"> * Install a skin</span>
<a name="l2396"><span class="linenum">2396</span></a>  <span class="comment"> *</span>
<a name="l2397"><span class="linenum">2397</span></a>  <span class="comment"> * @todo do not install if skin doesn't exist. Important for upgrade. Need to NOT fail if ZERO skins installed though :/</span>
<a name="l2398"><span class="linenum">2398</span></a>  <span class="comment"> *</span>
<a name="l2399"><span class="linenum">2399</span></a>  <span class="comment"> * @param string Skin folder</span>
<a name="l2400"><span class="linenum">2400</span></a>  <span class="comment"> * @return Skin</span>
<a name="l2401"><span class="linenum">2401</span></a>  <span class="comment"> */</span>
<a name="l2402"><span class="linenum">2402</span></a>  function &amp; skin_install( <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('skin_folder')" href="../../_variables/skin_folder.html">$skin_folder</a> )
<a name="l2403"><span class="linenum">2403</span></a>  {
<a name="l2404"><span class="linenum">2404</span></a>      <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a> = &amp; get_SkinCache();
<a name="l2405"><span class="linenum">2405</span></a>      <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a> = &amp; <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a>-&gt;new_obj( NULL, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('skin_folder')" href="../../_variables/skin_folder.html">$skin_folder</a> );
<a name="l2406"><span class="linenum">2406</span></a>  
<a name="l2407"><span class="linenum">2407</span></a>      <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>-&gt;<a class="function" onClick="logFunction('install')" href="../../_functions/install.html" onMouseOver="funcPopup(event,'install')">install</a>();
<a name="l2408"><span class="linenum">2408</span></a>  
<a name="l2409"><span class="linenum">2409</span></a>      return <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('Skin')" href="../../_variables/Skin.html">$Skin</a>;
<a name="l2410"><span class="linenum">2410</span></a>  }
<a name="l2411"><span class="linenum">2411</span></a>  
<a name="l2412"><span class="linenum">2412</span></a>  
<a name="l2413"><span class="linenum">2413</span></a>  <span class="comment">/**</span>
<a name="l2414"><span class="linenum">2414</span></a>  <span class="comment"> * Checks if a skin is provided by a plugin.</span>
<a name="l2415"><span class="linenum">2415</span></a>  <span class="comment"> *</span>
<a name="l2416"><span class="linenum">2416</span></a>  <span class="comment"> * Used by front-end.</span>
<a name="l2417"><span class="linenum">2417</span></a>  <span class="comment"> *</span>
<a name="l2418"><span class="linenum">2418</span></a>  <span class="comment"> * @uses Plugin::GetProvidedSkins()</span>
<a name="l2419"><span class="linenum">2419</span></a>  <span class="comment"> * @return false|integer False in case no plugin provides the skin or ID of the first plugin that provides it.</span>
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment"> */</span>
<a name="l2421"><span class="linenum">2421</span></a>  function <a class="function" onClick="logFunction('skin_provided_by_plugin')" href="../../_functions/skin_provided_by_plugin.html" onMouseOver="funcPopup(event,'skin_provided_by_plugin')">skin_provided_by_plugin</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> )
<a name="l2422"><span class="linenum">2422</span></a>  {
<a name="l2423"><span class="linenum">2423</span></a>      static <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('plugin_skins')" href="../../_variables/plugin_skins.html">$plugin_skins</a>;
<a name="l2424"><span class="linenum">2424</span></a>      if( ! isset(<a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('plugin_skins')" href="../../_variables/plugin_skins.html">$plugin_skins</a>) || ! isset(<a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('plugin_skins')" href="../../_variables/plugin_skins.html">$plugin_skins</a>[<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>]) )
<a name="l2425"><span class="linenum">2425</span></a>      {
<a name="l2426"><span class="linenum">2426</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>;
<a name="l2427"><span class="linenum">2427</span></a>  
<a name="l2428"><span class="linenum">2428</span></a>          <a class="var it1549" onMouseOver="hilite(1549)" onMouseOut="lolite()" onClick="logVariable('plugin_r')" href="../../_variables/plugin_r.html">$plugin_r</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event_first_return')" href="../../_functions/trigger_event_first_return.html" onMouseOver="funcPopup(event,'trigger_event_first_return')">trigger_event_first_return</a>('GetProvidedSkins', NULL, array('in_array'=&gt;<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>));
<a name="l2429"><span class="linenum">2429</span></a>          if( <a class="var it1549" onMouseOver="hilite(1549)" onMouseOut="lolite()" onClick="logVariable('plugin_r')" href="../../_variables/plugin_r.html">$plugin_r</a> )
<a name="l2430"><span class="linenum">2430</span></a>          {
<a name="l2431"><span class="linenum">2431</span></a>              <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('plugin_skins')" href="../../_variables/plugin_skins.html">$plugin_skins</a>[<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>] = <a class="var it1549" onMouseOver="hilite(1549)" onMouseOut="lolite()" onClick="logVariable('plugin_r')" href="../../_variables/plugin_r.html">$plugin_r</a>['plugin_ID'];
<a name="l2432"><span class="linenum">2432</span></a>          }
<a name="l2433"><span class="linenum">2433</span></a>          else
<a name="l2434"><span class="linenum">2434</span></a>          {
<a name="l2435"><span class="linenum">2435</span></a>              <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('plugin_skins')" href="../../_variables/plugin_skins.html">$plugin_skins</a>[<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>] = false;
<a name="l2436"><span class="linenum">2436</span></a>          }
<a name="l2437"><span class="linenum">2437</span></a>      }
<a name="l2438"><span class="linenum">2438</span></a>  
<a name="l2439"><span class="linenum">2439</span></a>      return <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('plugin_skins')" href="../../_variables/plugin_skins.html">$plugin_skins</a>[<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>];
<a name="l2440"><span class="linenum">2440</span></a>  }
<a name="l2441"><span class="linenum">2441</span></a>  
<a name="l2442"><span class="linenum">2442</span></a>  
<a name="l2443"><span class="linenum">2443</span></a>  <span class="comment">/**</span>
<a name="l2444"><span class="linenum">2444</span></a>  <span class="comment"> * Checks if a skin exists. This can either be a regular skin directory</span>
<a name="l2445"><span class="linenum">2445</span></a>  <span class="comment"> * or can be in the list {@link Plugin::GetProvidedSkins()}.</span>
<a name="l2446"><span class="linenum">2446</span></a>  <span class="comment"> *</span>
<a name="l2447"><span class="linenum">2447</span></a>  <span class="comment"> * Used by front-end.</span>
<a name="l2448"><span class="linenum">2448</span></a>  <span class="comment"> *</span>
<a name="l2449"><span class="linenum">2449</span></a>  <span class="comment"> * @param skin name (directory name)</span>
<a name="l2450"><span class="linenum">2450</span></a>  <span class="comment"> * @return boolean true is exists, false if not</span>
<a name="l2451"><span class="linenum">2451</span></a>  <span class="comment"> */</span>
<a name="l2452"><span class="linenum">2452</span></a>  function <a class="function" onClick="logFunction('skin_exists')" href="../../_functions/skin_exists.html" onMouseOver="funcPopup(event,'skin_exists')">skin_exists</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = 'index.main.php' )
<a name="l2453"><span class="linenum">2453</span></a>  {
<a name="l2454"><span class="linenum">2454</span></a>      global <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>;
<a name="l2455"><span class="linenum">2455</span></a>  
<a name="l2456"><span class="linenum">2456</span></a>      if( <a class="function" onClick="logFunction('skin_file_exists')" href="../../_functions/skin_file_exists.html" onMouseOver="funcPopup(event,'skin_file_exists')">skin_file_exists</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> ) )
<a name="l2457"><span class="linenum">2457</span></a>      {
<a name="l2458"><span class="linenum">2458</span></a>          return true;
<a name="l2459"><span class="linenum">2459</span></a>      }
<a name="l2460"><span class="linenum">2460</span></a>  
<a name="l2461"><span class="linenum">2461</span></a>  <span class="comment">    // Check list provided by plugins:</span>
<a name="l2462"><span class="linenum">2462</span></a>      if( <a class="function" onClick="logFunction('skin_provided_by_plugin')" href="../../_functions/skin_provided_by_plugin.html" onMouseOver="funcPopup(event,'skin_provided_by_plugin')">skin_provided_by_plugin</a>(<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) )
<a name="l2463"><span class="linenum">2463</span></a>      {
<a name="l2464"><span class="linenum">2464</span></a>          return true;
<a name="l2465"><span class="linenum">2465</span></a>      }
<a name="l2466"><span class="linenum">2466</span></a>  
<a name="l2467"><span class="linenum">2467</span></a>      return false;
<a name="l2468"><span class="linenum">2468</span></a>  }
<a name="l2469"><span class="linenum">2469</span></a>  
<a name="l2470"><span class="linenum">2470</span></a>  
<a name="l2471"><span class="linenum">2471</span></a>  <span class="comment">/**</span>
<a name="l2472"><span class="linenum">2472</span></a>  <span class="comment"> * Checks if a specific file exists for a skin.</span>
<a name="l2473"><span class="linenum">2473</span></a>  <span class="comment"> *</span>
<a name="l2474"><span class="linenum">2474</span></a>  <span class="comment"> * @param skin name (directory name)</span>
<a name="l2475"><span class="linenum">2475</span></a>  <span class="comment"> * @param file name</span>
<a name="l2476"><span class="linenum">2476</span></a>  <span class="comment"> * @return boolean true is exists, false if not</span>
<a name="l2477"><span class="linenum">2477</span></a>  <span class="comment"> */</span>
<a name="l2478"><span class="linenum">2478</span></a>  function <a class="function" onClick="logFunction('skin_file_exists')" href="../../_functions/skin_file_exists.html" onMouseOver="funcPopup(event,'skin_file_exists')">skin_file_exists</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = 'index.main.php' )
<a name="l2479"><span class="linenum">2479</span></a>  {
<a name="l2480"><span class="linenum">2480</span></a>      global <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>;
<a name="l2481"><span class="linenum">2481</span></a>  
<a name="l2482"><span class="linenum">2482</span></a>      if( <a class="phpfunction" onClick="logFunction('is_readable')" href="../../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>( <a class="var it1107" onMouseOver="hilite(1107)" onMouseOut="lolite()" onClick="logVariable('skins_path')" href="../../_variables/skins_path.html">$skins_path</a>.<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>.'/'.<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> ) )
<a name="l2483"><span class="linenum">2483</span></a>      {
<a name="l2484"><span class="linenum">2484</span></a>          return true;
<a name="l2485"><span class="linenum">2485</span></a>      }
<a name="l2486"><span class="linenum">2486</span></a>  
<a name="l2487"><span class="linenum">2487</span></a>      return false;
<a name="l2488"><span class="linenum">2488</span></a>  }
<a name="l2489"><span class="linenum">2489</span></a>  
<a name="l2490"><span class="linenum">2490</span></a>  
<a name="l2491"><span class="linenum">2491</span></a>  <span class="comment">/**</span>
<a name="l2492"><span class="linenum">2492</span></a>  <span class="comment"> * Check if a skin is installed.</span>
<a name="l2493"><span class="linenum">2493</span></a>  <span class="comment"> *</span>
<a name="l2494"><span class="linenum">2494</span></a>  <span class="comment"> * This can either be a regular skin or a skin provided by a plugin.</span>
<a name="l2495"><span class="linenum">2495</span></a>  <span class="comment"> *</span>
<a name="l2496"><span class="linenum">2496</span></a>  <span class="comment"> * @param Skin name (directory name)</span>
<a name="l2497"><span class="linenum">2497</span></a>  <span class="comment"> * @return boolean True if the skin is installed, false otherwise.</span>
<a name="l2498"><span class="linenum">2498</span></a>  <span class="comment"> */</span>
<a name="l2499"><span class="linenum">2499</span></a>  function <a class="function" onClick="logFunction('skin_installed')" href="../../_functions/skin_installed.html" onMouseOver="funcPopup(event,'skin_installed')">skin_installed</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> )
<a name="l2500"><span class="linenum">2500</span></a>  {
<a name="l2501"><span class="linenum">2501</span></a>      <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a> = &amp; get_SkinCache();
<a name="l2502"><span class="linenum">2502</span></a>  
<a name="l2503"><span class="linenum">2503</span></a>      if( <a class="function" onClick="logFunction('skin_provided_by_plugin')" href="../../_functions/skin_provided_by_plugin.html" onMouseOver="funcPopup(event,'skin_provided_by_plugin')">skin_provided_by_plugin</a>( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> ) || <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a>-&gt;get_by_folder( <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, false ) )
<a name="l2504"><span class="linenum">2504</span></a>      {
<a name="l2505"><span class="linenum">2505</span></a>          return true;
<a name="l2506"><span class="linenum">2506</span></a>      }
<a name="l2507"><span class="linenum">2507</span></a>  
<a name="l2508"><span class="linenum">2508</span></a>      return false;
<a name="l2509"><span class="linenum">2509</span></a>  }
<a name="l2510"><span class="linenum">2510</span></a>  
<a name="l2511"><span class="linenum">2511</span></a>  
<a name="l2512"><span class="linenum">2512</span></a>  <span class="comment">/**</span>
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment"> * Display a blog skin setting fieldset which can be normal, mobile or tablet ( used on _coll_skin_settings.form.php )</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment"> *</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment"> * @param object Form</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment"> * @param integer skin ID</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment"> * @param array display params</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment"> */</span>
<a name="l2519"><span class="linenum">2519</span></a>  function <a class="function" onClick="logFunction('display_skin_fieldset')" href="../../_functions/display_skin_fieldset.html" onMouseOver="funcPopup(event,'display_skin_fieldset')">display_skin_fieldset</a>( &amp; <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>, <a class="var it115" onMouseOver="hilite(115)" onMouseOut="lolite()" onClick="logVariable('skin_ID')" href="../../_variables/skin_ID.html">$skin_ID</a>, <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../_variables/display_params.html">$display_params</a> )
<a name="l2520"><span class="linenum">2520</span></a>  {
<a name="l2521"><span class="linenum">2521</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('begin_fieldset')" href="../../_functions/begin_fieldset.html" onMouseOver="funcPopup(event,'begin_fieldset')">begin_fieldset</a>( <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../_variables/display_params.html">$display_params</a>[ 'fieldset_title' ].<a class="function" onClick="logFunction('get_manual_link')" href="../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>('blog_skin_settings').' '.<a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../_variables/display_params.html">$display_params</a>[ 'fieldset_links' ] );
<a name="l2522"><span class="linenum">2522</span></a>  
<a name="l2523"><span class="linenum">2523</span></a>      if( !<a class="var it115" onMouseOver="hilite(115)" onMouseOut="lolite()" onClick="logVariable('skin_ID')" href="../../_variables/skin_ID.html">$skin_ID</a> )
<a name="l2524"><span class="linenum">2524</span></a>      { // The skin ID is empty use the same as normal skin ID
<a name="l2525"><span class="linenum">2525</span></a>          echo '&lt;div style=&quot;font-weight:bold;padding:0.5ex;&quot;&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Same as normal skin.').'&lt;/div&gt;';
<a name="l2526"><span class="linenum">2526</span></a>      }
<a name="l2527"><span class="linenum">2527</span></a>      else
<a name="l2528"><span class="linenum">2528</span></a>      {
<a name="l2529"><span class="linenum">2529</span></a>          <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a> = &amp; get_SkinCache();
<a name="l2530"><span class="linenum">2530</span></a>          <a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a> = <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('SkinCache')" href="../../_variables/SkinCache.html">$SkinCache</a>-&gt;get_by_ID( <a class="var it115" onMouseOver="hilite(115)" onMouseOut="lolite()" onClick="logVariable('skin_ID')" href="../../_variables/skin_ID.html">$skin_ID</a> );
<a name="l2531"><span class="linenum">2531</span></a>  
<a name="l2532"><span class="linenum">2532</span></a>          echo '&lt;div class=&quot;skin_settings well&quot;&gt;';
<a name="l2533"><span class="linenum">2533</span></a>          <a class="var it2072" onMouseOver="hilite(2072)" onMouseOut="lolite()" onClick="logVariable('disp_params')" href="../../_variables/disp_params.html">$disp_params</a> = array( 'skinshot_class' =&gt; 'coll_settings_skinshot' );
<a name="l2534"><span class="linenum">2534</span></a>          <a class="class" onClick="logClass('Skin')" href="../../_classes/skin.html" onMouseOver="classPopup(event,'skin')">Skin</a>::<a class="function" onClick="logFunction('disp_skinshot')" href="../../_functions/disp_skinshot.html" onMouseOver="funcPopup(event,'disp_skinshot')">disp_skinshot</a>( <a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a>-&gt;<a onClick="logVariable('folder')" class="var it10746" onMouseOver="hilite(10746)" onMouseOut="lolite()" href="../../_variables/folder.html">folder</a>, <a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a>-&gt;<a onClick="logVariable('name')" class="var it10746" onMouseOver="hilite(10746)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it2072" onMouseOver="hilite(2072)" onMouseOut="lolite()" onClick="logVariable('disp_params')" href="../../_variables/disp_params.html">$disp_params</a> );
<a name="l2535"><span class="linenum">2535</span></a>  
<a name="l2536"><span class="linenum">2536</span></a>  <span class="comment">        // Skin name</span>
<a name="l2537"><span class="linenum">2537</span></a>          echo '&lt;div class=&quot;skin_setting_row&quot;&gt;';
<a name="l2538"><span class="linenum">2538</span></a>              echo '&lt;label&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Skin name').':&lt;/label&gt;';
<a name="l2539"><span class="linenum">2539</span></a>              echo '&lt;span&gt;'.<a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a>-&gt;<a onClick="logVariable('name')" class="var it10746" onMouseOver="hilite(10746)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>.'&lt;/span&gt;';
<a name="l2540"><span class="linenum">2540</span></a>          echo '&lt;/div&gt;';
<a name="l2541"><span class="linenum">2541</span></a>  
<a name="l2542"><span class="linenum">2542</span></a>          if( isset( <a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a>-&gt;<a onClick="logVariable('version')" class="var it10746" onMouseOver="hilite(10746)" onMouseOut="lolite()" href="../../_variables/version.html">version</a> ) )
<a name="l2543"><span class="linenum">2543</span></a>          { // Skin version
<a name="l2544"><span class="linenum">2544</span></a>              echo '&lt;div class=&quot;skin_setting_row&quot;&gt;';
<a name="l2545"><span class="linenum">2545</span></a>                  echo '&lt;label&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Skin version').':&lt;/label&gt;';
<a name="l2546"><span class="linenum">2546</span></a>                  echo '&lt;span&gt;'.<a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a>-&gt;<a onClick="logVariable('version')" class="var it10746" onMouseOver="hilite(10746)" onMouseOut="lolite()" href="../../_variables/version.html">version</a>.'&lt;/span&gt;';
<a name="l2547"><span class="linenum">2547</span></a>              echo '&lt;/div&gt;';
<a name="l2548"><span class="linenum">2548</span></a>          }
<a name="l2549"><span class="linenum">2549</span></a>  
<a name="l2550"><span class="linenum">2550</span></a>  <span class="comment">        // Skin type</span>
<a name="l2551"><span class="linenum">2551</span></a>          echo '&lt;div class=&quot;skin_setting_row&quot;&gt;';
<a name="l2552"><span class="linenum">2552</span></a>              echo '&lt;label&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Skin type').':&lt;/label&gt;';
<a name="l2553"><span class="linenum">2553</span></a>              echo '&lt;span&gt;'.<a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a>-&gt;<a onClick="logVariable('type')" class="var it10746" onMouseOver="hilite(10746)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>.'&lt;/span&gt;';
<a name="l2554"><span class="linenum">2554</span></a>          echo '&lt;/div&gt;';
<a name="l2555"><span class="linenum">2555</span></a>  
<a name="l2556"><span class="linenum">2556</span></a>  <span class="comment">        // Containers</span>
<a name="l2557"><span class="linenum">2557</span></a>          if( <a class="var it2270" onMouseOver="hilite(2270)" onMouseOut="lolite()" onClick="logVariable('skin_containers')" href="../../_variables/skin_containers.html">$skin_containers</a> = <a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a>-&gt;<a class="function" onClick="logFunction('get_containers')" href="../../_functions/get_containers.html" onMouseOver="funcPopup(event,'get_containers')">get_containers</a>() )
<a name="l2558"><span class="linenum">2558</span></a>          {
<a name="l2559"><span class="linenum">2559</span></a>              <a class="var it2271" onMouseOver="hilite(2271)" onMouseOut="lolite()" onClick="logVariable('container_ul')" href="../../_variables/container_ul.html">$container_ul</a> = '&lt;ul&gt;&lt;li&gt;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&lt;/li&gt;&lt;li&gt;', <a class="var it2270" onMouseOver="hilite(2270)" onMouseOut="lolite()" onClick="logVariable('skin_containers')" href="../../_variables/skin_containers.html">$skin_containers</a> ).'&lt;/li&gt;&lt;/ul&gt;';
<a name="l2560"><span class="linenum">2560</span></a>          }
<a name="l2561"><span class="linenum">2561</span></a>          else
<a name="l2562"><span class="linenum">2562</span></a>          {
<a name="l2563"><span class="linenum">2563</span></a>              <a class="var it2271" onMouseOver="hilite(2271)" onMouseOut="lolite()" onClick="logVariable('container_ul')" href="../../_variables/container_ul.html">$container_ul</a> = '-';
<a name="l2564"><span class="linenum">2564</span></a>          }
<a name="l2565"><span class="linenum">2565</span></a>          echo '&lt;div class=&quot;skin_setting_row&quot;&gt;';
<a name="l2566"><span class="linenum">2566</span></a>              echo '&lt;label&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Containers').':&lt;/label&gt;';
<a name="l2567"><span class="linenum">2567</span></a>              echo '&lt;span&gt;'.<a class="var it2271" onMouseOver="hilite(2271)" onMouseOut="lolite()" onClick="logVariable('container_ul')" href="../../_variables/container_ul.html">$container_ul</a>.'&lt;/span&gt;';
<a name="l2568"><span class="linenum">2568</span></a>          echo '&lt;/div&gt;';
<a name="l2569"><span class="linenum">2569</span></a>  
<a name="l2570"><span class="linenum">2570</span></a>          echo '&lt;/div&gt;';
<a name="l2571"><span class="linenum">2571</span></a>          echo '&lt;div class=&quot;skin_settings_form&quot;&gt;';
<a name="l2572"><span class="linenum">2572</span></a>  
<a name="l2573"><span class="linenum">2573</span></a>          <a class="var it2272" onMouseOver="hilite(2272)" onMouseOut="lolite()" onClick="logVariable('skin_params')" href="../../_variables/skin_params.html">$skin_params</a> = <a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a>-&gt;<a class="function" onClick="logFunction('get_param_definitions')" href="../../_functions/get_param_definitions.html" onMouseOver="funcPopup(event,'get_param_definitions')">get_param_definitions</a>( <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../_variables/tmp_params.html">$tmp_params</a> = array( 'for_editing' =&gt; true ) );
<a name="l2574"><span class="linenum">2574</span></a>  
<a name="l2575"><span class="linenum">2575</span></a>          if( empty( <a class="var it2272" onMouseOver="hilite(2272)" onMouseOut="lolite()" onClick="logVariable('skin_params')" href="../../_variables/skin_params.html">$skin_params</a> ) )
<a name="l2576"><span class="linenum">2576</span></a>          { // Advertise this feature!!
<a name="l2577"><span class="linenum">2577</span></a>              echo '&lt;p&gt;'.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('This skin does not provide any configurable settings.').'&lt;/p&gt;';
<a name="l2578"><span class="linenum">2578</span></a>          }
<a name="l2579"><span class="linenum">2579</span></a>          else
<a name="l2580"><span class="linenum">2580</span></a>          {
<a name="l2581"><span class="linenum">2581</span></a>              <a class="function" onClick="logFunction('load_funcs')" href="../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'plugins/_plugin.funcs.php' );
<a name="l2582"><span class="linenum">2582</span></a>  
<a name="l2583"><span class="linenum">2583</span></a>  <span class="comment">            // Check if skin settings contain at least one fieldset</span>
<a name="l2584"><span class="linenum">2584</span></a>              <a class="var it2273" onMouseOver="hilite(2273)" onMouseOut="lolite()" onClick="logVariable('skin_fieldsets_exist')" href="../../_variables/skin_fieldsets_exist.html">$skin_fieldsets_exist</a> = false;
<a name="l2585"><span class="linenum">2585</span></a>              foreach( <a class="var it2272" onMouseOver="hilite(2272)" onMouseOut="lolite()" onClick="logVariable('skin_params')" href="../../_variables/skin_params.html">$skin_params</a> as <a class="var it1337" onMouseOver="hilite(1337)" onMouseOut="lolite()" onClick="logVariable('l_name')" href="../../_variables/l_name.html">$l_name</a> =&gt; <a class="var it1338" onMouseOver="hilite(1338)" onMouseOut="lolite()" onClick="logVariable('l_meta')" href="../../_variables/l_meta.html">$l_meta</a> )
<a name="l2586"><span class="linenum">2586</span></a>              {
<a name="l2587"><span class="linenum">2587</span></a>                  if( isset( <a class="var it1338" onMouseOver="hilite(1338)" onMouseOut="lolite()" onClick="logVariable('l_meta')" href="../../_variables/l_meta.html">$l_meta</a>['layout'] ) &amp;&amp; <a class="var it1338" onMouseOver="hilite(1338)" onMouseOut="lolite()" onClick="logVariable('l_meta')" href="../../_variables/l_meta.html">$l_meta</a>['layout'] == 'begin_fieldset' )
<a name="l2588"><span class="linenum">2588</span></a>                  {
<a name="l2589"><span class="linenum">2589</span></a>                      <a class="var it2273" onMouseOver="hilite(2273)" onMouseOut="lolite()" onClick="logVariable('skin_fieldsets_exist')" href="../../_variables/skin_fieldsets_exist.html">$skin_fieldsets_exist</a> = true;
<a name="l2590"><span class="linenum">2590</span></a>                      break;
<a name="l2591"><span class="linenum">2591</span></a>                  }
<a name="l2592"><span class="linenum">2592</span></a>              }
<a name="l2593"><span class="linenum">2593</span></a>  
<a name="l2594"><span class="linenum">2594</span></a>              if( ! <a class="var it2273" onMouseOver="hilite(2273)" onMouseOut="lolite()" onClick="logVariable('skin_fieldsets_exist')" href="../../_variables/skin_fieldsets_exist.html">$skin_fieldsets_exist</a> )
<a name="l2595"><span class="linenum">2595</span></a>              { // Enclose all skin settings in single group if no group on the skin
<a name="l2596"><span class="linenum">2596</span></a>                  <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>( <a class="var it2272" onMouseOver="hilite(2272)" onMouseOut="lolite()" onClick="logVariable('skin_params')" href="../../_variables/skin_params.html">$skin_params</a>, array(
<a name="l2597"><span class="linenum">2597</span></a>                          'layout' =&gt; 'begin_fieldset',
<a name="l2598"><span class="linenum">2598</span></a>                          'label'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Skin settings')
<a name="l2599"><span class="linenum">2599</span></a>                      ) );
<a name="l2600"><span class="linenum">2600</span></a>                  <a class="phpfunction" onClick="logFunction('array_push')" href="../../_functions/array_push.html" onMouseOver="phpfuncPopup(event,'array_push')">array_push</a>( <a class="var it2272" onMouseOver="hilite(2272)" onMouseOut="lolite()" onClick="logVariable('skin_params')" href="../../_variables/skin_params.html">$skin_params</a>, array(
<a name="l2601"><span class="linenum">2601</span></a>                          'layout' =&gt; 'end_fieldset'
<a name="l2602"><span class="linenum">2602</span></a>                      ) );
<a name="l2603"><span class="linenum">2603</span></a>              }
<a name="l2604"><span class="linenum">2604</span></a>  
<a name="l2605"><span class="linenum">2605</span></a>  <span class="comment">            // Loop through all widget params:</span>
<a name="l2606"><span class="linenum">2606</span></a>              foreach( <a class="var it2272" onMouseOver="hilite(2272)" onMouseOut="lolite()" onClick="logVariable('skin_params')" href="../../_variables/skin_params.html">$skin_params</a> as <a class="var it1337" onMouseOver="hilite(1337)" onMouseOut="lolite()" onClick="logVariable('l_name')" href="../../_variables/l_name.html">$l_name</a> =&gt; <a class="var it1338" onMouseOver="hilite(1338)" onMouseOut="lolite()" onClick="logVariable('l_meta')" href="../../_variables/l_meta.html">$l_meta</a> )
<a name="l2607"><span class="linenum">2607</span></a>              {
<a name="l2608"><span class="linenum">2608</span></a>  <span class="comment">                // Display field:</span>
<a name="l2609"><span class="linenum">2609</span></a>                  <a class="function" onClick="logFunction('autoform_display_field')" href="../../_functions/autoform_display_field.html" onMouseOver="funcPopup(event,'autoform_display_field')">autoform_display_field</a>( <a class="var it1337" onMouseOver="hilite(1337)" onMouseOut="lolite()" onClick="logVariable('l_name')" href="../../_variables/l_name.html">$l_name</a>, <a class="var it1338" onMouseOver="hilite(1338)" onMouseOut="lolite()" onClick="logVariable('l_meta')" href="../../_variables/l_meta.html">$l_meta</a>, <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>, 'Skin', <a class="var it2269" onMouseOver="hilite(2269)" onMouseOut="lolite()" onClick="logVariable('edited_Skin')" href="../../_variables/edited_Skin.html">$edited_Skin</a> );
<a name="l2610"><span class="linenum">2610</span></a>              }
<a name="l2611"><span class="linenum">2611</span></a>          }
<a name="l2612"><span class="linenum">2612</span></a>  
<a name="l2613"><span class="linenum">2613</span></a>          echo '&lt;/div&gt;';
<a name="l2614"><span class="linenum">2614</span></a>      }
<a name="l2615"><span class="linenum">2615</span></a>  
<a name="l2616"><span class="linenum">2616</span></a>      <a class="var it158" onMouseOver="hilite(158)" onMouseOut="lolite()" onClick="logVariable('Form')" href="../../_variables/Form.html">$Form</a>-&gt;<a class="function" onClick="logFunction('end_fieldset')" href="../../_functions/end_fieldset.html" onMouseOver="funcPopup(event,'end_fieldset')">end_fieldset</a>();
<a name="l2617"><span class="linenum">2617</span></a>  }
<a name="l2618"><span class="linenum">2618</span></a>  
<a name="l2619"><span class="linenum">2619</span></a>  
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment">/**</span>
<a name="l2621"><span class="linenum">2621</span></a>  <span class="comment"> * Template function to init and print out html attributes for &lt;body&gt; tag</span>
<a name="l2622"><span class="linenum">2622</span></a>  <span class="comment"> *</span>
<a name="l2623"><span class="linenum">2623</span></a>  <span class="comment"> * @param array Additional values for attributes</span>
<a name="l2624"><span class="linenum">2624</span></a>  <span class="comment"> */</span>
<a name="l2625"><span class="linenum">2625</span></a>  function <a class="function" onClick="logFunction('skin_body_attrs')" href="../../_functions/skin_body_attrs.html" onMouseOver="funcPopup(event,'skin_body_attrs')">skin_body_attrs</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array() )
<a name="l2626"><span class="linenum">2626</span></a>  {
<a name="l2627"><span class="linenum">2627</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2628"><span class="linenum">2628</span></a>              'class' =&gt; NULL
<a name="l2629"><span class="linenum">2629</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l2630"><span class="linenum">2630</span></a>  
<a name="l2631"><span class="linenum">2631</span></a>      global <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a>, <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>;
<a name="l2632"><span class="linenum">2632</span></a>  
<a name="l2633"><span class="linenum">2633</span></a>  <span class="comment">    // WARNING: Caching! We're not supposed to have Session dependent stuff in here. This is for debugging only!</span>
<a name="l2634"><span class="linenum">2634</span></a>      global <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>;
<a name="l2635"><span class="linenum">2635</span></a>  
<a name="l2636"><span class="linenum">2636</span></a>      <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a> = array();
<a name="l2637"><span class="linenum">2637</span></a>  
<a name="l2638"><span class="linenum">2638</span></a>      if( ! empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['class'] ) )
<a name="l2639"><span class="linenum">2639</span></a>      { // Prepend additional classes from template skin
<a name="l2640"><span class="linenum">2640</span></a>          <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['class'];
<a name="l2641"><span class="linenum">2641</span></a>      }
<a name="l2642"><span class="linenum">2642</span></a>  
<a name="l2643"><span class="linenum">2643</span></a>  <span class="comment">    // Device class:</span>
<a name="l2644"><span class="linenum">2644</span></a>      if( ! empty( <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a> ) )
<a name="l2645"><span class="linenum">2645</span></a>      { // Try to detect device only when Page Cache is defined
<a name="l2646"><span class="linenum">2646</span></a>          if( <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../_variables/PageCache.html">$PageCache</a>-&gt;<a onClick="logVariable('is_collecting')" class="var it10713" onMouseOver="hilite(10713)" onMouseOut="lolite()" href="../../_variables/is_collecting.html">is_collecting</a> )
<a name="l2647"><span class="linenum">2647</span></a>          { // Page is cached now
<a name="l2648"><span class="linenum">2648</span></a>              <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'unknown_device page_cached';
<a name="l2649"><span class="linenum">2649</span></a>          }
<a name="l2650"><span class="linenum">2650</span></a>          else
<a name="l2651"><span class="linenum">2651</span></a>          { // Page is NOT cached now
<a name="l2652"><span class="linenum">2652</span></a>              global <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>;
<a name="l2653"><span class="linenum">2653</span></a>              if( <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('is_mobile_session')" href="../../_functions/is_mobile_session.html" onMouseOver="funcPopup(event,'is_mobile_session')">is_mobile_session</a>() )
<a name="l2654"><span class="linenum">2654</span></a>              { // Mobile device
<a name="l2655"><span class="linenum">2655</span></a>                  <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'mobile_device';
<a name="l2656"><span class="linenum">2656</span></a>              }
<a name="l2657"><span class="linenum">2657</span></a>              elseif( <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('is_tablet_session')" href="../../_functions/is_tablet_session.html" onMouseOver="funcPopup(event,'is_tablet_session')">is_tablet_session</a>() )
<a name="l2658"><span class="linenum">2658</span></a>              { // Tablet device
<a name="l2659"><span class="linenum">2659</span></a>                  <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'tablet_device';
<a name="l2660"><span class="linenum">2660</span></a>              }
<a name="l2661"><span class="linenum">2661</span></a>              else
<a name="l2662"><span class="linenum">2662</span></a>              { // Desktop device
<a name="l2663"><span class="linenum">2663</span></a>                  <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'desktop_device';
<a name="l2664"><span class="linenum">2664</span></a>              }
<a name="l2665"><span class="linenum">2665</span></a>              <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'page_notcached';
<a name="l2666"><span class="linenum">2666</span></a>          }
<a name="l2667"><span class="linenum">2667</span></a>      }
<a name="l2668"><span class="linenum">2668</span></a>  
<a name="l2669"><span class="linenum">2669</span></a>  <span class="comment">    // Blog class:</span>
<a name="l2670"><span class="linenum">2670</span></a>      <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'coll_'.( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> ) ? 'none' : <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l2671"><span class="linenum">2671</span></a>  
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">    // $disp class:</span>
<a name="l2673"><span class="linenum">2673</span></a>      <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'disp_'.( empty( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> ) ? 'none' : <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../_variables/disp.html">$disp</a> );
<a name="l2674"><span class="linenum">2674</span></a>  
<a name="l2675"><span class="linenum">2675</span></a>  <span class="comment">    // $disp_detail class:</span>
<a name="l2676"><span class="linenum">2676</span></a>      <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'detail_'.( empty( <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> ) ? 'none' : <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('disp_detail')" href="../../_variables/disp_detail.html">$disp_detail</a> );
<a name="l2677"><span class="linenum">2677</span></a>  
<a name="l2678"><span class="linenum">2678</span></a>  <span class="comment">    // Item class:</span>
<a name="l2679"><span class="linenum">2679</span></a>      <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'item_'.( empty( <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a> ) ? 'none' : <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l2680"><span class="linenum">2680</span></a>  
<a name="l2681"><span class="linenum">2681</span></a>  <span class="comment">    // Logged in/Anonymous class:</span>
<a name="l2682"><span class="linenum">2682</span></a>      <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() ? 'loggedin' : 'anonymous';
<a name="l2683"><span class="linenum">2683</span></a>  
<a name="l2684"><span class="linenum">2684</span></a>  <span class="comment">    // User Group class:</span>
<a name="l2685"><span class="linenum">2685</span></a>      <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'usergroup_'.( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; empty( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('grp_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/grp_ID.html">grp_ID</a> ) ? 'none' : <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('grp_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/grp_ID.html">grp_ID</a> );
<a name="l2686"><span class="linenum">2686</span></a>  
<a name="l2687"><span class="linenum">2687</span></a>  <span class="comment">    // WARNING: Caching! We're not supposed to have Session dependent stuff in here. This is for debugging only!</span>
<a name="l2688"><span class="linenum">2688</span></a>      if ( ! empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>) )
<a name="l2689"><span class="linenum">2689</span></a>      {
<a name="l2690"><span class="linenum">2690</span></a>          if( <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'display_includes_'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) ) 
<a name="l2691"><span class="linenum">2691</span></a>          {
<a name="l2692"><span class="linenum">2692</span></a>              <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'dev_show_includes';
<a name="l2693"><span class="linenum">2693</span></a>          }
<a name="l2694"><span class="linenum">2694</span></a>          if( <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'display_containers_'.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) ) 
<a name="l2695"><span class="linenum">2695</span></a>          {
<a name="l2696"><span class="linenum">2696</span></a>              <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a>[] = 'dev_show_containers';
<a name="l2697"><span class="linenum">2697</span></a>          }
<a name="l2698"><span class="linenum">2698</span></a>      }
<a name="l2699"><span class="linenum">2699</span></a>  
<a name="l2700"><span class="linenum">2700</span></a>      if( ! empty( <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a> ) )
<a name="l2701"><span class="linenum">2701</span></a>      { // Print attr &quot;class&quot;
<a name="l2702"><span class="linenum">2702</span></a>          echo ' class=&quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ' ', <a class="var it1645" onMouseOver="hilite(1645)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../../_variables/classes.html">$classes</a> ).'&quot;';
<a name="l2703"><span class="linenum">2703</span></a>      }
<a name="l2704"><span class="linenum">2704</span></a>  }
<a name="l2705"><span class="linenum">2705</span></a>  
<a name="l2706"><span class="linenum">2706</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'restart': ['restart', 'Rewind resultset ', [['plugins','_archives.plugin.php',582],['inc/_core/ui/results','_results.class.php',426],['inc/plugins/model','_plugins.class.php',759],['inc/files/model','_filelist.class.php',690]], 31],
'check_invitation_code': ['check_invitation_code', 'Check invitation code and display error on incorrect code This function is used on registration form ', [['inc/users/model','_user.funcs.php',4507]], 2],
'skin_opengraph_tags': ['skin_opengraph_tags', 'Template tag ', [['inc/skins','_skin.funcs.php',2215]], 2],
'get_metakeywords': ['get_metakeywords', 'Get the meta keyword tag ', [['inc/items/model','_item.class.php',2339]], 1],
'siteskin_include': ['siteskin_include', 'Template tag. ', [['inc/skins','_skin.funcs.php',1988]], 124],
'param_action': ['param_action', 'Get the action from params. ', [['inc/_core','_param.funcs.php',458]], 63],
'delete': ['delete', '', [['inc/_ext/pclzip','pclzip.lib.php',1007],['inc/plugins/model','_pluginusersettings.class.php',89],['inc/settings/model','_abstractsettings.class.php',504],['inc/users/model','_usersettings.class.php',209],['inc/sessions/model','_session.class.php',483],['inc/plugins/model','_pluginsettings.class.php',65],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',168],['inc/users/model','_groupsettings.class.php',181]], 99],
'get_message_params_from_session': ['get_message_params_from_session', 'Get message form params from the current Session ', [['inc/messaging/model','_messaging.funcs.php',402]], 4],
'delete_contacts_group': ['delete_contacts_group', 'Delete contacts group ', [['inc/messaging/model','_messaging.funcs.php',844]], 2],
'skin_content_header': ['skin_content_header', 'Template tag. Output content-type header For backward compatibility ', [['inc/skins','_skin.funcs.php',2313]], 0],
'is_ajax_content': ['is_ajax_content', 'Check if current request is AJAX Used in order to get only content of the requested page ', [['inc/_core','_misc.funcs.php',6533]], 31],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'is_front_page': ['is_front_page', 'Is the current page a default \'Front\' page of a blog? ', [['inc/_core','_misc.funcs.php',5041]], 5],
'add_headline': ['add_headline', 'Add a headline, which then gets output in the HTML HEAD section. If you want to include CSS or JavaScript files, please use {@link require_css()} and {@link require_js()} instead. This avoids duplicates and allows caching/concatenating those files later (not implemented yet) ', [['inc/_core','_template.funcs.php',1269]], 31],
'skin_init_global_vars': ['skin_init_global_vars', 'Init some global variables used by skins Note: This initializations were removed from the _main.inc.php, because it should not be part of the main init. ', [['inc/skins','_skin.funcs.php',1673]], 1],
'display_init': ['display_init', 'Get ready for displaying the skin. ', [['skins/photoblog','_skin.class.php',161],['skins/dating_mood','_skin.class.php',120],['skins/bootstrap_gallery_legacy','_skin.class.php',254],['inc/skins/model','_skin.class.php',783],['skins/evocamp','_skin.class.php',114],['skins/bootstrap_main_skin','_skin.class.php',277],['inc/_core/ui','_uiwidget.class.php',360],['skins/pureforums','_skin.class.php',151],['skins/bootstrap_blog_skin','_skin.class.php',200],['skins/photoalbums','_skin.class.php',193],['skins/bootstrap_gallery_skin','_skin.class.php',254],['inc/_core/ui/results','_results.class.php',1018],['skins/forums','_skin.class.php',165],['skins/bootstrap_forums_skin','_skin.class.php',275],['skins/manual','_skin.class.php',153],['skins/touch','_skin.class.php',120],['skins/bootstrap_manual_skin','_skin.class.php',190],['skins/evopress','_skin.class.php',139]], 45],
'get_browser_version': ['get_browser_version', 'Get a version of browser ', [['inc/sessions/model','_hit.class.php',1850]], 10],
'skin_fallback_path': ['skin_fallback_path', 'Get file path to fallback file depending on skin API version ', [['inc/skins','_skin.funcs.php',1928]], 15],
'get_local_skins_url': ['get_local_skins_url', 'Get the URL of the skins folder, on the current blog\'s domain (which is NOT always the same as the $baseurl domain!). ', [['inc/collections/model','_blog.class.php',1305]], 3],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'container': ['container', 'Display a container ', [['inc/skins/model','_skin.class.php',199]], 1],
'is_email': ['is_email', 'Check that email address looks valid. ', [['inc/_core','_misc.funcs.php',1777]], 13],
'abort_collect': ['abort_collect', 'We are going to output personal data and we want to abort collecting the data for the cache. ', [['inc/_core/model','_blockcache.class.php',213],['inc/_core/model','_pagecache.class.php',470]], 13],
'is_ie': ['is_ie', 'Is this Internet Explorer? ', [['inc/sessions/model','_hit.class.php',1735]], 6],
'call_method': ['call_method', 'Call a method on a Plugin. ', [['inc/plugins/model','_plugins.class.php',1162]], 25],
'skin_content_meta': ['skin_content_meta', 'Template tag. Output content-type http_equiv meta tag ', [['inc/skins','_skin.funcs.php',2327]], 5],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'skin_container': ['skin_container', 'Display a container ', [['inc/skins','_skin.funcs.php',2380]], 182],
'set_contact_blocked': ['set_contact_blocked', 'Block or unblock contact ', [['inc/messaging/model','_messaging.funcs.php',115]], 8],
'add_js_headline': ['add_js_headline', 'Add a Javascript headline. This is an extra function, to provide consistent wrapping and allow to bundle it (i.e. create a bundle with all required JS files and these inline code snippets, in the correct order). ', [['inc/_core','_template.funcs.php',1299]], 24],
'skin_include': ['skin_include', 'Template tag. Include a sub-template at the current position ', [['inc/skins','_skin.funcs.php',1714]], 394],
'get_api_version': ['get_api_version', 'What evoSkins API does has this skin been designed with? ', [['skins/bootstrap_gallery_legacy','_skin.class.php',44],['inc/skins/model','_skin.class.php',146],['skins/bootstrap_main_skin','_skin.class.php',44],['skins/bootstrap_blog_skin','_skin.class.php',46],['skins/photoalbums','_skin.class.php',40],['skins/bootstrap_gallery_skin','_skin.class.php',44],['skins/bootstrap_forums_skin','_skin.class.php',44],['skins/bootstrap_manual_skin','_skin.class.php',44]], 1],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['inc/_core','_url.funcs.php',525]], 256],
'get_activate_info_url': ['get_activate_info_url', 'Get url to show user activate info screen ', [['inc/users/model','_user.funcs.php',286]], 21],
'get_msgform_possibility': ['get_msgform_possibility', 'Get messaging possibilities between current user and $this user ', [['inc/users/model','_user.class.php',3078]], 13],
'begin_fieldset': ['begin_fieldset', 'Builds a fieldset tag. This is a "fieldset" element by default, but a "th" element for table layout. ', [['inc/_core/ui/forms','_form.class.php',870]], 281],
'get_url': ['get_url', 'Get an url to this item ', [['inc/items/model','_item.class.php',6507],['inc/skins/model','_skin.class.php',737],['inc/comments/model','_comment.funcs.php',1333],['inc/files/model','_file.class.php',651]], 38],
'set_renderers': ['set_renderers', 'Set the renderers of the Item. ', [['inc/items/model','_item.class.php',4975],['inc/messaging/model','_message.class.php',723],['inc/comments/model','_comment.class.php',2947]], 12],
'get_download_url': ['get_download_url', 'Get an url to download file ', [['inc/links/model','_link.class.php',245]], 3],
'bad_request_die': ['bad_request_die', 'Outputs Bad request Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2679]], 22],
'load_from_request': ['load_from_request', 'Init filter params from Request params ', [['inc/items/model','_itemlistlight.class.php',324],['inc/items/model','_item.class.php',570],['inc/widgets/widgets','_coll_tag_cloud.widget.php',37],['inc/tools/model','_emailaddress.class.php',90],['inc/email_campaigns/model','_emailcampaign.class.php',186],['inc/maintenance/model','_backup.class.php',159],['inc/items/model','_itemstatus.class.php',63],['inc/sessions/model','_domain.class.php',54],['inc/regional/model','_country.class.php',70],['inc/users/model','_user.class.php',341],['inc/skins/model','_skin.class.php',158],['inc/comments/model','_commentlist.class.php',253],['inc/messaging/model','_message.class.php',124],['inc/users/model','_userlist.class.php',260],['inc/messaging/model','_thread.class.php',186],['inc/items/model','_itemtype.class.php',148],['inc/regional/model','_subregion.class.php',78],['inc/files/model','_filetype.class.php',61],['inc/collections/model','_blog.class.php',375],['inc/cron/model','_cronjob.class.php',107],['inc/users/model','_userfield.class.php',172],['inc/regional/model','_city.class.php',68],['inc/slugs/model','_slug.class.php',94],['inc/users/model','_group.class.php',122],['inc/users/model','_invitation.class.php',69],['inc/regional/model','_currency.class.php',62],['inc/widgets/model','_widget.class.php',138],['inc/regional/model','_region.class.php',66],['inc/chapters/model','_chapter.class.php',286],['inc/antispam/model','_iprange.class.php',86],['inc/sessions/model','_goalcat.class.php',59],['inc/items/model','_itemtag.class.php',75],['inc/sessions/model','_goal.class.php',112],['inc/users/model','_userfieldgroup.class.php',64],['inc/users/model','_organization.class.php',67]], 82],
'get_login_url': ['get_login_url', 'Get url to login ', [['inc/users/model','_user.funcs.php',178]], 23],
'check_allow_disp': ['check_allow_disp', 'Check if user is activated and status allow to display the requested form ($disp). Do nothing if status is activated or can\'t be activated or display is not allowed, add error message to activate the account otherwise. asimo>TODO: We may find a better name and a better place for this function ( maybe user.funcs.php ) ', [['inc/collections/model','_blog.funcs.php',687]], 1],
'skin_template_path': ['skin_template_path', 'Get file path to template file ', [['inc/skins','_skin.funcs.php',1965]], 6],
'get_active_filters': ['get_active_filters', 'Get every active filter that is not the same as the defaults ', [['inc/_core/model/dataobjects','_dataobjectlist2.class.php',72]], 1],
'blog_has_cats': ['blog_has_cats', 'Does a given blog have categories? ', [['inc/collections/model','_category.funcs.php',238]], 6],
'check_cross_post_nav': ['check_cross_post_nav', 'Check if cross post navigation should stay in the current blog or not. Also check that this item has at least one category that belongs to the given blog. If current blog is the same as item blog then, this function will return false, because no need to check. ', [['inc/items/model','_itemlight.class.php',1018]], 3],
'update_read_timestamps': ['update_read_timestamps', 'Update field uprs_read_post_ts for current User ', [['inc/items/model','_item.class.php',7180]], 1],
'get_attachment_linklist': ['get_attachment_linklist', 'Get list of attached Links ', [['inc/links/model','_linkowner.class.php',314]], 7],
'skin_keywords_tag': ['skin_keywords_tag', 'Template tag ', [['inc/skins','_skin.funcs.php',2172]], 2],
'skin_base_tag': ['skin_base_tag', 'Template tag. Output HTML base tag to current skin. ', [['inc/skins','_skin.funcs.php',2087]], 5],
'display_skin_fieldset': ['display_skin_fieldset', 'Display a blog skin setting fieldset which can be normal, mobile or tablet ( used on _coll_skin_settings.form.php ) ', [['inc/skins','_skin.funcs.php',2512]], 1],
'get_active_filter': ['get_active_filter', 'Get a specific active filter ', [['inc/_core/model/dataobjects','_dataobjectlist2.class.php',58]], 5],
'skin_description_tag': ['skin_description_tag', 'Template tag ', [['inc/skins','_skin.funcs.php',2123]], 2],
'get_author_name': ['get_author_name', 'Get the comment author\'s name. ', [['inc/comments/model','_comment.class.php',728]], 13],
'modules_call_method': ['modules_call_method', 'Call a method for all modules in a row ', [['inc/_core','_misc.funcs.php',33]], 26],
'exists': ['exists', 'Does the File/folder exist on disk? ', [['inc/files/model','_file.class.php',434]], 36],
'assert_received_crumb': ['assert_received_crumb', 'Assert that we received a valid crumb for the object we want to act on. ', [['inc/sessions/model','_session.class.php',613]], 286],
'gen_baseurl': ['gen_baseurl', 'Generate the baseurl of the blog (URL of the folder where the blog lives). Will always end with \'/\'. ', [['inc/collections/model','_blog.class.php',1185]], 10],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['inc/_core','_misc.funcs.php',264]], 318],
'rel_path_to_base': ['rel_path_to_base', 'Return the path without the leading {@link $basepath}, or if not below {@link $basepath}, just the basename of it. ', [['inc/files/model','_file.funcs.php',758]], 25],
'gen_blogurl': ['gen_blogurl', 'Generate blog URL. That is the URL of the main page/home page of the blog. This will nto necessarily be a folder. For example, it can end in index.php?blog=4 ', [['inc/collections/model','_blog.class.php',1128]], 94],
'get_author_email': ['get_author_email', 'Get the EMail of the comment\'s author. ', [['inc/comments/model','_comment.class.php',808],['inc/comments/model','_comment.funcs.php',1354]], 10],
'get_user_profile_url': ['get_user_profile_url', 'Get URL to edit user profile ', [['inc/users/model','_user.funcs.php',946]], 10],
'gen_archive_url': ['gen_archive_url', 'Generate archive page URL ', [['inc/collections/model','_blog.class.php',1327]], 5],
'get_containers': ['get_containers', 'Get the list of containers that have been previously discovered for this skin. ', [['inc/skins/model','_skin.class.php',392]], 3],
'display': ['display', 'Display the widget! ', [['inc/widgets/widgets','_coll_tag_cloud.widget.php',170],['inc/_core/model/db','_sql.class.php',68],['inc/widgets/widgets','_coll_logo.widget.php',138],['inc/widgets/widgets','_mobile_skin_switcher.widget.php',105],['inc/widgets/widgets','_online_users.widget.php',95],['inc/widgets/widgets','_user_login.widget.php',195],['inc/widgets/widgets','_coll_item_list.widget.php',274],['inc/_core/model','_messages.class.php',183],['inc/widgets/widgets','_user_links.widget.php',114],['inc/widgets/widgets','_coll_featured_intro.widget.php',171],['plugins','_calendar.plugin.php',619],['inc/widgets/widgets','_coll_search_form.widget.php',135],['inc/widgets/widgets','_coll_longdesc.widget.php',99],['inc/widgets/widgets','_content_hierarchy.widget.php',120],['inc/widgets/widgets','_coll_tagline.widget.php',79],['inc/widgets/widgets','_coll_current_filters.widget.php',113],['inc/widgets/widgets','_coll_category_list.widget.php',198],['inc/widgets/widgets','_org_members.widget.php',147],['inc/widgets/widgets','_coll_comment_list.widget.php',129],['inc/_core/model','_log.class.php',276],['inc/_core/model','_log.class.php',602],['inc/widgets/widgets','_member_count.widget.php',66],['inc/widgets/widgets','_menu_link.widget.php',202],['inc/_core/ui/results','_results.class.php',916],['inc/widgets/widgets','_free_html.widget.php',110],['inc/widgets/widgets','_breadcrumb_path.widget.php',103],['inc/widgets/widgets','_image.widget.php',139],['inc/widgets/widgets','_profile_menu_link.widget.php',128],['inc/widgets/widgets','_coll_media_index.widget.php',199],['inc/widgets/model','_widget.class.php',513],['inc/widgets/widgets','_colls_list_owner.widget.php',121],['inc/widgets/widgets','_user_tools.widget.php',252],['inc/widgets/widgets','_coll_common_links.widget.php',167],['inc/widgets/widgets','_msg_menu_link.widget.php',191],['inc/widgets/widgets','_user_avatars.widget.php',177],['inc/widgets/widgets','_coll_xml_feeds.widget.php',120],['inc/widgets/widgets','_coll_avatar.widget.php',92],['inc/widgets/widgets','_user_register.widget.php',156],['inc/widgets/widgets','_colls_list_public.widget.php',121],['inc/widgets/widgets','_coll_title.widget.php',100]], 129],
'end_fieldset': ['end_fieldset', 'Ends a fieldset. ', [['inc/_core/ui/forms','_form.class.php',966]], 278],
'header_http_response': ['header_http_response', 'Update global $http_response_code and call function header() ', [['inc/_core','_misc.funcs.php',6115]], 18],
'resume': ['resume', 'Resumes the timer on a category. ', [['inc/_core/model','_timer.class.php',125]], 49],
'gen_tag_url': ['gen_tag_url', 'Generate a tag url on this blog ', [['inc/collections/model','_blog.class.php',1459]], 3],
'headers_content_mightcache': ['headers_content_mightcache', 'This is a placeholder for future development. ', [['inc/_core','_template.funcs.php',44]], 27],
'siteskin_init': ['siteskin_init', '', [['inc/skins','_skin.funcs.php',1631]], 5],
'load_funcs': ['load_funcs', '', [['inc/_core','_misc.funcs.php',158]], 242],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['inc/_core','_param.funcs.php',1678],['inc/_core/model/dataobjects','_dataobject.class.php',890]], 127],
'is_default_page': ['is_default_page', 'Tells if we are on the default blog page / front page. ', [['inc/skins','_skin.funcs.php',1702]], 0],
'author': ['author', 'Template function: display author/creator of item ', [['inc/items/model','_item.class.php',505],['inc/comments/model','_comment.class.php',917]], 48],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'init_inskin_editing': ['init_inskin_editing', 'Prepare the \'In-skin editing\'. ', [['inc/items/model','_item.funcs.php',78]], 1],
'get_param_definitions': ['get_param_definitions', 'Get definitions for editable params ', [['skins/photoblog','_skin.class.php',40],['skins/dating_mood','_skin.class.php',39],['inc/widgets/widgets','_coll_tag_cloud.widget.php',90],['skins/bootstrap_gallery_legacy','_skin.class.php',56],['inc/widgets/widgets','_coll_page_list.widget.php',37],['inc/widgets/widgets','_coll_logo.widget.php',85],['inc/widgets/widgets','_mobile_skin_switcher.widget.php',83],['inc/widgets/widgets','_online_users.widget.php',66],['inc/widgets/widgets','_user_login.widget.php',76],['inc/skins/model','_skin.class.php',645],['inc/widgets/widgets','_linkblog.widget.php',37],['skins/evocamp','_skin.class.php',39],['inc/widgets/widgets','_coll_related_post_list.widget.php',37],['inc/widgets/widgets','_coll_item_list.widget.php',37],['skins/pixelgreen','_skin.class.php',39],['inc/widgets/widgets','_user_links.widget.php',75],['skins/bootstrap_main_skin','_skin.class.php',56],['inc/widgets/widgets','_coll_featured_intro.widget.php',37],['inc/widgets/widgets','_coll_search_form.widget.php',75],['inc/widgets/widgets','_coll_longdesc.widget.php',77],['inc/widgets/widgets','_content_hierarchy.widget.php',37],['inc/widgets/widgets','_coll_current_filters.widget.php',76],['inc/widgets/widgets','_coll_category_list.widget.php',76],['inc/widgets/widgets','_org_members.widget.php',75],['skins/pureforums','_skin.class.php',39],['skins/bootstrap_blog_skin','_skin.class.php',58],['skins/asevo','_skin.class.php',39],['skins/photoalbums','_skin.class.php',52],['inc/widgets/widgets','_coll_comment_list.widget.php',37],['skins/bootstrap_gallery_skin','_skin.class.php',56],['inc/widgets/widgets','_coll_link_list.widget.php',37],['inc/widgets/widgets','_menu_link.widget.php',126],['inc/widgets/widgets','_free_html.widget.php',84],['inc/widgets/widgets','_breadcrumb_path.widget.php',37],['inc/widgets/widgets','_image.widget.php',85],['inc/widgets/widgets','_profile_menu_link.widget.php',75],['inc/widgets/widgets','_coll_media_index.widget.php',38],['skins/forums','_skin.class.php',39],['inc/widgets/model','_widget.class.php',282],['inc/widgets/widgets','_colls_list_owner.widget.php',75],['skins/bootstrap_forums_skin','_skin.class.php',56],['inc/widgets/widgets','_user_tools.widget.php',37],['inc/widgets/widgets','_coll_common_links.widget.php',79],['skins/colourise','_skin.class.php',39],['skins/manual','_skin.class.php',39],['inc/widgets/widgets','_msg_menu_link.widget.php',90],['inc/widgets/widgets','_user_avatars.widget.php',38],['inc/widgets/widgets','_coll_xml_feeds.widget.php',75],['skins/touch','_skin.class.php',39],['inc/widgets/widgets','_coll_avatar.widget.php',67],['skins/bootstrap_manual_skin','_skin.class.php',56],['inc/widgets/widgets','_coll_post_list.widget.php',37],['inc/widgets/widgets','_user_register.widget.php',76],['inc/widgets/widgets','_colls_list_public.widget.php',75],['skins/evopress','_skin.class.php',39],['inc/widgets/widgets','_coll_title.widget.php',37]], 63],
'install': ['install', 'Install current skin to DB ', [['inc/skins/model','_skin.class.php',108]], 4],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'init_mainlist': ['init_mainlist', 'Prepare the MainList object for displaying skins. ', [['inc/items/model','_item.funcs.php',20]], 8],
'unfilter_contents': ['unfilter_contents', 'UnFilter (post) contents by calling the relevant filter plugins. ', [['inc/plugins/model','_plugins_admin.class.php',1562]], 10],
'trigger_event_first_return': ['trigger_event_first_return', 'Call all plugins for a given event, until the first one returns a value (not NULL) (and $search is fulfilled, if given). ', [['inc/plugins/model','_plugins.class.php',922]], 2],
'check_item_perm_edit': ['check_item_perm_edit', 'Check permission for editing of the item by current user ', [['inc/items/model','_item.funcs.php',2913]], 4],
'skin_init': ['skin_init', 'Initialize internal states for the most common skin displays. ', [['inc/skins','_skin.funcs.php',22]], 86],
'display_user_email_status_message': ['display_user_email_status_message', 'Display message depending on user email status ', [['inc/users/model','_user.funcs.php',4045]], 7],
'init_tokeninput_js': ['init_tokeninput_js', 'Registers headlines for initialization of jQuery Tokeninput plugin ', [['inc/_core','_template.funcs.php',1491]], 7],
'init_blog_widgets': ['init_blog_widgets', 'Initialize blog enabled widgets. It will call every enabled widget request_required_files() function. ', [['inc/collections/model','_blog.funcs.php',661]], 1],
'get_permanent_url': ['get_permanent_url', 'Generate permalink to this comment. ', [['inc/comments/model','_comment.class.php',2372],['inc/chapters/model','_chapter.class.php',379],['inc/items/model','_itemlight.class.php',376]], 155],
'base_tag': ['base_tag', 'Returns a "<base />" tag and remembers that we\'ve used it ({@link regenerate_url()} needs this). ', [['inc/_core','_template.funcs.php',816]], 1],
'start': ['start', 'Starts this Spool mechanism. ', [['inc/_ext/swift/classes/Swift','Spool.php',19],['inc/_ext/swift/classes/Swift/Transport','SendmailTransport.php',47],['inc/_core/model','_timer.class.php',67],['inc/_ext/swift/classes/Swift','Transport.php',27],['inc/_ext/swift/classes/Swift','FileSpool.php',58],['inc/_ext/swift/classes/Swift/Transport','NullTransport.php',40],['inc/_ext/swift/classes/Swift/Transport','AbstractSmtpTransport.php',101],['inc/_ext/swift/classes/Swift','MemorySpool.php',31],['inc/_ext/swift/classes/Swift/Transport','SpoolTransport.php',68],['inc/_ext/swift/classes/Swift/Transport','MailTransport.php',57],['inc/_ext/swift/classes/Swift/Transport','LoadBalancedTransport.php',72]], 57],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['inc/users/model','_user.funcs.php',38]], 274],
'skin_installed': ['skin_installed', 'Check if a skin is installed. ', [['inc/skins','_skin.funcs.php',2491]], 1],
'check_status': ['check_status', 'Check if user status permits the requested action ', [['inc/users/model','_user.class.php',2890]], 83],
'skin_404_header': ['skin_404_header', 'Sends the desired HTTP response header in case of a "404". ', [['inc/skins','_skin.funcs.php',2280]], 1],
'remove_contacts_group_user': ['remove_contacts_group_user', 'Remove user from contacts group ', [['inc/messaging/model','_messaging.funcs.php',1000]], 2],
'get_post_navigation': ['get_post_navigation', 'Get current skin post navigation setting. Possible values: - NULL - In this case the Blog post navigation setting will be used - \'same_category\' - to always navigate through the same category in this skin - \'same_author\' - to always navigate through the same authors in this skin - \'same_tag\' - to always navigate through the same tags in this skin ', [['inc/skins/model','_skin.class.php',709],['skins/pureforums','_skin.class.php',142],['skins/forums','_skin.class.php',156],['skins/bootstrap_forums_skin','_skin.class.php',266],['skins/manual','_skin.class.php',144]], 1],
'disp_skinshot': ['disp_skinshot', 'Display skinshot for skin folder in various places. ', [['inc/skins/model','_skin.class.php',506]], 6],
'skin_file_exists': ['skin_file_exists', 'Checks if a specific file exists for a skin. ', [['inc/skins','_skin.funcs.php',2471]], 1],
'is_image': ['is_image', 'Is the File an image? ', [['inc/files/model','_file.class.php',460]], 28],
'get_tags': ['get_tags', 'Retrieves all tags from published posts ', [['inc/collections/model','_blog.funcs.php',835]], 12],
'postcats_get_byid': ['postcats_get_byid', 'Get category associations with given item ', [['inc/collections/model','_category.funcs.php',215]], 7],
'get_param': ['get_param', 'Get the value of a param. ', [['inc/_core','_param.funcs.php',1694],['inc/widgets/model','_widget.class.php',343]], 340],
'pause': ['pause', 'Pauses a timer category. It may me resumed later on, see {@link resume()}. ', [['inc/_core/model','_timer.class.php',95]], 112],
'create_contacts_user': ['create_contacts_user', 'Insert user to contacts ', [['inc/messaging/model','_messaging.funcs.php',732]], 2],
'show': ['show', '', [['rsc/js/jquery','jquery.ui.all.js',12111],['rsc/js/jquery','jquery.jcrop.js',1008]], 283],
'get_setting': ['get_setting', 'Get a setting. ', [['inc/items/model','_item.class.php',6656],['inc/skins/model','_skin.class.php',661],['inc/collections/model','_blog.class.php',2109]], 728],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'skin_widget': ['skin_widget', 'Template tag. Display a Widget. ', [['inc/skins','_skin.funcs.php',2342]], 65],
'skin_body_attrs': ['skin_body_attrs', 'Template function to init and print out html attributes for <body> tag ', [['inc/skins','_skin.funcs.php',2620]], 4],
'get_row': ['get_row', 'Get one row from the DB. ', [['inc/_core/model/db','_db.class.php',987]], 60],
'has_cross_country_restriction': ['has_cross_country_restriction', 'Check if browse users from different countries is restricted for the current User ', [['inc/users/model','_user.funcs.php',3252]], 14],
'htmlspecialchars_decode': ['htmlspecialchars_decode', 'Provide htmlspecialchars_decode for older versions of PHP (< 5.1.0) ', [['inc/_core','_misc.funcs.php',6424],['rsc/js/multiupload','fileuploader.js',74]], 14],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'logout': ['logout', 'Log the user out ', [['inc/users/model','_user.funcs.php',21],['inc/sessions/model','_session.class.php',365],['inc/plugins','_plugin.class.php',2426]], 6],
'get_manual_link': ['get_manual_link', 'Generate a link to a online help resource. testing the concept of online help (aka webhelp). this function should be relocated somewhere better if it is taken onboard by the project ', [['inc/_core','_misc.funcs.php',4935]], 284],
'check_goal': ['check_goal', 'Check if item has a goal to insert a hit into DB ', [['inc/items/model','_item.class.php',7425]], 1],
'get_list_by_event': ['get_list_by_event', '', [['inc/plugins/model','_plugins.class.php',1638]], 10],
'get_metadesc': ['get_metadesc', 'Get the meta description tag ', [['inc/items/model','_item.class.php',2330]], 1],
'check_user_status': ['check_user_status', 'Check if current User status permit the give action ', [['inc/users/model','_user.funcs.php',51]], 19],
'header_content_type': ['header_content_type', 'Template tag. Output content-type header ', [['inc/_core','_template.funcs.php',18]], 6],
'mark_as_read_by_user': ['mark_as_read_by_user', 'Mark a thread as read by the given user. ', [['inc/messaging/model','_messaging.funcs.php',1660]], 2],
'is_mobile_session': ['is_mobile_session', 'Was this session created from a mobile device ', [['inc/sessions/model','_session.class.php',693]], 5],
'autoform_display_field': ['autoform_display_field', 'Recursive helper function to display a field of the plugin\'s settings (by manipulating a Form). ', [['inc/plugins','_plugin.funcs.php',18]], 9],
'load_blog': ['load_blog', 'Set Blog ', [['inc/links/model','_linkcomment.class.php',131],['inc/links/model','_linkitem.class.php',187],['inc/chapters/model','_chapter.class.php',474],['inc/links/model','_linkuser.class.php',139],['inc/items/model','_itemlight.class.php',1413]], 69],
'regenerate_url': ['regenerate_url', 'Regenerate current URL from parameters This may clean it up But it is also useful when generating static pages: you cannot rely on $_REQUEST[] ', [['inc/_core','_param.funcs.php',1748]], 503],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'get_template': ['get_template', 'Get a template by name and depth. ', [['skins_adm/chicago','_adminUI.class.php',163],['skins/bootstrap_gallery_legacy','_skin.class.php',397],['skins_adm/bootstrap','_adminUI.class.php',240],['inc/skins/model','_skin.class.php',1180],['inc/_core/ui/forms','_form.class.php',185],['skins/bootstrap_main_skin','_skin.class.php',416],['skins/pureforums','_skin.class.php',322],['skins/bootstrap_blog_skin','_skin.class.php',233],['inc/plugins','_plugin.class.php',378],['skins/bootstrap_gallery_skin','_skin.class.php',397],['skins_adm','_adminUI_general.class.php',859],['skins/forums','_skin.class.php',346],['skins/bootstrap_forums_skin','_skin.class.php',410],['inc/_core/ui','_menu.class.php',430],['skins/bootstrap_manual_skin','_skin.class.php',254]], 211],
'add_navigation_param': ['add_navigation_param', 'Add nav_target param into the end of the url, but only if it is necessary ', [['inc/items/model','_itemlight.class.php',530]], 8],
'init_ajax_forms': ['init_ajax_forms', 'Registers headlines required by AJAX forms, but only if javascript forms are enabled in blog settings. ', [['inc/_core','_template.funcs.php',1337]], 3],
'is_same_url': ['is_same_url', 'Compare two given URLs, if they are the same. This converts all urlencoded chars (e.g. "%AA") to lowercase. It appears that some webservers use lowercase for the chars (Apache), while others use uppercase (lighttpd). ', [['inc/_core','_url.funcs.php',805]], 11],
'get_renderers_validated': ['get_renderers_validated', 'Get the list of validated renderers for this Item. This includes stealth plugins etc. ', [['inc/items/model','_item.class.php',6281],['inc/messaging/model','_message.class.php',698],['inc/comments/model','_comment.class.php',2922]], 30],
'skin_init_ajax': ['skin_init_ajax', 'Initialize skin for AJAX request ', [['inc/skins','_skin.funcs.php',1644]], 1],
'check_create_thread_limit': ['check_create_thread_limit', 'Check if current User already reached his \'create new thread\' limit for today or not. Important: The current User messaging permission is not checked here! ', [['inc/messaging/model','_messaging.funcs.php',1460]], 7],
'set_filters': ['set_filters', 'Set/Activate filterset ', [['inc/items/model','_itemlistlight.class.php',174],['inc/_core/model/dataobjects','_dataobjectlist2.class.php',210],['inc/comments/model','_commentlist.class.php',145],['inc/users/model','_userlist.class.php',129]], 47],
'get_full_path': ['get_full_path', 'Get the full path (directory and name) to the file. ', [['inc/files/model','_file.class.php',638]], 48],
'rename_contacts_group': ['rename_contacts_group', 'Rename contacts group ', [['inc/messaging/model','_messaging.funcs.php',805]], 2],
'get_user_agent': ['get_user_agent', 'Get the User agent\'s signature. ', [['inc/sessions/model','_hit.class.php',1062]], 8],
'accepts_email': ['accepts_email', 'Check if this user accepts receiving emails and has an email address ', [['inc/users/model','_user.class.php',3066]], 3],
'header_redirect': ['header_redirect', 'Sends HTTP header to redirect to the previous location (which can be given as function parameter, GET parameter (redirect_to), is taken from {@link Hit::$referer} or {@link $baseurl}). ', [['inc/_core','_template.funcs.php',91]], 427],
'skin_exists': ['skin_exists', 'Checks if a skin exists. This can either be a regular skin directory or can be in the list {@link Plugin::GetProvidedSkins()}. ', [['inc/skins','_skin.funcs.php',2443]], 2],
'get_item': ['get_item', 'Getting next item in archive list ', [['plugins','_archives.plugin.php',594]], 102],
'skin_provided_by_plugin': ['skin_provided_by_plugin', '', [['inc/skins','_skin.funcs.php',2421]], 3],
'is_tablet_session': ['is_tablet_session', 'Was this session created from a mobile device ', [['inc/sessions/model','_session.class.php',704]], 5],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['inc/items/model','_itemlist.class.php',249],['inc/items/model','_itemlistlight.class.php',742],['inc/comments/model','_commentlist.class.php',507],['inc/users/model','_userlist.class.php',511],['inc/_core/ui/results','_results.class.php',468],['inc/_core/model/db','_db.class.php',749]], 1144],
'create_contacts_group_users': ['create_contacts_group_users', 'Insert users for contacts group into database ', [['inc/messaging/model','_messaging.funcs.php',882]], 3],
'preg_match': ['preg_match', '', [], 423],
'htmlspecialchars': ['htmlspecialchars', '', [], 152],
'in_array': ['in_array', '', [], 417],
'implode': ['implode', '', [], 571],
'is_null': ['is_null', '', [], 299],
'strpos': ['strpos', '', [], 347],
'array_unshift': ['array_unshift', '', [], 85],
'array_diff': ['array_diff', '', [], 31],
'array_merge': ['array_merge', '', [], 702],
'defined': ['defined', '', [], 962],
'file_exists': ['file_exists', '', [], 142],
'array_push': ['array_push', '', [], 46],
'preg_replace': ['preg_replace', '', [], 325],
'count': ['count', '', [], 928],
'intval': ['intval', '', [], 221],
'rawurlencode': ['rawurlencode', '', [], 137],
'substr': ['substr', '', [], 745],
'is_readable': ['is_readable', '', [], 15]};
CLASS_DATA={
'userlist': ['userlist', 'UserList Class ', [['inc/users/model','_userlist.class.php',20]], 9],
'itemlist2': ['itemlist2', 'Item List Class 2 ', [['inc/items/model','_itemlist.class.php',21]], 19],
'thread': ['thread', 'Thread Class ', [['inc/messaging/model','_thread.class.php',19]], 35],
'linkitem': ['linkitem', 'LinkItem Class ', [['inc/links/model','_linkitem.class.php',16]], 31],
'skin': ['skin', 'Skin Class ', [['inc/skins/model','_skin.class.php',21]], 62],
'message': ['message', 'Message Class ', [['inc/messaging/model','_message.class.php',19]], 42],
'commentlist2': ['commentlist2', '', [['inc/comments/model','_commentlist.class.php',28]], 23]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
