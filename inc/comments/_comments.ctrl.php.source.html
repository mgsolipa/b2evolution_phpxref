<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/comments/_comments.ctrl.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='inc/comments';
filename='_comments.ctrl.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/comments/</a> -> <a href="_comments.ctrl.php.html">_comments.ctrl.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_comments.ctrl.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_comments.ctrl.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements the UI controller for managing comments.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * b2evolution - {@link http://b2evolution.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * Released under GNU GPL License - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> *</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * @package admin</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> */</span>
<a name="l11"><span class="linenum">  11</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l12"><span class="linenum">  12</span></a>  
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">/**</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> * @var AdminUI</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment"> */</span>
<a name="l16"><span class="linenum">  16</span></a>  global <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>;
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @var UserSettings</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> */</span>
<a name="l21"><span class="linenum">  21</span></a>  global <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../_variables/UserSettings.html">$UserSettings</a>;
<a name="l22"><span class="linenum">  22</span></a>  
<a name="l23"><span class="linenum">  23</span></a>  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="function" onClick="logFunction('param_action')" href="../../_functions/param_action.html" onMouseOver="funcPopup(event,'param_action')">param_action</a>( 'list' );
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">// We should activate toolbar menu items for this controller</span>
<a name="l26"><span class="linenum">  26</span></a>  <a class="var it137" onMouseOver="hilite(137)" onMouseOut="lolite()" onClick="logVariable('activate_collection_toolbar')" href="../../_variables/activate_collection_toolbar.html">$activate_collection_toolbar</a> = true;
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/*</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * Init the objects we want to work on.</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> */</span>
<a name="l31"><span class="linenum">  31</span></a>  switch( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> )
<a name="l32"><span class="linenum">  32</span></a>  {
<a name="l33"><span class="linenum">  33</span></a>      case 'edit':
<a name="l34"><span class="linenum">  34</span></a>      case 'update':
<a name="l35"><span class="linenum">  35</span></a>      case 'update_edit':
<a name="l36"><span class="linenum">  36</span></a>      case 'switch_view':
<a name="l37"><span class="linenum">  37</span></a>      case 'publish':
<a name="l38"><span class="linenum">  38</span></a>      case 'restrict':
<a name="l39"><span class="linenum">  39</span></a>      case 'deprecate':
<a name="l40"><span class="linenum">  40</span></a>      case 'delete_url':
<a name="l41"><span class="linenum">  41</span></a>      case 'update_publish':
<a name="l42"><span class="linenum">  42</span></a>      case 'delete':
<a name="l43"><span class="linenum">  43</span></a>          if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> != 'edit' &amp;&amp; <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> != 'switch_view' )
<a name="l44"><span class="linenum">  44</span></a>          { // Stop a request from the blocked IP addresses or Domains
<a name="l45"><span class="linenum">  45</span></a>              <a class="function" onClick="logFunction('antispam_block_request')" href="../../_functions/antispam_block_request.html" onMouseOver="funcPopup(event,'antispam_block_request')">antispam_block_request</a>();
<a name="l46"><span class="linenum">  46</span></a>          }
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_ID', 'integer', true );
<a name="l49"><span class="linenum">  49</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> );
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>          <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a> = &amp; <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l52"><span class="linenum">  52</span></a>          <a class="function" onClick="logFunction('set_working_blog')" href="../../_functions/set_working_blog.html" onMouseOver="funcPopup(event,'set_working_blog')">set_working_blog</a>( <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>() );
<a name="l53"><span class="linenum">  53</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l54"><span class="linenum">  54</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">        // Some users can delete &amp; change a status of comments in their own posts, set corresponding permlevel</span>
<a name="l57"><span class="linenum">  57</span></a>          if( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l58"><span class="linenum">  58</span></a>          { // Use special permissions for meta comment
<a name="l59"><span class="linenum">  59</span></a>              <a class="var it4530" onMouseOver="hilite(4530)" onMouseOut="lolite()" onClick="logVariable('check_permname')" href="../../_variables/check_permname.html">$check_permname</a> = 'meta_comment';
<a name="l60"><span class="linenum">  60</span></a>              <a class="var it4531" onMouseOver="hilite(4531)" onMouseOut="lolite()" onClick="logVariable('check_permlevel')" href="../../_variables/check_permlevel.html">$check_permlevel</a> = 'delete';
<a name="l61"><span class="linenum">  61</span></a>          }
<a name="l62"><span class="linenum">  62</span></a>          elseif( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'publish' || <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'update_publish' )
<a name="l63"><span class="linenum">  63</span></a>          { // Load the <span class="keyword">new </span><a class="class" onClick="logClass('comment')" href="../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a> status from publish request and set perm check values
<a name="l64"><span class="linenum">  64</span></a>              <a class="var it4532" onMouseOver="hilite(4532)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../_variables/publish_status.html">$publish_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'publish_status', 'string', '' );
<a name="l65"><span class="linenum">  65</span></a>              <a class="var it4530" onMouseOver="hilite(4530)" onMouseOut="lolite()" onClick="logVariable('check_permname')" href="../../_variables/check_permname.html">$check_permname</a> = 'comment!'.<a class="var it4532" onMouseOver="hilite(4532)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../_variables/publish_status.html">$publish_status</a>;
<a name="l66"><span class="linenum">  66</span></a>              <a class="var it4531" onMouseOver="hilite(4531)" onMouseOut="lolite()" onClick="logVariable('check_permlevel')" href="../../_variables/check_permlevel.html">$check_permlevel</a> = ( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'publish' ) ? 'moderate' : 'edit';
<a name="l67"><span class="linenum">  67</span></a>          }
<a name="l68"><span class="linenum">  68</span></a>          elseif( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'deprecate' )
<a name="l69"><span class="linenum">  69</span></a>          { // set perm check values
<a name="l70"><span class="linenum">  70</span></a>              <a class="var it4530" onMouseOver="hilite(4530)" onMouseOut="lolite()" onClick="logVariable('check_permname')" href="../../_variables/check_permname.html">$check_permname</a> = 'comment!deprecated';
<a name="l71"><span class="linenum">  71</span></a>              <a class="var it4531" onMouseOver="hilite(4531)" onMouseOut="lolite()" onClick="logVariable('check_permlevel')" href="../../_variables/check_permlevel.html">$check_permlevel</a> = 'moderate';
<a name="l72"><span class="linenum">  72</span></a>          }
<a name="l73"><span class="linenum">  73</span></a>          else
<a name="l74"><span class="linenum">  74</span></a>          { // set default perm check values
<a name="l75"><span class="linenum">  75</span></a>              <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_status', 'string', NULL );
<a name="l76"><span class="linenum">  76</span></a>              <a class="var it4530" onMouseOver="hilite(4530)" onMouseOut="lolite()" onClick="logVariable('check_permname')" href="../../_variables/check_permname.html">$check_permname</a> = 'comment!'.( empty( <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> ) ? 'CURSTATUS' : <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> );
<a name="l77"><span class="linenum">  77</span></a>              <a class="var it4531" onMouseOver="hilite(4531)" onMouseOut="lolite()" onClick="logVariable('check_permlevel')" href="../../_variables/check_permlevel.html">$check_permlevel</a> = ( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'delete' ) ? 'delete' : 'edit';
<a name="l78"><span class="linenum">  78</span></a>          }
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">        // Check permission:</span>
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it4530" onMouseOver="hilite(4530)" onMouseOut="lolite()" onClick="logVariable('check_permname')" href="../../_variables/check_permname.html">$check_permname</a>, <a class="var it4531" onMouseOver="hilite(4531)" onMouseOut="lolite()" onClick="logVariable('check_permlevel')" href="../../_variables/check_permlevel.html">$check_permlevel</a>, true, <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> );
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it2229" onMouseOver="hilite(2229)" onMouseOut="lolite()" onClick="logVariable('comment_title')" href="../../_variables/comment_title.html">$comment_title</a> = '';
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it2230" onMouseOver="hilite(2230)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../_variables/comment_content.html">$comment_content</a> = <a class="function" onClick="logFunction('htmlspecialchars_decode')" href="../../_functions/htmlspecialchars_decode.html" onMouseOver="funcPopup(event,'htmlspecialchars_decode')">htmlspecialchars_decode</a>( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('content')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> );
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">        // Format content for editing, if we were not already in editing...</span>
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../../_variables/Plugins_admin.html">$Plugins_admin</a> = &amp; get_Plugins_admin();
<a name="l87"><span class="linenum">  87</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array( 'object_type' =&gt; 'Comment', 'object_Blog' =&gt; &amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> );
<a name="l88"><span class="linenum">  88</span></a>          <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('Plugins_admin')" href="../../_variables/Plugins_admin.html">$Plugins_admin</a>-&gt;<a class="function" onClick="logFunction('unfilter_contents')" href="../../_functions/unfilter_contents.html" onMouseOver="funcPopup(event,'unfilter_contents')">unfilter_contents</a>( <a class="var it2229" onMouseOver="hilite(2229)" onMouseOut="lolite()" onClick="logVariable('comment_title')" href="../../_variables/comment_title.html">$comment_title</a> <span class="comment">/* by ref */</span>, <a class="var it2230" onMouseOver="hilite(2230)" onMouseOut="lolite()" onClick="logVariable('comment_content')" href="../../_variables/comment_content.html">$comment_content</a> <span class="comment">/* by ref */</span>, <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>(), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> );
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">        // Where are we going to redirect to?</span>
<a name="l91"><span class="linenum">  91</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>, 'ctrl=items&amp;blog='.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>.'&amp;p='.<a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10687" onMouseOver="hilite(10687)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>.( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() ? '&amp;comment_type=meta' : '' ), '&amp;' ) );
<a name="l92"><span class="linenum">  92</span></a>          break;
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      case 'elevate':
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">        // Stop a request from the blocked IP addresses or Domains</span>
<a name="l96"><span class="linenum">  96</span></a>          <a class="function" onClick="logFunction('antispam_block_request')" href="../../_functions/antispam_block_request.html" onMouseOver="funcPopup(event,'antispam_block_request')">antispam_block_request</a>();
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>          global <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>;
<a name="l99"><span class="linenum">  99</span></a>          <a class="function" onClick="logFunction('load_class')" href="../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'items/model/_item.class.php', 'Item' );
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_ID', 'integer', true );
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> );
<a name="l103"><span class="linenum"> 103</span></a>  
<a name="l104"><span class="linenum"> 104</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l105"><span class="linenum"> 105</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">        // Check permission:</span>
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_post!draft', 'edit', true, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l109"><span class="linenum"> 109</span></a>          break;
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>      case 'trash_delete':
<a name="l112"><span class="linenum"> 112</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_ID', 'integer', 0 );
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">        // Check permission:</span>
<a name="l115"><span class="linenum"> 115</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'editall', true );
<a name="l116"><span class="linenum"> 116</span></a>          break;
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>      case 'emptytrash':
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">        // Check permission:</span>
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'all', true );
<a name="l121"><span class="linenum"> 121</span></a>          break;
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>      case 'list':
<a name="l124"><span class="linenum"> 124</span></a>      case 'mass_delete':
<a name="l125"><span class="linenum"> 125</span></a>          if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'mass_delete' )
<a name="l126"><span class="linenum"> 126</span></a>          { // Check permission:
<a name="l127"><span class="linenum"> 127</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'all', true );
<a name="l128"><span class="linenum"> 128</span></a>          }
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">        // Check permission:</span>
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it3465" onMouseOver="hilite(3465)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = <a class="function" onClick="logFunction('autoselect_blog')" href="../../_functions/autoselect_blog.html" onMouseOver="funcPopup(event,'autoselect_blog')">autoselect_blog</a>( 'blog_comments', 'edit' );
<a name="l132"><span class="linenum"> 132</span></a>          if( ! <a class="var it3465" onMouseOver="hilite(3465)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> )
<a name="l133"><span class="linenum"> 133</span></a>          { // No blog could be selected
<a name="l134"><span class="linenum"> 134</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You have no permission to edit comments.' ), 'error' );
<a name="l135"><span class="linenum"> 135</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'nil';
<a name="l136"><span class="linenum"> 136</span></a>          }
<a name="l137"><span class="linenum"> 137</span></a>          elseif( <a class="function" onClick="logFunction('set_working_blog')" href="../../_functions/set_working_blog.html" onMouseOver="funcPopup(event,'set_working_blog')">set_working_blog</a>( <a class="var it3465" onMouseOver="hilite(3465)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> ) )    // set <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> &amp; memorize in user prefs
<a name="l138"><span class="linenum"> 138</span></a>          { // Selected a <span class="keyword">new </span><a class="class" onClick="logClass('blog')" href="../../_classes/blog.html" onMouseOver="classPopup(event,'blog')">blog</a>:
<a name="l139"><span class="linenum"> 139</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l140"><span class="linenum"> 140</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l141"><span class="linenum"> 141</span></a>          }
<a name="l142"><span class="linenum"> 142</span></a>          break;
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>      case 'spam':
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">        // Used for quick SPAM vote of comments</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_ID', 'integer', true );
<a name="l150"><span class="linenum"> 150</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> = &amp; Comment_get_by_ID( <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../_variables/comment_ID.html">$comment_ID</a> );
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a> = &amp; <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l153"><span class="linenum"> 153</span></a>          <a class="function" onClick="logFunction('set_working_blog')" href="../../_functions/set_working_blog.html" onMouseOver="funcPopup(event,'set_working_blog')">set_working_blog</a>( <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>() );
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a> );
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">        // Check permission for spam voting</span>
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_vote_spam_comments', 'edit', true, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>          if( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> !== false )
<a name="l161"><span class="linenum"> 161</span></a>          { // The comment still exists
<a name="l162"><span class="linenum"> 162</span></a>              if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/author_user_ID.html">author_user_ID</a> )
<a name="l163"><span class="linenum"> 163</span></a>              { // Do not allow users to vote on their own comments
<a name="l164"><span class="linenum"> 164</span></a>                  <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set_vote')" href="../../_functions/set_vote.html" onMouseOver="funcPopup(event,'set_vote')">set_vote</a>( 'spam', <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'value', 'string' ) );
<a name="l165"><span class="linenum"> 165</span></a>                  <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l166"><span class="linenum"> 166</span></a>              }
<a name="l167"><span class="linenum"> 167</span></a>          }
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">        // Where are we going to redirect to?</span>
<a name="l170"><span class="linenum"> 170</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'redirect_to', 'url', <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>, 'ctrl=comments&amp;blog='.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>.'&amp;filter=restore', '&amp;' ) );
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">        // Redirect so that a reload doesn't write to the DB twice:</span>
<a name="l173"><span class="linenum"> 173</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a>, 303 ); <span class="comment">// Will EXIT</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">        // We have EXITed already at this point!!</span>
<a name="l175"><span class="linenum"> 175</span></a>          break;
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>      default:
<a name="l178"><span class="linenum"> 178</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'unhandled action 1' );
<a name="l179"><span class="linenum"> 179</span></a>  }
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">// Set the third level tab</span>
<a name="l182"><span class="linenum"> 182</span></a>  <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'tab3', 'string', '', true );
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>  <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('breadcrumbpath_init')" href="../../_functions/breadcrumbpath_init.html" onMouseOver="funcPopup(event,'breadcrumbpath_init')">breadcrumbpath_init</a>( true, array( 'text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Collections'), 'url' =&gt; <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>.'?ctrl=dashboard&amp;amp;blog=<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>$' ) );
<a name="l185"><span class="linenum"> 185</span></a>  <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('breadcrumbpath_add')" href="../../_functions/breadcrumbpath_add.html" onMouseOver="funcPopup(event,'breadcrumbpath_add')">breadcrumbpath_add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comments'), <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments&amp;amp;blog=<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>$&amp;amp;filter=restore' );
<a name="l186"><span class="linenum"> 186</span></a>  switch( <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a> )
<a name="l187"><span class="linenum"> 187</span></a>  {
<a name="l188"><span class="linenum"> 188</span></a>      case 'listview':
<a name="l189"><span class="linenum"> 189</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('breadcrumbpath_add')" href="../../_functions/breadcrumbpath_add.html" onMouseOver="funcPopup(event,'breadcrumbpath_add')">breadcrumbpath_add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('List view'), <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments&amp;amp;blog=<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>$&amp;amp;tab3='.<a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a>.'&amp;amp;filter=restore' );
<a name="l190"><span class="linenum"> 190</span></a>          break;
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      case 'fullview':
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('breadcrumbpath_add')" href="../../_functions/breadcrumbpath_add.html" onMouseOver="funcPopup(event,'breadcrumbpath_add')">breadcrumbpath_add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Full text view'), <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments&amp;amp;blog=<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>$&amp;amp;tab3='.<a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a>.'&amp;amp;filter=restore' );
<a name="l194"><span class="linenum"> 194</span></a>          break;
<a name="l195"><span class="linenum"> 195</span></a>  }
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>  <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_path')" href="../../_functions/set_path.html" onMouseOver="funcPopup(event,'set_path')">set_path</a>( 'collections' );    <span class="comment">// Sublevel may be attached below</span>
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">/**</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment"> * Perform action:</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment"> */</span>
<a name="l202"><span class="linenum"> 202</span></a>  switch( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> )
<a name="l203"><span class="linenum"> 203</span></a>  {
<a name="l204"><span class="linenum"> 204</span></a>      case 'nil':
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">        // Do nothing</span>
<a name="l206"><span class="linenum"> 206</span></a>          break;
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>      case 'edit':
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a onClick="logVariable('title_titlearea')" class="var it10725" onMouseOver="hilite(10725)" onMouseOut="lolite()" href="../../_variables/title_titlearea.html">title_titlearea</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Editing comment').' #'.<a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>;
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">        // Generate available blogs list:</span>
<a name="l213"><span class="linenum"> 213</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_coll_list_params')" href="../../_functions/set_coll_list_params.html" onMouseOver="funcPopup(event,'set_coll_list_params')">set_coll_list_params</a>( 'blog_comments', 'edit', array( 'ctrl' =&gt; 'comments', 'filter' =&gt; 'restore' ) );
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>          <span class="comment">/*</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">         * Add sub menu entries:</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">         * We do this here instead of _header because we need to include all filter params into regenerate_url()</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">         */</span>
<a name="l219"><span class="linenum"> 219</span></a>          <a class="function" onClick="logFunction('attach_browse_tabs')" href="../../_functions/attach_browse_tabs.html" onMouseOver="funcPopup(event,'attach_browse_tabs')">attach_browse_tabs</a>( false );
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_path')" href="../../_functions/set_path.html" onMouseOver="funcPopup(event,'set_path')">set_path</a>( 'collections', 'comments' );
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('breadcrumbpath_add')" href="../../_functions/breadcrumbpath_add.html" onMouseOver="funcPopup(event,'breadcrumbpath_add')">breadcrumbpath_add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment #%s'), <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ), '?ctrl=comments&amp;amp;comment_ID='.<a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>.'&amp;amp;action=edit' );
<a name="l224"><span class="linenum"> 224</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('breadcrumbpath_add')" href="../../_functions/breadcrumbpath_add.html" onMouseOver="funcPopup(event,'breadcrumbpath_add')">breadcrumbpath_add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit'), '?ctrl=comments&amp;amp;comment_ID='.<a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>.'&amp;amp;action=edit' );
<a name="l225"><span class="linenum"> 225</span></a>          break;
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>  
<a name="l228"><span class="linenum"> 228</span></a>      case 'update_publish':
<a name="l229"><span class="linenum"> 229</span></a>      case 'update':
<a name="l230"><span class="linenum"> 230</span></a>      case 'update_edit':
<a name="l231"><span class="linenum"> 231</span></a>      case 'switch_view':
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">        // fp&gt; TODO: $edited_Comment-&gt;load_from_Request( true );</span>
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l235"><span class="linenum"> 235</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>          if( ! <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;get_author_User() )
<a name="l238"><span class="linenum"> 238</span></a>          { // If this is not a member comment
<a name="l239"><span class="linenum"> 239</span></a>              <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'newcomment_author', 'string', true );
<a name="l240"><span class="linenum"> 240</span></a>              <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'newcomment_author_email', 'string' );
<a name="l241"><span class="linenum"> 241</span></a>              <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'newcomment_author_url', 'string' );
<a name="l242"><span class="linenum"> 242</span></a>              <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_allow_msgform', 'integer', 0 <span class="comment">/* checkbox */</span> );
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>              <a class="function" onClick="logFunction('param_check_not_empty')" href="../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'newcomment_author', <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter an author name.'), '' );
<a name="l245"><span class="linenum"> 245</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'author', <a class="var it4533" onMouseOver="hilite(4533)" onMouseOut="lolite()" onClick="logVariable('newcomment_author')" href="../../_variables/newcomment_author.html">$newcomment_author</a> );
<a name="l246"><span class="linenum"> 246</span></a>              <a class="function" onClick="logFunction('param_check_email')" href="../../_functions/param_check_email.html" onMouseOver="funcPopup(event,'param_check_email')">param_check_email</a>( 'newcomment_author_email', false );
<a name="l247"><span class="linenum"> 247</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'author_email', <a class="var it4534" onMouseOver="hilite(4534)" onMouseOut="lolite()" onClick="logVariable('newcomment_author_email')" href="../../_variables/newcomment_author_email.html">$newcomment_author_email</a> );
<a name="l248"><span class="linenum"> 248</span></a>              <a class="function" onClick="logFunction('param_check_url')" href="../../_functions/param_check_url.html" onMouseOver="funcPopup(event,'param_check_url')">param_check_url</a>( 'newcomment_author_url', 'posting', '' ); <span class="comment">// Give posting permissions here</span>
<a name="l249"><span class="linenum"> 249</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'author_url', <a class="var it4535" onMouseOver="hilite(4535)" onMouseOut="lolite()" onClick="logVariable('newcomment_author_url')" href="../../_variables/newcomment_author_url.html">$newcomment_author_url</a> );
<a name="l250"><span class="linenum"> 250</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'allow_msgform', <a class="var it2303" onMouseOver="hilite(2303)" onMouseOut="lolite()" onClick="logVariable('comment_allow_msgform')" href="../../_variables/comment_allow_msgform.html">$comment_allow_msgform</a> );
<a name="l251"><span class="linenum"> 251</span></a>          }
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">        // Move to different post</span>
<a name="l254"><span class="linenum"> 254</span></a>          if( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'moveto_post', 'string', false ) )
<a name="l255"><span class="linenum"> 255</span></a>          { // Move to post is set
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>              <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l258"><span class="linenum"> 258</span></a>              if( <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10681" onMouseOver="hilite(10681)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> != <a class="var it4536" onMouseOver="hilite(4536)" onMouseOut="lolite()" onClick="logVariable('moveto_post')" href="../../_variables/moveto_post.html">$moveto_post</a> )
<a name="l259"><span class="linenum"> 259</span></a>              { // Move to post was changed
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">                // Check destination post</span>
<a name="l261"><span class="linenum"> 261</span></a>                  <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l262"><span class="linenum"> 262</span></a>                  if( ( <a class="var it4537" onMouseOver="hilite(4537)" onMouseOut="lolite()" onClick="logVariable('dest_Item')" href="../../_variables/dest_Item.html">$dest_Item</a> = <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_ID( <a class="var it4536" onMouseOver="hilite(4536)" onMouseOut="lolite()" onClick="logVariable('moveto_post')" href="../../_variables/moveto_post.html">$moveto_post</a>, false, false) ) !== false )
<a name="l263"><span class="linenum"> 263</span></a>                  { // the item exists
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>                      <a class="var it4538" onMouseOver="hilite(4538)" onMouseOut="lolite()" onClick="logVariable('dest_Item_Blog')" href="../../_variables/dest_Item_Blog.html">$dest_Item_Blog</a> = &amp; <a class="var it4537" onMouseOver="hilite(4537)" onMouseOut="lolite()" onClick="logVariable('dest_Item')" href="../../_variables/dest_Item.html">$dest_Item</a>-&gt;get_Blog();
<a name="l266"><span class="linenum"> 266</span></a>                      <a class="var it4539" onMouseOver="hilite(4539)" onMouseOut="lolite()" onClick="logVariable('dest_Item_Blog_User')" href="../../_variables/dest_Item_Blog_User.html">$dest_Item_Blog_User</a> = &amp; <a class="var it4538" onMouseOver="hilite(4538)" onMouseOut="lolite()" onClick="logVariable('dest_Item_Blog')" href="../../_variables/dest_Item_Blog.html">$dest_Item_Blog</a>-&gt;get_owner_User();
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>                      <a class="var it4540" onMouseOver="hilite(4540)" onMouseOut="lolite()" onClick="logVariable('comment_Item_Blog')" href="../../_variables/comment_Item_Blog.html">$comment_Item_Blog</a> = &amp; <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../_variables/comment_Item.html">$comment_Item</a>-&gt;get_Blog();
<a name="l269"><span class="linenum"> 269</span></a>                      <a class="var it4541" onMouseOver="hilite(4541)" onMouseOut="lolite()" onClick="logVariable('comment_Item_Blog_User')" href="../../_variables/comment_Item_Blog_User.html">$comment_Item_Blog_User</a> = &amp; <a class="var it4540" onMouseOver="hilite(4540)" onMouseOut="lolite()" onClick="logVariable('comment_Item_Blog')" href="../../_variables/comment_Item_Blog.html">$comment_Item_Blog</a>-&gt;get_owner_User();
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>                      if( (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> == <a class="var it4539" onMouseOver="hilite(4539)" onMouseOut="lolite()" onClick="logVariable('dest_Item_Blog_User')" href="../../_variables/dest_Item_Blog_User.html">$dest_Item_Blog_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10835" onMouseOver="hilite(10835)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> &amp;&amp;
<a name="l272"><span class="linenum"> 272</span></a>                          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> == <a class="var it4541" onMouseOver="hilite(4541)" onMouseOut="lolite()" onClick="logVariable('comment_Item_Blog_User')" href="../../_variables/comment_Item_Blog_User.html">$comment_Item_Blog_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10836" onMouseOver="hilite(10836)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) ||
<a name="l273"><span class="linenum"> 273</span></a>                          ( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_admin', 'edit', false, <a class="var it4538" onMouseOver="hilite(4538)" onMouseOut="lolite()" onClick="logVariable('dest_Item_Blog')" href="../../_variables/dest_Item_Blog.html">$dest_Item_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10837" onMouseOver="hilite(10837)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) &amp;&amp;
<a name="l274"><span class="linenum"> 274</span></a>                          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_admin', 'edit', false, <a class="var it4540" onMouseOver="hilite(4540)" onMouseOut="lolite()" onClick="logVariable('comment_Item_Blog')" href="../../_variables/comment_Item_Blog.html">$comment_Item_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10838" onMouseOver="hilite(10838)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) ) )
<a name="l275"><span class="linenum"> 275</span></a>                      { // current user is the owner of both the source and the destination blogs or current user is admin for both blogs
<a name="l276"><span class="linenum"> 276</span></a>                          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set_Item')" href="../../_functions/set_item.html" onMouseOver="funcPopup(event,'set_item')">set_Item</a>( <a class="var it4537" onMouseOver="hilite(4537)" onMouseOut="lolite()" onClick="logVariable('dest_Item')" href="../../_variables/dest_Item.html">$dest_Item</a> );
<a name="l277"><span class="linenum"> 277</span></a>                      }
<a name="l278"><span class="linenum"> 278</span></a>                      else
<a name="l279"><span class="linenum"> 279</span></a>                      {
<a name="l280"><span class="linenum"> 280</span></a>                          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Destination post blog owner is different!'), 'error' );
<a name="l281"><span class="linenum"> 281</span></a>                      }
<a name="l282"><span class="linenum"> 282</span></a>                  }
<a name="l283"><span class="linenum"> 283</span></a>                  else
<a name="l284"><span class="linenum"> 284</span></a>                  { // the item doesn't exists
<a name="l285"><span class="linenum"> 285</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Post ID &amp;laquo;%d&amp;raquo; does not exist!'), <a class="var it4536" onMouseOver="hilite(4536)" onMouseOut="lolite()" onClick="logVariable('moveto_post')" href="../../_variables/moveto_post.html">$moveto_post</a> ), 'error' );
<a name="l286"><span class="linenum"> 286</span></a>                  }
<a name="l287"><span class="linenum"> 287</span></a>              }
<a name="l288"><span class="linenum"> 288</span></a>          }
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a> = <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l292"><span class="linenum"> 292</span></a>          if( <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it10687" onMouseOver="hilite(10687)" onMouseOut="lolite()" href="../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_html_comment' ) )
<a name="l293"><span class="linenum"> 293</span></a>          {    // HTML is allowed for this comment
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it323" onMouseOver="hilite(323)" onMouseOut="lolite()" onClick="logVariable('text_format')" href="../../_variables/text_format.html">$text_format</a> = 'html';
<a name="l295"><span class="linenum"> 295</span></a>          }
<a name="l296"><span class="linenum"> 296</span></a>          else
<a name="l297"><span class="linenum"> 297</span></a>          {    // HTML is disallowed for this comment
<a name="l298"><span class="linenum"> 298</span></a>              <a class="var it323" onMouseOver="hilite(323)" onMouseOut="lolite()" onClick="logVariable('text_format')" href="../../_variables/text_format.html">$text_format</a> = 'htmlspecialchars';
<a name="l299"><span class="linenum"> 299</span></a>          }
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">        // Content:</span>
<a name="l302"><span class="linenum"> 302</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'content', <a class="var it323" onMouseOver="hilite(323)" onMouseOut="lolite()" onClick="logVariable('text_format')" href="../../_variables/text_format.html">$text_format</a> );
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">        // Don't allow the hidden text in comment content</span>
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '&lt;!', '&amp;lt;!', <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> );
<a name="l305"><span class="linenum"> 305</span></a>  
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">        // Renderers:</span>
<a name="l307"><span class="linenum"> 307</span></a>          if( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'renderers_displayed', 'integer', 0 ) )
<a name="l308"><span class="linenum"> 308</span></a>          { // use &quot;renderers&quot; value only if it has been displayed (may be empty)
<a name="l309"><span class="linenum"> 309</span></a>              global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>;
<a name="l310"><span class="linenum"> 310</span></a>              <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../_variables/renderers.html">$renderers</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('validate_renderer_list')" href="../../_functions/validate_renderer_list.html" onMouseOver="funcPopup(event,'validate_renderer_list')">validate_renderer_list</a>( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'renderers', 'array:string', array() ), array( 'Comment' =&gt; &amp; <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a> ) );
<a name="l311"><span class="linenum"> 311</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../_variables/renderers.html">$renderers</a> );
<a name="l312"><span class="linenum"> 312</span></a>          }
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>          if( <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it10687" onMouseOver="hilite(10687)" onMouseOut="lolite()" href="../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'threaded_comments' ) &amp;&amp;
<a name="l315"><span class="linenum"> 315</span></a>              ( <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'in_reply_to_cmt_ID', 'integer', NULL, false, false, false ) !== false ) )
<a name="l316"><span class="linenum"> 316</span></a>          { // Change a field &quot;In reply to comment ID&quot; if threaded comments are enabled for the blog
<a name="l317"><span class="linenum"> 317</span></a>              <a class="var it2307" onMouseOver="hilite(2307)" onMouseOut="lolite()" onClick="logVariable('in_reply_to_cmt_ID')" href="../../_variables/in_reply_to_cmt_ID.html">$in_reply_to_cmt_ID</a> = <a class="function" onClick="logFunction('get_param')" href="../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'in_reply_to_cmt_ID' );
<a name="l318"><span class="linenum"> 318</span></a>              <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a> = &amp; get_CommentCache();
<a name="l319"><span class="linenum"> 319</span></a>              if( <a class="var it2307" onMouseOver="hilite(2307)" onMouseOut="lolite()" onClick="logVariable('in_reply_to_cmt_ID')" href="../../_variables/in_reply_to_cmt_ID.html">$in_reply_to_cmt_ID</a> &gt; 0 )
<a name="l320"><span class="linenum"> 320</span></a>              { // Check new entered comment ID
<a name="l321"><span class="linenum"> 321</span></a>                  if( ! empty( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) &amp;&amp; <a class="var it2307" onMouseOver="hilite(2307)" onMouseOut="lolite()" onClick="logVariable('in_reply_to_cmt_ID')" href="../../_variables/in_reply_to_cmt_ID.html">$in_reply_to_cmt_ID</a> == <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l322"><span class="linenum"> 322</span></a>                  { // Restrict such brake case
<a name="l323"><span class="linenum"> 323</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('This comment cannot be a reply to itself.'), 'error' );
<a name="l324"><span class="linenum"> 324</span></a>                  }
<a name="l325"><span class="linenum"> 325</span></a>                  elseif( ! ( <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a> = &amp; <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('CommentCache')" href="../../_variables/CommentCache.html">$CommentCache</a>-&gt;get_by_ID( <a class="var it2307" onMouseOver="hilite(2307)" onMouseOut="lolite()" onClick="logVariable('in_reply_to_cmt_ID')" href="../../_variables/in_reply_to_cmt_ID.html">$in_reply_to_cmt_ID</a>, false, false ) ) )
<a name="l326"><span class="linenum"> 326</span></a>                  { // No comment exists
<a name="l327"><span class="linenum"> 327</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The ID of the parent comment you entered does not exist.'), 'error' );
<a name="l328"><span class="linenum"> 328</span></a>                  }
<a name="l329"><span class="linenum"> 329</span></a>                  elseif( <a class="var it521" onMouseOver="hilite(521)" onMouseOut="lolite()" onClick="logVariable('Comment')" href="../../_variables/Comment.html">$Comment</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10680" onMouseOver="hilite(10680)" onMouseOut="lolite()" href="../../_variables/item_ID.html">item_ID</a> != <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10687" onMouseOver="hilite(10687)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> )
<a name="l330"><span class="linenum"> 330</span></a>                  { // Item of new reply comment is not same
<a name="l331"><span class="linenum"> 331</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The ID of the parent comment must belong to the same post.'), 'error' );
<a name="l332"><span class="linenum"> 332</span></a>                  }
<a name="l333"><span class="linenum"> 333</span></a>              }
<a name="l334"><span class="linenum"> 334</span></a>              else
<a name="l335"><span class="linenum"> 335</span></a>              { // Deny wrong comment ID
<a name="l336"><span class="linenum"> 336</span></a>                  <a class="var it2307" onMouseOver="hilite(2307)" onMouseOut="lolite()" onClick="logVariable('in_reply_to_cmt_ID')" href="../../_variables/in_reply_to_cmt_ID.html">$in_reply_to_cmt_ID</a> = NULL;
<a name="l337"><span class="linenum"> 337</span></a>              }
<a name="l338"><span class="linenum"> 338</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'in_reply_to_cmt_ID', <a class="var it2307" onMouseOver="hilite(2307)" onMouseOut="lolite()" onClick="logVariable('in_reply_to_cmt_ID')" href="../../_variables/in_reply_to_cmt_ID.html">$in_reply_to_cmt_ID</a>, true );
<a name="l339"><span class="linenum"> 339</span></a>          }
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">        // Trigger event: a Plugin could add a $category=&quot;error&quot; message here..</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">        // This must get triggered before any internal validation and must pass all relevant params.</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">        // The OpenID plugin will validate a given OpenID here (via redirect and coming back here).</span>
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'CommentFormSent', array(
<a name="l345"><span class="linenum"> 345</span></a>                  'dont_remove_pre' =&gt; true,
<a name="l346"><span class="linenum"> 346</span></a>                  'comment_item_ID' =&gt; <a class="var it4529" onMouseOver="hilite(4529)" onMouseOut="lolite()" onClick="logVariable('edited_Comment_Item')" href="../../_variables/edited_Comment_Item.html">$edited_Comment_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10687" onMouseOver="hilite(10687)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>,
<a name="l347"><span class="linenum"> 347</span></a>                  'comment' =&gt; &amp; <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>,
<a name="l348"><span class="linenum"> 348</span></a>                  'renderers' =&gt; <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_renderers')" href="../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>(),
<a name="l349"><span class="linenum"> 349</span></a>              ) );
<a name="l350"><span class="linenum"> 350</span></a>  
<a name="l351"><span class="linenum"> 351</span></a>          <a class="function" onClick="logFunction('param_check_html')" href="../../_functions/param_check_html.html" onMouseOver="funcPopup(event,'param_check_html')">param_check_html</a>( 'content', <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Invalid comment text.') );    <span class="comment">// Check this is backoffice content (NOT with comment rules)</span>
<a name="l352"><span class="linenum"> 352</span></a>          <a class="function" onClick="logFunction('param_check_not_empty')" href="../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'content', <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Empty comment content is not allowed.') );
<a name="l353"><span class="linenum"> 353</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'content', <a class="function" onClick="logFunction('get_param')" href="../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'content' ) );
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'admin', 'restricted' ) &amp;&amp;
<a name="l356"><span class="linenum"> 356</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_edit_ts', 'edit', false, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> ) )
<a name="l357"><span class="linenum"> 357</span></a>          { // We use user date
<a name="l358"><span class="linenum"> 358</span></a>              <a class="function" onClick="logFunction('param_date')" href="../../_functions/param_date.html" onMouseOver="funcPopup(event,'param_date')">param_date</a>( 'comment_issue_date', <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter a valid comment date.'), true );
<a name="l359"><span class="linenum"> 359</span></a>              if( strlen(<a class="function" onClick="logFunction('get_param')" href="../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>('comment_issue_date')) )
<a name="l360"><span class="linenum"> 360</span></a>              { // only set it, if a date was given:
<a name="l361"><span class="linenum"> 361</span></a>                  <a class="function" onClick="logFunction('param_time')" href="../../_functions/param_time.html" onMouseOver="funcPopup(event,'param_time')">param_time</a>( 'comment_issue_time' );
<a name="l362"><span class="linenum"> 362</span></a>                  <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'date', <a class="function" onClick="logFunction('form_date')" href="../../_functions/form_date.html" onMouseOver="funcPopup(event,'form_date')">form_date</a>( <a class="function" onClick="logFunction('get_param')" href="../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'comment_issue_date' ), <a class="function" onClick="logFunction('get_param')" href="../../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>( 'comment_issue_time' ) ) ); <span class="comment">// TODO: cleanup...</span>
<a name="l363"><span class="linenum"> 363</span></a>              }
<a name="l364"><span class="linenum"> 364</span></a>          }
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_rating', 'integer', NULL );
<a name="l367"><span class="linenum"> 367</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'rating' );
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> = <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_status', 'string', NULL );
<a name="l370"><span class="linenum"> 370</span></a>          if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'update_publish' )
<a name="l371"><span class="linenum"> 371</span></a>          {
<a name="l372"><span class="linenum"> 372</span></a>              <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> = <a class="var it4532" onMouseOver="hilite(4532)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../_variables/publish_status.html">$publish_status</a>;
<a name="l373"><span class="linenum"> 373</span></a>          }
<a name="l374"><span class="linenum"> 374</span></a>          if( ! empty( <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> ) )
<a name="l375"><span class="linenum"> 375</span></a>          { // Update status only if it was defined on the submitted form
<a name="l376"><span class="linenum"> 376</span></a>              <a class="var it4542" onMouseOver="hilite(4542)" onMouseOut="lolite()" onClick="logVariable('old_comment_status')" href="../../_variables/old_comment_status.html">$old_comment_status</a> = <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'status' );
<a name="l377"><span class="linenum"> 377</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> );
<a name="l378"><span class="linenum"> 378</span></a>          }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'comment_nofollow', 'integer', 0 );
<a name="l381"><span class="linenum"> 381</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'nofollow' );
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>          if( <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('has_errors')" href="../../_functions/has_errors.html" onMouseOver="funcPopup(event,'has_errors')">has_errors</a>() )
<a name="l384"><span class="linenum"> 384</span></a>          {    // There have been some validation errors:
<a name="l385"><span class="linenum"> 385</span></a>              break;
<a name="l386"><span class="linenum"> 386</span></a>          }
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>          if( isset( <a class="var it4542" onMouseOver="hilite(4542)" onMouseOut="lolite()" onClick="logVariable('old_comment_status')" href="../../_variables/old_comment_status.html">$old_comment_status</a> ) &amp;&amp; <a class="var it4542" onMouseOver="hilite(4542)" onMouseOut="lolite()" onClick="logVariable('old_comment_status')" href="../../_variables/old_comment_status.html">$old_comment_status</a> != <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> )
<a name="l389"><span class="linenum"> 389</span></a>          { // Comment moderation is done, handle moderation &quot;secret&quot;
<a name="l390"><span class="linenum"> 390</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_qm_secret')" href="../../_functions/handle_qm_secret.html" onMouseOver="funcPopup(event,'handle_qm_secret')">handle_qm_secret</a>();
<a name="l391"><span class="linenum"> 391</span></a>          }
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">        // If action is switch_view then don't save the edited Comment yet, only change the edit view</span>
<a name="l394"><span class="linenum"> 394</span></a>          if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> != 'switch_view' )
<a name="l395"><span class="linenum"> 395</span></a>          { // UPDATE DB:
<a name="l396"><span class="linenum"> 396</span></a>              <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();    <span class="comment">// Commit update to the DB</span>
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>              if( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('status')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == 'published' )
<a name="l399"><span class="linenum"> 399</span></a>              { // comment status was set to published or it was already published, needs to handle notifications
<a name="l400"><span class="linenum"> 400</span></a>                  <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_notifications')" href="../../_functions/handle_notifications.html" onMouseOver="funcPopup(event,'handle_notifications')">handle_notifications</a>( false, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l401"><span class="linenum"> 401</span></a>              }
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment has been updated.'), 'success' );
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>              if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> != 'update_edit' )
<a name="l406"><span class="linenum"> 406</span></a>              { // Redirect to previous page(e.g. comments list) after updating except of action &quot;Save &amp; Edit&quot;
<a name="l407"><span class="linenum"> 407</span></a>                  <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">                /* exited */</span>
<a name="l409"><span class="linenum"> 409</span></a>              }
<a name="l410"><span class="linenum"> 410</span></a>          }
<a name="l411"><span class="linenum"> 411</span></a>  
<a name="l412"><span class="linenum"> 412</span></a>          break;
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>      case 'publish':
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l417"><span class="linenum"> 417</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', <a class="var it4532" onMouseOver="hilite(4532)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../_variables/publish_status.html">$publish_status</a> );
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">        // Comment moderation is done, handle moderation &quot;secret&quot;</span>
<a name="l421"><span class="linenum"> 421</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_qm_secret')" href="../../_functions/handle_qm_secret.html" onMouseOver="funcPopup(event,'handle_qm_secret')">handle_qm_secret</a>();
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();    <span class="comment">// Commit update to the DB</span>
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">        // comment status was set to published, needs to handle notifications</span>
<a name="l426"><span class="linenum"> 426</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_notifications')" href="../../_functions/handle_notifications.html" onMouseOver="funcPopup(event,'handle_notifications')">handle_notifications</a>( false, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">        // Set the success message corresponding for the new status</span>
<a name="l429"><span class="linenum"> 429</span></a>          switch( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('status')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> )
<a name="l430"><span class="linenum"> 430</span></a>          {
<a name="l431"><span class="linenum"> 431</span></a>              case 'published':
<a name="l432"><span class="linenum"> 432</span></a>                  <a class="var it3499" onMouseOver="hilite(3499)" onMouseOut="lolite()" onClick="logVariable('success_message')" href="../../_variables/success_message.html">$success_message</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment has been published.');
<a name="l433"><span class="linenum"> 433</span></a>                  break;
<a name="l434"><span class="linenum"> 434</span></a>              case 'community':
<a name="l435"><span class="linenum"> 435</span></a>                  <a class="var it3499" onMouseOver="hilite(3499)" onMouseOut="lolite()" onClick="logVariable('success_message')" href="../../_variables/success_message.html">$success_message</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The comment is now visible by the community.');
<a name="l436"><span class="linenum"> 436</span></a>                  break;
<a name="l437"><span class="linenum"> 437</span></a>              case 'protected':
<a name="l438"><span class="linenum"> 438</span></a>                  <a class="var it3499" onMouseOver="hilite(3499)" onMouseOut="lolite()" onClick="logVariable('success_message')" href="../../_variables/success_message.html">$success_message</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The comment is now visible by the members.');
<a name="l439"><span class="linenum"> 439</span></a>                  break;
<a name="l440"><span class="linenum"> 440</span></a>              case 'review':
<a name="l441"><span class="linenum"> 441</span></a>                  <a class="var it3499" onMouseOver="hilite(3499)" onMouseOut="lolite()" onClick="logVariable('success_message')" href="../../_variables/success_message.html">$success_message</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The comment is now visible by moderators.');
<a name="l442"><span class="linenum"> 442</span></a>                  break;
<a name="l443"><span class="linenum"> 443</span></a>              default:
<a name="l444"><span class="linenum"> 444</span></a>                  <a class="var it3499" onMouseOver="hilite(3499)" onMouseOut="lolite()" onClick="logVariable('success_message')" href="../../_variables/success_message.html">$success_message</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment has been updated.');
<a name="l445"><span class="linenum"> 445</span></a>                  break;
<a name="l446"><span class="linenum"> 446</span></a>          }
<a name="l447"><span class="linenum"> 447</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it3499" onMouseOver="hilite(3499)" onMouseOut="lolite()" onClick="logVariable('success_message')" href="../../_variables/success_message.html">$success_message</a>, 'success' );
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">        /* exited */</span>
<a name="l451"><span class="linenum"> 451</span></a>          break;
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>      case 'restrict':
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l456"><span class="linenum"> 456</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l457"><span class="linenum"> 457</span></a>  
<a name="l458"><span class="linenum"> 458</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('comment_status')" href="../../_variables/comment_status.html">$comment_status</a> );
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">        // Comment moderation is done, handle moderation &quot;secret&quot;</span>
<a name="l460"><span class="linenum"> 460</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_qm_secret')" href="../../_functions/handle_qm_secret.html" onMouseOver="funcPopup(event,'handle_qm_secret')">handle_qm_secret</a>();
<a name="l461"><span class="linenum"> 461</span></a>  
<a name="l462"><span class="linenum"> 462</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();    <span class="comment">// Commit update to the DB</span>
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment has been restricted.'), 'success' );
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">        /* exited */</span>
<a name="l468"><span class="linenum"> 468</span></a>          break;
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>      case 'deprecate':
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l473"><span class="linenum"> 473</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('status', 'deprecated' );
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">        // Comment moderation is done, handle moderation &quot;secret&quot;</span>
<a name="l477"><span class="linenum"> 477</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('handle_qm_secret')" href="../../_functions/handle_qm_secret.html" onMouseOver="funcPopup(event,'handle_qm_secret')">handle_qm_secret</a>();
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();    <span class="comment">// Commit update to the DB</span>
<a name="l480"><span class="linenum"> 480</span></a>  
<a name="l481"><span class="linenum"> 481</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment has been deprecated.'), 'success' );
<a name="l482"><span class="linenum"> 482</span></a>  
<a name="l483"><span class="linenum"> 483</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">        /* exited */</span>
<a name="l485"><span class="linenum"> 485</span></a>          break;
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>      case 'delete_url':
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l490"><span class="linenum"> 490</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l491"><span class="linenum"> 491</span></a>  
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('author_url', NULL );
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();    <span class="comment">// Commit update to the DB</span>
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment url has been deleted.'), 'success' );
<a name="l497"><span class="linenum"> 497</span></a>  
<a name="l498"><span class="linenum"> 498</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">        /* exited */</span>
<a name="l500"><span class="linenum"> 500</span></a>          break;
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>  
<a name="l503"><span class="linenum"> 503</span></a>      case 'delete':
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l505"><span class="linenum"> 505</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">        // fp&gt; TODO: non JS confirm</span>
<a name="l508"><span class="linenum"> 508</span></a>          <a class="var it3499" onMouseOver="hilite(3499)" onMouseOut="lolite()" onClick="logVariable('success_message')" href="../../_variables/success_message.html">$success_message</a> = ( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('status')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == 'trash' || <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() ) ? <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment has been deleted.') : <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment has been recycled.');
<a name="l509"><span class="linenum"> 509</span></a>  
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">        // Delete from DB:</span>
<a name="l511"><span class="linenum"> 511</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbdelete')" href="../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>();
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it3499" onMouseOver="hilite(3499)" onMouseOut="lolite()" onClick="logVariable('success_message')" href="../../_variables/success_message.html">$success_message</a>, 'success' );
<a name="l514"><span class="linenum"> 514</span></a>  
<a name="l515"><span class="linenum"> 515</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l516"><span class="linenum"> 516</span></a>          break;
<a name="l517"><span class="linenum"> 517</span></a>  
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>      case 'trash_delete':
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l521"><span class="linenum"> 521</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>          if( isset( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> ) &amp;&amp; ( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> != 0 ) )
<a name="l524"><span class="linenum"> 524</span></a>          { // delete by comment ids
<a name="l525"><span class="linenum"> 525</span></a>              <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = 'SELECT comment_ID
<a name="l526"><span class="linenum"> 526</span></a>                       FROM T_comments
<a name="l527"><span class="linenum"> 527</span></a>                      INNER JOIN T_items__item ON post_ID = comment_item_ID
<a name="l528"><span class="linenum"> 528</span></a>                      INNER JOIN T_categories ON cat_ID = post_main_cat_ID
<a name="l529"><span class="linenum"> 529</span></a>                      WHERE comment_status = &quot;trash&quot; AND cat_blog_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../_variables/blog_ID.html">$blog_ID</a> );
<a name="l530"><span class="linenum"> 530</span></a>              <a class="var it4543" onMouseOver="hilite(4543)" onMouseOut="lolite()" onClick="logVariable('comment_ids')" href="../../_variables/comment_ids.html">$comment_ids</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it1657" onMouseOver="hilite(1657)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, 0, 'get trash comment ids' );
<a name="l531"><span class="linenum"> 531</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="class" onClick="logClass('Comment')" href="../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">Comment</a>::<a class="function" onClick="logFunction('db_delete_where')" href="../../_functions/db_delete_where.html" onMouseOver="funcPopup(event,'db_delete_where')">db_delete_where</a>( 'Comment', NULL, <a class="var it4543" onMouseOver="hilite(4543)" onMouseOut="lolite()" onClick="logVariable('comment_ids')" href="../../_variables/comment_ids.html">$comment_ids</a> );
<a name="l532"><span class="linenum"> 532</span></a>          }
<a name="l533"><span class="linenum"> 533</span></a>          else
<a name="l534"><span class="linenum"> 534</span></a>          { // delete by where clause
<a name="l535"><span class="linenum"> 535</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="class" onClick="logClass('Comment')" href="../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">Comment</a>::<a class="function" onClick="logFunction('db_delete_where')" href="../../_functions/db_delete_where.html" onMouseOver="funcPopup(event,'db_delete_where')">db_delete_where</a>( 'Comment', 'comment_status = &quot;trash&quot;' );
<a name="l536"><span class="linenum"> 536</span></a>          }
<a name="l537"><span class="linenum"> 537</span></a>  
<a name="l538"><span class="linenum"> 538</span></a>          if( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> !== false )
<a name="l539"><span class="linenum"> 539</span></a>          {
<a name="l540"><span class="linenum"> 540</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Recycle bin contents were successfully deleted.'), 'success' );
<a name="l541"><span class="linenum"> 541</span></a>          }
<a name="l542"><span class="linenum"> 542</span></a>          else
<a name="l543"><span class="linenum"> 543</span></a>          {
<a name="l544"><span class="linenum"> 544</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Could not empty recycle bin.'), 'error' );
<a name="l545"><span class="linenum"> 545</span></a>          }
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( 'action', 'action=list', '', '&amp;' ) );
<a name="l548"><span class="linenum"> 548</span></a>          break;
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>      case 'emptytrash':
<a name="l551"><span class="linenum"> 551</span></a>          <span class="comment">/*</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">         * Trash comments:</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">         */</span>
<a name="l554"><span class="linenum"> 554</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a onClick="logVariable('title_titlearea')" class="var it10725" onMouseOver="hilite(10725)" onMouseOut="lolite()" href="../../_variables/title_titlearea.html">title_titlearea</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment recycle bins');
<a name="l555"><span class="linenum"> 555</span></a>  
<a name="l556"><span class="linenum"> 556</span></a>          <span class="comment">/*</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">         * Add sub menu entries:</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">         * We do this here instead of _header because we need to include all filter params into regenerate_url()</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">         */</span>
<a name="l560"><span class="linenum"> 560</span></a>          <a class="function" onClick="logFunction('attach_browse_tabs')" href="../../_functions/attach_browse_tabs.html" onMouseOver="funcPopup(event,'attach_browse_tabs')">attach_browse_tabs</a>( false );
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_path')" href="../../_functions/set_path.html" onMouseOver="funcPopup(event,'set_path')">set_path</a>( 'collections', 'comments' );
<a name="l563"><span class="linenum"> 563</span></a>  
<a name="l564"><span class="linenum"> 564</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('breadcrumbpath_add')" href="../../_functions/breadcrumbpath_add.html" onMouseOver="funcPopup(event,'breadcrumbpath_add')">breadcrumbpath_add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment recycle bins'), '?ctrl=comments&amp;amp;action=emptytrash' );
<a name="l565"><span class="linenum"> 565</span></a>          break;
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>      case 'elevate':
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">        // Check that this action request is not a CSRF hacked request:</span>
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l570"><span class="linenum"> 570</span></a>  
<a name="l571"><span class="linenum"> 571</span></a>          <a class="var it3509" onMouseOver="hilite(3509)" onMouseOut="lolite()" onClick="logVariable('item_content')" href="../../_variables/item_content.html">$item_content</a> = <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_author_name')" href="../../_functions/get_author_name.html" onMouseOver="funcPopup(event,'get_author_name')">get_author_name</a>().' '.<a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'wrote' ).': &lt;blockquote&gt;'.<a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('get_content')" href="../../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>().'&lt;/blockquote&gt;';
<a name="l572"><span class="linenum"> 572</span></a>          <a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Item')" href="../../_classes/item.html" onMouseOver="classPopup(event,'item')">Item</a>();
<a name="l573"><span class="linenum"> 573</span></a>          <a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', 'draft' );
<a name="l574"><span class="linenum"> 574</span></a>          <a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a>-&gt;<a class="function" onClick="logFunction('set_creator_by_login')" href="../../_functions/set_creator_by_login.html" onMouseOver="funcPopup(event,'set_creator_by_login')">set_creator_by_login</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('login')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../_variables/login.html">login</a> );
<a name="l575"><span class="linenum"> 575</span></a>          <a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'main_cat_ID', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_default_cat_ID')" href="../../_functions/get_default_cat_id.html" onMouseOver="funcPopup(event,'get_default_cat_id')">get_default_cat_ID</a>() );
<a name="l576"><span class="linenum"> 576</span></a>          <a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'title', <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Elevated from comment' ) );
<a name="l577"><span class="linenum"> 577</span></a>          <a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'content', <a class="var it3509" onMouseOver="hilite(3509)" onMouseOut="lolite()" onClick="logVariable('item_content')" href="../../_variables/item_content.html">$item_content</a> );
<a name="l578"><span class="linenum"> 578</span></a>  
<a name="l579"><span class="linenum"> 579</span></a>          if( ! <a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() )
<a name="l580"><span class="linenum"> 580</span></a>          {
<a name="l581"><span class="linenum"> 581</span></a>              <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Unable to create the new post!' ), 'error' );
<a name="l582"><span class="linenum"> 582</span></a>              break;
<a name="l583"><span class="linenum"> 583</span></a>          }
<a name="l584"><span class="linenum"> 584</span></a>  
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">        // Deprecate the comment after elevating</span>
<a name="l586"><span class="linenum"> 586</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', 'deprecated' );
<a name="l587"><span class="linenum"> 587</span></a>          <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">        // Move all child comments to new created post</span>
<a name="l590"><span class="linenum"> 590</span></a>          <a class="function" onClick="logFunction('move_child_comments_to_item')" href="../../_functions/move_child_comments_to_item.html" onMouseOver="funcPopup(event,'move_child_comments_to_item')">move_child_comments_to_item</a>( <a class="var it1137" onMouseOver="hilite(1137)" onMouseOut="lolite()" onClick="logVariable('edited_Comment')" href="../../_variables/edited_Comment.html">$edited_Comment</a>-&gt;<a onClick="logVariable('ID')" class="var it10678" onMouseOver="hilite(10678)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>, <a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10839" onMouseOver="hilite(10839)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a> );
<a name="l591"><span class="linenum"> 591</span></a>  
<a name="l592"><span class="linenum"> 592</span></a>          <a class="function" onClick="logFunction('header_redirect')" href="../../_functions/header_redirect.html" onMouseOver="funcPopup(event,'header_redirect')">header_redirect</a>( <a class="function" onClick="logFunction('url_add_param')" href="../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../_variables/admin_url.html">$admin_url</a>, 'ctrl=items&amp;blog='.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../_variables/blog.html">$blog</a>.'&amp;action=edit&amp;p='.<a class="var it4544" onMouseOver="hilite(4544)" onMouseOut="lolite()" onClick="logVariable('new_Item')" href="../../_variables/new_Item.html">$new_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10839" onMouseOver="hilite(10839)" onMouseOut="lolite()" href="../../_variables/ID.html">ID</a>, '&amp;' ) );
<a name="l593"><span class="linenum"> 593</span></a>          break;
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>      case 'list':
<a name="l596"><span class="linenum"> 596</span></a>      case 'mass_delete':
<a name="l597"><span class="linenum"> 597</span></a>          <span class="comment">/*</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">         * Latest comments:</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">         */</span>
<a name="l600"><span class="linenum"> 600</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a onClick="logVariable('title_titlearea')" class="var it10725" onMouseOver="hilite(10725)" onMouseOut="lolite()" href="../../_variables/title_titlearea.html">title_titlearea</a> = <a class="function" onClick="logFunction('T_')" href="../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Latest comments');
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">        // Generate available blogs list:</span>
<a name="l603"><span class="linenum"> 603</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_coll_list_params')" href="../../_functions/set_coll_list_params.html" onMouseOver="funcPopup(event,'set_coll_list_params')">set_coll_list_params</a>( 'blog_comments', 'edit', array( 'ctrl' =&gt; 'comments', 'filter' =&gt; 'restore' ) );
<a name="l604"><span class="linenum"> 604</span></a>  
<a name="l605"><span class="linenum"> 605</span></a>          <span class="comment">/*</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">         * Add sub menu entries:</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment">         * We do this here instead of _header because we need to include all filter params into regenerate_url()</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">         */</span>
<a name="l609"><span class="linenum"> 609</span></a>          <a class="function" onClick="logFunction('attach_browse_tabs')" href="../../_functions/attach_browse_tabs.html" onMouseOver="funcPopup(event,'attach_browse_tabs')">attach_browse_tabs</a>();
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('append_path_level')" href="../../_functions/append_path_level.html" onMouseOver="funcPopup(event,'append_path_level')">append_path_level</a>( 'comments' );
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>          if( empty( <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a> ) )
<a name="l614"><span class="linenum"> 614</span></a>          {
<a name="l615"><span class="linenum"> 615</span></a>              <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a> = 'fullview';
<a name="l616"><span class="linenum"> 616</span></a>          }
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_path')" href="../../_functions/set_path.html" onMouseOver="funcPopup(event,'set_path')">set_path</a>( 'collections', 'comments', <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a> );
<a name="l619"><span class="linenum"> 619</span></a>  
<a name="l620"><span class="linenum"> 620</span></a>          <a class="var it4545" onMouseOver="hilite(4545)" onMouseOut="lolite()" onClick="logVariable('comments_list_param_prefix')" href="../../_variables/comments_list_param_prefix.html">$comments_list_param_prefix</a> = 'cmnt_';
<a name="l621"><span class="linenum"> 621</span></a>          if( !empty( <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a> ) )
<a name="l622"><span class="linenum"> 622</span></a>          {    // Use different param prefix for each tab
<a name="l623"><span class="linenum"> 623</span></a>              <a class="var it4545" onMouseOver="hilite(4545)" onMouseOut="lolite()" onClick="logVariable('comments_list_param_prefix')" href="../../_variables/comments_list_param_prefix.html">$comments_list_param_prefix</a> .= <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a>.'_';
<a name="l624"><span class="linenum"> 624</span></a>          }
<a name="l625"><span class="linenum"> 625</span></a>          <span class="comment">/*</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">         * List of comments to display:</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">         */</span>
<a name="l628"><span class="linenum"> 628</span></a>          <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../_variables/CommentList.html">$CommentList</a> = <span class="keyword">new </span><a class="class" onClick="logClass('CommentList2')" href="../../_classes/commentlist2.html" onMouseOver="classPopup(event,'commentlist2')">CommentList2</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../_variables/Blog.html">$Blog</a>, NULL, 'CommentCache', <a class="var it4545" onMouseOver="hilite(4545)" onMouseOut="lolite()" onClick="logVariable('comments_list_param_prefix')" href="../../_variables/comments_list_param_prefix.html">$comments_list_param_prefix</a>, <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a> );
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">        // Filter list:</span>
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('set_default_filters')" href="../../_functions/set_default_filters.html" onMouseOver="funcPopup(event,'set_default_filters')">set_default_filters</a>( array(
<a name="l632"><span class="linenum"> 632</span></a>                  'statuses' =&gt; <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'keys', array( 'redirected', 'trash' ) ),
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">                //'comments' =&gt; $UserSettings-&gt;get( 'results_per_page' ),</span>
<a name="l634"><span class="linenum"> 634</span></a>                  'order' =&gt; 'DESC',
<a name="l635"><span class="linenum"> 635</span></a>              ) );
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('load_from_Request')" href="../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>();
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>          <span class="comment">/**</span>
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">         * Mass delete comments</span>
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">         */</span>
<a name="l642"><span class="linenum"> 642</span></a>          <a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'mass_type', 'string', '' );
<a name="l643"><span class="linenum"> 643</span></a>          if( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'mass_delete' &amp;&amp; !empty( <a class="var it4546" onMouseOver="hilite(4546)" onMouseOut="lolite()" onClick="logVariable('mass_type')" href="../../_variables/mass_type.html">$mass_type</a> ) )
<a name="l644"><span class="linenum"> 644</span></a>          {
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">            // Check that this action request is not a CSRF hacked request:</span>
<a name="l646"><span class="linenum"> 646</span></a>              <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('assert_received_crumb')" href="../../_functions/assert_received_crumb.html" onMouseOver="funcPopup(event,'assert_received_crumb')">assert_received_crumb</a>( 'comment' );
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">            // Init the comment list query, but don't execute it</span>
<a name="l649"><span class="linenum"> 649</span></a>              <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('query_init')" href="../../_functions/query_init.html" onMouseOver="funcPopup(event,'query_init')">query_init</a>();
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">            // Set sql query to get deletable comment ids</span>
<a name="l651"><span class="linenum"> 651</span></a>              <a class="var it4547" onMouseOver="hilite(4547)" onMouseOut="lolite()" onClick="logVariable('deletable_comments_query')" href="../../_variables/deletable_comments_query.html">$deletable_comments_query</a> = 'SELECT DISTINCT '.<a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../_variables/CommentList.html">$CommentList</a>-&gt;<a onClick="logVariable('Cache')" class="var it10717" onMouseOver="hilite(10717)" onMouseOut="lolite()" href="../../_variables/Cache.html">Cache</a>-&gt;dbIDname.' '
<a name="l652"><span class="linenum"> 652</span></a>                      .<a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../_variables/CommentList.html">$CommentList</a>-&gt;<a onClick="logVariable('CommentQuery')" class="var it10717" onMouseOver="hilite(10717)" onMouseOut="lolite()" href="../../_variables/CommentQuery.html">CommentQuery</a>-&gt;<a class="function" onClick="logFunction('get_from')" href="../../_functions/get_from.html" onMouseOver="funcPopup(event,'get_from')">get_from</a>()
<a name="l653"><span class="linenum"> 653</span></a>                      .<a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../_variables/CommentList.html">$CommentList</a>-&gt;<a onClick="logVariable('CommentQuery')" class="var it10717" onMouseOver="hilite(10717)" onMouseOut="lolite()" href="../../_variables/CommentQuery.html">CommentQuery</a>-&gt;<a class="function" onClick="logFunction('get_where')" href="../../_functions/get_where.html" onMouseOver="funcPopup(event,'get_where')">get_where</a>();
<a name="l654"><span class="linenum"> 654</span></a>  
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">            // Set an action param to display a correct template</span>
<a name="l656"><span class="linenum"> 656</span></a>              <a class="var it4549" onMouseOver="hilite(4549)" onMouseOut="lolite()" onClick="logVariable('process_action')" href="../../_variables/process_action.html">$process_action</a> = <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>;
<a name="l657"><span class="linenum"> 657</span></a>              unset( <a class="var it928" onMouseOver="hilite(928)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../../_variables/_POST.html">$_POST</a>['actionArray'] );
<a name="l658"><span class="linenum"> 658</span></a>              <a class="function" onClick="logFunction('set_param')" href="../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'action', 'list' );
<a name="l659"><span class="linenum"> 659</span></a>  
<a name="l660"><span class="linenum"> 660</span></a>  <span class="comment">            // Try to obtain some serious time to do some serious processing (15 minutes)</span>
<a name="l661"><span class="linenum"> 661</span></a>              <a class="function" onClick="logFunction('set_max_execution_time')" href="../../_functions/set_max_execution_time.html" onMouseOver="funcPopup(event,'set_max_execution_time')">set_max_execution_time</a>( 10000 );
<a name="l662"><span class="linenum"> 662</span></a>          }
<a name="l663"><span class="linenum"> 663</span></a>  
<a name="l664"><span class="linenum"> 664</span></a>          break;
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>      default:
<a name="l667"><span class="linenum"> 667</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'unhandled action 2' );
<a name="l668"><span class="linenum"> 668</span></a>  }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">/*</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment"> * Page navigation:</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment"> */</span>
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>  <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_path')" href="../../_functions/set_path.html" onMouseOver="funcPopup(event,'set_path')">set_path</a>( 'collections', 'comments' );
<a name="l676"><span class="linenum"> 676</span></a>  
<a name="l677"><span class="linenum"> 677</span></a>  if( <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a> == 'fullview' )
<a name="l678"><span class="linenum"> 678</span></a>  { // Load jquery UI to animate background color on change comment status and to transfer a comment to recycle bin
<a name="l679"><span class="linenum"> 679</span></a>      <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( '#jqueryUI#' );
<a name="l680"><span class="linenum"> 680</span></a>  }
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>  if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, array( 'edit', 'update_publish', 'update', 'update_edit', 'elevate' ) ) )
<a name="l683"><span class="linenum"> 683</span></a>  { // Initialize date picker for _comment.form.php
<a name="l684"><span class="linenum"> 684</span></a>      <a class="function" onClick="logFunction('init_datepicker_js')" href="../../_functions/init_datepicker_js.html" onMouseOver="funcPopup(event,'init_datepicker_js')">init_datepicker_js</a>();
<a name="l685"><span class="linenum"> 685</span></a>  }
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>  <a class="function" onClick="logFunction('require_css')" href="../../_functions/require_css.html" onMouseOver="funcPopup(event,'require_css')">require_css</a>( <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'blog_base.css' ) ); <span class="comment">// Default styles for the blog navigation</span>
<a name="l688"><span class="linenum"> 688</span></a>  <a class="function" onClick="logFunction('require_js')" href="../../_functions/require_js.html" onMouseOver="funcPopup(event,'require_js')">require_js</a>( 'communication.js' ); <span class="comment">// auto requires jQuery</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">// Colorbox (a lightweight Lightbox alternative) allows to zoom on images and do slideshows with groups of images:</span>
<a name="l690"><span class="linenum"> 690</span></a>  <a class="function" onClick="logFunction('require_js_helper')" href="../../_functions/require_js_helper.html" onMouseOver="funcPopup(event,'require_js_helper')">require_js_helper</a>( 'colorbox' );
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>  if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, array( 'edit', 'elevate', 'update_publish', 'update', 'update_edit', 'switch_view' ) ) )
<a name="l693"><span class="linenum"> 693</span></a>  { // Page with comment edit form
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">    // Initialize js to autocomplete usernames in comment form</span>
<a name="l695"><span class="linenum"> 695</span></a>      <a class="function" onClick="logFunction('init_autocomplete_usernames_js')" href="../../_functions/init_autocomplete_usernames_js.html" onMouseOver="funcPopup(event,'init_autocomplete_usernames_js')">init_autocomplete_usernames_js</a>();
<a name="l696"><span class="linenum"> 696</span></a>  }
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">// Set an url for manual page:</span>
<a name="l699"><span class="linenum"> 699</span></a>  switch( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> )
<a name="l700"><span class="linenum"> 700</span></a>  {
<a name="l701"><span class="linenum"> 701</span></a>      case 'edit':
<a name="l702"><span class="linenum"> 702</span></a>      case 'elevate':
<a name="l703"><span class="linenum"> 703</span></a>      case 'update':
<a name="l704"><span class="linenum"> 704</span></a>      case 'update_publish':
<a name="l705"><span class="linenum"> 705</span></a>      case 'update_edit':
<a name="l706"><span class="linenum"> 706</span></a>      case 'switch_view':
<a name="l707"><span class="linenum"> 707</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_page_manual_link')" href="../../_functions/set_page_manual_link.html" onMouseOver="funcPopup(event,'set_page_manual_link')">set_page_manual_link</a>( 'editing-comments' );
<a name="l708"><span class="linenum"> 708</span></a>          break;
<a name="l709"><span class="linenum"> 709</span></a>      case 'mass_delete':
<a name="l710"><span class="linenum"> 710</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_page_manual_link')" href="../../_functions/set_page_manual_link.html" onMouseOver="funcPopup(event,'set_page_manual_link')">set_page_manual_link</a>( 'comment-mass-deletion' );
<a name="l711"><span class="linenum"> 711</span></a>          break;
<a name="l712"><span class="linenum"> 712</span></a>      default:
<a name="l713"><span class="linenum"> 713</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('set_page_manual_link')" href="../../_functions/set_page_manual_link.html" onMouseOver="funcPopup(event,'set_page_manual_link')">set_page_manual_link</a>( 'comments-tab' );
<a name="l714"><span class="linenum"> 714</span></a>          break;
<a name="l715"><span class="linenum"> 715</span></a>  }
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">// Display &lt;html&gt;&lt;head&gt;...&lt;/head&gt; section! (Note: should be done early if actions do not redirect)</span>
<a name="l718"><span class="linenum"> 718</span></a>  <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_html_head')" href="../../_functions/disp_html_head.html" onMouseOver="funcPopup(event,'disp_html_head')">disp_html_head</a>();
<a name="l719"><span class="linenum"> 719</span></a>  
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">// Display title, menu, messages, etc. (Note: messages MUST be displayed AFTER the actions)</span>
<a name="l721"><span class="linenum"> 721</span></a>  <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_body_top')" href="../../_functions/disp_body_top.html" onMouseOver="funcPopup(event,'disp_body_top')">disp_body_top</a>();
<a name="l722"><span class="linenum"> 722</span></a>  
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">/**</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment"> * Display payload:</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment"> */</span>
<a name="l726"><span class="linenum"> 726</span></a>  switch( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> )
<a name="l727"><span class="linenum"> 727</span></a>  {
<a name="l728"><span class="linenum"> 728</span></a>      case 'nil':
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">        // Do nothing</span>
<a name="l730"><span class="linenum"> 730</span></a>          break;
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>      case 'edit':
<a name="l734"><span class="linenum"> 734</span></a>      case 'elevate':
<a name="l735"><span class="linenum"> 735</span></a>      case 'update_publish':
<a name="l736"><span class="linenum"> 736</span></a>      case 'update': // on error
<a name="l737"><span class="linenum"> 737</span></a>      case 'update_edit': // on error
<a name="l738"><span class="linenum"> 738</span></a>      case 'switch_view':
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">        // Begin payload block:</span>
<a name="l740"><span class="linenum"> 740</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_payload_begin')" href="../../_functions/disp_payload_begin.html" onMouseOver="funcPopup(event,'disp_payload_begin')">disp_payload_begin</a>();
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">        // Display VIEW:</span>
<a name="l743"><span class="linenum"> 743</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_view')" href="../../_functions/disp_view.html" onMouseOver="funcPopup(event,'disp_view')">disp_view</a>( 'comments/views/_comment.form.php' );
<a name="l744"><span class="linenum"> 744</span></a>  
<a name="l745"><span class="linenum"> 745</span></a>  
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">        // End payload block:</span>
<a name="l747"><span class="linenum"> 747</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_payload_end')" href="../../_functions/disp_payload_end.html" onMouseOver="funcPopup(event,'disp_payload_end')">disp_payload_end</a>();
<a name="l748"><span class="linenum"> 748</span></a>          break;
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>      case 'emptytrash':
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">        // Begin payload block:</span>
<a name="l752"><span class="linenum"> 752</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_payload_begin')" href="../../_functions/disp_payload_begin.html" onMouseOver="funcPopup(event,'disp_payload_begin')">disp_payload_begin</a>();
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">        // Display VIEW:</span>
<a name="l755"><span class="linenum"> 755</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_view')" href="../../_functions/disp_view.html" onMouseOver="funcPopup(event,'disp_view')">disp_view</a>( 'comments/views/_trash_comments.view.php' );
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">        // End payload block:</span>
<a name="l758"><span class="linenum"> 758</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_payload_end')" href="../../_functions/disp_payload_end.html" onMouseOver="funcPopup(event,'disp_payload_end')">disp_payload_end</a>();
<a name="l759"><span class="linenum"> 759</span></a>          break;
<a name="l760"><span class="linenum"> 760</span></a>  
<a name="l761"><span class="linenum"> 761</span></a>      case 'list':
<a name="l762"><span class="linenum"> 762</span></a>      default:
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">        // Begin payload block:</span>
<a name="l764"><span class="linenum"> 764</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_payload_begin')" href="../../_functions/disp_payload_begin.html" onMouseOver="funcPopup(event,'disp_payload_begin')">disp_payload_begin</a>();
<a name="l765"><span class="linenum"> 765</span></a>  
<a name="l766"><span class="linenum"> 766</span></a>          <a class="var it3513" onMouseOver="hilite(3513)" onMouseOut="lolite()" onClick="logVariable('table_browse_template')" href="../../_variables/table_browse_template.html">$table_browse_template</a> = <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'table_browse' );
<a name="l767"><span class="linenum"> 767</span></a>          echo <a class="var it3513" onMouseOver="hilite(3513)" onMouseOut="lolite()" onClick="logVariable('table_browse_template')" href="../../_variables/table_browse_template.html">$table_browse_template</a>['table_start'];
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>          echo <a class="var it3513" onMouseOver="hilite(3513)" onMouseOut="lolite()" onClick="logVariable('table_browse_template')" href="../../_variables/table_browse_template.html">$table_browse_template</a>['left_col_start'];
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>          if( ! empty( <a class="var it4549" onMouseOver="hilite(4549)" onMouseOut="lolite()" onClick="logVariable('process_action')" href="../../_variables/process_action.html">$process_action</a> ) &amp;&amp; <a class="var it4549" onMouseOver="hilite(4549)" onMouseOut="lolite()" onClick="logVariable('process_action')" href="../../_variables/process_action.html">$process_action</a> == 'mass_delete' &amp;&amp; !empty( <a class="var it4546" onMouseOver="hilite(4546)" onMouseOut="lolite()" onClick="logVariable('mass_type')" href="../../_variables/mass_type.html">$mass_type</a> ) )
<a name="l772"><span class="linenum"> 772</span></a>          { // Mass deleting of the comments
<a name="l773"><span class="linenum"> 773</span></a>              <a class="function" onClick="logFunction('comment_mass_delete_process')" href="../../_functions/comment_mass_delete_process.html" onMouseOver="funcPopup(event,'comment_mass_delete_process')">comment_mass_delete_process</a>( <a class="var it4546" onMouseOver="hilite(4546)" onMouseOut="lolite()" onClick="logVariable('mass_type')" href="../../_variables/mass_type.html">$mass_type</a>, <a class="var it4547" onMouseOver="hilite(4547)" onMouseOut="lolite()" onClick="logVariable('deletable_comments_query')" href="../../_variables/deletable_comments_query.html">$deletable_comments_query</a> );
<a name="l774"><span class="linenum"> 774</span></a>              <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>();
<a name="l775"><span class="linenum"> 775</span></a>          }
<a name="l776"><span class="linenum"> 776</span></a>  
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">        // Display VIEW:</span>
<a name="l778"><span class="linenum"> 778</span></a>          if( <a class="var it1212" onMouseOver="hilite(1212)" onMouseOut="lolite()" onClick="logVariable('tab3')" href="../../_variables/tab3.html">$tab3</a> == 'fullview' )
<a name="l779"><span class="linenum"> 779</span></a>          {
<a name="l780"><span class="linenum"> 780</span></a>              <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_view')" href="../../_functions/disp_view.html" onMouseOver="funcPopup(event,'disp_view')">disp_view</a>( 'comments/views/_browse_comments.view.php' );
<a name="l781"><span class="linenum"> 781</span></a>          }
<a name="l782"><span class="linenum"> 782</span></a>          else
<a name="l783"><span class="linenum"> 783</span></a>          {
<a name="l784"><span class="linenum"> 784</span></a>              <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_view')" href="../../_functions/disp_view.html" onMouseOver="funcPopup(event,'disp_view')">disp_view</a>( 'comments/views/_comment_list_table.view.php' );
<a name="l785"><span class="linenum"> 785</span></a>          }
<a name="l786"><span class="linenum"> 786</span></a>          echo <a class="var it3513" onMouseOver="hilite(3513)" onMouseOut="lolite()" onClick="logVariable('table_browse_template')" href="../../_variables/table_browse_template.html">$table_browse_template</a>['left_col_end'];
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>          echo <a class="var it3513" onMouseOver="hilite(3513)" onMouseOut="lolite()" onClick="logVariable('table_browse_template')" href="../../_variables/table_browse_template.html">$table_browse_template</a>['right_col_start'];
<a name="l789"><span class="linenum"> 789</span></a>  <span class="comment">            // Display VIEW:</span>
<a name="l790"><span class="linenum"> 790</span></a>              <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_view')" href="../../_functions/disp_view.html" onMouseOver="funcPopup(event,'disp_view')">disp_view</a>( 'comments/views/_comments_sidebar.view.php' );
<a name="l791"><span class="linenum"> 791</span></a>          echo <a class="var it3513" onMouseOver="hilite(3513)" onMouseOut="lolite()" onClick="logVariable('table_browse_template')" href="../../_variables/table_browse_template.html">$table_browse_template</a>['right_col_end'];
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>          echo <a class="var it3513" onMouseOver="hilite(3513)" onMouseOut="lolite()" onClick="logVariable('table_browse_template')" href="../../_variables/table_browse_template.html">$table_browse_template</a>['table_end'];
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">        // End payload block:</span>
<a name="l796"><span class="linenum"> 796</span></a>          <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_payload_end')" href="../../_functions/disp_payload_end.html" onMouseOver="funcPopup(event,'disp_payload_end')">disp_payload_end</a>();
<a name="l797"><span class="linenum"> 797</span></a>          break;
<a name="l798"><span class="linenum"> 798</span></a>  }
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">// Display body bottom, debug info and close &lt;/html&gt;:</span>
<a name="l801"><span class="linenum"> 801</span></a>  <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('disp_global_footer')" href="../../_functions/disp_global_footer.html" onMouseOver="funcPopup(event,'disp_global_footer')">disp_global_footer</a>();
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'handle_notifications': ['handle_notifications', 'Handle comment email notifications ', [['inc/comments/model','_comment.class.php',3287]], 8],
'param_check_email': ['param_check_email', '', [['inc/_core','_param.funcs.php',720]], 10],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['inc/_core','_url.funcs.php',525]], 256],
'set_renderers': ['set_renderers', 'Set the renderers of the Item. ', [['inc/items/model','_item.class.php',4975],['inc/messaging/model','_message.class.php',723],['inc/comments/model','_comment.class.php',2947]], 12],
'load_from_request': ['load_from_request', 'Init filter params from Request params ', [['inc/items/model','_itemlistlight.class.php',324],['inc/items/model','_item.class.php',570],['inc/widgets/widgets','_coll_tag_cloud.widget.php',37],['inc/tools/model','_emailaddress.class.php',90],['inc/email_campaigns/model','_emailcampaign.class.php',186],['inc/maintenance/model','_backup.class.php',159],['inc/items/model','_itemstatus.class.php',63],['inc/sessions/model','_domain.class.php',54],['inc/regional/model','_country.class.php',70],['inc/users/model','_user.class.php',341],['inc/skins/model','_skin.class.php',158],['inc/comments/model','_commentlist.class.php',253],['inc/messaging/model','_message.class.php',124],['inc/users/model','_userlist.class.php',260],['inc/messaging/model','_thread.class.php',186],['inc/items/model','_itemtype.class.php',148],['inc/regional/model','_subregion.class.php',78],['inc/files/model','_filetype.class.php',61],['inc/collections/model','_blog.class.php',375],['inc/cron/model','_cronjob.class.php',107],['inc/users/model','_userfield.class.php',172],['inc/regional/model','_city.class.php',68],['inc/slugs/model','_slug.class.php',94],['inc/users/model','_group.class.php',122],['inc/users/model','_invitation.class.php',69],['inc/regional/model','_currency.class.php',62],['inc/widgets/model','_widget.class.php',138],['inc/regional/model','_region.class.php',66],['inc/chapters/model','_chapter.class.php',286],['inc/antispam/model','_iprange.class.php',86],['inc/sessions/model','_goalcat.class.php',59],['inc/items/model','_itemtag.class.php',75],['inc/sessions/model','_goal.class.php',112],['inc/users/model','_userfieldgroup.class.php',64],['inc/users/model','_organization.class.php',67]], 82],
'trigger_event': ['trigger_event', 'Call all plugins for a given event. ', [['inc/plugins/model','_plugins.class.php',817]], 130],
'set_default_filters': ['set_default_filters', 'Set default filter values we always want to use if not individually specified otherwise: ', [['inc/_core/model/dataobjects','_dataobjectlist2.class.php',120]], 15],
'param_check_url': ['param_check_url', 'Check that a given param is a valid URL ', [['inc/_core','_param.funcs.php',804]], 13],
'set_path': ['set_path', 'Set the full selected path. ', [['skins_adm','_adminUI_general.class.php',1377]], 88],
'get_from': ['get_from', 'Get FROM clause if there is something inside ', [['inc/_core/model/db','_sql.class.php',98]], 17],
'disp_html_head': ['disp_html_head', 'Display doctype + <head>...</head> section ', [['skins_adm','_adminUI_general.class.php',493]], 60],
'dbinsert': ['dbinsert', 'Insert object into DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5108],['inc/_core/model/dataobjects','_dataobject.class.php',470],['inc/users/model','_user.class.php',3187],['inc/skins/model','_skin.class.php',438],['inc/items/model','_itemtype.class.php',405],['inc/files/model','_filetype.class.php',213],['inc/tools/model','_syslog.class.php',58],['inc/collections/model','_blog.class.php',2272],['inc/comments/model','_comment.class.php',3815],['inc/users/model','_group.class.php',459],['inc/widgets/model','_widget.class.php',829],['inc/chapters/model','_chapter.class.php',532],['inc/files/model','_file.class.php',1784]], 99],
'disp_global_footer': ['disp_global_footer', 'Display body bottom, debug info and close </html> ', [['skins_adm/bootstrap','_adminUI.class.php',185],['skins_adm','_adminUI_general.class.php',582]], 61],
'param_action': ['param_action', 'Get the action from params. ', [['inc/_core','_param.funcs.php',458]], 63],
'set_creator_by_login': ['set_creator_by_login', 'Set creator user ', [['inc/items/model','_item.class.php',413]], 2],
'get_content': ['get_content', 'Get a content of the uploaded file ', [['htsrv','quick_upload.php',66],['htsrv','quick_upload.php',163],['inc/messaging/model','_message.class.php',843],['inc/comments/model','_comment.class.php',2602]], 8],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'get_renderers': ['get_renderers', 'Get the list of renderers for this Item. ', [['inc/items/model','_item.class.php',6271],['inc/messaging/model','_message.class.php',713],['inc/comments/model','_comment.class.php',2937]], 8],
'set_from_request': ['set_from_request', 'Set a parameter from a Request form value. ', [['inc/_core/model/dataobjects','_dataobject.class.php',982]], 128],
'get_where': ['get_where', 'Get WHERE clause if there is something inside ', [['inc/_core/model/db','_sql.class.php',112]], 27],
'antispam_block_request': ['antispam_block_request', 'Block request by IP address, Domain of current user or block because of a Plugin Bock by Plugin: e.g. GeoIP plugin can block the request if it comes from a blocked country ', [['inc/antispam/model','_antispam.funcs.php',488]], 25],
'query_init': ['query_init', 'Generate search query based on set filters and obtain count of results ', [['inc/items/model','_itemlistlight.class.php',535],['inc/comments/model','_commentlist.class.php',362],['inc/users/model','_userlist.class.php',428]], 8],
'set_max_execution_time': ['set_max_execution_time', 'Set max execution time ', [['inc/_core','_misc.funcs.php',5931]], 20],
'param_check_html': ['param_check_html', 'Checks for sanitized code. ', [['inc/_core','_param.funcs.php',2080]], 12],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['inc/_core','_param.funcs.php',1678],['inc/_core/model/dataobjects','_dataobject.class.php',890]], 127],
'set_item': ['set_item', 'Set Item this comment relates to ', [['inc/comments/model','_comment.class.php',437]], 5],
'param_time': ['param_time', 'Sets a time parameter with the value from the request of the var argument or of the concat of the var argument_h: var argument_mn: var argument_s , except if param is already set! ', [['inc/_core','_param.funcs.php',1139]], 9],
'init_datepicker_js': ['init_datepicker_js', 'Registers headlines for initialization of datepicker inputs ', [['inc/_core','_template.funcs.php',1458]], 10],
'comment_mass_delete_process': ['comment_mass_delete_process', 'Delete the comments ', [['inc/comments/model','_comment.funcs.php',917]], 1],
'get_author_name': ['get_author_name', 'Get the comment author\'s name. ', [['inc/comments/model','_comment.class.php',728]], 13],
'assert_received_crumb': ['assert_received_crumb', 'Assert that we received a valid crumb for the object we want to act on. ', [['inc/sessions/model','_session.class.php',613]], 286],
'set_vote': ['set_vote', 'Set the vote, as a number. ', [['inc/comments/model','_comment.class.php',472]], 3],
'init_autocomplete_usernames_js': ['init_autocomplete_usernames_js', 'Registers headlines for initialization of functions to autocomplete usernames in textarea ', [['inc/_core','_template.funcs.php',3122]], 5],
'set_coll_list_params': ['set_coll_list_params', 'Set params for blog list. ', [['skins_adm','_adminUI_general.class.php',715]], 21],
'dbdelete': ['dbdelete', 'Trigger event AfterItemDelete after calling parent method. ', [['inc/items/model','_item.class.php',5506],['inc/_core/model/dataobjects','_dataobject.class.php',591],['inc/users/model','_user.class.php',3376],['inc/messaging/model','_message.class.php',582],['inc/messaging/model','_thread.class.php',444],['inc/items/model','_itemtype.class.php',451],['inc/files/model','_filetype.class.php',271],['inc/collections/model','_blog.class.php',2664],['inc/comments/model','_comment.class.php',3872],['inc/users/model','_group.class.php',497]], 62],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'require_js': ['require_js', 'Memorize that a specific javascript file will be required by the current page. All requested files will be included in the page head only once (when headlines is called) ', [['inc/_core','_template.funcs.php',967]], 173],
'get_default_cat_id': ['get_default_cat_id', 'Get default category for current blog ', [['inc/collections/model','_blog.class.php',1586]], 20],
'autoselect_blog': ['autoselect_blog', 'Check permissions on a given blog (by ID) and autoselect an appropriate blog if necessary. ', [['inc/collections/model','_blog.funcs.php',210]], 12],
'form_date': ['form_date', '', [['inc/_core','_misc.funcs.php',4611]], 32],
'get_setting': ['get_setting', 'Get a setting. ', [['inc/items/model','_item.class.php',6656],['inc/skins/model','_skin.class.php',661],['inc/collections/model','_blog.class.php',2109]], 728],
'attach_browse_tabs': ['attach_browse_tabs', 'Used by the items & the comments controllers ', [['inc/items/model','_item.funcs.php',1412]], 4],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'get_param': ['get_param', 'Get the value of a param. ', [['inc/_core','_param.funcs.php',1694],['inc/widgets/model','_widget.class.php',343]], 340],
'handle_qm_secret': ['handle_qm_secret', 'Handle quick moderation secret param: checks if comment secret should expire after first comment moderation, and delete the secret if required This should be called after every kind of commment moderation ', [['inc/comments/model','_comment.class.php',3684]], 7],
'breadcrumbpath_init': ['breadcrumbpath_init', 'Note: These are not real breadcrumbs. It\'s just "so to speak" for a hierarchical path. ', [['skins_adm','_adminUI_general.class.php',174]], 63],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'db_delete_where': ['db_delete_where', 'Delete the given class objects from the database which corresponds to the given condition or to the given ids array This function must be overriden on those classes where the db delete requires some updates on other table content or some files/folders delete. Note: the delete cascade arrays are handled! Delete cascades are handled recursively only if the cascade arrays from the reffering class contains the class and class_path params ( e.g. see User class )! ', [['inc/_core/model/dataobjects','_dataobject.class.php',175],['inc/users/model','_user.class.php',3308],['inc/messaging/model','_message.class.php',503],['inc/sessions/model','_session.class.php',281],['inc/comments/model','_comment.class.php',290]], 11],
'has_errors': ['has_errors', 'Has error message in current object ', [['inc/_core/model','_messages.class.php',314]], 54],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5287],['inc/_core/model/dataobjects','_dataobject.class.php',386],['inc/users/model','_user.class.php',3249],['inc/skins/model','_skin.class.php',416],['inc/settings/model','_abstractsettings.class.php',575],['inc/items/model','_itemtype.class.php',433],['inc/files/model','_filetype.class.php',242],['inc/collections/model','_blog.class.php',2630],['inc/comments/model','_comment.class.php',3747],['inc/cron/model','_cronjob.class.php',188],['inc/slugs/model','_slug.class.php',265],['inc/users/model','_group.class.php',478],['inc/widgets/model','_widget.class.php',861],['inc/users/model','_groupsettings.class.php',159],['inc/chapters/model','_chapter.class.php',564],['inc/files/model','_file.class.php',1825]], 289],
'require_css': ['require_css', 'Memorize that a specific css that file will be required by the current page. All requested files will be included in the page head only once (when headlines is called) ', [['inc/_core','_template.funcs.php',1033]], 92],
'move_child_comments_to_item': ['move_child_comments_to_item', 'Move all child comments to new post by parent comment ID ', [['inc/comments/model','_comment.funcs.php',995]], 2],
'unfilter_contents': ['unfilter_contents', 'UnFilter (post) contents by calling the relevant filter plugins. ', [['inc/plugins/model','_plugins_admin.class.php',1562]], 10],
'validate_renderer_list': ['validate_renderer_list', '', [['inc/plugins/model','_plugins.class.php',1909]], 10],
'append_path_level': ['append_path_level', 'Append a selected menu entry to the current path of selected entries. ', [['skins_adm','_adminUI_general.class.php',1357]], 8],
'get_template': ['get_template', 'Get a template by name and depth. ', [['skins_adm/chicago','_adminUI.class.php',163],['skins/bootstrap_gallery_legacy','_skin.class.php',397],['skins_adm/bootstrap','_adminUI.class.php',240],['inc/skins/model','_skin.class.php',1180],['inc/_core/ui/forms','_form.class.php',185],['skins/bootstrap_main_skin','_skin.class.php',416],['skins/pureforums','_skin.class.php',322],['skins/bootstrap_blog_skin','_skin.class.php',233],['inc/plugins','_plugin.class.php',378],['skins/bootstrap_gallery_skin','_skin.class.php',397],['skins_adm','_adminUI_general.class.php',859],['skins/forums','_skin.class.php',346],['skins/bootstrap_forums_skin','_skin.class.php',410],['inc/_core/ui','_menu.class.php',430],['skins/bootstrap_manual_skin','_skin.class.php',254]], 211],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['inc/_core/model/db','_db.class.php',1032]], 117],
'param_date': ['param_date', 'Sets a date parameter by converting locale date (if valid) to ISO date. ', [['inc/_core','_param.funcs.php',928]], 20],
'load_blog': ['load_blog', 'Set Blog ', [['inc/links/model','_linkcomment.class.php',131],['inc/links/model','_linkitem.class.php',187],['inc/chapters/model','_chapter.class.php',474],['inc/links/model','_linkuser.class.php',139],['inc/items/model','_itemlight.class.php',1413]], 69],
'get_blog_id': ['get_blog_id', '', [['inc/items/model','_itemlight.class.php',789]], 38],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'regenerate_url': ['regenerate_url', 'Regenerate current URL from parameters This may clean it up But it is also useful when generating static pages: you cannot rely on $_REQUEST[] ', [['inc/_core','_param.funcs.php',1748]], 503],
'get_renderers_validated': ['get_renderers_validated', 'Get the list of validated renderers for this Item. This includes stealth plugins etc. ', [['inc/items/model','_item.class.php',6281],['inc/messaging/model','_message.class.php',698],['inc/comments/model','_comment.class.php',2922]], 30],
'get_visibility_statuses': ['get_visibility_statuses', 'Get available post statuses ', [['inc/collections/model','_blog.funcs.php',953]], 87],
'get_item': ['get_item', 'Getting next item in archive list ', [['plugins','_archives.plugin.php',594]], 102],
'set_page_manual_link': ['set_page_manual_link', 'Adds a manual link to the entire page right after the breadcrumb ', [['skins_adm','_adminUI_general.class.php',243]], 149],
'header_redirect': ['header_redirect', 'Sends HTTP header to redirect to the previous location (which can be given as function parameter, GET parameter (redirect_to), is taken from {@link Hit::$referer} or {@link $baseurl}). ', [['inc/_core','_template.funcs.php',91]], 427],
'disp_view': ['disp_view', 'Display a view ', [['skins_adm','_adminUI_general.class.php',686]], 209],
'disp_payload_end': ['disp_payload_end', 'Display the end of a payload block ', [['skins_adm/bootstrap','_adminUI.class.php',214],['skins_adm','_adminUI_general.class.php',656]], 91],
'require_js_helper': ['require_js_helper', 'Memorize that a specific js helper will be required by the current page. This allows to require JS + SS + do init. ', [['inc/_core','_template.funcs.php',1116]], 9],
'htmlspecialchars_decode': ['htmlspecialchars_decode', 'Provide htmlspecialchars_decode for older versions of PHP (< 5.1.0) ', [['inc/_core','_misc.funcs.php',6424],['rsc/js/multiupload','fileuploader.js',74]], 14],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'breadcrumbpath_add': ['breadcrumbpath_add', 'Note: These are not real breadcrumbs. It\'s just "so to speak" for a hierarchical path. ', [['skins_adm','_adminUI_general.class.php',213]], 253],
'is_meta': ['is_meta', 'Check if this comment is meta ', [['inc/comments/model','_comment.class.php',4108]], 31],
'set_working_blog': ['set_working_blog', 'Set working blog to a new value and memorize it in user settings if needed. ', [['inc/collections/model','_blog.funcs.php',339]], 21],
'disp_body_top': ['disp_body_top', 'Dsiplay the top of the HTML <body>... ', [['skins_adm/bootstrap','_adminUI.class.php',161],['skins_adm','_adminUI_general.class.php',516]], 61],
'param_check_not_empty': ['param_check_not_empty', '', [['inc/_core','_param.funcs.php',564]], 53],
'disp_payload_begin': ['disp_payload_begin', 'Display the start of a payload block ', [['skins_adm/bootstrap','_adminUI.class.php',200],['skins_adm','_adminUI_general.class.php',605]], 91],
'str_replace': ['str_replace', '', [], 531],
'in_array': ['in_array', '', [], 417],
'defined': ['defined', '', [], 962],
'reset': ['reset', '', [], 63]};
CLASS_DATA={
'comment': ['comment', 'Comment Class ', [['inc/comments/model','_comment.class.php',19]], 122],
'item': ['item', 'Item Class ', [['inc/items/model','_item.class.php',25]], 97],
'commentlist2': ['commentlist2', '', [['inc/comments/model','_commentlist.class.php',28]], 23],
'blog': ['blog', 'Blog ', [['inc/collections/model','_blog.class.php',20]], 76]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
