<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/comments/model/_comment.class.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='inc/comments/model';
filename='_comment.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/comments/model/</a> -> <a href="_comment.class.php.html">_comment.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_comment.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_comment.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements the Comment class.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the b2evolution/evocms project - {@link http://b2evolution.net/}.</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}.</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2005 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @package evocore</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '_core/model/dataobjects/_dataobject.class.php', 'DataObject' );
<a name="l18"><span class="linenum">  18</span></a>  
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment">/**</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * Comment Class</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package evocore</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">Comment</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('DataObject')" href="../../../_classes/dataobject.html" onMouseOver="classPopup(event,'dataobject')">DataObject</a>
<a name="l25"><span class="linenum">  25</span></a>  {
<a name="l26"><span class="linenum">  26</span></a>      <span class="comment">/**</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">     * The item (parent) of this Comment (lazy-filled).</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">     * @see Comment::get_Item()</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">     * @see Comment::set_Item()</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">     * @access protected</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">     * @var Item</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">     */</span>
<a name="l33"><span class="linenum">  33</span></a>      var <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../_variables/Item.html">$Item</a>;
<a name="l34"><span class="linenum">  34</span></a>      <span class="comment">/**</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">     * The ID of the comment's Item.</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * @var integer</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     */</span>
<a name="l38"><span class="linenum">  38</span></a>      var <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../_variables/item_ID.html">$item_ID</a>;
<a name="l39"><span class="linenum">  39</span></a>      <span class="comment">/**</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     * Comment previous item ID. It will be set only if the comment item ID was changed.</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * @var string</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     */</span>
<a name="l43"><span class="linenum">  43</span></a>      var <a class="var it6968" onMouseOver="hilite(6968)" onMouseOut="lolite()" onClick="logVariable('previous_item_ID')" href="../../../_variables/previous_item_ID.html">$previous_item_ID</a>;
<a name="l44"><span class="linenum">  44</span></a>      <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     * The comment's user, this is NULL for (anonymous) visitors (lazy-filled).</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     * @see Comment::get_author_User()</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     * @see Comment::set_author_User()</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * @access protected</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     * @var User</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     */</span>
<a name="l51"><span class="linenum">  51</span></a>      var <a class="var it6448" onMouseOver="hilite(6448)" onMouseOut="lolite()" onClick="logVariable('author_User')" href="../../../_variables/author_User.html">$author_User</a>;
<a name="l52"><span class="linenum">  52</span></a>      <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * The ID of the author's user. NULL for anonymous visitors.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * @var integer</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     */</span>
<a name="l56"><span class="linenum">  56</span></a>      var <a class="var it1138" onMouseOver="hilite(1138)" onMouseOut="lolite()" onClick="logVariable('author_user_ID')" href="../../../_variables/author_user_ID.html">$author_user_ID</a>;
<a name="l57"><span class="linenum">  57</span></a>      <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * Comment type: 'comment', 'linkback', 'trackback' or 'pingback'</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * @var string</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     */</span>
<a name="l61"><span class="linenum">  61</span></a>      var <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>;
<a name="l62"><span class="linenum">  62</span></a>      <span class="comment">/**</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * Comment visibility status: 'published', 'deprecated', 'redirected', 'protected', 'private' or 'draft'</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     * @var string</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     */</span>
<a name="l66"><span class="linenum">  66</span></a>      var <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>;
<a name="l67"><span class="linenum">  67</span></a>      <span class="comment">/**</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * Comment previous visibility status. It will be set only if the comment status was changed.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     * @var string</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     */</span>
<a name="l71"><span class="linenum">  71</span></a>      var <a class="var it6969" onMouseOver="hilite(6969)" onMouseOut="lolite()" onClick="logVariable('previous_status')" href="../../../_variables/previous_status.html">$previous_status</a>;
<a name="l72"><span class="linenum">  72</span></a>      <span class="comment">/**</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * Name of the (anonymous) visitor (if any).</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * @var string</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     */</span>
<a name="l76"><span class="linenum">  76</span></a>      var <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a>;
<a name="l77"><span class="linenum">  77</span></a>      <span class="comment">/**</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     * Email address of the (anonymous) visitor (if any).</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     * @var string</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     */</span>
<a name="l81"><span class="linenum">  81</span></a>      var <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('author_email')" href="../../../_variables/author_email.html">$author_email</a>;
<a name="l82"><span class="linenum">  82</span></a>      <span class="comment">/**</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     * URL/Homepage of the (anonymous) visitor (if any).</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     * @var string</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     */</span>
<a name="l86"><span class="linenum">  86</span></a>      var <a class="var it559" onMouseOver="hilite(559)" onMouseOut="lolite()" onClick="logVariable('author_url')" href="../../../_variables/author_url.html">$author_url</a>;
<a name="l87"><span class="linenum">  87</span></a>      <span class="comment">/**</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     * IP address of the comment's author (while posting).</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     * @var string</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">     */</span>
<a name="l91"><span class="linenum">  91</span></a>      var <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('author_IP')" href="../../../_variables/author_IP.html">$author_IP</a>;
<a name="l92"><span class="linenum">  92</span></a>      <span class="comment">/**</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     * ID of Country that is detected by IP address</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">     * @var integer</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     */</span>
<a name="l96"><span class="linenum">  96</span></a>      var <a class="var it6970" onMouseOver="hilite(6970)" onMouseOut="lolite()" onClick="logVariable('IP_ctry_ID')" href="../../../_variables/IP_ctry_ID.html">$IP_ctry_ID</a>;
<a name="l97"><span class="linenum">  97</span></a>      <span class="comment">/**</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     * Date of the comment (MySQL DATETIME - use e.g. {@link mysql2timestamp()}); local time ({@link $localtimenow})</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">     * @var string</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">     */</span>
<a name="l101"><span class="linenum"> 101</span></a>      var <a class="var it183" onMouseOver="hilite(183)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>;
<a name="l102"><span class="linenum"> 102</span></a>      <span class="comment">/**</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * @var string</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     */</span>
<a name="l105"><span class="linenum"> 105</span></a>      var <a class="var it327" onMouseOver="hilite(327)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../_variables/content.html">$content</a>;
<a name="l106"><span class="linenum"> 106</span></a>      <span class="comment">/**</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * @var string</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     */</span>
<a name="l109"><span class="linenum"> 109</span></a>      var <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a>;
<a name="l110"><span class="linenum"> 110</span></a>      <span class="comment">/**</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     * Star rating from 0 to 5</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     * @var integer</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     */</span>
<a name="l114"><span class="linenum"> 114</span></a>      var <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('rating')" href="../../../_variables/rating.html">$rating</a>;
<a name="l115"><span class="linenum"> 115</span></a>      <span class="comment">/**</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * @var integer</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     */</span>
<a name="l118"><span class="linenum"> 118</span></a>      var <a class="var it381" onMouseOver="hilite(381)" onMouseOut="lolite()" onClick="logVariable('featured')" href="../../../_variables/featured.html">$featured</a>;
<a name="l119"><span class="linenum"> 119</span></a>      <span class="comment">/**</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     * Karma</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * @var integer</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     */</span>
<a name="l123"><span class="linenum"> 123</span></a>      var <a class="var it6971" onMouseOver="hilite(6971)" onMouseOut="lolite()" onClick="logVariable('karma')" href="../../../_variables/karma.html">$karma</a>;
<a name="l124"><span class="linenum"> 124</span></a>      <span class="comment">/**</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * Spam karma of the comment (0-100), 0 being &quot;probably no spam at all&quot;</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     * @var integer</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     */</span>
<a name="l128"><span class="linenum"> 128</span></a>      var <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('spam_karma')" href="../../../_variables/spam_karma.html">$spam_karma</a>;
<a name="l129"><span class="linenum"> 129</span></a>      <span class="comment">/**</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     * Does an anonymous commentator allow to send messages through a message form?</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     * @var boolean</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">     */</span>
<a name="l133"><span class="linenum"> 133</span></a>      var <a class="var it2218" onMouseOver="hilite(2218)" onMouseOut="lolite()" onClick="logVariable('allow_msgform')" href="../../../_variables/allow_msgform.html">$allow_msgform</a>;
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>      var <a class="var it5439" onMouseOver="hilite(5439)" onMouseOut="lolite()" onClick="logVariable('nofollow')" href="../../../_variables/nofollow.html">$nofollow</a>;
<a name="l136"><span class="linenum"> 136</span></a>      <span class="comment">/**</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * @var string</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     */</span>
<a name="l139"><span class="linenum"> 139</span></a>      var <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('secret')" href="../../../_variables/secret.html">$secret</a>;
<a name="l140"><span class="linenum"> 140</span></a>      <span class="comment">/**</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     * Have post processing notifications been handled for this comment?</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     * @var string</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">     */</span>
<a name="l144"><span class="linenum"> 144</span></a>      var <a class="var it6973" onMouseOver="hilite(6973)" onMouseOut="lolite()" onClick="logVariable('notif_status')" href="../../../_variables/notif_status.html">$notif_status</a>;
<a name="l145"><span class="linenum"> 145</span></a>      <span class="comment">/**</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     * Which cron task is responsible for handling notifications for this comment?</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * @var integer</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     */</span>
<a name="l149"><span class="linenum"> 149</span></a>      var <a class="var it6974" onMouseOver="hilite(6974)" onMouseOut="lolite()" onClick="logVariable('notif_ctsk_ID')" href="../../../_variables/notif_ctsk_ID.html">$notif_ctsk_ID</a>;
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>      <span class="comment">/**</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     * Is this comment a reply to another comment ?</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     *</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * This can be used by plugins to display threaded comments.</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     *</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * @var integer</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     */</span>
<a name="l158"><span class="linenum"> 158</span></a>      var <a class="var it2307" onMouseOver="hilite(2307)" onMouseOut="lolite()" onClick="logVariable('in_reply_to_cmt_ID')" href="../../../_variables/in_reply_to_cmt_ID.html">$in_reply_to_cmt_ID</a>;
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>      <span class="comment">/**</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">     * Voting result of all votes in system helpfulness</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">     *</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * @var integer</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     */</span>
<a name="l165"><span class="linenum"> 165</span></a>      var <a class="var it6975" onMouseOver="hilite(6975)" onMouseOut="lolite()" onClick="logVariable('helpful_addvotes')" href="../../../_variables/helpful_addvotes.html">$helpful_addvotes</a>;
<a name="l166"><span class="linenum"> 166</span></a>      <span class="comment">/**</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * A count of all votes in system helpfulness</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     *</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * @var integer</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     */</span>
<a name="l171"><span class="linenum"> 171</span></a>      var <a class="var it6976" onMouseOver="hilite(6976)" onMouseOut="lolite()" onClick="logVariable('helpful_countvotes')" href="../../../_variables/helpful_countvotes.html">$helpful_countvotes</a>;
<a name="l172"><span class="linenum"> 172</span></a>      <span class="comment">/**</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     * Voting result of all votes in system spam detecting</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     *</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">     * @var integer</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">     */</span>
<a name="l177"><span class="linenum"> 177</span></a>      var <a class="var it6977" onMouseOver="hilite(6977)" onMouseOut="lolite()" onClick="logVariable('spam_addvotes')" href="../../../_variables/spam_addvotes.html">$spam_addvotes</a>;
<a name="l178"><span class="linenum"> 178</span></a>      <span class="comment">/**</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * A count of all votes in system spam detecting</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     *</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * @var integer</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     */</span>
<a name="l183"><span class="linenum"> 183</span></a>      var <a class="var it6978" onMouseOver="hilite(6978)" onMouseOut="lolite()" onClick="logVariable('spam_countvotes')" href="../../../_variables/spam_countvotes.html">$spam_countvotes</a>;
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>      <span class="comment">/**</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     * Date when comment was edited last time (timestamp)</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * @var integer</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     */</span>
<a name="l189"><span class="linenum"> 189</span></a>      var <a class="var it1446" onMouseOver="hilite(1446)" onMouseOut="lolite()" onClick="logVariable('last_touched_ts')" href="../../../_variables/last_touched_ts.html">$last_touched_ts</a>;
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>      <span class="comment">/**</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     * Constructor</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">     */</span>
<a name="l194"><span class="linenum"> 194</span></a>  	function <a class="function" onClick="logFunction('Comment')" href="../../../_functions/comment.html" onMouseOver="funcPopup(event,'comment')">Comment</a>( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a> = NULL )
<a name="l195"><span class="linenum"> 195</span></a>      {
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">        // Call parent constructor:</span>
<a name="l197"><span class="linenum"> 197</span></a>          parent::<a class="function" onClick="logFunction('DataObject')" href="../../../_functions/dataobject.html" onMouseOver="funcPopup(event,'dataobject')">DataObject</a>( 'T_comments', 'comment_', 'comment_ID' );
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>          if( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a> == NULL )
<a name="l200"><span class="linenum"> 200</span></a>          {
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">            // echo 'null comment';</span>
<a name="l202"><span class="linenum"> 202</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rating')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rating.html">rating</a> = NULL;
<a name="l203"><span class="linenum"> 203</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('featured')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/featured.html">featured</a> = 0;
<a name="l204"><span class="linenum"> 204</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('nofollow')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/nofollow.html">nofollow</a> = 1;
<a name="l205"><span class="linenum"> 205</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('notif_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/notif_status.html">notif_status</a> = 'noreq';
<a name="l206"><span class="linenum"> 206</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('in_reply_to_cmt_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/in_reply_to_cmt_ID.html">in_reply_to_cmt_ID</a> = 0;
<a name="l207"><span class="linenum"> 207</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_renderers')" href="../../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( array( 'default' ) );
<a name="l208"><span class="linenum"> 208</span></a>          }
<a name="l209"><span class="linenum"> 209</span></a>          else
<a name="l210"><span class="linenum"> 210</span></a>          {
<a name="l211"><span class="linenum"> 211</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_ID.html">comment_ID</a>;
<a name="l212"><span class="linenum"> 212</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_item_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_item_ID.html">comment_item_ID</a>;
<a name="l213"><span class="linenum"> 213</span></a>              if( ! empty( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_author_user_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_author_user_ID.html">comment_author_user_ID</a> ) )
<a name="l214"><span class="linenum"> 214</span></a>              {
<a name="l215"><span class="linenum"> 215</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_user_ID.html">author_user_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_author_user_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_author_user_ID.html">comment_author_user_ID</a>;
<a name="l216"><span class="linenum"> 216</span></a>              }
<a name="l217"><span class="linenum"> 217</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/type.html">type</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_type')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_type.html">comment_type</a>;
<a name="l218"><span class="linenum"> 218</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_status')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_status.html">comment_status</a>;
<a name="l219"><span class="linenum"> 219</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_author')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_author.html">comment_author</a>;
<a name="l220"><span class="linenum"> 220</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_email')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_email.html">author_email</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_author_email')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_author_email.html">comment_author_email</a>;
<a name="l221"><span class="linenum"> 221</span></a>              <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_author_url')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_author_url.html">comment_author_url</a> );
<a name="l222"><span class="linenum"> 222</span></a>              if( ! empty(<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>) &amp;&amp; ! <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '~^\w+://~', <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> ) )
<a name="l223"><span class="linenum"> 223</span></a>              { // URL given and does not start with a protocol:
<a name="l224"><span class="linenum"> 224</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = 'http://'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l225"><span class="linenum"> 225</span></a>              }
<a name="l226"><span class="linenum"> 226</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_url.html">author_url</a> = <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l227"><span class="linenum"> 227</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_IP')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_IP.html">author_IP</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_author_IP')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_author_IP.html">comment_author_IP</a>;
<a name="l228"><span class="linenum"> 228</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('IP_ctry_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/IP_ctry_ID.html">IP_ctry_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_IP_ctry_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_IP_ctry_ID.html">comment_IP_ctry_ID</a>;
<a name="l229"><span class="linenum"> 229</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/date.html">date</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_date')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_date.html">comment_date</a>;
<a name="l230"><span class="linenum"> 230</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('last_touched_ts')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/last_touched_ts.html">last_touched_ts</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_last_touched_ts')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_last_touched_ts.html">comment_last_touched_ts</a>;
<a name="l231"><span class="linenum"> 231</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content.html">content</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_content')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_content.html">comment_content</a>;
<a name="l232"><span class="linenum"> 232</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers.html">renderers</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_renderers')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_renderers.html">comment_renderers</a>;
<a name="l233"><span class="linenum"> 233</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rating')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rating.html">rating</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_rating')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_rating.html">comment_rating</a>;
<a name="l234"><span class="linenum"> 234</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('featured')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/featured.html">featured</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_featured')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_featured.html">comment_featured</a>;
<a name="l235"><span class="linenum"> 235</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('nofollow')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/nofollow.html">nofollow</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_nofollow')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_nofollow.html">comment_nofollow</a>;
<a name="l236"><span class="linenum"> 236</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('spam_karma')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/spam_karma.html">spam_karma</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_spam_karma')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_spam_karma.html">comment_spam_karma</a>;
<a name="l237"><span class="linenum"> 237</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allow_msgform')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/allow_msgform.html">allow_msgform</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_allow_msgform')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_allow_msgform.html">comment_allow_msgform</a>;
<a name="l238"><span class="linenum"> 238</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('secret')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/secret.html">secret</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_secret')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_secret.html">comment_secret</a>;
<a name="l239"><span class="linenum"> 239</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('notif_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/notif_status.html">notif_status</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_notif_status')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_notif_status.html">comment_notif_status</a>;
<a name="l240"><span class="linenum"> 240</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('notif_ctsk_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/notif_ctsk_ID.html">notif_ctsk_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_notif_ctsk_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_notif_ctsk_ID.html">comment_notif_ctsk_ID</a>;
<a name="l241"><span class="linenum"> 241</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('in_reply_to_cmt_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/in_reply_to_cmt_ID.html">in_reply_to_cmt_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_in_reply_to_cmt_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_in_reply_to_cmt_ID.html">comment_in_reply_to_cmt_ID</a>;
<a name="l242"><span class="linenum"> 242</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('helpful_addvotes')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/helpful_addvotes.html">helpful_addvotes</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_helpful_addvotes')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_helpful_addvotes.html">comment_helpful_addvotes</a>;
<a name="l243"><span class="linenum"> 243</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('helpful_countvotes')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/helpful_countvotes.html">helpful_countvotes</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_helpful_countvotes')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_helpful_countvotes.html">comment_helpful_countvotes</a>;
<a name="l244"><span class="linenum"> 244</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('spam_addvotes')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/spam_addvotes.html">spam_addvotes</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_spam_addvotes')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_spam_addvotes.html">comment_spam_addvotes</a>;
<a name="l245"><span class="linenum"> 245</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('spam_countvotes')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/spam_countvotes.html">spam_countvotes</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('comment_spam_countvotes')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/comment_spam_countvotes.html">comment_spam_countvotes</a>;
<a name="l246"><span class="linenum"> 246</span></a>          }
<a name="l247"><span class="linenum"> 247</span></a>      }
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>      <span class="comment">/**</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     * Get this class db table config params</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     *</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     * @return array</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     */</span>
<a name="l255"><span class="linenum"> 255</span></a>  	static function <a class="function" onClick="logFunction('get_class_db_config')" href="../../../_functions/get_class_db_config.html" onMouseOver="funcPopup(event,'get_class_db_config')">get_class_db_config</a>()
<a name="l256"><span class="linenum"> 256</span></a>      {
<a name="l257"><span class="linenum"> 257</span></a>          static <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('comment_db_config')" href="../../../_variables/comment_db_config.html">$comment_db_config</a>;
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>          if( !isset( <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('comment_db_config')" href="../../../_variables/comment_db_config.html">$comment_db_config</a> ) )
<a name="l260"><span class="linenum"> 260</span></a>          {
<a name="l261"><span class="linenum"> 261</span></a>              <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('comment_db_config')" href="../../../_variables/comment_db_config.html">$comment_db_config</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( parent::<a class="function" onClick="logFunction('get_class_db_config')" href="../../../_functions/get_class_db_config.html" onMouseOver="funcPopup(event,'get_class_db_config')">get_class_db_config</a>(),
<a name="l262"><span class="linenum"> 262</span></a>                  array(
<a name="l263"><span class="linenum"> 263</span></a>                      'dbtablename'        =&gt; 'T_comments',
<a name="l264"><span class="linenum"> 264</span></a>                      'dbprefix'           =&gt; 'comment_',
<a name="l265"><span class="linenum"> 265</span></a>                      'dbIDname'           =&gt; 'comment_ID',
<a name="l266"><span class="linenum"> 266</span></a>                  )
<a name="l267"><span class="linenum"> 267</span></a>              );
<a name="l268"><span class="linenum"> 268</span></a>          }
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>          return <a class="var it6996" onMouseOver="hilite(6996)" onMouseOut="lolite()" onClick="logVariable('comment_db_config')" href="../../../_variables/comment_db_config.html">$comment_db_config</a>;
<a name="l271"><span class="linenum"> 271</span></a>      }
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>      <span class="comment">/**</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * Get delete cascade settings</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     *</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">     * @return array</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     */</span>
<a name="l279"><span class="linenum"> 279</span></a>  	static function <a class="function" onClick="logFunction('get_delete_cascades')" href="../../../_functions/get_delete_cascades.html" onMouseOver="funcPopup(event,'get_delete_cascades')">get_delete_cascades</a>()
<a name="l280"><span class="linenum"> 280</span></a>      {
<a name="l281"><span class="linenum"> 281</span></a>          return array(
<a name="l282"><span class="linenum"> 282</span></a>                  array( 'table'=&gt;'T_links', 'fk'=&gt;'link_cmt_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d links to destination comments'),
<a name="l283"><span class="linenum"> 283</span></a>                          'class'=&gt;'Link', 'class_path'=&gt;'links/model/_link.class.php' ),
<a name="l284"><span class="linenum"> 284</span></a>                  array( 'table'=&gt;'T_comments__votes', 'fk'=&gt;'cmvt_cmt_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d votes on comment') ),
<a name="l285"><span class="linenum"> 285</span></a>                  array( 'table'=&gt;'T_comments__prerendering', 'fk'=&gt;'cmpr_cmt_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d prerendered content') ),
<a name="l286"><span class="linenum"> 286</span></a>              );
<a name="l287"><span class="linenum"> 287</span></a>      }
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>      <span class="comment">/**</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">     * Delete those comments from the database which corresponds to the given condition or to the given ids array</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     * Note: the delete cascade arrays are handled!</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">     *</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">     * @param string the name of this class</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">     *   Note: This is required until min phpversion will be 5.3. Since PHP 5.3 we can use static::function_name to achieve late static bindings</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">     * @param string where condition</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">     * @param array object ids</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     * @return mixed # of rows affected or false if error</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">     */</span>
<a name="l300"><span class="linenum"> 300</span></a>  	static function <a class="function" onClick="logFunction('db_delete_where')" href="../../../_functions/db_delete_where.html" onMouseOver="funcPopup(event,'db_delete_where')">db_delete_where</a>( <a class="var it2446" onMouseOver="hilite(2446)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../_variables/class_name.html">$class_name</a>, <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../_variables/sql_where.html">$sql_where</a>, <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../_variables/object_ids.html">$object_ids</a> = NULL, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = NULL )
<a name="l301"><span class="linenum"> 301</span></a>      {
<a name="l302"><span class="linenum"> 302</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> = ( isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['use_transaction'] ) ) ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['use_transaction'] : true;
<a name="l305"><span class="linenum"> 305</span></a>          if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l306"><span class="linenum"> 306</span></a>          {
<a name="l307"><span class="linenum"> 307</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l308"><span class="linenum"> 308</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['use_transaction'] = false;
<a name="l309"><span class="linenum"> 309</span></a>          }
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>          if( ! empty( <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../_variables/sql_where.html">$sql_where</a> ) )
<a name="l312"><span class="linenum"> 312</span></a>          {
<a name="l313"><span class="linenum"> 313</span></a>              <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../_variables/object_ids.html">$object_ids</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( 'SELECT comment_ID FROM T_comments WHERE '.<a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../_variables/sql_where.html">$sql_where</a> );
<a name="l314"><span class="linenum"> 314</span></a>          }
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>          if( ! <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../_variables/object_ids.html">$object_ids</a> )
<a name="l317"><span class="linenum"> 317</span></a>          { // There is no comment to delete
<a name="l318"><span class="linenum"> 318</span></a>              if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l319"><span class="linenum"> 319</span></a>              { // Commit transaction if it was started
<a name="l320"><span class="linenum"> 320</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l321"><span class="linenum"> 321</span></a>              }
<a name="l322"><span class="linenum"> 322</span></a>              return;
<a name="l323"><span class="linenum"> 323</span></a>          }
<a name="l324"><span class="linenum"> 324</span></a>  
<a name="l325"><span class="linenum"> 325</span></a>          <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('query_get_attached_file_ids')" href="../../../_variables/query_get_attached_file_ids.html">$query_get_attached_file_ids</a> = 'SELECT link_file_ID FROM T_links
<a name="l326"><span class="linenum"> 326</span></a>              WHERE link_cmt_ID IN ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../_variables/object_ids.html">$object_ids</a> ).' )';
<a name="l327"><span class="linenum"> 327</span></a>          <a class="var it6998" onMouseOver="hilite(6998)" onMouseOut="lolite()" onClick="logVariable('attached_file_ids')" href="../../../_variables/attached_file_ids.html">$attached_file_ids</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it6997" onMouseOver="hilite(6997)" onMouseOut="lolite()" onClick="logVariable('query_get_attached_file_ids')" href="../../../_variables/query_get_attached_file_ids.html">$query_get_attached_file_ids</a> );
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = parent::<a class="function" onClick="logFunction('db_delete_where')" href="../../../_functions/db_delete_where.html" onMouseOver="funcPopup(event,'db_delete_where')">db_delete_where</a>( <a class="var it2446" onMouseOver="hilite(2446)" onMouseOut="lolite()" onClick="logVariable('class_name')" href="../../../_variables/class_name.html">$class_name</a>, <a class="var it2447" onMouseOver="hilite(2447)" onMouseOut="lolite()" onClick="logVariable('sql_where')" href="../../../_variables/sql_where.html">$sql_where</a>, <a class="var it2448" onMouseOver="hilite(2448)" onMouseOut="lolite()" onClick="logVariable('object_ids')" href="../../../_variables/object_ids.html">$object_ids</a> );
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>          if( ( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> !== false ) &amp;&amp; ( ! empty( <a class="var it6998" onMouseOver="hilite(6998)" onMouseOut="lolite()" onClick="logVariable('attached_file_ids')" href="../../../_variables/attached_file_ids.html">$attached_file_ids</a> ) ) )
<a name="l332"><span class="linenum"> 332</span></a>          { // Delete orphan attachments and empty comment attachment folders
<a name="l333"><span class="linenum"> 333</span></a>              <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'files/model/_file.funcs.php' );
<a name="l334"><span class="linenum"> 334</span></a>              <a class="function" onClick="logFunction('remove_orphan_files')" href="../../../_functions/remove_orphan_files.html" onMouseOver="funcPopup(event,'remove_orphan_files')">remove_orphan_files</a>( <a class="var it6998" onMouseOver="hilite(6998)" onMouseOut="lolite()" onClick="logVariable('attached_file_ids')" href="../../../_variables/attached_file_ids.html">$attached_file_ids</a>, NULL, true );
<a name="l335"><span class="linenum"> 335</span></a>          }
<a name="l336"><span class="linenum"> 336</span></a>  
<a name="l337"><span class="linenum"> 337</span></a>          if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l338"><span class="linenum"> 338</span></a>          { // Commit or rollback the transaction
<a name="l339"><span class="linenum"> 339</span></a>              ( <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> !== false ) ? <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>() : <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l340"><span class="linenum"> 340</span></a>          }
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l343"><span class="linenum"> 343</span></a>      }
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>      <span class="comment">/**</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * Get the author User of the comment. This is NULL for anonymous visitors.</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     *</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     * @return User</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">     */</span>
<a name="l351"><span class="linenum"> 351</span></a>      function &amp; get_author_User()
<a name="l352"><span class="linenum"> 352</span></a>      {
<a name="l353"><span class="linenum"> 353</span></a>          if( isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_user_ID.html">author_user_ID</a>) &amp;&amp; ! isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>) )
<a name="l354"><span class="linenum"> 354</span></a>          {
<a name="l355"><span class="linenum"> 355</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l356"><span class="linenum"> 356</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_user_ID.html">author_user_ID</a> );
<a name="l357"><span class="linenum"> 357</span></a>          }
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>;
<a name="l360"><span class="linenum"> 360</span></a>      }
<a name="l361"><span class="linenum"> 361</span></a>  
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>      <span class="comment">/**</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">     * Get the Item this comment relates to</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">     *</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     * @return Item</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     */</span>
<a name="l368"><span class="linenum"> 368</span></a>      function &amp; <a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>()
<a name="l369"><span class="linenum"> 369</span></a>      {
<a name="l370"><span class="linenum"> 370</span></a>          if( ! isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>) )
<a name="l371"><span class="linenum"> 371</span></a>          {
<a name="l372"><span class="linenum"> 372</span></a>              <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l373"><span class="linenum"> 373</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a> = &amp; <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a>, false );
<a name="l374"><span class="linenum"> 374</span></a>          }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>;
<a name="l377"><span class="linenum"> 377</span></a>      }
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>      <span class="comment">/**</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * Get a member param by its name</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     *</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * @param mixed Name of parameter</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * @return mixed Value of parameter</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     */</span>
<a name="l386"><span class="linenum"> 386</span></a>  	function <a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l387"><span class="linenum"> 387</span></a>      {
<a name="l388"><span class="linenum"> 388</span></a>          switch( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l389"><span class="linenum"> 389</span></a>          {
<a name="l390"><span class="linenum"> 390</span></a>              case 't_status':
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">                // Text status:</span>
<a name="l392"><span class="linenum"> 392</span></a>                  <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('visibility_statuses')" href="../../../_variables/visibility_statuses.html">$visibility_statuses</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( '', array( 'redirected' ) );
<a name="l393"><span class="linenum"> 393</span></a>                  return <a class="var it1802" onMouseOver="hilite(1802)" onMouseOut="lolite()" onClick="logVariable('visibility_statuses')" href="../../../_variables/visibility_statuses.html">$visibility_statuses</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> ];
<a name="l394"><span class="linenum"> 394</span></a>          }
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>          return parent::<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> );
<a name="l397"><span class="linenum"> 397</span></a>      }
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>  
<a name="l400"><span class="linenum"> 400</span></a>      <span class="comment">/**</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     * Set param value</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     *</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     * @param string parameter name</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">     * @param mixed parameter value</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty value</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">     * @return boolean true, if a value has been set; false if it has not changed</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     */</span>
<a name="l408"><span class="linenum"> 408</span></a>  	function <a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> = false )
<a name="l409"><span class="linenum"> 409</span></a>      {
<a name="l410"><span class="linenum"> 410</span></a>          switch( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l411"><span class="linenum"> 411</span></a>          {
<a name="l412"><span class="linenum"> 412</span></a>              case 'rating':
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">                // Save star rating with checking correct values</span>
<a name="l414"><span class="linenum"> 414</span></a>                  if( <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a> &lt; 1 )
<a name="l415"><span class="linenum"> 415</span></a>                  { // cannot be less than 0
<a name="l416"><span class="linenum"> 416</span></a>                      <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a> = NULL;
<a name="l417"><span class="linenum"> 417</span></a>                  }
<a name="l418"><span class="linenum"> 418</span></a>                  elseif( <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a> &gt; 5 )
<a name="l419"><span class="linenum"> 419</span></a>                  { // cannot be more than 5
<a name="l420"><span class="linenum"> 420</span></a>                      <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a> = 5;
<a name="l421"><span class="linenum"> 421</span></a>                  }
<a name="l422"><span class="linenum"> 422</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, 'number', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, true );
<a name="l423"><span class="linenum"> 423</span></a>  
<a name="l424"><span class="linenum"> 424</span></a>              case 'author_email':
<a name="l425"><span class="linenum"> 425</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, 'string', <a class="function" onClick="logFunction('utf8_strtolower')" href="../../../_functions/utf8_strtolower.html" onMouseOver="funcPopup(event,'utf8_strtolower')">utf8_strtolower</a>( <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a> ), <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> );
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>              case 'status':
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">                // Save previous status temporarily to make some changes on dbinsert(), dbupdate() &amp; dbdelete()</span>
<a name="l429"><span class="linenum"> 429</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previous_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/previous_status.html">previous_status</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'status' );
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>              default:
<a name="l432"><span class="linenum"> 432</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, 'string', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> );
<a name="l433"><span class="linenum"> 433</span></a>          }
<a name="l434"><span class="linenum"> 434</span></a>      }
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>      <span class="comment">/**</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     * Set Item this comment relates to</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     * @param Item</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     */</span>
<a name="l441"><span class="linenum"> 441</span></a>  	function <a class="function" onClick="logFunction('set_Item')" href="../../../_functions/set_item.html" onMouseOver="funcPopup(event,'set_item')">set_Item</a>( &amp; <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../_variables/Item.html">$Item</a> )
<a name="l442"><span class="linenum"> 442</span></a>      {
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">        // Save previous item ID temporarily to make some changes on dbupdate()</span>
<a name="l444"><span class="linenum"> 444</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previous_item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/previous_item_ID.html">previous_item_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a>;
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a> = &amp; <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../_variables/Item.html">$Item</a>;
<a name="l447"><span class="linenum"> 447</span></a>          parent::<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'item_ID', 'number', <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('Item')" href="../../../_variables/Item.html">$Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10688" onMouseOver="hilite(10688)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l448"><span class="linenum"> 448</span></a>      }
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>      <span class="comment">/**</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     * Set author User of this comment</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     */</span>
<a name="l454"><span class="linenum"> 454</span></a>  	function <a class="function" onClick="logFunction('set_author_User')" href="../../../_functions/set_author_user.html" onMouseOver="funcPopup(event,'set_author_user')">set_author_User</a>( &amp; <a class="var it6448" onMouseOver="hilite(6448)" onMouseOut="lolite()" onClick="logVariable('author_User')" href="../../../_variables/author_User.html">$author_User</a> )
<a name="l455"><span class="linenum"> 455</span></a>      {
<a name="l456"><span class="linenum"> 456</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a> = &amp; <a class="var it6448" onMouseOver="hilite(6448)" onMouseOut="lolite()" onClick="logVariable('author_User')" href="../../../_variables/author_User.html">$author_User</a>;
<a name="l457"><span class="linenum"> 457</span></a>          parent::<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'author_user_ID', 'number', <a class="var it6448" onMouseOver="hilite(6448)" onMouseOut="lolite()" onClick="logVariable('author_User')" href="../../../_variables/author_User.html">$author_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10924" onMouseOver="hilite(10924)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l458"><span class="linenum"> 458</span></a>      }
<a name="l459"><span class="linenum"> 459</span></a>  
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>      <span class="comment">/**</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     * Set the spam karma, as a number.</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     * @param integer Spam karma (-100 - 100)</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">     * @access protected</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">     */</span>
<a name="l466"><span class="linenum"> 466</span></a>  	function <a class="function" onClick="logFunction('set_spam_karma')" href="../../../_functions/set_spam_karma.html" onMouseOver="funcPopup(event,'set_spam_karma')">set_spam_karma</a>( <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('spam_karma')" href="../../../_variables/spam_karma.html">$spam_karma</a> )
<a name="l467"><span class="linenum"> 467</span></a>      {
<a name="l468"><span class="linenum"> 468</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'spam_karma', 'number', <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('spam_karma')" href="../../../_variables/spam_karma.html">$spam_karma</a> );
<a name="l469"><span class="linenum"> 469</span></a>      }
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>      <span class="comment">/**</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     * Set the vote, as a number.</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     *</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     * @param string Vote type (spam, helpful)</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * @param string Vote value (spam, notsure, ok, yes, no)</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * @access protected</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     */</span>
<a name="l479"><span class="linenum"> 479</span></a>  	function <a class="function" onClick="logFunction('set_vote')" href="../../../_functions/set_vote.html" onMouseOver="funcPopup(event,'set_vote')">set_vote</a>( <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>, <a class="var it6999" onMouseOver="hilite(6999)" onMouseOut="lolite()" onClick="logVariable('vote_value')" href="../../../_variables/vote_value.html">$vote_value</a> )
<a name="l480"><span class="linenum"> 480</span></a>      {
<a name="l481"><span class="linenum"> 481</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l482"><span class="linenum"> 482</span></a>  
<a name="l483"><span class="linenum"> 483</span></a>          if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>, array( 'spam', 'helpful' ) ) )
<a name="l484"><span class="linenum"> 484</span></a>          { // Restrict access for bad requests
<a name="l485"><span class="linenum"> 485</span></a>              return;
<a name="l486"><span class="linenum"> 486</span></a>          }
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>          switch ( <a class="var it6999" onMouseOver="hilite(6999)" onMouseOut="lolite()" onClick="logVariable('vote_value')" href="../../../_variables/vote_value.html">$vote_value</a> )
<a name="l489"><span class="linenum"> 489</span></a>          { // Set a value for spam vote
<a name="l490"><span class="linenum"> 490</span></a>              case &quot;spam&quot;:
<a name="l491"><span class="linenum"> 491</span></a>              case &quot;yes&quot;:
<a name="l492"><span class="linenum"> 492</span></a>                  <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a> = '1';
<a name="l493"><span class="linenum"> 493</span></a>                  break;
<a name="l494"><span class="linenum"> 494</span></a>              case &quot;notsure&quot;:
<a name="l495"><span class="linenum"> 495</span></a>                  <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a> = '0';
<a name="l496"><span class="linenum"> 496</span></a>                  break;
<a name="l497"><span class="linenum"> 497</span></a>              case &quot;ok&quot;:
<a name="l498"><span class="linenum"> 498</span></a>              case &quot;no&quot;:
<a name="l499"><span class="linenum"> 499</span></a>                  <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a> = '-1';
<a name="l500"><span class="linenum"> 500</span></a>                  break;
<a name="l501"><span class="linenum"> 501</span></a>              default:
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">                // $vote_value is not correct from ajax request</span>
<a name="l503"><span class="linenum"> 503</span></a>                  return;
<a name="l504"><span class="linenum"> 504</span></a>          }
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l507"><span class="linenum"> 507</span></a>          { // If comment doesn't exist
<a name="l508"><span class="linenum"> 508</span></a>              return;
<a name="l509"><span class="linenum"> 509</span></a>          }
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>( 'Check if current user already voted on this comment' );
<a name="l514"><span class="linenum"> 514</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'cmvt_cmt_ID' );
<a name="l515"><span class="linenum"> 515</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_comments__votes' );
<a name="l516"><span class="linenum"> 516</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'cmvt_cmt_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l517"><span class="linenum"> 517</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cmvt_user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l518"><span class="linenum"> 518</span></a>          if( !<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) )
<a name="l519"><span class="linenum"> 519</span></a>          { // Add a new vote for first time
<a name="l520"><span class="linenum"> 520</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'INSERT INTO T_comments__votes
<a name="l521"><span class="linenum"> 521</span></a>                                       ( cmvt_cmt_ID, cmvt_user_ID, cmvt_'.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.' )
<a name="l522"><span class="linenum"> 522</span></a>                                VALUES ( '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a> ).' )' );
<a name="l523"><span class="linenum"> 523</span></a>          }
<a name="l524"><span class="linenum"> 524</span></a>          else
<a name="l525"><span class="linenum"> 525</span></a>          { // Update a vote
<a name="l526"><span class="linenum"> 526</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_comments__votes
<a name="l527"><span class="linenum"> 527</span></a>                              SET cmvt_'.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.' = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a> ).'
<a name="l528"><span class="linenum"> 528</span></a>                            WHERE cmvt_cmt_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).'
<a name="l529"><span class="linenum"> 529</span></a>                              AND cmvt_user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l530"><span class="linenum"> 530</span></a>          }
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>          <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('vote_SQL')" href="../../../_variables/vote_SQL.html">$vote_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>( 'Get voting results of this comment' );
<a name="l533"><span class="linenum"> 533</span></a>          <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('vote_SQL')" href="../../../_variables/vote_SQL.html">$vote_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '<a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>( cmvt_'.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.' ) AS c, SUM( cmvt_'.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.' ) AS s' );
<a name="l534"><span class="linenum"> 534</span></a>          <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('vote_SQL')" href="../../../_variables/vote_SQL.html">$vote_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_comments__votes' );
<a name="l535"><span class="linenum"> 535</span></a>          <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('vote_SQL')" href="../../../_variables/vote_SQL.html">$vote_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'cmvt_cmt_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l536"><span class="linenum"> 536</span></a>          <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('vote_SQL')" href="../../../_variables/vote_SQL.html">$vote_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cmvt_'.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.' IS NOT NULL' );
<a name="l537"><span class="linenum"> 537</span></a>          <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( <a class="var it7000" onMouseOver="hilite(7000)" onMouseOut="lolite()" onClick="logVariable('vote_SQL')" href="../../../_variables/vote_SQL.html">$vote_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">        // Update fields with vote counters for this comment</span>
<a name="l540"><span class="linenum"> 540</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_comments
<a name="l541"><span class="linenum"> 541</span></a>                          SET comment_'.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.'_addvotes = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a>-&gt;<a onClick="logVariable('s')" class="var it10812" onMouseOver="hilite(10812)" onMouseOut="lolite()" href="../../../_variables/s.html">s</a> ).',
<a name="l542"><span class="linenum"> 542</span></a>                              comment_'.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.'_countvotes = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a>-&gt;<a onClick="logVariable('c')" class="var it10812" onMouseOver="hilite(10812)" onMouseOut="lolite()" href="../../../_variables/c.html">c</a> ).'
<a name="l543"><span class="linenum"> 543</span></a>                        WHERE comment_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l544"><span class="linenum"> 544</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;{<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.'_addvotes'} = <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a>-&gt;<a onClick="logVariable('s')" class="var it10812" onMouseOver="hilite(10812)" onMouseOut="lolite()" href="../../../_variables/s.html">s</a>;
<a name="l545"><span class="linenum"> 545</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;{<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.'_countvotes'} = <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a>-&gt;<a onClick="logVariable('c')" class="var it10812" onMouseOver="hilite(10812)" onMouseOut="lolite()" href="../../../_variables/c.html">c</a>;
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l548"><span class="linenum"> 548</span></a>  
<a name="l549"><span class="linenum"> 549</span></a>          return;
<a name="l550"><span class="linenum"> 550</span></a>      }
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>  
<a name="l553"><span class="linenum"> 553</span></a>      <span class="comment">/**</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">     * Get the vote spam type disabled, as array.</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">     *</span>
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment">     * @param int User ID</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">     *</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">     * @return array Result:</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">     *               'is_voted' - TRUE if current user already voted on this comment</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">     *               'icons_statuses': array( 'spam', 'notsure', 'ok' )</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">     */</span>
<a name="l562"><span class="linenum"> 562</span></a>  	function <a class="function" onClick="logFunction('get_vote_spam_disabled')" href="../../../_functions/get_vote_spam_disabled.html" onMouseOver="funcPopup(event,'get_vote_spam_disabled')">get_vote_spam_disabled</a>()
<a name="l563"><span class="linenum"> 563</span></a>      {
<a name="l564"><span class="linenum"> 564</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l565"><span class="linenum"> 565</span></a>  
<a name="l566"><span class="linenum"> 566</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array(
<a name="l567"><span class="linenum"> 567</span></a>                  'is_voted' =&gt; false,
<a name="l568"><span class="linenum"> 568</span></a>                  'icons_statuses' =&gt; array(
<a name="l569"><span class="linenum"> 569</span></a>                      'ok' =&gt; 'disabled',
<a name="l570"><span class="linenum"> 570</span></a>                      'notsure' =&gt; 'disabled',
<a name="l571"><span class="linenum"> 571</span></a>                      'spam' =&gt; 'disabled',
<a name="l572"><span class="linenum"> 572</span></a>              ) );
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l575"><span class="linenum"> 575</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'cmvt_spam' );
<a name="l576"><span class="linenum"> 576</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_comments__votes' );
<a name="l577"><span class="linenum"> 577</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'cmvt_cmt_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l578"><span class="linenum"> 578</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cmvt_user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l579"><span class="linenum"> 579</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cmvt_spam IS NOT NULL' );
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>          if( <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) )
<a name="l582"><span class="linenum"> 582</span></a>          {    // Get a spam vote for current comment and user
<a name="l583"><span class="linenum"> 583</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['is_voted'] = true;
<a name="l584"><span class="linenum"> 584</span></a>              <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('class_disabled')" href="../../../_variables/class_disabled.html">$class_disabled</a> = 'disabled';
<a name="l585"><span class="linenum"> 585</span></a>              <a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('class_voted')" href="../../../_variables/class_voted.html">$class_voted</a> = 'voted';
<a name="l586"><span class="linenum"> 586</span></a>              switch ( <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a>-&gt;<a onClick="logVariable('cmvt_spam')" class="var it10812" onMouseOver="hilite(10812)" onMouseOut="lolite()" href="../../../_variables/cmvt_spam.html">cmvt_spam</a> )
<a name="l587"><span class="linenum"> 587</span></a>              {
<a name="l588"><span class="linenum"> 588</span></a>                  case '1': // SPAM
<a name="l589"><span class="linenum"> 589</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['spam'] = <a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('class_voted')" href="../../../_variables/class_voted.html">$class_voted</a>;
<a name="l590"><span class="linenum"> 590</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['notsure'] = <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['ok'] = <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('class_disabled')" href="../../../_variables/class_disabled.html">$class_disabled</a>;
<a name="l591"><span class="linenum"> 591</span></a>                      break;
<a name="l592"><span class="linenum"> 592</span></a>                  case '0': // NOT SURE
<a name="l593"><span class="linenum"> 593</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['notsure'] = <a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('class_voted')" href="../../../_variables/class_voted.html">$class_voted</a>;
<a name="l594"><span class="linenum"> 594</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['spam'] = <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['ok'] = <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('class_disabled')" href="../../../_variables/class_disabled.html">$class_disabled</a>;
<a name="l595"><span class="linenum"> 595</span></a>                      break;
<a name="l596"><span class="linenum"> 596</span></a>                  case '-1': // OK
<a name="l597"><span class="linenum"> 597</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['ok'] = <a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('class_voted')" href="../../../_variables/class_voted.html">$class_voted</a>;
<a name="l598"><span class="linenum"> 598</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['spam'] = <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['notsure'] = <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('class_disabled')" href="../../../_variables/class_disabled.html">$class_disabled</a>;
<a name="l599"><span class="linenum"> 599</span></a>                      break;
<a name="l600"><span class="linenum"> 600</span></a>              }
<a name="l601"><span class="linenum"> 601</span></a>          }
<a name="l602"><span class="linenum"> 602</span></a>  
<a name="l603"><span class="linenum"> 603</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l604"><span class="linenum"> 604</span></a>      }
<a name="l605"><span class="linenum"> 605</span></a>  
<a name="l606"><span class="linenum"> 606</span></a>  
<a name="l607"><span class="linenum"> 607</span></a>      <span class="comment">/**</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">     * Get the vote helpful type disabled, as array.</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">     *</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">     * @return array Result:</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">     *               'is_voted' - TRUE if current user already voted on this comment</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     *               'icons_statuses': array( 'yes', 'no' )</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     */</span>
<a name="l614"><span class="linenum"> 614</span></a>  	function <a class="function" onClick="logFunction('get_vote_helpful_disabled')" href="../../../_functions/get_vote_helpful_disabled.html" onMouseOver="funcPopup(event,'get_vote_helpful_disabled')">get_vote_helpful_disabled</a>()
<a name="l615"><span class="linenum"> 615</span></a>      {
<a name="l616"><span class="linenum"> 616</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array(
<a name="l619"><span class="linenum"> 619</span></a>                  'is_voted' =&gt; false,
<a name="l620"><span class="linenum"> 620</span></a>                  'icons_statuses' =&gt; array(
<a name="l621"><span class="linenum"> 621</span></a>                      'yes' =&gt; '',
<a name="l622"><span class="linenum"> 622</span></a>                      'no' =&gt; ''
<a name="l623"><span class="linenum"> 623</span></a>              ) );
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'cmvt_helpful' );
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_comments__votes' );
<a name="l628"><span class="linenum"> 628</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'cmvt_cmt_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l629"><span class="linenum"> 629</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cmvt_user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cmvt_helpful IS NOT NULL' );
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>          if( <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_row')" href="../../../_functions/get_row.html" onMouseOver="funcPopup(event,'get_row')">get_row</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) )
<a name="l633"><span class="linenum"> 633</span></a>          {    // Get a spam vote for current comment and user
<a name="l634"><span class="linenum"> 634</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['is_voted'] = true;
<a name="l635"><span class="linenum"> 635</span></a>              <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('class_disabled')" href="../../../_variables/class_disabled.html">$class_disabled</a> = 'disabled';
<a name="l636"><span class="linenum"> 636</span></a>              <a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('class_voted')" href="../../../_variables/class_voted.html">$class_voted</a> = 'voted';
<a name="l637"><span class="linenum"> 637</span></a>              switch ( <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('vote')" href="../../../_variables/vote.html">$vote</a>-&gt;<a onClick="logVariable('cmvt_helpful')" class="var it10812" onMouseOver="hilite(10812)" onMouseOut="lolite()" href="../../../_variables/cmvt_helpful.html">cmvt_helpful</a> )
<a name="l638"><span class="linenum"> 638</span></a>              {
<a name="l639"><span class="linenum"> 639</span></a>                  case '1': // YES
<a name="l640"><span class="linenum"> 640</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['yes'] = <a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('class_voted')" href="../../../_variables/class_voted.html">$class_voted</a>;
<a name="l641"><span class="linenum"> 641</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['no'] = <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('class_disabled')" href="../../../_variables/class_disabled.html">$class_disabled</a>;
<a name="l642"><span class="linenum"> 642</span></a>                      break;
<a name="l643"><span class="linenum"> 643</span></a>                  case '-1': // NO
<a name="l644"><span class="linenum"> 644</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['no'] = <a class="var it7002" onMouseOver="hilite(7002)" onMouseOut="lolite()" onClick="logVariable('class_voted')" href="../../../_variables/class_voted.html">$class_voted</a>;
<a name="l645"><span class="linenum"> 645</span></a>                      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['icons_statuses']['yes'] = <a class="var it7001" onMouseOver="hilite(7001)" onMouseOut="lolite()" onClick="logVariable('class_disabled')" href="../../../_variables/class_disabled.html">$class_disabled</a>;
<a name="l646"><span class="linenum"> 646</span></a>                      break;
<a name="l647"><span class="linenum"> 647</span></a>              }
<a name="l648"><span class="linenum"> 648</span></a>          }
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l651"><span class="linenum"> 651</span></a>      }
<a name="l652"><span class="linenum"> 652</span></a>  
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>      <span class="comment">/**</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">     * Get the vote summary, as a string.</span>
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment">     *</span>
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">     * @param type Vote type (spam, helpful)</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment">     * @param srray Params</span>
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment">     * @return string</span>
<a name="l660"><span class="linenum"> 660</span></a>  <span class="comment">     */</span>
<a name="l661"><span class="linenum"> 661</span></a>  	function <a class="function" onClick="logFunction('get_vote_summary')" href="../../../_functions/get_vote_summary.html" onMouseOver="funcPopup(event,'get_vote_summary')">get_vote_summary</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l662"><span class="linenum"> 662</span></a>      {
<a name="l663"><span class="linenum"> 663</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l664"><span class="linenum"> 664</span></a>                  'result_title'           =&gt; '',
<a name="l665"><span class="linenum"> 665</span></a>                  'result_title_undecided' =&gt; '',
<a name="l666"><span class="linenum"> 666</span></a>                  'after_result'           =&gt; '',
<a name="l667"><span class="linenum"> 667</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l668"><span class="linenum"> 668</span></a>  
<a name="l669"><span class="linenum"> 669</span></a>          if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, array( 'spam', 'helpful' ) ) )
<a name="l670"><span class="linenum"> 670</span></a>          {    // Bad request
<a name="l671"><span class="linenum"> 671</span></a>              return '';
<a name="l672"><span class="linenum"> 672</span></a>          }
<a name="l673"><span class="linenum"> 673</span></a>  
<a name="l674"><span class="linenum"> 674</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;{<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>.'_countvotes'} == 0 )
<a name="l675"><span class="linenum"> 675</span></a>          {    // No votes for current comment
<a name="l676"><span class="linenum"> 676</span></a>              return '';
<a name="l677"><span class="linenum"> 677</span></a>          }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">        // Calculate a vote summary</span>
<a name="l680"><span class="linenum"> 680</span></a>          <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../../../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;{<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>.'_addvotes'} / <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;{<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>.'_countvotes'} * 100 );
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>          if( <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> &lt; -20 )
<a name="l683"><span class="linenum"> 683</span></a>          {    // Comment is OK
<a name="l684"><span class="linenum"> 684</span></a>              <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a>).'% '.( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == 'spam' ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('OK') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('not helpful') );
<a name="l685"><span class="linenum"> 685</span></a>          }
<a name="l686"><span class="linenum"> 686</span></a>          else if( <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> &gt;= -20 &amp;&amp; <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> &lt;= 20 )
<a name="l687"><span class="linenum"> 687</span></a>          {    // Comment is UNDECIDED
<a name="l688"><span class="linenum"> 688</span></a>              <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('UNDECIDED');
<a name="l689"><span class="linenum"> 689</span></a>              if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['result_title_undecided'] ) )
<a name="l690"><span class="linenum"> 690</span></a>              {    // Display title before undecided results
<a name="l691"><span class="linenum"> 691</span></a>                  <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['result_title_undecided'].' '.<a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a>;
<a name="l692"><span class="linenum"> 692</span></a>              }
<a name="l693"><span class="linenum"> 693</span></a>          }
<a name="l694"><span class="linenum"> 694</span></a>          else if( <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> &gt; 20 )
<a name="l695"><span class="linenum"> 695</span></a>          {    // Comment is SPAM
<a name="l696"><span class="linenum"> 696</span></a>              <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> .= '% '.( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == 'spam' ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('SPAM') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('helpful') );
<a name="l697"><span class="linenum"> 697</span></a>          }
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['result_title'] ) )
<a name="l700"><span class="linenum"> 700</span></a>          {    // Display title before results
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['result_title'].' '.<a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a>;
<a name="l702"><span class="linenum"> 702</span></a>          }
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>          return <a class="var it7003" onMouseOver="hilite(7003)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../../_variables/summary.html">$summary</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_result'].' ';
<a name="l705"><span class="linenum"> 705</span></a>      }
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>  
<a name="l708"><span class="linenum"> 708</span></a>      <span class="comment">/**</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">     * Get the anchor-ID of the comment</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">     *</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">     * @return string</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">     */</span>
<a name="l713"><span class="linenum"> 713</span></a>  	function <a class="function" onClick="logFunction('get_anchor')" href="../../../_functions/get_anchor.html" onMouseOver="funcPopup(event,'get_anchor')">get_anchor</a>()
<a name="l714"><span class="linenum"> 714</span></a>      {
<a name="l715"><span class="linenum"> 715</span></a>          return 'c'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l716"><span class="linenum"> 716</span></a>      }
<a name="l717"><span class="linenum"> 717</span></a>  
<a name="l718"><span class="linenum"> 718</span></a>  
<a name="l719"><span class="linenum"> 719</span></a>      <span class="comment">/**</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">     * Template function: display anchor for permalinks to refer to</span>
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment">     */</span>
<a name="l722"><span class="linenum"> 722</span></a>  	function <a class="function" onClick="logFunction('anchor')" href="../../../_functions/anchor.html" onMouseOver="funcPopup(event,'anchor')">anchor</a>()
<a name="l723"><span class="linenum"> 723</span></a>      {
<a name="l724"><span class="linenum"> 724</span></a>          echo '&lt;a id=&quot;'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_anchor')" href="../../../_functions/get_anchor.html" onMouseOver="funcPopup(event,'get_anchor')">get_anchor</a>().'&quot;&gt;&lt;/a&gt;';
<a name="l725"><span class="linenum"> 725</span></a>      }
<a name="l726"><span class="linenum"> 726</span></a>  
<a name="l727"><span class="linenum"> 727</span></a>  
<a name="l728"><span class="linenum"> 728</span></a>      <span class="comment">/**</span>
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">     * Get the comment author's name.</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">     *</span>
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment">     * @return string</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">     */</span>
<a name="l733"><span class="linenum"> 733</span></a>  	function <a class="function" onClick="logFunction('get_author_name')" href="../../../_functions/get_author_name.html" onMouseOver="funcPopup(event,'get_author_name')">get_author_name</a>()
<a name="l734"><span class="linenum"> 734</span></a>      {
<a name="l735"><span class="linenum"> 735</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() )
<a name="l736"><span class="linenum"> 736</span></a>          {
<a name="l737"><span class="linenum"> 737</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;<a class="function" onClick="logFunction('get_preferred_name')" href="../../../_functions/get_preferred_name.html" onMouseOver="funcPopup(event,'get_preferred_name')">get_preferred_name</a>();
<a name="l738"><span class="linenum"> 738</span></a>          }
<a name="l739"><span class="linenum"> 739</span></a>          else
<a name="l740"><span class="linenum"> 740</span></a>          {
<a name="l741"><span class="linenum"> 741</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author.html">author</a>;
<a name="l742"><span class="linenum"> 742</span></a>          }
<a name="l743"><span class="linenum"> 743</span></a>      }
<a name="l744"><span class="linenum"> 744</span></a>  
<a name="l745"><span class="linenum"> 745</span></a>  
<a name="l746"><span class="linenum"> 746</span></a>      <span class="comment">/**</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">     * Get the comment author's gender.</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">     *</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">     * @return string</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">     */</span>
<a name="l751"><span class="linenum"> 751</span></a>  	function <a class="function" onClick="logFunction('get_author_gender')" href="../../../_functions/get_author_gender.html" onMouseOver="funcPopup(event,'get_author_gender')">get_author_gender</a>()
<a name="l752"><span class="linenum"> 752</span></a>      {
<a name="l753"><span class="linenum"> 753</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() )
<a name="l754"><span class="linenum"> 754</span></a>          {
<a name="l755"><span class="linenum"> 755</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'gender' );
<a name="l756"><span class="linenum"> 756</span></a>          }
<a name="l757"><span class="linenum"> 757</span></a>          else
<a name="l758"><span class="linenum"> 758</span></a>          {
<a name="l759"><span class="linenum"> 759</span></a>              return '';
<a name="l760"><span class="linenum"> 760</span></a>          }
<a name="l761"><span class="linenum"> 761</span></a>      }
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>  
<a name="l764"><span class="linenum"> 764</span></a>      <span class="comment">/**</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">     * Get the comment anonymous author's name with gender class.</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">     *</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">     * @param string format to display author</span>
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">     * @param array Params</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">     * @return string</span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment">     */</span>
<a name="l771"><span class="linenum"> 771</span></a>  	function <a class="function" onClick="logFunction('get_author_name_anonymous')" href="../../../_functions/get_author_name_anonymous.html" onMouseOver="funcPopup(event,'get_author_name_anonymous')">get_author_name_anonymous</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l772"><span class="linenum"> 772</span></a>      {
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l774"><span class="linenum"> 774</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l775"><span class="linenum"> 775</span></a>                  'before' =&gt; '',
<a name="l776"><span class="linenum"> 776</span></a>                  'after'  =&gt; '',
<a name="l777"><span class="linenum"> 777</span></a>                  'rel'    =&gt; NULL,
<a name="l778"><span class="linenum"> 778</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l779"><span class="linenum"> 779</span></a>  
<a name="l780"><span class="linenum"> 780</span></a>          <a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('gender_class')" href="../../../_variables/gender_class.html">$gender_class</a> = '';
<a name="l781"><span class="linenum"> 781</span></a>          if( <a class="function" onClick="logFunction('check_setting')" href="../../../_functions/check_setting.html" onMouseOver="funcPopup(event,'check_setting')">check_setting</a>( 'gender_colored' ) )
<a name="l782"><span class="linenum"> 782</span></a>          { // Set a gender class if the setting is ON
<a name="l783"><span class="linenum"> 783</span></a>              <a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('gender_class')" href="../../../_variables/gender_class.html">$gender_class</a> = ' nogender';
<a name="l784"><span class="linenum"> 784</span></a>          }
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>          <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>( 'author', <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['rel'] ) )
<a name="l789"><span class="linenum"> 789</span></a>          { // Set default rel:
<a name="l790"><span class="linenum"> 790</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['rel'] = 'bubbletip_comment_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l791"><span class="linenum"> 791</span></a>          }
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>          if( ! empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['rel'] ) )
<a name="l794"><span class="linenum"> 794</span></a>          { // Initialize attribure &quot;rel&quot;
<a name="l795"><span class="linenum"> 795</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['rel'] = ' rel=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['rel'].'&quot;';
<a name="l796"><span class="linenum"> 796</span></a>          }
<a name="l797"><span class="linenum"> 797</span></a>  
<a name="l798"><span class="linenum"> 798</span></a>          <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a> = '&lt;span class=&quot;user anonymous'.<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('gender_class')" href="../../../_variables/gender_class.html">$gender_class</a>.'&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['rel'].'&gt;'
<a name="l799"><span class="linenum"> 799</span></a>              .<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before']
<a name="l800"><span class="linenum"> 800</span></a>              .<a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a>
<a name="l801"><span class="linenum"> 801</span></a>              .<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after']
<a name="l802"><span class="linenum"> 802</span></a>              .'&lt;/span&gt;';
<a name="l803"><span class="linenum"> 803</span></a>  
<a name="l804"><span class="linenum"> 804</span></a>          return <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a>;
<a name="l805"><span class="linenum"> 805</span></a>      }
<a name="l806"><span class="linenum"> 806</span></a>  
<a name="l807"><span class="linenum"> 807</span></a>  
<a name="l808"><span class="linenum"> 808</span></a>      <span class="comment">/**</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">     * Get the EMail of the comment's author.</span>
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment">     *</span>
<a name="l811"><span class="linenum"> 811</span></a>  <span class="comment">     * @return string</span>
<a name="l812"><span class="linenum"> 812</span></a>  <span class="comment">     */</span>
<a name="l813"><span class="linenum"> 813</span></a>  	function <a class="function" onClick="logFunction('get_author_email')" href="../../../_functions/get_author_email.html" onMouseOver="funcPopup(event,'get_author_email')">get_author_email</a>()
<a name="l814"><span class="linenum"> 814</span></a>      {
<a name="l815"><span class="linenum"> 815</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() )
<a name="l816"><span class="linenum"> 816</span></a>          { // Author is a user
<a name="l817"><span class="linenum"> 817</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('email');
<a name="l818"><span class="linenum"> 818</span></a>          }
<a name="l819"><span class="linenum"> 819</span></a>          else
<a name="l820"><span class="linenum"> 820</span></a>          {
<a name="l821"><span class="linenum"> 821</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_email')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_email.html">author_email</a>;
<a name="l822"><span class="linenum"> 822</span></a>          }
<a name="l823"><span class="linenum"> 823</span></a>      }
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>      <span class="comment">/**</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">     * Get the URL of the comment's author.</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">     *</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">     * @return string</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">     */</span>
<a name="l831"><span class="linenum"> 831</span></a>  	function <a class="function" onClick="logFunction('get_author_url')" href="../../../_functions/get_author_url.html" onMouseOver="funcPopup(event,'get_author_url')">get_author_url</a>()
<a name="l832"><span class="linenum"> 832</span></a>      {
<a name="l833"><span class="linenum"> 833</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() )
<a name="l834"><span class="linenum"> 834</span></a>          { // Author is a user
<a name="l835"><span class="linenum"> 835</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('url');
<a name="l836"><span class="linenum"> 836</span></a>          }
<a name="l837"><span class="linenum"> 837</span></a>          else
<a name="l838"><span class="linenum"> 838</span></a>          {
<a name="l839"><span class="linenum"> 839</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_url.html">author_url</a>;
<a name="l840"><span class="linenum"> 840</span></a>          }
<a name="l841"><span class="linenum"> 841</span></a>      }
<a name="l842"><span class="linenum"> 842</span></a>  
<a name="l843"><span class="linenum"> 843</span></a>  
<a name="l844"><span class="linenum"> 844</span></a>      <span class="comment">/**</span>
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">     * Template function: display the avatar of the comment's author.</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">     *</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">     * @param string</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">     * @param string class for the img tag</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">     * @param array</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment">     */</span>
<a name="l851"><span class="linenum"> 851</span></a>  	function <a class="function" onClick="logFunction('avatar')" href="../../../_functions/avatar.html" onMouseOver="funcPopup(event,'avatar')">avatar</a>( <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a> = 'crop-top-64x64', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = 'bCommentAvatar', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l852"><span class="linenum"> 852</span></a>      {
<a name="l853"><span class="linenum"> 853</span></a>          if( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_avatar')" href="../../../_functions/get_avatar.html" onMouseOver="funcPopup(event,'get_avatar')">get_avatar</a>( <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) )
<a name="l854"><span class="linenum"> 854</span></a>          {
<a name="l855"><span class="linenum"> 855</span></a>              echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l856"><span class="linenum"> 856</span></a>          }
<a name="l857"><span class="linenum"> 857</span></a>      }
<a name="l858"><span class="linenum"> 858</span></a>  
<a name="l859"><span class="linenum"> 859</span></a>  
<a name="l860"><span class="linenum"> 860</span></a>      <span class="comment">/**</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     * Get the avatar of the comment's author.</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">     *</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">     * @param string Avatar thumb size</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment">     * @param string Class name of avatar img tag</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">     * @param array Params</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">     * @return string</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">     */</span>
<a name="l868"><span class="linenum"> 868</span></a>  	function <a class="function" onClick="logFunction('get_avatar')" href="../../../_functions/get_avatar.html" onMouseOver="funcPopup(event,'get_avatar')">get_avatar</a>( <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a> = 'crop-top-64x64', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = 'bCommentAvatar', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l869"><span class="linenum"> 869</span></a>      {
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l871"><span class="linenum"> 871</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l872"><span class="linenum"> 872</span></a>                  'thumb_zoomable' =&gt; false,
<a name="l873"><span class="linenum"> 873</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l874"><span class="linenum"> 874</span></a>  
<a name="l875"><span class="linenum"> 875</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l876"><span class="linenum"> 876</span></a>  
<a name="l877"><span class="linenum"> 877</span></a>          if( ! <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('allow_avatars') )
<a name="l878"><span class="linenum"> 878</span></a>          { // Avatars are not allowed generally, Exit here
<a name="l879"><span class="linenum"> 879</span></a>              return;
<a name="l880"><span class="linenum"> 880</span></a>          }
<a name="l881"><span class="linenum"> 881</span></a>  
<a name="l882"><span class="linenum"> 882</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l883"><span class="linenum"> 883</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l884"><span class="linenum"> 884</span></a>          if( !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;Blog-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('comments_avatars') )
<a name="l885"><span class="linenum"> 885</span></a>          { // Avatars are not allowe for this Blog, Exit here
<a name="l886"><span class="linenum"> 886</span></a>              return;
<a name="l887"><span class="linenum"> 887</span></a>          }
<a name="l888"><span class="linenum"> 888</span></a>  
<a name="l889"><span class="linenum"> 889</span></a>          <a class="var it7004" onMouseOver="hilite(7004)" onMouseOut="lolite()" onClick="logVariable('author_link')" href="../../../_variables/author_link.html">$author_link</a> = <a class="function" onClick="logFunction('get_user_identity_url')" href="../../../_functions/get_user_identity_url.html" onMouseOver="funcPopup(event,'get_user_identity_url')">get_user_identity_url</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_user_ID.html">author_user_ID</a> );
<a name="l890"><span class="linenum"> 890</span></a>  
<a name="l891"><span class="linenum"> 891</span></a>          if( <a class="var it3965" onMouseOver="hilite(3965)" onMouseOut="lolite()" onClick="logVariable('comment_author_User')" href="../../../_variables/comment_author_User.html">$comment_author_User</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() )
<a name="l892"><span class="linenum"> 892</span></a>          { // Author is a user
<a name="l893"><span class="linenum"> 893</span></a>              if( <a class="var it3965" onMouseOver="hilite(3965)" onMouseOut="lolite()" onClick="logVariable('comment_author_User')" href="../../../_variables/comment_author_User.html">$comment_author_User</a>-&gt;<a class="function" onClick="logFunction('has_avatar')" href="../../../_functions/has_avatar.html" onMouseOver="funcPopup(event,'has_avatar')">has_avatar</a>() )
<a name="l894"><span class="linenum"> 894</span></a>              { // Get an image
<a name="l895"><span class="linenum"> 895</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3965" onMouseOver="hilite(3965)" onMouseOut="lolite()" onClick="logVariable('comment_author_User')" href="../../../_variables/comment_author_User.html">$comment_author_User</a>-&gt;<a class="function" onClick="logFunction('get_avatar_imgtag')" href="../../../_functions/get_avatar_imgtag.html" onMouseOver="funcPopup(event,'get_avatar_imgtag')">get_avatar_imgtag</a>( <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, '', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['thumb_zoomable'] );
<a name="l896"><span class="linenum"> 896</span></a>                  if( <a class="var it7004" onMouseOver="hilite(7004)" onMouseOut="lolite()" onClick="logVariable('author_link')" href="../../../_variables/author_link.html">$author_link</a> != '' &amp;&amp; !<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['thumb_zoomable'] )
<a name="l897"><span class="linenum"> 897</span></a>                  { // Add author link
<a name="l898"><span class="linenum"> 898</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it7004" onMouseOver="hilite(7004)" onMouseOut="lolite()" onClick="logVariable('author_link')" href="../../../_variables/author_link.html">$author_link</a>.'&quot;&gt;'.<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.'&lt;/a&gt;';
<a name="l899"><span class="linenum"> 899</span></a>                  }
<a name="l900"><span class="linenum"> 900</span></a>                  return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l901"><span class="linenum"> 901</span></a>              }
<a name="l902"><span class="linenum"> 902</span></a>          }
<a name="l903"><span class="linenum"> 903</span></a>  
<a name="l904"><span class="linenum"> 904</span></a>  <span class="comment">        // TODO&gt; add new event</span>
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment">        // See if plugin supplies an image</span>
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">        // $img_url = $Plugins-&gt;trigger_event( 'GetCommentAvatar', array( 'Comment' =&gt; &amp; $this, 'size' =&gt; $size ) );</span>
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">        // Get gravatar for anonymous users and for users without uploaded avatar</span>
<a name="l909"><span class="linenum"> 909</span></a>          return <a class="function" onClick="logFunction('get_avatar_imgtag_default')" href="../../../_functions/get_avatar_imgtag_default.html" onMouseOver="funcPopup(event,'get_avatar_imgtag_default')">get_avatar_imgtag_default</a>( <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, '', array(
<a name="l910"><span class="linenum"> 910</span></a>                  'email'    =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_email')" href="../../../_functions/get_author_email.html" onMouseOver="funcPopup(event,'get_author_email')">get_author_email</a>(),
<a name="l911"><span class="linenum"> 911</span></a>                  'username' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_name')" href="../../../_functions/get_author_name.html" onMouseOver="funcPopup(event,'get_author_name')">get_author_name</a>(),
<a name="l912"><span class="linenum"> 912</span></a>                  'gender'   =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_gender')" href="../../../_functions/get_author_gender.html" onMouseOver="funcPopup(event,'get_author_gender')">get_author_gender</a>(),
<a name="l913"><span class="linenum"> 913</span></a>              ) );
<a name="l914"><span class="linenum"> 914</span></a>      }
<a name="l915"><span class="linenum"> 915</span></a>  
<a name="l916"><span class="linenum"> 916</span></a>  
<a name="l917"><span class="linenum"> 917</span></a>      <span class="comment">/**</span>
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">     * Template function: display author of comment</span>
<a name="l919"><span class="linenum"> 919</span></a>  <span class="comment">     *</span>
<a name="l920"><span class="linenum"> 920</span></a>  <span class="comment">     * @deprecated use Comment::author2() instead</span>
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">     * @param string String to display before author name if not a user</span>
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment">     * @param string String to display after author name if not a user</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment">     * @param string String to display before author name if he's a user</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment">     * @param string String to display after author name if he's a user</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment">     * @param boolean true for link, false if you want NO html link</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">     * @param string What show as user name: avatar_name | avatar_login | only_avatar | name | login | nickname | firstname | lastname | fullname | preferredname</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">     */</span>
<a name="l929"><span class="linenum"> 929</span></a>  	function <a class="function" onClick="logFunction('author')" href="../../../_functions/author.html" onMouseOver="funcPopup(event,'author')">author</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '#', <a class="var it7005" onMouseOver="hilite(7005)" onMouseOut="lolite()" onClick="logVariable('before_user')" href="../../../_variables/before_user.html">$before_user</a> = '', <a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('after_user')" href="../../../_variables/after_user.html">$after_user</a> = '#',
<a name="l930"><span class="linenum"> 930</span></a>                                          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody', <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> = false, <a class="var it7008" onMouseOver="hilite(7008)" onMouseOut="lolite()" onClick="logVariable('lint_text')" href="../../../_variables/lint_text.html">$lint_text</a> = 'name' )
<a name="l931"><span class="linenum"> 931</span></a>      {
<a name="l932"><span class="linenum"> 932</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author')" href="../../../_functions/get_author.html" onMouseOver="funcPopup(event,'get_author')">get_author</a>( array(
<a name="l933"><span class="linenum"> 933</span></a>                      'before'      =&gt; <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>,
<a name="l934"><span class="linenum"> 934</span></a>                      'after'       =&gt; <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>,
<a name="l935"><span class="linenum"> 935</span></a>                      'before_user' =&gt; <a class="var it7005" onMouseOver="hilite(7005)" onMouseOut="lolite()" onClick="logVariable('before_user')" href="../../../_variables/before_user.html">$before_user</a>,
<a name="l936"><span class="linenum"> 936</span></a>                      'after_user'  =&gt; <a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('after_user')" href="../../../_variables/after_user.html">$after_user</a>,
<a name="l937"><span class="linenum"> 937</span></a>                      'format'      =&gt; <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>,
<a name="l938"><span class="linenum"> 938</span></a>                      'link_to'     =&gt; ( <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> ? 'userurl&gt;userpage' : '' ),
<a name="l939"><span class="linenum"> 939</span></a>                      'link_text'   =&gt; <a class="var it7008" onMouseOver="hilite(7008)" onMouseOut="lolite()" onClick="logVariable('lint_text')" href="../../../_variables/lint_text.html">$lint_text</a>,
<a name="l940"><span class="linenum"> 940</span></a>                  )
<a name="l941"><span class="linenum"> 941</span></a>              );
<a name="l942"><span class="linenum"> 942</span></a>      }
<a name="l943"><span class="linenum"> 943</span></a>  
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>      <span class="comment">/**</span>
<a name="l946"><span class="linenum"> 946</span></a>  <span class="comment">     * Template function: display author of comment</span>
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment">     *</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">     * @param array</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">     */</span>
<a name="l950"><span class="linenum"> 950</span></a>  	function <a class="function" onClick="logFunction('author2')" href="../../../_functions/author2.html" onMouseOver="funcPopup(event,'author2')">author2</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array()  )
<a name="l951"><span class="linenum"> 951</span></a>      {
<a name="l952"><span class="linenum"> 952</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author')" href="../../../_functions/get_author.html" onMouseOver="funcPopup(event,'get_author')">get_author</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l953"><span class="linenum"> 953</span></a>      }
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>  
<a name="l956"><span class="linenum"> 956</span></a>      <span class="comment">/**</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">     * Get author of comment</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">     *</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment">     * @param array</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">     * @return string</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">     */</span>
<a name="l962"><span class="linenum"> 962</span></a>  	function <a class="function" onClick="logFunction('get_author')" href="../../../_functions/get_author.html" onMouseOver="funcPopup(event,'get_author')">get_author</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l963"><span class="linenum"> 963</span></a>      {
<a name="l964"><span class="linenum"> 964</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l965"><span class="linenum"> 965</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l966"><span class="linenum"> 966</span></a>                  'profile_tab'  =&gt; 'user',
<a name="l967"><span class="linenum"> 967</span></a>                  'before'       =&gt; ' ',
<a name="l968"><span class="linenum"> 968</span></a>                  'after'        =&gt; '#',    // After anonymous user
<a name="l969"><span class="linenum"> 969</span></a>                  'before_user'  =&gt; '',
<a name="l970"><span class="linenum"> 970</span></a>                  'after_user'   =&gt; '#',    // After Member user
<a name="l971"><span class="linenum"> 971</span></a>                  'format'       =&gt; 'htmlbody',
<a name="l972"><span class="linenum"> 972</span></a>                  'link_to'      =&gt; 'userurl&gt;userpage', // 'userpage' or 'userurl' or 'userurl&gt;userpage' 'userpage&gt;userurl'
<a name="l973"><span class="linenum"> 973</span></a>                  'link_text'    =&gt; 'preferredname', // avatar_name | avatar_login | only_avatar | name | login | nickname | firstname | lastname | fullname | preferredname
<a name="l974"><span class="linenum"> 974</span></a>                  'link_rel'     =&gt; '',
<a name="l975"><span class="linenum"> 975</span></a>                  'link_class'   =&gt; '',
<a name="l976"><span class="linenum"> 976</span></a>                  'thumb_size'   =&gt; 'crop-top-32x32',
<a name="l977"><span class="linenum"> 977</span></a>                  'thumb_class'  =&gt; '',
<a name="l978"><span class="linenum"> 978</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l979"><span class="linenum"> 979</span></a>  
<a name="l980"><span class="linenum"> 980</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l981"><span class="linenum"> 981</span></a>  
<a name="l982"><span class="linenum"> 982</span></a>          global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l983"><span class="linenum"> 983</span></a>  
<a name="l984"><span class="linenum"> 984</span></a>          if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) )
<a name="l985"><span class="linenum"> 985</span></a>          { // Set Blog if it is still not defined
<a name="l986"><span class="linenum"> 986</span></a>              <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l987"><span class="linenum"> 987</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;get_Blog();
<a name="l988"><span class="linenum"> 988</span></a>          }
<a name="l989"><span class="linenum"> 989</span></a>  
<a name="l990"><span class="linenum"> 990</span></a>          if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_comments' ) != 'any' &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_user'] == '#' &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'] == '#' )
<a name="l991"><span class="linenum"> 991</span></a>          { // The blog does not allow anonymous comments, Don't display a type of comment author
<a name="l992"><span class="linenum"> 992</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_user'] = '';
<a name="l993"><span class="linenum"> 993</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'] = '';
<a name="l994"><span class="linenum"> 994</span></a>          }
<a name="l995"><span class="linenum"> 995</span></a>  
<a name="l996"><span class="linenum"> 996</span></a>          if( !<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('comments_avatars') &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text'] == 'avatar' )
<a name="l997"><span class="linenum"> 997</span></a>          { // If avatars are not allowed for this Blog
<a name="l998"><span class="linenum"> 998</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text'] = 'name';
<a name="l999"><span class="linenum"> 999</span></a>          }
<a name="l1000"><span class="linenum">1000</span></a>  
<a name="l1001"><span class="linenum">1001</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() )
<a name="l1002"><span class="linenum">1002</span></a>          { // Author is a registered user:
<a name="l1003"><span class="linenum">1003</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_user'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_user'] = ' &lt;span class=&quot;bUser-member-tag&quot;&gt;['.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Member').']&lt;/span&gt;';
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;<a class="function" onClick="logFunction('get_identity_link')" href="../../../_functions/get_identity_link.html" onMouseOver="funcPopup(event,'get_identity_link')">get_identity_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1006"><span class="linenum">1006</span></a>  
<a name="l1007"><span class="linenum">1007</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_user'].<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_user'];
<a name="l1008"><span class="linenum">1008</span></a>          }
<a name="l1009"><span class="linenum">1009</span></a>          else
<a name="l1010"><span class="linenum">1010</span></a>          { // Not a registered user, display info recorded at edit time:
<a name="l1011"><span class="linenum">1011</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'] == '#' ) <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'] = ' &lt;span class=&quot;bUser-anonymous-tag&quot;&gt;['.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Visitor').']&lt;/span&gt;';
<a name="l1012"><span class="linenum">1012</span></a>  
<a name="l1013"><span class="linenum">1013</span></a>              if( <a class="function" onClick="logFunction('utf8_strlen')" href="../../../_functions/utf8_strlen.html" onMouseOver="funcPopup(event,'utf8_strlen')">utf8_strlen</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_url.html">author_url</a> ) &lt;= 10 )
<a name="l1014"><span class="linenum">1014</span></a>              { // URL is too short anyways...
<a name="l1015"><span class="linenum">1015</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_to'] = '';
<a name="l1016"><span class="linenum">1016</span></a>              }
<a name="l1017"><span class="linenum">1017</span></a>  
<a name="l1018"><span class="linenum">1018</span></a>              <a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('author_name_params')" href="../../../_variables/author_name_params.html">$author_name_params</a> = array();
<a name="l1019"><span class="linenum">1019</span></a>              if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text'], 'avatar' ) !== false )
<a name="l1020"><span class="linenum">1020</span></a>              { // Get avatar for anonymous user
<a name="l1021"><span class="linenum">1021</span></a>                  <a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('author_name_params')" href="../../../_variables/author_name_params.html">$author_name_params</a>['before'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_avatar')" href="../../../_functions/get_avatar.html" onMouseOver="funcPopup(event,'get_avatar')">get_avatar</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['thumb_size'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['thumb_class'] );
<a name="l1022"><span class="linenum">1022</span></a>              }
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">            // Don't display avatar login name on mode 'only_avatar'</span>
<a name="l1024"><span class="linenum">1024</span></a>              <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text'] == 'only_avatar' ?
<a name="l1025"><span class="linenum">1025</span></a>                  <a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('author_name_params')" href="../../../_variables/author_name_params.html">$author_name_params</a>['before'] :
<a name="l1026"><span class="linenum">1026</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_name_anonymous')" href="../../../_functions/get_author_name_anonymous.html" onMouseOver="funcPopup(event,'get_author_name_anonymous')">get_author_name_anonymous</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'], <a class="var it7009" onMouseOver="hilite(7009)" onMouseOut="lolite()" onClick="logVariable('author_name_params')" href="../../../_variables/author_name_params.html">$author_name_params</a> );
<a name="l1027"><span class="linenum">1027</span></a>  
<a name="l1028"><span class="linenum">1028</span></a>              switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_to'] )
<a name="l1029"><span class="linenum">1029</span></a>              {
<a name="l1030"><span class="linenum">1030</span></a>                  case 'userurl':
<a name="l1031"><span class="linenum">1031</span></a>                  case 'userurl&gt;userpage':
<a name="l1032"><span class="linenum">1032</span></a>                  case 'userpage&gt;userurl':
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment">                    // Make a link:</span>
<a name="l1034"><span class="linenum">1034</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_url_link')" href="../../../_functions/get_author_url_link.html" onMouseOver="funcPopup(event,'get_author_url_link')">get_author_url_link</a>( <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'], true, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_class'] );
<a name="l1035"><span class="linenum">1035</span></a>                      break;
<a name="l1036"><span class="linenum">1036</span></a>  
<a name="l1037"><span class="linenum">1037</span></a>                  default:
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment">                    // Display the name: (NOTE: get_author_url_link( with nolink option ) would NOT handle this correctly when url is empty</span>
<a name="l1039"><span class="linenum">1039</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'].<a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l1040"><span class="linenum">1040</span></a>                      break;
<a name="l1041"><span class="linenum">1041</span></a>              }
<a name="l1042"><span class="linenum">1042</span></a>          }
<a name="l1043"><span class="linenum">1043</span></a>  
<a name="l1044"><span class="linenum">1044</span></a>          <a class="var it7010" onMouseOver="hilite(7010)" onMouseOut="lolite()" onClick="logVariable('hook_params')" href="../../../_variables/hook_params.html">$hook_params</a> = array(
<a name="l1045"><span class="linenum">1045</span></a>              'data' =&gt; &amp; <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>,
<a name="l1046"><span class="linenum">1046</span></a>              'Comment' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>,
<a name="l1047"><span class="linenum">1047</span></a>              'makelink' =&gt; ! empty(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_to']),
<a name="l1048"><span class="linenum">1048</span></a>          );
<a name="l1049"><span class="linenum">1049</span></a>  
<a name="l1050"><span class="linenum">1050</span></a>          <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'FilterCommentAuthor', <a class="var it7010" onMouseOver="hilite(7010)" onMouseOut="lolite()" onClick="logVariable('hook_params')" href="../../../_variables/hook_params.html">$hook_params</a> );
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1053"><span class="linenum">1053</span></a>      }
<a name="l1054"><span class="linenum">1054</span></a>  
<a name="l1055"><span class="linenum">1055</span></a>  
<a name="l1056"><span class="linenum">1056</span></a>      <span class="comment">/**</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     * Template function: display comment's author's IP</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">     *</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">     * @param string String to display before IP, if IP exists</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment">     * @param string String to display after IP, if IP exists</span>
<a name="l1061"><span class="linenum">1061</span></a>  <span class="comment">     * @param boolean|string Type of url</span>
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment">     *                TRUE|'filter' - create an url to filter by IP</span>
<a name="l1063"><span class="linenum">1063</span></a>  <span class="comment">     *                'antispam' - to antispam page with filtered by the IP</span>
<a name="l1064"><span class="linenum">1064</span></a>  <span class="comment">     *                FALSE - display IP as plain text without link</span>
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment">     * @param boolean TRUE to display a link to antispam ip page</span>
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">     */</span>
<a name="l1067"><span class="linenum">1067</span></a>  	function <a class="function" onClick="logFunction('author_ip')" href="../../../_functions/author_ip.html" onMouseOver="funcPopup(event,'author_ip')">author_ip</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '', <a class="var it7011" onMouseOver="hilite(7011)" onMouseOut="lolite()" onClick="logVariable('IP_link_to')" href="../../../_variables/IP_link_to.html">$IP_link_to</a> = false, <a class="var it7012" onMouseOver="hilite(7012)" onMouseOut="lolite()" onClick="logVariable('display_antispam_link')" href="../../../_variables/display_antispam_link.html">$display_antispam_link</a> = false )
<a name="l1068"><span class="linenum">1068</span></a>      {
<a name="l1069"><span class="linenum">1069</span></a>          if( ! empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_IP')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_IP.html">author_IP</a> ) )
<a name="l1070"><span class="linenum">1070</span></a>          {
<a name="l1071"><span class="linenum">1071</span></a>              global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>, <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../_variables/CommentList.html">$CommentList</a>;
<a name="l1072"><span class="linenum">1072</span></a>  
<a name="l1073"><span class="linenum">1073</span></a>              <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('author_IP')" href="../../../_variables/author_IP.html">$author_IP</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_IP')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_IP.html">author_IP</a>;
<a name="l1074"><span class="linenum">1074</span></a>              if( <a class="var it7011" onMouseOver="hilite(7011)" onMouseOut="lolite()" onClick="logVariable('IP_link_to')" href="../../../_variables/IP_link_to.html">$IP_link_to</a> === 'antispam' )
<a name="l1075"><span class="linenum">1075</span></a>              { // Add link to antispam page
<a name="l1076"><span class="linenum">1076</span></a>                  <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('author_IP')" href="../../../_variables/author_IP.html">$author_IP</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="function" onClick="logFunction('get_linked_ip_list')" href="../../../_functions/get_linked_ip_list.html" onMouseOver="funcPopup(event,'get_linked_ip_list')">get_linked_ip_list</a>( array( <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('author_IP')" href="../../../_variables/author_IP.html">$author_IP</a> ) ) );
<a name="l1077"><span class="linenum">1077</span></a>              }
<a name="l1078"><span class="linenum">1078</span></a>              elseif( <a class="var it7011" onMouseOver="hilite(7011)" onMouseOut="lolite()" onClick="logVariable('IP_link_to')" href="../../../_variables/IP_link_to.html">$IP_link_to</a> === 'filter' || <a class="var it7011" onMouseOver="hilite(7011)" onMouseOut="lolite()" onClick="logVariable('IP_link_to')" href="../../../_variables/IP_link_to.html">$IP_link_to</a> )
<a name="l1079"><span class="linenum">1079</span></a>              { // Add link to filter by IP
<a name="l1080"><span class="linenum">1080</span></a>                  <a class="var it7013" onMouseOver="hilite(7013)" onMouseOut="lolite()" onClick="logVariable('filter_IP_url')" href="../../../_variables/filter_IP_url.html">$filter_IP_url</a> = <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( 'filter,ctrl,comments,cmnt_fullview_comments', 'cmnt_fullview_author_IP='.<a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('author_IP')" href="../../../_variables/author_IP.html">$author_IP</a>.'&amp;amp;ctrl=comments' );
<a name="l1081"><span class="linenum">1081</span></a>                  <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('author_IP')" href="../../../_variables/author_IP.html">$author_IP</a> = '&lt;a href=&quot;'.<a class="var it7013" onMouseOver="hilite(7013)" onMouseOut="lolite()" onClick="logVariable('filter_IP_url')" href="../../../_variables/filter_IP_url.html">$filter_IP_url</a>.'&quot;&gt;'.<a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('author_IP')" href="../../../_variables/author_IP.html">$author_IP</a>.'&lt;/a&gt;';
<a name="l1082"><span class="linenum">1082</span></a>              }
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>              echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1085"><span class="linenum">1085</span></a>  
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment">            // Filter the IP by plugins for display, allowing e.g. the DNSBL plugin to add a link that displays info about the IP:</span>
<a name="l1087"><span class="linenum">1087</span></a>              echo <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('get_trigger_event')" href="../../../_functions/get_trigger_event.html" onMouseOver="funcPopup(event,'get_trigger_event')">get_trigger_event</a>( 'FilterIpAddress', array(
<a name="l1088"><span class="linenum">1088</span></a>                      'format'=&gt;'htmlbody',
<a name="l1089"><span class="linenum">1089</span></a>                      'data' =&gt; <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('author_IP')" href="../../../_variables/author_IP.html">$author_IP</a> ),
<a name="l1090"><span class="linenum">1090</span></a>                  'data' );
<a name="l1091"><span class="linenum">1091</span></a>  
<a name="l1092"><span class="linenum">1092</span></a>              if( <a class="var it7012" onMouseOver="hilite(7012)" onMouseOut="lolite()" onClick="logVariable('display_antispam_link')" href="../../../_variables/display_antispam_link.html">$display_antispam_link</a> )
<a name="l1093"><span class="linenum">1093</span></a>              { // Display a link to antispam ip page
<a name="l1094"><span class="linenum">1094</span></a>                  <a class="var it7014" onMouseOver="hilite(7014)" onMouseOut="lolite()" onClick="logVariable('antispam_icon')" href="../../../_variables/antispam_icon.html">$antispam_icon</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'lightning', 'imgtag', array( 'title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Go to edit this IP address in antispam control panel' ) ) );
<a name="l1095"><span class="linenum">1095</span></a>                  echo ' '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="function" onClick="logFunction('get_linked_ip_list')" href="../../../_functions/get_linked_ip_list.html" onMouseOver="funcPopup(event,'get_linked_ip_list')">get_linked_ip_list</a>( array( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_IP')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_IP.html">author_IP</a> ), NULL, <a class="var it7014" onMouseOver="hilite(7014)" onMouseOut="lolite()" onClick="logVariable('antispam_icon')" href="../../../_variables/antispam_icon.html">$antispam_icon</a> ) );
<a name="l1096"><span class="linenum">1096</span></a>              }
<a name="l1097"><span class="linenum">1097</span></a>  
<a name="l1098"><span class="linenum">1098</span></a>              echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1099"><span class="linenum">1099</span></a>          }
<a name="l1100"><span class="linenum">1100</span></a>      }
<a name="l1101"><span class="linenum">1101</span></a>  
<a name="l1102"><span class="linenum">1102</span></a>  
<a name="l1103"><span class="linenum">1103</span></a>      <span class="comment">/**</span>
<a name="l1104"><span class="linenum">1104</span></a>  <span class="comment">     * Template function: display link to comment author's provided email</span>
<a name="l1105"><span class="linenum">1105</span></a>  <span class="comment">     *</span>
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment">     * @param string String to display for link: leave empty to display email</span>
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment">     * @param string String to display before email, if email exists</span>
<a name="l1108"><span class="linenum">1108</span></a>  <span class="comment">     * @param string String to display after email, if email exists</span>
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment">     * @param boolean false if you want NO html link</span>
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment">     */</span>
<a name="l1111"><span class="linenum">1111</span></a>  	function <a class="function" onClick="logFunction('author_email')" href="../../../_functions/author_email.html" onMouseOver="funcPopup(event,'author_email')">author_email</a>( <a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../../../_variables/linktext.html">$linktext</a>='', <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>='', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>='', <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> = true )
<a name="l1112"><span class="linenum">1112</span></a>      {
<a name="l1113"><span class="linenum">1113</span></a>          <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_email')" href="../../../_functions/get_author_email.html" onMouseOver="funcPopup(event,'get_author_email')">get_author_email</a>();
<a name="l1114"><span class="linenum">1114</span></a>  
<a name="l1115"><span class="linenum">1115</span></a>          if( strlen( <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a> ) &gt; 5 )
<a name="l1116"><span class="linenum">1116</span></a>          { // If email exists:
<a name="l1117"><span class="linenum">1117</span></a>              echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1118"><span class="linenum">1118</span></a>              if( <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> ) echo '&lt;a href=&quot;mailto:'.<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a>.'&quot;&gt;';
<a name="l1119"><span class="linenum">1119</span></a>              echo (<a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../../../_variables/linktext.html">$linktext</a> != '') ? <a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../../../_variables/linktext.html">$linktext</a> : <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('email')" href="../../../_variables/email.html">$email</a>;
<a name="l1120"><span class="linenum">1120</span></a>              if( <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> ) echo '&lt;/a&gt;';
<a name="l1121"><span class="linenum">1121</span></a>              echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1122"><span class="linenum">1122</span></a>          }
<a name="l1123"><span class="linenum">1123</span></a>      }
<a name="l1124"><span class="linenum">1124</span></a>  
<a name="l1125"><span class="linenum">1125</span></a>  
<a name="l1126"><span class="linenum">1126</span></a>      <span class="comment">/**</span>
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment">     * Template function: display comment's country that was detected by IP address</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">     *</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment">     * @param string String to display before country, if country_ID is defined</span>
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment">     * @param string String to display after country, if country_ID is defined</span>
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment">     */</span>
<a name="l1132"><span class="linenum">1132</span></a>  	function <a class="function" onClick="logFunction('ip_country')" href="../../../_functions/ip_country.html" onMouseOver="funcPopup(event,'ip_country')">ip_country</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '' )
<a name="l1133"><span class="linenum">1133</span></a>      {
<a name="l1134"><span class="linenum">1134</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_ip_country')" href="../../../_functions/get_ip_country.html" onMouseOver="funcPopup(event,'get_ip_country')">get_ip_country</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>, <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> );
<a name="l1135"><span class="linenum">1135</span></a>      }
<a name="l1136"><span class="linenum">1136</span></a>  
<a name="l1137"><span class="linenum">1137</span></a>  
<a name="l1138"><span class="linenum">1138</span></a>      <span class="comment">/**</span>
<a name="l1139"><span class="linenum">1139</span></a>  <span class="comment">     * Get comment's country that was detected by IP address</span>
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment">     *</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment">     * @param string String to display before country, if country_ID is defined</span>
<a name="l1142"><span class="linenum">1142</span></a>  <span class="comment">     * @param string String to display after country, if country_ID is defined</span>
<a name="l1143"><span class="linenum">1143</span></a>  <span class="comment">     * @return string Country with flag</span>
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">     */</span>
<a name="l1145"><span class="linenum">1145</span></a>  	function <a class="function" onClick="logFunction('get_ip_country')" href="../../../_functions/get_ip_country.html" onMouseOver="funcPopup(event,'get_ip_country')">get_ip_country</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '' )
<a name="l1146"><span class="linenum">1146</span></a>      {
<a name="l1147"><span class="linenum">1147</span></a>          <a class="var it5793" onMouseOver="hilite(5793)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a> = '';
<a name="l1148"><span class="linenum">1148</span></a>  
<a name="l1149"><span class="linenum">1149</span></a>          if( !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('IP_ctry_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/IP_ctry_ID.html">IP_ctry_ID</a> ) )
<a name="l1150"><span class="linenum">1150</span></a>          {    // Country ID is defined
<a name="l1151"><span class="linenum">1151</span></a>              <a class="function" onClick="logFunction('load_funcs')" href="../../../_functions/load_funcs.html" onMouseOver="funcPopup(event,'load_funcs')">load_funcs</a>( 'regional/model/_regional.funcs.php' );
<a name="l1152"><span class="linenum">1152</span></a>              <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( 'regional/model/_country.class.php', 'Country' );
<a name="l1153"><span class="linenum">1153</span></a>  
<a name="l1154"><span class="linenum">1154</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('CountryCache')" href="../../../_variables/CountryCache.html">$CountryCache</a> = &amp; get_CountryCache();
<a name="l1155"><span class="linenum">1155</span></a>              if( <a class="var it1728" onMouseOver="hilite(1728)" onMouseOut="lolite()" onClick="logVariable('Country')" href="../../../_variables/Country.html">$Country</a> = <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('CountryCache')" href="../../../_variables/CountryCache.html">$CountryCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('IP_ctry_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/IP_ctry_ID.html">IP_ctry_ID</a>, false ) )
<a name="l1156"><span class="linenum">1156</span></a>              {
<a name="l1157"><span class="linenum">1157</span></a>                  <a class="var it5793" onMouseOver="hilite(5793)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a> .= <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1158"><span class="linenum">1158</span></a>  
<a name="l1159"><span class="linenum">1159</span></a>                  <a class="var it5793" onMouseOver="hilite(5793)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a> .= <a class="function" onClick="logFunction('country_flag')" href="../../../_functions/country_flag.html" onMouseOver="funcPopup(event,'country_flag')">country_flag</a>( <a class="var it1728" onMouseOver="hilite(1728)" onMouseOut="lolite()" onClick="logVariable('Country')" href="../../../_variables/Country.html">$Country</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'code' ), <a class="var it1728" onMouseOver="hilite(1728)" onMouseOut="lolite()" onClick="logVariable('Country')" href="../../../_variables/Country.html">$Country</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), 'w16px', 'flag', '', false );
<a name="l1160"><span class="linenum">1160</span></a>                  <a class="var it5793" onMouseOver="hilite(5793)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a> .= ' '.<a class="var it1728" onMouseOver="hilite(1728)" onMouseOut="lolite()" onClick="logVariable('Country')" href="../../../_variables/Country.html">$Country</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l1161"><span class="linenum">1161</span></a>  
<a name="l1162"><span class="linenum">1162</span></a>                  <a class="var it5793" onMouseOver="hilite(5793)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a> .= <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1163"><span class="linenum">1163</span></a>              }
<a name="l1164"><span class="linenum">1164</span></a>          }
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>          return <a class="var it5793" onMouseOver="hilite(5793)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a>;
<a name="l1167"><span class="linenum">1167</span></a>      }
<a name="l1168"><span class="linenum">1168</span></a>  
<a name="l1169"><span class="linenum">1169</span></a>  
<a name="l1170"><span class="linenum">1170</span></a>      <span class="comment">/**</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment">     * Get link to comment author's provided URL</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">     *</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">     * @param string String to display for link: leave empty to display URL</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">     * @param string String to display before link, if link exists</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">     * @param string String to display after link, if link exists</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">     * @param boolean false if you want NO html link</span>
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment">     * @param string Link class</span>
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment">     * @return boolean true if URL has been displayed</span>
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment">     */</span>
<a name="l1180"><span class="linenum">1180</span></a>  	function <a class="function" onClick="logFunction('get_author_url_link')" href="../../../_functions/get_author_url_link.html" onMouseOver="funcPopup(event,'get_author_url_link')">get_author_url_link</a>( <a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../../../_variables/linktext.html">$linktext</a> = '', <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '', <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> = true, <a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a> = '' )
<a name="l1181"><span class="linenum">1181</span></a>      {
<a name="l1182"><span class="linenum">1182</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l1183"><span class="linenum">1183</span></a>  
<a name="l1184"><span class="linenum">1184</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_url')" href="../../../_functions/get_author_url.html" onMouseOver="funcPopup(event,'get_author_url')">get_author_url</a>();
<a name="l1185"><span class="linenum">1185</span></a>  
<a name="l1186"><span class="linenum">1186</span></a>          if( <a class="function" onClick="logFunction('utf8_strlen')" href="../../../_functions/utf8_strlen.html" onMouseOver="funcPopup(event,'utf8_strlen')">utf8_strlen</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> ) &lt; 10 )
<a name="l1187"><span class="linenum">1187</span></a>          {
<a name="l1188"><span class="linenum">1188</span></a>              return false;
<a name="l1189"><span class="linenum">1189</span></a>          }
<a name="l1190"><span class="linenum">1190</span></a>  
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">        // If URL exists:</span>
<a name="l1192"><span class="linenum">1192</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1193"><span class="linenum">1193</span></a>          if( <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> )
<a name="l1194"><span class="linenum">1194</span></a>          {
<a name="l1195"><span class="linenum">1195</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a ';
<a name="l1196"><span class="linenum">1196</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('nofollow')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/nofollow.html">nofollow</a> )
<a name="l1197"><span class="linenum">1197</span></a>              {
<a name="l1198"><span class="linenum">1198</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= 'rel=&quot;nofollow&quot; ';
<a name="l1199"><span class="linenum">1199</span></a>              }
<a name="l1200"><span class="linenum">1200</span></a>              if( ! empty( <a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a> ) )
<a name="l1201"><span class="linenum">1201</span></a>              {
<a name="l1202"><span class="linenum">1202</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= 'class=&quot;'.<a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a>.'&quot; ';
<a name="l1203"><span class="linenum">1203</span></a>              }
<a name="l1204"><span class="linenum">1204</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= 'href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot;&gt;';
<a name="l1205"><span class="linenum">1205</span></a>          }
<a name="l1206"><span class="linenum">1206</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ( empty(<a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../../../_variables/linktext.html">$linktext</a>) ? <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> : <a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../../../_variables/linktext.html">$linktext</a> );
<a name="l1207"><span class="linenum">1207</span></a>          if( <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l1208"><span class="linenum">1208</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1209"><span class="linenum">1209</span></a>  
<a name="l1210"><span class="linenum">1210</span></a>          <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'FilterCommentAuthorUrl', array( 'data' =&gt; &amp; <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, 'makelink' =&gt; <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a>, 'Comment' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l1211"><span class="linenum">1211</span></a>  
<a name="l1212"><span class="linenum">1212</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1213"><span class="linenum">1213</span></a>      }
<a name="l1214"><span class="linenum">1214</span></a>  
<a name="l1215"><span class="linenum">1215</span></a>  
<a name="l1216"><span class="linenum">1216</span></a>    <span class="comment">/**</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment">     * Template function: display link to comment author's provided URL</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment">     *</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">     * @param string String to display for link: leave empty to display URL</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment">     * @param string String to display before link, if link exists</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment">     * @param string String to display after link, if link exists</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment">     * @param boolean false if you want NO html link</span>
<a name="l1223"><span class="linenum">1223</span></a>  <span class="comment">     * @return boolean true if URL has been displayed</span>
<a name="l1224"><span class="linenum">1224</span></a>  <span class="comment">     */</span>
<a name="l1225"><span class="linenum">1225</span></a>  	function <a class="function" onClick="logFunction('author_url')" href="../../../_functions/author_url.html" onMouseOver="funcPopup(event,'author_url')">author_url</a>( <a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../../../_variables/linktext.html">$linktext</a>='', <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>='', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>='', <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> = true )
<a name="l1226"><span class="linenum">1226</span></a>      {
<a name="l1227"><span class="linenum">1227</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_url_link')" href="../../../_functions/get_author_url_link.html" onMouseOver="funcPopup(event,'get_author_url_link')">get_author_url_link</a>( <a class="var it7015" onMouseOver="hilite(7015)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../../../_variables/linktext.html">$linktext</a>, <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>, <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>, <a class="var it7007" onMouseOver="hilite(7007)" onMouseOut="lolite()" onClick="logVariable('makelink')" href="../../../_variables/makelink.html">$makelink</a> );
<a name="l1228"><span class="linenum">1228</span></a>          if( !empty( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ) )
<a name="l1229"><span class="linenum">1229</span></a>          {
<a name="l1230"><span class="linenum">1230</span></a>              echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1231"><span class="linenum">1231</span></a>              return true;
<a name="l1232"><span class="linenum">1232</span></a>          }
<a name="l1233"><span class="linenum">1233</span></a>          return false;
<a name="l1234"><span class="linenum">1234</span></a>      }
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>  
<a name="l1237"><span class="linenum">1237</span></a>      <span class="comment">/**</span>
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment">     * Display author url, delete icon and ban icon if user has proper rights</span>
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment">     *</span>
<a name="l1240"><span class="linenum">1240</span></a>  <span class="comment">     * @param boolean true to use ajax button</span>
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment">     * @param boolean true to check user permission to edit this comment and antispam screen</span>
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">     */</span>
<a name="l1243"><span class="linenum">1243</span></a>  	function <a class="function" onClick="logFunction('author_url_with_actions')" href="../../../_functions/author_url_with_actions.html" onMouseOver="funcPopup(event,'author_url_with_actions')">author_url_with_actions</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = NULL, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it2850" onMouseOver="hilite(2850)" onMouseOut="lolite()" onClick="logVariable('check_perms')" href="../../../_variables/check_perms.html">$check_perms</a> = true, <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true )
<a name="l1244"><span class="linenum">1244</span></a>      {
<a name="l1245"><span class="linenum">1245</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1246"><span class="linenum">1246</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('author_url')" href="../../../_functions/author_url.html" onMouseOver="funcPopup(event,'author_url')">author_url</a>( '', ' &lt;span &amp;bull; Url: id=&quot;commenturl_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&quot; &lt;span class=&quot;bUrl&quot; &gt;', '' ) )
<a name="l1247"><span class="linenum">1247</span></a>          { // There is an URL
<a name="l1248"><span class="linenum">1248</span></a>              if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l1249"><span class="linenum">1249</span></a>              { // Author is anonymous user and we have permission to edit this comment...
<a name="l1250"><span class="linenum">1250</span></a>                  if( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> == NULL )
<a name="l1251"><span class="linenum">1251</span></a>                  {
<a name="l1252"><span class="linenum">1252</span></a>                      <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' ) );
<a name="l1253"><span class="linenum">1253</span></a>                  }
<a name="l1254"><span class="linenum">1254</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('deleteurl_link')" href="../../../_functions/deleteurl_link.html" onMouseOver="funcPopup(event,'deleteurl_link')">deleteurl_link</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a>, false, '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> );
<a name="l1255"><span class="linenum">1255</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('banurl_link')" href="../../../_functions/banurl_link.html" onMouseOver="funcPopup(event,'banurl_link')">banurl_link</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a>, true, '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> );
<a name="l1256"><span class="linenum">1256</span></a>              }
<a name="l1257"><span class="linenum">1257</span></a>              echo '&lt;/span&gt;';
<a name="l1258"><span class="linenum">1258</span></a>          }
<a name="l1259"><span class="linenum">1259</span></a>      }
<a name="l1260"><span class="linenum">1260</span></a>  
<a name="l1261"><span class="linenum">1261</span></a>  
<a name="l1262"><span class="linenum">1262</span></a>      <span class="comment">/**</span>
<a name="l1263"><span class="linenum">1263</span></a>  <span class="comment">     * Template function: display spam karma of the comment (in percent)</span>
<a name="l1264"><span class="linenum">1264</span></a>  <span class="comment">     *</span>
<a name="l1265"><span class="linenum">1265</span></a>  <span class="comment">     * &quot;%s&quot; gets replaced by the karma value</span>
<a name="l1266"><span class="linenum">1266</span></a>  <span class="comment">     *</span>
<a name="l1267"><span class="linenum">1267</span></a>  <span class="comment">     * @param string Template string to display, if we have a karma value</span>
<a name="l1268"><span class="linenum">1268</span></a>  <span class="comment">     * @param string Template string to display, if we have no karma value (pre-Phoenix)</span>
<a name="l1269"><span class="linenum">1269</span></a>  <span class="comment">     */</span>
<a name="l1270"><span class="linenum">1270</span></a>  	function <a class="function" onClick="logFunction('spam_karma')" href="../../../_functions/spam_karma.html" onMouseOver="funcPopup(event,'spam_karma')">spam_karma</a>( <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../../_variables/template.html">$template</a> = '%s%', <a class="var it7017" onMouseOver="hilite(7017)" onMouseOut="lolite()" onClick="logVariable('template_unknown')" href="../../../_variables/template_unknown.html">$template_unknown</a> = NULL )
<a name="l1271"><span class="linenum">1271</span></a>      {
<a name="l1272"><span class="linenum">1272</span></a>          if( isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('spam_karma')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/spam_karma.html">spam_karma</a>) )
<a name="l1273"><span class="linenum">1273</span></a>          {
<a name="l1274"><span class="linenum">1274</span></a>              echo <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '%s', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('spam_karma')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/spam_karma.html">spam_karma</a>, <a class="var it2964" onMouseOver="hilite(2964)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../../_variables/template.html">$template</a> );
<a name="l1275"><span class="linenum">1275</span></a>          }
<a name="l1276"><span class="linenum">1276</span></a>          else
<a name="l1277"><span class="linenum">1277</span></a>          {
<a name="l1278"><span class="linenum">1278</span></a>              if( ! isset(<a class="var it7017" onMouseOver="hilite(7017)" onMouseOut="lolite()" onClick="logVariable('template_unknown')" href="../../../_variables/template_unknown.html">$template_unknown</a>) )
<a name="l1279"><span class="linenum">1279</span></a>              {
<a name="l1280"><span class="linenum">1280</span></a>                  echo <span class="comment">/* TRANS: &quot;not available&quot; */</span> <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('N/A');
<a name="l1281"><span class="linenum">1281</span></a>              }
<a name="l1282"><span class="linenum">1282</span></a>              else
<a name="l1283"><span class="linenum">1283</span></a>              {
<a name="l1284"><span class="linenum">1284</span></a>                  echo <a class="var it7017" onMouseOver="hilite(7017)" onMouseOut="lolite()" onClick="logVariable('template_unknown')" href="../../../_variables/template_unknown.html">$template_unknown</a>;
<a name="l1285"><span class="linenum">1285</span></a>              }
<a name="l1286"><span class="linenum">1286</span></a>          }
<a name="l1287"><span class="linenum">1287</span></a>      }
<a name="l1288"><span class="linenum">1288</span></a>  
<a name="l1289"><span class="linenum">1289</span></a>  
<a name="l1290"><span class="linenum">1290</span></a>      <span class="comment">/**</span>
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">     * Provide link to edit a comment if user has edit rights</span>
<a name="l1292"><span class="linenum">1292</span></a>  <span class="comment">     *</span>
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l1294"><span class="linenum">1294</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l1295"><span class="linenum">1295</span></a>  <span class="comment">     * @param string link text</span>
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment">     * @param string link title</span>
<a name="l1297"><span class="linenum">1297</span></a>  <span class="comment">     * @param string class name</span>
<a name="l1298"><span class="linenum">1298</span></a>  <span class="comment">     * @param string Glue string for url params</span>
<a name="l1299"><span class="linenum">1299</span></a>  <span class="comment">     * @param boolean TRUE - to save context(memorized params)</span>
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment">     * @param string Redirect url</span>
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">     * @return boolean</span>
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment">     */</span>
<a name="l1303"><span class="linenum">1303</span></a>  	function <a class="function" onClick="logFunction('edit_link')" href="../../../_functions/edit_link.html" onMouseOver="funcPopup(event,'edit_link')">edit_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = NULL )
<a name="l1304"><span class="linenum">1304</span></a>      {
<a name="l1305"><span class="linenum">1305</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1306"><span class="linenum">1306</span></a>  
<a name="l1307"><span class="linenum">1307</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l1308"><span class="linenum">1308</span></a>  
<a name="l1309"><span class="linenum">1309</span></a>          if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>) )
<a name="l1310"><span class="linenum">1310</span></a>          {    // Happens in Preview
<a name="l1311"><span class="linenum">1311</span></a>              return false;
<a name="l1312"><span class="linenum">1312</span></a>          }
<a name="l1313"><span class="linenum">1313</span></a>  
<a name="l1314"><span class="linenum">1314</span></a>          if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l1315"><span class="linenum">1315</span></a>          { // If User has no permission to edit this comment:
<a name="l1316"><span class="linenum">1316</span></a>              return false;
<a name="l1317"><span class="linenum">1317</span></a>          }
<a name="l1318"><span class="linenum">1318</span></a>  
<a name="l1319"><span class="linenum">1319</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' ) <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'edit' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit...');
<a name="l1320"><span class="linenum">1320</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit this comment');
<a name="l1321"><span class="linenum">1321</span></a>  
<a name="l1322"><span class="linenum">1322</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l1323"><span class="linenum">1323</span></a>          <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;get_Blog();
<a name="l1324"><span class="linenum">1324</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1325"><span class="linenum">1325</span></a>          if( <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'in_skin_editing' ) &amp;&amp; !<a class="function" onClick="logFunction('is_admin_page')" href="../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l1326"><span class="linenum">1326</span></a>          {
<a name="l1327"><span class="linenum">1327</span></a>              echo '&lt;a href=&quot;'.<a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>(), 'disp=edit_comment'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'c='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l1328"><span class="linenum">1328</span></a>          }
<a name="l1329"><span class="linenum">1329</span></a>          else
<a name="l1330"><span class="linenum">1330</span></a>          {
<a name="l1331"><span class="linenum">1331</span></a>              echo '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'blog='.<a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10757" onMouseOver="hilite(10757)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action=edit'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'comment_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l1332"><span class="linenum">1332</span></a>          }
<a name="l1333"><span class="linenum">1333</span></a>          if( <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> )
<a name="l1334"><span class="linenum">1334</span></a>          {
<a name="l1335"><span class="linenum">1335</span></a>              if( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> != NULL )
<a name="l1336"><span class="linenum">1336</span></a>              {
<a name="l1337"><span class="linenum">1337</span></a>                  echo <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l1338"><span class="linenum">1338</span></a>              }
<a name="l1339"><span class="linenum">1339</span></a>              else
<a name="l1340"><span class="linenum">1340</span></a>              {
<a name="l1341"><span class="linenum">1341</span></a>                  echo <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' ) );
<a name="l1342"><span class="linenum">1342</span></a>              }
<a name="l1343"><span class="linenum">1343</span></a>          }
<a name="l1344"><span class="linenum">1344</span></a>          echo '&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l1345"><span class="linenum">1345</span></a>          echo empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ? '' : ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l1346"><span class="linenum">1346</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l1347"><span class="linenum">1347</span></a>          { // Edit meta comment by ajax
<a name="l1348"><span class="linenum">1348</span></a>              echo ' onclick=&quot;return <a class="function" onClick="logFunction('edit_comment')" href="../../../_functions/edit_comment.html" onMouseOver="funcPopup(event,'edit_comment')">edit_comment</a>( \'form\', '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.' )&quot;';
<a name="l1349"><span class="linenum">1349</span></a>          }
<a name="l1350"><span class="linenum">1350</span></a>          echo '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l1351"><span class="linenum">1351</span></a>          echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1352"><span class="linenum">1352</span></a>  
<a name="l1353"><span class="linenum">1353</span></a>          return true;
<a name="l1354"><span class="linenum">1354</span></a>      }
<a name="l1355"><span class="linenum">1355</span></a>  
<a name="l1356"><span class="linenum">1356</span></a>  
<a name="l1357"><span class="linenum">1357</span></a>      <span class="comment">/**</span>
<a name="l1358"><span class="linenum">1358</span></a>  <span class="comment">     * Display delete icon for deleting author_url if user has proper rights</span>
<a name="l1359"><span class="linenum">1359</span></a>  <span class="comment">     * @param boolean true if create ajax button</span>
<a name="l1360"><span class="linenum">1360</span></a>  <span class="comment">     * @param boolean true if need permission check, because it wasn't checked before</span>
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment">     * @param glue between url params</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">     * @return link on success, false otherwise</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">     */</span>
<a name="l1364"><span class="linenum">1364</span></a>  	function <a class="function" onClick="logFunction('deleteurl_link')" href="../../../_functions/deleteurl_link.html" onMouseOver="funcPopup(event,'deleteurl_link')">deleteurl_link</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it4047" onMouseOver="hilite(4047)" onMouseOut="lolite()" onClick="logVariable('check_perm')" href="../../../_variables/check_perm.html">$check_perm</a> = true, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true )
<a name="l1365"><span class="linenum">1365</span></a>      {
<a name="l1366"><span class="linenum">1366</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1367"><span class="linenum">1367</span></a>  
<a name="l1368"><span class="linenum">1368</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l1369"><span class="linenum">1369</span></a>  
<a name="l1370"><span class="linenum">1370</span></a>          if( <a class="var it4047" onMouseOver="hilite(4047)" onMouseOut="lolite()" onClick="logVariable('check_perm')" href="../../../_variables/check_perm.html">$check_perm</a> &amp;&amp; ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'delete', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l1371"><span class="linenum">1371</span></a>          { // If current user has no permission to edit this comment
<a name="l1372"><span class="linenum">1372</span></a>              return false;
<a name="l1373"><span class="linenum">1373</span></a>          }
<a name="l1374"><span class="linenum">1374</span></a>  
<a name="l1375"><span class="linenum">1375</span></a>          if( <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> )
<a name="l1376"><span class="linenum">1376</span></a>          {
<a name="l1377"><span class="linenum">1377</span></a>              if( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> == NULL )
<a name="l1378"><span class="linenum">1378</span></a>              {
<a name="l1379"><span class="linenum">1379</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' ) );
<a name="l1380"><span class="linenum">1380</span></a>              }
<a name="l1381"><span class="linenum">1381</span></a>              <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l1382"><span class="linenum">1382</span></a>          }
<a name="l1383"><span class="linenum">1383</span></a>          else
<a name="l1384"><span class="linenum">1384</span></a>          {
<a name="l1385"><span class="linenum">1385</span></a>              <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = '';
<a name="l1386"><span class="linenum">1386</span></a>          }
<a name="l1387"><span class="linenum">1387</span></a>  
<a name="l1388"><span class="linenum">1388</span></a>          <a class="var it1089" onMouseOver="hilite(1089)" onMouseOut="lolite()" onClick="logVariable('delete_url')" href="../../../_variables/delete_url.html">$delete_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments&amp;amp;action=delete_url&amp;amp;comment_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('comment').<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l1389"><span class="linenum">1389</span></a>          if( <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> )
<a name="l1390"><span class="linenum">1390</span></a>          {
<a name="l1391"><span class="linenum">1391</span></a>              echo ' &lt;a href=&quot;'.<a class="var it1089" onMouseOver="hilite(1089)" onMouseOut="lolite()" onClick="logVariable('delete_url')" href="../../../_variables/delete_url.html">$delete_url</a>.'&quot; onclick=&quot;<a class="function" onClick="logFunction('delete_comment_url')" href="../../../_functions/delete_comment_url.html" onMouseOver="funcPopup(event,'delete_comment_url')">delete_comment_url</a>('.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'); return false;&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'remove' ).'&lt;/a&gt;';
<a name="l1392"><span class="linenum">1392</span></a>          }
<a name="l1393"><span class="linenum">1393</span></a>          else
<a name="l1394"><span class="linenum">1394</span></a>          {
<a name="l1395"><span class="linenum">1395</span></a>              echo ' &lt;a href=&quot;'.<a class="var it1089" onMouseOver="hilite(1089)" onMouseOut="lolite()" onClick="logVariable('delete_url')" href="../../../_variables/delete_url.html">$delete_url</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'remove' ).'&lt;/a&gt;';
<a name="l1396"><span class="linenum">1396</span></a>          }
<a name="l1397"><span class="linenum">1397</span></a>      }
<a name="l1398"><span class="linenum">1398</span></a>  
<a name="l1399"><span class="linenum">1399</span></a>  
<a name="l1400"><span class="linenum">1400</span></a>      <span class="comment">/**</span>
<a name="l1401"><span class="linenum">1401</span></a>  <span class="comment">     * Display ban icon, which goes to the antispam screen with keyword=author_url</span>
<a name="l1402"><span class="linenum">1402</span></a>  <span class="comment">     *</span>
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment">     * @param boolean true if create ajax button</span>
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment">     * @param boolean true if need permission check, because it wasn't check before</span>
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment">     * @param glue between url params</span>
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">     * @return link on success, false otherwise</span>
<a name="l1407"><span class="linenum">1407</span></a>  <span class="comment">     */</span>
<a name="l1408"><span class="linenum">1408</span></a>  	function <a class="function" onClick="logFunction('banurl_link')" href="../../../_functions/banurl_link.html" onMouseOver="funcPopup(event,'banurl_link')">banurl_link</a>( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it4047" onMouseOver="hilite(4047)" onMouseOut="lolite()" onClick="logVariable('check_perm')" href="../../../_variables/check_perm.html">$check_perm</a> = true, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true )
<a name="l1409"><span class="linenum">1409</span></a>      {
<a name="l1410"><span class="linenum">1410</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1411"><span class="linenum">1411</span></a>  
<a name="l1412"><span class="linenum">1412</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l1413"><span class="linenum">1413</span></a>  
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment">        //$Item = &amp; $this-&gt;get_Item();</span>
<a name="l1415"><span class="linenum">1415</span></a>  
<a name="l1416"><span class="linenum">1416</span></a>          if( <a class="var it4047" onMouseOver="hilite(4047)" onMouseOut="lolite()" onClick="logVariable('check_perm')" href="../../../_variables/check_perm.html">$check_perm</a> &amp;&amp; ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'spamblacklist', 'edit' ) )
<a name="l1417"><span class="linenum">1417</span></a>          { // if current user has no permission to edit spams
<a name="l1418"><span class="linenum">1418</span></a>              return false;
<a name="l1419"><span class="linenum">1419</span></a>          }
<a name="l1420"><span class="linenum">1420</span></a>  
<a name="l1421"><span class="linenum">1421</span></a>          if( <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> )
<a name="l1422"><span class="linenum">1422</span></a>          {
<a name="l1423"><span class="linenum">1423</span></a>              if( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> == NULL )
<a name="l1424"><span class="linenum">1424</span></a>              {
<a name="l1425"><span class="linenum">1425</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' ) );
<a name="l1426"><span class="linenum">1426</span></a>              }
<a name="l1427"><span class="linenum">1427</span></a>              <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l1428"><span class="linenum">1428</span></a>          }
<a name="l1429"><span class="linenum">1429</span></a>          else
<a name="l1430"><span class="linenum">1430</span></a>          {
<a name="l1431"><span class="linenum">1431</span></a>              <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = '';
<a name="l1432"><span class="linenum">1432</span></a>          }
<a name="l1433"><span class="linenum">1433</span></a>  
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">        // TODO: really ban the base domain! - not by keyword</span>
<a name="l1435"><span class="linenum">1435</span></a>          <a class="var it7018" onMouseOver="hilite(7018)" onMouseOut="lolite()" onClick="logVariable('ban_domain')" href="../../../_variables/ban_domain.html">$ban_domain</a> = <a class="function" onClick="logFunction('get_ban_domain')" href="../../../_functions/get_ban_domain.html" onMouseOver="funcPopup(event,'get_ban_domain')">get_ban_domain</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_url')" href="../../../_functions/get_author_url.html" onMouseOver="funcPopup(event,'get_author_url')">get_author_url</a>() );
<a name="l1436"><span class="linenum">1436</span></a>          <a class="var it7019" onMouseOver="hilite(7019)" onMouseOut="lolite()" onClick="logVariable('ban_url')" href="../../../_variables/ban_url.html">$ban_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=antispam&amp;amp;action=ban&amp;amp;keyword='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="var it7018" onMouseOver="hilite(7018)" onMouseOut="lolite()" onClick="logVariable('ban_domain')" href="../../../_variables/ban_domain.html">$ban_domain</a> ).<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('antispam');
<a name="l1437"><span class="linenum">1437</span></a>  
<a name="l1438"><span class="linenum">1438</span></a>          if( <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> )
<a name="l1439"><span class="linenum">1439</span></a>          {
<a name="l1440"><span class="linenum">1440</span></a>              echo ' &lt;a id=&quot;ban_url&quot; href=&quot;'.<a class="var it7019" onMouseOver="hilite(7019)" onMouseOut="lolite()" onClick="logVariable('ban_url')" href="../../../_variables/ban_url.html">$ban_url</a>.'&quot; onclick=&quot;<a class="function" onClick="logFunction('ban_url')" href="../../../_functions/ban_url.html" onMouseOver="funcPopup(event,'ban_url')">ban_url</a>(\''.<a class="var it7018" onMouseOver="hilite(7018)" onMouseOut="lolite()" onClick="logVariable('ban_domain')" href="../../../_variables/ban_domain.html">$ban_domain</a>.'\'); return false;&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'lightning' ).'&lt;/a&gt;';
<a name="l1441"><span class="linenum">1441</span></a>          }
<a name="l1442"><span class="linenum">1442</span></a>          else
<a name="l1443"><span class="linenum">1443</span></a>          {
<a name="l1444"><span class="linenum">1444</span></a>              echo ' &lt;a href=&quot;'.<a class="var it7019" onMouseOver="hilite(7019)" onMouseOut="lolite()" onClick="logVariable('ban_url')" href="../../../_variables/ban_url.html">$ban_url</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'lightning' ).'&lt;/a&gt; ';
<a name="l1445"><span class="linenum">1445</span></a>          }
<a name="l1446"><span class="linenum">1446</span></a>      }
<a name="l1447"><span class="linenum">1447</span></a>  
<a name="l1448"><span class="linenum">1448</span></a>  
<a name="l1449"><span class="linenum">1449</span></a>      <span class="comment">/**</span>
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment">     * Displays button for deleting the Comment if user has proper rights</span>
<a name="l1451"><span class="linenum">1451</span></a>  <span class="comment">     *</span>
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment">     * @param string link text</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">     * @param string link title</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">     * @param string class name</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">     * @param boolean true to make this a button instead of a link</span>
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">     * @param boolean save context?</span>
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment">     * @param boolean true if create AJAX button</span>
<a name="l1461"><span class="linenum">1461</span></a>  <span class="comment">     * @param string confirmation text</span>
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment">     * @param string Redirect url</span>
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment">     */</span>
<a name="l1464"><span class="linenum">1464</span></a>  	function <a class="function" onClick="logFunction('delete_link')" href="../../../_functions/delete_link.html" onMouseOver="funcPopup(event,'delete_link')">delete_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../../_variables/button.html">$button</a> = false, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a> = '#', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = NULL )
<a name="l1465"><span class="linenum">1465</span></a>      {
<a name="l1466"><span class="linenum">1466</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1467"><span class="linenum">1467</span></a>  
<a name="l1468"><span class="linenum">1468</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l1469"><span class="linenum">1469</span></a>  
<a name="l1470"><span class="linenum">1470</span></a>          if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>) )
<a name="l1471"><span class="linenum">1471</span></a>          {    // Happens in Preview
<a name="l1472"><span class="linenum">1472</span></a>              return false;
<a name="l1473"><span class="linenum">1473</span></a>          }
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l1476"><span class="linenum">1476</span></a>  
<a name="l1477"><span class="linenum">1477</span></a>          if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'delete', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l1478"><span class="linenum">1478</span></a>          { // If User has no permission to delete a comments:
<a name="l1479"><span class="linenum">1479</span></a>              return false;
<a name="l1480"><span class="linenum">1480</span></a>          }
<a name="l1481"><span class="linenum">1481</span></a>  
<a name="l1482"><span class="linenum">1482</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' )
<a name="l1483"><span class="linenum">1483</span></a>          { // Use icon+text as default, if not displayed as <a class="function" onClick="logFunction('button')" href="../../../_functions/button.html" onMouseOver="funcPopup(event,'button')">button</a> (otherwise just the text)
<a name="l1484"><span class="linenum">1484</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'trash' || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() ) ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete!') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Recycle!');
<a name="l1485"><span class="linenum">1485</span></a>              if( ! <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../../_variables/button.html">$button</a> )
<a name="l1486"><span class="linenum">1486</span></a>              { // Append icon before text
<a name="l1487"><span class="linenum">1487</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'trash' || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() ? <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'delete' ) : <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'recycle' ) ).' '.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>;
<a name="l1488"><span class="linenum">1488</span></a>              }
<a name="l1489"><span class="linenum">1489</span></a>          }
<a name="l1490"><span class="linenum">1490</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' )
<a name="l1491"><span class="linenum">1491</span></a>          { // Set default title
<a name="l1492"><span class="linenum">1492</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'trash' || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() ) ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete this comment') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Recycle this comment');
<a name="l1493"><span class="linenum">1493</span></a>          }
<a name="l1494"><span class="linenum">1494</span></a>  
<a name="l1495"><span class="linenum">1495</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action=delete'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'comment_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('comment');
<a name="l1496"><span class="linenum">1496</span></a>          if( <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> )
<a name="l1497"><span class="linenum">1497</span></a>          {
<a name="l1498"><span class="linenum">1498</span></a>              if( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> != NULL )
<a name="l1499"><span class="linenum">1499</span></a>              {
<a name="l1500"><span class="linenum">1500</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l1501"><span class="linenum">1501</span></a>              }
<a name="l1502"><span class="linenum">1502</span></a>              else
<a name="l1503"><span class="linenum">1503</span></a>              {
<a name="l1504"><span class="linenum">1504</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' ) );
<a name="l1505"><span class="linenum">1505</span></a>              }
<a name="l1506"><span class="linenum">1506</span></a>          }
<a name="l1507"><span class="linenum">1507</span></a>  
<a name="l1508"><span class="linenum">1508</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1509"><span class="linenum">1509</span></a>          if( <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> &amp;&amp; ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> != 'trash' ) )
<a name="l1510"><span class="linenum">1510</span></a>          {
<a name="l1511"><span class="linenum">1511</span></a>              <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('comment_type')" href="../../../_variables/comment_type.html">$comment_type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() ? 'meta' : 'feedback';
<a name="l1512"><span class="linenum">1512</span></a>              echo '&lt;a href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot; onclick=&quot;<a class="function" onClick="logFunction('deleteComment')" href="../../../_functions/deletecomment.html" onMouseOver="funcPopup(event,'deletecomment')">deleteComment</a>('.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', \''.<a class="function" onClick="logFunction('request_from')" href="../../../_functions/request_from.html" onMouseOver="funcPopup(event,'request_from')">request_from</a>().'\', \''.<a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('comment_type')" href="../../../_variables/comment_type.html">$comment_type</a>.'\'); return false;&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l1513"><span class="linenum">1513</span></a>              if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) echo ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l1514"><span class="linenum">1514</span></a>              echo '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l1515"><span class="linenum">1515</span></a>          }
<a name="l1516"><span class="linenum">1516</span></a>          else
<a name="l1517"><span class="linenum">1517</span></a>          {
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">            // JS confirm is required only when the comment is not in the recycle bin yet</span>
<a name="l1519"><span class="linenum">1519</span></a>              <a class="var it7020" onMouseOver="hilite(7020)" onMouseOut="lolite()" onClick="logVariable('display_js_confirm')" href="../../../_variables/display_js_confirm.html">$display_js_confirm</a> = ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'trash' );
<a name="l1520"><span class="linenum">1520</span></a>              if( <a class="var it7020" onMouseOver="hilite(7020)" onMouseOut="lolite()" onClick="logVariable('display_js_confirm')" href="../../../_variables/display_js_confirm.html">$display_js_confirm</a> &amp;&amp; ( <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a> == '#' ) )
<a name="l1521"><span class="linenum">1521</span></a>              { // Set js confirm text on comment delete action
<a name="l1522"><span class="linenum">1522</span></a>                  <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a> = <a class="function" onClick="logFunction('TS_')" href="../../../_functions/ts_.html" onMouseOver="funcPopup(event,'ts_')">TS_</a>('You are about to delete this comment!\\nThis cannot be undone!');
<a name="l1523"><span class="linenum">1523</span></a>              }
<a name="l1524"><span class="linenum">1524</span></a>  
<a name="l1525"><span class="linenum">1525</span></a>              if( <a class="var it1624" onMouseOver="hilite(1624)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../../_variables/button.html">$button</a> )
<a name="l1526"><span class="linenum">1526</span></a>              { // Display as button
<a name="l1527"><span class="linenum">1527</span></a>                  echo '&lt;input type=&quot;button&quot;';
<a name="l1528"><span class="linenum">1528</span></a>                  echo ' value=&quot;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l1529"><span class="linenum">1529</span></a>                  if( <a class="var it7020" onMouseOver="hilite(7020)" onMouseOut="lolite()" onClick="logVariable('display_js_confirm')" href="../../../_variables/display_js_confirm.html">$display_js_confirm</a> )
<a name="l1530"><span class="linenum">1530</span></a>                  {
<a name="l1531"><span class="linenum">1531</span></a>                      echo ' onclick=&quot;if ( confirm(\''.<a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a>.'\') ) { document.location.href=\''.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'\' }&quot;';
<a name="l1532"><span class="linenum">1532</span></a>                  }
<a name="l1533"><span class="linenum">1533</span></a>                  if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) echo ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l1534"><span class="linenum">1534</span></a>                  echo '/&gt;';
<a name="l1535"><span class="linenum">1535</span></a>              }
<a name="l1536"><span class="linenum">1536</span></a>              else
<a name="l1537"><span class="linenum">1537</span></a>              { // Display as link
<a name="l1538"><span class="linenum">1538</span></a>                  echo '&lt;a href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l1539"><span class="linenum">1539</span></a>                  if( <a class="var it7020" onMouseOver="hilite(7020)" onMouseOut="lolite()" onClick="logVariable('display_js_confirm')" href="../../../_variables/display_js_confirm.html">$display_js_confirm</a> )
<a name="l1540"><span class="linenum">1540</span></a>                  {
<a name="l1541"><span class="linenum">1541</span></a>                      echo ' onclick=&quot;return confirm(\''.<a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('confirm_text')" href="../../../_variables/confirm_text.html">$confirm_text</a>.'\')&quot;';
<a name="l1542"><span class="linenum">1542</span></a>                  }
<a name="l1543"><span class="linenum">1543</span></a>                  if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) echo ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l1544"><span class="linenum">1544</span></a>                  echo '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l1545"><span class="linenum">1545</span></a>              }
<a name="l1546"><span class="linenum">1546</span></a>          }
<a name="l1547"><span class="linenum">1547</span></a>          echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1548"><span class="linenum">1548</span></a>  
<a name="l1549"><span class="linenum">1549</span></a>          return true;
<a name="l1550"><span class="linenum">1550</span></a>      }
<a name="l1551"><span class="linenum">1551</span></a>  
<a name="l1552"><span class="linenum">1552</span></a>  
<a name="l1553"><span class="linenum">1553</span></a>      <span class="comment">/**</span>
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">     * Provide link to deprecate a comment if user has edit rights</span>
<a name="l1555"><span class="linenum">1555</span></a>  <span class="comment">     *</span>
<a name="l1556"><span class="linenum">1556</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l1557"><span class="linenum">1557</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l1558"><span class="linenum">1558</span></a>  <span class="comment">     * @param string link text</span>
<a name="l1559"><span class="linenum">1559</span></a>  <span class="comment">     * @param string link title</span>
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">     * @param string class name</span>
<a name="l1561"><span class="linenum">1561</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l1562"><span class="linenum">1562</span></a>  <span class="comment">     * @param boolean save context?</span>
<a name="l1563"><span class="linenum">1563</span></a>  <span class="comment">     * @param boolean true if create AJAX button</span>
<a name="l1564"><span class="linenum">1564</span></a>  <span class="comment">     */</span>
<a name="l1565"><span class="linenum">1565</span></a>  	function <a class="function" onClick="logFunction('get_deprecate_link')" href="../../../_functions/get_deprecate_link.html" onMouseOver="funcPopup(event,'get_deprecate_link')">get_deprecate_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = NULL )
<a name="l1566"><span class="linenum">1566</span></a>      {
<a name="l1567"><span class="linenum">1567</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) )
<a name="l1570"><span class="linenum">1570</span></a>          {
<a name="l1571"><span class="linenum">1571</span></a>              return false;
<a name="l1572"><span class="linenum">1572</span></a>          }
<a name="l1573"><span class="linenum">1573</span></a>  
<a name="l1574"><span class="linenum">1574</span></a>          if( ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'deprecated' ) // Already deprecated!
<a name="l1575"><span class="linenum">1575</span></a>              || !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!deprecated', 'moderate', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l1576"><span class="linenum">1576</span></a>          { // User has no right to deprecated this comment:
<a name="l1577"><span class="linenum">1577</span></a>              return false;
<a name="l1578"><span class="linenum">1578</span></a>          }
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>          <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> = 'deprecated';
<a name="l1581"><span class="linenum">1581</span></a>          <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-array' );
<a name="l1582"><span class="linenum">1582</span></a>          <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-index', array( 'redirected' ) );
<a name="l1583"><span class="linenum">1583</span></a>          if( isset( <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[ <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> ] ) &amp;&amp;
<a name="l1584"><span class="linenum">1584</span></a>              isset( <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[ <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[ <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> ] ] ) &amp;&amp;
<a name="l1585"><span class="linenum">1585</span></a>              ! empty( <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[ <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[ <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> ] ][3] ) )
<a name="l1586"><span class="linenum">1586</span></a>          { // Get color of button icon
<a name="l1587"><span class="linenum">1587</span></a>              <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('status_icon_color')" href="../../../_variables/status_icon_color.html">$status_icon_color</a> = <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[ <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[ <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> ] ][3];
<a name="l1588"><span class="linenum">1588</span></a>          }
<a name="l1589"><span class="linenum">1589</span></a>          else
<a name="l1590"><span class="linenum">1590</span></a>          { // Use grey arrow as default
<a name="l1591"><span class="linenum">1591</span></a>              <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('status_icon_color')" href="../../../_variables/status_icon_color.html">$status_icon_color</a> = 'grey';
<a name="l1592"><span class="linenum">1592</span></a>          }
<a name="l1593"><span class="linenum">1593</span></a>  
<a name="l1594"><span class="linenum">1594</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(
<a name="l1595"><span class="linenum">1595</span></a>              'before' =&gt; <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>,
<a name="l1596"><span class="linenum">1596</span></a>              'after'  =&gt; <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>,
<a name="l1597"><span class="linenum">1597</span></a>              'text'   =&gt; ( ( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' ) ?  <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'move_down_'.<a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('status_icon_color')" href="../../../_variables/status_icon_color.html">$status_icon_color</a> ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Deprecate!') : <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> ),
<a name="l1598"><span class="linenum">1598</span></a>              'title'  =&gt; <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>,
<a name="l1599"><span class="linenum">1599</span></a>              'class'  =&gt; <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>,
<a name="l1600"><span class="linenum">1600</span></a>              'glue'   =&gt; <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>,
<a name="l1601"><span class="linenum">1601</span></a>              'save_context' =&gt; <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a>,
<a name="l1602"><span class="linenum">1602</span></a>              'ajax_button'  =&gt; <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a>,
<a name="l1603"><span class="linenum">1603</span></a>              'redirect_to'  =&gt; <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>,
<a name="l1604"><span class="linenum">1604</span></a>              'status' =&gt; 'deprecated',
<a name="l1605"><span class="linenum">1605</span></a>              'action' =&gt; 'restrict'
<a name="l1606"><span class="linenum">1606</span></a>          );
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_moderation_link')" href="../../../_functions/get_moderation_link.html" onMouseOver="funcPopup(event,'get_moderation_link')">get_moderation_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1609"><span class="linenum">1609</span></a>      }
<a name="l1610"><span class="linenum">1610</span></a>  
<a name="l1611"><span class="linenum">1611</span></a>  
<a name="l1612"><span class="linenum">1612</span></a>      <span class="comment">/**</span>
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">     * Provide link to vote a comment if user has edit rights</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment">     *</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment">     * @param string a vote type</span>
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">     * @param string a vote value</span>
<a name="l1617"><span class="linenum">1617</span></a>  <span class="comment">     * @param string class name</span>
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l1619"><span class="linenum">1619</span></a>  <span class="comment">     * @param boolean save context?</span>
<a name="l1620"><span class="linenum">1620</span></a>  <span class="comment">     * @param boolean true if create AJAX button</span>
<a name="l1621"><span class="linenum">1621</span></a>  <span class="comment">     * @param array Params</span>
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment">     */</span>
<a name="l1623"><span class="linenum">1623</span></a>  	function <a class="function" onClick="logFunction('get_vote_link')" href="../../../_functions/get_vote_link.html" onMouseOver="funcPopup(event,'get_vote_link')">get_vote_link</a>( <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>, <a class="var it6999" onMouseOver="hilite(6999)" onMouseOut="lolite()" onClick="logVariable('vote_value')" href="../../../_variables/vote_value.html">$vote_value</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1624"><span class="linenum">1624</span></a>      {
<a name="l1625"><span class="linenum">1625</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1626"><span class="linenum">1626</span></a>                  'title_spam'          =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as spam!'),
<a name="l1627"><span class="linenum">1627</span></a>                  'title_spam_voted'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You think this comment is spam'),
<a name="l1628"><span class="linenum">1628</span></a>                  'title_notsure'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as not sure!'),
<a name="l1629"><span class="linenum">1629</span></a>                  'title_notsure_voted' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You are not sure about this comment'),
<a name="l1630"><span class="linenum">1630</span></a>                  'title_ok'            =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as OK!'),
<a name="l1631"><span class="linenum">1631</span></a>                  'title_ok_voted'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You think this comment is OK'),
<a name="l1632"><span class="linenum">1632</span></a>                  'title_yes'           =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as helpful!'),
<a name="l1633"><span class="linenum">1633</span></a>                  'title_yes_voted'     =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You think this comment is helpful'),
<a name="l1634"><span class="linenum">1634</span></a>                  'title_no'            =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as not helpful!'),
<a name="l1635"><span class="linenum">1635</span></a>                  'title_no_voted'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You think this comment is not helpful'),
<a name="l1636"><span class="linenum">1636</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1637"><span class="linenum">1637</span></a>  
<a name="l1638"><span class="linenum">1638</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1639"><span class="linenum">1639</span></a>  
<a name="l1640"><span class="linenum">1640</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l1641"><span class="linenum">1641</span></a>  
<a name="l1642"><span class="linenum">1642</span></a>          <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> = false;
<a name="l1643"><span class="linenum">1643</span></a>          <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a> = array();
<a name="l1644"><span class="linenum">1644</span></a>          if( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> == 'voted' )
<a name="l1645"><span class="linenum">1645</span></a>          { // Current user already voted for this
<a name="l1646"><span class="linenum">1646</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '';
<a name="l1647"><span class="linenum">1647</span></a>              <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> = true;
<a name="l1648"><span class="linenum">1648</span></a>              <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a> = array( 'class' =&gt; 'voted' );
<a name="l1649"><span class="linenum">1649</span></a>          }
<a name="l1650"><span class="linenum">1650</span></a>  
<a name="l1651"><span class="linenum">1651</span></a>          switch( <a class="var it6999" onMouseOver="hilite(6999)" onMouseOut="lolite()" onClick="logVariable('vote_value')" href="../../../_variables/vote_value.html">$vote_value</a> )
<a name="l1652"><span class="linenum">1652</span></a>          {
<a name="l1653"><span class="linenum">1653</span></a>              case &quot;spam&quot;:
<a name="l1654"><span class="linenum">1654</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_spam_voted'] : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_spam'];
<a name="l1655"><span class="linenum">1655</span></a>                  <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a>['title'] = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l1656"><span class="linenum">1656</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'vote_spam'.( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> != '' ? '_'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> : '' ), 'imgtag', <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a> );
<a name="l1657"><span class="linenum">1657</span></a>                  <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' '.<a class="function" onClick="logFunction('button_class')" href="../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>();
<a name="l1658"><span class="linenum">1658</span></a>              break;
<a name="l1659"><span class="linenum">1659</span></a>              case &quot;notsure&quot;:
<a name="l1660"><span class="linenum">1660</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_notsure_voted'] : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_notsure'];
<a name="l1661"><span class="linenum">1661</span></a>                  <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a>['title'] = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l1662"><span class="linenum">1662</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'vote_notsure'.( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> != '' ? '_'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> : '' ), 'imgtag', <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a> );
<a name="l1663"><span class="linenum">1663</span></a>                  <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' '.<a class="function" onClick="logFunction('button_class')" href="../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>();
<a name="l1664"><span class="linenum">1664</span></a>              break;
<a name="l1665"><span class="linenum">1665</span></a>              case &quot;ok&quot;:
<a name="l1666"><span class="linenum">1666</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_ok_voted'] : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_ok'];
<a name="l1667"><span class="linenum">1667</span></a>                  <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a>['title'] = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l1668"><span class="linenum">1668</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'vote_ok'.( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> != '' ? '_'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> : '' ), 'imgtag', <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a> );
<a name="l1669"><span class="linenum">1669</span></a>                  <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' '.<a class="function" onClick="logFunction('button_class')" href="../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>();
<a name="l1670"><span class="linenum">1670</span></a>              break;
<a name="l1671"><span class="linenum">1671</span></a>              case &quot;yes&quot;:
<a name="l1672"><span class="linenum">1672</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_yes_voted'] : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_yes'];
<a name="l1673"><span class="linenum">1673</span></a>                  <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a>['title'] = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l1674"><span class="linenum">1674</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'thumb_up'.( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> != '' ? '_'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> : '' ), 'imgtag', <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a> );
<a name="l1675"><span class="linenum">1675</span></a>              break;
<a name="l1676"><span class="linenum">1676</span></a>              case &quot;no&quot;:
<a name="l1677"><span class="linenum">1677</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> ? <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_no_voted'] : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_no'];
<a name="l1678"><span class="linenum">1678</span></a>                  <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a>['title'] = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l1679"><span class="linenum">1679</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'thumb_down'.( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> != '' ? '_'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> : '' ), 'imgtag', <a class="var it6410" onMouseOver="hilite(6410)" onMouseOut="lolite()" onClick="logVariable('icon_params')" href="../../../_variables/icon_params.html">$icon_params</a> );
<a name="l1680"><span class="linenum">1680</span></a>              break;
<a name="l1681"><span class="linenum">1681</span></a>          }
<a name="l1682"><span class="linenum">1682</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, 'disabled' ) !== false )
<a name="l1683"><span class="linenum">1683</span></a>          { // add rollover action for disabled buttons
<a name="l1684"><span class="linenum">1684</span></a>               <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' rollover_sprite';
<a name="l1685"><span class="linenum">1685</span></a>          }
<a name="l1686"><span class="linenum">1686</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' action_icon';
<a name="l1687"><span class="linenum">1687</span></a>  <span class="comment">        // change classes for bootstrap styles</span>
<a name="l1688"><span class="linenum">1688</span></a>          if( <a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> )
<a name="l1689"><span class="linenum">1689</span></a>          {
<a name="l1690"><span class="linenum">1690</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' active';
<a name="l1691"><span class="linenum">1691</span></a>          }
<a name="l1692"><span class="linenum">1692</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( 'disabled', '', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> );
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l1695"><span class="linenum">1695</span></a>          if( !<a class="var it7022" onMouseOver="hilite(7022)" onMouseOut="lolite()" onClick="logVariable('is_voted')" href="../../../_variables/is_voted.html">$is_voted</a> )
<a name="l1696"><span class="linenum">1696</span></a>          { // If user didn't vote for this we should create a link for voting
<a name="l1697"><span class="linenum">1697</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action='.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'value='.<a class="var it6999" onMouseOver="hilite(6999)" onMouseOut="lolite()" onClick="logVariable('vote_value')" href="../../../_variables/vote_value.html">$vote_value</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'comment_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('comment');
<a name="l1698"><span class="linenum">1698</span></a>              if( <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> )
<a name="l1699"><span class="linenum">1699</span></a>              {
<a name="l1700"><span class="linenum">1700</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' ) );
<a name="l1701"><span class="linenum">1701</span></a>              }
<a name="l1702"><span class="linenum">1702</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot;';
<a name="l1703"><span class="linenum">1703</span></a>  
<a name="l1704"><span class="linenum">1704</span></a>              if( <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> )
<a name="l1705"><span class="linenum">1705</span></a>              {
<a name="l1706"><span class="linenum">1706</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' onclick=&quot;<a class="function" onClick="logFunction('setCommentVote')" href="../../../_functions/setcommentvote.html" onMouseOver="funcPopup(event,'setcommentvote')">setCommentVote</a>('.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', \''.<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>.'\' , \''.<a class="var it6999" onMouseOver="hilite(6999)" onMouseOut="lolite()" onClick="logVariable('vote_value')" href="../../../_variables/vote_value.html">$vote_value</a>.'\' ); return false;&quot;';
<a name="l1707"><span class="linenum">1707</span></a>              }
<a name="l1708"><span class="linenum">1708</span></a>  
<a name="l1709"><span class="linenum">1709</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot; class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l1710"><span class="linenum">1710</span></a>          }
<a name="l1711"><span class="linenum">1711</span></a>          else
<a name="l1712"><span class="linenum">1712</span></a>          {
<a name="l1713"><span class="linenum">1713</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;span';
<a name="l1714"><span class="linenum">1714</span></a>              if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) )
<a name="l1715"><span class="linenum">1715</span></a>              {
<a name="l1716"><span class="linenum">1716</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l1717"><span class="linenum">1717</span></a>              }
<a name="l1718"><span class="linenum">1718</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/span&gt;';
<a name="l1719"><span class="linenum">1719</span></a>          }
<a name="l1720"><span class="linenum">1720</span></a>  
<a name="l1721"><span class="linenum">1721</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1722"><span class="linenum">1722</span></a>      }
<a name="l1723"><span class="linenum">1723</span></a>  
<a name="l1724"><span class="linenum">1724</span></a>  
<a name="l1725"><span class="linenum">1725</span></a>      <span class="comment">/**</span>
<a name="l1726"><span class="linenum">1726</span></a>  <span class="comment">     * Display link to deprecate a comment if user has edit rights</span>
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment">     *</span>
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l1729"><span class="linenum">1729</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l1730"><span class="linenum">1730</span></a>  <span class="comment">     * @param string link text</span>
<a name="l1731"><span class="linenum">1731</span></a>  <span class="comment">     * @param string link title</span>
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment">     * @param string class name</span>
<a name="l1733"><span class="linenum">1733</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l1734"><span class="linenum">1734</span></a>  <span class="comment">     * @param boolean save context?</span>
<a name="l1735"><span class="linenum">1735</span></a>  <span class="comment">     * @param boolean true if create AJAX button</span>
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment">     */</span>
<a name="l1737"><span class="linenum">1737</span></a>  	function <a class="function" onClick="logFunction('deprecate_link')" href="../../../_functions/deprecate_link.html" onMouseOver="funcPopup(event,'deprecate_link')">deprecate_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = NULL )
<a name="l1738"><span class="linenum">1738</span></a>      {
<a name="l1739"><span class="linenum">1739</span></a>          <a class="var it1643" onMouseOver="hilite(1643)" onMouseOut="lolite()" onClick="logVariable('deprecate_link')" href="../../../_variables/deprecate_link.html">$deprecate_link</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_deprecate_link')" href="../../../_functions/get_deprecate_link.html" onMouseOver="funcPopup(event,'get_deprecate_link')">get_deprecate_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>, <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>, <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>, <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>, <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a>, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a>, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> );
<a name="l1740"><span class="linenum">1740</span></a>          if( <a class="var it1643" onMouseOver="hilite(1643)" onMouseOut="lolite()" onClick="logVariable('deprecate_link')" href="../../../_variables/deprecate_link.html">$deprecate_link</a> === false )
<a name="l1741"><span class="linenum">1741</span></a>          { // The deprecate link is unavailable for current user and for this comment
<a name="l1742"><span class="linenum">1742</span></a>              return false;
<a name="l1743"><span class="linenum">1743</span></a>          }
<a name="l1744"><span class="linenum">1744</span></a>  
<a name="l1745"><span class="linenum">1745</span></a>  <span class="comment">        // Display the deprecate link</span>
<a name="l1746"><span class="linenum">1746</span></a>          echo <a class="var it1643" onMouseOver="hilite(1643)" onMouseOut="lolite()" onClick="logVariable('deprecate_link')" href="../../../_variables/deprecate_link.html">$deprecate_link</a>;
<a name="l1747"><span class="linenum">1747</span></a>  
<a name="l1748"><span class="linenum">1748</span></a>          return true;
<a name="l1749"><span class="linenum">1749</span></a>      }
<a name="l1750"><span class="linenum">1750</span></a>  
<a name="l1751"><span class="linenum">1751</span></a>  
<a name="l1752"><span class="linenum">1752</span></a>      <span class="comment">/**</span>
<a name="l1753"><span class="linenum">1753</span></a>  <span class="comment">     * Display link to vote a comment as SPAM if user has edit rights</span>
<a name="l1754"><span class="linenum">1754</span></a>  <span class="comment">     *</span>
<a name="l1755"><span class="linenum">1755</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l1756"><span class="linenum">1756</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l1757"><span class="linenum">1757</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l1758"><span class="linenum">1758</span></a>  <span class="comment">     * @param boolean save context?</span>
<a name="l1759"><span class="linenum">1759</span></a>  <span class="comment">     * @param boolean true if create AJAX button</span>
<a name="l1760"><span class="linenum">1760</span></a>  <span class="comment">     * @param array Params</span>
<a name="l1761"><span class="linenum">1761</span></a>  <span class="comment">     */</span>
<a name="l1762"><span class="linenum">1762</span></a>  	function <a class="function" onClick="logFunction('vote_spam')" href="../../../_functions/vote_spam.html" onMouseOver="funcPopup(event,'vote_spam')">vote_spam</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array())
<a name="l1763"><span class="linenum">1763</span></a>      {
<a name="l1764"><span class="linenum">1764</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1765"><span class="linenum">1765</span></a>                  'display'             =&gt; false, // TRUE - to show this tool on loading(Used to make it visible only when JS is enalbed)
<a name="l1766"><span class="linenum">1766</span></a>                  'title_spam'          =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as spam!'),
<a name="l1767"><span class="linenum">1767</span></a>                  'title_spam_voted'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You think this comment is spam'),
<a name="l1768"><span class="linenum">1768</span></a>                  'title_notsure'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as not sure!'),
<a name="l1769"><span class="linenum">1769</span></a>                  'title_notsure_voted' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You are not sure about this comment'),
<a name="l1770"><span class="linenum">1770</span></a>                  'title_ok'            =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as OK!'),
<a name="l1771"><span class="linenum">1771</span></a>                  'title_ok_voted'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You think this comment is OK'),
<a name="l1772"><span class="linenum">1772</span></a>                  'title_empty'         =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No votes on spaminess yet.'),
<a name="l1773"><span class="linenum">1773</span></a>                  'button_group_class'  =&gt; <a class="function" onClick="logFunction('button_class')" href="../../../_functions/button_class.html" onMouseOver="funcPopup(event,'button_class')">button_class</a>( 'group' ),
<a name="l1774"><span class="linenum">1774</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1775"><span class="linenum">1775</span></a>  
<a name="l1776"><span class="linenum">1776</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1777"><span class="linenum">1777</span></a>  
<a name="l1778"><span class="linenum">1778</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l1779"><span class="linenum">1779</span></a>  
<a name="l1780"><span class="linenum">1780</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) || !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_vote_spam_comments', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>() ) )
<a name="l1781"><span class="linenum">1781</span></a>          { // If User has no permission to vote spam
<a name="l1782"><span class="linenum">1782</span></a>              return false;
<a name="l1783"><span class="linenum">1783</span></a>          }
<a name="l1784"><span class="linenum">1784</span></a>  
<a name="l1785"><span class="linenum">1785</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1786"><span class="linenum">1786</span></a>  
<a name="l1787"><span class="linenum">1787</span></a>          <a class="var it7023" onMouseOver="hilite(7023)" onMouseOut="lolite()" onClick="logVariable('style')" href="../../../_variables/style.html">$style</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display'] ? '' : ' style=&quot;display:none&quot;';
<a name="l1788"><span class="linenum">1788</span></a>          echo '&lt;div id=&quot;vote_spam_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&quot; class=&quot;vote_spam&quot;'.<a class="var it7023" onMouseOver="hilite(7023)" onMouseOut="lolite()" onClick="logVariable('style')" href="../../../_variables/style.html">$style</a>.'&gt;';
<a name="l1789"><span class="linenum">1789</span></a>  
<a name="l1790"><span class="linenum">1790</span></a>          <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('vote_result')" href="../../../_variables/vote_result.html">$vote_result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_vote_spam_disabled')" href="../../../_functions/get_vote_spam_disabled.html" onMouseOver="funcPopup(event,'get_vote_spam_disabled')">get_vote_spam_disabled</a>();
<a name="l1791"><span class="linenum">1791</span></a>  
<a name="l1792"><span class="linenum">1792</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_user_ID.html">author_user_ID</a> )
<a name="l1793"><span class="linenum">1793</span></a>          { // Display only vote summary for users on their own comments
<a name="l1794"><span class="linenum">1794</span></a>              <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('result_summary')" href="../../../_variables/result_summary.html">$result_summary</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_vote_summary')" href="../../../_functions/get_vote_summary.html" onMouseOver="funcPopup(event,'get_vote_summary')">get_vote_summary</a>( 'spam', array(
<a name="l1795"><span class="linenum">1795</span></a>                      'result_title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Spam consensus:'),
<a name="l1796"><span class="linenum">1796</span></a>                      'after_result' =&gt; '.',
<a name="l1797"><span class="linenum">1797</span></a>                  ) );
<a name="l1798"><span class="linenum">1798</span></a>              echo ( !empty( <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('result_summary')" href="../../../_variables/result_summary.html">$result_summary</a> ) ? <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('result_summary')" href="../../../_variables/result_summary.html">$result_summary</a> : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_empty'] );
<a name="l1799"><span class="linenum">1799</span></a>          }
<a name="l1800"><span class="linenum">1800</span></a>          else
<a name="l1801"><span class="linenum">1801</span></a>          { // Display form to vote
<a name="l1802"><span class="linenum">1802</span></a>              echo <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Spam Vote:').' ';
<a name="l1803"><span class="linenum">1803</span></a>  
<a name="l1804"><span class="linenum">1804</span></a>              echo '&lt;span class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['button_group_class'].'&quot;&gt;';
<a name="l1805"><span class="linenum">1805</span></a>              foreach( <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('vote_result')" href="../../../_variables/vote_result.html">$vote_result</a>['icons_statuses'] as <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a> =&gt; <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('vote_class')" href="../../../_variables/vote_class.html">$vote_class</a> )
<a name="l1806"><span class="linenum">1806</span></a>              { // Print out 3 buttons for spam voting
<a name="l1807"><span class="linenum">1807</span></a>                  echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_vote_link')" href="../../../_functions/get_vote_link.html" onMouseOver="funcPopup(event,'get_vote_link')">get_vote_link</a>( 'spam', <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('vote_type')" href="../../../_variables/vote_type.html">$vote_type</a>, <a class="var it7026" onMouseOver="hilite(7026)" onMouseOut="lolite()" onClick="logVariable('vote_class')" href="../../../_variables/vote_class.html">$vote_class</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>, <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a>, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1808"><span class="linenum">1808</span></a>              }
<a name="l1809"><span class="linenum">1809</span></a>              echo '&lt;/span&gt;';
<a name="l1810"><span class="linenum">1810</span></a>  
<a name="l1811"><span class="linenum">1811</span></a>              if( <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('vote_result')" href="../../../_variables/vote_result.html">$vote_result</a>['is_voted'] )
<a name="l1812"><span class="linenum">1812</span></a>              { // Display vote summary if user already voted on this comment
<a name="l1813"><span class="linenum">1813</span></a>                  echo ' '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_vote_summary')" href="../../../_functions/get_vote_summary.html" onMouseOver="funcPopup(event,'get_vote_summary')">get_vote_summary</a>( 'spam', array(
<a name="l1814"><span class="linenum">1814</span></a>                          'result_title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Consensus:'),
<a name="l1815"><span class="linenum">1815</span></a>                          'after_result' =&gt; '.',
<a name="l1816"><span class="linenum">1816</span></a>                      ) );
<a name="l1817"><span class="linenum">1817</span></a>              }
<a name="l1818"><span class="linenum">1818</span></a>          }
<a name="l1819"><span class="linenum">1819</span></a>  
<a name="l1820"><span class="linenum">1820</span></a>          echo '&lt;/div&gt;';
<a name="l1821"><span class="linenum">1821</span></a>  
<a name="l1822"><span class="linenum">1822</span></a>          echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1823"><span class="linenum">1823</span></a>      }
<a name="l1824"><span class="linenum">1824</span></a>  
<a name="l1825"><span class="linenum">1825</span></a>  
<a name="l1826"><span class="linenum">1826</span></a>      <span class="comment">/**</span>
<a name="l1827"><span class="linenum">1827</span></a>  <span class="comment">     * Display links to vote a comment as HELPFUL if user is logged</span>
<a name="l1828"><span class="linenum">1828</span></a>  <span class="comment">     *</span>
<a name="l1829"><span class="linenum">1829</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l1830"><span class="linenum">1830</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l1831"><span class="linenum">1831</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l1832"><span class="linenum">1832</span></a>  <span class="comment">     * @param boolean save context?</span>
<a name="l1833"><span class="linenum">1833</span></a>  <span class="comment">     * @param boolean true if create AJAX button</span>
<a name="l1834"><span class="linenum">1834</span></a>  <span class="comment">     * @param array Params</span>
<a name="l1835"><span class="linenum">1835</span></a>  <span class="comment">     */</span>
<a name="l1836"><span class="linenum">1836</span></a>  	function <a class="function" onClick="logFunction('vote_helpful')" href="../../../_functions/vote_helpful.html" onMouseOver="funcPopup(event,'vote_helpful')">vote_helpful</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1837"><span class="linenum">1837</span></a>      {
<a name="l1838"><span class="linenum">1838</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1839"><span class="linenum">1839</span></a>                  'helpful_text'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Is this comment helpful?'),
<a name="l1840"><span class="linenum">1840</span></a>                  'title_yes'       =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as helpful!'),
<a name="l1841"><span class="linenum">1841</span></a>                  'title_yes_voted' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You think this comment is helpful'),
<a name="l1842"><span class="linenum">1842</span></a>                  'title_no'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Mark this comment as not helpful!'),
<a name="l1843"><span class="linenum">1843</span></a>                  'title_no_voted'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You think this comment is not helpful'),
<a name="l1844"><span class="linenum">1844</span></a>                  'title_empty'     =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No votes on helpfulness yet.'),
<a name="l1845"><span class="linenum">1845</span></a>                  'class'           =&gt; '',
<a name="l1846"><span class="linenum">1846</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1847"><span class="linenum">1847</span></a>  
<a name="l1848"><span class="linenum">1848</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1849"><span class="linenum">1849</span></a>  
<a name="l1850"><span class="linenum">1850</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l1851"><span class="linenum">1851</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l1852"><span class="linenum">1852</span></a>  
<a name="l1853"><span class="linenum">1853</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) || ! <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it10681" onMouseOver="hilite(10681)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('allow_rating_comment_helpfulness') )
<a name="l1854"><span class="linenum">1854</span></a>          { // If User is not logged OR Users cannot vote
<a name="l1855"><span class="linenum">1855</span></a>              return false;
<a name="l1856"><span class="linenum">1856</span></a>          }
<a name="l1857"><span class="linenum">1857</span></a>  
<a name="l1858"><span class="linenum">1858</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1859"><span class="linenum">1859</span></a>  
<a name="l1860"><span class="linenum">1860</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '';
<a name="l1861"><span class="linenum">1861</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) )
<a name="l1862"><span class="linenum">1862</span></a>          {
<a name="l1863"><span class="linenum">1863</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'].'&quot;';
<a name="l1864"><span class="linenum">1864</span></a>          }
<a name="l1865"><span class="linenum">1865</span></a>  
<a name="l1866"><span class="linenum">1866</span></a>          echo '&lt;span id=&quot;vote_helpful_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&gt; &amp;nbsp; ';
<a name="l1867"><span class="linenum">1867</span></a>  
<a name="l1868"><span class="linenum">1868</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_user_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_user_ID.html">author_user_ID</a> )
<a name="l1869"><span class="linenum">1869</span></a>          { // Display only vote summary for users on their own comments
<a name="l1870"><span class="linenum">1870</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['result_title_undecided'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Helpfulness:');
<a name="l1871"><span class="linenum">1871</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_result'] = '.';
<a name="l1872"><span class="linenum">1872</span></a>              <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('result_summary')" href="../../../_variables/result_summary.html">$result_summary</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_vote_summary')" href="../../../_functions/get_vote_summary.html" onMouseOver="funcPopup(event,'get_vote_summary')">get_vote_summary</a>( 'helpful', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1873"><span class="linenum">1873</span></a>              echo ( !empty( <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('result_summary')" href="../../../_variables/result_summary.html">$result_summary</a> ) ? <a class="var it7025" onMouseOver="hilite(7025)" onMouseOut="lolite()" onClick="logVariable('result_summary')" href="../../../_variables/result_summary.html">$result_summary</a> : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_empty'] );
<a name="l1874"><span class="linenum">1874</span></a>          }
<a name="l1875"><span class="linenum">1875</span></a>          else
<a name="l1876"><span class="linenum">1876</span></a>          { // Display form to vote
<a name="l1877"><span class="linenum">1877</span></a>              <a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('vote_result')" href="../../../_variables/vote_result.html">$vote_result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_vote_helpful_disabled')" href="../../../_functions/get_vote_helpful_disabled.html" onMouseOver="funcPopup(event,'get_vote_helpful_disabled')">get_vote_helpful_disabled</a>();
<a name="l1878"><span class="linenum">1878</span></a>  
<a name="l1879"><span class="linenum">1879</span></a>              if( !<a class="var it7024" onMouseOver="hilite(7024)" onMouseOut="lolite()" onClick="logVariable('vote_result')" href="../../../_variables/vote_result.html">$vote_result</a>['is_voted'] )
<a name="l1880"><span class="linenum">1880</span></a>              { // Current user didn't vote on this comment
<a name="l1881"><span class="linenum">1881</span></a>                  <a class="var it7027" onMouseOver="hilite(7027)" onMouseOut="lolite()" onClick="logVariable('title_text')" href="../../../_variables/title_text.html">$title_text</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['helpful_text'];
<a name="l1882"><span class="linenum">1882</span></a>              }
<a name="l1883"><span class="linenum">1883</span></a>              else
<a name="l1884"><span class="linenum">1884</span></a>              { // Display vote summary if user already voted on this comment
<a name="l1885"><span class="linenum">1885</span></a>                  <a class="var it7027" onMouseOver="hilite(7027)" onMouseOut="lolite()" onClick="logVariable('title_text')" href="../../../_variables/title_text.html">$title_text</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_vote_summary')" href="../../../_functions/get_vote_summary.html" onMouseOver="funcPopup(event,'get_vote_summary')">get_vote_summary</a>( 'helpful', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1886"><span class="linenum">1886</span></a>              }
<a name="l1887"><span class="linenum">1887</span></a>  
<a name="l1888"><span class="linenum">1888</span></a>              <a class="function" onClick="logFunction('display_voting_form')" href="../../../_functions/display_voting_form.html" onMouseOver="funcPopup(event,'display_voting_form')">display_voting_form</a>( array(
<a name="l1889"><span class="linenum">1889</span></a>                      'vote_type'             =&gt; 'comment',
<a name="l1890"><span class="linenum">1890</span></a>                      'vote_ID'               =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>,
<a name="l1891"><span class="linenum">1891</span></a>                      'display_noopinion'     =&gt; false,
<a name="l1892"><span class="linenum">1892</span></a>                      'display_inappropriate' =&gt; false,
<a name="l1893"><span class="linenum">1893</span></a>                      'display_spam'          =&gt; false,
<a name="l1894"><span class="linenum">1894</span></a>                      'title_text'            =&gt; <a class="var it7027" onMouseOver="hilite(7027)" onMouseOut="lolite()" onClick="logVariable('title_text')" href="../../../_variables/title_text.html">$title_text</a>.' ',
<a name="l1895"><span class="linenum">1895</span></a>                      'title_like'            =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_yes'],
<a name="l1896"><span class="linenum">1896</span></a>                      'title_like_voted'      =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_yes_voted'],
<a name="l1897"><span class="linenum">1897</span></a>                      'title_dontlike'        =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_no'],
<a name="l1898"><span class="linenum">1898</span></a>                      'title_dontlike_voted'  =&gt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_no_voted'],
<a name="l1899"><span class="linenum">1899</span></a>                  ) );
<a name="l1900"><span class="linenum">1900</span></a>          }
<a name="l1901"><span class="linenum">1901</span></a>  
<a name="l1902"><span class="linenum">1902</span></a>          echo '&lt;/span&gt;';
<a name="l1903"><span class="linenum">1903</span></a>  
<a name="l1904"><span class="linenum">1904</span></a>          echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1905"><span class="linenum">1905</span></a>      }
<a name="l1906"><span class="linenum">1906</span></a>  
<a name="l1907"><span class="linenum">1907</span></a>  
<a name="l1908"><span class="linenum">1908</span></a>      <span class="comment">/**</span>
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment">     * Get next status to publish/restrict to this comment</span>
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment">     *</span>
<a name="l1911"><span class="linenum">1911</span></a>  <span class="comment">     * @param boolean true to get next publish status, and false to get next restrict status</span>
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment">     * @param string Status that can be used instead of $this-&gt;status</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment">     * @return mixed false if user has no permission | array( status, status_text, icon_color ) otherwise</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment">     */</span>
<a name="l1915"><span class="linenum">1915</span></a>  	function <a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a>, <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('current_status')" href="../../../_variables/current_status.html">$current_status</a> = NULL )
<a name="l1916"><span class="linenum">1916</span></a>      {
<a name="l1917"><span class="linenum">1917</span></a>          if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1918"><span class="linenum">1918</span></a>          {
<a name="l1919"><span class="linenum">1919</span></a>              return false;
<a name="l1920"><span class="linenum">1920</span></a>          }
<a name="l1921"><span class="linenum">1921</span></a>  
<a name="l1922"><span class="linenum">1922</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1923"><span class="linenum">1923</span></a>  
<a name="l1924"><span class="linenum">1924</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('current_status')" href="../../../_variables/current_status.html">$current_status</a> ) )
<a name="l1925"><span class="linenum">1925</span></a>          { // Use status of comment if param is NULL
<a name="l1926"><span class="linenum">1926</span></a>              <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('current_status')" href="../../../_variables/current_status.html">$current_status</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>;
<a name="l1927"><span class="linenum">1927</span></a>          }
<a name="l1928"><span class="linenum">1928</span></a>  
<a name="l1929"><span class="linenum">1929</span></a>          <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-array' );
<a name="l1930"><span class="linenum">1930</span></a>          <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-index', array( 'redirected' ) );
<a name="l1931"><span class="linenum">1931</span></a>  
<a name="l1932"><span class="linenum">1932</span></a>          <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> = <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[<a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('current_status')" href="../../../_variables/current_status.html">$current_status</a>];
<a name="l1933"><span class="linenum">1933</span></a>          if( ( !<a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> ) &amp;&amp; ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> == 0 ) &amp;&amp; ( <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('current_status')" href="../../../_variables/current_status.html">$current_status</a> != 'trash' ) &amp;&amp; ( <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('current_status')" href="../../../_variables/current_status.html">$current_status</a> != 'deprecated' ) )
<a name="l1934"><span class="linenum">1934</span></a>          { // Increase curr_index value to allow deprecated status for the other statuses from the same public level
<a name="l1935"><span class="linenum">1935</span></a>              <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> = <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> + 1;
<a name="l1936"><span class="linenum">1936</span></a>          }
<a name="l1937"><span class="linenum">1937</span></a>          <a class="var it1631" onMouseOver="hilite(1631)" onMouseOut="lolite()" onClick="logVariable('has_perm')" href="../../../_variables/has_perm.html">$has_perm</a> = false;
<a name="l1938"><span class="linenum">1938</span></a>          while( !<a class="var it1631" onMouseOver="hilite(1631)" onMouseOut="lolite()" onClick="logVariable('has_perm')" href="../../../_variables/has_perm.html">$has_perm</a> &amp;&amp; ( <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> ? ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> &lt; 4 ) : ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> &gt; 0 ) ) )
<a name="l1939"><span class="linenum">1939</span></a>          { // Check until the user has permission or there is no more status to check
<a name="l1940"><span class="linenum">1940</span></a>              <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> = <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> ? ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> + 1 ) : ( <a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a> - 1 );
<a name="l1941"><span class="linenum">1941</span></a>              <a class="var it1631" onMouseOver="hilite(1631)" onMouseOut="lolite()" onClick="logVariable('has_perm')" href="../../../_variables/has_perm.html">$has_perm</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!'.<a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a>][0], 'moderate', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l1942"><span class="linenum">1942</span></a>          }
<a name="l1943"><span class="linenum">1943</span></a>          if( <a class="var it1631" onMouseOver="hilite(1631)" onMouseOut="lolite()" onClick="logVariable('has_perm')" href="../../../_variables/has_perm.html">$has_perm</a> )
<a name="l1944"><span class="linenum">1944</span></a>          { // An available status has been found
<a name="l1945"><span class="linenum">1945</span></a>              <a class="var it1632" onMouseOver="hilite(1632)" onMouseOut="lolite()" onClick="logVariable('label_index')" href="../../../_variables/label_index.html">$label_index</a> = <a class="var it1627" onMouseOver="hilite(1627)" onMouseOut="lolite()" onClick="logVariable('publish')" href="../../../_variables/publish.html">$publish</a> ? 1 : 2;
<a name="l1946"><span class="linenum">1946</span></a>              return array( <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a>][0], <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a>][<a class="var it1632" onMouseOver="hilite(1632)" onMouseOut="lolite()" onClick="logVariable('label_index')" href="../../../_variables/label_index.html">$label_index</a>], <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it1630" onMouseOver="hilite(1630)" onMouseOut="lolite()" onClick="logVariable('curr_index')" href="../../../_variables/curr_index.html">$curr_index</a>][3] );
<a name="l1947"><span class="linenum">1947</span></a>          }
<a name="l1948"><span class="linenum">1948</span></a>          return false;
<a name="l1949"><span class="linenum">1949</span></a>      }
<a name="l1950"><span class="linenum">1950</span></a>  
<a name="l1951"><span class="linenum">1951</span></a>  
<a name="l1952"><span class="linenum">1952</span></a>      <span class="comment">/**</span>
<a name="l1953"><span class="linenum">1953</span></a>  <span class="comment">     * Provide link to publish a comment if user has edit rights</span>
<a name="l1954"><span class="linenum">1954</span></a>  <span class="comment">     *</span>
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment">     * @param string link text</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment">     * @param string link title</span>
<a name="l1959"><span class="linenum">1959</span></a>  <span class="comment">     * @param string class name</span>
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l1961"><span class="linenum">1961</span></a>  <span class="comment">     * @param boolean save context?</span>
<a name="l1962"><span class="linenum">1962</span></a>  <span class="comment">     * @param boolean true if create AJAX button</span>
<a name="l1963"><span class="linenum">1963</span></a>  <span class="comment">     */</span>
<a name="l1964"><span class="linenum">1964</span></a>  	function <a class="function" onClick="logFunction('get_publish_link')" href="../../../_functions/get_publish_link.html" onMouseOver="funcPopup(event,'get_publish_link')">get_publish_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = NULL )
<a name="l1965"><span class="linenum">1965</span></a>      {
<a name="l1966"><span class="linenum">1966</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1967"><span class="linenum">1967</span></a>  
<a name="l1968"><span class="linenum">1968</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l1969"><span class="linenum">1969</span></a>  
<a name="l1970"><span class="linenum">1970</span></a>          <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( true );
<a name="l1971"><span class="linenum">1971</span></a>          if( !<a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> )
<a name="l1972"><span class="linenum">1972</span></a>          {
<a name="l1973"><span class="linenum">1973</span></a>              return false;
<a name="l1974"><span class="linenum">1974</span></a>          }
<a name="l1975"><span class="linenum">1975</span></a>  
<a name="l1976"><span class="linenum">1976</span></a>          <a class="var it4532" onMouseOver="hilite(4532)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../../_variables/publish_status.html">$publish_status</a> = <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0];
<a name="l1977"><span class="linenum">1977</span></a>          <a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../_variables/publish_text.html">$publish_text</a> = <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[1];
<a name="l1978"><span class="linenum">1978</span></a>  
<a name="l1979"><span class="linenum">1979</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' ) <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'publish', 'imgtag' ).' '.<a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../_variables/publish_text.html">$publish_text</a>;
<a name="l1980"><span class="linenum">1980</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Publish this comment!');
<a name="l1981"><span class="linenum">1981</span></a>  
<a name="l1982"><span class="linenum">1982</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l1983"><span class="linenum">1983</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action=publish'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'publish_status='.<a class="var it4532" onMouseOver="hilite(4532)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../../_variables/publish_status.html">$publish_status</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'comment_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('comment');
<a name="l1984"><span class="linenum">1984</span></a>          if( <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> )
<a name="l1985"><span class="linenum">1985</span></a>          {
<a name="l1986"><span class="linenum">1986</span></a>              if( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> != NULL )
<a name="l1987"><span class="linenum">1987</span></a>              {
<a name="l1988"><span class="linenum">1988</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l1989"><span class="linenum">1989</span></a>              }
<a name="l1990"><span class="linenum">1990</span></a>              else
<a name="l1991"><span class="linenum">1991</span></a>              {
<a name="l1992"><span class="linenum">1992</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' ) );
<a name="l1993"><span class="linenum">1993</span></a>              }
<a name="l1994"><span class="linenum">1994</span></a>          }
<a name="l1995"><span class="linenum">1995</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot;';
<a name="l1996"><span class="linenum">1996</span></a>  
<a name="l1997"><span class="linenum">1997</span></a>          if( <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> )
<a name="l1998"><span class="linenum">1998</span></a>          {
<a name="l1999"><span class="linenum">1999</span></a>              if( <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> &amp;&amp; ( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> == NULL ) )
<a name="l2000"><span class="linenum">2000</span></a>              {
<a name="l2001"><span class="linenum">2001</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' );
<a name="l2002"><span class="linenum">2002</span></a>              }
<a name="l2003"><span class="linenum">2003</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' onclick=&quot;<a class="function" onClick="logFunction('setCommentStatus')" href="../../../_functions/setcommentstatus.html" onMouseOver="funcPopup(event,'setcommentstatus')">setCommentStatus</a>('.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', \''.<a class="var it4532" onMouseOver="hilite(4532)" onMouseOut="lolite()" onClick="logVariable('publish_status')" href="../../../_variables/publish_status.html">$publish_status</a>.'\', \''.<a class="function" onClick="logFunction('request_from')" href="../../../_functions/request_from.html" onMouseOver="funcPopup(event,'request_from')">request_from</a>().'\', \''.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>.'\'); return false;&quot;';
<a name="l2004"><span class="linenum">2004</span></a>          }
<a name="l2005"><span class="linenum">2005</span></a>  
<a name="l2006"><span class="linenum">2006</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l2007"><span class="linenum">2007</span></a>          if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l2008"><span class="linenum">2008</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l2009"><span class="linenum">2009</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l2010"><span class="linenum">2010</span></a>  
<a name="l2011"><span class="linenum">2011</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2012"><span class="linenum">2012</span></a>      }
<a name="l2013"><span class="linenum">2013</span></a>  
<a name="l2014"><span class="linenum">2014</span></a>  
<a name="l2015"><span class="linenum">2015</span></a>      <span class="comment">/**</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment">     * Get any kind of moderation link where the user status will be changed.</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment">     * This function should be private!</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment">     * TODO: asimo&gt;This function should be used instead the old get_publish_link and get_deprecate_link</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment">     *</span>
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment">     * @param array params</span>
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment">     * @return string the moderate link</span>
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment">     */</span>
<a name="l2023"><span class="linenum">2023</span></a>  	function <a class="function" onClick="logFunction('get_moderation_link')" href="../../../_functions/get_moderation_link.html" onMouseOver="funcPopup(event,'get_moderation_link')">get_moderation_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l2024"><span class="linenum">2024</span></a>      {
<a name="l2025"><span class="linenum">2025</span></a>          global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l2026"><span class="linenum">2026</span></a>  
<a name="l2027"><span class="linenum">2027</span></a>          <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['redirect_to'];
<a name="l2028"><span class="linenum">2028</span></a>          <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'];
<a name="l2029"><span class="linenum">2029</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['action'];
<a name="l2030"><span class="linenum">2030</span></a>          <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['glue'];
<a name="l2031"><span class="linenum">2031</span></a>          <a class="var it7029" onMouseOver="hilite(7029)" onMouseOut="lolite()" onClick="logVariable('status_param')" href="../../../_variables/status_param.html">$status_param</a> = ( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> == 'publish' ) ? 'publish_status' : 'comment_status';
<a name="l2032"><span class="linenum">2032</span></a>  
<a name="l2033"><span class="linenum">2033</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l2034"><span class="linenum">2034</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=comments'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action='.<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.<a class="var it7029" onMouseOver="hilite(7029)" onMouseOut="lolite()" onClick="logVariable('status_param')" href="../../../_variables/status_param.html">$status_param</a>.'='.<a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'comment_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('comment');
<a name="l2035"><span class="linenum">2035</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['save_context'] )
<a name="l2036"><span class="linenum">2036</span></a>          {
<a name="l2037"><span class="linenum">2037</span></a>              if( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> != NULL )
<a name="l2038"><span class="linenum">2038</span></a>              {
<a name="l2039"><span class="linenum">2039</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>;
<a name="l2040"><span class="linenum">2040</span></a>              }
<a name="l2041"><span class="linenum">2041</span></a>              else
<a name="l2042"><span class="linenum">2042</span></a>              {
<a name="l2043"><span class="linenum">2043</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' ) );
<a name="l2044"><span class="linenum">2044</span></a>              }
<a name="l2045"><span class="linenum">2045</span></a>          }
<a name="l2046"><span class="linenum">2046</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&quot;';
<a name="l2047"><span class="linenum">2047</span></a>  
<a name="l2048"><span class="linenum">2048</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['ajax_button'] )
<a name="l2049"><span class="linenum">2049</span></a>          {
<a name="l2050"><span class="linenum">2050</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['save_context'] &amp;&amp; ( <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> == NULL ) )
<a name="l2051"><span class="linenum">2051</span></a>              {
<a name="l2052"><span class="linenum">2052</span></a>                  <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', 'filter=restore', '', '&amp;' );
<a name="l2053"><span class="linenum">2053</span></a>              }
<a name="l2054"><span class="linenum">2054</span></a>              <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('comment_type')" href="../../../_variables/comment_type.html">$comment_type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() ? 'meta' : 'feedback';
<a name="l2055"><span class="linenum">2055</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' onclick=&quot;<a class="function" onClick="logFunction('setCommentStatus')" href="../../../_functions/setcommentstatus.html" onMouseOver="funcPopup(event,'setcommentstatus')">setCommentStatus</a>('.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', \''.<a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a>.'\', \''.<a class="function" onClick="logFunction('request_from')" href="../../../_functions/request_from.html" onMouseOver="funcPopup(event,'request_from')">request_from</a>().'\', \''.<a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>.'\' ); return false;&quot;';
<a name="l2056"><span class="linenum">2056</span></a>          }
<a name="l2057"><span class="linenum">2057</span></a>  
<a name="l2058"><span class="linenum">2058</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'moderation-titles' );
<a name="l2059"><span class="linenum">2059</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' title=&quot;'.<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a>[<a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a>].'&quot;';
<a name="l2060"><span class="linenum">2060</span></a>          if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'].'&quot;';
<a name="l2061"><span class="linenum">2061</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'].'&lt;/a&gt;';
<a name="l2062"><span class="linenum">2062</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l2063"><span class="linenum">2063</span></a>  
<a name="l2064"><span class="linenum">2064</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2065"><span class="linenum">2065</span></a>      }
<a name="l2066"><span class="linenum">2066</span></a>  
<a name="l2067"><span class="linenum">2067</span></a>  
<a name="l2068"><span class="linenum">2068</span></a>      <span class="comment">/**</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment">     * Display link to publish a comment if user has edit rights</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">     * TODO: asimo&gt; Use params array instead of so many param</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">     *</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l2074"><span class="linenum">2074</span></a>  <span class="comment">     * @param string link text</span>
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment">     * @param string link title</span>
<a name="l2076"><span class="linenum">2076</span></a>  <span class="comment">     * @param string class name</span>
<a name="l2077"><span class="linenum">2077</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l2078"><span class="linenum">2078</span></a>  <span class="comment">     * @param boolean save context?</span>
<a name="l2079"><span class="linenum">2079</span></a>  <span class="comment">     * @param boolean true if create AJAX button</span>
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment">     * @return boolean TRUE - if the publish link is available</span>
<a name="l2081"><span class="linenum">2081</span></a>  <span class="comment">     */</span>
<a name="l2082"><span class="linenum">2082</span></a>  	function <a class="function" onClick="logFunction('publish_link')" href="../../../_functions/publish_link.html" onMouseOver="funcPopup(event,'publish_link')">publish_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a> = true, <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a> = false, <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a> = NULL )
<a name="l2083"><span class="linenum">2083</span></a>      {
<a name="l2084"><span class="linenum">2084</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l2085"><span class="linenum">2085</span></a>  
<a name="l2086"><span class="linenum">2086</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l2087"><span class="linenum">2087</span></a>  
<a name="l2088"><span class="linenum">2088</span></a>          if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l2089"><span class="linenum">2089</span></a>          { // User has no permission to edit this comment
<a name="l2090"><span class="linenum">2090</span></a>              return false;
<a name="l2091"><span class="linenum">2091</span></a>          }
<a name="l2092"><span class="linenum">2092</span></a>  
<a name="l2093"><span class="linenum">2093</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l2094"><span class="linenum">2094</span></a>          <a class="var it7030" onMouseOver="hilite(7030)" onMouseOut="lolite()" onClick="logVariable('target_blog_ID')" href="../../../_variables/target_blog_ID.html">$target_blog_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>();
<a name="l2095"><span class="linenum">2095</span></a>  <span class="comment">        // get the current User highest publish status in this comment item blog</span>
<a name="l2096"><span class="linenum">2096</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>( <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a>, <a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../_variables/publish_text.html">$publish_text</a> ) = <a class="function" onClick="logFunction('get_highest_publish_status')" href="../../../_functions/get_highest_publish_status.html" onMouseOver="funcPopup(event,'get_highest_publish_status')">get_highest_publish_status</a>( 'comment', <a class="var it7030" onMouseOver="hilite(7030)" onMouseOut="lolite()" onClick="logVariable('target_blog_ID')" href="../../../_variables/target_blog_ID.html">$target_blog_ID</a> );
<a name="l2097"><span class="linenum">2097</span></a>          if( <a class="function" onClick="logFunction('compare_visibility_status')" href="../../../_functions/compare_visibility_status.html" onMouseOver="funcPopup(event,'compare_visibility_status')">compare_visibility_status</a>( <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> ) &lt;= 0 )
<a name="l2098"><span class="linenum">2098</span></a>          { // Current User has no permission to change this comment status to a more public status
<a name="l2099"><span class="linenum">2099</span></a>              return false;
<a name="l2100"><span class="linenum">2100</span></a>          }
<a name="l2101"><span class="linenum">2101</span></a>  
<a name="l2102"><span class="linenum">2102</span></a>          <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-array' );
<a name="l2103"><span class="linenum">2103</span></a>          <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-index', array( 'redirected' ) );
<a name="l2104"><span class="linenum">2104</span></a>          if( isset( <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[ <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a> ] ) &amp;&amp;
<a name="l2105"><span class="linenum">2105</span></a>              isset( <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[ <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[ <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a> ] ] ) &amp;&amp;
<a name="l2106"><span class="linenum">2106</span></a>              ! empty( <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[ <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[ <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a> ] ][3] ) )
<a name="l2107"><span class="linenum">2107</span></a>          { // Get color of button icon
<a name="l2108"><span class="linenum">2108</span></a>              <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('status_icon_color')" href="../../../_variables/status_icon_color.html">$status_icon_color</a> = <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[ <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[ <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a> ] ][3];
<a name="l2109"><span class="linenum">2109</span></a>          }
<a name="l2110"><span class="linenum">2110</span></a>          else
<a name="l2111"><span class="linenum">2111</span></a>          { // Use green arrow as default
<a name="l2112"><span class="linenum">2112</span></a>              <a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('status_icon_color')" href="../../../_variables/status_icon_color.html">$status_icon_color</a> = 'green';
<a name="l2113"><span class="linenum">2113</span></a>          }
<a name="l2114"><span class="linenum">2114</span></a>  
<a name="l2115"><span class="linenum">2115</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array(
<a name="l2116"><span class="linenum">2116</span></a>              'before' =&gt; <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>,
<a name="l2117"><span class="linenum">2117</span></a>              'after'  =&gt; <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>,
<a name="l2118"><span class="linenum">2118</span></a>              'text'   =&gt; ( ( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' ) ? <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'move_up_'.<a class="var it7021" onMouseOver="hilite(7021)" onMouseOut="lolite()" onClick="logVariable('status_icon_color')" href="../../../_variables/status_icon_color.html">$status_icon_color</a>, 'imgtag' ).' '.<a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../_variables/publish_text.html">$publish_text</a> : <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> ),
<a name="l2119"><span class="linenum">2119</span></a>              'title'  =&gt; ( ( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) ? <a class="var it1636" onMouseOver="hilite(1636)" onMouseOut="lolite()" onClick="logVariable('publish_text')" href="../../../_variables/publish_text.html">$publish_text</a> : <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> ),
<a name="l2120"><span class="linenum">2120</span></a>              'class'  =&gt; <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>,
<a name="l2121"><span class="linenum">2121</span></a>              'glue'   =&gt; <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>,
<a name="l2122"><span class="linenum">2122</span></a>              'save_context' =&gt; <a class="var it1633" onMouseOver="hilite(1633)" onMouseOut="lolite()" onClick="logVariable('save_context')" href="../../../_variables/save_context.html">$save_context</a>,
<a name="l2123"><span class="linenum">2123</span></a>              'ajax_button'  =&gt; <a class="var it7016" onMouseOver="hilite(7016)" onMouseOut="lolite()" onClick="logVariable('ajax_button')" href="../../../_variables/ajax_button.html">$ajax_button</a>,
<a name="l2124"><span class="linenum">2124</span></a>              'redirect_to'  =&gt; <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('redirect_to')" href="../../../_variables/redirect_to.html">$redirect_to</a>,
<a name="l2125"><span class="linenum">2125</span></a>              'status' =&gt; <a class="var it1635" onMouseOver="hilite(1635)" onMouseOut="lolite()" onClick="logVariable('highest_status')" href="../../../_variables/highest_status.html">$highest_status</a>,
<a name="l2126"><span class="linenum">2126</span></a>              'action' =&gt; 'publish'
<a name="l2127"><span class="linenum">2127</span></a>          );
<a name="l2128"><span class="linenum">2128</span></a>  
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">        // Display the publish link</span>
<a name="l2130"><span class="linenum">2130</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_moderation_link')" href="../../../_functions/get_moderation_link.html" onMouseOver="funcPopup(event,'get_moderation_link')">get_moderation_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2131"><span class="linenum">2131</span></a>  
<a name="l2132"><span class="linenum">2132</span></a>          return true;
<a name="l2133"><span class="linenum">2133</span></a>      }
<a name="l2134"><span class="linenum">2134</span></a>  
<a name="l2135"><span class="linenum">2135</span></a>  
<a name="l2136"><span class="linenum">2136</span></a>      <span class="comment">/**</span>
<a name="l2137"><span class="linenum">2137</span></a>  <span class="comment">     * Display next available level raise/lower status link</span>
<a name="l2138"><span class="linenum">2138</span></a>  <span class="comment">     *</span>
<a name="l2139"><span class="linenum">2139</span></a>  <span class="comment">     * @param array params</span>
<a name="l2140"><span class="linenum">2140</span></a>  <span class="comment">     * @param boolean set true to get raise link and false to get lower link</span>
<a name="l2141"><span class="linenum">2141</span></a>  <span class="comment">     * @param string set any status what is required instead of $this-&gt;status</span>
<a name="l2142"><span class="linenum">2142</span></a>  <span class="comment">     * @return boolean true if link is available, false otherwise</span>
<a name="l2143"><span class="linenum">2143</span></a>  <span class="comment">     */</span>
<a name="l2144"><span class="linenum">2144</span></a>  	function <a class="function" onClick="logFunction('next_status_link')" href="../../../_functions/next_status_link.html" onMouseOver="funcPopup(event,'next_status_link')">next_status_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, <a class="var it7031" onMouseOver="hilite(7031)" onMouseOut="lolite()" onClick="logVariable('raise')" href="../../../_variables/raise.html">$raise</a>, <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('current_status')" href="../../../_variables/current_status.html">$current_status</a> = NULL )
<a name="l2145"><span class="linenum">2145</span></a>      {
<a name="l2146"><span class="linenum">2146</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l2147"><span class="linenum">2147</span></a>  
<a name="l2148"><span class="linenum">2148</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) ) return false;
<a name="l2149"><span class="linenum">2149</span></a>  
<a name="l2150"><span class="linenum">2150</span></a>          <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( <a class="var it7031" onMouseOver="hilite(7031)" onMouseOut="lolite()" onClick="logVariable('raise')" href="../../../_variables/raise.html">$raise</a>, <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('current_status')" href="../../../_variables/current_status.html">$current_status</a> );
<a name="l2151"><span class="linenum">2151</span></a>          if( !<a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> )
<a name="l2152"><span class="linenum">2152</span></a>          { // Next status is not allowed for current user
<a name="l2153"><span class="linenum">2153</span></a>              return false;
<a name="l2154"><span class="linenum">2154</span></a>          }
<a name="l2155"><span class="linenum">2155</span></a>  
<a name="l2156"><span class="linenum">2156</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] ) ? '' : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'].' ';
<a name="l2157"><span class="linenum">2157</span></a>          unset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'] );
<a name="l2158"><span class="linenum">2158</span></a>  
<a name="l2159"><span class="linenum">2159</span></a>          <a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a> = <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0];
<a name="l2160"><span class="linenum">2160</span></a>          <a class="var it6811" onMouseOver="hilite(6811)" onMouseOut="lolite()" onClick="logVariable('status_text')" href="../../../_variables/status_text.html">$status_text</a> = <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[1];
<a name="l2161"><span class="linenum">2161</span></a>          if( <a class="var it7031" onMouseOver="hilite(7031)" onMouseOut="lolite()" onClick="logVariable('raise')" href="../../../_variables/raise.html">$raise</a> )
<a name="l2162"><span class="linenum">2162</span></a>          {
<a name="l2163"><span class="linenum">2163</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> = 'publish';
<a name="l2164"><span class="linenum">2164</span></a>              <a class="var it7032" onMouseOver="hilite(7032)" onMouseOut="lolite()" onClick="logVariable('action_icon')" href="../../../_variables/action_icon.html">$action_icon</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'move_up_'.<a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[2], 'imgtag', array( 'title' =&gt; '' ) );
<a name="l2165"><span class="linenum">2165</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= 'btn_raise_status_'.<a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>;
<a name="l2166"><span class="linenum">2166</span></a>          }
<a name="l2167"><span class="linenum">2167</span></a>          else
<a name="l2168"><span class="linenum">2168</span></a>          {
<a name="l2169"><span class="linenum">2169</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> = 'restrict';
<a name="l2170"><span class="linenum">2170</span></a>              <a class="var it7032" onMouseOver="hilite(7032)" onMouseOut="lolite()" onClick="logVariable('action_icon')" href="../../../_variables/action_icon.html">$action_icon</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'move_down_'.<a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[2], 'imgtag', array( 'title' =&gt; '' ) );
<a name="l2171"><span class="linenum">2171</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= 'btn_lower_status_'.<a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>;
<a name="l2172"><span class="linenum">2172</span></a>          }
<a name="l2173"><span class="linenum">2173</span></a>  
<a name="l2174"><span class="linenum">2174</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2175"><span class="linenum">2175</span></a>                  'before'       =&gt; '',
<a name="l2176"><span class="linenum">2176</span></a>                  'after'        =&gt; '',
<a name="l2177"><span class="linenum">2177</span></a>                  'text'         =&gt; <a class="var it7032" onMouseOver="hilite(7032)" onMouseOut="lolite()" onClick="logVariable('action_icon')" href="../../../_variables/action_icon.html">$action_icon</a>.' '.<a class="var it6811" onMouseOver="hilite(6811)" onMouseOut="lolite()" onClick="logVariable('status_text')" href="../../../_variables/status_text.html">$status_text</a>,
<a name="l2178"><span class="linenum">2178</span></a>                  'title'        =&gt; <a class="var it6811" onMouseOver="hilite(6811)" onMouseOut="lolite()" onClick="logVariable('status_text')" href="../../../_variables/status_text.html">$status_text</a>,
<a name="l2179"><span class="linenum">2179</span></a>                  'action'       =&gt; <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a>,
<a name="l2180"><span class="linenum">2180</span></a>                  'status'       =&gt; <a class="var it1641" onMouseOver="hilite(1641)" onMouseOut="lolite()" onClick="logVariable('next_status')" href="../../../_variables/next_status.html">$next_status</a>,
<a name="l2181"><span class="linenum">2181</span></a>                  'class'        =&gt; <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>,
<a name="l2182"><span class="linenum">2182</span></a>                  'glue'         =&gt; '&amp;amp;',
<a name="l2183"><span class="linenum">2183</span></a>                  'save_context' =&gt; true,
<a name="l2184"><span class="linenum">2184</span></a>                  'ajax_button'  =&gt; false,
<a name="l2185"><span class="linenum">2185</span></a>                  'redirect_to'  =&gt; NULL,
<a name="l2186"><span class="linenum">2186</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>
<a name="l2187"><span class="linenum">2187</span></a>          );
<a name="l2188"><span class="linenum">2188</span></a>  
<a name="l2189"><span class="linenum">2189</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_moderation_link')" href="../../../_functions/get_moderation_link.html" onMouseOver="funcPopup(event,'get_moderation_link')">get_moderation_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2190"><span class="linenum">2190</span></a>          return true;
<a name="l2191"><span class="linenum">2191</span></a>      }
<a name="l2192"><span class="linenum">2192</span></a>  
<a name="l2193"><span class="linenum">2193</span></a>  
<a name="l2194"><span class="linenum">2194</span></a>      <span class="comment">/**</span>
<a name="l2195"><span class="linenum">2195</span></a>  <span class="comment">     * Display raise status link if it is available</span>
<a name="l2196"><span class="linenum">2196</span></a>  <span class="comment">     *</span>
<a name="l2197"><span class="linenum">2197</span></a>  <span class="comment">     * @param array params</span>
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment">     * @return boolean true if link was displayed, false otherwise</span>
<a name="l2199"><span class="linenum">2199</span></a>  <span class="comment">     */</span>
<a name="l2200"><span class="linenum">2200</span></a>  	function <a class="function" onClick="logFunction('raise_link')" href="../../../_functions/raise_link.html" onMouseOver="funcPopup(event,'raise_link')">raise_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l2201"><span class="linenum">2201</span></a>      {
<a name="l2202"><span class="linenum">2202</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('next_status_link')" href="../../../_functions/next_status_link.html" onMouseOver="funcPopup(event,'next_status_link')">next_status_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, true );
<a name="l2203"><span class="linenum">2203</span></a>      }
<a name="l2204"><span class="linenum">2204</span></a>  
<a name="l2205"><span class="linenum">2205</span></a>  
<a name="l2206"><span class="linenum">2206</span></a>      <span class="comment">/**</span>
<a name="l2207"><span class="linenum">2207</span></a>  <span class="comment">     * Display lower status link if it is available</span>
<a name="l2208"><span class="linenum">2208</span></a>  <span class="comment">     *</span>
<a name="l2209"><span class="linenum">2209</span></a>  <span class="comment">     * @param array params</span>
<a name="l2210"><span class="linenum">2210</span></a>  <span class="comment">     * @return boolean true if link was displayed, false otherwise</span>
<a name="l2211"><span class="linenum">2211</span></a>  <span class="comment">     */</span>
<a name="l2212"><span class="linenum">2212</span></a>  	function <a class="function" onClick="logFunction('lower_link')" href="../../../_functions/lower_link.html" onMouseOver="funcPopup(event,'lower_link')">lower_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l2213"><span class="linenum">2213</span></a>      {
<a name="l2214"><span class="linenum">2214</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('next_status_link')" href="../../../_functions/next_status_link.html" onMouseOver="funcPopup(event,'next_status_link')">next_status_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>, false );
<a name="l2215"><span class="linenum">2215</span></a>      }
<a name="l2216"><span class="linenum">2216</span></a>  
<a name="l2217"><span class="linenum">2217</span></a>  
<a name="l2218"><span class="linenum">2218</span></a>      <span class="comment">/**</span>
<a name="l2219"><span class="linenum">2219</span></a>  <span class="comment">     * Display moderation status links if it is available</span>
<a name="l2220"><span class="linenum">2220</span></a>  <span class="comment">     *</span>
<a name="l2221"><span class="linenum">2221</span></a>  <span class="comment">     * @param array params</span>
<a name="l2222"><span class="linenum">2222</span></a>  <span class="comment">     * @return boolean true if link was displayed, false otherwise</span>
<a name="l2223"><span class="linenum">2223</span></a>  <span class="comment">     */</span>
<a name="l2224"><span class="linenum">2224</span></a>  	function <a class="function" onClick="logFunction('moderation_links')" href="../../../_functions/moderation_links.html" onMouseOver="funcPopup(event,'moderation_links')">moderation_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> )
<a name="l2225"><span class="linenum">2225</span></a>      {
<a name="l2226"><span class="linenum">2226</span></a>          global <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>;
<a name="l2227"><span class="linenum">2227</span></a>  
<a name="l2228"><span class="linenum">2228</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2229"><span class="linenum">2229</span></a>                  'detect_last' =&gt; true, // TRUE if we should find what button is last and visible, FALSE if we have some other buttons after moderation <a class="function" onClick="logFunction('buttons')" href="../../../_functions/buttons.html" onMouseOver="funcPopup(event,'buttons')">buttons</a> (e.g. button to delete a comment)
<a name="l2230"><span class="linenum">2230</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2231"><span class="linenum">2231</span></a>  
<a name="l2232"><span class="linenum">2232</span></a>          <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-array' );
<a name="l2233"><span class="linenum">2233</span></a>          <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../../../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> );
<a name="l2234"><span class="linenum">2234</span></a>  
<a name="l2235"><span class="linenum">2235</span></a>          <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('inskin_statuses')" href="../../../_variables/inskin_statuses.html">$inskin_statuses</a> = <a class="function" onClick="logFunction('get_inskin_statuses')" href="../../../_functions/get_inskin_statuses.html" onMouseOver="funcPopup(event,'get_inskin_statuses')">get_inskin_statuses</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, 'comment' );
<a name="l2236"><span class="linenum">2236</span></a>  
<a name="l2237"><span class="linenum">2237</span></a>  <span class="comment">        // Get first and last statuses that will be visible buttons</span>
<a name="l2238"><span class="linenum">2238</span></a>          <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('first_status_in_row')" href="../../../_variables/first_status_in_row.html">$first_status_in_row</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( true, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> );
<a name="l2239"><span class="linenum">2239</span></a>          <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('last_status_in_row')" href="../../../_variables/last_status_in_row.html">$last_status_in_row</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> );
<a name="l2240"><span class="linenum">2240</span></a>          <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('first_status')" href="../../../_variables/first_status.html">$first_status</a> = <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('first_status_in_row')" href="../../../_variables/first_status_in_row.html">$first_status_in_row</a> ? <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('first_status_in_row')" href="../../../_variables/first_status_in_row.html">$first_status_in_row</a>[0] : '';
<a name="l2241"><span class="linenum">2241</span></a>          <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('last_status')" href="../../../_variables/last_status.html">$last_status</a> = '';
<a name="l2242"><span class="linenum">2242</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['detect_last'] )
<a name="l2243"><span class="linenum">2243</span></a>          { // We should detect what button is last
<a name="l2244"><span class="linenum">2244</span></a>              <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('last_status')" href="../../../_variables/last_status.html">$last_status</a> = <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('last_status_in_row')" href="../../../_variables/last_status_in_row.html">$last_status_in_row</a> ? <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('last_status_in_row')" href="../../../_variables/last_status_in_row.html">$last_status_in_row</a>[0] : '';
<a name="l2245"><span class="linenum">2245</span></a>          }
<a name="l2246"><span class="linenum">2246</span></a>  
<a name="l2247"><span class="linenum">2247</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l2248"><span class="linenum">2248</span></a>          <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('prev_status')" href="../../../_variables/prev_status.html">$prev_status</a> = '';
<a name="l2249"><span class="linenum">2249</span></a>          foreach( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> as <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> )
<a name="l2250"><span class="linenum">2250</span></a>          { // Print the buttons to increase status
<a name="l2251"><span class="linenum">2251</span></a>              <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( true, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>[0] );
<a name="l2252"><span class="linenum">2252</span></a>              if( <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> &amp;&amp; <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('prev_status')" href="../../../_variables/prev_status.html">$prev_status</a> != <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0] )
<a name="l2253"><span class="linenum">2253</span></a>              {
<a name="l2254"><span class="linenum">2254</span></a>                  <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l2255"><span class="linenum">2255</span></a>                  if( <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('first_status')" href="../../../_variables/first_status.html">$first_status</a> == <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0] )
<a name="l2256"><span class="linenum">2256</span></a>                  { // Mark this button as first visible
<a name="l2257"><span class="linenum">2257</span></a>                      <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] = ( isset( <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] ) ? <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] : '' ).' first-child';
<a name="l2258"><span class="linenum">2258</span></a>                      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['detect_last'] &amp;&amp; empty( <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('last_status')" href="../../../_variables/last_status.html">$last_status</a> ) )
<a name="l2259"><span class="linenum">2259</span></a>                      { // This first button is also last button
<a name="l2260"><span class="linenum">2260</span></a>                          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] .= ' last-child';
<a name="l2261"><span class="linenum">2261</span></a>                      }
<a name="l2262"><span class="linenum">2262</span></a>                  }
<a name="l2263"><span class="linenum">2263</span></a>                  if( <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0] == <a class="var it7033" onMouseOver="hilite(7033)" onMouseOut="lolite()" onClick="logVariable('first_status_in_row')" href="../../../_variables/first_status_in_row.html">$first_status_in_row</a>[0] )
<a name="l2264"><span class="linenum">2264</span></a>                  {
<a name="l2265"><span class="linenum">2265</span></a>                      <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] .= ' btn_next_status';
<a name="l2266"><span class="linenum">2266</span></a>                  }
<a name="l2267"><span class="linenum">2267</span></a>                  if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0], <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('inskin_statuses')" href="../../../_variables/inskin_statuses.html">$inskin_statuses</a> ) )
<a name="l2268"><span class="linenum">2268</span></a>                  { // Don't make ajax button for those statuses which are not allowed in the front office
<a name="l2269"><span class="linenum">2269</span></a>                      <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>, array( 'ajax_button' =&gt; false ) );
<a name="l2270"><span class="linenum">2270</span></a>                  }
<a name="l2271"><span class="linenum">2271</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('next_status_link')" href="../../../_functions/next_status_link.html" onMouseOver="funcPopup(event,'next_status_link')">next_status_link</a>( <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>, true, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>[0] );
<a name="l2272"><span class="linenum">2272</span></a>              }
<a name="l2273"><span class="linenum">2273</span></a>              <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('prev_status')" href="../../../_variables/prev_status.html">$prev_status</a> = <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0];
<a name="l2274"><span class="linenum">2274</span></a>          }
<a name="l2275"><span class="linenum">2275</span></a>  
<a name="l2276"><span class="linenum">2276</span></a>          <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('prev_status')" href="../../../_variables/prev_status.html">$prev_status</a> = '';
<a name="l2277"><span class="linenum">2277</span></a>          foreach( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> as <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> )
<a name="l2278"><span class="linenum">2278</span></a>          { // Print the buttons to decrease status
<a name="l2279"><span class="linenum">2279</span></a>              <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_next_status')" href="../../../_functions/get_next_status.html" onMouseOver="funcPopup(event,'get_next_status')">get_next_status</a>( false, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>[0] );
<a name="l2280"><span class="linenum">2280</span></a>  
<a name="l2281"><span class="linenum">2281</span></a>              if( <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a> &amp;&amp; <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('prev_status')" href="../../../_variables/prev_status.html">$prev_status</a> != <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0] )
<a name="l2282"><span class="linenum">2282</span></a>              {
<a name="l2283"><span class="linenum">2283</span></a>                  <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l2284"><span class="linenum">2284</span></a>                  <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] = (isset( <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] ) ? <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] : '' );
<a name="l2285"><span class="linenum">2285</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['detect_last'] &amp;&amp; <a class="var it7036" onMouseOver="hilite(7036)" onMouseOut="lolite()" onClick="logVariable('last_status')" href="../../../_variables/last_status.html">$last_status</a> == <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0] )
<a name="l2286"><span class="linenum">2286</span></a>                  { // Mark this button as last visible
<a name="l2287"><span class="linenum">2287</span></a>                      <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] .= ' last-child';
<a name="l2288"><span class="linenum">2288</span></a>                  }
<a name="l2289"><span class="linenum">2289</span></a>                  if( empty( <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('first_status')" href="../../../_variables/first_status.html">$first_status</a> ) )
<a name="l2290"><span class="linenum">2290</span></a>                  { // This last button also is first button
<a name="l2291"><span class="linenum">2291</span></a>                      <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] .= ' first-child';
<a name="l2292"><span class="linenum">2292</span></a>                  }
<a name="l2293"><span class="linenum">2293</span></a>                  if( <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0] == <a class="var it7034" onMouseOver="hilite(7034)" onMouseOut="lolite()" onClick="logVariable('last_status_in_row')" href="../../../_variables/last_status_in_row.html">$last_status_in_row</a>[0] )
<a name="l2294"><span class="linenum">2294</span></a>                  {
<a name="l2295"><span class="linenum">2295</span></a>                      <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>['class'] .= ' btn_next_status';
<a name="l2296"><span class="linenum">2296</span></a>                  }
<a name="l2297"><span class="linenum">2297</span></a>                  if( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0], <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('inskin_statuses')" href="../../../_variables/inskin_statuses.html">$inskin_statuses</a> ) )
<a name="l2298"><span class="linenum">2298</span></a>                  { // Don't make ajax button for those statuses which are not allowed in the front office
<a name="l2299"><span class="linenum">2299</span></a>                      <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>, array( 'ajax_button' =&gt; false ) );
<a name="l2300"><span class="linenum">2300</span></a>                  }
<a name="l2301"><span class="linenum">2301</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('next_status_link')" href="../../../_functions/next_status_link.html" onMouseOver="funcPopup(event,'next_status_link')">next_status_link</a>( <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('tmp_params')" href="../../../_variables/tmp_params.html">$tmp_params</a>, false, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>[0] );
<a name="l2302"><span class="linenum">2302</span></a>              }
<a name="l2303"><span class="linenum">2303</span></a>              <a class="var it7037" onMouseOver="hilite(7037)" onMouseOut="lolite()" onClick="logVariable('prev_status')" href="../../../_variables/prev_status.html">$prev_status</a> = <a class="var it1639" onMouseOver="hilite(1639)" onMouseOut="lolite()" onClick="logVariable('next_status_in_row')" href="../../../_variables/next_status_in_row.html">$next_status_in_row</a>[0];
<a name="l2304"><span class="linenum">2304</span></a>          }
<a name="l2305"><span class="linenum">2305</span></a>  
<a name="l2306"><span class="linenum">2306</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2307"><span class="linenum">2307</span></a>      }
<a name="l2308"><span class="linenum">2308</span></a>  
<a name="l2309"><span class="linenum">2309</span></a>  
<a name="l2310"><span class="linenum">2310</span></a>      <span class="comment">/**</span>
<a name="l2311"><span class="linenum">2311</span></a>  <span class="comment">     * Provide link to message form for this comment's author</span>
<a name="l2312"><span class="linenum">2312</span></a>  <span class="comment">     *</span>
<a name="l2313"><span class="linenum">2313</span></a>  <span class="comment">     * @param string url of the message form</span>
<a name="l2314"><span class="linenum">2314</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l2315"><span class="linenum">2315</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l2316"><span class="linenum">2316</span></a>  <span class="comment">     * @param string link text</span>
<a name="l2317"><span class="linenum">2317</span></a>  <span class="comment">     * @param string link title</span>
<a name="l2318"><span class="linenum">2318</span></a>  <span class="comment">     * @param string class name</span>
<a name="l2319"><span class="linenum">2319</span></a>  <span class="comment">     */</span>
<a name="l2320"><span class="linenum">2320</span></a>  	function <a class="function" onClick="logFunction('msgform_link')" href="../../../_functions/msgform_link.html" onMouseOver="funcPopup(event,'msgform_link')">msgform_link</a>( <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>, <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '' )
<a name="l2321"><span class="linenum">2321</span></a>      {
<a name="l2322"><span class="linenum">2322</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() )
<a name="l2323"><span class="linenum">2323</span></a>          { // This comment is from a registered user:
<a name="l2324"><span class="linenum">2324</span></a>              <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../../_variables/msg_type.html">$msg_type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;<a class="function" onClick="logFunction('get_msgform_possibility')" href="../../../_functions/get_msgform_possibility.html" onMouseOver="funcPopup(event,'get_msgform_possibility')">get_msgform_possibility</a>();
<a name="l2325"><span class="linenum">2325</span></a>              if( empty( <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../../_variables/msg_type.html">$msg_type</a> ) )
<a name="l2326"><span class="linenum">2326</span></a>              { // message form is not allowed
<a name="l2327"><span class="linenum">2327</span></a>                  return false;
<a name="l2328"><span class="linenum">2328</span></a>              }
<a name="l2329"><span class="linenum">2329</span></a>              <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>, 'recipient_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;ID );
<a name="l2330"><span class="linenum">2330</span></a>          }
<a name="l2331"><span class="linenum">2331</span></a>          else
<a name="l2332"><span class="linenum">2332</span></a>          { // This comment is from a visitor:
<a name="l2333"><span class="linenum">2333</span></a>              if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_email')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_email.html">author_email</a>) )
<a name="l2334"><span class="linenum">2334</span></a>              { // We have no email for this comment :(
<a name="l2335"><span class="linenum">2335</span></a>                  return false;
<a name="l2336"><span class="linenum">2336</span></a>              }
<a name="l2337"><span class="linenum">2337</span></a>              elseif( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allow_msgform')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/allow_msgform.html">allow_msgform</a>) )
<a name="l2338"><span class="linenum">2338</span></a>              { // Anonymous commentator does not allow message <a class="function" onClick="logFunction('form')" href="../../../_functions/form.html" onMouseOver="funcPopup(event,'form')">form</a> (for this comment)
<a name="l2339"><span class="linenum">2339</span></a>                  return false;
<a name="l2340"><span class="linenum">2340</span></a>              }
<a name="l2341"><span class="linenum">2341</span></a>              <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../../_variables/msg_type.html">$msg_type</a> = 'email';
<a name="l2342"><span class="linenum">2342</span></a>          }
<a name="l2343"><span class="linenum">2343</span></a>  
<a name="l2344"><span class="linenum">2344</span></a>          <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>, 'recipient_id=0&amp;amp;comment_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;post_id='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;item_ID
<a name="l2345"><span class="linenum">2345</span></a>                  .'&amp;amp;redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>(<a class="function" onClick="logFunction('url_rel_to_same_host')" href="../../../_functions/url_rel_to_same_host.html" onMouseOver="funcPopup(event,'url_rel_to_same_host')">url_rel_to_same_host</a>(<a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>('','','','&amp;'), <a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>)) );
<a name="l2346"><span class="linenum">2346</span></a>  
<a name="l2347"><span class="linenum">2347</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' )
<a name="l2348"><span class="linenum">2348</span></a>          {
<a name="l2349"><span class="linenum">2349</span></a>              if( <a class="var it2217" onMouseOver="hilite(2217)" onMouseOut="lolite()" onClick="logVariable('msg_type')" href="../../../_variables/msg_type.html">$msg_type</a> == 'email' )
<a name="l2350"><span class="linenum">2350</span></a>              {
<a name="l2351"><span class="linenum">2351</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send email to comment author');
<a name="l2352"><span class="linenum">2352</span></a>              }
<a name="l2353"><span class="linenum">2353</span></a>              else
<a name="l2354"><span class="linenum">2354</span></a>              {
<a name="l2355"><span class="linenum">2355</span></a>                  <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Send message to comment author');
<a name="l2356"><span class="linenum">2356</span></a>              }
<a name="l2357"><span class="linenum">2357</span></a>          }
<a name="l2358"><span class="linenum">2358</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' ) <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'email', 'imgtag', array( 'class' =&gt; 'middle', 'title' =&gt; <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> ) );
<a name="l2359"><span class="linenum">2359</span></a>  
<a name="l2360"><span class="linenum">2360</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l2361"><span class="linenum">2361</span></a>          echo '&lt;a href=&quot;'.<a class="var it1567" onMouseOver="hilite(1567)" onMouseOut="lolite()" onClick="logVariable('form_url')" href="../../../_variables/form_url.html">$form_url</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l2362"><span class="linenum">2362</span></a>          if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) echo ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l2363"><span class="linenum">2363</span></a>  <span class="comment">        // TODO: have an SEO setting for nofollow here, default to nofollow</span>
<a name="l2364"><span class="linenum">2364</span></a>          echo ' rel=&quot;nofollow&quot;';
<a name="l2365"><span class="linenum">2365</span></a>          echo '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l2366"><span class="linenum">2366</span></a>          echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l2367"><span class="linenum">2367</span></a>  
<a name="l2368"><span class="linenum">2368</span></a>          return true;
<a name="l2369"><span class="linenum">2369</span></a>      }
<a name="l2370"><span class="linenum">2370</span></a>  
<a name="l2371"><span class="linenum">2371</span></a>  
<a name="l2372"><span class="linenum">2372</span></a>      <span class="comment">/**</span>
<a name="l2373"><span class="linenum">2373</span></a>  <span class="comment">     * Generate permalink to this comment.</span>
<a name="l2374"><span class="linenum">2374</span></a>  <span class="comment">     *</span>
<a name="l2375"><span class="linenum">2375</span></a>  <span class="comment">     * Note: This actually only returns the URL, to get a real link, use Comment::get_permanent_link()</span>
<a name="l2376"><span class="linenum">2376</span></a>  <span class="comment">     *</span>
<a name="l2377"><span class="linenum">2377</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l2378"><span class="linenum">2378</span></a>  <span class="comment">     * @param string Anchor for meta comment</span>
<a name="l2379"><span class="linenum">2379</span></a>  <span class="comment">     */</span>
<a name="l2380"><span class="linenum">2380</span></a>  	function <a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;', <a class="var it7038" onMouseOver="hilite(7038)" onMouseOut="lolite()" onClick="logVariable('meta_anchor')" href="../../../_variables/meta_anchor.html">$meta_anchor</a> = '#' )
<a name="l2381"><span class="linenum">2381</span></a>      {
<a name="l2382"><span class="linenum">2382</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l2383"><span class="linenum">2383</span></a>  
<a name="l2384"><span class="linenum">2384</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l2385"><span class="linenum">2385</span></a>          { // Meta comment is not published on front-office, Get url to back-office
<a name="l2386"><span class="linenum">2386</span></a>              global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l2387"><span class="linenum">2387</span></a>              if( <a class="var it7038" onMouseOver="hilite(7038)" onMouseOut="lolite()" onClick="logVariable('meta_anchor')" href="../../../_variables/meta_anchor.html">$meta_anchor</a> == '#' )
<a name="l2388"><span class="linenum">2388</span></a>              {    // Use default anchor:
<a name="l2389"><span class="linenum">2389</span></a>                  <a class="var it7038" onMouseOver="hilite(7038)" onMouseOut="lolite()" onClick="logVariable('meta_anchor')" href="../../../_variables/meta_anchor.html">$meta_anchor</a> = '#'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_anchor')" href="../../../_functions/get_anchor.html" onMouseOver="funcPopup(event,'get_anchor')">get_anchor</a>();
<a name="l2390"><span class="linenum">2390</span></a>              }
<a name="l2391"><span class="linenum">2391</span></a>              return <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>().<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;ID.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'comment_type=meta'.<a class="var it7038" onMouseOver="hilite(7038)" onMouseOut="lolite()" onClick="logVariable('meta_anchor')" href="../../../_variables/meta_anchor.html">$meta_anchor</a>;
<a name="l2392"><span class="linenum">2392</span></a>          }
<a name="l2393"><span class="linenum">2393</span></a>          else
<a name="l2394"><span class="linenum">2394</span></a>          { // Normal comment
<a name="l2395"><span class="linenum">2395</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;<a class="function" onClick="logFunction('get_single_url')" href="../../../_functions/get_single_url.html" onMouseOver="funcPopup(event,'get_single_url')">get_single_url</a>( 'auto', '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> ).'#'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_anchor')" href="../../../_functions/get_anchor.html" onMouseOver="funcPopup(event,'get_anchor')">get_anchor</a>();
<a name="l2396"><span class="linenum">2396</span></a>          }
<a name="l2397"><span class="linenum">2397</span></a>      }
<a name="l2398"><span class="linenum">2398</span></a>  
<a name="l2399"><span class="linenum">2399</span></a>  
<a name="l2400"><span class="linenum">2400</span></a>      <span class="comment">/**</span>
<a name="l2401"><span class="linenum">2401</span></a>  <span class="comment">     * Template function: display permalink to this comment</span>
<a name="l2402"><span class="linenum">2402</span></a>  <span class="comment">     *</span>
<a name="l2403"><span class="linenum">2403</span></a>  <span class="comment">     * Note: This actually only returns the URL, to get a real link, use Comment::permanent_link()</span>
<a name="l2404"><span class="linenum">2404</span></a>  <span class="comment">     *</span>
<a name="l2405"><span class="linenum">2405</span></a>  <span class="comment">     * @param string 'urltitle', 'pid', 'archive#id' or 'archive#title'</span>
<a name="l2406"><span class="linenum">2406</span></a>  <span class="comment">     * @param string url to use</span>
<a name="l2407"><span class="linenum">2407</span></a>  <span class="comment">     */</span>
<a name="l2408"><span class="linenum">2408</span></a>  	function <a class="function" onClick="logFunction('permanent_url')" href="../../../_functions/permanent_url.html" onMouseOver="funcPopup(event,'permanent_url')">permanent_url</a>( <a class="var it304" onMouseOver="hilite(304)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> = '', <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>='' )
<a name="l2409"><span class="linenum">2409</span></a>      {
<a name="l2410"><span class="linenum">2410</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( <a class="var it304" onMouseOver="hilite(304)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a>, <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> );
<a name="l2411"><span class="linenum">2411</span></a>      }
<a name="l2412"><span class="linenum">2412</span></a>  
<a name="l2413"><span class="linenum">2413</span></a>  
<a name="l2414"><span class="linenum">2414</span></a>      <span class="comment">/**</span>
<a name="l2415"><span class="linenum">2415</span></a>  <span class="comment">     * Returns a permalink link to the Comment</span>
<a name="l2416"><span class="linenum">2416</span></a>  <span class="comment">     *</span>
<a name="l2417"><span class="linenum">2417</span></a>  <span class="comment">     * Note: If you only want the permalink URL, use Comment::get_permanent_url()</span>
<a name="l2418"><span class="linenum">2418</span></a>  <span class="comment">     *</span>
<a name="l2419"><span class="linenum">2419</span></a>  <span class="comment">     * @param string link text or special value: '#', '#icon#', '#text#', '#item#'</span>
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment">     * @param string link title</span>
<a name="l2421"><span class="linenum">2421</span></a>  <span class="comment">     * @param string class name</span>
<a name="l2422"><span class="linenum">2422</span></a>  <span class="comment">     * @param boolean TRUE - to use attr rel=&quot;nofollow&quot;</span>
<a name="l2423"><span class="linenum">2423</span></a>  <span class="comment">     * @param boolean Restrict by inskin statuses</span>
<a name="l2424"><span class="linenum">2424</span></a>  <span class="comment">     * @return string Link</span>
<a name="l2425"><span class="linenum">2425</span></a>  <span class="comment">     */</span>
<a name="l2426"><span class="linenum">2426</span></a>  	function <a class="function" onClick="logFunction('get_permanent_link')" href="../../../_functions/get_permanent_link.html" onMouseOver="funcPopup(event,'get_permanent_link')">get_permanent_link</a>( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it5439" onMouseOver="hilite(5439)" onMouseOut="lolite()" onClick="logVariable('nofollow')" href="../../../_variables/nofollow.html">$nofollow</a> = false, <a class="var it7039" onMouseOver="hilite(7039)" onMouseOut="lolite()" onClick="logVariable('restrict_status')" href="../../../_variables/restrict_status.html">$restrict_status</a> = true )
<a name="l2427"><span class="linenum">2427</span></a>      {
<a name="l2428"><span class="linenum">2428</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l2429"><span class="linenum">2429</span></a>          if( <a class="var it7039" onMouseOver="hilite(7039)" onMouseOut="lolite()" onClick="logVariable('restrict_status')" href="../../../_variables/restrict_status.html">$restrict_status</a> &amp;&amp; ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>, <a class="function" onClick="logFunction('get_inskin_statuses')" href="../../../_functions/get_inskin_statuses.html" onMouseOver="funcPopup(event,'get_inskin_statuses')">get_inskin_statuses</a>( <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>(), 'comment' ) ) )
<a name="l2430"><span class="linenum">2430</span></a>          {
<a name="l2431"><span class="linenum">2431</span></a>              return '';
<a name="l2432"><span class="linenum">2432</span></a>          }
<a name="l2433"><span class="linenum">2433</span></a>  
<a name="l2434"><span class="linenum">2434</span></a>          switch( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> )
<a name="l2435"><span class="linenum">2435</span></a>          {
<a name="l2436"><span class="linenum">2436</span></a>              case '#':
<a name="l2437"><span class="linenum">2437</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'permalink' ).<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Permalink');
<a name="l2438"><span class="linenum">2438</span></a>                  break;
<a name="l2439"><span class="linenum">2439</span></a>  
<a name="l2440"><span class="linenum">2440</span></a>              case '#icon#':
<a name="l2441"><span class="linenum">2441</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'permalink' );
<a name="l2442"><span class="linenum">2442</span></a>                  break;
<a name="l2443"><span class="linenum">2443</span></a>  
<a name="l2444"><span class="linenum">2444</span></a>              case '#text#':
<a name="l2445"><span class="linenum">2445</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Permalink');
<a name="l2446"><span class="linenum">2446</span></a>                  break;
<a name="l2447"><span class="linenum">2447</span></a>  
<a name="l2448"><span class="linenum">2448</span></a>              case '#item#':
<a name="l2449"><span class="linenum">2449</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>( array( 'link_type' =&gt; 'none' ) );
<a name="l2450"><span class="linenum">2450</span></a>                  break;
<a name="l2451"><span class="linenum">2451</span></a>          }
<a name="l2452"><span class="linenum">2452</span></a>  
<a name="l2453"><span class="linenum">2453</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Permanent link to this comment');
<a name="l2454"><span class="linenum">2454</span></a>  
<a name="l2455"><span class="linenum">2455</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>();
<a name="l2456"><span class="linenum">2456</span></a>  
<a name="l2457"><span class="linenum">2457</span></a>  <span class="comment">        // Display as link</span>
<a name="l2458"><span class="linenum">2458</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l2459"><span class="linenum">2459</span></a>          if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l2460"><span class="linenum">2460</span></a>          if( !empty( <a class="var it5439" onMouseOver="hilite(5439)" onMouseOut="lolite()" onClick="logVariable('nofollow')" href="../../../_variables/nofollow.html">$nofollow</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' rel=&quot;nofollow&quot;';
<a name="l2461"><span class="linenum">2461</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l2462"><span class="linenum">2462</span></a>  
<a name="l2463"><span class="linenum">2463</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2464"><span class="linenum">2464</span></a>      }
<a name="l2465"><span class="linenum">2465</span></a>  
<a name="l2466"><span class="linenum">2466</span></a>  
<a name="l2467"><span class="linenum">2467</span></a>      <span class="comment">/**</span>
<a name="l2468"><span class="linenum">2468</span></a>  <span class="comment">     * Displays a permalink link to the Comment</span>
<a name="l2469"><span class="linenum">2469</span></a>  <span class="comment">     *</span>
<a name="l2470"><span class="linenum">2470</span></a>  <span class="comment">     * Note: If you only want the permalink URL, use Comment::permanent_url()</span>
<a name="l2471"><span class="linenum">2471</span></a>  <span class="comment">     */</span>
<a name="l2472"><span class="linenum">2472</span></a>  	function <a class="function" onClick="logFunction('permanent_link')" href="../../../_functions/permanent_link.html" onMouseOver="funcPopup(event,'permanent_link')">permanent_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2473"><span class="linenum">2473</span></a>      {
<a name="l2474"><span class="linenum">2474</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l2475"><span class="linenum">2475</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2476"><span class="linenum">2476</span></a>                  'before'      =&gt; ' ',
<a name="l2477"><span class="linenum">2477</span></a>                  'after'       =&gt; ' ',
<a name="l2478"><span class="linenum">2478</span></a>                  'text'        =&gt; '#',
<a name="l2479"><span class="linenum">2479</span></a>                  'title'       =&gt; '#',
<a name="l2480"><span class="linenum">2480</span></a>                  'class'       =&gt; '',
<a name="l2481"><span class="linenum">2481</span></a>                  'nofollow'    =&gt; false,
<a name="l2482"><span class="linenum">2482</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2483"><span class="linenum">2483</span></a>  
<a name="l2484"><span class="linenum">2484</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l2485"><span class="linenum">2485</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_link')" href="../../../_functions/get_permanent_link.html" onMouseOver="funcPopup(event,'get_permanent_link')">get_permanent_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['nofollow'] );
<a name="l2486"><span class="linenum">2486</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l2487"><span class="linenum">2487</span></a>      }
<a name="l2488"><span class="linenum">2488</span></a>  
<a name="l2489"><span class="linenum">2489</span></a>  
<a name="l2490"><span class="linenum">2490</span></a>  	function <a class="function" onClick="logFunction('get_prerendered_content')" href="../../../_functions/get_prerendered_content.html" onMouseOver="funcPopup(event,'get_prerendered_content')">get_prerendered_content</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>  = 'htmlbody' )
<a name="l2491"><span class="linenum">2491</span></a>      {
<a name="l2492"><span class="linenum">2492</span></a>          global <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../_variables/CommentList.html">$CommentList</a>, <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>, <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l2493"><span class="linenum">2493</span></a>  
<a name="l2494"><span class="linenum">2494</span></a>          <a class="var it1540" onMouseOver="hilite(1540)" onMouseOut="lolite()" onClick="logVariable('use_cache')" href="../../../_variables/use_cache.html">$use_cache</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, array('htmlbody', 'entityencoded', 'xml', 'text') );
<a name="l2495"><span class="linenum">2495</span></a>          if( <a class="var it1540" onMouseOver="hilite(1540)" onMouseOut="lolite()" onClick="logVariable('use_cache')" href="../../../_variables/use_cache.html">$use_cache</a> )
<a name="l2496"><span class="linenum">2496</span></a>          { // the format/comment can be cached:
<a name="l2497"><span class="linenum">2497</span></a>              if( empty( <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../_variables/CommentList.html">$CommentList</a> ) )
<a name="l2498"><span class="linenum">2498</span></a>              { // set comments Blog from comment Item
<a name="l2499"><span class="linenum">2499</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l2500"><span class="linenum">2500</span></a>                  <a class="var it7040" onMouseOver="hilite(7040)" onMouseOut="lolite()" onClick="logVariable('comments_Blog')" href="../../../_variables/comments_Blog.html">$comments_Blog</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;get_Blog();
<a name="l2501"><span class="linenum">2501</span></a>              }
<a name="l2502"><span class="linenum">2502</span></a>              else
<a name="l2503"><span class="linenum">2503</span></a>              { // set comments Blog from CommentList
<a name="l2504"><span class="linenum">2504</span></a>                  <a class="var it7040" onMouseOver="hilite(7040)" onMouseOut="lolite()" onClick="logVariable('comments_Blog')" href="../../../_variables/comments_Blog.html">$comments_Blog</a> = &amp; <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../_variables/CommentList.html">$CommentList</a>-&gt;<a onClick="logVariable('Blog')" class="var it10717" onMouseOver="hilite(10717)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>;
<a name="l2505"><span class="linenum">2505</span></a>              }
<a name="l2506"><span class="linenum">2506</span></a>              <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>();
<a name="l2507"><span class="linenum">2507</span></a>              if( empty( <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a> ) )
<a name="l2508"><span class="linenum">2508</span></a>              {
<a name="l2509"><span class="linenum">2509</span></a>                  return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content.html">content</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2510"><span class="linenum">2510</span></a>              }
<a name="l2511"><span class="linenum">2511</span></a>              <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '.', <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a> );
<a name="l2512"><span class="linenum">2512</span></a>              <a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a> = <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>.'/'.<a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a>;
<a name="l2513"><span class="linenum">2513</span></a>  
<a name="l2514"><span class="linenum">2514</span></a>              <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a> = &amp; get_CommentPrerenderingCache();
<a name="l2515"><span class="linenum">2515</span></a>  
<a name="l2516"><span class="linenum">2516</span></a>              if( isset(<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>]) )
<a name="l2517"><span class="linenum">2517</span></a>              { // already in PHP cache.
<a name="l2518"><span class="linenum">2518</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>];
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment">                // Save memory, typically only accessed once.</span>
<a name="l2520"><span class="linenum">2520</span></a>                  unset(<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>]);
<a name="l2521"><span class="linenum">2521</span></a>              }
<a name="l2522"><span class="linenum">2522</span></a>              else
<a name="l2523"><span class="linenum">2523</span></a>              { // try loading into Cache
<a name="l2524"><span class="linenum">2524</span></a>                  if( ! isset(<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>]) )
<a name="l2525"><span class="linenum">2525</span></a>                  { // only do the prefetch loading once.
<a name="l2526"><span class="linenum">2526</span></a>                      <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>] = array();
<a name="l2527"><span class="linenum">2527</span></a>  
<a name="l2528"><span class="linenum">2528</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l2529"><span class="linenum">2529</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'cmpr_cmt_ID, cmpr_format, cmpr_renderers, cmpr_content_prerendered' );
<a name="l2530"><span class="linenum">2530</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_comments__prerendering' );
<a name="l2531"><span class="linenum">2531</span></a>                      if( empty( <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../_variables/CommentList.html">$CommentList</a> ) )
<a name="l2532"><span class="linenum">2532</span></a>                      {  // load prerendered cache for each comment which belongs to this comments Item
<a name="l2533"><span class="linenum">2533</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_comments ON cmpr_cmt_ID = comment_ID' );
<a name="l2534"><span class="linenum">2534</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'comment_item_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;ID );
<a name="l2535"><span class="linenum">2535</span></a>                      }
<a name="l2536"><span class="linenum">2536</span></a>                      else
<a name="l2537"><span class="linenum">2537</span></a>                      { // load prerendered cache for each comment from the CommentList
<a name="l2538"><span class="linenum">2538</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'cmpr_cmt_ID IN ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it2703" onMouseOver="hilite(2703)" onMouseOut="lolite()" onClick="logVariable('CommentList')" href="../../../_variables/CommentList.html">$CommentList</a>-&gt;<a class="function" onClick="logFunction('get_page_ID_array')" href="../../../_functions/get_page_id_array.html" onMouseOver="funcPopup(event,'get_page_id_array')">get_page_ID_array</a>() ).' )' );
<a name="l2539"><span class="linenum">2539</span></a>                      }
<a name="l2540"><span class="linenum">2540</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cmpr_format = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ) );
<a name="l2541"><span class="linenum">2541</span></a>                      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../../../_variables/rows.html">$rows</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), <a class="constant" onClick="logConstant('OBJECT')" href="../../../_constants/OBJECT.html" onMouseOver="constPopup(event,'OBJECT')">OBJECT</a>, 'Preload prerendered comments <a class="function" onClick="logFunction('content')" href="../../../_functions/content.html" onMouseOver="funcPopup(event,'content')">content</a> ('.<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>.')' );
<a name="l2542"><span class="linenum">2542</span></a>                      foreach(<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../../../_variables/rows.html">$rows</a> as <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>)
<a name="l2543"><span class="linenum">2543</span></a>                      {
<a name="l2544"><span class="linenum">2544</span></a>                          <a class="var it1543" onMouseOver="hilite(1543)" onMouseOut="lolite()" onClick="logVariable('row_cache_key')" href="../../../_variables/row_cache_key.html">$row_cache_key</a> = <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('cmpr_format')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/cmpr_format.html">cmpr_format</a>.'/'.<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('cmpr_renderers')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/cmpr_renderers.html">cmpr_renderers</a>;
<a name="l2545"><span class="linenum">2545</span></a>  
<a name="l2546"><span class="linenum">2546</span></a>                          if( ! isset(<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('cmpr_cmt_ID')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/cmpr_cmt_ID.html">cmpr_cmt_ID</a>]) )
<a name="l2547"><span class="linenum">2547</span></a>                          { // init list
<a name="l2548"><span class="linenum">2548</span></a>                              <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('cmpr_cmt_ID')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/cmpr_cmt_ID.html">cmpr_cmt_ID</a>] = array();
<a name="l2549"><span class="linenum">2549</span></a>                          }
<a name="l2550"><span class="linenum">2550</span></a>  
<a name="l2551"><span class="linenum">2551</span></a>                          <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('cmpr_cmt_ID')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/cmpr_cmt_ID.html">cmpr_cmt_ID</a>][<a class="var it1543" onMouseOver="hilite(1543)" onMouseOut="lolite()" onClick="logVariable('row_cache_key')" href="../../../_variables/row_cache_key.html">$row_cache_key</a>] = <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('cmpr_content_prerendered')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/cmpr_content_prerendered.html">cmpr_content_prerendered</a>;
<a name="l2552"><span class="linenum">2552</span></a>                      }
<a name="l2553"><span class="linenum">2553</span></a>  
<a name="l2554"><span class="linenum">2554</span></a>  <span class="comment">                    // Get the value for current Comment.</span>
<a name="l2555"><span class="linenum">2555</span></a>                      if( isset(<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>]) )
<a name="l2556"><span class="linenum">2556</span></a>                      {
<a name="l2557"><span class="linenum">2557</span></a>                          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>];
<a name="l2558"><span class="linenum">2558</span></a>  <span class="comment">                        // Save memory, typically only accessed once.</span>
<a name="l2559"><span class="linenum">2559</span></a>                          unset(<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>][<a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>]);
<a name="l2560"><span class="linenum">2560</span></a>                      }
<a name="l2561"><span class="linenum">2561</span></a>                  }
<a name="l2562"><span class="linenum">2562</span></a>              }
<a name="l2563"><span class="linenum">2563</span></a>          }
<a name="l2564"><span class="linenum">2564</span></a>  
<a name="l2565"><span class="linenum">2565</span></a>          if( !isset( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ) )
<a name="l2566"><span class="linenum">2566</span></a>          {
<a name="l2567"><span class="linenum">2567</span></a>              <a class="var it92" onMouseOver="hilite(92)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content.html">content</a>;
<a name="l2568"><span class="linenum">2568</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'FilterCommentContent', array( 'data' =&gt; &amp; <a class="var it92" onMouseOver="hilite(92)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>, 'Comment' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l2569"><span class="linenum">2569</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it92" onMouseOver="hilite(92)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2570"><span class="linenum">2570</span></a>  
<a name="l2571"><span class="linenum">2571</span></a>              if( <a class="var it1540" onMouseOver="hilite(1540)" onMouseOut="lolite()" onClick="logVariable('use_cache')" href="../../../_variables/use_cache.html">$use_cache</a> )
<a name="l2572"><span class="linenum">2572</span></a>              { // save into DB (using REPLACE INTO because it may have been pre-rendered by another thread since the SELECT above)
<a name="l2573"><span class="linenum">2573</span></a>                  global <a class="var it1254" onMouseOver="hilite(1254)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a>;
<a name="l2574"><span class="linenum">2574</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'REPLACE INTO T_comments__prerendering ( cmpr_cmt_ID, cmpr_format, cmpr_renderers, cmpr_content_prerendered, cmpr_datemodified )
<a name="l2575"><span class="linenum">2575</span></a>                       VALUES ( '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a> ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> ).', '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="function" onClick="logFunction('date2mysql')" href="../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it1254" onMouseOver="hilite(1254)" onMouseOut="lolite()" onClick="logVariable('servertimenow')" href="../../../_variables/servertimenow.html">$servertimenow</a> ) ).' )', 'Cache prerendered comment content' );
<a name="l2576"><span class="linenum">2576</span></a>              }
<a name="l2577"><span class="linenum">2577</span></a>          }
<a name="l2578"><span class="linenum">2578</span></a>  
<a name="l2579"><span class="linenum">2579</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2580"><span class="linenum">2580</span></a>      }
<a name="l2581"><span class="linenum">2581</span></a>  
<a name="l2582"><span class="linenum">2582</span></a>  
<a name="l2583"><span class="linenum">2583</span></a>      <span class="comment">/**</span>
<a name="l2584"><span class="linenum">2584</span></a>  <span class="comment">     * Unset any prerendered content for this item (in PHP cache).</span>
<a name="l2585"><span class="linenum">2585</span></a>  <span class="comment">     */</span>
<a name="l2586"><span class="linenum">2586</span></a>  	function <a class="function" onClick="logFunction('delete_prerendered_content')" href="../../../_functions/delete_prerendered_content.html" onMouseOver="funcPopup(event,'delete_prerendered_content')">delete_prerendered_content</a>()
<a name="l2587"><span class="linenum">2587</span></a>      {
<a name="l2588"><span class="linenum">2588</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l2589"><span class="linenum">2589</span></a>  
<a name="l2590"><span class="linenum">2590</span></a>  <span class="comment">        // Delete DB rows.</span>
<a name="l2591"><span class="linenum">2591</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'DELETE FROM T_comments__prerendering WHERE cmpr_cmt_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l2592"><span class="linenum">2592</span></a>  
<a name="l2593"><span class="linenum">2593</span></a>  <span class="comment">        // Delete cache.</span>
<a name="l2594"><span class="linenum">2594</span></a>          <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a> = &amp; get_CommentPrerenderingCache();
<a name="l2595"><span class="linenum">2595</span></a>          foreach( <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>) as <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> )
<a name="l2596"><span class="linenum">2596</span></a>          {
<a name="l2597"><span class="linenum">2597</span></a>              unset(<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('CommentPrerenderingCache')" href="../../../_variables/CommentPrerenderingCache.html">$CommentPrerenderingCache</a>[<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>][<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>]);
<a name="l2598"><span class="linenum">2598</span></a>          }
<a name="l2599"><span class="linenum">2599</span></a>      }
<a name="l2600"><span class="linenum">2600</span></a>  
<a name="l2601"><span class="linenum">2601</span></a>  
<a name="l2602"><span class="linenum">2602</span></a>      <span class="comment">/**</span>
<a name="l2603"><span class="linenum">2603</span></a>  <span class="comment">     * Template function: get content of comment</span>
<a name="l2604"><span class="linenum">2604</span></a>  <span class="comment">     *</span>
<a name="l2605"><span class="linenum">2605</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l2606"><span class="linenum">2606</span></a>  <span class="comment">     * @return string</span>
<a name="l2607"><span class="linenum">2607</span></a>  <span class="comment">     */</span>
<a name="l2608"><span class="linenum">2608</span></a>  	function <a class="function" onClick="logFunction('get_content')" href="../../../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l2609"><span class="linenum">2609</span></a>      {
<a name="l2610"><span class="linenum">2610</span></a>          if( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> == 'raw_text' )
<a name="l2611"><span class="linenum">2611</span></a>          {
<a name="l2612"><span class="linenum">2612</span></a>              return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/content.html">content</a>, 'text' );
<a name="l2613"><span class="linenum">2613</span></a>          }
<a name="l2614"><span class="linenum">2614</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_prerendered_content')" href="../../../_functions/get_prerendered_content.html" onMouseOver="funcPopup(event,'get_prerendered_content')">get_prerendered_content</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2615"><span class="linenum">2615</span></a>      }
<a name="l2616"><span class="linenum">2616</span></a>  
<a name="l2617"><span class="linenum">2617</span></a>  
<a name="l2618"><span class="linenum">2618</span></a>      <span class="comment">/**</span>
<a name="l2619"><span class="linenum">2619</span></a>  <span class="comment">     * Template function: display content of comment</span>
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment">     *</span>
<a name="l2621"><span class="linenum">2621</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l2622"><span class="linenum">2622</span></a>  <span class="comment">     * @param boolean Add ban url action icon after each url or not</span>
<a name="l2623"><span class="linenum">2623</span></a>  <span class="comment">     * @param boolean show comment attachments</span>
<a name="l2624"><span class="linenum">2624</span></a>  <span class="comment">     * @param array attachment display params</span>
<a name="l2625"><span class="linenum">2625</span></a>  <span class="comment">     */</span>
<a name="l2626"><span class="linenum">2626</span></a>  	function <a class="function" onClick="logFunction('content')" href="../../../_functions/content.html" onMouseOver="funcPopup(event,'content')">content</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody', <a class="var it7045" onMouseOver="hilite(7045)" onMouseOut="lolite()" onClick="logVariable('ban_urls')" href="../../../_variables/ban_urls.html">$ban_urls</a> = false, <a class="var it7046" onMouseOver="hilite(7046)" onMouseOut="lolite()" onClick="logVariable('show_attachments')" href="../../../_variables/show_attachments.html">$show_attachments</a> = true, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2627"><span class="linenum">2627</span></a>      {
<a name="l2628"><span class="linenum">2628</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l2629"><span class="linenum">2629</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l2630"><span class="linenum">2630</span></a>  
<a name="l2631"><span class="linenum">2631</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l2632"><span class="linenum">2632</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2633"><span class="linenum">2633</span></a>                  'before_image'          =&gt; '&lt;figure class=&quot;evo_image_block&quot;&gt;',
<a name="l2634"><span class="linenum">2634</span></a>                  'before_image_legend'   =&gt; '&lt;figcaption class=&quot;evo_image_legend&quot;&gt;',
<a name="l2635"><span class="linenum">2635</span></a>                  'after_image_legend'    =&gt; '&lt;/figcaption&gt;',
<a name="l2636"><span class="linenum">2636</span></a>                  'after_image'           =&gt; '&lt;/figure&gt;',
<a name="l2637"><span class="linenum">2637</span></a>                  'image_size'            =&gt; 'fit-400x320',
<a name="l2638"><span class="linenum">2638</span></a>                  'image_class'           =&gt; '',
<a name="l2639"><span class="linenum">2639</span></a>                  'image_text'            =&gt; '', // Text below attached pictures
<a name="l2640"><span class="linenum">2640</span></a>                  'attachments_mode'      =&gt; 'read', // read | view
<a name="l2641"><span class="linenum">2641</span></a>                  'attachments_view_text' =&gt; '',
<a name="l2642"><span class="linenum">2642</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2643"><span class="linenum">2643</span></a>  
<a name="l2644"><span class="linenum">2644</span></a>          <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a> = array();
<a name="l2645"><span class="linenum">2645</span></a>  
<a name="l2646"><span class="linenum">2646</span></a>          if( <a class="var it7046" onMouseOver="hilite(7046)" onMouseOut="lolite()" onClick="logVariable('show_attachments')" href="../../../_variables/show_attachments.html">$show_attachments</a> )
<a name="l2647"><span class="linenum">2647</span></a>          {
<a name="l2648"><span class="linenum">2648</span></a>              if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) &amp;&amp; isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('checked_attachments')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/checked_attachments.html">checked_attachments</a> ) )
<a name="l2649"><span class="linenum">2649</span></a>              { // PREVIEW
<a name="l2650"><span class="linenum">2650</span></a>                  <a class="var it7047" onMouseOver="hilite(7047)" onMouseOut="lolite()" onClick="logVariable('attachment_ids')" href="../../../_variables/attachment_ids.html">$attachment_ids</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('checked_attachments')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/checked_attachments.html">checked_attachments</a> );
<a name="l2651"><span class="linenum">2651</span></a>                  <a class="var it1102" onMouseOver="hilite(1102)" onMouseOut="lolite()" onClick="logVariable('FileCache')" href="../../../_variables/FileCache.html">$FileCache</a> = &amp; get_FileCache();
<a name="l2652"><span class="linenum">2652</span></a>                  foreach( <a class="var it7047" onMouseOver="hilite(7047)" onMouseOut="lolite()" onClick="logVariable('attachment_ids')" href="../../../_variables/attachment_ids.html">$attachment_ids</a> as <a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('ID')" href="../../../_variables/ID.html">$ID</a> )
<a name="l2653"><span class="linenum">2653</span></a>                  {
<a name="l2654"><span class="linenum">2654</span></a>                      <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> = <a class="var it1102" onMouseOver="hilite(1102)" onMouseOut="lolite()" onClick="logVariable('FileCache')" href="../../../_variables/FileCache.html">$FileCache</a>-&gt;get_by_ID( <a class="var it139" onMouseOver="hilite(139)" onMouseOut="lolite()" onClick="logVariable('ID')" href="../../../_variables/ID.html">$ID</a>, false, false );
<a name="l2655"><span class="linenum">2655</span></a>                      if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> != NULL )
<a name="l2656"><span class="linenum">2656</span></a>                      {
<a name="l2657"><span class="linenum">2657</span></a>                          <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a>[] = <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>;
<a name="l2658"><span class="linenum">2658</span></a>                      }
<a name="l2659"><span class="linenum">2659</span></a>                  }
<a name="l2660"><span class="linenum">2660</span></a>              }
<a name="l2661"><span class="linenum">2661</span></a>              else
<a name="l2662"><span class="linenum">2662</span></a>              { // Get all Links
<a name="l2663"><span class="linenum">2663</span></a>                  <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a> = <span class="keyword">new </span><a class="class" onClick="logClass('LinkComment')" href="../../../_classes/linkcomment.html" onMouseOver="classPopup(event,'linkcomment')">LinkComment</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l2664"><span class="linenum">2664</span></a>                  <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a> = &amp; <a class="var it570" onMouseOver="hilite(570)" onMouseOut="lolite()" onClick="logVariable('LinkOwner')" href="../../../_variables/LinkOwner.html">$LinkOwner</a>-&gt;get_Links();
<a name="l2665"><span class="linenum">2665</span></a>              }
<a name="l2666"><span class="linenum">2666</span></a>          }
<a name="l2667"><span class="linenum">2667</span></a>  
<a name="l2668"><span class="linenum">2668</span></a>          <a class="var it7048" onMouseOver="hilite(7048)" onMouseOut="lolite()" onClick="logVariable('images_above_content')" href="../../../_variables/images_above_content.html">$images_above_content</a> = '';
<a name="l2669"><span class="linenum">2669</span></a>          <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('images_below_content')" href="../../../_variables/images_below_content.html">$images_below_content</a> = '';
<a name="l2670"><span class="linenum">2670</span></a>          foreach( <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a> as <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> =&gt; <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a> )
<a name="l2671"><span class="linenum">2671</span></a>          {
<a name="l2672"><span class="linenum">2672</span></a>              if( ! empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l2673"><span class="linenum">2673</span></a>              { // Normal mode when comment exists in DB (NOT PREVIEW mode)
<a name="l2674"><span class="linenum">2674</span></a>                  <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a> = <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a>;
<a name="l2675"><span class="linenum">2675</span></a>                  <a class="var it2101" onMouseOver="hilite(2101)" onMouseOut="lolite()" onClick="logVariable('link_position')" href="../../../_variables/link_position.html">$link_position</a> = <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'position' );
<a name="l2676"><span class="linenum">2676</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['Link'] = <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>;
<a name="l2677"><span class="linenum">2677</span></a>                  <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a> = <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a>-&gt;get_File();
<a name="l2678"><span class="linenum">2678</span></a>              }
<a name="l2679"><span class="linenum">2679</span></a>              else
<a name="l2680"><span class="linenum">2680</span></a>              { // Set default position for preview files
<a name="l2681"><span class="linenum">2681</span></a>                  <a class="var it2101" onMouseOver="hilite(2101)" onMouseOut="lolite()" onClick="logVariable('link_position')" href="../../../_variables/link_position.html">$link_position</a> = 'aftermore';
<a name="l2682"><span class="linenum">2682</span></a>              }
<a name="l2683"><span class="linenum">2683</span></a>  
<a name="l2684"><span class="linenum">2684</span></a>              <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> = <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a>;
<a name="l2685"><span class="linenum">2685</span></a>  
<a name="l2686"><span class="linenum">2686</span></a>              if( empty( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a> ) )
<a name="l2687"><span class="linenum">2687</span></a>              { // File object doesn't exist in DB
<a name="l2688"><span class="linenum">2688</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2689"><span class="linenum">2689</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'File object linked to comment #%d does not exist in DB!', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ), array( 'error', 'files' ) );
<a name="l2690"><span class="linenum">2690</span></a>                  continue;
<a name="l2691"><span class="linenum">2691</span></a>              }
<a name="l2692"><span class="linenum">2692</span></a>  
<a name="l2693"><span class="linenum">2693</span></a>              if( ! <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l2694"><span class="linenum">2694</span></a>              { // File doesn't exist on the disk
<a name="l2695"><span class="linenum">2695</span></a>                  global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l2696"><span class="linenum">2696</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( 'File linked to comment #%d does not exist (%s)!', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_full_path')" href="../../../_functions/get_full_path.html" onMouseOver="funcPopup(event,'get_full_path')">get_full_path</a>() ), array( 'error', 'files' ) );
<a name="l2697"><span class="linenum">2697</span></a>                  continue;
<a name="l2698"><span class="linenum">2698</span></a>              }
<a name="l2699"><span class="linenum">2699</span></a>  
<a name="l2700"><span class="linenum">2700</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l2701"><span class="linenum">2701</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['File'] = <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>;
<a name="l2702"><span class="linenum">2702</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['Comment'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>;
<a name="l2703"><span class="linenum">2703</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['data'] = &amp; <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2704"><span class="linenum">2704</span></a>  
<a name="l2705"><span class="linenum">2705</span></a>              <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>;
<a name="l2706"><span class="linenum">2706</span></a>              foreach( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> as <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> =&gt; <a class="var it1031" onMouseOver="hilite(1031)" onMouseOut="lolite()" onClick="logVariable('param_value')" href="../../../_variables/param_value.html">$param_value</a> )
<a name="l2707"><span class="linenum">2707</span></a>              { // Pass all params by reference, in order to give possibility to modify them by plugin
<a name="l2708"><span class="linenum">2708</span></a>  <span class="comment">                // So plugins can add some data before/after image tag (E.g. used by infodots plugin)</span>
<a name="l2709"><span class="linenum">2709</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> ] = &amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ <a class="var it1585" onMouseOver="hilite(1585)" onMouseOut="lolite()" onClick="logVariable('param_key')" href="../../../_variables/param_key.html">$param_key</a> ];
<a name="l2710"><span class="linenum">2710</span></a>              }
<a name="l2711"><span class="linenum">2711</span></a>  
<a name="l2712"><span class="linenum">2712</span></a>              if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event_first_true')" href="../../../_functions/trigger_event_first_true.html" onMouseOver="funcPopup(event,'trigger_event_first_true')">trigger_event_first_true</a>( 'RenderCommentAttachment', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) ) != 0 )
<a name="l2713"><span class="linenum">2713</span></a>              { // File was processed by plugin
<a name="l2714"><span class="linenum">2714</span></a>                  if( <a class="var it2101" onMouseOver="hilite(2101)" onMouseOut="lolite()" onClick="logVariable('link_position')" href="../../../_variables/link_position.html">$link_position</a> == 'teaser' )
<a name="l2715"><span class="linenum">2715</span></a>                  { // Image should be displayed above content
<a name="l2716"><span class="linenum">2716</span></a>                      <a class="var it7048" onMouseOver="hilite(7048)" onMouseOut="lolite()" onClick="logVariable('images_above_content')" href="../../../_variables/images_above_content.html">$images_above_content</a> .= <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2717"><span class="linenum">2717</span></a>                  }
<a name="l2718"><span class="linenum">2718</span></a>                  else
<a name="l2719"><span class="linenum">2719</span></a>                  { // Image should be displayed below content
<a name="l2720"><span class="linenum">2720</span></a>                      <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('images_below_content')" href="../../../_variables/images_below_content.html">$images_below_content</a> .= <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2721"><span class="linenum">2721</span></a>                  }
<a name="l2722"><span class="linenum">2722</span></a>                  unset( <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a>[ <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> ] );
<a name="l2723"><span class="linenum">2723</span></a>                  continue;
<a name="l2724"><span class="linenum">2724</span></a>              }
<a name="l2725"><span class="linenum">2725</span></a>              if( <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('is_image')" href="../../../_functions/is_image.html" onMouseOver="funcPopup(event,'is_image')">is_image</a>() )
<a name="l2726"><span class="linenum">2726</span></a>              { // File is image
<a name="l2727"><span class="linenum">2727</span></a>                  if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attachments_mode'] == 'view' )
<a name="l2728"><span class="linenum">2728</span></a>                  { // Only preview attachments
<a name="l2729"><span class="linenum">2729</span></a>                      <a class="var it7051" onMouseOver="hilite(7051)" onMouseOut="lolite()" onClick="logVariable('image_link_rel')" href="../../../_variables/image_link_rel.html">$image_link_rel</a> = '';
<a name="l2730"><span class="linenum">2730</span></a>                      <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('image_link_to')" href="../../../_variables/image_link_to.html">$image_link_to</a> = '';
<a name="l2731"><span class="linenum">2731</span></a>                  }
<a name="l2732"><span class="linenum">2732</span></a>                  else// if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attachments_mode'] == 'read' )
<a name="l2733"><span class="linenum">2733</span></a>                  { // Read attachments
<a name="l2734"><span class="linenum">2734</span></a>                      <a class="var it7051" onMouseOver="hilite(7051)" onMouseOut="lolite()" onClick="logVariable('image_link_rel')" href="../../../_variables/image_link_rel.html">$image_link_rel</a> = 'lightbox[c'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.']';
<a name="l2735"><span class="linenum">2735</span></a>                      <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('image_link_to')" href="../../../_variables/image_link_to.html">$image_link_to</a> = 'original';
<a name="l2736"><span class="linenum">2736</span></a>                  }
<a name="l2737"><span class="linenum">2737</span></a>  
<a name="l2738"><span class="linenum">2738</span></a>                  if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l2739"><span class="linenum">2739</span></a>                  { // PREVIEW mode
<a name="l2740"><span class="linenum">2740</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it565" onMouseOver="hilite(565)" onMouseOut="lolite()" onClick="logVariable('File')" href="../../../_variables/File.html">$File</a>-&gt;<a class="function" onClick="logFunction('get_tag')" href="../../../_functions/get_tag.html" onMouseOver="funcPopup(event,'get_tag')">get_tag</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_image'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_image_legend'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_image_legend'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_image'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_size'], <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('image_link_to')" href="../../../_variables/image_link_to.html">$image_link_to</a>, <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Posted by ').<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_name')" href="../../../_functions/get_author_name.html" onMouseOver="funcPopup(event,'get_author_name')">get_author_name</a>(), <a class="var it7051" onMouseOver="hilite(7051)" onMouseOut="lolite()" onClick="logVariable('image_link_rel')" href="../../../_variables/image_link_rel.html">$image_link_rel</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_class'], '', '', '#' );
<a name="l2741"><span class="linenum">2741</span></a>                  }
<a name="l2742"><span class="linenum">2742</span></a>                  else
<a name="l2743"><span class="linenum">2743</span></a>                  {
<a name="l2744"><span class="linenum">2744</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('Link')" href="../../../_variables/Link.html">$Link</a>-&gt;<a class="function" onClick="logFunction('get_tag')" href="../../../_functions/get_tag.html" onMouseOver="funcPopup(event,'get_tag')">get_tag</a>( <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2745"><span class="linenum">2745</span></a>                          'image_link_to'    =&gt; <a class="var it7052" onMouseOver="hilite(7052)" onMouseOut="lolite()" onClick="logVariable('image_link_to')" href="../../../_variables/image_link_to.html">$image_link_to</a>,
<a name="l2746"><span class="linenum">2746</span></a>                          'image_link_title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Posted by ').<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author_name')" href="../../../_functions/get_author_name.html" onMouseOver="funcPopup(event,'get_author_name')">get_author_name</a>(),
<a name="l2747"><span class="linenum">2747</span></a>                          'image_link_rel'   =&gt; <a class="var it7051" onMouseOver="hilite(7051)" onMouseOut="lolite()" onClick="logVariable('image_link_rel')" href="../../../_variables/image_link_rel.html">$image_link_rel</a>,
<a name="l2748"><span class="linenum">2748</span></a>                      ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) );
<a name="l2749"><span class="linenum">2749</span></a>                  }
<a name="l2750"><span class="linenum">2750</span></a>  
<a name="l2751"><span class="linenum">2751</span></a>                  if( <a class="var it2101" onMouseOver="hilite(2101)" onMouseOut="lolite()" onClick="logVariable('link_position')" href="../../../_variables/link_position.html">$link_position</a> == 'teaser' )
<a name="l2752"><span class="linenum">2752</span></a>                  { // Image should be displayed above content
<a name="l2753"><span class="linenum">2753</span></a>                      <a class="var it7048" onMouseOver="hilite(7048)" onMouseOut="lolite()" onClick="logVariable('images_above_content')" href="../../../_variables/images_above_content.html">$images_above_content</a> .= <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2754"><span class="linenum">2754</span></a>                  }
<a name="l2755"><span class="linenum">2755</span></a>                  else
<a name="l2756"><span class="linenum">2756</span></a>                  { // Image should be displayed below content
<a name="l2757"><span class="linenum">2757</span></a>                      <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('images_below_content')" href="../../../_variables/images_below_content.html">$images_below_content</a> .= <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2758"><span class="linenum">2758</span></a>                  }
<a name="l2759"><span class="linenum">2759</span></a>  
<a name="l2760"><span class="linenum">2760</span></a>                  unset( <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a>[ <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> ] );
<a name="l2761"><span class="linenum">2761</span></a>              }
<a name="l2762"><span class="linenum">2762</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="var it1584" onMouseOver="hilite(1584)" onMouseOut="lolite()" onClick="logVariable('temp_params')" href="../../../_variables/temp_params.html">$temp_params</a>;
<a name="l2763"><span class="linenum">2763</span></a>          }
<a name="l2764"><span class="linenum">2764</span></a>  
<a name="l2765"><span class="linenum">2765</span></a>          if( ! empty( <a class="var it7048" onMouseOver="hilite(7048)" onMouseOut="lolite()" onClick="logVariable('images_above_content')" href="../../../_variables/images_above_content.html">$images_above_content</a> ) )
<a name="l2766"><span class="linenum">2766</span></a>          { // Display images above content
<a name="l2767"><span class="linenum">2767</span></a>              echo <a class="var it7048" onMouseOver="hilite(7048)" onMouseOut="lolite()" onClick="logVariable('images_above_content')" href="../../../_variables/images_above_content.html">$images_above_content</a>;
<a name="l2768"><span class="linenum">2768</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_text'] != '' )
<a name="l2769"><span class="linenum">2769</span></a>              { // Display info text below pictures
<a name="l2770"><span class="linenum">2770</span></a>                  echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_text'];
<a name="l2771"><span class="linenum">2771</span></a>              }
<a name="l2772"><span class="linenum">2772</span></a>          }
<a name="l2773"><span class="linenum">2773</span></a>  
<a name="l2774"><span class="linenum">2774</span></a>          if( <a class="var it7045" onMouseOver="hilite(7045)" onMouseOut="lolite()" onClick="logVariable('ban_urls')" href="../../../_variables/ban_urls.html">$ban_urls</a> )
<a name="l2775"><span class="linenum">2775</span></a>          { // add ban icons if user has edit permission for this comment
<a name="l2776"><span class="linenum">2776</span></a>              <a class="var it7045" onMouseOver="hilite(7045)" onMouseOut="lolite()" onClick="logVariable('ban_urls')" href="../../../_variables/ban_urls.html">$ban_urls</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> );
<a name="l2777"><span class="linenum">2777</span></a>          }
<a name="l2778"><span class="linenum">2778</span></a>  
<a name="l2779"><span class="linenum">2779</span></a>          if( <a class="var it7045" onMouseOver="hilite(7045)" onMouseOut="lolite()" onClick="logVariable('ban_urls')" href="../../../_variables/ban_urls.html">$ban_urls</a> )
<a name="l2780"><span class="linenum">2780</span></a>          { // ban urls and user has permission
<a name="l2781"><span class="linenum">2781</span></a>              echo <a class="function" onClick="logFunction('add_ban_icons')" href="../../../_functions/add_ban_icons.html" onMouseOver="funcPopup(event,'add_ban_icons')">add_ban_icons</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content')" href="../../../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ) );
<a name="l2782"><span class="linenum">2782</span></a>          }
<a name="l2783"><span class="linenum">2783</span></a>          else
<a name="l2784"><span class="linenum">2784</span></a>          { // don't ban urls
<a name="l2785"><span class="linenum">2785</span></a>              echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_content')" href="../../../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l2786"><span class="linenum">2786</span></a>          }
<a name="l2787"><span class="linenum">2787</span></a>  
<a name="l2788"><span class="linenum">2788</span></a>          if( ! empty( <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('images_below_content')" href="../../../_variables/images_below_content.html">$images_below_content</a> ) )
<a name="l2789"><span class="linenum">2789</span></a>          { // Display images below content
<a name="l2790"><span class="linenum">2790</span></a>              echo <a class="var it7049" onMouseOver="hilite(7049)" onMouseOut="lolite()" onClick="logVariable('images_below_content')" href="../../../_variables/images_below_content.html">$images_below_content</a>;
<a name="l2791"><span class="linenum">2791</span></a>              if( empty( <a class="var it7048" onMouseOver="hilite(7048)" onMouseOut="lolite()" onClick="logVariable('images_above_content')" href="../../../_variables/images_above_content.html">$images_above_content</a> ) &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_text'] != '' )
<a name="l2792"><span class="linenum">2792</span></a>              { // Display info text below pictures
<a name="l2793"><span class="linenum">2793</span></a>                  echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['image_text'];
<a name="l2794"><span class="linenum">2794</span></a>              }
<a name="l2795"><span class="linenum">2795</span></a>          }
<a name="l2796"><span class="linenum">2796</span></a>  
<a name="l2797"><span class="linenum">2797</span></a>          if( isset( <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a> ) )
<a name="l2798"><span class="linenum">2798</span></a>          { // show not image attachments
<a name="l2799"><span class="linenum">2799</span></a>              <a class="var it7053" onMouseOver="hilite(7053)" onMouseOut="lolite()" onClick="logVariable('after_docs')" href="../../../_variables/after_docs.html">$after_docs</a> = '';
<a name="l2800"><span class="linenum">2800</span></a>              if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a> ) &gt; 0 )
<a name="l2801"><span class="linenum">2801</span></a>              {
<a name="l2802"><span class="linenum">2802</span></a>                  echo '&lt;br /&gt;&lt;b&gt;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Attachments:' ).'&lt;/b&gt;';
<a name="l2803"><span class="linenum">2803</span></a>                  echo '&lt;ul class=&quot;bFiles&quot;&gt;';
<a name="l2804"><span class="linenum">2804</span></a>                  <a class="var it7053" onMouseOver="hilite(7053)" onMouseOut="lolite()" onClick="logVariable('after_docs')" href="../../../_variables/after_docs.html">$after_docs</a> = '&lt;/ul&gt;';
<a name="l2805"><span class="linenum">2805</span></a>              }
<a name="l2806"><span class="linenum">2806</span></a>              foreach( <a class="var it2324" onMouseOver="hilite(2324)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../_variables/attachments.html">$attachments</a> as <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a> )
<a name="l2807"><span class="linenum">2807</span></a>              {
<a name="l2808"><span class="linenum">2808</span></a>  <span class="comment">                // $attachment is a File in preview mode, but it is a Link in normal mode</span>
<a name="l2809"><span class="linenum">2809</span></a>                  <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a> = empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) ? <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a> : <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a>-&gt;get_File();
<a name="l2810"><span class="linenum">2810</span></a>                  echo '&lt;li&gt;';
<a name="l2811"><span class="linenum">2811</span></a>                  if( empty( <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a> ) )
<a name="l2812"><span class="linenum">2812</span></a>                  { // Broken File object
<a name="l2813"><span class="linenum">2813</span></a>                      <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('attachment_download_link')" href="../../../_variables/attachment_download_link.html">$attachment_download_link</a> = '';
<a name="l2814"><span class="linenum">2814</span></a>                      <a class="var it7056" onMouseOver="hilite(7056)" onMouseOut="lolite()" onClick="logVariable('attachment_name')" href="../../../_variables/attachment_name.html">$attachment_name</a> = empty( <a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a> ) ? '' : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Link ID' ).'#'.<a class="var it7050" onMouseOver="hilite(7050)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('ID')" class="var it10925" onMouseOver="hilite(10925)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l2815"><span class="linenum">2815</span></a>                  }
<a name="l2816"><span class="linenum">2816</span></a>                  elseif( ! <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l2817"><span class="linenum">2817</span></a>                  {
<a name="l2818"><span class="linenum">2818</span></a>                      <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('attachment_download_link')" href="../../../_variables/attachment_download_link.html">$attachment_download_link</a> = '';
<a name="l2819"><span class="linenum">2819</span></a>                      <a class="var it7056" onMouseOver="hilite(7056)" onMouseOut="lolite()" onClick="logVariable('attachment_name')" href="../../../_variables/attachment_name.html">$attachment_name</a> = <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l2820"><span class="linenum">2820</span></a>                  }
<a name="l2821"><span class="linenum">2821</span></a>                  elseif( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attachments_mode'] == 'view' )
<a name="l2822"><span class="linenum">2822</span></a>                  { // Only preview attachments
<a name="l2823"><span class="linenum">2823</span></a>                      <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('attachment_download_link')" href="../../../_variables/attachment_download_link.html">$attachment_download_link</a> = '';
<a name="l2824"><span class="linenum">2824</span></a>                      <a class="var it7056" onMouseOver="hilite(7056)" onMouseOut="lolite()" onClick="logVariable('attachment_name')" href="../../../_variables/attachment_name.html">$attachment_name</a> = <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>();
<a name="l2825"><span class="linenum">2825</span></a>                  }
<a name="l2826"><span class="linenum">2826</span></a>                  else// if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attachments_mode'] == 'read' )
<a name="l2827"><span class="linenum">2827</span></a>                  { // Read attachments
<a name="l2828"><span class="linenum">2828</span></a>                      <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('attachment_download_link')" href="../../../_variables/attachment_download_link.html">$attachment_download_link</a> = <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Download file'), 'download', <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>(), '', 5 ).' ';
<a name="l2829"><span class="linenum">2829</span></a>                      <a class="var it7056" onMouseOver="hilite(7056)" onMouseOut="lolite()" onClick="logVariable('attachment_name')" href="../../../_variables/attachment_name.html">$attachment_name</a> = <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a>-&gt;<a class="function" onClick="logFunction('get_view_link')" href="../../../_functions/get_view_link.html" onMouseOver="funcPopup(event,'get_view_link')">get_view_link</a>( <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() );
<a name="l2830"><span class="linenum">2830</span></a>                  }
<a name="l2831"><span class="linenum">2831</span></a>                  echo <a class="var it7055" onMouseOver="hilite(7055)" onMouseOut="lolite()" onClick="logVariable('attachment_download_link')" href="../../../_variables/attachment_download_link.html">$attachment_download_link</a>;
<a name="l2832"><span class="linenum">2832</span></a>                  echo <a class="var it7056" onMouseOver="hilite(7056)" onMouseOut="lolite()" onClick="logVariable('attachment_name')" href="../../../_variables/attachment_name.html">$attachment_name</a>;
<a name="l2833"><span class="linenum">2833</span></a>                  if( ! empty( <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a> ) &amp;&amp; <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() )
<a name="l2834"><span class="linenum">2834</span></a>                  { // Display file size if it exists
<a name="l2835"><span class="linenum">2835</span></a>                      echo ' ('.<a class="function" onClick="logFunction('bytesreadable')" href="../../../_functions/bytesreadable.html" onMouseOver="funcPopup(event,'bytesreadable')">bytesreadable</a>( <a class="var it7054" onMouseOver="hilite(7054)" onMouseOut="lolite()" onClick="logVariable('doc_File')" href="../../../_variables/doc_File.html">$doc_File</a>-&gt;<a class="function" onClick="logFunction('get_size')" href="../../../_functions/get_size.html" onMouseOver="funcPopup(event,'get_size')">get_size</a>() ).')';
<a name="l2836"><span class="linenum">2836</span></a>                  }
<a name="l2837"><span class="linenum">2837</span></a>                  else
<a name="l2838"><span class="linenum">2838</span></a>                  { // Display warning if File is broken
<a name="l2839"><span class="linenum">2839</span></a>                      echo ' - &lt;span class=&quot;red nowrap&quot;&gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'warning_yellow' ).' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Missing attachment!').'&lt;/span&gt;';
<a name="l2840"><span class="linenum">2840</span></a>                  }
<a name="l2841"><span class="linenum">2841</span></a>                  if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attachments_view_text'] ) )
<a name="l2842"><span class="linenum">2842</span></a>                  {
<a name="l2843"><span class="linenum">2843</span></a>                      echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['attachments_view_text'];
<a name="l2844"><span class="linenum">2844</span></a>                  }
<a name="l2845"><span class="linenum">2845</span></a>                  echo '&lt;/li&gt;';
<a name="l2846"><span class="linenum">2846</span></a>              }
<a name="l2847"><span class="linenum">2847</span></a>              echo <a class="var it7053" onMouseOver="hilite(7053)" onMouseOut="lolite()" onClick="logVariable('after_docs')" href="../../../_variables/after_docs.html">$after_docs</a>;
<a name="l2848"><span class="linenum">2848</span></a>          }
<a name="l2849"><span class="linenum">2849</span></a>      }
<a name="l2850"><span class="linenum">2850</span></a>  
<a name="l2851"><span class="linenum">2851</span></a>  
<a name="l2852"><span class="linenum">2852</span></a>      <span class="comment">/**</span>
<a name="l2853"><span class="linenum">2853</span></a>  <span class="comment">     * Template function: display checkable list of renderers</span>
<a name="l2854"><span class="linenum">2854</span></a>  <span class="comment">     *</span>
<a name="l2855"><span class="linenum">2855</span></a>  <span class="comment">     * @param array|NULL If given, assume these renderers to be checked.</span>
<a name="l2856"><span class="linenum">2856</span></a>  <span class="comment">     * @params boolean display or not</span>
<a name="l2857"><span class="linenum">2857</span></a>  <span class="comment">     */</span>
<a name="l2858"><span class="linenum">2858</span></a>  	function <a class="function" onClick="logFunction('renderer_checkboxes')" href="../../../_functions/renderer_checkboxes.html" onMouseOver="funcPopup(event,'renderer_checkboxes')">renderer_checkboxes</a>( <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a> = NULL, <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> = true )
<a name="l2859"><span class="linenum">2859</span></a>      {
<a name="l2860"><span class="linenum">2860</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l2861"><span class="linenum">2861</span></a>  
<a name="l2862"><span class="linenum">2862</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a>) )
<a name="l2863"><span class="linenum">2863</span></a>          {
<a name="l2864"><span class="linenum">2864</span></a>              <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers')" href="../../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>();
<a name="l2865"><span class="linenum">2865</span></a>          }
<a name="l2866"><span class="linenum">2866</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('get_renderer_checkboxes')" href="../../../_functions/get_renderer_checkboxes.html" onMouseOver="funcPopup(event,'get_renderer_checkboxes')">get_renderer_checkboxes</a>( <a class="var it6984" onMouseOver="hilite(6984)" onMouseOut="lolite()" onClick="logVariable('comment_renderers')" href="../../../_variables/comment_renderers.html">$comment_renderers</a>, array( 'Comment' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l2867"><span class="linenum">2867</span></a>  
<a name="l2868"><span class="linenum">2868</span></a>          if( <a class="var it378" onMouseOver="hilite(378)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../../_variables/display.html">$display</a> )
<a name="l2869"><span class="linenum">2869</span></a>          {
<a name="l2870"><span class="linenum">2870</span></a>              echo <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2871"><span class="linenum">2871</span></a>          }
<a name="l2872"><span class="linenum">2872</span></a>  
<a name="l2873"><span class="linenum">2873</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l2874"><span class="linenum">2874</span></a>      }
<a name="l2875"><span class="linenum">2875</span></a>  
<a name="l2876"><span class="linenum">2876</span></a>  
<a name="l2877"><span class="linenum">2877</span></a>      <span class="comment">/**</span>
<a name="l2878"><span class="linenum">2878</span></a>  <span class="comment">     * Get title of comment, e.g. &quot;Comment from: Foo Bar&quot;</span>
<a name="l2879"><span class="linenum">2879</span></a>  <span class="comment">     *</span>
<a name="l2880"><span class="linenum">2880</span></a>  <span class="comment">     * @param array Params</span>
<a name="l2881"><span class="linenum">2881</span></a>  <span class="comment">     *   'author_format': Formatting of the author (%s gets replaced with</span>
<a name="l2882"><span class="linenum">2882</span></a>  <span class="comment">     *                    the author string)</span>
<a name="l2883"><span class="linenum">2883</span></a>  <span class="comment">     *   'link_text'    : 'avatar' - display author's login with avatar icon,</span>
<a name="l2884"><span class="linenum">2884</span></a>  <span class="comment">     *                    'only_avatar' - display only author's avatar</span>
<a name="l2885"><span class="linenum">2885</span></a>  <span class="comment">     *                    'login' - display only author's login</span>
<a name="l2886"><span class="linenum">2886</span></a>  <span class="comment">     *   'thumb_size'   : Author's avatar size</span>
<a name="l2887"><span class="linenum">2887</span></a>  <span class="comment">     * @return string</span>
<a name="l2888"><span class="linenum">2888</span></a>  <span class="comment">     */</span>
<a name="l2889"><span class="linenum">2889</span></a>  	function <a class="function" onClick="logFunction('get_title')" href="../../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l2890"><span class="linenum">2890</span></a>      {
<a name="l2891"><span class="linenum">2891</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l2892"><span class="linenum">2892</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l2893"><span class="linenum">2893</span></a>                  'author_format' =&gt; '%s',
<a name="l2894"><span class="linenum">2894</span></a>                  'link_text'     =&gt; 'name', // avatar_name | avatar_login | only_avatar | name | login | nickname | firstname | lastname | fullname | preferredname
<a name="l2895"><span class="linenum">2895</span></a>                  'thumb_size'    =&gt; 'crop-top-32x32' // author's avatar size
<a name="l2896"><span class="linenum">2896</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l2897"><span class="linenum">2897</span></a>  
<a name="l2898"><span class="linenum">2898</span></a>          <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a> = sprintf( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['author_format'], <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_author')" href="../../../_functions/get_author.html" onMouseOver="funcPopup(event,'get_author')">get_author</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> ) );
<a name="l2899"><span class="linenum">2899</span></a>  
<a name="l2900"><span class="linenum">2900</span></a>          switch( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'type' ) )
<a name="l2901"><span class="linenum">2901</span></a>          {
<a name="l2902"><span class="linenum">2902</span></a>              case 'comment': // Display a comment:
<a name="l2903"><span class="linenum">2903</span></a>                  <a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Comment from %s');
<a name="l2904"><span class="linenum">2904</span></a>                  break;
<a name="l2905"><span class="linenum">2905</span></a>  
<a name="l2906"><span class="linenum">2906</span></a>              case 'trackback': // Display a trackback:
<a name="l2907"><span class="linenum">2907</span></a>                  <a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Trackback from %s');
<a name="l2908"><span class="linenum">2908</span></a>                  break;
<a name="l2909"><span class="linenum">2909</span></a>  
<a name="l2910"><span class="linenum">2910</span></a>              case 'pingback': // Display a pingback:
<a name="l2911"><span class="linenum">2911</span></a>                  <a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Pingback from %s');
<a name="l2912"><span class="linenum">2912</span></a>                  break;
<a name="l2913"><span class="linenum">2913</span></a>  
<a name="l2914"><span class="linenum">2914</span></a>              case 'meta': // Display a meta comment:
<a name="l2915"><span class="linenum">2915</span></a>                  <a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Meta comment from %s');
<a name="l2916"><span class="linenum">2916</span></a>                  break;
<a name="l2917"><span class="linenum">2917</span></a>          }
<a name="l2918"><span class="linenum">2918</span></a>          return sprintf(<a class="var it34" onMouseOver="hilite(34)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../../_variables/s.html">$s</a>, <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../../_variables/author.html">$author</a>);
<a name="l2919"><span class="linenum">2919</span></a>      }
<a name="l2920"><span class="linenum">2920</span></a>  
<a name="l2921"><span class="linenum">2921</span></a>  
<a name="l2922"><span class="linenum">2922</span></a>      <span class="comment">/**</span>
<a name="l2923"><span class="linenum">2923</span></a>  <span class="comment">     * Get the list of validated renderers for this Comment. This includes stealth plugins etc.</span>
<a name="l2924"><span class="linenum">2924</span></a>  <span class="comment">     * @return array List of validated renderer codes</span>
<a name="l2925"><span class="linenum">2925</span></a>  <span class="comment">     */</span>
<a name="l2926"><span class="linenum">2926</span></a>  	function <a class="function" onClick="logFunction('get_renderers_validated')" href="../../../_functions/get_renderers_validated.html" onMouseOver="funcPopup(event,'get_renderers_validated')">get_renderers_validated</a>()
<a name="l2927"><span class="linenum">2927</span></a>      {
<a name="l2928"><span class="linenum">2928</span></a>          if( ! isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers_validated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers_validated.html">renderers_validated</a>) )
<a name="l2929"><span class="linenum">2929</span></a>          {
<a name="l2930"><span class="linenum">2930</span></a>              global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l2931"><span class="linenum">2931</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers_validated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers_validated.html">renderers_validated</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('validate_renderer_list')" href="../../../_functions/validate_renderer_list.html" onMouseOver="funcPopup(event,'validate_renderer_list')">validate_renderer_list</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderers')" href="../../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>(), array( 'Comment' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l2932"><span class="linenum">2932</span></a>          }
<a name="l2933"><span class="linenum">2933</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers_validated')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers_validated.html">renderers_validated</a>;
<a name="l2934"><span class="linenum">2934</span></a>      }
<a name="l2935"><span class="linenum">2935</span></a>  
<a name="l2936"><span class="linenum">2936</span></a>  
<a name="l2937"><span class="linenum">2937</span></a>      <span class="comment">/**</span>
<a name="l2938"><span class="linenum">2938</span></a>  <span class="comment">     * Get the list of renderers for this Comment.</span>
<a name="l2939"><span class="linenum">2939</span></a>  <span class="comment">     * @return array</span>
<a name="l2940"><span class="linenum">2940</span></a>  <span class="comment">     */</span>
<a name="l2941"><span class="linenum">2941</span></a>  	function <a class="function" onClick="logFunction('get_renderers')" href="../../../_functions/get_renderers.html" onMouseOver="funcPopup(event,'get_renderers')">get_renderers</a>()
<a name="l2942"><span class="linenum">2942</span></a>      {
<a name="l2943"><span class="linenum">2943</span></a>          return <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( '.', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('renderers')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/renderers.html">renderers</a> );
<a name="l2944"><span class="linenum">2944</span></a>      }
<a name="l2945"><span class="linenum">2945</span></a>  
<a name="l2946"><span class="linenum">2946</span></a>  
<a name="l2947"><span class="linenum">2947</span></a>      <span class="comment">/**</span>
<a name="l2948"><span class="linenum">2948</span></a>  <span class="comment">     * Set the renderers of the Comment.</span>
<a name="l2949"><span class="linenum">2949</span></a>  <span class="comment">     *</span>
<a name="l2950"><span class="linenum">2950</span></a>  <span class="comment">     * @param array List of renderer codes.</span>
<a name="l2951"><span class="linenum">2951</span></a>  <span class="comment">     * @return boolean true, if it has been set; false if it has not changed</span>
<a name="l2952"><span class="linenum">2952</span></a>  <span class="comment">     */</span>
<a name="l2953"><span class="linenum">2953</span></a>  	function <a class="function" onClick="logFunction('set_renderers')" href="../../../_functions/set_renderers.html" onMouseOver="funcPopup(event,'set_renderers')">set_renderers</a>( <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> )
<a name="l2954"><span class="linenum">2954</span></a>      {
<a name="l2955"><span class="linenum">2955</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'renderers', 'string', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '.', <a class="var it333" onMouseOver="hilite(333)" onMouseOut="lolite()" onClick="logVariable('renderers')" href="../../../_variables/renderers.html">$renderers</a> ) );
<a name="l2956"><span class="linenum">2956</span></a>      }
<a name="l2957"><span class="linenum">2957</span></a>  
<a name="l2958"><span class="linenum">2958</span></a>  
<a name="l2959"><span class="linenum">2959</span></a>      <span class="comment">/**</span>
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment">     * Template function: display date (datetime) of comment</span>
<a name="l2961"><span class="linenum">2961</span></a>  <span class="comment">     *</span>
<a name="l2962"><span class="linenum">2962</span></a>  <span class="comment">     * @param string date/time format: leave empty to use locale default date format</span>
<a name="l2963"><span class="linenum">2963</span></a>  <span class="comment">     * @param boolean true if you want GMT</span>
<a name="l2964"><span class="linenum">2964</span></a>  <span class="comment">     */</span>
<a name="l2965"><span class="linenum">2965</span></a>  	function <a class="function" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="funcPopup(event,'date')">date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = '', <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l2966"><span class="linenum">2966</span></a>      {
<a name="l2967"><span class="linenum">2967</span></a>          if( empty( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ) )
<a name="l2968"><span class="linenum">2968</span></a>          {    // Get the current locale's default date format
<a name="l2969"><span class="linenum">2969</span></a>              <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = <a class="function" onClick="logFunction('locale_datefmt')" href="../../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>();
<a name="l2970"><span class="linenum">2970</span></a>          }
<a name="l2971"><span class="linenum">2971</span></a>  
<a name="l2972"><span class="linenum">2972</span></a>          echo <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/date.html">date</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l2973"><span class="linenum">2973</span></a>      }
<a name="l2974"><span class="linenum">2974</span></a>  
<a name="l2975"><span class="linenum">2975</span></a>  
<a name="l2976"><span class="linenum">2976</span></a>      <span class="comment">/**</span>
<a name="l2977"><span class="linenum">2977</span></a>  <span class="comment">     * Template function: display time (datetime) of comment</span>
<a name="l2978"><span class="linenum">2978</span></a>  <span class="comment">     *</span>
<a name="l2979"><span class="linenum">2979</span></a>  <span class="comment">     * @param string date/time format: leave empty to use locale default time format</span>
<a name="l2980"><span class="linenum">2980</span></a>  <span class="comment">     *                                 '#short_time' - to use locale default short time format</span>
<a name="l2981"><span class="linenum">2981</span></a>  <span class="comment">     * @param boolean true if you want GMT</span>
<a name="l2982"><span class="linenum">2982</span></a>  <span class="comment">     */</span>
<a name="l2983"><span class="linenum">2983</span></a>  	function <a class="function" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="funcPopup(event,'time')">time</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = '', <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l2984"><span class="linenum">2984</span></a>      {
<a name="l2985"><span class="linenum">2985</span></a>          if( empty( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ) )
<a name="l2986"><span class="linenum">2986</span></a>          {    // Get the current locale's default time format
<a name="l2987"><span class="linenum">2987</span></a>              <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = <a class="function" onClick="logFunction('locale_timefmt')" href="../../../_functions/locale_timefmt.html" onMouseOver="funcPopup(event,'locale_timefmt')">locale_timefmt</a>();
<a name="l2988"><span class="linenum">2988</span></a>          }
<a name="l2989"><span class="linenum">2989</span></a>  
<a name="l2990"><span class="linenum">2990</span></a>          if( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> == '#short_time' )
<a name="l2991"><span class="linenum">2991</span></a>          {    // Use short time format of current locale
<a name="l2992"><span class="linenum">2992</span></a>              <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = <a class="function" onClick="logFunction('locale_shorttimefmt')" href="../../../_functions/locale_shorttimefmt.html" onMouseOver="funcPopup(event,'locale_shorttimefmt')">locale_shorttimefmt</a>();
<a name="l2993"><span class="linenum">2993</span></a>          }
<a name="l2994"><span class="linenum">2994</span></a>  
<a name="l2995"><span class="linenum">2995</span></a>          echo <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/date.html">date</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l2996"><span class="linenum">2996</span></a>      }
<a name="l2997"><span class="linenum">2997</span></a>  
<a name="l2998"><span class="linenum">2998</span></a>  
<a name="l2999"><span class="linenum">2999</span></a>      <span class="comment">/**</span>
<a name="l3000"><span class="linenum">3000</span></a>  <span class="comment">     * Template tag:  display rating</span>
<a name="l3001"><span class="linenum">3001</span></a>  <span class="comment">     */</span>
<a name="l3002"><span class="linenum">3002</span></a>  	function <a class="function" onClick="logFunction('rating')" href="../../../_functions/rating.html" onMouseOver="funcPopup(event,'rating')">rating</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3003"><span class="linenum">3003</span></a>      {
<a name="l3004"><span class="linenum">3004</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rating')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rating.html">rating</a> ) )
<a name="l3005"><span class="linenum">3005</span></a>          {
<a name="l3006"><span class="linenum">3006</span></a>              return false;
<a name="l3007"><span class="linenum">3007</span></a>          }
<a name="l3008"><span class="linenum">3008</span></a>  
<a name="l3009"><span class="linenum">3009</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l3010"><span class="linenum">3010</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3011"><span class="linenum">3011</span></a>                  'before'      =&gt; '&lt;div class=&quot;comment_rating&quot;&gt;',
<a name="l3012"><span class="linenum">3012</span></a>                  'after'       =&gt; '&lt;/div&gt;',
<a name="l3013"><span class="linenum">3013</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3014"><span class="linenum">3014</span></a>  
<a name="l3015"><span class="linenum">3015</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l3016"><span class="linenum">3016</span></a>  
<a name="l3017"><span class="linenum">3017</span></a>          <a class="function" onClick="logFunction('star_rating')" href="../../../_functions/star_rating.html" onMouseOver="funcPopup(event,'star_rating')">star_rating</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rating')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rating.html">rating</a> );
<a name="l3018"><span class="linenum">3018</span></a>  
<a name="l3019"><span class="linenum">3019</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l3020"><span class="linenum">3020</span></a>      }
<a name="l3021"><span class="linenum">3021</span></a>  
<a name="l3022"><span class="linenum">3022</span></a>    <span class="comment">/**</span>
<a name="l3023"><span class="linenum">3023</span></a>  <span class="comment">     * Rating input</span>
<a name="l3024"><span class="linenum">3024</span></a>  <span class="comment">     */</span>
<a name="l3025"><span class="linenum">3025</span></a>  	function <a class="function" onClick="logFunction('rating_input')" href="../../../_functions/rating_input.html" onMouseOver="funcPopup(event,'rating_input')">rating_input</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3026"><span class="linenum">3026</span></a>      {
<a name="l3027"><span class="linenum">3027</span></a>          global <a class="var it4337" onMouseOver="hilite(4337)" onMouseOut="lolite()" onClick="logVariable('rsc_uri')" href="../../../_variables/rsc_uri.html">$rsc_uri</a>;
<a name="l3028"><span class="linenum">3028</span></a>  
<a name="l3029"><span class="linenum">3029</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3030"><span class="linenum">3030</span></a>                                      'before'     =&gt; '',
<a name="l3031"><span class="linenum">3031</span></a>                                      'after'      =&gt; '',
<a name="l3032"><span class="linenum">3032</span></a>                                      'label_low'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Bad'),
<a name="l3033"><span class="linenum">3033</span></a>                                      'label_2'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Poor'),
<a name="l3034"><span class="linenum">3034</span></a>                                      'label_3'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Average'),
<a name="l3035"><span class="linenum">3035</span></a>                                      'label_4'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Good'),
<a name="l3036"><span class="linenum">3036</span></a>                                      'label_high' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Excellent'),
<a name="l3037"><span class="linenum">3037</span></a>                                      'reset'      =&gt; false,
<a name="l3038"><span class="linenum">3038</span></a>                                      'item_ID'    =&gt; 0, // Set only for new comments without defined item ID
<a name="l3039"><span class="linenum">3039</span></a>                                  ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3040"><span class="linenum">3040</span></a>  
<a name="l3041"><span class="linenum">3041</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l3042"><span class="linenum">3042</span></a>  
<a name="l3043"><span class="linenum">3043</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a> ) &amp;&amp; !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['item_ID'] ) )
<a name="l3044"><span class="linenum">3044</span></a>          {    // Set item ID for form with <span class="keyword">new </span><a class="class" onClick="logClass('comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a>
<a name="l3045"><span class="linenum">3045</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['item_ID'];
<a name="l3046"><span class="linenum">3046</span></a>          }
<a name="l3047"><span class="linenum">3047</span></a>          if( <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>() )
<a name="l3048"><span class="linenum">3048</span></a>          {
<a name="l3049"><span class="linenum">3049</span></a>              if( <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a> = &amp; <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;get_Blog() )
<a name="l3050"><span class="linenum">3050</span></a>              {
<a name="l3051"><span class="linenum">3051</span></a>                  if( <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'rating_question' ) != '' )
<a name="l3052"><span class="linenum">3052</span></a>                  {    // Display star rating question
<a name="l3053"><span class="linenum">3053</span></a>                      echo '&lt;div id=&quot;comment_rating_question&quot;&gt;';
<a name="l3054"><span class="linenum">3054</span></a>                      echo <a class="phpfunction" onClick="logFunction('nl2br')" href="../../../_functions/nl2br.html" onMouseOver="phpfuncPopup(event,'nl2br')">nl2br</a>( <a class="var it1618" onMouseOver="hilite(1618)" onMouseOut="lolite()" onClick="logVariable('item_Blog')" href="../../../_variables/item_Blog.html">$item_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'rating_question' ) );
<a name="l3055"><span class="linenum">3055</span></a>                      echo '&lt;/div&gt;';
<a name="l3056"><span class="linenum">3056</span></a>                  }
<a name="l3057"><span class="linenum">3057</span></a>              }
<a name="l3058"><span class="linenum">3058</span></a>          }
<a name="l3059"><span class="linenum">3059</span></a>  
<a name="l3060"><span class="linenum">3060</span></a>          echo '&lt;div id=&quot;comment_rating&quot;&gt;';
<a name="l3061"><span class="linenum">3061</span></a>  
<a name="l3062"><span class="linenum">3062</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['label_low'];
<a name="l3063"><span class="linenum">3063</span></a>  
<a name="l3064"><span class="linenum">3064</span></a>          for( <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>=1; <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>&lt;=5; <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>++ )
<a name="l3065"><span class="linenum">3065</span></a>          {
<a name="l3066"><span class="linenum">3066</span></a>              echo '&lt;input type=&quot;radio&quot; class=&quot;radio&quot; name=&quot;comment_rating&quot; value=&quot;'.<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>.'&quot;';
<a name="l3067"><span class="linenum">3067</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rating')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rating.html">rating</a> == <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> )
<a name="l3068"><span class="linenum">3068</span></a>              {
<a name="l3069"><span class="linenum">3069</span></a>                  echo ' checked=&quot;checked&quot;';
<a name="l3070"><span class="linenum">3070</span></a>              }
<a name="l3071"><span class="linenum">3071</span></a>              echo ' /&gt;';
<a name="l3072"><span class="linenum">3072</span></a>          }
<a name="l3073"><span class="linenum">3073</span></a>  
<a name="l3074"><span class="linenum">3074</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['label_high'];
<a name="l3075"><span class="linenum">3075</span></a>  
<a name="l3076"><span class="linenum">3076</span></a>          <a class="var it7057" onMouseOver="hilite(7057)" onMouseOut="lolite()" onClick="logVariable('jquery_raty_param')" href="../../../_variables/jquery_raty_param.html">$jquery_raty_param</a> = '';
<a name="l3077"><span class="linenum">3077</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['reset'] )
<a name="l3078"><span class="linenum">3078</span></a>          { // Init &quot;reset&quot; button
<a name="l3079"><span class="linenum">3079</span></a>              <a class="var it7057" onMouseOver="hilite(7057)" onMouseOut="lolite()" onClick="logVariable('jquery_raty_param')" href="../../../_variables/jquery_raty_param.html">$jquery_raty_param</a> = 'cancel: true';
<a name="l3080"><span class="linenum">3080</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('rating_none_input')" href="../../../_functions/rating_none_input.html" onMouseOver="funcPopup(event,'rating_none_input')">rating_none_input</a>( array( 'before' =&gt; '&lt;p&gt;', 'after' =&gt; '&lt;/p&gt;' ) );
<a name="l3081"><span class="linenum">3081</span></a>          }
<a name="l3082"><span class="linenum">3082</span></a>  
<a name="l3083"><span class="linenum">3083</span></a>          echo '&lt;/div&gt;';
<a name="l3084"><span class="linenum">3084</span></a>  
<a name="l3085"><span class="linenum">3085</span></a>          echo '&lt;script type=&quot;text/javascript&quot;&gt;
<a name="l3086"><span class="linenum">3086</span></a>  <span class="comment">        /* &lt;![CDATA[ */</span>
<a name="l3087"><span class="linenum">3087</span></a>          jQuery(&quot;#comment_rating&quot;).html(&quot;&quot;).raty({
<a name="l3088"><span class="linenum">3088</span></a>              scoreName: &quot;comment_rating&quot;,
<a name="l3089"><span class="linenum">3089</span></a>              start: '.(int)<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rating')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rating.html">rating</a>.',
<a name="l3090"><span class="linenum">3090</span></a>              hintList: [&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['label_low'].'&quot;, &quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['label_2'].'&quot;, &quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['label_3'].'&quot;, &quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['label_4'].'&quot;, &quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['label_high'].'&quot;],
<a name="l3091"><span class="linenum">3091</span></a>              width: 110,
<a name="l3092"><span class="linenum">3092</span></a>              '.<a class="var it7057" onMouseOver="hilite(7057)" onMouseOut="lolite()" onClick="logVariable('jquery_raty_param')" href="../../../_variables/jquery_raty_param.html">$jquery_raty_param</a>.'
<a name="l3093"><span class="linenum">3093</span></a>          });
<a name="l3094"><span class="linenum">3094</span></a>  <span class="comment">        /* ]]&gt; */</span>
<a name="l3095"><span class="linenum">3095</span></a>          &lt;/script&gt;';
<a name="l3096"><span class="linenum">3096</span></a>  
<a name="l3097"><span class="linenum">3097</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l3098"><span class="linenum">3098</span></a>      }
<a name="l3099"><span class="linenum">3099</span></a>  
<a name="l3100"><span class="linenum">3100</span></a>  
<a name="l3101"><span class="linenum">3101</span></a>    <span class="comment">/**</span>
<a name="l3102"><span class="linenum">3102</span></a>  <span class="comment">     * Rating reset input</span>
<a name="l3103"><span class="linenum">3103</span></a>  <span class="comment">     */</span>
<a name="l3104"><span class="linenum">3104</span></a>  	function <a class="function" onClick="logFunction('rating_none_input')" href="../../../_functions/rating_none_input.html" onMouseOver="funcPopup(event,'rating_none_input')">rating_none_input</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3105"><span class="linenum">3105</span></a>      {
<a name="l3106"><span class="linenum">3106</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3107"><span class="linenum">3107</span></a>                                      'before'    =&gt; '',
<a name="l3108"><span class="linenum">3108</span></a>                                      'after'     =&gt; '',
<a name="l3109"><span class="linenum">3109</span></a>                                      'label'     =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No rating'),
<a name="l3110"><span class="linenum">3110</span></a>                                  ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3111"><span class="linenum">3111</span></a>  
<a name="l3112"><span class="linenum">3112</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l3113"><span class="linenum">3113</span></a>  
<a name="l3114"><span class="linenum">3114</span></a>          echo '&lt;label&gt;&lt;input type=&quot;radio&quot; class=&quot;radio&quot; name=&quot;comment_rating&quot; value=&quot;0&quot;';
<a name="l3115"><span class="linenum">3115</span></a>          if( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rating')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/rating.html">rating</a>) )
<a name="l3116"><span class="linenum">3116</span></a>          {
<a name="l3117"><span class="linenum">3117</span></a>              echo ' checked=&quot;checked&quot;';
<a name="l3118"><span class="linenum">3118</span></a>          }
<a name="l3119"><span class="linenum">3119</span></a>          echo ' /&gt;';
<a name="l3120"><span class="linenum">3120</span></a>  
<a name="l3121"><span class="linenum">3121</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['label'].'&lt;/label&gt;';
<a name="l3122"><span class="linenum">3122</span></a>  
<a name="l3123"><span class="linenum">3123</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l3124"><span class="linenum">3124</span></a>      }
<a name="l3125"><span class="linenum">3125</span></a>  
<a name="l3126"><span class="linenum">3126</span></a>  
<a name="l3127"><span class="linenum">3127</span></a>      <span class="comment">/**</span>
<a name="l3128"><span class="linenum">3128</span></a>  <span class="comment">     * Get status of comment</span>
<a name="l3129"><span class="linenum">3129</span></a>  <span class="comment">     *</span>
<a name="l3130"><span class="linenum">3130</span></a>  <span class="comment">     * Statuses:</span>
<a name="l3131"><span class="linenum">3131</span></a>  <span class="comment">     * - published</span>
<a name="l3132"><span class="linenum">3132</span></a>  <span class="comment">     * - deprecated</span>
<a name="l3133"><span class="linenum">3133</span></a>  <span class="comment">     * - protected</span>
<a name="l3134"><span class="linenum">3134</span></a>  <span class="comment">     * - private</span>
<a name="l3135"><span class="linenum">3135</span></a>  <span class="comment">     * - draft</span>
<a name="l3136"><span class="linenum">3136</span></a>  <span class="comment">     *</span>
<a name="l3137"><span class="linenum">3137</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l3138"><span class="linenum">3138</span></a>  <span class="comment">     * @param array Params</span>
<a name="l3139"><span class="linenum">3139</span></a>  <span class="comment">     * @return string Status</span>
<a name="l3140"><span class="linenum">3140</span></a>  <span class="comment">     */</span>
<a name="l3141"><span class="linenum">3141</span></a>  	function <a class="function" onClick="logFunction('get_status')" href="../../../_functions/get_status.html" onMouseOver="funcPopup(event,'get_status')">get_status</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3142"><span class="linenum">3142</span></a>      {
<a name="l3143"><span class="linenum">3143</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l3144"><span class="linenum">3144</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3145"><span class="linenum">3145</span></a>                  'before' =&gt; '',
<a name="l3146"><span class="linenum">3146</span></a>                  'after'  =&gt; '',
<a name="l3147"><span class="linenum">3147</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3148"><span class="linenum">3148</span></a>  
<a name="l3149"><span class="linenum">3149</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l3150"><span class="linenum">3150</span></a>  
<a name="l3151"><span class="linenum">3151</span></a>          switch( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> )
<a name="l3152"><span class="linenum">3152</span></a>          {
<a name="l3153"><span class="linenum">3153</span></a>              case 'raw':
<a name="l3154"><span class="linenum">3154</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>( 'status', 'raw' );
<a name="l3155"><span class="linenum">3155</span></a>                  break;
<a name="l3156"><span class="linenum">3156</span></a>  
<a name="l3157"><span class="linenum">3157</span></a>              case 'styled':
<a name="l3158"><span class="linenum">3158</span></a>  <span class="comment">                // DEPRECATED: instead use something like: $Comment-&gt;format_status( array(    'template' =&gt; '&lt;div class=&quot;evo_status__banner evo_status__$status$&quot;&gt;$status_title$&lt;/div&gt;' ) );</span>
<a name="l3159"><span class="linenum">3159</span></a>                  if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l3160"><span class="linenum">3160</span></a>                  {
<a name="l3161"><span class="linenum">3161</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('get_styled_status')" href="../../../_functions/get_styled_status.html" onMouseOver="funcPopup(event,'get_styled_status')">get_styled_status</a>( 'meta', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Meta') );
<a name="l3162"><span class="linenum">3162</span></a>                  }
<a name="l3163"><span class="linenum">3163</span></a>                  else
<a name="l3164"><span class="linenum">3164</span></a>                  {
<a name="l3165"><span class="linenum">3165</span></a>                      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('get_styled_status')" href="../../../_functions/get_styled_status.html" onMouseOver="funcPopup(event,'get_styled_status')">get_styled_status</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 't_status' ) );
<a name="l3166"><span class="linenum">3166</span></a>                  }
<a name="l3167"><span class="linenum">3167</span></a>                  break;
<a name="l3168"><span class="linenum">3168</span></a>  
<a name="l3169"><span class="linenum">3169</span></a>              default:
<a name="l3170"><span class="linenum">3170</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 't_status' ), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l3171"><span class="linenum">3171</span></a>                  break;
<a name="l3172"><span class="linenum">3172</span></a>          }
<a name="l3173"><span class="linenum">3173</span></a>  
<a name="l3174"><span class="linenum">3174</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l3175"><span class="linenum">3175</span></a>  
<a name="l3176"><span class="linenum">3176</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3177"><span class="linenum">3177</span></a>      }
<a name="l3178"><span class="linenum">3178</span></a>  
<a name="l3179"><span class="linenum">3179</span></a>  
<a name="l3180"><span class="linenum">3180</span></a>      <span class="comment">/**</span>
<a name="l3181"><span class="linenum">3181</span></a>  <span class="comment">     * Template function: display status of comment</span>
<a name="l3182"><span class="linenum">3182</span></a>  <span class="comment">     *</span>
<a name="l3183"><span class="linenum">3183</span></a>  <span class="comment">     * Statuses:</span>
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment">     * - published</span>
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment">     * - deprecated</span>
<a name="l3186"><span class="linenum">3186</span></a>  <span class="comment">     * - protected</span>
<a name="l3187"><span class="linenum">3187</span></a>  <span class="comment">     * - private</span>
<a name="l3188"><span class="linenum">3188</span></a>  <span class="comment">     * - draft</span>
<a name="l3189"><span class="linenum">3189</span></a>  <span class="comment">     *</span>
<a name="l3190"><span class="linenum">3190</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l3191"><span class="linenum">3191</span></a>  <span class="comment">     * @param array Params</span>
<a name="l3192"><span class="linenum">3192</span></a>  <span class="comment">     */</span>
<a name="l3193"><span class="linenum">3193</span></a>  	function <a class="function" onClick="logFunction('status')" href="../../../_functions/status.html" onMouseOver="funcPopup(event,'status')">status</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3194"><span class="linenum">3194</span></a>      {
<a name="l3195"><span class="linenum">3195</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l3196"><span class="linenum">3196</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3197"><span class="linenum">3197</span></a>                  'before' =&gt; '',
<a name="l3198"><span class="linenum">3198</span></a>                  'after'  =&gt; '',
<a name="l3199"><span class="linenum">3199</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3200"><span class="linenum">3200</span></a>  
<a name="l3201"><span class="linenum">3201</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_status')" href="../../../_functions/get_status.html" onMouseOver="funcPopup(event,'get_status')">get_status</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3202"><span class="linenum">3202</span></a>      }
<a name="l3203"><span class="linenum">3203</span></a>  
<a name="l3204"><span class="linenum">3204</span></a>  
<a name="l3205"><span class="linenum">3205</span></a>      <span class="comment">/**</span>
<a name="l3206"><span class="linenum">3206</span></a>  <span class="comment">     * Display status of item in a formatted way, following a provided template</span>
<a name="l3207"><span class="linenum">3207</span></a>  <span class="comment">     *</span>
<a name="l3208"><span class="linenum">3208</span></a>  <span class="comment">     * There are 2 possible variables: </span>
<a name="l3209"><span class="linenum">3209</span></a>  <span class="comment">     * - $status$ = the raw status</span>
<a name="l3210"><span class="linenum">3210</span></a>  <span class="comment">     * - $status_title$ = the human readable text version of the status (translated to current language)</span>
<a name="l3211"><span class="linenum">3211</span></a>  <span class="comment">     *</span>
<a name="l3212"><span class="linenum">3212</span></a>  <span class="comment">     * @param array Params</span>
<a name="l3213"><span class="linenum">3213</span></a>  <span class="comment">     */</span>
<a name="l3214"><span class="linenum">3214</span></a>  	function <a class="function" onClick="logFunction('format_status')" href="../../../_functions/format_status.html" onMouseOver="funcPopup(event,'format_status')">format_status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3215"><span class="linenum">3215</span></a>      {
<a name="l3216"><span class="linenum">3216</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l3217"><span class="linenum">3217</span></a>                  'template'     =&gt; '&lt;div class=&quot;evo_status evo_status_<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>$&quot;&gt;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a>$&lt;/div&gt;',
<a name="l3218"><span class="linenum">3218</span></a>                  'format'       =&gt; 'htmlbody', // Output format, see {@link <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>()}
<a name="l3219"><span class="linenum">3219</span></a>                  'status'       =&gt; NULL,
<a name="l3220"><span class="linenum">3220</span></a>                  'status_title' =&gt; NULL,
<a name="l3221"><span class="linenum">3221</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3222"><span class="linenum">3222</span></a>  
<a name="l3223"><span class="linenum">3223</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'] ) )
<a name="l3224"><span class="linenum">3224</span></a>          { // Use current status of this comment
<a name="l3225"><span class="linenum">3225</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>;
<a name="l3226"><span class="linenum">3226</span></a>          }
<a name="l3227"><span class="linenum">3227</span></a>  
<a name="l3228"><span class="linenum">3228</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status_title'] ) )
<a name="l3229"><span class="linenum">3229</span></a>          { // Use current status title of this comment
<a name="l3230"><span class="linenum">3230</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status_title'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 't_status' );
<a name="l3231"><span class="linenum">3231</span></a>          }
<a name="l3232"><span class="linenum">3232</span></a>  
<a name="l3233"><span class="linenum">3233</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( array( '<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>$', '<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a>$' ),
<a name="l3234"><span class="linenum">3234</span></a>              array( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status_title'] ),
<a name="l3235"><span class="linenum">3235</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['template'] );
<a name="l3236"><span class="linenum">3236</span></a>      
<a name="l3237"><span class="linenum">3237</span></a>          echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l3238"><span class="linenum">3238</span></a>      }
<a name="l3239"><span class="linenum">3239</span></a>  
<a name="l3240"><span class="linenum">3240</span></a>  
<a name="l3241"><span class="linenum">3241</span></a>      <span class="comment">/**</span>
<a name="l3242"><span class="linenum">3242</span></a>  <span class="comment">     * Template function: display all statuses and only one is visible by css class name</span>
<a name="l3243"><span class="linenum">3243</span></a>  <span class="comment">     *</span>
<a name="l3244"><span class="linenum">3244</span></a>  <span class="comment">     * Statuses:</span>
<a name="l3245"><span class="linenum">3245</span></a>  <span class="comment">     * - published</span>
<a name="l3246"><span class="linenum">3246</span></a>  <span class="comment">     * - community</span>
<a name="l3247"><span class="linenum">3247</span></a>  <span class="comment">     * - protected</span>
<a name="l3248"><span class="linenum">3248</span></a>  <span class="comment">     * - review</span>
<a name="l3249"><span class="linenum">3249</span></a>  <span class="comment">     * - private</span>
<a name="l3250"><span class="linenum">3250</span></a>  <span class="comment">     * - draft</span>
<a name="l3251"><span class="linenum">3251</span></a>  <span class="comment">     */</span>
<a name="l3252"><span class="linenum">3252</span></a>  	function <a class="function" onClick="logFunction('format_statuses')" href="../../../_functions/format_statuses.html" onMouseOver="funcPopup(event,'format_statuses')">format_statuses</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l3253"><span class="linenum">3253</span></a>      {
<a name="l3254"><span class="linenum">3254</span></a>          <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( '', array( 'deprecated', 'redirected', 'trash' ) );
<a name="l3255"><span class="linenum">3255</span></a>  
<a name="l3256"><span class="linenum">3256</span></a>          foreach( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> as <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> =&gt; <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> )
<a name="l3257"><span class="linenum">3257</span></a>          {
<a name="l3258"><span class="linenum">3258</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status'] = <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>;
<a name="l3259"><span class="linenum">3259</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['status_title'] = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l3260"><span class="linenum">3260</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('format_status')" href="../../../_functions/format_status.html" onMouseOver="funcPopup(event,'format_status')">format_status</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l3261"><span class="linenum">3261</span></a>          }
<a name="l3262"><span class="linenum">3262</span></a>      }
<a name="l3263"><span class="linenum">3263</span></a>  
<a name="l3264"><span class="linenum">3264</span></a>  
<a name="l3265"><span class="linenum">3265</span></a>      <span class="comment">/**</span>
<a name="l3266"><span class="linenum">3266</span></a>  <span class="comment">     * Template function: display all statuses and only one is visible by css class name</span>
<a name="l3267"><span class="linenum">3267</span></a>  <span class="comment">     *</span>
<a name="l3268"><span class="linenum">3268</span></a>  <span class="comment">     * Statuses:</span>
<a name="l3269"><span class="linenum">3269</span></a>  <span class="comment">     * - published</span>
<a name="l3270"><span class="linenum">3270</span></a>  <span class="comment">     * - community</span>
<a name="l3271"><span class="linenum">3271</span></a>  <span class="comment">     * - protected</span>
<a name="l3272"><span class="linenum">3272</span></a>  <span class="comment">     * - review</span>
<a name="l3273"><span class="linenum">3273</span></a>  <span class="comment">     * - private</span>
<a name="l3274"><span class="linenum">3274</span></a>  <span class="comment">     * - draft</span>
<a name="l3275"><span class="linenum">3275</span></a>  <span class="comment">     */</span>
<a name="l3276"><span class="linenum">3276</span></a>  	function <a class="function" onClick="logFunction('statuses')" href="../../../_functions/statuses.html" onMouseOver="funcPopup(event,'statuses')">statuses</a>()
<a name="l3277"><span class="linenum">3277</span></a>      {
<a name="l3278"><span class="linenum">3278</span></a>          <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( '', array( 'deprecated', 'redirected', 'trash' ) );
<a name="l3279"><span class="linenum">3279</span></a>  
<a name="l3280"><span class="linenum">3280</span></a>          foreach( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> as <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> =&gt; <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> )
<a name="l3281"><span class="linenum">3281</span></a>          {
<a name="l3282"><span class="linenum">3282</span></a>              echo <a class="function" onClick="logFunction('get_styled_status')" href="../../../_functions/get_styled_status.html" onMouseOver="funcPopup(event,'get_styled_status')">get_styled_status</a>( <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>, <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> );
<a name="l3283"><span class="linenum">3283</span></a>          }
<a name="l3284"><span class="linenum">3284</span></a>      }
<a name="l3285"><span class="linenum">3285</span></a>  
<a name="l3286"><span class="linenum">3286</span></a>  
<a name="l3287"><span class="linenum">3287</span></a>      <span class="comment">/**</span>
<a name="l3288"><span class="linenum">3288</span></a>  <span class="comment">     * Handle comment email notifications</span>
<a name="l3289"><span class="linenum">3289</span></a>  <span class="comment">     *</span>
<a name="l3290"><span class="linenum">3290</span></a>  <span class="comment">     * Should be called only when a new comment was posted or when a comment status was changed to published</span>
<a name="l3291"><span class="linenum">3291</span></a>  <span class="comment">     *</span>
<a name="l3292"><span class="linenum">3292</span></a>  <span class="comment">     * @param boolean set true if the comment was posted just now, false otherwise</span>
<a name="l3293"><span class="linenum">3293</span></a>  <span class="comment">     * @param integer the user ID who executed the action which will be notified, or NULL if it was executed by an anonymous user</span>
<a name="l3294"><span class="linenum">3294</span></a>  <span class="comment">     */</span>
<a name="l3295"><span class="linenum">3295</span></a>  	function <a class="function" onClick="logFunction('handle_notifications')" href="../../../_functions/handle_notifications.html" onMouseOver="funcPopup(event,'handle_notifications')">handle_notifications</a>( <a class="var it7058" onMouseOver="hilite(7058)" onMouseOut="lolite()" onClick="logVariable('just_posted')" href="../../../_variables/just_posted.html">$just_posted</a> = false, <a class="var it5518" onMouseOver="hilite(5518)" onMouseOut="lolite()" onClick="logVariable('executed_by_userid')" href="../../../_variables/executed_by_userid.html">$executed_by_userid</a> = NULL )
<a name="l3296"><span class="linenum">3296</span></a>      {
<a name="l3297"><span class="linenum">3297</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l3298"><span class="linenum">3298</span></a>  
<a name="l3299"><span class="linenum">3299</span></a>          if( <a class="var it7058" onMouseOver="hilite(7058)" onMouseOut="lolite()" onClick="logVariable('just_posted')" href="../../../_variables/just_posted.html">$just_posted</a> )
<a name="l3300"><span class="linenum">3300</span></a>          { // send email notification to moderators or to users with &quot;meta comments&quot; notification
<a name="l3301"><span class="linenum">3301</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_email_notifications')" href="../../../_functions/send_email_notifications.html" onMouseOver="funcPopup(event,'send_email_notifications')">send_email_notifications</a>( true, false, <a class="var it5518" onMouseOver="hilite(5518)" onMouseOut="lolite()" onClick="logVariable('executed_by_userid')" href="../../../_variables/executed_by_userid.html">$executed_by_userid</a> );
<a name="l3302"><span class="linenum">3302</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l3303"><span class="linenum">3303</span></a>              { // Record that processing has been done in case of this meta comment
<a name="l3304"><span class="linenum">3304</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'notif_status', 'finished' );
<a name="l3305"><span class="linenum">3305</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l3306"><span class="linenum">3306</span></a>              }
<a name="l3307"><span class="linenum">3307</span></a>          }
<a name="l3308"><span class="linenum">3308</span></a>  
<a name="l3309"><span class="linenum">3309</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l3310"><span class="linenum">3310</span></a>          { // Meta comments were already notified when they were posted.
<a name="l3311"><span class="linenum">3311</span></a>              return;
<a name="l3312"><span class="linenum">3312</span></a>          }
<a name="l3313"><span class="linenum">3313</span></a>  
<a name="l3314"><span class="linenum">3314</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> != 'published' )
<a name="l3315"><span class="linenum">3315</span></a>          { // don't send notificaitons about non published comments
<a name="l3316"><span class="linenum">3316</span></a>              return;
<a name="l3317"><span class="linenum">3317</span></a>          }
<a name="l3318"><span class="linenum">3318</span></a>  
<a name="l3319"><span class="linenum">3319</span></a>          <a class="var it1686" onMouseOver="hilite(1686)" onMouseOut="lolite()" onClick="logVariable('notifications_mode')" href="../../../_variables/notifications_mode.html">$notifications_mode</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('outbound_notifications_mode');
<a name="l3320"><span class="linenum">3320</span></a>  
<a name="l3321"><span class="linenum">3321</span></a>          if( <a class="var it1686" onMouseOver="hilite(1686)" onMouseOut="lolite()" onClick="logVariable('notifications_mode')" href="../../../_variables/notifications_mode.html">$notifications_mode</a> == 'off' )
<a name="l3322"><span class="linenum">3322</span></a>          { // don't send notification
<a name="l3323"><span class="linenum">3323</span></a>              return false;
<a name="l3324"><span class="linenum">3324</span></a>          }
<a name="l3325"><span class="linenum">3325</span></a>  
<a name="l3326"><span class="linenum">3326</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'notif_status' ) != 'noreq' )
<a name="l3327"><span class="linenum">3327</span></a>          { // notification have been done before, or is in progress
<a name="l3328"><span class="linenum">3328</span></a>              return false;
<a name="l3329"><span class="linenum">3329</span></a>          }
<a name="l3330"><span class="linenum">3330</span></a>  
<a name="l3331"><span class="linenum">3331</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l3332"><span class="linenum">3332</span></a>  
<a name="l3333"><span class="linenum">3333</span></a>          if( <a class="var it1686" onMouseOver="hilite(1686)" onMouseOut="lolite()" onClick="logVariable('notifications_mode')" href="../../../_variables/notifications_mode.html">$notifications_mode</a> == 'immediate' )
<a name="l3334"><span class="linenum">3334</span></a>          { // Send email notifications now!
<a name="l3335"><span class="linenum">3335</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_email_notifications')" href="../../../_functions/send_email_notifications.html" onMouseOver="funcPopup(event,'send_email_notifications')">send_email_notifications</a>( false, <a class="var it7058" onMouseOver="hilite(7058)" onMouseOut="lolite()" onClick="logVariable('just_posted')" href="../../../_variables/just_posted.html">$just_posted</a>, <a class="var it5518" onMouseOver="hilite(5518)" onMouseOut="lolite()" onClick="logVariable('executed_by_userid')" href="../../../_variables/executed_by_userid.html">$executed_by_userid</a> );
<a name="l3336"><span class="linenum">3336</span></a>  
<a name="l3337"><span class="linenum">3337</span></a>  <span class="comment">            // Record that processing has been done:</span>
<a name="l3338"><span class="linenum">3338</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'notif_status', 'finished' );
<a name="l3339"><span class="linenum">3339</span></a>          }
<a name="l3340"><span class="linenum">3340</span></a>          else
<a name="l3341"><span class="linenum">3341</span></a>          { // Create scheduled job to send notifications
<a name="l3342"><span class="linenum">3342</span></a>  <span class="comment">            // CREATE OBJECT:</span>
<a name="l3343"><span class="linenum">3343</span></a>              <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '/cron/model/_cronjob.class.php', 'Cronjob' );
<a name="l3344"><span class="linenum">3344</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Cronjob')" href="../../../_classes/cronjob.html" onMouseOver="classPopup(event,'cronjob')">Cronjob</a>();
<a name="l3345"><span class="linenum">3345</span></a>  
<a name="l3346"><span class="linenum">3346</span></a>  <span class="comment">            // start datetime. We do not want to ping before the post is effectively published:</span>
<a name="l3347"><span class="linenum">3347</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'start_datetime', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/date.html">date</a> );
<a name="l3348"><span class="linenum">3348</span></a>  
<a name="l3349"><span class="linenum">3349</span></a>  <span class="comment">            // key:</span>
<a name="l3350"><span class="linenum">3350</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'key', 'send-comment-notifications' );
<a name="l3351"><span class="linenum">3351</span></a>  
<a name="l3352"><span class="linenum">3352</span></a>  <span class="comment">            // params: specify which post this job is supposed to send notifications for:</span>
<a name="l3353"><span class="linenum">3353</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'params', array( 'comment_ID' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, 'except_moderators' =&gt; <a class="var it7058" onMouseOver="hilite(7058)" onMouseOut="lolite()" onClick="logVariable('just_posted')" href="../../../_variables/just_posted.html">$just_posted</a>, 'executed_by_userid' =&gt; <a class="var it5518" onMouseOver="hilite(5518)" onMouseOut="lolite()" onClick="logVariable('executed_by_userid')" href="../../../_variables/executed_by_userid.html">$executed_by_userid</a> ) );
<a name="l3354"><span class="linenum">3354</span></a>  
<a name="l3355"><span class="linenum">3355</span></a>  <span class="comment">            // Save cronjob to DB:</span>
<a name="l3356"><span class="linenum">3356</span></a>              <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>();
<a name="l3357"><span class="linenum">3357</span></a>  
<a name="l3358"><span class="linenum">3358</span></a>  <span class="comment">            // Memorize the cron job ID which is going to handle this post:</span>
<a name="l3359"><span class="linenum">3359</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'notif_ctsk_ID', <a class="var it1687" onMouseOver="hilite(1687)" onMouseOut="lolite()" onClick="logVariable('edited_Cronjob')" href="../../../_variables/edited_Cronjob.html">$edited_Cronjob</a>-&gt;<a onClick="logVariable('ID')" class="var it10926" onMouseOver="hilite(10926)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l3360"><span class="linenum">3360</span></a>  
<a name="l3361"><span class="linenum">3361</span></a>  <span class="comment">            // Record that processing has been scheduled:</span>
<a name="l3362"><span class="linenum">3362</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'notif_status', 'todo' );
<a name="l3363"><span class="linenum">3363</span></a>          }
<a name="l3364"><span class="linenum">3364</span></a>  <span class="comment">        // update comment notification params</span>
<a name="l3365"><span class="linenum">3365</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l3366"><span class="linenum">3366</span></a>      }
<a name="l3367"><span class="linenum">3367</span></a>  
<a name="l3368"><span class="linenum">3368</span></a>  
<a name="l3369"><span class="linenum">3369</span></a>      <span class="comment">/**</span>
<a name="l3370"><span class="linenum">3370</span></a>  <span class="comment">     * Send email notifications to subscribed users:</span>
<a name="l3371"><span class="linenum">3371</span></a>  <span class="comment">     *</span>
<a name="l3372"><span class="linenum">3372</span></a>  <span class="comment">     * efy-asimo&gt; moderatation and subscription notifications have been separated</span>
<a name="l3373"><span class="linenum">3373</span></a>  <span class="comment">     *</span>
<a name="l3374"><span class="linenum">3374</span></a>  <span class="comment">     * @param boolean true if send only moderation email, false otherwise</span>
<a name="l3375"><span class="linenum">3375</span></a>  <span class="comment">     * @param boolean true if send for everyone else but not for moderators, because a moderation email was sent for them</span>
<a name="l3376"><span class="linenum">3376</span></a>  <span class="comment">     * @param integer the user ID who executed the action which will be notified, or NULL if it was executed by an anonymous user</span>
<a name="l3377"><span class="linenum">3377</span></a>  <span class="comment">     */</span>
<a name="l3378"><span class="linenum">3378</span></a>  	function <a class="function" onClick="logFunction('send_email_notifications')" href="../../../_functions/send_email_notifications.html" onMouseOver="funcPopup(event,'send_email_notifications')">send_email_notifications</a>( <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('only_moderators')" href="../../../_variables/only_moderators.html">$only_moderators</a> = false, <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('except_moderators')" href="../../../_variables/except_moderators.html">$except_moderators</a> = false, <a class="var it5518" onMouseOver="hilite(5518)" onMouseOut="lolite()" onClick="logVariable('executed_by_userid')" href="../../../_variables/executed_by_userid.html">$executed_by_userid</a> = NULL )
<a name="l3379"><span class="linenum">3379</span></a>      {
<a name="l3380"><span class="linenum">3380</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>, <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a>, <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('htsrv_url')" href="../../../_variables/htsrv_url.html">$htsrv_url</a>;
<a name="l3381"><span class="linenum">3381</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>;
<a name="l3382"><span class="linenum">3382</span></a>  
<a name="l3383"><span class="linenum">3383</span></a>          if( <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('only_moderators')" href="../../../_variables/only_moderators.html">$only_moderators</a> &amp;&amp; <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('except_moderators')" href="../../../_variables/except_moderators.html">$except_moderators</a> )
<a name="l3384"><span class="linenum">3384</span></a>          { // at least one of them must be false
<a name="l3385"><span class="linenum">3385</span></a>              return;
<a name="l3386"><span class="linenum">3386</span></a>          }
<a name="l3387"><span class="linenum">3387</span></a>  
<a name="l3388"><span class="linenum">3388</span></a>          <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l3389"><span class="linenum">3389</span></a>          <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;get_Blog();
<a name="l3390"><span class="linenum">3390</span></a>          <a class="var it5421" onMouseOver="hilite(5421)" onMouseOut="lolite()" onClick="logVariable('owner_User')" href="../../../_variables/owner_User.html">$owner_User</a> = <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;get_owner_User();
<a name="l3391"><span class="linenum">3391</span></a>          <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> = array();
<a name="l3392"><span class="linenum">3392</span></a>          <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a> = array();
<a name="l3393"><span class="linenum">3393</span></a>  
<a name="l3394"><span class="linenum">3394</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() &amp;&amp; ( <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('only_moderators')" href="../../../_variables/only_moderators.html">$only_moderators</a> || <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('except_moderators')" href="../../../_variables/except_moderators.html">$except_moderators</a> ) )
<a name="l3395"><span class="linenum">3395</span></a>          { // we need the list of moderators:
<a name="l3396"><span class="linenum">3396</span></a>              <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'SELECT DISTINCT user_email, user_ID, uset_value as notify_moderation
<a name="l3397"><span class="linenum">3397</span></a>                          FROM T_users
<a name="l3398"><span class="linenum">3398</span></a>                              LEFT JOIN T_coll_user_perms ON bloguser_user_ID = user_ID
<a name="l3399"><span class="linenum">3399</span></a>                              LEFT JOIN T_coll_group_perms ON bloggroup_group_ID = user_grp_ID
<a name="l3400"><span class="linenum">3400</span></a>                              LEFT JOIN T_users__usersettings ON uset_user_ID = user_ID AND uset_name = &quot;notify_comment_moderation&quot;
<a name="l3401"><span class="linenum">3401</span></a>                              LEFT JOIN T_groups ON grp_ID = user_grp_ID
<a name="l3402"><span class="linenum">3402</span></a>                          <a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a> ( ( bloguser_blog_ID = '.<a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10670" onMouseOver="hilite(10670)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.' AND bloguser_perm_edit_cmt IN ( &quot;anon&quot;, &quot;lt&quot;, &quot;le&quot;, &quot;all&quot; ) )
<a name="l3403"><span class="linenum">3403</span></a>                                  OR ( bloggroup_blog_ID = '.<a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10670" onMouseOver="hilite(10670)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.' AND bloggroup_perm_edit_cmt IN ( &quot;anon&quot;, &quot;lt&quot;, &quot;le&quot;, &quot;all&quot; ) )
<a name="l3404"><span class="linenum">3404</span></a>                                  OR ( grp_perm_blogs = &quot;editall&quot; ) )
<a name="l3405"><span class="linenum">3405</span></a>                              AND LENGTH(<a class="phpfunction" onClick="logFunction('TRIM')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">TRIM</a>(user_email)) &gt; 0';
<a name="l3406"><span class="linenum">3406</span></a>              <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('moderators_to_notify')" href="../../../_variables/moderators_to_notify.html">$moderators_to_notify</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> );
<a name="l3407"><span class="linenum">3407</span></a>  
<a name="l3408"><span class="linenum">3408</span></a>              foreach( <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('moderators_to_notify')" href="../../../_variables/moderators_to_notify.html">$moderators_to_notify</a> as <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('moderator')" href="../../../_variables/moderator.html">$moderator</a> )
<a name="l3409"><span class="linenum">3409</span></a>              {
<a name="l3410"><span class="linenum">3410</span></a>                  <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('notify_moderator')" href="../../../_variables/notify_moderator.html">$notify_moderator</a> = ( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('moderator')" href="../../../_variables/moderator.html">$moderator</a>-&gt;<a onClick="logVariable('notify_moderation')" class="var it10927" onMouseOver="hilite(10927)" onMouseOut="lolite()" href="../../../_variables/notify_moderation.html">notify_moderation</a> ) ) ? <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'def_notify_comment_moderation' ) : <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('moderator')" href="../../../_variables/moderator.html">$moderator</a>-&gt;<a onClick="logVariable('notify_moderation')" class="var it10927" onMouseOver="hilite(10927)" onMouseOut="lolite()" href="../../../_variables/notify_moderation.html">notify_moderation</a>;
<a name="l3411"><span class="linenum">3411</span></a>                  if( <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('notify_moderator')" href="../../../_variables/notify_moderator.html">$notify_moderator</a> )
<a name="l3412"><span class="linenum">3412</span></a>                  { // add user to notify
<a name="l3413"><span class="linenum">3413</span></a>                      <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a>[] = <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('moderator')" href="../../../_variables/moderator.html">$moderator</a>-&gt;<a onClick="logVariable('user_ID')" class="var it10927" onMouseOver="hilite(10927)" onMouseOut="lolite()" href="../../../_variables/user_ID.html">user_ID</a>;
<a name="l3414"><span class="linenum">3414</span></a>                  }
<a name="l3415"><span class="linenum">3415</span></a>              }
<a name="l3416"><span class="linenum">3416</span></a>              if( <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'notify_comment_moderation', <a class="var it5421" onMouseOver="hilite(5421)" onMouseOut="lolite()" onClick="logVariable('owner_User')" href="../../../_variables/owner_User.html">$owner_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10796" onMouseOver="hilite(10796)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) &amp;&amp; <a class="function" onClick="logFunction('is_email')" href="../../../_functions/is_email.html" onMouseOver="funcPopup(event,'is_email')">is_email</a>( <a class="var it5421" onMouseOver="hilite(5421)" onMouseOut="lolite()" onClick="logVariable('owner_User')" href="../../../_variables/owner_User.html">$owner_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'email' ) ) )
<a name="l3417"><span class="linenum">3417</span></a>              { // add blog owner
<a name="l3418"><span class="linenum">3418</span></a>                  <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a>[] = <a class="var it5421" onMouseOver="hilite(5421)" onMouseOut="lolite()" onClick="logVariable('owner_User')" href="../../../_variables/owner_User.html">$owner_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10796" onMouseOver="hilite(10796)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l3419"><span class="linenum">3419</span></a>              }
<a name="l3420"><span class="linenum">3420</span></a>  
<a name="l3421"><span class="linenum">3421</span></a>  <span class="comment">            // Load all moderators, and check each edit permission on this comment</span>
<a name="l3422"><span class="linenum">3422</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l3423"><span class="linenum">3423</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_list')" href="../../../_functions/load_list.html" onMouseOver="funcPopup(event,'load_list')">load_list</a>( <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a> );
<a name="l3424"><span class="linenum">3424</span></a>              foreach( <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a> as <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> =&gt; <a class="var it1693" onMouseOver="hilite(1693)" onMouseOut="lolite()" onClick="logVariable('moderator_ID')" href="../../../_variables/moderator_ID.html">$moderator_ID</a> )
<a name="l3425"><span class="linenum">3425</span></a>              {
<a name="l3426"><span class="linenum">3426</span></a>                  <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a> = <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it1693" onMouseOver="hilite(1693)" onMouseOut="lolite()" onClick="logVariable('moderator_ID')" href="../../../_variables/moderator_ID.html">$moderator_ID</a>, false );
<a name="l3427"><span class="linenum">3427</span></a>                  if( ( ! <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a> ) || ( ! <a class="var it1694" onMouseOver="hilite(1694)" onMouseOut="lolite()" onClick="logVariable('moderator_User')" href="../../../_variables/moderator_User.html">$moderator_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment!CURSTATUS', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) ) )
<a name="l3428"><span class="linenum">3428</span></a>                  { // User doesn't exists any more, or has no permission to edit this comment!
<a name="l3429"><span class="linenum">3429</span></a>                      unset( <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>] );
<a name="l3430"><span class="linenum">3430</span></a>                  }
<a name="l3431"><span class="linenum">3431</span></a>                  elseif( <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('only_moderators')" href="../../../_variables/only_moderators.html">$only_moderators</a> )
<a name="l3432"><span class="linenum">3432</span></a>                  {
<a name="l3433"><span class="linenum">3433</span></a>                      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a>[<a class="var it1693" onMouseOver="hilite(1693)" onMouseOut="lolite()" onClick="logVariable('moderator_ID')" href="../../../_variables/moderator_ID.html">$moderator_ID</a>] = 'moderator';
<a name="l3434"><span class="linenum">3434</span></a>                  }
<a name="l3435"><span class="linenum">3435</span></a>              }
<a name="l3436"><span class="linenum">3436</span></a>          }
<a name="l3437"><span class="linenum">3437</span></a>  
<a name="l3438"><span class="linenum">3438</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() &amp;&amp; ! <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('only_moderators')" href="../../../_variables/only_moderators.html">$only_moderators</a> )
<a name="l3439"><span class="linenum">3439</span></a>          { // Not only moderators needs to be notified:
<a name="l3440"><span class="linenum">3440</span></a>              <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('except_condition')" href="../../../_variables/except_condition.html">$except_condition</a> = '';
<a name="l3441"><span class="linenum">3441</span></a>  
<a name="l3442"><span class="linenum">3442</span></a>              if( <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('except_moderators')" href="../../../_variables/except_moderators.html">$except_moderators</a> &amp;&amp; ( ! empty( <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a> ) ) )
<a name="l3443"><span class="linenum">3443</span></a>              { // Set except moderators condition. Exclude moderators who already got a notification email.
<a name="l3444"><span class="linenum">3444</span></a>                  <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('except_condition')" href="../../../_variables/except_condition.html">$except_condition</a> = ' AND user_ID NOT IN ( &quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&quot;, &quot;', <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a> ).'&quot; )';
<a name="l3445"><span class="linenum">3445</span></a>              }
<a name="l3446"><span class="linenum">3446</span></a>  
<a name="l3447"><span class="linenum">3447</span></a>  <span class="comment">            // Check if we need to include the item creator user:</span>
<a name="l3448"><span class="linenum">3448</span></a>              <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;get_creator_User();
<a name="l3449"><span class="linenum">3449</span></a>              if( <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'notify_published_comments', <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10711" onMouseOver="hilite(10711)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) &amp;&amp; ( ! empty( <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a onClick="logVariable('email')" class="var it10711" onMouseOver="hilite(10711)" onMouseOut="lolite()" href="../../../_variables/email.html">email</a> ) )
<a name="l3450"><span class="linenum">3450</span></a>                  &amp;&amp; ( ! ( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10711" onMouseOver="hilite(10711)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it5868" onMouseOver="hilite(5868)" onMouseOut="lolite()" onClick="logVariable('moderators')" href="../../../_variables/moderators.html">$moderators</a> ) ) ) )
<a name="l3451"><span class="linenum">3451</span></a>              { // Post creator wants to be notified, and post author is not a moderator...
<a name="l3452"><span class="linenum">3452</span></a>                  <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a>[<a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10711" onMouseOver="hilite(10711)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>] = 'creator';
<a name="l3453"><span class="linenum">3453</span></a>              }
<a name="l3454"><span class="linenum">3454</span></a>  
<a name="l3455"><span class="linenum">3455</span></a>  <span class="comment">            // Get list of users who want to be notified about the this post comments:</span>
<a name="l3456"><span class="linenum">3456</span></a>              if( <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_item_subscriptions' ) )
<a name="l3457"><span class="linenum">3457</span></a>              { // item subscriptions is allowed
<a name="l3458"><span class="linenum">3458</span></a>                  <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'SELECT DISTINCT user_ID
<a name="l3459"><span class="linenum">3459</span></a>                                      FROM T_items__subscriptions INNER JOIN T_users ON isub_user_ID = user_ID
<a name="l3460"><span class="linenum">3460</span></a>                                   WHERE isub_item_ID = '.<a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a onClick="logVariable('ID')" class="var it10697" onMouseOver="hilite(10697)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'
<a name="l3461"><span class="linenum">3461</span></a>                                     AND isub_comments &lt;&gt; 0
<a name="l3462"><span class="linenum">3462</span></a>                                     AND LENGTH(<a class="phpfunction" onClick="logFunction('TRIM')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">TRIM</a>(user_email)) &gt; 0'.<a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('except_condition')" href="../../../_variables/except_condition.html">$except_condition</a>;
<a name="l3463"><span class="linenum">3463</span></a>                  <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('notify_list')" href="../../../_variables/notify_list.html">$notify_list</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> );
<a name="l3464"><span class="linenum">3464</span></a>  
<a name="l3465"><span class="linenum">3465</span></a>  <span class="comment">                // Preprocess list:</span>
<a name="l3466"><span class="linenum">3466</span></a>                  foreach( <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('notify_list')" href="../../../_variables/notify_list.html">$notify_list</a> as <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../../../_variables/notification.html">$notification</a> )
<a name="l3467"><span class="linenum">3467</span></a>                  {
<a name="l3468"><span class="linenum">3468</span></a>                      if( ! isset( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a>[ <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../../../_variables/notification.html">$notification</a>-&gt;<a onClick="logVariable('user_ID')" class="var it10928" onMouseOver="hilite(10928)" onMouseOut="lolite()" href="../../../_variables/user_ID.html">user_ID</a> ] ) )
<a name="l3469"><span class="linenum">3469</span></a>                      { // Don't rewrite a notify type if user already is notified by other type before
<a name="l3470"><span class="linenum">3470</span></a>                          <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a>[ <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../../../_variables/notification.html">$notification</a>-&gt;<a onClick="logVariable('user_ID')" class="var it10928" onMouseOver="hilite(10928)" onMouseOut="lolite()" href="../../../_variables/user_ID.html">user_ID</a> ] = 'item_subscription';
<a name="l3471"><span class="linenum">3471</span></a>                      }
<a name="l3472"><span class="linenum">3472</span></a>                  }
<a name="l3473"><span class="linenum">3473</span></a>              }
<a name="l3474"><span class="linenum">3474</span></a>  
<a name="l3475"><span class="linenum">3475</span></a>  <span class="comment">            // Get list of users who want to be notfied about this blog comments:</span>
<a name="l3476"><span class="linenum">3476</span></a>              if( <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'allow_subscriptions' ) )
<a name="l3477"><span class="linenum">3477</span></a>              { // blog subscription is allowed
<a name="l3478"><span class="linenum">3478</span></a>                  <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'SELECT DISTINCT user_ID
<a name="l3479"><span class="linenum">3479</span></a>                                  FROM T_subscriptions INNER JOIN T_users ON sub_user_ID = user_ID
<a name="l3480"><span class="linenum">3480</span></a>                               WHERE sub_coll_ID = '.<a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10670" onMouseOver="hilite(10670)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'
<a name="l3481"><span class="linenum">3481</span></a>                                 AND sub_comments &lt;&gt; 0
<a name="l3482"><span class="linenum">3482</span></a>                                 AND LENGTH(<a class="phpfunction" onClick="logFunction('TRIM')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">TRIM</a>(user_email)) &gt; 0'.<a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('except_condition')" href="../../../_variables/except_condition.html">$except_condition</a>;
<a name="l3483"><span class="linenum">3483</span></a>                  <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('notify_list')" href="../../../_variables/notify_list.html">$notify_list</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> );
<a name="l3484"><span class="linenum">3484</span></a>  
<a name="l3485"><span class="linenum">3485</span></a>  <span class="comment">                // Preprocess list:</span>
<a name="l3486"><span class="linenum">3486</span></a>                  foreach( <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('notify_list')" href="../../../_variables/notify_list.html">$notify_list</a> as <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../../../_variables/notification.html">$notification</a> )
<a name="l3487"><span class="linenum">3487</span></a>                  {
<a name="l3488"><span class="linenum">3488</span></a>                      if( ! isset( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a>[ <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../../../_variables/notification.html">$notification</a>-&gt;<a onClick="logVariable('user_ID')" class="var it10928" onMouseOver="hilite(10928)" onMouseOut="lolite()" href="../../../_variables/user_ID.html">user_ID</a> ] ) )
<a name="l3489"><span class="linenum">3489</span></a>                      { // Don't rewrite a notify type if user already is notified by other type before
<a name="l3490"><span class="linenum">3490</span></a>                          <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a>[ <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../../../_variables/notification.html">$notification</a>-&gt;<a onClick="logVariable('user_ID')" class="var it10928" onMouseOver="hilite(10928)" onMouseOut="lolite()" href="../../../_variables/user_ID.html">user_ID</a> ] = 'blog_subscription';
<a name="l3491"><span class="linenum">3491</span></a>                      }
<a name="l3492"><span class="linenum">3492</span></a>                  }
<a name="l3493"><span class="linenum">3493</span></a>              }
<a name="l3494"><span class="linenum">3494</span></a>          }
<a name="l3495"><span class="linenum">3495</span></a>  
<a name="l3496"><span class="linenum">3496</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l3497"><span class="linenum">3497</span></a>          { // Meta comments have a special notification
<a name="l3498"><span class="linenum">3498</span></a>              <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l3499"><span class="linenum">3499</span></a>  
<a name="l3500"><span class="linenum">3500</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l3501"><span class="linenum">3501</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_ID, &quot;meta_comment&quot;' );
<a name="l3502"><span class="linenum">3502</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_users' );
<a name="l3503"><span class="linenum">3503</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_groups ON user_grp_ID = grp_ID' );
<a name="l3504"><span class="linenum">3504</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_groups__groupsettings ON user_grp_ID = gset_grp_ID AND gset_name = &quot;perm_admin&quot;' );
<a name="l3505"><span class="linenum">3505</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_users__usersettings ON user_ID = uset_user_ID AND uset_name = &quot;notify_meta_comments&quot;' );
<a name="l3506"><span class="linenum">3506</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_coll_user_perms ON bloguser_user_ID = user_ID AND bloguser_blog_ID = '.<a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10670" onMouseOver="hilite(10670)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l3507"><span class="linenum">3507</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_coll_group_perms ON bloggroup_group_ID = user_grp_ID AND bloggroup_blog_ID = '.<a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10670" onMouseOver="hilite(10670)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l3508"><span class="linenum">3508</span></a>  <span class="comment">            // Check if users have access to the back-office</span>
<a name="l3509"><span class="linenum">3509</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( '( gset_value = &quot;normal&quot; OR gset_value = &quot;restricted&quot; )' );
<a name="l3510"><span class="linenum">3510</span></a>  <span class="comment">            // Check if the users would like to receive notifications about new meta comments</span>
<a name="l3511"><span class="linenum">3511</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'uset_value = &quot;1&quot;'.( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'def_notify_meta_comments' ) ? ' OR uset_value IS NULL' : '' ) );
<a name="l3512"><span class="linenum">3512</span></a>  <span class="comment">            // Check if the users have permission to edit this Item</span>
<a name="l3513"><span class="linenum">3513</span></a>              <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('users_with_item_edit_perms')" href="../../../_variables/users_with_item_edit_perms.html">$users_with_item_edit_perms</a> = '( user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a onClick="logVariable('owner_user_ID')" class="var it10670" onMouseOver="hilite(10670)" onMouseOut="lolite()" href="../../../_variables/owner_user_ID.html">owner_user_ID</a> ).' )';
<a name="l3514"><span class="linenum">3514</span></a>              <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('users_with_item_edit_perms')" href="../../../_variables/users_with_item_edit_perms.html">$users_with_item_edit_perms</a> .= ' OR ( grp_perm_blogs = &quot;editall&quot; )';
<a name="l3515"><span class="linenum">3515</span></a>              if( <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'advanced_perms' ) )
<a name="l3516"><span class="linenum">3516</span></a>              {
<a name="l3517"><span class="linenum">3517</span></a>                  <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a> = &amp; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;get_creator_User();
<a name="l3518"><span class="linenum">3518</span></a>                  <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;get_Group();
<a name="l3519"><span class="linenum">3519</span></a>                  <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('post_creator_user_level')" href="../../../_variables/post_creator_user_level.html">$post_creator_user_level</a> = <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'level' );
<a name="l3520"><span class="linenum">3520</span></a>  
<a name="l3521"><span class="linenum">3521</span></a>                  <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('users_with_item_edit_perms')" href="../../../_variables/users_with_item_edit_perms.html">$users_with_item_edit_perms</a> .= ' OR ( bloguser_perm_delpost = 1 ) OR ( bloggroup_perm_delpost = 1 ) OR (
<a name="l3522"><span class="linenum">3522</span></a>                      ( ( bloguser_perm_poststatuses LIKE '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( '%'.<a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'status' ).'%' ).' )
<a name="l3523"><span class="linenum">3523</span></a>                      OR ( bloggroup_perm_poststatuses LIKE '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( '%'.<a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'status' ).'%' ).' ) )';
<a name="l3524"><span class="linenum">3524</span></a>                  <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('users_with_item_edit_perms')" href="../../../_variables/users_with_item_edit_perms.html">$users_with_item_edit_perms</a> .= ' AND (
<a name="l3525"><span class="linenum">3525</span></a>                          ( bloguser_perm_edit = &quot;all&quot;
<a name="l3526"><span class="linenum">3526</span></a>                          OR ( bloguser_perm_edit = &quot;le&quot; AND '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('post_creator_user_level')" href="../../../_variables/post_creator_user_level.html">$post_creator_user_level</a> ).' &lt;= user_level )
<a name="l3527"><span class="linenum">3527</span></a>                          OR ( bloguser_perm_edit = &quot;lt&quot; AND '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('post_creator_user_level')" href="../../../_variables/post_creator_user_level.html">$post_creator_user_level</a> ).' &lt; user_level )
<a name="l3528"><span class="linenum">3528</span></a>                          OR ( bloguser_perm_edit = &quot;own&quot; AND '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10711" onMouseOver="hilite(10711)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).' = user_ID ) )';
<a name="l3529"><span class="linenum">3529</span></a>                  <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('users_with_item_edit_perms')" href="../../../_variables/users_with_item_edit_perms.html">$users_with_item_edit_perms</a> .= ' OR ( bloggroup_perm_edit = &quot;all&quot;
<a name="l3530"><span class="linenum">3530</span></a>                          OR ( bloggroup_perm_edit = &quot;le&quot; AND '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('post_creator_user_level')" href="../../../_variables/post_creator_user_level.html">$post_creator_user_level</a> ).' &lt;= user_level )
<a name="l3531"><span class="linenum">3531</span></a>                          OR ( bloggroup_perm_edit = &quot;lt&quot; AND '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('post_creator_user_level')" href="../../../_variables/post_creator_user_level.html">$post_creator_user_level</a> ).' &lt; user_level )
<a name="l3532"><span class="linenum">3532</span></a>                          OR ( bloggroup_perm_edit = &quot;own&quot; AND '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1350" onMouseOver="hilite(1350)" onMouseOut="lolite()" onClick="logVariable('creator_User')" href="../../../_variables/creator_User.html">$creator_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10711" onMouseOver="hilite(10711)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ).' = user_ID ) ) )';
<a name="l3533"><span class="linenum">3533</span></a>                  <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('users_with_item_edit_perms')" href="../../../_variables/users_with_item_edit_perms.html">$users_with_item_edit_perms</a> .= ' )';
<a name="l3534"><span class="linenum">3534</span></a>              }
<a name="l3535"><span class="linenum">3535</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('users_with_item_edit_perms')" href="../../../_variables/users_with_item_edit_perms.html">$users_with_item_edit_perms</a> );
<a name="l3536"><span class="linenum">3536</span></a>  
<a name="l3537"><span class="linenum">3537</span></a>  <span class="comment">            // Select users which have permission to the edited_Item meta comments and would like to recieve notifications</span>
<a name="l3538"><span class="linenum">3538</span></a>              <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../../../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('meta_SQL')" href="../../../_variables/meta_SQL.html">$meta_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l3539"><span class="linenum">3539</span></a>          }
<a name="l3540"><span class="linenum">3540</span></a>  
<a name="l3541"><span class="linenum">3541</span></a>          if( ( <a class="var it5518" onMouseOver="hilite(5518)" onMouseOut="lolite()" onClick="logVariable('executed_by_userid')" href="../../../_variables/executed_by_userid.html">$executed_by_userid</a> != NULL ) &amp;&amp; isset( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a>[<a class="var it5518" onMouseOver="hilite(5518)" onMouseOut="lolite()" onClick="logVariable('executed_by_userid')" href="../../../_variables/executed_by_userid.html">$executed_by_userid</a>] ) )
<a name="l3542"><span class="linenum">3542</span></a>          { // don't notify the user who just created/updated this comment
<a name="l3543"><span class="linenum">3543</span></a>              unset( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a>[<a class="var it5518" onMouseOver="hilite(5518)" onMouseOut="lolite()" onClick="logVariable('executed_by_userid')" href="../../../_variables/executed_by_userid.html">$executed_by_userid</a>] );
<a name="l3544"><span class="linenum">3544</span></a>          }
<a name="l3545"><span class="linenum">3545</span></a>  
<a name="l3546"><span class="linenum">3546</span></a>          if( ! <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> ) )
<a name="l3547"><span class="linenum">3547</span></a>          { // No-one to notify:
<a name="l3548"><span class="linenum">3548</span></a>              return false;
<a name="l3549"><span class="linenum">3549</span></a>          }
<a name="l3550"><span class="linenum">3550</span></a>  
<a name="l3551"><span class="linenum">3551</span></a>  
<a name="l3552"><span class="linenum">3552</span></a>          <span class="comment">/*</span>
<a name="l3553"><span class="linenum">3553</span></a>  <span class="comment">         * We have a list of user IDs to notify:</span>
<a name="l3554"><span class="linenum">3554</span></a>  <span class="comment">         */</span>
<a name="l3555"><span class="linenum">3555</span></a>  
<a name="l3556"><span class="linenum">3556</span></a>  <span class="comment">        // TODO: dh&gt; this reveals the comments author's email address to all subscribers!!</span>
<a name="l3557"><span class="linenum">3557</span></a>  <span class="comment">        //           $notify_from should get used by default, unless the user has opted in to be the sender!</span>
<a name="l3558"><span class="linenum">3558</span></a>  <span class="comment">        // fp&gt;If the subscriber has permission to moderate the comments, he SHOULD receive the email address.</span>
<a name="l3559"><span class="linenum">3559</span></a>  <span class="comment">        // Get author email address. It will be visible for moderators/blog/post owners only -- NOT for other subscribers</span>
<a name="l3560"><span class="linenum">3560</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_author_User() )
<a name="l3561"><span class="linenum">3561</span></a>          { // Comment from a registered user:
<a name="l3562"><span class="linenum">3562</span></a>              <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('reply_to')" href="../../../_variables/reply_to.html">$reply_to</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('email');
<a name="l3563"><span class="linenum">3563</span></a>              <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('login');
<a name="l3564"><span class="linenum">3564</span></a>              <a class="var it1138" onMouseOver="hilite(1138)" onMouseOut="lolite()" onClick="logVariable('author_user_ID')" href="../../../_variables/author_user_ID.html">$author_user_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_User')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_User.html">author_User</a>-&gt;ID;
<a name="l3565"><span class="linenum">3565</span></a>          }
<a name="l3566"><span class="linenum">3566</span></a>          elseif( ! empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_email')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_email.html">author_email</a> ) )
<a name="l3567"><span class="linenum">3567</span></a>          { // non-member, but with email address:
<a name="l3568"><span class="linenum">3568</span></a>              <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('reply_to')" href="../../../_variables/reply_to.html">$reply_to</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('author_email')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/author_email.html">author_email</a>;
<a name="l3569"><span class="linenum">3569</span></a>              <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>( 'author' );
<a name="l3570"><span class="linenum">3570</span></a>              <a class="var it1138" onMouseOver="hilite(1138)" onMouseOut="lolite()" onClick="logVariable('author_user_ID')" href="../../../_variables/author_user_ID.html">$author_user_ID</a> = NULL;
<a name="l3571"><span class="linenum">3571</span></a>          }
<a name="l3572"><span class="linenum">3572</span></a>          else
<a name="l3573"><span class="linenum">3573</span></a>          { // Fallback (we have no email address):  fp&gt;TODO: or the subscriber is not allowed to view it.
<a name="l3574"><span class="linenum">3574</span></a>              <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('reply_to')" href="../../../_variables/reply_to.html">$reply_to</a> = NULL;
<a name="l3575"><span class="linenum">3575</span></a>              <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a> =  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>( 'author' );
<a name="l3576"><span class="linenum">3576</span></a>              <a class="var it1138" onMouseOver="hilite(1138)" onMouseOut="lolite()" onClick="logVariable('author_user_ID')" href="../../../_variables/author_user_ID.html">$author_user_ID</a> = NULL;
<a name="l3577"><span class="linenum">3577</span></a>          }
<a name="l3578"><span class="linenum">3578</span></a>  
<a name="l3579"><span class="linenum">3579</span></a>  <span class="comment">        // Load all users who will be notified, becasuse another way the send_mail_to_User funtion would load them one by one</span>
<a name="l3580"><span class="linenum">3580</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l3581"><span class="linenum">3581</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_list')" href="../../../_functions/load_list.html" onMouseOver="funcPopup(event,'load_list')">load_list</a>( <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> ) );
<a name="l3582"><span class="linenum">3582</span></a>  
<a name="l3583"><span class="linenum">3583</span></a>  <span class="comment">        // Load a list with the blocked emails  in cache</span>
<a name="l3584"><span class="linenum">3584</span></a>          <a class="function" onClick="logFunction('load_blocked_emails')" href="../../../_functions/load_blocked_emails.html" onMouseOver="funcPopup(event,'load_blocked_emails')">load_blocked_emails</a>( <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> ) );
<a name="l3585"><span class="linenum">3585</span></a>  
<a name="l3586"><span class="linenum">3586</span></a>  <span class="comment">        // Send emails:</span>
<a name="l3587"><span class="linenum">3587</span></a>          foreach( <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('notify_users')" href="../../../_variables/notify_users.html">$notify_users</a> as <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('notify_user_ID')" href="../../../_variables/notify_user_ID.html">$notify_user_ID</a> =&gt; <a class="var it7073" onMouseOver="hilite(7073)" onMouseOut="lolite()" onClick="logVariable('notify_type')" href="../../../_variables/notify_type.html">$notify_type</a> )
<a name="l3588"><span class="linenum">3588</span></a>          {
<a name="l3589"><span class="linenum">3589</span></a>  <span class="comment">            // get data content</span>
<a name="l3590"><span class="linenum">3590</span></a>              <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a> = <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('notify_user_ID')" href="../../../_variables/notify_user_ID.html">$notify_user_ID</a> );
<a name="l3591"><span class="linenum">3591</span></a>              <a class="var it1703" onMouseOver="hilite(1703)" onMouseOut="lolite()" onClick="logVariable('notify_email')" href="../../../_variables/notify_email.html">$notify_email</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'email' );
<a name="l3592"><span class="linenum">3592</span></a>  
<a name="l3593"><span class="linenum">3593</span></a>  <span class="comment">            // init notification setting</span>
<a name="l3594"><span class="linenum">3594</span></a>              <a class="function" onClick="logFunction('locale_temp_switch')" href="../../../_functions/locale_temp_switch.html" onMouseOver="funcPopup(event,'locale_temp_switch')">locale_temp_switch</a>( <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'locale' ) );
<a name="l3595"><span class="linenum">3595</span></a>              <a class="var it1705" onMouseOver="hilite(1705)" onMouseOut="lolite()" onClick="logVariable('notify_user_Group')" href="../../../_variables/notify_user_Group.html">$notify_user_Group</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>-&gt;get_Group();
<a name="l3596"><span class="linenum">3596</span></a>              <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a> = ( ( <a class="var it7073" onMouseOver="hilite(7073)" onMouseOut="lolite()" onClick="logVariable('notify_type')" href="../../../_variables/notify_type.html">$notify_type</a> == 'moderator' ) &amp;&amp; ( <a class="var it1705" onMouseOver="hilite(1705)" onMouseOut="lolite()" onClick="logVariable('notify_user_Group')" href="../../../_variables/notify_user_Group.html">$notify_user_Group</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment_moderation_notif', 'full' ) )
<a name="l3597"><span class="linenum">3597</span></a>                              || ( <a class="var it1705" onMouseOver="hilite(1705)" onMouseOut="lolite()" onClick="logVariable('notify_user_Group')" href="../../../_variables/notify_user_Group.html">$notify_user_Group</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'comment_subscription_notif', 'full' ) ) );
<a name="l3598"><span class="linenum">3598</span></a>  
<a name="l3599"><span class="linenum">3599</span></a>              switch( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/type.html">type</a> )
<a name="l3600"><span class="linenum">3600</span></a>              {
<a name="l3601"><span class="linenum">3601</span></a>                  case 'trackback':
<a name="l3602"><span class="linenum">3602</span></a>  <span class="comment">                    /* TRANS: Subject of the mail to send on new trackbacks. First %s is the blog's shortname, the second %s is the item's title. */</span>
<a name="l3603"><span class="linenum">3603</span></a>                      <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('[%s] New trackback on &quot;%s&quot;'), <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('shortname'), <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('title') );
<a name="l3604"><span class="linenum">3604</span></a>                      break;
<a name="l3605"><span class="linenum">3605</span></a>  
<a name="l3606"><span class="linenum">3606</span></a>                  case 'meta':
<a name="l3607"><span class="linenum">3607</span></a>  <span class="comment">                    /* TRANS: Subject of the mail to send on new meta comments. First %s is author login, the second %s is the item's title. */</span>
<a name="l3608"><span class="linenum">3608</span></a>                      <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( '%s posted a new meta comment on &quot;%s&quot;' ), <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a>, <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('title') );
<a name="l3609"><span class="linenum">3609</span></a>                      break;
<a name="l3610"><span class="linenum">3610</span></a>  
<a name="l3611"><span class="linenum">3611</span></a>                  default:
<a name="l3612"><span class="linenum">3612</span></a>                      <span class="comment">/* TRANS: Subject of the mail to send on new comments.</span>
<a name="l3613"><span class="linenum">3613</span></a>  <span class="comment">                       In case of full notification the first %s is blog name, the second %s is the item's title.</span>
<a name="l3614"><span class="linenum">3614</span></a>  <span class="comment">                       In case of short notification the first %s is author login, the second %s is the item's title. */</span>
<a name="l3615"><span class="linenum">3615</span></a>                      <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a> ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('[%s] <span class="keyword">New </span><a class="class" onClick="logClass('comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a> on &quot;%s&quot;') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( '%s posted a <span class="keyword">new </span><a class="class" onClick="logClass('comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a> on &quot;%s&quot;' );
<a name="l3616"><span class="linenum">3616</span></a>                      if( <a class="var it7059" onMouseOver="hilite(7059)" onMouseOut="lolite()" onClick="logVariable('only_moderators')" href="../../../_variables/only_moderators.html">$only_moderators</a> )
<a name="l3617"><span class="linenum">3617</span></a>                      {
<a name="l3618"><span class="linenum">3618</span></a>                          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'draft' )
<a name="l3619"><span class="linenum">3619</span></a>                          {
<a name="l3620"><span class="linenum">3620</span></a>                              <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a> ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('[%s] <span class="keyword">New </span><a class="class" onClick="logClass('comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a> awaiting moderation on &quot;%s&quot;') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('<span class="keyword">New </span><a class="class" onClick="logClass('comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a> awaiting moderation: ').<a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>;
<a name="l3621"><span class="linenum">3621</span></a>                          }
<a name="l3622"><span class="linenum">3622</span></a>                          else
<a name="l3623"><span class="linenum">3623</span></a>                          {
<a name="l3624"><span class="linenum">3624</span></a>                              <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a> ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('[%s] <span class="keyword">New </span><a class="class" onClick="logClass('comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a> may need moderation on &quot;%s&quot;') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('<span class="keyword">New </span><a class="class" onClick="logClass('comment')" href="../../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a> may need moderation: ').<a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>;
<a name="l3625"><span class="linenum">3625</span></a>                          }
<a name="l3626"><span class="linenum">3626</span></a>                      }
<a name="l3627"><span class="linenum">3627</span></a>                      <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a> = sprintf( <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a> ? <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('shortname') : <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a>, <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('title') );
<a name="l3628"><span class="linenum">3628</span></a>              }
<a name="l3629"><span class="linenum">3629</span></a>  
<a name="l3630"><span class="linenum">3630</span></a>              switch( <a class="var it7073" onMouseOver="hilite(7073)" onMouseOut="lolite()" onClick="logVariable('notify_type')" href="../../../_variables/notify_type.html">$notify_type</a> )
<a name="l3631"><span class="linenum">3631</span></a>              {
<a name="l3632"><span class="linenum">3632</span></a>                  case 'moderator': // moderation email
<a name="l3633"><span class="linenum">3633</span></a>                  case 'creator': // user is the creator of the post
<a name="l3634"><span class="linenum">3634</span></a>                      <a class="var it7074" onMouseOver="hilite(7074)" onMouseOut="lolite()" onClick="logVariable('user_reply_to')" href="../../../_variables/user_reply_to.html">$user_reply_to</a> = <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('reply_to')" href="../../../_variables/reply_to.html">$reply_to</a>;
<a name="l3635"><span class="linenum">3635</span></a>                      break;
<a name="l3636"><span class="linenum">3636</span></a>  
<a name="l3637"><span class="linenum">3637</span></a>                  case 'blog_subscription': // blog subscription
<a name="l3638"><span class="linenum">3638</span></a>                  case 'item_subscription': // item subscription
<a name="l3639"><span class="linenum">3639</span></a>                  case 'meta_comment': // meta comment notification
<a name="l3640"><span class="linenum">3640</span></a>                      <a class="var it7074" onMouseOver="hilite(7074)" onMouseOut="lolite()" onClick="logVariable('user_reply_to')" href="../../../_variables/user_reply_to.html">$user_reply_to</a> = NULL;
<a name="l3641"><span class="linenum">3641</span></a>                      break;
<a name="l3642"><span class="linenum">3642</span></a>  
<a name="l3643"><span class="linenum">3643</span></a>                  default: // Invalid notify type
<a name="l3644"><span class="linenum">3644</span></a>                      <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Unknown user subscription type' );
<a name="l3645"><span class="linenum">3645</span></a>              }
<a name="l3646"><span class="linenum">3646</span></a>  
<a name="l3647"><span class="linenum">3647</span></a>              <a class="var it1697" onMouseOver="hilite(1697)" onMouseOut="lolite()" onClick="logVariable('email_template_params')" href="../../../_variables/email_template_params.html">$email_template_params</a> = array(
<a name="l3648"><span class="linenum">3648</span></a>                      'notify_full'    =&gt; <a class="var it1696" onMouseOver="hilite(1696)" onMouseOut="lolite()" onClick="logVariable('notify_full')" href="../../../_variables/notify_full.html">$notify_full</a>,
<a name="l3649"><span class="linenum">3649</span></a>                      'Comment'        =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>,
<a name="l3650"><span class="linenum">3650</span></a>                      'Blog'           =&gt; <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>,
<a name="l3651"><span class="linenum">3651</span></a>                      'Item'           =&gt; <a class="var it198" onMouseOver="hilite(198)" onMouseOut="lolite()" onClick="logVariable('edited_Item')" href="../../../_variables/edited_Item.html">$edited_Item</a>,
<a name="l3652"><span class="linenum">3652</span></a>                      'author_name'    =&gt; <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('author_name')" href="../../../_variables/author_name.html">$author_name</a>,
<a name="l3653"><span class="linenum">3653</span></a>                      'author_ID'      =&gt; <a class="var it1138" onMouseOver="hilite(1138)" onMouseOut="lolite()" onClick="logVariable('author_user_ID')" href="../../../_variables/author_user_ID.html">$author_user_ID</a>,
<a name="l3654"><span class="linenum">3654</span></a>                      'notify_type'    =&gt; <a class="var it7073" onMouseOver="hilite(7073)" onMouseOut="lolite()" onClick="logVariable('notify_type')" href="../../../_variables/notify_type.html">$notify_type</a>,
<a name="l3655"><span class="linenum">3655</span></a>                      'recipient_User' =&gt; <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>,
<a name="l3656"><span class="linenum">3656</span></a>                  );
<a name="l3657"><span class="linenum">3657</span></a>  
<a name="l3658"><span class="linenum">3658</span></a>              if( <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> )
<a name="l3659"><span class="linenum">3659</span></a>              {
<a name="l3660"><span class="linenum">3660</span></a>                  <a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('notify_message')" href="../../../_variables/notify_message.html">$notify_message</a> = <a class="function" onClick="logFunction('mail_template')" href="../../../_functions/mail_template.html" onMouseOver="funcPopup(event,'mail_template')">mail_template</a>( 'comment_new', 'text', <a class="var it1697" onMouseOver="hilite(1697)" onMouseOut="lolite()" onClick="logVariable('email_template_params')" href="../../../_variables/email_template_params.html">$email_template_params</a> );
<a name="l3661"><span class="linenum">3661</span></a>                  <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('mail_dump')" href="../../../_variables/mail_dump.html">$mail_dump</a> = &quot;Sending notification to <a class="var it1703" onMouseOver="hilite(1703)" onMouseOut="lolite()" onClick="logVariable('notify_email')" href="../../../_variables/notify_email.html">$notify_email</a>:&lt;pre&gt;Subject: <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>\n<a class="var it554" onMouseOver="hilite(554)" onMouseOut="lolite()" onClick="logVariable('notify_message')" href="../../../_variables/notify_message.html">$notify_message</a>&lt;/pre&gt;&quot;;
<a name="l3662"><span class="linenum">3662</span></a>  
<a name="l3663"><span class="linenum">3663</span></a>                  if( <a class="var it463" onMouseOver="hilite(463)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../../_variables/debug.html">$debug</a> &gt;= 2 )
<a name="l3664"><span class="linenum">3664</span></a>                  { // output mail content - NOTE: this will kill sending of headers.
<a name="l3665"><span class="linenum">3665</span></a>                      echo &quot;&lt;p&gt;<a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('mail_dump')" href="../../../_variables/mail_dump.html">$mail_dump</a>&lt;/p&gt;&quot;;
<a name="l3666"><span class="linenum">3666</span></a>                  }
<a name="l3667"><span class="linenum">3667</span></a>  
<a name="l3668"><span class="linenum">3668</span></a>                  <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('mail_dump')" href="../../../_variables/mail_dump.html">$mail_dump</a>, 'notification' );
<a name="l3669"><span class="linenum">3669</span></a>              }
<a name="l3670"><span class="linenum">3670</span></a>  
<a name="l3671"><span class="linenum">3671</span></a>  <span class="comment">            // Send the email:</span>
<a name="l3672"><span class="linenum">3672</span></a>  <span class="comment">            // Note: Note activated users won't get notification email</span>
<a name="l3673"><span class="linenum">3673</span></a>              <a class="function" onClick="logFunction('send_mail_to_User')" href="../../../_functions/send_mail_to_user.html" onMouseOver="funcPopup(event,'send_mail_to_user')">send_mail_to_User</a>( <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('notify_user_ID')" href="../../../_variables/notify_user_ID.html">$notify_user_ID</a>, <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../_variables/subject.html">$subject</a>, 'comment_new', <a class="var it1697" onMouseOver="hilite(1697)" onMouseOut="lolite()" onClick="logVariable('email_template_params')" href="../../../_variables/email_template_params.html">$email_template_params</a>, false, array( 'Reply-To' =&gt; <a class="var it7074" onMouseOver="hilite(7074)" onMouseOut="lolite()" onClick="logVariable('user_reply_to')" href="../../../_variables/user_reply_to.html">$user_reply_to</a> ) );
<a name="l3674"><span class="linenum">3674</span></a>  
<a name="l3675"><span class="linenum">3675</span></a>              <a class="function" onClick="logFunction('blocked_emails_memorize')" href="../../../_functions/blocked_emails_memorize.html" onMouseOver="funcPopup(event,'blocked_emails_memorize')">blocked_emails_memorize</a>( <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('notify_User')" href="../../../_variables/notify_User.html">$notify_User</a>-&gt;<a onClick="logVariable('email')" class="var it10929" onMouseOver="hilite(10929)" onMouseOut="lolite()" href="../../../_variables/email.html">email</a> );
<a name="l3676"><span class="linenum">3676</span></a>  
<a name="l3677"><span class="linenum">3677</span></a>              <a class="function" onClick="logFunction('locale_restore_previous')" href="../../../_functions/locale_restore_previous.html" onMouseOver="funcPopup(event,'locale_restore_previous')">locale_restore_previous</a>();
<a name="l3678"><span class="linenum">3678</span></a>          }
<a name="l3679"><span class="linenum">3679</span></a>  
<a name="l3680"><span class="linenum">3680</span></a>          <a class="function" onClick="logFunction('blocked_emails_display')" href="../../../_functions/blocked_emails_display.html" onMouseOver="funcPopup(event,'blocked_emails_display')">blocked_emails_display</a>();
<a name="l3681"><span class="linenum">3681</span></a>      }
<a name="l3682"><span class="linenum">3682</span></a>  
<a name="l3683"><span class="linenum">3683</span></a>  
<a name="l3684"><span class="linenum">3684</span></a>      <span class="comment">/**</span>
<a name="l3685"><span class="linenum">3685</span></a>  <span class="comment">     * Handle quick moderation secret param: checks if comment secret should expire after first comment moderation, and delete the secret if required</span>
<a name="l3686"><span class="linenum">3686</span></a>  <span class="comment">     * This should be called after every kind of commment moderation</span>
<a name="l3687"><span class="linenum">3687</span></a>  <span class="comment">     */</span>
<a name="l3688"><span class="linenum">3688</span></a>  	function <a class="function" onClick="logFunction('handle_qm_secret')" href="../../../_functions/handle_qm_secret.html" onMouseOver="funcPopup(event,'handle_qm_secret')">handle_qm_secret</a>( <a class="var it7076" onMouseOver="hilite(7076)" onMouseOut="lolite()" onClick="logVariable('save_comment')" href="../../../_variables/save_comment.html">$save_comment</a> = false )
<a name="l3689"><span class="linenum">3689</span></a>      {
<a name="l3690"><span class="linenum">3690</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l3691"><span class="linenum">3691</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l3692"><span class="linenum">3692</span></a>          if( <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a onClick="logVariable('Blog')" class="var it10681" onMouseOver="hilite(10681)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'comment_quick_moderation' ) == 'expire' )
<a name="l3693"><span class="linenum">3693</span></a>          { // comment secret expires after first comment moderation
<a name="l3694"><span class="linenum">3694</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'secret', NULL );
<a name="l3695"><span class="linenum">3695</span></a>          }
<a name="l3696"><span class="linenum">3696</span></a>          if( <a class="var it7076" onMouseOver="hilite(7076)" onMouseOut="lolite()" onClick="logVariable('save_comment')" href="../../../_variables/save_comment.html">$save_comment</a> )
<a name="l3697"><span class="linenum">3697</span></a>          {
<a name="l3698"><span class="linenum">3698</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l3699"><span class="linenum">3699</span></a>          }
<a name="l3700"><span class="linenum">3700</span></a>      }
<a name="l3701"><span class="linenum">3701</span></a>  
<a name="l3702"><span class="linenum">3702</span></a>  
<a name="l3703"><span class="linenum">3703</span></a>      <span class="comment">/**</span>
<a name="l3704"><span class="linenum">3704</span></a>  <span class="comment">     * Check if this comment is published to some of the public statuses ( 'published', 'community', 'protected' )</span>
<a name="l3705"><span class="linenum">3705</span></a>  <span class="comment">     *</span>
<a name="l3706"><span class="linenum">3706</span></a>  <span class="comment">     * @return boolean true ir the item status is public or limited public, false otherwise</span>
<a name="l3707"><span class="linenum">3707</span></a>  <span class="comment">     */</span>
<a name="l3708"><span class="linenum">3708</span></a>  	function <a class="function" onClick="logFunction('is_published')" href="../../../_functions/is_published.html" onMouseOver="funcPopup(event,'is_published')">is_published</a>()
<a name="l3709"><span class="linenum">3709</span></a>      {
<a name="l3710"><span class="linenum">3710</span></a>          <a class="var it457" onMouseOver="hilite(457)" onMouseOut="lolite()" onClick="logVariable('permvalue')" href="../../../_variables/permvalue.html">$permvalue</a> = <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> );
<a name="l3711"><span class="linenum">3711</span></a>          <a class="var it7077" onMouseOver="hilite(7077)" onMouseOut="lolite()" onClick="logVariable('published_statuses_permvalue')" href="../../../_variables/published_statuses_permvalue.html">$published_statuses_permvalue</a> = <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'published_statuses' );
<a name="l3712"><span class="linenum">3712</span></a>          return ( <a class="var it457" onMouseOver="hilite(457)" onMouseOut="lolite()" onClick="logVariable('permvalue')" href="../../../_variables/permvalue.html">$permvalue</a> &amp; <a class="var it7077" onMouseOver="hilite(7077)" onMouseOut="lolite()" onClick="logVariable('published_statuses_permvalue')" href="../../../_variables/published_statuses_permvalue.html">$published_statuses_permvalue</a> ) ? true : false;
<a name="l3713"><span class="linenum">3713</span></a>      }
<a name="l3714"><span class="linenum">3714</span></a>  
<a name="l3715"><span class="linenum">3715</span></a>  
<a name="l3716"><span class="linenum">3716</span></a>      <span class="comment">/**</span>
<a name="l3717"><span class="linenum">3717</span></a>  <span class="comment">     * Check if comment public or limited public status was changed. Limited public status is like community or protected.</span>
<a name="l3718"><span class="linenum">3718</span></a>  <span class="comment">     *</span>
<a name="l3719"><span class="linenum">3719</span></a>  <span class="comment">     * @return boolean false if status was not changed or neither the previous nor current status is public or limited public, true otherwise</span>
<a name="l3720"><span class="linenum">3720</span></a>  <span class="comment">     */</span>
<a name="l3721"><span class="linenum">3721</span></a>  	function <a class="function" onClick="logFunction('check_publish_status_changed')" href="../../../_functions/check_publish_status_changed.html" onMouseOver="funcPopup(event,'check_publish_status_changed')">check_publish_status_changed</a>()
<a name="l3722"><span class="linenum">3722</span></a>      {
<a name="l3723"><span class="linenum">3723</span></a>          if( !isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previous_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/previous_status.html">previous_status</a> ) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previous_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/previous_status.html">previous_status</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> )
<a name="l3724"><span class="linenum">3724</span></a>          { // Status was not changed
<a name="l3725"><span class="linenum">3725</span></a>              return false;
<a name="l3726"><span class="linenum">3726</span></a>          }
<a name="l3727"><span class="linenum">3727</span></a>  
<a name="l3728"><span class="linenum">3728</span></a>          <a class="var it7078" onMouseOver="hilite(7078)" onMouseOut="lolite()" onClick="logVariable('previous_status_permvalue')" href="../../../_variables/previous_status_permvalue.html">$previous_status_permvalue</a> = <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previous_status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/previous_status.html">previous_status</a> );
<a name="l3729"><span class="linenum">3729</span></a>          <a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('current_status_permvalue')" href="../../../_variables/current_status_permvalue.html">$current_status_permvalue</a> = <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> );
<a name="l3730"><span class="linenum">3730</span></a>          <a class="var it7077" onMouseOver="hilite(7077)" onMouseOut="lolite()" onClick="logVariable('published_statuses_permvalue')" href="../../../_variables/published_statuses_permvalue.html">$published_statuses_permvalue</a> = <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'published_statuses' );
<a name="l3731"><span class="linenum">3731</span></a>  
<a name="l3732"><span class="linenum">3732</span></a>          if( <a class="var it7079" onMouseOver="hilite(7079)" onMouseOut="lolite()" onClick="logVariable('current_status_permvalue')" href="../../../_variables/current_status_permvalue.html">$current_status_permvalue</a> &amp; <a class="var it7077" onMouseOver="hilite(7077)" onMouseOut="lolite()" onClick="logVariable('published_statuses_permvalue')" href="../../../_variables/published_statuses_permvalue.html">$published_statuses_permvalue</a> )
<a name="l3733"><span class="linenum">3733</span></a>          { // status has been changed to another public or limited public status
<a name="l3734"><span class="linenum">3734</span></a>              return true;
<a name="l3735"><span class="linenum">3735</span></a>          }
<a name="l3736"><span class="linenum">3736</span></a>  
<a name="l3737"><span class="linenum">3737</span></a>          if( <a class="var it7078" onMouseOver="hilite(7078)" onMouseOut="lolite()" onClick="logVariable('previous_status_permvalue')" href="../../../_variables/previous_status_permvalue.html">$previous_status_permvalue</a> &amp; <a class="var it7077" onMouseOver="hilite(7077)" onMouseOut="lolite()" onClick="logVariable('published_statuses_permvalue')" href="../../../_variables/published_statuses_permvalue.html">$published_statuses_permvalue</a> )
<a name="l3738"><span class="linenum">3738</span></a>          { // previous status was public or limited public status, but current status is not
<a name="l3739"><span class="linenum">3739</span></a>              return true;
<a name="l3740"><span class="linenum">3740</span></a>          }
<a name="l3741"><span class="linenum">3741</span></a>  
<a name="l3742"><span class="linenum">3742</span></a>  <span class="comment">        // This comment was not published before and it is not published now either</span>
<a name="l3743"><span class="linenum">3743</span></a>          return false;
<a name="l3744"><span class="linenum">3744</span></a>      }
<a name="l3745"><span class="linenum">3745</span></a>  
<a name="l3746"><span class="linenum">3746</span></a>  
<a name="l3747"><span class="linenum">3747</span></a>      <span class="comment">/**</span>
<a name="l3748"><span class="linenum">3748</span></a>  <span class="comment">     * Trigger event AfterCommentUpdate after calling parent method.</span>
<a name="l3749"><span class="linenum">3749</span></a>  <span class="comment">     *</span>
<a name="l3750"><span class="linenum">3750</span></a>  <span class="comment">     * @return boolean true on success</span>
<a name="l3751"><span class="linenum">3751</span></a>  <span class="comment">     */</span>
<a name="l3752"><span class="linenum">3752</span></a>  	function <a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>()
<a name="l3753"><span class="linenum">3753</span></a>      {
<a name="l3754"><span class="linenum">3754</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>, <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l3755"><span class="linenum">3755</span></a>  
<a name="l3756"><span class="linenum">3756</span></a>          <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>;
<a name="l3757"><span class="linenum">3757</span></a>  
<a name="l3758"><span class="linenum">3758</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> ) )
<a name="l3759"><span class="linenum">3759</span></a>          {
<a name="l3760"><span class="linenum">3760</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_last_touched_date')" href="../../../_functions/set_last_touched_date.html" onMouseOver="funcPopup(event,'set_last_touched_date')">set_last_touched_date</a>();
<a name="l3761"><span class="linenum">3761</span></a>          }
<a name="l3762"><span class="linenum">3762</span></a>  
<a name="l3763"><span class="linenum">3763</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l3764"><span class="linenum">3764</span></a>  
<a name="l3765"><span class="linenum">3765</span></a>          if( ( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = parent::<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>() ) !== false )
<a name="l3766"><span class="linenum">3766</span></a>          {
<a name="l3767"><span class="linenum">3767</span></a>              <a class="var it7080" onMouseOver="hilite(7080)" onMouseOut="lolite()" onClick="logVariable('update_item_last_touched_date')" href="../../../_variables/update_item_last_touched_date.html">$update_item_last_touched_date</a> = false;
<a name="l3768"><span class="linenum">3768</span></a>              if( isset( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a>['comment_content'] ) || isset( <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a>['comment_renderers'] ) )
<a name="l3769"><span class="linenum">3769</span></a>              { // Content is updated
<a name="l3770"><span class="linenum">3770</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_prerendered_content')" href="../../../_functions/delete_prerendered_content.html" onMouseOver="funcPopup(event,'delete_prerendered_content')">delete_prerendered_content</a>();
<a name="l3771"><span class="linenum">3771</span></a>                  <a class="var it7080" onMouseOver="hilite(7080)" onMouseOut="lolite()" onClick="logVariable('update_item_last_touched_date')" href="../../../_variables/update_item_last_touched_date.html">$update_item_last_touched_date</a> = true;
<a name="l3772"><span class="linenum">3772</span></a>              }
<a name="l3773"><span class="linenum">3773</span></a>  
<a name="l3774"><span class="linenum">3774</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_publish_status_changed')" href="../../../_functions/check_publish_status_changed.html" onMouseOver="funcPopup(event,'check_publish_status_changed')">check_publish_status_changed</a>() )
<a name="l3775"><span class="linenum">3775</span></a>              { // Comment is updated into/out some public status
<a name="l3776"><span class="linenum">3776</span></a>                  <a class="var it7080" onMouseOver="hilite(7080)" onMouseOut="lolite()" onClick="logVariable('update_item_last_touched_date')" href="../../../_variables/update_item_last_touched_date.html">$update_item_last_touched_date</a> = true;
<a name="l3777"><span class="linenum">3777</span></a>              }
<a name="l3778"><span class="linenum">3778</span></a>  
<a name="l3779"><span class="linenum">3779</span></a>              if( !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previous_item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/previous_item_ID.html">previous_item_ID</a> ) )
<a name="l3780"><span class="linenum">3780</span></a>              { // Comment is moved from another post
<a name="l3781"><span class="linenum">3781</span></a>                  <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a> = &amp; get_ItemCache();
<a name="l3782"><span class="linenum">3782</span></a>                  <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l3783"><span class="linenum">3783</span></a>                  if( <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('previous_Item')" href="../../../_variables/previous_Item.html">$previous_Item</a> = &amp; <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('ItemCache')" href="../../../_variables/ItemCache.html">$ItemCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previous_item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/previous_item_ID.html">previous_item_ID</a>, false, false ) )
<a name="l3784"><span class="linenum">3784</span></a>                  { // Update last touched date of previous item
<a name="l3785"><span class="linenum">3785</span></a>                      <a class="var it7081" onMouseOver="hilite(7081)" onMouseOut="lolite()" onClick="logVariable('previous_Item')" href="../../../_variables/previous_Item.html">$previous_Item</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>( false );
<a name="l3786"><span class="linenum">3786</span></a>                  }
<a name="l3787"><span class="linenum">3787</span></a>  <span class="comment">                // Also update new post</span>
<a name="l3788"><span class="linenum">3788</span></a>                  <a class="var it7080" onMouseOver="hilite(7080)" onMouseOut="lolite()" onClick="logVariable('update_item_last_touched_date')" href="../../../_variables/update_item_last_touched_date.html">$update_item_last_touched_date</a> = true;
<a name="l3789"><span class="linenum">3789</span></a>  
<a name="l3790"><span class="linenum">3790</span></a>  <span class="comment">                // Also move all child comments to new post</span>
<a name="l3791"><span class="linenum">3791</span></a>                  <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('child_comment_IDs')" href="../../../_variables/child_comment_IDs.html">$child_comment_IDs</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_child_comment_IDs')" href="../../../_functions/get_child_comment_ids.html" onMouseOver="funcPopup(event,'get_child_comment_ids')">get_child_comment_IDs</a>();
<a name="l3792"><span class="linenum">3792</span></a>                  if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('child_comment_IDs')" href="../../../_variables/child_comment_IDs.html">$child_comment_IDs</a> ) )
<a name="l3793"><span class="linenum">3793</span></a>                  {
<a name="l3794"><span class="linenum">3794</span></a>                      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_comments
<a name="l3795"><span class="linenum">3795</span></a>                            SET comment_item_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a> ).'
<a name="l3796"><span class="linenum">3796</span></a>                          WHERE comment_ID IN ( '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('child_comment_IDs')" href="../../../_variables/child_comment_IDs.html">$child_comment_IDs</a> ).' )' );
<a name="l3797"><span class="linenum">3797</span></a>                  }
<a name="l3798"><span class="linenum">3798</span></a>              }
<a name="l3799"><span class="linenum">3799</span></a>  
<a name="l3800"><span class="linenum">3800</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>( <a class="var it7080" onMouseOver="hilite(7080)" onMouseOut="lolite()" onClick="logVariable('update_item_last_touched_date')" href="../../../_variables/update_item_last_touched_date.html">$update_item_last_touched_date</a> );
<a name="l3801"><span class="linenum">3801</span></a>  
<a name="l3802"><span class="linenum">3802</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l3803"><span class="linenum">3803</span></a>  
<a name="l3804"><span class="linenum">3804</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterCommentUpdate', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Comment' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>, 'dbchanges' =&gt; <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> ) );
<a name="l3805"><span class="linenum">3805</span></a>          }
<a name="l3806"><span class="linenum">3806</span></a>          else
<a name="l3807"><span class="linenum">3807</span></a>          {
<a name="l3808"><span class="linenum">3808</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l3809"><span class="linenum">3809</span></a>          }
<a name="l3810"><span class="linenum">3810</span></a>  
<a name="l3811"><span class="linenum">3811</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3812"><span class="linenum">3812</span></a>      }
<a name="l3813"><span class="linenum">3813</span></a>  
<a name="l3814"><span class="linenum">3814</span></a>  
<a name="l3815"><span class="linenum">3815</span></a>      <span class="comment">/**</span>
<a name="l3816"><span class="linenum">3816</span></a>  <span class="comment">     * Get karma and set it before adding the Comment to DB.</span>
<a name="l3817"><span class="linenum">3817</span></a>  <span class="comment">     *</span>
<a name="l3818"><span class="linenum">3818</span></a>  <span class="comment">     * @return boolean true on success, false if it did not get inserted</span>
<a name="l3819"><span class="linenum">3819</span></a>  <span class="comment">     */</span>
<a name="l3820"><span class="linenum">3820</span></a>  	function <a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>()
<a name="l3821"><span class="linenum">3821</span></a>      {
<a name="l3822"><span class="linenum">3822</span></a>          <span class="comment">/**</span>
<a name="l3823"><span class="linenum">3823</span></a>  <span class="comment">         * @var Plugins</span>
<a name="l3824"><span class="linenum">3824</span></a>  <span class="comment">         */</span>
<a name="l3825"><span class="linenum">3825</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l3826"><span class="linenum">3826</span></a>          global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l3827"><span class="linenum">3827</span></a>  
<a name="l3828"><span class="linenum">3828</span></a>  <span class="comment">        // Get karma percentage (interval -100 - 100)</span>
<a name="l3829"><span class="linenum">3829</span></a>          <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('spam_karma')" href="../../../_variables/spam_karma.html">$spam_karma</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_karma_collect')" href="../../../_functions/trigger_karma_collect.html" onMouseOver="funcPopup(event,'trigger_karma_collect')">trigger_karma_collect</a>( 'GetSpamKarmaForComment', array( 'Comment' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l3830"><span class="linenum">3830</span></a>  
<a name="l3831"><span class="linenum">3831</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_spam_karma')" href="../../../_functions/set_spam_karma.html" onMouseOver="funcPopup(event,'set_spam_karma')">set_spam_karma</a>( <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('spam_karma')" href="../../../_variables/spam_karma.html">$spam_karma</a> );
<a name="l3832"><span class="linenum">3832</span></a>  
<a name="l3833"><span class="linenum">3833</span></a>  <span class="comment">        // Change status accordingly:</span>
<a name="l3834"><span class="linenum">3834</span></a>          if( ! <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('spam_karma')" href="../../../_variables/spam_karma.html">$spam_karma</a>) )
<a name="l3835"><span class="linenum">3835</span></a>          {
<a name="l3836"><span class="linenum">3836</span></a>              if( <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('spam_karma')" href="../../../_variables/spam_karma.html">$spam_karma</a> &lt; <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('antispam_threshold_publish') )
<a name="l3837"><span class="linenum">3837</span></a>              { // Publish:
<a name="l3838"><span class="linenum">3838</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', 'published' );
<a name="l3839"><span class="linenum">3839</span></a>              }
<a name="l3840"><span class="linenum">3840</span></a>              elseif( <a class="var it6972" onMouseOver="hilite(6972)" onMouseOut="lolite()" onClick="logVariable('spam_karma')" href="../../../_variables/spam_karma.html">$spam_karma</a> &gt; <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('antispam_threshold_delete') )
<a name="l3841"><span class="linenum">3841</span></a>              { // Delete/No insert:
<a name="l3842"><span class="linenum">3842</span></a>                  return false;
<a name="l3843"><span class="linenum">3843</span></a>              }
<a name="l3844"><span class="linenum">3844</span></a>          }
<a name="l3845"><span class="linenum">3845</span></a>  
<a name="l3846"><span class="linenum">3846</span></a>  <span class="comment">        // set comment secret for quick moderation</span>
<a name="l3847"><span class="linenum">3847</span></a>  <span class="comment">        // fp&gt; users have requested this for all comments</span>
<a name="l3848"><span class="linenum">3848</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l3849"><span class="linenum">3849</span></a>          <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('comment_Blog')" href="../../../_variables/comment_Blog.html">$comment_Blog</a> = &amp; <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;get_Blog();
<a name="l3850"><span class="linenum">3850</span></a>          if( <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('comment_Blog')" href="../../../_variables/comment_Blog.html">$comment_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'comment_quick_moderation' ) != 'never' )
<a name="l3851"><span class="linenum">3851</span></a>          { // quick moderation is permitted, set comment secret
<a name="l3852"><span class="linenum">3852</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'secret', <a class="function" onClick="logFunction('generate_random_key')" href="../../../_functions/generate_random_key.html" onMouseOver="funcPopup(event,'generate_random_key')">generate_random_key</a>() );
<a name="l3853"><span class="linenum">3853</span></a>          }
<a name="l3854"><span class="linenum">3854</span></a>  
<a name="l3855"><span class="linenum">3855</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_last_touched_date')" href="../../../_functions/set_last_touched_date.html" onMouseOver="funcPopup(event,'set_last_touched_date')">set_last_touched_date</a>();
<a name="l3856"><span class="linenum">3856</span></a>  
<a name="l3857"><span class="linenum">3857</span></a>          <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges.html">dbchanges</a>;
<a name="l3858"><span class="linenum">3858</span></a>  
<a name="l3859"><span class="linenum">3859</span></a>          if( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = parent::<a class="function" onClick="logFunction('dbinsert')" href="../../../_functions/dbinsert.html" onMouseOver="funcPopup(event,'dbinsert')">dbinsert</a>() )
<a name="l3860"><span class="linenum">3860</span></a>          {
<a name="l3861"><span class="linenum">3861</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_published')" href="../../../_functions/is_published.html" onMouseOver="funcPopup(event,'is_published')">is_published</a>() )
<a name="l3862"><span class="linenum">3862</span></a>              { // Update last touched date of item if comment is created in published status
<a name="l3863"><span class="linenum">3863</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>();
<a name="l3864"><span class="linenum">3864</span></a>              }
<a name="l3865"><span class="linenum">3865</span></a>              <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterCommentInsert', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Comment' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>, 'dbchanges' =&gt; <a class="var it1660" onMouseOver="hilite(1660)" onMouseOut="lolite()" onClick="logVariable('dbchanges')" href="../../../_variables/dbchanges.html">$dbchanges</a> ) );
<a name="l3866"><span class="linenum">3866</span></a>          }
<a name="l3867"><span class="linenum">3867</span></a>  
<a name="l3868"><span class="linenum">3868</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3869"><span class="linenum">3869</span></a>      }
<a name="l3870"><span class="linenum">3870</span></a>  
<a name="l3871"><span class="linenum">3871</span></a>  
<a name="l3872"><span class="linenum">3872</span></a>      <span class="comment">/**</span>
<a name="l3873"><span class="linenum">3873</span></a>  <span class="comment">     * Trigger event AfterCommentDelete after calling parent method.</span>
<a name="l3874"><span class="linenum">3874</span></a>  <span class="comment">     *</span>
<a name="l3875"><span class="linenum">3875</span></a>  <span class="comment">     * @param boolean set true to force permanent delete, leave false otherwise</span>
<a name="l3876"><span class="linenum">3876</span></a>  <span class="comment">     * @param boolean TRUE to use transaction</span>
<a name="l3877"><span class="linenum">3877</span></a>  <span class="comment">     * @return boolean true on success</span>
<a name="l3878"><span class="linenum">3878</span></a>  <span class="comment">     */</span>
<a name="l3879"><span class="linenum">3879</span></a>  	function <a class="function" onClick="logFunction('dbdelete')" href="../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>( <a class="var it7083" onMouseOver="hilite(7083)" onMouseOut="lolite()" onClick="logVariable('force_permanent_delete')" href="../../../_variables/force_permanent_delete.html">$force_permanent_delete</a> = false, <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> = true )
<a name="l3880"><span class="linenum">3880</span></a>      {
<a name="l3881"><span class="linenum">3881</span></a>          global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>, <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l3882"><span class="linenum">3882</span></a>  
<a name="l3883"><span class="linenum">3883</span></a>          if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l3884"><span class="linenum">3884</span></a>          {
<a name="l3885"><span class="linenum">3885</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('begin')" href="../../../_functions/begin.html" onMouseOver="funcPopup(event,'begin')">begin</a>();
<a name="l3886"><span class="linenum">3886</span></a>          }
<a name="l3887"><span class="linenum">3887</span></a>  
<a name="l3888"><span class="linenum">3888</span></a>          <a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('was_published')" href="../../../_variables/was_published.html">$was_published</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_published')" href="../../../_functions/is_published.html" onMouseOver="funcPopup(event,'is_published')">is_published</a>();
<a name="l3889"><span class="linenum">3889</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> != 'trash' )
<a name="l3890"><span class="linenum">3890</span></a>          { // The comment was not recycled yet
<a name="l3891"><span class="linenum">3891</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_replies')" href="../../../_functions/has_replies.html" onMouseOver="funcPopup(event,'has_replies')">has_replies</a>() )
<a name="l3892"><span class="linenum">3892</span></a>              { // Move the replies to the one level up
<a name="l3893"><span class="linenum">3893</span></a>                  <a class="var it7084" onMouseOver="hilite(7084)" onMouseOut="lolite()" onClick="logVariable('new_parent_ID')" href="../../../_variables/new_parent_ID.html">$new_parent_ID</a> = !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('in_reply_to_cmt_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/in_reply_to_cmt_ID.html">in_reply_to_cmt_ID</a> ) ? <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('in_reply_to_cmt_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/in_reply_to_cmt_ID.html">in_reply_to_cmt_ID</a> ) : 'NULL';
<a name="l3894"><span class="linenum">3894</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_comments
<a name="l3895"><span class="linenum">3895</span></a>                      SET comment_in_reply_to_cmt_ID = '.<a class="var it7084" onMouseOver="hilite(7084)" onMouseOut="lolite()" onClick="logVariable('new_parent_ID')" href="../../../_variables/new_parent_ID.html">$new_parent_ID</a>.'
<a name="l3896"><span class="linenum">3896</span></a>                    WHERE comment_in_reply_to_cmt_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l3897"><span class="linenum">3897</span></a>              }
<a name="l3898"><span class="linenum">3898</span></a>          }
<a name="l3899"><span class="linenum">3899</span></a>  
<a name="l3900"><span class="linenum">3900</span></a>          if( <a class="var it7083" onMouseOver="hilite(7083)" onMouseOut="lolite()" onClick="logVariable('force_permanent_delete')" href="../../../_variables/force_permanent_delete.html">$force_permanent_delete</a> || ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a> == 'trash' ) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l3901"><span class="linenum">3901</span></a>          {
<a name="l3902"><span class="linenum">3902</span></a>  <span class="comment">            // remember ID, because parent method resets it to 0</span>
<a name="l3903"><span class="linenum">3903</span></a>              <a class="var it1677" onMouseOver="hilite(1677)" onMouseOut="lolite()" onClick="logVariable('old_ID')" href="../../../_variables/old_ID.html">$old_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l3904"><span class="linenum">3904</span></a>  
<a name="l3905"><span class="linenum">3905</span></a>              if( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = parent::<a class="function" onClick="logFunction('dbdelete')" href="../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>() )
<a name="l3906"><span class="linenum">3906</span></a>              {
<a name="l3907"><span class="linenum">3907</span></a>  <span class="comment">                // re-set the ID for the Plugin event</span>
<a name="l3908"><span class="linenum">3908</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> = <a class="var it1677" onMouseOver="hilite(1677)" onMouseOut="lolite()" onClick="logVariable('old_ID')" href="../../../_variables/old_ID.html">$old_ID</a>;
<a name="l3909"><span class="linenum">3909</span></a>  
<a name="l3910"><span class="linenum">3910</span></a>                  <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_event')" href="../../../_functions/trigger_event.html" onMouseOver="funcPopup(event,'trigger_event')">trigger_event</a>( 'AfterCommentDelete', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array( 'Comment' =&gt; &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) );
<a name="l3911"><span class="linenum">3911</span></a>  
<a name="l3912"><span class="linenum">3912</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> = 0;
<a name="l3913"><span class="linenum">3913</span></a>              }
<a name="l3914"><span class="linenum">3914</span></a>          }
<a name="l3915"><span class="linenum">3915</span></a>          else
<a name="l3916"><span class="linenum">3916</span></a>          { // don't delete, just move to the trash:
<a name="l3917"><span class="linenum">3917</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'status', 'trash' );
<a name="l3918"><span class="linenum">3918</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l3919"><span class="linenum">3919</span></a>          }
<a name="l3920"><span class="linenum">3920</span></a>  
<a name="l3921"><span class="linenum">3921</span></a>          if( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> )
<a name="l3922"><span class="linenum">3922</span></a>          {
<a name="l3923"><span class="linenum">3923</span></a>              if( <a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('was_published')" href="../../../_variables/was_published.html">$was_published</a> )
<a name="l3924"><span class="linenum">3924</span></a>              { // Update last touched date of item if a published comment was deleted
<a name="l3925"><span class="linenum">3925</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>();
<a name="l3926"><span class="linenum">3926</span></a>              }
<a name="l3927"><span class="linenum">3927</span></a>              if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l3928"><span class="linenum">3928</span></a>              {
<a name="l3929"><span class="linenum">3929</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('commit')" href="../../../_functions/commit.html" onMouseOver="funcPopup(event,'commit')">commit</a>();
<a name="l3930"><span class="linenum">3930</span></a>              }
<a name="l3931"><span class="linenum">3931</span></a>          }
<a name="l3932"><span class="linenum">3932</span></a>          else
<a name="l3933"><span class="linenum">3933</span></a>          {
<a name="l3934"><span class="linenum">3934</span></a>              if( <a class="var it1750" onMouseOver="hilite(1750)" onMouseOut="lolite()" onClick="logVariable('use_transaction')" href="../../../_variables/use_transaction.html">$use_transaction</a> )
<a name="l3935"><span class="linenum">3935</span></a>              {
<a name="l3936"><span class="linenum">3936</span></a>                  <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('rollback')" href="../../../_functions/rollback.html" onMouseOver="funcPopup(event,'rollback')">rollback</a>();
<a name="l3937"><span class="linenum">3937</span></a>              }
<a name="l3938"><span class="linenum">3938</span></a>          }
<a name="l3939"><span class="linenum">3939</span></a>  
<a name="l3940"><span class="linenum">3940</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l3941"><span class="linenum">3941</span></a>      }
<a name="l3942"><span class="linenum">3942</span></a>  
<a name="l3943"><span class="linenum">3943</span></a>  
<a name="l3944"><span class="linenum">3944</span></a>      <span class="comment">/**</span>
<a name="l3945"><span class="linenum">3945</span></a>  <span class="comment">     * Displays link for replying to the Comment if blog's setting allows this action</span>
<a name="l3946"><span class="linenum">3946</span></a>  <span class="comment">     *</span>
<a name="l3947"><span class="linenum">3947</span></a>  <span class="comment">     * @param string to display before link</span>
<a name="l3948"><span class="linenum">3948</span></a>  <span class="comment">     * @param string to display after link</span>
<a name="l3949"><span class="linenum">3949</span></a>  <span class="comment">     * @param string link text</span>
<a name="l3950"><span class="linenum">3950</span></a>  <span class="comment">     * @param string link title</span>
<a name="l3951"><span class="linenum">3951</span></a>  <span class="comment">     * @param string class name</span>
<a name="l3952"><span class="linenum">3952</span></a>  <span class="comment">     */</span>
<a name="l3953"><span class="linenum">3953</span></a>  	function <a class="function" onClick="logFunction('reply_link')" href="../../../_functions/reply_link.html" onMouseOver="funcPopup(event,'reply_link')">reply_link</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = ' ', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = ' ', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '' )
<a name="l3954"><span class="linenum">3954</span></a>      {
<a name="l3955"><span class="linenum">3955</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>( false ) )
<a name="l3956"><span class="linenum">3956</span></a>          {
<a name="l3957"><span class="linenum">3957</span></a>              return false;
<a name="l3958"><span class="linenum">3958</span></a>          }
<a name="l3959"><span class="linenum">3959</span></a>  
<a name="l3960"><span class="linenum">3960</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l3961"><span class="linenum">3961</span></a>          {    // Happens in Preview
<a name="l3962"><span class="linenum">3962</span></a>              return false;
<a name="l3963"><span class="linenum">3963</span></a>          }
<a name="l3964"><span class="linenum">3964</span></a>  
<a name="l3965"><span class="linenum">3965</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l3966"><span class="linenum">3966</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l3967"><span class="linenum">3967</span></a>  
<a name="l3968"><span class="linenum">3968</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;Blog-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'threaded_comments' ) )
<a name="l3969"><span class="linenum">3969</span></a>          {    // A blog's setting is OFF for replying to the comment
<a name="l3970"><span class="linenum">3970</span></a>              return false;
<a name="l3971"><span class="linenum">3971</span></a>          }
<a name="l3972"><span class="linenum">3972</span></a>  
<a name="l3973"><span class="linenum">3973</span></a>          if( !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;<a class="function" onClick="logFunction('can_comment')" href="../../../_functions/can_comment.html" onMouseOver="funcPopup(event,'can_comment')">can_comment</a>() )
<a name="l3974"><span class="linenum">3974</span></a>          {    // The comments are disabled
<a name="l3975"><span class="linenum">3975</span></a>              return false;
<a name="l3976"><span class="linenum">3976</span></a>          }
<a name="l3977"><span class="linenum">3977</span></a>  
<a name="l3978"><span class="linenum">3978</span></a>  <span class="comment">        // ID of a replying comment</span>
<a name="l3979"><span class="linenum">3979</span></a>          <a class="var it2304" onMouseOver="hilite(2304)" onMouseOut="lolite()" onClick="logVariable('comment_reply_ID')" href="../../../_variables/comment_reply_ID.html">$comment_reply_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'reply_ID', 'integer', 0 );
<a name="l3980"><span class="linenum">3980</span></a>  
<a name="l3981"><span class="linenum">3981</span></a>          if( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> == '#' )
<a name="l3982"><span class="linenum">3982</span></a>          {    // Use default text
<a name="l3983"><span class="linenum">3983</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == <a class="var it2304" onMouseOver="hilite(2304)" onMouseOut="lolite()" onClick="logVariable('comment_reply_ID')" href="../../../_variables/comment_reply_ID.html">$comment_reply_ID</a> ? <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You are currently replying to this comment') : <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Reply to this comment');
<a name="l3984"><span class="linenum">3984</span></a>          }
<a name="l3985"><span class="linenum">3985</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' )
<a name="l3986"><span class="linenum">3986</span></a>          {    // Use default title
<a name="l3987"><span class="linenum">3987</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Reply to this comment');
<a name="l3988"><span class="linenum">3988</span></a>          }
<a name="l3989"><span class="linenum">3989</span></a>  
<a name="l3990"><span class="linenum">3990</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' comment_reply';
<a name="l3991"><span class="linenum">3991</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == <a class="var it2304" onMouseOver="hilite(2304)" onMouseOut="lolite()" onClick="logVariable('comment_reply_ID')" href="../../../_variables/comment_reply_ID.html">$comment_reply_ID</a> )
<a name="l3992"><span class="linenum">3992</span></a>          {    // This comment is using for replying now
<a name="l3993"><span class="linenum">3993</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' active';
<a name="l3994"><span class="linenum">3994</span></a>          }
<a name="l3995"><span class="linenum">3995</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = ' class=&quot;'.<a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ).'&quot;';
<a name="l3996"><span class="linenum">3996</span></a>  
<a name="l3997"><span class="linenum">3997</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>(), 'reply_ID='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;redir=no' ).'#form_p'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Item')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Item.html">Item</a>-&gt;ID;
<a name="l3998"><span class="linenum">3998</span></a>  
<a name="l3999"><span class="linenum">3999</span></a>          echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>;
<a name="l4000"><span class="linenum">4000</span></a>  
<a name="l4001"><span class="linenum">4001</span></a>  <span class="comment">        // Display a link</span>
<a name="l4002"><span class="linenum">4002</span></a>          echo '&lt;a href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.' rel=&quot;'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&quot;&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a>.'&lt;/a&gt;';
<a name="l4003"><span class="linenum">4003</span></a>  
<a name="l4004"><span class="linenum">4004</span></a>          echo <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l4005"><span class="linenum">4005</span></a>  
<a name="l4006"><span class="linenum">4006</span></a>          return true;
<a name="l4007"><span class="linenum">4007</span></a>      }
<a name="l4008"><span class="linenum">4008</span></a>  
<a name="l4009"><span class="linenum">4009</span></a>  
<a name="l4010"><span class="linenum">4010</span></a>      <span class="comment">/**</span>
<a name="l4011"><span class="linenum">4011</span></a>  <span class="comment">     * Check if comment has the replies</span>
<a name="l4012"><span class="linenum">4012</span></a>  <span class="comment">     */</span>
<a name="l4013"><span class="linenum">4013</span></a>  	function <a class="function" onClick="logFunction('has_replies')" href="../../../_functions/has_replies.html" onMouseOver="funcPopup(event,'has_replies')">has_replies</a>()
<a name="l4014"><span class="linenum">4014</span></a>      {
<a name="l4015"><span class="linenum">4015</span></a>          global <a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('cache_comments_has_replies')" href="../../../_variables/cache_comments_has_replies.html">$cache_comments_has_replies</a>;
<a name="l4016"><span class="linenum">4016</span></a>  
<a name="l4017"><span class="linenum">4017</span></a>          if( ! isset( <a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('cache_comments_has_replies')" href="../../../_variables/cache_comments_has_replies.html">$cache_comments_has_replies</a> ) )
<a name="l4018"><span class="linenum">4018</span></a>          { // Init an array to cache
<a name="l4019"><span class="linenum">4019</span></a>              <a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('cache_comments_has_replies')" href="../../../_variables/cache_comments_has_replies.html">$cache_comments_has_replies</a> = array();
<a name="l4020"><span class="linenum">4020</span></a>          }
<a name="l4021"><span class="linenum">4021</span></a>  
<a name="l4022"><span class="linenum">4022</span></a>          if( ! isset( <a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('cache_comments_has_replies')" href="../../../_variables/cache_comments_has_replies.html">$cache_comments_has_replies</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a> ] ) )
<a name="l4023"><span class="linenum">4023</span></a>          { // Get all comments that have the replies from DB (first time)
<a name="l4024"><span class="linenum">4024</span></a>              global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l4025"><span class="linenum">4025</span></a>  
<a name="l4026"><span class="linenum">4026</span></a>  <span class="comment">            // Cache a result</span>
<a name="l4027"><span class="linenum">4027</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l4028"><span class="linenum">4028</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'DISTINCT ( comment_in_reply_to_cmt_ID ), comment_ID' );
<a name="l4029"><span class="linenum">4029</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_comments' );
<a name="l4030"><span class="linenum">4030</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'comment_in_reply_to_cmt_ID IS NOT NULL' );
<a name="l4031"><span class="linenum">4031</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'comment_item_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a> );
<a name="l4032"><span class="linenum">4032</span></a>  
<a name="l4033"><span class="linenum">4033</span></a>  <span class="comment">            // Init an array to cache a result from current item</span>
<a name="l4034"><span class="linenum">4034</span></a>              <a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('cache_comments_has_replies')" href="../../../_variables/cache_comments_has_replies.html">$cache_comments_has_replies</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a> ] = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../../../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l4035"><span class="linenum">4035</span></a>          }
<a name="l4036"><span class="linenum">4036</span></a>  
<a name="l4037"><span class="linenum">4037</span></a>  <span class="comment">        // Get a result from cache</span>
<a name="l4038"><span class="linenum">4038</span></a>          return isset( <a class="var it7085" onMouseOver="hilite(7085)" onMouseOut="lolite()" onClick="logVariable('cache_comments_has_replies')" href="../../../_variables/cache_comments_has_replies.html">$cache_comments_has_replies</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('item_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/item_ID.html">item_ID</a> ][ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ] );
<a name="l4039"><span class="linenum">4039</span></a>      }
<a name="l4040"><span class="linenum">4040</span></a>  
<a name="l4041"><span class="linenum">4041</span></a>  
<a name="l4042"><span class="linenum">4042</span></a>      <span class="comment">/**</span>
<a name="l4043"><span class="linenum">4043</span></a>  <span class="comment">     * Set field last_touched_ts</span>
<a name="l4044"><span class="linenum">4044</span></a>  <span class="comment">     */</span>
<a name="l4045"><span class="linenum">4045</span></a>  	function <a class="function" onClick="logFunction('set_last_touched_date')" href="../../../_functions/set_last_touched_date.html" onMouseOver="funcPopup(event,'set_last_touched_date')">set_last_touched_date</a>()
<a name="l4046"><span class="linenum">4046</span></a>      {
<a name="l4047"><span class="linenum">4047</span></a>          global <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>;
<a name="l4048"><span class="linenum">4048</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'last_touched_ts', 'date', <a class="function" onClick="logFunction('date2mysql')" href="../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> ) );
<a name="l4049"><span class="linenum">4049</span></a>      }
<a name="l4050"><span class="linenum">4050</span></a>  
<a name="l4051"><span class="linenum">4051</span></a>  
<a name="l4052"><span class="linenum">4052</span></a>      <span class="comment">/**</span>
<a name="l4053"><span class="linenum">4053</span></a>  <span class="comment">     * Update field last_touched_ts</span>
<a name="l4054"><span class="linenum">4054</span></a>  <span class="comment">     *</span>
<a name="l4055"><span class="linenum">4055</span></a>  <span class="comment">     * @param boolean update comment's post last touched ts as well or not</span>
<a name="l4056"><span class="linenum">4056</span></a>  <span class="comment">     */</span>
<a name="l4057"><span class="linenum">4057</span></a>  	function <a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>( <a class="var it1751" onMouseOver="hilite(1751)" onMouseOut="lolite()" onClick="logVariable('update_item_date')" href="../../../_variables/update_item_date.html">$update_item_date</a> = true )
<a name="l4058"><span class="linenum">4058</span></a>      {
<a name="l4059"><span class="linenum">4059</span></a>          global <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l4060"><span class="linenum">4060</span></a>  
<a name="l4061"><span class="linenum">4061</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>() )
<a name="l4062"><span class="linenum">4062</span></a>          { // Don't touch Item when this Comment is meta
<a name="l4063"><span class="linenum">4063</span></a>              return;
<a name="l4064"><span class="linenum">4064</span></a>          }
<a name="l4065"><span class="linenum">4065</span></a>  
<a name="l4066"><span class="linenum">4066</span></a>          <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Item')" href="../../../_functions/get_item.html" onMouseOver="funcPopup(event,'get_item')">get_Item</a>();
<a name="l4067"><span class="linenum">4067</span></a>  
<a name="l4068"><span class="linenum">4068</span></a>          if( empty( <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a> ) )
<a name="l4069"><span class="linenum">4069</span></a>          { // Don't execute the following code because this comment is broken
<a name="l4070"><span class="linenum">4070</span></a>              return;
<a name="l4071"><span class="linenum">4071</span></a>          }
<a name="l4072"><span class="linenum">4072</span></a>  
<a name="l4073"><span class="linenum">4073</span></a>          <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> = <a class="function" onClick="logFunction('date2mysql')" href="../../../_functions/date2mysql.html" onMouseOver="funcPopup(event,'date2mysql')">date2mysql</a>( <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> );
<a name="l4074"><span class="linenum">4074</span></a>  
<a name="l4075"><span class="linenum">4075</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> &amp;&amp; ( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('last_touched_ts')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/last_touched_ts.html">last_touched_ts</a> !== <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> ) )
<a name="l4076"><span class="linenum">4076</span></a>          { // If the comment was not deleted then update last touched date
<a name="l4077"><span class="linenum">4077</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'last_touched_ts', 'date', <a class="var it1360" onMouseOver="hilite(1360)" onMouseOut="lolite()" onClick="logVariable('timestamp')" href="../../../_variables/timestamp.html">$timestamp</a> );
<a name="l4078"><span class="linenum">4078</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l4079"><span class="linenum">4079</span></a>          }
<a name="l4080"><span class="linenum">4080</span></a>  
<a name="l4081"><span class="linenum">4081</span></a>          if( <a class="var it1751" onMouseOver="hilite(1751)" onMouseOut="lolite()" onClick="logVariable('update_item_date')" href="../../../_variables/update_item_date.html">$update_item_date</a> )
<a name="l4082"><span class="linenum">4082</span></a>          { // Update last touched data of the Item
<a name="l4083"><span class="linenum">4083</span></a>              <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('comment_Item')" href="../../../_variables/comment_Item.html">$comment_Item</a>-&gt;<a class="function" onClick="logFunction('update_last_touched_date')" href="../../../_functions/update_last_touched_date.html" onMouseOver="funcPopup(event,'update_last_touched_date')">update_last_touched_date</a>();
<a name="l4084"><span class="linenum">4084</span></a>          }
<a name="l4085"><span class="linenum">4085</span></a>      }
<a name="l4086"><span class="linenum">4086</span></a>  
<a name="l4087"><span class="linenum">4087</span></a>  
<a name="l4088"><span class="linenum">4088</span></a>      <span class="comment">/**</span>
<a name="l4089"><span class="linenum">4089</span></a>  <span class="comment">     * Get a permalink link to the Item of this Comment</span>
<a name="l4090"><span class="linenum">4090</span></a>  <span class="comment">     *</span>
<a name="l4091"><span class="linenum">4091</span></a>  <span class="comment">     * @param array Params</span>
<a name="l4092"><span class="linenum">4092</span></a>  <span class="comment">     * @return string Link to Item with anchor to Comment</span>
<a name="l4093"><span class="linenum">4093</span></a>  <span class="comment">     */</span>
<a name="l4094"><span class="linenum">4094</span></a>  	function <a class="function" onClick="logFunction('get_permanent_item_link')" href="../../../_functions/get_permanent_item_link.html" onMouseOver="funcPopup(event,'get_permanent_item_link')">get_permanent_item_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l4095"><span class="linenum">4095</span></a>      {
<a name="l4096"><span class="linenum">4096</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l4097"><span class="linenum">4097</span></a>                  'text'            =&gt; '#item#',
<a name="l4098"><span class="linenum">4098</span></a>                  'title'           =&gt; '#',
<a name="l4099"><span class="linenum">4099</span></a>                  'class'           =&gt; '',
<a name="l4100"><span class="linenum">4100</span></a>                  'nofollow'        =&gt; false,
<a name="l4101"><span class="linenum">4101</span></a>                  'restrict_status' =&gt; false,
<a name="l4102"><span class="linenum">4102</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l4103"><span class="linenum">4103</span></a>  
<a name="l4104"><span class="linenum">4104</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_link')" href="../../../_functions/get_permanent_link.html" onMouseOver="funcPopup(event,'get_permanent_link')">get_permanent_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['nofollow'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['restrict_status'] );
<a name="l4105"><span class="linenum">4105</span></a>      }
<a name="l4106"><span class="linenum">4106</span></a>  
<a name="l4107"><span class="linenum">4107</span></a>  
<a name="l4108"><span class="linenum">4108</span></a>      <span class="comment">/**</span>
<a name="l4109"><span class="linenum">4109</span></a>  <span class="comment">     * Check if this comment is meta</span>
<a name="l4110"><span class="linenum">4110</span></a>  <span class="comment">     *</span>
<a name="l4111"><span class="linenum">4111</span></a>  <span class="comment">     * @return boolean TRUE if this comment is meta</span>
<a name="l4112"><span class="linenum">4112</span></a>  <span class="comment">     */</span>
<a name="l4113"><span class="linenum">4113</span></a>  	function <a class="function" onClick="logFunction('is_meta')" href="../../../_functions/is_meta.html" onMouseOver="funcPopup(event,'is_meta')">is_meta</a>()
<a name="l4114"><span class="linenum">4114</span></a>      {
<a name="l4115"><span class="linenum">4115</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/type.html">type</a> == 'meta';
<a name="l4116"><span class="linenum">4116</span></a>      }
<a name="l4117"><span class="linenum">4117</span></a>  
<a name="l4118"><span class="linenum">4118</span></a>  
<a name="l4119"><span class="linenum">4119</span></a>      <span class="comment">/**</span>
<a name="l4120"><span class="linenum">4120</span></a>  <span class="comment">     * Get all child comment IDs</span>
<a name="l4121"><span class="linenum">4121</span></a>  <span class="comment">     *</span>
<a name="l4122"><span class="linenum">4122</span></a>  <span class="comment">     * @param integer Parent comment ID</span>
<a name="l4123"><span class="linenum">4123</span></a>  <span class="comment">     * @return array Comment IDs</span>
<a name="l4124"><span class="linenum">4124</span></a>  <span class="comment">     */</span>
<a name="l4125"><span class="linenum">4125</span></a>  	function <a class="function" onClick="logFunction('get_child_comment_IDs')" href="../../../_functions/get_child_comment_ids.html" onMouseOver="funcPopup(event,'get_child_comment_ids')">get_child_comment_IDs</a>( <a class="var it7086" onMouseOver="hilite(7086)" onMouseOut="lolite()" onClick="logVariable('parent_comment_ID')" href="../../../_variables/parent_comment_ID.html">$parent_comment_ID</a> = NULL )
<a name="l4126"><span class="linenum">4126</span></a>      {
<a name="l4127"><span class="linenum">4127</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l4128"><span class="linenum">4128</span></a>  
<a name="l4129"><span class="linenum">4129</span></a>          if( <a class="var it7086" onMouseOver="hilite(7086)" onMouseOut="lolite()" onClick="logVariable('parent_comment_ID')" href="../../../_variables/parent_comment_ID.html">$parent_comment_ID</a> === NULL )
<a name="l4130"><span class="linenum">4130</span></a>          { // Use current comment ID as main parent ID
<a name="l4131"><span class="linenum">4131</span></a>              <a class="var it7086" onMouseOver="hilite(7086)" onMouseOut="lolite()" onClick="logVariable('parent_comment_ID')" href="../../../_variables/parent_comment_ID.html">$parent_comment_ID</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l4132"><span class="linenum">4132</span></a>          }
<a name="l4133"><span class="linenum">4133</span></a>  
<a name="l4134"><span class="linenum">4134</span></a>  <span class="comment">        // Get child comment of level 1</span>
<a name="l4135"><span class="linenum">4135</span></a>          <a class="var it4062" onMouseOver="hilite(4062)" onMouseOut="lolite()" onClick="logVariable('comments_SQL')" href="../../../_variables/comments_SQL.html">$comments_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l4136"><span class="linenum">4136</span></a>          <a class="var it4062" onMouseOver="hilite(4062)" onMouseOut="lolite()" onClick="logVariable('comments_SQL')" href="../../../_variables/comments_SQL.html">$comments_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'comment_ID' );
<a name="l4137"><span class="linenum">4137</span></a>          <a class="var it4062" onMouseOver="hilite(4062)" onMouseOut="lolite()" onClick="logVariable('comments_SQL')" href="../../../_variables/comments_SQL.html">$comments_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_comments' );
<a name="l4138"><span class="linenum">4138</span></a>          <a class="var it4062" onMouseOver="hilite(4062)" onMouseOut="lolite()" onClick="logVariable('comments_SQL')" href="../../../_variables/comments_SQL.html">$comments_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'comment_in_reply_to_cmt_ID = '.<a class="var it7086" onMouseOver="hilite(7086)" onMouseOut="lolite()" onClick="logVariable('parent_comment_ID')" href="../../../_variables/parent_comment_ID.html">$parent_comment_ID</a> );
<a name="l4139"><span class="linenum">4139</span></a>          <a class="var it7087" onMouseOver="hilite(7087)" onMouseOut="lolite()" onClick="logVariable('parent_comment_IDs')" href="../../../_variables/parent_comment_IDs.html">$parent_comment_IDs</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( <a class="var it4062" onMouseOver="hilite(4062)" onMouseOut="lolite()" onClick="logVariable('comments_SQL')" href="../../../_variables/comments_SQL.html">$comments_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l4140"><span class="linenum">4140</span></a>  
<a name="l4141"><span class="linenum">4141</span></a>          <a class="var it7088" onMouseOver="hilite(7088)" onMouseOut="lolite()" onClick="logVariable('comment_IDs')" href="../../../_variables/comment_IDs.html">$comment_IDs</a> = array();
<a name="l4142"><span class="linenum">4142</span></a>          foreach( <a class="var it7087" onMouseOver="hilite(7087)" onMouseOut="lolite()" onClick="logVariable('parent_comment_IDs')" href="../../../_variables/parent_comment_IDs.html">$parent_comment_IDs</a> as <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../_variables/comment_ID.html">$comment_ID</a> )
<a name="l4143"><span class="linenum">4143</span></a>          { // Get all children recursively
<a name="l4144"><span class="linenum">4144</span></a>              <a class="var it7088" onMouseOver="hilite(7088)" onMouseOut="lolite()" onClick="logVariable('comment_IDs')" href="../../../_variables/comment_IDs.html">$comment_IDs</a>[] = <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../_variables/comment_ID.html">$comment_ID</a>;
<a name="l4145"><span class="linenum">4145</span></a>              <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('child_comment_IDs')" href="../../../_variables/child_comment_IDs.html">$child_comment_IDs</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_child_comment_IDs')" href="../../../_functions/get_child_comment_ids.html" onMouseOver="funcPopup(event,'get_child_comment_ids')">get_child_comment_IDs</a>( <a class="var it1119" onMouseOver="hilite(1119)" onMouseOut="lolite()" onClick="logVariable('comment_ID')" href="../../../_variables/comment_ID.html">$comment_ID</a> );
<a name="l4146"><span class="linenum">4146</span></a>              foreach( <a class="var it7082" onMouseOver="hilite(7082)" onMouseOut="lolite()" onClick="logVariable('child_comment_IDs')" href="../../../_variables/child_comment_IDs.html">$child_comment_IDs</a> as <a class="var it7089" onMouseOver="hilite(7089)" onMouseOut="lolite()" onClick="logVariable('child_comment_ID')" href="../../../_variables/child_comment_ID.html">$child_comment_ID</a> )
<a name="l4147"><span class="linenum">4147</span></a>              {
<a name="l4148"><span class="linenum">4148</span></a>                  <a class="var it7088" onMouseOver="hilite(7088)" onMouseOut="lolite()" onClick="logVariable('comment_IDs')" href="../../../_variables/comment_IDs.html">$comment_IDs</a>[] = <a class="var it7089" onMouseOver="hilite(7089)" onMouseOut="lolite()" onClick="logVariable('child_comment_ID')" href="../../../_variables/child_comment_ID.html">$child_comment_ID</a>;
<a name="l4149"><span class="linenum">4149</span></a>              }
<a name="l4150"><span class="linenum">4150</span></a>          }
<a name="l4151"><span class="linenum">4151</span></a>  
<a name="l4152"><span class="linenum">4152</span></a>          return <a class="var it7088" onMouseOver="hilite(7088)" onMouseOut="lolite()" onClick="logVariable('comment_IDs')" href="../../../_variables/comment_IDs.html">$comment_IDs</a>;
<a name="l4153"><span class="linenum">4153</span></a>      }
<a name="l4154"><span class="linenum">4154</span></a>  }
<a name="l4155"><span class="linenum">4155</span></a>  
<a name="l4156"><span class="linenum">4156</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'load_blocked_emails': ['load_blocked_emails', 'Load the blocked emails from DB in cache ', [['inc/tools/model','_email.funcs.php',306]], 2],
'ban_url': ['ban_url', '', [['inc/comments/model','_comment_js.funcs.php',367]], 2],
'permanent_url': ['permanent_url', 'Template function: display permalink to this comment ', [['inc/comments/model','_comment.class.php',2400],['inc/items/model','_itemlight.class.php',1052]], 9],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['inc/items/model','_itemlist.class.php',249],['inc/items/model','_itemlistlight.class.php',742],['inc/comments/model','_commentlist.class.php',507],['inc/users/model','_userlist.class.php',511],['inc/_core/ui/results','_results.class.php',468],['inc/_core/model/db','_db.class.php',749]], 1144],
'get_assoc': ['get_assoc', 'Function to get the second column from the cached result indexed by the first column ', [['inc/_core/model/db','_db.class.php',1057]], 60],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'get_visibility_statuses': ['get_visibility_statuses', 'Get available post statuses ', [['inc/collections/model','_blog.funcs.php',953]], 87],
'author2': ['author2', 'Template function: display author of comment ', [['inc/comments/model','_comment.class.php',945]], 11],
'get_name': ['get_name', 'Get name of widget ', [['inc/widgets/widgets','_coll_tag_cloud.widget.php',63],['plugins/twitter_plugin/twitteroauth','oauth.php',102],['plugins/twitter_plugin/twitteroauth','oauth.php',128],['plugins/twitter_plugin/twitteroauth','oauth.php',155],['inc/widgets/widgets','_coll_page_list.widget.php',77],['inc/items/model','_itemstatus.class.php',77],['inc/widgets/widgets','_coll_logo.widget.php',48],['inc/widgets/widgets','_mobile_skin_switcher.widget.php',48],['inc/widgets/widgets','_online_users.widget.php',48],['inc/regional/model','_country.class.php',119],['inc/widgets/widgets','_user_login.widget.php',49],['inc/skins/model','_skin.class.php',137],['inc/widgets/widgets','_linkblog.widget.php',76],['inc/widgets/widgets','_coll_related_post_list.widget.php',76],['inc/widgets/widgets','_coll_item_list.widget.php',247],['inc/items/model','_itemtype.class.php',379],['inc/widgets/widgets','_user_links.widget.php',48],['inc/widgets/widgets','_coll_featured_intro.widget.php',128],['inc/regional/model','_subregion.class.php',131],['inc/widgets/widgets','_coll_search_form.widget.php',48],['inc/widgets/widgets','_coll_longdesc.widget.php',48],['inc/widgets/widgets','_content_hierarchy.widget.php',93],['inc/widgets/widgets','_coll_tagline.widget.php',48],['inc/widgets/widgets','_coll_current_filters.widget.php',49],['inc/widgets/widgets','_coll_category_list.widget.php',49],['inc/widgets/widgets','_org_members.widget.php',48],['inc/collections/model','_blog.class.php',2802],['inc/widgets/widgets','_coll_comment_list.widget.php',102],['inc/widgets/widgets','_member_count.widget.php',48],['inc/users/model','_userfield.class.php',279],['inc/widgets/widgets','_coll_link_list.widget.php',76],['inc/widgets/widgets','_menu_link.widget.php',84],['inc/widgets/widgets','_free_html.widget.php',48],['inc/widgets/widgets','_breadcrumb_path.widget.php',76],['inc/regional/model','_city.class.php',121],['inc/widgets/widgets','_image.widget.php',48],['inc/users/model','_group.class.php',448],['inc/regional/model','_currency.class.php',120],['inc/widgets/widgets','_profile_menu_link.widget.php',48],['inc/widgets/widgets','_coll_media_index.widget.php',156],['inc/widgets/model','_widget.class.php',157],['inc/widgets/widgets','_colls_list_owner.widget.php',48],['inc/widgets/widgets','_user_tools.widget.php',225],['inc/widgets/widgets','_coll_common_links.widget.php',52],['inc/widgets/widgets','_msg_menu_link.widget.php',54],['inc/widgets/widgets','_user_avatars.widget.php',150],['inc/widgets/widgets','_coll_xml_feeds.widget.php',48],['inc/regional/model','_region.class.php',114],['inc/chapters/model','_chapter.class.php',618],['inc/antispam/model','_iprange.class.php',128],['inc/sessions/model','_goalcat.class.php',78],['inc/widgets/widgets','_coll_avatar.widget.php',49],['inc/widgets/widgets','_coll_post_list.widget.php',76],['inc/files/model','_file.class.php',574],['inc/sessions/model','_goal.class.php',195],['inc/widgets/widgets','_user_register.widget.php',49],['inc/widgets/widgets','_colls_list_public.widget.php',48],['inc/users/model','_userfieldgroup.class.php',97],['inc/users/model','_organization.class.php',88],['inc/widgets/widgets','_coll_title.widget.php',69]], 114],
'raise_link': ['raise_link', 'Display raise status link if it is available ', [['inc/comments/model','_comment.class.php',2194]], 1],
'status': ['status', 'Template function: display status of item ', [['inc/items/model','_item.class.php',4489],['inc/comments/model','_comment.class.php',3180]], 6],
'get_vote_summary': ['get_vote_summary', 'Get the vote summary, as a string. ', [['inc/comments/model','_comment.class.php',654]], 4],
'get_renderer_checkboxes': ['get_renderer_checkboxes', 'Get checkable list of renderers ', [['inc/items/model','_item.class.php',4413],['inc/plugins/model','_plugins.class.php',2027]], 16],
'generate_random_key': ['generate_random_key', 'Generate a valid key of size $length. ', [['inc/_core','_misc.funcs.php',4759]], 24],
'is_meta': ['is_meta', 'Check if this comment is meta ', [['inc/comments/model','_comment.class.php',4108]], 31],
'set_last_touched_date': ['set_last_touched_date', 'Set field last_touched_ts ', [['inc/comments/model','_comment.class.php',4042]], 2],
'remove_orphan_files': ['remove_orphan_files', 'Remove files with the given ids ', [['inc/files/model','_file.funcs.php',1844]], 2],
'get_class_db_config': ['get_class_db_config', 'Get this class db table config params ', [['inc/_core/model/dataobjects','_dataobject.class.php',104],['inc/users/model','_user.class.php',231],['inc/messaging/model','_message.class.php',87],['inc/messaging/model','_thread.class.php',147],['inc/sessions/model','_session.class.php',259],['inc/comments/model','_comment.class.php',250],['inc/links/model','_link.class.php',84],['inc/chapters/model','_chapter.class.php',120],['inc/files/model','_file.class.php',250],['inc/items/model','_itemlight.class.php',199]], 7],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'select': ['select', 'Set SELECT clause ', [['inc/_core/model/db','_sql.class.php',196],['inc/_core/ui/forms','_form.class.php',2189],['inc/_core/model/db','_db.class.php',454]], 475],
'list': ['list', '', [['rsc/js/bootstrap','typeahead.bundle.js',156]], 105],
'content': ['content', 'DEPRECATED ', [['inc/items/model','_item.class.php',1914],['inc/comments/model','_comment.class.php',2618]], 14],
'format_status': ['format_status', 'Display status of item in a formatted way, following a provided template ', [['inc/items/model','_item.class.php',4539],['inc/comments/model','_comment.class.php',3205]], 38],
'time': ['time', 'Builds a time input field. ', [['inc/_core/ui/forms','_form.class.php',1394],['inc/comments/model','_comment.class.php',2976]], 76],
'locale_timefmt': ['locale_timefmt', 'Returns the current locale\'s default time format ', [['inc/locales','_locale.funcs.php',404]], 17],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'rating': ['rating', 'Template tag:  display rating ', [['inc/comments/model','_comment.class.php',2999]], 7],
'mysql2date': ['mysql2date', 'Format a MYSQL date. ', [['inc/_core','_misc.funcs.php',1302]], 45],
'rating_input': ['rating_input', 'Rating input ', [['inc/comments/model','_comment.class.php',3022]], 10],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['inc/users/model','_user.funcs.php',38]], 274],
'compare_visibility_status': ['compare_visibility_status', 'Compare two visibility status in the point of public level ', [['inc/collections/model','_blog.funcs.php',1132]], 1],
'get_permanent_url': ['get_permanent_url', 'Generate permalink to this comment. ', [['inc/comments/model','_comment.class.php',2372],['inc/chapters/model','_chapter.class.php',379],['inc/items/model','_itemlight.class.php',376]], 155],
'form': ['form', 'Constructor ', [['inc/_core/ui/forms','_form.class.php',138]], 214],
'vote_helpful': ['vote_helpful', 'Display links to vote a comment as HELPFUL if user is logged ', [['inc/comments/model','_comment.class.php',1826]], 4],
'get_child_comment_ids': ['get_child_comment_ids', 'Get all child comment IDs ', [['inc/comments/model','_comment.class.php',4119]], 2],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5287],['inc/_core/model/dataobjects','_dataobject.class.php',386],['inc/users/model','_user.class.php',3249],['inc/skins/model','_skin.class.php',416],['inc/settings/model','_abstractsettings.class.php',575],['inc/items/model','_itemtype.class.php',433],['inc/files/model','_filetype.class.php',242],['inc/collections/model','_blog.class.php',2630],['inc/comments/model','_comment.class.php',3747],['inc/cron/model','_cronjob.class.php',188],['inc/slugs/model','_slug.class.php',265],['inc/users/model','_group.class.php',478],['inc/widgets/model','_widget.class.php',861],['inc/users/model','_groupsettings.class.php',159],['inc/chapters/model','_chapter.class.php',564],['inc/files/model','_file.class.php',1825]], 289],
'check_publish_status_changed': ['check_publish_status_changed', 'Check if comment public or limited public status was changed. Limited public status is like community or protected. ', [['inc/comments/model','_comment.class.php',3716]], 1],
'validate_renderer_list': ['validate_renderer_list', '', [['inc/plugins/model','_plugins.class.php',1909]], 10],
'trigger_karma_collect': ['trigger_karma_collect', 'Trigger a karma collecting event in order to get Karma percentage. ', [['inc/plugins/model','_plugins.class.php',1071]], 1],
'handle_qm_secret': ['handle_qm_secret', 'Handle quick moderation secret param: checks if comment secret should expire after first comment moderation, and delete the secret if required This should be called after every kind of commment moderation ', [['inc/comments/model','_comment.class.php',3684]], 7],
'add_ban_icons': ['add_ban_icons', 'Add a javascript ban action icon after each url in the given content ', [['inc/comments/model','_comment.funcs.php',398]], 1],
'author_url': ['author_url', 'Template function: display link to comment author\'s provided URL ', [['inc/comments/model','_comment.class.php',1216]], 3],
'get_view_link': ['get_view_link', 'Get Link to view the file (either with viewer of with browser, etc...) ', [['inc/files/model','_file.class.php',1921]], 16],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'utf8_strlen': ['utf8_strlen', 'utf8_strlen( ) ', [['inc/_ext','_portable_utf8.php',173]], 41],
'date2mysql': ['date2mysql', 'Convert timestamp to MySQL/ISO format. ', [['inc/_core','_misc.funcs.php',1226]], 63],
'get_type': ['get_type', 'Get comment type. ', [['inc/comments/model','_comment.funcs.php',1285],['inc/files/model','_file.class.php',726]], 9],
'lower_link': ['lower_link', 'Display lower status link if it is available ', [['inc/comments/model','_comment.class.php',2206]], 1],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'begin': ['begin', 'BEGIN A TRANSCATION ', [['inc/_core/model/db','_db.class.php',1537]], 114],
'get_preferred_name': ['get_preferred_name', 'Get preferred name of the user ', [['inc/users/model','_user.class.php',1345]], 13],
'is_admin_page': ['is_admin_page', 'Is the current page an admin/backoffice page? ', [['inc/_core','_misc.funcs.php',5028]], 118],
'deleteurl_link': ['deleteurl_link', 'Display delete icon for deleting author_url if user has proper rights ', [['inc/comments/model','_comment.class.php',1357]], 1],
'star_rating': ['star_rating', 'Display rating as 5 stars ', [['inc/_core','_template.funcs.php',1955]], 1],
'load_funcs': ['load_funcs', '', [['inc/_core','_misc.funcs.php',158]], 242],
'set_item': ['set_item', 'Set Item this comment relates to ', [['inc/comments/model','_comment.class.php',437]], 5],
'get_vote_spam_disabled': ['get_vote_spam_disabled', 'Get the vote spam type disabled, as array. ', [['inc/comments/model','_comment.class.php',553]], 1],
'set_author_user': ['set_author_user', 'Set author User of this comment ', [['inc/comments/model','_comment.class.php',451]], 2],
'utf8_strtolower': ['utf8_strtolower', 'utf8_strtolower( ) ', [['inc/_ext','_portable_utf8.php',1433]], 74],
'get_author_url_link': ['get_author_url_link', 'Get link to comment author\'s provided URL ', [['inc/comments/model','_comment.class.php',1170]], 3],
'get_author_name': ['get_author_name', 'Get the comment author\'s name. ', [['inc/comments/model','_comment.class.php',728]], 13],
'bytesreadable': ['bytesreadable', 'Converts bytes to readable bytes/kb/mb/gb, like "12.45mb" ', [['inc/files/model','_file.funcs.php',32]], 22],
'msgform_link': ['msgform_link', 'Template function: Provide link to message form for this Item\'s author. ', [['inc/items/model','_item.class.php',2387],['inc/users/model','_user.class.php',3661],['inc/comments/model','_comment.class.php',2310]], 7],
'get_single_url': ['get_single_url', 'Generate a single post link for the item ', [['inc/items/model','_itemlight.class.php',254]], 4],
'blocked_emails_display': ['blocked_emails_display', 'Display the blocked emails from cache array ', [['inc/tools/model','_email.funcs.php',460]], 2],
'get_deprecate_link': ['get_deprecate_link', 'Provide link to deprecate a post if user has edit rights ', [['inc/items/model','_item.class.php',4329],['inc/comments/model','_comment.class.php',1553]], 2],
'gen_blogurl': ['gen_blogurl', 'Generate blog URL. That is the URL of the main page/home page of the blog. This will nto necessarily be a folder. For example, it can end in index.php?blog=4 ', [['inc/collections/model','_blog.class.php',1128]], 94],
'get_author_email': ['get_author_email', 'Get the EMail of the comment\'s author. ', [['inc/comments/model','_comment.class.php',808],['inc/comments/model','_comment.funcs.php',1354]], 10],
'edit_comment': ['edit_comment', 'Edit comment ', [['inc/comments/model','_comment_js.funcs.php',218]], 3],
'send_mail_to_user': ['send_mail_to_user', 'Sends an email to User ', [['inc/_core','_misc.funcs.php',3584]], 14],
'get_title': ['get_title', 'Get title of comment, e.g. "Comment from: Foo Bar" ', [['inc/comments/model','_comment.class.php',2877],['skins_adm','_adminUI_general.class.php',314],['inc/widgets/widgets','_coll_xml_feeds.widget.php',109],['inc/items/model','_itemlight.class.php',1166]], 29],
'ts_': ['ts_', 'Translate and escape single quotes. ', [['inc/skins/model','_skin.class.php',1162],['inc/plugins','_plugin.class.php',2847],['inc/locales','_locale.funcs.php',233]], 236],
'get_delete_cascades': ['get_delete_cascades', 'Get delete cascade settings ', [['inc/email_campaigns/model','_emailcampaign.class.php',71],['inc/_core/model/dataobjects','_dataobject.class.php',152],['inc/users/model','_user.class.php',278],['inc/skins/model','_skin.class.php',95],['inc/messaging/model','_message.class.php',111],['inc/messaging/model','_thread.class.php',171],['inc/items/model','_itemtype.class.php',134],['inc/collections/model','_blog.class.php',190],['inc/comments/model','_comment.class.php',274],['inc/users/model','_userfield.class.php',74],['inc/links/model','_link.class.php',108],['inc/items/model','_itemtag.class.php',48],['inc/sessions/model','_goal.class.php',62],['inc/items/model','_itemlight.class.php',175]], 1],
'set_renderers': ['set_renderers', 'Set the renderers of the Item. ', [['inc/items/model','_item.class.php',4975],['inc/messaging/model','_message.class.php',723],['inc/comments/model','_comment.class.php',2947]], 12],
'locale_datefmt': ['locale_datefmt', 'Returns the current locale\'s default date format ', [['inc/locales','_locale.funcs.php',385]], 71],
'clear': ['clear', 'Empty the message list ', [['inc/_ext/swift/classes/Swift/Plugins','MessageLogger.php',50],['inc/_ext/swift/classes/Swift/Plugins/Reporters','HitReporter.php',54],['inc/_core/model','_messages.class.php',102],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',43],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',27],['inc/_core/model/dataobjects','_dataobjectcache.class.php',437],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',47],['inc/_core/model','_log.class.php',84],['inc/_core/model','_log.class.php',587],['inc/users/model','_usercache.class.php',376],['inc/files/model','_filerootcache.class.php',172],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',57],['inc/links/model','_linkcache.class.php',517],['inc/chapters/model','_chaptercache.class.php',81]], 99],
'get_url': ['get_url', 'Get an url to this item ', [['inc/items/model','_item.class.php',6507],['inc/skins/model','_skin.class.php',737],['inc/comments/model','_comment.funcs.php',1333],['inc/files/model','_file.class.php',651]], 38],
'get_author_name_anonymous': ['get_author_name_anonymous', 'Get the comment anonymous author\'s name with gender class. ', [['inc/comments/model','_comment.class.php',764]], 2],
'country_flag': ['country_flag', 'Template function: Display/Get country flag ', [['inc/regional/model','_regional.funcs.php',671]], 8],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'get_author': ['get_author', 'Get author of comment ', [['inc/comments/model','_comment.class.php',956],['inc/comments/model','_comment.funcs.php',1306]], 11],
'get_next_status': ['get_next_status', 'Get next status to publish/restrict to this item TODO: asimo>Refactor this with Comment->get_next_status() ', [['inc/items/model','_item.class.php',4047],['inc/comments/model','_comment.class.php',1908]], 12],
'get_author_url': ['get_author_url', 'Get the URL of the comment\'s author. ', [['inc/comments/model','_comment.class.php',826]], 4],
'renderer_checkboxes': ['renderer_checkboxes', 'Template function: display checkable list of renderers ', [['inc/items/model','_item.class.php',4432],['inc/comments/model','_comment.class.php',2852]], 7],
'get_highest_publish_status': ['get_highest_publish_status', 'Get the highest public status and action button label of a new post or comment in the given blog what the current User may create. We assume here that the User should be able to create a post/comment with at least the lowest level status. ', [['inc/collections/model','_blog.funcs.php',768]], 10],
'deprecate_link': ['deprecate_link', 'Display link to deprecate a post if user has edit rights ', [['inc/items/model','_item.class.php',4370],['inc/comments/model','_comment.class.php',1725]], 3],
'locale_shorttimefmt': ['locale_shorttimefmt', 'Returns the current locale\'s default short time format ', [['inc/locales','_locale.funcs.php',414]], 4],
'update_last_touched_date': ['update_last_touched_date', 'Update field last_touched_ts ', [['inc/items/model','_item.class.php',7135],['inc/links/model','_linkcomment.class.php',185],['inc/links/model','_linkitem.class.php',239],['inc/comments/model','_comment.class.php',4052],['inc/links/model','_linkowner.class.php',393],['inc/chapters/model','_chapter.class.php',658]], 19],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'trigger_event_first_true': ['trigger_event_first_true', 'Call all plugins for a given event, until the first one returns true. ', [['inc/plugins/model','_plugins.class.php',852]], 17],
'get_renderers': ['get_renderers', 'Get the list of renderers for this Item. ', [['inc/items/model','_item.class.php',6271],['inc/messaging/model','_message.class.php',713],['inc/comments/model','_comment.class.php',2937]], 8],
'from': ['from', '', [['inc/_core/model/db','_sql.class.php',221]], 513],
'next_status_link': ['next_status_link', 'Display next Publish/Restrict to link ', [['inc/items/model','_item.class.php',4216],['inc/comments/model','_comment.class.php',2136]], 12],
'comment': ['comment', 'Constructor ', [['inc/comments/model','_comment.class.php',191]], 20],
'format_statuses': ['format_statuses', 'Template function: display all statuses and only one is visible by css class name ', [['inc/comments/model','_comment.class.php',3241]], 0],
'dbinsert': ['dbinsert', 'Insert object into DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5108],['inc/_core/model/dataobjects','_dataobject.class.php',470],['inc/users/model','_user.class.php',3187],['inc/skins/model','_skin.class.php',438],['inc/items/model','_itemtype.class.php',405],['inc/files/model','_filetype.class.php',213],['inc/tools/model','_syslog.class.php',58],['inc/collections/model','_blog.class.php',2272],['inc/comments/model','_comment.class.php',3815],['inc/users/model','_group.class.php',459],['inc/widgets/model','_widget.class.php',829],['inc/chapters/model','_chapter.class.php',532],['inc/files/model','_file.class.php',1784]], 99],
'set_spam_karma': ['set_spam_karma', 'Set the spam karma, as a number. ', [['inc/comments/model','_comment.class.php',461]], 1],
'delete_prerendered_content': ['delete_prerendered_content', 'Unset any prerendered content for this item (in PHP cache). ', [['inc/items/model','_item.class.php',1606],['inc/messaging/model','_message.class.php',824],['inc/comments/model','_comment.class.php',2583]], 2],
'request_from': ['request_from', 'Get a param to know where script is calling now, Used for JS functions ', [['inc/_core','_misc.funcs.php',6578]], 7],
'get_identity_link': ['get_identity_link', 'Get User identity link, which is a composite of user avatar and login, both point to the specific user profile tab. ', [['inc/users/model','_user.class.php',1426]], 34],
'permanent_link': ['permanent_link', 'Displays a permalink link to the Comment ', [['inc/comments/model','_comment.class.php',2467],['inc/items/model','_itemlight.class.php',1121]], 22],
'get_full_path': ['get_full_path', 'Get the full path (directory and name) to the file. ', [['inc/files/model','_file.class.php',638]], 48],
'get_permanent_link': ['get_permanent_link', 'Returns a permalink link to the Comment ', [['inc/comments/model','_comment.class.php',2414],['inc/items/model','_itemlight.class.php',1066]], 23],
'get_item': ['get_item', 'Getting next item in archive list ', [['plugins','_archives.plugin.php',594]], 102],
'commit': ['commit', 'For any bytes that are currently buffered inside the stream, force them off the buffer. ', [['inc/_ext/swift/classes/Swift/ByteStream','AbstractFilterableInputStream.php',97],['inc/_ext/swift/classes/Swift/Signers','DKIMSigner.php',223],['inc/_ext/swift/classes/Swift/ByteStream','ArrayByteStream.php',116],['inc/_ext/swift/classes/Swift/Plugins','BandwidthMonitorPlugin.php',90],['inc/_ext/swift/classes/Swift','InputByteStream.php',41],['inc/_ext/swift/classes/Swift/Signers','DomainKeySigner.php',178],['inc/_ext/swift/classes/Swift/KeyCache','SimpleKeyCacheInputStream.php',71],['inc/_core/model/db','_db.class.php',1589]], 135],
'publish_link': ['publish_link', '', [['inc/items/model','_item.class.php',4200],['inc/comments/model','_comment.class.php',2068]], 2],
'get_status_permvalue': ['get_status_permvalue', 'Get the integer value of a status permission The status permissions are stored as a set, and each status has an integer value also ', [['inc/users/model','_user.funcs.php',1929]], 30],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['inc/_core/model/db','_db.class.php',1032]], 117],
'get_vote_link': ['get_vote_link', 'Provide link to vote a comment if user has edit rights ', [['inc/comments/model','_comment.class.php',1612]], 1],
'regenerate_url': ['regenerate_url', 'Regenerate current URL from parameters This may clean it up But it is also useful when generating static pages: you cannot rely on $_REQUEST[] ', [['inc/_core','_param.funcs.php',1748]], 503],
'load_blog': ['load_blog', 'Set Blog ', [['inc/links/model','_linkcomment.class.php',131],['inc/links/model','_linkitem.class.php',187],['inc/chapters/model','_chapter.class.php',474],['inc/links/model','_linkuser.class.php',139],['inc/items/model','_itemlight.class.php',1413]], 69],
'get_blog_id': ['get_blog_id', '', [['inc/items/model','_itemlight.class.php',789]], 38],
'author_email': ['author_email', 'Template function: display link to comment author\'s provided email ', [['inc/comments/model','_comment.class.php',1103]], 3],
'get_renderers_validated': ['get_renderers_validated', 'Get the list of validated renderers for this Item. This includes stealth plugins etc. ', [['inc/items/model','_item.class.php',6281],['inc/messaging/model','_message.class.php',698],['inc/comments/model','_comment.class.php',2922]], 30],
'dget': ['dget', 'Get a ready-to-display member param by its name ', [['inc/_core/model/dataobjects','_dataobject.class.php',846]], 252],
'date': ['date', 'Builds a date input field. ', [['inc/_core/ui/forms','_form.class.php',1333],['inc/comments/model','_comment.class.php',2959]], 446],
'get_icon': ['get_icon', 'Return the img html code of the icon ', [['inc/files/model','_filetype.class.php',153],['inc/files/model','_file.class.php',978],['inc/_core','_misc.funcs.php',4122]], 428],
'where': ['where', '', [['inc/_core/model/db','_sql.class.php',242]], 288],
'get_avatar_imgtag': ['get_avatar_imgtag', 'Get avatar <img> tag by user login ', [['inc/users/model','_user.funcs.php',1557],['inc/users/model','_user.class.php',3928]], 20],
'get_tag': ['get_tag', 'Get a complete tag (IMG or A HREF) pointing to the file of this link. ', [['inc/links/model','_link.class.php',173],['inc/files/model','_file.class.php',1054]], 23],
'is_published': ['is_published', 'Check if this comment is published to some of the public statuses ( \'published\', \'community\', \'protected\' ) ', [['inc/comments/model','_comment.class.php',3703]], 2],
'author_ip': ['author_ip', 'Template function: display comment\'s author\'s IP ', [['inc/comments/model','_comment.class.php',1056]], 3],
'get_inskin_statuses': ['get_inskin_statuses', 'Get a list of those statuses which can be displayed in the front office ', [['inc/collections/model','_blog.funcs.php',904]], 20],
'avatar': ['avatar', 'Template function: display the avatar of the comment\'s author. ', [['inc/comments/model','_comment.class.php',844]], 5],
'mail_template': ['mail_template', 'Get a mail message text by template name ', [['inc/_core','_misc.funcs.php',3720]], 7],
'button': ['button', 'Builds a button. ', [['inc/_core/ui/forms','_form.class.php',2980]], 68],
'delete_comment_url': ['delete_comment_url', '', [['inc/comments/model','_comment_js.funcs.php',67]], 1],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'is_image': ['is_image', 'Is the File an image? ', [['inc/files/model','_file.class.php',460]], 28],
'get_row': ['get_row', 'Get one row from the DB. ', [['inc/_core/model/db','_db.class.php',987]], 60],
'get_setting': ['get_setting', 'Get a setting. ', [['inc/items/model','_item.class.php',6656],['inc/skins/model','_skin.class.php',661],['inc/collections/model','_blog.class.php',2109]], 728],
'blocked_emails_memorize': ['blocked_emails_memorize', 'Memorize the blocked emails in cache array in order to display the message ', [['inc/tools/model','_email.funcs.php',428]], 2],
'get_styled_status': ['get_styled_status', 'Get template for the styled status of comment or item ', [['inc/comments/model','_comment.funcs.php',1442]], 4],
'dbdelete': ['dbdelete', 'Trigger event AfterItemDelete after calling parent method. ', [['inc/items/model','_item.class.php',5506],['inc/_core/model/dataobjects','_dataobject.class.php',591],['inc/users/model','_user.class.php',3376],['inc/messaging/model','_message.class.php',582],['inc/messaging/model','_thread.class.php',444],['inc/items/model','_itemtype.class.php',451],['inc/files/model','_filetype.class.php',271],['inc/collections/model','_blog.class.php',2664],['inc/comments/model','_comment.class.php',3872],['inc/users/model','_group.class.php',497]], 62],
'delete_link': ['delete_link', 'Displays button for deleting the Item if user has proper rights ', [['inc/items/model','_item.class.php',3806],['inc/comments/model','_comment.class.php',1449]], 10],
'button_class': ['button_class', 'Get a button class name depending on template ', [['inc/_core','_misc.funcs.php',6821]], 79],
'get_page_id_array': ['get_page_id_array', 'Get an array of IDs for current page ', [['inc/_core/ui/results','_results.class.php',749]], 13],
'setcommentstatus': ['setcommentstatus', '', [['inc/comments/model','_comment_js.funcs.php',94]], 2],
'get_user_identity_url': ['get_user_identity_url', 'Get the available user display url ', [['inc/users/model','_user.funcs.php',1067]], 8],
'buttons': ['buttons', 'Builds a button list. ', [['inc/_core/ui/forms','_form.class.php',2892]], 37],
'get_trigger_event': ['get_trigger_event', 'Trigger an event and return an index of params. ', [['inc/plugins/model','_plugins.class.php',980]], 4],
'author': ['author', 'Template function: display author/creator of item ', [['inc/items/model','_item.class.php',505],['inc/comments/model','_comment.class.php',917]], 48],
'get_ban_domain': ['get_ban_domain', 'Get the base domain that could be blacklisted from an URL. ', [['inc/antispam/model','_antispam.funcs.php',304]], 3],
'has_replies': ['has_replies', 'Check if comment has the replies ', [['inc/comments/model','_comment.class.php',4010]], 1],
'dataobject': ['dataobject', 'Constructor ', [['inc/_core/model/dataobjects','_dataobject.class.php',65]], 35],
'where_and': ['where_and', 'Extends the WHERE clause with AND ', [['inc/_core/model/db','_sql.class.php',247]], 369],
'db_delete_where': ['db_delete_where', 'Delete the given class objects from the database which corresponds to the given condition or to the given ids array This function must be overriden on those classes where the db delete requires some updates on other table content or some files/folders delete. Note: the delete cascade arrays are handled! Delete cascades are handled recursively only if the cascade arrays from the reffering class contains the class and class_path params ( e.g. see User class )! ', [['inc/_core/model/dataobjects','_dataobject.class.php',175],['inc/users/model','_user.class.php',3308],['inc/messaging/model','_message.class.php',503],['inc/sessions/model','_session.class.php',281],['inc/comments/model','_comment.class.php',290]], 11],
'get_prerendered_content': ['get_prerendered_content', 'Get the prerendered content. If it has not been generated yet, it will. ', [['inc/items/model','_item.class.php',1452],['inc/messaging/model','_message.class.php',735],['inc/comments/model','_comment.class.php',2490]], 7],
'can_comment': ['can_comment', 'Template function: Check if user can leave comment on this post or display error ', [['inc/items/model','_item.class.php',1151]], 17],
'get_avatar': ['get_avatar', 'Get the avatar of the comment\'s author. ', [['inc/comments/model','_comment.class.php',860]], 3],
'locale_temp_switch': ['locale_temp_switch', 'Template function: Temporarily switch to this post\'s locale or to current blog\'s locale depending on setting ', [['inc/items/model','_itemlight.class.php',919],['inc/locales','_locale.funcs.php',250]], 62],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['inc/_core','_param.funcs.php',1678],['inc/_core/model/dataobjects','_dataobject.class.php',890]], 127],
'ip_country': ['ip_country', 'Template function: display comment\'s country that was detected by IP address ', [['inc/comments/model','_comment.class.php',1126]], 3],
'setcommentvote': ['setcommentvote', '', [['inc/comments/model','_comment_js.funcs.php',174]], 1],
'get_author_gender': ['get_author_gender', 'Get the comment author\'s gender. ', [['inc/comments/model','_comment.class.php',746]], 1],
'locale_restore_previous': ['locale_restore_previous', 'Restore the locale in use before the switch ', [['inc/locales','_locale.funcs.php',281]], 61],
'url_rel_to_same_host': ['url_rel_to_same_host', 'Try to make $url relative to $target_url, if scheme, host, user and pass matches. ', [['inc/_core','_url.funcs.php',622]], 29],
'has_avatar': ['has_avatar', '', [['inc/users/model','_user.class.php',3841]], 10],
'edit_link': ['edit_link', 'Template tag ', [['inc/items/model','_item.class.php',4037],['inc/comments/model','_comment.class.php',1290]], 36],
'vote_spam': ['vote_spam', 'Display link to vote a comment as SPAM if user has edit rights ', [['inc/comments/model','_comment.class.php',1752]], 4],
'get_status': ['get_status', 'Get status of item ', [['inc/items/model','_item.class.php',4443],['inc/comments/model','_comment.class.php',3127],['inc/cron/model','_cronjob.class.php',161]], 7],
'get_moderation_link': ['get_moderation_link', 'Get any kind of moderation link where the user status will be changed. This function should be private! TODO: asimo>This function should be used instead the old get_publish_link and get_deprecate_link ', [['inc/comments/model','_comment.class.php',2015]], 3],
'send_email_notifications': ['send_email_notifications', 'Send email notifications to subscribed users ', [['inc/items/model','_item.class.php',5980],['inc/messaging/model','_message.class.php',608],['inc/comments/model','_comment.class.php',3369]], 7],
'exists': ['exists', 'Does the File/folder exist on disk? ', [['inc/files/model','_file.class.php',434]], 36],
'set_vote': ['set_vote', 'Set the vote, as a number. ', [['inc/comments/model','_comment.class.php',472]], 3],
'get_permanent_item_link': ['get_permanent_item_link', 'Get a permalink link to the Item of this Comment ', [['inc/comments/model','_comment.class.php',4088]], 1],
'get_avatar_imgtag_default': ['get_avatar_imgtag_default', 'Get avatar <img> tag with default picture ', [['inc/users/model','_user.funcs.php',1731]], 6],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['inc/_core','_misc.funcs.php',264]], 318],
'rollback': ['rollback', 'Rollback current transaction ', [['inc/_core/model/db','_db.class.php',1625]], 48],
'get_size': ['get_size', 'Get file/dir size in bytes. ', [['inc/files/model','_file.class.php',756]], 6],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['inc/_core/model/db','_db.class.php',1083]], 152],
'from_add': ['from_add', 'Extends the FROM clause. ', [['inc/_core/model/db','_sql.class.php',226]], 200],
'action_icon': ['action_icon', 'Generate requested action icon depending on perm ', [['inc/_core/model/dataobjects','_dataobject.class.php',1071],['inc/_core','_misc.funcs.php',3977]], 289],
'get_linked_ip_list': ['get_linked_ip_list', 'Get list of IP addresses with link to back-office page if User has an access ', [['inc/_core','_misc.funcs.php',4673]], 5],
'spam_karma': ['spam_karma', 'Template function: display spam karma of the comment (in percent) ', [['inc/comments/model','_comment.class.php',1262]], 4],
'trigger_event': ['trigger_event', 'Call all plugins for a given event. ', [['inc/plugins/model','_plugins.class.php',817]], 130],
'get_anchor': ['get_anchor', 'Get the anchor-ID of the comment ', [['inc/comments/model','_comment.class.php',708]], 4],
'get_vote_helpful_disabled': ['get_vote_helpful_disabled', 'Get the vote helpful type disabled, as array. ', [['inc/comments/model','_comment.class.php',607]], 1],
'load_list': ['load_list', 'Load a list of objects into the cache. ', [['inc/_core/model/dataobjects','_dataobjectcache.class.php',213]], 21],
'handle_notifications': ['handle_notifications', 'Handle comment email notifications ', [['inc/comments/model','_comment.class.php',3287]], 8],
'is_email': ['is_email', 'Check that email address looks valid. ', [['inc/_core','_misc.funcs.php',1777]], 13],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'deletecomment': ['deletecomment', '', [['inc/comments/model','_comment_js.funcs.php',267]], 1],
'get_msgform_possibility': ['get_msgform_possibility', 'Get messaging possibilities between current user and $this user ', [['inc/users/model','_user.class.php',3078]], 13],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['inc/_core','_url.funcs.php',525]], 256],
'anchor': ['anchor', 'Template function: display anchor for permalinks to refer to. ', [['inc/items/model','_item.class.php',953],['inc/comments/model','_comment.class.php',719]], 9],
'get_content': ['get_content', 'Get a content of the uploaded file ', [['htsrv','quick_upload.php',66],['htsrv','quick_upload.php',163],['inc/messaging/model','_message.class.php',843],['inc/comments/model','_comment.class.php',2602]], 8],
'moderation_links': ['moderation_links', 'Display moderation status links if it is available ', [['inc/comments/model','_comment.class.php',2218]], 1],
'url_crumb': ['url_crumb', 'Create a crumb param to be passed in action urls... ', [['inc/_core','_url.funcs.php',597]], 281],
'get_publish_link': ['get_publish_link', 'Provide link to publish a post if user has edit rights ', [['inc/items/model','_item.class.php',4086],['inc/comments/model','_comment.class.php',1952]], 1],
'check_setting': ['check_setting', 'Check a settings from user for Back office and from skin for Front office ', [['inc/users/model','_user.funcs.php',531]], 6],
'author_url_with_actions': ['author_url_with_actions', 'Display author url, delete icon and ban icon if user has proper rights ', [['inc/comments/model','_comment.class.php',1237]], 3],
'reply_link': ['reply_link', 'Displays link for replying to the Comment if blog\'s setting allows this action ', [['inc/comments/model','_comment.class.php',3944]], 3],
'display_voting_form': ['display_voting_form', 'Display a voting form ', [['inc/users/model','_user.funcs.php',3719]], 2],
'rating_none_input': ['rating_none_input', 'Rating reset input ', [['inc/comments/model','_comment.class.php',3101]], 1],
'statuses': ['statuses', 'Template function: display all statuses and only one is visible by css class name ', [['inc/comments/model','_comment.class.php',3265]], 1],
'banurl_link': ['banurl_link', 'Display ban icon, which goes to the antispam screen with keyword=author_url ', [['inc/comments/model','_comment.class.php',1400]], 1],
'get_ip_country': ['get_ip_country', 'Get comment\'s country that was detected by IP address ', [['inc/comments/model','_comment.class.php',1138]], 2],
'nl2br': ['nl2br', '', [], 21],
'implode': ['implode', '', [], 571],
'str_replace': ['str_replace', '', [], 531],
'array_reverse': ['array_reverse', '', [], 12],
'ceil': ['ceil', '', [], 96],
'array_keys': ['array_keys', '', [], 94],
'strpos': ['strpos', '', [], 347],
'abs': ['abs', '', [], 187],
'in_array': ['in_array', '', [], 417],
'array_merge': ['array_merge', '', [], 702],
'trim': ['trim', '', [], 398],
'explode': ['explode', '', [], 263],
'preg_match': ['preg_match', '', [], 423],
'rawurlencode': ['rawurlencode', '', [], 137],
'is_null': ['is_null', '', [], 299],
'defined': ['defined', '', [], 962],
'count': ['count', '', [], 928]};
CLASS_DATA={
'linkcomment': ['linkcomment', 'LinkComment Class ', [['inc/links/model','_linkcomment.class.php',16]], 9],
'dataobject': ['dataobject', 'Data Object Base Class ', [['inc/_core/model/dataobjects','_dataobject.class.php',18]], 37],
'cronjob': ['cronjob', 'Cronjob ', [['inc/cron/model','_cronjob.class.php',18]], 5],
'comment': ['comment', 'Comment Class ', [['inc/comments/model','_comment.class.php',19]], 122],
'sql': ['sql', 'SQL class: help constructing queries ', [['inc/_core/model/db','_sql.class.php',17]], 334]};
CONST_DATA={
'OBJECT': ['OBJECT', '', [['inc/_core/model/db','_db.class.php',49]], 54],
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
