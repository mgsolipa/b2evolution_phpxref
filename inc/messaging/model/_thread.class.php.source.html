<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/messaging/model/_thread.class.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='inc/messaging/model';
filename='_thread.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/messaging/model/</a> -> <a href="_thread.class.php.html">_thread.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_thread.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_thread.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file is part of b2evolution - {@link http://b2evolution.net/}</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> *</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @copyright (c)2009-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> * Parts of this file are copyright (c)2009 by The Evo Factory - {@link http://www.evofactory.com/}.</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> *</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * Released under GNU GPL License - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @package messaging</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '_core/model/dataobjects/_dataobject.class.php', 'DataObject' );
<a name="l18"><span class="linenum">  18</span></a>  
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment">/**</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * Thread Class</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> */</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('Thread')" href="../../../_classes/thread.html" onMouseOver="classPopup(event,'thread')">Thread</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('DataObject')" href="../../../_classes/dataobject.html" onMouseOver="classPopup(event,'dataobject')">DataObject</a>
<a name="l24"><span class="linenum">  24</span></a>  {
<a name="l25"><span class="linenum">  25</span></a>      var <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '';
<a name="l26"><span class="linenum">  26</span></a>      var <a class="var it1736" onMouseOver="hilite(1736)" onMouseOut="lolite()" onClick="logVariable('datemodified')" href="../../../_variables/datemodified.html">$datemodified</a>;
<a name="l27"><span class="linenum">  27</span></a>      var <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> = '';
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>      <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">     * Number unread messages</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">     * @var integer</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">     */</span>
<a name="l33"><span class="linenum">  33</span></a>      var <a class="var it5142" onMouseOver="hilite(5142)" onMouseOut="lolite()" onClick="logVariable('num_unread_messages')" href="../../../_variables/num_unread_messages.html">$num_unread_messages</a>;
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>      <span class="comment">/**</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * Recipients IDs lazy filled</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     *</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * @var array</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     */</span>
<a name="l40"><span class="linenum">  40</span></a>      var <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a>;
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>      <span class="comment">/**</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     * Constructor</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     * @param db_row database row</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     */</span>
<a name="l47"><span class="linenum">  47</span></a>  	function <a class="function" onClick="logFunction('Thread')" href="../../../_functions/thread.html" onMouseOver="funcPopup(event,'thread')">Thread</a>( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a> = NULL )
<a name="l48"><span class="linenum">  48</span></a>      {
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">        // Call parent constructor:</span>
<a name="l50"><span class="linenum">  50</span></a>          parent::<a class="function" onClick="logFunction('DataObject')" href="../../../_functions/dataobject.html" onMouseOver="funcPopup(event,'dataobject')">DataObject</a>( 'T_messaging__thread', 'thrd_', 'thrd_ID', 'datemodified' );
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>          if( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a> != NULL )
<a name="l53"><span class="linenum">  53</span></a>          {
<a name="l54"><span class="linenum">  54</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>           = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('thrd_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/thrd_ID.html">thrd_ID</a>;
<a name="l55"><span class="linenum">  55</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a>        = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('thrd_title')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/thrd_title.html">thrd_title</a>;
<a name="l56"><span class="linenum">  56</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datemodified.html">datemodified</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('thrd_datemodified')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/thrd_datemodified.html">thrd_datemodified</a>;
<a name="l57"><span class="linenum">  57</span></a>          }
<a name="l58"><span class="linenum">  58</span></a>          else
<a name="l59"><span class="linenum">  59</span></a>          {    // <span class="keyword">New </span><a class="class" onClick="logClass('Thread')" href="../../../_classes/thread.html" onMouseOver="classPopup(event,'thread')">Thread</a>
<a name="l60"><span class="linenum">  60</span></a>              global <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>;
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">            // check if there is unsaved Thread object stored in Session</span>
<a name="l63"><span class="linenum">  63</span></a>              <a class="var it5144" onMouseOver="hilite(5144)" onMouseOut="lolite()" onClick="logVariable('unsaved_Thread')" href="../../../_variables/unsaved_Thread.html">$unsaved_Thread</a> = <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'core.unsaved_Thread' );
<a name="l64"><span class="linenum">  64</span></a>              if( !empty( <a class="var it5144" onMouseOver="hilite(5144)" onMouseOut="lolite()" onClick="logVariable('unsaved_Thread')" href="../../../_variables/unsaved_Thread.html">$unsaved_Thread</a> ) )
<a name="l65"><span class="linenum">  65</span></a>              {    // unsaved thread exists, delete it from Session
<a name="l66"><span class="linenum">  66</span></a>                  <a class="var it478" onMouseOver="hilite(478)" onMouseOut="lolite()" onClick="logVariable('Session')" href="../../../_variables/Session.html">$Session</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>( 'core.unsaved_Thread' );
<a name="l67"><span class="linenum">  67</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> = <a class="var it5144" onMouseOver="hilite(5144)" onMouseOut="lolite()" onClick="logVariable('unsaved_Thread')" href="../../../_variables/unsaved_Thread.html">$unsaved_Thread</a>['title'];
<a name="l68"><span class="linenum">  68</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('text')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/text.html">text</a> = <a class="var it5144" onMouseOver="hilite(5144)" onMouseOut="lolite()" onClick="logVariable('unsaved_Thread')" href="../../../_variables/unsaved_Thread.html">$unsaved_Thread</a>['text'];
<a name="l69"><span class="linenum">  69</span></a>              }
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>              <a class="var it3406" onMouseOver="hilite(3406)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../_variables/logins.html">$logins</a> = array();
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>              <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_login', 'string', '' );
<a name="l74"><span class="linenum">  74</span></a>              if( !empty( <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a> ) )
<a name="l75"><span class="linenum">  75</span></a>              {    // Set recipient list from <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a>
<a name="l76"><span class="linenum">  76</span></a>                  <a class="var it3406" onMouseOver="hilite(3406)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../_variables/logins.html">$logins</a>[] = <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a>;
<a name="l77"><span class="linenum">  77</span></a>              }
<a name="l78"><span class="linenum">  78</span></a>              else
<a name="l79"><span class="linenum">  79</span></a>              {    // Set recipients from Contacts form
<a name="l80"><span class="linenum">  80</span></a>                  global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>                  <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'recipients', 'string', '' );
<a name="l83"><span class="linenum">  83</span></a>                  <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../../_variables/group_ID.html">$group_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'group_ID', 'integer', 0 );
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>                  if( !empty( <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> ) )
<a name="l86"><span class="linenum">  86</span></a>                  {    // Selected users
<a name="l87"><span class="linenum">  87</span></a>                      <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> );
<a name="l88"><span class="linenum">  88</span></a>                      foreach( <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> as <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> =&gt; <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a> )
<a name="l89"><span class="linenum">  89</span></a>                      {
<a name="l90"><span class="linenum">  90</span></a>                          if( (int)<a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a> ) == 0 )
<a name="l91"><span class="linenum">  91</span></a>                          {    // remove bad data
<a name="l92"><span class="linenum">  92</span></a>                              unset( <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a>[<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>] );
<a name="l93"><span class="linenum">  93</span></a>                          }
<a name="l94"><span class="linenum">  94</span></a>                      }
<a name="l95"><span class="linenum">  95</span></a>                      if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> ) &gt; 0 )
<a name="l96"><span class="linenum">  96</span></a>                      {
<a name="l97"><span class="linenum">  97</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l98"><span class="linenum">  98</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_ID, user_login' );
<a name="l99"><span class="linenum">  99</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_messaging__contact' );
<a name="l100"><span class="linenum"> 100</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_users ON mct_to_user_ID = user_ID' );
<a name="l101"><span class="linenum"> 101</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'mct_from_user_ID = '.<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l102"><span class="linenum"> 102</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'mct_to_user_ID IN ('.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> ).')' );
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">                        // asimo&gt; If A user block B user it means that A user doesn't want to receive private message from B,</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">                        // but A user still should be able to send a message to B.</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">                        //$SQL-&gt;WHERE_and( 'mct_blocked = 0' );</span>
<a name="l106"><span class="linenum"> 106</span></a>                          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('ORDER_BY')" href="../../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">ORDER_BY</a>( 'user_login' );
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>                          <a class="var it3406" onMouseOver="hilite(3406)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../_variables/logins.html">$logins</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../../../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l109"><span class="linenum"> 109</span></a>                      }
<a name="l110"><span class="linenum"> 110</span></a>                  }
<a name="l111"><span class="linenum"> 111</span></a>                  else if( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../../_variables/group_ID.html">$group_ID</a> &gt; 0 )
<a name="l112"><span class="linenum"> 112</span></a>                  {    // All users from one group
<a name="l113"><span class="linenum"> 113</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l114"><span class="linenum"> 114</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'user_ID, user_login' );
<a name="l115"><span class="linenum"> 115</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_messaging__contact_groupusers' );
<a name="l116"><span class="linenum"> 116</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_users ON cgu_user_ID = user_ID' );
<a name="l117"><span class="linenum"> 117</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_messaging__contact_groups ON cgu_cgr_ID = cgr_ID' );
<a name="l118"><span class="linenum"> 118</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_messaging__contact ON mct_from_user_ID = cgr_user_ID AND mct_to_user_ID = user_ID' );
<a name="l119"><span class="linenum"> 119</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'cgr_user_ID = '.<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l120"><span class="linenum"> 120</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'cgr_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it526" onMouseOver="hilite(526)" onMouseOut="lolite()" onClick="logVariable('group_ID')" href="../../../_variables/group_ID.html">$group_ID</a> ) );
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">                    // asimo&gt; If A user block B user it means that A user doesn't want to receive private message from B,</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">                    // but A user still should be able to send a message to B.</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">                    //$SQL-&gt;WHERE_and( 'mct_blocked = 0' );</span>
<a name="l124"><span class="linenum"> 124</span></a>                      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('ORDER_BY')" href="../../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">ORDER_BY</a>( 'user_login' );
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>                      <a class="var it3406" onMouseOver="hilite(3406)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../_variables/logins.html">$logins</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_assoc')" href="../../../_functions/get_assoc.html" onMouseOver="funcPopup(event,'get_assoc')">get_assoc</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() );
<a name="l127"><span class="linenum"> 127</span></a>                  }
<a name="l128"><span class="linenum"> 128</span></a>              }
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients.html">recipients</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it3406" onMouseOver="hilite(3406)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../_variables/logins.html">$logins</a> );
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>              if( !empty( <a class="var it3406" onMouseOver="hilite(3406)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../_variables/logins.html">$logins</a> ) )
<a name="l133"><span class="linenum"> 133</span></a>              {    // Set this var to initialize the preselected users for fbautocomplete jQuery plugin
<a name="l134"><span class="linenum"> 134</span></a>                  global <a class="var it2220" onMouseOver="hilite(2220)" onMouseOut="lolite()" onClick="logVariable('recipients_selected')" href="../../../_variables/recipients_selected.html">$recipients_selected</a>;
<a name="l135"><span class="linenum"> 135</span></a>                  foreach( <a class="var it3406" onMouseOver="hilite(3406)" onMouseOut="lolite()" onClick="logVariable('logins')" href="../../../_variables/logins.html">$logins</a> as <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> =&gt; <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a> )
<a name="l136"><span class="linenum"> 136</span></a>                  {
<a name="l137"><span class="linenum"> 137</span></a>                      <a class="var it2220" onMouseOver="hilite(2220)" onMouseOut="lolite()" onClick="logVariable('recipients_selected')" href="../../../_variables/recipients_selected.html">$recipients_selected</a>[] = array(
<a name="l138"><span class="linenum"> 138</span></a>                          'id'    =&gt; <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>,
<a name="l139"><span class="linenum"> 139</span></a>                          'title' =&gt; <a class="var it1497" onMouseOver="hilite(1497)" onMouseOut="lolite()" onClick="logVariable('user_login')" href="../../../_variables/user_login.html">$user_login</a>
<a name="l140"><span class="linenum"> 140</span></a>                      );
<a name="l141"><span class="linenum"> 141</span></a>                  }
<a name="l142"><span class="linenum"> 142</span></a>              }
<a name="l143"><span class="linenum"> 143</span></a>          }
<a name="l144"><span class="linenum"> 144</span></a>      }
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>      <span class="comment">/**</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * Get this class db table config params</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     *</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * @return array</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     */</span>
<a name="l152"><span class="linenum"> 152</span></a>  	static function <a class="function" onClick="logFunction('get_class_db_config')" href="../../../_functions/get_class_db_config.html" onMouseOver="funcPopup(event,'get_class_db_config')">get_class_db_config</a>()
<a name="l153"><span class="linenum"> 153</span></a>      {
<a name="l154"><span class="linenum"> 154</span></a>          static <a class="var it5146" onMouseOver="hilite(5146)" onMouseOut="lolite()" onClick="logVariable('thread_db_config')" href="../../../_variables/thread_db_config.html">$thread_db_config</a>;
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>          if( !isset( <a class="var it5146" onMouseOver="hilite(5146)" onMouseOut="lolite()" onClick="logVariable('thread_db_config')" href="../../../_variables/thread_db_config.html">$thread_db_config</a> ) )
<a name="l157"><span class="linenum"> 157</span></a>          {
<a name="l158"><span class="linenum"> 158</span></a>              <a class="var it5146" onMouseOver="hilite(5146)" onMouseOut="lolite()" onClick="logVariable('thread_db_config')" href="../../../_variables/thread_db_config.html">$thread_db_config</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( parent::<a class="function" onClick="logFunction('get_class_db_config')" href="../../../_functions/get_class_db_config.html" onMouseOver="funcPopup(event,'get_class_db_config')">get_class_db_config</a>(),
<a name="l159"><span class="linenum"> 159</span></a>                  array(
<a name="l160"><span class="linenum"> 160</span></a>                      'dbtablename'        =&gt; 'T_messaging__thread',
<a name="l161"><span class="linenum"> 161</span></a>                      'dbprefix'           =&gt; 'thrd_',
<a name="l162"><span class="linenum"> 162</span></a>                      'dbIDname'           =&gt; 'thrd_ID',
<a name="l163"><span class="linenum"> 163</span></a>                  )
<a name="l164"><span class="linenum"> 164</span></a>              );
<a name="l165"><span class="linenum"> 165</span></a>          }
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>          return <a class="var it5146" onMouseOver="hilite(5146)" onMouseOut="lolite()" onClick="logVariable('thread_db_config')" href="../../../_variables/thread_db_config.html">$thread_db_config</a>;
<a name="l168"><span class="linenum"> 168</span></a>      }
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>      <span class="comment">/**</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * Get delete cascade settings</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     *</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     * @return array</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">     */</span>
<a name="l176"><span class="linenum"> 176</span></a>  	static function <a class="function" onClick="logFunction('get_delete_cascades')" href="../../../_functions/get_delete_cascades.html" onMouseOver="funcPopup(event,'get_delete_cascades')">get_delete_cascades</a>()
<a name="l177"><span class="linenum"> 177</span></a>      {
<a name="l178"><span class="linenum"> 178</span></a>          return array(
<a name="l179"><span class="linenum"> 179</span></a>                  array( 'table'=&gt;'T_messaging__message', 'fk'=&gt;'msg_thread_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d messages in thread'),
<a name="l180"><span class="linenum"> 180</span></a>                          'class'=&gt;'Message', 'class_path'=&gt;'messaging/model/_message.class.php' ),
<a name="l181"><span class="linenum"> 181</span></a>                  array( 'table'=&gt;'T_messaging__threadstatus', 'fk'=&gt;'tsta_thread_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d read statuses in thread') ),
<a name="l182"><span class="linenum"> 182</span></a>              );
<a name="l183"><span class="linenum"> 183</span></a>      }
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>      <span class="comment">/**</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * Load data from Request form fields.</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     * @return boolean true if loaded data seems valid.</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     */</span>
<a name="l190"><span class="linenum"> 190</span></a>  	function <a class="function" onClick="logFunction('load_from_Request')" href="../../../_functions/load_from_request.html" onMouseOver="funcPopup(event,'load_from_request')">load_from_Request</a>()
<a name="l191"><span class="linenum"> 191</span></a>      {
<a name="l192"><span class="linenum"> 192</span></a>          global <a class="var it1085" onMouseOver="hilite(1085)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients')" href="../../../_variables/thrd_recipients.html">$thrd_recipients</a>, <a class="var it1086" onMouseOver="hilite(1086)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients_array')" href="../../../_variables/thrd_recipients_array.html">$thrd_recipients_array</a>;
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">        // Resipients</span>
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_string_from_param')" href="../../../_functions/set_string_from_param.html" onMouseOver="funcPopup(event,'set_string_from_param')">set_string_from_param</a>( 'recipients', empty( <a class="var it1086" onMouseOver="hilite(1086)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients_array')" href="../../../_variables/thrd_recipients_array.html">$thrd_recipients_array</a> ) ? true : false );
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">        // Title</span>
<a name="l198"><span class="linenum"> 198</span></a>          <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'thrd_title', 'string' );
<a name="l199"><span class="linenum"> 199</span></a>          <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'thrd_title', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter a subject') );
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_from_Request')" href="../../../_functions/set_from_request.html" onMouseOver="funcPopup(event,'set_from_request')">set_from_Request</a>( 'title', 'thrd_title' );
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">        // Message</span>
<a name="l203"><span class="linenum"> 203</span></a>          <a class="function" onClick="logFunction('param_check_not_empty')" href="../../../_functions/param_check_not_empty.html" onMouseOver="funcPopup(event,'param_check_not_empty')">param_check_not_empty</a>( 'msg_text', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Please enter a message') );
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('param_check__recipients')" href="../../../_functions/param_check__recipients.html" onMouseOver="funcPopup(event,'param_check__recipients')">param_check__recipients</a>( 'thrd_recipients', <a class="var it1085" onMouseOver="hilite(1085)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients')" href="../../../_variables/thrd_recipients.html">$thrd_recipients</a>, <a class="var it1086" onMouseOver="hilite(1086)" onMouseOut="lolite()" onClick="logVariable('thrd_recipients_array')" href="../../../_variables/thrd_recipients_array.html">$thrd_recipients_array</a> );
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>          return ! <a class="function" onClick="logFunction('param_errors_detected')" href="../../../_functions/param_errors_detected.html" onMouseOver="funcPopup(event,'param_errors_detected')">param_errors_detected</a>();
<a name="l208"><span class="linenum"> 208</span></a>      }
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>      <span class="comment">/**</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * Set param value</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     *</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * By default, all values will be considered strings</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     *</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     * @param string parameter name</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     * @param mixed parameter value</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty value</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * @return boolean true, if a value has been set; false if it has not changed</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     */</span>
<a name="l221"><span class="linenum"> 221</span></a>  	function <a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> = false )
<a name="l222"><span class="linenum"> 222</span></a>      {
<a name="l223"><span class="linenum"> 223</span></a>          switch( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l224"><span class="linenum"> 224</span></a>          {
<a name="l225"><span class="linenum"> 225</span></a>              case 'recipients':
<a name="l226"><span class="linenum"> 226</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients.html">recipients</a> = <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>;
<a name="l227"><span class="linenum"> 227</span></a>                  break;
<a name="l228"><span class="linenum"> 228</span></a>              case 'title':
<a name="l229"><span class="linenum"> 229</span></a>              default:
<a name="l230"><span class="linenum"> 230</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, 'string', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> );
<a name="l231"><span class="linenum"> 231</span></a>          }
<a name="l232"><span class="linenum"> 232</span></a>      }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>      <span class="comment">/**</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     * Check if recipients available in database</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">     *</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     * @param string Input name</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     * @param string Recipients logins separated with comma (Used for browsers without JavaScript)</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">     * @param string Recipients logins in array format (Used with jQuery plugin fbautocomplete)</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">     * @return boolean true if all recipients allow the current User to contact them, false otherwise</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     */</span>
<a name="l243"><span class="linenum"> 243</span></a>  	function <a class="function" onClick="logFunction('param_check__recipients')" href="../../../_functions/param_check__recipients.html" onMouseOver="funcPopup(event,'param_check__recipients')">param_check__recipients</a>( <a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a>, <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a>, <a class="var it5147" onMouseOver="hilite(5147)" onMouseOut="lolite()" onClick="logVariable('recipients_array')" href="../../../_variables/recipients_array.html">$recipients_array</a> )
<a name="l244"><span class="linenum"> 244</span></a>      {
<a name="l245"><span class="linenum"> 245</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>;
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>          if( !empty( <a class="var it5147" onMouseOver="hilite(5147)" onMouseOut="lolite()" onClick="logVariable('recipients_array')" href="../../../_variables/recipients_array.html">$recipients_array</a> ) )
<a name="l248"><span class="linenum"> 248</span></a>          {    // These data is created by jQuery plugin fbautocomplete
<a name="l249"><span class="linenum"> 249</span></a>              <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a> = <a class="var it5147" onMouseOver="hilite(5147)" onMouseOut="lolite()" onClick="logVariable('recipients_array')" href="../../../_variables/recipients_array.html">$recipients_array</a>['title'];
<a name="l250"><span class="linenum"> 250</span></a>          }
<a name="l251"><span class="linenum"> 251</span></a>          else
<a name="l252"><span class="linenum"> 252</span></a>          {    // For browsers without JavaScript
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">            // split recipients into array using comma separator</span>
<a name="l254"><span class="linenum"> 254</span></a>              <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a> = array();
<a name="l255"><span class="linenum"> 255</span></a>              <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( ',', ' ', <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a> ) );
<a name="l256"><span class="linenum"> 256</span></a>              foreach( <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(' ', <a class="var it1296" onMouseOver="hilite(1296)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../_variables/recipients.html">$recipients</a>) as <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a> )
<a name="l257"><span class="linenum"> 257</span></a>              {
<a name="l258"><span class="linenum"> 258</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a>);
<a name="l259"><span class="linenum"> 259</span></a>                  if( ! empty( <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> ) )
<a name="l260"><span class="linenum"> 260</span></a>                  {
<a name="l261"><span class="linenum"> 261</span></a>                      <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a>[] = <a class="function" onClick="logFunction('utf8_strtolower')" href="../../../_functions/utf8_strtolower.html" onMouseOver="funcPopup(event,'utf8_strtolower')">utf8_strtolower</a>( <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('login')" href="../../../_variables/login.html">$login</a> );
<a name="l262"><span class="linenum"> 262</span></a>                  }
<a name="l263"><span class="linenum"> 263</span></a>              }
<a name="l264"><span class="linenum"> 264</span></a>          }
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>          <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a> );
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>          <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> = '';
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">        // check has recipients list login of current user</span>
<a name="l271"><span class="linenum"> 271</span></a>          if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('login')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a>, <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a> ) )
<a name="l272"><span class="linenum"> 272</span></a>          {
<a name="l273"><span class="linenum"> 273</span></a>              <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You cannot send threads to yourself: %s' ), <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('login')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a> );
<a name="l274"><span class="linenum"> 274</span></a>          }
<a name="l275"><span class="linenum"> 275</span></a>  
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">        // load recipient User objects</span>
<a name="l277"><span class="linenum"> 277</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_where')" href="../../../_functions/load_where.html" onMouseOver="funcPopup(event,'load_where')">load_where</a>( 'user_login IN ( &quot;'.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( '&quot;,&quot;', <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a> ).'&quot; )' );
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">        // check are recipients available in database</span>
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a> = array();
<a name="l282"><span class="linenum"> 282</span></a>          <a class="var it5149" onMouseOver="hilite(5149)" onMouseOut="lolite()" onClick="logVariable('unavailable_recipients_list')" href="../../../_variables/unavailable_recipients_list.html">$unavailable_recipients_list</a> = array();
<a name="l283"><span class="linenum"> 283</span></a>          <a class="var it5150" onMouseOver="hilite(5150)" onMouseOut="lolite()" onClick="logVariable('closed_recipients_list')" href="../../../_variables/closed_recipients_list.html">$closed_recipients_list</a> = array();
<a name="l284"><span class="linenum"> 284</span></a>          <a class="var it5151" onMouseOver="hilite(5151)" onMouseOut="lolite()" onClick="logVariable('status_restricted_recipients')" href="../../../_variables/status_restricted_recipients.html">$status_restricted_recipients</a> = array();
<a name="l285"><span class="linenum"> 285</span></a>          <a class="var it5152" onMouseOver="hilite(5152)" onMouseOut="lolite()" onClick="logVariable('recipients_without_perm')" href="../../../_variables/recipients_without_perm.html">$recipients_without_perm</a> = array();
<a name="l286"><span class="linenum"> 286</span></a>          <a class="var it5153" onMouseOver="hilite(5153)" onMouseOut="lolite()" onClick="logVariable('recipients_from_different_country')" href="../../../_variables/recipients_from_different_country.html">$recipients_from_different_country</a> = array();
<a name="l287"><span class="linenum"> 287</span></a>          <a class="var it5154" onMouseOver="hilite(5154)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a> = array();
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">        // check if recipient user enable private messages only if sender user doesn't have 'delete' messaging permission</span>
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it5155" onMouseOver="hilite(5155)" onMouseOut="lolite()" onClick="logVariable('check_enable_pm')" href="../../../_variables/check_enable_pm.html">$check_enable_pm</a> = !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'delete' );
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it5156" onMouseOver="hilite(5156)" onMouseOut="lolite()" onClick="logVariable('cross_country_restrict')" href="../../../_variables/cross_country_restrict.html">$cross_country_restrict</a> = <a class="function" onClick="logFunction('has_cross_country_restriction')" href="../../../_functions/has_cross_country_restriction.html" onMouseOver="funcPopup(event,'has_cross_country_restriction')">has_cross_country_restriction</a>( 'contact' );
<a name="l291"><span class="linenum"> 291</span></a>          foreach( <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a> as <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a> )
<a name="l292"><span class="linenum"> 292</span></a>          {
<a name="l293"><span class="linenum"> 293</span></a>              <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a> = <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_login( <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a>, false );
<a name="l294"><span class="linenum"> 294</span></a>              if( <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a> === false )
<a name="l295"><span class="linenum"> 295</span></a>              { // user doesn't exists
<a name="l296"><span class="linenum"> 296</span></a>                  <a class="var it5149" onMouseOver="hilite(5149)" onMouseOut="lolite()" onClick="logVariable('unavailable_recipients_list')" href="../../../_variables/unavailable_recipients_list.html">$unavailable_recipients_list</a>[] = <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a>;
<a name="l297"><span class="linenum"> 297</span></a>                  continue;
<a name="l298"><span class="linenum"> 298</span></a>              }
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>              if( !<a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_receive_pm' ) )
<a name="l301"><span class="linenum"> 301</span></a>              { // user status restrict to receive private messages
<a name="l302"><span class="linenum"> 302</span></a>                  if( <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'is_closed' ) )
<a name="l303"><span class="linenum"> 303</span></a>                  { // user account was closed
<a name="l304"><span class="linenum"> 304</span></a>                      <a class="var it5150" onMouseOver="hilite(5150)" onMouseOut="lolite()" onClick="logVariable('closed_recipients_list')" href="../../../_variables/closed_recipients_list.html">$closed_recipients_list</a>[] = <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a>;
<a name="l305"><span class="linenum"> 305</span></a>                      continue;
<a name="l306"><span class="linenum"> 306</span></a>                  }
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>                  <a class="var it5151" onMouseOver="hilite(5151)" onMouseOut="lolite()" onClick="logVariable('status_restricted_recipients')" href="../../../_variables/status_restricted_recipients.html">$status_restricted_recipients</a>[] = <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a>;
<a name="l309"><span class="linenum"> 309</span></a>                  continue;
<a name="l310"><span class="linenum"> 310</span></a>              }
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>              if( !<a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'reply' ) )
<a name="l313"><span class="linenum"> 313</span></a>              { // user doesn't have permission to read private messages
<a name="l314"><span class="linenum"> 314</span></a>                  <a class="var it5152" onMouseOver="hilite(5152)" onMouseOut="lolite()" onClick="logVariable('recipients_without_perm')" href="../../../_variables/recipients_without_perm.html">$recipients_without_perm</a>[] = <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a>;
<a name="l315"><span class="linenum"> 315</span></a>                  continue;
<a name="l316"><span class="linenum"> 316</span></a>              }
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>              if( <a class="var it5156" onMouseOver="hilite(5156)" onMouseOut="lolite()" onClick="logVariable('cross_country_restrict')" href="../../../_variables/cross_country_restrict.html">$cross_country_restrict</a> &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ctry_ID.html">ctry_ID</a> != <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('ctry_ID')" class="var it10700" onMouseOver="hilite(10700)" onMouseOut="lolite()" href="../../../_variables/ctry_ID.html">ctry_ID</a> )
<a name="l319"><span class="linenum"> 319</span></a>              { // user can contact with other users only from the same coutnry, but this recipient country is different
<a name="l320"><span class="linenum"> 320</span></a>                  <a class="var it5153" onMouseOver="hilite(5153)" onMouseOut="lolite()" onClick="logVariable('recipients_from_different_country')" href="../../../_variables/recipients_from_different_country.html">$recipients_from_different_country</a>[] = <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a>;
<a name="l321"><span class="linenum"> 321</span></a>                  continue;
<a name="l322"><span class="linenum"> 322</span></a>              }
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>              if( !<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'enable_PM', <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10700" onMouseOver="hilite(10700)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l325"><span class="linenum"> 325</span></a>              { // recipient doesn't want to receive private messages
<a name="l326"><span class="linenum"> 326</span></a>                  <a class="var it5154" onMouseOver="hilite(5154)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a>[] = <a class="var it5145" onMouseOver="hilite(5145)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../_variables/recipient.html">$recipient</a>;
<a name="l327"><span class="linenum"> 327</span></a>                  if( <a class="var it5155" onMouseOver="hilite(5155)" onMouseOut="lolite()" onClick="logVariable('check_enable_pm')" href="../../../_variables/check_enable_pm.html">$check_enable_pm</a> )
<a name="l328"><span class="linenum"> 328</span></a>                  { // sender is not a user with <a class="function" onClick="logFunction('delete')" href="../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a> ( &quot;admin&quot; ) messaging permission, so this user can't be in the recipients list
<a name="l329"><span class="linenum"> 329</span></a>                      continue;
<a name="l330"><span class="linenum"> 330</span></a>                  }
<a name="l331"><span class="linenum"> 331</span></a>              }
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">            // recipient is correct, add to recipient list</span>
<a name="l334"><span class="linenum"> 334</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a>[] = <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10700" onMouseOver="hilite(10700)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l335"><span class="linenum"> 335</span></a>          }
<a name="l336"><span class="linenum"> 336</span></a>  
<a name="l337"><span class="linenum"> 337</span></a>          if ( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it5149" onMouseOver="hilite(5149)" onMouseOut="lolite()" onClick="logVariable('unavailable_recipients_list')" href="../../../_variables/unavailable_recipients_list.html">$unavailable_recipients_list</a> ) &gt; 0 )
<a name="l338"><span class="linenum"> 338</span></a>          {
<a name="l339"><span class="linenum"> 339</span></a>              if ( ! empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l340"><span class="linenum"> 340</span></a>              {
<a name="l341"><span class="linenum"> 341</span></a>                  <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l342"><span class="linenum"> 342</span></a>              }
<a name="l343"><span class="linenum"> 343</span></a>              <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users were not found: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it5149" onMouseOver="hilite(5149)" onMouseOut="lolite()" onClick="logVariable('unavailable_recipients_list')" href="../../../_variables/unavailable_recipients_list.html">$unavailable_recipients_list</a> ) );
<a name="l344"><span class="linenum"> 344</span></a>          }
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>          if ( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it5150" onMouseOver="hilite(5150)" onMouseOut="lolite()" onClick="logVariable('closed_recipients_list')" href="../../../_variables/closed_recipients_list.html">$closed_recipients_list</a> ) &gt; 0 )
<a name="l347"><span class="linenum"> 347</span></a>          {
<a name="l348"><span class="linenum"> 348</span></a>              if ( ! empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l349"><span class="linenum"> 349</span></a>              {
<a name="l350"><span class="linenum"> 350</span></a>                  <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l351"><span class="linenum"> 351</span></a>              }
<a name="l352"><span class="linenum"> 352</span></a>              <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users no longer exist: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it5150" onMouseOver="hilite(5150)" onMouseOut="lolite()" onClick="logVariable('closed_recipients_list')" href="../../../_variables/closed_recipients_list.html">$closed_recipients_list</a> ) );
<a name="l353"><span class="linenum"> 353</span></a>          }
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>          if ( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it5151" onMouseOver="hilite(5151)" onMouseOut="lolite()" onClick="logVariable('status_restricted_recipients')" href="../../../_variables/status_restricted_recipients.html">$status_restricted_recipients</a> ) &gt; 0 )
<a name="l356"><span class="linenum"> 356</span></a>          {
<a name="l357"><span class="linenum"> 357</span></a>              if ( ! empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l358"><span class="linenum"> 358</span></a>              {
<a name="l359"><span class="linenum"> 359</span></a>                  <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l360"><span class="linenum"> 360</span></a>              }
<a name="l361"><span class="linenum"> 361</span></a>              <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users status currently does not permit to receive private messages: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it5151" onMouseOver="hilite(5151)" onMouseOut="lolite()" onClick="logVariable('status_restricted_recipients')" href="../../../_variables/status_restricted_recipients.html">$status_restricted_recipients</a> ) );
<a name="l362"><span class="linenum"> 362</span></a>          }
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>          if ( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it5152" onMouseOver="hilite(5152)" onMouseOut="lolite()" onClick="logVariable('recipients_without_perm')" href="../../../_variables/recipients_without_perm.html">$recipients_without_perm</a> ) &gt; 0 )
<a name="l365"><span class="linenum"> 365</span></a>          {
<a name="l366"><span class="linenum"> 366</span></a>              if ( ! empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l367"><span class="linenum"> 367</span></a>              {
<a name="l368"><span class="linenum"> 368</span></a>                  <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l369"><span class="linenum"> 369</span></a>              }
<a name="l370"><span class="linenum"> 370</span></a>              <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users have no permission to read private messages: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it5152" onMouseOver="hilite(5152)" onMouseOut="lolite()" onClick="logVariable('recipients_without_perm')" href="../../../_variables/recipients_without_perm.html">$recipients_without_perm</a> ) );
<a name="l371"><span class="linenum"> 371</span></a>          }
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>          if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it5153" onMouseOver="hilite(5153)" onMouseOut="lolite()" onClick="logVariable('recipients_from_different_country')" href="../../../_variables/recipients_from_different_country.html">$recipients_from_different_country</a> ) &gt; 0 )
<a name="l374"><span class="linenum"> 374</span></a>          {
<a name="l375"><span class="linenum"> 375</span></a>              if ( ! empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l376"><span class="linenum"> 376</span></a>              {
<a name="l377"><span class="linenum"> 377</span></a>                  <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l378"><span class="linenum"> 378</span></a>              }
<a name="l379"><span class="linenum"> 379</span></a>              <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'You are not allowed to contact with the following users: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it5153" onMouseOver="hilite(5153)" onMouseOut="lolite()" onClick="logVariable('recipients_from_different_country')" href="../../../_variables/recipients_from_different_country.html">$recipients_from_different_country</a> ) );
<a name="l380"><span class="linenum"> 380</span></a>          }
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>          <a class="var it5157" onMouseOver="hilite(5157)" onMouseOut="lolite()" onClick="logVariable('restricted_pm_count')" href="../../../_variables/restricted_pm_count.html">$restricted_pm_count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it5154" onMouseOver="hilite(5154)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a> );
<a name="l383"><span class="linenum"> 383</span></a>          if ( <a class="var it5157" onMouseOver="hilite(5157)" onMouseOut="lolite()" onClick="logVariable('restricted_pm_count')" href="../../../_variables/restricted_pm_count.html">$restricted_pm_count</a> &gt; 0 )
<a name="l384"><span class="linenum"> 384</span></a>          { // there is at least one recipient who doesn't want to receive private messages
<a name="l385"><span class="linenum"> 385</span></a>              if( <a class="var it5155" onMouseOver="hilite(5155)" onMouseOut="lolite()" onClick="logVariable('check_enable_pm')" href="../../../_variables/check_enable_pm.html">$check_enable_pm</a> )
<a name="l386"><span class="linenum"> 386</span></a>              { // sender is not a user with <a class="function" onClick="logFunction('delete')" href="../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a> ( &quot;admin&quot; ) messaging permission, so this user can't be in the recipients list
<a name="l387"><span class="linenum"> 387</span></a>                  if ( ! empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l388"><span class="linenum"> 388</span></a>                  {
<a name="l389"><span class="linenum"> 389</span></a>                      <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l390"><span class="linenum"> 390</span></a>                  }
<a name="l391"><span class="linenum"> 391</span></a>                  <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= sprintf( 'The following users don\'t want to receive private messages: %s', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it5154" onMouseOver="hilite(5154)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a> ) );
<a name="l392"><span class="linenum"> 392</span></a>              }
<a name="l393"><span class="linenum"> 393</span></a>              else
<a name="l394"><span class="linenum"> 394</span></a>              { // send is an admin
<a name="l395"><span class="linenum"> 395</span></a>                  <a class="var it4270" onMouseOver="hilite(4270)" onMouseOut="lolite()" onClick="logVariable('manual_link')" href="../../../_variables/manual_link.html">$manual_link</a> = <a class="function" onClick="logFunction('get_manual_link')" href="../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>( 'messaging', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'See manual' ).'.' );
<a name="l396"><span class="linenum"> 396</span></a>                  if( <a class="var it5157" onMouseOver="hilite(5157)" onMouseOut="lolite()" onClick="logVariable('restricted_pm_count')" href="../../../_variables/restricted_pm_count.html">$restricted_pm_count</a> &gt; 1 )
<a name="l397"><span class="linenum"> 397</span></a>                  { // more then one recipient don't want to receive private messages
<a name="l398"><span class="linenum"> 398</span></a>                      <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../_variables/note.html">$note</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Users &amp;laquo;%s&amp;raquo; do not allow receiving private messages. Message has been sent anyway because you are an administrator.' ), <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it5154" onMouseOver="hilite(5154)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a> ) );
<a name="l399"><span class="linenum"> 399</span></a>                  }
<a name="l400"><span class="linenum"> 400</span></a>                  else
<a name="l401"><span class="linenum"> 401</span></a>                  { // one recipient doesn't want to receive private messages
<a name="l402"><span class="linenum"> 402</span></a>                      <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../_variables/note.html">$note</a> = sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'User &amp;laquo;%s&amp;raquo; does not allow receiving private messages. Message has been sent anyway because you are an administrator.' ), <a class="var it5154" onMouseOver="hilite(5154)" onMouseOut="lolite()" onClick="logVariable('recipients_restricted_pm')" href="../../../_variables/recipients_restricted_pm.html">$recipients_restricted_pm</a>[0] );
<a name="l403"><span class="linenum"> 403</span></a>                  }
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">                // add note</span>
<a name="l405"><span class="linenum"> 405</span></a>                  <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('note')" href="../../../_variables/note.html">$note</a>.<a class="var it4270" onMouseOver="hilite(4270)" onMouseOut="lolite()" onClick="logVariable('manual_link')" href="../../../_variables/manual_link.html">$manual_link</a>, 'note' );
<a name="l406"><span class="linenum"> 406</span></a>              }
<a name="l407"><span class="linenum"> 407</span></a>          }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">        // Here we select those recipients who has blocked the sender. Note that users with 'delete' messaging permission can't be blocked!</span>
<a name="l410"><span class="linenum"> 410</span></a>          <a class="var it4983" onMouseOver="hilite(4983)" onMouseOut="lolite()" onClick="logVariable('blocked_contacts')" href="../../../_variables/blocked_contacts.html">$blocked_contacts</a> = <a class="function" onClick="logFunction('check_blocked_contacts')" href="../../../_functions/check_blocked_contacts.html" onMouseOver="funcPopup(event,'check_blocked_contacts')">check_blocked_contacts</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a> );
<a name="l411"><span class="linenum"> 411</span></a>          if( !empty( <a class="var it4983" onMouseOver="hilite(4983)" onMouseOut="lolite()" onClick="logVariable('blocked_contacts')" href="../../../_variables/blocked_contacts.html">$blocked_contacts</a> ) )
<a name="l412"><span class="linenum"> 412</span></a>          { // There is at least one blocked recipient
<a name="l413"><span class="linenum"> 413</span></a>              if ( ! empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l414"><span class="linenum"> 414</span></a>              {
<a name="l415"><span class="linenum"> 415</span></a>                  <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l416"><span class="linenum"> 416</span></a>              }
<a name="l417"><span class="linenum"> 417</span></a>              <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The following users don\'t want you to contact them at this time: ' ).' '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it4983" onMouseOver="hilite(4983)" onMouseOut="lolite()" onClick="logVariable('blocked_contacts')" href="../../../_variables/blocked_contacts.html">$blocked_contacts</a> );
<a name="l418"><span class="linenum"> 418</span></a>          }
<a name="l419"><span class="linenum"> 419</span></a>  
<a name="l420"><span class="linenum"> 420</span></a>          if( empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l421"><span class="linenum"> 421</span></a>          { // no errors yet
<a name="l422"><span class="linenum"> 422</span></a>              <a class="var it5158" onMouseOver="hilite(5158)" onMouseOut="lolite()" onClick="logVariable('recipients_count')" href="../../../_variables/recipients_count.html">$recipients_count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it4722" onMouseOver="hilite(4722)" onMouseOut="lolite()" onClick="logVariable('recipients_list')" href="../../../_variables/recipients_list.html">$recipients_list</a> );
<a name="l423"><span class="linenum"> 423</span></a>              if( ( <a class="var it5158" onMouseOver="hilite(5158)" onMouseOut="lolite()" onClick="logVariable('recipients_count')" href="../../../_variables/recipients_count.html">$recipients_count</a> &gt; 1 ) &amp;&amp; ( <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'thrdtype', 'string', 'discussion' ) != 'discussion' ) )
<a name="l424"><span class="linenum"> 424</span></a>              { // user want's to send more then one individual messages, check if is allowed
<a name="l425"><span class="linenum"> 425</span></a>                  <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>( <a class="var it1075" onMouseOver="hilite(1075)" onMouseOut="lolite()" onClick="logVariable('max_new_threads')" href="../../../_variables/max_new_threads.html">$max_new_threads</a>, <a class="var it5030" onMouseOver="hilite(5030)" onMouseOut="lolite()" onClick="logVariable('new_threads_count')" href="../../../_variables/new_threads_count.html">$new_threads_count</a> ) = <a class="function" onClick="logFunction('get_todays_thread_settings')" href="../../../_functions/get_todays_thread_settings.html" onMouseOver="funcPopup(event,'get_todays_thread_settings')">get_todays_thread_settings</a>();
<a name="l426"><span class="linenum"> 426</span></a>                  if( ( !empty( <a class="var it1075" onMouseOver="hilite(1075)" onMouseOut="lolite()" onClick="logVariable('max_new_threads')" href="../../../_variables/max_new_threads.html">$max_new_threads</a> ) ) &amp;&amp; ( ( <a class="var it1075" onMouseOver="hilite(1075)" onMouseOut="lolite()" onClick="logVariable('max_new_threads')" href="../../../_variables/max_new_threads.html">$max_new_threads</a> - <a class="var it5030" onMouseOver="hilite(5030)" onMouseOut="lolite()" onClick="logVariable('new_threads_count')" href="../../../_variables/new_threads_count.html">$new_threads_count</a> ) &lt; <a class="var it5158" onMouseOver="hilite(5158)" onMouseOut="lolite()" onClick="logVariable('recipients_count')" href="../../../_variables/recipients_count.html">$recipients_count</a> ) )
<a name="l427"><span class="linenum"> 427</span></a>                  { // user has a create thread limit, and recipients number exceed that limit
<a name="l428"><span class="linenum"> 428</span></a>                      <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= '&lt;br /&gt;';
<a name="l429"><span class="linenum"> 429</span></a>                      <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> .= sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You are unable to send %d individual messages, because it exceeds your remaining daily limit of %d.' ), <a class="var it5158" onMouseOver="hilite(5158)" onMouseOut="lolite()" onClick="logVariable('recipients_count')" href="../../../_variables/recipients_count.html">$recipients_count</a>, <a class="var it1075" onMouseOver="hilite(1075)" onMouseOut="lolite()" onClick="logVariable('max_new_threads')" href="../../../_variables/max_new_threads.html">$max_new_threads</a> - <a class="var it5030" onMouseOver="hilite(5030)" onMouseOut="lolite()" onClick="logVariable('new_threads_count')" href="../../../_variables/new_threads_count.html">$new_threads_count</a> );
<a name="l430"><span class="linenum"> 430</span></a>                  }
<a name="l431"><span class="linenum"> 431</span></a>              }
<a name="l432"><span class="linenum"> 432</span></a>          }
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>          if( ! empty( <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> ) )
<a name="l435"><span class="linenum"> 435</span></a>          {    // show error
<a name="l436"><span class="linenum"> 436</span></a>              <a class="function" onClick="logFunction('param_error')" href="../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( <a class="var it920" onMouseOver="hilite(920)" onMouseOut="lolite()" onClick="logVariable('var')" href="../../../_variables/var.html">$var</a>, <a class="var it5148" onMouseOver="hilite(5148)" onMouseOut="lolite()" onClick="logVariable('error_msg')" href="../../../_variables/error_msg.html">$error_msg</a> );
<a name="l437"><span class="linenum"> 437</span></a>              return false;
<a name="l438"><span class="linenum"> 438</span></a>          }
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>          return true;
<a name="l441"><span class="linenum"> 441</span></a>      }
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>      <span class="comment">/**</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     * Delete thread and dependencies from database</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     */</span>
<a name="l447"><span class="linenum"> 447</span></a>  	function <a class="function" onClick="logFunction('dbdelete')" href="../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>()
<a name="l448"><span class="linenum"> 448</span></a>      {
<a name="l449"><span class="linenum"> 449</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == 0 ) <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Non persistant object cannot be deleted!' );
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>          return parent::<a class="function" onClick="logFunction('dbdelete')" href="../../../_functions/dbdelete.html" onMouseOver="funcPopup(event,'dbdelete')">dbdelete</a>();
<a name="l452"><span class="linenum"> 452</span></a>      }
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>  
<a name="l455"><span class="linenum"> 455</span></a>      <span class="comment">/**</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     * Load recipients of the current thread</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">     *</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">     * @return recipients list</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">     */</span>
<a name="l460"><span class="linenum"> 460</span></a>  	function <a class="function" onClick="logFunction('load_recipients')" href="../../../_functions/load_recipients.html" onMouseOver="funcPopup(event,'load_recipients')">load_recipients</a>()
<a name="l461"><span class="linenum"> 461</span></a>      {
<a name="l462"><span class="linenum"> 462</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>          if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a> ) &amp;&amp; ( !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) ) )
<a name="l465"><span class="linenum"> 465</span></a>          {
<a name="l466"><span class="linenum"> 466</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l467"><span class="linenum"> 467</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'tsta_user_ID' );
<a name="l468"><span class="linenum"> 468</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_messaging__threadstatus' );
<a name="l469"><span class="linenum"> 469</span></a>              <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'tsta_thread_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a> = array();
<a name="l472"><span class="linenum"> 472</span></a>              foreach( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>() ) as <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a> )
<a name="l473"><span class="linenum"> 473</span></a>              {
<a name="l474"><span class="linenum"> 474</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a>[] = <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('tsta_user_ID')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/tsta_user_ID.html">tsta_user_ID</a>;
<a name="l475"><span class="linenum"> 475</span></a>              }
<a name="l476"><span class="linenum"> 476</span></a>          }
<a name="l477"><span class="linenum"> 477</span></a>  
<a name="l478"><span class="linenum"> 478</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a>;
<a name="l479"><span class="linenum"> 479</span></a>      }
<a name="l480"><span class="linenum"> 480</span></a>  
<a name="l481"><span class="linenum"> 481</span></a>  
<a name="l482"><span class="linenum"> 482</span></a>      <span class="comment">/**</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">     * Check permission on a persona</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">     *</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">     * @return boolean true if granted</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment">     */</span>
<a name="l487"><span class="linenum"> 487</span></a>  	function <a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a>, <a class="var it3959" onMouseOver="hilite(3959)" onMouseOut="lolite()" onClick="logVariable('assert')" href="../../../_variables/assert.html">$assert</a> = true )
<a name="l488"><span class="linenum"> 488</span></a>      {
<a name="l489"><span class="linenum"> 489</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a>, <a class="var it3959" onMouseOver="hilite(3959)" onMouseOut="lolite()" onClick="logVariable('assert')" href="../../../_variables/assert.html">$assert</a> );
<a name="l492"><span class="linenum"> 492</span></a>      }
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>  
<a name="l495"><span class="linenum"> 495</span></a>      <span class="comment">/**</span>
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">     * Check if user is recipient of the current thread</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">     *</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">     * @param user ID</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">     * @return boolean true if user is recipient, false otherwise</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">     */</span>
<a name="l501"><span class="linenum"> 501</span></a>  	function <a class="function" onClick="logFunction('check_thread_recipient')" href="../../../_functions/check_thread_recipient.html" onMouseOver="funcPopup(event,'check_thread_recipient')">check_thread_recipient</a>( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> )
<a name="l502"><span class="linenum"> 502</span></a>      {
<a name="l503"><span class="linenum"> 503</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_recipients')" href="../../../_functions/load_recipients.html" onMouseOver="funcPopup(event,'load_recipients')">load_recipients</a>();
<a name="l504"><span class="linenum"> 504</span></a>          return <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a> );
<a name="l505"><span class="linenum"> 505</span></a>      }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>      <span class="comment">/**</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     * Check if current User is allowed to reply on this thread.</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">     * Users are allowed to reply only to those threads where they are involved and there is at least one user between the recipients who didn't block the User.</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">     * Note: Currently it doesn't matter if the sender is in the recipients user's contact list or not except in that case when the sender is blocked.</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">     *</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">     * @return boolean true if current User is allowed, false otherwise</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     */</span>
<a name="l515"><span class="linenum"> 515</span></a>  	function <a class="function" onClick="logFunction('check_allow_reply')" href="../../../_functions/check_allow_reply.html" onMouseOver="funcPopup(event,'check_allow_reply')">check_allow_reply</a>()
<a name="l516"><span class="linenum"> 516</span></a>      {
<a name="l517"><span class="linenum"> 517</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">        // load thread recipients</span>
<a name="l520"><span class="linenum"> 520</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_recipients')" href="../../../_functions/load_recipients.html" onMouseOver="funcPopup(event,'load_recipients')">load_recipients</a>();
<a name="l521"><span class="linenum"> 521</span></a>  
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">        // check if user is involved in recipients list</span>
<a name="l523"><span class="linenum"> 523</span></a>          if( ! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_thread_recipient')" href="../../../_functions/check_thread_recipient.html" onMouseOver="funcPopup(event,'check_thread_recipient')">check_thread_recipient</a>( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l524"><span class="linenum"> 524</span></a>          { // Deny to write a new reply for not involved users
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">            // asimo&gt; We may call debug_die() here because this is not a correct state of the application</span>
<a name="l526"><span class="linenum"> 526</span></a>              <a class="function" onClick="logFunction('param_error')" href="../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( '', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You cannot post a message in a thread you\'re not involved in.') );
<a name="l527"><span class="linenum"> 527</span></a>              return false;
<a name="l528"><span class="linenum"> 528</span></a>          }
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment">        // check if all of the recipients are closed</span>
<a name="l531"><span class="linenum"> 531</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l532"><span class="linenum"> 532</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;<a class="function" onClick="logFunction('load_where')" href="../../../_functions/load_where.html" onMouseOver="funcPopup(event,'load_where')">load_where</a>( 'user_ID IN ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a> ).' )' );
<a name="l533"><span class="linenum"> 533</span></a>          <a class="var it5160" onMouseOver="hilite(5160)" onMouseOut="lolite()" onClick="logVariable('all_closed')" href="../../../_variables/all_closed.html">$all_closed</a> = true;
<a name="l534"><span class="linenum"> 534</span></a>          foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('recipients_list')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/recipients_list.html">recipients_list</a> as <a class="var it4720" onMouseOver="hilite(4720)" onMouseOut="lolite()" onClick="logVariable('recipient_ID')" href="../../../_variables/recipient_ID.html">$recipient_ID</a> )
<a name="l535"><span class="linenum"> 535</span></a>          {
<a name="l536"><span class="linenum"> 536</span></a>              if( <a class="var it4720" onMouseOver="hilite(4720)" onMouseOut="lolite()" onClick="logVariable('recipient_ID')" href="../../../_variables/recipient_ID.html">$recipient_ID</a> == <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> )
<a name="l537"><span class="linenum"> 537</span></a>              { // skip current User
<a name="l538"><span class="linenum"> 538</span></a>                  continue;
<a name="l539"><span class="linenum"> 539</span></a>              }
<a name="l540"><span class="linenum"> 540</span></a>              <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a> = <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it4720" onMouseOver="hilite(4720)" onMouseOut="lolite()" onClick="logVariable('recipient_ID')" href="../../../_variables/recipient_ID.html">$recipient_ID</a>, false );
<a name="l541"><span class="linenum"> 541</span></a>              if( <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a> &amp;&amp; <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('recipient_User')" href="../../../_variables/recipient_User.html">$recipient_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_receive_pm' ) )
<a name="l542"><span class="linenum"> 542</span></a>              { // this recipient exists and status allows to receive private messages
<a name="l543"><span class="linenum"> 543</span></a>                  <a class="var it5160" onMouseOver="hilite(5160)" onMouseOut="lolite()" onClick="logVariable('all_closed')" href="../../../_variables/all_closed.html">$all_closed</a> = false;
<a name="l544"><span class="linenum"> 544</span></a>                  break;
<a name="l545"><span class="linenum"> 545</span></a>              }
<a name="l546"><span class="linenum"> 546</span></a>          }
<a name="l547"><span class="linenum"> 547</span></a>          if( <a class="var it5160" onMouseOver="hilite(5160)" onMouseOut="lolite()" onClick="logVariable('all_closed')" href="../../../_variables/all_closed.html">$all_closed</a> )
<a name="l548"><span class="linenum"> 548</span></a>          { // all recipients are closed or deleted
<a name="l549"><span class="linenum"> 549</span></a>              <a class="function" onClick="logFunction('param_error')" href="../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( '', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'You cannot reply because all the other users involved in this conversation have closed their account.' ) );
<a name="l550"><span class="linenum"> 550</span></a>              return false;
<a name="l551"><span class="linenum"> 551</span></a>          }
<a name="l552"><span class="linenum"> 552</span></a>  
<a name="l553"><span class="linenum"> 553</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'perm_messaging', 'delete' ) )
<a name="l554"><span class="linenum"> 554</span></a>          { // users with delete permission are always able to reply to a conversation where they are involved
<a name="l555"><span class="linenum"> 555</span></a>              return true;
<a name="l556"><span class="linenum"> 556</span></a>          }
<a name="l557"><span class="linenum"> 557</span></a>  
<a name="l558"><span class="linenum"> 558</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '<a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( ts.tsta_user_ID )' );
<a name="l561"><span class="linenum"> 561</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_messaging__threadstatus ts
<a name="l562"><span class="linenum"> 562</span></a>                                  LEFT JOIN T_messaging__contact mc ON ts.tsta_user_ID = mc.mct_from_user_ID
<a name="l563"><span class="linenum"> 563</span></a>                                              AND mc.mct_to_user_ID = '.<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">        // don't select current User</span>
<a name="l565"><span class="linenum"> 565</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'ts.tsta_user_ID &lt;&gt; '.<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment">        // restrict to the given thread</span>
<a name="l567"><span class="linenum"> 567</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'ts.tsta_thread_ID ='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">        // sender is not blocked or is not present in all recipient's contact list</span>
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( '( mc.mct_blocked IS NULL OR mc.mct_blocked = 0 )' );
<a name="l570"><span class="linenum"> 570</span></a>  
<a name="l571"><span class="linenum"> 571</span></a>          if( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), 0, NULL, 'Count all users whou are involved in the given thread but not the current User and didn\'t block the current User' ) &gt; 0 )
<a name="l572"><span class="linenum"> 572</span></a>          { // there is at least one recipient who accept the reply
<a name="l573"><span class="linenum"> 573</span></a>              return true;
<a name="l574"><span class="linenum"> 574</span></a>          }
<a name="l575"><span class="linenum"> 575</span></a>  
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">        // all recipients have blocked the current User</span>
<a name="l577"><span class="linenum"> 577</span></a>          <a class="function" onClick="logFunction('param_error')" href="../../../_functions/param_error.html" onMouseOver="funcPopup(event,'param_error')">param_error</a>( '', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'The recipient(s) do not want you to contact them at this time.' ) );
<a name="l578"><span class="linenum"> 578</span></a>          return false;
<a name="l579"><span class="linenum"> 579</span></a>      }
<a name="l580"><span class="linenum"> 580</span></a>  }
<a name="l581"><span class="linenum"> 581</span></a>  
<a name="l582"><span class="linenum"> 582</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_todays_thread_settings': ['get_todays_thread_settings', 'Get current User max new threads settings for today ', [['inc/messaging/model','_messaging.funcs.php',1424]], 2],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'from_add': ['from_add', 'Extends the FROM clause. ', [['inc/_core/model/db','_sql.class.php',226]], 200],
'delete': ['delete', '', [['inc/_ext/pclzip','pclzip.lib.php',1007],['inc/plugins/model','_pluginusersettings.class.php',89],['inc/settings/model','_abstractsettings.class.php',504],['inc/users/model','_usersettings.class.php',209],['inc/sessions/model','_session.class.php',483],['inc/plugins/model','_pluginsettings.class.php',65],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',168],['inc/users/model','_groupsettings.class.php',181]], 99],
'set_from_request': ['set_from_request', 'Set a parameter from a Request form value. ', [['inc/_core/model/dataobjects','_dataobject.class.php',982]], 128],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['inc/_core','_param.funcs.php',1678],['inc/_core/model/dataobjects','_dataobject.class.php',890]], 127],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['inc/_core/model/db','_db.class.php',1083]], 152],
'check_status': ['check_status', 'Check if user status permits the requested action ', [['inc/users/model','_user.class.php',2890]], 83],
'dbdelete': ['dbdelete', 'Trigger event AfterItemDelete after calling parent method. ', [['inc/items/model','_item.class.php',5506],['inc/_core/model/dataobjects','_dataobject.class.php',591],['inc/users/model','_user.class.php',3376],['inc/messaging/model','_message.class.php',582],['inc/messaging/model','_thread.class.php',444],['inc/items/model','_itemtype.class.php',451],['inc/files/model','_filetype.class.php',271],['inc/collections/model','_blog.class.php',2664],['inc/comments/model','_comment.class.php',3872],['inc/users/model','_group.class.php',497]], 62],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'thread': ['thread', 'Constructor ', [['inc/messaging/model','_thread.class.php',43]], 7],
'set_string_from_param': ['set_string_from_param', 'Set a string parameter from a Request form value. ', [['inc/_core/model/dataobjects','_dataobject.class.php',1009]], 15],
'dataobject': ['dataobject', 'Constructor ', [['inc/_core/model/dataobjects','_dataobject.class.php',65]], 35],
'where_and': ['where_and', 'Extends the WHERE clause with AND ', [['inc/_core/model/db','_sql.class.php',247]], 369],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['inc/_core/model/db','_db.class.php',952]], 166],
'param_error': ['param_error', 'Add an error for a variable, either to the Form\'s field and/or the global {@link $Messages} object. ', [['inc/_core','_param.funcs.php',1524]], 148],
'where': ['where', '', [['inc/_core/model/db','_sql.class.php',242]], 288],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'check_blocked_contacts': ['check_blocked_contacts', 'Check blocked contacts in recipients list. Note: If current User has only reply permission then users who didn\'t have the current User in their contact list will be considerated as blocked contacts! ', [['inc/messaging/model','_messaging.funcs.php',49]], 2],
'param_check__recipients': ['param_check__recipients', 'Check if recipients available in database ', [['inc/messaging/model','_thread.class.php',235]], 1],
'get_delete_cascades': ['get_delete_cascades', 'Get delete cascade settings ', [['inc/email_campaigns/model','_emailcampaign.class.php',71],['inc/_core/model/dataobjects','_dataobject.class.php',152],['inc/users/model','_user.class.php',278],['inc/skins/model','_skin.class.php',95],['inc/messaging/model','_message.class.php',111],['inc/messaging/model','_thread.class.php',171],['inc/items/model','_itemtype.class.php',134],['inc/collections/model','_blog.class.php',190],['inc/comments/model','_comment.class.php',274],['inc/users/model','_userfield.class.php',74],['inc/links/model','_link.class.php',108],['inc/items/model','_itemtag.class.php',48],['inc/sessions/model','_goal.class.php',62],['inc/items/model','_itemlight.class.php',175]], 1],
'load_from_request': ['load_from_request', 'Init filter params from Request params ', [['inc/items/model','_itemlistlight.class.php',324],['inc/items/model','_item.class.php',570],['inc/widgets/widgets','_coll_tag_cloud.widget.php',37],['inc/tools/model','_emailaddress.class.php',90],['inc/email_campaigns/model','_emailcampaign.class.php',186],['inc/maintenance/model','_backup.class.php',159],['inc/items/model','_itemstatus.class.php',63],['inc/sessions/model','_domain.class.php',54],['inc/regional/model','_country.class.php',70],['inc/users/model','_user.class.php',341],['inc/skins/model','_skin.class.php',158],['inc/comments/model','_commentlist.class.php',253],['inc/messaging/model','_message.class.php',124],['inc/users/model','_userlist.class.php',260],['inc/messaging/model','_thread.class.php',186],['inc/items/model','_itemtype.class.php',148],['inc/regional/model','_subregion.class.php',78],['inc/files/model','_filetype.class.php',61],['inc/collections/model','_blog.class.php',375],['inc/cron/model','_cronjob.class.php',107],['inc/users/model','_userfield.class.php',172],['inc/regional/model','_city.class.php',68],['inc/slugs/model','_slug.class.php',94],['inc/users/model','_group.class.php',122],['inc/users/model','_invitation.class.php',69],['inc/regional/model','_currency.class.php',62],['inc/widgets/model','_widget.class.php',138],['inc/regional/model','_region.class.php',66],['inc/chapters/model','_chapter.class.php',286],['inc/antispam/model','_iprange.class.php',86],['inc/sessions/model','_goalcat.class.php',59],['inc/items/model','_itemtag.class.php',75],['inc/sessions/model','_goal.class.php',112],['inc/users/model','_userfieldgroup.class.php',64],['inc/users/model','_organization.class.php',67]], 82],
'param_errors_detected': ['param_errors_detected', 'Check if there have been validation errors ', [['inc/_core','_param.funcs.php',1480]], 61],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'from': ['from', '', [['inc/_core/model/db','_sql.class.php',221]], 513],
'utf8_strtolower': ['utf8_strtolower', 'utf8_strtolower( ) ', [['inc/_ext','_portable_utf8.php',1433]], 74],
'check_allow_reply': ['check_allow_reply', 'Check if current User is allowed to reply on this thread. Users are allowed to reply only to those threads where they are involved and there is at least one user between the recipients who didn\'t block the User. Note: Currently it doesn\'t matter if the sender is in the recipients user\'s contact list or not except in that case when the sender is blocked. ', [['inc/messaging/model','_thread.class.php',508]], 1],
'load_recipients': ['load_recipients', 'Load recipients of the current thread ', [['inc/messaging/model','_thread.class.php',455]], 5],
'has_cross_country_restriction': ['has_cross_country_restriction', 'Check if browse users from different countries is restricted for the current User ', [['inc/users/model','_user.funcs.php',3252]], 14],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'load_where': ['load_where', 'Load a set of objects into the cache. ', [['inc/_core/model/dataobjects','_dataobjectcache.class.php',236]], 19],
'get_assoc': ['get_assoc', 'Function to get the second column from the cached result indexed by the first column ', [['inc/_core/model/db','_db.class.php',1057]], 60],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'check_thread_recipient': ['check_thread_recipient', 'Check if user is recipient of the current thread ', [['inc/messaging/model','_thread.class.php',495]], 7],
'get_class_db_config': ['get_class_db_config', 'Get this class db table config params ', [['inc/_core/model/dataobjects','_dataobject.class.php',104],['inc/users/model','_user.class.php',231],['inc/messaging/model','_message.class.php',87],['inc/messaging/model','_thread.class.php',147],['inc/sessions/model','_session.class.php',259],['inc/comments/model','_comment.class.php',250],['inc/links/model','_link.class.php',84],['inc/chapters/model','_chapter.class.php',120],['inc/files/model','_file.class.php',250],['inc/items/model','_itemlight.class.php',199]], 7],
'get_manual_link': ['get_manual_link', 'Generate a link to a online help resource. testing the concept of online help (aka webhelp). this function should be relocated somewhere better if it is taken onboard by the project ', [['inc/_core','_misc.funcs.php',4935]], 284],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'select': ['select', 'Set SELECT clause ', [['inc/_core/model/db','_sql.class.php',196],['inc/_core/ui/forms','_form.class.php',2189],['inc/_core/model/db','_db.class.php',454]], 475],
'list': ['list', '', [['rsc/js/bootstrap','typeahead.bundle.js',156]], 105],
'order_by': ['order_by', '', [['inc/_core/model/db','_sql.class.php',321]], 85],
'param_check_not_empty': ['param_check_not_empty', '', [['inc/_core','_param.funcs.php',564]], 53],
'str_replace': ['str_replace', '', [], 531],
'array_unique': ['array_unique', '', [], 38],
'implode': ['implode', '', [], 571],
'trim': ['trim', '', [], 398],
'in_array': ['in_array', '', [], 417],
'array_merge': ['array_merge', '', [], 702],
'explode': ['explode', '', [], 263],
'count': ['count', '', [], 928],
'defined': ['defined', '', [], 962]};
CLASS_DATA={
'dataobject': ['dataobject', 'Data Object Base Class ', [['inc/_core/model/dataobjects','_dataobject.class.php',18]], 37],
'thread': ['thread', 'Thread Class ', [['inc/messaging/model','_thread.class.php',19]], 35],
'sql': ['sql', 'SQL class: help constructing queries ', [['inc/_core/model/db','_sql.class.php',17]], 334]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
