<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/collections/model/_blog.funcs.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='inc/collections/model';
filename='_blog.funcs.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/collections/model/</a> -> <a href="_blog.funcs.php.html">_blog.funcs.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_blog.funcs.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_blog.funcs.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements Blog handling functions.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2006 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @package evocore</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Update the advanced user/group permissions for edited blog</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @param int Blog ID</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @param string 'user' or 'group'</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  function <a class="function" onClick="logFunction('blog_update_perms')" href="../../../_functions/blog_update_perms.html" onMouseOver="funcPopup(event,'blog_update_perms')">blog_update_perms</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = 'user' )
<a name="l25"><span class="linenum">  25</span></a>  {
<a name="l26"><span class="linenum">  26</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>      <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">     * @var User</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">     */</span>
<a name="l31"><span class="linenum">  31</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>      if( <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> == 'user' )
<a name="l34"><span class="linenum">  34</span></a>      {
<a name="l35"><span class="linenum">  35</span></a>          <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> = 'T_coll_user_perms';
<a name="l36"><span class="linenum">  36</span></a>          <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a> = 'bloguser_';
<a name="l37"><span class="linenum">  37</span></a>          <a class="var it9285" onMouseOver="hilite(9285)" onMouseOut="lolite()" onClick="logVariable('ID_field')" href="../../../_variables/ID_field.html">$ID_field</a> = 'bloguser_user_ID';
<a name="l38"><span class="linenum">  38</span></a>      }
<a name="l39"><span class="linenum">  39</span></a>      else
<a name="l40"><span class="linenum">  40</span></a>      {
<a name="l41"><span class="linenum">  41</span></a>          <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> = 'T_coll_group_perms';
<a name="l42"><span class="linenum">  42</span></a>          <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a> = 'bloggroup_';
<a name="l43"><span class="linenum">  43</span></a>          <a class="var it9285" onMouseOver="hilite(9285)" onMouseOut="lolite()" onClick="logVariable('ID_field')" href="../../../_variables/ID_field.html">$ID_field</a> = 'bloggroup_group_ID';
<a name="l44"><span class="linenum">  44</span></a>      }
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">    // Get affected user/group IDs:</span>
<a name="l47"><span class="linenum">  47</span></a>      <a class="var it9286" onMouseOver="hilite(9286)" onMouseOut="lolite()" onClick="logVariable('IDs')" href="../../../_variables/IDs.html">$IDs</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>.'_IDs', '/^[0-9]+(,[0-9]+)*$/', '' );
<a name="l48"><span class="linenum">  48</span></a>      <a class="var it4042" onMouseOver="hilite(4042)" onMouseOut="lolite()" onClick="logVariable('ID_array')" href="../../../_variables/ID_array.html">$ID_array</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it9286" onMouseOver="hilite(9286)" onMouseOut="lolite()" onClick="logVariable('IDs')" href="../../../_variables/IDs.html">$IDs</a> );
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">    // Can the current user touch advanced admin permissions?</span>
<a name="l51"><span class="linenum">  51</span></a>      if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_admin', 'edit', false, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ) )
<a name="l52"><span class="linenum">  52</span></a>      { // We have no permission to touch advanced admins!
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">        // Get the users/groups which are advanced admins</span>
<a name="l55"><span class="linenum">  55</span></a>          <a class="var it9287" onMouseOver="hilite(9287)" onMouseOut="lolite()" onClick="logVariable('admins_ID_array')" href="../../../_variables/admins_ID_array.html">$admins_ID_array</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_col')" href="../../../_functions/get_col.html" onMouseOver="funcPopup(event,'get_col')">get_col</a>( &quot;SELECT {<a class="var it9285" onMouseOver="hilite(9285)" onMouseOut="lolite()" onClick="logVariable('ID_field')" href="../../../_variables/ID_field.html">$ID_field</a>}
<a name="l56"><span class="linenum">  56</span></a>                                                                                  FROM <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a>
<a name="l57"><span class="linenum">  57</span></a>                                                                               WHERE {<a class="var it9285" onMouseOver="hilite(9285)" onMouseOut="lolite()" onClick="logVariable('ID_field')" href="../../../_variables/ID_field.html">$ID_field</a>} IN (&quot;.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',',<a class="var it4042" onMouseOver="hilite(4042)" onMouseOut="lolite()" onClick="logVariable('ID_array')" href="../../../_variables/ID_array.html">$ID_array</a>).&quot;)
<a name="l58"><span class="linenum">  58</span></a>                                                                                              AND {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}blog_ID = <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>
<a name="l59"><span class="linenum">  59</span></a>                                                                                              AND {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_admin &lt;&gt; 0&quot; );
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">        // Take the admins out of the list:</span>
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it4042" onMouseOver="hilite(4042)" onMouseOut="lolite()" onClick="logVariable('ID_array')" href="../../../_variables/ID_array.html">$ID_array</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it4042" onMouseOver="hilite(4042)" onMouseOut="lolite()" onClick="logVariable('ID_array')" href="../../../_variables/ID_array.html">$ID_array</a>, <a class="var it9287" onMouseOver="hilite(9287)" onMouseOut="lolite()" onClick="logVariable('admins_ID_array')" href="../../../_variables/admins_ID_array.html">$admins_ID_array</a> );
<a name="l63"><span class="linenum">  63</span></a>      }
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      if( empty( <a class="var it4042" onMouseOver="hilite(4042)" onMouseOut="lolite()" onClick="logVariable('ID_array')" href="../../../_variables/ID_array.html">$ID_array</a> ) )
<a name="l66"><span class="linenum">  66</span></a>      {
<a name="l67"><span class="linenum">  67</span></a>          return;
<a name="l68"><span class="linenum">  68</span></a>      }
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">    // Delete old perms for this blog:</span>
<a name="l71"><span class="linenum">  71</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;DELETE FROM <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a>
<a name="l72"><span class="linenum">  72</span></a>                                  WHERE {<a class="var it9285" onMouseOver="hilite(9285)" onMouseOut="lolite()" onClick="logVariable('ID_field')" href="../../../_variables/ID_field.html">$ID_field</a>} IN (&quot;.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',',<a class="var it4042" onMouseOver="hilite(4042)" onMouseOut="lolite()" onClick="logVariable('ID_array')" href="../../../_variables/ID_array.html">$ID_array</a>).&quot;)
<a name="l73"><span class="linenum">  73</span></a>                                              AND {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}blog_ID = &quot;.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> );
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>      <a class="var it9288" onMouseOver="hilite(9288)" onMouseOut="lolite()" onClick="logVariable('inserted_values')" href="../../../_variables/inserted_values.html">$inserted_values</a> = array();
<a name="l76"><span class="linenum">  76</span></a>      foreach( <a class="var it4042" onMouseOver="hilite(4042)" onMouseOut="lolite()" onClick="logVariable('ID_array')" href="../../../_variables/ID_array.html">$ID_array</a> as <a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a> )
<a name="l77"><span class="linenum">  77</span></a>      { // Check new permissions for each user:
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">        // Use checkboxes</span>
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a> = array();
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it9291" onMouseOver="hilite(9291)" onMouseOut="lolite()" onClick="logVariable('ismember')" href="../../../_variables/ismember.html">$ismember</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_ismember_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it9292" onMouseOver="hilite(9292)" onMouseOut="lolite()" onClick="logVariable('can_be_assignee')" href="../../../_variables/can_be_assignee.html">$can_be_assignee</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_can_be_assignee_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>          <a class="var it9293" onMouseOver="hilite(9293)" onMouseOut="lolite()" onClick="logVariable('perm_published')" href="../../../_variables/perm_published.html">$perm_published</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_published_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', '' );
<a name="l86"><span class="linenum">  86</span></a>          if( !empty(<a class="var it9293" onMouseOver="hilite(9293)" onMouseOut="lolite()" onClick="logVariable('perm_published')" href="../../../_variables/perm_published.html">$perm_published</a>) ) <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>[] = 'published';
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>          <a class="var it9294" onMouseOver="hilite(9294)" onMouseOut="lolite()" onClick="logVariable('perm_community')" href="../../../_variables/perm_community.html">$perm_community</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_community_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', '' );
<a name="l89"><span class="linenum">  89</span></a>          if( !empty(<a class="var it9294" onMouseOver="hilite(9294)" onMouseOut="lolite()" onClick="logVariable('perm_community')" href="../../../_variables/perm_community.html">$perm_community</a>) ) <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>[] = 'community';
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>          <a class="var it9295" onMouseOver="hilite(9295)" onMouseOut="lolite()" onClick="logVariable('perm_protected')" href="../../../_variables/perm_protected.html">$perm_protected</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_protected_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', '' );
<a name="l92"><span class="linenum">  92</span></a>          if( !empty(<a class="var it9295" onMouseOver="hilite(9295)" onMouseOut="lolite()" onClick="logVariable('perm_protected')" href="../../../_variables/perm_protected.html">$perm_protected</a>) ) <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>[] = 'protected';
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>          <a class="var it9296" onMouseOver="hilite(9296)" onMouseOut="lolite()" onClick="logVariable('perm_private')" href="../../../_variables/perm_private.html">$perm_private</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_private_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', '' );
<a name="l95"><span class="linenum">  95</span></a>          if( !empty(<a class="var it9296" onMouseOver="hilite(9296)" onMouseOut="lolite()" onClick="logVariable('perm_private')" href="../../../_variables/perm_private.html">$perm_private</a>) ) <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>[] = 'private';
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it9297" onMouseOver="hilite(9297)" onMouseOut="lolite()" onClick="logVariable('perm_review')" href="../../../_variables/perm_review.html">$perm_review</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_review_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', '' );
<a name="l98"><span class="linenum">  98</span></a>          if( !empty(<a class="var it9297" onMouseOver="hilite(9297)" onMouseOut="lolite()" onClick="logVariable('perm_review')" href="../../../_variables/perm_review.html">$perm_review</a>) ) <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>[] = 'review';
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it9298" onMouseOver="hilite(9298)" onMouseOut="lolite()" onClick="logVariable('perm_draft')" href="../../../_variables/perm_draft.html">$perm_draft</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_draft_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', '' );
<a name="l101"><span class="linenum"> 101</span></a>          if( !empty(<a class="var it9298" onMouseOver="hilite(9298)" onMouseOut="lolite()" onClick="logVariable('perm_draft')" href="../../../_variables/perm_draft.html">$perm_draft</a>) ) <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>[] = 'draft';
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>          <a class="var it9299" onMouseOver="hilite(9299)" onMouseOut="lolite()" onClick="logVariable('perm_deprecated')" href="../../../_variables/perm_deprecated.html">$perm_deprecated</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_deprecated_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', '' );
<a name="l104"><span class="linenum"> 104</span></a>          if( !empty(<a class="var it9299" onMouseOver="hilite(9299)" onMouseOut="lolite()" onClick="logVariable('perm_deprecated')" href="../../../_variables/perm_deprecated.html">$perm_deprecated</a>) ) <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>[] = 'deprecated';
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>          <a class="var it9300" onMouseOver="hilite(9300)" onMouseOut="lolite()" onClick="logVariable('perm_redirected')" href="../../../_variables/perm_redirected.html">$perm_redirected</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_redirected_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', '' );
<a name="l107"><span class="linenum"> 107</span></a>          if( !empty(<a class="var it9300" onMouseOver="hilite(9300)" onMouseOut="lolite()" onClick="logVariable('perm_redirected')" href="../../../_variables/perm_redirected.html">$perm_redirected</a>) ) <a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>[] = 'redirected';
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>          <a class="var it9301" onMouseOver="hilite(9301)" onMouseOut="lolite()" onClick="logVariable('perm_item_type')" href="../../../_variables/perm_item_type.html">$perm_item_type</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_item_type_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', 'standard' );
<a name="l110"><span class="linenum"> 110</span></a>          <a class="var it6136" onMouseOver="hilite(6136)" onMouseOut="lolite()" onClick="logVariable('perm_edit')" href="../../../_variables/perm_edit.html">$perm_edit</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_edit_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', 'no' );
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>          <a class="var it9302" onMouseOver="hilite(9302)" onMouseOut="lolite()" onClick="logVariable('perm_delpost')" href="../../../_variables/perm_delpost.html">$perm_delpost</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_delpost_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it9303" onMouseOver="hilite(9303)" onMouseOut="lolite()" onClick="logVariable('perm_edit_ts')" href="../../../_variables/perm_edit_ts.html">$perm_edit_ts</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_edit_ts_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>          <a class="var it9304" onMouseOver="hilite(9304)" onMouseOut="lolite()" onClick="logVariable('perm_delcmts')" href="../../../_variables/perm_delcmts.html">$perm_delcmts</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_delcmts_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l116"><span class="linenum"> 116</span></a>          <a class="var it9305" onMouseOver="hilite(9305)" onMouseOut="lolite()" onClick="logVariable('perm_recycle_owncmts')" href="../../../_variables/perm_recycle_owncmts.html">$perm_recycle_owncmts</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_recycle_owncmts_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it9306" onMouseOver="hilite(9306)" onMouseOut="lolite()" onClick="logVariable('perm_vote_spam_comments')" href="../../../_variables/perm_vote_spam_comments.html">$perm_vote_spam_comments</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_vote_spam_cmts_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> = 0;
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> += <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_published_cmt_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 ) ? <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'published' ) : 0;
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> += <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_community_cmt_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 ) ? <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'community' ) : 0;
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> += <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_protected_cmt_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 ) ? <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'protected' ) : 0;
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> += <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_private_cmt_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 ) ? <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'private' ) : 0;
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> += <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_review_cmt_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 ) ? <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'review' ) : 0;
<a name="l124"><span class="linenum"> 124</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> += <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_draft_cmt_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 ) ? <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'draft' ) : 0;
<a name="l125"><span class="linenum"> 125</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> += <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_deprecated_cmt_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 ) ? <a class="function" onClick="logFunction('get_status_permvalue')" href="../../../_functions/get_status_permvalue.html" onMouseOver="funcPopup(event,'get_status_permvalue')">get_status_permvalue</a>( 'deprecated' ) : 0;
<a name="l126"><span class="linenum"> 126</span></a>          <a class="var it2067" onMouseOver="hilite(2067)" onMouseOut="lolite()" onClick="logVariable('perm_edit_cmt')" href="../../../_variables/perm_edit_cmt.html">$perm_edit_cmt</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_edit_cmt_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'string', 'no' );
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it5775" onMouseOver="hilite(5775)" onMouseOut="lolite()" onClick="logVariable('perm_cats')" href="../../../_variables/perm_cats.html">$perm_cats</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_cats_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it9307" onMouseOver="hilite(9307)" onMouseOut="lolite()" onClick="logVariable('perm_properties')" href="../../../_variables/perm_properties.html">$perm_properties</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_properties_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_admin', 'edit', false, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ) )
<a name="l132"><span class="linenum"> 132</span></a>          { // We have permission to give advanced admins perm!
<a name="l133"><span class="linenum"> 133</span></a>              <a class="var it9308" onMouseOver="hilite(9308)" onMouseOut="lolite()" onClick="logVariable('perm_admin')" href="../../../_variables/perm_admin.html">$perm_admin</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_admin_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l134"><span class="linenum"> 134</span></a>          }
<a name="l135"><span class="linenum"> 135</span></a>          else
<a name="l136"><span class="linenum"> 136</span></a>          {
<a name="l137"><span class="linenum"> 137</span></a>              <a class="var it9308" onMouseOver="hilite(9308)" onMouseOut="lolite()" onClick="logVariable('perm_admin')" href="../../../_variables/perm_admin.html">$perm_admin</a> = 0;
<a name="l138"><span class="linenum"> 138</span></a>          }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>          <a class="var it9309" onMouseOver="hilite(9309)" onMouseOut="lolite()" onClick="logVariable('perm_media_upload')" href="../../../_variables/perm_media_upload.html">$perm_media_upload</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_media_upload_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it9310" onMouseOver="hilite(9310)" onMouseOut="lolite()" onClick="logVariable('perm_media_browse')" href="../../../_variables/perm_media_browse.html">$perm_media_browse</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_media_browse_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l142"><span class="linenum"> 142</span></a>          <a class="var it9311" onMouseOver="hilite(9311)" onMouseOut="lolite()" onClick="logVariable('perm_media_change')" href="../../../_variables/perm_media_change.html">$perm_media_change</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog_perm_media_change_'.<a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, 'integer', 0 );
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">        // Update those permissions in DB:</span>
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>          if( <a class="var it9291" onMouseOver="hilite(9291)" onMouseOut="lolite()" onClick="logVariable('ismember')" href="../../../_variables/ismember.html">$ismember</a> || <a class="var it9292" onMouseOver="hilite(9292)" onMouseOut="lolite()" onClick="logVariable('can_be_assignee')" href="../../../_variables/can_be_assignee.html">$can_be_assignee</a> || <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a>) || <a class="var it9302" onMouseOver="hilite(9302)" onMouseOut="lolite()" onClick="logVariable('perm_delpost')" href="../../../_variables/perm_delpost.html">$perm_delpost</a> || <a class="var it9303" onMouseOver="hilite(9303)" onMouseOut="lolite()" onClick="logVariable('perm_edit_ts')" href="../../../_variables/perm_edit_ts.html">$perm_edit_ts</a> || <a class="var it9304" onMouseOver="hilite(9304)" onMouseOut="lolite()" onClick="logVariable('perm_delcmts')" href="../../../_variables/perm_delcmts.html">$perm_delcmts</a> || <a class="var it9305" onMouseOver="hilite(9305)" onMouseOut="lolite()" onClick="logVariable('perm_recycle_owncmts')" href="../../../_variables/perm_recycle_owncmts.html">$perm_recycle_owncmts</a> || <a class="var it9306" onMouseOver="hilite(9306)" onMouseOut="lolite()" onClick="logVariable('perm_vote_spam_comments')" href="../../../_variables/perm_vote_spam_comments.html">$perm_vote_spam_comments</a> || <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a> ||
<a name="l147"><span class="linenum"> 147</span></a>              <a class="var it5775" onMouseOver="hilite(5775)" onMouseOut="lolite()" onClick="logVariable('perm_cats')" href="../../../_variables/perm_cats.html">$perm_cats</a> || <a class="var it9307" onMouseOver="hilite(9307)" onMouseOut="lolite()" onClick="logVariable('perm_properties')" href="../../../_variables/perm_properties.html">$perm_properties</a> || <a class="var it9308" onMouseOver="hilite(9308)" onMouseOut="lolite()" onClick="logVariable('perm_admin')" href="../../../_variables/perm_admin.html">$perm_admin</a> || <a class="var it9309" onMouseOver="hilite(9309)" onMouseOut="lolite()" onClick="logVariable('perm_media_upload')" href="../../../_variables/perm_media_upload.html">$perm_media_upload</a> || <a class="var it9310" onMouseOver="hilite(9310)" onMouseOut="lolite()" onClick="logVariable('perm_media_browse')" href="../../../_variables/perm_media_browse.html">$perm_media_browse</a> || <a class="var it9311" onMouseOver="hilite(9311)" onMouseOut="lolite()" onClick="logVariable('perm_media_change')" href="../../../_variables/perm_media_change.html">$perm_media_change</a> )
<a name="l148"><span class="linenum"> 148</span></a>          { // There are some permissions for this user:
<a name="l149"><span class="linenum"> 149</span></a>              <a class="var it9291" onMouseOver="hilite(9291)" onMouseOut="lolite()" onClick="logVariable('ismember')" href="../../../_variables/ismember.html">$ismember</a> = 1;    <span class="comment">// Must have this permission</span>
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">            // insert new perms:</span>
<a name="l152"><span class="linenum"> 152</span></a>              <a class="var it9288" onMouseOver="hilite(9288)" onMouseOut="lolite()" onClick="logVariable('inserted_values')" href="../../../_variables/inserted_values.html">$inserted_values</a>[] = &quot; ( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, <a class="var it9289" onMouseOver="hilite(9289)" onMouseOut="lolite()" onClick="logVariable('loop_ID')" href="../../../_variables/loop_ID.html">$loop_ID</a>, <a class="var it9291" onMouseOver="hilite(9291)" onMouseOut="lolite()" onClick="logVariable('ismember')" href="../../../_variables/ismember.html">$ismember</a>, <a class="var it9292" onMouseOver="hilite(9292)" onMouseOut="lolite()" onClick="logVariable('can_be_assignee')" href="../../../_variables/can_be_assignee.html">$can_be_assignee</a>, &quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',',<a class="var it9290" onMouseOver="hilite(9290)" onMouseOut="lolite()" onClick="logVariable('perm_post')" href="../../../_variables/perm_post.html">$perm_post</a> ) ).&quot;,
<a name="l153"><span class="linenum"> 153</span></a>                                                                  &quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it9301" onMouseOver="hilite(9301)" onMouseOut="lolite()" onClick="logVariable('perm_item_type')" href="../../../_variables/perm_item_type.html">$perm_item_type</a> ).&quot;, &quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it6136" onMouseOver="hilite(6136)" onMouseOut="lolite()" onClick="logVariable('perm_edit')" href="../../../_variables/perm_edit.html">$perm_edit</a> ).&quot;,
<a name="l154"><span class="linenum"> 154</span></a>                                                                  <a class="var it9302" onMouseOver="hilite(9302)" onMouseOut="lolite()" onClick="logVariable('perm_delpost')" href="../../../_variables/perm_delpost.html">$perm_delpost</a>, <a class="var it9303" onMouseOver="hilite(9303)" onMouseOut="lolite()" onClick="logVariable('perm_edit_ts')" href="../../../_variables/perm_edit_ts.html">$perm_edit_ts</a>, <a class="var it9304" onMouseOver="hilite(9304)" onMouseOut="lolite()" onClick="logVariable('perm_delcmts')" href="../../../_variables/perm_delcmts.html">$perm_delcmts</a>, <a class="var it9305" onMouseOver="hilite(9305)" onMouseOut="lolite()" onClick="logVariable('perm_recycle_owncmts')" href="../../../_variables/perm_recycle_owncmts.html">$perm_recycle_owncmts</a>, <a class="var it9306" onMouseOver="hilite(9306)" onMouseOut="lolite()" onClick="logVariable('perm_vote_spam_comments')" href="../../../_variables/perm_vote_spam_comments.html">$perm_vote_spam_comments</a>, <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('perm_cmtstatuses')" href="../../../_variables/perm_cmtstatuses.html">$perm_cmtstatuses</a>,
<a name="l155"><span class="linenum"> 155</span></a>                                                                  &quot;.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it2067" onMouseOver="hilite(2067)" onMouseOut="lolite()" onClick="logVariable('perm_edit_cmt')" href="../../../_variables/perm_edit_cmt.html">$perm_edit_cmt</a> ).&quot;,
<a name="l156"><span class="linenum"> 156</span></a>                                                                  <a class="var it5775" onMouseOver="hilite(5775)" onMouseOut="lolite()" onClick="logVariable('perm_cats')" href="../../../_variables/perm_cats.html">$perm_cats</a>, <a class="var it9307" onMouseOver="hilite(9307)" onMouseOut="lolite()" onClick="logVariable('perm_properties')" href="../../../_variables/perm_properties.html">$perm_properties</a>, <a class="var it9308" onMouseOver="hilite(9308)" onMouseOut="lolite()" onClick="logVariable('perm_admin')" href="../../../_variables/perm_admin.html">$perm_admin</a>, <a class="var it9309" onMouseOver="hilite(9309)" onMouseOut="lolite()" onClick="logVariable('perm_media_upload')" href="../../../_variables/perm_media_upload.html">$perm_media_upload</a>,
<a name="l157"><span class="linenum"> 157</span></a>                                                                  <a class="var it9310" onMouseOver="hilite(9310)" onMouseOut="lolite()" onClick="logVariable('perm_media_browse')" href="../../../_variables/perm_media_browse.html">$perm_media_browse</a>, <a class="var it9311" onMouseOver="hilite(9311)" onMouseOut="lolite()" onClick="logVariable('perm_media_change')" href="../../../_variables/perm_media_change.html">$perm_media_change</a> )&quot;;
<a name="l158"><span class="linenum"> 158</span></a>          }
<a name="l159"><span class="linenum"> 159</span></a>      }
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">    // Proceed with insertions:</span>
<a name="l162"><span class="linenum"> 162</span></a>      if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it9288" onMouseOver="hilite(9288)" onMouseOut="lolite()" onClick="logVariable('inserted_values')" href="../../../_variables/inserted_values.html">$inserted_values</a> ) )
<a name="l163"><span class="linenum"> 163</span></a>      {
<a name="l164"><span class="linenum"> 164</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( &quot;INSERT INTO <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a>( {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}blog_ID, {<a class="var it9285" onMouseOver="hilite(9285)" onMouseOut="lolite()" onClick="logVariable('ID_field')" href="../../../_variables/ID_field.html">$ID_field</a>}, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}ismember, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}can_be_assignee,
<a name="l165"><span class="linenum"> 165</span></a>                                              {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_poststatuses, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_item_type, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_edit, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_delpost, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_edit_ts,
<a name="l166"><span class="linenum"> 166</span></a>                                              {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_delcmts, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_recycle_owncmts, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_vote_spam_cmts, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_cmtstatuses, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_edit_cmt,
<a name="l167"><span class="linenum"> 167</span></a>                                              {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_cats, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_properties, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_admin,
<a name="l168"><span class="linenum"> 168</span></a>                                              {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_media_upload, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_media_browse, {<a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>}perm_media_change )
<a name="l169"><span class="linenum"> 169</span></a>                                      VALUES &quot;.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ',', <a class="var it9288" onMouseOver="hilite(9288)" onMouseOut="lolite()" onClick="logVariable('inserted_values')" href="../../../_variables/inserted_values.html">$inserted_values</a> ) );
<a name="l170"><span class="linenum"> 170</span></a>      }
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">    // Unassign users from the items of the blog</span>
<a name="l173"><span class="linenum"> 173</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('query')" href="../../../_functions/query.html" onMouseOver="funcPopup(event,'query')">query</a>( 'UPDATE T_items__item
<a name="l174"><span class="linenum"> 174</span></a>              SET post_assigned_user_ID = NULL
<a name="l175"><span class="linenum"> 175</span></a>          WHERE post_main_cat_ID IN
<a name="l176"><span class="linenum"> 176</span></a>            (
<a name="l177"><span class="linenum"> 177</span></a>              SELECT cat_ID
<a name="l178"><span class="linenum"> 178</span></a>                FROM T_categories
<a name="l179"><span class="linenum"> 179</span></a>               WHERE cat_blog_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ).'
<a name="l180"><span class="linenum"> 180</span></a>            )
<a name="l181"><span class="linenum"> 181</span></a>            AND post_assigned_user_ID NOT IN
<a name="l182"><span class="linenum"> 182</span></a>            (
<a name="l183"><span class="linenum"> 183</span></a>              SELECT bloguser_user_ID
<a name="l184"><span class="linenum"> 184</span></a>                FROM T_coll_user_perms
<a name="l185"><span class="linenum"> 185</span></a>               WHERE bloguser_can_be_assignee = 1
<a name="l186"><span class="linenum"> 186</span></a>                 AND bloguser_blog_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ).'
<a name="l187"><span class="linenum"> 187</span></a>            )
<a name="l188"><span class="linenum"> 188</span></a>            AND post_assigned_user_ID NOT IN
<a name="l189"><span class="linenum"> 189</span></a>            (
<a name="l190"><span class="linenum"> 190</span></a>              SELECT user_ID
<a name="l191"><span class="linenum"> 191</span></a>                FROM T_users INNER JOIN T_coll_group_perms ON user_grp_ID = bloggroup_group_ID
<a name="l192"><span class="linenum"> 192</span></a>               WHERE bloggroup_can_be_assignee = 1
<a name="l193"><span class="linenum"> 193</span></a>                 AND bloggroup_blog_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ).'
<a name="l194"><span class="linenum"> 194</span></a>            )' );
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>      if( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('rows_affected')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../../../_variables/rows_affected.html">rows_affected</a> &gt; 0 )
<a name="l197"><span class="linenum"> 197</span></a>      {
<a name="l198"><span class="linenum"> 198</span></a>          global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>;
<a name="l199"><span class="linenum"> 199</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( '%d tasks have lost their assignee due to new permissions (this may include fixes to older inconsistencies in the DB).', <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a onClick="logVariable('rows_affected')" class="var it10754" onMouseOver="hilite(10754)" onMouseOut="lolite()" href="../../../_variables/rows_affected.html">rows_affected</a> ), 'warning' );
<a name="l200"><span class="linenum"> 200</span></a>      }
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">    // BLOCK CACHE INVALIDATION:</span>
<a name="l203"><span class="linenum"> 203</span></a>      <a class="class" onClick="logClass('BlockCache')" href="../../../_classes/blockcache.html" onMouseOver="classPopup(event,'blockcache')">BlockCache</a>::<a class="function" onClick="logFunction('invalidate_key')" href="../../../_functions/invalidate_key.html" onMouseOver="funcPopup(event,'invalidate_key')">invalidate_key</a>( 'set_coll_ID', <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ); <span class="comment">// Settings have changed</span>
<a name="l204"><span class="linenum"> 204</span></a>      <a class="class" onClick="logClass('BlockCache')" href="../../../_classes/blockcache.html" onMouseOver="classPopup(event,'blockcache')">BlockCache</a>::<a class="function" onClick="logFunction('invalidate_key')" href="../../../_functions/invalidate_key.html" onMouseOver="funcPopup(event,'invalidate_key')">invalidate_key</a>( 'set_coll_ID', 'any' ); <span class="comment">// Settings of a have changed (for widgets tracking a change on ANY blog)</span>
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">    // cont_coll_ID  // Content has not changed</span>
<a name="l207"><span class="linenum"> 207</span></a>  }
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">/**</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment"> * Check permissions on a given blog (by ID) and autoselect an appropriate blog</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment"> * if necessary.</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment"> *</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment"> * For use in admin</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment"> *</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment"> * NOTE: we no longer try to set $Blog inside of the function because later global use cannot be safely guaranteed in PHP4.</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment"> *</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment"> * @param string Permission name that must be given to the {@link $current_User} object.</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment"> * @param string Permission level that must be given to the {@link $current_User} object.</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment"> * @return integer new selected blog</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment"> */</span>
<a name="l222"><span class="linenum"> 222</span></a>  function <a class="function" onClick="logFunction('autoselect_blog')" href="../../../_functions/autoselect_blog.html" onMouseOver="funcPopup(event,'autoselect_blog')">autoselect_blog</a>( <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('permname')" href="../../../_variables/permname.html">$permname</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('permlevel')" href="../../../_variables/permlevel.html">$permlevel</a> = 'any' )
<a name="l223"><span class="linenum"> 223</span></a>  {
<a name="l224"><span class="linenum"> 224</span></a>      global <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>;
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>    <span class="comment">/**</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     * @var User</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     */</span>
<a name="l229"><span class="linenum"> 229</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>      <a class="var it9312" onMouseOver="hilite(9312)" onMouseOut="lolite()" onClick="logVariable('autoselected_blog')" href="../../../_variables/autoselected_blog.html">$autoselected_blog</a> = <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>;
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>      if( <a class="var it9312" onMouseOver="hilite(9312)" onMouseOut="lolite()" onClick="logVariable('autoselected_blog')" href="../../../_variables/autoselected_blog.html">$autoselected_blog</a> )
<a name="l234"><span class="linenum"> 234</span></a>      { // a blog is already selected
<a name="l235"><span class="linenum"> 235</span></a>          if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('permname')" href="../../../_variables/permname.html">$permname</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('permlevel')" href="../../../_variables/permlevel.html">$permlevel</a>, false, <a class="var it9312" onMouseOver="hilite(9312)" onMouseOut="lolite()" onClick="logVariable('autoselected_blog')" href="../../../_variables/autoselected_blog.html">$autoselected_blog</a> ) )
<a name="l236"><span class="linenum"> 236</span></a>          { // invalid blog
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">             // echo 'current blog was invalid';</span>
<a name="l238"><span class="linenum"> 238</span></a>              <a class="var it9312" onMouseOver="hilite(9312)" onMouseOut="lolite()" onClick="logVariable('autoselected_blog')" href="../../../_variables/autoselected_blog.html">$autoselected_blog</a> = 0;
<a name="l239"><span class="linenum"> 239</span></a>          }
<a name="l240"><span class="linenum"> 240</span></a>      }
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>      if( !<a class="var it9312" onMouseOver="hilite(9312)" onMouseOut="lolite()" onClick="logVariable('autoselected_blog')" href="../../../_variables/autoselected_blog.html">$autoselected_blog</a> )
<a name="l243"><span class="linenum"> 243</span></a>      { // No blog is selected so far (or selection was invalid)...
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">        // Let's try to find another one:</span>
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>      <span class="comment">/**</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">         * @var BlogCache</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">         */</span>
<a name="l249"><span class="linenum"> 249</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">        // Get first suitable blog</span>
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it2965" onMouseOver="hilite(2965)" onMouseOut="lolite()" onClick="logVariable('blog_array')" href="../../../_variables/blog_array.html">$blog_array</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a class="function" onClick="logFunction('load_user_blogs')" href="../../../_functions/load_user_blogs.html" onMouseOver="funcPopup(event,'load_user_blogs')">load_user_blogs</a>( <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('permname')" href="../../../_variables/permname.html">$permname</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('permlevel')" href="../../../_variables/permlevel.html">$permlevel</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, 'ID', 'ASC', 1 );
<a name="l253"><span class="linenum"> 253</span></a>          if( !empty(<a class="var it2965" onMouseOver="hilite(2965)" onMouseOut="lolite()" onClick="logVariable('blog_array')" href="../../../_variables/blog_array.html">$blog_array</a>) )
<a name="l254"><span class="linenum"> 254</span></a>          {
<a name="l255"><span class="linenum"> 255</span></a>              <a class="var it9312" onMouseOver="hilite(9312)" onMouseOut="lolite()" onClick="logVariable('autoselected_blog')" href="../../../_variables/autoselected_blog.html">$autoselected_blog</a> = <a class="var it2965" onMouseOver="hilite(2965)" onMouseOut="lolite()" onClick="logVariable('blog_array')" href="../../../_variables/blog_array.html">$blog_array</a>[0];
<a name="l256"><span class="linenum"> 256</span></a>          }
<a name="l257"><span class="linenum"> 257</span></a>      }
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>      return <a class="var it9312" onMouseOver="hilite(9312)" onMouseOut="lolite()" onClick="logVariable('autoselected_blog')" href="../../../_variables/autoselected_blog.html">$autoselected_blog</a>;
<a name="l260"><span class="linenum"> 260</span></a>  }
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">/**</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment"> * Check that we have received a valid blog param</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment"> *</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment"> * For use in admin</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment"> */</span>
<a name="l268"><span class="linenum"> 268</span></a>  function <a class="function" onClick="logFunction('valid_blog_requested')" href="../../../_functions/valid_blog_requested.html" onMouseOver="funcPopup(event,'valid_blog_requested')">valid_blog_requested</a>()
<a name="l269"><span class="linenum"> 269</span></a>  {
<a name="l270"><span class="linenum"> 270</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>;
<a name="l271"><span class="linenum"> 271</span></a>      if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) )
<a name="l272"><span class="linenum"> 272</span></a>      { // The requested blog does not exist, Try to get other available blog for the current User
<a name="l273"><span class="linenum"> 273</span></a>          <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> = <a class="function" onClick="logFunction('get_working_blog')" href="../../../_functions/get_working_blog.html" onMouseOver="funcPopup(event,'get_working_blog')">get_working_blog</a>();
<a name="l274"><span class="linenum"> 274</span></a>          if( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> )
<a name="l275"><span class="linenum"> 275</span></a>          {
<a name="l276"><span class="linenum"> 276</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l277"><span class="linenum"> 277</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, false, false );
<a name="l278"><span class="linenum"> 278</span></a>          }
<a name="l279"><span class="linenum"> 279</span></a>      }
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>      if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) )
<a name="l282"><span class="linenum"> 282</span></a>      { // The requested blog does not exist
<a name="l283"><span class="linenum"> 283</span></a>          <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The requested blog does not exist (any more?)'), 'error' );
<a name="l284"><span class="linenum"> 284</span></a>          return false;
<a name="l285"><span class="linenum"> 285</span></a>      }
<a name="l286"><span class="linenum"> 286</span></a>      return true;
<a name="l287"><span class="linenum"> 287</span></a>  }
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">/**</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment"> * Get working blog</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment"> *</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment"> * For use in backoffice</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment"> *</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment"> * @return integer|FALSE Blog ID or FALSE when no available blog to view by current User</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment"> */</span>
<a name="l297"><span class="linenum"> 297</span></a>  function <a class="function" onClick="logFunction('get_working_blog')" href="../../../_functions/get_working_blog.html" onMouseOver="funcPopup(event,'get_working_blog')">get_working_blog</a>()
<a name="l298"><span class="linenum"> 298</span></a>  {
<a name="l299"><span class="linenum"> 299</span></a>      global <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>;
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>      if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l302"><span class="linenum"> 302</span></a>      { // User must be logged in to view the blogs
<a name="l303"><span class="linenum"> 303</span></a>          return false;
<a name="l304"><span class="linenum"> 304</span></a>      }
<a name="l305"><span class="linenum"> 305</span></a>  
<a name="l306"><span class="linenum"> 306</span></a>      if( ! empty( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ) )
<a name="l307"><span class="linenum"> 307</span></a>      { // Use a blog from GET request
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> );
<a name="l309"><span class="linenum"> 309</span></a>          if( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> &gt; 0 &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_ismember', 'view', false, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l310"><span class="linenum"> 310</span></a>          { // Allow to use this blog only when current user has an access to view it
<a name="l311"><span class="linenum"> 311</span></a>              return <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>;
<a name="l312"><span class="linenum"> 312</span></a>          }
<a name="l313"><span class="linenum"> 313</span></a>      }
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">    // Try to use the blog which is selected by current user last time</span>
<a name="l318"><span class="linenum"> 318</span></a>      <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'selected_blog' ) );
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">    // Check if it really exists in DB</span>
<a name="l320"><span class="linenum"> 320</span></a>      <a class="var it510" onMouseOver="hilite(510)" onMouseOut="lolite()" onClick="logVariable('selected_Blog')" href="../../../_variables/selected_Blog.html">$selected_Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, false, false );
<a name="l321"><span class="linenum"> 321</span></a>      if( <a class="var it510" onMouseOver="hilite(510)" onMouseOut="lolite()" onClick="logVariable('selected_Blog')" href="../../../_variables/selected_Blog.html">$selected_Blog</a> &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_ismember', 'view', false, <a class="var it510" onMouseOver="hilite(510)" onMouseOut="lolite()" onClick="logVariable('selected_Blog')" href="../../../_variables/selected_Blog.html">$selected_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10798" onMouseOver="hilite(10798)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l322"><span class="linenum"> 322</span></a>      { // Allow to use this blog only when current user is a member of it
<a name="l323"><span class="linenum"> 323</span></a>          return <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>;
<a name="l324"><span class="linenum"> 324</span></a>      }
<a name="l325"><span class="linenum"> 325</span></a>  
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">    // Use first blog from DB which current user can views</span>
<a name="l327"><span class="linenum"> 327</span></a>      if( <a class="var it2965" onMouseOver="hilite(2965)" onMouseOut="lolite()" onClick="logVariable('blog_array')" href="../../../_variables/blog_array.html">$blog_array</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a class="function" onClick="logFunction('load_user_blogs')" href="../../../_functions/load_user_blogs.html" onMouseOver="funcPopup(event,'load_user_blogs')">load_user_blogs</a>( 'blog_ismember', 'view', NULL, '', '', 1 ) )
<a name="l328"><span class="linenum"> 328</span></a>      {
<a name="l329"><span class="linenum"> 329</span></a>          foreach( <a class="var it2965" onMouseOver="hilite(2965)" onMouseOut="lolite()" onClick="logVariable('blog_array')" href="../../../_variables/blog_array.html">$blog_array</a> as <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> )
<a name="l330"><span class="linenum"> 330</span></a>          {
<a name="l331"><span class="linenum"> 331</span></a>              return <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>;
<a name="l332"><span class="linenum"> 332</span></a>          }
<a name="l333"><span class="linenum"> 333</span></a>      }
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>      return false;
<a name="l336"><span class="linenum"> 336</span></a>  }
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">/**</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment"> * Set working blog to a new value and memorize it in user settings if needed.</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment"> *</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment"> * For use in backoffice</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment"> *</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment"> * @return boolean $blog changed?</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment"> */</span>
<a name="l346"><span class="linenum"> 346</span></a>  function <a class="function" onClick="logFunction('set_working_blog')" href="../../../_functions/set_working_blog.html" onMouseOver="funcPopup(event,'set_working_blog')">set_working_blog</a>( <a class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" onClick="logVariable('new_blog_ID')" href="../../../_variables/new_blog_ID.html">$new_blog_ID</a> )
<a name="l347"><span class="linenum"> 347</span></a>  {
<a name="l348"><span class="linenum"> 348</span></a>      global <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>;
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>      if( <a class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" onClick="logVariable('new_blog_ID')" href="../../../_variables/new_blog_ID.html">$new_blog_ID</a> != (int)<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('selected_blog') )
<a name="l351"><span class="linenum"> 351</span></a>      { // Save the new default blog.
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">        // fp&gt; Test case 1: dashboard without a blog param should go to last selected blog</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">        // fp&gt; Test case 2: uploading to the default blog may actually upload into another root (sev)</span>
<a name="l354"><span class="linenum"> 354</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'selected_blog', <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> );
<a name="l355"><span class="linenum"> 355</span></a>          <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('UserSettings')" href="../../../_variables/UserSettings.html">$UserSettings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l356"><span class="linenum"> 356</span></a>      }
<a name="l357"><span class="linenum"> 357</span></a>  
<a name="l358"><span class="linenum"> 358</span></a>      if( <a class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" onClick="logVariable('new_blog_ID')" href="../../../_variables/new_blog_ID.html">$new_blog_ID</a> == <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> )
<a name="l359"><span class="linenum"> 359</span></a>      {
<a name="l360"><span class="linenum"> 360</span></a>          return false;
<a name="l361"><span class="linenum"> 361</span></a>      }
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = <a class="var it9313" onMouseOver="hilite(9313)" onMouseOut="lolite()" onClick="logVariable('new_blog_ID')" href="../../../_variables/new_blog_ID.html">$new_blog_ID</a>;
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>      return true;
<a name="l366"><span class="linenum"> 366</span></a>  }
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">/**</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment"> * Get collection kinds</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment"> * (might be extended by plugins)</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment"> *</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment"> * @param string Blog type</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment"> * @return array|string</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment"> */</span>
<a name="l376"><span class="linenum"> 376</span></a>  function <a class="function" onClick="logFunction('get_collection_kinds')" href="../../../_functions/get_collection_kinds.html" onMouseOver="funcPopup(event,'get_collection_kinds')">get_collection_kinds</a>( <a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('kind')" href="../../../_variables/kind.html">$kind</a> = NULL )
<a name="l377"><span class="linenum"> 377</span></a>  {
<a name="l378"><span class="linenum"> 378</span></a>      global <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>;
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>      <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a> = array(
<a name="l381"><span class="linenum"> 381</span></a>          'main' =&gt; array(
<a name="l382"><span class="linenum"> 382</span></a>                  'name' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Home / Main'),
<a name="l383"><span class="linenum"> 383</span></a>                  'class' =&gt; 'btn-primary',
<a name="l384"><span class="linenum"> 384</span></a>                  'desc' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('A collection optimized to be used as a site homepage and/or for generic functions such as messaging, user profiles, etc.'),
<a name="l385"><span class="linenum"> 385</span></a>                  'note' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Besides displaying a nice homepage, this can also be used as a central home for cross-collection features such as private messaging, user profile editing, etc.'),
<a name="l386"><span class="linenum"> 386</span></a>              ),
<a name="l387"><span class="linenum"> 387</span></a>          'std' =&gt; array(
<a name="l388"><span class="linenum"> 388</span></a>                  'name' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Blog'), // NOTE: this is a REAL usage of the word 'Blog'. Do NOT change to 'collection'.
<a name="l389"><span class="linenum"> 389</span></a>                  'class' =&gt; 'btn-info',
<a name="l390"><span class="linenum"> 390</span></a>                  'desc' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('A collection optimized to be used as a standard <a class="function" onClick="logFunction('blog')" href="../../../_functions/blog.html" onMouseOver="funcPopup(event,'blog')">blog</a> (with the most common features).'),
<a name="l391"><span class="linenum"> 391</span></a>                  'note' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Many users start with a blog and add other features later.'),
<a name="l392"><span class="linenum"> 392</span></a>              ),
<a name="l393"><span class="linenum"> 393</span></a>          'photo' =&gt; array(
<a name="l394"><span class="linenum"> 394</span></a>                  'name' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Gallery'),
<a name="l395"><span class="linenum"> 395</span></a>                  'desc' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('A collection optimized for publishing photo albums.'),
<a name="l396"><span class="linenum"> 396</span></a>                  'note' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Use this if you want to publish images without much text.'),
<a name="l397"><span class="linenum"> 397</span></a>              ),
<a name="l398"><span class="linenum"> 398</span></a>          'forum' =&gt; array(
<a name="l399"><span class="linenum"> 399</span></a>                  'name' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Forum'),
<a name="l400"><span class="linenum"> 400</span></a>                  'desc' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('A collection optimized to be used as a forum. (This should be used with a forums skin)'),
<a name="l401"><span class="linenum"> 401</span></a>                  'note' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Use this if you want a place for your user community to interact.'),
<a name="l402"><span class="linenum"> 402</span></a>              ),
<a name="l403"><span class="linenum"> 403</span></a>          'manual' =&gt; array(
<a name="l404"><span class="linenum"> 404</span></a>                  'name' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Manual'),
<a name="l405"><span class="linenum"> 405</span></a>                  'desc' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('A collection optimized to be used as an online manual, book or guide. (This should be used with a manual skin)'),
<a name="l406"><span class="linenum"> 406</span></a>                  'note' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Use this if you want to publish organized information with chapters, sub-chapters, etc.'),
<a name="l407"><span class="linenum"> 407</span></a>              ),
<a name="l408"><span class="linenum"> 408</span></a>          'group' =&gt; array(
<a name="l409"><span class="linenum"> 409</span></a>                  'name' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Tracker'),
<a name="l410"><span class="linenum"> 410</span></a>                  'desc' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('A collection optimized for issue tracking or collaborative editing. Look for the workflow properties on the post editing form.'),
<a name="l411"><span class="linenum"> 411</span></a>                  'note' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Use this if several users need to collaborate on resolving issues or publishing articles...'),
<a name="l412"><span class="linenum"> 412</span></a>              ),
<a name="l413"><span class="linenum"> 413</span></a>          );
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">    // Define blog kinds, their names and description.</span>
<a name="l416"><span class="linenum"> 416</span></a>      <a class="var it9314" onMouseOver="hilite(9314)" onMouseOut="lolite()" onClick="logVariable('plugin_kinds')" href="../../../_variables/plugin_kinds.html">$plugin_kinds</a> = <a class="var it319" onMouseOver="hilite(319)" onMouseOut="lolite()" onClick="logVariable('Plugins')" href="../../../_variables/Plugins.html">$Plugins</a>-&gt;<a class="function" onClick="logFunction('trigger_collect')" href="../../../_functions/trigger_collect.html" onMouseOver="funcPopup(event,'trigger_collect')">trigger_collect</a>( 'GetCollectionKinds', array('kinds' =&gt; &amp; <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a>) );
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>      foreach( <a class="var it9314" onMouseOver="hilite(9314)" onMouseOut="lolite()" onClick="logVariable('plugin_kinds')" href="../../../_variables/plugin_kinds.html">$plugin_kinds</a> as <a class="var it9315" onMouseOver="hilite(9315)" onMouseOut="lolite()" onClick="logVariable('l_kinds')" href="../../../_variables/l_kinds.html">$l_kinds</a> )
<a name="l419"><span class="linenum"> 419</span></a>      {
<a name="l420"><span class="linenum"> 420</span></a>          <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( <a class="var it9315" onMouseOver="hilite(9315)" onMouseOut="lolite()" onClick="logVariable('l_kinds')" href="../../../_variables/l_kinds.html">$l_kinds</a>, <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a> );
<a name="l421"><span class="linenum"> 421</span></a>      }
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('kind')" href="../../../_variables/kind.html">$kind</a> ) )
<a name="l424"><span class="linenum"> 424</span></a>      { // Return kinds array
<a name="l425"><span class="linenum"> 425</span></a>          return <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a>;
<a name="l426"><span class="linenum"> 426</span></a>      }
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>      if( <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>( <a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('kind')" href="../../../_variables/kind.html">$kind</a>, <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a> ) &amp;&amp; !empty(<a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a>[<a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('kind')" href="../../../_variables/kind.html">$kind</a>]['name']) )
<a name="l429"><span class="linenum"> 429</span></a>      {
<a name="l430"><span class="linenum"> 430</span></a>          return <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a>[<a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('kind')" href="../../../_variables/kind.html">$kind</a>]['name'];
<a name="l431"><span class="linenum"> 431</span></a>      }
<a name="l432"><span class="linenum"> 432</span></a>      else
<a name="l433"><span class="linenum"> 433</span></a>      {    // Use default collection kind
<a name="l434"><span class="linenum"> 434</span></a>          return <a class="var it6738" onMouseOver="hilite(6738)" onMouseOut="lolite()" onClick="logVariable('kinds')" href="../../../_variables/kinds.html">$kinds</a>['std']['name'];
<a name="l435"><span class="linenum"> 435</span></a>      }
<a name="l436"><span class="linenum"> 436</span></a>  }
<a name="l437"><span class="linenum"> 437</span></a>  
<a name="l438"><span class="linenum"> 438</span></a>  
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">/**</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment"> * Enable/Disable the given cache</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment"> *</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment"> * @param string cache key name, 'general_cache_enabled', blogs 'cache_enabled'</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment"> * @param boolean status to set</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment"> * @param integer the id of the blog, if we want to set a blog's cache. Let it NULL to set general caching.</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment"> * @param boolean true to save db changes, false if db update will be called outside from this function</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment"> */</span>
<a name="l447"><span class="linenum"> 447</span></a>  function <a class="function" onClick="logFunction('set_cache_enabled')" href="../../../_functions/set_cache_enabled.html" onMouseOver="funcPopup(event,'set_cache_enabled')">set_cache_enabled</a>( <a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>, <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a>, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> = NULL, <a class="var it9316" onMouseOver="hilite(9316)" onMouseOut="lolite()" onClick="logVariable('save_setting')" href="../../../_variables/save_setting.html">$save_setting</a> = true )
<a name="l448"><span class="linenum"> 448</span></a>  {
<a name="l449"><span class="linenum"> 449</span></a>      <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '_core/model/_pagecache.class.php', 'PageCache' );
<a name="l450"><span class="linenum"> 450</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>      if( empty( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l453"><span class="linenum"> 453</span></a>      { // general cache
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = NULL;
<a name="l455"><span class="linenum"> 455</span></a>          <a class="var it9317" onMouseOver="hilite(9317)" onMouseOut="lolite()" onClick="logVariable('old_cache_status')" href="../../../_variables/old_cache_status.html">$old_cache_status</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a> );
<a name="l456"><span class="linenum"> 456</span></a>      }
<a name="l457"><span class="linenum"> 457</span></a>      else
<a name="l458"><span class="linenum"> 458</span></a>      { // blog page cache
<a name="l459"><span class="linenum"> 459</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l460"><span class="linenum"> 460</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> );
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it9317" onMouseOver="hilite(9317)" onMouseOut="lolite()" onClick="logVariable('old_cache_status')" href="../../../_variables/old_cache_status.html">$old_cache_status</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a> );
<a name="l462"><span class="linenum"> 462</span></a>      }
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>      <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../../_variables/PageCache.html">$PageCache</a> = <span class="keyword">new </span><a class="class" onClick="logClass('PageCache')" href="../../../_classes/pagecache.html" onMouseOver="classPopup(event,'pagecache')">PageCache</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> );
<a name="l465"><span class="linenum"> 465</span></a>      if( <a class="var it9317" onMouseOver="hilite(9317)" onMouseOut="lolite()" onClick="logVariable('old_cache_status')" href="../../../_variables/old_cache_status.html">$old_cache_status</a> == false &amp;&amp; <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a> == true )
<a name="l466"><span class="linenum"> 466</span></a>      { // Caching has been turned ON:
<a name="l467"><span class="linenum"> 467</span></a>          if( <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../../_variables/PageCache.html">$PageCache</a>-&gt;<a class="function" onClick="logFunction('cache_create')" href="../../../_functions/cache_create.html" onMouseOver="funcPopup(event,'cache_create')">cache_create</a>( false ) )
<a name="l468"><span class="linenum"> 468</span></a>          { // corresponding cache folder was created
<a name="l469"><span class="linenum"> 469</span></a>              if( empty( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l470"><span class="linenum"> 470</span></a>              { // general cache
<a name="l471"><span class="linenum"> 471</span></a>                  <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( 'success', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'General caching has been enabled.' ) );
<a name="l472"><span class="linenum"> 472</span></a>              }
<a name="l473"><span class="linenum"> 473</span></a>              else
<a name="l474"><span class="linenum"> 474</span></a>              { // blog page cache
<a name="l475"><span class="linenum"> 475</span></a>                  <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( 'success', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Page caching has been enabled.' ) );
<a name="l476"><span class="linenum"> 476</span></a>              }
<a name="l477"><span class="linenum"> 477</span></a>          }
<a name="l478"><span class="linenum"> 478</span></a>          else
<a name="l479"><span class="linenum"> 479</span></a>          { // error creating cache folder
<a name="l480"><span class="linenum"> 480</span></a>              if( empty( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l481"><span class="linenum"> 481</span></a>              { // general cache
<a name="l482"><span class="linenum"> 482</span></a>                  <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( 'error', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'General caching could not be enabled. Check /cache/ folder file permissions.' ) );
<a name="l483"><span class="linenum"> 483</span></a>              }
<a name="l484"><span class="linenum"> 484</span></a>              else
<a name="l485"><span class="linenum"> 485</span></a>              { // blog page cache
<a name="l486"><span class="linenum"> 486</span></a>                  <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( 'error', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Page caching could not be enabled. Check /cache/ folder file permissions.' ) );
<a name="l487"><span class="linenum"> 487</span></a>              }
<a name="l488"><span class="linenum"> 488</span></a>              <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a> = false;
<a name="l489"><span class="linenum"> 489</span></a>          }
<a name="l490"><span class="linenum"> 490</span></a>      }
<a name="l491"><span class="linenum"> 491</span></a>      elseif( <a class="var it9317" onMouseOver="hilite(9317)" onMouseOut="lolite()" onClick="logVariable('old_cache_status')" href="../../../_variables/old_cache_status.html">$old_cache_status</a> == true &amp;&amp; <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a> == false )
<a name="l492"><span class="linenum"> 492</span></a>      { // Caching has been turned OFF:
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('PageCache')" href="../../../_variables/PageCache.html">$PageCache</a>-&gt;<a class="function" onClick="logFunction('cache_delete')" href="../../../_functions/cache_delete.html" onMouseOver="funcPopup(event,'cache_delete')">cache_delete</a>();
<a name="l494"><span class="linenum"> 494</span></a>          if( empty( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l495"><span class="linenum"> 495</span></a>          { // general cache
<a name="l496"><span class="linenum"> 496</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( 'note',  <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'General caching has been disabled. Cache contents have been purged.' ) );
<a name="l497"><span class="linenum"> 497</span></a>          }
<a name="l498"><span class="linenum"> 498</span></a>          else
<a name="l499"><span class="linenum"> 499</span></a>          { // blog page cache
<a name="l500"><span class="linenum"> 500</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( 'note',  <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'Page caching has been disabled. Cache contents have been purged.' ) );
<a name="l501"><span class="linenum"> 501</span></a>          }
<a name="l502"><span class="linenum"> 502</span></a>      }
<a name="l503"><span class="linenum"> 503</span></a>      else
<a name="l504"><span class="linenum"> 504</span></a>      { // nothing was changed
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">        // check if ajax_form_enabled has correct state after b2evo upgrade</span>
<a name="l506"><span class="linenum"> 506</span></a>          if( ( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> != NULL ) &amp;&amp; ( <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a> ) &amp;&amp; ( !<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'ajax_form_enabled' ) ) )
<a name="l507"><span class="linenum"> 507</span></a>          { // if page cache is enabled, ajax form must be enabled to
<a name="l508"><span class="linenum"> 508</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'ajax_form_enabled', true );
<a name="l509"><span class="linenum"> 509</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l510"><span class="linenum"> 510</span></a>          }
<a name="l511"><span class="linenum"> 511</span></a>          return NULL;
<a name="l512"><span class="linenum"> 512</span></a>      }
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">    // set db changes</span>
<a name="l515"><span class="linenum"> 515</span></a>      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> == NULL )
<a name="l516"><span class="linenum"> 516</span></a>      {
<a name="l517"><span class="linenum"> 517</span></a>          <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'general_cache_enabled', <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a> );
<a name="l518"><span class="linenum"> 518</span></a>          if( <a class="var it9316" onMouseOver="hilite(9316)" onMouseOut="lolite()" onClick="logVariable('save_setting')" href="../../../_variables/save_setting.html">$save_setting</a> )
<a name="l519"><span class="linenum"> 519</span></a>          { // save
<a name="l520"><span class="linenum"> 520</span></a>              <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l521"><span class="linenum"> 521</span></a>          }
<a name="l522"><span class="linenum"> 522</span></a>      }
<a name="l523"><span class="linenum"> 523</span></a>      else
<a name="l524"><span class="linenum"> 524</span></a>      {
<a name="l525"><span class="linenum"> 525</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( <a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a>, <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a> );
<a name="l526"><span class="linenum"> 526</span></a>          if( ( <a class="var it1539" onMouseOver="hilite(1539)" onMouseOut="lolite()" onClick="logVariable('cache_key')" href="../../../_variables/cache_key.html">$cache_key</a> == 'cache_enabled' ) &amp;&amp; <a class="var it2179" onMouseOver="hilite(2179)" onMouseOut="lolite()" onClick="logVariable('new_status')" href="../../../_variables/new_status.html">$new_status</a> )
<a name="l527"><span class="linenum"> 527</span></a>          { // if page cache is enabled, ajax form must be enabled to
<a name="l528"><span class="linenum"> 528</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('set_setting')" href="../../../_functions/set_setting.html" onMouseOver="funcPopup(event,'set_setting')">set_setting</a>( 'ajax_form_enabled', true );
<a name="l529"><span class="linenum"> 529</span></a>          }
<a name="l530"><span class="linenum"> 530</span></a>          if( <a class="var it9316" onMouseOver="hilite(9316)" onMouseOut="lolite()" onClick="logVariable('save_setting')" href="../../../_variables/save_setting.html">$save_setting</a> )
<a name="l531"><span class="linenum"> 531</span></a>          { // save
<a name="l532"><span class="linenum"> 532</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l533"><span class="linenum"> 533</span></a>          }
<a name="l534"><span class="linenum"> 534</span></a>      }
<a name="l535"><span class="linenum"> 535</span></a>      return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l536"><span class="linenum"> 536</span></a>  }
<a name="l537"><span class="linenum"> 537</span></a>  
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">/**</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment"> * Initialize global $blog variable to the requested blog</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment"> *</span>
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment"> * @return boolean true if $blog was initialized successful, false otherwise</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment"> */</span>
<a name="l544"><span class="linenum"> 544</span></a>  function <a class="function" onClick="logFunction('init_requested_blog')" href="../../../_functions/init_requested_blog.html" onMouseOver="funcPopup(event,'init_requested_blog')">init_requested_blog</a>( <a class="var it9318" onMouseOver="hilite(9318)" onMouseOut="lolite()" onClick="logVariable('use_blog_param_first')" href="../../../_variables/use_blog_param_first.html">$use_blog_param_first</a> = true )
<a name="l545"><span class="linenum"> 545</span></a>  {
<a name="l546"><span class="linenum"> 546</span></a>      global <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>, <a class="var it618" onMouseOver="hilite(618)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>, <a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>;
<a name="l547"><span class="linenum"> 547</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l548"><span class="linenum"> 548</span></a>      global <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>;
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>      if( !empty( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ) )
<a name="l551"><span class="linenum"> 551</span></a>      { // <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> was already initialized (maybe through a stub file)
<a name="l552"><span class="linenum"> 552</span></a>          return true;
<a name="l553"><span class="linenum"> 553</span></a>      }
<a name="l554"><span class="linenum"> 554</span></a>  
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">    // If we want to give priority to ?blog=123..</span>
<a name="l556"><span class="linenum"> 556</span></a>      if( <a class="var it9318" onMouseOver="hilite(9318)" onMouseOut="lolite()" onClick="logVariable('use_blog_param_first')" href="../../../_variables/use_blog_param_first.html">$use_blog_param_first</a> == true )
<a name="l557"><span class="linenum"> 557</span></a>      {    // Check if a specific blog has been requested in the URL:
<a name="l558"><span class="linenum"> 558</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Checking for epxlicit &quot;blog&quot; param', 'detectblog' );
<a name="l559"><span class="linenum"> 559</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog', 'integer', '', true );
<a name="l560"><span class="linenum"> 560</span></a>  
<a name="l561"><span class="linenum"> 561</span></a>          if( !empty(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>) )
<a name="l562"><span class="linenum"> 562</span></a>          { // a specific blog has been requested in the URL:
<a name="l563"><span class="linenum"> 563</span></a>              return true;
<a name="l564"><span class="linenum"> 564</span></a>          }
<a name="l565"><span class="linenum"> 565</span></a>      }
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>      <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'No blog param received, checking extra path...', 'detectblog' );
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">    // No blog requested by URL param, let's try to match something in the URL:</span>
<a name="l570"><span class="linenum"> 570</span></a>      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l571"><span class="linenum"> 571</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#^'.<a class="phpfunction" onClick="logFunction('preg_quote')" href="../../../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it461" onMouseOver="hilite(461)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../../_variables/baseurl.html">$baseurl</a>).'(index.php/)?([^/]+)#', <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it618" onMouseOver="hilite(618)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a> ) )
<a name="l572"><span class="linenum"> 572</span></a>      { // We have an URL blog name:
<a name="l573"><span class="linenum"> 573</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Found a potential URL collection name: '.<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[2].' (in: '.<a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it618" onMouseOver="hilite(618)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>.')', 'detectblog' );
<a name="l574"><span class="linenum"> 574</span></a>          if( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[2], '.' ) !== false )
<a name="l575"><span class="linenum"> 575</span></a>          {    // There is an extension (like .php) in the collection name, ignore...
<a name="l576"><span class="linenum"> 576</span></a>              <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Ignoring because it contains a dot.', 'detectblog' );
<a name="l577"><span class="linenum"> 577</span></a>          }
<a name="l578"><span class="linenum"> 578</span></a>          elseif( ((<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_urlname( <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[2], false )) !== false) ) <span class="comment">/* SQL request '=' */</span>
<a name="l579"><span class="linenum"> 579</span></a>          { // We found a matching blog:
<a name="l580"><span class="linenum"> 580</span></a>              <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l581"><span class="linenum"> 581</span></a>              <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Found matching blog: '.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, 'detectblog' );
<a name="l582"><span class="linenum"> 582</span></a>              return true;
<a name="l583"><span class="linenum"> 583</span></a>          }
<a name="l584"><span class="linenum"> 584</span></a>          else
<a name="l585"><span class="linenum"> 585</span></a>          {
<a name="l586"><span class="linenum"> 586</span></a>              <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'No match.', 'detectblog' );
<a name="l587"><span class="linenum"> 587</span></a>          }
<a name="l588"><span class="linenum"> 588</span></a>      }
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>  <span class="comment">    // No blog identified by URL name, let's try to match the absolute URL: (remove optional index.php)</span>
<a name="l591"><span class="linenum"> 591</span></a>      if( <a class="phpfunction" onClick="logFunction('preg_match')" href="../../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>( '#^(.+?)index.php#', <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it618" onMouseOver="hilite(618)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a> ) )
<a name="l592"><span class="linenum"> 592</span></a>      { // Remove what's not part of the absolute URL:
<a name="l593"><span class="linenum"> 593</span></a>          <a class="var it9319" onMouseOver="hilite(9319)" onMouseOut="lolite()" onClick="logVariable('ReqAbsUrl')" href="../../../_variables/ReqAbsUrl.html">$ReqAbsUrl</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../../_variables/matches.html">$matches</a>[1];
<a name="l594"><span class="linenum"> 594</span></a>      }
<a name="l595"><span class="linenum"> 595</span></a>      else
<a name="l596"><span class="linenum"> 596</span></a>      {    // Match on the whole <a class="function" onClick="logFunction('URL')" href="../../../_functions/url.html" onMouseOver="funcPopup(event,'url')">URL</a> (we'll try to find the base URL at the beginning)
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it9319" onMouseOver="hilite(9319)" onMouseOut="lolite()" onClick="logVariable('ReqAbsUrl')" href="../../../_variables/ReqAbsUrl.html">$ReqAbsUrl</a> = <a class="var it619" onMouseOver="hilite(619)" onMouseOut="lolite()" onClick="logVariable('ReqHost')" href="../../../_variables/ReqHost.html">$ReqHost</a>.<a class="var it618" onMouseOver="hilite(618)" onMouseOut="lolite()" onClick="logVariable('ReqPath')" href="../../../_variables/ReqPath.html">$ReqPath</a>;
<a name="l598"><span class="linenum"> 598</span></a>      }
<a name="l599"><span class="linenum"> 599</span></a>      <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Looking up absolute url : '.<a class="var it9319" onMouseOver="hilite(9319)" onMouseOut="lolite()" onClick="logVariable('ReqAbsUrl')" href="../../../_variables/ReqAbsUrl.html">$ReqAbsUrl</a>, 'detectblog' );
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">    // SQL request 'LIKE':</span>
<a name="l601"><span class="linenum"> 601</span></a>      if( ((<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_url( <a class="var it9319" onMouseOver="hilite(9319)" onMouseOut="lolite()" onClick="logVariable('ReqAbsUrl')" href="../../../_variables/ReqAbsUrl.html">$ReqAbsUrl</a>, false )) !== false) )
<a name="l602"><span class="linenum"> 602</span></a>      { // We found a matching blog:
<a name="l603"><span class="linenum"> 603</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l604"><span class="linenum"> 604</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Found matching blog: '.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, 'detectblog' );
<a name="l605"><span class="linenum"> 605</span></a>          return true;
<a name="l606"><span class="linenum"> 606</span></a>      }
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">    // If we did NOT give priority to ?blog=123, check for param now:</span>
<a name="l609"><span class="linenum"> 609</span></a>      if( <a class="var it9318" onMouseOver="hilite(9318)" onMouseOut="lolite()" onClick="logVariable('use_blog_param_first')" href="../../../_variables/use_blog_param_first.html">$use_blog_param_first</a> == false )
<a name="l610"><span class="linenum"> 610</span></a>      {    // Check if a specific blog has been requested in the URL:
<a name="l611"><span class="linenum"> 611</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Checking for epxlicit &quot;blog&quot; param', 'detectblog' );
<a name="l612"><span class="linenum"> 612</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'blog', 'integer', '', true );
<a name="l613"><span class="linenum"> 613</span></a>  
<a name="l614"><span class="linenum"> 614</span></a>          if( !empty(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>) )
<a name="l615"><span class="linenum"> 615</span></a>          { // a specific blog has been requested in the URL:
<a name="l616"><span class="linenum"> 616</span></a>              return true;
<a name="l617"><span class="linenum"> 617</span></a>          }
<a name="l618"><span class="linenum"> 618</span></a>      }
<a name="l619"><span class="linenum"> 619</span></a>  
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">    // Still no blog requested, use default:</span>
<a name="l621"><span class="linenum"> 621</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'default_blog_ID' );
<a name="l622"><span class="linenum"> 622</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, false, false );
<a name="l623"><span class="linenum"> 623</span></a>      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> !== false &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> !== NULL )
<a name="l624"><span class="linenum"> 624</span></a>      { // We found a matching blog:
<a name="l625"><span class="linenum"> 625</span></a>          <a class="var it509" onMouseOver="hilite(509)" onMouseOut="lolite()" onClick="logVariable('Debuglog')" href="../../../_variables/Debuglog.html">$Debuglog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( 'Using default blog '.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, 'detectblog' );
<a name="l626"><span class="linenum"> 626</span></a>          return true;
<a name="l627"><span class="linenum"> 627</span></a>      }
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">    // No collection has been selected (we'll probably display the default.php page):</span>
<a name="l630"><span class="linenum"> 630</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> = NULL;
<a name="l631"><span class="linenum"> 631</span></a>      return false;
<a name="l632"><span class="linenum"> 632</span></a>  }
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>  
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">/**</span>
<a name="l636"><span class="linenum"> 636</span></a>  <span class="comment"> * Activate the blog locale and the corresponding charset</span>
<a name="l637"><span class="linenum"> 637</span></a>  <span class="comment"> *</span>
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment"> * @param integer the blog Id</span>
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment"> */</span>
<a name="l640"><span class="linenum"> 640</span></a>  function <a class="function" onClick="logFunction('activate_blog_locale')" href="../../../_functions/activate_blog_locale.html" onMouseOver="funcPopup(event,'activate_blog_locale')">activate_blog_locale</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> )
<a name="l641"><span class="linenum"> 641</span></a>  {
<a name="l642"><span class="linenum"> 642</span></a>      global <a class="var it627" onMouseOver="hilite(627)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a>;
<a name="l643"><span class="linenum"> 643</span></a>  
<a name="l644"><span class="linenum"> 644</span></a>      if( empty( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ) || ( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> &lt;= 0 ) )
<a name="l645"><span class="linenum"> 645</span></a>      { // <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> is not a valid blog ID
<a name="l646"><span class="linenum"> 646</span></a>          return;
<a name="l647"><span class="linenum"> 647</span></a>      }
<a name="l648"><span class="linenum"> 648</span></a>  
<a name="l649"><span class="linenum"> 649</span></a>      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l650"><span class="linenum"> 650</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, false, false );
<a name="l651"><span class="linenum"> 651</span></a>      if( !empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) )
<a name="l652"><span class="linenum"> 652</span></a>      { // Activate the blog locale
<a name="l653"><span class="linenum"> 653</span></a>          <a class="function" onClick="logFunction('locale_activate')" href="../../../_functions/locale_activate.html" onMouseOver="funcPopup(event,'locale_activate')">locale_activate</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('locale') );
<a name="l654"><span class="linenum"> 654</span></a>  
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">        // Re-Init charset handling, in case current_charset has changed:</span>
<a name="l656"><span class="linenum"> 656</span></a>          <a class="function" onClick="logFunction('init_charsets')" href="../../../_functions/init_charsets.html" onMouseOver="funcPopup(event,'init_charsets')">init_charsets</a>( <a class="var it627" onMouseOver="hilite(627)" onMouseOut="lolite()" onClick="logVariable('current_charset')" href="../../../_variables/current_charset.html">$current_charset</a> );
<a name="l657"><span class="linenum"> 657</span></a>      };
<a name="l658"><span class="linenum"> 658</span></a>  }
<a name="l659"><span class="linenum"> 659</span></a>  
<a name="l660"><span class="linenum"> 660</span></a>  
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">/**</span>
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment"> * Initialize blog enabled widgets. It will call every enabled widget request_required_files() function.</span>
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment"> *</span>
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment"> * @param integer blog ID</span>
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment"> */</span>
<a name="l666"><span class="linenum"> 666</span></a>  function <a class="function" onClick="logFunction('init_blog_widgets')" href="../../../_functions/init_blog_widgets.html" onMouseOver="funcPopup(event,'init_blog_widgets')">init_blog_widgets</a>( <a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../_variables/blog_id.html">$blog_id</a> )
<a name="l667"><span class="linenum"> 667</span></a>  {
<a name="l668"><span class="linenum"> 668</span></a>      <span class="comment">/**</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">     * @var EnabledWidgetCache</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">     */</span>
<a name="l671"><span class="linenum"> 671</span></a>      <a class="var it4114" onMouseOver="hilite(4114)" onMouseOut="lolite()" onClick="logVariable('EnabledWidgetCache')" href="../../../_variables/EnabledWidgetCache.html">$EnabledWidgetCache</a> = &amp; get_EnabledWidgetCache();
<a name="l672"><span class="linenum"> 672</span></a>      <a class="var it4550" onMouseOver="hilite(4550)" onMouseOut="lolite()" onClick="logVariable('container_Widget_array')" href="../../../_variables/container_Widget_array.html">$container_Widget_array</a> = &amp; <a class="var it4114" onMouseOver="hilite(4114)" onMouseOut="lolite()" onClick="logVariable('EnabledWidgetCache')" href="../../../_variables/EnabledWidgetCache.html">$EnabledWidgetCache</a>-&gt;get_by_coll_ID( <a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('blog_id')" href="../../../_variables/blog_id.html">$blog_id</a> );
<a name="l673"><span class="linenum"> 673</span></a>  
<a name="l674"><span class="linenum"> 674</span></a>      if( !empty(<a class="var it4550" onMouseOver="hilite(4550)" onMouseOut="lolite()" onClick="logVariable('container_Widget_array')" href="../../../_variables/container_Widget_array.html">$container_Widget_array</a>) )
<a name="l675"><span class="linenum"> 675</span></a>      {
<a name="l676"><span class="linenum"> 676</span></a>          foreach( <a class="var it4550" onMouseOver="hilite(4550)" onMouseOut="lolite()" onClick="logVariable('container_Widget_array')" href="../../../_variables/container_Widget_array.html">$container_Widget_array</a> as <a class="var it4123" onMouseOver="hilite(4123)" onMouseOut="lolite()" onClick="logVariable('container')" href="../../../_variables/container.html">$container</a>=&gt;<a class="var it4115" onMouseOver="hilite(4115)" onMouseOut="lolite()" onClick="logVariable('Widget_array')" href="../../../_variables/Widget_array.html">$Widget_array</a> )
<a name="l677"><span class="linenum"> 677</span></a>          {
<a name="l678"><span class="linenum"> 678</span></a>              foreach( <a class="var it4115" onMouseOver="hilite(4115)" onMouseOut="lolite()" onClick="logVariable('Widget_array')" href="../../../_variables/Widget_array.html">$Widget_array</a> as <a class="var it4116" onMouseOver="hilite(4116)" onMouseOut="lolite()" onClick="logVariable('ComponentWidget')" href="../../../_variables/ComponentWidget.html">$ComponentWidget</a> )
<a name="l679"><span class="linenum"> 679</span></a>              {    // Let the Widget initialize itself:
<a name="l680"><span class="linenum"> 680</span></a>                  <a class="var it4116" onMouseOver="hilite(4116)" onMouseOut="lolite()" onClick="logVariable('ComponentWidget')" href="../../../_variables/ComponentWidget.html">$ComponentWidget</a>-&gt;<a class="function" onClick="logFunction('request_required_files')" href="../../../_functions/request_required_files.html" onMouseOver="funcPopup(event,'request_required_files')">request_required_files</a>();
<a name="l681"><span class="linenum"> 681</span></a>              }
<a name="l682"><span class="linenum"> 682</span></a>          }
<a name="l683"><span class="linenum"> 683</span></a>      }
<a name="l684"><span class="linenum"> 684</span></a>  }
<a name="l685"><span class="linenum"> 685</span></a>  
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">/**</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment"> * Check if user is activated and status allow to display the requested form ($disp).</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment"> * Do nothing if status is activated or can't be activated or display is not allowed, add error message to activate the account otherwise.</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment"> * asimo&gt;TODO: We may find a better name and a better place for this function ( maybe user.funcs.php )</span>
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment"> *</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment"> * @param string the requested view name</span>
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment"> */</span>
<a name="l694"><span class="linenum"> 694</span></a>  function <a class="function" onClick="logFunction('check_allow_disp')" href="../../../_functions/check_allow_disp.html" onMouseOver="funcPopup(event,'check_allow_disp')">check_allow_disp</a>( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> )
<a name="l695"><span class="linenum"> 695</span></a>  {
<a name="l696"><span class="linenum"> 696</span></a>      global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it621" onMouseOver="hilite(621)" onMouseOut="lolite()" onClick="logVariable('secure_htsrv_url')" href="../../../_variables/secure_htsrv_url.html">$secure_htsrv_url</a>;
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>      if( !<a class="function" onClick="logFunction('check_user_status')" href="../../../_functions/check_user_status.html" onMouseOver="funcPopup(event,'check_user_status')">check_user_status</a>( 'can_be_validated' ) )
<a name="l699"><span class="linenum"> 699</span></a>      { // we don't have the case when user is logged in and the account is not active
<a name="l700"><span class="linenum"> 700</span></a>          return;
<a name="l701"><span class="linenum"> 701</span></a>      }
<a name="l702"><span class="linenum"> 702</span></a>  
<a name="l703"><span class="linenum"> 703</span></a>      <a class="var it9320" onMouseOver="hilite(9320)" onMouseOut="lolite()" onClick="logVariable('messages_content')" href="../../../_variables/messages_content.html">$messages_content</a> = <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>( '', '', '', 'raw' );
<a name="l704"><span class="linenum"> 704</span></a>      if( ( <a class="phpfunction" onClick="logFunction('strstr')" href="../../../_functions/strstr.html" onMouseOver="phpfuncPopup(event,'strstr')">strstr</a>( <a class="var it9320" onMouseOver="hilite(9320)" onMouseOut="lolite()" onClick="logVariable('messages_content')" href="../../../_variables/messages_content.html">$messages_content</a>, 'disp=activateinfo' ) !== false ) || ( <a class="phpfunction" onClick="logFunction('strstr')" href="../../../_functions/strstr.html" onMouseOver="phpfuncPopup(event,'strstr')">strstr</a>( <a class="var it9320" onMouseOver="hilite(9320)" onMouseOut="lolite()" onClick="logVariable('messages_content')" href="../../../_variables/messages_content.html">$messages_content</a>, 'action=req_validatemail' ) !== false ) )
<a name="l705"><span class="linenum"> 705</span></a>      { // If there is already a message to display activateinfo link, then don't add this message again
<a name="l706"><span class="linenum"> 706</span></a>          return;
<a name="l707"><span class="linenum"> 707</span></a>      }
<a name="l708"><span class="linenum"> 708</span></a>  
<a name="l709"><span class="linenum"> 709</span></a>      switch( <a class="var it45" onMouseOver="hilite(45)" onMouseOut="lolite()" onClick="logVariable('disp')" href="../../../_variables/disp.html">$disp</a> )
<a name="l710"><span class="linenum"> 710</span></a>      {
<a name="l711"><span class="linenum"> 711</span></a>          case 'activateinfo':
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">            // don't display activate account error notification in activate info page</span>
<a name="l713"><span class="linenum"> 713</span></a>              return;
<a name="l714"><span class="linenum"> 714</span></a>              break; <span class="comment">// already exited before this</span>
<a name="l715"><span class="linenum"> 715</span></a>          case 'contacts':
<a name="l716"><span class="linenum"> 716</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_contacts' ) )
<a name="l717"><span class="linenum"> 717</span></a>              { // contacts view display is not allowed
<a name="l718"><span class="linenum"> 718</span></a>                  return;
<a name="l719"><span class="linenum"> 719</span></a>              }
<a name="l720"><span class="linenum"> 720</span></a>              break;
<a name="l721"><span class="linenum"> 721</span></a>          case 'edit':
<a name="l722"><span class="linenum"> 722</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_edit_post' ) )
<a name="l723"><span class="linenum"> 723</span></a>              { // edit post is not allowed
<a name="l724"><span class="linenum"> 724</span></a>                  return;
<a name="l725"><span class="linenum"> 725</span></a>              }
<a name="l726"><span class="linenum"> 726</span></a>              break;
<a name="l727"><span class="linenum"> 727</span></a>          case 'messages':
<a name="l728"><span class="linenum"> 728</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_messages' ) )
<a name="l729"><span class="linenum"> 729</span></a>              { // messages view display is not allowed
<a name="l730"><span class="linenum"> 730</span></a>                  return;
<a name="l731"><span class="linenum"> 731</span></a>              }
<a name="l732"><span class="linenum"> 732</span></a>              break;
<a name="l733"><span class="linenum"> 733</span></a>          case 'msgform':
<a name="l734"><span class="linenum"> 734</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_msgform' ) )
<a name="l735"><span class="linenum"> 735</span></a>              { // msgform display is not allowed
<a name="l736"><span class="linenum"> 736</span></a>                  return;
<a name="l737"><span class="linenum"> 737</span></a>              }
<a name="l738"><span class="linenum"> 738</span></a>              break;
<a name="l739"><span class="linenum"> 739</span></a>          case 'threads':
<a name="l740"><span class="linenum"> 740</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_threads' ) )
<a name="l741"><span class="linenum"> 741</span></a>              { // threads view display is not allowed
<a name="l742"><span class="linenum"> 742</span></a>                  return;
<a name="l743"><span class="linenum"> 743</span></a>              }
<a name="l744"><span class="linenum"> 744</span></a>              break;
<a name="l745"><span class="linenum"> 745</span></a>          case 'user':
<a name="l746"><span class="linenum"> 746</span></a>              <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', '', true );
<a name="l747"><span class="linenum"> 747</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_user', <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l748"><span class="linenum"> 748</span></a>              { // user profile display is not allowed
<a name="l749"><span class="linenum"> 749</span></a>                  return;
<a name="l750"><span class="linenum"> 750</span></a>              }
<a name="l751"><span class="linenum"> 751</span></a>              break;
<a name="l752"><span class="linenum"> 752</span></a>          case 'users':
<a name="l753"><span class="linenum"> 753</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_status')" href="../../../_functions/check_status.html" onMouseOver="funcPopup(event,'check_status')">check_status</a>( 'can_view_users' ) )
<a name="l754"><span class="linenum"> 754</span></a>              { // not active user can't see users list
<a name="l755"><span class="linenum"> 755</span></a>                  return;
<a name="l756"><span class="linenum"> 756</span></a>              }
<a name="l757"><span class="linenum"> 757</span></a>              break;
<a name="l758"><span class="linenum"> 758</span></a>          default:
<a name="l759"><span class="linenum"> 759</span></a>              break;
<a name="l760"><span class="linenum"> 760</span></a>      }
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">    // User is allowed to see the requested view, but show an account activation error message</span>
<a name="l763"><span class="linenum"> 763</span></a>      <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('activateinfo_link')" href="../../../_variables/activateinfo_link.html">$activateinfo_link</a> = 'href=&quot;'.<a class="function" onClick="logFunction('get_activate_info_url')" href="../../../_functions/get_activate_info_url.html" onMouseOver="funcPopup(event,'get_activate_info_url')">get_activate_info_url</a>( NULL, '&amp;amp;' ).'&quot;';
<a name="l764"><span class="linenum"> 764</span></a>      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>( 'IMPORTANT: your account is not active yet! Activate your account now by clicking on the activation link in the email we sent you. &lt;a %s&gt;More info &amp;raquo;&lt;/a&gt;' ), <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('activateinfo_link')" href="../../../_variables/activateinfo_link.html">$activateinfo_link</a> ) );
<a name="l765"><span class="linenum"> 765</span></a>  }
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>  
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">/**</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment"> * Get the highest public status and action button label of a new post or comment in the given blog what the current User may create.</span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment"> * We assume here that the User should be able to create a post/comment with at least the lowest level status.</span>
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment"> *</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment"> * @param string 'post' or 'comment'</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment"> * @param integer blog ID</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment"> * @param boolean set false to get only the status without the action button label</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment"> * @return mixed string status if with_label is false, array( status, label ) if with_label is true</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment"> */</span>
<a name="l777"><span class="linenum"> 777</span></a>  function <a class="function" onClick="logFunction('get_highest_publish_status')" href="../../../_functions/get_highest_publish_status.html" onMouseOver="funcPopup(event,'get_highest_publish_status')">get_highest_publish_status</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, <a class="var it9321" onMouseOver="hilite(9321)" onMouseOut="lolite()" onClick="logVariable('with_label')" href="../../../_variables/with_label.html">$with_label</a> = true )
<a name="l778"><span class="linenum"> 778</span></a>  {
<a name="l779"><span class="linenum"> 779</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>      if( ( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> != 'post' ) &amp;&amp; ( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> != 'comment' ) )
<a name="l782"><span class="linenum"> 782</span></a>      { // <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> is invalid
<a name="l783"><span class="linenum"> 783</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid type parameter!' );
<a name="l784"><span class="linenum"> 784</span></a>      }
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l787"><span class="linenum"> 787</span></a>      <a class="var it9322" onMouseOver="hilite(9322)" onMouseOut="lolite()" onClick="logVariable('requested_Blog')" href="../../../_variables/requested_Blog.html">$requested_Blog</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> );
<a name="l788"><span class="linenum"> 788</span></a>      <a class="var it2927" onMouseOver="hilite(2927)" onMouseOut="lolite()" onClick="logVariable('default_status')" href="../../../_variables/default_status.html">$default_status</a> = ( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == 'post' ) ? <a class="var it9322" onMouseOver="hilite(9322)" onMouseOut="lolite()" onClick="logVariable('requested_Blog')" href="../../../_variables/requested_Blog.html">$requested_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'default_post_status' ) : <a class="var it9322" onMouseOver="hilite(9322)" onMouseOut="lolite()" onClick="logVariable('requested_Blog')" href="../../../_variables/requested_Blog.html">$requested_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'new_feedback_status' );
<a name="l789"><span class="linenum"> 789</span></a>  
<a name="l790"><span class="linenum"> 790</span></a>      if( empty( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a> ) || ( ( !<a class="var it9322" onMouseOver="hilite(9322)" onMouseOut="lolite()" onClick="logVariable('requested_Blog')" href="../../../_variables/requested_Blog.html">$requested_Blog</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'advanced_perms' ) ) &amp;&amp; ( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm_blog_global')" href="../../../_functions/check_perm_blog_global.html" onMouseOver="funcPopup(event,'check_perm_blog_global')">check_perm_blog_global</a>( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, 'editall' ) ) ) )
<a name="l791"><span class="linenum"> 791</span></a>      { // current User is not set or collection advanced perms are not enabled and user has no global perms on the given blog, set status to the default status
<a name="l792"><span class="linenum"> 792</span></a>          return ( <a class="var it9321" onMouseOver="hilite(9321)" onMouseOut="lolite()" onClick="logVariable('with_label')" href="../../../_variables/with_label.html">$with_label</a> ? array( <a class="var it2927" onMouseOver="hilite(2927)" onMouseOut="lolite()" onClick="logVariable('default_status')" href="../../../_variables/default_status.html">$default_status</a>, '' ) : <a class="var it2927" onMouseOver="hilite(2927)" onMouseOut="lolite()" onClick="logVariable('default_status')" href="../../../_variables/default_status.html">$default_status</a> );
<a name="l793"><span class="linenum"> 793</span></a>      }
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>      <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-array' );
<a name="l796"><span class="linenum"> 796</span></a>      <a class="var it9323" onMouseOver="hilite(9323)" onMouseOut="lolite()" onClick="logVariable('highest_index')" href="../../../_variables/highest_index.html">$highest_index</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a> ) - 1;
<a name="l797"><span class="linenum"> 797</span></a>      <a class="var it9324" onMouseOver="hilite(9324)" onMouseOut="lolite()" onClick="logVariable('default_status_label')" href="../../../_variables/default_status_label.html">$default_status_label</a> = '';
<a name="l798"><span class="linenum"> 798</span></a>      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = false;
<a name="l799"><span class="linenum"> 799</span></a>      for( <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> = <a class="var it9323" onMouseOver="hilite(9323)" onMouseOut="lolite()" onClick="logVariable('highest_index')" href="../../../_variables/highest_index.html">$highest_index</a>; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> &gt; 0; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>-- )
<a name="l800"><span class="linenum"> 800</span></a>      {
<a name="l801"><span class="linenum"> 801</span></a>          <a class="var it3942" onMouseOver="hilite(3942)" onMouseOut="lolite()" onClick="logVariable('curr_status')" href="../../../_variables/curr_status.html">$curr_status</a> = <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>][0];
<a name="l802"><span class="linenum"> 802</span></a>          if( <a class="var it3942" onMouseOver="hilite(3942)" onMouseOut="lolite()" onClick="logVariable('curr_status')" href="../../../_variables/curr_status.html">$curr_status</a> == <a class="var it2927" onMouseOver="hilite(2927)" onMouseOut="lolite()" onClick="logVariable('default_status')" href="../../../_variables/default_status.html">$default_status</a> )
<a name="l803"><span class="linenum"> 803</span></a>          { // Set default status label for later use
<a name="l804"><span class="linenum"> 804</span></a>              <a class="var it9324" onMouseOver="hilite(9324)" onMouseOut="lolite()" onClick="logVariable('default_status_label')" href="../../../_variables/default_status_label.html">$default_status_label</a> =  <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>][1];
<a name="l805"><span class="linenum"> 805</span></a>          }
<a name="l806"><span class="linenum"> 806</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_'.<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>.'!'.<a class="var it3942" onMouseOver="hilite(3942)" onMouseOut="lolite()" onClick="logVariable('curr_status')" href="../../../_variables/curr_status.html">$curr_status</a>, 'create', false, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ) )
<a name="l807"><span class="linenum"> 807</span></a>          { // The highest available publish status has been found
<a name="l808"><span class="linenum"> 808</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( <a class="var it3942" onMouseOver="hilite(3942)" onMouseOut="lolite()" onClick="logVariable('curr_status')" href="../../../_variables/curr_status.html">$curr_status</a>, <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('status_order')" href="../../../_variables/status_order.html">$status_order</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>][1] );
<a name="l809"><span class="linenum"> 809</span></a>              break;
<a name="l810"><span class="linenum"> 810</span></a>          }
<a name="l811"><span class="linenum"> 811</span></a>      }
<a name="l812"><span class="linenum"> 812</span></a>  
<a name="l813"><span class="linenum"> 813</span></a>      if( !<a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> )
<a name="l814"><span class="linenum"> 814</span></a>      { // There are no available public status
<a name="l815"><span class="linenum"> 815</span></a>          if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_'.<a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>.'!private', 'create', false, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ) )
<a name="l816"><span class="linenum"> 816</span></a>          { // Check private status
<a name="l817"><span class="linenum"> 817</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( 'private', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Make private!') );
<a name="l818"><span class="linenum"> 818</span></a>          }
<a name="l819"><span class="linenum"> 819</span></a>          else
<a name="l820"><span class="linenum"> 820</span></a>          { // None of the statuses were allowed avove the 'draft' status, so we return the lowest level status.
<a name="l821"><span class="linenum"> 821</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array( 'draft', '' );
<a name="l822"><span class="linenum"> 822</span></a>          }
<a name="l823"><span class="linenum"> 823</span></a>      }
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>      if( <a class="var it9321" onMouseOver="hilite(9321)" onMouseOut="lolite()" onClick="logVariable('with_label')" href="../../../_variables/with_label.html">$with_label</a> )
<a name="l826"><span class="linenum"> 826</span></a>      {
<a name="l827"><span class="linenum"> 827</span></a>          return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l828"><span class="linenum"> 828</span></a>      }
<a name="l829"><span class="linenum"> 829</span></a>  
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">    // Return only the highest available visibility status without label</span>
<a name="l831"><span class="linenum"> 831</span></a>      return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[0];
<a name="l832"><span class="linenum"> 832</span></a>  }
<a name="l833"><span class="linenum"> 833</span></a>  
<a name="l834"><span class="linenum"> 834</span></a>  
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">/**</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment"> * Retrieves all tags from published posts</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment"> *</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment"> * @param integer the id of the blog or array of blog ids. Set NULL to use current blog</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment"> * @param integer maximum number of returned tags</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment"> * @param string a comma separated list of tags to ignore/exclude</span>
<a name="l841"><span class="linenum"> 841</span></a>  <span class="comment"> * @param bool true to skip tags from pages, intro posts and sidebar stuff</span>
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment"> * @return array of tags</span>
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment"> */</span>
<a name="l844"><span class="linenum"> 844</span></a>  function <a class="function" onClick="logFunction('get_tags')" href="../../../_functions/get_tags.html" onMouseOver="funcPopup(event,'get_tags')">get_tags</a>( <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../_variables/blog_ids.html">$blog_ids</a>, <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../../_variables/limit.html">$limit</a> = 0, <a class="var it9325" onMouseOver="hilite(9325)" onMouseOut="lolite()" onClick="logVariable('filter_list')" href="../../../_variables/filter_list.html">$filter_list</a> = NULL, <a class="var it9326" onMouseOver="hilite(9326)" onMouseOut="lolite()" onClick="logVariable('skip_intro_posts')" href="../../../_variables/skip_intro_posts.html">$skip_intro_posts</a> = false )
<a name="l845"><span class="linenum"> 845</span></a>  {
<a name="l846"><span class="linenum"> 846</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('posttypes_specialtypes')" href="../../../_variables/posttypes_specialtypes.html">$posttypes_specialtypes</a>;
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l849"><span class="linenum"> 849</span></a>  
<a name="l850"><span class="linenum"> 850</span></a>      if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../_variables/blog_ids.html">$blog_ids</a> ) )
<a name="l851"><span class="linenum"> 851</span></a>      {
<a name="l852"><span class="linenum"> 852</span></a>          global <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>;
<a name="l853"><span class="linenum"> 853</span></a>          <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../_variables/blog_ids.html">$blog_ids</a> = <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>;
<a name="l854"><span class="linenum"> 854</span></a>      }
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>      if( <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>( <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../_variables/blog_ids.html">$blog_ids</a> ) )
<a name="l857"><span class="linenum"> 857</span></a>      { // Get quoted ID list
<a name="l858"><span class="linenum"> 858</span></a>          <a class="var it9327" onMouseOver="hilite(9327)" onMouseOut="lolite()" onClick="logVariable('where_cat_clause')" href="../../../_variables/where_cat_clause.html">$where_cat_clause</a> = 'cat_blog_ID IN ( '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../_variables/blog_ids.html">$blog_ids</a> ).' )';
<a name="l859"><span class="linenum"> 859</span></a>      }
<a name="l860"><span class="linenum"> 860</span></a>      else
<a name="l861"><span class="linenum"> 861</span></a>      { // Get list of relevant blogs
<a name="l862"><span class="linenum"> 862</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it2073" onMouseOver="hilite(2073)" onMouseOut="lolite()" onClick="logVariable('blog_ids')" href="../../../_variables/blog_ids.html">$blog_ids</a> );
<a name="l863"><span class="linenum"> 863</span></a>          <a class="var it9327" onMouseOver="hilite(9327)" onMouseOut="lolite()" onClick="logVariable('where_cat_clause')" href="../../../_variables/where_cat_clause.html">$where_cat_clause</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_sql_where_aggregate_coll_IDs')" href="../../../_functions/get_sql_where_aggregate_coll_ids.html" onMouseOver="funcPopup(event,'get_sql_where_aggregate_coll_ids')">get_sql_where_aggregate_coll_IDs</a>( 'cat_blog_ID' ) );
<a name="l864"><span class="linenum"> 864</span></a>      }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">    // Build query to get the tags:</span>
<a name="l867"><span class="linenum"> 867</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l868"><span class="linenum"> 868</span></a>  
<a name="l869"><span class="linenum"> 869</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'tag_name, <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>( DISTINCT itag_itm_ID ) AS tag_count, tag_ID, cat_blog_ID' );
<a name="l870"><span class="linenum"> 870</span></a>  
<a name="l871"><span class="linenum"> 871</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_items__tag' );
<a name="l872"><span class="linenum"> 872</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_items__itemtag ON itag_tag_ID = tag_ID' );
<a name="l873"><span class="linenum"> 873</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_items__item ON itag_itm_ID = post_ID' );
<a name="l874"><span class="linenum"> 874</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_postcats ON itag_itm_ID = postcat_post_ID' );
<a name="l875"><span class="linenum"> 875</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'INNER JOIN T_categories ON postcat_cat_ID = cat_ID' );
<a name="l876"><span class="linenum"> 876</span></a>  
<a name="l877"><span class="linenum"> 877</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( <a class="var it9327" onMouseOver="hilite(9327)" onMouseOut="lolite()" onClick="logVariable('where_cat_clause')" href="../../../_variables/where_cat_clause.html">$where_cat_clause</a> );
<a name="l878"><span class="linenum"> 878</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'post_status = &quot;published&quot;' );
<a name="l879"><span class="linenum"> 879</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'post_datestart &lt; '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="function" onClick="logFunction('remove_seconds')" href="../../../_functions/remove_seconds.html" onMouseOver="funcPopup(event,'remove_seconds')">remove_seconds</a>( <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a> ) ) );
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>      if( <a class="var it9326" onMouseOver="hilite(9326)" onMouseOut="lolite()" onClick="logVariable('skip_intro_posts')" href="../../../_variables/skip_intro_posts.html">$skip_intro_posts</a> )
<a name="l882"><span class="linenum"> 882</span></a>      { // Skip &quot;Intro&quot; posts
<a name="l883"><span class="linenum"> 883</span></a>          <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'post_ityp_ID NOT IN ( '.<a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( ', ', <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('posttypes_specialtypes')" href="../../../_variables/posttypes_specialtypes.html">$posttypes_specialtypes</a> ).' )' );
<a name="l884"><span class="linenum"> 884</span></a>      }
<a name="l885"><span class="linenum"> 885</span></a>  
<a name="l886"><span class="linenum"> 886</span></a>      if( ! empty( <a class="var it9325" onMouseOver="hilite(9325)" onMouseOut="lolite()" onClick="logVariable('filter_list')" href="../../../_variables/filter_list.html">$filter_list</a> ) )
<a name="l887"><span class="linenum"> 887</span></a>      { // Filter tags
<a name="l888"><span class="linenum"> 888</span></a>          <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE_and')" href="../../../_functions/where_and.html" onMouseOver="funcPopup(event,'where_and')">WHERE_and</a>( 'tag_name NOT IN ( '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ', ', <a class="var it9325" onMouseOver="hilite(9325)" onMouseOut="lolite()" onClick="logVariable('filter_list')" href="../../../_variables/filter_list.html">$filter_list</a> ) ).' )' );
<a name="l889"><span class="linenum"> 889</span></a>      }
<a name="l890"><span class="linenum"> 890</span></a>  
<a name="l891"><span class="linenum"> 891</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('GROUP_BY')" href="../../../_functions/group_by.html" onMouseOver="funcPopup(event,'group_by')">GROUP_BY</a>( 'tag_name' );
<a name="l892"><span class="linenum"> 892</span></a>  
<a name="l893"><span class="linenum"> 893</span></a>      <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('ORDER_BY')" href="../../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">ORDER_BY</a>( 'tag_count DESC' );
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>      if( ! empty( <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../../_variables/limit.html">$limit</a> ) )
<a name="l896"><span class="linenum"> 896</span></a>      { // Limit
<a name="l897"><span class="linenum"> 897</span></a>          <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('LIMIT')" href="../../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">LIMIT</a>( <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../../_variables/limit.html">$limit</a> );
<a name="l898"><span class="linenum"> 898</span></a>      }
<a name="l899"><span class="linenum"> 899</span></a>  
<a name="l900"><span class="linenum"> 900</span></a>      return <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it8479" onMouseOver="hilite(8479)" onMouseOut="lolite()" onClick="logVariable('tags_SQL')" href="../../../_variables/tags_SQL.html">$tags_SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), <a class="constant" onClick="logConstant('OBJECT')" href="../../../_constants/OBJECT.html" onMouseOver="constPopup(event,'OBJECT')">OBJECT</a>, 'Get tags' );
<a name="l901"><span class="linenum"> 901</span></a>  }
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>  
<a name="l904"><span class="linenum"> 904</span></a>  <span class="comment">/**</span>
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment"> * Get a list of those statuses which can be displayed in the front office</span>
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment"> *</span>
<a name="l907"><span class="linenum"> 907</span></a>  <span class="comment"> * @param integer blog ID</span>
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment"> * @param string get setting for 'post' or 'comment'</span>
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment"> * @return array front office statuses in the given blog</span>
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment"> */</span>
<a name="l911"><span class="linenum"> 911</span></a>  function <a class="function" onClick="logFunction('get_inskin_statuses')" href="../../../_functions/get_inskin_statuses.html" onMouseOver="funcPopup(event,'get_inskin_statuses')">get_inskin_statuses</a>( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> )
<a name="l912"><span class="linenum"> 912</span></a>  {
<a name="l913"><span class="linenum"> 913</span></a>      if( empty( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l914"><span class="linenum"> 914</span></a>      { // When blog is not set return the default value
<a name="l915"><span class="linenum"> 915</span></a>          return array( 'published', 'community', 'protected', 'private', 'review' );
<a name="l916"><span class="linenum"> 916</span></a>      }
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l919"><span class="linenum"> 919</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> );
<a name="l920"><span class="linenum"> 920</span></a>      <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('inskin_statuses')" href="../../../_variables/inskin_statuses.html">$inskin_statuses</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( ( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == 'comment' ) ? 'comment_inskin_statuses' : 'post_inskin_statuses' );
<a name="l921"><span class="linenum"> 921</span></a>      return <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('inskin_statuses')" href="../../../_variables/inskin_statuses.html">$inskin_statuses</a> );
<a name="l922"><span class="linenum"> 922</span></a>  }
<a name="l923"><span class="linenum"> 923</span></a>  
<a name="l924"><span class="linenum"> 924</span></a>  
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment">/**</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment"> * Get post/comment inskin statuses option list</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment"> *</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment"> * @param string type = 'post' or 'comment'</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment"> * @return array checklist options</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment"> */</span>
<a name="l931"><span class="linenum"> 931</span></a>  function <a class="function" onClick="logFunction('get_inskin_statuses_options')" href="../../../_functions/get_inskin_statuses_options.html" onMouseOver="funcPopup(event,'get_inskin_statuses_options')">get_inskin_statuses_options</a>( &amp; <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>, <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> )
<a name="l932"><span class="linenum"> 932</span></a>  {
<a name="l933"><span class="linenum"> 933</span></a>      <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('checklist_options')" href="../../../_variables/checklist_options.html">$checklist_options</a> = array();
<a name="l934"><span class="linenum"> 934</span></a>      if( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> != 'post' &amp;&amp; <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> != 'comment' )
<a name="l935"><span class="linenum"> 935</span></a>      {
<a name="l936"><span class="linenum"> 936</span></a>          return <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('checklist_options')" href="../../../_variables/checklist_options.html">$checklist_options</a>;
<a name="l937"><span class="linenum"> 937</span></a>      }
<a name="l938"><span class="linenum"> 938</span></a>  
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">    // Get all available statuses except 'deprecated', 'trash' and 'redirected'</span>
<a name="l940"><span class="linenum"> 940</span></a>      <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( '', array( 'deprecated', 'trash', 'redirected' ) );
<a name="l941"><span class="linenum"> 941</span></a>      <a class="var it7215" onMouseOver="hilite(7215)" onMouseOut="lolite()" onClick="logVariable('status_icons')" href="../../../_variables/status_icons.html">$status_icons</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'icons', array( 'deprecated', 'trash', 'redirected' ) );
<a name="l942"><span class="linenum"> 942</span></a>      <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('inskin_statuses')" href="../../../_variables/inskin_statuses.html">$inskin_statuses</a> = <a class="var it1698" onMouseOver="hilite(1698)" onMouseOut="lolite()" onClick="logVariable('edited_Blog')" href="../../../_variables/edited_Blog.html">$edited_Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>.'_inskin_statuses' );
<a name="l943"><span class="linenum"> 943</span></a>      foreach( <a class="var it1180" onMouseOver="hilite(1180)" onMouseOut="lolite()" onClick="logVariable('statuses')" href="../../../_variables/statuses.html">$statuses</a> as <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> =&gt; <a class="var it6811" onMouseOver="hilite(6811)" onMouseOut="lolite()" onClick="logVariable('status_text')" href="../../../_variables/status_text.html">$status_text</a> )
<a name="l944"><span class="linenum"> 944</span></a>      { // Add a checklist option for each possible front office post/comment status
<a name="l945"><span class="linenum"> 945</span></a>          <a class="var it6812" onMouseOver="hilite(6812)" onMouseOut="lolite()" onClick="logVariable('is_checked')" href="../../../_variables/is_checked.html">$is_checked</a> = ( <a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>( <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('inskin_statuses')" href="../../../_variables/inskin_statuses.html">$inskin_statuses</a>, <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> ) !== false );
<a name="l946"><span class="linenum"> 946</span></a>          <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('checklist_options')" href="../../../_variables/checklist_options.html">$checklist_options</a>[] = array( <a class="var it558" onMouseOver="hilite(558)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>.'_inskin_'.<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>, 1, <a class="var it7215" onMouseOver="hilite(7215)" onMouseOut="lolite()" onClick="logVariable('status_icons')" href="../../../_variables/status_icons.html">$status_icons</a>[ <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> ].' '.<a class="var it6811" onMouseOver="hilite(6811)" onMouseOut="lolite()" onClick="logVariable('status_text')" href="../../../_variables/status_text.html">$status_text</a>, <a class="var it6812" onMouseOver="hilite(6812)" onMouseOut="lolite()" onClick="logVariable('is_checked')" href="../../../_variables/is_checked.html">$is_checked</a> );
<a name="l947"><span class="linenum"> 947</span></a>      }
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>      return <a class="var it6810" onMouseOver="hilite(6810)" onMouseOut="lolite()" onClick="logVariable('checklist_options')" href="../../../_variables/checklist_options.html">$checklist_options</a>;
<a name="l950"><span class="linenum"> 950</span></a>  }
<a name="l951"><span class="linenum"> 951</span></a>  
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">/**</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment"> * Get available post statuses</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment"> *</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment"> * @param string Statuses format, defaults to translated statuses</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment"> * @param array Statuses to exclude. Unused 'trash' status excluded by default</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment"> * @param array Check if current user has a permission for each status</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment"> * @return array of statuses</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> */</span>
<a name="l962"><span class="linenum"> 962</span></a>  function <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = '', <a class="var it4499" onMouseOver="hilite(4499)" onMouseOut="lolite()" onClick="logVariable('exclude')" href="../../../_variables/exclude.html">$exclude</a> = array('trash'), <a class="var it2850" onMouseOver="hilite(2850)" onMouseOut="lolite()" onClick="logVariable('check_perms')" href="../../../_variables/check_perms.html">$check_perms</a> = false, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> = NULL )
<a name="l963"><span class="linenum"> 963</span></a>  {
<a name="l964"><span class="linenum"> 964</span></a>      switch( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> )
<a name="l965"><span class="linenum"> 965</span></a>      {
<a name="l966"><span class="linenum"> 966</span></a>          case 'notes-array':
<a name="l967"><span class="linenum"> 967</span></a>          case 'notes-string':
<a name="l968"><span class="linenum"> 968</span></a>          case 'radio-options':
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment">            // Array notes for visibility_select()</span>
<a name="l970"><span class="linenum"> 970</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array(
<a name="l971"><span class="linenum"> 971</span></a>                      'published'  =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Public'),     '('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Everyone').')' ),
<a name="l972"><span class="linenum"> 972</span></a>                      'community'  =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Community'),  '('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Logged in users only').')' ),
<a name="l973"><span class="linenum"> 973</span></a>                      'protected'  =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Members'),    '('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Blog members only').')' ),
<a name="l974"><span class="linenum"> 974</span></a>                      'review'     =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Review'),     '('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Moderators only (+You)').')' ),
<a name="l975"><span class="linenum"> 975</span></a>                      'private'    =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Private'),    '('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You only').')' ),
<a name="l976"><span class="linenum"> 976</span></a>                      'draft'      =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Draft'),      '('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You only (+backoffice users)').')' ),
<a name="l977"><span class="linenum"> 977</span></a>                      'deprecated' =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Deprecated'), '('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Not published!').')' ),
<a name="l978"><span class="linenum"> 978</span></a>                      'redirected' =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Redirected'), '(301)' ),
<a name="l979"><span class="linenum"> 979</span></a>                      'trash'      =&gt; array( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Recycled'),   '' )
<a name="l980"><span class="linenum"> 980</span></a>                  );
<a name="l981"><span class="linenum"> 981</span></a>  
<a name="l982"><span class="linenum"> 982</span></a>              if( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> == 'notes-string' )
<a name="l983"><span class="linenum"> 983</span></a>              {    // String notes
<a name="l984"><span class="linenum"> 984</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>( <a class="phpfunction" onClick="logFunction('create_function')" href="../../../_functions/create_function.html" onMouseOver="phpfuncPopup(event,'create_function')">create_function</a>('<a class="var it244" onMouseOver="hilite(244)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>', 'return <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot; &quot;, <a class="var it244" onMouseOver="hilite(244)" onMouseOut="lolite()" onClick="logVariable('v')" href="../../../_variables/v.html">$v</a>);'), <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l985"><span class="linenum"> 985</span></a>              }
<a name="l986"><span class="linenum"> 986</span></a>              break;
<a name="l987"><span class="linenum"> 987</span></a>  
<a name="l988"><span class="linenum"> 988</span></a>          case 'moderation-titles':
<a name="l989"><span class="linenum"> 989</span></a>              <a class="var it3956" onMouseOver="hilite(3956)" onMouseOut="lolite()" onClick="logVariable('change_status')" href="../../../_variables/change_status.html">$change_status</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Change status to').': ';
<a name="l990"><span class="linenum"> 990</span></a>              <a class="var it9328" onMouseOver="hilite(9328)" onMouseOut="lolite()" onClick="logVariable('visible_by')" href="../../../_variables/visible_by.html">$visible_by</a> = ' ('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Visible by').': ';
<a name="l991"><span class="linenum"> 991</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array(
<a name="l992"><span class="linenum"> 992</span></a>                      'published'  =&gt; <a class="var it3956" onMouseOver="hilite(3956)" onMouseOut="lolite()" onClick="logVariable('change_status')" href="../../../_variables/change_status.html">$change_status</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Public').<a class="var it9328" onMouseOver="hilite(9328)" onMouseOut="lolite()" onClick="logVariable('visible_by')" href="../../../_variables/visible_by.html">$visible_by</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Everyone').')',
<a name="l993"><span class="linenum"> 993</span></a>                      'community'  =&gt; <a class="var it3956" onMouseOver="hilite(3956)" onMouseOut="lolite()" onClick="logVariable('change_status')" href="../../../_variables/change_status.html">$change_status</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Community').<a class="var it9328" onMouseOver="hilite(9328)" onMouseOut="lolite()" onClick="logVariable('visible_by')" href="../../../_variables/visible_by.html">$visible_by</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Logged in users only').')',
<a name="l994"><span class="linenum"> 994</span></a>                      'protected'  =&gt; <a class="var it3956" onMouseOver="hilite(3956)" onMouseOut="lolite()" onClick="logVariable('change_status')" href="../../../_variables/change_status.html">$change_status</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Members').<a class="var it9328" onMouseOver="hilite(9328)" onMouseOut="lolite()" onClick="logVariable('visible_by')" href="../../../_variables/visible_by.html">$visible_by</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Blog members only').')',
<a name="l995"><span class="linenum"> 995</span></a>                      'review'     =&gt; <a class="var it3956" onMouseOver="hilite(3956)" onMouseOut="lolite()" onClick="logVariable('change_status')" href="../../../_variables/change_status.html">$change_status</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Review').<a class="var it9328" onMouseOver="hilite(9328)" onMouseOut="lolite()" onClick="logVariable('visible_by')" href="../../../_variables/visible_by.html">$visible_by</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Moderators only (+You)').')',
<a name="l996"><span class="linenum"> 996</span></a>                      'private'    =&gt; <a class="var it3956" onMouseOver="hilite(3956)" onMouseOut="lolite()" onClick="logVariable('change_status')" href="../../../_variables/change_status.html">$change_status</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Private').<a class="var it9328" onMouseOver="hilite(9328)" onMouseOut="lolite()" onClick="logVariable('visible_by')" href="../../../_variables/visible_by.html">$visible_by</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You only').')',
<a name="l997"><span class="linenum"> 997</span></a>                      'draft'      =&gt; <a class="var it3956" onMouseOver="hilite(3956)" onMouseOut="lolite()" onClick="logVariable('change_status')" href="../../../_variables/change_status.html">$change_status</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Draft').<a class="var it9328" onMouseOver="hilite(9328)" onMouseOut="lolite()" onClick="logVariable('visible_by')" href="../../../_variables/visible_by.html">$visible_by</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('You only (+backoffice users)').')',
<a name="l998"><span class="linenum"> 998</span></a>                      'deprecated' =&gt; <a class="var it3956" onMouseOver="hilite(3956)" onMouseOut="lolite()" onClick="logVariable('change_status')" href="../../../_variables/change_status.html">$change_status</a>.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Deprecated').' ('.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Not published!').')',
<a name="l999"><span class="linenum"> 999</span></a>                      'redirected' =&gt; '',
<a name="l1000"><span class="linenum">1000</span></a>                      'trash'      =&gt; ''
<a name="l1001"><span class="linenum">1001</span></a>                  );
<a name="l1002"><span class="linenum">1002</span></a>              break;
<a name="l1003"><span class="linenum">1003</span></a>  
<a name="l1004"><span class="linenum">1004</span></a>          case 'legend-titles':
<a name="l1005"><span class="linenum">1005</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array(
<a name="l1006"><span class="linenum">1006</span></a>                      'published' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Visible by anyone'),
<a name="l1007"><span class="linenum">1007</span></a>                      'community' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Visible by logged-in users only'),
<a name="l1008"><span class="linenum">1008</span></a>                      'protected' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Visible by members only'),
<a name="l1009"><span class="linenum">1009</span></a>                      'review'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Waiting for moderator review'),
<a name="l1010"><span class="linenum">1010</span></a>                      'private'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Visible by you only'),
<a name="l1011"><span class="linenum">1011</span></a>                      'draft'     =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Unfinished post'),
<a name="l1012"><span class="linenum">1012</span></a>                  );
<a name="l1013"><span class="linenum">1013</span></a>              break;
<a name="l1014"><span class="linenum">1014</span></a>  
<a name="l1015"><span class="linenum">1015</span></a>          case 'button-titles':
<a name="l1016"><span class="linenum">1016</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array(
<a name="l1017"><span class="linenum">1017</span></a>                      'published'  =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Save as Public!'),
<a name="l1018"><span class="linenum">1018</span></a>                      'community'  =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Save for Community!'),
<a name="l1019"><span class="linenum">1019</span></a>                      'protected'  =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Save for Members!'),
<a name="l1020"><span class="linenum">1020</span></a>                      'review'     =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Save for Review!'),
<a name="l1021"><span class="linenum">1021</span></a>                      'private'    =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Save as Private!'),
<a name="l1022"><span class="linenum">1022</span></a>                      'draft'      =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Save as Draft!'),
<a name="l1023"><span class="linenum">1023</span></a>                      'deprecated' =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Save as Deprecated!'),
<a name="l1024"><span class="linenum">1024</span></a>                      'redirected' =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Save as Redirected!'),
<a name="l1025"><span class="linenum">1025</span></a>                  );
<a name="l1026"><span class="linenum">1026</span></a>              break;
<a name="l1027"><span class="linenum">1027</span></a>  
<a name="l1028"><span class="linenum">1028</span></a>          case 'ordered-array': // indexed array, ordered from the lowest to the highest public level
<a name="l1029"><span class="linenum">1029</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array(
<a name="l1030"><span class="linenum">1030</span></a>                  0 =&gt; array( 'deprecated', '', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Deprecate!'), 'grey' ),
<a name="l1031"><span class="linenum">1031</span></a>                  1 =&gt; array( 'review', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Open to moderators!'), <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Restrict to moderators!'), 'magenta' ),
<a name="l1032"><span class="linenum">1032</span></a>                  2 =&gt; array( 'protected', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Open to members!'), <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Restrict to members!'), 'orange' ),
<a name="l1033"><span class="linenum">1033</span></a>                  3 =&gt; array( 'community', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Open to community!'), <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Restrict to community!'), 'blue' ),
<a name="l1034"><span class="linenum">1034</span></a>                  4 =&gt; array( 'published', <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Make public!'), '', 'green' )
<a name="l1035"><span class="linenum">1035</span></a>              );
<a name="l1036"><span class="linenum">1036</span></a>              return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1037"><span class="linenum">1037</span></a>  
<a name="l1038"><span class="linenum">1038</span></a>          case 'ordered-index': // gives each status index in the statuses ordered array
<a name="l1039"><span class="linenum">1039</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array(
<a name="l1040"><span class="linenum">1040</span></a>                  'redirected' =&gt; 0,
<a name="l1041"><span class="linenum">1041</span></a>                  'trash'      =&gt; 0,
<a name="l1042"><span class="linenum">1042</span></a>                  'private'    =&gt; 0,
<a name="l1043"><span class="linenum">1043</span></a>                  'draft'      =&gt; 0,
<a name="l1044"><span class="linenum">1044</span></a>                  'deprecated' =&gt; 0,
<a name="l1045"><span class="linenum">1045</span></a>                  'review'     =&gt; 1,
<a name="l1046"><span class="linenum">1046</span></a>                  'protected'  =&gt; 2,
<a name="l1047"><span class="linenum">1047</span></a>                  'community'  =&gt; 3,
<a name="l1048"><span class="linenum">1048</span></a>                  'published'  =&gt; 4,
<a name="l1049"><span class="linenum">1049</span></a>              );
<a name="l1050"><span class="linenum">1050</span></a>              break;
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>          case 'moderation': // these statuses may need moderation
<a name="l1053"><span class="linenum">1053</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array( 'community', 'protected', 'review', 'draft' );
<a name="l1054"><span class="linenum">1054</span></a>              return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1055"><span class="linenum">1055</span></a>  
<a name="l1056"><span class="linenum">1056</span></a>          case 'icons': // colored icons
<a name="l1057"><span class="linenum">1057</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array (
<a name="l1058"><span class="linenum">1058</span></a>                      'published'  =&gt; '&lt;span class=&quot;fa fa-circle status_color_published&quot;&gt;&lt;/span&gt;',
<a name="l1059"><span class="linenum">1059</span></a>                      'community'  =&gt; '&lt;span class=&quot;fa fa-circle status_color_community&quot;&gt;&lt;/span&gt;',
<a name="l1060"><span class="linenum">1060</span></a>                      'protected'  =&gt; '&lt;span class=&quot;fa fa-circle status_color_protected&quot;&gt;&lt;/span&gt;',
<a name="l1061"><span class="linenum">1061</span></a>                      'private'    =&gt; '&lt;span class=&quot;fa fa-circle status_color_private&quot;&gt;&lt;/span&gt;',
<a name="l1062"><span class="linenum">1062</span></a>                      'review'     =&gt; '&lt;span class=&quot;fa fa-circle status_color_review&quot;&gt;&lt;/span&gt;',
<a name="l1063"><span class="linenum">1063</span></a>                      'draft'      =&gt; '&lt;span class=&quot;fa fa-circle status_color_draft&quot;&gt;&lt;/span&gt;',
<a name="l1064"><span class="linenum">1064</span></a>                      'deprecated' =&gt; '&lt;span class=&quot;fa fa-circle status_color_deprecated&quot;&gt;&lt;/span&gt;',
<a name="l1065"><span class="linenum">1065</span></a>                      'redirected' =&gt; '&lt;span class=&quot;fa fa-circle status_color_redirected&quot;&gt;&lt;/span&gt;',
<a name="l1066"><span class="linenum">1066</span></a>                  );
<a name="l1067"><span class="linenum">1067</span></a>              break;
<a name="l1068"><span class="linenum">1068</span></a>  
<a name="l1069"><span class="linenum">1069</span></a>          case 'raw':
<a name="l1070"><span class="linenum">1070</span></a>          default:
<a name="l1071"><span class="linenum">1071</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array (
<a name="l1072"><span class="linenum">1072</span></a>                      'published'  =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Public'),
<a name="l1073"><span class="linenum">1073</span></a>                      'community'  =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Community'),
<a name="l1074"><span class="linenum">1074</span></a>                      'protected'  =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Members'),
<a name="l1075"><span class="linenum">1075</span></a>                      'private'    =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Private'),
<a name="l1076"><span class="linenum">1076</span></a>                      'review'     =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Review'),
<a name="l1077"><span class="linenum">1077</span></a>                      'draft'      =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Draft'),
<a name="l1078"><span class="linenum">1078</span></a>                      'deprecated' =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Deprecated'),
<a name="l1079"><span class="linenum">1079</span></a>                      'redirected' =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Redirected'),
<a name="l1080"><span class="linenum">1080</span></a>                      'trash'      =&gt; <a class="function" onClick="logFunction('NT_')" href="../../../_functions/nt_.html" onMouseOver="funcPopup(event,'nt_')">NT_</a>('Recycled'),
<a name="l1081"><span class="linenum">1081</span></a>                  );
<a name="l1082"><span class="linenum">1082</span></a>  
<a name="l1083"><span class="linenum">1083</span></a>              if( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> != 'keys' &amp;&amp; <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> != 'raw' )
<a name="l1084"><span class="linenum">1084</span></a>              {    // Translate <a class="function" onClick="logFunction('statuses')" href="../../../_functions/statuses.html" onMouseOver="funcPopup(event,'statuses')">statuses</a> (default format)
<a name="l1085"><span class="linenum">1085</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>( 'T_', <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l1086"><span class="linenum">1086</span></a>              }
<a name="l1087"><span class="linenum">1087</span></a>      }
<a name="l1088"><span class="linenum">1088</span></a>  
<a name="l1089"><span class="linenum">1089</span></a>      if( !empty(<a class="var it4499" onMouseOver="hilite(4499)" onMouseOut="lolite()" onClick="logVariable('exclude')" href="../../../_variables/exclude.html">$exclude</a>) )
<a name="l1090"><span class="linenum">1090</span></a>      {
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment">        // PHP 5.1 array_diff_key( $r, $exclude );</span>
<a name="l1092"><span class="linenum">1092</span></a>          foreach( <a class="var it4499" onMouseOver="hilite(4499)" onMouseOut="lolite()" onClick="logVariable('exclude')" href="../../../_variables/exclude.html">$exclude</a> as <a class="var it8676" onMouseOver="hilite(8676)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../_variables/ex.html">$ex</a> )
<a name="l1093"><span class="linenum">1093</span></a>          {
<a name="l1094"><span class="linenum">1094</span></a>              if( isset(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>[<a class="var it8676" onMouseOver="hilite(8676)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../_variables/ex.html">$ex</a>]) )
<a name="l1095"><span class="linenum">1095</span></a>              {
<a name="l1096"><span class="linenum">1096</span></a>                  unset(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>[<a class="var it8676" onMouseOver="hilite(8676)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../_variables/ex.html">$ex</a>]);
<a name="l1097"><span class="linenum">1097</span></a>              }
<a name="l1098"><span class="linenum">1098</span></a>          }
<a name="l1099"><span class="linenum">1099</span></a>      }
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>      if( <a class="var it2850" onMouseOver="hilite(2850)" onMouseOut="lolite()" onClick="logVariable('check_perms')" href="../../../_variables/check_perms.html">$check_perms</a> &amp;&amp; ! <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l1102"><span class="linenum">1102</span></a>      { // Check what status is available for current user
<a name="l1103"><span class="linenum">1103</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1104"><span class="linenum">1104</span></a>          foreach( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> as <a class="var it7109" onMouseOver="hilite(7109)" onMouseOut="lolite()" onClick="logVariable('status_key')" href="../../../_variables/status_key.html">$status_key</a> =&gt; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('status_title')" href="../../../_variables/status_title.html">$status_title</a> )
<a name="l1105"><span class="linenum">1105</span></a>          {
<a name="l1106"><span class="linenum">1106</span></a>              if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_post!'.<a class="var it7109" onMouseOver="hilite(7109)" onMouseOut="lolite()" onClick="logVariable('status_key')" href="../../../_variables/status_key.html">$status_key</a>, 'create', false, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l1107"><span class="linenum">1107</span></a>              { // Unset this status from list because current user has no perms to use this status
<a name="l1108"><span class="linenum">1108</span></a>                  unset( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>[ <a class="var it7109" onMouseOver="hilite(7109)" onMouseOut="lolite()" onClick="logVariable('status_key')" href="../../../_variables/status_key.html">$status_key</a> ] );
<a name="l1109"><span class="linenum">1109</span></a>              }
<a name="l1110"><span class="linenum">1110</span></a>          }
<a name="l1111"><span class="linenum">1111</span></a>      }
<a name="l1112"><span class="linenum">1112</span></a>  
<a name="l1113"><span class="linenum">1113</span></a>      if( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> == 'keys' )
<a name="l1114"><span class="linenum">1114</span></a>      { // Return status keys for 'visibility_array'
<a name="l1115"><span class="linenum">1115</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l1116"><span class="linenum">1116</span></a>      }
<a name="l1117"><span class="linenum">1117</span></a>  
<a name="l1118"><span class="linenum">1118</span></a>      if( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> == 'radio-options' )
<a name="l1119"><span class="linenum">1119</span></a>      { // Return options for radio buttons
<a name="l1120"><span class="linenum">1120</span></a>          <a class="var it9329" onMouseOver="hilite(9329)" onMouseOut="lolite()" onClick="logVariable('radio_options')" href="../../../_variables/radio_options.html">$radio_options</a> = array();
<a name="l1121"><span class="linenum">1121</span></a>          foreach( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> as <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> =&gt; <a class="var it9330" onMouseOver="hilite(9330)" onMouseOut="lolite()" onClick="logVariable('labels')" href="../../../_variables/labels.html">$labels</a> )
<a name="l1122"><span class="linenum">1122</span></a>          {
<a name="l1123"><span class="linenum">1123</span></a>              <a class="var it9329" onMouseOver="hilite(9329)" onMouseOut="lolite()" onClick="logVariable('radio_options')" href="../../../_variables/radio_options.html">$radio_options</a>[] = array( <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>, <a class="var it9330" onMouseOver="hilite(9330)" onMouseOut="lolite()" onClick="logVariable('labels')" href="../../../_variables/labels.html">$labels</a>[0].' &lt;span class=&quot;notes&quot;&gt;'.<a class="var it9330" onMouseOver="hilite(9330)" onMouseOut="lolite()" onClick="logVariable('labels')" href="../../../_variables/labels.html">$labels</a>[1].'&lt;/span&gt;' );
<a name="l1124"><span class="linenum">1124</span></a>          }
<a name="l1125"><span class="linenum">1125</span></a>          return <a class="var it9329" onMouseOver="hilite(9329)" onMouseOut="lolite()" onClick="logVariable('radio_options')" href="../../../_variables/radio_options.html">$radio_options</a>;
<a name="l1126"><span class="linenum">1126</span></a>      }
<a name="l1127"><span class="linenum">1127</span></a>  
<a name="l1128"><span class="linenum">1128</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1129"><span class="linenum">1129</span></a>  }
<a name="l1130"><span class="linenum">1130</span></a>  
<a name="l1131"><span class="linenum">1131</span></a>  
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment">/**</span>
<a name="l1133"><span class="linenum">1133</span></a>  <span class="comment"> * Compare two visibility status in the point of public level</span>
<a name="l1134"><span class="linenum">1134</span></a>  <span class="comment"> *</span>
<a name="l1135"><span class="linenum">1135</span></a>  <span class="comment"> * @param string first_status</span>
<a name="l1136"><span class="linenum">1136</span></a>  <span class="comment"> * @param string second_status</span>
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment"> * @return integer</span>
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment"> *   0 if the two statuses have the same public level</span>
<a name="l1139"><span class="linenum">1139</span></a>  <span class="comment"> *   1 if the first status has higher public level</span>
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment"> *   -1 if it first status has lower public level</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment"> */</span>
<a name="l1142"><span class="linenum">1142</span></a>  function <a class="function" onClick="logFunction('compare_visibility_status')" href="../../../_functions/compare_visibility_status.html" onMouseOver="funcPopup(event,'compare_visibility_status')">compare_visibility_status</a>( <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('first_status')" href="../../../_variables/first_status.html">$first_status</a>, <a class="var it9331" onMouseOver="hilite(9331)" onMouseOut="lolite()" onClick="logVariable('second_status')" href="../../../_variables/second_status.html">$second_status</a> )
<a name="l1143"><span class="linenum">1143</span></a>  {
<a name="l1144"><span class="linenum">1144</span></a>      <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a> = <a class="function" onClick="logFunction('get_visibility_statuses')" href="../../../_functions/get_visibility_statuses.html" onMouseOver="funcPopup(event,'get_visibility_statuses')">get_visibility_statuses</a>( 'ordered-index', array() );
<a name="l1145"><span class="linenum">1145</span></a>      if( !isset( <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[<a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('first_status')" href="../../../_variables/first_status.html">$first_status</a>] ) || !isset( <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[<a class="var it9331" onMouseOver="hilite(9331)" onMouseOut="lolite()" onClick="logVariable('second_status')" href="../../../_variables/second_status.html">$second_status</a>] ) )
<a name="l1146"><span class="linenum">1146</span></a>      { // At least one of the given statuses doesn't exist
<a name="l1147"><span class="linenum">1147</span></a>          <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid status given to compare!' );
<a name="l1148"><span class="linenum">1148</span></a>      }
<a name="l1149"><span class="linenum">1149</span></a>  
<a name="l1150"><span class="linenum">1150</span></a>      <a class="var it9332" onMouseOver="hilite(9332)" onMouseOut="lolite()" onClick="logVariable('first_status_index')" href="../../../_variables/first_status_index.html">$first_status_index</a> = <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[<a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('first_status')" href="../../../_variables/first_status.html">$first_status</a>];
<a name="l1151"><span class="linenum">1151</span></a>      <a class="var it9333" onMouseOver="hilite(9333)" onMouseOut="lolite()" onClick="logVariable('second_status_index')" href="../../../_variables/second_status_index.html">$second_status_index</a> = <a class="var it1629" onMouseOver="hilite(1629)" onMouseOut="lolite()" onClick="logVariable('status_index')" href="../../../_variables/status_index.html">$status_index</a>[<a class="var it9331" onMouseOver="hilite(9331)" onMouseOut="lolite()" onClick="logVariable('second_status')" href="../../../_variables/second_status.html">$second_status</a>];
<a name="l1152"><span class="linenum">1152</span></a>      if( <a class="var it9332" onMouseOver="hilite(9332)" onMouseOut="lolite()" onClick="logVariable('first_status_index')" href="../../../_variables/first_status_index.html">$first_status_index</a> == <a class="var it9333" onMouseOver="hilite(9333)" onMouseOut="lolite()" onClick="logVariable('second_status_index')" href="../../../_variables/second_status_index.html">$second_status_index</a> )
<a name="l1153"><span class="linenum">1153</span></a>      { // The two status public level is equal, but note this doesn't mean that the two status must be same!
<a name="l1154"><span class="linenum">1154</span></a>          return 0;
<a name="l1155"><span class="linenum">1155</span></a>      }
<a name="l1156"><span class="linenum">1156</span></a>  
<a name="l1157"><span class="linenum">1157</span></a>      return ( <a class="var it9332" onMouseOver="hilite(9332)" onMouseOut="lolite()" onClick="logVariable('first_status_index')" href="../../../_variables/first_status_index.html">$first_status_index</a> &gt; <a class="var it9333" onMouseOver="hilite(9333)" onMouseOut="lolite()" onClick="logVariable('second_status_index')" href="../../../_variables/second_status_index.html">$second_status_index</a> ) ? 1 : -1;
<a name="l1158"><span class="linenum">1158</span></a>  }
<a name="l1159"><span class="linenum">1159</span></a>  
<a name="l1160"><span class="linenum">1160</span></a>  
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment">/**</span>
<a name="l1162"><span class="linenum">1162</span></a>  <span class="comment"> * Get restricted visibility statuses for the current User in the given blog in back office</span>
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment"> *</span>
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment"> * @param integer blog ID</span>
<a name="l1165"><span class="linenum">1165</span></a>  <span class="comment"> * @param string permission prefix: 'blog_post!' or 'blog_comment!'</span>
<a name="l1166"><span class="linenum">1166</span></a>  <span class="comment"> * @param string permlevel: 'view'/'edit' depending on where we would like to use it</span>
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment"> * @return array of restricted statuses</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment"> */</span>
<a name="l1169"><span class="linenum">1169</span></a>  function <a class="function" onClick="logFunction('get_restricted_statuses')" href="../../../_functions/get_restricted_statuses.html" onMouseOver="funcPopup(event,'get_restricted_statuses')">get_restricted_statuses</a>( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('permlevel')" href="../../../_variables/permlevel.html">$permlevel</a> = 'view' )
<a name="l1170"><span class="linenum">1170</span></a>  {
<a name="l1171"><span class="linenum">1171</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1172"><span class="linenum">1172</span></a>  
<a name="l1173"><span class="linenum">1173</span></a>      <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l1174"><span class="linenum">1174</span></a>  
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">    // This statuses are allowed to view/edit only for those users who may create post/comment with these statuses</span>
<a name="l1176"><span class="linenum">1176</span></a>      <a class="var it9334" onMouseOver="hilite(9334)" onMouseOut="lolite()" onClick="logVariable('restricted')" href="../../../_variables/restricted.html">$restricted</a> = array( 'review', 'draft', 'deprecated', 'private' );
<a name="l1177"><span class="linenum">1177</span></a>      foreach( <a class="var it9334" onMouseOver="hilite(9334)" onMouseOut="lolite()" onClick="logVariable('restricted')" href="../../../_variables/restricted.html">$restricted</a> as <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> )
<a name="l1178"><span class="linenum">1178</span></a>      {
<a name="l1179"><span class="linenum">1179</span></a>          if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>.<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>, 'create', false, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l1180"><span class="linenum">1180</span></a>          { // not allowed
<a name="l1181"><span class="linenum">1181</span></a>              <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[] = <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>;
<a name="l1182"><span class="linenum">1182</span></a>          }
<a name="l1183"><span class="linenum">1183</span></a>      }
<a name="l1184"><span class="linenum">1184</span></a>  
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">    // 'redirected' status is allowed to view/edit only in case of posts, and only if user has permission</span>
<a name="l1186"><span class="linenum">1186</span></a>      if( ( <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a> == 'blog_post!' ) &amp;&amp; !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>.'redirected', 'create', false, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l1187"><span class="linenum">1187</span></a>      { // not allowed
<a name="l1188"><span class="linenum">1188</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[] = 'redirected';
<a name="l1189"><span class="linenum">1189</span></a>      }
<a name="l1190"><span class="linenum">1190</span></a>  
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">    // 'trash' status is allowed only in case of comments, and only if user has global editall permission</span>
<a name="l1192"><span class="linenum">1192</span></a>      if( ( <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a> == 'blog_comment!' ) &amp;&amp; !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'editall', false ) )
<a name="l1193"><span class="linenum">1193</span></a>      { // not allowed
<a name="l1194"><span class="linenum">1194</span></a>          <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[] = 'trash';
<a name="l1195"><span class="linenum">1195</span></a>      }
<a name="l1196"><span class="linenum">1196</span></a>  
<a name="l1197"><span class="linenum">1197</span></a>  <span class="comment">    // The other statuses are always allowed to view in backoffice</span>
<a name="l1198"><span class="linenum">1198</span></a>      if( <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('permlevel')" href="../../../_variables/permlevel.html">$permlevel</a> != 'view' )
<a name="l1199"><span class="linenum">1199</span></a>      { // in case of other then 'view' action we must check the permissions
<a name="l1200"><span class="linenum">1200</span></a>          <a class="var it9334" onMouseOver="hilite(9334)" onMouseOut="lolite()" onClick="logVariable('restricted')" href="../../../_variables/restricted.html">$restricted</a> = array( 'published', 'community', 'protected' );
<a name="l1201"><span class="linenum">1201</span></a>          foreach( <a class="var it9334" onMouseOver="hilite(9334)" onMouseOut="lolite()" onClick="logVariable('restricted')" href="../../../_variables/restricted.html">$restricted</a> as <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> )
<a name="l1202"><span class="linenum">1202</span></a>          {
<a name="l1203"><span class="linenum">1203</span></a>              if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( <a class="var it710" onMouseOver="hilite(710)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>.<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>, 'create', false, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l1204"><span class="linenum">1204</span></a>              { // not allowed
<a name="l1205"><span class="linenum">1205</span></a>                  <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>[] = <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>;
<a name="l1206"><span class="linenum">1206</span></a>              }
<a name="l1207"><span class="linenum">1207</span></a>          }
<a name="l1208"><span class="linenum">1208</span></a>      }
<a name="l1209"><span class="linenum">1209</span></a>  
<a name="l1210"><span class="linenum">1210</span></a>      return <a class="var it95" onMouseOver="hilite(95)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l1211"><span class="linenum">1211</span></a>  }
<a name="l1212"><span class="linenum">1212</span></a>  
<a name="l1213"><span class="linenum">1213</span></a>  
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment">/**</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment"> * Get Blog object from general setting</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment"> *</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment"> * @param string Setting name: 'default_blog_ID', 'info_blog_ID', 'login_blog_ID', 'msg_blog_ID'</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment"> * @param boolean true if function $BlogCache-&gt;get_by_ID() should die on error</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment"> * @param boolean true if function $BlogCache-&gt;get_by_ID() should die on empty/null</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment"> * @return object|NULL|false</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment"> */</span>
<a name="l1222"><span class="linenum">1222</span></a>  function &amp; get_setting_Blog( <a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a>, <a class="var it1804" onMouseOver="hilite(1804)" onMouseOut="lolite()" onClick="logVariable('halt_on_error')" href="../../../_variables/halt_on_error.html">$halt_on_error</a> = false, <a class="var it1805" onMouseOver="hilite(1805)" onMouseOut="lolite()" onClick="logVariable('halt_on_empty')" href="../../../_variables/halt_on_empty.html">$halt_on_empty</a> = false )
<a name="l1223"><span class="linenum">1223</span></a>  {
<a name="l1224"><span class="linenum">1224</span></a>      global <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l1225"><span class="linenum">1225</span></a>  
<a name="l1226"><span class="linenum">1226</span></a>      <a class="var it3724" onMouseOver="hilite(3724)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a> = false;
<a name="l1227"><span class="linenum">1227</span></a>  
<a name="l1228"><span class="linenum">1228</span></a>      if( ! isset( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a> ) )
<a name="l1229"><span class="linenum">1229</span></a>      {
<a name="l1230"><span class="linenum">1230</span></a>          return <a class="var it3724" onMouseOver="hilite(3724)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a>;
<a name="l1231"><span class="linenum">1231</span></a>      }
<a name="l1232"><span class="linenum">1232</span></a>  
<a name="l1233"><span class="linenum">1233</span></a>      <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>( <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( <a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a> ) );
<a name="l1234"><span class="linenum">1234</span></a>      if( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> &gt; 0 )
<a name="l1235"><span class="linenum">1235</span></a>      { // Check if blog really exists in DB
<a name="l1236"><span class="linenum">1236</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l1237"><span class="linenum">1237</span></a>          <a class="var it3724" onMouseOver="hilite(3724)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, <a class="var it1804" onMouseOver="hilite(1804)" onMouseOut="lolite()" onClick="logVariable('halt_on_error')" href="../../../_variables/halt_on_error.html">$halt_on_error</a>, <a class="var it1805" onMouseOver="hilite(1805)" onMouseOut="lolite()" onClick="logVariable('halt_on_empty')" href="../../../_variables/halt_on_empty.html">$halt_on_empty</a> );
<a name="l1238"><span class="linenum">1238</span></a>      }
<a name="l1239"><span class="linenum">1239</span></a>  
<a name="l1240"><span class="linenum">1240</span></a>      return <a class="var it3724" onMouseOver="hilite(3724)" onMouseOut="lolite()" onClick="logVariable('setting_Blog')" href="../../../_variables/setting_Blog.html">$setting_Blog</a>;
<a name="l1241"><span class="linenum">1241</span></a>  }
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>  
<a name="l1244"><span class="linenum">1244</span></a>  <span class="comment">/**</span>
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment"> * Display blogs results table</span>
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment"> *</span>
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment"> * @param array Params</span>
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment"> */</span>
<a name="l1249"><span class="linenum">1249</span></a>  function <a class="function" onClick="logFunction('blogs_user_results_block')" href="../../../_functions/blogs_user_results_block.html" onMouseOver="funcPopup(event,'blogs_user_results_block')">blogs_user_results_block</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1250"><span class="linenum">1250</span></a>  {
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l1252"><span class="linenum">1252</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1253"><span class="linenum">1253</span></a>              'edited_User'          =&gt; NULL,
<a name="l1254"><span class="linenum">1254</span></a>              'results_param_prefix' =&gt; 'actv_blog_',
<a name="l1255"><span class="linenum">1255</span></a>              'results_title'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Blogs owned by the user'),
<a name="l1256"><span class="linenum">1256</span></a>              'results_no_text'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('User does not own any blogs'),
<a name="l1257"><span class="linenum">1257</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1258"><span class="linenum">1258</span></a>  
<a name="l1259"><span class="linenum">1259</span></a>      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1260"><span class="linenum">1260</span></a>      {    // Only logged in users can access to this function
<a name="l1261"><span class="linenum">1261</span></a>          return;
<a name="l1262"><span class="linenum">1262</span></a>      }
<a name="l1263"><span class="linenum">1263</span></a>  
<a name="l1264"><span class="linenum">1264</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1265"><span class="linenum">1265</span></a>      if( !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'users', 'moderate' ) || !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'view' ) )
<a name="l1266"><span class="linenum">1266</span></a>      {    // Check minimum permission:
<a name="l1267"><span class="linenum">1267</span></a>          return;
<a name="l1268"><span class="linenum">1268</span></a>      }
<a name="l1269"><span class="linenum">1269</span></a>  
<a name="l1270"><span class="linenum">1270</span></a>      <a class="var it1199" onMouseOver="hilite(1199)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../_variables/edited_User.html">$edited_User</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['edited_User'];
<a name="l1271"><span class="linenum">1271</span></a>      if( !<a class="var it1199" onMouseOver="hilite(1199)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../_variables/edited_User.html">$edited_User</a> )
<a name="l1272"><span class="linenum">1272</span></a>      {    // No defined User, probably the function is calling from AJAX request
<a name="l1273"><span class="linenum">1273</span></a>          <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0 );
<a name="l1274"><span class="linenum">1274</span></a>          if( empty( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a> ) )
<a name="l1275"><span class="linenum">1275</span></a>          {    // Bad request, Exit here
<a name="l1276"><span class="linenum">1276</span></a>              return;
<a name="l1277"><span class="linenum">1277</span></a>          }
<a name="l1278"><span class="linenum">1278</span></a>          <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a> = &amp; get_UserCache();
<a name="l1279"><span class="linenum">1279</span></a>          if( ( <a class="var it1199" onMouseOver="hilite(1199)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../_variables/edited_User.html">$edited_User</a> = &amp; <a class="var it172" onMouseOver="hilite(172)" onMouseOut="lolite()" onClick="logVariable('UserCache')" href="../../../_variables/UserCache.html">$UserCache</a>-&gt;get_by_ID( <a class="var it167" onMouseOver="hilite(167)" onMouseOut="lolite()" onClick="logVariable('user_ID')" href="../../../_variables/user_ID.html">$user_ID</a>, false ) ) === false )
<a name="l1280"><span class="linenum">1280</span></a>          {    // Bad request, Exit here
<a name="l1281"><span class="linenum">1281</span></a>              return;
<a name="l1282"><span class="linenum">1282</span></a>          }
<a name="l1283"><span class="linenum">1283</span></a>      }
<a name="l1284"><span class="linenum">1284</span></a>  
<a name="l1285"><span class="linenum">1285</span></a>      global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a>;
<a name="l1286"><span class="linenum">1286</span></a>  
<a name="l1287"><span class="linenum">1287</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_tab', 'string', '', true );
<a name="l1288"><span class="linenum">1288</span></a>      <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'user_ID', 'integer', 0, true );
<a name="l1289"><span class="linenum">1289</span></a>  
<a name="l1290"><span class="linenum">1290</span></a>      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l1291"><span class="linenum">1291</span></a>      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( '*' );
<a name="l1292"><span class="linenum">1292</span></a>      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_blogs' );
<a name="l1293"><span class="linenum">1293</span></a>      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'blog_owner_user_ID = '.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>( <a class="var it1199" onMouseOver="hilite(1199)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10701" onMouseOver="hilite(10701)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) );
<a name="l1294"><span class="linenum">1294</span></a>  
<a name="l1295"><span class="linenum">1295</span></a>  <span class="comment">    // Create result set:</span>
<a name="l1296"><span class="linenum">1296</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Results')" href="../../../_classes/results.html" onMouseOver="classPopup(event,'results')">Results</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_param_prefix'] );
<a name="l1297"><span class="linenum">1297</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('Cache')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/Cache.html">Cache</a> = &amp; get_BlogCache();
<a name="l1298"><span class="linenum">1298</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('title')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_title'];
<a name="l1299"><span class="linenum">1299</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('no_results_text')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/no_results_text.html">no_results_text</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_no_text'];
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">    // Get a count of the blogs which current user can delete</span>
<a name="l1302"><span class="linenum">1302</span></a>      <a class="var it8378" onMouseOver="hilite(8378)" onMouseOut="lolite()" onClick="logVariable('deleted_blogs_count')" href="../../../_variables/deleted_blogs_count.html">$deleted_blogs_count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1199" onMouseOver="hilite(1199)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../_variables/edited_User.html">$edited_User</a>-&gt;<a class="function" onClick="logFunction('get_deleted_blogs')" href="../../../_functions/get_deleted_blogs.html" onMouseOver="funcPopup(event,'get_deleted_blogs')">get_deleted_blogs</a>() );
<a name="l1303"><span class="linenum">1303</span></a>      if( <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a class="function" onClick="logFunction('get_total_rows')" href="../../../_functions/get_total_rows.html" onMouseOver="funcPopup(event,'get_total_rows')">get_total_rows</a>() &gt; 0 &amp;&amp; <a class="var it8378" onMouseOver="hilite(8378)" onMouseOut="lolite()" onClick="logVariable('deleted_blogs_count')" href="../../../_variables/deleted_blogs_count.html">$deleted_blogs_count</a> &gt; 0 )
<a name="l1304"><span class="linenum">1304</span></a>      {    // Display action icon to delete all records if at least one record exists &amp; user can delete at least one blog
<a name="l1305"><span class="linenum">1305</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a class="function" onClick="logFunction('global_icon')" href="../../../_functions/global_icon.html" onMouseOver="funcPopup(event,'global_icon')">global_icon</a>( sprintf( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete all blogs owned by %s'), <a class="var it1199" onMouseOver="hilite(1199)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('login')" class="var it10701" onMouseOver="hilite(10701)" onMouseOut="lolite()" href="../../../_variables/login.html">login</a> ), 'delete', '?ctrl=user&amp;amp;user_tab=activity&amp;amp;action=delete_all_blogs&amp;amp;user_ID='.<a class="var it1199" onMouseOver="hilite(1199)" onMouseOut="lolite()" onClick="logVariable('edited_User')" href="../../../_variables/edited_User.html">$edited_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10701" onMouseOver="hilite(10701)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('user'), ' '.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete all'), 3, 4 );
<a name="l1306"><span class="linenum">1306</span></a>      }
<a name="l1307"><span class="linenum">1307</span></a>  
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment">    // Initialize Results object</span>
<a name="l1309"><span class="linenum">1309</span></a>      <a class="function" onClick="logFunction('blogs_results')" href="../../../_functions/blogs_results.html" onMouseOver="funcPopup(event,'blogs_results')">blogs_results</a>( <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>, array(
<a name="l1310"><span class="linenum">1310</span></a>              'display_type'    =&gt; false,
<a name="l1311"><span class="linenum">1311</span></a>              'display_owner'   =&gt; false,
<a name="l1312"><span class="linenum">1312</span></a>              'display_plist'   =&gt; false,
<a name="l1313"><span class="linenum">1313</span></a>              'display_order'   =&gt; false,
<a name="l1314"><span class="linenum">1314</span></a>              'display_caching' =&gt; false,
<a name="l1315"><span class="linenum">1315</span></a>              'display_fav'     =&gt; false,
<a name="l1316"><span class="linenum">1316</span></a>          ) );
<a name="l1317"><span class="linenum">1317</span></a>  
<a name="l1318"><span class="linenum">1318</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l1319"><span class="linenum">1319</span></a>      {    // init results param by template name
<a name="l1320"><span class="linenum">1320</span></a>          if( !isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'skin_type' ] ) || ! isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'skin_name' ] ) )
<a name="l1321"><span class="linenum">1321</span></a>          {
<a name="l1322"><span class="linenum">1322</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid ajax results request!' );
<a name="l1323"><span class="linenum">1323</span></a>          }
<a name="l1324"><span class="linenum">1324</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a class="function" onClick="logFunction('init_params_by_skin')" href="../../../_functions/init_params_by_skin.html" onMouseOver="funcPopup(event,'init_params_by_skin')">init_params_by_skin</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'skin_type' ], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'skin_name' ] );
<a name="l1325"><span class="linenum">1325</span></a>      }
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>      <a class="var it3409" onMouseOver="hilite(3409)" onMouseOut="lolite()" onClick="logVariable('results_params')" href="../../../_variables/results_params.html">$results_params</a> = <a class="var it144" onMouseOver="hilite(144)" onMouseOut="lolite()" onClick="logVariable('AdminUI')" href="../../../_variables/AdminUI.html">$AdminUI</a>-&gt;<a class="function" onClick="logFunction('get_template')" href="../../../_functions/get_template.html" onMouseOver="funcPopup(event,'get_template')">get_template</a>( 'Results' );
<a name="l1328"><span class="linenum">1328</span></a>      <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../../_variables/display_params.html">$display_params</a> = array(
<a name="l1329"><span class="linenum">1329</span></a>          'before' =&gt; <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '&gt;', ' style=&quot;margin-top:25px&quot; id=&quot;owned_blogs_result&quot;&gt;', <a class="var it3409" onMouseOver="hilite(3409)" onMouseOut="lolite()" onClick="logVariable('results_params')" href="../../../_variables/results_params.html">$results_params</a>['before'] ),
<a name="l1330"><span class="linenum">1330</span></a>      );
<a name="l1331"><span class="linenum">1331</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( <a class="var it123" onMouseOver="hilite(123)" onMouseOut="lolite()" onClick="logVariable('display_params')" href="../../../_variables/display_params.html">$display_params</a> );
<a name="l1332"><span class="linenum">1332</span></a>  
<a name="l1333"><span class="linenum">1333</span></a>      if( !<a class="function" onClick="logFunction('is_ajax_content')" href="../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l1334"><span class="linenum">1334</span></a>      {    // Create this hidden div to get a function name for AJAX request
<a name="l1335"><span class="linenum">1335</span></a>          echo '&lt;div id=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_param_prefix'].'ajax_callback&quot; style=&quot;display:none&quot;&gt;'.__FUNCTION__.'&lt;/div&gt;';
<a name="l1336"><span class="linenum">1336</span></a>      }
<a name="l1337"><span class="linenum">1337</span></a>  }
<a name="l1338"><span class="linenum">1338</span></a>  
<a name="l1339"><span class="linenum">1339</span></a>  
<a name="l1340"><span class="linenum">1340</span></a>  <span class="comment">/**</span>
<a name="l1341"><span class="linenum">1341</span></a>  <span class="comment"> * Display all blogs results table</span>
<a name="l1342"><span class="linenum">1342</span></a>  <span class="comment"> *</span>
<a name="l1343"><span class="linenum">1343</span></a>  <span class="comment"> * @param array Params</span>
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment"> */</span>
<a name="l1345"><span class="linenum">1345</span></a>  function <a class="function" onClick="logFunction('blogs_all_results_block')" href="../../../_functions/blogs_all_results_block.html" onMouseOver="funcPopup(event,'blogs_all_results_block')">blogs_all_results_block</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1346"><span class="linenum">1346</span></a>  {
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l1348"><span class="linenum">1348</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1349"><span class="linenum">1349</span></a>              'results_param_prefix' =&gt; 'blog_',
<a name="l1350"><span class="linenum">1350</span></a>              'results_title'        =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('List of Collections configured on this system').<a class="function" onClick="logFunction('get_manual_link')" href="../../../_functions/get_manual_link.html" onMouseOver="funcPopup(event,'get_manual_link')">get_manual_link</a>('site-collection-list'),
<a name="l1351"><span class="linenum">1351</span></a>              'results_no_text'      =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('No blog has been created yet!'),
<a name="l1352"><span class="linenum">1352</span></a>              'results_no_perm_text' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Sorry, you have no permission to edit/view any blog\'s properties.'),
<a name="l1353"><span class="linenum">1353</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1354"><span class="linenum">1354</span></a>  
<a name="l1355"><span class="linenum">1355</span></a>      if( !<a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() )
<a name="l1356"><span class="linenum">1356</span></a>      { // Only logged in users can access to this function
<a name="l1357"><span class="linenum">1357</span></a>          return;
<a name="l1358"><span class="linenum">1358</span></a>      }
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l1361"><span class="linenum">1361</span></a>  
<a name="l1362"><span class="linenum">1362</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l1363"><span class="linenum">1363</span></a>      {
<a name="l1364"><span class="linenum">1364</span></a>          <a class="var it9336" onMouseOver="hilite(9336)" onMouseOut="lolite()" onClick="logVariable('order_action')" href="../../../_variables/order_action.html">$order_action</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'order_action', 'string' );
<a name="l1365"><span class="linenum">1365</span></a>  
<a name="l1366"><span class="linenum">1366</span></a>          if( <a class="var it9336" onMouseOver="hilite(9336)" onMouseOut="lolite()" onClick="logVariable('order_action')" href="../../../_variables/order_action.html">$order_action</a> == 'update' )
<a name="l1367"><span class="linenum">1367</span></a>          { // Update an order to new value
<a name="l1368"><span class="linenum">1368</span></a>              <a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../_variables/new_value.html">$new_value</a> = (int)<a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'new_value', 'string', 0 );
<a name="l1369"><span class="linenum">1369</span></a>              <a class="var it9337" onMouseOver="hilite(9337)" onMouseOut="lolite()" onClick="logVariable('order_data')" href="../../../_variables/order_data.html">$order_data</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'order_data', 'string' );
<a name="l1370"><span class="linenum">1370</span></a>              <a class="var it9338" onMouseOver="hilite(9338)" onMouseOut="lolite()" onClick="logVariable('order_obj_ID')" href="../../../_variables/order_obj_ID.html">$order_obj_ID</a> = (int)<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( 'order-blog-', '', <a class="var it9337" onMouseOver="hilite(9337)" onMouseOut="lolite()" onClick="logVariable('order_data')" href="../../../_variables/order_data.html">$order_data</a> );
<a name="l1371"><span class="linenum">1371</span></a>              if( <a class="var it9338" onMouseOver="hilite(9338)" onMouseOut="lolite()" onClick="logVariable('order_obj_ID')" href="../../../_variables/order_obj_ID.html">$order_obj_ID</a> &gt; 0 )
<a name="l1372"><span class="linenum">1372</span></a>              { // Update blog order
<a name="l1373"><span class="linenum">1373</span></a>                  <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l1374"><span class="linenum">1374</span></a>                  if( <a class="var it9339" onMouseOver="hilite(9339)" onMouseOut="lolite()" onClick="logVariable('updated_Blog')" href="../../../_variables/updated_Blog.html">$updated_Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it9338" onMouseOver="hilite(9338)" onMouseOut="lolite()" onClick="logVariable('order_obj_ID')" href="../../../_variables/order_obj_ID.html">$order_obj_ID</a>, false ) )
<a name="l1375"><span class="linenum">1375</span></a>                  {
<a name="l1376"><span class="linenum">1376</span></a>                      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it9339" onMouseOver="hilite(9339)" onMouseOut="lolite()" onClick="logVariable('updated_Blog')" href="../../../_variables/updated_Blog.html">$updated_Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10800" onMouseOver="hilite(10800)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l1377"><span class="linenum">1377</span></a>                      { // Check permission to edit this Blog
<a name="l1378"><span class="linenum">1378</span></a>                          <a class="var it9339" onMouseOver="hilite(9339)" onMouseOut="lolite()" onClick="logVariable('updated_Blog')" href="../../../_variables/updated_Blog.html">$updated_Blog</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'order', <a class="var it2487" onMouseOver="hilite(2487)" onMouseOut="lolite()" onClick="logVariable('new_value')" href="../../../_variables/new_value.html">$new_value</a> );
<a name="l1379"><span class="linenum">1379</span></a>                          <a class="var it9339" onMouseOver="hilite(9339)" onMouseOut="lolite()" onClick="logVariable('updated_Blog')" href="../../../_variables/updated_Blog.html">$updated_Blog</a>-&gt;<a class="function" onClick="logFunction('dbupdate')" href="../../../_functions/dbupdate.html" onMouseOver="funcPopup(event,'dbupdate')">dbupdate</a>();
<a name="l1380"><span class="linenum">1380</span></a>                          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l1381"><span class="linenum">1381</span></a>                      }
<a name="l1382"><span class="linenum">1382</span></a>                  }
<a name="l1383"><span class="linenum">1383</span></a>              }
<a name="l1384"><span class="linenum">1384</span></a>          }
<a name="l1385"><span class="linenum">1385</span></a>      }
<a name="l1386"><span class="linenum">1386</span></a>  
<a name="l1387"><span class="linenum">1387</span></a>      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a> = <span class="keyword">new </span><a class="class" onClick="logClass('SQL')" href="../../../_classes/sql.html" onMouseOver="classPopup(event,'sql')">SQL</a>();
<a name="l1388"><span class="linenum">1388</span></a>      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('SELECT')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">SELECT</a>( 'T_blogs.*, user_login' );
<a name="l1389"><span class="linenum">1389</span></a>      <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM')" href="../../../_functions/from.html" onMouseOver="funcPopup(event,'from')">FROM</a>( 'T_blogs INNER JOIN T_users ON blog_owner_user_ID = user_ID' );
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>      if( ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'view' ) )
<a name="l1392"><span class="linenum">1392</span></a>      { // We do not have perm to view all blogs... we need to restrict to those we're a member of:
<a name="l1393"><span class="linenum">1393</span></a>  
<a name="l1394"><span class="linenum">1394</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('FROM_add')" href="../../../_functions/from_add.html" onMouseOver="funcPopup(event,'from_add')">FROM_add</a>( 'LEFT JOIN T_coll_user_perms <a class="function" onClick="logFunction('ON')" href="../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (blog_advanced_perms &lt;&gt; 0'
<a name="l1395"><span class="linenum">1395</span></a>              . ' AND blog_ID = bloguser_blog_ID'
<a name="l1396"><span class="linenum">1396</span></a>              . ' AND bloguser_user_ID = ' . <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> . ' )'
<a name="l1397"><span class="linenum">1397</span></a>              . ' LEFT JOIN T_coll_group_perms <a class="function" onClick="logFunction('ON')" href="../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (blog_advanced_perms &lt;&gt; 0'
<a name="l1398"><span class="linenum">1398</span></a>              . ' AND blog_ID = bloggroup_blog_ID'
<a name="l1399"><span class="linenum">1399</span></a>              . ' AND bloggroup_group_ID = ' . <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a onClick="logVariable('grp_ID')" class="var it10675" onMouseOver="hilite(10675)" onMouseOut="lolite()" href="../../../_variables/grp_ID.html">grp_ID</a> . ' )' );
<a name="l1400"><span class="linenum">1400</span></a>          <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('WHERE')" href="../../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a>( 'blog_owner_user_ID = ' . <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;ID
<a name="l1401"><span class="linenum">1401</span></a>              . ' OR bloguser_ismember &lt;&gt; 0'
<a name="l1402"><span class="linenum">1402</span></a>              . ' OR bloggroup_ismember &lt;&gt; 0' );
<a name="l1403"><span class="linenum">1403</span></a>  
<a name="l1404"><span class="linenum">1404</span></a>          <a class="var it1320" onMouseOver="hilite(1320)" onMouseOut="lolite()" onClick="logVariable('no_results')" href="../../../_variables/no_results.html">$no_results</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_no_perm_text'];
<a name="l1405"><span class="linenum">1405</span></a>      }
<a name="l1406"><span class="linenum">1406</span></a>      else
<a name="l1407"><span class="linenum">1407</span></a>      {
<a name="l1408"><span class="linenum">1408</span></a>          <a class="var it1320" onMouseOver="hilite(1320)" onMouseOut="lolite()" onClick="logVariable('no_results')" href="../../../_variables/no_results.html">$no_results</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_no_text'];
<a name="l1409"><span class="linenum">1409</span></a>      }
<a name="l1410"><span class="linenum">1410</span></a>  
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">    // Create result set:</span>
<a name="l1412"><span class="linenum">1412</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a> = <span class="keyword">new </span><a class="class" onClick="logClass('Results')" href="../../../_classes/results.html" onMouseOver="classPopup(event,'results')">Results</a>( <a class="var it108" onMouseOver="hilite(108)" onMouseOut="lolite()" onClick="logVariable('SQL')" href="../../../_variables/SQL.html">$SQL</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_param_prefix'], '---------A' );
<a name="l1413"><span class="linenum">1413</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('Cache')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/Cache.html">Cache</a> = &amp; get_BlogCache();
<a name="l1414"><span class="linenum">1414</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('title')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_title'];
<a name="l1415"><span class="linenum">1415</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('no_results_text')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/no_results_text.html">no_results_text</a> = <a class="var it1320" onMouseOver="hilite(1320)" onMouseOut="lolite()" onClick="logVariable('no_results')" href="../../../_variables/no_results.html">$no_results</a>;
<a name="l1416"><span class="linenum">1416</span></a>  
<a name="l1417"><span class="linenum">1417</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'create' ) )
<a name="l1418"><span class="linenum">1418</span></a>      {
<a name="l1419"><span class="linenum">1419</span></a>          global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1420"><span class="linenum">1420</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a class="function" onClick="logFunction('global_icon')" href="../../../_functions/global_icon.html" onMouseOver="funcPopup(event,'global_icon')">global_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New Collection').'...', 'new', <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>, 'ctrl=collections&amp;amp;action=new' ), <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('New Collection').'...', 3, 4, array( 'class' =&gt; 'action_icon btn-primary' ) );
<a name="l1421"><span class="linenum">1421</span></a>      }
<a name="l1422"><span class="linenum">1422</span></a>  
<a name="l1423"><span class="linenum">1423</span></a>  <span class="comment">    // Initialize Results object</span>
<a name="l1424"><span class="linenum">1424</span></a>      <a class="function" onClick="logFunction('blogs_results')" href="../../../_functions/blogs_results.html" onMouseOver="funcPopup(event,'blogs_results')">blogs_results</a>( <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a> );
<a name="l1425"><span class="linenum">1425</span></a>  
<a name="l1426"><span class="linenum">1426</span></a>      if( <a class="function" onClick="logFunction('is_ajax_content')" href="../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l1427"><span class="linenum">1427</span></a>      { // init results param by template name
<a name="l1428"><span class="linenum">1428</span></a>          if( !isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'skin_type' ] ) || ! isset( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'skin_name' ] ) )
<a name="l1429"><span class="linenum">1429</span></a>          {
<a name="l1430"><span class="linenum">1430</span></a>              <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( 'Invalid ajax results request!' );
<a name="l1431"><span class="linenum">1431</span></a>          }
<a name="l1432"><span class="linenum">1432</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a class="function" onClick="logFunction('init_params_by_skin')" href="../../../_functions/init_params_by_skin.html" onMouseOver="funcPopup(event,'init_params_by_skin')">init_params_by_skin</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'skin_type' ], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'skin_name' ] );
<a name="l1433"><span class="linenum">1433</span></a>      }
<a name="l1434"><span class="linenum">1434</span></a>  
<a name="l1435"><span class="linenum">1435</span></a>      <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>( NULL, 'session' );
<a name="l1436"><span class="linenum">1436</span></a>  
<a name="l1437"><span class="linenum">1437</span></a>      if( !<a class="function" onClick="logFunction('is_ajax_content')" href="../../../_functions/is_ajax_content.html" onMouseOver="funcPopup(event,'is_ajax_content')">is_ajax_content</a>() )
<a name="l1438"><span class="linenum">1438</span></a>      { // Create this hidden div to get a function name for AJAX request
<a name="l1439"><span class="linenum">1439</span></a>          echo '&lt;div id=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['results_param_prefix'].'ajax_callback&quot; style=&quot;display:none&quot;&gt;'.__FUNCTION__.'&lt;/div&gt;';
<a name="l1440"><span class="linenum">1440</span></a>      }
<a name="l1441"><span class="linenum">1441</span></a>  }
<a name="l1442"><span class="linenum">1442</span></a>  
<a name="l1443"><span class="linenum">1443</span></a>  
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment">/**</span>
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment"> * Initialize Results object for blogs list</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment"> *</span>
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment"> * @param object Results</span>
<a name="l1448"><span class="linenum">1448</span></a>  <span class="comment"> * @param array Params</span>
<a name="l1449"><span class="linenum">1449</span></a>  <span class="comment"> */</span>
<a name="l1450"><span class="linenum">1450</span></a>  function <a class="function" onClick="logFunction('blogs_results')" href="../../../_functions/blogs_results.html" onMouseOver="funcPopup(event,'blogs_results')">blogs_results</a>( &amp; <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1451"><span class="linenum">1451</span></a>  {
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">    // Make sure we are not missing any param:</span>
<a name="l1453"><span class="linenum">1453</span></a>      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1454"><span class="linenum">1454</span></a>              'display_id'       =&gt; true,
<a name="l1455"><span class="linenum">1455</span></a>              'display_name'     =&gt; true,
<a name="l1456"><span class="linenum">1456</span></a>              'display_type'     =&gt; true,
<a name="l1457"><span class="linenum">1457</span></a>              'display_fullname' =&gt; true,
<a name="l1458"><span class="linenum">1458</span></a>              'display_owner'    =&gt; true,
<a name="l1459"><span class="linenum">1459</span></a>              'display_url'      =&gt; true,
<a name="l1460"><span class="linenum">1460</span></a>              'display_locale'   =&gt; true,
<a name="l1461"><span class="linenum">1461</span></a>              'display_plist'    =&gt; true,
<a name="l1462"><span class="linenum">1462</span></a>              'display_fav'      =&gt; true,
<a name="l1463"><span class="linenum">1463</span></a>              'display_order'    =&gt; true,
<a name="l1464"><span class="linenum">1464</span></a>              'display_caching'  =&gt; true,
<a name="l1465"><span class="linenum">1465</span></a>              'display_actions'  =&gt; true,
<a name="l1466"><span class="linenum">1466</span></a>          ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1467"><span class="linenum">1467</span></a>  
<a name="l1468"><span class="linenum">1468</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_id'] )
<a name="l1469"><span class="linenum">1469</span></a>      {    // Display ID column
<a name="l1470"><span class="linenum">1470</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1471"><span class="linenum">1471</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('ID'),
<a name="l1472"><span class="linenum">1472</span></a>                  'order' =&gt; 'blog_ID',
<a name="l1473"><span class="linenum">1473</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l1474"><span class="linenum">1474</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l1475"><span class="linenum">1475</span></a>                  'td' =&gt; '<a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>$',
<a name="l1476"><span class="linenum">1476</span></a>              );
<a name="l1477"><span class="linenum">1477</span></a>      }
<a name="l1478"><span class="linenum">1478</span></a>  
<a name="l1479"><span class="linenum">1479</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_fav'] )
<a name="l1480"><span class="linenum">1480</span></a>      { // Display Favorite column
<a name="l1481"><span class="linenum">1481</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1482"><span class="linenum">1482</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Fav'),
<a name="l1483"><span class="linenum">1483</span></a>                  'th_title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Favorite'),
<a name="l1484"><span class="linenum">1484</span></a>                  'order' =&gt; 'blog_favorite',
<a name="l1485"><span class="linenum">1485</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l1486"><span class="linenum">1486</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l1487"><span class="linenum">1487</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('blog_row_setting')" href="../../../_functions/blog_row_setting.html" onMouseOver="funcPopup(event,'blog_row_setting')">blog_row_setting</a>( #blog_ID#, &quot;fav&quot;, #blog_favorite# )%',
<a name="l1488"><span class="linenum">1488</span></a>              );
<a name="l1489"><span class="linenum">1489</span></a>      }
<a name="l1490"><span class="linenum">1490</span></a>  
<a name="l1491"><span class="linenum">1491</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_name'] )
<a name="l1492"><span class="linenum">1492</span></a>      { // Display Name column
<a name="l1493"><span class="linenum">1493</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1494"><span class="linenum">1494</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Name'),
<a name="l1495"><span class="linenum">1495</span></a>                  'order' =&gt; 'blog_shortname',
<a name="l1496"><span class="linenum">1496</span></a>                  'td' =&gt; '&lt;strong&gt;%<a class="function" onClick="logFunction('blog_row_name')" href="../../../_functions/blog_row_name.html" onMouseOver="funcPopup(event,'blog_row_name')">blog_row_name</a>( #blog_shortname#, #blog_ID# )%&lt;/strong&gt;',
<a name="l1497"><span class="linenum">1497</span></a>              );
<a name="l1498"><span class="linenum">1498</span></a>      }
<a name="l1499"><span class="linenum">1499</span></a>  
<a name="l1500"><span class="linenum">1500</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_type'] )
<a name="l1501"><span class="linenum">1501</span></a>      { // Display Type column
<a name="l1502"><span class="linenum">1502</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1503"><span class="linenum">1503</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Type'),
<a name="l1504"><span class="linenum">1504</span></a>                  'order' =&gt; 'blog_type',
<a name="l1505"><span class="linenum">1505</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('blog_row_type')" href="../../../_functions/blog_row_type.html" onMouseOver="funcPopup(event,'blog_row_type')">blog_row_type</a>( #blog_type#, #blog_ID# )%',
<a name="l1506"><span class="linenum">1506</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l1507"><span class="linenum">1507</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l1508"><span class="linenum">1508</span></a>              );
<a name="l1509"><span class="linenum">1509</span></a>      }
<a name="l1510"><span class="linenum">1510</span></a>  
<a name="l1511"><span class="linenum">1511</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_fullname'] )
<a name="l1512"><span class="linenum">1512</span></a>      { // Display Full Name column
<a name="l1513"><span class="linenum">1513</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1514"><span class="linenum">1514</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Full Name'),
<a name="l1515"><span class="linenum">1515</span></a>                  'order' =&gt; 'blog_name',
<a name="l1516"><span class="linenum">1516</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('blog_row_fullname')" href="../../../_functions/blog_row_fullname.html" onMouseOver="funcPopup(event,'blog_row_fullname')">blog_row_fullname</a>( #blog_name#, #blog_ID# )%',
<a name="l1517"><span class="linenum">1517</span></a>              );
<a name="l1518"><span class="linenum">1518</span></a>      }
<a name="l1519"><span class="linenum">1519</span></a>  
<a name="l1520"><span class="linenum">1520</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_owner'] )
<a name="l1521"><span class="linenum">1521</span></a>      { // Display Owner column
<a name="l1522"><span class="linenum">1522</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1523"><span class="linenum">1523</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Owner'),
<a name="l1524"><span class="linenum">1524</span></a>                  'order' =&gt; 'user_login',
<a name="l1525"><span class="linenum">1525</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('get_user_identity_link')" href="../../../_functions/get_user_identity_link.html" onMouseOver="funcPopup(event,'get_user_identity_link')">get_user_identity_link</a>( #user_login# )%',
<a name="l1526"><span class="linenum">1526</span></a>              );
<a name="l1527"><span class="linenum">1527</span></a>      }
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_url'] )
<a name="l1530"><span class="linenum">1530</span></a>      { // Display Blog URL column
<a name="l1531"><span class="linenum">1531</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1532"><span class="linenum">1532</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Blog URL'),
<a name="l1533"><span class="linenum">1533</span></a>                  'td' =&gt; '&lt;a href=&quot;@<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(\'url\')@&quot;&gt;@<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(\'url\')@&lt;/a&gt;',
<a name="l1534"><span class="linenum">1534</span></a>              );
<a name="l1535"><span class="linenum">1535</span></a>      }
<a name="l1536"><span class="linenum">1536</span></a>  
<a name="l1537"><span class="linenum">1537</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_locale'] )
<a name="l1538"><span class="linenum">1538</span></a>      { // Display Locale column
<a name="l1539"><span class="linenum">1539</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1540"><span class="linenum">1540</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Locale'),
<a name="l1541"><span class="linenum">1541</span></a>                  'order' =&gt; 'blog_locale',
<a name="l1542"><span class="linenum">1542</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l1543"><span class="linenum">1543</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l1544"><span class="linenum">1544</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('blog_row_locale')" href="../../../_functions/blog_row_locale.html" onMouseOver="funcPopup(event,'blog_row_locale')">blog_row_locale</a>( #blog_locale#, #blog_ID# )%',
<a name="l1545"><span class="linenum">1545</span></a>              );
<a name="l1546"><span class="linenum">1546</span></a>      }
<a name="l1547"><span class="linenum">1547</span></a>  
<a name="l1548"><span class="linenum">1548</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_plist'] )
<a name="l1549"><span class="linenum">1549</span></a>      { // Display Listed column
<a name="l1550"><span class="linenum">1550</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1551"><span class="linenum">1551</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Listed'),
<a name="l1552"><span class="linenum">1552</span></a>                  'th_title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Public List'),
<a name="l1553"><span class="linenum">1553</span></a>                  'order' =&gt; 'blog_in_bloglist',
<a name="l1554"><span class="linenum">1554</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l1555"><span class="linenum">1555</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l1556"><span class="linenum">1556</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('blog_row_listed')" href="../../../_functions/blog_row_listed.html" onMouseOver="funcPopup(event,'blog_row_listed')">blog_row_listed</a>( #blog_in_bloglist#, #blog_ID# )%',
<a name="l1557"><span class="linenum">1557</span></a>              );
<a name="l1558"><span class="linenum">1558</span></a>      }
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_order'] )
<a name="l1561"><span class="linenum">1561</span></a>      { // Display Order column
<a name="l1562"><span class="linenum">1562</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1563"><span class="linenum">1563</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Order'),
<a name="l1564"><span class="linenum">1564</span></a>                  'order' =&gt; 'blog_order',
<a name="l1565"><span class="linenum">1565</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l1566"><span class="linenum">1566</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l1567"><span class="linenum">1567</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('blog_row_order')" href="../../../_functions/blog_row_order.html" onMouseOver="funcPopup(event,'blog_row_order')">blog_row_order</a>( #blog_ID#, #blog_order# )%',
<a name="l1568"><span class="linenum">1568</span></a>              );
<a name="l1569"><span class="linenum">1569</span></a>      }
<a name="l1570"><span class="linenum">1570</span></a>  
<a name="l1571"><span class="linenum">1571</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_caching'] )
<a name="l1572"><span class="linenum">1572</span></a>      { // Display Order column
<a name="l1573"><span class="linenum">1573</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1574"><span class="linenum">1574</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Caching'),
<a name="l1575"><span class="linenum">1575</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l1576"><span class="linenum">1576</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l1577"><span class="linenum">1577</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('blog_row_caching')" href="../../../_functions/blog_row_caching.html" onMouseOver="funcPopup(event,'blog_row_caching')">blog_row_caching</a>( {Obj} )%',
<a name="l1578"><span class="linenum">1578</span></a>              );
<a name="l1579"><span class="linenum">1579</span></a>      }
<a name="l1580"><span class="linenum">1580</span></a>  
<a name="l1581"><span class="linenum">1581</span></a>      if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_actions'] )
<a name="l1582"><span class="linenum">1582</span></a>      { // Display Actions column
<a name="l1583"><span class="linenum">1583</span></a>          <a class="var it9335" onMouseOver="hilite(9335)" onMouseOut="lolite()" onClick="logVariable('blogs_Results')" href="../../../_variables/blogs_Results.html">$blogs_Results</a>-&gt;<a onClick="logVariable('cols')" class="var it10799" onMouseOver="hilite(10799)" onMouseOut="lolite()" href="../../../_variables/cols.html">cols</a>[] = array(
<a name="l1584"><span class="linenum">1584</span></a>                  'th' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Actions'),
<a name="l1585"><span class="linenum">1585</span></a>                  'th_class' =&gt; 'shrinkwrap',
<a name="l1586"><span class="linenum">1586</span></a>                  'td_class' =&gt; 'shrinkwrap',
<a name="l1587"><span class="linenum">1587</span></a>                  'td' =&gt; '%<a class="function" onClick="logFunction('blog_row_actions')" href="../../../_functions/blog_row_actions.html" onMouseOver="funcPopup(event,'blog_row_actions')">blog_row_actions</a>( #blog_ID# )%',
<a name="l1588"><span class="linenum">1588</span></a>              );
<a name="l1589"><span class="linenum">1589</span></a>      }
<a name="l1590"><span class="linenum">1590</span></a>  }
<a name="l1591"><span class="linenum">1591</span></a>  
<a name="l1592"><span class="linenum">1592</span></a>  
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment">/**</span>
<a name="l1594"><span class="linenum">1594</span></a>  <span class="comment"> * Helper functions to display Blogs results.</span>
<a name="l1595"><span class="linenum">1595</span></a>  <span class="comment"> * New ( not display helper ) functions must be created above blogs_results function</span>
<a name="l1596"><span class="linenum">1596</span></a>  <span class="comment"> */</span>
<a name="l1597"><span class="linenum">1597</span></a>  
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment">/**</span>
<a name="l1599"><span class="linenum">1599</span></a>  <span class="comment"> * Get a blog name with link to edit</span>
<a name="l1600"><span class="linenum">1600</span></a>  <span class="comment"> *</span>
<a name="l1601"><span class="linenum">1601</span></a>  <span class="comment"> * @param string Blog name</span>
<a name="l1602"><span class="linenum">1602</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment"> * @return string Link</span>
<a name="l1604"><span class="linenum">1604</span></a>  <span class="comment"> */</span>
<a name="l1605"><span class="linenum">1605</span></a>  function <a class="function" onClick="logFunction('blog_row_name')" href="../../../_functions/blog_row_name.html" onMouseOver="funcPopup(event,'blog_row_name')">blog_row_name</a>( <a class="var it9340" onMouseOver="hilite(9340)" onMouseOut="lolite()" onClick="logVariable('coll_name')" href="../../../_variables/coll_name.html">$coll_name</a>, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> )
<a name="l1606"><span class="linenum">1606</span></a>  {
<a name="l1607"><span class="linenum">1607</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it499" onMouseOver="hilite(499)" onMouseOut="lolite()" onClick="logVariable('ctrl')" href="../../../_variables/ctrl.html">$ctrl</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1608"><span class="linenum">1608</span></a>      if( <a class="var it499" onMouseOver="hilite(499)" onMouseOut="lolite()" onClick="logVariable('ctrl')" href="../../../_variables/ctrl.html">$ctrl</a> == 'dashboard' )
<a name="l1609"><span class="linenum">1609</span></a>      { // Dashboard
<a name="l1610"><span class="linenum">1610</span></a>          <a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=dashboard&amp;amp;blog='.<a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a>;
<a name="l1611"><span class="linenum">1611</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a>.'&quot;&gt;';
<a name="l1612"><span class="linenum">1612</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it9340" onMouseOver="hilite(9340)" onMouseOut="lolite()" onClick="logVariable('coll_name')" href="../../../_variables/coll_name.html">$coll_name</a>;
<a name="l1613"><span class="linenum">1613</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l1614"><span class="linenum">1614</span></a>      }
<a name="l1615"><span class="linenum">1615</span></a>      elseif( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l1616"><span class="linenum">1616</span></a>      { // Blog setting &amp; can edit
<a name="l1617"><span class="linenum">1617</span></a>          <a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings&amp;amp;blog='.<a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a>;
<a name="l1618"><span class="linenum">1618</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a>.'&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit properties...').'&quot;&gt;';
<a name="l1619"><span class="linenum">1619</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it9340" onMouseOver="hilite(9340)" onMouseOut="lolite()" onClick="logVariable('coll_name')" href="../../../_variables/coll_name.html">$coll_name</a>;
<a name="l1620"><span class="linenum">1620</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l1621"><span class="linenum">1621</span></a>      }
<a name="l1622"><span class="linenum">1622</span></a>      else
<a name="l1623"><span class="linenum">1623</span></a>      {
<a name="l1624"><span class="linenum">1624</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it9340" onMouseOver="hilite(9340)" onMouseOut="lolite()" onClick="logVariable('coll_name')" href="../../../_variables/coll_name.html">$coll_name</a>;
<a name="l1625"><span class="linenum">1625</span></a>      }
<a name="l1626"><span class="linenum">1626</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1627"><span class="linenum">1627</span></a>  }
<a name="l1628"><span class="linenum">1628</span></a>  
<a name="l1629"><span class="linenum">1629</span></a>  
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment">/**</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment"> * Get a blog full name with link to edit</span>
<a name="l1632"><span class="linenum">1632</span></a>  <span class="comment"> *</span>
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment"> * @param string Blog full name</span>
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment"> * @return string Link</span>
<a name="l1636"><span class="linenum">1636</span></a>  <span class="comment"> */</span>
<a name="l1637"><span class="linenum">1637</span></a>  function <a class="function" onClick="logFunction('blog_row_fullname')" href="../../../_functions/blog_row_fullname.html" onMouseOver="funcPopup(event,'blog_row_fullname')">blog_row_fullname</a>( <a class="var it9341" onMouseOver="hilite(9341)" onMouseOut="lolite()" onClick="logVariable('coll_fullname')" href="../../../_variables/coll_fullname.html">$coll_fullname</a>, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> )
<a name="l1638"><span class="linenum">1638</span></a>  {
<a name="l1639"><span class="linenum">1639</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1640"><span class="linenum">1640</span></a>  
<a name="l1641"><span class="linenum">1641</span></a>      <a class="var it9341" onMouseOver="hilite(9341)" onMouseOut="lolite()" onClick="logVariable('coll_fullname')" href="../../../_variables/coll_fullname.html">$coll_fullname</a> = <a class="function" onClick="logFunction('strmaxlen')" href="../../../_functions/strmaxlen.html" onMouseOver="funcPopup(event,'strmaxlen')">strmaxlen</a>( <a class="var it9341" onMouseOver="hilite(9341)" onMouseOut="lolite()" onClick="logVariable('coll_fullname')" href="../../../_variables/coll_fullname.html">$coll_fullname</a>, 40, NULL, 'raw' );
<a name="l1642"><span class="linenum">1642</span></a>  
<a name="l1643"><span class="linenum">1643</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l1644"><span class="linenum">1644</span></a>      { // Blog setting &amp; can edit
<a name="l1645"><span class="linenum">1645</span></a>          <a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings&amp;amp;tab=general&amp;amp;blog='.<a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a>;
<a name="l1646"><span class="linenum">1646</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a>.'&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit properties...').'&quot;&gt;';
<a name="l1647"><span class="linenum">1647</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it9341" onMouseOver="hilite(9341)" onMouseOut="lolite()" onClick="logVariable('coll_fullname')" href="../../../_variables/coll_fullname.html">$coll_fullname</a>;
<a name="l1648"><span class="linenum">1648</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l1649"><span class="linenum">1649</span></a>      }
<a name="l1650"><span class="linenum">1650</span></a>      else
<a name="l1651"><span class="linenum">1651</span></a>      {
<a name="l1652"><span class="linenum">1652</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it9341" onMouseOver="hilite(9341)" onMouseOut="lolite()" onClick="logVariable('coll_fullname')" href="../../../_variables/coll_fullname.html">$coll_fullname</a>;
<a name="l1653"><span class="linenum">1653</span></a>      }
<a name="l1654"><span class="linenum">1654</span></a>  
<a name="l1655"><span class="linenum">1655</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1656"><span class="linenum">1656</span></a>  }
<a name="l1657"><span class="linenum">1657</span></a>  
<a name="l1658"><span class="linenum">1658</span></a>  
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment">/**</span>
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment"> * Get a blog type with link to edit</span>
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment"> *</span>
<a name="l1662"><span class="linenum">1662</span></a>  <span class="comment"> * @param string Blog type</span>
<a name="l1663"><span class="linenum">1663</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment"> * @return string Link</span>
<a name="l1665"><span class="linenum">1665</span></a>  <span class="comment"> */</span>
<a name="l1666"><span class="linenum">1666</span></a>  function <a class="function" onClick="logFunction('blog_row_type')" href="../../../_functions/blog_row_type.html" onMouseOver="funcPopup(event,'blog_row_type')">blog_row_type</a>( <a class="var it9342" onMouseOver="hilite(9342)" onMouseOut="lolite()" onClick="logVariable('coll_type')" href="../../../_variables/coll_type.html">$coll_type</a>, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> )
<a name="l1667"><span class="linenum">1667</span></a>  {
<a name="l1668"><span class="linenum">1668</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>;
<a name="l1669"><span class="linenum">1669</span></a>  
<a name="l1670"><span class="linenum">1670</span></a>      <a class="var it9343" onMouseOver="hilite(9343)" onMouseOut="lolite()" onClick="logVariable('type_titles')" href="../../../_variables/type_titles.html">$type_titles</a> = array(
<a name="l1671"><span class="linenum">1671</span></a>              'main'   =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Main'),
<a name="l1672"><span class="linenum">1672</span></a>              'std'    =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Blog'),
<a name="l1673"><span class="linenum">1673</span></a>              'photo'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Gallery'),
<a name="l1674"><span class="linenum">1674</span></a>              'group'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Collab'),
<a name="l1675"><span class="linenum">1675</span></a>              'forum'  =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Forum'),
<a name="l1676"><span class="linenum">1676</span></a>              'manual' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Manual'),
<a name="l1677"><span class="linenum">1677</span></a>          );
<a name="l1678"><span class="linenum">1678</span></a>  
<a name="l1679"><span class="linenum">1679</span></a>      <a class="var it9344" onMouseOver="hilite(9344)" onMouseOut="lolite()" onClick="logVariable('type_title')" href="../../../_variables/type_title.html">$type_title</a> = isset( <a class="var it9343" onMouseOver="hilite(9343)" onMouseOut="lolite()" onClick="logVariable('type_titles')" href="../../../_variables/type_titles.html">$type_titles</a>[ <a class="var it9342" onMouseOver="hilite(9342)" onMouseOut="lolite()" onClick="logVariable('coll_type')" href="../../../_variables/coll_type.html">$coll_type</a> ] ) ? <a class="var it9343" onMouseOver="hilite(9343)" onMouseOut="lolite()" onClick="logVariable('type_titles')" href="../../../_variables/type_titles.html">$type_titles</a>[ <a class="var it9342" onMouseOver="hilite(9342)" onMouseOut="lolite()" onClick="logVariable('coll_type')" href="../../../_variables/coll_type.html">$coll_type</a> ] : <a class="var it9342" onMouseOver="hilite(9342)" onMouseOut="lolite()" onClick="logVariable('coll_type')" href="../../../_variables/coll_type.html">$coll_type</a>;
<a name="l1680"><span class="linenum">1680</span></a>  
<a name="l1681"><span class="linenum">1681</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l1682"><span class="linenum">1682</span></a>      { // Blog setting &amp; can edit
<a name="l1683"><span class="linenum">1683</span></a>          <a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings&amp;tab=general&amp;action=type&amp;blog='.<a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a>;
<a name="l1684"><span class="linenum">1684</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a>.'&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit properties...').'&quot;&gt;';
<a name="l1685"><span class="linenum">1685</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it9344" onMouseOver="hilite(9344)" onMouseOut="lolite()" onClick="logVariable('type_title')" href="../../../_variables/type_title.html">$type_title</a>;
<a name="l1686"><span class="linenum">1686</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l1687"><span class="linenum">1687</span></a>      }
<a name="l1688"><span class="linenum">1688</span></a>      else
<a name="l1689"><span class="linenum">1689</span></a>      {
<a name="l1690"><span class="linenum">1690</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it9344" onMouseOver="hilite(9344)" onMouseOut="lolite()" onClick="logVariable('type_title')" href="../../../_variables/type_title.html">$type_title</a>;
<a name="l1691"><span class="linenum">1691</span></a>      }
<a name="l1692"><span class="linenum">1692</span></a>  
<a name="l1693"><span class="linenum">1693</span></a>  <span class="comment">    // Display the icons depending on how blog is used as default</span>
<a name="l1694"><span class="linenum">1694</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' ';
<a name="l1695"><span class="linenum">1695</span></a>      if( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> == <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'default_blog_ID' ) )
<a name="l1696"><span class="linenum">1696</span></a>      { // This blog is default
<a name="l1697"><span class="linenum">1697</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Default collection to display'), 'coll_default', <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=collections&amp;amp;tab=site_settings' );
<a name="l1698"><span class="linenum">1698</span></a>      }
<a name="l1699"><span class="linenum">1699</span></a>      if( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> == <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'info_blog_ID' ) )
<a name="l1700"><span class="linenum">1700</span></a>      { // This blog is used for info
<a name="l1701"><span class="linenum">1701</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Collection for info pages'), 'coll_info', <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=collections&amp;amp;tab=site_settings' );
<a name="l1702"><span class="linenum">1702</span></a>      }
<a name="l1703"><span class="linenum">1703</span></a>      if( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> == <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'login_blog_ID' ) )
<a name="l1704"><span class="linenum">1704</span></a>      { // This blog is used for login actions
<a name="l1705"><span class="linenum">1705</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Collection for login/registration'), 'coll_login', <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=collections&amp;amp;tab=site_settings' );
<a name="l1706"><span class="linenum">1706</span></a>      }
<a name="l1707"><span class="linenum">1707</span></a>      if( <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> == <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>( 'msg_blog_ID' ) )
<a name="l1708"><span class="linenum">1708</span></a>      { // This blog is used for messaging
<a name="l1709"><span class="linenum">1709</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Collection for profiles/messaging'), 'coll_message', <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=collections&amp;amp;tab=site_settings' );
<a name="l1710"><span class="linenum">1710</span></a>      }
<a name="l1711"><span class="linenum">1711</span></a>  
<a name="l1712"><span class="linenum">1712</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1713"><span class="linenum">1713</span></a>  }
<a name="l1714"><span class="linenum">1714</span></a>  
<a name="l1715"><span class="linenum">1715</span></a>  
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment">/**</span>
<a name="l1717"><span class="linenum">1717</span></a>  <span class="comment"> * Get a blog locale with link to edit</span>
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment"> *</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment"> * @param string Blog locale</span>
<a name="l1720"><span class="linenum">1720</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l1721"><span class="linenum">1721</span></a>  <span class="comment"> * @return string Link</span>
<a name="l1722"><span class="linenum">1722</span></a>  <span class="comment"> */</span>
<a name="l1723"><span class="linenum">1723</span></a>  function <a class="function" onClick="logFunction('blog_row_locale')" href="../../../_functions/blog_row_locale.html" onMouseOver="funcPopup(event,'blog_row_locale')">blog_row_locale</a>( <a class="var it9345" onMouseOver="hilite(9345)" onMouseOut="lolite()" onClick="logVariable('coll_locale')" href="../../../_variables/coll_locale.html">$coll_locale</a>, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> )
<a name="l1724"><span class="linenum">1724</span></a>  {
<a name="l1725"><span class="linenum">1725</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1726"><span class="linenum">1726</span></a>  
<a name="l1727"><span class="linenum">1727</span></a>      <a class="var it9345" onMouseOver="hilite(9345)" onMouseOut="lolite()" onClick="logVariable('coll_locale')" href="../../../_variables/coll_locale.html">$coll_locale</a> = <a class="function" onClick="logFunction('locale_flag')" href="../../../_functions/locale_flag.html" onMouseOver="funcPopup(event,'locale_flag')">locale_flag</a>( <a class="var it9345" onMouseOver="hilite(9345)" onMouseOut="lolite()" onClick="logVariable('coll_locale')" href="../../../_variables/coll_locale.html">$coll_locale</a>, NULL, NULL, NULL, false );
<a name="l1728"><span class="linenum">1728</span></a>  
<a name="l1729"><span class="linenum">1729</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l1730"><span class="linenum">1730</span></a>      { // Blog setting &amp; can edit
<a name="l1731"><span class="linenum">1731</span></a>          <a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings&amp;amp;blog='.<a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a>;
<a name="l1732"><span class="linenum">1732</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a>.'&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit properties...').'&quot;&gt;';
<a name="l1733"><span class="linenum">1733</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it9345" onMouseOver="hilite(9345)" onMouseOut="lolite()" onClick="logVariable('coll_locale')" href="../../../_variables/coll_locale.html">$coll_locale</a>;
<a name="l1734"><span class="linenum">1734</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l1735"><span class="linenum">1735</span></a>      }
<a name="l1736"><span class="linenum">1736</span></a>      else
<a name="l1737"><span class="linenum">1737</span></a>      {
<a name="l1738"><span class="linenum">1738</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it9345" onMouseOver="hilite(9345)" onMouseOut="lolite()" onClick="logVariable('coll_locale')" href="../../../_variables/coll_locale.html">$coll_locale</a>;
<a name="l1739"><span class="linenum">1739</span></a>      }
<a name="l1740"><span class="linenum">1740</span></a>  
<a name="l1741"><span class="linenum">1741</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1742"><span class="linenum">1742</span></a>  }
<a name="l1743"><span class="linenum">1743</span></a>  
<a name="l1744"><span class="linenum">1744</span></a>  
<a name="l1745"><span class="linenum">1745</span></a>  <span class="comment">/**</span>
<a name="l1746"><span class="linenum">1746</span></a>  <span class="comment"> * Get a blog order with link to edit</span>
<a name="l1747"><span class="linenum">1747</span></a>  <span class="comment"> *</span>
<a name="l1748"><span class="linenum">1748</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l1749"><span class="linenum">1749</span></a>  <span class="comment"> * @param integer Blog order</span>
<a name="l1750"><span class="linenum">1750</span></a>  <span class="comment"> * @return string Link or Text</span>
<a name="l1751"><span class="linenum">1751</span></a>  <span class="comment"> */</span>
<a name="l1752"><span class="linenum">1752</span></a>  function <a class="function" onClick="logFunction('blog_row_order')" href="../../../_functions/blog_row_order.html" onMouseOver="funcPopup(event,'blog_row_order')">blog_row_order</a>( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('blog_order')" href="../../../_variables/blog_order.html">$blog_order</a> )
<a name="l1753"><span class="linenum">1753</span></a>  {
<a name="l1754"><span class="linenum">1754</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1755"><span class="linenum">1755</span></a>  
<a name="l1756"><span class="linenum">1756</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l1757"><span class="linenum">1757</span></a>      { // Blog setting &amp; can edit
<a name="l1758"><span class="linenum">1758</span></a>          <a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings&amp;amp;tab=general&amp;amp;blog='.<a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>.'#blog_order';
<a name="l1759"><span class="linenum">1759</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a>.'&quot; id=&quot;order-blog-'.<a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>.'&quot; style=&quot;display:block;&quot;&gt;';
<a name="l1760"><span class="linenum">1760</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('blog_order')" href="../../../_variables/blog_order.html">$blog_order</a>;
<a name="l1761"><span class="linenum">1761</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l1762"><span class="linenum">1762</span></a>      }
<a name="l1763"><span class="linenum">1763</span></a>      else
<a name="l1764"><span class="linenum">1764</span></a>      {
<a name="l1765"><span class="linenum">1765</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it6900" onMouseOver="hilite(6900)" onMouseOut="lolite()" onClick="logVariable('blog_order')" href="../../../_variables/blog_order.html">$blog_order</a>;
<a name="l1766"><span class="linenum">1766</span></a>      }
<a name="l1767"><span class="linenum">1767</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1768"><span class="linenum">1768</span></a>  }
<a name="l1769"><span class="linenum">1769</span></a>  
<a name="l1770"><span class="linenum">1770</span></a>  
<a name="l1771"><span class="linenum">1771</span></a>  <span class="comment">/**</span>
<a name="l1772"><span class="linenum">1772</span></a>  <span class="comment"> * Get the action icons to toggle caching settings of blog</span>
<a name="l1773"><span class="linenum">1773</span></a>  <span class="comment"> *</span>
<a name="l1774"><span class="linenum">1774</span></a>  <span class="comment"> * @param object Blog</span>
<a name="l1775"><span class="linenum">1775</span></a>  <span class="comment"> * @return string</span>
<a name="l1776"><span class="linenum">1776</span></a>  <span class="comment"> */</span>
<a name="l1777"><span class="linenum">1777</span></a>  function <a class="function" onClick="logFunction('blog_row_caching')" href="../../../_functions/blog_row_caching.html" onMouseOver="funcPopup(event,'blog_row_caching')">blog_row_caching</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> )
<a name="l1778"><span class="linenum">1778</span></a>  {
<a name="l1779"><span class="linenum">1779</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1780"><span class="linenum">1780</span></a>  
<a name="l1781"><span class="linenum">1781</span></a>  <span class="comment">    // Get icon and title for page caching status</span>
<a name="l1782"><span class="linenum">1782</span></a>      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'cache_enabled' ) )
<a name="l1783"><span class="linenum">1783</span></a>      { // Page cache is enabled
<a name="l1784"><span class="linenum">1784</span></a>          <a class="var it9346" onMouseOver="hilite(9346)" onMouseOut="lolite()" onClick="logVariable('page_cache_icon')" href="../../../_variables/page_cache_icon.html">$page_cache_icon</a> = 'page_cache_on';
<a name="l1785"><span class="linenum">1785</span></a>          <a class="var it9347" onMouseOver="hilite(9347)" onMouseOut="lolite()" onClick="logVariable('page_cache_title')" href="../../../_variables/page_cache_title.html">$page_cache_title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Page caching is on. Anonymous users may not see the latest content for 10 minutes.');
<a name="l1786"><span class="linenum">1786</span></a>          <a class="var it9348" onMouseOver="hilite(9348)" onMouseOut="lolite()" onClick="logVariable('page_cache_action')" href="../../../_variables/page_cache_action.html">$page_cache_action</a> = 'disable_setting';
<a name="l1787"><span class="linenum">1787</span></a>      }
<a name="l1788"><span class="linenum">1788</span></a>      else
<a name="l1789"><span class="linenum">1789</span></a>      { // Page cache is disabled
<a name="l1790"><span class="linenum">1790</span></a>          <a class="var it9346" onMouseOver="hilite(9346)" onMouseOut="lolite()" onClick="logVariable('page_cache_icon')" href="../../../_variables/page_cache_icon.html">$page_cache_icon</a> = 'page_cache_off';
<a name="l1791"><span class="linenum">1791</span></a>          <a class="var it9347" onMouseOver="hilite(9347)" onMouseOut="lolite()" onClick="logVariable('page_cache_title')" href="../../../_variables/page_cache_title.html">$page_cache_title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Page caching is off. Server performance will not be optimal.');
<a name="l1792"><span class="linenum">1792</span></a>          <a class="var it9348" onMouseOver="hilite(9348)" onMouseOut="lolite()" onClick="logVariable('page_cache_action')" href="../../../_variables/page_cache_action.html">$page_cache_action</a> = 'enable_setting';
<a name="l1793"><span class="linenum">1793</span></a>      }
<a name="l1794"><span class="linenum">1794</span></a>  
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment">    // Get icon and title for widget/block caching status</span>
<a name="l1796"><span class="linenum">1796</span></a>      if( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'cache_enabled_widgets' ) )
<a name="l1797"><span class="linenum">1797</span></a>      { // Widget/block cache is enabled
<a name="l1798"><span class="linenum">1798</span></a>          <a class="var it9349" onMouseOver="hilite(9349)" onMouseOut="lolite()" onClick="logVariable('block_cache_icon')" href="../../../_variables/block_cache_icon.html">$block_cache_icon</a> = 'block_cache_on';
<a name="l1799"><span class="linenum">1799</span></a>          <a class="var it9350" onMouseOver="hilite(9350)" onMouseOut="lolite()" onClick="logVariable('block_cache_title')" href="../../../_variables/block_cache_title.html">$block_cache_title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Block caching is on. Some widgets may not update immediately.');
<a name="l1800"><span class="linenum">1800</span></a>          <a class="var it9351" onMouseOver="hilite(9351)" onMouseOut="lolite()" onClick="logVariable('block_cache_action')" href="../../../_variables/block_cache_action.html">$block_cache_action</a> = 'disable_setting';
<a name="l1801"><span class="linenum">1801</span></a>      }
<a name="l1802"><span class="linenum">1802</span></a>      else
<a name="l1803"><span class="linenum">1803</span></a>      { // Widget/block cache is disabled
<a name="l1804"><span class="linenum">1804</span></a>          <a class="var it9349" onMouseOver="hilite(9349)" onMouseOut="lolite()" onClick="logVariable('block_cache_icon')" href="../../../_variables/block_cache_icon.html">$block_cache_icon</a> = 'block_cache_off';
<a name="l1805"><span class="linenum">1805</span></a>          <a class="var it9350" onMouseOver="hilite(9350)" onMouseOut="lolite()" onClick="logVariable('block_cache_title')" href="../../../_variables/block_cache_title.html">$block_cache_title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Block caching is off. Server performance will not be optimal.');
<a name="l1806"><span class="linenum">1806</span></a>          <a class="var it9351" onMouseOver="hilite(9351)" onMouseOut="lolite()" onClick="logVariable('block_cache_action')" href="../../../_variables/block_cache_action.html">$block_cache_action</a> = 'enable_setting';
<a name="l1807"><span class="linenum">1807</span></a>      }
<a name="l1808"><span class="linenum">1808</span></a>  
<a name="l1809"><span class="linenum">1809</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l1810"><span class="linenum">1810</span></a>      <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '&lt;span class=&quot;column_icon&quot;&gt;';
<a name="l1811"><span class="linenum">1811</span></a>      <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '&lt;/span&gt;';
<a name="l1812"><span class="linenum">1812</span></a>  
<a name="l1813"><span class="linenum">1813</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l1814"><span class="linenum">1814</span></a>      { // User has a permission to edit blog settings
<a name="l1815"><span class="linenum">1815</span></a>          <a class="var it9352" onMouseOver="hilite(9352)" onMouseOut="lolite()" onClick="logVariable('toggle_url')" href="../../../_variables/toggle_url.html">$toggle_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings'
<a name="l1816"><span class="linenum">1816</span></a>              .'&amp;amp;tab=general'
<a name="l1817"><span class="linenum">1817</span></a>              .'&amp;amp;action=%s'
<a name="l1818"><span class="linenum">1818</span></a>              .'&amp;amp;setting=%s'
<a name="l1819"><span class="linenum">1819</span></a>              .'&amp;amp;blog='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;ID
<a name="l1820"><span class="linenum">1820</span></a>              .'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>( 'collection' );
<a name="l1821"><span class="linenum">1821</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>.<a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="var it9347" onMouseOver="hilite(9347)" onMouseOut="lolite()" onClick="logVariable('page_cache_title')" href="../../../_variables/page_cache_title.html">$page_cache_title</a>, <a class="var it9346" onMouseOver="hilite(9346)" onMouseOut="lolite()" onClick="logVariable('page_cache_icon')" href="../../../_variables/page_cache_icon.html">$page_cache_icon</a>, sprintf( <a class="var it9352" onMouseOver="hilite(9352)" onMouseOut="lolite()" onClick="logVariable('toggle_url')" href="../../../_variables/toggle_url.html">$toggle_url</a>, <a class="var it9348" onMouseOver="hilite(9348)" onMouseOut="lolite()" onClick="logVariable('page_cache_action')" href="../../../_variables/page_cache_action.html">$page_cache_action</a>, 'page_cache' ) ).<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1822"><span class="linenum">1822</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>.<a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="var it9350" onMouseOver="hilite(9350)" onMouseOut="lolite()" onClick="logVariable('block_cache_title')" href="../../../_variables/block_cache_title.html">$block_cache_title</a>, <a class="var it9349" onMouseOver="hilite(9349)" onMouseOut="lolite()" onClick="logVariable('block_cache_icon')" href="../../../_variables/block_cache_icon.html">$block_cache_icon</a>, sprintf( <a class="var it9352" onMouseOver="hilite(9352)" onMouseOut="lolite()" onClick="logVariable('toggle_url')" href="../../../_variables/toggle_url.html">$toggle_url</a>, <a class="var it9351" onMouseOver="hilite(9351)" onMouseOut="lolite()" onClick="logVariable('block_cache_action')" href="../../../_variables/block_cache_action.html">$block_cache_action</a>, 'block_cache' ) ).<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1823"><span class="linenum">1823</span></a>      }
<a name="l1824"><span class="linenum">1824</span></a>      else
<a name="l1825"><span class="linenum">1825</span></a>      { // No permissions to edit
<a name="l1826"><span class="linenum">1826</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it9346" onMouseOver="hilite(9346)" onMouseOut="lolite()" onClick="logVariable('page_cache_icon')" href="../../../_variables/page_cache_icon.html">$page_cache_icon</a>, 'imgtag', array( 'title' =&gt; <a class="var it9347" onMouseOver="hilite(9347)" onMouseOut="lolite()" onClick="logVariable('page_cache_title')" href="../../../_variables/page_cache_title.html">$page_cache_title</a> ) ).<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1827"><span class="linenum">1827</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it9349" onMouseOver="hilite(9349)" onMouseOut="lolite()" onClick="logVariable('block_cache_icon')" href="../../../_variables/block_cache_icon.html">$block_cache_icon</a>, 'imgtag', array( 'title' =&gt; <a class="var it9350" onMouseOver="hilite(9350)" onMouseOut="lolite()" onClick="logVariable('block_cache_title')" href="../../../_variables/block_cache_title.html">$block_cache_title</a> ) ).<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1828"><span class="linenum">1828</span></a>      }
<a name="l1829"><span class="linenum">1829</span></a>  
<a name="l1830"><span class="linenum">1830</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1831"><span class="linenum">1831</span></a>  }
<a name="l1832"><span class="linenum">1832</span></a>  
<a name="l1833"><span class="linenum">1833</span></a>  
<a name="l1834"><span class="linenum">1834</span></a>  <span class="comment">/**</span>
<a name="l1835"><span class="linenum">1835</span></a>  <span class="comment"> * Gat title of value for the blog field &quot;blog_in_bloglist&quot;</span>
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment"> *</span>
<a name="l1837"><span class="linenum">1837</span></a>  <span class="comment"> * @param integer Value</span>
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment"> * @return string Title</span>
<a name="l1839"><span class="linenum">1839</span></a>  <span class="comment"> */</span>
<a name="l1840"><span class="linenum">1840</span></a>  function <a class="function" onClick="logFunction('blog_row_listed')" href="../../../_functions/blog_row_listed.html" onMouseOver="funcPopup(event,'blog_row_listed')">blog_row_listed</a>( <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> )
<a name="l1841"><span class="linenum">1841</span></a>  {
<a name="l1842"><span class="linenum">1842</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1843"><span class="linenum">1843</span></a>  
<a name="l1844"><span class="linenum">1844</span></a>      switch( <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> )
<a name="l1845"><span class="linenum">1845</span></a>      {
<a name="l1846"><span class="linenum">1846</span></a>          case 'public':
<a name="l1847"><span class="linenum">1847</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Always');
<a name="l1848"><span class="linenum">1848</span></a>              break;
<a name="l1849"><span class="linenum">1849</span></a>          case 'logged':
<a name="l1850"><span class="linenum">1850</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Logged in');
<a name="l1851"><span class="linenum">1851</span></a>              break;
<a name="l1852"><span class="linenum">1852</span></a>          case 'member':
<a name="l1853"><span class="linenum">1853</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Members');
<a name="l1854"><span class="linenum">1854</span></a>              break;
<a name="l1855"><span class="linenum">1855</span></a>          case 'never':
<a name="l1856"><span class="linenum">1856</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Never');
<a name="l1857"><span class="linenum">1857</span></a>              break;
<a name="l1858"><span class="linenum">1858</span></a>          default:
<a name="l1859"><span class="linenum">1859</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="var it54" onMouseOver="hilite(54)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l1860"><span class="linenum">1860</span></a>              break;
<a name="l1861"><span class="linenum">1861</span></a>      }
<a name="l1862"><span class="linenum">1862</span></a>  
<a name="l1863"><span class="linenum">1863</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a> ) )
<a name="l1864"><span class="linenum">1864</span></a>      { // Blog setting &amp; can edit
<a name="l1865"><span class="linenum">1865</span></a>          <a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings&amp;amp;blog='.<a class="var it1798" onMouseOver="hilite(1798)" onMouseOut="lolite()" onClick="logVariable('coll_ID')" href="../../../_variables/coll_ID.html">$coll_ID</a>;
<a name="l1866"><span class="linenum">1866</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it3684" onMouseOver="hilite(3684)" onMouseOut="lolite()" onClick="logVariable('edit_url')" href="../../../_variables/edit_url.html">$edit_url</a>.'&quot; title=&quot;'.<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit properties...').'&quot;&gt;';
<a name="l1867"><span class="linenum">1867</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l1868"><span class="linenum">1868</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;/a&gt;';
<a name="l1869"><span class="linenum">1869</span></a>      }
<a name="l1870"><span class="linenum">1870</span></a>      else
<a name="l1871"><span class="linenum">1871</span></a>      {
<a name="l1872"><span class="linenum">1872</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l1873"><span class="linenum">1873</span></a>      }
<a name="l1874"><span class="linenum">1874</span></a>  
<a name="l1875"><span class="linenum">1875</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1876"><span class="linenum">1876</span></a>  }
<a name="l1877"><span class="linenum">1877</span></a>  
<a name="l1878"><span class="linenum">1878</span></a>  
<a name="l1879"><span class="linenum">1879</span></a>  <span class="comment">/**</span>
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment"> * Get an icon to show that blog setting is enabled or disabled</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment"> * Make a link to switch setting value if user has permissions to edit blog settings</span>
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment"> *</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment"> * @param boolean Blog setting name: 'fav'</span>
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment"> * @param boolean Blog setting value: 0, 1</span>
<a name="l1886"><span class="linenum">1886</span></a>  <span class="comment"> * @return string Icon or Link to change setting</span>
<a name="l1887"><span class="linenum">1887</span></a>  <span class="comment"> */</span>
<a name="l1888"><span class="linenum">1888</span></a>  function <a class="function" onClick="logFunction('blog_row_setting')" href="../../../_functions/blog_row_setting.html" onMouseOver="funcPopup(event,'blog_row_setting')">blog_row_setting</a>( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>, <a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a>, <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('setting_value')" href="../../../_variables/setting_value.html">$setting_value</a> )
<a name="l1889"><span class="linenum">1889</span></a>  {
<a name="l1890"><span class="linenum">1890</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1891"><span class="linenum">1891</span></a>  
<a name="l1892"><span class="linenum">1892</span></a>      switch( <a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a> )
<a name="l1893"><span class="linenum">1893</span></a>      {
<a name="l1894"><span class="linenum">1894</span></a>          case'fav':
<a name="l1895"><span class="linenum">1895</span></a>  <span class="comment">            // Favorite Blog</span>
<a name="l1896"><span class="linenum">1896</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('setting_value')" href="../../../_variables/setting_value.html">$setting_value</a> ?
<a name="l1897"><span class="linenum">1897</span></a>                      <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The blog is a favorite.') :
<a name="l1898"><span class="linenum">1898</span></a>                      <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('The blog is not a favorite.');
<a name="l1899"><span class="linenum">1899</span></a>              break;
<a name="l1900"><span class="linenum">1900</span></a>  
<a name="l1901"><span class="linenum">1901</span></a>          default:
<a name="l1902"><span class="linenum">1902</span></a>  <span class="comment">            // Incorrect setting name</span>
<a name="l1903"><span class="linenum">1903</span></a>              return;
<a name="l1904"><span class="linenum">1904</span></a>      }
<a name="l1905"><span class="linenum">1905</span></a>  
<a name="l1906"><span class="linenum">1906</span></a>      if( <a class="var it5581" onMouseOver="hilite(5581)" onMouseOut="lolite()" onClick="logVariable('setting_value')" href="../../../_variables/setting_value.html">$setting_value</a> )
<a name="l1907"><span class="linenum">1907</span></a>      { // Setting is enabled
<a name="l1908"><span class="linenum">1908</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> = 'disable_setting';
<a name="l1909"><span class="linenum">1909</span></a>          <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a> = 'star_on';
<a name="l1910"><span class="linenum">1910</span></a>      }
<a name="l1911"><span class="linenum">1911</span></a>      else
<a name="l1912"><span class="linenum">1912</span></a>      { // Setting is disabled
<a name="l1913"><span class="linenum">1913</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a> = 'enable_setting';
<a name="l1914"><span class="linenum">1914</span></a>          <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a> = 'star_off';
<a name="l1915"><span class="linenum">1915</span></a>      }
<a name="l1916"><span class="linenum">1916</span></a>  
<a name="l1917"><span class="linenum">1917</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'false', false, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> ) )
<a name="l1918"><span class="linenum">1918</span></a>      { // Link to update blog setting
<a name="l1919"><span class="linenum">1919</span></a>          return '&lt;a href=&quot;'.<a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings'
<a name="l1920"><span class="linenum">1920</span></a>              .'&amp;amp;tab=general'
<a name="l1921"><span class="linenum">1921</span></a>              .'&amp;amp;action='.<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../../_variables/action.html">$action</a>
<a name="l1922"><span class="linenum">1922</span></a>              .'&amp;amp;setting='.<a class="var it1766" onMouseOver="hilite(1766)" onMouseOut="lolite()" onClick="logVariable('setting_name')" href="../../../_variables/setting_name.html">$setting_name</a>
<a name="l1923"><span class="linenum">1923</span></a>              .'&amp;amp;blog='.<a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>
<a name="l1924"><span class="linenum">1924</span></a>              .'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('collection').'&quot;&gt;'
<a name="l1925"><span class="linenum">1925</span></a>                  .<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, 'imgtag', array( 'title' =&gt; <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> ) )
<a name="l1926"><span class="linenum">1926</span></a>              .'&lt;/a&gt;';
<a name="l1927"><span class="linenum">1927</span></a>      }
<a name="l1928"><span class="linenum">1928</span></a>      else
<a name="l1929"><span class="linenum">1929</span></a>      { // Simple icon to display current value of blog setting
<a name="l1930"><span class="linenum">1930</span></a>          return <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>, 'imgtag', array( 'title' =&gt; <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> ) );
<a name="l1931"><span class="linenum">1931</span></a>      }
<a name="l1932"><span class="linenum">1932</span></a>  }
<a name="l1933"><span class="linenum">1933</span></a>  
<a name="l1934"><span class="linenum">1934</span></a>  
<a name="l1935"><span class="linenum">1935</span></a>  <span class="comment">/**</span>
<a name="l1936"><span class="linenum">1936</span></a>  <span class="comment"> * Get available actions for current blog</span>
<a name="l1937"><span class="linenum">1937</span></a>  <span class="comment"> *</span>
<a name="l1938"><span class="linenum">1938</span></a>  <span class="comment"> * @param integer Blog ID</span>
<a name="l1939"><span class="linenum">1939</span></a>  <span class="comment"> * @return string Action links</span>
<a name="l1940"><span class="linenum">1940</span></a>  <span class="comment"> */</span>
<a name="l1941"><span class="linenum">1941</span></a>  function <a class="function" onClick="logFunction('blog_row_actions')" href="../../../_functions/blog_row_actions.html" onMouseOver="funcPopup(event,'blog_row_actions')">blog_row_actions</a>( <a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('curr_blog_ID')" href="../../../_variables/curr_blog_ID.html">$curr_blog_ID</a> )
<a name="l1942"><span class="linenum">1942</span></a>  {
<a name="l1943"><span class="linenum">1943</span></a>      global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1944"><span class="linenum">1944</span></a>      <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '';
<a name="l1945"><span class="linenum">1945</span></a>  
<a name="l1946"><span class="linenum">1946</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('curr_blog_ID')" href="../../../_variables/curr_blog_ID.html">$curr_blog_ID</a> ) )
<a name="l1947"><span class="linenum">1947</span></a>      {
<a name="l1948"><span class="linenum">1948</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Edit properties...'), 'properties', <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=coll_settings&amp;amp;tab=general&amp;amp;blog='.<a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('curr_blog_ID')" href="../../../_variables/curr_blog_ID.html">$curr_blog_ID</a> );
<a name="l1949"><span class="linenum">1949</span></a>      }
<a name="l1950"><span class="linenum">1950</span></a>  
<a name="l1951"><span class="linenum">1951</span></a>      if( <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blog_properties', 'edit', false, <a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('curr_blog_ID')" href="../../../_variables/curr_blog_ID.html">$curr_blog_ID</a> ) )
<a name="l1952"><span class="linenum">1952</span></a>      {
<a name="l1953"><span class="linenum">1953</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="function" onClick="logFunction('action_icon')" href="../../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>( <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Delete this blog...'), 'delete', <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=collections&amp;amp;action=delete&amp;amp;blog='.<a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('curr_blog_ID')" href="../../../_variables/curr_blog_ID.html">$curr_blog_ID</a>.'&amp;amp;'.<a class="function" onClick="logFunction('url_crumb')" href="../../../_functions/url_crumb.html" onMouseOver="funcPopup(event,'url_crumb')">url_crumb</a>('collection').'&amp;amp;redirect_to='.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../../../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>( <a class="function" onClick="logFunction('regenerate_url')" href="../../../_functions/regenerate_url.html" onMouseOver="funcPopup(event,'regenerate_url')">regenerate_url</a>( '', '', '', '&amp;' ) ) );
<a name="l1954"><span class="linenum">1954</span></a>      }
<a name="l1955"><span class="linenum">1955</span></a>  
<a name="l1956"><span class="linenum">1956</span></a>      if( empty(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>) )
<a name="l1957"><span class="linenum">1957</span></a>      { // for IE
<a name="l1958"><span class="linenum">1958</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&amp;nbsp;';
<a name="l1959"><span class="linenum">1959</span></a>      }
<a name="l1960"><span class="linenum">1960</span></a>  
<a name="l1961"><span class="linenum">1961</span></a>      return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1962"><span class="linenum">1962</span></a>  }
<a name="l1963"><span class="linenum">1963</span></a>  
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment">/**</span>
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment"> * End of helper functions block to display Blogs results.</span>
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment"> * New ( not display helper ) functions must be created above blogs_results function</span>
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment"> */</span>
<a name="l1968"><span class="linenum">1968</span></a>  
<a name="l1969"><span class="linenum">1969</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'select': ['select', 'Set SELECT clause ', [['inc/_core/model/db','_sql.class.php',196],['inc/_core/ui/forms','_form.class.php',2189],['inc/_core/model/db','_db.class.php',454]], 475],
'blog_row_order': ['blog_row_order', 'Get a blog order with link to edit ', [['inc/collections/model','_blog.funcs.php',1745]], 1],
'blog_row_fullname': ['blog_row_fullname', 'Get a blog full name with link to edit ', [['inc/collections/model','_blog.funcs.php',1630]], 1],
'group_by': ['group_by', '', [['inc/_core/model/db','_sql.class.php',290]], 60],
'get_manual_link': ['get_manual_link', 'Generate a link to a online help resource. testing the concept of online help (aka webhelp). this function should be relocated somewhere better if it is taken onboard by the project ', [['inc/_core','_misc.funcs.php',4935]], 284],
'get_inskin_statuses': ['get_inskin_statuses', 'Get a list of those statuses which can be displayed in the front office ', [['inc/collections/model','_blog.funcs.php',904]], 20],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'load_user_blogs': ['load_user_blogs', 'Load blogs a user has permissions for. ', [['inc/collections/model','_blogcache.class.php',287]], 7],
'set_working_blog': ['set_working_blog', 'Set working blog to a new value and memorize it in user settings if needed. ', [['inc/collections/model','_blog.funcs.php',339]], 21],
'order_by': ['order_by', '', [['inc/_core/model/db','_sql.class.php',321]], 85],
'get_icon': ['get_icon', 'Return the img html code of the icon ', [['inc/files/model','_filetype.class.php',153],['inc/files/model','_file.class.php',978],['inc/_core','_misc.funcs.php',4122]], 428],
'remove_seconds': ['remove_seconds', 'Get datetime rounded to lower minute. This is meant to remove seconds and leverage MySQL\'s query cache by having SELECT queries remain identical for 60 seconds instead of just 1. ', [['inc/_core','_misc.funcs.php',1601]], 6],
'where': ['where', '', [['inc/_core/model/db','_sql.class.php',242]], 288],
'check_user_status': ['check_user_status', 'Check if current User status permit the give action ', [['inc/users/model','_user.funcs.php',51]], 19],
'get_visibility_statuses': ['get_visibility_statuses', 'Get available post statuses ', [['inc/collections/model','_blog.funcs.php',953]], 87],
'get_template': ['get_template', 'Get a template by name and depth. ', [['skins_adm/chicago','_adminUI.class.php',163],['skins/bootstrap_gallery_legacy','_skin.class.php',397],['skins_adm/bootstrap','_adminUI.class.php',240],['inc/skins/model','_skin.class.php',1180],['inc/_core/ui/forms','_form.class.php',185],['skins/bootstrap_main_skin','_skin.class.php',416],['skins/pureforums','_skin.class.php',322],['skins/bootstrap_blog_skin','_skin.class.php',233],['inc/plugins','_plugin.class.php',378],['skins/bootstrap_gallery_skin','_skin.class.php',397],['skins_adm','_adminUI_general.class.php',859],['skins/forums','_skin.class.php',346],['skins/bootstrap_forums_skin','_skin.class.php',410],['inc/_core/ui','_menu.class.php',430],['skins/bootstrap_manual_skin','_skin.class.php',254]], 211],
'get_col': ['get_col', 'Function to get 1 column from the cached result set based on X index see docs for usage and info ', [['inc/_core/model/db','_db.class.php',1032]], 117],
'init_params_by_skin': ['init_params_by_skin', 'Init results params from skin template params. It\'s used when Results table is filled from ajax result. ', [['inc/_core/ui','_uiwidget.class.php',1156]], 9],
'get_restricted_statuses': ['get_restricted_statuses', 'Get restricted visibility statuses for the current User in the given blog in back office ', [['inc/collections/model','_blog.funcs.php',1161]], 11],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'regenerate_url': ['regenerate_url', 'Regenerate current URL from parameters This may clean it up But it is also useful when generating static pages: you cannot rely on $_REQUEST[] ', [['inc/_core','_param.funcs.php',1748]], 503],
'blog': ['blog', 'Constructor ', [['inc/collections/model','_blog.class.php',130]], 31],
'query': ['query', 'Run Query: GET DATA ROWS *** HEAVY *** ', [['inc/items/model','_itemlist.class.php',249],['inc/items/model','_itemlistlight.class.php',742],['inc/comments/model','_commentlist.class.php',507],['inc/users/model','_userlist.class.php',511],['inc/_core/ui/results','_results.class.php',468],['inc/_core/model/db','_db.class.php',749]], 1144],
'trigger_collect': ['trigger_collect', 'Trigger an event and return an array of all return values of the relevant plugins. ', [['inc/plugins/model','_plugins.class.php',1038]], 2],
'blogs_results': ['blogs_results', 'Initialize Results object for blogs list ', [['inc/collections/model','_blog.funcs.php',1444]], 2],
'get_status_permvalue': ['get_status_permvalue', 'Get the integer value of a status permission The status permissions are stored as a set, and each status has an integer value also ', [['inc/users/model','_user.funcs.php',1929]], 30],
'request_required_files': ['request_required_files', 'Request all required css and js files for this widget ', [['inc/widgets/widgets','_user_login.widget.php',179],['inc/widgets/model','_widget.class.php',398]], 1],
'where_and': ['where_and', 'Extends the WHERE clause with AND ', [['inc/_core/model/db','_sql.class.php',247]], 369],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'url': ['url', 'Template function: display user\'s URL ', [['inc/users/model','_user.class.php',3688]], 604],
'set_setting': ['set_setting', 'Set a setting. ', [['inc/items/model','_item.class.php',6669],['inc/skins/model','_skin.class.php',749],['inc/collections/model','_blog.class.php',2218]], 221],
'blogs_user_results_block': ['blogs_user_results_block', '', [['inc/collections/model','_blog.funcs.php',1249]], 1],
'locale_flag': ['locale_flag', 'Template tag ', [['inc/items/model','_itemlight.class.php',888],['inc/locales','_locale.funcs.php',480]], 8],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'init_blog_widgets': ['init_blog_widgets', 'Initialize blog enabled widgets. It will call every enabled widget request_required_files() function. ', [['inc/collections/model','_blog.funcs.php',661]], 1],
'cache_create': ['cache_create', '', [['inc/_core/model','_pagecache.class.php',174]], 2],
'get_collection_kinds': ['get_collection_kinds', 'Get collection kinds (might be extended by plugins) ', [['inc/collections/model','_blog.funcs.php',369]], 8],
'locale_activate': ['locale_activate', 'Activate a locale. ', [['inc/locales','_locale.funcs.php',300]], 17],
'get_user_identity_link': ['get_user_identity_link', 'Get User identity link. User is given with his login or ID. User login or ID must be set. ', [['inc/users/model','_user.funcs.php',1032]], 12],
'dbupdate': ['dbupdate', 'Update the DB based on previously recorded changes ', [['inc/items/model','_item.class.php',5287],['inc/_core/model/dataobjects','_dataobject.class.php',386],['inc/users/model','_user.class.php',3249],['inc/skins/model','_skin.class.php',416],['inc/settings/model','_abstractsettings.class.php',575],['inc/items/model','_itemtype.class.php',433],['inc/files/model','_filetype.class.php',242],['inc/collections/model','_blog.class.php',2630],['inc/comments/model','_comment.class.php',3747],['inc/cron/model','_cronjob.class.php',188],['inc/slugs/model','_slug.class.php',265],['inc/users/model','_group.class.php',478],['inc/widgets/model','_widget.class.php',861],['inc/users/model','_groupsettings.class.php',159],['inc/chapters/model','_chapter.class.php',564],['inc/files/model','_file.class.php',1825]], 289],
'cache_delete': ['cache_delete', 'Delete all cache files ', [['inc/_core/model','_pagecache.class.php',199]], 5],
'limit': ['limit', '', [['inc/_core/model/db','_sql.class.php',343]], 30],
'get_string': ['get_string', 'Concatenates messages of a given category to a string ', [['inc/_core/model','_messages.class.php',258],['inc/_core/model','_log.class.php',419],['inc/_core/model','_log.class.php',620]], 16],
'activate_blog_locale': ['activate_blog_locale', 'Activate the blog locale and the corresponding charset ', [['inc/collections/model','_blog.funcs.php',635]], 4],
'init_charsets': ['init_charsets', 'Init charset handling between Input/Output ($io_charset) and the internal handling ($evo_charset). ', [['inc/locales','_locale.funcs.php',1125]], 11],
'blog_row_name': ['blog_row_name', 'Get a blog name with link to edit ', [['inc/collections/model','_blog.funcs.php',1598]], 1],
'check_status': ['check_status', 'Check if user status permits the requested action ', [['inc/users/model','_user.class.php',2890]], 83],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['inc/users/model','_user.funcs.php',38]], 274],
'check_perm_blog_global': ['check_perm_blog_global', 'Check if user has global perms on this blog ', [['inc/users/model','_user.class.php',2827]], 3],
'compare_visibility_status': ['compare_visibility_status', 'Compare two visibility status in the point of public level ', [['inc/collections/model','_blog.funcs.php',1132]], 1],
'get_setting': ['get_setting', 'Get a setting. ', [['inc/items/model','_item.class.php',6656],['inc/skins/model','_skin.class.php',661],['inc/collections/model','_blog.class.php',2109]], 728],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'get_tags': ['get_tags', 'Retrieves all tags from published posts ', [['inc/collections/model','_blog.funcs.php',835]], 12],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'blog_update_perms': ['blog_update_perms', 'Update the advanced user/group permissions for edited blog ', [['inc/collections/model','_blog.funcs.php',18]], 2],
'autoselect_blog': ['autoselect_blog', 'Check permissions on a given blog (by ID) and autoselect an appropriate blog if necessary. ', [['inc/collections/model','_blog.funcs.php',210]], 12],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['inc/_core/model/db','_db.class.php',1083]], 152],
'blog_row_caching': ['blog_row_caching', 'Get the action icons to toggle caching settings of blog ', [['inc/collections/model','_blog.funcs.php',1771]], 1],
'valid_blog_requested': ['valid_blog_requested', 'Check that we have received a valid blog param ', [['inc/collections/model','_blog.funcs.php',263]], 3],
'check_allow_disp': ['check_allow_disp', 'Check if user is activated and status allow to display the requested form ($disp). Do nothing if status is activated or can\'t be activated or display is not allowed, add error message to activate the account otherwise. asimo>TODO: We may find a better name and a better place for this function ( maybe user.funcs.php ) ', [['inc/collections/model','_blog.funcs.php',687]], 1],
'get_deleted_blogs': ['get_deleted_blogs', 'Get all own blogs of this user which current user can delete ', [['inc/users/model','_user.class.php',5232]], 3],
'global_icon': ['global_icon', 'Registers a global action icon ', [['inc/_core/ui','_uiwidget.class.php',70]], 166],
'display': ['display', 'Display the widget! ', [['inc/widgets/widgets','_coll_tag_cloud.widget.php',170],['inc/_core/model/db','_sql.class.php',68],['inc/widgets/widgets','_coll_logo.widget.php',138],['inc/widgets/widgets','_mobile_skin_switcher.widget.php',105],['inc/widgets/widgets','_online_users.widget.php',95],['inc/widgets/widgets','_user_login.widget.php',195],['inc/widgets/widgets','_coll_item_list.widget.php',274],['inc/_core/model','_messages.class.php',183],['inc/widgets/widgets','_user_links.widget.php',114],['inc/widgets/widgets','_coll_featured_intro.widget.php',171],['plugins','_calendar.plugin.php',619],['inc/widgets/widgets','_coll_search_form.widget.php',135],['inc/widgets/widgets','_coll_longdesc.widget.php',99],['inc/widgets/widgets','_content_hierarchy.widget.php',120],['inc/widgets/widgets','_coll_tagline.widget.php',79],['inc/widgets/widgets','_coll_current_filters.widget.php',113],['inc/widgets/widgets','_coll_category_list.widget.php',198],['inc/widgets/widgets','_org_members.widget.php',147],['inc/widgets/widgets','_coll_comment_list.widget.php',129],['inc/_core/model','_log.class.php',276],['inc/_core/model','_log.class.php',602],['inc/widgets/widgets','_member_count.widget.php',66],['inc/widgets/widgets','_menu_link.widget.php',202],['inc/_core/ui/results','_results.class.php',916],['inc/widgets/widgets','_free_html.widget.php',110],['inc/widgets/widgets','_breadcrumb_path.widget.php',103],['inc/widgets/widgets','_image.widget.php',139],['inc/widgets/widgets','_profile_menu_link.widget.php',128],['inc/widgets/widgets','_coll_media_index.widget.php',199],['inc/widgets/model','_widget.class.php',513],['inc/widgets/widgets','_colls_list_owner.widget.php',121],['inc/widgets/widgets','_user_tools.widget.php',252],['inc/widgets/widgets','_coll_common_links.widget.php',167],['inc/widgets/widgets','_msg_menu_link.widget.php',191],['inc/widgets/widgets','_user_avatars.widget.php',177],['inc/widgets/widgets','_coll_xml_feeds.widget.php',120],['inc/widgets/widgets','_coll_avatar.widget.php',92],['inc/widgets/widgets','_user_register.widget.php',156],['inc/widgets/widgets','_colls_list_public.widget.php',121],['inc/widgets/widgets','_coll_title.widget.php',100]], 129],
'blog_row_setting': ['blog_row_setting', 'Get an icon to show that blog setting is enabled or disabled Make a link to switch setting value if user has permissions to edit blog settings ', [['inc/collections/model','_blog.funcs.php',1879]], 1],
'on': ['on', '', [['rsc/js/bootstrap','typeahead.bundle.js',739]], 619],
'blog_row_actions': ['blog_row_actions', 'Get available actions for current blog ', [['inc/collections/model','_blog.funcs.php',1935]], 1],
'strmaxlen': ['strmaxlen', 'Crop string to maxlen with &hellip; (default tail) at the end if needed. ', [['inc/_core','_misc.funcs.php',451]], 17],
'get_total_rows': ['get_total_rows', 'Get the number of total rows in the result ', [['inc/_core/ui/results','_results.class.php',876]], 18],
'statuses': ['statuses', 'Template function: display all statuses and only one is visible by css class name ', [['inc/comments/model','_comment.class.php',3265]], 1],
'blogs_all_results_block': ['blogs_all_results_block', 'Display all blogs results table ', [['inc/collections/model','_blog.funcs.php',1340]], 1],
'invalidate_key': ['invalidate_key', 'Invalidate a special key ', [['inc/_core/model','_blockcache.class.php',69]], 14],
'url_crumb': ['url_crumb', 'Create a crumb param to be passed in action urls... ', [['inc/_core','_url.funcs.php',597]], 281],
'from': ['from', '', [['inc/_core/model/db','_sql.class.php',221]], 513],
'get_sql_where_aggregate_coll_ids': ['get_sql_where_aggregate_coll_ids', 'Get SQL expression to match the list of aggregates collection IDs. ', [['inc/collections/model','_blog.class.php',3075]], 7],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'get_working_blog': ['get_working_blog', 'Get working blog ', [['inc/collections/model','_blog.funcs.php',290]], 4],
'nt_': ['nt_', 'No Translation. Does nothing. ', [['conf','_locales.php',15]], 356],
'is_ajax_content': ['is_ajax_content', 'Check if current request is AJAX Used in order to get only content of the requested page ', [['inc/_core','_misc.funcs.php',6533]], 31],
'get_highest_publish_status': ['get_highest_publish_status', 'Get the highest public status and action button label of a new post or comment in the given blog what the current User may create. We assume here that the User should be able to create a post/comment with at least the lowest level status. ', [['inc/collections/model','_blog.funcs.php',768]], 10],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['inc/_core','_url.funcs.php',525]], 256],
'get_activate_info_url': ['get_activate_info_url', 'Get url to show user activate info screen ', [['inc/users/model','_user.funcs.php',286]], 21],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'get_inskin_statuses_options': ['get_inskin_statuses_options', 'Get post/comment inskin statuses option list ', [['inc/collections/model','_blog.funcs.php',925]], 2],
'blog_row_listed': ['blog_row_listed', 'Gat title of value for the blog field "blog_in_bloglist" ', [['inc/collections/model','_blog.funcs.php',1834]], 1],
'blog_row_locale': ['blog_row_locale', 'Get a blog locale with link to edit ', [['inc/collections/model','_blog.funcs.php',1716]], 1],
'init_requested_blog': ['init_requested_blog', 'Initialize global $blog variable to the requested blog ', [['inc/collections/model','_blog.funcs.php',539]], 2],
'from_add': ['from_add', 'Extends the FROM clause. ', [['inc/_core/model/db','_sql.class.php',226]], 200],
'clear': ['clear', 'Empty the message list ', [['inc/_ext/swift/classes/Swift/Plugins','MessageLogger.php',50],['inc/_ext/swift/classes/Swift/Plugins/Reporters','HitReporter.php',54],['inc/_core/model','_messages.class.php',102],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',43],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',27],['inc/_core/model/dataobjects','_dataobjectcache.class.php',437],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',47],['inc/_core/model','_log.class.php',84],['inc/_core/model','_log.class.php',587],['inc/users/model','_usercache.class.php',376],['inc/files/model','_filerootcache.class.php',172],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',57],['inc/links/model','_linkcache.class.php',517],['inc/chapters/model','_chaptercache.class.php',81]], 99],
'action_icon': ['action_icon', 'Generate requested action icon depending on perm ', [['inc/_core/model/dataobjects','_dataobject.class.php',1071],['inc/_core','_misc.funcs.php',3977]], 289],
'blog_row_type': ['blog_row_type', 'Get a blog type with link to edit ', [['inc/collections/model','_blog.funcs.php',1659]], 1],
'set_cache_enabled': ['set_cache_enabled', 'Enable/Disable the given cache ', [['inc/collections/model','_blog.funcs.php',439]], 6],
'strstr': ['strstr', '', [], 30],
'is_array': ['is_array', '', [], 311],
'create_function': ['create_function', '', [], 11],
'trim': ['trim', '', [], 398],
'preg_quote': ['preg_quote', '', [], 28],
'rawurlencode': ['rawurlencode', '', [], 137],
'str_replace': ['str_replace', '', [], 531],
'count': ['count', '', [], 928],
'array_key_exists': ['array_key_exists', '', [], 62],
'intval': ['intval', '', [], 221],
'defined': ['defined', '', [], 962],
'array_diff': ['array_diff', '', [], 31],
'array_merge': ['array_merge', '', [], 702],
'array_map': ['array_map', '', [], 41],
'explode': ['explode', '', [], 263],
'array_keys': ['array_keys', '', [], 94],
'strpos': ['strpos', '', [], 347],
'is_null': ['is_null', '', [], 299],
'implode': ['implode', '', [], 571],
'preg_match': ['preg_match', '', [], 423]};
CLASS_DATA={
'blockcache': ['blockcache', 'Block Cache. ', [['inc/_core/model','_blockcache.class.php',19]], 16],
'sql': ['sql', 'SQL class: help constructing queries ', [['inc/_core/model/db','_sql.class.php',17]], 334],
'results': ['results', 'Results class ', [['inc/_core/ui/results','_results.class.php',25]], 65],
'pagecache': ['pagecache', 'Page Cache. ', [['inc/_core/model','_pagecache.class.php',19]], 12]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912],
'OBJECT': ['OBJECT', '', [['inc/_core/model/db','_db.class.php',49]], 54]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
