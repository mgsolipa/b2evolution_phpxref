<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /inc/items/model/_itemlight.class.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Sat Nov 21 22:13:19 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='inc/items/model';
filename='_itemlight.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/inc/items/model/</a> -> <a href="_itemlight.class.php.html">_itemlight.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="_itemlight.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="_itemlight.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">/**</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment"> * This file implements the ItemLight class.</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment"> *</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment"> * This file is part of the evoCore framework - {@link http://evocore.net/}</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment"> * See also {@link https://github.com/b2evolution/b2evolution}.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment"> *</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment"> * @license GNU GPL v2 - {@link http://b2evolution.net/about/gnu-gpl-license}</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment"> *</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment"> * @copyright (c)2003-2015 by Francois Planque - {@link http://fplanque.com/}</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment"> * Parts of this file are copyright (c)2004-2006 by Daniel HAHLER - {@link http://thequod.de/contact}.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment"> *</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment"> * @package evocore</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment"> */</span>
<a name="l15"><span class="linenum">  15</span></a>  if( !<a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('EVO_MAIN_INIT')" href="../../../_constants/EVO_MAIN_INIT.html" onMouseOver="constPopup(event,'EVO_MAIN_INIT')">EVO_MAIN_INIT</a>') ) die( 'Please, do not access this page directly.' );
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <a class="function" onClick="logFunction('load_class')" href="../../../_functions/load_class.html" onMouseOver="funcPopup(event,'load_class')">load_class</a>( '_core/model/dataobjects/_dataobject.class.php', 'DataObject' );
<a name="l18"><span class="linenum">  18</span></a>  
<a name="l19"><span class="linenum">  19</span></a>  
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment">/**</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * ItemLight Class</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * Basically, all we want to achieve here is:</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * - permalinks</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * - last mod dates</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> *</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * This object SHOULD NOT be saved.</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> *</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @package evocore</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> */</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('ItemLight')" href="../../../_classes/itemlight.html" onMouseOver="classPopup(event,'itemlight')">ItemLight</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('DataObject')" href="../../../_classes/dataobject.html" onMouseOver="classPopup(event,'dataobject')">DataObject</a>
<a name="l32"><span class="linenum">  32</span></a>  {
<a name="l33"><span class="linenum">  33</span></a>      <span class="comment">/**</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">     * Publish date (&quot;Y-m-d H:i:s&quot;). This may be in the future.</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">     * This should get compared to {@link $localtimenow}.</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * @var string</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     */</span>
<a name="l38"><span class="linenum">  38</span></a>      var <a class="var it398" onMouseOver="hilite(398)" onMouseOut="lolite()" onClick="logVariable('issue_date')" href="../../../_variables/issue_date.html">$issue_date</a>;
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>      <span class="comment">/**</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * Last modification date (timestamp)</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * This should get compared to {@link $localtimenow}.</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * @var integer</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     */</span>
<a name="l45"><span class="linenum">  45</span></a>      var <a class="var it1736" onMouseOver="hilite(1736)" onMouseOut="lolite()" onClick="logVariable('datemodified')" href="../../../_variables/datemodified.html">$datemodified</a>;
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      var <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>      var <a class="var it1463" onMouseOver="hilite(1463)" onMouseOut="lolite()" onClick="logVariable('excerpt')" href="../../../_variables/excerpt.html">$excerpt</a>;
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>      var <a class="var it525" onMouseOver="hilite(525)" onMouseOut="lolite()" onClick="logVariable('urltitle')" href="../../../_variables/urltitle.html">$urltitle</a>;
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>      var <a class="var it1722" onMouseOver="hilite(1722)" onMouseOut="lolite()" onClick="logVariable('canonical_slug_ID')" href="../../../_variables/canonical_slug_ID.html">$canonical_slug_ID</a>;
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>      var <a class="var it1720" onMouseOver="hilite(1720)" onMouseOut="lolite()" onClick="logVariable('tiny_slug_ID')" href="../../../_variables/tiny_slug_ID.html">$tiny_slug_ID</a>;
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>      <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * External URL the item links to (if any).</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * @var string</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     */</span>
<a name="l61"><span class="linenum">  61</span></a>      var <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>      var <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('ityp_ID')" href="../../../_variables/ityp_ID.html">$ityp_ID</a>;
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      <span class="comment">/**</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * ID of the main category.</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * Use {@link ItemLight::set()} to set it, since other vars get lazily derived from it.</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * @var integer</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     */</span>
<a name="l70"><span class="linenum">  70</span></a>      var <a class="var it361" onMouseOver="hilite(361)" onMouseOut="lolite()" onClick="logVariable('main_cat_ID')" href="../../../_variables/main_cat_ID.html">$main_cat_ID</a> = 0;
<a name="l71"><span class="linenum">  71</span></a>      <span class="comment">/**</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     * @var Chapter</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * @access protected</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * @see ItemLight::get_main_Chapter()</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     */</span>
<a name="l76"><span class="linenum">  76</span></a>      var <a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a>;
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>      <span class="comment">/**</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     * Derived from $main_cat_ID.</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     *</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">     * @var integer</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     * @access protected</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     * @see ItemLight::get_blog_ID()</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     */</span>
<a name="l85"><span class="linenum">  85</span></a>      var <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>;
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>      <span class="comment">/**</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     * The Blog of the Item (lazy filled, use {@link get_Blog()} to access it.</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     * @access protected</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">     * @var Blog</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">     */</span>
<a name="l92"><span class="linenum">  92</span></a>      var <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      <span class="comment">/**</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     * Array of tags (strings)</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">     *</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">     * Lazy loaded.</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     * @see ItemLight::get_tags()</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">     * @access protected</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">     * @var array</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     */</span>
<a name="l102"><span class="linenum"> 102</span></a>      var <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> = NULL;
<a name="l103"><span class="linenum"> 103</span></a>  
<a name="l104"><span class="linenum"> 104</span></a>      <span class="comment">/**</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     * Array of dbchanges flag to be able to check modifications, and execute update queries only when required</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">     * Note: Only those updates needs to be tracked in this var which are saved in a relational table ( e.g. tags, extracats )</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * @access protected</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * @var array</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     */</span>
<a name="l110"><span class="linenum"> 110</span></a>      var <a class="var it1566" onMouseOver="hilite(1566)" onMouseOut="lolite()" onClick="logVariable('dbchanges_flags')" href="../../../_variables/dbchanges_flags.html">$dbchanges_flags</a> = array();
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>      <span class="comment">/**</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     * Constructor</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     *</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * @param object table Database row</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     * @param string</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     * @param string</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * @param string</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     * @param string for derived classes</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * @param string datetime field name</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * @param string datetime field name</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * @param string User ID field name</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * @param string User ID field name</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     */</span>
<a name="l126"><span class="linenum"> 126</span></a>  	function <a class="function" onClick="logFunction('ItemLight')" href="../../../_functions/itemlight.html" onMouseOver="funcPopup(event,'itemlight')">ItemLight</a>( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a> = NULL, <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('dbtable')" href="../../../_variables/dbtable.html">$dbtable</a> = 'T_items__item', <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a> = 'post_', <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../_variables/dbIDname.html">$dbIDname</a> = 'post_ID', <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('objtype')" href="../../../_variables/objtype.html">$objtype</a> = 'ItemLight',
<a name="l127"><span class="linenum"> 127</span></a>                     <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('datecreated_field')" href="../../../_variables/datecreated_field.html">$datecreated_field</a> = '', <a class="var it1475" onMouseOver="hilite(1475)" onMouseOut="lolite()" onClick="logVariable('datemodified_field')" href="../../../_variables/datemodified_field.html">$datemodified_field</a> = 'datemodified',
<a name="l128"><span class="linenum"> 128</span></a>                     <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('creator_field')" href="../../../_variables/creator_field.html">$creator_field</a> = '', <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('lasteditor_field')" href="../../../_variables/lasteditor_field.html">$lasteditor_field</a> = '' )
<a name="l129"><span class="linenum"> 129</span></a>      {
<a name="l130"><span class="linenum"> 130</span></a>          global <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('default_locale')" href="../../../_variables/default_locale.html">$default_locale</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">        // Call parent constructor:</span>
<a name="l133"><span class="linenum"> 133</span></a>          parent::<a class="function" onClick="logFunction('DataObject')" href="../../../_functions/dataobject.html" onMouseOver="funcPopup(event,'dataobject')">DataObject</a>( <a class="var it1470" onMouseOver="hilite(1470)" onMouseOut="lolite()" onClick="logVariable('dbtable')" href="../../../_variables/dbtable.html">$dbtable</a>, <a class="var it1471" onMouseOver="hilite(1471)" onMouseOut="lolite()" onClick="logVariable('dbprefix')" href="../../../_variables/dbprefix.html">$dbprefix</a>, <a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../_variables/dbIDname.html">$dbIDname</a>, <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('datecreated_field')" href="../../../_variables/datecreated_field.html">$datecreated_field</a>, <a class="var it1475" onMouseOver="hilite(1475)" onMouseOut="lolite()" onClick="logVariable('datemodified_field')" href="../../../_variables/datemodified_field.html">$datemodified_field</a>,
<a name="l134"><span class="linenum"> 134</span></a>                                                  <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('creator_field')" href="../../../_variables/creator_field.html">$creator_field</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('lasteditor_field')" href="../../../_variables/lasteditor_field.html">$lasteditor_field</a> );
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('objtype')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/objtype.html">objtype</a> = <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('objtype')" href="../../../_variables/objtype.html">$objtype</a>;
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>          if( <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a> == NULL )
<a name="l139"><span class="linenum"> 139</span></a>          { // <span class="keyword">New </span><a class="class" onClick="logClass('item')" href="../../../_classes/item.html" onMouseOver="classPopup(event,'item')">item</a>:
<a name="l140"><span class="linenum"> 140</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> = 0;
<a name="l141"><span class="linenum"> 141</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'issue_date', <a class="phpfunction" onClick="logFunction('date')" href="../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y-m-d H:i:s', <a class="var it317" onMouseOver="hilite(317)" onMouseOut="lolite()" onClick="logVariable('localtimenow')" href="../../../_variables/localtimenow.html">$localtimenow</a>) );
<a name="l142"><span class="linenum"> 142</span></a>          }
<a name="l143"><span class="linenum"> 143</span></a>          else
<a name="l144"><span class="linenum"> 144</span></a>          {
<a name="l145"><span class="linenum"> 145</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a class="var it1472" onMouseOver="hilite(1472)" onMouseOut="lolite()" onClick="logVariable('dbIDname')" href="../../../_variables/dbIDname.html">$dbIDname</a>;
<a name="l146"><span class="linenum"> 146</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_datestart')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_datestart.html">post_datestart</a>;            <span class="comment">// Publication date of a post/item</span>
<a name="l147"><span class="linenum"> 147</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datestart')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datestart.html">datestart</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_datestart')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_datestart.html">post_datestart</a>;            <span class="comment">// This is the same as issue_date, but unfortunatly both of them are used, One of them should be removed</span>
<a name="l148"><span class="linenum"> 148</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datemodified.html">datemodified</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_datemodified')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_datemodified.html">post_datemodified</a>;            <span class="comment">// Date of last edit of post/item</span>
<a name="l149"><span class="linenum"> 149</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_main_cat_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_main_cat_ID.html">post_main_cat_ID</a>;
<a name="l150"><span class="linenum"> 150</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('urltitle')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/urltitle.html">urltitle</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_urltitle')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_urltitle.html">post_urltitle</a>;
<a name="l151"><span class="linenum"> 151</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('canonical_slug_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/canonical_slug_ID.html">canonical_slug_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_canonical_slug_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_canonical_slug_ID.html">post_canonical_slug_ID</a>;
<a name="l152"><span class="linenum"> 152</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tiny_slug_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tiny_slug_ID.html">tiny_slug_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_tiny_slug_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_tiny_slug_ID.html">post_tiny_slug_ID</a>;
<a name="l153"><span class="linenum"> 153</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_title')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_title.html">post_title</a>;
<a name="l154"><span class="linenum"> 154</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt.html">excerpt</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_excerpt')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_excerpt.html">post_excerpt</a>;
<a name="l155"><span class="linenum"> 155</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_ityp_ID')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_ityp_ID.html">post_ityp_ID</a>;
<a name="l156"><span class="linenum"> 156</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('db_row')" href="../../../_variables/db_row.html">$db_row</a>-&gt;<a onClick="logVariable('post_url')" class="var it10674" onMouseOver="hilite(10674)" onMouseOut="lolite()" href="../../../_variables/post_url.html">post_url</a>;
<a name="l157"><span class="linenum"> 157</span></a>          }
<a name="l158"><span class="linenum"> 158</span></a>      }
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>      <span class="comment">/**</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">     * Get delete restriction settings</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     *</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * @return array</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     */</span>
<a name="l166"><span class="linenum"> 166</span></a>  	static function <a class="function" onClick="logFunction('get_delete_restrictions')" href="../../../_functions/get_delete_restrictions.html" onMouseOver="funcPopup(event,'get_delete_restrictions')">get_delete_restrictions</a>()
<a name="l167"><span class="linenum"> 167</span></a>      {
<a name="l168"><span class="linenum"> 168</span></a>          return array(
<a name="l169"><span class="linenum"> 169</span></a>                  array( 'table'=&gt;'T_items__item', 'fk'=&gt;'post_parent_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d links to child items'),
<a name="l170"><span class="linenum"> 170</span></a>                      'class'=&gt;'Item', 'class_path'=&gt;'items/model/_item.class.php' ),
<a name="l171"><span class="linenum"> 171</span></a>              );
<a name="l172"><span class="linenum"> 172</span></a>      }
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>      <span class="comment">/**</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">     * Get delete cascade settings</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     *</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     * @return array</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     */</span>
<a name="l180"><span class="linenum"> 180</span></a>  	static function <a class="function" onClick="logFunction('get_delete_cascades')" href="../../../_functions/get_delete_cascades.html" onMouseOver="funcPopup(event,'get_delete_cascades')">get_delete_cascades</a>()
<a name="l181"><span class="linenum"> 181</span></a>      {
<a name="l182"><span class="linenum"> 182</span></a>          return array(
<a name="l183"><span class="linenum"> 183</span></a>                  array( 'table'=&gt;'T_links', 'fk'=&gt;'link_itm_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d links to destination items'),
<a name="l184"><span class="linenum"> 184</span></a>                          'class'=&gt;'Link', 'class_path'=&gt;'links/model/_link.class.php' ),
<a name="l185"><span class="linenum"> 185</span></a>                  array( 'table'=&gt;'T_postcats', 'fk'=&gt;'postcat_post_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d links to extra categories') ),
<a name="l186"><span class="linenum"> 186</span></a>                  array( 'table'=&gt;'T_comments', 'fk'=&gt;'comment_item_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d comments'),
<a name="l187"><span class="linenum"> 187</span></a>                          'class'=&gt;'Comment', 'class_path'=&gt;'comments/model/_comment.class.php' ),
<a name="l188"><span class="linenum"> 188</span></a>                  array( 'table'=&gt;'T_items__version', 'fk'=&gt;'iver_itm_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d versions') ),
<a name="l189"><span class="linenum"> 189</span></a>                  array( 'table'=&gt;'T_slug', 'fk'=&gt;'slug_itm_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d slugs') ),
<a name="l190"><span class="linenum"> 190</span></a>                  array( 'table'=&gt;'T_items__itemtag', 'fk'=&gt;'itag_itm_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d links to tags') ),
<a name="l191"><span class="linenum"> 191</span></a>                  array( 'table'=&gt;'T_items__item_settings', 'fk'=&gt;'iset_item_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d items settings') ),
<a name="l192"><span class="linenum"> 192</span></a>                  array( 'table'=&gt;'T_items__subscriptions', 'fk'=&gt;'isub_item_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d items subscriptions') ),
<a name="l193"><span class="linenum"> 193</span></a>                  array( 'table'=&gt;'T_items__prerendering', 'fk'=&gt;'itpr_itm_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d prerendered content') ),
<a name="l194"><span class="linenum"> 194</span></a>                  array( 'table'=&gt;'T_users__postreadstatus', 'fk'=&gt;'uprs_post_ID', 'msg'=&gt;<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('%d recordings of a post having been read') ),
<a name="l195"><span class="linenum"> 195</span></a>              );
<a name="l196"><span class="linenum"> 196</span></a>      }
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>      <span class="comment">/**</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     * Get this class db table config params</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     *</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">     * @return array</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     */</span>
<a name="l204"><span class="linenum"> 204</span></a>  	static function <a class="function" onClick="logFunction('get_class_db_config')" href="../../../_functions/get_class_db_config.html" onMouseOver="funcPopup(event,'get_class_db_config')">get_class_db_config</a>()
<a name="l205"><span class="linenum"> 205</span></a>      {
<a name="l206"><span class="linenum"> 206</span></a>          return array(
<a name="l207"><span class="linenum"> 207</span></a>              'dbtablename'        =&gt; 'T_items__item',
<a name="l208"><span class="linenum"> 208</span></a>              'dbprefix'           =&gt; 'post_',
<a name="l209"><span class="linenum"> 209</span></a>              'dbIDname'           =&gt; 'post_ID',
<a name="l210"><span class="linenum"> 210</span></a>              'datecreated_field'  =&gt; '',
<a name="l211"><span class="linenum"> 211</span></a>              'datemodified_field' =&gt; 'datemodified',
<a name="l212"><span class="linenum"> 212</span></a>              'creator_field'      =&gt; '',
<a name="l213"><span class="linenum"> 213</span></a>              'lasteditor_field'   =&gt; '',
<a name="l214"><span class="linenum"> 214</span></a>          );
<a name="l215"><span class="linenum"> 215</span></a>      }
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>      <span class="comment">/**</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * Is this a Special post (Page, Intros, Sidebar, Advertisement)</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     *</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     * @return boolean</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     */</span>
<a name="l223"><span class="linenum"> 223</span></a>  	function <a class="function" onClick="logFunction('is_special')" href="../../../_functions/is_special.html" onMouseOver="funcPopup(event,'is_special')">is_special</a>()
<a name="l224"><span class="linenum"> 224</span></a>      {
<a name="l225"><span class="linenum"> 225</span></a>          global <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('posttypes_specialtypes')" href="../../../_variables/posttypes_specialtypes.html">$posttypes_specialtypes</a>;
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">        // Check if this post type is between the special post types</span>
<a name="l228"><span class="linenum"> 228</span></a>          return <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>, <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('posttypes_specialtypes')" href="../../../_variables/posttypes_specialtypes.html">$posttypes_specialtypes</a> );
<a name="l229"><span class="linenum"> 229</span></a>      }
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>      <span class="comment">/**</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">     * Is this an Intro post</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">     *</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">     * @return boolean</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     */</span>
<a name="l237"><span class="linenum"> 237</span></a>  	function <a class="function" onClick="logFunction('is_intro')" href="../../../_functions/is_intro.html" onMouseOver="funcPopup(event,'is_intro')">is_intro</a>()
<a name="l238"><span class="linenum"> 238</span></a>      {
<a name="l239"><span class="linenum"> 239</span></a>          return <a class="class" onClick="logClass('ItemType')" href="../../../_classes/itemtype.html" onMouseOver="classPopup(event,'itemtype')">ItemType</a>::<a class="function" onClick="logFunction('is_intro')" href="../../../_functions/is_intro.html" onMouseOver="funcPopup(event,'is_intro')">is_intro</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a> );
<a name="l240"><span class="linenum"> 240</span></a>      }
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>      <span class="comment">/**</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     * Is this a featured post (any intro post will return false even if it's checked as &quot;featured&quot;)</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     *</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     * @return boolean</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">     */</span>
<a name="l248"><span class="linenum"> 248</span></a>  	function <a class="function" onClick="logFunction('is_featured')" href="../../../_functions/is_featured.html" onMouseOver="funcPopup(event,'is_featured')">is_featured</a>()
<a name="l249"><span class="linenum"> 249</span></a>      {
<a name="l250"><span class="linenum"> 250</span></a>          return !( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('featured')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/featured.html">featured</a>) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_intro')" href="../../../_functions/is_intro.html" onMouseOver="funcPopup(event,'is_intro')">is_intro</a>() );
<a name="l251"><span class="linenum"> 251</span></a>      }
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>    <span class="comment">/**</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     * Generate a single post link for the item</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     *</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     * @param boolean allow redir to permalink, true | false | 'auto' to prevent redit only if single isn't the current permalink type</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">      * @param string base url to use</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     */</span>
<a name="l261"><span class="linenum"> 261</span></a>  	function <a class="function" onClick="logFunction('get_single_url')" href="../../../_functions/get_single_url.html" onMouseOver="funcPopup(event,'get_single_url')">get_single_url</a>( <a class="var it9972" onMouseOver="hilite(9972)" onMouseOut="lolite()" onClick="logVariable('allow_redir')" href="../../../_variables/allow_redir.html">$allow_redir</a> = true, <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;' )
<a name="l262"><span class="linenum"> 262</span></a>      {
<a name="l263"><span class="linenum"> 263</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>          if( empty( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> ) )
<a name="l266"><span class="linenum"> 266</span></a>          {
<a name="l267"><span class="linenum"> 267</span></a>              <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l268"><span class="linenum"> 268</span></a>          }
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it9973" onMouseOver="hilite(9973)" onMouseOut="lolite()" onClick="logVariable('single_links')" href="../../../_variables/single_links.html">$single_links</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>('single_links');
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>           if( !empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('urltitle')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/urltitle.html">urltitle</a> ) &amp;&amp; <a class="var it9973" onMouseOver="hilite(9973)" onMouseOut="lolite()" onClick="logVariable('single_links')" href="../../../_variables/single_links.html">$single_links</a> != 'param_num' )
<a name="l273"><span class="linenum"> 273</span></a>          {    // We can and we want to use the url title:
<a name="l274"><span class="linenum"> 274</span></a>              <a class="var it9974" onMouseOver="hilite(9974)" onMouseOut="lolite()" onClick="logVariable('urlparam')" href="../../../_variables/urlparam.html">$urlparam</a> = 'title='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('urltitle')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/urltitle.html">urltitle</a>;
<a name="l275"><span class="linenum"> 275</span></a>              <a class="var it9975" onMouseOver="hilite(9975)" onMouseOut="lolite()" onClick="logVariable('urltail')" href="../../../_variables/urltail.html">$urltail</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('urltitle')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/urltitle.html">urltitle</a>;
<a name="l276"><span class="linenum"> 276</span></a>          }
<a name="l277"><span class="linenum"> 277</span></a>          else
<a name="l278"><span class="linenum"> 278</span></a>          {
<a name="l279"><span class="linenum"> 279</span></a>              <a class="var it9974" onMouseOver="hilite(9974)" onMouseOut="lolite()" onClick="logVariable('urlparam')" href="../../../_variables/urlparam.html">$urlparam</a> = 'p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l280"><span class="linenum"> 280</span></a>              <a class="var it9975" onMouseOver="hilite(9975)" onMouseOut="lolite()" onClick="logVariable('urltail')" href="../../../_variables/urltail.html">$urltail</a> = 'p'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l281"><span class="linenum"> 281</span></a>          }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>          switch( <a class="var it9973" onMouseOver="hilite(9973)" onMouseOut="lolite()" onClick="logVariable('single_links')" href="../../../_variables/single_links.html">$single_links</a> )
<a name="l284"><span class="linenum"> 284</span></a>          {
<a name="l285"><span class="linenum"> 285</span></a>              case 'param_num':
<a name="l286"><span class="linenum"> 286</span></a>              case 'param_title':
<a name="l287"><span class="linenum"> 287</span></a>                  <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, <a class="var it9974" onMouseOver="hilite(9974)" onMouseOut="lolite()" onClick="logVariable('urlparam')" href="../../../_variables/urlparam.html">$urlparam</a>.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'more=1'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'c=1'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'tb=1'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'pb=1', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l288"><span class="linenum"> 288</span></a>                  break;
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>              case 'y':
<a name="l291"><span class="linenum"> 291</span></a>                  <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_tail')" href="../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>('/Y/', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a>).<a class="var it9975" onMouseOver="hilite(9975)" onMouseOut="lolite()" onClick="logVariable('urltail')" href="../../../_variables/urltail.html">$urltail</a> );
<a name="l292"><span class="linenum"> 292</span></a>                  break;
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>              case 'ym':
<a name="l295"><span class="linenum"> 295</span></a>                  <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_tail')" href="../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>('/Y/m/', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a>).<a class="var it9975" onMouseOver="hilite(9975)" onMouseOut="lolite()" onClick="logVariable('urltail')" href="../../../_variables/urltail.html">$urltail</a> );
<a name="l296"><span class="linenum"> 296</span></a>                  break;
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>              case 'ymd':
<a name="l299"><span class="linenum"> 299</span></a>                  <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_tail')" href="../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>('/Y/m/d/', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a>).<a class="var it9975" onMouseOver="hilite(9975)" onMouseOut="lolite()" onClick="logVariable('urltail')" href="../../../_variables/urltail.html">$urltail</a> );
<a name="l300"><span class="linenum"> 300</span></a>                  break;
<a name="l301"><span class="linenum"> 301</span></a>  
<a name="l302"><span class="linenum"> 302</span></a>              case 'subchap':
<a name="l303"><span class="linenum"> 303</span></a>                  <a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_main_Chapter();
<a name="l304"><span class="linenum"> 304</span></a>                  <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_tail')" href="../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, '/'.<a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a>-&gt;<a onClick="logVariable('urlname')" class="var it10712" onMouseOver="hilite(10712)" onMouseOut="lolite()" href="../../../_variables/urlname.html">urlname</a>.'/'.<a class="var it9975" onMouseOver="hilite(9975)" onMouseOut="lolite()" onClick="logVariable('urltail')" href="../../../_variables/urltail.html">$urltail</a> );
<a name="l305"><span class="linenum"> 305</span></a>                  break;
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>              case 'chapters':
<a name="l308"><span class="linenum"> 308</span></a>                  <a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_main_Chapter();
<a name="l309"><span class="linenum"> 309</span></a>                  <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_tail')" href="../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, '/'.<a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a>-&gt;<a class="function" onClick="logFunction('get_url_path')" href="../../../_functions/get_url_path.html" onMouseOver="funcPopup(event,'get_url_path')">get_url_path</a>().<a class="var it9975" onMouseOver="hilite(9975)" onMouseOut="lolite()" onClick="logVariable('urltail')" href="../../../_variables/urltail.html">$urltail</a> );
<a name="l310"><span class="linenum"> 310</span></a>                  break;
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>              case 'short':
<a name="l313"><span class="linenum"> 313</span></a>              default:
<a name="l314"><span class="linenum"> 314</span></a>                  <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_tail')" href="../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, '/'.<a class="var it9975" onMouseOver="hilite(9975)" onMouseOut="lolite()" onClick="logVariable('urltail')" href="../../../_variables/urltail.html">$urltail</a> );
<a name="l315"><span class="linenum"> 315</span></a>                  break;
<a name="l316"><span class="linenum"> 316</span></a>          }
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>          if( <a class="var it9972" onMouseOver="hilite(9972)" onMouseOut="lolite()" onClick="logVariable('allow_redir')" href="../../../_variables/allow_redir.html">$allow_redir</a> == 'auto' )
<a name="l319"><span class="linenum"> 319</span></a>          {    // We allow redir only if the permalink is already single.
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">            // In other words: we implicitely allow redir if there is no need to redir!</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">            // and more useful: we explicitly prevent redir if we know it would take place.</span>
<a name="l322"><span class="linenum"> 322</span></a>              <a class="var it9972" onMouseOver="hilite(9972)" onMouseOut="lolite()" onClick="logVariable('allow_redir')" href="../../../_variables/allow_redir.html">$allow_redir</a> = (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'permalinks' ) == 'single');
<a name="l323"><span class="linenum"> 323</span></a>          }
<a name="l324"><span class="linenum"> 324</span></a>  
<a name="l325"><span class="linenum"> 325</span></a>          if( ! <a class="var it9972" onMouseOver="hilite(9972)" onMouseOut="lolite()" onClick="logVariable('allow_redir')" href="../../../_variables/allow_redir.html">$allow_redir</a> )
<a name="l326"><span class="linenum"> 326</span></a>          {
<a name="l327"><span class="linenum"> 327</span></a>              <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a>, 'redir=no', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l328"><span class="linenum"> 328</span></a>          }
<a name="l329"><span class="linenum"> 329</span></a>  
<a name="l330"><span class="linenum"> 330</span></a>          return <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a>;
<a name="l331"><span class="linenum"> 331</span></a>      }
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>      <span class="comment">/**</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     * Generate a link to the post in the archives</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     *</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">      * @param string base url to use</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     */</span>
<a name="l340"><span class="linenum"> 340</span></a>  	function <a class="function" onClick="logFunction('get_archive_url')" href="../../../_functions/get_archive_url.html" onMouseOver="funcPopup(event,'get_archive_url')">get_archive_url</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;' )
<a name="l341"><span class="linenum"> 341</span></a>      {
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>          if( empty( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> ) )
<a name="l345"><span class="linenum"> 345</span></a>          {
<a name="l346"><span class="linenum"> 346</span></a>              <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l347"><span class="linenum"> 347</span></a>          }
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>          <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_archive_url')" href="../../../_functions/get_archive_url.html" onMouseOver="funcPopup(event,'get_archive_url')">get_archive_url</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l350"><span class="linenum"> 350</span></a>  
<a name="l351"><span class="linenum"> 351</span></a>          return <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a>.'#item_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l352"><span class="linenum"> 352</span></a>      }
<a name="l353"><span class="linenum"> 353</span></a>  
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>      <span class="comment">/**</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     * Generate a link to the post in the category</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     *</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">      * @param string base url to use</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     */</span>
<a name="l361"><span class="linenum"> 361</span></a>  	function <a class="function" onClick="logFunction('get_chapter_url')" href="../../../_functions/get_chapter_url.html" onMouseOver="funcPopup(event,'get_chapter_url')">get_chapter_url</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = '', <span class="comment">/* TODO: not used.. */</span> <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;' )
<a name="l362"><span class="linenum"> 362</span></a>      {
<a name="l363"><span class="linenum"> 363</span></a>          if( empty( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> ) )
<a name="l364"><span class="linenum"> 364</span></a>          {
<a name="l365"><span class="linenum"> 365</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l366"><span class="linenum"> 366</span></a>              <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l367"><span class="linenum"> 367</span></a>          }
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_main_Chapter();
<a name="l370"><span class="linenum"> 370</span></a>          <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a> = <a class="function" onClick="logFunction('url_add_tail')" href="../../../_functions/url_add_tail.html" onMouseOver="funcPopup(event,'url_add_tail')">url_add_tail</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, '/'.<a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a>-&gt;<a class="function" onClick="logFunction('get_url_path')" href="../../../_functions/get_url_path.html" onMouseOver="funcPopup(event,'get_url_path')">get_url_path</a>() );
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>          return <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('permalink')" href="../../../_variables/permalink.html">$permalink</a>.'#item_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l373"><span class="linenum"> 373</span></a>      }
<a name="l374"><span class="linenum"> 374</span></a>  
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>      <span class="comment">/**</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     * Generate the permalink for the item.</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     *</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * Note: Each item has an unique permalink at any given time.</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * Some admin settings may however change the permalinks for previous items.</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * Note: This actually only returns the URL, to get a real link, use {@link Item::get_permanent_link()}</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     *</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * @todo archives modes in clean URL mode</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     *</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     * @param string single, archive, subchap</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">     * @param string base url to use</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">     * @param string glue between url params</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">     */</span>
<a name="l389"><span class="linenum"> 389</span></a>  	function <a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> = '', <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = '', <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;' )
<a name="l390"><span class="linenum"> 390</span></a>      {
<a name="l391"><span class="linenum"> 391</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it6927" onMouseOver="hilite(6927)" onMouseOut="lolite()" onClick="logVariable('cacheweekly')" href="../../../_variables/cacheweekly.html">$cacheweekly</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('Settings')" href="../../../_variables/Settings.html">$Settings</a>, <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('posttypes_specialtypes')" href="../../../_variables/posttypes_specialtypes.html">$posttypes_specialtypes</a>, <a class="var it1684" onMouseOver="hilite(1684)" onMouseOut="lolite()" onClick="logVariable('posttypes_nopermanentURL')" href="../../../_variables/posttypes_nopermanentURL.html">$posttypes_nopermanentURL</a>, <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('posttypes_catpermanentURL')" href="../../../_variables/posttypes_catpermanentURL.html">$posttypes_catpermanentURL</a>;
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l394"><span class="linenum"> 394</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'front_disp' ) == 'page' &amp;&amp;
<a name="l395"><span class="linenum"> 395</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'front_post_ID' ) == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> )
<a name="l396"><span class="linenum"> 396</span></a>          { // This item is used as front specific page on the blog's home
<a name="l397"><span class="linenum"> 397</span></a>              <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> = 'none';
<a name="l398"><span class="linenum"> 398</span></a>          }
<a name="l399"><span class="linenum"> 399</span></a>          elseif( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>, <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('posttypes_specialtypes')" href="../../../_variables/posttypes_specialtypes.html">$posttypes_specialtypes</a> ) ) // page, intros, sidebar
<a name="l400"><span class="linenum"> 400</span></a>          {    // This is not an &quot;in stream&quot; post:
<a name="l401"><span class="linenum"> 401</span></a>              if( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>, <a class="var it1684" onMouseOver="hilite(1684)" onMouseOut="lolite()" onClick="logVariable('posttypes_nopermanentURL')" href="../../../_variables/posttypes_nopermanentURL.html">$posttypes_nopermanentURL</a> ) )
<a name="l402"><span class="linenum"> 402</span></a>              {    // This type of post is not allowed to have a permalink:
<a name="l403"><span class="linenum"> 403</span></a>                  <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> = 'none';
<a name="l404"><span class="linenum"> 404</span></a>              }
<a name="l405"><span class="linenum"> 405</span></a>              elseif( <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>, <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('posttypes_catpermanentURL')" href="../../../_variables/posttypes_catpermanentURL.html">$posttypes_catpermanentURL</a> ) )
<a name="l406"><span class="linenum"> 406</span></a>              {    // This post has a permanent URL as url to main chapter:
<a name="l407"><span class="linenum"> 407</span></a>                  <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> = 'cat';
<a name="l408"><span class="linenum"> 408</span></a>              }
<a name="l409"><span class="linenum"> 409</span></a>              else
<a name="l410"><span class="linenum"> 410</span></a>              { // allowed to have a permalink:
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">                // force use of single url:</span>
<a name="l412"><span class="linenum"> 412</span></a>                  <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> = 'single';
<a name="l413"><span class="linenum"> 413</span></a>              }
<a name="l414"><span class="linenum"> 414</span></a>          }
<a name="l415"><span class="linenum"> 415</span></a>          elseif( empty( <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> ) )
<a name="l416"><span class="linenum"> 416</span></a>          {    // Normal &quot;in stream&quot; post:
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">            // Use default from collection settings (may be an &quot;in stream&quot; URL):</span>
<a name="l418"><span class="linenum"> 418</span></a>              <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'permalinks' );
<a name="l419"><span class="linenum"> 419</span></a>          }
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>          switch( <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> )
<a name="l422"><span class="linenum"> 422</span></a>          {
<a name="l423"><span class="linenum"> 423</span></a>              case 'archive':
<a name="l424"><span class="linenum"> 424</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_archive_url')" href="../../../_functions/get_archive_url.html" onMouseOver="funcPopup(event,'get_archive_url')">get_archive_url</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>              case 'subchap':
<a name="l427"><span class="linenum"> 427</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_chapter_url')" href="../../../_functions/get_chapter_url.html" onMouseOver="funcPopup(event,'get_chapter_url')">get_chapter_url</a>( <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>              case 'none':
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">                // This is a silent fallback when we try to permalink to an Item that cannot be addressed directly:</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">                // Link to blog home:</span>
<a name="l432"><span class="linenum"> 432</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>              case 'cat':
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">                // Link to permanent url of main chapter:</span>
<a name="l436"><span class="linenum"> 436</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_main_Chapter();
<a name="l437"><span class="linenum"> 437</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( NULL, <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, 1, NULL, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l438"><span class="linenum"> 438</span></a>  
<a name="l439"><span class="linenum"> 439</span></a>              case 'single':
<a name="l440"><span class="linenum"> 440</span></a>              default:
<a name="l441"><span class="linenum"> 441</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_single_url')" href="../../../_functions/get_single_url.html" onMouseOver="funcPopup(event,'get_single_url')">get_single_url</a>( true, <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l442"><span class="linenum"> 442</span></a>          }
<a name="l443"><span class="linenum"> 443</span></a>      }
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>      <span class="comment">/**</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     * Template function: list all the category names</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     *</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     * @param string Output format for each cat, see {@link format_to_output()}</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     */</span>
<a name="l451"><span class="linenum"> 451</span></a>  	function <a class="function" onClick="logFunction('categories')" href="../../../_functions/categories.html" onMouseOver="funcPopup(event,'categories')">categories</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l452"><span class="linenum"> 452</span></a>      {
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l455"><span class="linenum"> 455</span></a>                  'before'          =&gt; ' ',
<a name="l456"><span class="linenum"> 456</span></a>                  'after'           =&gt; ' ',
<a name="l457"><span class="linenum"> 457</span></a>                  'include_main'    =&gt; true,
<a name="l458"><span class="linenum"> 458</span></a>                  'include_other'   =&gt; true,
<a name="l459"><span class="linenum"> 459</span></a>                  'include_external'=&gt; true,
<a name="l460"><span class="linenum"> 460</span></a>                  'before_main'     =&gt; '',       // string fo display before the MAIN category,
<a name="l461"><span class="linenum"> 461</span></a>                  'after_main'      =&gt; '',       // string fo display after the MAIN category
<a name="l462"><span class="linenum"> 462</span></a>                  'before_other'    =&gt; '',       // string fo display before OTHER categories
<a name="l463"><span class="linenum"> 463</span></a>                  'after_other'     =&gt; '',       // string fo display after OTHER categories
<a name="l464"><span class="linenum"> 464</span></a>                  'before_external' =&gt; '&lt;em&gt;',   // string fo display before EXTERNAL categories
<a name="l465"><span class="linenum"> 465</span></a>                  'after_external'  =&gt; '&lt;/em&gt;',  // string fo display after EXTERNAL categories,
<a name="l466"><span class="linenum"> 466</span></a>                  'separator'       =&gt; ', ',
<a name="l467"><span class="linenum"> 467</span></a>                  'link_categories' =&gt; true,
<a name="l468"><span class="linenum"> 468</span></a>                  'link_title'      =&gt; '#',
<a name="l469"><span class="linenum"> 469</span></a>                  'format'          =&gt; 'htmlbody',
<a name="l470"><span class="linenum"> 470</span></a>                  'show_locked'     =&gt; false,
<a name="l471"><span class="linenum"> 471</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] == '#' )
<a name="l475"><span class="linenum"> 475</span></a>          { <span class="comment">/* TRANS: When the categories for a specific post are displayed, the user can click</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">                    on these cats to browse them, this is the default href title displayed there */</span>
<a name="l477"><span class="linenum"> 477</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title'] = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Browse category');
<a name="l478"><span class="linenum"> 478</span></a>          }
<a name="l479"><span class="linenum"> 479</span></a>  
<a name="l480"><span class="linenum"> 480</span></a>          <a class="var it9976" onMouseOver="hilite(9976)" onMouseOut="lolite()" onClick="logVariable('categoryNames')" href="../../../_variables/categoryNames.html">$categoryNames</a> = array();
<a name="l481"><span class="linenum"> 481</span></a>          foreach( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Chapters')" href="../../../_functions/get_chapters.html" onMouseOver="funcPopup(event,'get_chapters')">get_Chapters</a>() as <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> )
<a name="l482"><span class="linenum"> 482</span></a>          {
<a name="l483"><span class="linenum"> 483</span></a>              <a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a> = <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('dget')" href="../../../_functions/dget.html" onMouseOver="funcPopup(event,'dget')">dget</a>( 'name' );
<a name="l484"><span class="linenum"> 484</span></a>  
<a name="l485"><span class="linenum"> 485</span></a>              if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_categories'] )
<a name="l486"><span class="linenum"> 486</span></a>              { // we want to display links
<a name="l487"><span class="linenum"> 487</span></a>                  <a class="var it9977" onMouseOver="hilite(9977)" onMouseOut="lolite()" onClick="logVariable('lBlog')" href="../../../_variables/lBlog.html">$lBlog</a> = &amp; <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;get_Blog();
<a name="l488"><span class="linenum"> 488</span></a>                  <a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a> = '&lt;a href=&quot;'.<a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>().'&quot; title=&quot;'.<a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_title']).'&quot;&gt;'.<a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a>.'&lt;/a&gt;';
<a name="l489"><span class="linenum"> 489</span></a>              }
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>              if( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it10738" onMouseOver="hilite(10738)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a> )
<a name="l492"><span class="linenum"> 492</span></a>              { // We are displaying the main cat!
<a name="l493"><span class="linenum"> 493</span></a>                  if( !<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['include_main'] )
<a name="l494"><span class="linenum"> 494</span></a>                  { // ignore main cat !!!
<a name="l495"><span class="linenum"> 495</span></a>                      continue;
<a name="l496"><span class="linenum"> 496</span></a>                  }
<a name="l497"><span class="linenum"> 497</span></a>                  <a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_main'].<a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_main'];
<a name="l498"><span class="linenum"> 498</span></a>              }
<a name="l499"><span class="linenum"> 499</span></a>              elseif( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10738" onMouseOver="hilite(10738)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a> )
<a name="l500"><span class="linenum"> 500</span></a>              { // We are displaying another cat in the same blog
<a name="l501"><span class="linenum"> 501</span></a>                  if( !<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['include_other'] )
<a name="l502"><span class="linenum"> 502</span></a>                  { // ignore main cat !!!
<a name="l503"><span class="linenum"> 503</span></a>                      continue;
<a name="l504"><span class="linenum"> 504</span></a>                  }
<a name="l505"><span class="linenum"> 505</span></a>                  <a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_other'].<a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_other'];
<a name="l506"><span class="linenum"> 506</span></a>              }
<a name="l507"><span class="linenum"> 507</span></a>              else
<a name="l508"><span class="linenum"> 508</span></a>              { // We are displaying an external cat (in another blog)
<a name="l509"><span class="linenum"> 509</span></a>                  if( !<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['include_external'] )
<a name="l510"><span class="linenum"> 510</span></a>                  { // ignore main cat !!!
<a name="l511"><span class="linenum"> 511</span></a>                      continue;
<a name="l512"><span class="linenum"> 512</span></a>                  }
<a name="l513"><span class="linenum"> 513</span></a>                  <a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_external'].<a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_external'];
<a name="l514"><span class="linenum"> 514</span></a>              }
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>              if( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('lock')" class="var it10738" onMouseOver="hilite(10738)" onMouseOut="lolite()" href="../../../_variables/lock.html">lock</a> &amp;&amp; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>[ 'show_locked' ] )
<a name="l517"><span class="linenum"> 517</span></a>              {
<a name="l518"><span class="linenum"> 518</span></a>                  <a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a> .= '&lt;span style=&quot;padding-left:5px;&quot; &gt;'.<a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'file_not_allowed', 'imgtag', array( 'title' =&gt; <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Locked')) ).'&lt;/span&gt;';
<a name="l519"><span class="linenum"> 519</span></a>              }
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>              <a class="var it9976" onMouseOver="hilite(9976)" onMouseOut="lolite()" onClick="logVariable('categoryNames')" href="../../../_variables/categoryNames.html">$categoryNames</a>[] = <a class="var it5235" onMouseOver="hilite(5235)" onMouseOut="lolite()" onClick="logVariable('cat_name')" href="../../../_variables/cat_name.html">$cat_name</a>;
<a name="l522"><span class="linenum"> 522</span></a>          }
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l525"><span class="linenum"> 525</span></a>          echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['separator'], <a class="var it9976" onMouseOver="hilite(9976)" onMouseOut="lolite()" onClick="logVariable('categoryNames')" href="../../../_variables/categoryNames.html">$categoryNames</a> ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l526"><span class="linenum"> 526</span></a>           echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l527"><span class="linenum"> 527</span></a>      }
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>      <span class="comment">/**</span>
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">     * Add nav_target param into the end of the url, but only if it is necessary</span>
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">     *</span>
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment">     * @param string the url</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">     * @param string the current blog or current skin post_navigation setting</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">     * @param integer the ID of the navigation target</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">     * @param string glue</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     * @return string the received url or the received url extended with the navigation param</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     */</span>
<a name="l539"><span class="linenum"> 539</span></a>  	function <a class="function" onClick="logFunction('add_navigation_param')" href="../../../_functions/add_navigation_param.html" onMouseOver="funcPopup(event,'add_navigation_param')">add_navigation_param</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../../_variables/post_navigation.html">$post_navigation</a>, <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;' )
<a name="l540"><span class="linenum"> 540</span></a>      {
<a name="l541"><span class="linenum"> 541</span></a>          if( empty( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> ) || empty( <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a> ) )
<a name="l542"><span class="linenum"> 542</span></a>          { // the url or the navigation target is not set we can't modify anything
<a name="l543"><span class="linenum"> 543</span></a>              return <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l544"><span class="linenum"> 544</span></a>          }
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>          switch( <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../../_variables/post_navigation.html">$post_navigation</a> )
<a name="l547"><span class="linenum"> 547</span></a>          {
<a name="l548"><span class="linenum"> 548</span></a>              case 'same_category': // navigate through the selected category
<a name="l549"><span class="linenum"> 549</span></a>                  if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a> != <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a> )
<a name="l550"><span class="linenum"> 550</span></a>                  {
<a name="l551"><span class="linenum"> 551</span></a>                      <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, 'cat='.<a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l552"><span class="linenum"> 552</span></a>                  }
<a name="l553"><span class="linenum"> 553</span></a>                  break;
<a name="l554"><span class="linenum"> 554</span></a>  
<a name="l555"><span class="linenum"> 555</span></a>              case 'same_tag': // navigate through the selected tag
<a name="l556"><span class="linenum"> 556</span></a>                  <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_tags')" href="../../../_functions/get_tags.html" onMouseOver="funcPopup(event,'get_tags')">get_tags</a>();
<a name="l557"><span class="linenum"> 557</span></a>                  if( <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../../_variables/tags.html">$tags</a> ) &gt; 1 )
<a name="l558"><span class="linenum"> 558</span></a>                  {
<a name="l559"><span class="linenum"> 559</span></a>                      <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('url_add_param')" href="../../../_functions/url_add_param.html" onMouseOver="funcPopup(event,'url_add_param')">url_add_param</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, 'tag='.<a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a>, <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> );
<a name="l560"><span class="linenum"> 560</span></a>                  }
<a name="l561"><span class="linenum"> 561</span></a>                  break;
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>              case 'same_author': // navigate through this item author's posts ( param not needed because a post always has only one author )
<a name="l564"><span class="linenum"> 564</span></a>              case 'same_blog': // by default don't add any param
<a name="l565"><span class="linenum"> 565</span></a>              default:
<a name="l566"><span class="linenum"> 566</span></a>                  break;
<a name="l567"><span class="linenum"> 567</span></a>          }
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>          return <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>;
<a name="l570"><span class="linenum"> 570</span></a>      }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>      <span class="comment">/**</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     * Template function: display main category name</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     *</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     * @param array Params</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     */</span>
<a name="l579"><span class="linenum"> 579</span></a>  	function <a class="function" onClick="logFunction('main_category')" href="../../../_functions/main_category.html" onMouseOver="funcPopup(event,'main_category')">main_category</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody', <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l580"><span class="linenum"> 580</span></a>      {
<a name="l581"><span class="linenum"> 581</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l582"><span class="linenum"> 582</span></a>                  'display_link' =&gt; false, // TRUE to display category's name as link
<a name="l583"><span class="linenum"> 583</span></a>                  'link_class'   =&gt; ''
<a name="l584"><span class="linenum"> 584</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>          <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_main_Chapter();
<a name="l587"><span class="linenum"> 587</span></a>  
<a name="l588"><span class="linenum"> 588</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_link'] )
<a name="l589"><span class="linenum"> 589</span></a>          {    // Display category's name as link
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>              <a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a> = '';
<a name="l592"><span class="linenum"> 592</span></a>              if( !empty( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_class'] ) )
<a name="l593"><span class="linenum"> 593</span></a>              {    // Set attribute for class
<a name="l594"><span class="linenum"> 594</span></a>                  <a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a> = 'class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_class'].'&quot;';
<a name="l595"><span class="linenum"> 595</span></a>              }
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>              echo '&lt;a href=&quot;'.<a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>().'&quot;'.<a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a>.'&gt;';
<a name="l598"><span class="linenum"> 598</span></a>          }
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">        // Display category's name</span>
<a name="l601"><span class="linenum"> 601</span></a>          <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('disp')" href="../../../_functions/disp.html" onMouseOver="funcPopup(event,'disp')">disp</a>( 'name', <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l602"><span class="linenum"> 602</span></a>  
<a name="l603"><span class="linenum"> 603</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['display_link'] )
<a name="l604"><span class="linenum"> 604</span></a>          {
<a name="l605"><span class="linenum"> 605</span></a>              echo '&lt;/a&gt;';
<a name="l606"><span class="linenum"> 606</span></a>          }
<a name="l607"><span class="linenum"> 607</span></a>      }
<a name="l608"><span class="linenum"> 608</span></a>  
<a name="l609"><span class="linenum"> 609</span></a>  
<a name="l610"><span class="linenum"> 610</span></a>      <span class="comment">/**</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">     * Get list of Chapter objects.</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     *</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     * sam2kb&gt; TODO: Cache item cat IDs into Item::categories property instead of global $cache_postcats</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     *</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @return array of {@link Chapter chapters} (references)</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     */</span>
<a name="l617"><span class="linenum"> 617</span></a>  	function <a class="function" onClick="logFunction('get_Chapters')" href="../../../_functions/get_chapters.html" onMouseOver="funcPopup(event,'get_chapters')">get_Chapters</a>()
<a name="l618"><span class="linenum"> 618</span></a>      {
<a name="l619"><span class="linenum"> 619</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a>, <a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('postIDlist')" href="../../../_variables/postIDlist.html">$postIDlist</a>, <a class="var it7126" onMouseOver="hilite(7126)" onMouseOut="lolite()" onClick="logVariable('cache_postcats')" href="../../../_variables/cache_postcats.html">$cache_postcats</a>;
<a name="l620"><span class="linenum"> 620</span></a>  
<a name="l621"><span class="linenum"> 621</span></a>          if( <a class="var it1202" onMouseOver="hilite(1202)" onMouseOut="lolite()" onClick="logVariable('preview')" href="../../../_variables/preview.html">$preview</a> )
<a name="l622"><span class="linenum"> 622</span></a>          {    // Preview mode
<a name="l623"><span class="linenum"> 623</span></a>              global <a class="var it5522" onMouseOver="hilite(5522)" onMouseOut="lolite()" onClick="logVariable('extracats')" href="../../../_variables/extracats.html">$extracats</a>, <a class="var it331" onMouseOver="hilite(331)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../_variables/post_category.html">$post_category</a>;
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>              <a class="var it5522" onMouseOver="hilite(5522)" onMouseOut="lolite()" onClick="logVariable('extracats')" href="../../../_variables/extracats.html">$extracats</a> = <a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>( 'post_extracats', 'array:integer', array() );
<a name="l626"><span class="linenum"> 626</span></a>              if( ( ! empty( <a class="var it331" onMouseOver="hilite(331)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../_variables/post_category.html">$post_category</a> ) ) &amp;&amp; ( ! <a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it331" onMouseOver="hilite(331)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../_variables/post_category.html">$post_category</a>, <a class="var it5522" onMouseOver="hilite(5522)" onMouseOut="lolite()" onClick="logVariable('extracats')" href="../../../_variables/extracats.html">$extracats</a> ) ) )
<a name="l627"><span class="linenum"> 627</span></a>              {
<a name="l628"><span class="linenum"> 628</span></a>                  <a class="var it5522" onMouseOver="hilite(5522)" onMouseOut="lolite()" onClick="logVariable('extracats')" href="../../../_variables/extracats.html">$extracats</a>[] = <a class="var it331" onMouseOver="hilite(331)" onMouseOut="lolite()" onClick="logVariable('post_category')" href="../../../_variables/post_category.html">$post_category</a>;
<a name="l629"><span class="linenum"> 629</span></a>              }
<a name="l630"><span class="linenum"> 630</span></a>              <a class="var it9978" onMouseOver="hilite(9978)" onMouseOut="lolite()" onClick="logVariable('categoryIDs')" href="../../../_variables/categoryIDs.html">$categoryIDs</a> = <a class="var it5522" onMouseOver="hilite(5522)" onMouseOut="lolite()" onClick="logVariable('extracats')" href="../../../_variables/extracats.html">$extracats</a>;
<a name="l631"><span class="linenum"> 631</span></a>          }
<a name="l632"><span class="linenum"> 632</span></a>          elseif( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l633"><span class="linenum"> 633</span></a>          { // This item doesn't exist yet
<a name="l634"><span class="linenum"> 634</span></a>              <a class="var it9978" onMouseOver="hilite(9978)" onMouseOut="lolite()" onClick="logVariable('categoryIDs')" href="../../../_variables/categoryIDs.html">$categoryIDs</a> = NULL;
<a name="l635"><span class="linenum"> 635</span></a>          }
<a name="l636"><span class="linenum"> 636</span></a>          else
<a name="l637"><span class="linenum"> 637</span></a>          {
<a name="l638"><span class="linenum"> 638</span></a>              <a class="var it9979" onMouseOver="hilite(9979)" onMouseOut="lolite()" onClick="logVariable('search_post_ids')" href="../../../_variables/search_post_ids.html">$search_post_ids</a> = empty( <a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('postIDlist')" href="../../../_variables/postIDlist.html">$postIDlist</a> ) ? NULL : <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( ',', <a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('postIDlist')" href="../../../_variables/postIDlist.html">$postIDlist</a> );
<a name="l639"><span class="linenum"> 639</span></a>              if( empty( <a class="var it9979" onMouseOver="hilite(9979)" onMouseOut="lolite()" onClick="logVariable('search_post_ids')" href="../../../_variables/search_post_ids.html">$search_post_ids</a> ) || !<a class="phpfunction" onClick="logFunction('in_array')" href="../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>, <a class="var it9979" onMouseOver="hilite(9979)" onMouseOut="lolite()" onClick="logVariable('search_post_ids')" href="../../../_variables/search_post_ids.html">$search_post_ids</a> ) )
<a name="l640"><span class="linenum"> 640</span></a>              {    // Load cats for current item
<a name="l641"><span class="linenum"> 641</span></a>                  <a class="var it9978" onMouseOver="hilite(9978)" onMouseOut="lolite()" onClick="logVariable('categoryIDs')" href="../../../_variables/categoryIDs.html">$categoryIDs</a> = <a class="function" onClick="logFunction('postcats_get_byID')" href="../../../_functions/postcats_get_byid.html" onMouseOver="funcPopup(event,'postcats_get_byid')">postcats_get_byID</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l642"><span class="linenum"> 642</span></a>              }
<a name="l643"><span class="linenum"> 643</span></a>              else
<a name="l644"><span class="linenum"> 644</span></a>              {    // Load cats for items list
<a name="l645"><span class="linenum"> 645</span></a>                  if( ! isset(<a class="var it7126" onMouseOver="hilite(7126)" onMouseOut="lolite()" onClick="logVariable('cache_postcats')" href="../../../_variables/cache_postcats.html">$cache_postcats</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>]) &amp;&amp; ! empty( <a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('postIDlist')" href="../../../_variables/postIDlist.html">$postIDlist</a> ) )
<a name="l646"><span class="linenum"> 646</span></a>                  {    // Add to cache
<a name="l647"><span class="linenum"> 647</span></a>                      <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = &quot;SELECT postcat_post_ID, postcat_cat_ID
<a name="l648"><span class="linenum"> 648</span></a>                              FROM T_postcats
<a name="l649"><span class="linenum"> 649</span></a>                              WHERE postcat_post_ID IN (<a class="var it2689" onMouseOver="hilite(2689)" onMouseOut="lolite()" onClick="logVariable('postIDlist')" href="../../../_variables/postIDlist.html">$postIDlist</a>)
<a name="l650"><span class="linenum"> 650</span></a>                              ORDER BY postcat_post_ID, postcat_cat_ID&quot;;
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>                      foreach( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>( <a class="var it344" onMouseOver="hilite(344)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, <a class="constant" onClick="logConstant('ARRAY_A')" href="../../../_constants/ARRAY_A.html" onMouseOver="constPopup(event,'ARRAY_A')">ARRAY_A</a>, 'Get categories for items' ) as <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a> )
<a name="l653"><span class="linenum"> 653</span></a>                      {
<a name="l654"><span class="linenum"> 654</span></a>                          <a class="var it9980" onMouseOver="hilite(9980)" onMouseOut="lolite()" onClick="logVariable('postcat_post_ID')" href="../../../_variables/postcat_post_ID.html">$postcat_post_ID</a> = <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>['postcat_post_ID'];
<a name="l655"><span class="linenum"> 655</span></a>                          if( ! isset( <a class="var it7126" onMouseOver="hilite(7126)" onMouseOut="lolite()" onClick="logVariable('cache_postcats')" href="../../../_variables/cache_postcats.html">$cache_postcats</a>[<a class="var it9980" onMouseOver="hilite(9980)" onMouseOut="lolite()" onClick="logVariable('postcat_post_ID')" href="../../../_variables/postcat_post_ID.html">$postcat_post_ID</a>] ) )
<a name="l656"><span class="linenum"> 656</span></a>                          {
<a name="l657"><span class="linenum"> 657</span></a>                               <a class="var it7126" onMouseOver="hilite(7126)" onMouseOut="lolite()" onClick="logVariable('cache_postcats')" href="../../../_variables/cache_postcats.html">$cache_postcats</a>[<a class="var it9980" onMouseOver="hilite(9980)" onMouseOut="lolite()" onClick="logVariable('postcat_post_ID')" href="../../../_variables/postcat_post_ID.html">$postcat_post_ID</a>] = array();
<a name="l658"><span class="linenum"> 658</span></a>                          }
<a name="l659"><span class="linenum"> 659</span></a>                          <a class="var it7126" onMouseOver="hilite(7126)" onMouseOut="lolite()" onClick="logVariable('cache_postcats')" href="../../../_variables/cache_postcats.html">$cache_postcats</a>[<a class="var it9980" onMouseOver="hilite(9980)" onMouseOut="lolite()" onClick="logVariable('postcat_post_ID')" href="../../../_variables/postcat_post_ID.html">$postcat_post_ID</a>][] = <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>['postcat_cat_ID'];
<a name="l660"><span class="linenum"> 660</span></a>                      }
<a name="l661"><span class="linenum"> 661</span></a>                  }
<a name="l662"><span class="linenum"> 662</span></a>                  <a class="var it9978" onMouseOver="hilite(9978)" onMouseOut="lolite()" onClick="logVariable('categoryIDs')" href="../../../_variables/categoryIDs.html">$categoryIDs</a> = <a class="var it7126" onMouseOver="hilite(7126)" onMouseOut="lolite()" onClick="logVariable('cache_postcats')" href="../../../_variables/cache_postcats.html">$cache_postcats</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>];
<a name="l663"><span class="linenum"> 663</span></a>              }
<a name="l664"><span class="linenum"> 664</span></a>          }
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>          <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> = array();
<a name="l667"><span class="linenum"> 667</span></a>          if( ! empty( <a class="var it9978" onMouseOver="hilite(9978)" onMouseOut="lolite()" onClick="logVariable('categoryIDs')" href="../../../_variables/categoryIDs.html">$categoryIDs</a> ) )
<a name="l668"><span class="linenum"> 668</span></a>          {
<a name="l669"><span class="linenum"> 669</span></a>              <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">            // Load all required Chapters</span>
<a name="l671"><span class="linenum"> 671</span></a>              <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a class="function" onClick="logFunction('load_list')" href="../../../_functions/load_list.html" onMouseOver="funcPopup(event,'load_list')">load_list</a>( <a class="var it9978" onMouseOver="hilite(9978)" onMouseOut="lolite()" onClick="logVariable('categoryIDs')" href="../../../_variables/categoryIDs.html">$categoryIDs</a> );
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>              foreach( <a class="var it9978" onMouseOver="hilite(9978)" onMouseOut="lolite()" onClick="logVariable('categoryIDs')" href="../../../_variables/categoryIDs.html">$categoryIDs</a> as <a class="var it1397" onMouseOver="hilite(1397)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a> )
<a name="l674"><span class="linenum"> 674</span></a>              {
<a name="l675"><span class="linenum"> 675</span></a>                  if( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID( <a class="var it1397" onMouseOver="hilite(1397)" onMouseOut="lolite()" onClick="logVariable('cat_ID')" href="../../../_variables/cat_ID.html">$cat_ID</a>, false ) )
<a name="l676"><span class="linenum"> 676</span></a>                  {
<a name="l677"><span class="linenum"> 677</span></a>                      <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a>[] = <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>;
<a name="l678"><span class="linenum"> 678</span></a>                  }
<a name="l679"><span class="linenum"> 679</span></a>              }
<a name="l680"><span class="linenum"> 680</span></a>          }
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>          return <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a>;
<a name="l683"><span class="linenum"> 683</span></a>      }
<a name="l684"><span class="linenum"> 684</span></a>  
<a name="l685"><span class="linenum"> 685</span></a>  
<a name="l686"><span class="linenum"> 686</span></a>      <span class="comment">/**</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">     * Get the main Chapter.</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">     *</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">     * @return Chapter</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">     */</span>
<a name="l691"><span class="linenum"> 691</span></a>      function &amp; get_main_Chapter()
<a name="l692"><span class="linenum"> 692</span></a>      {
<a name="l693"><span class="linenum"> 693</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> ) )
<a name="l694"><span class="linenum"> 694</span></a>          {
<a name="l695"><span class="linenum"> 695</span></a>              <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a> = &amp; get_ChapterCache();
<a name="l696"><span class="linenum"> 696</span></a>              <span class="comment">/**</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">             * @var Chapter</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">             */</span>
<a name="l699"><span class="linenum"> 699</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> = &amp; <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a>, false );
<a name="l700"><span class="linenum"> 700</span></a>              if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> ) )
<a name="l701"><span class="linenum"> 701</span></a>              {    // If main chapter is broken we should get it from one of extra chapters
<a name="l702"><span class="linenum"> 702</span></a>                  <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Chapters')" href="../../../_functions/get_chapters.html" onMouseOver="funcPopup(event,'get_chapters')">get_Chapters</a>();
<a name="l703"><span class="linenum"> 703</span></a>                  foreach( <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> as <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> )
<a name="l704"><span class="linenum"> 704</span></a>                  {
<a name="l705"><span class="linenum"> 705</span></a>                      if( !empty( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> ) )
<a name="l706"><span class="linenum"> 706</span></a>                      {    // We have found a valid Chapter...
<a name="l707"><span class="linenum"> 707</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> = &amp; <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>;
<a name="l708"><span class="linenum"> 708</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a> = <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it10738" onMouseOver="hilite(10738)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l709"><span class="linenum"> 709</span></a>                          break;
<a name="l710"><span class="linenum"> 710</span></a>                      }
<a name="l711"><span class="linenum"> 711</span></a>                  }
<a name="l712"><span class="linenum"> 712</span></a>              }
<a name="l713"><span class="linenum"> 713</span></a>              if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> ) )
<a name="l714"><span class="linenum"> 714</span></a>              {    // If we still don't have a valid Chapter, display clean error and die().
<a name="l715"><span class="linenum"> 715</span></a>                  global <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>;
<a name="l716"><span class="linenum"> 716</span></a>                  if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) )
<a name="l717"><span class="linenum"> 717</span></a>                  {
<a name="l718"><span class="linenum"> 718</span></a>                      if( !empty( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a> ) )
<a name="l719"><span class="linenum"> 719</span></a>                      {
<a name="l720"><span class="linenum"> 720</span></a>                          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l721"><span class="linenum"> 721</span></a>                          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../../../_variables/blog.html">$blog</a>, false );
<a name="l722"><span class="linenum"> 722</span></a>                      }
<a name="l723"><span class="linenum"> 723</span></a>                  }
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>                  <a class="var it9981" onMouseOver="hilite(9981)" onMouseOut="lolite()" onClick="logVariable('url_to_edit_post')" href="../../../_variables/url_to_edit_post.html">$url_to_edit_post</a> = <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items&amp;amp;action=edit&amp;amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l726"><span class="linenum"> 726</span></a>  
<a name="l727"><span class="linenum"> 727</span></a>                  if( !empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) )
<a name="l728"><span class="linenum"> 728</span></a>                  {
<a name="l729"><span class="linenum"> 729</span></a>                      <a class="var it9981" onMouseOver="hilite(9981)" onMouseOut="lolite()" onClick="logVariable('url_to_edit_post')" href="../../../_variables/url_to_edit_post.html">$url_to_edit_post</a> .= '&amp;amp;blog='.<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l730"><span class="linenum"> 730</span></a>                      if( <a class="function" onClick="logFunction('is_admin_page')" href="../../../_functions/is_admin_page.html" onMouseOver="funcPopup(event,'is_admin_page')">is_admin_page</a>() )
<a name="l731"><span class="linenum"> 731</span></a>                      {    // Try to set a main category
<a name="l732"><span class="linenum"> 732</span></a>                          <a class="var it6882" onMouseOver="hilite(6882)" onMouseOut="lolite()" onClick="logVariable('default_cat_ID')" href="../../../_variables/default_cat_ID.html">$default_cat_ID</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'default_cat_ID' );
<a name="l733"><span class="linenum"> 733</span></a>                          if( !empty( <a class="var it6882" onMouseOver="hilite(6882)" onMouseOut="lolite()" onClick="logVariable('default_cat_ID')" href="../../../_variables/default_cat_ID.html">$default_cat_ID</a> ) )
<a name="l734"><span class="linenum"> 734</span></a>                          {    // If default category is set
<a name="l735"><span class="linenum"> 735</span></a>                              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a> = <a class="var it6882" onMouseOver="hilite(6882)" onMouseOut="lolite()" onClick="logVariable('default_cat_ID')" href="../../../_variables/default_cat_ID.html">$default_cat_ID</a>;
<a name="l736"><span class="linenum"> 736</span></a>                              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> = &amp; <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a>, false );
<a name="l737"><span class="linenum"> 737</span></a>                          }
<a name="l738"><span class="linenum"> 738</span></a>                          else
<a name="l739"><span class="linenum"> 739</span></a>                          {    // Set from first chapter of the blog
<a name="l740"><span class="linenum"> 740</span></a>                              <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../../../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l741"><span class="linenum"> 741</span></a>                              <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;<a class="function" onClick="logFunction('load_subset')" href="../../../_functions/load_subset.html" onMouseOver="funcPopup(event,'load_subset')">load_subset</a>( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> );
<a name="l742"><span class="linenum"> 742</span></a>                              if( <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> = &amp; <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('ChapterCache')" href="../../../_variables/ChapterCache.html">$ChapterCache</a>-&gt;get_next() )
<a name="l743"><span class="linenum"> 743</span></a>                              {
<a name="l744"><span class="linenum"> 744</span></a>                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a> = <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a onClick="logVariable('ID')" class="var it10738" onMouseOver="hilite(10738)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l745"><span class="linenum"> 745</span></a>                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> = &amp; <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>;
<a name="l746"><span class="linenum"> 746</span></a>                              }
<a name="l747"><span class="linenum"> 747</span></a>                          }
<a name="l748"><span class="linenum"> 748</span></a>                      }
<a name="l749"><span class="linenum"> 749</span></a>                  }
<a name="l750"><span class="linenum"> 750</span></a>  
<a name="l751"><span class="linenum"> 751</span></a>                  <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> = sprintf( 'Item with ID &lt;a %s&gt;%s&lt;/a&gt; has an invalid main category ID %s.', <span class="comment">/* Do NOT translate debug messages! */</span>
<a name="l752"><span class="linenum"> 752</span></a>                          'href=&quot;'.<a class="var it9981" onMouseOver="hilite(9981)" onMouseOut="lolite()" onClick="logVariable('url_to_edit_post')" href="../../../_variables/url_to_edit_post.html">$url_to_edit_post</a>.'&quot;',
<a name="l753"><span class="linenum"> 753</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>,
<a name="l754"><span class="linenum"> 754</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;main_cat_ID
<a name="l755"><span class="linenum"> 755</span></a>                      );
<a name="l756"><span class="linenum"> 756</span></a>                  if( empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) )
<a name="l757"><span class="linenum"> 757</span></a>                  {    // No blog defined
<a name="l758"><span class="linenum"> 758</span></a>                      <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> .= ' In addition we cannot fallback to the default category because no valid blog ID has been specified.';
<a name="l759"><span class="linenum"> 759</span></a>                  }
<a name="l760"><span class="linenum"> 760</span></a>  
<a name="l761"><span class="linenum"> 761</span></a>                  if( empty( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> ) )
<a name="l762"><span class="linenum"> 762</span></a>                  {    // Main chapter is not defined, because blog doesn't have the default cat ID and even blog doesn't have any categories
<a name="l763"><span class="linenum"> 763</span></a>                      <a class="function" onClick="logFunction('debug_die')" href="../../../_functions/debug_die.html" onMouseOver="funcPopup(event,'debug_die')">debug_die</a>( <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a> );
<a name="l764"><span class="linenum"> 764</span></a>                  }
<a name="l765"><span class="linenum"> 765</span></a>                  else
<a name="l766"><span class="linenum"> 766</span></a>                  {    // Main chapter is defined, we can show the page
<a name="l767"><span class="linenum"> 767</span></a>                      global <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>;
<a name="l768"><span class="linenum"> 768</span></a>                      if( <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() &amp;&amp; <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'blogs', 'editall' ) )
<a name="l769"><span class="linenum"> 769</span></a>                      { // User has permission to all blogs posts and comments, display a message as note in order to allow update it
<a name="l770"><span class="linenum"> 770</span></a>                          <a class="var it9982" onMouseOver="hilite(9982)" onMouseOut="lolite()" onClick="logVariable('message_type')" href="../../../_variables/message_type.html">$message_type</a> = 'note';
<a name="l771"><span class="linenum"> 771</span></a>                      }
<a name="l772"><span class="linenum"> 772</span></a>                      else
<a name="l773"><span class="linenum"> 773</span></a>                      { // No permission, display this message as error. Such users cannot update this post.
<a name="l774"><span class="linenum"> 774</span></a>                          <a class="var it9982" onMouseOver="hilite(9982)" onMouseOut="lolite()" onClick="logVariable('message_type')" href="../../../_variables/message_type.html">$message_type</a> = 'error';
<a name="l775"><span class="linenum"> 775</span></a>                      }
<a name="l776"><span class="linenum"> 776</span></a>                      <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('Messages')" href="../../../_variables/Messages.html">$Messages</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>( <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>, <a class="var it9982" onMouseOver="hilite(9982)" onMouseOut="lolite()" onClick="logVariable('message_type')" href="../../../_variables/message_type.html">$message_type</a> );
<a name="l777"><span class="linenum"> 777</span></a>                  }
<a name="l778"><span class="linenum"> 778</span></a>              }
<a name="l779"><span class="linenum"> 779</span></a>          }
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a>;
<a name="l782"><span class="linenum"> 782</span></a>      }
<a name="l783"><span class="linenum"> 783</span></a>  
<a name="l784"><span class="linenum"> 784</span></a>  
<a name="l785"><span class="linenum"> 785</span></a>      <span class="comment">/**</span>
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment">     * Get the blog ID of this item (derived from main chapter).</span>
<a name="l787"><span class="linenum"> 787</span></a>  <span class="comment">     * @return integer</span>
<a name="l788"><span class="linenum"> 788</span></a>  <span class="comment">     */</span>
<a name="l789"><span class="linenum"> 789</span></a>  	function <a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>()
<a name="l790"><span class="linenum"> 790</span></a>      {
<a name="l791"><span class="linenum"> 791</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>) )
<a name="l792"><span class="linenum"> 792</span></a>          {
<a name="l793"><span class="linenum"> 793</span></a>              <a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a> = &amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_main_Chapter();
<a name="l794"><span class="linenum"> 794</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a> = <a class="var it3181" onMouseOver="hilite(3181)" onMouseOut="lolite()" onClick="logVariable('main_Chapter')" href="../../../_variables/main_Chapter.html">$main_Chapter</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10712" onMouseOver="hilite(10712)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>;
<a name="l795"><span class="linenum"> 795</span></a>          }
<a name="l796"><span class="linenum"> 796</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a>;
<a name="l797"><span class="linenum"> 797</span></a>      }
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>      <span class="comment">/**</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment">     * returns issue date (datetime) of Item</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment">     * @param array</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">     *   - 'before'</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment">     *   - 'after'</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment">     *   - 'date_format': Date format</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">     *   - 'use_GMT': Use GMT/UTC date</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">     */</span>
<a name="l808"><span class="linenum"> 808</span></a>  	function <a class="function" onClick="logFunction('get_issue_date')" href="../../../_functions/get_issue_date.html" onMouseOver="funcPopup(event,'get_issue_date')">get_issue_date</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l809"><span class="linenum"> 809</span></a>      {
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l811"><span class="linenum"> 811</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l812"><span class="linenum"> 812</span></a>                  'before'      =&gt; ' ',
<a name="l813"><span class="linenum"> 813</span></a>                  'after'       =&gt; ' ',
<a name="l814"><span class="linenum"> 814</span></a>                  'date_format' =&gt; '#',
<a name="l815"><span class="linenum"> 815</span></a>                  'use_GMT'     =&gt; false,
<a name="l816"><span class="linenum"> 816</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l817"><span class="linenum"> 817</span></a>  
<a name="l818"><span class="linenum"> 818</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format'] == '#' )
<a name="l819"><span class="linenum"> 819</span></a>          {
<a name="l820"><span class="linenum"> 820</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format'] = <a class="function" onClick="logFunction('locale_datefmt')" href="../../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>();
<a name="l821"><span class="linenum"> 821</span></a>          }
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>          return <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'].<a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format'], <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['use_GMT'] ).<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l824"><span class="linenum"> 824</span></a>      }
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>  
<a name="l827"><span class="linenum"> 827</span></a>      <span class="comment">/**</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">     * Template function: display issue date (datetime) of Item</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">     * @see get_issue_date()</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">     */</span>
<a name="l831"><span class="linenum"> 831</span></a>  	function <a class="function" onClick="logFunction('issue_date')" href="../../../_functions/issue_date.html" onMouseOver="funcPopup(event,'issue_date')">issue_date</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l832"><span class="linenum"> 832</span></a>      {
<a name="l833"><span class="linenum"> 833</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_issue_date')" href="../../../_functions/get_issue_date.html" onMouseOver="funcPopup(event,'get_issue_date')">get_issue_date</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l834"><span class="linenum"> 834</span></a>      }
<a name="l835"><span class="linenum"> 835</span></a>  
<a name="l836"><span class="linenum"> 836</span></a>  
<a name="l837"><span class="linenum"> 837</span></a>      <span class="comment">/**</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment">     * Template function: display issue time (datetime) of Item</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment">     * @param array</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment">     *   - 'time_format': Time format ('#short_time' - to use short time)</span>
<a name="l841"><span class="linenum"> 841</span></a>  <span class="comment">     *   - ... see {@link get_issue_date()}</span>
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment">     * @see get_issue_date()</span>
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">     */</span>
<a name="l844"><span class="linenum"> 844</span></a>  	function <a class="function" onClick="logFunction('issue_time')" href="../../../_functions/issue_time.html" onMouseOver="funcPopup(event,'issue_time')">issue_time</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l845"><span class="linenum"> 845</span></a>      {
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l847"><span class="linenum"> 847</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l848"><span class="linenum"> 848</span></a>                  'time_format'  =&gt; '#',
<a name="l849"><span class="linenum"> 849</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l850"><span class="linenum"> 850</span></a>  
<a name="l851"><span class="linenum"> 851</span></a>          if( !isset(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format']) )
<a name="l852"><span class="linenum"> 852</span></a>          {
<a name="l853"><span class="linenum"> 853</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format'] = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['time_format'];
<a name="l854"><span class="linenum"> 854</span></a>          }
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format'] == '#' )
<a name="l857"><span class="linenum"> 857</span></a>          {    // Use default time format of current locale
<a name="l858"><span class="linenum"> 858</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format'] = <a class="function" onClick="logFunction('locale_timefmt')" href="../../../_functions/locale_timefmt.html" onMouseOver="funcPopup(event,'locale_timefmt')">locale_timefmt</a>();
<a name="l859"><span class="linenum"> 859</span></a>          }
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format'] == '#short_time' )
<a name="l862"><span class="linenum"> 862</span></a>          {    // Use short time format of current locale
<a name="l863"><span class="linenum"> 863</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['date_format'] = <a class="function" onClick="logFunction('locale_shorttimefmt')" href="../../../_functions/locale_shorttimefmt.html" onMouseOver="funcPopup(event,'locale_shorttimefmt')">locale_shorttimefmt</a>();
<a name="l864"><span class="linenum"> 864</span></a>          }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_issue_date')" href="../../../_functions/get_issue_date.html" onMouseOver="funcPopup(event,'get_issue_date')">get_issue_date</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l867"><span class="linenum"> 867</span></a>      }
<a name="l868"><span class="linenum"> 868</span></a>  
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>      <span class="comment">/**</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">     * Template function: display locale for item</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">     */</span>
<a name="l873"><span class="linenum"> 873</span></a>  	function <a class="function" onClick="logFunction('lang')" href="../../../_functions/lang.html" onMouseOver="funcPopup(event,'lang')">lang</a>()
<a name="l874"><span class="linenum"> 874</span></a>      {
<a name="l875"><span class="linenum"> 875</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('disp')" href="../../../_functions/disp.html" onMouseOver="funcPopup(event,'disp')">disp</a>( 'locale', 'raw' );
<a name="l876"><span class="linenum"> 876</span></a>      }
<a name="l877"><span class="linenum"> 877</span></a>  
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>      <span class="comment">/**</span>
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">     * Template function: display locale for item</span>
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">     */</span>
<a name="l882"><span class="linenum"> 882</span></a>  	function <a class="function" onClick="logFunction('locale')" href="../../../_functions/locale.html" onMouseOver="funcPopup(event,'locale')">locale</a>()
<a name="l883"><span class="linenum"> 883</span></a>      {
<a name="l884"><span class="linenum"> 884</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('disp')" href="../../../_functions/disp.html" onMouseOver="funcPopup(event,'disp')">disp</a>( 'locale', 'raw' );
<a name="l885"><span class="linenum"> 885</span></a>      }
<a name="l886"><span class="linenum"> 886</span></a>  
<a name="l887"><span class="linenum"> 887</span></a>  
<a name="l888"><span class="linenum"> 888</span></a>      <span class="comment">/**</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">     * Template tag</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">     */</span>
<a name="l891"><span class="linenum"> 891</span></a>  	function <a class="function" onClick="logFunction('locale_flag')" href="../../../_functions/locale_flag.html" onMouseOver="funcPopup(event,'locale_flag')">locale_flag</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l892"><span class="linenum"> 892</span></a>      {
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l894"><span class="linenum"> 894</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l895"><span class="linenum"> 895</span></a>                  'before'      =&gt; ' ',
<a name="l896"><span class="linenum"> 896</span></a>                  'after'       =&gt; ' ',
<a name="l897"><span class="linenum"> 897</span></a>                  'collection'  =&gt; 'h10px',
<a name="l898"><span class="linenum"> 898</span></a>                  'format'      =&gt; 'htmlbody',
<a name="l899"><span class="linenum"> 899</span></a>                  'class'       =&gt; 'flag',
<a name="l900"><span class="linenum"> 900</span></a>                  'align'       =&gt; '',
<a name="l901"><span class="linenum"> 901</span></a>                  'locale'      =&gt; 'item', // Possible values: 'item', 'blog', custom locale, empty string for current locale
<a name="l902"><span class="linenum"> 902</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l903"><span class="linenum"> 903</span></a>  
<a name="l904"><span class="linenum"> 904</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['locale'] == 'blog' )
<a name="l905"><span class="linenum"> 905</span></a>          {
<a name="l906"><span class="linenum"> 906</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['locale'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog()-&gt;locale;
<a name="l907"><span class="linenum"> 907</span></a>          }
<a name="l908"><span class="linenum"> 908</span></a>          elseif( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['locale'] == 'item' )
<a name="l909"><span class="linenum"> 909</span></a>          {
<a name="l910"><span class="linenum"> 910</span></a>              <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['locale'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('locale')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/locale.html">locale</a>;
<a name="l911"><span class="linenum"> 911</span></a>          }
<a name="l912"><span class="linenum"> 912</span></a>  
<a name="l913"><span class="linenum"> 913</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l914"><span class="linenum"> 914</span></a>          echo <a class="function" onClick="logFunction('locale_flag')" href="../../../_functions/locale_flag.html" onMouseOver="funcPopup(event,'locale_flag')">locale_flag</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['locale'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['collection'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['align'] );
<a name="l915"><span class="linenum"> 915</span></a>          echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l916"><span class="linenum"> 916</span></a>      }
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>      <span class="comment">/**</span>
<a name="l920"><span class="linenum"> 920</span></a>  <span class="comment">     * Template function: Temporarily switch to this post's locale or to current blog's locale depending on setting</span>
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">     */</span>
<a name="l922"><span class="linenum"> 922</span></a>  	function <a class="function" onClick="logFunction('locale_temp_switch')" href="../../../_functions/locale_temp_switch.html" onMouseOver="funcPopup(event,'locale_temp_switch')">locale_temp_switch</a>()
<a name="l923"><span class="linenum"> 923</span></a>      {
<a name="l924"><span class="linenum"> 924</span></a>          global <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l925"><span class="linenum"> 925</span></a>  
<a name="l926"><span class="linenum"> 926</span></a>          if( ! empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'post_locale_source' ) == 'blog' )
<a name="l927"><span class="linenum"> 927</span></a>          { // Use locale what current blog is using now
<a name="l928"><span class="linenum"> 928</span></a>              return;
<a name="l929"><span class="linenum"> 929</span></a>          }
<a name="l930"><span class="linenum"> 930</span></a>          else
<a name="l931"><span class="linenum"> 931</span></a>          { // Use locale of this post
<a name="l932"><span class="linenum"> 932</span></a>              <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('locale')" href="../../../_variables/locale.html">$locale</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('locale')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/locale.html">locale</a>;
<a name="l933"><span class="linenum"> 933</span></a>          }
<a name="l934"><span class="linenum"> 934</span></a>  
<a name="l935"><span class="linenum"> 935</span></a>          <a class="function" onClick="logFunction('locale_temp_switch')" href="../../../_functions/locale_temp_switch.html" onMouseOver="funcPopup(event,'locale_temp_switch')">locale_temp_switch</a>( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('locale')" href="../../../_variables/locale.html">$locale</a> );
<a name="l936"><span class="linenum"> 936</span></a>      }
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>  
<a name="l939"><span class="linenum"> 939</span></a>      <span class="comment">/**</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment">     * Template function: display language name for item</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment">     *</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment">     */</span>
<a name="l944"><span class="linenum"> 944</span></a>  	function <a class="function" onClick="logFunction('language')" href="../../../_functions/language.html" onMouseOver="funcPopup(event,'language')">language</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l945"><span class="linenum"> 945</span></a>      {
<a name="l946"><span class="linenum"> 946</span></a>          global <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('locales')" href="../../../_variables/locales.html">$locales</a>;
<a name="l947"><span class="linenum"> 947</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('locale')" href="../../../_variables/locale.html">$locale</a> = <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('locales')" href="../../../_variables/locales.html">$locales</a>[ <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('locale')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/locale.html">locale</a> ];
<a name="l948"><span class="linenum"> 948</span></a>          echo <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('locale')" href="../../../_variables/locale.html">$locale</a>['name'], <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l949"><span class="linenum"> 949</span></a>      }
<a name="l950"><span class="linenum"> 950</span></a>  
<a name="l951"><span class="linenum"> 951</span></a>      <span class="comment">/**</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">     * Get last mod date (datetime) of Item</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">     *</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">     * @param string date/time format: leave empty to use locale default date format</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment">     * @param boolean true if you want GMT</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">     */</span>
<a name="l957"><span class="linenum"> 957</span></a>  	function <a class="function" onClick="logFunction('get_mod_date')" href="../../../_functions/get_mod_date.html" onMouseOver="funcPopup(event,'get_mod_date')">get_mod_date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = '', <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l958"><span class="linenum"> 958</span></a>      {
<a name="l959"><span class="linenum"> 959</span></a>          if( empty(<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>) )
<a name="l960"><span class="linenum"> 960</span></a>          {
<a name="l961"><span class="linenum"> 961</span></a>              return <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="function" onClick="logFunction('locale_datefmt')" href="../../../_functions/locale_datefmt.html" onMouseOver="funcPopup(event,'locale_datefmt')">locale_datefmt</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datemodified.html">datemodified</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l962"><span class="linenum"> 962</span></a>          }
<a name="l963"><span class="linenum"> 963</span></a>  
<a name="l964"><span class="linenum"> 964</span></a>          return <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datemodified.html">datemodified</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l965"><span class="linenum"> 965</span></a>      }
<a name="l966"><span class="linenum"> 966</span></a>  
<a name="l967"><span class="linenum"> 967</span></a>  
<a name="l968"><span class="linenum"> 968</span></a>      <span class="comment">/**</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment">     * Template function: display last mod date (datetime) of Item</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment">     *</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment">     * @param string date/time format: leave empty to use locale default date format</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment">     * @param boolean true if you want GMT</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment">     */</span>
<a name="l974"><span class="linenum"> 974</span></a>  	function <a class="function" onClick="logFunction('mod_date')" href="../../../_functions/mod_date.html" onMouseOver="funcPopup(event,'mod_date')">mod_date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = '', <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l975"><span class="linenum"> 975</span></a>      {
<a name="l976"><span class="linenum"> 976</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mod_date')" href="../../../_functions/get_mod_date.html" onMouseOver="funcPopup(event,'get_mod_date')">get_mod_date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l977"><span class="linenum"> 977</span></a>      }
<a name="l978"><span class="linenum"> 978</span></a>  
<a name="l979"><span class="linenum"> 979</span></a>  
<a name="l980"><span class="linenum"> 980</span></a>      <span class="comment">/**</span>
<a name="l981"><span class="linenum"> 981</span></a>  <span class="comment">     * Template function: display last mod time (datetime) of Item</span>
<a name="l982"><span class="linenum"> 982</span></a>  <span class="comment">     *</span>
<a name="l983"><span class="linenum"> 983</span></a>  <span class="comment">     * @param string date/time format: leave empty to use locale default time format</span>
<a name="l984"><span class="linenum"> 984</span></a>  <span class="comment">     * @param boolean true if you want GMT</span>
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">     */</span>
<a name="l986"><span class="linenum"> 986</span></a>  	function <a class="function" onClick="logFunction('mod_time')" href="../../../_functions/mod_time.html" onMouseOver="funcPopup(event,'mod_time')">mod_time</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = '', <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> = false )
<a name="l987"><span class="linenum"> 987</span></a>      {
<a name="l988"><span class="linenum"> 988</span></a>          if( empty(<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>) )
<a name="l989"><span class="linenum"> 989</span></a>              echo <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="function" onClick="logFunction('locale_timefmt')" href="../../../_functions/locale_timefmt.html" onMouseOver="funcPopup(event,'locale_timefmt')">locale_timefmt</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datemodified.html">datemodified</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l990"><span class="linenum"> 990</span></a>          else
<a name="l991"><span class="linenum"> 991</span></a>              echo <a class="function" onClick="logFunction('mysql2date')" href="../../../_functions/mysql2date.html" onMouseOver="funcPopup(event,'mysql2date')">mysql2date</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('datemodified')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/datemodified.html">datemodified</a>, <a class="var it1565" onMouseOver="hilite(1565)" onMouseOut="lolite()" onClick="logVariable('useGM')" href="../../../_variables/useGM.html">$useGM</a> );
<a name="l992"><span class="linenum"> 992</span></a>      }
<a name="l993"><span class="linenum"> 993</span></a>  
<a name="l994"><span class="linenum"> 994</span></a>  
<a name="l995"><span class="linenum"> 995</span></a>      <span class="comment">/**</span>
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment">     * Check if current item has at least one category, which belongs to the given blog</span>
<a name="l997"><span class="linenum"> 997</span></a>  <span class="comment">     *</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">     * @param integer the given blog ID</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">     * @return boolean true if there is at least one category in the given blog, false otherwise</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">     */</span>
<a name="l1001"><span class="linenum">1001</span></a>  	function <a class="function" onClick="logFunction('is_part_of_blog')" href="../../../_functions/is_part_of_blog.html" onMouseOver="funcPopup(event,'is_part_of_blog')">is_part_of_blog</a>( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> )
<a name="l1002"><span class="linenum">1002</span></a>      {
<a name="l1003"><span class="linenum">1003</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l1004"><span class="linenum">1004</span></a>          <a class="var it9983" onMouseOver="hilite(9983)" onMouseOut="lolite()" onClick="logVariable('cat_count')" href="../../../_variables/cat_count.html">$cat_count</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_var')" href="../../../_functions/get_var.html" onMouseOver="funcPopup(event,'get_var')">get_var</a>( '
<a name="l1005"><span class="linenum">1005</span></a>                  SELECT <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( cat_ID )
<a name="l1006"><span class="linenum">1006</span></a>                  FROM T_categories, T_postcats
<a name="l1007"><span class="linenum">1007</span></a>                  WHERE
<a name="l1008"><span class="linenum">1008</span></a>                      T_categories.cat_ID = T_postcats.postcat_cat_ID
<a name="l1009"><span class="linenum">1009</span></a>                      and T_categories.cat_blog_ID = '.<a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a>.'
<a name="l1010"><span class="linenum">1010</span></a>                      and T_postcats.postcat_post_ID = '.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;ID
<a name="l1011"><span class="linenum">1011</span></a>          );
<a name="l1012"><span class="linenum">1012</span></a>  
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment">        // $cat_count&gt;0 means that this item has at least one category that belongs to the target blog.</span>
<a name="l1014"><span class="linenum">1014</span></a>          return <a class="var it9983" onMouseOver="hilite(9983)" onMouseOut="lolite()" onClick="logVariable('cat_count')" href="../../../_variables/cat_count.html">$cat_count</a> &gt; 0;
<a name="l1015"><span class="linenum">1015</span></a>      }
<a name="l1016"><span class="linenum">1016</span></a>  
<a name="l1017"><span class="linenum">1017</span></a>  
<a name="l1018"><span class="linenum">1018</span></a>      <span class="comment">/**</span>
<a name="l1019"><span class="linenum">1019</span></a>  <span class="comment">     * Check if cross post navigation should stay in the current blog or not.</span>
<a name="l1020"><span class="linenum">1020</span></a>  <span class="comment">     * Also check that this item has at least one category that belongs to the given blog.</span>
<a name="l1021"><span class="linenum">1021</span></a>  <span class="comment">     * If current blog is the same as item blog then, this function will return false, because no need to check.</span>
<a name="l1022"><span class="linenum">1022</span></a>  <span class="comment">     *</span>
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">     * @param string 'auto' value means this call needs to decide to stay in the current blog or not. Every other value will return false!</span>
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment">     * @param integer the given &quot;current&quot; blog ID (its usually the current blog id)</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">     * @return boolean true if we have to stay in the current blog, false otherwise</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">     */</span>
<a name="l1027"><span class="linenum">1027</span></a>  	function <a class="function" onClick="logFunction('check_cross_post_nav')" href="../../../_functions/check_cross_post_nav.html" onMouseOver="funcPopup(event,'check_cross_post_nav')">check_cross_post_nav</a>( <a class="var it379" onMouseOver="hilite(379)" onMouseOut="lolite()" onClick="logVariable('target_blog')" href="../../../_variables/target_blog.html">$target_blog</a>, <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> )
<a name="l1028"><span class="linenum">1028</span></a>      {
<a name="l1029"><span class="linenum">1029</span></a>          global <a class="var it4352" onMouseOver="hilite(4352)" onMouseOut="lolite()" onClick="logVariable('cross_post_nav_in_same_blog')" href="../../../_variables/cross_post_nav_in_same_blog.html">$cross_post_nav_in_same_blog</a>;
<a name="l1030"><span class="linenum">1030</span></a>  
<a name="l1031"><span class="linenum">1031</span></a>          if( <a class="var it379" onMouseOver="hilite(379)" onMouseOut="lolite()" onClick="logVariable('target_blog')" href="../../../_variables/target_blog.html">$target_blog</a> != 'auto' )
<a name="l1032"><span class="linenum">1032</span></a>          { // target_blog is not set to auto, we have to navigate to the item's main cat's blog.
<a name="l1033"><span class="linenum">1033</span></a>              return false;
<a name="l1034"><span class="linenum">1034</span></a>          }
<a name="l1035"><span class="linenum">1035</span></a>  
<a name="l1036"><span class="linenum">1036</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l1037"><span class="linenum">1037</span></a>          if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;ID == <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> )
<a name="l1038"><span class="linenum">1038</span></a>          { // item's blog is the same as target blog
<a name="l1039"><span class="linenum">1039</span></a>              return false;
<a name="l1040"><span class="linenum">1040</span></a>          }
<a name="l1041"><span class="linenum">1041</span></a>  
<a name="l1042"><span class="linenum">1042</span></a>          if( ! <a class="var it4352" onMouseOver="hilite(4352)" onMouseOut="lolite()" onClick="logVariable('cross_post_nav_in_same_blog')" href="../../../_variables/cross_post_nav_in_same_blog.html">$cross_post_nav_in_same_blog</a> )
<a name="l1043"><span class="linenum">1043</span></a>          { // we have to navigate to the item's main cat's blog.
<a name="l1044"><span class="linenum">1044</span></a>              return false;
<a name="l1045"><span class="linenum">1045</span></a>          }
<a name="l1046"><span class="linenum">1046</span></a>  
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment">        // return true if current item has at least one category, which belongs to the corresponding blog, false otherwise</span>
<a name="l1048"><span class="linenum">1048</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_part_of_blog')" href="../../../_functions/is_part_of_blog.html" onMouseOver="funcPopup(event,'is_part_of_blog')">is_part_of_blog</a>( <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('blog_ID')" href="../../../_variables/blog_ID.html">$blog_ID</a> );
<a name="l1049"><span class="linenum">1049</span></a>      }
<a name="l1050"><span class="linenum">1050</span></a>  
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>      <span class="comment">/**</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment">     * Template function: display permalink for item</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">     *</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment">     * Note: This actually only outputs the URL, to display a real link, use {@link Item::permanent_link()}</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">     *</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     * @param string 'post', 'archive#id' or 'archive#title'</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">     * @param string url to use</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">     */</span>
<a name="l1060"><span class="linenum">1060</span></a>  	function <a class="function" onClick="logFunction('permanent_url')" href="../../../_functions/permanent_url.html" onMouseOver="funcPopup(event,'permanent_url')">permanent_url</a>( <a class="var it304" onMouseOver="hilite(304)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> = '', <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>='' )
<a name="l1061"><span class="linenum">1061</span></a>      {
<a name="l1062"><span class="linenum">1062</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( <a class="var it304" onMouseOver="hilite(304)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a>, <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> );
<a name="l1063"><span class="linenum">1063</span></a>      }
<a name="l1064"><span class="linenum">1064</span></a>  
<a name="l1065"><span class="linenum">1065</span></a>  
<a name="l1066"><span class="linenum">1066</span></a>      <span class="comment">/**</span>
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">     * Returns a permalink link to the Item</span>
<a name="l1068"><span class="linenum">1068</span></a>  <span class="comment">     *</span>
<a name="l1069"><span class="linenum">1069</span></a>  <span class="comment">     * Note: If you only want the permalink URL, use {@link Item::get_permanent_url()}</span>
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">     *</span>
<a name="l1071"><span class="linenum">1071</span></a>  <span class="comment">     * @param string link text or special value: '#', '#icon#', '#text#', '#title#' '... $title$ ...'</span>
<a name="l1072"><span class="linenum">1072</span></a>  <span class="comment">     * @param string link title</span>
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment">     * @param string class name</span>
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment">     */</span>
<a name="l1075"><span class="linenum">1075</span></a>  	function <a class="function" onClick="logFunction('get_permanent_link')" href="../../../_functions/get_permanent_link.html" onMouseOver="funcPopup(event,'get_permanent_link')">get_permanent_link</a>( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = '#', <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = '#', <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = '', <a class="var it379" onMouseOver="hilite(379)" onMouseOut="lolite()" onClick="logVariable('target_blog')" href="../../../_variables/target_blog.html">$target_blog</a> = '', <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../../_variables/post_navigation.html">$post_navigation</a> = '', <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a> = NULL )
<a name="l1076"><span class="linenum">1076</span></a>      {
<a name="l1077"><span class="linenum">1077</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>;
<a name="l1078"><span class="linenum">1078</span></a>  
<a name="l1079"><span class="linenum">1079</span></a>          switch( <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> )
<a name="l1080"><span class="linenum">1080</span></a>          {
<a name="l1081"><span class="linenum">1081</span></a>              case '#':
<a name="l1082"><span class="linenum">1082</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'permalink' ).<a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Permalink');
<a name="l1083"><span class="linenum">1083</span></a>                  break;
<a name="l1084"><span class="linenum">1084</span></a>  
<a name="l1085"><span class="linenum">1085</span></a>              case '#icon#':
<a name="l1086"><span class="linenum">1086</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('get_icon')" href="../../../_functions/get_icon.html" onMouseOver="funcPopup(event,'get_icon')">get_icon</a>( 'permalink' );
<a name="l1087"><span class="linenum">1087</span></a>                  break;
<a name="l1088"><span class="linenum">1088</span></a>  
<a name="l1089"><span class="linenum">1089</span></a>              case '#text#':
<a name="l1090"><span class="linenum">1090</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Permalink');
<a name="l1091"><span class="linenum">1091</span></a>                  break;
<a name="l1092"><span class="linenum">1092</span></a>  
<a name="l1093"><span class="linenum">1093</span></a>              case '#title#':
<a name="l1094"><span class="linenum">1094</span></a>                  <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> );
<a name="l1095"><span class="linenum">1095</span></a>                  break;
<a name="l1096"><span class="linenum">1096</span></a>          }
<a name="l1097"><span class="linenum">1097</span></a>  
<a name="l1098"><span class="linenum">1098</span></a>          if( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> == '#' ) <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('T_')" href="../../../_functions/t_.html" onMouseOver="funcPopup(event,'t_')">T_</a>('Permanent link to full entry');
<a name="l1099"><span class="linenum">1099</span></a>  
<a name="l1100"><span class="linenum">1100</span></a>          <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = '';
<a name="l1101"><span class="linenum">1101</span></a>          <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> = '';
<a name="l1102"><span class="linenum">1102</span></a>          if( !empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_cross_post_nav')" href="../../../_functions/check_cross_post_nav.html" onMouseOver="funcPopup(event,'check_cross_post_nav')">check_cross_post_nav</a>( <a class="var it379" onMouseOver="hilite(379)" onMouseOut="lolite()" onClick="logVariable('target_blog')" href="../../../_variables/target_blog.html">$target_blog</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l1103"><span class="linenum">1103</span></a>          {
<a name="l1104"><span class="linenum">1104</span></a>              <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'permalinks' );
<a name="l1105"><span class="linenum">1105</span></a>              <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l1106"><span class="linenum">1106</span></a>          }
<a name="l1107"><span class="linenum">1107</span></a>  
<a name="l1108"><span class="linenum">1108</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( <a class="var it385" onMouseOver="hilite(385)" onMouseOut="lolite()" onClick="logVariable('permalink_type')" href="../../../_variables/permalink_type.html">$permalink_type</a>, <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> );
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment">        // add navigation param if necessary</span>
<a name="l1110"><span class="linenum">1110</span></a>          <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_navigation_param')" href="../../../_functions/add_navigation_param.html" onMouseOver="funcPopup(event,'add_navigation_param')">add_navigation_param</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('post_navigation')" href="../../../_variables/post_navigation.html">$post_navigation</a>, <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a> );
<a name="l1111"><span class="linenum">1111</span></a>  
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment">        // Display as link</span>
<a name="l1113"><span class="linenum">1113</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = '&lt;a href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot; title=&quot;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&quot;';
<a name="l1114"><span class="linenum">1114</span></a>          if( !empty( <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> ) ) <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= ' class=&quot;'.<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>.'&quot;';
<a name="l1115"><span class="linenum">1115</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&gt;'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>$', <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/title.html">title</a> ), <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../_variables/text.html">$text</a> ).'&lt;/a&gt;';
<a name="l1116"><span class="linenum">1116</span></a>  
<a name="l1117"><span class="linenum">1117</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1118"><span class="linenum">1118</span></a>      }
<a name="l1119"><span class="linenum">1119</span></a>  
<a name="l1120"><span class="linenum">1120</span></a>  
<a name="l1121"><span class="linenum">1121</span></a>      <span class="comment">/**</span>
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment">     * Displays a permalink link to the Item</span>
<a name="l1123"><span class="linenum">1123</span></a>  <span class="comment">     *</span>
<a name="l1124"><span class="linenum">1124</span></a>  <span class="comment">     * Note: If you only want the permalink URL, use {@link Item::permanent_url()}</span>
<a name="l1125"><span class="linenum">1125</span></a>  <span class="comment">     *</span>
<a name="l1126"><span class="linenum">1126</span></a>  <span class="comment">     * @param string link text or special value:</span>
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment">     * @param string link title</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">     * @param string class name</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment">     */</span>
<a name="l1130"><span class="linenum">1130</span></a>  	function <a class="function" onClick="logFunction('permanent_link')" href="../../../_functions/permanent_link.html" onMouseOver="funcPopup(event,'permanent_link')">permanent_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1131"><span class="linenum">1131</span></a>      {
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l1133"><span class="linenum">1133</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1134"><span class="linenum">1134</span></a>                  'before'      =&gt; '',
<a name="l1135"><span class="linenum">1135</span></a>                  'after'       =&gt; '',
<a name="l1136"><span class="linenum">1136</span></a>                  'text'        =&gt; '#',    // possible special values: '#', '#icon#', '#text#', '#title#'
<a name="l1137"><span class="linenum">1137</span></a>                  'title'       =&gt; '#',
<a name="l1138"><span class="linenum">1138</span></a>                  'class'       =&gt; '',
<a name="l1139"><span class="linenum">1139</span></a>                  'target_blog' =&gt; '',
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment">            //    'format'      =&gt; 'htmlbody',</span>
<a name="l1141"><span class="linenum">1141</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1142"><span class="linenum">1142</span></a>  
<a name="l1143"><span class="linenum">1143</span></a>          <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../_variables/link.html">$link</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_link')" href="../../../_functions/get_permanent_link.html" onMouseOver="funcPopup(event,'get_permanent_link')">get_permanent_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['text'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['class'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['target_blog'] );
<a name="l1144"><span class="linenum">1144</span></a>  
<a name="l1145"><span class="linenum">1145</span></a>          if( !empty( <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../_variables/link.html">$link</a> ) )
<a name="l1146"><span class="linenum">1146</span></a>          {
<a name="l1147"><span class="linenum">1147</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l1148"><span class="linenum">1148</span></a>              echo <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../../_variables/link.html">$link</a>;
<a name="l1149"><span class="linenum">1149</span></a>              echo <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l1150"><span class="linenum">1150</span></a>          }
<a name="l1151"><span class="linenum">1151</span></a>      }
<a name="l1152"><span class="linenum">1152</span></a>  
<a name="l1153"><span class="linenum">1153</span></a>  
<a name="l1154"><span class="linenum">1154</span></a>      <span class="comment">/**</span>
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment">     * Template function: display title for item and link to related URL</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment">     */</span>
<a name="l1157"><span class="linenum">1157</span></a>  	function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1158"><span class="linenum">1158</span></a>      {
<a name="l1159"><span class="linenum">1159</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1160"><span class="linenum">1160</span></a>                  'target_blog'  =&gt; 'auto',
<a name="l1161"><span class="linenum">1161</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1162"><span class="linenum">1162</span></a>          echo <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>);
<a name="l1163"><span class="linenum">1163</span></a>      }
<a name="l1164"><span class="linenum">1164</span></a>  
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>      <span class="comment">/**</span>
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment">     * Get &quot;nice&quot; title of the Item</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment">     * @return string</span>
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment">     */</span>
<a name="l1170"><span class="linenum">1170</span></a>  	function <a class="function" onClick="logFunction('get_title')" href="../../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1171"><span class="linenum">1171</span></a>      {
<a name="l1172"><span class="linenum">1172</span></a>          global <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../../_variables/ReqURL.html">$ReqURL</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../_variables/MainList.html">$MainList</a>;
<a name="l1173"><span class="linenum">1173</span></a>  
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">        // Set default post navigation</span>
<a name="l1175"><span class="linenum">1175</span></a>          <a class="var it9984" onMouseOver="hilite(9984)" onMouseOut="lolite()" onClick="logVariable('def_post_navigation')" href="../../../_variables/def_post_navigation.html">$def_post_navigation</a> = empty( <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a> ) ? 'same_blog' : <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'post_navigation' );
<a name="l1176"><span class="linenum">1176</span></a>  
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment">        // Make sure we are not missing any param:</span>
<a name="l1178"><span class="linenum">1178</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1179"><span class="linenum">1179</span></a>                  'before'          =&gt; '',
<a name="l1180"><span class="linenum">1180</span></a>                  'after'           =&gt; '',
<a name="l1181"><span class="linenum">1181</span></a>                  'before_title'    =&gt; '',
<a name="l1182"><span class="linenum">1182</span></a>                  'after_title'     =&gt; '',
<a name="l1183"><span class="linenum">1183</span></a>                  'format'          =&gt; 'htmlbody',
<a name="l1184"><span class="linenum">1184</span></a>                  'link_type'       =&gt; '#',
<a name="l1185"><span class="linenum">1185</span></a>                  'link_class'      =&gt; '#',
<a name="l1186"><span class="linenum">1186</span></a>                  'max_length'      =&gt; '',
<a name="l1187"><span class="linenum">1187</span></a>                  'target_blog'     =&gt; '',
<a name="l1188"><span class="linenum">1188</span></a>                  'nav_target'      =&gt; NULL,
<a name="l1189"><span class="linenum">1189</span></a>                  'post_navigation' =&gt; <a class="var it9984" onMouseOver="hilite(9984)" onMouseOut="lolite()" onClick="logVariable('def_post_navigation')" href="../../../_variables/def_post_navigation.html">$def_post_navigation</a>,
<a name="l1190"><span class="linenum">1190</span></a>                  'title_field'     =&gt; 'title',
<a name="l1191"><span class="linenum">1191</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1192"><span class="linenum">1192</span></a>  
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment">        // Set post navigation target</span>
<a name="l1194"><span class="linenum">1194</span></a>          <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a> = ( ( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['nav_target'] === NULL ) &amp;&amp; isset(<a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../_variables/MainList.html">$MainList</a>) &amp;&amp; !empty( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('nav_target')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../../_variables/nav_target.html">nav_target</a> ) ) ? <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../_variables/MainList.html">$MainList</a>-&gt;<a onClick="logVariable('nav_target')" class="var it10736" onMouseOver="hilite(10736)" onMouseOut="lolite()" href="../../../_variables/nav_target.html">nav_target</a> : <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['nav_target'];
<a name="l1195"><span class="linenum">1195</span></a>  
<a name="l1196"><span class="linenum">1196</span></a>          <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = '';
<a name="l1197"><span class="linenum">1197</span></a>          if( !empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_cross_post_nav')" href="../../../_functions/check_cross_post_nav.html" onMouseOver="funcPopup(event,'check_cross_post_nav')">check_cross_post_nav</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['target_blog'], <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a onClick="logVariable('ID')" class="var it10696" onMouseOver="hilite(10696)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a> ) )
<a name="l1198"><span class="linenum">1198</span></a>          {
<a name="l1199"><span class="linenum">1199</span></a>              <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('Blog')" href="../../../_variables/Blog.html">$Blog</a>-&gt;<a class="function" onClick="logFunction('gen_blogurl')" href="../../../_functions/gen_blogurl.html" onMouseOver="funcPopup(event,'gen_blogurl')">gen_blogurl</a>();
<a name="l1200"><span class="linenum">1200</span></a>          }
<a name="l1201"><span class="linenum">1201</span></a>  
<a name="l1202"><span class="linenum">1202</span></a>          <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['title_field'], <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['format'] );
<a name="l1203"><span class="linenum">1203</span></a>  
<a name="l1204"><span class="linenum">1204</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['max_length'] != '' )
<a name="l1205"><span class="linenum">1205</span></a>          {    // Crop long title
<a name="l1206"><span class="linenum">1206</span></a>              <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('strmaxlen')" href="../../../_functions/strmaxlen.html" onMouseOver="funcPopup(event,'strmaxlen')">strmaxlen</a>( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>, <a class="phpfunction" onClick="logFunction('intval')" href="../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['max_length']) );
<a name="l1207"><span class="linenum">1207</span></a>          }
<a name="l1208"><span class="linenum">1208</span></a>  
<a name="l1209"><span class="linenum">1209</span></a>          if( empty( <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> ) )
<a name="l1210"><span class="linenum">1210</span></a>          {
<a name="l1211"><span class="linenum">1211</span></a>              return;
<a name="l1212"><span class="linenum">1212</span></a>          }
<a name="l1213"><span class="linenum">1213</span></a>  
<a name="l1214"><span class="linenum">1214</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_type'] == '#' )
<a name="l1215"><span class="linenum">1215</span></a>          {    // Use default link type from settings:
<a name="l1216"><span class="linenum">1216</span></a>              if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_intro')" href="../../../_functions/is_intro.html" onMouseOver="funcPopup(event,'is_intro')">is_intro</a>() )
<a name="l1217"><span class="linenum">1217</span></a>              {    // This is an intro, do not link title by default:
<a name="l1218"><span class="linenum">1218</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_type'] = 'none';
<a name="l1219"><span class="linenum">1219</span></a>              }
<a name="l1220"><span class="linenum">1220</span></a>              elseif( <a class="function" onClick="logFunction('is_same_url')" href="../../../_functions/is_same_url.html" onMouseOver="funcPopup(event,'is_same_url')">is_same_url</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( '', <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a>, '&amp;' ), <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('ReqURL')" href="../../../_variables/ReqURL.html">$ReqURL</a> ) )
<a name="l1221"><span class="linenum">1221</span></a>              {    // We are on the single url already:
<a name="l1222"><span class="linenum">1222</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_type'] = 'none';
<a name="l1223"><span class="linenum">1223</span></a>              }
<a name="l1224"><span class="linenum">1224</span></a>              else if( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a> == 3000 )
<a name="l1225"><span class="linenum">1225</span></a>              {    // tblue&gt; This is a sidebar link, link to its &quot;link to&quot; URL by default:
<a name="l1226"><span class="linenum">1226</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_type'] = 'linkto_url';
<a name="l1227"><span class="linenum">1227</span></a>              }
<a name="l1228"><span class="linenum">1228</span></a>              else
<a name="l1229"><span class="linenum">1229</span></a>              {    // This is a normal post: use default link strategy from Blog settings:
<a name="l1230"><span class="linenum">1230</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;get_Blog();
<a name="l1231"><span class="linenum">1231</span></a>                  <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_type'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>( 'title_link_type' );
<a name="l1232"><span class="linenum">1232</span></a>              }
<a name="l1233"><span class="linenum">1233</span></a>          }
<a name="l1234"><span class="linenum">1234</span></a>  
<a name="l1235"><span class="linenum">1235</span></a>          switch( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_type'] )
<a name="l1236"><span class="linenum">1236</span></a>          {
<a name="l1237"><span class="linenum">1237</span></a>              case 'auto':
<a name="l1238"><span class="linenum">1238</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = ( empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a>) ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>() : <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a> );
<a name="l1239"><span class="linenum">1239</span></a>                  break;
<a name="l1240"><span class="linenum">1240</span></a>  
<a name="l1241"><span class="linenum">1241</span></a>              case 'permalink':
<a name="l1242"><span class="linenum">1242</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>( '', <a class="var it386" onMouseOver="hilite(386)" onMouseOut="lolite()" onClick="logVariable('blogurl')" href="../../../_variables/blogurl.html">$blogurl</a> );
<a name="l1243"><span class="linenum">1243</span></a>                  break;
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>              case 'linkto_url':
<a name="l1246"><span class="linenum">1246</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('url')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/url.html">url</a>;
<a name="l1247"><span class="linenum">1247</span></a>                  break;
<a name="l1248"><span class="linenum">1248</span></a>  
<a name="l1249"><span class="linenum">1249</span></a>              case 'admin_view':
<a name="l1250"><span class="linenum">1250</span></a>                  <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = '?ctrl=items&amp;amp;blog='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>().'&amp;amp;p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l1251"><span class="linenum">1251</span></a>                  break;
<a name="l1252"><span class="linenum">1252</span></a>  
<a name="l1253"><span class="linenum">1253</span></a>              case 'none':
<a name="l1254"><span class="linenum">1254</span></a>              default:
<a name="l1255"><span class="linenum">1255</span></a>          }
<a name="l1256"><span class="linenum">1256</span></a>  
<a name="l1257"><span class="linenum">1257</span></a>          if( !empty( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> ) )
<a name="l1258"><span class="linenum">1258</span></a>          { // url is set, also add navigation param if it is necessary
<a name="l1259"><span class="linenum">1259</span></a>              <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_navigation_param')" href="../../../_functions/add_navigation_param.html" onMouseOver="funcPopup(event,'add_navigation_param')">add_navigation_param</a>( <a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['post_navigation'], <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('nav_target')" href="../../../_variables/nav_target.html">$nav_target</a> );
<a name="l1260"><span class="linenum">1260</span></a>          }
<a name="l1261"><span class="linenum">1261</span></a>  
<a name="l1262"><span class="linenum">1262</span></a>          <a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a> = '';
<a name="l1263"><span class="linenum">1263</span></a>          if( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_class'] != '#' )
<a name="l1264"><span class="linenum">1264</span></a>          {
<a name="l1265"><span class="linenum">1265</span></a>              <a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a> = ' class=&quot;'.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_class'].'&quot;';
<a name="l1266"><span class="linenum">1266</span></a>          }
<a name="l1267"><span class="linenum">1267</span></a>  
<a name="l1268"><span class="linenum">1268</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before'];
<a name="l1269"><span class="linenum">1269</span></a>          <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a> = <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before_title'].<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after_title'];
<a name="l1270"><span class="linenum">1270</span></a>          if( !empty(<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>) )
<a name="l1271"><span class="linenum">1271</span></a>          {
<a name="l1272"><span class="linenum">1272</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= '&lt;a href=&quot;'.<a class="var it208" onMouseOver="hilite(208)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>.'&quot;'.<a class="var it1122" onMouseOver="hilite(1122)" onMouseOut="lolite()" onClick="logVariable('link_class')" href="../../../_variables/link_class.html">$link_class</a>.'&gt;'.<a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>.'&lt;/a&gt;';
<a name="l1273"><span class="linenum">1273</span></a>          }
<a name="l1274"><span class="linenum">1274</span></a>          else
<a name="l1275"><span class="linenum">1275</span></a>          {
<a name="l1276"><span class="linenum">1276</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it112" onMouseOver="hilite(112)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../../_variables/title.html">$title</a>;
<a name="l1277"><span class="linenum">1277</span></a>          }
<a name="l1278"><span class="linenum">1278</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l1279"><span class="linenum">1279</span></a>          return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1280"><span class="linenum">1280</span></a>      }
<a name="l1281"><span class="linenum">1281</span></a>  
<a name="l1282"><span class="linenum">1282</span></a>  
<a name="l1283"><span class="linenum">1283</span></a>      <span class="comment">/**</span>
<a name="l1284"><span class="linenum">1284</span></a>  <span class="comment">     * Template function: display type of item</span>
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment">     *</span>
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">     * @param string</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment">     * @param string</span>
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment">     * @param string Output format, see {@link format_to_output()}</span>
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">     */</span>
<a name="l1290"><span class="linenum">1290</span></a>  	function <a class="function" onClick="logFunction('type')" href="../../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>( <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a> = '', <a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a> = '', <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l1291"><span class="linenum">1291</span></a>      {
<a name="l1292"><span class="linenum">1292</span></a>          <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('ItemTypeCache')" href="../../../_variables/ItemTypeCache.html">$ItemTypeCache</a> = &amp; get_ItemTypeCache();
<a name="l1293"><span class="linenum">1293</span></a>          <a class="var it1714" onMouseOver="hilite(1714)" onMouseOut="lolite()" onClick="logVariable('Element')" href="../../../_variables/Element.html">$Element</a> = &amp; <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('ItemTypeCache')" href="../../../_variables/ItemTypeCache.html">$ItemTypeCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ityp_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ityp_ID.html">ityp_ID</a>, true, false );
<a name="l1294"><span class="linenum">1294</span></a>          if( !<a class="var it1714" onMouseOver="hilite(1714)" onMouseOut="lolite()" onClick="logVariable('Element')" href="../../../_variables/Element.html">$Element</a> )
<a name="l1295"><span class="linenum">1295</span></a>          { // No status:
<a name="l1296"><span class="linenum">1296</span></a>              return;
<a name="l1297"><span class="linenum">1297</span></a>          }
<a name="l1298"><span class="linenum">1298</span></a>  
<a name="l1299"><span class="linenum">1299</span></a>          <a class="var it8645" onMouseOver="hilite(8645)" onMouseOut="lolite()" onClick="logVariable('type_name')" href="../../../_variables/type_name.html">$type_name</a> = <a class="var it1714" onMouseOver="hilite(1714)" onMouseOut="lolite()" onClick="logVariable('Element')" href="../../../_variables/Element.html">$Element</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('name');
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>          if( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> == 'raw' )
<a name="l1302"><span class="linenum">1302</span></a>          {
<a name="l1303"><span class="linenum">1303</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('disp')" href="../../../_functions/disp.html" onMouseOver="funcPopup(event,'disp')">disp</a>( <a class="var it8645" onMouseOver="hilite(8645)" onMouseOut="lolite()" onClick="logVariable('type_name')" href="../../../_variables/type_name.html">$type_name</a>, 'raw' );
<a name="l1304"><span class="linenum">1304</span></a>          }
<a name="l1305"><span class="linenum">1305</span></a>          else
<a name="l1306"><span class="linenum">1306</span></a>          {
<a name="l1307"><span class="linenum">1307</span></a>              echo <a class="var it375" onMouseOver="hilite(375)" onMouseOut="lolite()" onClick="logVariable('before')" href="../../../_variables/before.html">$before</a>.<a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="var it8645" onMouseOver="hilite(8645)" onMouseOut="lolite()" onClick="logVariable('type_name')" href="../../../_variables/type_name.html">$type_name</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> ).<a class="var it376" onMouseOver="hilite(376)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../../_variables/after.html">$after</a>;
<a name="l1308"><span class="linenum">1308</span></a>          }
<a name="l1309"><span class="linenum">1309</span></a>      }
<a name="l1310"><span class="linenum">1310</span></a>  
<a name="l1311"><span class="linenum">1311</span></a>  
<a name="l1312"><span class="linenum">1312</span></a>      <span class="comment">/**</span>
<a name="l1313"><span class="linenum">1313</span></a>  <span class="comment">     * Template tag: get excerpt </span>
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment">     * This light version does display only. It never tries to auto-generate the excerpt.</span>
<a name="l1315"><span class="linenum">1315</span></a>  <span class="comment">     *</span>
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment">     *  May be used in ItemLight lists such as sitemaps, feeds, recent posts, post widgets where the exceprt might be used as a title, etc.</span>
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment">     *</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment">     * @param string filename to use to display more</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment">     * @return string</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment">     */</span>
<a name="l1321"><span class="linenum">1321</span></a>  	function <a class="function" onClick="logFunction('get_excerpt')" href="../../../_functions/get_excerpt.html" onMouseOver="funcPopup(event,'get_excerpt')">get_excerpt</a>( <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> = 'htmlbody' )
<a name="l1322"><span class="linenum">1322</span></a>      {
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">        // Character conversions + old DBs may have tags in excerpts, so we strip them:</span>
<a name="l1324"><span class="linenum">1324</span></a>          return <a class="function" onClick="logFunction('format_to_output')" href="../../../_functions/format_to_output.html" onMouseOver="funcPopup(event,'format_to_output')">format_to_output</a>( <a class="function" onClick="logFunction('utf8_strip_tags')" href="../../../_functions/utf8_strip_tags.html" onMouseOver="funcPopup(event,'utf8_strip_tags')">utf8_strip_tags</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('excerpt')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/excerpt.html">excerpt</a> ), <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> );
<a name="l1325"><span class="linenum">1325</span></a>      }
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>  
<a name="l1328"><span class="linenum">1328</span></a>      <span class="comment">/**</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment">     * Set param value</span>
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment">     *</span>
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment">     * By default, all values will be considered strings</span>
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment">     *</span>
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment">     * @todo extra_cat_IDs recording</span>
<a name="l1334"><span class="linenum">1334</span></a>  <span class="comment">     *</span>
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment">     * @param string parameter name</span>
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment">     * @param mixed parameter value</span>
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment">     * @param boolean true to set to NULL if empty value</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment">     * @return boolean true, if a value has been set; false if it has not changed</span>
<a name="l1339"><span class="linenum">1339</span></a>  <span class="comment">     */</span>
<a name="l1340"><span class="linenum">1340</span></a>  	function <a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> = false )
<a name="l1341"><span class="linenum">1341</span></a>      {
<a name="l1342"><span class="linenum">1342</span></a>          switch( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a> )
<a name="l1343"><span class="linenum">1343</span></a>          {
<a name="l1344"><span class="linenum">1344</span></a>              case 'main_cat_ID':
<a name="l1345"><span class="linenum">1345</span></a>                  <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'main_cat_ID', 'number', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, false );
<a name="l1346"><span class="linenum">1346</span></a>  <span class="comment">                // re-set the extracat ids to make sure main cat is in extracat list and there are no duplicates</span>
<a name="l1347"><span class="linenum">1347</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>( 'extra_cat_IDs', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a>, false );
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment">                // Invalidate derived property:</span>
<a name="l1349"><span class="linenum">1349</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blog_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/blog_ID.html">blog_ID</a> = NULL;
<a name="l1350"><span class="linenum">1350</span></a>                  unset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a>); <span class="comment">// dereference</span>
<a name="l1351"><span class="linenum">1351</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_Chapter')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_Chapter.html">main_Chapter</a> = NULL;
<a name="l1352"><span class="linenum">1352</span></a>                  unset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>);
<a name="l1353"><span class="linenum">1353</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a> = NULL;
<a name="l1354"><span class="linenum">1354</span></a>                  return <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>;
<a name="l1355"><span class="linenum">1355</span></a>  
<a name="l1356"><span class="linenum">1356</span></a>              case 'extra_cat_IDs':
<a name="l1357"><span class="linenum">1357</span></a>  <span class="comment">                // ARRAY! We do not record this change (yet)</span>
<a name="l1358"><span class="linenum">1358</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a> = <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>;
<a name="l1359"><span class="linenum">1359</span></a>  <span class="comment">                // make sure main cat is in extracat list and there are no duplicates</span>
<a name="l1360"><span class="linenum">1360</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('main_cat_ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/main_cat_ID.html">main_cat_ID</a>;
<a name="l1361"><span class="linenum">1361</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extra_cat_IDs')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/extra_cat_IDs.html">extra_cat_IDs</a> );
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">                // Mark that extracats has been updated</span>
<a name="l1363"><span class="linenum">1363</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('dbchanges_flags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/dbchanges_flags.html">dbchanges_flags</a>['extra_cat_IDs'] = true;
<a name="l1364"><span class="linenum">1364</span></a>                  return true; <span class="comment">// always return true, since we don't know what was the previous value</span>
<a name="l1365"><span class="linenum">1365</span></a>  
<a name="l1366"><span class="linenum">1366</span></a>              case 'issue_date':
<a name="l1367"><span class="linenum">1367</span></a>              case 'datestart':
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment">                // Remove seconds from issue date and start date</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">                // fp&gt; TODO: this should only be done if the date is in the future. If it's in the past there are no sideeffects to having seconds.</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment">                // asimo&gt; Why do we have two parameter with the same content if only one is stored in the database?</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">                // Also it doesn't make sense to remove seconds from a db date field because the database format has seconds anyway.</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment">                // If we remove seconds from datstart field, then datestart will be always inserted into the dbchagnes even if it was not changed.</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment">                // If we don't want seconds in the end of the datestart then we need to remove it in the itemlight constructor as well.</span>
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment">                // asimo&gt; We have to set seconds to '00' and not remove them, this way the posts can appear right after creating, and the format is OK as well.</span>
<a name="l1375"><span class="linenum">1375</span></a>                  <a class="var it9985" onMouseOver="hilite(9985)" onMouseOut="lolite()" onClick="logVariable('parvalue_empty_seconds')" href="../../../_variables/parvalue_empty_seconds.html">$parvalue_empty_seconds</a> = <a class="function" onClick="logFunction('remove_seconds')" href="../../../_functions/remove_seconds.html" onMouseOver="funcPopup(event,'remove_seconds')">remove_seconds</a>(<a class="phpfunction" onClick="logFunction('strtotime')" href="../../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>), 'Y-m-d H:i:s');
<a name="l1376"><span class="linenum">1376</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('issue_date')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/issue_date.html">issue_date</a> = <a class="var it9985" onMouseOver="hilite(9985)" onMouseOut="lolite()" onClick="logVariable('parvalue_empty_seconds')" href="../../../_variables/parvalue_empty_seconds.html">$parvalue_empty_seconds</a>;
<a name="l1377"><span class="linenum">1377</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( 'datestart', 'date', <a class="var it9985" onMouseOver="hilite(9985)" onMouseOut="lolite()" onClick="logVariable('parvalue_empty_seconds')" href="../../../_variables/parvalue_empty_seconds.html">$parvalue_empty_seconds</a>, false );
<a name="l1378"><span class="linenum">1378</span></a>  
<a name="l1379"><span class="linenum">1379</span></a>              case 'ityp_ID':
<a name="l1380"><span class="linenum">1380</span></a>              case 'canonical_slug_ID':
<a name="l1381"><span class="linenum">1381</span></a>              case 'tiny_slug_ID':
<a name="l1382"><span class="linenum">1382</span></a>              case 'dateset':
<a name="l1383"><span class="linenum">1383</span></a>              case 'excerpt_autogenerated':
<a name="l1384"><span class="linenum">1384</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, 'number', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, true );
<a name="l1385"><span class="linenum">1385</span></a>  
<a name="l1386"><span class="linenum">1386</span></a>              default:
<a name="l1387"><span class="linenum">1387</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_param')" href="../../../_functions/set_param.html" onMouseOver="funcPopup(event,'set_param')">set_param</a>( <a class="var it1648" onMouseOver="hilite(1648)" onMouseOut="lolite()" onClick="logVariable('parname')" href="../../../_variables/parname.html">$parname</a>, 'string', <a class="var it1649" onMouseOver="hilite(1649)" onMouseOut="lolite()" onClick="logVariable('parvalue')" href="../../../_variables/parvalue.html">$parvalue</a>, <a class="var it1650" onMouseOver="hilite(1650)" onMouseOut="lolite()" onClick="logVariable('make_null')" href="../../../_variables/make_null.html">$make_null</a> );
<a name="l1388"><span class="linenum">1388</span></a>          }
<a name="l1389"><span class="linenum">1389</span></a>      }
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>  
<a name="l1392"><span class="linenum">1392</span></a>      <span class="comment">/**</span>
<a name="l1393"><span class="linenum">1393</span></a>  <span class="comment">     * Get the Blog object for the Item.</span>
<a name="l1394"><span class="linenum">1394</span></a>  <span class="comment">     *</span>
<a name="l1395"><span class="linenum">1395</span></a>  <span class="comment">     * @return Blog</span>
<a name="l1396"><span class="linenum">1396</span></a>  <span class="comment">     */</span>
<a name="l1397"><span class="linenum">1397</span></a>      function &amp; get_Blog()
<a name="l1398"><span class="linenum">1398</span></a>      {
<a name="l1399"><span class="linenum">1399</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>) )
<a name="l1400"><span class="linenum">1400</span></a>          {
<a name="l1401"><span class="linenum">1401</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>();
<a name="l1402"><span class="linenum">1402</span></a>          }
<a name="l1403"><span class="linenum">1403</span></a>  
<a name="l1404"><span class="linenum">1404</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>;
<a name="l1405"><span class="linenum">1405</span></a>      }
<a name="l1406"><span class="linenum">1406</span></a>  
<a name="l1407"><span class="linenum">1407</span></a>  
<a name="l1408"><span class="linenum">1408</span></a>      <span class="comment">/**</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">     * Load the Blog object for the Item, without returning it.</span>
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">     *</span>
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">     * This is needed for {@link Results} object callbacks.</span>
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment">     */</span>
<a name="l1413"><span class="linenum">1413</span></a>  	function <a class="function" onClick="logFunction('load_Blog')" href="../../../_functions/load_blog.html" onMouseOver="funcPopup(event,'load_blog')">load_Blog</a>()
<a name="l1414"><span class="linenum">1414</span></a>      {
<a name="l1415"><span class="linenum">1415</span></a>          if( <a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a>) )
<a name="l1416"><span class="linenum">1416</span></a>          {
<a name="l1417"><span class="linenum">1417</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a> = &amp; get_BlogCache();
<a name="l1418"><span class="linenum">1418</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('Blog')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/Blog.html">Blog</a> = &amp; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('BlogCache')" href="../../../_variables/BlogCache.html">$BlogCache</a>-&gt;get_by_ID( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_blog_ID')" href="../../../_functions/get_blog_id.html" onMouseOver="funcPopup(event,'get_blog_id')">get_blog_ID</a>() );
<a name="l1419"><span class="linenum">1419</span></a>          }
<a name="l1420"><span class="linenum">1420</span></a>      }
<a name="l1421"><span class="linenum">1421</span></a>  
<a name="l1422"><span class="linenum">1422</span></a>  
<a name="l1423"><span class="linenum">1423</span></a>      <span class="comment">/**</span>
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment">     * Get array of tags.</span>
<a name="l1425"><span class="linenum">1425</span></a>  <span class="comment">     *</span>
<a name="l1426"><span class="linenum">1426</span></a>  <span class="comment">     * Load from DB if necessary, prefetching any other tags from MainList/ItemList.</span>
<a name="l1427"><span class="linenum">1427</span></a>  <span class="comment">     *</span>
<a name="l1428"><span class="linenum">1428</span></a>  <span class="comment">     * @return array</span>
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">     */</span>
<a name="l1430"><span class="linenum">1430</span></a>      function &amp; <a class="function" onClick="logFunction('get_tags')" href="../../../_functions/get_tags.html" onMouseOver="funcPopup(event,'get_tags')">get_tags</a>()
<a name="l1431"><span class="linenum">1431</span></a>      {
<a name="l1432"><span class="linenum">1432</span></a>          global <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l1433"><span class="linenum">1433</span></a>  
<a name="l1434"><span class="linenum">1434</span></a>          if( ! isset( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> ) )
<a name="l1435"><span class="linenum">1435</span></a>          {
<a name="l1436"><span class="linenum">1436</span></a>              <a class="var it5767" onMouseOver="hilite(5767)" onMouseOut="lolite()" onClick="logVariable('ItemTagsCache')" href="../../../_variables/ItemTagsCache.html">$ItemTagsCache</a> = &amp; get_ItemTagsCache();
<a name="l1437"><span class="linenum">1437</span></a>              if( ! isset(<a class="var it5767" onMouseOver="hilite(5767)" onMouseOut="lolite()" onClick="logVariable('ItemTagsCache')" href="../../../_variables/ItemTagsCache.html">$ItemTagsCache</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>]) )
<a name="l1438"><span class="linenum">1438</span></a>              {
<a name="l1439"><span class="linenum">1439</span></a>                  <span class="comment">/* Only try to fetch tags for items that are not yet in</span>
<a name="l1440"><span class="linenum">1440</span></a>  <span class="comment">                 * the cache. This will always give at least the ID of</span>
<a name="l1441"><span class="linenum">1441</span></a>  <span class="comment">                 * this Item.</span>
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment">                 */</span>
<a name="l1443"><span class="linenum">1443</span></a>                  <a class="var it9986" onMouseOver="hilite(9986)" onMouseOut="lolite()" onClick="logVariable('prefetch_item_IDs')" href="../../../_variables/prefetch_item_IDs.html">$prefetch_item_IDs</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>( <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_prefetch_itemlist_IDs')" href="../../../_functions/get_prefetch_itemlist_ids.html" onMouseOver="funcPopup(event,'get_prefetch_itemlist_ids')">get_prefetch_itemlist_IDs</a>(), <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>( <a class="var it5767" onMouseOver="hilite(5767)" onMouseOut="lolite()" onClick="logVariable('ItemTagsCache')" href="../../../_variables/ItemTagsCache.html">$ItemTagsCache</a> ) );
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment">                // Assume these items don't have any tags:</span>
<a name="l1445"><span class="linenum">1445</span></a>                  foreach( <a class="var it9986" onMouseOver="hilite(9986)" onMouseOut="lolite()" onClick="logVariable('prefetch_item_IDs')" href="../../../_variables/prefetch_item_IDs.html">$prefetch_item_IDs</a> as <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../_variables/item_ID.html">$item_ID</a> )
<a name="l1446"><span class="linenum">1446</span></a>                  {
<a name="l1447"><span class="linenum">1447</span></a>                      <a class="var it5767" onMouseOver="hilite(5767)" onMouseOut="lolite()" onClick="logVariable('ItemTagsCache')" href="../../../_variables/ItemTagsCache.html">$ItemTagsCache</a>[<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('item_ID')" href="../../../_variables/item_ID.html">$item_ID</a>] = array();
<a name="l1448"><span class="linenum">1448</span></a>                  }
<a name="l1449"><span class="linenum">1449</span></a>  
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment">                // Now fetch the tags:</span>
<a name="l1451"><span class="linenum">1451</span></a>                  foreach( <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_results')" href="../../../_functions/get_results.html" onMouseOver="funcPopup(event,'get_results')">get_results</a>('
<a name="l1452"><span class="linenum">1452</span></a>                      SELECT itag_itm_ID, tag_name
<a name="l1453"><span class="linenum">1453</span></a>                          FROM T_items__itemtag INNER JOIN T_items__tag ON itag_tag_ID = tag_ID
<a name="l1454"><span class="linenum">1454</span></a>                       WHERE itag_itm_ID IN ('.<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('quote')" href="../../../_functions/quote.html" onMouseOver="funcPopup(event,'quote')">quote</a>(<a class="var it9986" onMouseOver="hilite(9986)" onMouseOut="lolite()" onClick="logVariable('prefetch_item_IDs')" href="../../../_variables/prefetch_item_IDs.html">$prefetch_item_IDs</a>).')
<a name="l1455"><span class="linenum">1455</span></a>                       ORDER BY tag_name', <a class="constant" onClick="logConstant('OBJECT')" href="../../../_constants/OBJECT.html" onMouseOver="constPopup(event,'OBJECT')">OBJECT</a>, 'Get tags for items' ) as <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a> )
<a name="l1456"><span class="linenum">1456</span></a>                  {
<a name="l1457"><span class="linenum">1457</span></a>                      <a class="var it5767" onMouseOver="hilite(5767)" onMouseOut="lolite()" onClick="logVariable('ItemTagsCache')" href="../../../_variables/ItemTagsCache.html">$ItemTagsCache</a>[<a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('itag_itm_ID')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/itag_itm_ID.html">itag_itm_ID</a>][] = <a class="var it516" onMouseOver="hilite(516)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('tag_name')" class="var it10731" onMouseOver="hilite(10731)" onMouseOut="lolite()" href="../../../_variables/tag_name.html">tag_name</a>;
<a name="l1458"><span class="linenum">1458</span></a>                  }
<a name="l1459"><span class="linenum">1459</span></a>  
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment">                //pre_dump( $ItemTagsCache );</span>
<a name="l1461"><span class="linenum">1461</span></a>              }
<a name="l1462"><span class="linenum">1462</span></a>  
<a name="l1463"><span class="linenum">1463</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a> = <a class="var it5767" onMouseOver="hilite(5767)" onMouseOut="lolite()" onClick="logVariable('ItemTagsCache')" href="../../../_variables/ItemTagsCache.html">$ItemTagsCache</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>];
<a name="l1464"><span class="linenum">1464</span></a>          }
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tags')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/tags.html">tags</a>;
<a name="l1467"><span class="linenum">1467</span></a>      }
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>  
<a name="l1470"><span class="linenum">1470</span></a>      <span class="comment">/**</span>
<a name="l1471"><span class="linenum">1471</span></a>  <span class="comment">     * Get a list of item IDs from $MainList and $ItemList, if they are loaded.</span>
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">     * This is used for prefetching item related data for the whole list(s).</span>
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">     * This will at least return the item's ID itself.</span>
<a name="l1474"><span class="linenum">1474</span></a>  <span class="comment">     * @return array</span>
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment">     */</span>
<a name="l1476"><span class="linenum">1476</span></a>  	function <a class="function" onClick="logFunction('get_prefetch_itemlist_IDs')" href="../../../_functions/get_prefetch_itemlist_ids.html" onMouseOver="funcPopup(event,'get_prefetch_itemlist_ids')">get_prefetch_itemlist_IDs</a>()
<a name="l1477"><span class="linenum">1477</span></a>      {
<a name="l1478"><span class="linenum">1478</span></a>          global <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../_variables/MainList.html">$MainList</a>, <a class="var it2681" onMouseOver="hilite(2681)" onMouseOut="lolite()" onClick="logVariable('ItemList')" href="../../../_variables/ItemList.html">$ItemList</a>;
<a name="l1479"><span class="linenum">1479</span></a>  
<a name="l1480"><span class="linenum">1480</span></a>  <span class="comment">        // Add the current ID to the list to prefetch, if it's not in the MainList/ItemList (e.g. featured item).</span>
<a name="l1481"><span class="linenum">1481</span></a>          <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>);
<a name="l1482"><span class="linenum">1482</span></a>  
<a name="l1483"><span class="linenum">1483</span></a>          if( <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../_variables/MainList.html">$MainList</a> )
<a name="l1484"><span class="linenum">1484</span></a>          {
<a name="l1485"><span class="linenum">1485</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it1234" onMouseOver="hilite(1234)" onMouseOut="lolite()" onClick="logVariable('MainList')" href="../../../_variables/MainList.html">$MainList</a>-&gt;<a class="function" onClick="logFunction('get_page_ID_array')" href="../../../_functions/get_page_id_array.html" onMouseOver="funcPopup(event,'get_page_id_array')">get_page_ID_array</a>());
<a name="l1486"><span class="linenum">1486</span></a>          }
<a name="l1487"><span class="linenum">1487</span></a>          if( <a class="var it2681" onMouseOver="hilite(2681)" onMouseOut="lolite()" onClick="logVariable('ItemList')" href="../../../_variables/ItemList.html">$ItemList</a> )
<a name="l1488"><span class="linenum">1488</span></a>          {
<a name="l1489"><span class="linenum">1489</span></a>              <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a>, <a class="var it2681" onMouseOver="hilite(2681)" onMouseOut="lolite()" onClick="logVariable('ItemList')" href="../../../_variables/ItemList.html">$ItemList</a>-&gt;<a class="function" onClick="logFunction('get_page_ID_array')" href="../../../_functions/get_page_id_array.html" onMouseOver="funcPopup(event,'get_page_id_array')">get_page_ID_array</a>());
<a name="l1490"><span class="linenum">1490</span></a>          }
<a name="l1491"><span class="linenum">1491</span></a>  
<a name="l1492"><span class="linenum">1492</span></a>          return <a class="phpfunction" onClick="logFunction('array_unique')" href="../../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>( <a class="var it86" onMouseOver="hilite(86)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../../_variables/r.html">$r</a> );
<a name="l1493"><span class="linenum">1493</span></a>      }
<a name="l1494"><span class="linenum">1494</span></a>  
<a name="l1495"><span class="linenum">1495</span></a>  
<a name="l1496"><span class="linenum">1496</span></a>      <span class="comment">/**</span>
<a name="l1497"><span class="linenum">1497</span></a>  <span class="comment">     * Get a link to history of Item</span>
<a name="l1498"><span class="linenum">1498</span></a>  <span class="comment">     *</span>
<a name="l1499"><span class="linenum">1499</span></a>  <span class="comment">     * @return string A link to history</span>
<a name="l1500"><span class="linenum">1500</span></a>  <span class="comment">     */</span>
<a name="l1501"><span class="linenum">1501</span></a>  	function <a class="function" onClick="logFunction('get_history_link')" href="../../../_functions/get_history_link.html" onMouseOver="funcPopup(event,'get_history_link')">get_history_link</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1502"><span class="linenum">1502</span></a>      {
<a name="l1503"><span class="linenum">1503</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1504"><span class="linenum">1504</span></a>                  'before'    =&gt; '',
<a name="l1505"><span class="linenum">1505</span></a>                  'after'     =&gt; '',
<a name="l1506"><span class="linenum">1506</span></a>                  'link_text' =&gt; '<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>$' // Use a mask <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>$ or some other text
<a name="l1507"><span class="linenum">1507</span></a>              ), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> );
<a name="l1508"><span class="linenum">1508</span></a>  
<a name="l1509"><span class="linenum">1509</span></a>          if( ( <a class="var it9988" onMouseOver="hilite(9988)" onMouseOut="lolite()" onClick="logVariable('history_url')" href="../../../_variables/history_url.html">$history_url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_history_url')" href="../../../_functions/get_history_url.html" onMouseOver="funcPopup(event,'get_history_url')">get_history_url</a>() ) === false )
<a name="l1510"><span class="linenum">1510</span></a>          { // No url available for current user, Don't display a link
<a name="l1511"><span class="linenum">1511</span></a>              return;
<a name="l1512"><span class="linenum">1512</span></a>          }
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>  <span class="comment">        // Replace all masks with values</span>
<a name="l1515"><span class="linenum">1515</span></a>          <a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>( '<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../../_variables/icon.html">$icon</a>$', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('history_info_icon')" href="../../../_functions/history_info_icon.html" onMouseOver="funcPopup(event,'history_info_icon')">history_info_icon</a>(), <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['link_text'] );
<a name="l1516"><span class="linenum">1516</span></a>  
<a name="l1517"><span class="linenum">1517</span></a>          return <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['before']
<a name="l1518"><span class="linenum">1518</span></a>              .'&lt;a href=&quot;'.<a class="var it9988" onMouseOver="hilite(9988)" onMouseOut="lolite()" onClick="logVariable('history_url')" href="../../../_variables/history_url.html">$history_url</a>.'&quot;&gt;'.<a class="var it1606" onMouseOver="hilite(1606)" onMouseOut="lolite()" onClick="logVariable('link_text')" href="../../../_variables/link_text.html">$link_text</a>.'&lt;/a&gt;'
<a name="l1519"><span class="linenum">1519</span></a>              .<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['after'];
<a name="l1520"><span class="linenum">1520</span></a>      }
<a name="l1521"><span class="linenum">1521</span></a>  
<a name="l1522"><span class="linenum">1522</span></a>  
<a name="l1523"><span class="linenum">1523</span></a>      <span class="comment">/**</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment">     * Get URL to history of Item</span>
<a name="l1525"><span class="linenum">1525</span></a>  <span class="comment">     *</span>
<a name="l1526"><span class="linenum">1526</span></a>  <span class="comment">     * @param string Glue between url params</span>
<a name="l1527"><span class="linenum">1527</span></a>  <span class="comment">     * @return string|boolean URL to history OR False when user cannot see a history</span>
<a name="l1528"><span class="linenum">1528</span></a>  <span class="comment">     */</span>
<a name="l1529"><span class="linenum">1529</span></a>  	function <a class="function" onClick="logFunction('get_history_url')" href="../../../_functions/get_history_url.html" onMouseOver="funcPopup(event,'get_history_url')">get_history_url</a>( <a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a> = '&amp;amp;' )
<a name="l1530"><span class="linenum">1530</span></a>      {
<a name="l1531"><span class="linenum">1531</span></a>          global <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>, <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>;
<a name="l1532"><span class="linenum">1532</span></a>  
<a name="l1533"><span class="linenum">1533</span></a>          if( ! <a class="function" onClick="logFunction('is_logged_in')" href="../../../_functions/is_logged_in.html" onMouseOver="funcPopup(event,'is_logged_in')">is_logged_in</a>() || ! <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('current_User')" href="../../../_variables/current_User.html">$current_User</a>-&gt;<a class="function" onClick="logFunction('check_perm')" href="../../../_functions/check_perm.html" onMouseOver="funcPopup(event,'check_perm')">check_perm</a>( 'item_post!CURSTATUS', 'edit', false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a> ) )
<a name="l1534"><span class="linenum">1534</span></a>          { // Current user cannot see a history
<a name="l1535"><span class="linenum">1535</span></a>              return false;
<a name="l1536"><span class="linenum">1536</span></a>          }
<a name="l1537"><span class="linenum">1537</span></a>  
<a name="l1538"><span class="linenum">1538</span></a>          return <a class="var it136" onMouseOver="hilite(136)" onMouseOut="lolite()" onClick="logVariable('admin_url')" href="../../../_variables/admin_url.html">$admin_url</a>.'?ctrl=items'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'action=history'.<a class="var it387" onMouseOver="hilite(387)" onMouseOut="lolite()" onClick="logVariable('glue')" href="../../../_variables/glue.html">$glue</a>.'p='.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ID')" class="var it10673" onMouseOver="hilite(10673)" onMouseOut="lolite()" href="../../../_variables/ID.html">ID</a>;
<a name="l1539"><span class="linenum">1539</span></a>      }
<a name="l1540"><span class="linenum">1540</span></a>  
<a name="l1541"><span class="linenum">1541</span></a>  
<a name="l1542"><span class="linenum">1542</span></a>      <span class="comment">/**</span>
<a name="l1543"><span class="linenum">1543</span></a>  <span class="comment">     * Get the links to all chapters of this item</span>
<a name="l1544"><span class="linenum">1544</span></a>  <span class="comment">     *</span>
<a name="l1545"><span class="linenum">1545</span></a>  <span class="comment">     * @param array Params</span>
<a name="l1546"><span class="linenum">1546</span></a>  <span class="comment">     * @return string The chapter links</span>
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment">     */</span>
<a name="l1548"><span class="linenum">1548</span></a>  	function <a class="function" onClick="logFunction('get_chapter_links')" href="../../../_functions/get_chapter_links.html" onMouseOver="funcPopup(event,'get_chapter_links')">get_chapter_links</a>( <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array() )
<a name="l1549"><span class="linenum">1549</span></a>      {
<a name="l1550"><span class="linenum">1550</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(
<a name="l1551"><span class="linenum">1551</span></a>                  'separator' =&gt; ', ',
<a name="l1552"><span class="linenum">1552</span></a>              ) );
<a name="l1553"><span class="linenum">1553</span></a>  
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">        // Get all item chapters:</span>
<a name="l1555"><span class="linenum">1555</span></a>          <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_Chapters')" href="../../../_functions/get_chapters.html" onMouseOver="funcPopup(event,'get_chapters')">get_Chapters</a>();
<a name="l1556"><span class="linenum">1556</span></a>  
<a name="l1557"><span class="linenum">1557</span></a>          if( empty( <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> ) )
<a name="l1558"><span class="linenum">1558</span></a>          {    // No chapters for this item, Return empty string:
<a name="l1559"><span class="linenum">1559</span></a>              return '';
<a name="l1560"><span class="linenum">1560</span></a>          }
<a name="l1561"><span class="linenum">1561</span></a>  
<a name="l1562"><span class="linenum">1562</span></a>          <a class="var it9989" onMouseOver="hilite(9989)" onMouseOut="lolite()" onClick="logVariable('chapter_links')" href="../../../_variables/chapter_links.html">$chapter_links</a> = '';
<a name="l1563"><span class="linenum">1563</span></a>          foreach( <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> as <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../../_variables/c.html">$c</a> =&gt; <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a> )
<a name="l1564"><span class="linenum">1564</span></a>          {
<a name="l1565"><span class="linenum">1565</span></a>              <a class="var it9989" onMouseOver="hilite(9989)" onMouseOut="lolite()" onClick="logVariable('chapter_links')" href="../../../_variables/chapter_links.html">$chapter_links</a> .= '&lt;a href=&quot;'.<a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get_permanent_url')" href="../../../_functions/get_permanent_url.html" onMouseOver="funcPopup(event,'get_permanent_url')">get_permanent_url</a>().'&quot;&gt;'.<a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('Chapter')" href="../../../_variables/Chapter.html">$Chapter</a>-&gt;<a class="function" onClick="logFunction('get_path_name')" href="../../../_functions/get_path_name.html" onMouseOver="funcPopup(event,'get_path_name')">get_path_name</a>().'&lt;/a&gt;';
<a name="l1566"><span class="linenum">1566</span></a>              if( <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../../_variables/c.html">$c</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>( <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('chapters')" href="../../../_variables/chapters.html">$chapters</a> ) - 1 )
<a name="l1567"><span class="linenum">1567</span></a>              {    // Add separator between chapters:
<a name="l1568"><span class="linenum">1568</span></a>                  <a class="var it9989" onMouseOver="hilite(9989)" onMouseOut="lolite()" onClick="logVariable('chapter_links')" href="../../../_variables/chapter_links.html">$chapter_links</a> .= <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['separator'];
<a name="l1569"><span class="linenum">1569</span></a>              }
<a name="l1570"><span class="linenum">1570</span></a>          }
<a name="l1571"><span class="linenum">1571</span></a>  
<a name="l1572"><span class="linenum">1572</span></a>          return <a class="var it9989" onMouseOver="hilite(9989)" onMouseOut="lolite()" onClick="logVariable('chapter_links')" href="../../../_variables/chapter_links.html">$chapter_links</a>;
<a name="l1573"><span class="linenum">1573</span></a>      }
<a name="l1574"><span class="linenum">1574</span></a>  }
<a name="l1575"><span class="linenum">1575</span></a>  
<a name="l1576"><span class="linenum">1576</span></a>  ?&gt;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'mod_time': ['mod_time', 'Template function: display last mod time (datetime) of Item ', [['inc/items/model','_itemlight.class.php',980]], 0],
'postcats_get_byid': ['postcats_get_byid', 'Get category associations with given item ', [['inc/collections/model','_category.funcs.php',215]], 7],
'set': ['set', 'Set param value ', [['inc/items/model','_item.class.php',4909],['inc/tools/model','_emailaddress.class.php',76],['inc/_core/model/dataobjects','_dataobject.class.php',874],['inc/plugins/model','_pluginusersettings.class.php',64],['inc/regional/model','_country.class.php',94],['inc/users/model','_user.class.php',2059],['inc/settings/model','_abstractsettings.class.php',427],['inc/messaging/model','_thread.class.php',211],['inc/regional/model','_subregion.class.php',107],['inc/users/model','_usersettings.class.php',184],['plugins','_calendar.plugin.php',613],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',81],['inc/files/model','_filetype.class.php',128],['inc/sessions/model','_session.class.php',451],['inc/collections/model','_blog.class.php',1104],['inc/comments/model','_comment.class.php',400],['inc/cron/model','_cronjob.class.php',64],['inc/plugins/model','_pluginsettings.class.php',52],['inc/users/model','_userfield.class.php',257],['inc/regional/model','_city.class.php',98],['inc/slugs/model','_slug.class.php',80],['inc/users/model','_group.class.php',212],['inc/regional/model','_currency.class.php',84],['inc/widgets/model','_widget.class.php',369],['inc/regional/model','_region.class.php',90],['inc/users/model','_groupsettings.class.php',140],['inc/chapters/model','_chapter.class.php',809],['inc/antispam/model','_iprange.class.php',72],['inc/items/model','_itemtag.class.php',61],['inc/sessions/model','_goal.class.php',201],['inc/items/model','_itemlight.class.php',1328],['inc/users/model','_userfieldgroup.class.php',83],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',148]], 1238],
'get_setting': ['get_setting', 'Get a setting. ', [['inc/items/model','_item.class.php',6656],['inc/skins/model','_skin.class.php',661],['inc/collections/model','_blog.class.php',2109]], 728],
'mod_date': ['mod_date', 'Template function: display last mod date (datetime) of Item ', [['inc/items/model','_itemlight.class.php',968]], 2],
'get_chapters': ['get_chapters', 'Get chapters by collection ID and parent ID ', [['inc/chapters/model','_chaptercache.class.php',346],['inc/items/model','_itemlight.class.php',610]], 14],
'locale_flag': ['locale_flag', 'Template tag ', [['inc/items/model','_itemlight.class.php',888],['inc/locales','_locale.funcs.php',480]], 8],
'dataobject': ['dataobject', 'Constructor ', [['inc/_core/model/dataobjects','_dataobject.class.php',65]], 35],
'is_special': ['is_special', 'Check if this post type is special( reserved in system ) ', [['inc/items/model','_itemtype.class.php',533],['inc/items/model','_itemlight.class.php',218]], 8],
'get_page_id_array': ['get_page_id_array', 'Get an array of IDs for current page ', [['inc/_core/ui/results','_results.class.php',749]], 13],
'itemlight': ['itemlight', 'Constructor ', [['inc/items/model','_itemlight.class.php',113]], 2],
'get_blog_id': ['get_blog_id', '', [['inc/items/model','_itemlight.class.php',789]], 38],
'load_blog': ['load_blog', 'Set Blog ', [['inc/links/model','_linkcomment.class.php',131],['inc/links/model','_linkitem.class.php',187],['inc/chapters/model','_chapter.class.php',474],['inc/links/model','_linkuser.class.php',139],['inc/items/model','_itemlight.class.php',1413]], 69],
'get_var': ['get_var', 'Get one variable from the DB - see docs for more detail ', [['inc/_core/model/db','_db.class.php',952]], 166],
'disp': ['disp', 'Display a member param by its name ', [['inc/_core/model/dataobjects','_dataobject.class.php',861],['inc/_core/model','_messages.class.php',152],['inc/_core/model','_log.class.php',241],['inc/_core/model','_log.class.php',597]], 66],
'is_same_url': ['is_same_url', 'Compare two given URLs, if they are the same. This converts all urlencoded chars (e.g. "%AA") to lowercase. It appears that some webservers use lowercase for the chars (Apache), while others use uppercase (lighttpd). ', [['inc/_core','_url.funcs.php',805]], 11],
'load_subset': ['load_subset', 'Load a keyed subset of the cache ', [['inc/chapters/model','_chaptercache.class.php',293]], 4],
'add_navigation_param': ['add_navigation_param', 'Add nav_target param into the end of the url, but only if it is necessary ', [['inc/items/model','_itemlight.class.php',530]], 8],
'dget': ['dget', 'Get a ready-to-display member param by its name ', [['inc/_core/model/dataobjects','_dataobject.class.php',846]], 252],
'get_permanent_link': ['get_permanent_link', 'Returns a permalink link to the Comment ', [['inc/comments/model','_comment.class.php',2414],['inc/items/model','_itemlight.class.php',1066]], 23],
'permanent_link': ['permanent_link', 'Displays a permalink link to the Comment ', [['inc/comments/model','_comment.class.php',2467],['inc/items/model','_itemlight.class.php',1121]], 22],
'history_info_icon': ['history_info_icon', 'Create icon with dataobject history ', [['inc/_core/model/dataobjects','_dataobject.class.php',1102]], 3],
'get_icon': ['get_icon', 'Return the img html code of the icon ', [['inc/files/model','_filetype.class.php',153],['inc/files/model','_file.class.php',978],['inc/_core','_misc.funcs.php',4122]], 428],
'load_list': ['load_list', 'Load a list of objects into the cache. ', [['inc/_core/model/dataobjects','_dataobjectcache.class.php',213]], 21],
'type': ['type', 'Template function: display type of item ', [['inc/items/model','_itemlight.class.php',1283]], 116],
'get': ['get', 'Get a member param by its name ', [['inc/items/model','_item.class.php',6187],['inc/_core/model/db','_sql.class.php',50],['inc/_core/model/dataobjects','_dataobject.class.php',834],['inc/plugins/model','_pluginusersettings.class.php',40],['inc/users/model','_user.class.php',1227],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',145],['inc/settings/model','_abstractsettings.class.php',252],['inc/settings/model','_generalsettings.class.php',379],['inc/users/model','_usersettings.class.php',148],['inc/_ext/swift/classes/Swift/Mime','HeaderSet.php',95],['inc/links/model','_linkcomment.class.php',150],['inc/links/model','_linkitem.class.php',205],['inc/sessions/model','_session.class.php',428],['inc/collections/model','_blog.class.php',1842],['inc/comments/model','_comment.class.php',386],['inc/cron/model','_cronjob.class.php',89],['inc/plugins/model','_pluginsettings.class.php',40],['inc/links/model','_linkowner.class.php',218],['plugins/twitter_plugin/twitteroauth','twitteroauth.php',146],['inc/slugs/model','_slug.class.php',68],['inc/users/model','_groupsettings.class.php',124],['inc/chapters/model','_chapter.class.php',600],['inc/antispam/model','_iprange.class.php',60],['inc/files/model','_file.class.php',555],['inc/links/model','_linkuser.class.php',154],['inc/_ext/swift/classes/Swift/Mime','SimpleHeaderSet.php',165]], 2630],
'title': ['title', 'Template function: display title for item and link to related URL ', [['inc/items/model','_itemlight.class.php',1154]], 58],
'url_add_param': ['url_add_param', 'Add param(s) at the end of an URL, using either "?" or "&amp;" depending on existing url ', [['inc/_core','_url.funcs.php',525]], 256],
'issue_date': ['issue_date', 'Template function: display issue date (datetime) of Item ', [['inc/items/model','_itemlight.class.php',827]], 5],
'issue_time': ['issue_time', 'Template function: display issue time (datetime) of Item ', [['inc/items/model','_itemlight.class.php',837]], 25],
'get_url_path': ['get_url_path', '', [['inc/chapters/model','_chapter.class.php',365]], 7],
'set_param': ['set_param', 'Set the value of a param (by force! :P) ', [['inc/_core','_param.funcs.php',1678],['inc/_core/model/dataobjects','_dataobject.class.php',890]], 127],
'locale_temp_switch': ['locale_temp_switch', 'Template function: Temporarily switch to this post\'s locale or to current blog\'s locale depending on setting ', [['inc/items/model','_itemlight.class.php',919],['inc/locales','_locale.funcs.php',250]], 62],
'get_archive_url': ['get_archive_url', 'Get archive page URL ', [['inc/collections/model','_blog.class.php',1426],['inc/items/model','_itemlight.class.php',334]], 2],
'get_results': ['get_results', 'Return the the query as a result set - see docs for more details ', [['inc/_core/model/db','_db.class.php',1083]], 152],
'format_to_output': ['format_to_output', 'Format a string/content for being output ', [['inc/_core','_misc.funcs.php',264]], 318],
'get_permanent_url': ['get_permanent_url', 'Generate permalink to this comment. ', [['inc/comments/model','_comment.class.php',2372],['inc/chapters/model','_chapter.class.php',379],['inc/items/model','_itemlight.class.php',376]], 155],
'is_logged_in': ['is_logged_in', 'is_logged_in(-) ', [['inc/users/model','_user.funcs.php',38]], 274],
'get_tags': ['get_tags', 'Retrieves all tags from published posts ', [['inc/collections/model','_blog.funcs.php',835]], 12],
'quote': ['quote', 'Quote a msgid/msgstr, preferrable with single quotes. ', [['inc/locales','_pofile.class.php',261],['inc/_core/model/db','_db.class.php',491]], 1085],
'locale_timefmt': ['locale_timefmt', 'Returns the current locale\'s default time format ', [['inc/locales','_locale.funcs.php',404]], 17],
'mysql2date': ['mysql2date', 'Format a MYSQL date. ', [['inc/_core','_misc.funcs.php',1302]], 45],
'check_perm': ['check_perm', 'Check module permission ', [['inc/_core/model','_module.class.php',234],['inc/users/model','_user.class.php',2234],['inc/messaging/model','_message.class.php',595],['inc/messaging/model','_thread.class.php',482],['inc/links/model','_linkcomment.class.php',49],['inc/links/model','_linkitem.class.php',50],['inc/users/model','_group.class.php',265],['inc/sessions/model','_goal.class.php',94],['inc/links/model','_linkuser.class.php',47]], 1082],
'url_add_tail': ['url_add_tail', 'Add a tail (starting with "/") at the end of an URL before any params (starting with "?") ', [['inc/_core','_url.funcs.php',575]], 38],
'get_chapter_links': ['get_chapter_links', 'Get the links to all chapters of this item ', [['inc/items/model','_itemlight.class.php',1542]], 2],
'lang': ['lang', 'Template function: display locale for item ', [['inc/items/model','_itemlight.class.php',870]], 37],
'load_class': ['load_class', 'In PHP4, this really loads the class. In PHP5, it\'s smarter than that: It only registers the class & file name so that __autoload() can later load the class IF and ONLY IF the class is actually needed during execution. ', [['inc/_core','_class5.funcs.php',64],['inc/_core','_class4.funcs.php',19]], 435],
'categories': ['categories', 'Template function: list all the category names ', [['inc/items/model','_itemlight.class.php',446]], 36],
'language': ['language', 'Template function: display language name for item ', [['inc/items/model','_itemlight.class.php',939]], 2],
'add': ['add', '', [['inc/_ext/pclzip','pclzip.lib.php',455],['rsc/js/tiny_mce/plugins/spellchecker/includes','Engine.php',141],['inc/skins/model','_skincache.class.php',50],['inc/_core/model','_messages.class.php',114],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',33],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',20],['inc/files/model','_filetypecache.class.php',38],['inc/_core/model/dataobjects','_dataobjectcache.class.php',339],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',33],['inc/_core/model','_log.class.php',109],['inc/_core/model','_log.class.php',577],['inc/users/model','_usercache.class.php',239],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',44],['inc/links/model','_linkcache.class.php',86],['inc/users/model','_groupsettings.class.php',103],['inc/chapters/model','_chaptercache.class.php',98],['inc/files/model','_filelist.class.php',373],['inc/collections/model','_blogcache.class.php',50]], 1695],
'get_mod_date': ['get_mod_date', 'Get last mod date (datetime) of Item ', [['inc/items/model','_itemlight.class.php',951]], 7],
'is_intro': ['is_intro', 'Check if this post type is used for intro posts ', [['inc/items/model','_itemtype.class.php',571],['inc/items/model','_itemlight.class.php',232]], 45],
'permanent_url': ['permanent_url', 'Template function: display permalink to this comment ', [['inc/comments/model','_comment.class.php',2400],['inc/items/model','_itemlight.class.php',1052]], 9],
'locale': ['locale', 'Template function: display locale for item ', [['inc/items/model','_itemlight.class.php',879]], 9],
'get_class_db_config': ['get_class_db_config', 'Get this class db table config params ', [['inc/_core/model/dataobjects','_dataobject.class.php',104],['inc/users/model','_user.class.php',231],['inc/messaging/model','_message.class.php',87],['inc/messaging/model','_thread.class.php',147],['inc/sessions/model','_session.class.php',259],['inc/comments/model','_comment.class.php',250],['inc/links/model','_link.class.php',84],['inc/chapters/model','_chapter.class.php',120],['inc/files/model','_file.class.php',250],['inc/items/model','_itemlight.class.php',199]], 7],
'is_featured': ['is_featured', 'Is this a featured post (any intro post will return false even if it\'s checked as "featured") ', [['inc/items/model','_itemlight.class.php',243]], 9],
'debug_die': ['debug_die', 'Outputs Unexpected Error message. When in debug mode it also prints a backtrace. ', [['inc/_core','_misc.funcs.php',2523]], 225],
'get_chapter_url': ['get_chapter_url', 'Generate a link to the post in the category ', [['inc/items/model','_itemlight.class.php',355]], 1],
'remove_seconds': ['remove_seconds', 'Get datetime rounded to lower minute. This is meant to remove seconds and leverage MySQL\'s query cache by having SELECT queries remain identical for 60 seconds instead of just 1. ', [['inc/_core','_misc.funcs.php',1601]], 6],
'param': ['param', 'Sets a parameter with values from the request or to provided default, except if param is already set! ', [['inc/_core','_param.funcs.php',35]], 2141],
'is_part_of_blog': ['is_part_of_blog', 'Check if current item has at least one category, which belongs to the given blog ', [['inc/items/model','_itemlight.class.php',995]], 2],
'locale_shorttimefmt': ['locale_shorttimefmt', 'Returns the current locale\'s default short time format ', [['inc/locales','_locale.funcs.php',414]], 4],
'locale_datefmt': ['locale_datefmt', 'Returns the current locale\'s default date format ', [['inc/locales','_locale.funcs.php',385]], 71],
'clear': ['clear', 'Empty the message list ', [['inc/_ext/swift/classes/Swift/Plugins','MessageLogger.php',50],['inc/_ext/swift/classes/Swift/Plugins/Reporters','HitReporter.php',54],['inc/_core/model','_messages.class.php',102],['inc/_ext/swift/classes/Swift/Plugins','LoggerPlugin.php',43],['inc/_ext/swift/classes/Swift/Plugins','Logger.php',27],['inc/_core/model/dataobjects','_dataobjectcache.class.php',437],['inc/_ext/swift/classes/Swift/Plugins/Loggers','EchoLogger.php',47],['inc/_core/model','_log.class.php',84],['inc/_core/model','_log.class.php',587],['inc/users/model','_usercache.class.php',376],['inc/files/model','_filerootcache.class.php',172],['inc/_ext/swift/classes/Swift/Plugins/Loggers','ArrayLogger.php',57],['inc/links/model','_linkcache.class.php',517],['inc/chapters/model','_chaptercache.class.php',81]], 99],
'get_issue_date': ['get_issue_date', 'returns issue date (datetime) of Item ', [['inc/items/model','_itemlight.class.php',800]], 3],
'get_delete_cascades': ['get_delete_cascades', 'Get delete cascade settings ', [['inc/email_campaigns/model','_emailcampaign.class.php',71],['inc/_core/model/dataobjects','_dataobject.class.php',152],['inc/users/model','_user.class.php',278],['inc/skins/model','_skin.class.php',95],['inc/messaging/model','_message.class.php',111],['inc/messaging/model','_thread.class.php',171],['inc/items/model','_itemtype.class.php',134],['inc/collections/model','_blog.class.php',190],['inc/comments/model','_comment.class.php',274],['inc/users/model','_userfield.class.php',74],['inc/links/model','_link.class.php',108],['inc/items/model','_itemtag.class.php',48],['inc/sessions/model','_goal.class.php',62],['inc/items/model','_itemlight.class.php',175]], 1],
'get_history_link': ['get_history_link', 'Get a link to history of Item ', [['inc/items/model','_itemlight.class.php',1496]], 4],
'strmaxlen': ['strmaxlen', 'Crop string to maxlen with &hellip; (default tail) at the end if needed. ', [['inc/_core','_misc.funcs.php',451]], 17],
'get_excerpt': ['get_excerpt', 'Template tag: get excerpt This light version does display only. It never tries to auto-generate the excerpt. ', [['inc/items/model','_itemlight.class.php',1312]], 2],
't_': ['t_', 'Provide translation in the context of this module: ', [['inc/_core/model','_module.class.php',67],['rsc/js','blog_widgets.js',467],['inc/skins/model','_skin.class.php',1131],['inc/plugins','_plugin.class.php',2799],['inc/locales','_locale.funcs.php',29],['inc/locales','_locale.funcs.php',226]], 12118],
'get_prefetch_itemlist_ids': ['get_prefetch_itemlist_ids', '', [['inc/items/model','_itemlight.class.php',1476]], 1],
'get_history_url': ['get_history_url', 'Get URL to history of Item ', [['inc/items/model','_itemlight.class.php',1523]], 2],
'utf8_strip_tags': ['utf8_strip_tags', 'utf8_strip_tags( ) ', [['inc/_ext','_portable_utf8.php',1104]], 9],
'main_category': ['main_category', 'Template function: display main category name ', [['inc/items/model','_itemlight.class.php',573]], 1],
'get_delete_restrictions': ['get_delete_restrictions', 'Get delete restriction settings ', [['inc/_core/model/dataobjects','_dataobject.class.php',129],['inc/items/model','_itemstatus.class.php',50],['inc/regional/model','_country.class.php',55],['inc/users/model','_user.class.php',255],['inc/skins/model','_skin.class.php',79],['inc/items/model','_itemtype.class.php',121],['inc/regional/model','_subregion.class.php',64],['inc/regional/model','_city.class.php',55],['inc/slugs/model','_slug.class.php',54],['inc/users/model','_group.class.php',108],['inc/regional/model','_currency.class.php',49],['inc/regional/model','_region.class.php',51],['inc/chapters/model','_chapter.class.php',144],['inc/sessions/model','_goalcat.class.php',46],['inc/files/model','_file.class.php',274],['inc/items/model','_itemlight.class.php',161],['inc/users/model','_userfieldgroup.class.php',51],['inc/users/model','_organization.class.php',54]], 1],
'is_admin_page': ['is_admin_page', 'Is the current page an admin/backoffice page? ', [['inc/_core','_misc.funcs.php',5028]], 118],
'get_path_name': ['get_path_name', 'Get name of this chapter as path of all parent chapters ', [['inc/chapters/model','_chapter.class.php',781]], 1],
'check_cross_post_nav': ['check_cross_post_nav', 'Check if cross post navigation should stay in the current blog or not. Also check that this item has at least one category that belongs to the given blog. If current blog is the same as item blog then, this function will return false, because no need to check. ', [['inc/items/model','_itemlight.class.php',1018]], 3],
'get_title': ['get_title', 'Get title of comment, e.g. "Comment from: Foo Bar" ', [['inc/comments/model','_comment.class.php',2877],['skins_adm','_adminUI_general.class.php',314],['inc/widgets/widgets','_coll_xml_feeds.widget.php',109],['inc/items/model','_itemlight.class.php',1166]], 29],
'get_single_url': ['get_single_url', 'Generate a single post link for the item ', [['inc/items/model','_itemlight.class.php',254]], 4],
'gen_blogurl': ['gen_blogurl', 'Generate blog URL. That is the URL of the main page/home page of the blog. This will nto necessarily be a folder. For example, it can end in index.php?blog=4 ', [['inc/collections/model','_blog.class.php',1128]], 94],
'explode': ['explode', '', [], 263],
'htmlspecialchars': ['htmlspecialchars', '', [], 152],
'is_null': ['is_null', '', [], 299],
'defined': ['defined', '', [], 962],
'strtotime': ['strtotime', '', [], 46],
'count': ['count', '', [], 928],
'date': ['date', '', [], 446],
'implode': ['implode', '', [], 571],
'array_diff': ['array_diff', '', [], 31],
'str_replace': ['str_replace', '', [], 531],
'array_unique': ['array_unique', '', [], 38],
'array_keys': ['array_keys', '', [], 94],
'in_array': ['in_array', '', [], 417],
'array_merge': ['array_merge', '', [], 702],
'intval': ['intval', '', [], 221]};
CLASS_DATA={
'item': ['item', 'Item Class ', [['inc/items/model','_item.class.php',25]], 97],
'itemtype': ['itemtype', 'ItemType Class ', [['inc/items/model','_itemtype.class.php',19]], 20],
'dataobject': ['dataobject', 'Data Object Base Class ', [['inc/_core/model/dataobjects','_dataobject.class.php',18]], 37],
'itemlight': ['itemlight', 'ItemLight Class ', [['inc/items/model','_itemlight.class.php',20]], 2]};
CONST_DATA={
'EVO_MAIN_INIT': ['EVO_MAIN_INIT', '', [['install','index.php',26],['inc','_main.inc.php',36],['install','debug.php',22]], 912],
'ARRAY_A': ['ARRAY_A', '', [['inc/_core/model/db','_db.class.php',50]], 34],
'OBJECT': ['OBJECT', '', [['inc/_core/model/db','_db.class.php',49]], 54]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Sat Nov 21 22:13:19 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
